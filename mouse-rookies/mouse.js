/*
 howler.js v2.2.4 | (c) 2013-2020, James Simpson of GoldFire Studios | MIT License | howlerjs.com  Spatial Plugin  @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var $jscomp = $jscomp || {};
$jscomp.scope = {};
$jscomp.arrayIteratorImpl = function (ra) {
  var v = 0;
  return function () {
    if (v < ra.length) {
      return {
        done: false,
        value: ra[v++]
      };
    } else {
      return {
        done: true
      };
    }
  };
};
$jscomp.arrayIterator = function (ra) {
  return {
    next: $jscomp.arrayIteratorImpl(ra)
  };
};
$jscomp.ASSUME_ES5 = false;
$jscomp.ASSUME_NO_NATIVE_MAP = false;
$jscomp.ASSUME_NO_NATIVE_SET = false;
$jscomp.SIMPLE_FROUND_POLYFILL = false;
$jscomp.defineProperty = $jscomp.ASSUME_ES5 || typeof Object.defineProperties == "function" ? Object.defineProperty : function (ra, v, I) {
  if (ra != Array.prototype && ra != Object.prototype) {
    ra[v] = I.value;
  }
};
$jscomp.getGlobal = function (ra) {
  ra = [typeof window == "object" && window, typeof self == "object" && self, typeof global == "object" && global, ra];
  for (var v = 0; v < ra.length; ++v) {
    var I = ra[v];
    if (I && I.Math == Math) {
      return I;
    }
  }
  throw Error("Cannot find global object");
};
$jscomp.global = $jscomp.getGlobal(this);
$jscomp.SYMBOL_PREFIX = "jscomp_symbol_";
$jscomp.initSymbol = function () {
  $jscomp.initSymbol = function () {};
  $jscomp.global.Symbol ||= $jscomp.Symbol;
};
$jscomp.SymbolClass = function (ra, v) {
  this.$jscomp$symbol$id_ = ra;
  $jscomp.defineProperty(this, "description", {
    configurable: true,
    writable: true,
    value: v
  });
};
$jscomp.SymbolClass.prototype.toString = function () {
  return this.$jscomp$symbol$id_;
};
$jscomp.Symbol = function () {
  function ra(I) {
    if (this instanceof ra) {
      throw new TypeError("Symbol is not a constructor");
    }
    return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX + (I || "") + "_" + v++, I);
  }
  var v = 0;
  return ra;
}();
$jscomp.initSymbolIterator = function () {
  $jscomp.initSymbol();
  var ra = $jscomp.global.Symbol.iterator;
  ra ||= $jscomp.global.Symbol.iterator = $jscomp.global.Symbol("Symbol.iterator");
  if (typeof Array.prototype[ra] != "function") {
    $jscomp.defineProperty(Array.prototype, ra, {
      configurable: true,
      writable: true,
      value: function () {
        return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this));
      }
    });
  }
  $jscomp.initSymbolIterator = function () {};
};
$jscomp.initSymbolAsyncIterator = function () {
  $jscomp.initSymbol();
  var ra = $jscomp.global.Symbol.asyncIterator;
  ra ||= $jscomp.global.Symbol.asyncIterator = $jscomp.global.Symbol("Symbol.asyncIterator");
  $jscomp.initSymbolAsyncIterator = function () {};
};
$jscomp.iteratorPrototype = function (ra) {
  $jscomp.initSymbolIterator();
  ra = {
    next: ra
  };
  ra[$jscomp.global.Symbol.iterator] = function () {
    return this;
  };
  return ra;
};
$jscomp.iteratorFromArray = function (ra, v) {
  $jscomp.initSymbolIterator();
  if (ra instanceof String) {
    ra += "";
  }
  var I = 0;
  var E = {
    next: function () {
      if (I < ra.length) {
        var O = I++;
        return {
          value: v(O, ra[O]),
          done: false
        };
      }
      E.next = function () {
        return {
          done: true,
          value: undefined
        };
      };
      return E.next();
    }
  };
  E[Symbol.iterator] = function () {
    return E;
  };
  return E;
};
$jscomp.polyfill = function (ra, v, I, E) {
  if (v) {
    I = $jscomp.global;
    ra = ra.split(".");
    for (E = 0; E < ra.length - 1; E++) {
      var O = ra[E];
      if (!(O in I)) {
        I[O] = {};
      }
      I = I[O];
    }
    ra = ra[ra.length - 1];
    E = I[ra];
    v = v(E);
    if (v != E && v != null) {
      $jscomp.defineProperty(I, ra, {
        configurable: true,
        writable: true,
        value: v
      });
    }
  }
};
$jscomp.polyfill("Array.prototype.keys", function (ra) {
  if (ra) {
    return ra;
  } else {
    return function () {
      return $jscomp.iteratorFromArray(this, function (v) {
        return v;
      });
    };
  }
}, "es6", "es3");
$jscomp.checkStringArgs = function (ra, v, I) {
  if (ra == null) {
    throw new TypeError("The 'this' value for String.prototype." + I + " must not be null or undefined");
  }
  if (v instanceof RegExp) {
    throw new TypeError("First argument to String.prototype." + I + " must not be a regular expression");
  }
  return ra + "";
};
$jscomp.polyfill("String.prototype.endsWith", function (ra) {
  if (ra) {
    return ra;
  } else {
    return function (v, I) {
      var E = $jscomp.checkStringArgs(this, v, "endsWith");
      v += "";
      if (I === undefined) {
        I = E.length;
      }
      I = Math.max(0, Math.min(I | 0, E.length));
      for (var O = v.length; O > 0 && I > 0;) {
        if (E[--I] != v[--O]) {
          return false;
        }
      }
      return O <= 0;
    };
  }
}, "es6", "es3");
$jscomp.polyfill("String.fromCodePoint", function (ra) {
  if (ra) {
    return ra;
  } else {
    return function (v) {
      var I = "";
      for (var E = 0; E < arguments.length; E++) {
        var O = Number(arguments[E]);
        if (O < 0 || O > 1114111 || O !== Math.floor(O)) {
          throw new RangeError("invalid_code_point " + O);
        }
        if (O <= 65535) {
          I += String.fromCharCode(O);
        } else {
          O -= 65536;
          I += String.fromCharCode(O >>> 10 & 1023 | 55296);
          I += String.fromCharCode(O & 1023 | 56320);
        }
      }
      return I;
    };
  }
}, "es6", "es3");
$jscomp.polyfill("Array.prototype.fill", function (ra) {
  if (ra) {
    return ra;
  } else {
    return function (v, I, E) {
      var O = this.length || 0;
      if (I < 0) {
        I = Math.max(0, O + I);
      }
      if (E == null || E > O) {
        E = O;
      }
      E = Number(E);
      if (E < 0) {
        E = Math.max(0, O + E);
      }
      for (I = Number(I || 0); I < E; I++) {
        this[I] = v;
      }
      return this;
    };
  }
}, "es6", "es3");
$jscomp.polyfill("String.prototype.startsWith", function (ra) {
  if (ra) {
    return ra;
  } else {
    return function (v, I) {
      var E = $jscomp.checkStringArgs(this, v, "startsWith");
      v += "";
      var O = E.length;
      var P = v.length;
      I = Math.max(0, Math.min(I | 0, E.length));
      for (var q = 0; q < P && I < O;) {
        if (E[I++] != v[q++]) {
          return false;
        }
      }
      return q >= P;
    };
  }
}, "es6", "es3");
(function (ra, v) {
  ra.lime = ra.lime || {};
  ra.lime.$scripts = ra.lime.$scripts || {};
  ra.lime.$scripts.PsychEngine = function (v, E) {
    (function (v, I) {
      function q(a, b) {
        a = Object.create(a);
        for (var c in b) {
          a[c] = b[c];
        }
        if (b.toString !== Object.prototype.toString) {
          a.toString = b.toString;
        }
        return a;
      }
      function O(a) {
        if (a instanceof Array) {
          return new Uf(a);
        } else {
          return a.iterator();
        }
      }
      function l(a, b) {
        if (b == null) {
          return null;
        }
        if (b.__id__ == null) {
          b.__id__ = I.$haxeUID++;
        }
        var c;
        if (a.hx__closures__ == null) {
          a.hx__closures__ = {};
        } else {
          c = a.hx__closures__[b.__id__];
        }
        if (c == null) {
          c = b.bind(a);
          a.hx__closures__[b.__id__] = c;
        }
        return c;
      }
      v.lime = v.lime || {};
      var h = {};
      function p() {
        return ta.__string_rec(this, "");
      }
      var x = x || {};
      var u;
      function ha() {}
      h["lime.app.IModule"] = ha;
      ha.__name__ = "lime.app.IModule";
      ha.__isInterface__ = true;
      ha.prototype = {
        __class__: ha
      };
      function Qa() {
        this.onExit = new ih();
      }
      h["lime.app.Module"] = Qa;
      Qa.__name__ = "lime.app.Module";
      Qa.__interfaces__ = [ha];
      Qa.prototype = {
        __registerLimeModule: function (a) {},
        __unregisterLimeModule: function (a) {},
        __class__: Qa
      };
      function ya(a) {
        this.gameDeviceCache = new rc();
        this.parent = a;
        this.nextUpdate = this.lastUpdate = this.currentUpdate = 0;
        this.framePeriod = -1;
        gg.init();
        this.accelerometer = Le.registerSensor(Wo.ACCELEROMETER, 0);
      }
      h["lime._internal.backend.html5.HTML5Application"] = ya;
      ya.__name__ = "lime._internal.backend.html5.HTML5Application";
      ya.prototype = {
        convertKeyCode: function (a) {
          if (a >= 65 && a <= 90) {
            return a + 32;
          }
          switch (a) {
            case 12:
              return 1073741980;
            case 16:
              return 1073742049;
            case 17:
              return 1073742048;
            case 18:
              return 1073742050;
            case 19:
              return 1073741896;
            case 20:
              return 1073741881;
            case 33:
              return 1073741899;
            case 34:
              return 1073741902;
            case 35:
              return 1073741901;
            case 36:
              return 1073741898;
            case 37:
              return 1073741904;
            case 38:
              return 1073741906;
            case 39:
              return 1073741903;
            case 40:
              return 1073741905;
            case 41:
              return 1073741943;
            case 43:
              return 1073741940;
            case 44:
              return 1073741894;
            case 45:
              return 1073741897;
            case 46:
              return 127;
            case 91:
              return 1073742051;
            case 92:
              return 1073742055;
            case 93:
              return 1073742055;
            case 95:
              return 1073742106;
            case 96:
              return 1073741922;
            case 97:
              return 1073741913;
            case 98:
              return 1073741914;
            case 99:
              return 1073741915;
            case 100:
              return 1073741916;
            case 101:
              return 1073741917;
            case 102:
              return 1073741918;
            case 103:
              return 1073741919;
            case 104:
              return 1073741920;
            case 105:
              return 1073741921;
            case 106:
              return 1073741909;
            case 107:
              return 1073741911;
            case 108:
              return 1073741923;
            case 109:
              return 1073741910;
            case 110:
              return 1073741923;
            case 111:
              return 1073741908;
            case 112:
              return 1073741882;
            case 113:
              return 1073741883;
            case 114:
              return 1073741884;
            case 115:
              return 1073741885;
            case 116:
              return 1073741886;
            case 117:
              return 1073741887;
            case 118:
              return 1073741888;
            case 119:
              return 1073741889;
            case 120:
              return 1073741890;
            case 121:
              return 1073741891;
            case 122:
              return 1073741892;
            case 123:
              return 1073741893;
            case 124:
              return 1073741928;
            case 125:
              return 1073741929;
            case 126:
              return 1073741930;
            case 127:
              return 1073741931;
            case 128:
              return 1073741932;
            case 129:
              return 1073741933;
            case 130:
              return 1073741934;
            case 131:
              return 1073741935;
            case 132:
              return 1073741936;
            case 133:
              return 1073741937;
            case 134:
              return 1073741938;
            case 135:
              return 1073741939;
            case 144:
              return 1073741907;
            case 145:
              return 1073741895;
            case 160:
              return 94;
            case 161:
              return 33;
            case 163:
              return 35;
            case 164:
              return 36;
            case 166:
              return 1073742094;
            case 167:
              return 1073742095;
            case 168:
              return 1073742097;
            case 169:
              return 41;
            case 170:
              return 42;
            case 171:
              return 96;
            case 172:
              return 1073741898;
            case 173:
              return 45;
            case 174:
              return 1073741953;
            case 175:
              return 1073741952;
            case 176:
              return 1073742082;
            case 177:
              return 1073742083;
            case 178:
              return 1073742084;
            case 179:
              return 1073742085;
            case 180:
              return 1073742089;
            case 181:
              return 1073742086;
            case 182:
              return 1073741953;
            case 183:
              return 1073741952;
            case 186:
              return 59;
            case 187:
              return 61;
            case 188:
              return 44;
            case 189:
              return 45;
            case 190:
              return 46;
            case 191:
              return 47;
            case 192:
              return 96;
            case 193:
              return 63;
            case 194:
              return 1073741923;
            case 219:
              return 91;
            case 220:
              return 92;
            case 221:
              return 93;
            case 222:
              return 39;
            case 223:
              return 96;
            case 224:
              return 1073742051;
            case 226:
              return 92;
          }
          return a;
        },
        exec: function () {
          window.addEventListener("keydown", l(this, this.handleKeyEvent), false);
          window.addEventListener("keyup", l(this, this.handleKeyEvent), false);
          window.addEventListener("focus", l(this, this.handleWindowEvent), false);
          window.addEventListener("blur", l(this, this.handleWindowEvent), false);
          window.addEventListener("resize", l(this, this.handleWindowEvent), false);
          window.addEventListener("beforeunload", l(this, this.handleWindowEvent), false);
          if (Object.prototype.hasOwnProperty.call(window, "Accelerometer")) {
            window.addEventListener("devicemotion", l(this, this.handleSensorEvent), false);
          }
          CanvasRenderingContext2D.prototype.isPointInStroke ||= function (a, b, c) {
            return false;
          };
          CanvasRenderingContext2D.prototype.isPointInPath ||= function (a, b, c) {
            return false;
          };
          if ("performance" in window == 0) {
            window.performance = {};
          }
          if ("now" in window.performance == 0) {
            var a = Date.now();
            if (performance.timing && performance.timing.navigationStart) {
              a = performance.timing.navigationStart;
            }
            window.performance.now = function () {
              return Date.now() - a;
            };
          }
          var b = 0;
          for (var c = ["ms", "moz", "webkit", "o"], d = 0; d < c.length && !window.requestAnimationFrame; ++d) {
            window.requestAnimationFrame = window[c[d] + "RequestAnimationFrame"];
            window.cancelAnimationFrame = window[c[d] + "CancelAnimationFrame"] || window[c[d] + "CancelRequestAnimationFrame"];
          }
          window.requestAnimationFrame ||= function (a, c) {
            var d = window.performance.now();
            var e = Math.max(0, 16 - (d - b));
            c = window.setTimeout(function () {
              a(d + e);
            }, e);
            b = d + e;
            return c;
          };
          window.cancelAnimationFrame ||= function (a) {
            clearTimeout(a);
          };
          window.requestAnimFrame = window.requestAnimationFrame;
          this.lastUpdate = window.performance.now();
          this.handleApplicationEvent();
          return 0;
        },
        exit: function () {},
        handleApplicationEvent: function (a) {
          a = 0;
          for (var b = this.parent.__windows; a < b.length;) {
            var c = b[a];
            ++a;
            c.__backend.updateSize();
          }
          this.updateGameDevices();
          this.currentUpdate = window.performance.now();
          if (this.currentUpdate >= this.nextUpdate) {
            this.deltaTime = this.currentUpdate - this.lastUpdate;
            a = 0;
            for (b = this.parent.__windows; a < b.length;) {
              c = b[a];
              ++a;
              this.parent.onUpdate.dispatch(this.deltaTime | 0);
              if (c.context != null) {
                c.onRender.dispatch(c.context);
              }
            }
            this.nextUpdate = this.framePeriod < 0 ? this.currentUpdate : this.currentUpdate - this.currentUpdate % this.framePeriod + this.framePeriod;
            this.lastUpdate = this.currentUpdate;
          }
          window.requestAnimationFrame(l(this, this.handleApplicationEvent));
        },
        handleKeyEvent: function (a) {
          if (this.parent.__window != null) {
            var b = this.convertKeyCode(a.keyCode ?? a.which);
            var c = (a.shiftKey ? 3 : 0) | (a.ctrlKey ? 192 : 0) | (a.altKey ? 768 : 0) | (a.metaKey ? 3072 : 0);
            if (a.type == "keydown") {
              this.parent.__window.onKeyDown.dispatch(b, c);
              if (this.parent.__window.onKeyDown.canceled && a.cancelable) {
                a.preventDefault();
              }
            } else {
              this.parent.__window.onKeyUp.dispatch(b, c);
              if (this.parent.__window.onKeyUp.canceled && a.cancelable) {
                a.preventDefault();
              }
            }
          }
        },
        handleSensorEvent: function (a) {
          this.accelerometer.onUpdate.dispatch(a.accelerationIncludingGravity.x, a.accelerationIncludingGravity.y, a.accelerationIncludingGravity.z);
        },
        handleWindowEvent: function (a) {
          if (this.parent.__window != null) {
            switch (a.type) {
              case "blur":
                if (!this.hidden) {
                  this.parent.__window.onFocusOut.dispatch();
                  this.parent.__window.onDeactivate.dispatch();
                  this.hidden = true;
                }
                break;
              case "focus":
                if (this.hidden) {
                  this.parent.__window.onFocusIn.dispatch();
                  this.parent.__window.onActivate.dispatch();
                  this.hidden = false;
                }
                break;
              case "resize":
                this.parent.__window.__backend.handleResizeEvent(a);
                break;
              case "visibilitychange":
                if (window.document.hidden) {
                  if (!this.hidden) {
                    this.parent.__window.onFocusOut.dispatch();
                    this.parent.__window.onDeactivate.dispatch();
                    this.hidden = true;
                  }
                } else if (this.hidden) {
                  this.parent.__window.onFocusIn.dispatch();
                  this.parent.__window.onActivate.dispatch();
                  this.hidden = false;
                }
            }
          }
        },
        updateGameDevices: function () {
          var a = Lc.__getDeviceData();
          if (a != null) {
            for (var b, c, d, e, f, k = 0, r = a.length; k < r;) {
              b = k++;
              e = a[b];
              if (e != null) {
                if (!this.gameDeviceCache.h.hasOwnProperty(b)) {
                  f = new hn();
                  f.id = b;
                  f.connected = e.connected;
                  c = 0;
                  for (d = e.buttons.length; c < d;) {
                    var n = c++;
                    f.buttons.push(e.buttons[n].value);
                  }
                  c = 0;
                  for (d = e.axes.length; c < d;) {
                    n = c++;
                    f.axes.push(e.axes[n]);
                  }
                  if (e.mapping == "standard") {
                    f.isGamepad = true;
                  }
                  this.gameDeviceCache.h[b] = f;
                  if (e.connected) {
                    Lc.__connect(b);
                    if (f.isGamepad) {
                      Qc.__connect(b);
                    }
                  }
                }
                f = this.gameDeviceCache.h[b];
                d = Lc.devices.h[b];
                c = Qc.devices.h[b];
                if (e.connected) {
                  for (var g = 0, za = e.buttons.length; g < za;) {
                    var m = g++;
                    n = e.buttons[m].value;
                    if (n != f.buttons[m]) {
                      if (m == 6) {
                        d.onAxisMove.dispatch(e.axes.length, n);
                        if (c != null) {
                          c.onAxisMove.dispatch(4, n);
                        }
                      } else if (m == 7) {
                        d.onAxisMove.dispatch(e.axes.length + 1, n);
                        if (c != null) {
                          c.onAxisMove.dispatch(5, n);
                        }
                      } else {
                        if (n > 0) {
                          d.onButtonDown.dispatch(m);
                        } else {
                          d.onButtonUp.dispatch(m);
                        }
                        if (c != null) {
                          switch (m) {
                            case 0:
                              b = 0;
                              break;
                            case 1:
                              b = 1;
                              break;
                            case 2:
                              b = 2;
                              break;
                            case 3:
                              b = 3;
                              break;
                            case 4:
                              b = 9;
                              break;
                            case 5:
                              b = 10;
                              break;
                            case 8:
                              b = 4;
                              break;
                            case 9:
                              b = 6;
                              break;
                            case 10:
                              b = 7;
                              break;
                            case 11:
                              b = 8;
                              break;
                            case 12:
                              b = 11;
                              break;
                            case 13:
                              b = 12;
                              break;
                            case 14:
                              b = 13;
                              break;
                            case 15:
                              b = 14;
                              break;
                            case 16:
                              b = 5;
                              break;
                            default:
                              continue;
                          }
                          if (n > 0) {
                            c.onButtonDown.dispatch(b);
                          } else {
                            c.onButtonUp.dispatch(b);
                          }
                        }
                      }
                      f.buttons[m] = n;
                    }
                  }
                  b = 0;
                  for (n = e.axes.length; b < n;) {
                    g = b++;
                    if (e.axes[g] != f.axes[g]) {
                      d.onAxisMove.dispatch(g, e.axes[g]);
                      if (c != null) {
                        c.onAxisMove.dispatch(g, e.axes[g]);
                      }
                      f.axes[g] = e.axes[g];
                    }
                  }
                } else if (f.connected) {
                  f.connected = false;
                  Lc.__disconnect(b);
                  Qc.__disconnect(b);
                }
              }
            }
          }
        },
        __class__: ya
      };
      function rb() {
        this.onCreateWindow = new jn();
        this.onUpdate = new ih();
        this.onExit = new ih();
        if (rb.current == null) {
          rb.current = this;
        }
        this.meta = new V();
        this.modules = [];
        this.__windowByID = new rc();
        this.__windows = [];
        this.__backend = new ya(this);
        this.__registerLimeModule(this);
        this.__preloader = new kn();
        this.__preloader.onProgress.add(l(this, this.onPreloadProgress));
        this.__preloader.onComplete.add(l(this, this.onPreloadComplete));
      }
      h["lime.app.Application"] = rb;
      rb.__name__ = "lime.app.Application";
      rb.__super__ = Qa;
      rb.prototype = q(Qa.prototype, {
        addModule: function (a) {
          a.__registerLimeModule(this);
          this.modules.push(a);
        },
        exec: function () {
          rb.current = this;
          return this.__backend.exec();
        },
        onGamepadAxisMove: function (a, b, c) {},
        onGamepadButtonDown: function (a, b) {},
        onGamepadButtonUp: function (a, b) {},
        onGamepadConnect: function (a) {},
        onGamepadDisconnect: function (a) {},
        onJoystickAxisMove: function (a, b, c) {},
        onJoystickButtonDown: function (a, b) {},
        onJoystickButtonUp: function (a, b) {},
        onJoystickConnect: function (a) {},
        onJoystickDisconnect: function (a) {},
        onJoystickHatMove: function (a, b, c) {},
        onJoystickTrackballMove: function (a, b, c, d) {},
        onKeyDown: function (a, b) {},
        onKeyUp: function (a, b) {},
        onModuleExit: function (a) {},
        onMouseDown: function (a, b, c) {},
        onMouseMove: function (a, b) {},
        onMouseMoveRelative: function (a, b) {},
        onMouseUp: function (a, b, c) {},
        onMouseWheel: function (a, b, c) {},
        onPreloadComplete: function () {},
        onPreloadProgress: function (a, b) {},
        onRenderContextLost: function () {},
        onRenderContextRestored: function (a) {},
        onTextEdit: function (a, b, c) {},
        onTextInput: function (a) {},
        onTouchCancel: function (a) {},
        onTouchEnd: function (a) {},
        onTouchMove: function (a) {},
        onTouchStart: function (a) {},
        onWindowActivate: function () {},
        onWindowClose: function () {},
        onWindowCreate: function () {},
        onWindowDeactivate: function () {},
        onWindowDropFile: function (a) {},
        onWindowEnter: function () {},
        onWindowExpose: function () {},
        onWindowFocusIn: function () {},
        onWindowFocusOut: function () {},
        onWindowFullscreen: function () {},
        onWindowLeave: function () {},
        onWindowMove: function (a, b) {},
        onWindowMinimize: function () {},
        onWindowResize: function (a, b) {},
        onWindowRestore: function () {},
        removeModule: function (a) {
          if (a != null) {
            a.__unregisterLimeModule(this);
            M.remove(this.modules, a);
          }
        },
        render: function (a) {},
        update: function (a) {},
        __registerLimeModule: function (a) {
          a.onUpdate.add(l(this, this.update));
          a.onExit.add(l(this, this.onModuleExit), false, 0);
          a.onExit.add(l(this, this.__onModuleExit), false, -1000);
          for (a = Qc.devices.iterator(); a.hasNext();) {
            var b = a.next();
            this.__onGamepadConnect(b);
          }
          Qc.onConnect.add(l(this, this.__onGamepadConnect));
          for (a = Lc.devices.iterator(); a.hasNext();) {
            b = a.next();
            this.__onJoystickConnect(b);
          }
          Lc.onConnect.add(l(this, this.__onJoystickConnect));
          Cc.onCancel.add(l(this, this.onTouchCancel));
          Cc.onStart.add(l(this, this.onTouchStart));
          Cc.onMove.add(l(this, this.onTouchMove));
          Cc.onEnd.add(l(this, this.onTouchEnd));
        },
        __removeWindow: function (a) {
          if (a != null && this.__windowByID.h.hasOwnProperty(a.id)) {
            if (this.__window == a) {
              this.__window = null;
            }
            M.remove(this.__windows, a);
            this.__windowByID.remove(a.id);
            a.close();
            this.__checkForAllWindowsClosed();
          }
        },
        __checkForAllWindowsClosed: function () {
          if (this.__windows.length == 0) {
            bd.exit(0);
          }
        },
        __onGamepadConnect: function (a) {
          this.onGamepadConnect(a);
          var b = this;
          function c(c, d) {
            b.onGamepadAxisMove(a, c, d);
          }
          a.onAxisMove.add(c);
          var d = this;
          c = function (b) {
            d.onGamepadButtonDown(a, b);
          };
          a.onButtonDown.add(c);
          var e = this;
          c = function (b) {
            e.onGamepadButtonUp(a, b);
          };
          a.onButtonUp.add(c);
          var f = this;
          a.onDisconnect.add(function () {
            f.onGamepadDisconnect(a);
          });
        },
        __onJoystickConnect: function (a) {
          this.onJoystickConnect(a);
          var b = this;
          function c(c, d) {
            b.onJoystickAxisMove(a, c, d);
          }
          a.onAxisMove.add(c);
          var d = this;
          c = function (b) {
            d.onJoystickButtonDown(a, b);
          };
          a.onButtonDown.add(c);
          var e = this;
          c = function (b) {
            e.onJoystickButtonUp(a, b);
          };
          a.onButtonUp.add(c);
          var f = this;
          a.onDisconnect.add(function () {
            f.onJoystickDisconnect(a);
          });
          var k = this;
          c = function (b, c) {
            k.onJoystickHatMove(a, b, c);
          };
          a.onHatMove.add(c);
          var r = this;
          c = function (b, c, d) {
            r.onJoystickTrackballMove(a, b, c, d);
          };
          a.onTrackballMove.add(c);
        },
        __onModuleExit: function (a) {
          if (!this.onExit.canceled) {
            this.__unregisterLimeModule(this);
            this.__backend.exit();
            if (rb.current == this) {
              rb.current = null;
            }
          }
        },
        __onWindowClose: function (a) {
          if (this.__window == a) {
            this.onWindowClose();
          }
          this.__removeWindow(a);
        },
        __unregisterLimeModule: function (a) {
          a.onUpdate.remove(l(this, this.update));
          a.onExit.remove(l(this, this.__onModuleExit));
          a.onExit.remove(l(this, this.onModuleExit));
          Qc.onConnect.remove(l(this, this.__onGamepadConnect));
          Lc.onConnect.remove(l(this, this.__onJoystickConnect));
          Cc.onCancel.remove(l(this, this.onTouchCancel));
          Cc.onStart.remove(l(this, this.onTouchStart));
          Cc.onMove.remove(l(this, this.onTouchMove));
          Cc.onEnd.remove(l(this, this.onTouchEnd));
        },
        __class__: rb
      });
      function E() {}
      h.ApplicationMain = E;
      E.__name__ = "ApplicationMain";
      E.main = function () {
        bd.__registerEntryPoint("PsychEngine", E.create);
      };
      E.create = function (a) {
        var b = new Ki();
        Da.init(a);
        b.meta.h.build = "1";
        b.meta.h.company = "ShadowMario";
        b.meta.h.file = "PsychEngine";
        b.meta.h.name = "Friday Night Funkin': Psych Engine";
        b.meta.h.packageName = "com.shadowmario.psychengine";
        b.meta.h.version = "0.2.8";
        var c = {
          allowHighDPI: true,
          alwaysOnTop: false,
          borderless: false,
          element: null,
          frameRate: 60,
          height: 720,
          hidden: false,
          maximized: false,
          minimized: false,
          parameters: {},
          resizable: true,
          title: "Friday Night Funkin': Psych Engine",
          width: 1280,
          x: null,
          y: null,
          context: {
            antialiasing: 0,
            background: 0,
            colorDepth: 32,
            depth: true,
            hardware: true,
            stencil: true,
            type: null,
            vsync: false
          }
        };
        if (b.__window == null && a != null) {
          for (var d = 0, e = ma.fields(a); d < e.length;) {
            var f = e[d];
            ++d;
            if (Object.prototype.hasOwnProperty.call(c, f)) {
              c[f] = ma.field(a, f);
            } else if (Object.prototype.hasOwnProperty.call(c.context, f)) {
              c.context[f] = ma.field(a, f);
            }
          }
        }
        b.createWindow(c);
        var k = new hk(new ik());
        b.__preloader.onProgress.add(function (a, b) {
          k.update(a, b);
        });
        b.__preloader.onComplete.add(function () {
          k.start();
        });
        var r = b.__window.stage;
        k.onComplete.add(function () {
          E.start(r);
        });
        d = 0;
        for (e = Da.preloadLibraries; d < e.length;) {
          a = e[d];
          ++d;
          b.__preloader.addLibrary(a);
        }
        d = 0;
        for (e = Da.preloadLibraryNames; d < e.length;) {
          a = e[d];
          ++d;
          b.__preloader.addLibraryName(a);
        }
        b.__preloader.load();
        b.exec();
      };
      E.start = function (a) {
        if (a.__uncaughtErrorEvents.__enabled) {
          try {
            Ub.main();
            a.dispatchEvent(new Ga("resize", false, false));
            if (a.window.__fullscreen) {
              a.dispatchEvent(new Cg("fullScreen", false, false, true, true));
            }
          } catch (c) {
            Na.lastError = c;
            var b = K.caught(c).unwrap();
            a.__handleError(b);
          }
        } else {
          Ub.main();
          a.dispatchEvent(new Ga("resize", false, false));
          if (a.window.__fullscreen) {
            a.dispatchEvent(new Cg("fullScreen", false, false, true, true));
          }
        }
      };
      function P() {}
      h["openfl.events.IEventDispatcher"] = P;
      P.__name__ = "openfl.events.IEventDispatcher";
      P.__isInterface__ = true;
      P.prototype = {
        __class__: P
      };
      function ua(a) {
        if (a != null) {
          this.__targetDispatcher = a;
        }
      }
      h["openfl.events.EventDispatcher"] = ua;
      ua.__name__ = "openfl.events.EventDispatcher";
      ua.__interfaces__ = [P];
      ua.prototype = {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (b != null) {
            if (this.__eventMap == null) {
              this.__eventMap = new V();
              this.__iterators = new V();
            }
            if (Object.prototype.hasOwnProperty.call(this.__eventMap.h, a)) {
              n = this.__eventMap.h[a];
              for (var f = 0, k = n.length; f < k;) {
                var r = f++;
                if (n[r].match(b, c)) {
                  return;
                }
              }
              a = this.__iterators.h[a];
              for (f = 0; f < a.length;) {
                k = a[f];
                ++f;
                if (k.active) {
                  k.copy();
                }
              }
              this.__addListenerByPriority(n, new jh(b, c, d, e));
            } else {
              var n = [];
              n.push(new jh(b, c, d, e));
              k = new Li(n);
              this.__eventMap.h[a] = n;
              this.__iterators.h[a] = [k];
            }
          }
        },
        dispatchEvent: function (a) {
          a.target = this.__targetDispatcher ?? this;
          return this.__dispatchEvent(a);
        },
        hasEventListener: function (a) {
          if (this.__eventMap == null) {
            return false;
          } else {
            return Object.prototype.hasOwnProperty.call(this.__eventMap.h, a);
          }
        },
        removeEventListener: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          if (this.__eventMap != null && b != null) {
            var d = this.__eventMap.h[a];
            if (d != null) {
              var e = this.__iterators.h[a];
              for (var f = 0, k = d.length; f < k;) {
                var r = f++;
                if (d[r].match(b, c)) {
                  for (b = 0; b < e.length;) {
                    c = e[b];
                    ++b;
                    c.remove(d[r], r);
                  }
                  d.splice(r, 1);
                  break;
                }
              }
              if (d.length == 0) {
                d = this.__eventMap;
                e = a;
                if (Object.prototype.hasOwnProperty.call(d.h, e)) {
                  delete d.h[e];
                }
                d = this.__iterators;
                e = a;
                if (Object.prototype.hasOwnProperty.call(d.h, e)) {
                  delete d.h[e];
                }
              }
              if (Object.keys(this.__eventMap.h).length <= 0) {
                this.__iterators = this.__eventMap = null;
              }
            }
          }
        },
        __dispatchEvent: function (a) {
          if (this.__eventMap == null || a == null) {
            return true;
          }
          var b = a.type;
          var c = this.__eventMap.h[b];
          if (c == null) {
            return true;
          }
          if (a.target == null) {
            a.target = this.__targetDispatcher ?? this;
          }
          a.currentTarget = this;
          var d = a.eventPhase == 1;
          b = this.__iterators.h[b];
          var e = b[0];
          if (e.active) {
            e = new Li(c);
            b.push(e);
          }
          e.start();
          for (var f = e; f.hasNext();) {
            var k = f.next();
            if (k != null && k.useCapture == d) {
              if (k.useWeakReference && k.weakRefCallback != null) {
                var r = k.weakRefCallback.deref();
                if (r == null) {
                  r = e.index - 1;
                  c.splice(r, 1);
                  e.remove(k, r);
                } else {
                  r(a);
                }
              } else {
                k.callback(a);
              }
              if (a.__isCanceledNow) {
                break;
              }
            }
          }
          e.stop();
          if (e != b[0]) {
            M.remove(b, e);
          } else {
            e.reset(c);
          }
          return !a.isDefaultPrevented();
        },
        __addListenerByPriority: function (a, b) {
          for (var c = a.length, d = c, e = 0; e < c;) {
            var f = e++;
            if (a[f].priority < b.priority) {
              d = f;
              break;
            }
          }
          a.splice(d, 0, b);
        },
        __class__: ua
      };
      function ra() {}
      h["openfl.display.IBitmapDrawable"] = ra;
      ra.__name__ = "openfl.display.IBitmapDrawable";
      ra.__isInterface__ = true;
      ra.prototype = {
        __class__: ra
      };
      function jb() {}
      h["haxe.IMap"] = jb;
      jb.__name__ = "haxe.IMap";
      jb.__isInterface__ = true;
      jb.prototype = {
        __class__: jb
      };
      function V() {
        this.h = Object.create(null);
      }
      h["haxe.ds.StringMap"] = V;
      V.__name__ = "haxe.ds.StringMap";
      V.__interfaces__ = [jb];
      V.createCopy = function (a) {
        var b = new V();
        var c;
        for (c in a) {
          b.h[c] = a[c];
        }
        return b;
      };
      V.prototype = {
        get: function (a) {
          return this.h[a];
        },
        set: function (a, b) {
          this.h[a] = b;
        },
        remove: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.h, a)) {
            delete this.h[a];
            return true;
          } else {
            return false;
          }
        },
        keys: function () {
          return new jk(this.h);
        },
        __class__: V
      };
      var qb = {
        toIntVector: function (a, b, c, d) {
          return new Nh(b, c, d);
        },
        toFloatVector: function (a, b, c, d) {
          return new Vf(b, c, d, true);
        },
        toObjectVector: function (a, b, c, d) {
          return new ib(b, c, d, true);
        },
        toNullVector: function (a, b, c, d) {
          return new ib(b, c, d, true);
        }
      };
      function la() {}
      h["openfl._Vector.IVector"] = la;
      la.__name__ = "openfl._Vector.IVector";
      la.__isInterface__ = true;
      la.prototype = {
        __class__: la
      };
      function ib(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (d) {
          this.__array = [];
          if (c != null) {
            d = 0;
            for (var e = c.length; d < e;) {
              var f = d++;
              this.__array[f] = c[f];
            }
          }
        } else {
          if (c == null) {
            c = [];
          }
          this.__array = c;
        }
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      h["openfl._Vector.ObjectVector"] = ib;
      ib.__name__ = "openfl._Vector.ObjectVector";
      ib.__interfaces__ = [la];
      ib.prototype = {
        get: function (a) {
          return this.__array[a];
        },
        indexOf: function (a, b) {
          if (b == null) {
            b = 0;
          }
          for (var c = this.__array.length; b < c;) {
            var d = b++;
            if (this.__array[d] == a) {
              return d;
            }
          }
          return -1;
        },
        insertAt: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            this.__array.splice(a, 0, b);
          }
        },
        iterator: function () {
          return new Uf(this.__array);
        },
        push: function (a) {
          if (this.fixed) {
            return this.__array.length;
          } else {
            return this.__array.push(a);
          }
        },
        removeAt: function (a) {
          if (!this.fixed || a < this.__array.length) {
            return this.__array.splice(a, 1)[0];
          } else {
            return null;
          }
        },
        set: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            return this.__array[a] = b;
          } else {
            return b;
          }
        },
        splice: function (a, b) {
          return new ib(0, false, this.__array.splice(a, b));
        },
        toJSON: function () {
          return this.__array;
        },
        unshift: function (a) {
          if (!this.fixed) {
            this.__array.unshift(a);
          }
        },
        get_length: function () {
          return this.__array.length;
        },
        set_length: function (a) {
          if (!this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                b++;
                this.__array.push(null);
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: ib,
        __properties__: {
          set_length: "set_length",
          get_length: "get_length"
        }
      };
      function vb(a, b, c) {
        this.__pool = new Oa();
        this.inactiveObjects = this.activeObjects = 0;
        this.__inactiveObject1 = this.__inactiveObject0 = null;
        this.__inactiveObjectList = new ab();
        if (a != null) {
          this.create = a;
        }
        if (b != null) {
          this.clean = b;
        }
        if (c != null) {
          this.set_size(c);
        }
      }
      h["lime.utils.ObjectPool"] = vb;
      vb.__name__ = "lime.utils.ObjectPool";
      vb.prototype = {
        clean: function (a) {},
        create: function () {
          return null;
        },
        get: function () {
          var a = null;
          if (this.inactiveObjects > 0) {
            if (this.__inactiveObject0 != null) {
              a = this.__inactiveObject0;
              this.__inactiveObject0 = null;
            } else if (this.__inactiveObject1 != null) {
              a = this.__inactiveObject1;
              this.__inactiveObject1 = null;
            } else {
              a = this.__inactiveObjectList.pop();
              if (this.__inactiveObjectList.length > 0) {
                this.__inactiveObject0 = this.__inactiveObjectList.pop();
              }
              if (this.__inactiveObjectList.length > 0) {
                this.__inactiveObject1 = this.__inactiveObjectList.pop();
              }
            }
            this.inactiveObjects--;
            this.activeObjects++;
          } else if (this.__size == null || this.activeObjects < this.__size) {
            a = this.create();
            if (a != null) {
              this.__pool.set(a, true);
              this.activeObjects++;
            }
          }
          return a;
        },
        release: function (a) {
          this.activeObjects--;
          if (this.__size == null || this.activeObjects + this.inactiveObjects < this.__size) {
            this.clean(a);
            if (this.__inactiveObject0 == null) {
              this.__inactiveObject0 = a;
            } else if (this.__inactiveObject1 == null) {
              this.__inactiveObject1 = a;
            } else {
              this.__inactiveObjectList.add(a);
            }
            this.inactiveObjects++;
          } else {
            this.__pool.remove(a);
          }
        },
        __removeInactive: function (a) {
          if (!(a <= 0) && this.inactiveObjects != 0 && (this.__inactiveObject0 != null && (this.__pool.remove(this.__inactiveObject0), this.__inactiveObject0 = null, this.inactiveObjects--, --a), a != 0 && this.inactiveObjects != 0 && (this.__inactiveObject1 != null && (this.__pool.remove(this.__inactiveObject1), this.__inactiveObject1 = null, this.inactiveObjects--, --a), a != 0 && this.inactiveObjects != 0))) {
            for (var b = this.__inactiveObjectList.h; b != null;) {
              var c = b.item;
              b = b.next;
              this.__pool.remove(c);
              this.__inactiveObjectList.remove(c);
              this.inactiveObjects--;
              --a;
              if (a == 0 || this.inactiveObjects == 0) {
                break;
              }
            }
          }
        },
        set_size: function (a) {
          if (a == null) {
            this.__size = null;
          } else {
            var b = this.inactiveObjects + this.activeObjects;
            this.__size = a;
            if (b > a) {
              this.__removeInactive(b - a);
            } else if (a > b) {
              for (var c = 0, d = a - b; c < d;) {
                c++;
                b = this.create();
                if (b != null) {
                  this.__pool.set(b, false);
                  this.__inactiveObjectList.add(b);
                  this.inactiveObjects++;
                } else {
                  break;
                }
              }
            }
          }
          return a;
        },
        __class__: vb,
        __properties__: {
          set_size: "set_size"
        }
      };
      function Oa() {
        this.h = {
          __keys__: {}
        };
      }
      h["haxe.ds.ObjectMap"] = Oa;
      Oa.__name__ = "haxe.ds.ObjectMap";
      Oa.__interfaces__ = [jb];
      Oa.prototype = {
        set: function (a, b) {
          var c = a.__id__;
          if (c == null) {
            c = a.__id__ = I.$haxeUID++;
          }
          this.h[c] = b;
          this.h.__keys__[c] = a;
        },
        get: function (a) {
          return this.h[a.__id__];
        },
        remove: function (a) {
          a = a.__id__;
          if (this.h.__keys__[a] == null) {
            return false;
          }
          delete this.h[a];
          delete this.h.__keys__[a];
          return true;
        },
        keys: function () {
          var a = [];
          var b;
          for (b in this.h.__keys__) {
            if (this.h.hasOwnProperty(b)) {
              a.push(this.h.__keys__[b]);
            }
          }
          return new Uf(a);
        },
        __class__: Oa
      };
      function ab() {
        this.length = 0;
      }
      h["haxe.ds.List"] = ab;
      ab.__name__ = "haxe.ds.List";
      ab.prototype = {
        add: function (a) {
          a = new kk(a, null);
          if (this.h == null) {
            this.h = a;
          } else {
            this.q.next = a;
          }
          this.q = a;
          this.length++;
        },
        push: function (a) {
          this.h = a = new kk(a, this.h);
          if (this.q == null) {
            this.q = a;
          }
          this.length++;
        },
        pop: function () {
          if (this.h == null) {
            return null;
          }
          var a = this.h.item;
          this.h = this.h.next;
          if (this.h == null) {
            this.q = null;
          }
          this.length--;
          return a;
        },
        clear: function () {
          this.q = this.h = null;
          this.length = 0;
        },
        remove: function (a) {
          var b = null;
          for (var c = this.h; c != null;) {
            if (c.item == a) {
              if (b == null) {
                this.h = c.next;
              } else {
                b.next = c.next;
              }
              if (this.q == c) {
                this.q = b;
              }
              this.length--;
              return true;
            }
            b = c;
            c = c.next;
          }
          return false;
        },
        iterator: function () {
          return new ln(this.h);
        },
        __class__: ab
      };
      function Fa() {
        ua.call(this);
        this.__alpha = this.__drawableType = 1;
        this.__blendMode = 10;
        this.__cacheAsBitmap = false;
        this.__transform = new Aa();
        this.__visible = true;
        this.__rotationSine = this.__rotation = 0;
        this.__worldAlpha = this.__scaleY = this.__scaleX = this.__rotationCosine = 1;
        this.__worldBlendMode = 10;
        this.__worldTransform = new Aa();
        this.__worldColorTransform = new Nb();
        this.__renderTransform = new Aa();
        this.__worldVisible = true;
        this.set_name("instance" + ++Fa.__instanceCount);
        if (Fa.__initStage != null) {
          this.stage = Fa.__initStage;
          Fa.__initStage = null;
          this.stage.addChild(this);
        }
      }
      h["openfl.display.DisplayObject"] = Fa;
      Fa.__name__ = "openfl.display.DisplayObject";
      Fa.__interfaces__ = [ra];
      Fa.__super__ = ua;
      Fa.prototype = q(ua.prototype, {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          switch (a) {
            case "activate":
            case "deactivate":
            case "enterFrame":
            case "exitFrame":
            case "frameConstructed":
            case "render":
              if (!Object.prototype.hasOwnProperty.call(Fa.__broadcastEvents.h, a)) {
                Fa.__broadcastEvents.h[a] = [];
              }
              var f = Fa.__broadcastEvents.h[a];
              if (f.indexOf(this) == -1) {
                f.push(this);
              }
              break;
            case "clearDOM":
            case "renderCairo":
            case "renderCanvas":
            case "renderDOM":
            case "renderOpenGL":
              if (this.__customRenderEvent == null) {
                this.__customRenderEvent = new lk(null);
                this.__customRenderEvent.objectColorTransform = new Nb();
                this.__customRenderEvent.objectMatrix = new Aa();
                this.__customRenderClear = true;
              }
          }
          ua.prototype.addEventListener.call(this, a, b, c, d, e);
        },
        dispatchEvent: function (a) {
          if (a instanceof Xb) {
            var b = this.__getRenderTransform();
            a.stageX = a.localX * b.a + a.localY * b.c + b.tx;
            b = this.__getRenderTransform();
            a.stageY = a.localX * b.b + a.localY * b.d + b.ty;
          } else if (a instanceof Ze) {
            b = this.__getRenderTransform();
            a.stageX = a.localX * b.a + a.localY * b.c + b.tx;
            b = this.__getRenderTransform();
            a.stageY = a.localX * b.b + a.localY * b.d + b.ty;
          }
          a.target = this;
          return this.__dispatchWithCapture(a);
        },
        getBounds: function (a) {
          var b = Aa.__pool.get();
          if (a != null && a != this) {
            b.copyFrom(this.__getWorldTransform());
            var c = Aa.__pool.get();
            c.copyFrom(a.__getWorldTransform());
            c.invert();
            b.concat(c);
            Aa.__pool.release(c);
          } else {
            b.identity();
          }
          a = new ea();
          this.__getBounds(a, b);
          Aa.__pool.release(b);
          return a;
        },
        globalToLocal: function (a) {
          return this.__globalToLocal(a, new kb());
        },
        removeEventListener: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          ua.prototype.removeEventListener.call(this, a, b, c);
          switch (a) {
            case "activate":
            case "deactivate":
            case "enterFrame":
            case "exitFrame":
            case "frameConstructed":
            case "render":
              if (!this.hasEventListener(a)) {
                if (Object.prototype.hasOwnProperty.call(Fa.__broadcastEvents.h, a)) {
                  M.remove(Fa.__broadcastEvents.h[a], this);
                }
              }
              break;
            case "clearDOM":
            case "renderCairo":
            case "renderCanvas":
            case "renderDOM":
            case "renderOpenGL":
              if (!this.hasEventListener("clearDOM") && !this.hasEventListener("renderCairo") && !this.hasEventListener("renderCanvas") && !this.hasEventListener("renderDOM") && !this.hasEventListener("renderOpenGL")) {
                this.__customRenderEvent = null;
              }
          }
        },
        __cleanup: function () {
          this.__context = this.__canvas = this.__cairo = null;
          if (this.__graphics != null) {
            this.__graphics.__cleanup();
          }
          if (this.__cacheBitmap != null) {
            this.__cacheBitmap.__cleanup();
            this.__cacheBitmap = null;
          }
          if (this.__cacheBitmapData != null) {
            this.__cacheBitmapData.dispose();
            this.__cacheBitmapData = null;
          }
        },
        __dispatch: function (a) {
          if (this.__eventMap != null && this.hasEventListener(a.type)) {
            var b = ua.prototype.__dispatchEvent.call(this, a);
            if (a.__isCanceled) {
              return true;
            } else {
              return b;
            }
          }
          return true;
        },
        __dispatchChildren: function (a) {},
        __dispatchEvent: function (a) {
          var b = a.bubbles ? this.parent : null;
          var c = ua.prototype.__dispatchEvent.call(this, a);
          if (a.__isCanceled) {
            return true;
          }
          if (b != null && b != this) {
            a.eventPhase = 3;
            if (a.target == null) {
              a.target = this;
            }
            b.__dispatchEvent(a);
          }
          return c;
        },
        __dispatchWithCapture: function (a) {
          if (a.target == null) {
            a.target = this;
          }
          if (this.parent != null) {
            a.eventPhase = 1;
            if (this.parent == this.stage) {
              this.parent.__dispatch(a);
            } else {
              var b = Fa.__tempStack.get();
              for (var c = this.parent, d = 0; c != null;) {
                b.set(d, c);
                c = c.parent;
                ++d;
              }
              c = 0;
              for (var e = d; c < e;) {
                var f = c++;
                b.get(d - f - 1).__dispatch(a);
              }
              Fa.__tempStack.release(b);
            }
          }
          a.eventPhase = 2;
          return this.__dispatchEvent(a);
        },
        __enterFrame: function (a) {},
        __getBounds: function (a, b) {
          if (this.__graphics != null) {
            this.__graphics.__getBounds(a, b);
          }
        },
        __getCursor: function () {
          return null;
        },
        __getFilterBounds: function (a, b) {
          this.__getRenderBounds(a, b);
          if (this.__filters != null) {
            b = ea.__pool.get();
            for (var c = 0, d = this.__filters; c < d.length;) {
              var e = d[c];
              ++c;
              b.__expand(-e.__leftExtension, -e.__topExtension, e.__leftExtension + e.__rightExtension, e.__topExtension + e.__bottomExtension);
            }
            a.width += b.width;
            a.height += b.height;
            a.x += b.x;
            a.y += b.y;
            ea.__pool.release(b);
          }
        },
        __getInteractive: function (a) {
          return false;
        },
        __getLocalBounds: function (a) {
          this.__getBounds(a, this.__transform);
          a.x -= this.__transform.tx;
          a.y -= this.__transform.ty;
        },
        __getRenderBounds: function (a, b) {
          if (this.__scrollRect == null) {
            this.__getBounds(a, b);
          } else {
            var c = ea.__pool.get();
            c.copyFrom(this.__scrollRect);
            c.__transform(c, b);
            a.__expand(c.x, c.y, c.width, c.height);
            ea.__pool.release(c);
          }
        },
        __getRenderTransform: function () {
          this.__getWorldTransform();
          return this.__renderTransform;
        },
        __getWorldTransform: function () {
          if (this.__transformDirty || this.__worldTransformInvalid) {
            var a = [];
            var b = this;
            if (this.parent == null) {
              this.__update(true, false);
            } else {
              while (b != this.stage && (a.push(b), b = b.parent, b != null));
            }
            for (var c = a.length; --c >= 0;) {
              b = a[c];
              b.__update(true, false);
            }
          }
          return this.__worldTransform;
        },
        __globalToLocal: function (a, b) {
          this.__getRenderTransform();
          if (a == b) {
            var c = this.__renderTransform;
            var d = c.a * c.d - c.b * c.c;
            if (d == 0) {
              a.x = -c.tx;
              a.y = -c.ty;
            } else {
              var e = 1 / d * (c.c * (c.ty - a.y) + c.d * (a.x - c.tx));
              a.y = 1 / d * (c.a * (a.y - c.ty) + c.b * (c.tx - a.x));
              a.x = e;
            }
          } else {
            c = this.__renderTransform;
            d = c.a * c.d - c.b * c.c;
            b.x = d == 0 ? -c.tx : 1 / d * (c.c * (c.ty - a.y) + c.d * (a.x - c.tx));
            c = this.__renderTransform;
            d = c.a * c.d - c.b * c.c;
            b.y = d == 0 ? -c.ty : 1 / d * (c.a * (a.y - c.ty) + c.b * (c.tx - a.x));
          }
          return b;
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (this.__graphics != null) {
            if (!f.__visible || this.__isMask || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
              return false;
            }
            if (this.__graphics.__hitTest(a, b, c, this.__getRenderTransform())) {
              if (d != null && !e) {
                d.push(f);
              }
              return true;
            }
          }
          return false;
        },
        __hitTestMask: function (a, b) {
          if (this.__graphics != null && this.__graphics.__hitTest(a, b, true, this.__getRenderTransform())) {
            return true;
          } else {
            return false;
          }
        },
        __setParentRenderDirty: function () {
          var a = this.__renderParent ?? this.parent;
          if (a != null && !a.__renderDirty) {
            a.__renderDirty = true;
            a.__setParentRenderDirty();
          }
        },
        __setStageReference: function (a) {
          this.stage = a;
        },
        __setTransformDirty: function () {
          if (!this.__transformDirty) {
            this.__transformDirty = true;
            this.__setWorldTransformInvalid();
            this.__setParentRenderDirty();
          }
        },
        __setWorldTransformInvalid: function () {
          this.__worldTransformInvalid = true;
        },
        __update: function (a, b) {
          var c = this.__renderParent ?? this.parent;
          if (this.__isMask && c == null) {
            c = this.__maskTarget;
          }
          this.__renderable = this.__visible && this.__scaleX != 0 && this.__scaleY != 0 && !this.__isMask && (c == null || !c.__isMask);
          this.__updateTransforms();
          this.__worldTransformInvalid = this.__transformDirty = false;
          if (!a) {
            if (Fa.__supportDOM) {
              this.__renderTransformChanged = !this.__renderTransform.equals(this.__renderTransformCache);
              if (this.__renderTransformCache == null) {
                this.__renderTransformCache = this.__renderTransform.clone();
              } else {
                this.__renderTransformCache.copyFrom(this.__renderTransform);
              }
            }
            if (c != null) {
              if (Fa.__supportDOM) {
                var d = c.__worldVisible && this.__visible;
                this.__worldVisibleChanged = this.__worldVisible != d;
                this.__worldVisible = d;
                d = this.get_alpha() * c.__worldAlpha;
                this.__worldAlphaChanged = this.__worldAlpha != d;
                this.__worldAlpha = d;
              } else {
                this.__worldAlpha = this.get_alpha() * c.__worldAlpha;
              }
              if (this.__objectTransform != null) {
                this.__worldColorTransform.__copyFrom(this.__objectTransform.__colorTransform);
                this.__worldColorTransform.__combine(c.__worldColorTransform);
              } else {
                this.__worldColorTransform.__copyFrom(c.__worldColorTransform);
              }
              this.__worldBlendMode = this.__blendMode == null || this.__blendMode == 10 ? c.__worldBlendMode : this.__blendMode;
              this.__worldShader = this.__shader == null ? c.__shader : this.__shader;
              this.__worldScale9Grid = this.__scale9Grid == null ? c.__scale9Grid : this.__scale9Grid;
            } else {
              this.__worldAlpha = this.get_alpha();
              if (Fa.__supportDOM) {
                this.__worldVisibleChanged = this.__worldVisible != this.__visible;
                this.__worldVisible = this.__visible;
                this.__worldAlphaChanged = this.__worldAlpha != this.get_alpha();
              }
              if (this.__objectTransform != null) {
                this.__worldColorTransform.__copyFrom(this.__objectTransform.__colorTransform);
              } else {
                this.__worldColorTransform.__identity();
              }
              this.__worldBlendMode = this.__blendMode;
              this.__worldShader = this.__shader;
              this.__worldScale9Grid = this.__scale9Grid;
            }
          }
          if (b && this.get_mask() != null) {
            this.get_mask().__update(a, true);
          }
        },
        __updateTransforms: function (a) {
          var b = a != null;
          a = b ? a : this.__transform;
          if (this.__worldTransform == null) {
            this.__worldTransform = new Aa();
          }
          if (this.__renderTransform == null) {
            this.__renderTransform = new Aa();
          }
          var c = this.__renderParent ?? this.parent;
          if (b || this.parent == null) {
            this.__worldTransform.copyFrom(a);
          } else {
            var d = this.parent.__worldTransform;
            var e = this.__worldTransform;
            e.a = a.a * d.a + a.b * d.c;
            e.b = a.a * d.b + a.b * d.d;
            e.c = a.c * d.a + a.d * d.c;
            e.d = a.c * d.b + a.d * d.d;
            e.tx = a.tx * d.a + a.ty * d.c + d.tx;
            e.ty = a.tx * d.b + a.ty * d.d + d.ty;
          }
          if (b || c == null) {
            this.__renderTransform.copyFrom(a);
          } else {
            d = c.__renderTransform;
            e = this.__renderTransform;
            e.a = a.a * d.a + a.b * d.c;
            e.b = a.a * d.b + a.b * d.d;
            e.c = a.c * d.a + a.d * d.c;
            e.d = a.c * d.b + a.d * d.d;
            e.tx = a.tx * d.a + a.ty * d.c + d.tx;
            e.ty = a.tx * d.b + a.ty * d.d + d.ty;
          }
          if (this.__scrollRect != null) {
            b = this.__renderTransform;
            a = -this.__scrollRect.x;
            c = -this.__scrollRect.y;
            b.tx = a * b.a + c * b.c + b.tx;
            b.ty = a * b.b + c * b.d + b.ty;
          }
        },
        get_alpha: function () {
          return this.__alpha;
        },
        set_alpha: function (a) {
          if (a > 1) {
            a = 1;
          }
          if (a < 0) {
            a = 0;
          }
          if (a != this.__alpha && !this.get_cacheAsBitmap() && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return this.__alpha = a;
        },
        set_blendMode: function (a) {
          if (a == null) {
            a = 10;
          }
          if (a != this.__blendMode && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return this.__blendMode = a;
        },
        get_cacheAsBitmap: function () {
          if (this.__filters == null) {
            return this.__cacheAsBitmap;
          } else {
            return true;
          }
        },
        set_filters: function (a) {
          if (a != null && a.length > 0) {
            var b = [];
            for (var c = 0; c < a.length;) {
              var d = a[c];
              ++c;
              d = d.clone();
              d.__renderDirty = true;
              b.push(d);
            }
            this.__filters = b;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          } else if (this.__filters != null) {
            this.__filters = null;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return a;
        },
        get_height: function () {
          var a = ea.__pool.get();
          this.__getLocalBounds(a);
          var b = a.height;
          ea.__pool.release(a);
          return b;
        },
        set_height: function (a) {
          var b = ea.__pool.get();
          var c = Aa.__pool.get();
          c.identity();
          this.__getBounds(b, c);
          if (a != b.height) {
            this.set_scaleY(a / b.height);
          } else {
            this.set_scaleY(1);
          }
          ea.__pool.release(b);
          Aa.__pool.release(c);
          return a;
        },
        get_loaderInfo: function () {
          if (this.stage != null) {
            return zd.current.__loaderInfo;
          } else {
            return null;
          }
        },
        get_mask: function () {
          return this.__mask;
        },
        set_mask: function (a) {
          if (a == this.__mask) {
            return a;
          }
          if (a != this.__mask) {
            this.__setTransformDirty();
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          if (this.__mask != null) {
            this.__mask.__isMask = false;
            this.__mask.__maskTarget = null;
            this.__mask.__setTransformDirty();
            var b = this.__mask;
            if (!b.__renderDirty) {
              b.__renderDirty = true;
              b.__setParentRenderDirty();
            }
          }
          if (a != null) {
            a.__isMask = true;
            a.__maskTarget = this;
            a.__setWorldTransformInvalid();
          }
          if (this.__cacheBitmap != null && this.__cacheBitmap.get_mask() != a) {
            this.__cacheBitmap.set_mask(a);
          }
          return this.__mask = a;
        },
        get_mouseX: function () {
          var a = this.stage != null ? this.stage.__mouseX : zd.current.stage.__mouseX;
          var b = this.stage != null ? this.stage.__mouseY : zd.current.stage.__mouseY;
          var c = this.__getRenderTransform();
          var d = c.a * c.d - c.b * c.c;
          if (d == 0) {
            return -c.tx;
          } else {
            return 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx));
          }
        },
        get_mouseY: function () {
          var a = this.stage != null ? this.stage.__mouseX : zd.current.stage.__mouseX;
          var b = this.stage != null ? this.stage.__mouseY : zd.current.stage.__mouseY;
          var c = this.__getRenderTransform();
          var d = c.a * c.d - c.b * c.c;
          if (d == 0) {
            return -c.ty;
          } else {
            return 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a));
          }
        },
        get_name: function () {
          return this.__name;
        },
        set_name: function (a) {
          return this.__name = a;
        },
        get_rotation: function () {
          return this.__rotation;
        },
        set_rotation: function (a) {
          if (a != this.__rotation) {
            this.__rotation = a;
            var b = Math.PI / 180 * this.__rotation;
            this.__rotationSine = Math.sin(b);
            this.__rotationCosine = Math.cos(b);
            this.__transform.a = this.__rotationCosine * this.__scaleX;
            this.__transform.b = this.__rotationSine * this.__scaleX;
            this.__transform.c = -this.__rotationSine * this.__scaleY;
            this.__transform.d = this.__rotationCosine * this.__scaleY;
            this.__setTransformDirty();
          }
          return a;
        },
        get_scaleX: function () {
          return this.__scaleX;
        },
        set_scaleX: function (a) {
          if (a != this.__scaleX) {
            this.__scaleX = a;
            if (this.__transform.b == 0) {
              if (a != this.__transform.a) {
                this.__setTransformDirty();
              }
              this.__transform.a = a;
            } else {
              var b = this.__rotationCosine * a;
              var c = this.__rotationSine * a;
              if (this.__transform.a != b || this.__transform.b != c) {
                this.__setTransformDirty();
              }
              this.__transform.a = b;
              this.__transform.b = c;
            }
          }
          return a;
        },
        get_scaleY: function () {
          return this.__scaleY;
        },
        set_scaleY: function (a) {
          if (a != this.__scaleY) {
            this.__scaleY = a;
            if (this.__transform.c == 0) {
              if (a != this.__transform.d) {
                this.__setTransformDirty();
              }
              this.__transform.d = a;
            } else {
              var b = -this.__rotationSine * a;
              var c = this.__rotationCosine * a;
              if (this.__transform.d != c || this.__transform.c != b) {
                this.__setTransformDirty();
              }
              this.__transform.c = b;
              this.__transform.d = c;
            }
          }
          return a;
        },
        get_scrollRect: function () {
          if (this.__scrollRect == null) {
            return null;
          } else {
            return this.__scrollRect.clone();
          }
        },
        set_scrollRect: function (a) {
          if (a == null && this.__scrollRect == null || a != null && this.__scrollRect != null && this.__scrollRect.equals(a)) {
            return a;
          }
          if (a != null) {
            if (this.__scrollRect == null) {
              this.__scrollRect = new ea();
            }
            this.__scrollRect.copyFrom(a);
          } else {
            this.__scrollRect = null;
          }
          this.__setTransformDirty();
          if (Fa.__supportDOM && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return a;
        },
        get_transform: function () {
          if (this.__objectTransform == null) {
            this.__objectTransform = new mk(this);
          }
          return this.__objectTransform;
        },
        set_transform: function (a) {
          if (a == null) {
            throw new Mi("Parameter transform must be non-null.");
          }
          if (this.__objectTransform == null) {
            this.__objectTransform = new mk(this);
          }
          this.__setTransformDirty();
          this.__objectTransform.set_matrix(a.get_matrix());
          if (!this.__objectTransform.__colorTransform.__equals(a.__colorTransform, true) || !this.get_cacheAsBitmap() && this.__objectTransform.__colorTransform.alphaMultiplier != a.__colorTransform.alphaMultiplier) {
            this.__objectTransform.__colorTransform.__copyFrom(a.get_colorTransform());
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__objectTransform;
        },
        get_visible: function () {
          return this.__visible;
        },
        set_visible: function (a) {
          if (a != this.__visible && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return this.__visible = a;
        },
        get_width: function () {
          var a = ea.__pool.get();
          this.__getLocalBounds(a);
          var b = a.width;
          ea.__pool.release(a);
          return b;
        },
        set_width: function (a) {
          var b = ea.__pool.get();
          var c = Aa.__pool.get();
          c.identity();
          this.__getBounds(b, c);
          if (a != b.width) {
            this.set_scaleX(a / b.width);
          } else {
            this.set_scaleX(1);
          }
          ea.__pool.release(b);
          Aa.__pool.release(c);
          return a;
        },
        get_x: function () {
          return this.__transform.tx;
        },
        set_x: function (a) {
          if (a != this.__transform.tx) {
            this.__setTransformDirty();
          }
          return this.__transform.tx = a;
        },
        get_y: function () {
          return this.__transform.ty;
        },
        set_y: function (a) {
          if (a != this.__transform.ty) {
            this.__setTransformDirty();
          }
          return this.__transform.ty = a;
        },
        __class__: Fa,
        __properties__: {
          set_filters: "set_filters",
          set_blendMode: "set_blendMode",
          set_y: "set_y",
          get_y: "get_y",
          set_x: "set_x",
          get_x: "get_x",
          set_width: "set_width",
          get_width: "get_width",
          set_visible: "set_visible",
          get_visible: "get_visible",
          set_transform: "set_transform",
          get_transform: "get_transform",
          set_scrollRect: "set_scrollRect",
          get_scrollRect: "get_scrollRect",
          set_scaleY: "set_scaleY",
          get_scaleY: "get_scaleY",
          set_scaleX: "set_scaleX",
          get_scaleX: "get_scaleX",
          set_rotation: "set_rotation",
          get_rotation: "get_rotation",
          set_name: "set_name",
          get_name: "get_name",
          get_mouseY: "get_mouseY",
          get_mouseX: "get_mouseX",
          set_mask: "set_mask",
          get_mask: "get_mask",
          get_loaderInfo: "get_loaderInfo",
          set_height: "set_height",
          get_height: "get_height",
          get_cacheAsBitmap: "get_cacheAsBitmap",
          set_alpha: "set_alpha",
          get_alpha: "get_alpha"
        }
      });
      function tb() {
        Fa.call(this);
        this.doubleClickEnabled = false;
        this.mouseEnabled = true;
        this.needsSoftKeyboard = false;
        this.__tabEnabled = null;
        this.__tabIndex = -1;
      }
      h["openfl.display.InteractiveObject"] = tb;
      tb.__name__ = "openfl.display.InteractiveObject";
      tb.__super__ = Fa;
      tb.prototype = q(Fa.prototype, {
        __allowMouseFocus: function () {
          if (this.mouseEnabled) {
            return this.get_tabEnabled();
          } else {
            return false;
          }
        },
        __getInteractive: function (a) {
          if (a != null) {
            a.push(this);
            if (this.parent != null) {
              this.parent.__getInteractive(a);
            }
          }
          return true;
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || e && !this.mouseEnabled) {
            return false;
          } else {
            return Fa.prototype.__hitTest.call(this, a, b, c, d, e, f);
          }
        },
        __tabTest: function (a) {
          if (this.get_tabEnabled()) {
            a.push(this);
          }
        },
        get_tabEnabled: function () {
          if (this.__tabEnabled == 1) {
            return true;
          } else {
            return false;
          }
        },
        get_tabIndex: function () {
          return this.__tabIndex;
        },
        __class__: tb,
        __properties__: q(Fa.prototype.__properties__, {
          get_tabIndex: "get_tabIndex",
          get_tabEnabled: "get_tabEnabled"
        })
      });
      function wb() {
        tb.call(this);
        this.__tabChildren = this.mouseChildren = true;
        this.__children = [];
        this.__removedChildren = qb.toObjectVector(null);
      }
      h["openfl.display.DisplayObjectContainer"] = wb;
      wb.__name__ = "openfl.display.DisplayObjectContainer";
      wb.__super__ = tb;
      wb.prototype = q(tb.prototype, {
        addChild: function (a) {
          return this.addChildAt(a, this.get_numChildren());
        },
        addChildAt: function (a, b) {
          if (a == null) {
            a = new Mi("Error #2007: Parameter child must be non-null.");
            a.errorID = 2007;
            throw a;
          }
          if (a.stage == a) {
            a = new Oh("Error #3783: A Stage object cannot be added as the child of another object.");
            a.errorID = 3783;
            throw a;
          }
          if (b > this.__children.length || b < 0) {
            throw K.thrown("Invalid index position " + b);
          }
          if (a.parent == this) {
            if (this.__children[b] != a) {
              M.remove(this.__children, a);
              this.__children.splice(b, 0, a);
              if (!this.__renderDirty) {
                this.__renderDirty = true;
                this.__setParentRenderDirty();
              }
            }
          } else {
            if (a.parent != null) {
              a.parent.removeChild(a);
            }
            this.__children.splice(b, 0, a);
            a.parent = this;
            if (b = this.stage != null && a.stage == null) {
              a.__setStageReference(this.stage);
            }
            a.__setTransformDirty();
            if (!a.__renderDirty) {
              a.__renderDirty = true;
              a.__setParentRenderDirty();
            }
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            var c = new Ga("added");
            c.bubbles = true;
            c.target = a;
            a.__dispatchWithCapture(c);
            if (b) {
              c = new Ga("addedToStage", false, false);
              a.__dispatchWithCapture(c);
              a.__dispatchChildren(c);
            }
          }
          return a;
        },
        contains: function (a) {
          while (a != this && a != null) {
            a = a.parent;
          }
          return a == this;
        },
        getChildAt: function (a) {
          if (a >= 0 && a < this.__children.length) {
            return this.__children[a];
          } else {
            return null;
          }
        },
        getChildByName: function (a) {
          for (var b = 0, c = this.__children; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.get_name() == a) {
              return d;
            }
          }
          return null;
        },
        getChildIndex: function (a) {
          for (var b = 0, c = this.__children.length; b < c;) {
            var d = b++;
            if (this.__children[d] == a) {
              return d;
            }
          }
          return -1;
        },
        removeChild: function (a) {
          if (a != null && a.parent == this) {
            a.__setTransformDirty();
            if (!a.__renderDirty) {
              a.__renderDirty = true;
              a.__setParentRenderDirty();
            }
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            var b = new Ga("removed", true);
            a.__dispatchWithCapture(b);
            if (this.stage != null) {
              if (a.stage != null && this.stage.get_focus() == a) {
                this.stage.set_focus(null);
              }
              b = new Ga("removedFromStage", false, false);
              a.__dispatchWithCapture(b);
              a.__dispatchChildren(b);
              a.__setStageReference(null);
            }
            a.parent = null;
            M.remove(this.__children, a);
            this.__removedChildren.push(a);
            a.__setTransformDirty();
          }
          return a;
        },
        removeChildAt: function (a) {
          if (a >= 0 && a < this.__children.length) {
            return this.removeChild(this.__children[a]);
          } else {
            return null;
          }
        },
        removeChildren: function (a, b) {
          if (b == null) {
            b = 2147483647;
          }
          if (a == null) {
            a = 0;
          }
          if (b == 2147483647 && (b = this.__children.length - 1, b < 0)) {
            return;
          }
          if (!(a > this.__children.length - 1)) {
            if (b < a || a < 0 || b > this.__children.length) {
              throw new Ni("The supplied index is out of bounds.");
            }
            for (b -= a; b >= 0;) {
              this.removeChildAt(a);
              --b;
            }
          }
        },
        __cleanup: function () {
          tb.prototype.__cleanup.call(this);
          for (var a = 0, b = this.__children; a < b.length;) {
            var c = b[a];
            ++a;
            c.__cleanup();
          }
          for (a = this.__removedChildren.iterator(); a.hasNext();) {
            b = a.next();
            if (b.stage == null) {
              b.__cleanup();
            }
          }
          this.__removedChildren.set_length(0);
        },
        __dispatchChildren: function (a) {
          if (this.__children != null) {
            for (var b = 0, c = this.__children; b < c.length;) {
              var d = c[b];
              ++b;
              a.target = d;
              if (!d.__dispatchWithCapture(a)) {
                break;
              }
              d.__dispatchChildren(a);
            }
          }
        },
        __enterFrame: function (a) {
          for (var b = 0, c = this.__children; b < c.length;) {
            var d = c[b];
            ++b;
            d.__enterFrame(a);
          }
        },
        __getBounds: function (a, b) {
          tb.prototype.__getBounds.call(this, a, b);
          if (this.__children.length != 0) {
            var c = Aa.__pool.get();
            for (var d = 0, e = this.__children; d < e.length;) {
              var f = e[d];
              ++d;
              if (f.__scaleX != 0 && f.__scaleY != 0) {
                var k = f.__transform;
                c.a = k.a * b.a + k.b * b.c;
                c.b = k.a * b.b + k.b * b.d;
                c.c = k.c * b.a + k.d * b.c;
                c.d = k.c * b.b + k.d * b.d;
                c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                f.__getBounds(a, c);
              }
            }
            Aa.__pool.release(c);
          }
        },
        __getFilterBounds: function (a, b) {
          tb.prototype.__getFilterBounds.call(this, a, b);
          if (this.__scrollRect == null && this.__children.length != 0) {
            var c = Aa.__pool.get();
            for (var d = 0, e = this.__children; d < e.length;) {
              var f = e[d];
              ++d;
              if (f.__scaleX != 0 && f.__scaleY != 0 && !f.__isMask) {
                var k = f.__transform;
                c.a = k.a * b.a + k.b * b.c;
                c.b = k.a * b.b + k.b * b.d;
                c.c = k.c * b.a + k.d * b.c;
                c.d = k.c * b.b + k.d * b.d;
                c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                k = ea.__pool.get();
                f.__getFilterBounds(k, c);
                a.__expand(k.x, k.y, k.width, k.height);
                ea.__pool.release(k);
              }
            }
            Aa.__pool.release(c);
          }
        },
        __getRenderBounds: function (a, b) {
          if (this.__scrollRect != null) {
            tb.prototype.__getRenderBounds.call(this, a, b);
          } else {
            tb.prototype.__getBounds.call(this, a, b);
            if (this.__children.length != 0) {
              var c = Aa.__pool.get();
              for (var d = 0, e = this.__children; d < e.length;) {
                var f = e[d];
                ++d;
                if (f.__scaleX != 0 && f.__scaleY != 0 && !f.__isMask) {
                  var k = f.__transform;
                  c.a = k.a * b.a + k.b * b.c;
                  c.b = k.a * b.b + k.b * b.d;
                  c.c = k.c * b.a + k.d * b.c;
                  c.d = k.c * b.b + k.d * b.d;
                  c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                  c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                  f.__getRenderBounds(a, c);
                }
              }
              Aa.__pool.release(c);
            }
          }
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || e && !this.mouseEnabled && !this.mouseChildren || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          if (this.__scrollRect != null) {
            var k = kb.__pool.get();
            k.setTo(a, b);
            var r = this.__getRenderTransform();
            var n = r.a * r.d - r.b * r.c;
            if (n == 0) {
              k.x = -r.tx;
              k.y = -r.ty;
            } else {
              var g = 1 / n * (r.c * (r.ty - k.y) + r.d * (k.x - r.tx));
              k.y = 1 / n * (r.a * (k.y - r.ty) + r.b * (r.tx - k.x));
              k.x = g;
            }
            if (!this.__scrollRect.containsPoint(k)) {
              kb.__pool.release(k);
              return false;
            }
            kb.__pool.release(k);
          }
          k = this.__children.length;
          if (e) {
            if (d == null || !this.mouseChildren) {
              while (--k >= 0) {
                if (this.__children[k].__hitTest(a, b, c, null, true, this.__children[k])) {
                  if (d != null) {
                    d.push(f);
                  }
                  return true;
                }
              }
            } else if (d != null) {
              e = d.length;
              for (n = false; --k >= 0 && (!(r = this.__children[k].__getInteractive(null)) && (!this.mouseEnabled || !!n) || !this.__children[k].__hitTest(a, b, c, d, true, this.__children[k]) || !(n = true, r && d.length > e)););
              if (n) {
                d.splice(e, 0, f);
                return true;
              }
            }
          } else {
            for (n = false; --k >= 0 && (!this.__children[k].__hitTest(a, b, c, d, false, this.__children[k]) || (n = true, d != null)););
            return n;
          }
          return false;
        },
        __hitTestMask: function (a, b) {
          for (var c = this.__children.length; --c >= 0;) {
            if (this.__children[c].__hitTestMask(a, b)) {
              return true;
            }
          }
          return false;
        },
        __setStageReference: function (a) {
          tb.prototype.__setStageReference.call(this, a);
          if (this.__children != null) {
            for (var b = 0, c = this.__children; b < c.length;) {
              var d = c[b];
              ++b;
              d.__setStageReference(a);
            }
          }
        },
        __setWorldTransformInvalid: function () {
          if (!this.__worldTransformInvalid && (this.__worldTransformInvalid = true, this.__children != null)) {
            for (var a = 0, b = this.__children; a < b.length;) {
              var c = b[a];
              ++a;
              c.__setWorldTransformInvalid();
            }
          }
        },
        __tabTest: function (a) {
          tb.prototype.__tabTest.call(this, a);
          if (this.get_tabChildren()) {
            var b;
            for (var c = 0, d = this.__children; c < d.length;) {
              var e = d[c];
              ++c;
              if (b = e.__getInteractive(null)) {
                b = e;
                b.__tabTest(a);
              }
            }
          }
        },
        __update: function (a, b) {
          tb.prototype.__update.call(this, a, b);
          if (b) {
            b = 0;
            for (var c = this.__children; b < c.length;) {
              var d = c[b];
              ++b;
              d.__update(a, true);
            }
          }
        },
        get_numChildren: function () {
          return this.__children.length;
        },
        get_tabChildren: function () {
          return this.__tabChildren;
        },
        __class__: wb,
        __properties__: q(tb.prototype.__properties__, {
          get_tabChildren: "get_tabChildren",
          get_numChildren: "get_numChildren"
        })
      });
      function $a() {
        wb.call(this);
        this.__drawableType = 4;
        this.__buttonMode = false;
        this.useHandCursor = true;
        if (this.__pendingBindLibrary != null) {
          var a = this.__pendingBindLibrary;
          var b = this.__pendingBindClassName;
          this.__pendingBindClassName = this.__pendingBindLibrary = null;
          a.bind(b, this);
        } else if ($a.__constructor != null) {
          a = $a.__constructor;
          $a.__constructor = null;
          a(this);
        }
      }
      h["openfl.display.Sprite"] = $a;
      $a.__name__ = "openfl.display.Sprite";
      $a.__super__ = wb;
      $a.prototype = q(wb.prototype, {
        __getCursor: function () {
          if (this.__buttonMode && this.useHandCursor) {
            return "button";
          } else {
            return null;
          }
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (e && !this.mouseEnabled && !this.mouseChildren) {
            return false;
          }
          if (!f.get_visible() || this.__isMask || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return this.__hitTestHitArea(a, b, c, d, e, f);
          }
          if (this.__scrollRect != null) {
            var k = kb.__pool.get();
            k.setTo(a, b);
            var r = this.__getRenderTransform();
            var n = r.a * r.d - r.b * r.c;
            if (n == 0) {
              k.x = -r.tx;
              k.y = -r.ty;
            } else {
              var g = 1 / n * (r.c * (r.ty - k.y) + r.d * (k.x - r.tx));
              k.y = 1 / n * (r.a * (k.y - r.ty) + r.b * (r.tx - k.x));
              k.x = g;
            }
            if (!this.__scrollRect.containsPoint(k)) {
              kb.__pool.release(k);
              return this.__hitTestHitArea(a, b, c, d, true, f);
            }
            kb.__pool.release(k);
          }
          if (wb.prototype.__hitTest.call(this, a, b, c, d, e, f)) {
            if (d != null) {
              return e;
            } else {
              return true;
            }
          } else if (this.hitArea == null && this.__graphics != null && this.__graphics.__hitTest(a, b, c, this.__getRenderTransform())) {
            if (d != null && (!e || !!this.mouseEnabled)) {
              d.push(f);
            }
            return true;
          } else {
            return this.__hitTestHitArea(a, b, c, d, e, f);
          }
        },
        __hitTestHitArea: function (a, b, c, d, e, f) {
          if (this.hitArea == null || this.hitArea.mouseEnabled) {
            return false;
          } else {
            this.hitArea.mouseEnabled = true;
            a = this.hitArea.__hitTest(a, b, c, null, true, f);
            this.hitArea.mouseEnabled = false;
            if (d != null && a) {
              d[d.length] = f;
            }
            return a;
          }
        },
        __hitTestMask: function (a, b) {
          if (wb.prototype.__hitTestMask.call(this, a, b) || this.__graphics != null && this.__graphics.__hitTest(a, b, true, this.__getRenderTransform())) {
            return true;
          } else {
            return false;
          }
        },
        get_graphics: function () {
          if (this.__graphics == null) {
            this.__graphics = new je(this);
          }
          return this.__graphics;
        },
        get_tabEnabled: function () {
          if (this.__tabEnabled == null) {
            return this.__buttonMode;
          } else {
            return this.__tabEnabled;
          }
        },
        get_buttonMode: function () {
          return this.__buttonMode;
        },
        __class__: $a,
        __properties__: q(wb.prototype.__properties__, {
          get_graphics: "get_graphics",
          get_buttonMode: "get_buttonMode"
        })
      });
      function Ub() {
        this.game = {
          width: 1280,
          height: 720,
          initialState: zc,
          zoom: 1,
          framerate: 60,
          skipSplash: true,
          startFullscreen: false
        };
        $a.call(this);
        if (this.stage != null) {
          this.init();
        } else {
          this.addEventListener("addedToStage", l(this, this.init));
        }
      }
      h.Main = Ub;
      Ub.__name__ = "Main";
      Ub.main = function () {
        na.get_current().addChild(new Ub());
      };
      Ub.resetSpriteCache = function (a) {
        a.__cacheBitmap = null;
        a.__cacheBitmapData = null;
      };
      Ub.__super__ = $a;
      Ub.prototype = q($a.prototype, {
        init: function (a) {
          if (this.hasEventListener("addedToStage")) {
            this.removeEventListener("addedToStage", l(this, this.init));
          }
          this.setupGame();
        },
        setupGame: function () {
          na.get_current();
          na.get_current();
          Ca.instance = new Ca();
          C.loadDefaultKeys();
          this.addChild(new nk(this.game.width, this.game.height, xp.fromType(this.game.initialState), this.game.framerate, this.game.framerate, this.game.skipSplash, this.game.startFullscreen));
          Ub.fpsVar = new ok(10, 3, 16777215);
          this.addChild(Ub.fpsVar);
          na.get_current().stage.align = Fp.fromString("tl");
          na.get_current().stage.set_scaleMode(2);
          if (Ub.fpsVar != null) {
            Ub.fpsVar.set_visible(C.data.showFPS);
          }
          g.autoPause = false;
          g.mouse.set_visible(false);
          g.signals.gameResized.add(function (a, b) {
            if (g.cameras != null) {
              a = 0;
              b = g.cameras.list;
              while (a < b.length) {
                var c = b[a];
                ++a;
                if (c != null && c.filters != null) {
                  Ub.resetSpriteCache(c.flashSprite);
                }
              }
            }
            if (g.game != null) {
              Ub.resetSpriteCache(g.game);
            }
          });
        },
        __class__: Ub
      });
      function ld(a) {
        a.addChild(this);
        Ub.call(this);
        this.dispatchEvent(new Ga("addedToStage", false, false));
      }
      h.DocumentClass = ld;
      ld.__name__ = "DocumentClass";
      ld.__super__ = Ub;
      ld.prototype = q(Ub.prototype, {
        __class__: ld
      });
      function sa(a, b) {
        this.r = new RegExp(a, b.split("u").join(""));
      }
      h.EReg = sa;
      sa.__name__ = "EReg";
      sa.prototype = {
        match: function (a) {
          if (this.r.global) {
            this.r.lastIndex = 0;
          }
          this.r.m = this.r.exec(a);
          this.r.s = a;
          return this.r.m != null;
        },
        matched: function (a) {
          if (this.r.m != null && a >= 0 && a < this.r.m.length) {
            return this.r.m[a];
          }
          throw K.thrown("EReg::matched");
        },
        matchedPos: function () {
          if (this.r.m == null) {
            throw K.thrown("No string matched");
          }
          return {
            pos: this.r.m.index,
            len: this.r.m[0].length
          };
        },
        matchSub: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (this.r.global) {
            this.r.lastIndex = b;
            this.r.m = this.r.exec(c < 0 ? a : M.substr(a, 0, b + c));
            if (c = this.r.m != null) {
              this.r.s = a;
            }
          } else if (c = this.match(c < 0 ? M.substr(a, b, null) : M.substr(a, b, c))) {
            this.r.s = a;
            this.r.m.index += b;
          }
          return c;
        },
        split: function (a) {
          return a.replace(this.r, "#__delim__#").split("#__delim__#");
        },
        map: function (a, b) {
          var c = 0;
          var d = "";
          do {
            if (c >= a.length) {
              break;
            } else if (!this.matchSub(a, c)) {
              d += H.string(M.substr(a, c, null));
              break;
            }
            var e = this.matchedPos();
            d += H.string(M.substr(a, c, e.pos - c));
            d += H.string(b(this));
            if (e.len == 0) {
              d += H.string(M.substr(a, e.pos, 1));
              c = e.pos + 1;
            } else {
              c = e.pos + e.len;
            }
          } while (this.r.global);
          if (!this.r.global && c > 0 && c < a.length) {
            d += H.string(M.substr(a, c, null));
          }
          return d;
        },
        __class__: sa
      };
      function B() {}
      h["flixel.util.IFlxDestroyable"] = B;
      B.__name__ = "flixel.util.IFlxDestroyable";
      B.__isInterface__ = true;
      B.prototype = {
        __class__: B
      };
      function Ea() {
        this.flixelType = 0;
        this.active = this.visible = this.alive = this.exists = true;
        this.ID = Ea.idEnumerator++;
      }
      h["flixel.FlxBasic"] = Ea;
      Ea.__name__ = "flixel.FlxBasic";
      Ea.__interfaces__ = [B];
      Ea.prototype = {
        destroy: function () {
          if (this.get_container() != null) {
            this.get_container().remove(this);
          }
          this.container = null;
          this.set_exists(false);
          this._cameras = null;
        },
        kill: function () {
          this.set_alive(false);
          this.set_exists(false);
        },
        revive: function () {
          this.set_alive(true);
          this.set_exists(true);
        },
        update: function (a) {},
        draw: function () {},
        set_visible: function (a) {
          return this.visible = a;
        },
        set_active: function (a) {
          return this.active = a;
        },
        set_exists: function (a) {
          return this.exists = a;
        },
        set_alive: function (a) {
          return this.alive = a;
        },
        get_camera: function () {
          if (this._cameras == null || this._cameras.length == 0) {
            return Vb._defaultCameras[0];
          } else {
            return this._cameras[0];
          }
        },
        getCameras: function () {
          return this._cameras ?? (this._cameras == null && this.get_container() != null ? this.get_container().getCameras() : Vb._defaultCameras);
        },
        getCamerasLegacy: function () {
          if (this._cameras == null) {
            return Vb._defaultCameras;
          } else {
            return this._cameras;
          }
        },
        get_cameras: function () {
          return this.getCamerasLegacy();
        },
        set_cameras: function (a) {
          return this._cameras = a;
        },
        get_container: function () {
          return this.container;
        },
        __class__: Ea,
        __properties__: {
          get_container: "get_container",
          set_cameras: "set_cameras",
          get_cameras: "get_cameras",
          get_camera: "get_camera",
          set_exists: "set_exists",
          set_alive: "set_alive",
          set_visible: "set_visible",
          set_active: "set_active"
        }
      };
      function sc(a) {
        this.finishCallback = null;
        var b = this;
        Ea.call(this);
        sc.player = new pk();
        sc.player.set_x(0);
        sc.player.set_y(0);
        g.addChildBelowMouse(sc.player);
        var c = new qk();
        c.connect(null);
        sc.netStream = new rk(c);
        sc.netStream.client = {
          onMetaData: function () {
            sc.player.attachNetStream(sc.netStream);
            sc.player.set_width(g.width);
            sc.player.set_height(g.height);
          }
        };
        c.addEventListener("netStatus", function (a) {
          if (a.info.code == "NetStream.Play.Complete") {
            sc.netStream.dispose();
            if (g.game.contains(sc.player)) {
              g.game.removeChild(sc.player);
            }
            if (b.finishCallback != null) {
              b.finishCallback();
            }
          }
        });
        sc.netStream.play(a);
      }
      h.FlxVideo = sc;
      sc.__name__ = "FlxVideo";
      sc.__super__ = Ea;
      sc.prototype = q(Ea.prototype, {
        skipVideo: function () {
          sc.netStream.dispose();
          if (g.game.contains(sc.player)) {
            g.game.removeChild(sc.player);
          }
          if (this.finishCallback != null) {
            this.finishCallback();
          }
        },
        __class__: sc
      });
      function M() {}
      h.HxOverrides = M;
      M.__name__ = "HxOverrides";
      M.strDate = function (a) {
        switch (a.length) {
          case 8:
            a = a.split(":");
            var b = new Date();
            b.setTime(0);
            b.setUTCHours(a[0]);
            b.setUTCMinutes(a[1]);
            b.setUTCSeconds(a[2]);
            return b;
          case 10:
            a = a.split("-");
            return new Date(a[0], a[1] - 1, a[2], 0, 0, 0);
          case 19:
            a = a.split(" ");
            b = a[0].split("-");
            a = a[1].split(":");
            return new Date(b[0], b[1] - 1, b[2], a[0], a[1], a[2]);
          default:
            throw K.thrown("Invalid date format : " + a);
        }
      };
      M.cca = function (a, b) {
        a = a.charCodeAt(b);
        if (a == a) {
          return a;
        }
      };
      M.substr = function (a, b, c) {
        if (c == null) {
          c = a.length;
        } else if (c < 0) {
          if (b == 0) {
            c = a.length + c;
          } else {
            return "";
          }
        }
        return a.substr(b, c);
      };
      M.remove = function (a, b) {
        b = a.indexOf(b);
        if (b == -1) {
          return false;
        }
        a.splice(b, 1);
        return true;
      };
      M.keyValueIter = function (a) {
        return new mn(a);
      };
      M.now = function () {
        return Date.now();
      };
      function sb(a, b) {
        this.min = a;
        this.max = b;
      }
      h.IntIterator = sb;
      sb.__name__ = "IntIterator";
      sb.prototype = {
        hasNext: function () {
          return this.min < this.max;
        },
        next: function () {
          return this.min++;
        },
        __class__: sb
      };
      function lb() {}
      h.Lambda = lb;
      lb.__name__ = "Lambda";
      lb.array = function (a) {
        var b = [];
        for (a = O(a); a.hasNext();) {
          var c = a.next();
          b.push(c);
        }
        return b;
      };
      function Da() {}
      h.ManifestResources = Da;
      Da.__name__ = "ManifestResources";
      Da.init = function (a) {
        Da.preloadLibraries = [];
        Da.preloadLibraryNames = [];
        Da.rootPath = null;
        if (a != null && Object.prototype.hasOwnProperty.call(a, "rootPath")) {
          Da.rootPath = ma.field(a, "rootPath");
          if (!w.endsWith(Da.rootPath, "/")) {
            Da.rootPath += "/";
          }
        }
        if (Da.rootPath == null) {
          Da.rootPath = "./";
        }
        t.registerFont(Ad);
        t.registerFont(Ka);
        t.registerFont(A);
        t.registerFont(tc);
        t.registerFont(rd);
        oa.libraryPaths.h.songs = Da.rootPath + "manifest/songs.json";
        a = Ud.parse("{\"name\":null,\"assets\":\"aoy4:sizei2150860y4:typey4:FONTy9:classNamey31:__ASSET__assets_fonts_dokdo_ttfy2:idy26:assets%2Ffonts%2Fdokdo.ttfy7:preloadtgoy4:pathy34:assets%2Ffonts%2Ffonts-go-here.txtR0zR1y4:TEXTR5R9R7tgoR0i14656R1R2R3y31:__ASSET__assets_fonts_pixel_otfR5y26:assets%2Ffonts%2Fpixel.otfR7tgoR0i75864R1R2R3y29:__ASSET__assets_fonts_vcr_ttfR5y24:assets%2Ffonts%2Fvcr.ttfR7tgoR8y58:assets%2Fshared%2Fcharacters%2Fawesome-fucking-markus.jsonR0i1020R1R10R5R15R7tgoR8y43:assets%2Fshared%2Fcharacters%2Fbf-dead.jsonR0i709R1R10R5R16R7tgoR8y42:assets%2Fshared%2Fcharacters%2Fbf-old.jsonR0i2044R1R10R5R17R7tgoR8y49:assets%2Fshared%2Fcharacters%2Fbf-rook-death.jsonR0i753R1R10R5R18R7tgoR8y43:assets%2Fshared%2Fcharacters%2Fbf-rook.jsonR0i1743R1R10R5R19R7tgoR8y38:assets%2Fshared%2Fcharacters%2Fbf.jsonR0i2467R1R10R5R20R7tgoR8y50:assets%2Fshared%2Fcharacters%2Fgf-rook-scared.jsonR0i564R1R10R5R21R7tgoR8y43:assets%2Fshared%2Fcharacters%2Fgf-rook.jsonR0i704R1R10R5R22R7tgoR8y38:assets%2Fshared%2Fcharacters%2Fgf.jsonR0i2326R1R10R5R23R7tgoR8y41:assets%2Fshared%2Fcharacters%2Fmarko.jsonR0i1017R1R10R5R24R7tgoR8y49:assets%2Fshared%2Fcharacters%2Fmarkus-coocoo.jsonR0i420R1R10R5R25R7tgoR8y48:assets%2Fshared%2Fcharacters%2Fmarkus-crazy.jsonR0i1414R1R10R5R26R7tgoR8y46:assets%2Fshared%2Fcharacters%2Fmarkus-mad.jsonR0i1581R1R10R5R27R7tgoR8y42:assets%2Fshared%2Fcharacters%2Fmarkus.jsonR0i1183R1R10R5R28R7tgoR8y42:assets%2Fshared%2Fcharacters%2Fmartha.jsonR0i1152R1R10R5R29R7tgoR8y42:assets%2Fshared%2Fdata%2FcharacterList.txtR0i253R1R10R5R30R7tgoR8y43:assets%2Fshared%2Fdata%2Fdata-goes-here.txtR0zR1R10R5R31R7tgoR8y38:assets%2Fshared%2Fdata%2FintroText.txtR0i2329R1R10R5R32R7tgoR8y38:assets%2Fshared%2Fdata%2Fmain-view.xmlR0i123R1R10R5R33R7tgoR8y49:assets%2Fshared%2Fdata%2Fmaniacal%2Fmaniacal.jsonR0i127669R1R10R5R34R7tgoR8y46:assets%2Fshared%2Fdata%2Frepentance%2Fold.jsonR0i131526R1R10R5R35R7tgoR8y53:assets%2Fshared%2Fdata%2Frepentance%2Frepentance.jsonR0i131526R1R10R5R36R7tgoR8y42:assets%2Fshared%2Fdata%2FspecialThanks.txtR0i300R1R10R5R37R7tgoR8y38:assets%2Fshared%2Fdata%2FstageList.txtR0i61R1R10R5R38R7tgoR8y51:assets%2Fshared%2Fdata%2Funsettled%2Funsettled.jsonR0i106330R1R10R5R39R7tgoR8y47:assets%2Fshared%2Fdata%2Fwelcome%2Fwelcome.jsonR0i40457R1R10R5R40R7tgoR8y55:assets%2Fshared%2Fdata%2Fwelcome-old%2Fwelcome-old.jsonR0i21789R1R10R5R41R7tgoR8y54:assets%2Fshared%2Fimages%2Fachievements%2Fdebugger.pngR0i5257R1y5:IMAGER5R42R7tgoR8y63:assets%2Fshared%2Fimages%2Fachievements%2Ffriday_night_play.pngR0i5043R1R43R5R44R7tgoR8y50:assets%2Fshared%2Fimages%2Fachievements%2Fhype.pngR0i10435R1R43R5R45R7tgoR8y63:assets%2Fshared%2Fimages%2Fachievements%2Flockedachievement.pngR0i1709R1R43R5R46R7tgoR8y57:assets%2Fshared%2Fimages%2Fachievements%2Foversinging.pngR0i9667R1R43R5R47R7tgoR8y65:assets%2Fshared%2Fimages%2Fachievements%2Froadkill_enthusiast.pngR0i4718R1R43R5R48R7tgoR8y53:assets%2Fshared%2Fimages%2Fachievements%2Ftoastie.pngR0i3094R1R43R5R49R7tgoR8y54:assets%2Fshared%2Fimages%2Fachievements%2Ftwo_keys.pngR0i12409R1R43R5R50R7tgoR8y52:assets%2Fshared%2Fimages%2Fachievements%2Fur_bad.pngR0i10384R1R43R5R51R7tgoR8y53:assets%2Fshared%2Fimages%2Fachievements%2Fur_good.pngR0i3467R1R43R5R52R7tgoR8y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek1_nomiss.pngR0i9818R1R43R5R53R7tgoR8y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek2_nomiss.pngR0i6201R1R43R5R54R7tgoR8y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek3_nomiss.pngR0i10089R1R43R5R55R7tgoR8y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek4_nomiss.pngR0i7484R1R43R5R56R7tgoR8y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek5_nomiss.pngR0i9789R1R43R5R57R7tgoR8y64:assets%2Fshared%2Fimages%2Fachievements%2Fweek6_nomiss-pixel.pngR0i552R1R43R5R58R7tgoR8y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek7_nomiss.pngR0i4902R1R43R5R59R7tgoR8y39:assets%2Fshared%2Fimages%2Falphabet.pngR0i358406R1R43R5R60R7tgoR8y39:assets%2Fshared%2Fimages%2Falphabet.xmlR0i105671R1R10R5R61R7tgoR8y51:assets%2Fshared%2Fimages%2Falphabet_playstation.pngR0i2717R1R43R5R62R7tgoR8y51:assets%2Fshared%2Fimages%2Falphabet_playstation.xmlR0i1209R1R10R5R63R7tgoR8y34:assets%2Fshared%2Fimages%2Fbad.pngR0i19526R1R43R5R64R7tgoR8y54:assets%2Fshared%2Fimages%2Fcampaign_menu_UI_assets.pngR0i3044R1R43R5R65R7tgoR8y54:assets%2Fshared%2Fimages%2Fcampaign_menu_UI_assets.xmlR0i597R1R10R5R66R7tgoR8y66:assets%2Fshared%2Fimages%2Fcharacters%2Fawesome-fucking-markus.pngR0i1088402R1R43R5R67R7tgoR8y66:assets%2Fshared%2Fimages%2Fcharacters%2Fawesome-fucking-markus.xmlR0i9432R1R10R5R68R7tgoR8y50:assets%2Fshared%2Fimages%2Fcharacters%2Fbf-old.pngR0i1650733R1R43R5R69R7tgoR8y50:assets%2Fshared%2Fimages%2Fcharacters%2Fbf-old.xmlR0i52873R1R10R5R70R7tgoR8y55:assets%2Fshared%2Fimages%2Fcharacters%2Fbf-rook%2F1.pngR0i714286R1R43R5R71R7tgoR8y55:assets%2Fshared%2Fimages%2Fcharacters%2Fbf-rook%2F1.xmlR0i5442R1R10R5R72R7tgoR8y55:assets%2Fshared%2Fimages%2Fcharacters%2Fbf-rook%2F2.pngR0i590218R1R43R5R73R7tgoR8y55:assets%2Fshared%2Fimages%2Fcharacters%2Fbf-rook%2F2.xmlR0i3626R1R10R5R74R7tgoR8y55:assets%2Fshared%2Fimages%2Fcharacters%2Fbf-rook%2F3.pngR0i499236R1R43R5R75R7tgoR8y55:assets%2Fshared%2Fimages%2Fcharacters%2Fbf-rook%2F3.xmlR0i4095R1R10R5R76R7tgoR8y55:assets%2Fshared%2Fimages%2Fcharacters%2Fbf-rook%2F4.pngR0i581407R1R43R5R77R7tgoR8y55:assets%2Fshared%2Fimages%2Fcharacters%2Fbf-rook%2F4.xmlR0i3648R1R10R5R78R7tgoR8y57:assets%2Fshared%2Fimages%2Fcharacters%2Fbf-rook-death.pngR0i615159R1R43R5R79R7tgoR8y57:assets%2Fshared%2Fimages%2Fcharacters%2Fbf-rook-death.xmlR0i11477R1R10R5R80R7tgoR8y53:assets%2Fshared%2Fimages%2Fcharacters%2FBOYFRIEND.pngR0i875627R1R43R5R81R7tgoR8y53:assets%2Fshared%2Fimages%2Fcharacters%2FBOYFRIEND.xmlR0i52069R1R10R5R82R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2FBOYFRIEND_DEAD.pngR0i778368R1R43R5R83R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2FBOYFRIEND_DEAD.xmlR0i15438R1R10R5R84R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fgf-rook-scared.pngR0i605704R1R43R5R85R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fgf-rook-scared.xmlR0i6773R1R10R5R86R7tgoR8y51:assets%2Fshared%2Fimages%2Fcharacters%2Fgf-rook.pngR0i993986R1R43R5R87R7tgoR8y51:assets%2Fshared%2Fimages%2Fcharacters%2Fgf-rook.xmlR0i8939R1R10R5R88R7tgoR8y53:assets%2Fshared%2Fimages%2Fcharacters%2FGF_assets.pngR0i208687R1R43R5R89R7tgoR8y53:assets%2Fshared%2Fimages%2Fcharacters%2FGF_assets.xmlR0i4364R1R10R5R90R7tgoR8y49:assets%2Fshared%2Fimages%2Fcharacters%2Fmarko.pngR0i1270796R1R43R5R91R7tgoR8y49:assets%2Fshared%2Fimages%2Fcharacters%2Fmarko.xmlR0i11066R1R10R5R92R7tgoR8y54:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus%2F1.pngR0i2225287R1R43R5R93R7tgoR8y54:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus%2F1.xmlR0i11295R1R10R5R94R7tgoR8y54:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus%2F2.pngR0i1787468R1R43R5R95R7tgoR8y54:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus%2F2.xmlR0i4947R1R10R5R96R7tgoR8y57:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-coocoo.pngR0i418813R1R43R5R97R7tgoR8y57:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-coocoo.xmlR0i3145R1R10R5R98R7tgoR8y60:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-crazy%2F1.pngR0i424201R1R43R5R99R7tgoR8y60:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-crazy%2F1.xmlR0i1915R1R10R5R100R7tgoR8y60:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-crazy%2F2.pngR0i413735R1R43R5R101R7tgoR8y60:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-crazy%2F2.xmlR0i1779R1R10R5R102R7tgoR8y60:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-crazy%2F3.pngR0i261052R1R43R5R103R7tgoR8y60:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-crazy%2F3.xmlR0i1400R1R10R5R104R7tgoR8y60:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-crazy%2F4.pngR0i395823R1R43R5R105R7tgoR8y60:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-crazy%2F4.xmlR0i1657R1R10R5R106R7tgoR8y60:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-crazy%2F5.pngR0i412790R1R43R5R107R7tgoR8y60:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-crazy%2F5.xmlR0i1908R1R10R5R108R7tgoR8y60:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-crazy%2F6.pngR0i417264R1R43R5R109R7tgoR8y60:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-crazy%2F6.xmlR0i1763R1R10R5R110R7tgoR8y60:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-crazy%2F7.pngR0i170425R1R43R5R111R7tgoR8y60:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-crazy%2F7.xmlR0i1100R1R10R5R112R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F1.pngR0i425603R1R43R5R113R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F1.xmlR0i1359R1R10R5R114R7tgoR8y59:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F10.pngR0i474129R1R43R5R115R7tgoR8y59:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F10.xmlR0i1499R1R10R5R116R7tgoR8y59:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F11.pngR0i453933R1R43R5R117R7tgoR8y59:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F11.xmlR0i1499R1R10R5R118R7tgoR8y59:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F12.pngR0i417196R1R43R5R119R7tgoR8y59:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F12.xmlR0i1497R1R10R5R120R7tgoR8y59:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F13.pngR0i194731R1R43R5R121R7tgoR8y59:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F13.xmlR0i773R1R10R5R122R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F2.pngR0i395856R1R43R5R123R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F2.xmlR0i1359R1R10R5R124R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F3.pngR0i422457R1R43R5R125R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F3.xmlR0i1365R1R10R5R126R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F4.pngR0i414743R1R43R5R127R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F4.xmlR0i1362R1R10R5R128R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F5.pngR0i413228R1R43R5R129R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F5.xmlR0i1362R1R10R5R130R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F6.pngR0i371993R1R43R5R131R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F6.xmlR0i1211R1R10R5R132R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F7.pngR0i430697R1R43R5R133R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F7.xmlR0i1359R1R10R5R134R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F8.pngR0i444697R1R43R5R135R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F8.xmlR0i1492R1R10R5R136R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F9.pngR0i447576R1R43R5R137R7tgoR8y58:assets%2Fshared%2Fimages%2Fcharacters%2Fmarkus-mad%2F9.xmlR0i1492R1R10R5R138R7tgoR8y50:assets%2Fshared%2Fimages%2Fcharacters%2Fmartha.pngR0i1655676R1R43R5R139R7tgoR8y50:assets%2Fshared%2Fimages%2Fcharacters%2Fmartha.xmlR0i12391R1R10R5R140R7tgoR8y42:assets%2Fshared%2Fimages%2Fchart_quant.pngR0i3143R1R43R5R141R7tgoR8y42:assets%2Fshared%2Fimages%2Fchart_quant.xmlR0i1028R1R10R5R142R7tgoR8y43:assets%2Fshared%2Fimages%2Fcheckboxanim.pngR0i16546R1R43R5R143R7tgoR8y43:assets%2Fshared%2Fimages%2Fcheckboxanim.xmlR0i1976R1R10R5R144R7tgoR8y36:assets%2Fshared%2Fimages%2Fcombo.pngR0i28277R1R43R5R145R7tgoR8y45:assets%2Fshared%2Fimages%2Fcontrollertype.pngR0i2153R1R43R5R146R7tgoR8y48:assets%2Fshared%2Fimages%2Fcredits%2FAcrylic.pngR0i15684R1R43R5R147R7tgoR8y44:assets%2Fshared%2Fimages%2Fcredits%2FBax.pngR0i5376R1R43R5R148R7tgoR8y43:assets%2Fshared%2Fimages%2Fcredits%2Fbb.pngR0i3533R1R43R5R149R7tgoR8y47:assets%2Fshared%2Fimages%2Fcredits%2FBlu101.pngR0i2319R1R43R5R150R7tgoR8y47:assets%2Fshared%2Fimages%2Fcredits%2FBogdan.pngR0i5942R1R43R5R151R7tgoR8y46:assets%2Fshared%2Fimages%2Fcredits%2FBombu.pngR0i8963R1R43R5R152R7tgoR8y48:assets%2Fshared%2Fimages%2Fcredits%2FCandias.pngR0i5416R1R43R5R153R7tgoR8y47:assets%2Fshared%2Fimages%2Fcredits%2FChoccy.pngR0i3978R1R43R5R154R7tgoR8y52:assets%2Fshared%2Fimages%2Fcredits%2FCloudDaGoat.pngR0i9661R1R43R5R155R7tgoR8y48:assets%2Fshared%2Fimages%2Fcredits%2FCredits.txtR0i1653R1R10R5R156R7tgoR8y51:assets%2Fshared%2Fimages%2Fcredits%2Fcrowplexus.pngR0i3910R1R43R5R157R7tgoR8y48:assets%2Fshared%2Fimages%2Fcredits%2Fdiscord.pngR0i1510R1R43R5R158R7tgoR8y49:assets%2Fshared%2Fimages%2Fcredits%2Fevilsk8r.pngR0i4431R1R43R5R159R7tgoR8y47:assets%2Fshared%2Fimages%2Fcredits%2Fflicky.pngR0i3869R1R43R5R160R7tgoR8y57:assets%2Fshared%2Fimages%2Fcredits%2FForFurtherNotice.pngR0i8612R1R43R5R161R7tgoR8y53:assets%2Fshared%2Fimages%2Fcredits%2FGoofyAhhDani.pngR0i71539R1R43R5R162R7tgoR8y46:assets%2Fshared%2Fimages%2Fcredits%2FIazzy.pngR0i6172R1R43R5R163R7tgoR8y45:assets%2Fshared%2Fimages%2Fcredits%2Fjara.pngR0i20313R1R43R5R164R7tgoR8y44:assets%2Fshared%2Fimages%2Fcredits%2FJay.pngR0i3001R1R43R5R165R7tgoR8y52:assets%2Fshared%2Fimages%2Fcredits%2FJudiiDoodle.pngR0i6963R1R43R5R166R7tgoR8y45:assets%2Fshared%2Fimages%2Fcredits%2Fkade.pngR0i5777R1R43R5R167R7tgoR8y52:assets%2Fshared%2Fimages%2Fcredits%2Fkawaisprite.pngR0i2817R1R43R5R168R7tgoR8y47:assets%2Fshared%2Fimages%2Fcredits%2Fkeoiki.pngR0i3838R1R43R5R169R7tgoR8y51:assets%2Fshared%2Fimages%2Fcredits%2FLuigiOmega.pngR0i6688R1R43R5R170R7tgoR8y51:assets%2Fshared%2Fimages%2Fcredits%2Fmastereric.pngR0i4651R1R43R5R171R7tgoR8y47:assets%2Fshared%2Fimages%2Fcredits%2FMCrown.pngR0i8018R1R43R5R172R7tgoR8y53:assets%2Fshared%2Fimages%2Fcredits%2Fmissing_icon.pngR0i2664R1R43R5R173R7tgoR8y50:assets%2Fshared%2Fimages%2Fcredits%2FMolkeyXML.pngR0i67574R1R43R5R174R7tgoR8y47:assets%2Fshared%2Fimages%2Fcredits%2FNexsus.pngR0i42874R1R43R5R175R7tgoR8y54:assets%2Fshared%2Fimages%2Fcredits%2Fninjamuffin99.pngR0i3596R1R43R5R176R7tgoR8y50:assets%2Fshared%2Fimages%2Fcredits%2FOhDelight.pngR0i30876R1R43R5R177R7tgoR8y48:assets%2Fshared%2Fimages%2Fcredits%2FPamduro.pngR0i46816R1R43R5R178R7tgoR8y54:assets%2Fshared%2Fimages%2Fcredits%2Fphantomarcade.pngR0i4971R1R43R5R179R7tgoR8y46:assets%2Fshared%2Fimages%2Fcredits%2Fproxy.pngR0i4388R1R43R5R180R7tgoR8y47:assets%2Fshared%2Fimages%2Fcredits%2FPumkin.pngR0i4538R1R43R5R181R7tgoR8y48:assets%2Fshared%2Fimages%2Fcredits%2FPurgAVI.pngR0i14442R1R43R5R182R7tgoR8y48:assets%2Fshared%2Fimages%2Fcredits%2Friveren.pngR0i4841R1R43R5R183R7tgoR8y47:assets%2Fshared%2Fimages%2Fcredits%2FSaihed.pngR0i33718R1R43R5R184R7tgoR8y52:assets%2Fshared%2Fimages%2Fcredits%2Fshadowmario.pngR0i3679R1R43R5R185R7tgoR8y50:assets%2Fshared%2Fimages%2Fcredits%2FShekkai47.pngR0i29818R1R43R5R186R7tgoR8y58:assets%2Fshared%2Fimages%2Fcredits%2FSkylarFilmStudios.pngR0i6078R1R43R5R187R7tgoR8y45:assets%2Fshared%2Fimages%2Fcredits%2FSoru.pngR0i8018R1R43R5R188R7tgoR8y50:assets%2Fshared%2Fimages%2Fcredits%2FSossyBaka.pngR0i5252R1R43R5R189R7tgoR8y47:assets%2Fshared%2Fimages%2Fcredits%2Fsqirra.pngR0i4468R1R43R5R190R7tgoR8y50:assets%2Fshared%2Fimages%2Fcredits%2FStaletide.pngR0i3510R1R43R5R191R7tgoR8y54:assets%2Fshared%2Fimages%2Fcredits%2Fsuperpowers04.pngR0i4018R1R43R5R192R7tgoR8y46:assets%2Fshared%2Fimages%2Fcredits%2FTachi.pngR0i84530R1R43R5R193R7tgoR8y46:assets%2Fshared%2Fimages%2Fcredits%2Ftahir.pngR0i4880R1R43R5R194R7tgoR8y55:assets%2Fshared%2Fimages%2Fcredits%2FTheHallMonitor.pngR0i6534R1R43R5R195R7tgoR8y55:assets%2Fshared%2Fimages%2Fcredits%2FTotallyNotDumb.pngR0i9611R1R43R5R196R7tgoR8y41:assets%2Fshared%2Fimages%2FeventArrow.pngR0i8264R1R43R5R197R7tgoR8y37:assets%2Fshared%2Fimages%2Ffunkay.pngR0i96575R1R43R5R198R7tgoR8y44:assets%2Fshared%2Fimages%2FgfDanceTitle.jsonR0i124R1R10R5R199R7tgoR8y33:assets%2Fshared%2Fimages%2Fgo.pngR0i63046R1R43R5R200R7tgoR8y35:assets%2Fshared%2Fimages%2Fgood.pngR0i26741R1R43R5R201R7tgoR8y35:assets%2Fshared%2Fimages%2FhBar.pngR0i11442R1R43R5R202R7tgoR8y40:assets%2Fshared%2Fimages%2FhealthBar.pngR0i551R1R43R5R203R7tgoR8y40:assets%2Fshared%2Fimages%2Fhealthdot.pngR0i2467R1R43R5R204R7tgoR8y61:assets%2Fshared%2Fimages%2Ficons%2Fawesome-fucking-markus.pngR0i6582R1R43R5R205R7tgoR8y45:assets%2Fshared%2Fimages%2Ficons%2Fbf-old.pngR0i10201R1R43R5R206R7tgoR8y46:assets%2Fshared%2Fimages%2Ficons%2Fbf-rook.pngR0i10364R1R43R5R207R7tgoR8y46:assets%2Fshared%2Fimages%2Ficons%2Ficon-bf.pngR0i8671R1R43R5R208R7tgoR8y48:assets%2Fshared%2Fimages%2Ficons%2Ficon-face.pngR0i3549R1R43R5R209R7tgoR8y46:assets%2Fshared%2Fimages%2Ficons%2Ficon-gf.pngR0i6093R1R43R5R210R7tgoR8y51:assets%2Fshared%2Fimages%2Ficons%2Fmarko-martha.pngR0i9866R1R43R5R211R7tgoR8y52:assets%2Fshared%2Fimages%2Ficons%2Fmarkus-coocoo.pngR0i9867R1R43R5R212R7tgoR8y51:assets%2Fshared%2Fimages%2Ficons%2Fmarkus-crazy.pngR0i10359R1R43R5R213R7tgoR8y49:assets%2Fshared%2Fimages%2Ficons%2Fmarkus-mad.pngR0i7986R1R43R5R214R7tgoR8y45:assets%2Fshared%2Fimages%2Ficons%2Fmarkus.pngR0i9955R1R43R5R215R7tgoR8y35:assets%2Fshared%2Fimages%2Flogo.pngR0i86924R1R43R5R216R7tgoR8y59:assets%2Fshared%2Fimages%2Fmenubackgrounds%2Fmenu_stage.pngR0i152888R1R43R5R217R7tgoR8y37:assets%2Fshared%2Fimages%2FmenuBG.pngR0i255319R1R43R5R218R7tgoR8y41:assets%2Fshared%2Fimages%2FmenuBGBlue.pngR0i258474R1R43R5R219R7tgoR8y44:assets%2Fshared%2Fimages%2FmenuBGMagenta.pngR0i258541R1R43R5R220R7tgoR8y40:assets%2Fshared%2Fimages%2FmenuDesat.pngR0i215613R1R43R5R221R7tgoR8y54:assets%2Fshared%2Fimages%2Fmenudifficulties%2Feasy.pngR0i1756R1R43R5R222R7tgoR8y54:assets%2Fshared%2Fimages%2Fmenudifficulties%2Fhard.pngR0i1944R1R43R5R223R7tgoR8y56:assets%2Fshared%2Fimages%2Fmenudifficulties%2Fnormal.pngR0i2553R1R43R5R224R7tgoR8y58:assets%2Fshared%2Fimages%2Fmenus%2Ffreeplay%2Fgradient.pngR0i189457R1R43R5R225R7tgoR8y53:assets%2Fshared%2Fimages%2Fmenus%2Fmainmenu%2FBar.pngR0i12592R1R43R5R226R7tgoR8y57:assets%2Fshared%2Fimages%2Fmenus%2Fmainmenu%2Fcredits.pngR0i3316R1R43R5R227R7tgoR8y58:assets%2Fshared%2Fimages%2Fmenus%2Fmainmenu%2Ffreeplay.pngR0i5659R1R43R5R228R7tgoR8y54:assets%2Fshared%2Fimages%2Fmenus%2Fmainmenu%2FLogo.pngR0i30402R1R43R5R229R7tgoR8y57:assets%2Fshared%2Fimages%2Fmenus%2Fmainmenu%2Foptions.pngR0i6271R1R43R5R230R7tgoR8y56:assets%2Fshared%2Fimages%2Fmenus%2Fmainmenu%2FRender.pngR0i3474290R1R43R5R231R7tgoR8y60:assets%2Fshared%2Fimages%2Fmenus%2Fmainmenu%2Fstory_mode.pngR0i8286R1R43R5R232R7tgoR8y57:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2FcreditsBar.pngR0i2407R1R43R5R233R7tgoR8y54:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2FmenuBar.pngR0i19558R1R43R5R234R7tgoR8y63:assets%2Fshared%2Fimages%2Fmenus%2Ftitlescreen%2FbigBubbles.pngR0i54912R1R43R5R235R7tgoR8y60:assets%2Fshared%2Fimages%2Fmenus%2Ftitlescreen%2Fborders.pngR0i34031R1R43R5R236R7tgoR8y65:assets%2Fshared%2Fimages%2Fmenus%2Ftitlescreen%2FBottomBorder.pngR0i15356R1R43R5R237R7tgoR8y57:assets%2Fshared%2Fimages%2Fmenus%2Ftitlescreen%2Flogo.pngR0i3527440R1R43R5R238R7tgoR8y57:assets%2Fshared%2Fimages%2Fmenus%2Ftitlescreen%2Flogo.xmlR0i2224R1R10R5R239R7tgoR8y58:assets%2Fshared%2Fimages%2Fmenus%2Ftitlescreen%2Flogoo.pngR0i169954R1R43R5R240R7tgoR8y62:assets%2Fshared%2Fimages%2Fmenus%2Ftitlescreen%2Fmickheads.pngR0i26086R1R43R5R241R7tgoR8y65:assets%2Fshared%2Fimages%2Fmenus%2Ftitlescreen%2FsmallBubbles.pngR0i19595R1R43R5R242R7tgoR8y58:assets%2Fshared%2Fimages%2Fmenus%2Ftitlescreen%2Fstart.pngR0i7186R1R43R5R243R7tgoR8y62:assets%2Fshared%2Fimages%2Fmenus%2Ftitlescreen%2FTopBorder.pngR0i13959R1R43R5R244R7tgoR8y42:assets%2Fshared%2Fimages%2FMenu_Tracks.pngR0i1254R1R43R5R245R7tgoR8y46:assets%2Fshared%2Fimages%2Fnewgrounds_logo.pngR0i40016R1R43R5R246R7tgoR8y47:assets%2Fshared%2Fimages%2FnoteSkins%2Flist.txtR0zR1R10R5R247R7tgoR8y54:assets%2Fshared%2Fimages%2FnoteSkins%2FNOTE_assets.pngR0i1116249R1R43R5R248R7tgoR8y54:assets%2Fshared%2Fimages%2FnoteSkins%2FNOTE_assets.xmlR0i5152R1R10R5R249R7tgoR8y50:assets%2Fshared%2Fimages%2FnoteSplashes%2Flist.txtR0zR1R10R5R250R7tgoR8y58:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes.pngR0i33060R1R43R5R251R7tgoR8y58:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes.txtR0i81R1R10R5R252R7tgoR8y58:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes.xmlR0i4383R1R10R5R253R7tgoR8y35:assets%2Fshared%2Fimages%2Fnum0.pngR0i4672R1R43R5R254R7tgoR8y35:assets%2Fshared%2Fimages%2Fnum1.pngR0i1914R1R43R5R255R7tgoR8y35:assets%2Fshared%2Fimages%2Fnum2.pngR0i4513R1R43R5R256R7tgoR8y35:assets%2Fshared%2Fimages%2Fnum3.pngR0i4666R1R43R5R257R7tgoR8y35:assets%2Fshared%2Fimages%2Fnum4.pngR0i4389R1R43R5R258R7tgoR8y35:assets%2Fshared%2Fimages%2Fnum5.pngR0i4659R1R43R5R259R7tgoR8y35:assets%2Fshared%2Fimages%2Fnum6.pngR0i4654R1R43R5R260R7tgoR8y35:assets%2Fshared%2Fimages%2Fnum7.pngR0i3671R1R43R5R261R7tgoR8y35:assets%2Fshared%2Fimages%2Fnum8.pngR0i4852R1R43R5R262R7tgoR8y35:assets%2Fshared%2Fimages%2Fnum9.pngR0i4319R1R43R5R263R7tgoR8y50:assets%2Fshared%2Fimages%2FpixelUI%2Fbad-pixel.pngR0i228R1R43R5R264R7tgoR8y52:assets%2Fshared%2Fimages%2FpixelUI%2Fcombo-pixel.pngR0i247R1R43R5R265R7tgoR8y51:assets%2Fshared%2Fimages%2FpixelUI%2Fdate-pixel.pngR0i518R1R43R5R266R7tgoR8y51:assets%2Fshared%2Fimages%2FpixelUI%2Fgood-pixel.pngR0i237R1R43R5R267R7tgoR8y69:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assets-chip.pngR0i570R1R43R5R268R7tgoR8y71:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assets-future.pngR0i1045R1R43R5R269R7tgoR8y64:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assets.pngR0i1290R1R43R5R270R7tgoR8y73:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assetsENDS-chip.pngR0i221R1R43R5R271R7tgoR8y75:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assetsENDS-future.pngR0i244R1R43R5R272R7tgoR8y68:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assetsENDS.pngR0i170R1R43R5R273R7tgoR8y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum0-pixel.pngR0i132R1R43R5R274R7tgoR8y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum1-pixel.pngR0i123R1R43R5R275R7tgoR8y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum2-pixel.pngR0i139R1R43R5R276R7tgoR8y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum3-pixel.pngR0i137R1R43R5R277R7tgoR8y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum4-pixel.pngR0i132R1R43R5R278R7tgoR8y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum5-pixel.pngR0i135R1R43R5R279R7tgoR8y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum6-pixel.pngR0i138R1R43R5R280R7tgoR8y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum7-pixel.pngR0i141R1R43R5R281R7tgoR8y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum8-pixel.pngR0i129R1R43R5R282R7tgoR8y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum9-pixel.pngR0i127R1R43R5R283R7tgoR8y52:assets%2Fshared%2Fimages%2FpixelUI%2Fready-pixel.pngR0i531R1R43R5R284R7tgoR8y50:assets%2Fshared%2Fimages%2FpixelUI%2Fset-pixel.pngR0i485R1R43R5R285R7tgoR8y51:assets%2Fshared%2Fimages%2FpixelUI%2Fshit-pixel.pngR0i292R1R43R5R286R7tgoR8y51:assets%2Fshared%2Fimages%2FpixelUI%2Fsick-pixel.pngR0i307R1R43R5R287R7tgoR8y36:assets%2Fshared%2Fimages%2Fready.pngR0i111566R1R43R5R288R7tgoR8y34:assets%2Fshared%2Fimages%2Fset.pngR0i100557R1R43R5R289R7tgoR8y35:assets%2Fshared%2Fimages%2Fshit.pngR0i16997R1R43R5R290R7tgoR8y35:assets%2Fshared%2Fimages%2Fsick.pngR0i31383R1R43R5R291R7tgoR8y36:assets%2Fshared%2Fimages%2Fsmoke.pngR0i3731R1R43R5R292R7tgoR8y38:assets%2Fshared%2Fimages%2Fsnokido.pngR0i6645R1R43R5R293R7tgoR8y44:assets%2Fshared%2Fimages%2Fspeech_bubble.pngR0i189234R1R43R5R294R7tgoR8y44:assets%2Fshared%2Fimages%2Fspeech_bubble.xmlR0i9686R1R10R5R295R7tgoR8y40:assets%2Fshared%2Fimages%2Fspotlight.pngR0i12487R1R43R5R296R7tgoR8y40:assets%2Fshared%2Fimages%2Fstageback.pngR0i14010R1R43R5R297R7tgoR8y44:assets%2Fshared%2Fimages%2Fstagecurtains.pngR0i123947R1R43R5R298R7tgoR8y41:assets%2Fshared%2Fimages%2Fstagefront.pngR0i62513R1R43R5R299R7tgoR8y59:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fbackground.pngR0i56214R1R43R5R300R7tgoR8y54:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2FCloud.pngR0i41720R1R43R5R301R7tgoR8y58:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fclubhouse.pngR0i884529R1R43R5R302R7tgoR8y62:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2FDonald_assets.pngR0i130943R1R43R5R303R7tgoR8y62:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2FDonald_assets.xmlR0i1050R1R10R5R304R7tgoR8y60:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fforegrounds.pngR0i326644R1R43R5R305R7tgoR8y61:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2FGoofy_assets.pngR0i326620R1R43R5R306R7tgoR8y61:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2FGoofy_assets.xmlR0i2393R1R10R5R307R7tgoR8y62:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2FMinnie_assets.pngR0i618529R1R43R5R308R7tgoR8y62:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2FMinnie_assets.xmlR0i4607R1R10R5R309R7tgoR8y58:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fmountains.pngR0i647877R1R43R5R310R7tgoR8y67:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fnight%2Fbackground.pngR0i41798R1R43R5R311R7tgoR8y63:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fnight%2Fclouds.pngR0i25713R1R43R5R312R7tgoR8y66:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fnight%2Fclubhouse.pngR0i478180R1R43R5R313R7tgoR8y63:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fnight%2Ffogidk.pngR0i156765R1R43R5R314R7tgoR8y63:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fnight%2Flights.pngR0i60065R1R43R5R315R7tgoR8y61:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fnight%2Fmoon.pngR0i6074R1R43R5R316R7tgoR8y66:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fnight%2Fmountains.pngR0i112129R1R43R5R317R7tgoR8y60:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fnight%2Fsky.pngR0i588944R1R43R5R318R7tgoR8y62:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fnight%2Fstars.pngR0i78255R1R43R5R319R7tgoR8y53:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fsign.pngR0i41792R1R43R5R320R7tgoR8y52:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fsky.pngR0i64355R1R43R5R321R7tgoR8y64:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fsunset%2Fclouds.pngR0i32715R1R43R5R322R7tgoR8y64:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fsunset%2Flights.pngR0i37859R1R43R5R323R7tgoR8y61:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fsunset%2Fsky.pngR0i515855R1R43R5R324R7tgoR8y63:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2FtoodlesWorried.pngR0i566304R1R43R5R325R7tgoR8y63:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2FtoodlesWorried.xmlR0i2133R1R10R5R326R7tgoR8y54:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Ftrees.pngR0i141384R1R43R5R327R7tgoR8y58:assets%2Fshared%2Fimages%2Fstages%2Fdisk-1%2Fwaterfall.pngR0i85049R1R43R5R328R7tgoR8y61:assets%2Fshared%2Fimages%2Fstages%2Folden%2FClubhouse-old.pngR0i310020R1R43R5R329R7tgoR8y54:assets%2Fshared%2Fimages%2Fstages%2Folden%2Fdonald.pngR0i85828R1R43R5R330R7tgoR8y54:assets%2Fshared%2Fimages%2Fstages%2Folden%2Fdonald.xmlR0i633R1R10R5R331R7tgoR8y42:assets%2Fshared%2Fimages%2Fstage_light.pngR0i7324R1R43R5R332R7tgoR8y49:assets%2Fshared%2Fimages%2Fstorymenu%2Frookie.pngR0i3434R1R43R5R333R7tgoR8y38:assets%2Fshared%2Fimages%2FtimeBar.pngR0i367R1R43R5R334R7tgoR8y41:assets%2Fshared%2Fimages%2FtitleEnter.pngR0i26291R1R43R5R335R7tgoR8y41:assets%2Fshared%2Fimages%2FtitleEnter.xmlR0i518R1R10R5R336R7tgoR8y41:assets%2Fshared%2Fimages%2FunknownMod.pngR0i2387R1R43R5R337R7tgoR0i2486365R1y5:MUSICR5y39:assets%2Fshared%2Fmusic%2Fbreakfast.mp3y9:pathGroupaR339hR7tgoR0i2085659R1R338R5y40:assets%2Fshared%2Fmusic%2FfreakyMenu.mp3R340aR341hR7tgoR0i1121411R1R338R5y38:assets%2Fshared%2Fmusic%2FgameOver.mp3R340aR342hR7tgoR0i180368R1R338R5y41:assets%2Fshared%2Fmusic%2FgameOverEnd.mp3R340aR343hR7tgoR0i1612623R1R338R5y40:assets%2Fshared%2Fmusic%2FoffsetSong.mp3R340aR344hR7tgoR0i2486365R1R338R5y38:assets%2Fshared%2Fmusic%2Ftie-time.mp3R340aR345hR7tgoR0i12345R1R338R5y41:assets%2Fshared%2Fsounds%2FcancelMenu.mp3R340aR346hR7tgoR0i8246R1R338R5y40:assets%2Fshared%2Fsounds%2FclickText.mp3R340aR347hR7tgoR0i51579R1R338R5y42:assets%2Fshared%2Fsounds%2FconfirmMenu.mp3R340aR348hR7tgoR0i5140R1R338R5y39:assets%2Fshared%2Fsounds%2Fdialogue.mp3R340aR349hR7tgoR0i9014R1R338R5y44:assets%2Fshared%2Fsounds%2FdialogueClose.mp3R340aR350hR7tgoR0i103781R1R338R5y43:assets%2Fshared%2Fsounds%2Ffnf_loss_sfx.mp3R340aR351hR7tgoR0i14964R1R338R5y35:assets%2Fshared%2Fsounds%2FGF_1.mp3R340aR352hR7tgoR0i16086R1R338R5y35:assets%2Fshared%2Fsounds%2FGF_2.mp3R340aR353hR7tgoR0i16244R1R338R5y35:assets%2Fshared%2Fsounds%2FGF_3.mp3R340aR354hR7tgoR0i15486R1R338R5y35:assets%2Fshared%2Fsounds%2FGF_4.mp3R340aR355hR7tgoR0i6499R1R338R5y39:assets%2Fshared%2Fsounds%2Fhitsound.mp3R340aR356hR7tgoR0i11747R1R338R5y43:assets%2Fshared%2Fsounds%2Fintro1-pixel.mp3R340aR357hR7tgoR0i10878R1R338R5y37:assets%2Fshared%2Fsounds%2Fintro1.mp3R340aR358hR7tgoR0i12194R1R338R5y43:assets%2Fshared%2Fsounds%2Fintro2-pixel.mp3R340aR359hR7tgoR0i8739R1R338R5y37:assets%2Fshared%2Fsounds%2Fintro2.mp3R340aR360hR7tgoR0i10889R1R338R5y43:assets%2Fshared%2Fsounds%2Fintro3-pixel.mp3R340aR361hR7tgoR0i9677R1R338R5y37:assets%2Fshared%2Fsounds%2Fintro3.mp3R340aR362hR7tgoR0i24983R1R338R5y44:assets%2Fshared%2Fsounds%2FintroGo-pixel.mp3R340aR363hR7tgoR0i10774R1R338R5y38:assets%2Fshared%2Fsounds%2FintroGo.mp3R340aR364hR7tgoR0i2958R1R338R5y45:assets%2Fshared%2Fsounds%2FMetronome_Tick.mp3R340aR365hR7tgoR0i9424R1R338R5y40:assets%2Fshared%2Fsounds%2Fmissnote1.mp3R340aR366hR7tgoR0i29920R1R338R5y40:assets%2Fshared%2Fsounds%2Fmissnote2.mp3R340aR367hR7tgoR0i30805R1R338R5y40:assets%2Fshared%2Fsounds%2Fmissnote3.mp3R340aR368hR7tgoR0i20298R1R338R5y41:assets%2Fshared%2Fsounds%2FscrollMenu.mp3R340aR369hR7tgoR0i249779R1R338R5y40:assets%2Fshared%2Fsounds%2FsoundTest.mp3R340aR370hR7tgoR8y47:assets%2Fshared%2Fstages%2Fclubhouse-night.jsonR0i269R1R10R5R371R7tgoR8y48:assets%2Fshared%2Fstages%2Fclubhouse-sunset.jsonR0i269R1R10R5R372R7tgoR8y41:assets%2Fshared%2Fstages%2Fclubhouse.jsonR0i270R1R10R5R373R7tgoR8y37:assets%2Fshared%2Fstages%2Fstage.jsonR0i271R1R10R5R374R7tgoR8y37:assets%2Fshared%2Fweeks%2Frookie.jsonR0i437R1R10R5R375R7tgoR8y38:assets%2Fshared%2Fweeks%2FweekList.txtR0i8R1R10R5R376R7tgoR0i8220R1R338R5y26:flixel%2Fsounds%2Fbeep.mp3R340aR377y26:flixel%2Fsounds%2Fbeep.ogghR7tgoR0i39706R1R338R5y28:flixel%2Fsounds%2Fflixel.mp3R340aR379y28:flixel%2Fsounds%2Fflixel.ogghR7tgoR0i6840R1y5:SOUNDR5R378R340aR377R378hgoR0i33629R1R381R5R380R340aR379R380hgoR0i15744R1R2R3y35:__ASSET__flixel_fonts_nokiafc22_ttfR5y30:flixel%2Ffonts%2Fnokiafc22.ttfR7tgoR0i29724R1R2R3y36:__ASSET__flixel_fonts_monsterrat_ttfR5y31:flixel%2Ffonts%2Fmonsterrat.ttfR7tgoR8y33:flixel%2Fimages%2Fui%2Fbutton.pngR0i277R1R43R5R386R7tgoR8y36:flixel%2Fimages%2Flogo%2Fdefault.pngR0i505R1R43R5R387R7tgoR8y34:flixel%2Fflixel-ui%2Fimg%2Fbox.pngR0i912R1R43R5R388R7tgoR8y37:flixel%2Fflixel-ui%2Fimg%2Fbutton.pngR0i433R1R43R5R389R7tgoR8y48:flixel%2Fflixel-ui%2Fimg%2Fbutton_arrow_down.pngR0i446R1R43R5R390R7tgoR8y48:flixel%2Fflixel-ui%2Fimg%2Fbutton_arrow_left.pngR0i459R1R43R5R391R7tgoR8y49:flixel%2Fflixel-ui%2Fimg%2Fbutton_arrow_right.pngR0i511R1R43R5R392R7tgoR8y46:flixel%2Fflixel-ui%2Fimg%2Fbutton_arrow_up.pngR0i493R1R43R5R393R7tgoR8y42:flixel%2Fflixel-ui%2Fimg%2Fbutton_thin.pngR0i247R1R43R5R394R7tgoR8y44:flixel%2Fflixel-ui%2Fimg%2Fbutton_toggle.pngR0i534R1R43R5R395R7tgoR8y40:flixel%2Fflixel-ui%2Fimg%2Fcheck_box.pngR0i922R1R43R5R396R7tgoR8y41:flixel%2Fflixel-ui%2Fimg%2Fcheck_mark.pngR0i946R1R43R5R397R7tgoR8y37:flixel%2Fflixel-ui%2Fimg%2Fchrome.pngR0i253R1R43R5R398R7tgoR8y42:flixel%2Fflixel-ui%2Fimg%2Fchrome_flat.pngR0i212R1R43R5R399R7tgoR8y43:flixel%2Fflixel-ui%2Fimg%2Fchrome_inset.pngR0i192R1R43R5R400R7tgoR8y43:flixel%2Fflixel-ui%2Fimg%2Fchrome_light.pngR0i214R1R43R5R401R7tgoR8y44:flixel%2Fflixel-ui%2Fimg%2Fdropdown_mark.pngR0i156R1R43R5R402R7tgoR8y41:flixel%2Fflixel-ui%2Fimg%2Ffinger_big.pngR0i1724R1R43R5R403R7tgoR8y43:flixel%2Fflixel-ui%2Fimg%2Ffinger_small.pngR0i294R1R43R5R404R7tgoR8y38:flixel%2Fflixel-ui%2Fimg%2Fhilight.pngR0i129R1R43R5R405R7tgoR8y36:flixel%2Fflixel-ui%2Fimg%2Finvis.pngR0i128R1R43R5R406R7tgoR8y41:flixel%2Fflixel-ui%2Fimg%2Fminus_mark.pngR0i136R1R43R5R407R7tgoR8y40:flixel%2Fflixel-ui%2Fimg%2Fplus_mark.pngR0i147R1R43R5R408R7tgoR8y36:flixel%2Fflixel-ui%2Fimg%2Fradio.pngR0i191R1R43R5R409R7tgoR8y40:flixel%2Fflixel-ui%2Fimg%2Fradio_dot.pngR0i153R1R43R5R410R7tgoR8y37:flixel%2Fflixel-ui%2Fimg%2Fswatch.pngR0i185R1R43R5R411R7tgoR8y34:flixel%2Fflixel-ui%2Fimg%2Ftab.pngR0i201R1R43R5R412R7tgoR8y39:flixel%2Fflixel-ui%2Fimg%2Ftab_back.pngR0i210R1R43R5R413R7tgoR8y44:flixel%2Fflixel-ui%2Fimg%2Ftooltip_arrow.pngR0i18509R1R43R5R414R7tgoR8y39:flixel%2Fflixel-ui%2Fxml%2Fdefaults.xmlR0i1263R1R10R5R415R7tgoR8y53:flixel%2Fflixel-ui%2Fxml%2Fdefault_loading_screen.xmlR0i1953R1R10R5R416R7tgoR8y44:flixel%2Fflixel-ui%2Fxml%2Fdefault_popup.xmlR0i1848R1R10R5R417R7tgoR8y42:flixel%2Fimages%2Ftransitions%2Fcircle.pngR0i824R1R43R5R418R7tgoR8y53:flixel%2Fimages%2Ftransitions%2Fdiagonal_gradient.pngR0i3812R1R43R5R419R7tgoR8y43:flixel%2Fimages%2Ftransitions%2Fdiamond.pngR0i788R1R43R5R420R7tgoR8y42:flixel%2Fimages%2Ftransitions%2Fsquare.pngR0i383R1R43R5R421R7tgoR8y31:flxanimate%2Fimages%2Fpivot.pngR0i300R1R43R5R422R7tgoR8y35:flxanimate%2Fimages%2Findicator.pngR0i129R1R43R5R423R7tgh\",\"rootPath\":null,\"version\":2,\"libraryArgs\":[],\"libraryType\":null}", Da.rootPath);
        a = jc.fromManifest(a);
        oa.registerLibrary("default", a);
        a = oa.getLibrary("default");
        if (a != null) {
          Da.preloadLibraries.push(a);
        } else {
          Da.preloadLibraryNames.push("default");
        }
      };
      function Y(a) {
        if (a != null) {
          this.name = a;
        }
        if (!this.__init) {
          if (this.ascender == undefined) {
            this.ascender = 0;
          }
          if (this.descender == undefined) {
            this.descender = 0;
          }
          if (this.height == undefined) {
            this.height = 0;
          }
          if (this.numGlyphs == undefined) {
            this.numGlyphs = 0;
          }
          if (this.underlinePosition == undefined) {
            this.underlinePosition = 0;
          }
          if (this.underlineThickness == undefined) {
            this.underlineThickness = 0;
          }
          if (this.unitsPerEM == undefined) {
            this.unitsPerEM = 0;
          }
          if (this.__fontID != null) {
            if (oa.isLocal(this.__fontID)) {
              this.__fromBytes(oa.getBytes(this.__fontID));
            }
          } else if (this.__fontPath != null) {
            this.__fromFile(this.__fontPath);
          }
        }
      }
      h["lime.text.Font"] = Y;
      Y.__name__ = "lime.text.Font";
      Y.fromFile = function (a) {
        if (a == null) {
          return null;
        }
        var b = new Y();
        b.__fromFile(a);
        return b;
      };
      Y.loadFromName = function (a) {
        return new Y().__loadFromName(a);
      };
      Y.__measureFontNode = function (a) {
        var b = window.document.createElement("span");
        b.setAttribute("aria-hidden", "true");
        var c = window.document.createTextNode("BESbswy");
        b.appendChild(c);
        c = b.style;
        c.display = "block";
        c.position = "absolute";
        c.top = "-9999px";
        c.left = "-9999px";
        c.fontSize = "300px";
        c.width = "auto";
        c.height = "auto";
        c.lineHeight = "normal";
        c.margin = "0";
        c.padding = "0";
        c.fontVariant = "normal";
        c.whiteSpace = "nowrap";
        c.fontFamily = a;
        window.document.body.appendChild(b);
        return b;
      };
      Y.prototype = {
        __copyFrom: function (a) {
          if (a != null) {
            this.ascender = a.ascender;
            this.descender = a.descender;
            this.height = a.height;
            this.name = a.name;
            this.numGlyphs = a.numGlyphs;
            this.src = a.src;
            this.underlinePosition = a.underlinePosition;
            this.underlineThickness = a.underlineThickness;
            this.unitsPerEM = a.unitsPerEM;
            this.__fontID = a.__fontID;
            this.__fontPath = a.__fontPath;
            this.__init = true;
          }
        },
        __fromBytes: function (a) {
          this.__fontPath = null;
        },
        __fromFile: function (a) {
          this.__fontPath = a;
        },
        __loadFromName: function (a) {
          var b = this;
          var c = new Md();
          this.name = a;
          var d = I.navigator.userAgent.toLowerCase();
          var e = d.indexOf(" safari/") >= 0 && d.indexOf(" chrome/") < 0;
          d = new sa("(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)", "i").match(d);
          if (!e && !d && window.document.fonts && (u = window.document.fonts, l(u, u.load))) {
            window.document.fonts.load("1em '" + a + "'").then(function (a) {
              c.complete(b);
            }, function (d) {
              Ua.warn("Could not load web font \"" + a + "\"", {
                fileName: "lime/text/Font.hx",
                lineNumber: 516,
                className: "lime.text.Font",
                methodName: "__loadFromName"
              });
              c.complete(b);
            });
          } else {
            var f = Y.__measureFontNode("'" + a + "', sans-serif");
            var k = Y.__measureFontNode("'" + a + "', serif");
            var r = f.offsetWidth;
            var n = k.offsetWidth;
            var g = -1;
            var za = 0;
            var m;
            var aa;
            g = window.setInterval(function () {
              za += 1;
              m = f.offsetWidth != r || k.offsetWidth != n;
              aa = za * 50 >= 3000;
              if (m || aa) {
                window.clearInterval(g);
                f.parentNode.removeChild(f);
                k.parentNode.removeChild(k);
                k = f = null;
                if (aa) {
                  Ua.warn("Could not load web font \"" + a + "\"", {
                    fileName: "lime/text/Font.hx",
                    lineNumber: 551,
                    className: "lime.text.Font",
                    methodName: "__loadFromName"
                  });
                }
                c.complete(b);
              }
            }, 50);
          }
          return c.future;
        },
        __class__: Y
      };
      var ja = v.__ASSET__assets_fonts_dokdo_ttf = function () {
        this.ascender = 696;
        this.descender = -304;
        this.height = 1250;
        this.numGlyphs = 2600;
        this.underlinePosition = -212;
        this.underlineThickness = 25;
        this.unitsPerEM = 1000;
        this.name = "Dokdo Regular";
        Y.call(this);
      };
      h.__ASSET__assets_fonts_dokdo_ttf = ja;
      ja.__name__ = "__ASSET__assets_fonts_dokdo_ttf";
      ja.__super__ = Y;
      ja.prototype = q(Y.prototype, {
        __class__: ja
      });
      var Bd = v.__ASSET__assets_fonts_pixel_otf = function () {
        this.ascender = 1125;
        this.descender = -250;
        this.height = 1375;
        this.numGlyphs = 262;
        this.underlinePosition = -143;
        this.underlineThickness = 20;
        this.unitsPerEM = 1000;
        this.name = "Pixel Arial 11 Bold";
        Y.call(this);
      };
      h.__ASSET__assets_fonts_pixel_otf = Bd;
      Bd.__name__ = "__ASSET__assets_fonts_pixel_otf";
      Bd.__super__ = Y;
      Bd.prototype = q(Y.prototype, {
        __class__: Bd
      });
      var Ob = v.__ASSET__assets_fonts_vcr_ttf = function () {
        this.ascender = 1800;
        this.descender = 0;
        this.height = 2000;
        this.numGlyphs = 204;
        this.underlinePosition = -292;
        this.underlineThickness = 150;
        this.unitsPerEM = 2048;
        this.name = "VCR OSD Mono";
        Y.call(this);
      };
      h.__ASSET__assets_fonts_vcr_ttf = Ob;
      Ob.__name__ = "__ASSET__assets_fonts_vcr_ttf";
      Ob.__super__ = Y;
      Ob.prototype = q(Y.prototype, {
        __class__: Ob
      });
      var Ec = v.__ASSET__flixel_fonts_nokiafc22_ttf = function () {
        this.ascender = 2048;
        this.descender = -512;
        this.height = 2816;
        this.numGlyphs = 172;
        this.underlinePosition = -640;
        this.underlineThickness = 256;
        this.unitsPerEM = 2048;
        this.name = "Nokia Cellphone FC Small";
        Y.call(this);
      };
      h.__ASSET__flixel_fonts_nokiafc22_ttf = Ec;
      Ec.__name__ = "__ASSET__flixel_fonts_nokiafc22_ttf";
      Ec.__super__ = Y;
      Ec.prototype = q(Y.prototype, {
        __class__: Ec
      });
      var Pb = v.__ASSET__flixel_fonts_monsterrat_ttf = function () {
        this.ascender = 968;
        this.descender = -251;
        this.height = 1219;
        this.numGlyphs = 263;
        this.underlinePosition = -150;
        this.underlineThickness = 50;
        this.unitsPerEM = 1000;
        this.name = "Monsterrat";
        Y.call(this);
      };
      h.__ASSET__flixel_fonts_monsterrat_ttf = Pb;
      Pb.__name__ = "__ASSET__flixel_fonts_monsterrat_ttf";
      Pb.__super__ = Y;
      Pb.prototype = q(Y.prototype, {
        __class__: Pb
      });
      function t(a) {
        Y.call(this, a);
      }
      h["openfl.text.Font"] = t;
      t.__name__ = "openfl.text.Font";
      t.fromFile = function (a) {
        if (a == null) {
          return null;
        }
        var b = new t();
        b.__fromFile(a);
        return b;
      };
      t.loadFromName = function (a) {
        return Y.loadFromName(a).then(function (a) {
          var b = new t();
          b.__fromLimeFont(a);
          return Cb.withValue(b);
        });
      };
      t.registerFont = function (a) {
        a = ta.getClass(a) == null ? ta.__cast(Db.createInstance(a, []), t) : ta.__cast(a, t);
        if (a != null) {
          t.__registeredFonts.push(a);
          t.__fontByName.h[a.name] = a;
        }
      };
      t.__super__ = Y;
      t.prototype = q(Y.prototype, {
        __fromLimeFont: function (a) {
          this.__copyFrom(a);
        },
        __class__: t
      });
      var Ad = v.__ASSET__OPENFL__assets_fonts_dokdo_ttf = function () {
        this.__fromLimeFont(new ja());
        Y.call(this, undefined);
      };
      h.__ASSET__OPENFL__assets_fonts_dokdo_ttf = Ad;
      Ad.__name__ = "__ASSET__OPENFL__assets_fonts_dokdo_ttf";
      Ad.__super__ = t;
      Ad.prototype = q(t.prototype, {
        __class__: Ad
      });
      var Ka = v.__ASSET__OPENFL__assets_fonts_pixel_otf = function () {
        this.__fromLimeFont(new Bd());
        Y.call(this, undefined);
      };
      h.__ASSET__OPENFL__assets_fonts_pixel_otf = Ka;
      Ka.__name__ = "__ASSET__OPENFL__assets_fonts_pixel_otf";
      Ka.__super__ = t;
      Ka.prototype = q(t.prototype, {
        __class__: Ka
      });
      var A = v.__ASSET__OPENFL__assets_fonts_vcr_ttf = function () {
        this.__fromLimeFont(new Ob());
        Y.call(this, undefined);
      };
      h.__ASSET__OPENFL__assets_fonts_vcr_ttf = A;
      A.__name__ = "__ASSET__OPENFL__assets_fonts_vcr_ttf";
      A.__super__ = t;
      A.prototype = q(t.prototype, {
        __class__: A
      });
      var tc = v.__ASSET__OPENFL__flixel_fonts_nokiafc22_ttf = function () {
        this.__fromLimeFont(new Ec());
        Y.call(this, undefined);
      };
      h.__ASSET__OPENFL__flixel_fonts_nokiafc22_ttf = tc;
      tc.__name__ = "__ASSET__OPENFL__flixel_fonts_nokiafc22_ttf";
      tc.__super__ = t;
      tc.prototype = q(t.prototype, {
        __class__: tc
      });
      var rd = v.__ASSET__OPENFL__flixel_fonts_monsterrat_ttf = function () {
        this.__fromLimeFont(new Pb());
        Y.call(this, undefined);
      };
      h.__ASSET__OPENFL__flixel_fonts_monsterrat_ttf = rd;
      rd.__name__ = "__ASSET__OPENFL__flixel_fonts_monsterrat_ttf";
      rd.__super__ = t;
      rd.prototype = q(t.prototype, {
        __class__: rd
      });
      Math.__name__ = "Math";
      function ma() {}
      h.Reflect = ma;
      ma.__name__ = "Reflect";
      ma.field = function (a, b) {
        try {
          return a[b];
        } catch (c) {
          Na.lastError = c;
          return null;
        }
      };
      ma.getProperty = function (a, b) {
        var c;
        if (a == null) {
          return null;
        }
        var d = a.__properties__ ? c = a.__properties__["get_" + b] : false;
        if (d) {
          return a[c]();
        } else {
          return a[b];
        }
      };
      ma.setProperty = function (a, b, c) {
        var d;
        var e = a.__properties__ ? d = a.__properties__["set_" + b] : false;
        if (e) {
          a[d](c);
        } else {
          a[b] = c;
        }
      };
      ma.fields = function (a) {
        var b = [];
        if (a != null) {
          var c = Object.prototype.hasOwnProperty;
          var d;
          for (d in a) {
            if (d != "__id__" && d != "hx__closures__" && c.call(a, d)) {
              b.push(d);
            }
          }
        }
        return b;
      };
      ma.isFunction = function (a) {
        if (typeof a == "function") {
          return !a.__name__ && !a.__ename__;
        } else {
          return false;
        }
      };
      ma.compare = function (a, b) {
        if (a == b) {
          return 0;
        } else if (a > b) {
          return 1;
        } else {
          return -1;
        }
      };
      ma.isObject = function (a) {
        if (a == null) {
          return false;
        }
        var b = typeof a;
        if (b == "string" || b == "object" && a.__enum__ == null) {
          return true;
        } else if (b == "function") {
          return (a.__name__ || a.__ename__) != null;
        } else {
          return false;
        }
      };
      ma.isEnumValue = function (a) {
        if (a != null) {
          return a.__enum__ != null;
        } else {
          return false;
        }
      };
      ma.deleteField = function (a, b) {
        if (!Object.prototype.hasOwnProperty.call(a, b)) {
          return false;
        }
        delete a[b];
        return true;
      };
      function H() {}
      h.Std = H;
      H.__name__ = "Std";
      H.string = function (a) {
        return ta.__string_rec(a, "");
      };
      H.parseInt = function (a) {
        a = parseInt(a);
        if (isNaN(a)) {
          return null;
        } else {
          return a;
        }
      };
      function Xo() {}
      h["_String.String_Impl_"] = Xo;
      Xo.__name__ = "_String.String_Impl_";
      Xo.fromCharCode = function (a) {
        return String.fromCodePoint(a);
      };
      function ye() {
        this.b = "";
      }
      h.StringBuf = ye;
      ye.__name__ = "StringBuf";
      ye.prototype = {
        __class__: ye
      };
      function w() {}
      h.StringTools = w;
      w.__name__ = "StringTools";
      w.htmlEscape = function (a, b) {
        var c = "";
        for (var d = 0, e = a; d < e.length;) {
          a = e;
          var f = d++;
          var k = a.charCodeAt(f);
          if (k >= 55296 && k <= 56319) {
            k = k - 55232 << 10 | a.charCodeAt(f + 1) & 1023;
          }
          a = k;
          if (a >= 65536) {
            ++d;
          }
          switch (a) {
            case 34:
              c = b ? c + "&quot;" : c + String.fromCodePoint(a);
              break;
            case 38:
              c += "&amp;";
              break;
            case 39:
              c = b ? c + "&#039;" : c + String.fromCodePoint(a);
              break;
            case 60:
              c += "&lt;";
              break;
            case 62:
              c += "&gt;";
              break;
            default:
              c += String.fromCodePoint(a);
          }
        }
        return c;
      };
      w.htmlUnescape = function (a) {
        return a.split("&gt;").join(">").split("&lt;").join("<").split("&quot;").join("\"").split("&#039;").join("'").split("&amp;").join("&");
      };
      w.startsWith = function (a, b) {
        if (a.length >= b.length) {
          return a.lastIndexOf(b, 0) == 0;
        } else {
          return false;
        }
      };
      w.endsWith = function (a, b) {
        var c = b.length;
        var d = a.length;
        if (d >= c) {
          return a.indexOf(b, d - c) == d - c;
        } else {
          return false;
        }
      };
      w.isSpace = function (a, b) {
        a = M.cca(a, b);
        if (a > 8 && a < 14) {
          return true;
        } else {
          return a == 32;
        }
      };
      w.ltrim = function (a) {
        for (var b = a.length, c = 0; c < b && w.isSpace(a, c);) {
          ++c;
        }
        if (c > 0) {
          return M.substr(a, c, b - c);
        } else {
          return a;
        }
      };
      w.rtrim = function (a) {
        for (var b = a.length, c = 0; c < b && w.isSpace(a, b - c - 1);) {
          ++c;
        }
        if (c > 0) {
          return M.substr(a, 0, b - c);
        } else {
          return a;
        }
      };
      w.trim = function (a) {
        return w.ltrim(w.rtrim(a));
      };
      w.replace = function (a, b, c) {
        return a.split(b).join(c);
      };
      w.hex = function (a, b) {
        var c = "";
        do {
          c = "0123456789ABCDEF".charAt(a & 15) + c;
          a >>>= 4;
        } while (a > 0);
        if (b != null) {
          while (c.length < b) {
            c = "0" + c;
          }
        }
        return c;
      };
      var Mc = x.ValueType = {
        __ename__: "ValueType",
        __constructs__: null,
        TNull: {
          _hx_name: "TNull",
          _hx_index: 0,
          __enum__: "ValueType",
          toString: p
        },
        TInt: {
          _hx_name: "TInt",
          _hx_index: 1,
          __enum__: "ValueType",
          toString: p
        },
        TFloat: {
          _hx_name: "TFloat",
          _hx_index: 2,
          __enum__: "ValueType",
          toString: p
        },
        TBool: {
          _hx_name: "TBool",
          _hx_index: 3,
          __enum__: "ValueType",
          toString: p
        },
        TObject: {
          _hx_name: "TObject",
          _hx_index: 4,
          __enum__: "ValueType",
          toString: p
        },
        TFunction: {
          _hx_name: "TFunction",
          _hx_index: 5,
          __enum__: "ValueType",
          toString: p
        },
        TClass: (u = function (a) {
          return {
            _hx_index: 6,
            c: a,
            __enum__: "ValueType",
            toString: p
          };
        }, u._hx_name = "TClass", u.__params__ = ["c"], u),
        TEnum: (u = function (a) {
          return {
            _hx_index: 7,
            e: a,
            __enum__: "ValueType",
            toString: p
          };
        }, u._hx_name = "TEnum", u.__params__ = ["e"], u),
        TUnknown: {
          _hx_name: "TUnknown",
          _hx_index: 8,
          __enum__: "ValueType",
          toString: p
        }
      };
      Mc.__constructs__ = [Mc.TNull, Mc.TInt, Mc.TFloat, Mc.TBool, Mc.TObject, Mc.TFunction, Mc.TClass, Mc.TEnum, Mc.TUnknown];
      function Db() {}
      h.Type = Db;
      Db.__name__ = "Type";
      Db.resolveEnum = function (a) {
        return x[a];
      };
      Db.createInstance = function (a, b) {
        return new (Function.prototype.bind.apply(a, [null].concat(b)))();
      };
      Db.createEnum = function (a, b, c) {
        var d = ma.field(a, b);
        if (d == null) {
          throw K.thrown("No such constructor " + b);
        }
        if (ma.isFunction(d)) {
          if (c == null) {
            throw K.thrown("Constructor " + b + " need parameters");
          }
          return d.apply(a, c);
        }
        if (c != null && c.length != 0) {
          throw K.thrown("Constructor " + b + " does not need parameters");
        }
        return d;
      };
      Db.typeof = function (a) {
        switch (typeof a) {
          case "boolean":
            return Mc.TBool;
          case "function":
            if (a.__name__ || a.__ename__) {
              return Mc.TObject;
            } else {
              return Mc.TFunction;
            }
          case "number":
            if (Math.ceil(a) == a % 2147483648) {
              return Mc.TInt;
            } else {
              return Mc.TFloat;
            }
          case "object":
            if (a == null) {
              return Mc.TNull;
            }
            var b = a.__enum__;
            if (b != null) {
              return Mc.TEnum(x[b]);
            }
            a = ta.getClass(a);
            if (a != null) {
              return Mc.TClass(a);
            } else {
              return Mc.TObject;
            }
          case "string":
            return Mc.TClass(String);
          case "undefined":
            return Mc.TNull;
          default:
            return Mc.TUnknown;
        }
      };
      Db.enumParameters = function (a) {
        var b = x[a.__enum__].__constructs__[a._hx_index].__params__;
        if (b != null) {
          var c = [];
          for (var d = 0; d < b.length;) {
            var e = b[d];
            ++d;
            c.push(a[e]);
          }
          return c;
        }
        return [];
      };
      var Dc = {
        gt: function (a, b) {
          var c = a < 0;
          if (c != b < 0) {
            return c;
          } else {
            return a > b;
          }
        },
        toFloat: function (a) {
          if (a < 0) {
            return 4294967296 + a;
          } else {
            return a + 0;
          }
        }
      };
      var hb = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "Element";
            case 1:
              return "PCData";
            case 2:
              return "CData";
            case 3:
              return "Comment";
            case 4:
              return "DocType";
            case 5:
              return "ProcessingInstruction";
            case 6:
              return "Document";
          }
        }
      };
      function X(a) {
        this.nodeType = a;
        this.children = [];
        this.attributeMap = new V();
      }
      h.Xml = X;
      X.__name__ = "Xml";
      X.parse = function (a) {
        return Dg.parse(a);
      };
      X.createElement = function (a) {
        var b = new X(X.Element);
        if (b.nodeType != X.Element) {
          throw K.thrown("Bad node type, expected Element but found " + (b.nodeType == null ? "null" : hb.toString(b.nodeType)));
        }
        b.nodeName = a;
        return b;
      };
      X.createPCData = function (a) {
        var b = new X(X.PCData);
        if (b.nodeType == X.Document || b.nodeType == X.Element) {
          throw K.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : hb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      X.createCData = function (a) {
        var b = new X(X.CData);
        if (b.nodeType == X.Document || b.nodeType == X.Element) {
          throw K.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : hb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      X.createComment = function (a) {
        var b = new X(X.Comment);
        if (b.nodeType == X.Document || b.nodeType == X.Element) {
          throw K.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : hb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      X.createDocType = function (a) {
        var b = new X(X.DocType);
        if (b.nodeType == X.Document || b.nodeType == X.Element) {
          throw K.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : hb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      X.createProcessingInstruction = function (a) {
        var b = new X(X.ProcessingInstruction);
        if (b.nodeType == X.Document || b.nodeType == X.Element) {
          throw K.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : hb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      X.createDocument = function () {
        return new X(X.Document);
      };
      X.prototype = {
        get: function (a) {
          if (this.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element but found " + (this.nodeType == null ? "null" : hb.toString(this.nodeType)));
          }
          return this.attributeMap.h[a];
        },
        set: function (a, b) {
          if (this.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element but found " + (this.nodeType == null ? "null" : hb.toString(this.nodeType)));
          }
          this.attributeMap.h[a] = b;
        },
        exists: function (a) {
          if (this.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element but found " + (this.nodeType == null ? "null" : hb.toString(this.nodeType)));
          }
          return Object.prototype.hasOwnProperty.call(this.attributeMap.h, a);
        },
        attributes: function () {
          if (this.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element but found " + (this.nodeType == null ? "null" : hb.toString(this.nodeType)));
          }
          return new jk(this.attributeMap.h);
        },
        elements: function () {
          if (this.nodeType != X.Document && this.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : hb.toString(this.nodeType)));
          }
          var a = [];
          for (var b = 0, c = this.children; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.nodeType == X.Element) {
              a.push(d);
            }
          }
          return new Uf(a);
        },
        elementsNamed: function (a) {
          if (this.nodeType != X.Document && this.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : hb.toString(this.nodeType)));
          }
          var b = [];
          for (var c = 0, d = this.children; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.nodeType == X.Element) {
              if (e.nodeType != X.Element) {
                throw K.thrown("Bad node type, expected Element but found " + (e.nodeType == null ? "null" : hb.toString(e.nodeType)));
              }
              var f = e.nodeName == a;
            } else {
              f = false;
            }
            if (f) {
              b.push(e);
            }
          }
          return new Uf(b);
        },
        firstElement: function () {
          if (this.nodeType != X.Document && this.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : hb.toString(this.nodeType)));
          }
          for (var a = 0, b = this.children; a < b.length;) {
            var c = b[a];
            ++a;
            if (c.nodeType == X.Element) {
              return c;
            }
          }
          return null;
        },
        addChild: function (a) {
          if (this.nodeType != X.Document && this.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : hb.toString(this.nodeType)));
          }
          if (a.parent != null) {
            a.parent.removeChild(a);
          }
          this.children.push(a);
          a.parent = this;
        },
        removeChild: function (a) {
          if (this.nodeType != X.Document && this.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : hb.toString(this.nodeType)));
          }
          if (M.remove(this.children, a)) {
            a.parent = null;
            return true;
          } else {
            return false;
          }
        },
        insertChild: function (a, b) {
          if (this.nodeType != X.Document && this.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : hb.toString(this.nodeType)));
          }
          if (a.parent != null) {
            M.remove(a.parent.children, a);
          }
          this.children.splice(b, 0, a);
          a.parent = this;
        },
        toString: function () {
          return Eg.print(this);
        },
        __class__: X
      };
      var Wf = x["backend.Countdown"] = {
        __ename__: "backend.Countdown",
        __constructs__: null,
        THREE: {
          _hx_name: "THREE",
          _hx_index: 0,
          __enum__: "backend.Countdown",
          toString: p
        },
        TWO: {
          _hx_name: "TWO",
          _hx_index: 1,
          __enum__: "backend.Countdown",
          toString: p
        },
        ONE: {
          _hx_name: "ONE",
          _hx_index: 2,
          __enum__: "backend.Countdown",
          toString: p
        },
        GO: {
          _hx_name: "GO",
          _hx_index: 3,
          __enum__: "backend.Countdown",
          toString: p
        },
        START: {
          _hx_name: "START",
          _hx_index: 4,
          __enum__: "backend.Countdown",
          toString: p
        }
      };
      Wf.__constructs__ = [Wf.THREE, Wf.TWO, Wf.ONE, Wf.GO, Wf.START];
      function Ph() {
        this.curBeat = this.curDecBeat = this.curStep = this.curDecStep = this.curSection = 0;
        this.onPlayState = false;
        this.game = z.instance;
        var a = U.getState();
        this.onPlayState = a instanceof z;
        this.game = a;
        if (this.game == null) {
          g.log.advanced("Invalid state for the stage added!", Ba.WARNING, true);
          this.destroy();
        } else {
          this.game.stages.push(this);
          Ea.call(this);
          this.create();
        }
      }
      h["backend.BaseStage"] = Ph;
      Ph.__name__ = "backend.BaseStage";
      Ph.__super__ = Ea;
      Ph.prototype = q(Ea.prototype, {
        create: function () {},
        createPost: function () {},
        countdownTick: function (a, b) {},
        beatHit: function () {},
        stepHit: function () {},
        sectionHit: function () {},
        closeSubState: function () {},
        openSubState: function (a) {},
        eventCalled: function (a, b, c, d, e, f) {},
        eventPushed: function (a) {},
        eventPushedUnique: function (a) {},
        add: function (a) {
          this.game.add(a);
        },
        __class__: Ph
      });
      function sk(a, b, c, d, e, f, k, r, n, g, za, m, aa, h, p, l, q, L, t, u, x, w, z, A, H, y, D, C, Ka, F, B, v, G, K, ha, la, ya) {
        this.guitarHeroSustains = this.discordRPC = true;
        this.safeFrames = 10;
        this.badWindow = 135;
        this.goodWindow = 90;
        this.sickWindow = 45;
        this.ratingOffset = 0;
        this.comboOffset = [0, 0, 0, 0];
        var J = new V();
        J.h.scrollspeed = 1;
        J.h.scrolltype = "multiplicative";
        J.h.songspeed = 1;
        J.h.healthgain = 1;
        J.h.healthloss = 1;
        J.h.instakill = false;
        J.h.practice = false;
        J.h.botplay = false;
        J.h.opponentplay = false;
        this.gameplaySettings = J;
        this.checkForUpdates = this.comboStacking = true;
        this.pauseMusic = "Tea Time";
        this.hitsoundVolume = 0;
        this.healthBarAlpha = 1;
        this.noReset = false;
        this.scoreZoom = true;
        this.timeBarType = "Time Left";
        this.ghostTapping = true;
        this.arrowRGBPixel = [[-1935617, -1537, -10485619], [-12727553, -720897, -16764832], [-9313536, -589850, -16764672], [-30642, -1291, -9699328]];
        this.arrowRGB = [[-4043879, -1, -12837034], [-16711681, -1, -15383881], [-15533563, -1, -16104377], [-444097, -1, -10153928]];
        this.noteOffset = 0;
        this.hideHud = false;
        this.camZooms = true;
        this.framerate = 60;
        this.cacheOnGPU = false;
        this.shaders = true;
        this.lowQuality = false;
        this.splashAlpha = 0.6;
        this.splashSkin = "Psych";
        this.noteSkin = "Default";
        this.antialiasing = true;
        this.autoPause = false;
        this.flashing = true;
        this.showFPS = false;
        this.opponentStrums = true;
        this.downScroll = this.middleScroll = false;
        if (a != null) {
          this.downScroll = a;
        }
        if (b != null) {
          this.middleScroll = b;
        }
        if (c != null) {
          this.opponentStrums = c;
        }
        if (d != null) {
          this.showFPS = d;
        }
        if (e != null) {
          this.flashing = e;
        }
        if (f != null) {
          this.autoPause = f;
        }
        if (k != null) {
          this.antialiasing = k;
        }
        if (r != null) {
          this.noteSkin = r;
        }
        if (n != null) {
          this.splashSkin = n;
        }
        if (g != null) {
          this.splashAlpha = g;
        }
        if (za != null) {
          this.lowQuality = za;
        }
        if (m != null) {
          this.shaders = m;
        }
        if (aa != null) {
          this.cacheOnGPU = aa;
        }
        if (h != null) {
          this.framerate = h;
        }
        if (p != null) {
          this.camZooms = p;
        }
        if (l != null) {
          this.hideHud = l;
        }
        if (q != null) {
          this.noteOffset = q;
        }
        if (L != null) {
          this.arrowRGB = L;
        }
        if (t != null) {
          this.arrowRGBPixel = t;
        }
        if (u != null) {
          this.ghostTapping = u;
        }
        if (x != null) {
          this.timeBarType = x;
        }
        if (w != null) {
          this.scoreZoom = w;
        }
        if (z != null) {
          this.noReset = z;
        }
        if (A != null) {
          this.healthBarAlpha = A;
        }
        if (H != null) {
          this.hitsoundVolume = H;
        }
        if (y != null) {
          this.pauseMusic = y;
        }
        if (D != null) {
          this.checkForUpdates = D;
        }
        if (C != null) {
          this.comboStacking = C;
        }
        if (Ka != null) {
          this.gameplaySettings = Ka;
        }
        if (F != null) {
          this.comboOffset = F;
        }
        if (B != null) {
          this.ratingOffset = B;
        }
        if (v != null) {
          this.sickWindow = v;
        }
        if (G != null) {
          this.goodWindow = G;
        }
        if (K != null) {
          this.badWindow = K;
        }
        if (ha != null) {
          this.safeFrames = ha;
        }
        if (la != null) {
          this.guitarHeroSustains = la;
        }
        if (ya != null) {
          this.discordRPC = ya;
        }
      }
      h["backend.SaveVariables"] = sk;
      sk.__name__ = "backend.SaveVariables";
      sk.prototype = {
        __class__: sk
      };
      function C() {}
      h["backend.ClientPrefs"] = C;
      C.__name__ = "backend.ClientPrefs";
      C.resetKeys = function (a) {
        if (a != 1) {
          var b = C.keyBinds.h;
          var c = Object.keys(b);
          for (var d = c.length, e = 0; e < d;) {
            var f = c[e++];
            if (Object.prototype.hasOwnProperty.call(C.defaultKeys.h, f)) {
              b = C.keyBinds;
              var k = C.defaultKeys.h[f].slice();
              b.h[f] = k;
            }
          }
        }
        if (a != 0) {
          b = C.gamepadBinds.h;
          a = Object.keys(b);
          c = a.length;
          d = 0;
          while (d < c) {
            e = a[d++];
            if (Object.prototype.hasOwnProperty.call(C.defaultButtons.h, e)) {
              b = C.gamepadBinds;
              k = C.defaultButtons.h[e].slice();
              b.h[e] = k;
            }
          }
        }
      };
      C.clearInvalidKeys = function (a) {
        var b = C.keyBinds.h[a];
        for (a = C.gamepadBinds.h[a]; b != null && b.indexOf(-1) != -1;) {
          M.remove(b, -1);
        }
        while (a != null && a.indexOf(-1) != -1) {
          M.remove(a, -1);
        }
      };
      C.loadDefaultKeys = function () {
        C.defaultKeys = V.createCopy(C.keyBinds.h);
        C.defaultButtons = V.createCopy(C.gamepadBinds.h);
      };
      C.saveSettings = function () {
        for (var a = 0, b = ma.fields(C.data); a < b.length;) {
          var c = b[a];
          ++a;
          g.save.data[c] = ma.field(C.data, c);
        }
        g.save.flush();
        a = new Nd();
        b = na.get_current().stage.application.meta.h.company;
        a.bind("controls_v3", "" + b + "/" + Nd.validate(na.get_current().stage.application.meta.h.file));
        a.data.keyboard = C.keyBinds;
        a.data.gamepad = C.gamepadBinds;
        a.flush();
        g.log.advanced("Settings saved!", Ba.NORMAL);
      };
      C.loadPrefs = function () {
        for (var a = 0, b = ma.fields(C.data); a < b.length;) {
          var c = b[a];
          ++a;
          if (c != "gameplaySettings" && Object.prototype.hasOwnProperty.call(g.save.data, c)) {
            C.data[c] = ma.field(g.save.data, c);
          }
        }
        if (Ub.fpsVar != null) {
          Ub.fpsVar.set_visible(C.data.showFPS);
        }
        if (C.data.framerate > g.drawFramerate) {
          g.set_updateFramerate(C.data.framerate);
          g.set_drawFramerate(C.data.framerate);
        } else {
          g.set_drawFramerate(C.data.framerate);
          g.set_updateFramerate(C.data.framerate);
        }
        if (g.save.data.gameplaySettings != null) {
          var d = g.save.data.gameplaySettings.h;
          b = d;
          d = Object.keys(d);
          for (var e = d.length, f = 0; f < e;) {
            var k = c = d[f++];
            c = b[c];
            C.data.gameplaySettings.h[k] = c;
          }
        }
        if (g.save.data.volume != null) {
          g.sound.set_volume(g.save.data.volume);
        }
        if (g.save.data.mute != null) {
          g.sound.muted = g.save.data.mute;
        }
        a = new Nd();
        b = na.get_current().stage.application.meta.h.company;
        a.bind("controls_v3", "" + b + "/" + Nd.validate(na.get_current().stage.application.meta.h.file));
        if (a != null) {
          if (a.data.keyboard != null) {
            b = a.data.keyboard;
            b = d = b.h;
            d = Object.keys(d);
            e = d.length;
            f = 0;
            while (f < e) {
              k = c = d[f++];
              c = b[c];
              if (Object.prototype.hasOwnProperty.call(C.keyBinds.h, k)) {
                C.keyBinds.h[k] = c;
              }
            }
          }
          if (a.data.gamepad != null) {
            b = a.data.gamepad;
            b = d = b.h;
            d = Object.keys(d);
            e = d.length;
            f = 0;
            while (f < e) {
              k = c = d[f++];
              c = b[c];
              if (Object.prototype.hasOwnProperty.call(C.gamepadBinds.h, k)) {
                C.gamepadBinds.h[k] = c;
              }
            }
          }
          C.reloadVolumeKeys();
        }
      };
      C.reloadVolumeKeys = function () {
        zc.muteKeys = C.keyBinds.h.volume_mute.slice();
        zc.volumeDownKeys = C.keyBinds.h.volume_down.slice();
        zc.volumeUpKeys = C.keyBinds.h.volume_up.slice();
        C.toggleVolumeKeys(true);
      };
      C.toggleVolumeKeys = function (a) {
        if (a == null) {
          a = true;
        }
        g.sound.muteKeys = a ? zc.muteKeys : [];
        g.sound.volumeDownKeys = a ? zc.volumeDownKeys : [];
        g.sound.volumeUpKeys = a ? zc.volumeUpKeys : [];
      };
      function N() {}
      h["backend.Conductor"] = N;
      N.__name__ = "backend.Conductor";
      N.__properties__ = {
        set_bpm: "set_bpm"
      };
      N.judgeNote = function (a, b) {
        if (b == null) {
          b = 0;
        }
        for (var c = 0, d = a.length - 1; c < d;) {
          var e = c++;
          if (b <= a[e].hitWindow) {
            return a[e];
          }
        }
        return a[a.length - 1];
      };
      N.getBPMFromSeconds = function (a) {
        var b = {
          stepTime: 0,
          songTime: 0,
          bpm: N.bpm,
          stepCrochet: N.stepCrochet
        };
        for (var c = 0, d = N.bpmChangeMap.length; c < d;) {
          var e = c++;
          if (a >= N.bpmChangeMap[e].songTime) {
            b = N.bpmChangeMap[e];
          }
        }
        return b;
      };
      N.getBPMFromStep = function (a) {
        var b = {
          stepTime: 0,
          songTime: 0,
          bpm: N.bpm,
          stepCrochet: N.stepCrochet
        };
        for (var c = 0, d = N.bpmChangeMap.length; c < d;) {
          var e = c++;
          if (N.bpmChangeMap[e].stepTime <= a) {
            b = N.bpmChangeMap[e];
          }
        }
        return b;
      };
      N.beatToSeconds = function (a) {
        a *= 4;
        var b = N.getBPMFromStep(a);
        return b.songTime + (a - b.stepTime) / (b.bpm / 60) / 4 * 1000;
      };
      N.mapBPMChanges = function (a) {
        N.bpmChangeMap = [];
        for (var b = a.bpm, c = 0, d = 0, e = 0, f = a.notes.length; e < f;) {
          var k = e++;
          if (a.notes[k].changeBPM && a.notes[k].bpm != b) {
            b = a.notes[k].bpm;
            N.bpmChangeMap.push({
              stepTime: c,
              songTime: d,
              bpm: b,
              stepCrochet: 60 / b * 1000 / 4
            });
          }
          k = Math.round(N.getSectionBeats(a, k) * 4);
          c += k;
          d += 60 / b * 1000 / 4 * k;
        }
        yb.trace("new BPM map BUDDY " + H.string(N.bpmChangeMap), {
          fileName: "source/backend/Conductor.hx",
          lineNumber: 124,
          className: "backend.Conductor",
          methodName: "mapBPMChanges"
        });
      };
      N.getSectionBeats = function (a, b) {
        var c = null;
        if (a.notes[b] != null) {
          c = a.notes[b].sectionBeats;
        }
        return c ?? 4;
      };
      N.set_bpm = function (a) {
        N.bpm = a;
        N.crochet = 60 / N.bpm * 1000;
        N.stepCrochet = N.crochet / 4;
        return N.bpm = a;
      };
      function Ca() {
        this.controllerMode = false;
        this.keyboardBinds = C.keyBinds;
        this.gamepadBinds = C.gamepadBinds;
      }
      h["backend.Controls"] = Ca;
      Ca.__name__ = "backend.Controls";
      Ca.prototype = {
        get_UI_UP_P: function () {
          return this.justPressed("ui_up");
        },
        get_UI_DOWN_P: function () {
          return this.justPressed("ui_down");
        },
        get_UI_LEFT_P: function () {
          return this.justPressed("ui_left");
        },
        get_UI_RIGHT_P: function () {
          return this.justPressed("ui_right");
        },
        get_UI_UP: function () {
          return this.pressed("ui_up");
        },
        get_UI_DOWN: function () {
          return this.pressed("ui_down");
        },
        get_UI_LEFT: function () {
          return this.pressed("ui_left");
        },
        get_UI_RIGHT: function () {
          return this.pressed("ui_right");
        },
        get_UI_LEFT_R: function () {
          return this.justReleased("ui_left");
        },
        get_UI_RIGHT_R: function () {
          return this.justReleased("ui_right");
        },
        get_ACCEPT: function () {
          return this.justPressed("accept");
        },
        get_BACK: function () {
          return this.justPressed("back");
        },
        get_PAUSE: function () {
          return this.justPressed("pause");
        },
        get_RESET: function () {
          return this.justPressed("reset");
        },
        justPressed: function (a) {
          var b = g.keys.checkKeyArrayState(this.keyboardBinds.h[a], 2) == 1;
          if (b) {
            this.controllerMode = false;
          }
          if (b) {
            return true;
          } else {
            return this._myGamepadJustPressed(this.gamepadBinds.h[a]) == 1;
          }
        },
        pressed: function (a) {
          var b = g.keys.checkKeyArrayState(this.keyboardBinds.h[a], 1) == 1;
          if (b) {
            this.controllerMode = false;
          }
          if (b) {
            return true;
          } else {
            return this._myGamepadPressed(this.gamepadBinds.h[a]) == 1;
          }
        },
        justReleased: function (a) {
          var b = g.keys.checkKeyArrayState(this.keyboardBinds.h[a], -1) == 1;
          if (b) {
            this.controllerMode = false;
          }
          if (b) {
            return true;
          } else {
            return this._myGamepadJustReleased(this.gamepadBinds.h[a]) == 1;
          }
        },
        _myGamepadJustPressed: function (a) {
          if (a != null) {
            for (var b = 0; b < a.length;) {
              var c = a[b];
              ++b;
              if (g.gamepads.anyHasState(c, 2) == 1) {
                return this.controllerMode = true;
              }
            }
          }
          return false;
        },
        _myGamepadPressed: function (a) {
          if (a != null) {
            for (var b = 0; b < a.length;) {
              var c = a[b];
              ++b;
              if (g.gamepads.anyHasState(c, 1) == 1) {
                return this.controllerMode = true;
              }
            }
          }
          return false;
        },
        _myGamepadJustReleased: function (a) {
          if (a != null) {
            for (var b = 0; b < a.length;) {
              var c = a[b];
              ++b;
              if (g.gamepads.anyHasState(c, -1) == 1) {
                return this.controllerMode = true;
              }
            }
          }
          return false;
        },
        __class__: Ca,
        __properties__: {
          get_RESET: "get_RESET",
          get_PAUSE: "get_PAUSE",
          get_BACK: "get_BACK",
          get_ACCEPT: "get_ACCEPT",
          get_UI_RIGHT_R: "get_UI_RIGHT_R",
          get_UI_LEFT_R: "get_UI_LEFT_R",
          get_UI_RIGHT: "get_UI_RIGHT",
          get_UI_LEFT: "get_UI_LEFT",
          get_UI_DOWN: "get_UI_DOWN",
          get_UI_UP: "get_UI_UP",
          get_UI_RIGHT_P: "get_UI_RIGHT_P",
          get_UI_LEFT_P: "get_UI_LEFT_P",
          get_UI_DOWN_P: "get_UI_DOWN_P",
          get_UI_UP_P: "get_UI_UP_P"
        }
      };
      function Oi() {}
      h["backend.CoolUtil"] = Oi;
      Oi.__name__ = "backend.CoolUtil";
      Oi.floorDecimal = function (a, b) {
        if (b < 1) {
          return Math.floor(a);
        }
        var c = 1;
        for (var d = 0; d < b;) {
          d++;
          c *= 10;
        }
        return Math.floor(a * c) / c;
      };
      function Ra(a) {
        if (a == null) {
          a = 0;
        }
        this.length = this._marker = 0;
        Ea.call(this);
        this.members = [];
        this.set_maxSize(Math.abs(a) | 0);
        this.flixelType = 2;
      }
      h["flixel.group.FlxTypedGroup"] = Ra;
      Ra.__name__ = "flixel.group.FlxTypedGroup";
      Ra.resolveGroup = function (a) {
        if (a != null) {
          if (a.flixelType == 2) {
            return a;
          }
          if (a.flixelType == 4) {
            return a.group;
          }
        }
        return null;
      };
      Ra.__super__ = Ea;
      Ra.prototype = q(Ea.prototype, {
        destroy: function () {
          Ea.prototype.destroy.call(this);
          da.destroy(this._memberAdded);
          da.destroy(this._memberRemoved);
          if (this.members != null) {
            for (var a = this.length; a-- > 0;) {
              var b = this.members.shift();
              if (b != null) {
                b.destroy();
              }
            }
            this.members = null;
          }
        },
        update: function (a) {
          for (var b = 0, c = this.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.exists && d.active) {
              d.update(a);
            }
          }
        },
        draw: function () {
          var a = Vb._defaultCameras;
          if (this._cameras != null) {
            Vb._defaultCameras = this._cameras;
          }
          for (var b = 0, c = this.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.exists && d.visible) {
              d.draw();
            }
          }
          Vb._defaultCameras = a;
        },
        add: function (a) {
          if (a == null) {
            g.log.advanced("Cannot add a `null` object to a FlxGroup.", Ba.WARNING, true);
            return null;
          }
          if (this.members.indexOf(a) >= 0) {
            return a;
          }
          var b = this.getFirstNull();
          if (b != -1) {
            this.members[b] = a;
            if (b >= this.length) {
              this.length = b + 1;
            }
            this.onMemberAdd(a);
            return a;
          }
          if (this.maxSize > 0 && this.length >= this.maxSize) {
            return a;
          }
          this.members.push(a);
          this.length++;
          this.onMemberAdd(a);
          return a;
        },
        insert: function (a, b) {
          if (b == null) {
            g.log.advanced("Cannot insert a `null` object into a FlxGroup.", Ba.WARNING, true);
            return null;
          }
          if (this.members.indexOf(b) >= 0) {
            return b;
          }
          if (a < this.length && this.members[a] == null) {
            this.members[a] = b;
            this.onMemberAdd(b);
            return b;
          }
          if (this.maxSize > 0 && this.length >= this.maxSize) {
            return b;
          }
          this.members.splice(a, 0, b);
          this.length++;
          this.onMemberAdd(b);
          return b;
        },
        recycle: function (a, b, c, d) {
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = false;
          }
          if (this.maxSize > 0) {
            if (this.length < this.maxSize) {
              if (b != null) {
                return this.add(b());
              } else if (a != null) {
                return this.add(Db.createInstance(a, []));
              } else {
                return null;
              }
            }
            c = this.members[this._marker++];
            if (this._marker >= this.maxSize) {
              this._marker = 0;
            }
            if (d) {
              c.revive();
            }
            return c;
          }
          c = this.getFirstAvailable(a, c);
          if (c != null) {
            if (d) {
              c.revive();
            }
            return c;
          } else if (b != null) {
            return this.add(b());
          } else if (a != null) {
            return this.add(Db.createInstance(a, []));
          } else {
            return null;
          }
        },
        remove: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (this.members == null) {
            return null;
          }
          var c = this.members.indexOf(a);
          if (c < 0) {
            return null;
          }
          if (b) {
            this.members.splice(c, 1);
            this.length--;
          } else {
            this.members[c] = null;
          }
          this.onMemberRemove(a);
          return a;
        },
        any: function (a) {
          for (var b = 0, c = this.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && a(d)) {
              return true;
            }
          }
          return false;
        },
        getFirstAvailable: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (var c = 0, d = this.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && !e.exists && (a == null || !!ta.__instanceof(e, a)) && (!b || ta.getClass(e).__name__ == a.__name__)) {
              return e;
            }
          }
          return null;
        },
        getFirstNull: function () {
          return this.members.indexOf(null);
        },
        clear: function () {
          this.length = 0;
          if (this._memberRemoved != null) {
            for (var a = 0, b = this.members; a < b.length;) {
              var c = b[a];
              ++a;
              this.onMemberRemove(c);
            }
          }
          ze.clearArray(this.members);
        },
        killMembers: function () {
          for (var a = 0, b = this.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.exists) {
              c.kill();
            }
          }
        },
        kill: function () {
          this.killMembers();
          Ea.prototype.kill.call(this);
        },
        reviveMembers: function () {
          for (var a = 0, b = this.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && !c.exists) {
              c.revive();
            }
          }
        },
        revive: function () {
          this.reviveMembers();
          Ea.prototype.revive.call(this);
        },
        forEach: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (var c = 0, d = this.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              if (b) {
                var f = Ra.resolveGroup(e);
                if (f != null) {
                  f.forEach(a, b);
                }
              }
              a(e);
            }
          }
        },
        forEachAlive: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (var c = 0, d = this.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && e.exists && e.alive) {
              if (b) {
                var f = Ra.resolveGroup(e);
                if (f != null) {
                  f.forEachAlive(a, b);
                }
              }
              a(e);
            }
          }
        },
        forEachExists: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (var c = 0, d = this.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && e.exists) {
              if (b) {
                var f = Ra.resolveGroup(e);
                if (f != null) {
                  f.forEachExists(a, b);
                }
              }
              a(e);
            }
          }
        },
        set_maxSize: function (a) {
          this.maxSize = Math.abs(a) | 0;
          if (this._marker >= this.maxSize) {
            this._marker = 0;
          }
          if (this.maxSize == 0 || this.members == null || this.maxSize >= this.length) {
            return this.maxSize;
          }
          while (this.length > this.maxSize) {
            a = this.members.splice(this.maxSize - 1, 1)[0];
            if (a != null) {
              this.onMemberRemove(a);
              a.destroy();
            }
            this.length--;
          }
          return this.maxSize;
        },
        onMemberAdd: function (a) {
          if (this._memberAdded != null) {
            this._memberAdded.dispatch(a);
          }
        },
        onMemberRemove: function (a) {
          if (this._memberRemoved != null) {
            this._memberRemoved.dispatch(a);
          }
        },
        __class__: Ra,
        __properties__: q(Ea.prototype.__properties__, {
          set_maxSize: "set_maxSize"
        })
      });
      function $e(a) {
        if (a == null) {
          a = 0;
        }
        Ra.call(this, a);
      }
      h["flixel.group.FlxTypedContainer"] = $e;
      $e.__name__ = "flixel.group.FlxTypedContainer";
      $e.__super__ = Ra;
      $e.prototype = q(Ra.prototype, {
        onMemberAdd: function (a) {
          if (a.get_container() != null) {
            a.get_container().remove(a);
          }
          a.container = this;
          Ra.prototype.onMemberAdd.call(this, a);
        },
        onMemberRemove: function (a) {
          a.container = null;
          Ra.prototype.onMemberRemove.call(this, a);
        },
        __class__: $e
      });
      function lc() {
        this._requestSubStateReset = false;
        this.persistentDraw = this.destroySubStates = true;
        this.persistentUpdate = false;
        $e.call(this, 0);
      }
      h["flixel.FlxState"] = lc;
      lc.__name__ = "flixel.FlxState";
      lc.__super__ = $e;
      lc.prototype = q($e.prototype, {
        create: function () {},
        draw: function () {
          if (this.persistentDraw || this.subState == null) {
            $e.prototype.draw.call(this);
          }
          if (this.subState != null) {
            this.subState.draw();
          }
        },
        openSubState: function (a) {
          this._requestSubStateReset = true;
          this._requestedSubState = a;
        },
        closeSubState: function () {
          this._requestSubStateReset = true;
        },
        resetSubState: function () {
          if (this.subState != null) {
            if (this.subState.closeCallback != null) {
              this.subState.closeCallback();
            }
            if (this._subStateClosed != null) {
              this._subStateClosed.dispatch(this.subState);
            }
            if (this.destroySubStates) {
              this.subState.destroy();
            }
          }
          this.subState = this._requestedSubState;
          this._requestedSubState = null;
          if (this.subState != null) {
            if (!this.persistentUpdate) {
              g.inputs.onStateSwitch();
            }
            this.subState._parentState = this;
            if (!this.subState._created) {
              this.subState._created = true;
              this.subState.create();
            }
            if (this.subState.openCallback != null) {
              this.subState.openCallback();
            }
            if (this._subStateOpened != null) {
              this._subStateOpened.dispatch(this.subState);
            }
          }
        },
        destroy: function () {
          this._constructor = Fg.fromMaker(function () {
            throw K.thrown("Attempting to resetState while the current state is destroyed");
          });
          da.destroy(this._subStateOpened);
          da.destroy(this._subStateClosed);
          if (this.subState != null) {
            this.subState.destroy();
            this.subState = null;
          }
          $e.prototype.destroy.call(this);
        },
        switchTo: function (a) {
          return true;
        },
        startOutro: function (a) {
          a();
        },
        onFocusLost: function () {},
        onFocus: function () {},
        onResize: function (a, b) {},
        tryUpdate: function (a) {
          if (this.persistentUpdate || this.subState == null) {
            this.update(a);
          }
          if (this._requestSubStateReset) {
            this._requestSubStateReset = false;
            this.resetSubState();
          }
          if (this.subState != null) {
            this.subState.tryUpdate(a);
          }
        },
        get_bgColor: function () {
          return g.cameras.get_bgColor();
        },
        set_bgColor: function (a) {
          return g.cameras.set_bgColor(a);
        },
        get_subStateOpened: function () {
          if (this._subStateOpened == null) {
            this._subStateOpened = new wf();
          }
          return this._subStateOpened;
        },
        get_subStateClosed: function () {
          if (this._subStateClosed == null) {
            this._subStateClosed = new wf();
          }
          return this._subStateClosed;
        },
        __class__: lc,
        __properties__: q($e.prototype.__properties__, {
          get_subStateClosed: "get_subStateClosed",
          get_subStateOpened: "get_subStateOpened",
          set_bgColor: "set_bgColor",
          get_bgColor: "get_bgColor"
        })
      });
      function sd(a) {
        if (a == null) {
          a = 0;
        }
        this._created = false;
        lc.call(this);
        this.openCallback = this.closeCallback = null;
        if (g.renderTile) {
          this._bgSprite = new tk();
        }
        this.set_bgColor(a);
      }
      h["flixel.FlxSubState"] = sd;
      sd.__name__ = "flixel.FlxSubState";
      sd.__super__ = lc;
      sd.prototype = q(lc.prototype, {
        draw: function () {
          if (g.renderBlit) {
            for (var a = 0, b = this.getCamerasLegacy(); a < b.length;) {
              var c = b[a];
              ++a;
              c.fill(this._bgColor);
            }
          } else {
            this._bgSprite.draw();
          }
          lc.prototype.draw.call(this);
        },
        destroy: function () {
          lc.prototype.destroy.call(this);
          this._parentState = this.openCallback = this.closeCallback = null;
          this._bgSprite = da.destroy(this._bgSprite);
        },
        close: function () {
          if (this._parentState != null && this._parentState.subState == this) {
            this._parentState.closeSubState();
          }
        },
        get_bgColor: function () {
          return this._bgColor;
        },
        set_bgColor: function (a) {
          if (g.renderTile && this._bgSprite != null) {
            this._bgSprite.get_pixels().setPixel32(0, 0, a);
          }
          return this._bgColor = a;
        },
        __class__: sd
      });
      function bb() {
        this.curSection = this.stepsToDo = this.lastBeat = this.lastStep = this.curStep = this.curBeat = this.curDecStep = this.curDecBeat = 0;
        sd.call(this);
      }
      h["backend.MusicBeatSubstate"] = bb;
      bb.__name__ = "backend.MusicBeatSubstate";
      bb.__super__ = sd;
      bb.prototype = q(sd.prototype, {
        get_controls: function () {
          return Ca.instance;
        },
        update: function (a) {
          if (!this.persistentUpdate) {
            U.timePassedOnState += a;
          }
          var b = this.curStep;
          this.updateCurStep();
          this.updateBeat();
          if (b != this.curStep) {
            if (this.curStep > 0) {
              this.stepHit();
            }
            if (z.SONG != null) {
              if (b < this.curStep) {
                this.updateSection();
              } else {
                this.rollbackSection();
              }
            }
          }
          sd.prototype.update.call(this, a);
        },
        updateSection: function () {
          if (this.stepsToDo < 1) {
            this.stepsToDo = Math.round(this.getBeatsOnSection() * 4);
          }
          while (this.curStep >= this.stepsToDo) {
            this.curSection++;
            var a = this.getBeatsOnSection();
            this.stepsToDo += Math.round(a * 4);
            this.sectionHit();
          }
        },
        rollbackSection: function () {
          if (!(this.curStep < 0)) {
            var a = this.curSection;
            for (var b = this.stepsToDo = this.curSection = 0, c = z.SONG.notes.length; b < c;) {
              var d = b++;
              if (z.SONG.notes[d] != null) {
                this.stepsToDo += Math.round(this.getBeatsOnSection() * 4);
                if (this.stepsToDo > this.curStep) {
                  break;
                }
                this.curSection++;
              }
            }
            if (this.curSection > a) {
              this.sectionHit();
            }
          }
        },
        updateBeat: function () {
          this.curBeat = Math.floor(this.curStep / 4);
          this.curDecBeat = this.curDecStep / 4;
        },
        updateCurStep: function () {
          var a = N.getBPMFromSeconds(N.songPosition);
          var b = (N.songPosition - C.data.noteOffset - a.songTime) / a.stepCrochet;
          this.curDecStep = a.stepTime + b;
          this.curStep = a.stepTime + Math.floor(b);
        },
        stepHit: function () {
          if (this.curStep % 4 == 0) {
            this.beatHit();
          }
        },
        beatHit: function () {},
        sectionHit: function () {},
        getBeatsOnSection: function () {
          var a = 4;
          if (z.SONG != null && z.SONG.notes[this.curSection] != null) {
            a = z.SONG.notes[this.curSection].sectionBeats;
          }
          if (a == null) {
            return 4;
          } else {
            return a;
          }
        },
        __class__: bb,
        __properties__: q(sd.prototype.__properties__, {
          get_controls: "get_controls"
        })
      });
      function hg(a, b) {
        this.isTransIn = false;
        this.duration = a;
        this.isTransIn = b;
        bb.call(this);
      }
      h["backend.CustomFadeTransition"] = hg;
      hg.__name__ = "backend.CustomFadeTransition";
      hg.__super__ = bb;
      hg.prototype = q(bb.prototype, {
        create: function () {
          this.set_cameras([g.cameras.list[g.cameras.list.length - 1]]);
          var a = g.width / Math.max(this.get_camera().zoom, 0.001) | 0;
          var b = g.height / Math.max(this.get_camera().zoom, 0.001) | 0;
          this.transGradient = td.createGradientFlxSprite(1, b, this.isTransIn ? [0, -16777216] : [-16777216, 0]);
          this.transGradient.scale.set_x(a);
          this.transGradient.updateHitbox();
          var c = this.transGradient.scrollFactor;
          c.set_x(0);
          c.set_y(0);
          c = this.transGradient;
          var d = 1;
          if (d == null) {
            d = 17;
          }
          if (d == 1 || d == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (d == 16 || d == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          this.add(this.transGradient);
          this.transBlack = new G().makeGraphic(1, 1, -16777216);
          c = this.transBlack.scale;
          b += 400;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
          this.transBlack.updateHitbox();
          c = this.transBlack.scrollFactor;
          c.set_x(0);
          c.set_y(0);
          c = this.transBlack;
          d = 1;
          if (d == null) {
            d = 17;
          }
          if (d == 1 || d == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (d == 16 || d == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          this.add(this.transBlack);
          if (this.isTransIn) {
            this.transGradient.set_y(this.transBlack.y - this.transBlack.get_height());
          } else {
            this.transGradient.set_y(-this.transGradient.get_height());
          }
          bb.prototype.create.call(this);
        },
        update: function (a) {
          bb.prototype.update.call(this, a);
          var b = g.height * Math.max(this.get_camera().zoom, 0.001);
          var c = this.transGradient.get_height() + Math.max(this.get_camera().zoom, 0.001) * 50;
          if (this.duration > 0) {
            var d = this.transGradient;
            d.set_y(d.y + (b + c) * a / this.duration);
          } else {
            this.transGradient.set_y(c * a);
          }
          if (this.isTransIn) {
            this.transBlack.set_y(this.transGradient.y + this.transGradient.get_height());
          } else {
            this.transBlack.set_y(this.transGradient.y - this.transBlack.get_height());
          }
          if (this.transGradient.y >= c) {
            this.close();
            if (hg.finishCallback != null) {
              hg.finishCallback();
            }
            hg.finishCallback = null;
          }
        },
        __class__: hg
      });
      function mb() {}
      h["backend.Difficulty"] = mb;
      mb.__name__ = "backend.Difficulty";
      function Za() {}
      h["backend.Highscore"] = Za;
      Za.__name__ = "backend.Highscore";
      Za.resetSong = function (a, b) {
        if (b == null) {
          b = 0;
        }
        a = Za.formatSong(a, b);
        Za.setScore(a, 0);
        Za.setRating(a, 0);
      };
      Za.resetWeek = function (a, b) {
        if (b == null) {
          b = 0;
        }
        a = Za.formatSong(a, b);
        Za.setWeekScore(a, 0);
      };
      Za.saveScore = function (a, b, c, d) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = Za.formatSong(a, c);
        if (Object.prototype.hasOwnProperty.call(Za.songScores.h, a)) {
          if (Za.songScores.h[a] < b) {
            Za.setScore(a, b);
            if (d >= 0) {
              Za.setRating(a, d);
            }
          }
        } else {
          Za.setScore(a, b);
          if (d >= 0) {
            Za.setRating(a, d);
          }
        }
      };
      Za.saveWeekScore = function (a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = Za.formatSong(a, c);
        if (Object.prototype.hasOwnProperty.call(Za.weekScores.h, a)) {
          if (Za.weekScores.h[a] < b) {
            Za.setWeekScore(a, b);
          }
        } else {
          Za.setWeekScore(a, b);
        }
      };
      Za.setScore = function (a, b) {
        Za.songScores.h[a] = b;
        g.save.data.songScores = Za.songScores;
        g.save.flush();
      };
      Za.setWeekScore = function (a, b) {
        Za.weekScores.h[a] = b;
        g.save.data.weekScores = Za.weekScores;
        g.save.flush();
      };
      Za.setRating = function (a, b) {
        Za.songRating.h[a] = b;
        g.save.data.songRating = Za.songRating;
        g.save.flush();
      };
      Za.formatSong = function (a, b) {
        var c = new sa("[~&\\\\;:<>#]", "");
        var d = new sa("[.,'\"%?!]", "");
        c = c.split(w.replace(a, " ", "-")).join("-");
        a = d.split(c).join("").toLowerCase();
        d = b;
        if (d == null) {
          d = z.storyDifficulty;
        }
        b = mb.list[d];
        b = b != mb.defaultDifficulty ? "-" + b : "";
        c = new sa("[~&\\\\;:<>#]", "");
        d = new sa("[.,'\"%?!]", "");
        c = c.split(w.replace(b, " ", "-")).join("-");
        return a + d.split(c).join("").toLowerCase();
      };
      Za.getScore = function (a, b) {
        a = Za.formatSong(a, b);
        if (!Object.prototype.hasOwnProperty.call(Za.songScores.h, a)) {
          Za.setScore(a, 0);
        }
        return Za.songScores.h[a];
      };
      Za.getRating = function (a, b) {
        a = Za.formatSong(a, b);
        if (!Object.prototype.hasOwnProperty.call(Za.songRating.h, a)) {
          Za.setRating(a, 0);
        }
        return Za.songRating.h[a];
      };
      Za.getWeekScore = function (a, b) {
        a = Za.formatSong(a, b);
        if (!Object.prototype.hasOwnProperty.call(Za.weekScores.h, a)) {
          Za.setWeekScore(a, 0);
        }
        return Za.weekScores.h[a];
      };
      Za.load = function () {
        if (g.save.data.weekScores != null) {
          Za.weekScores = g.save.data.weekScores;
        }
        if (g.save.data.songScores != null) {
          Za.songScores = g.save.data.songScores;
        }
        if (g.save.data.songRating != null) {
          Za.songRating = g.save.data.songRating;
        }
      };
      function Vd() {}
      h["backend.InputFormatter"] = Vd;
      Vd.__name__ = "backend.InputFormatter";
      Vd.getKeyName = function (a) {
        switch (a) {
          case -1:
            return "---";
          case 8:
            return "BckSpc";
          case 17:
            return "Ctrl";
          case 18:
            return "Alt";
          case 20:
            return "Caps";
          case 33:
            return "PgUp";
          case 34:
            return "PgDown";
          case 48:
            return "0";
          case 49:
            return "1";
          case 50:
            return "2";
          case 51:
            return "3";
          case 52:
            return "4";
          case 53:
            return "5";
          case 54:
            return "6";
          case 55:
            return "7";
          case 56:
            return "8";
          case 57:
            return "9";
          case 96:
            return "#0";
          case 97:
            return "#1";
          case 98:
            return "#2";
          case 99:
            return "#3";
          case 100:
            return "#4";
          case 101:
            return "#5";
          case 102:
            return "#6";
          case 103:
            return "#7";
          case 104:
            return "#8";
          case 105:
            return "#9";
          case 106:
            return "#*";
          case 107:
            return "#+";
          case 109:
            return "#-";
          case 110:
            return "#.";
          case 186:
            return ";";
          case 188:
            return ",";
          case 190:
            return ".";
          case 192:
            return "`";
          case 219:
            return "[";
          case 221:
            return "]";
          case 222:
            return "'";
          case 301:
            return "PrtScrn";
          default:
            a = Gg.toStringMap.get(a);
            if (a.toLowerCase() == "null") {
              return "---";
            }
            a = a.split("_");
            for (var b = 0, c = a.length; b < c;) {
              var d = b++;
              var e = a[d];
              a[d] = e.charAt(0).toUpperCase() + M.substr(e, 1, null).toLowerCase();
            }
            return a.join(" ");
        }
      };
      Vd.getGamepadName = function (a) {
        var b = g.gamepads.firstActive;
        b = b != null ? b.detectedModel : uc.UNKNOWN;
        switch (a) {
          case -1:
            return "---";
          case 0:
            switch (b._hx_index) {
              case 2:
                return "X";
              case 4:
                return "A";
              default:
                return "Action Down";
            }
          case 1:
            switch (b._hx_index) {
              case 2:
                return "O";
              case 4:
                return "B";
              default:
                return "Action Right";
            }
          case 2:
            switch (b._hx_index) {
              case 2:
                return "[";
              case 4:
                return "X";
              default:
                return "Action Left";
            }
          case 3:
            switch (b._hx_index) {
              case 2:
                return "]";
              case 4:
                return "Y";
              default:
                return "Action Up";
            }
          case 4:
            switch (b._hx_index) {
              case 2:
                return "L1";
              case 4:
                return "LB";
              default:
                return "L. Bumper";
            }
          case 5:
            switch (b._hx_index) {
              case 2:
                return "R1";
              case 4:
                return "RB";
              default:
                return "R. Bumper";
            }
          case 6:
            switch (b._hx_index) {
              case 2:
                return "Share";
              case 4:
                return "Back";
              default:
                return "Select";
            }
          case 7:
            if (b._hx_index == 2) {
              return "Options";
            } else {
              return "Start";
            }
          case 8:
            switch (b._hx_index) {
              case 2:
                return "L3";
              case 4:
                return "LS";
              default:
                return "Analog Click";
            }
          case 9:
            switch (b._hx_index) {
              case 2:
                return "R3";
              case 4:
                return "RS";
              default:
                return "C. Click";
            }
          case 11:
            return "D. Up";
          case 12:
            return "D. Down";
          case 13:
            return "D. Left";
          case 14:
            return "D. Right";
          case 15:
          case 17:
            switch (b._hx_index) {
              case 2:
                return "L2";
              case 4:
                return "LT";
              default:
                return "L. Trigger";
            }
          case 16:
          case 18:
            switch (b._hx_index) {
              case 2:
                return "R2";
              case 4:
                return "RT";
              default:
                return "R. Trigger";
            }
          case 34:
            return "Up";
          case 35:
            return "Right";
          case 36:
            return "Down";
          case 37:
            return "Left";
          case 38:
            return "C. Up";
          case 39:
            return "C. Right";
          case 40:
            return "C. Down";
          case 41:
            return "C. Left";
          default:
            a = ig.toStringMap.get(a);
            if (a.toLowerCase() == "null") {
              return "---";
            }
            a = a.split("_");
            b = 0;
            for (var c = a.length; b < c;) {
              var d = b++;
              var e = a[d];
              a[d] = e.charAt(0).toUpperCase() + M.substr(e, 1, null).toLowerCase();
            }
            return a.join(" ");
        }
      };
      function Wd() {}
      h["backend.Mods"] = Wd;
      Wd.__name__ = "backend.Mods";
      Wd.loadTopMod = function () {
        Wd.currentModDirectory = "";
      };
      function Wb(a, b) {
        this.transOutFinished = this._exiting = false;
        this.transIn = a;
        this.transOut = b;
        if (this.transIn == null && Wb.defaultTransIn != null) {
          this.transIn = Wb.defaultTransIn;
        }
        if (this.transOut == null && Wb.defaultTransOut != null) {
          this.transOut = Wb.defaultTransOut;
        }
        lc.call(this);
      }
      h["flixel.addons.transition.FlxTransitionableState"] = Wb;
      Wb.__name__ = "flixel.addons.transition.FlxTransitionableState";
      Wb.__super__ = lc;
      Wb.prototype = q(lc.prototype, {
        destroy: function () {
          lc.prototype.destroy.call(this);
          this._onExit = this.transOut = this.transIn = null;
        },
        create: function () {
          lc.prototype.create.call(this);
          this.transitionIn();
        },
        startOutro: function (a) {
          if (this.get_hasTransOut()) {
            if (!this._exiting) {
              this._exiting = true;
              this.transitionOut(a);
              if (Wb.skipNextTransOut) {
                Wb.skipNextTransOut = false;
                this.finishTransOut();
              }
            }
          } else {
            a();
          }
        },
        transitionIn: function () {
          if (this.transIn != null && this.transIn.type != "none") {
            if (Wb.skipNextTransIn) {
              Wb.skipNextTransIn = false;
              if (this.finishTransIn != null) {
                this.finishTransIn();
              }
            } else {
              var a = this.createTransition(this.transIn);
              a.setStatus(3);
              this.openSubState(a);
              a.set_finishCallback(l(this, this.finishTransIn));
              a.start(1);
            }
          }
        },
        transitionOut: function (a) {
          this._onExit = a;
          if (this.get_hasTransOut()) {
            a = this.createTransition(this.transOut);
            a.setStatus(2);
            this.openSubState(a);
            a.set_finishCallback(l(this, this.finishTransOut));
            a.start(0);
          } else {
            this._onExit();
          }
        },
        get_hasTransIn: function () {
          if (this.transIn != null) {
            return this.transIn.type != "none";
          } else {
            return false;
          }
        },
        get_hasTransOut: function () {
          if (this.transOut != null) {
            return this.transOut.type != "none";
          } else {
            return false;
          }
        },
        createTransition: function (a) {
          switch (a.type) {
            case "fade":
              return new Pi(a);
            case "tiles":
              return new Pi(a);
            default:
              return null;
          }
        },
        finishTransIn: function () {
          this.closeSubState();
        },
        finishTransOut: function () {
          this.transOutFinished = true;
          if (!this._exiting) {
            this.closeSubState();
          }
          if (this._onExit != null) {
            this._onExit();
          }
        },
        __class__: Wb,
        __properties__: q(lc.prototype.__properties__, {
          get_hasTransOut: "get_hasTransOut",
          get_hasTransIn: "get_hasTransIn"
        })
      });
      function kh() {}
      h["flixel.addons.ui.interfaces.IEventGetter"] = kh;
      kh.__name__ = "flixel.addons.ui.interfaces.IEventGetter";
      kh.__isInterface__ = true;
      kh.prototype = {
        __class__: kh
      };
      function Hg() {}
      h["flixel.addons.ui.interfaces.IFlxUIState"] = Hg;
      Hg.__name__ = "flixel.addons.ui.interfaces.IFlxUIState";
      Hg.__isInterface__ = true;
      Hg.__interfaces__ = [kh];
      Hg.prototype = {
        __class__: Hg
      };
      function Xd(a, b) {
        this.getTextFallback = null;
        this._reload_countdown = 0;
        this.reload_ui_on_resize = this._reload = false;
        this._xml_id = "";
        this.hideCursorOnSubstate = this._cursorHidden = false;
        this.cursor = null;
        Wb.call(this, a, b);
      }
      h["flixel.addons.ui.FlxUIState"] = Xd;
      Xd.__name__ = "flixel.addons.ui.FlxUIState";
      Xd.__interfaces__ = [Hg, kh];
      Xd.__super__ = Wb;
      Xd.prototype = q(Wb.prototype, {
        create: function () {
          if (Xd.static_tongue != null) {
            this._tongue = Xd.static_tongue;
          }
          if (this._makeCursor == 1) {
            this.cursor = this.createCursor();
          }
          this.tooltips = new Qi(this);
          this._ui = this.createUI(null, this, null, this._tongue);
          this.add(this._ui);
          if (this.getTextFallback != null) {
            this._ui.getTextFallback = this.getTextFallback;
          }
          if (this._xml_id != null && this._xml_id != "") {
            var a = null;
            try {
              a = F.xml(this._xml_id);
            } catch (c) {
              Na.lastError = c;
              var b = K.caught(c).unwrap();
              if (typeof b != "string") {
                throw c;
              }
            }
            if (a == null) {
              try {
                a = F.xml(this._xml_id, "xml", true, "");
              } catch (c) {
                Na.lastError = c;
                b = K.caught(c).unwrap();
                if (typeof b != "string") {
                  throw c;
                }
              }
            }
            if (a == null) {
              g.log.advanced("FlxUISubState: Could not load _xml_id \"" + this._xml_id + "\"", Ba.ERROR, true);
            } else {
              this.loadUIFromData(a);
            }
          } else {
            this.loadUIFromData(null);
          }
          if (this.cursor != null && this._ui != null) {
            this.add(this.cursor);
            this.cursor.addWidgetsFromUI(this._ui);
            this.cursor.findVisibleLocation(0);
          }
          this.tooltips.init();
          Wb.prototype.create.call(this);
          this.cleanup();
        },
        update: function (a) {
          Wb.prototype.update.call(this, a);
          if (this.tooltips != null) {
            this.tooltips.update(a);
          }
          if (this._reload && this._reload_countdown > 0) {
            this._reload_countdown--;
            if (this._reload_countdown == 0) {
              this.reloadUI();
            }
          }
        },
        cleanup: function () {
          this._ui.cleanup();
        },
        _cleanupUIVars: function () {
          if (this._ui_vars != null) {
            var a = Object.keys(this._ui_vars.h);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              var e = this._ui_vars;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._ui_vars = null;
          }
        },
        setUIVariable: function (a, b) {
          if (this._ui != null) {
            this._ui.setVariable(a, b);
          } else {
            if (this._ui_vars == null) {
              this._ui_vars = new V();
            }
            this._ui_vars.h[a] = b;
          }
        },
        resizeScreen: function (a, b) {},
        openSubState: function (a) {
          if (this.cursor != null && this.hideCursorOnSubstate && this.cursor.visible == 1) {
            this._cursorHidden = true;
            this.cursor.set_visible(false);
          }
          Wb.prototype.openSubState.call(this, a);
        },
        closeSubState: function () {
          if (this.cursor != null && this.hideCursorOnSubstate && this._cursorHidden) {
            this._cursorHidden = false;
            this.cursor.set_visible(true);
          }
          Wb.prototype.closeSubState.call(this);
        },
        onResize: function (a, b) {
          if (this.reload_ui_on_resize) {
            g.scaleMode.onMeasure(a, b);
            this._reload_countdown = 1;
            this._reload = true;
          }
        },
        onShowTooltip: function (a) {},
        destroy: function () {
          this.destroyed = true;
          if (this._ui != null) {
            this._ui.destroy();
            this.remove(this._ui, true);
            this._ui = null;
          }
          if (this.tooltips != null) {
            this.tooltips.destroy();
            this.tooltips = null;
          }
          Wb.prototype.destroy.call(this);
        },
        forceFocus: function (a, b) {
          if (this._ui != null) {
            if (a) {
              this._ui.set_focus(b);
            } else {
              this._ui.set_focus(null);
            }
          }
        },
        onCursorEvent: function (a, b) {
          this.getEvent(a, b, null);
        },
        getEvent: function (a, b, c, d) {},
        getRequest: function (a, b, c, d) {
          return null;
        },
        getText: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = "ui";
          }
          if (this._tongue != null) {
            return this._tongue.get(a, b, c);
          } else if (this.getTextFallback != null) {
            return this.getTextFallback(a, b, c);
          } else {
            return a;
          }
        },
        createCursor: function () {
          return new Ri(l(this, this.onCursorEvent));
        },
        createUI: function (a, b, c, d, e) {
          if (e == null) {
            e = "";
          }
          a = new Ma(a, b, c, d, e, this._ui_vars);
          this._cleanupUIVars();
          return a;
        },
        loadUIFromData: function (a) {
          this._ui.load(a);
        },
        reloadUI: function (a) {
          if (this._ui != null) {
            this.remove(this._ui, true);
            this._ui.destroy();
            this._ui = null;
          }
          this._ui = this.createUI(null, this, null, this._tongue);
          this.add(this._ui);
          a = F.xml(this._xml_id);
          if (a != null) {
            this.loadUIFromData(a);
          }
          this._reload = false;
          this._reload_countdown = 0;
        },
        __class__: Xd
      });
      function U(a, b) {
        this.stages = [];
        this._psychCameraInitialized = false;
        this.curSection = this.stepsToDo = this.curStep = this.curBeat = this.curDecStep = this.curDecBeat = 0;
        Xd.call(this, a, b);
      }
      h["backend.MusicBeatState"] = U;
      U.__name__ = "backend.MusicBeatState";
      U.switchState = function (a) {
        if (a == null) {
          a = g.game._state;
        }
        if (a == g.game._state) {
          U.resetState();
        } else {
          if (Wb.skipNextTransIn) {
            var b = Fg.fromState(a);
            var c = g.game._state;
            if (!(b instanceof lc) || !!g.canSwitchTo(b)) {
              g.game._state.startOutro(function () {
                if (g.game._state == c) {
                  g.game._nextState = b;
                } else {
                  g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Ba.WARNING, true);
                }
              });
            }
          } else {
            U.startTransition(a);
          }
          Wb.skipNextTransIn = false;
        }
      };
      U.resetState = function () {
        if (Wb.skipNextTransIn) {
          if (g.game._state == null || g.game._state._constructor == null) {
            g.log.advanced("FlxG.resetState was called while switching states", Ba.ERROR, true);
          } else if (g.game._state._constructor instanceof lc) {
            var a = Fg.fromState(Db.createInstance(ta.getClass(g.game._state), []));
            var b = g.game._state;
            if (!(a instanceof lc) || !!g.canSwitchTo(a)) {
              g.game._state.startOutro(function () {
                if (g.game._state == b) {
                  g.game._nextState = a;
                } else {
                  g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Ba.WARNING, true);
                }
              });
            }
          } else {
            var c = g.game._state._constructor;
            var d = g.game._state;
            if (!(c instanceof lc) || !!g.canSwitchTo(c)) {
              g.game._state.startOutro(function () {
                if (g.game._state == d) {
                  g.game._nextState = c;
                } else {
                  g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Ba.WARNING, true);
                }
              });
            }
          }
        } else {
          U.startTransition();
        }
        Wb.skipNextTransIn = false;
      };
      U.startTransition = function (a) {
        if (a == null) {
          a = g.game._state;
        }
        g.game._state.openSubState(new hg(0.6, false));
        hg.finishCallback = a == g.game._state ? function () {
          if (g.game._state == null || g.game._state._constructor == null) {
            g.log.advanced("FlxG.resetState was called while switching states", Ba.ERROR, true);
          } else if (g.game._state._constructor instanceof lc) {
            var a = Fg.fromState(Db.createInstance(ta.getClass(g.game._state), []));
            var c = g.game._state;
            if (!(a instanceof lc) || !!g.canSwitchTo(a)) {
              g.game._state.startOutro(function () {
                if (g.game._state == c) {
                  g.game._nextState = a;
                } else {
                  g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Ba.WARNING, true);
                }
              });
            }
          } else {
            var d = g.game._state._constructor;
            var e = g.game._state;
            if (!(d instanceof lc) || !!g.canSwitchTo(d)) {
              g.game._state.startOutro(function () {
                if (g.game._state == e) {
                  g.game._nextState = d;
                } else {
                  g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Ba.WARNING, true);
                }
              });
            }
          }
        } : function () {
          var b = Fg.fromState(a);
          var c = g.game._state;
          if (!(b instanceof lc) || !!g.canSwitchTo(b)) {
            g.game._state.startOutro(function () {
              if (g.game._state == c) {
                g.game._nextState = b;
              } else {
                g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Ba.WARNING, true);
              }
            });
          }
        };
      };
      U.getState = function () {
        return ta.__cast(g.game._state, U);
      };
      U.__super__ = Xd;
      U.prototype = q(Xd.prototype, {
        get_controls: function () {
          return Ca.instance;
        },
        create: function () {
          var a = Wb.skipNextTransOut;
          if (!this._psychCameraInitialized) {
            this.initPsychCamera();
          }
          Xd.prototype.create.call(this);
          if (!a) {
            this.openSubState(new hg(0.6, true));
          }
          Wb.skipNextTransOut = false;
          U.timePassedOnState = 0;
        },
        initPsychCamera: function () {
          var a = new uk();
          g.cameras.reset(a);
          g.cameras.setDefaultDrawTarget(a, true);
          this._psychCameraInitialized = true;
          return a;
        },
        update: function (a) {
          var b = this.curStep;
          U.timePassedOnState += a;
          this.updateCurStep();
          this.updateBeat();
          if (b != this.curStep) {
            if (this.curStep > 0) {
              this.stepHit();
            }
            if (z.SONG != null) {
              if (b < this.curStep) {
                this.updateSection();
              } else {
                this.rollbackSection();
              }
            }
          }
          if (g.save.data != null) {
            g.save.data.fullscreen = g.get_fullscreen();
          }
          this.stagesFunc(function (b) {
            b.update(a);
          });
          Xd.prototype.update.call(this, a);
        },
        updateSection: function () {
          if (this.stepsToDo < 1) {
            this.stepsToDo = Math.round(this.getBeatsOnSection() * 4);
          }
          while (this.curStep >= this.stepsToDo) {
            this.curSection++;
            var a = this.getBeatsOnSection();
            this.stepsToDo += Math.round(a * 4);
            this.sectionHit();
          }
        },
        rollbackSection: function () {
          if (!(this.curStep < 0)) {
            var a = this.curSection;
            for (var b = this.stepsToDo = this.curSection = 0, c = z.SONG.notes.length; b < c;) {
              var d = b++;
              if (z.SONG.notes[d] != null) {
                this.stepsToDo += Math.round(this.getBeatsOnSection() * 4);
                if (this.stepsToDo > this.curStep) {
                  break;
                }
                this.curSection++;
              }
            }
            if (this.curSection > a) {
              this.sectionHit();
            }
          }
        },
        updateBeat: function () {
          this.curBeat = Math.floor(this.curStep / 4);
          this.curDecBeat = this.curDecStep / 4;
        },
        updateCurStep: function () {
          var a = N.getBPMFromSeconds(N.songPosition);
          var b = (N.songPosition - C.data.noteOffset - a.songTime) / a.stepCrochet;
          this.curDecStep = a.stepTime + b;
          this.curStep = a.stepTime + Math.floor(b);
        },
        stepHit: function () {
          var a = this;
          this.stagesFunc(function (b) {
            b.curStep = a.curStep;
            b.curDecStep = a.curDecStep;
            b.stepHit();
          });
          if (this.curStep % 4 == 0) {
            this.beatHit();
          }
        },
        beatHit: function () {
          var a = this;
          this.stagesFunc(function (b) {
            b.curBeat = a.curBeat;
            b.curDecBeat = a.curDecBeat;
            b.beatHit();
          });
        },
        sectionHit: function () {
          var a = this;
          this.stagesFunc(function (b) {
            b.curSection = a.curSection;
            b.sectionHit();
          });
        },
        stagesFunc: function (a) {
          for (var b = 0, c = this.stages; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.exists && d.active) {
              a(d);
            }
          }
        },
        getBeatsOnSection: function () {
          var a = 4;
          if (z.SONG != null && z.SONG.notes[this.curSection] != null) {
            a = z.SONG.notes[this.curSection].sectionBeats;
          }
          if (a == null) {
            return 4;
          } else {
            return a;
          }
        },
        __class__: U,
        __properties__: q(Xd.prototype.__properties__, {
          get_controls: "get_controls"
        })
      });
      function Si() {}
      h["backend.NoteTypesConfig"] = Si;
      Si.__name__ = "backend.NoteTypesConfig";
      Si.clearNoteTypesData = function () {
        Si.noteTypesData.h = Object.create(null);
      };
      function y() {}
      h["backend.Paths"] = y;
      y.__name__ = "backend.Paths";
      y.clearUnusedMemory = function () {
        var a = Object.keys(y.currentTrackedAssets.h);
        for (var b = a.length, c = 0; c < b;) {
          var d = a[c++];
          if (y.localTrackedAssets.indexOf(d) == -1 && y.dumpExclusions.indexOf(d) == -1) {
            var e = y.currentTrackedAssets.h[d];
            if (e != null) {
              var f = g.bitmap._cache;
              if (Object.prototype.hasOwnProperty.call(f.h, d)) {
                delete f.h[d];
              }
              W.cache.removeBitmapData(d);
              f = y.currentTrackedAssets;
              if (Object.prototype.hasOwnProperty.call(f.h, d)) {
                delete f.h[d];
              }
              e.persist = false;
              e.set_destroyOnNoUse(true);
              e.destroy();
            }
          }
        }
        Ti.gc();
      };
      y.clearStoredMemory = function () {
        var a = g.bitmap._cache.h;
        var b = Object.keys(a);
        for (var c = b.length, d = 0; d < c;) {
          a = b[d++];
          var e = g.bitmap._cache.h[a];
          if (e != null && !Object.prototype.hasOwnProperty.call(y.currentTrackedAssets.h, a)) {
            W.cache.removeBitmapData(a);
            var f = g.bitmap._cache;
            if (Object.prototype.hasOwnProperty.call(f.h, a)) {
              delete f.h[a];
            }
            e.destroy();
          }
        }
        b = a = y.currentTrackedSounds.h;
        c = Object.keys(a);
        d = c.length;
        for (e = 0; e < d;) {
          var k = a = c[e++];
          a = b[a];
          if (y.localTrackedAssets.indexOf(k) == -1 && y.dumpExclusions.indexOf(k) == -1 && a != null) {
            oa.cache.clear(k);
            f = y.currentTrackedSounds;
            if (Object.prototype.hasOwnProperty.call(f.h, k)) {
              delete f.h[k];
            }
          }
        }
        y.localTrackedAssets = [];
      };
      y.setCurrentLevel = function (a) {
        y.currentLevel = a.toLowerCase();
      };
      y.getPath = function (a, b, c, d) {
        if (b == null) {
          b = "TEXT";
        }
        if (c != null) {
          return y.getLibraryPath(a, c);
        }
        if (y.currentLevel != null && y.currentLevel != "shared" && (c = y.currentLevel, d = null, d == null && (d = c), c = "" + c + ":assets/" + d + "/" + a, W.exists(c, b))) {
          return c;
        }
        if (a == null) {
          a = "";
        }
        return "assets/shared/" + a;
      };
      y.getLibraryPath = function (a, b) {
        if (b == null) {
          b = "shared";
        }
        if (b == "shared") {
          if (a == null) {
            a = "";
          }
          return "assets/shared/" + a;
        }
        var c = null;
        if (c == null) {
          c = b;
        }
        return "" + b + ":assets/" + c + "/" + a;
      };
      y.video = function (a) {
        return y.getPath("videos/" + a + ".mp4");
      };
      y.sound = function (a, b) {
        return y.returnSound("sounds", a, b);
      };
      y.image = function (a, b, c) {
        if (c == null) {
          c = true;
        }
        var d = null;
        a = y.getPath("images/" + a + ".png", "IMAGE", b);
        if (Object.prototype.hasOwnProperty.call(y.currentTrackedAssets.h, a)) {
          y.localTrackedAssets.push(a);
          return y.currentTrackedAssets.h[a];
        }
        if (W.exists(a, "IMAGE")) {
          d = W.getBitmapData(a);
        }
        if (d != null && (c = y.cacheBitmap(a, d, c), c != null)) {
          return c;
        }
        yb.trace("oh no its returning null NOOOO (" + a + ")", {
          fileName: "source/backend/Paths.hx",
          lineNumber: 245,
          className: "backend.Paths",
          methodName: "image"
        });
        return null;
      };
      y.cacheBitmap = function (a, b, c) {
        if (c == null) {
          c = true;
        }
        if (b == null && (W.exists(a, "IMAGE") && (b = W.getBitmapData(a)), b == null)) {
          return null;
        }
        y.localTrackedAssets.push(a);
        if (c && C.data.cacheOnGPU) {
          c = na.get_current().stage.context3D.createRectangleTexture(b.width, b.height, 1, true);
          c.uploadFromBitmapData(b);
          b.image.set_data(null);
          b.dispose();
          b.disposeImage();
          b = T.fromTexture(c);
        }
        b = cc.fromBitmapData(b, false, a);
        b.persist = true;
        b.set_destroyOnNoUse(false);
        return y.currentTrackedAssets.h[a] = b;
      };
      y.getTextFromFile = function (a, b) {
        a = y.getPath(a, "TEXT");
        if (W.exists(a, "TEXT")) {
          return oa.getText(a);
        } else {
          return null;
        }
      };
      y.fileExists = function (a, b, c, d) {
        if (W.exists(y.getPath(a, b, d, false))) {
          return true;
        } else {
          return false;
        }
      };
      y.getAtlas = function (a, b, c) {
        if (c == null) {
          c = true;
        }
        c = y.image(a, b, c);
        var d = y.getPath("images/" + a + ".xml", "TEXT", b, true);
        if (W.exists(d)) {
          return fb.fromSparrow(c, d);
        }
        d = y.getPath("images/" + a + ".json", "TEXT", b, true);
        if (W.exists(d)) {
          return fb.fromTexturePackerJson(c, d);
        }
        c = y.image(a, b, true);
        return fb.fromSpriteSheetPacker(c, y.getPath("images/" + a + ".txt", null, b));
      };
      y.getMultiAtlas = function (a, b, c) {
        if (c == null) {
          c = true;
        }
        var d = y.getAtlas(w.trim(a[0]));
        if (a.length > 1) {
          var e = d;
          d = new fb(d.parent);
          d.addAtlas(e, true);
          e = 1;
          for (var f = a.length; e < f;) {
            var k = e++;
            k = y.getAtlas(w.trim(a[k]), b, c);
            if (k != null) {
              d.addAtlas(k, true);
            }
          }
        }
        return d;
      };
      y.returnSound = function (a, b, c) {
        var d = "" + b + ".mp3";
        if (a != null) {
          d = "" + a + "/" + d;
        }
        d = y.getPath(d, "SOUND", c);
        d = d.substring(d.indexOf(":") + 1, d.length);
        if (!Object.prototype.hasOwnProperty.call(y.currentTrackedSounds.h, d)) {
          b = (a == "songs" ? "songs:" : "") + y.getPath("" + (a != null ? "" + a + "/" + b : b) + ".mp3", "SOUND", c);
          if (W.exists(b, "SOUND")) {
            a = y.currentTrackedSounds;
            b = W.getSound(b);
            a.h[d] = b;
          }
        }
        y.localTrackedAssets.push(d);
        return y.currentTrackedSounds.h[d];
      };
      y.loadAnimateAtlas = function (a, b, c, d) {
        var e = false;
        var f = false;
        var k = false;
        if (c != null) {
          f = true;
          c = W.getText(c);
        }
        if (d != null) {
          e = true;
          d = W.getText(d);
        }
        if (typeof b == "string") {
          var r = b;
          for (var n = 0; n < 10;) {
            var g = n++;
            var za = "" + g;
            if (g == 0) {
              za = "";
            }
            if (!f) {
              c = y.getTextFromFile("images/" + r + "/spritemap" + za + ".json");
              if (c != null) {
                k = true;
                b = y.image("" + r + "/spritemap" + za);
                break;
              }
            } else if (y.fileExists("images/" + r + "/spritemap" + za + ".png", "IMAGE")) {
              k = true;
              b = y.image("" + r + "/spritemap" + za);
              break;
            }
          }
          if (!k) {
            b = y.image(r);
          }
          if (!e) {
            d = y.getTextFromFile("images/" + r + "/Animation.json");
          }
        }
        a.loadAtlasEx(b, c, d);
      };
      function Vf(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (d) {
          this.__array = [];
          if (c != null) {
            d = 0;
            for (var e = c.length; d < e;) {
              var f = d++;
              this.__array[f] = c[f];
            }
          }
        } else {
          if (c == null) {
            c = [];
          }
          this.__array = c;
        }
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      h["openfl._Vector.FloatVector"] = Vf;
      Vf.__name__ = "openfl._Vector.FloatVector";
      Vf.__interfaces__ = [la];
      Vf.prototype = {
        concat: function (a) {
          if (a == null) {
            return new Vf(0, false, this.__array.slice());
          } else if (a.__array.length > 0) {
            return new Vf(0, false, this.__array.concat(a.__array));
          } else {
            return new Vf(0, false, this.__array.slice());
          }
        },
        copy: function () {
          return new Vf(0, this.fixed, this.__array.slice());
        },
        get: function (a) {
          return this.__array[a];
        },
        insertAt: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            this.__array.splice(a, 0, b);
          }
        },
        push: function (a) {
          if (this.fixed) {
            return this.__array.length;
          } else {
            return this.__array.push(a);
          }
        },
        set: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            return this.__array[a] = b;
          } else {
            return b;
          }
        },
        splice: function (a, b) {
          return new Vf(0, false, this.__array.splice(a, b));
        },
        toJSON: function () {
          return this.__array;
        },
        get_length: function () {
          return this.__array.length;
        },
        set_length: function (a) {
          if (a != this.__array.length && !this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                var c = b++;
                this.__array[c] = 0;
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: Vf,
        __properties__: {
          set_length: "set_length",
          get_length: "get_length"
        }
      };
      function Qh() {}
      h["flixel.util.IFlxPooled"] = Qh;
      Qh.__name__ = "flixel.util.IFlxPooled";
      Qh.__isInterface__ = true;
      Qh.__interfaces__ = [B];
      Qh.prototype = {
        __class__: Qh
      };
      function Yo() {}
      h["flixel.util.IFlxPool"] = Yo;
      Yo.__name__ = "flixel.util.IFlxPool";
      Yo.__isInterface__ = true;
      function lh(a) {
        this._count = 0;
        this._pool = [];
        this._constructor = a;
      }
      h["flixel.util.FlxPool"] = lh;
      lh.__name__ = "flixel.util.FlxPool";
      lh.__interfaces__ = [Yo];
      lh.prototype = {
        get: function () {
          if (this._count == 0) {
            return this._constructor();
          } else {
            return this._pool[--this._count];
          }
        },
        put: function (a) {
          if (a != null) {
            var b = this._pool.indexOf(a);
            if (b == -1 || b >= this._count) {
              this.putHelper(a);
            }
          }
        },
        putUnsafe: function (a) {
          if (a != null) {
            this.putHelper(a);
          }
        },
        putHelper: function (a) {
          a.destroy();
          this._pool[this._count++] = a;
        },
        __class__: lh
      };
      function fa(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._weak = this._inPool = false;
        this.x = this.y = 0;
        this.set(a, b);
      }
      h["flixel.math.FlxBasePoint"] = fa;
      fa.__name__ = "flixel.math.FlxBasePoint";
      fa.__interfaces__ = [Qh];
      fa.prototype = {
        set: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.set_x(a);
          this.set_y(b);
          return this;
        },
        put: function () {
          if (!this._inPool) {
            this._inPool = true;
            this._weak = false;
            fa.pool.putUnsafe(this);
          }
        },
        destroy: function () {},
        set_x: function (a) {
          return this.x = a;
        },
        set_y: function (a) {
          return this.y = a;
        },
        __class__: fa,
        __properties__: {
          set_y: "set_y",
          set_x: "set_x"
        }
      };
      function Ha(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._weak = this._inPool = false;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
        this.width = c;
        this.height = d;
      }
      h["flixel.math.FlxRect"] = Ha;
      Ha.__name__ = "flixel.math.FlxRect";
      Ha.__interfaces__ = [Qh];
      Ha.prototype = {
        put: function () {
          if (!this._inPool) {
            this._inPool = true;
            this._weak = false;
            Ha._pool.putUnsafe(this);
          }
        },
        getRotatedBounds: function (a, b, c) {
          if (b == null) {
            var d = b = 0;
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = fa.pool.get().set(b, d);
            b._inPool = false;
            b._weak = true;
          }
          if (c == null) {
            d = Ha._pool.get();
            var e = 0;
            var f = 0;
            var k = 0;
            var r = 0;
            if (r == null) {
              r = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            d.x = e;
            d.y = f;
            d.width = k;
            d.height = r;
            c = d;
            c._inPool = false;
          }
          a %= 360;
          if (a == 0) {
            d = b;
            if (d._weak) {
              d.put();
            }
            e = this.x;
            f = this.y;
            k = this.width;
            r = this.height;
            if (r == null) {
              r = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.x = e;
            c.y = f;
            c.width = k;
            c.height = r;
            return c;
          }
          if (a < 0) {
            a += 360;
          }
          e = Math.PI / 180 * a;
          d = Math.cos(e);
          e = Math.sin(e);
          f = -b.x;
          k = -b.y;
          r = -b.x + this.width;
          var n = -b.y + this.height;
          if (a < 90) {
            c.x = this.x + b.x + d * f - e * n;
            c.y = this.y + b.y + e * f + d * k;
          } else if (a < 180) {
            c.x = this.x + b.x + d * r - e * n;
            c.y = this.y + b.y + e * f + d * n;
          } else if (a < 270) {
            c.x = this.x + b.x + d * r - e * k;
            c.y = this.y + b.y + e * r + d * n;
          } else {
            c.x = this.x + b.x + d * f - e * k;
            c.y = this.y + b.y + e * r + d * k;
          }
          a = Math.abs(d * this.height) + Math.abs(e * this.width);
          c.width = Math.abs(d * this.width) + Math.abs(e * this.height);
          c.height = a;
          d = b;
          if (d._weak) {
            d.put();
          }
          return c;
        },
        destroy: function () {},
        intersection: function (a, b) {
          if (b == null) {
            b = Ha._pool.get();
            var c = 0;
            var d = 0;
            var e = 0;
            var f = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
            b._inPool = false;
          }
          e = this.x < a.x ? a.x : this.x;
          var k = this.x + this.width > a.x + a.width ? a.x + a.width : this.x + this.width;
          if (k <= e) {
            if (a._weak && !a._inPool) {
              a._inPool = true;
              a._weak = false;
              Ha._pool.putUnsafe(a);
            }
            return b;
          }
          f = this.y < a.y ? a.y : this.y;
          var r = this.y + this.height > a.y + a.height ? a.y + a.height : this.y + this.height;
          if (r <= f) {
            if (a._weak && !a._inPool) {
              a._inPool = true;
              a._weak = false;
              Ha._pool.putUnsafe(a);
            }
            return b;
          }
          if (a._weak && !a._inPool) {
            a._inPool = true;
            a._weak = false;
            Ha._pool.putUnsafe(a);
          }
          c = e;
          d = f;
          e = k - e;
          f = r - f;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.x = c;
          b.y = d;
          b.width = e;
          b.height = f;
          return b;
        },
        __class__: Ha
      };
      function Zo(a, b, c, d, e, f) {
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 1;
        }
        this.a = a;
        this.b = b;
        this.c = c;
        this.d = d;
        this.tx = e;
        this.ty = f;
      }
      h["lime.math.Matrix3"] = Zo;
      Zo.__name__ = "lime.math.Matrix3";
      Zo.prototype = {
        __class__: Zo
      };
      function Aa(a, b, c, d, e, f) {
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 1;
        }
        this.a = a;
        this.b = b;
        this.c = c;
        this.d = d;
        this.tx = e;
        this.ty = f;
      }
      h["openfl.geom.Matrix"] = Aa;
      Aa.__name__ = "openfl.geom.Matrix";
      Aa.prototype = {
        clone: function () {
          return new Aa(this.a, this.b, this.c, this.d, this.tx, this.ty);
        },
        concat: function (a) {
          var b = this.a * a.a + this.b * a.c;
          this.b = this.a * a.b + this.b * a.d;
          this.a = b;
          b = this.c * a.a + this.d * a.c;
          this.d = this.c * a.b + this.d * a.d;
          this.c = b;
          b = this.tx * a.a + this.ty * a.c + a.tx;
          this.ty = this.tx * a.b + this.ty * a.d + a.ty;
          this.tx = b;
        },
        copyFrom: function (a) {
          this.a = a.a;
          this.b = a.b;
          this.c = a.c;
          this.d = a.d;
          this.tx = a.tx;
          this.ty = a.ty;
        },
        createGradientBox: function (a, b, c, d, e) {
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          this.a = a / 1638.4;
          this.d = b / 1638.4;
          if (c != 0) {
            var f = Math.cos(c);
            c = Math.sin(c);
            this.b = c * this.d;
            this.c = -c * this.a;
            this.a *= f;
            this.d *= f;
          } else {
            this.c = this.b = 0;
          }
          this.tx = d + a / 2;
          this.ty = e + b / 2;
        },
        equals: function (a) {
          if (a != null && this.tx == a.tx && this.ty == a.ty && this.a == a.a && this.b == a.b && this.c == a.c) {
            return this.d == a.d;
          } else {
            return false;
          }
        },
        identity: function () {
          this.a = 1;
          this.c = this.b = 0;
          this.d = 1;
          this.ty = this.tx = 0;
        },
        invert: function () {
          var a = this.a * this.d - this.b * this.c;
          if (a == 0) {
            this.a = this.b = this.c = this.d = 0;
            this.tx = -this.tx;
            this.ty = -this.ty;
          } else {
            a = 1 / a;
            var b = this.d * a;
            this.d = this.a * a;
            this.a = b;
            this.b *= -a;
            this.c *= -a;
            a = -this.a * this.tx - this.c * this.ty;
            this.ty = -this.b * this.tx - this.d * this.ty;
            this.tx = a;
          }
          return this;
        },
        rotate: function (a) {
          var b = Math.cos(a);
          a = Math.sin(a);
          var c = this.a * b - this.b * a;
          this.b = this.a * a + this.b * b;
          this.a = c;
          c = this.c * b - this.d * a;
          this.d = this.c * a + this.d * b;
          this.c = c;
          c = this.tx * b - this.ty * a;
          this.ty = this.tx * a + this.ty * b;
          this.tx = c;
        },
        scale: function (a, b) {
          this.a *= a;
          this.b *= b;
          this.c *= a;
          this.d *= b;
          this.tx *= a;
          this.ty *= b;
        },
        setTo: function (a, b, c, d, e, f) {
          this.a = a;
          this.b = b;
          this.c = c;
          this.d = d;
          this.tx = e;
          this.ty = f;
        },
        translate: function (a, b) {
          this.tx += a;
          this.ty += b;
        },
        __class__: Aa
      };
      function Nb(a, b, c, d, e, f, k, r) {
        if (r == null) {
          r = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 1;
        }
        if (a == null) {
          a = 1;
        }
        this.redMultiplier = a;
        this.greenMultiplier = b;
        this.blueMultiplier = c;
        this.alphaMultiplier = d;
        this.redOffset = e;
        this.greenOffset = f;
        this.blueOffset = k;
        this.alphaOffset = r;
      }
      h["openfl.geom.ColorTransform"] = Nb;
      Nb.__name__ = "openfl.geom.ColorTransform";
      Nb.prototype = {
        concat: function (a) {
          this.redOffset = a.redOffset * this.redMultiplier + this.redOffset;
          this.greenOffset = a.greenOffset * this.greenMultiplier + this.greenOffset;
          this.blueOffset = a.blueOffset * this.blueMultiplier + this.blueOffset;
          this.alphaOffset = a.alphaOffset * this.alphaMultiplier + this.alphaOffset;
          this.redMultiplier *= a.redMultiplier;
          this.greenMultiplier *= a.greenMultiplier;
          this.blueMultiplier *= a.blueMultiplier;
          this.alphaMultiplier *= a.alphaMultiplier;
        },
        __clone: function () {
          return new Nb(this.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier, this.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset);
        },
        __copyFrom: function (a) {
          this.redMultiplier = a.redMultiplier;
          this.greenMultiplier = a.greenMultiplier;
          this.blueMultiplier = a.blueMultiplier;
          this.alphaMultiplier = a.alphaMultiplier;
          this.redOffset = a.redOffset;
          this.greenOffset = a.greenOffset;
          this.blueOffset = a.blueOffset;
          this.alphaOffset = a.alphaOffset;
        },
        __combine: function (a) {
          this.redMultiplier *= a.redMultiplier;
          this.greenMultiplier *= a.greenMultiplier;
          this.blueMultiplier *= a.blueMultiplier;
          this.alphaMultiplier *= a.alphaMultiplier;
          this.redOffset += a.redOffset;
          this.greenOffset += a.greenOffset;
          this.blueOffset += a.blueOffset;
          this.alphaOffset += a.alphaOffset;
        },
        __identity: function () {
          this.alphaMultiplier = this.blueMultiplier = this.greenMultiplier = this.redMultiplier = 1;
          this.alphaOffset = this.blueOffset = this.greenOffset = this.redOffset = 0;
        },
        __invert: function () {
          this.redMultiplier = this.redMultiplier != 0 ? 1 / this.redMultiplier : 1;
          this.greenMultiplier = this.greenMultiplier != 0 ? 1 / this.greenMultiplier : 1;
          this.blueMultiplier = this.blueMultiplier != 0 ? 1 / this.blueMultiplier : 1;
          this.alphaMultiplier = this.alphaMultiplier != 0 ? 1 / this.alphaMultiplier : 1;
          this.redOffset = -this.redOffset;
          this.greenOffset = -this.greenOffset;
          this.blueOffset = -this.blueOffset;
          this.alphaOffset = -this.alphaOffset;
        },
        __equals: function (a, b) {
          if (a == null || this.redMultiplier != a.redMultiplier || this.greenMultiplier != a.greenMultiplier || this.blueMultiplier != a.blueMultiplier || !b && this.alphaMultiplier != a.alphaMultiplier || this.redOffset != a.redOffset || this.greenOffset != a.greenOffset || this.blueOffset != a.blueOffset) {
            return false;
          } else {
            return this.alphaOffset == a.alphaOffset;
          }
        },
        __isDefault: function (a) {
          if (a) {
            if (this.redMultiplier == 1 && this.greenMultiplier == 1 && this.blueMultiplier == 1 && this.redOffset == 0 && this.greenOffset == 0 && this.blueOffset == 0) {
              return this.alphaOffset == 0;
            } else {
              return false;
            }
          } else if (this.redMultiplier == 1 && this.greenMultiplier == 1 && this.blueMultiplier == 1 && this.alphaMultiplier == 1 && this.redOffset == 0 && this.greenOffset == 0 && this.blueOffset == 0) {
            return this.alphaOffset == 0;
          } else {
            return false;
          }
        },
        __setArrays: function (a, b) {
          a[0] = this.redMultiplier;
          a[1] = this.greenMultiplier;
          a[2] = this.blueMultiplier;
          a[3] = this.alphaMultiplier;
          b[0] = this.redOffset;
          b[1] = this.greenOffset;
          b[2] = this.blueOffset;
          b[3] = this.alphaOffset;
        },
        __toLimeColorMatrix: function () {
          if (Nb.__limeColorMatrix == null) {
            Nb.__limeColorMatrix = new Float32Array(20);
          }
          Nb.__limeColorMatrix[0] = this.redMultiplier;
          Nb.__limeColorMatrix[4] = this.redOffset / 255;
          Nb.__limeColorMatrix[6] = this.greenMultiplier;
          Nb.__limeColorMatrix[9] = this.greenOffset / 255;
          Nb.__limeColorMatrix[12] = this.blueMultiplier;
          Nb.__limeColorMatrix[14] = this.blueOffset / 255;
          Nb.__limeColorMatrix[18] = this.alphaMultiplier;
          Nb.__limeColorMatrix[19] = this.alphaOffset / 255;
          return Nb.__limeColorMatrix;
        },
        __class__: Nb
      };
      function Vb(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._helperPoint = new kb();
        this._helperMatrix = new Sc();
        var f = Ha._pool.get();
        var k = 0;
        var r = 0;
        var n = 0;
        var J = 0;
        if (J == null) {
          J = 0;
        }
        if (n == null) {
          n = 0;
        }
        if (r == null) {
          r = 0;
        }
        if (k == null) {
          k = 0;
        }
        f.x = k;
        f.y = r;
        f.width = n;
        f.height = J;
        f._inPool = false;
        this._bounds = f;
        this._scrollRect = new $a();
        this.initialZoom = 1;
        this.filters = null;
        k = f = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = fa.pool.get().set(f, k);
        f._inPool = false;
        this._point = f;
        this._fxShakeAxes = 17;
        this._fxFadeAlpha = this._fxShakeIntensity = this._fxShakeDuration = 0;
        this._fxFadeComplete = null;
        this._fxFadeIn = false;
        k = f = this._fxFadeDuration = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = fa.pool.get().set(f, k);
        f._inPool = false;
        this._scrollTarget = f;
        this._fxFlashAlpha = this._fxFadeColor = 0;
        this._fxFlashComplete = null;
        k = f = this._fxFlashColor = this._fxFlashDuration = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = fa.pool.get().set(f, k);
        f._inPool = false;
        this._flashOffset = f;
        this._flashPoint = new kb();
        this.filtersEnabled = true;
        k = f = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = fa.pool.get().set(f, k);
        f._inPool = false;
        this.followLead = f;
        this.antialiasing = false;
        this.color = -1;
        this.alpha = 1;
        this._useBlitMatrix = false;
        this._blitMatrix = new Sc();
        this.width = this.height = 0;
        this.pixelPerfectShake = null;
        this.flashSprite = new $a();
        this.useBgAlphaBlending = false;
        k = f = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = fa.pool.get().set(f, k);
        f._inPool = false;
        this.scroll = f;
        this.followLerp = 60 / g.updateFramerate;
        k = f = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = fa.pool.get().set(f, k);
        f._inPool = false;
        this.targetOffset = f;
        this.x = this.y = this.scaleX = this.scaleY = 0;
        Ea.call(this);
        this.set_x(a);
        this.set_y(b);
        this.set_width(c <= 0 ? g.width : c);
        this.set_height(d <= 0 ? g.height : d);
        this._flashRect = new ea(0, 0, this.width, this.height);
        this.flashSprite.addChild(this._scrollRect);
        this._scrollRect.set_scrollRect(new ea());
        if (this.pixelPerfectRender = g.renderBlit) {
          this.screen = new G();
          this.buffer = new T(this.width, this.height, true, 0);
          this.screen.set_pixels(this.buffer);
          a = this.screen.origin;
          a.set_x(0);
          a.set_y(0);
          this._flashBitmap = new Nc(this.buffer);
          this._scrollRect.addChild(this._flashBitmap);
          this._fill = new T(this.width, this.height, true, 0);
        } else {
          this.canvas = new $a();
          this._scrollRect.addChild(this.canvas);
        }
        this.set_color(-1);
        this.initialZoom = e == 0 ? Vb.defaultZoom : e;
        this.set_zoom(e);
        this.updateScrollRect();
        this.updateFlashOffset();
        this.updateFlashSpritePosition();
        this.updateInternalSpritePositions();
        this.bgColor = g.cameras.get_bgColor();
      }
      h["flixel.FlxCamera"] = Vb;
      Vb.__name__ = "flixel.FlxCamera";
      Vb.__super__ = Ea;
      Vb.prototype = q(Ea.prototype, {
        startQuadBatch: function (a, b, c, d, e, f) {
          if (e == null) {
            e = false;
          }
          if (c == null) {
            c = false;
          }
          var k = Od.blendToInt(d);
          if (this._currentDrawItem != null && this._currentDrawItem.type == vk.TILES && this._headTiles.graphics == a && this._headTiles.colored == b && this._headTiles.hasColorOffsets == c && this._headTiles.blending == k && this._headTiles.blend == d && this._headTiles.antialiasing == e && this._headTiles.shader == f) {
            return this._headTiles;
          }
          if (Vb._storageTilesHead != null) {
            var r = Vb._storageTilesHead;
            var n = Vb._storageTilesHead.nextTyped;
            r.reset();
            Vb._storageTilesHead = n;
          } else {
            r = new wk();
          }
          if (a.shader == null) {
            throw K.thrown("Attempted to queue an invalid FlxDrawItem, did you destroy a cached sprite?");
          }
          r.graphics = a;
          r.antialiasing = e;
          r.colored = b;
          r.hasColorOffsets = c;
          r.blending = k;
          r.blend = d;
          r.shader = f;
          r.nextTyped = this._headTiles;
          this._headTiles = r;
          if (this._headOfDrawStack == null) {
            this._headOfDrawStack = r;
          }
          if (this._currentDrawItem != null) {
            this._currentDrawItem.next = r;
          }
          return this._currentDrawItem = r;
        },
        clearDrawStack: function () {
          for (var a = this._headTiles, b; a != null;) {
            b = a.nextTyped;
            a.reset();
            a.nextTyped = Vb._storageTilesHead;
            Vb._storageTilesHead = a;
            a = b;
          }
          for (a = this._headTriangles; a != null;) {
            b = a.nextTyped;
            a.reset();
            a.nextTyped = Vb._storageTrianglesHead;
            Vb._storageTrianglesHead = a;
            a = b;
          }
          this._headTriangles = this._headTiles = this._headOfDrawStack = this._currentDrawItem = null;
        },
        render: function () {
          for (var a = this._headOfDrawStack; a != null;) {
            a.render(this);
            a = a.next;
          }
        },
        drawPixels: function (a, b, c, d, e, f, k) {
          if (f == null) {
            f = false;
          }
          if (g.renderBlit) {
            this._helperMatrix.copyFrom(c);
            if (this._useBlitMatrix) {
              this._helperMatrix.concat(this._blitMatrix);
              this.buffer.draw(b, this._helperMatrix, null, null, null, f || this.antialiasing);
            } else {
              this._helperMatrix.translate(-this.viewMarginX, -this.viewMarginY);
              this.buffer.draw(b, this._helperMatrix, null, e, null, f || this.antialiasing);
            }
          } else {
            b = d != null && af.hasRGBMultipliers(d);
            var r = d != null && af.hasRGBAOffsets(d);
            this.startQuadBatch(a.parent, b, r, e, f, k).addQuad(a, c, d);
          }
        },
        copyPixels: function (a, b, c, d, e, f, k, r) {
          if (k == null) {
            k = false;
          }
          if (g.renderBlit) {
            if (b != null) {
              if (this._useBlitMatrix) {
                this._helperMatrix.identity();
                this._helperMatrix.translate(d.x, d.y);
                this._helperMatrix.concat(this._blitMatrix);
                this.buffer.draw(b, this._helperMatrix, null, null, null, k || this.antialiasing);
              } else {
                this._helperPoint.x = d.x - (this.viewMarginX | 0);
                this._helperPoint.y = d.y - (this.viewMarginY | 0);
                this.buffer.copyPixels(b, c, this._helperPoint, null, null, true);
              }
            } else if (a != null) {
              a.paint(this.buffer, d, true);
            }
          } else {
            this._helperMatrix.identity();
            this._helperMatrix.translate(d.x + a.offset.x, d.y + a.offset.y);
            b = e != null && af.hasRGBMultipliers(e);
            c = e != null && af.hasRGBAOffsets(e);
            this.startQuadBatch(a.parent, b, c, f, k, r).addQuad(a, this._helperMatrix, e);
          }
        },
        destroy: function () {
          da.removeChild(this.flashSprite, this._scrollRect);
          if (g.renderBlit) {
            da.removeChild(this._scrollRect, this._flashBitmap);
            this.screen = da.destroy(this.screen);
            this._flashBitmap = this.buffer = null;
            this._fill = da.dispose(this._fill);
          } else {
            da.removeChild(this._scrollRect, this.canvas);
            if (this.canvas != null) {
              for (var a = 0, b = this.canvas.get_numChildren(); a < b;) {
                a++;
                this.canvas.removeChildAt(0);
              }
              this.canvas = null;
            }
            if (this._headOfDrawStack != null) {
              this.clearDrawStack();
            }
            this._helperPoint = this._helperMatrix = this._blitMatrix = null;
          }
          this._bounds = null;
          this.scroll = da.put(this.scroll);
          this.targetOffset = da.put(this.targetOffset);
          this.deadzone = da.put(this.deadzone);
          this._fxShakeComplete = this._fxFadeComplete = this._fxFlashComplete = this._flashPoint = this._flashRect = this._scrollRect = this.flashSprite = this.target = null;
          Ea.prototype.destroy.call(this);
        },
        update: function (a) {
          if (this.target != null) {
            this.updateFollow();
          }
          this.updateScroll();
          this.updateFlash(a);
          this.updateFade(a);
          this.flashSprite.set_filters(this.filtersEnabled ? this.filters : null);
          this.updateFlashSpritePosition();
          this.updateShake(a);
        },
        updateScroll: function () {
          this.bindScrollPos(this.scroll);
        },
        bindScrollPos: function (a) {
          var b = this.minScrollX == null ? null : this.minScrollX - (this.zoom - 1) * this.width / (this.zoom * 2);
          var c = this.maxScrollX == null ? null : this.maxScrollX + (this.zoom - 1) * this.width / (this.zoom * 2);
          var d = this.minScrollY == null ? null : this.minScrollY - (this.zoom - 1) * this.height / (this.zoom * 2);
          var e = this.maxScrollY == null ? null : this.maxScrollY + (this.zoom - 1) * this.height / (this.zoom * 2);
          var f = a.x;
          c = c != null ? c - this.width : null;
          b = b != null && f < b ? b : f;
          a.set_x(c != null && b > c ? c : b);
          f = a.y;
          c = e != null ? e - this.height : null;
          b = d != null && f < d ? d : f;
          a.set_y(c != null && b > c ? c : b);
          return a;
        },
        updateFollow: function () {
          if (this.deadzone == null) {
            this.target.getMidpoint(this._point);
            var a = this._point;
            var b = this.targetOffset;
            var c = b.x;
            var d = b.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.set_x(a.x + c);
            a.set_y(a.y + d);
            d = b;
            if (d._weak) {
              d.put();
            }
            a = this._scrollTarget;
            c = this._point.x - this.width * 0.5;
            d = this._point.y - this.height * 0.5;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.set_x(c);
            a.set_y(d);
          } else {
            a = this.target.x + this.targetOffset.x;
            c = this.target.y + this.targetOffset.y;
            if (this.style == xf.SCREEN_BY_SCREEN) {
              if (a >= this.scroll.x + (this.width - this.viewMarginX)) {
                this._scrollTarget.set_x(this._scrollTarget.x + (this.width - this.viewMarginX * 2));
              } else if (a + this.target.get_width() < this.scroll.x + this.viewMarginX) {
                this._scrollTarget.set_x(this._scrollTarget.x - (this.width - this.viewMarginX * 2));
              }
              if (c >= this.scroll.y + (this.height - this.viewMarginY)) {
                this._scrollTarget.set_y(this._scrollTarget.y + (this.height - this.viewMarginY * 2));
              } else if (c + this.target.get_height() < this.scroll.y + this.viewMarginY) {
                this._scrollTarget.set_y(this._scrollTarget.y - (this.height - this.viewMarginY * 2));
              }
              this.bindScrollPos(this._scrollTarget);
            } else {
              d = a - this.deadzone.x;
              if (this._scrollTarget.x > d) {
                this._scrollTarget.set_x(d);
              }
              d = a + this.target.get_width() - this.deadzone.x - this.deadzone.width;
              if (this._scrollTarget.x < d) {
                this._scrollTarget.set_x(d);
              }
              d = c - this.deadzone.y;
              if (this._scrollTarget.y > d) {
                this._scrollTarget.set_y(d);
              }
              d = c + this.target.get_height() - this.deadzone.y - this.deadzone.height;
              if (this._scrollTarget.y < d) {
                this._scrollTarget.set_y(d);
              }
            }
            if (this.target instanceof G) {
              if (this._lastTargetPosition == null) {
                c = this.target.x;
                d = this.target.y;
                if (d == null) {
                  d = 0;
                }
                if (c == null) {
                  c = 0;
                }
                a = c;
                if (d == null) {
                  d = 0;
                }
                if (a == null) {
                  a = 0;
                }
                b = fa.pool.get().set(a, d);
                b._inPool = false;
                this._lastTargetPosition = b;
              }
              this._scrollTarget.set_x(this._scrollTarget.x + (this.target.x - this._lastTargetPosition.x) * this.followLead.x);
              this._scrollTarget.set_y(this._scrollTarget.y + (this.target.y - this._lastTargetPosition.y) * this.followLead.y);
              this._lastTargetPosition.set_x(this.target.x);
              this._lastTargetPosition.set_y(this.target.y);
            }
          }
          if (this.followLerp >= 60 / g.updateFramerate) {
            a = this.scroll;
            b = this._scrollTarget;
            c = b.x;
            d = b.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.set_x(c);
            a.set_y(d);
            d = b;
            if (d._weak) {
              d.put();
            }
          } else {
            this.scroll.set_x(this.scroll.x + 60 / g.updateFramerate * this.followLerp * (this._scrollTarget.x - this.scroll.x));
            this.scroll.set_y(this.scroll.y + 60 / g.updateFramerate * this.followLerp * (this._scrollTarget.y - this.scroll.y));
          }
        },
        updateFlash: function (a) {
          if (this._fxFlashAlpha > 0) {
            this._fxFlashAlpha -= a / this._fxFlashDuration;
            if (this._fxFlashAlpha <= 0 && this._fxFlashComplete != null) {
              this._fxFlashComplete();
            }
          }
        },
        updateFade: function (a) {
          if (this._fxFadeDuration != 0) {
            if (this._fxFadeIn) {
              this._fxFadeAlpha -= a / this._fxFadeDuration;
              if (this._fxFadeAlpha <= 0) {
                this._fxFadeAlpha = 0;
                this.completeFade();
              }
            } else {
              this._fxFadeAlpha += a / this._fxFadeDuration;
              if (this._fxFadeAlpha >= 1) {
                this._fxFadeAlpha = 1;
                this.completeFade();
              }
            }
          }
        },
        completeFade: function () {
          this._fxFadeDuration = 0;
          if (this._fxFadeComplete != null) {
            this._fxFadeComplete();
          }
        },
        updateShake: function (a) {
          if (this._fxShakeDuration > 0) {
            this._fxShakeDuration -= a;
            if (this._fxShakeDuration <= 0) {
              if (this._fxShakeComplete != null) {
                this._fxShakeComplete();
              }
            } else {
              a = this.pixelPerfectShake == null ? this.pixelPerfectRender : this.pixelPerfectShake;
              var b = this._fxShakeAxes;
              if (b == 1 || b == 17) {
                b = g.random.float(-1, 1) * this._fxShakeIntensity * this.width;
                if (a) {
                  b = Math.round(b);
                }
                var c = this.flashSprite;
                c.set_x(c.get_x() + b * this.zoom * g.scaleMode.scale.x);
              }
              b = this._fxShakeAxes;
              if (b == 16 || b == 17) {
                b = g.random.float(-1, 1) * this._fxShakeIntensity * this.height;
                if (a) {
                  b = Math.round(b);
                }
                c = this.flashSprite;
                c.set_y(c.get_y() + b * this.zoom * g.scaleMode.scale.y);
              }
            }
          }
        },
        updateFlashSpritePosition: function () {
          if (this.flashSprite != null) {
            this.flashSprite.set_x(this.x * g.scaleMode.scale.x + this._flashOffset.x);
            this.flashSprite.set_y(this.y * g.scaleMode.scale.y + this._flashOffset.y);
          }
        },
        updateFlashOffset: function () {
          this._flashOffset.set_x(this.width * 0.5 * g.scaleMode.scale.x * this.initialZoom);
          this._flashOffset.set_y(this.height * 0.5 * g.scaleMode.scale.y * this.initialZoom);
        },
        updateScrollRect: function () {
          var a = this._scrollRect != null ? this._scrollRect.get_scrollRect() : null;
          if (a != null) {
            a.x = a.y = 0;
            a.width = this.width * this.initialZoom * g.scaleMode.scale.x;
            a.height = this.height * this.initialZoom * g.scaleMode.scale.y;
            this._scrollRect.set_scrollRect(a);
            this._scrollRect.set_x(a.width * -0.5);
            this._scrollRect.set_y(a.height * -0.5);
          }
        },
        updateInternalSpritePositions: function () {
          if (g.renderBlit) {
            if (this._flashBitmap != null) {
              this._flashBitmap.set_x(0);
              this._flashBitmap.set_y(0);
            }
          } else if (this.canvas != null) {
            this.canvas.set_x(this.width * -0.5 * (this.scaleX - this.initialZoom) * g.scaleMode.scale.x);
            this.canvas.set_y(this.height * -0.5 * (this.scaleY - this.initialZoom) * g.scaleMode.scale.y);
            this.canvas.set_scaleX(this.totalScaleX);
            this.canvas.set_scaleY(this.totalScaleY);
          }
        },
        follow: function (a, b, c) {
          if (b == null) {
            b = xf.LOCKON;
          }
          if (c == null) {
            c = 60 / g.updateFramerate;
          }
          this.style = b;
          this.target = a;
          this.set_followLerp(c);
          this._lastTargetPosition = da.put(this._lastTargetPosition);
          this.deadzone = da.put(this.deadzone);
          switch (b._hx_index) {
            case 0:
              c = b = 0;
              if (this.target != null) {
                b = this.target.get_width();
                c = this.target.get_height();
              }
              var d = (this.width - b) / 2;
              a = (this.height - c) / 2 - c * 0.25;
              var e = c;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ha._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 1:
              b = this.width / 8;
              c = this.height / 3;
              d = (this.width - b) / 2;
              a = (this.height - c) / 2 - c * 0.25;
              e = c;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ha._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 2:
              c = Math.max(this.width, this.height) / 4;
              d = (this.width - c) / 2;
              a = (this.height - c) / 2;
              e = b = c;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ha._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 3:
              c = Math.max(this.width, this.height) / 8;
              d = (this.width - c) / 2;
              a = (this.height - c) / 2;
              e = b = c;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ha._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 4:
              a = d = 0;
              b = this.width;
              e = this.height;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ha._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 5:
              this.deadzone = null;
          }
        },
        snapToTarget: function () {
          this.updateFollow();
          var a = this.scroll;
          var b = this._scrollTarget;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        flash: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (b == null) {
            b = 1;
          }
          if (a == null) {
            a = -1;
          }
          if (!!d || !(this._fxFlashAlpha > 0)) {
            this._fxFlashColor = a;
            if (b <= 0) {
              b = 0.000001;
            }
            this._fxFlashDuration = b;
            this._fxFlashComplete = c;
            this._fxFlashAlpha = 1;
          }
        },
        fade: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 1;
          }
          if (a == null) {
            a = -16777216;
          }
          if (!(this._fxFadeDuration > 0) || !!e) {
            this._fxFadeColor = a;
            if (b <= 0) {
              b = 0.000001;
            }
            this._fxFadeIn = c;
            this._fxFadeDuration = b;
            this._fxFadeComplete = d;
            this._fxFadeAlpha = this._fxFadeIn ? 0.999999 : 0.000001;
          }
        },
        shake: function (a, b, c, d, e) {
          if (d == null) {
            d = true;
          }
          if (b == null) {
            b = 0.5;
          }
          if (a == null) {
            a = 0.05;
          }
          if (e == null) {
            e = 17;
          }
          if (!!d || !(this._fxShakeDuration > 0)) {
            this._fxShakeIntensity = a;
            this._fxShakeDuration = b;
            this._fxShakeComplete = c;
            this._fxShakeAxes = e;
          }
        },
        fill: function (a, b, c, d) {
          if (c == null) {
            c = 1;
          }
          if (b == null) {
            b = true;
          }
          if (g.renderBlit) {
            if (b) {
              this._fill.fillRect(this._flashRect, a);
              this.buffer.copyPixels(this._fill, this._flashRect, this._flashPoint, null, null, b);
            } else {
              this.buffer.fillRect(this._flashRect, a);
            }
          } else if (c != 0) {
            b = d == null ? this.canvas.get_graphics() : d;
            b.beginFill(a, c);
            b.drawRect(this.viewMarginX - 1, this.viewMarginY - 1, this.width - this.viewMarginX * 2 + 2, this.height - this.viewMarginY * 2 + 2);
            b.endFill();
          }
        },
        drawFX: function () {
          if (this._fxFlashAlpha > 0) {
            var a = this._fxFlashColor >> 24 & 255;
            if (g.renderBlit) {
              this.fill((((a <= 0 ? 255 : a) * this._fxFlashAlpha | 0) << 24) + (this._fxFlashColor & 16777215));
            } else {
              this.fill(this._fxFlashColor & 16777215, true, (a <= 0 ? 255 : a) * this._fxFlashAlpha / 255, this.canvas.get_graphics());
            }
          }
          if (this._fxFadeAlpha > 0) {
            a = this._fxFadeColor >> 24 & 255;
            if (g.renderBlit) {
              this.fill((((a <= 0 ? 255 : a) * this._fxFadeAlpha | 0) << 24) + (this._fxFadeColor & 16777215));
            } else {
              this.fill(this._fxFadeColor & 16777215, true, (a <= 0 ? 255 : a) * this._fxFadeAlpha / 255, this.canvas.get_graphics());
            }
          }
        },
        checkResize: function () {
          if (g.renderBlit) {
            if (this.width != this.buffer.width || this.height != this.buffer.height) {
              var a = this.screen.graphic;
              this.buffer = new T(this.width, this.height, true, 0);
              this.screen.set_pixels(this.buffer);
              var b = this.screen.origin;
              b.set_x(0);
              b.set_y(0);
              this._flashBitmap.set_bitmapData(this.buffer);
              this._flashRect.width = this.width;
              this._flashRect.height = this.height;
              this._fill = da.dispose(this._fill);
              this._fill = new T(this.width, this.height, true, 0);
              g.bitmap.removeIfNoUse(a);
            }
            this._blitMatrix.identity();
            this._blitMatrix.translate(-this.viewMarginX, -this.viewMarginY);
            this._blitMatrix.scale(this.scaleX, this.scaleY);
            this._useBlitMatrix = this.scaleX < this.initialZoom || this.scaleY < this.initialZoom;
          }
        },
        setScale: function (a, b) {
          this.scaleX = a;
          this.scaleY = b;
          this.totalScaleX = this.scaleX * g.scaleMode.scale.x;
          this.totalScaleY = this.scaleY * g.scaleMode.scale.y;
          if (g.renderBlit) {
            this._blitMatrix.identity();
            this._blitMatrix.translate(-this.viewMarginX, -this.viewMarginY);
            this._blitMatrix.scale(this.scaleX, this.scaleY);
            if (this._useBlitMatrix = this.scaleX < this.initialZoom || this.scaleY < this.initialZoom) {
              this._flashBitmap.set_scaleX(this.initialZoom * g.scaleMode.scale.x);
              this._flashBitmap.set_scaleY(this.initialZoom * g.scaleMode.scale.y);
            } else {
              this._flashBitmap.set_scaleX(this.totalScaleX);
              this._flashBitmap.set_scaleY(this.totalScaleY);
            }
          }
          this.viewMarginX = this.width * 0.5 * (this.scaleX - this.initialZoom) / this.scaleX;
          this.viewMarginY = this.height * 0.5 * (this.scaleY - this.initialZoom) / this.scaleY;
          this.updateScrollRect();
          this.updateInternalSpritePositions();
          g.cameras.cameraResized.dispatch(this);
        },
        onResize: function () {
          this.updateFlashOffset();
          this.setScale(this.scaleX, this.scaleY);
        },
        getViewMarginRect: function (a) {
          if (a == null) {
            a = Ha._pool.get();
            var b = 0;
            var c = 0;
            var d = 0;
            var e = 0;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.x = b;
            a.y = c;
            a.width = d;
            a.height = e;
            a._inPool = false;
          }
          b = this.viewMarginX;
          c = this.viewMarginY;
          d = this.width - this.viewMarginX * 2;
          e = this.height - this.viewMarginY * 2;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.x = b;
          a.y = c;
          a.width = d;
          a.height = e;
          return a;
        },
        set_followLerp: function (a) {
          var b = 60 / g.updateFramerate;
          a = a < 0 ? 0 : a;
          return this.followLerp = b != null && a > b ? b : a;
        },
        set_width: function (a) {
          if (this.width != a && a > 0) {
            this.width = a;
            this.viewMarginX = this.width * 0.5 * (this.scaleX - this.initialZoom) / this.scaleX;
            this.updateFlashOffset();
            this.updateScrollRect();
            this.updateInternalSpritePositions();
            g.cameras.cameraResized.dispatch(this);
          }
          return a;
        },
        set_height: function (a) {
          if (this.height != a && a > 0) {
            this.height = a;
            this.viewMarginY = this.height * 0.5 * (this.scaleY - this.initialZoom) / this.scaleY;
            this.updateFlashOffset();
            this.updateScrollRect();
            this.updateInternalSpritePositions();
            g.cameras.cameraResized.dispatch(this);
          }
          return a;
        },
        set_zoom: function (a) {
          this.zoom = a == 0 ? Vb.defaultZoom : a;
          this.setScale(this.zoom, this.zoom);
          return this.zoom;
        },
        set_alpha: function (a) {
          var b = a < 0 ? 0 : a;
          this.alpha = b > 1 ? 1 : b;
          if (g.renderBlit) {
            this._flashBitmap.set_alpha(a);
          } else {
            this.canvas.set_alpha(a);
          }
          return a;
        },
        set_color: function (a) {
          this.color = a;
          if (g.renderBlit) {
            if (this._flashBitmap == null) {
              return a;
            }
            var b = this._flashBitmap.get_transform().get_colorTransform();
          } else {
            b = this.canvas.get_transform().get_colorTransform();
          }
          b.redMultiplier = (this.color >> 16 & 255) / 255;
          b.greenMultiplier = (this.color >> 8 & 255) / 255;
          b.blueMultiplier = (this.color & 255) / 255;
          if (g.renderBlit) {
            this._flashBitmap.get_transform().set_colorTransform(b);
          } else {
            this.canvas.get_transform().set_colorTransform(b);
          }
          return a;
        },
        set_x: function (a) {
          this.x = a;
          this.updateFlashSpritePosition();
          return a;
        },
        set_y: function (a) {
          this.y = a;
          this.updateFlashSpritePosition();
          return a;
        },
        set_visible: function (a) {
          if (this.flashSprite != null) {
            this.flashSprite.set_visible(a);
          }
          return this.visible = a;
        },
        get_camera: function () {
          throw K.thrown("don't reference camera.camera");
        },
        get_cameras: function () {
          throw K.thrown("don't reference camera.cameras");
        },
        set_cameras: function (a) {
          throw K.thrown("don't reference camera.cameras");
        },
        __class__: Vb,
        __properties__: q(Ea.prototype.__properties__, {
          set_color: "set_color",
          set_alpha: "set_alpha",
          set_zoom: "set_zoom",
          set_height: "set_height",
          set_width: "set_width",
          set_followLerp: "set_followLerp",
          set_y: "set_y",
          set_x: "set_x"
        })
      });
      function uk(a, b, c, d, e) {
        Vb.call(this, a, b, c, d, e);
      }
      h["backend.PsychCamera"] = uk;
      uk.__name__ = "backend.PsychCamera";
      uk.__super__ = Vb;
      uk.prototype = q(Vb.prototype, {
        update: function (a) {
          if (this.target != null) {
            this.updateFollowDelta(a);
          }
          this.updateScroll();
          this.updateFlash(a);
          this.updateFade(a);
          this.flashSprite.set_filters(this.filtersEnabled ? this.filters : null);
          this.updateFlashSpritePosition();
          this.updateShake(a);
        },
        updateFollowDelta: function (a) {
          if (a == null) {
            a = 0;
          }
          if (this.deadzone == null) {
            this.target.getMidpoint(this._point);
            var b = this._point;
            var c = this.targetOffset;
            var d = c.x;
            var e = c.y;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            b.set_x(b.x + d);
            b.set_y(b.y + e);
            e = c;
            if (e._weak) {
              e.put();
            }
            b = this._scrollTarget;
            d = this._point.x - this.width * 0.5;
            e = this._point.y - this.height * 0.5;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            b.set_x(d);
            b.set_y(e);
          } else {
            b = this.target.x + this.targetOffset.x;
            c = this.target.y + this.targetOffset.y;
            if (this.style == xf.SCREEN_BY_SCREEN) {
              if (b >= this.scroll.x + (this.width - this.viewMarginX)) {
                this._scrollTarget.set_x(this._scrollTarget.x + (this.width - this.viewMarginX * 2));
              } else if (b + this.target.get_width() < this.scroll.x + this.viewMarginX) {
                this._scrollTarget.set_x(this._scrollTarget.x - (this.width - this.viewMarginX * 2));
              }
              if (c >= this.scroll.y + (this.height - this.viewMarginY)) {
                this._scrollTarget.set_y(this._scrollTarget.y + (this.height - this.viewMarginY * 2));
              } else if (c + this.target.get_height() < this.scroll.y + this.viewMarginY) {
                this._scrollTarget.set_y(this._scrollTarget.y - (this.height - this.viewMarginY * 2));
              }
              this.bindScrollPos(this._scrollTarget);
            } else {
              e = b - this.deadzone.x;
              if (this._scrollTarget.x > e) {
                this._scrollTarget.set_x(e);
              }
              e = b + this.target.get_width() - this.deadzone.x - this.deadzone.width;
              if (this._scrollTarget.x < e) {
                this._scrollTarget.set_x(e);
              }
              e = c - this.deadzone.y;
              if (this._scrollTarget.y > e) {
                this._scrollTarget.set_y(e);
              }
              e = c + this.target.get_height() - this.deadzone.y - this.deadzone.height;
              if (this._scrollTarget.y < e) {
                this._scrollTarget.set_y(e);
              }
            }
            if (this.target instanceof G) {
              if (this._lastTargetPosition == null) {
                d = this.target.x;
                e = this.target.y;
                if (e == null) {
                  e = 0;
                }
                if (d == null) {
                  d = 0;
                }
                b = d;
                if (e == null) {
                  e = 0;
                }
                if (b == null) {
                  b = 0;
                }
                c = fa.pool.get().set(b, e);
                c._inPool = false;
                this._lastTargetPosition = c;
              }
              this._scrollTarget.set_x(this._scrollTarget.x + (this.target.x - this._lastTargetPosition.x) * this.followLead.x);
              this._scrollTarget.set_y(this._scrollTarget.y + (this.target.y - this._lastTargetPosition.y) * this.followLead.y);
              this._lastTargetPosition.set_x(this.target.x);
              this._lastTargetPosition.set_y(this.target.y);
            }
          }
          a = 1 - Math.exp(-a * this.followLerp);
          this.scroll.set_x(this.scroll.x + (this._scrollTarget.x - this.scroll.x) * a);
          this.scroll.set_y(this.scroll.y + (this._scrollTarget.y - this.scroll.y) * a);
        },
        set_followLerp: function (a) {
          return this.followLerp = a;
        },
        __class__: uk
      });
      function jg(a) {
        this.hits = 0;
        this.noteSplash = true;
        this.score = 350;
        this.ratingMod = 1;
        this.hitWindow = 0;
        this.name = this.image = "";
        this.image = this.name = a;
        this.hitWindow = 0;
        try {
          this.hitWindow = ma.field(C.data, a + "Window");
        } catch (b) {
          a = K.caught(b);
          g.log.advanced(a, Ba.ERROR, true);
        }
      }
      h["backend.Rating"] = jg;
      jg.__name__ = "backend.Rating";
      jg.loadDefault = function () {
        var a = [new jg("sick")];
        var b = new jg("good");
        b.ratingMod = 0.67;
        b.score = 200;
        b.noteSplash = false;
        a.push(b);
        b = new jg("bad");
        b.ratingMod = 0.34;
        b.score = 100;
        b.noteSplash = false;
        a.push(b);
        b = new jg("shit");
        b.ratingMod = 0;
        b.score = 50;
        b.noteSplash = false;
        a.push(b);
        return a;
      };
      jg.prototype = {
        __class__: jg
      };
      function Pd() {}
      h["backend.Song"] = Pd;
      Pd.__name__ = "backend.Song";
      Pd.onLoadJson = function (a) {
        if (a.gfVersion == null) {
          a.gfVersion = a.player3;
          a.player3 = null;
        }
        if (a.events == null) {
          a.events = [];
          for (var b = 0, c = a.notes.length; b < c;) {
            var d = b++;
            var e = 0;
            d = a.notes[d].sectionNotes;
            for (var f = d.length; e < f;) {
              var k = d[e];
              if (k[1] < 0) {
                a.events.push([k[0], [[k[2], k[3], k[4]]]]);
                M.remove(d, k);
                f = d.length;
              } else {
                ++e;
              }
            }
          }
        }
      };
      Pd.loadFromJson = function (a, b) {
        var c = null;
        var d = new sa("[~&\\\\;:<>#]", "");
        var e = new sa("[.,'\"%?!]", "");
        d = d.split(w.replace(b, " ", "-")).join("-");
        b = e.split(d).join("").toLowerCase();
        d = new sa("[~&\\\\;:<>#]", "");
        e = new sa("[.,'\"%?!]", "");
        d = d.split(w.replace(a, " ", "-")).join("-");
        e = e.split(d).join("").toLowerCase();
        if (c == null) {
          y.getPath("data/" + (b + "/" + e) + ".json", "TEXT", null);
          c = w.trim(oa.getText(y.getPath("data/" + (b + "/" + e) + ".json", "TEXT", null)));
        }
        while (!w.endsWith(c, "}")) {
          c = M.substr(c, 0, c.length - 1);
        }
        c = Pd.parseJSONshit(c);
        if (a != "events") {
          Ae.loadDirectory(c);
        }
        Pd.onLoadJson(c);
        return c;
      };
      Pd.parseJSONshit = function (a) {
        return JSON.parse(a).song;
      };
      function Ae() {}
      h["backend.StageData"] = Ae;
      Ae.__name__ = "backend.StageData";
      Ae.dummy = function () {
        return {
          directory: "",
          defaultZoom: 0.9,
          isPixelStage: false,
          stageUI: "normal",
          boyfriend: [770, 100],
          girlfriend: [400, 130],
          opponent: [100, 100],
          hide_girlfriend: false,
          camera_boyfriend: [0, 0],
          camera_opponent: [0, 0],
          camera_girlfriend: [0, 0],
          camera_speed: 1
        };
      };
      Ae.loadDirectory = function (a) {
        if (a.stage != null) {
          a = a.stage;
        } else if (a.song != null) {
          switch (w.replace(a.song.toLowerCase(), " ", "-")) {
            case "cocoa":
            case "eggnog":
              a = "mall";
              break;
            case "high":
            case "milf":
            case "satin-panties":
              a = "limo";
              break;
            case "monster":
            case "south":
            case "spookeez":
              a = "spooky";
              break;
            case "blammed":
            case "philly":
            case "philly-nice":
            case "pico":
              a = "philly";
              break;
            case "roses":
            case "senpai":
              a = "school";
              break;
            case "guns":
            case "stress":
            case "ugh":
              a = "tank";
              break;
            case "thorns":
              a = "schoolEvil";
              break;
            case "winter-horrorland":
              a = "mallEvil";
              break;
            default:
              a = "stage";
          }
        } else {
          a = "stage";
        }
        a = Ae.getStageFile(a);
        Ae.forceNextDirectory = a == null ? "" : a.directory;
      };
      Ae.getStageFile = function (a) {
        a = "stages/" + a + ".json";
        if (a == null) {
          a = "";
        }
        a = "assets/shared/" + a;
        if (W.exists(a)) {
          a = W.getText(a);
        } else {
          return null;
        }
        return Rh.parse(a);
      };
      Ae.vanillaSongStage = function (a) {
        switch (a) {
          case "cocoa":
          case "eggnog":
            return "mall";
          case "high":
          case "milf":
          case "satin-panties":
            return "limo";
          case "monster":
          case "south":
          case "spookeez":
            return "spooky";
          case "blammed":
          case "philly":
          case "philly-nice":
          case "pico":
            return "philly";
          case "roses":
          case "senpai":
            return "school";
          case "guns":
          case "stress":
          case "ugh":
            return "tank";
          case "thorns":
            return "schoolEvil";
          case "winter-horrorland":
            return "mallEvil";
        }
        return "stage";
      };
      function ob(a, b) {
        this.folder = "";
        this.songs = a.songs;
        this.weekCharacters = a.weekCharacters;
        this.weekBackground = a.weekBackground;
        this.weekBefore = a.weekBefore;
        this.storyName = a.storyName;
        this.weekName = a.weekName;
        this.freeplayColor = a.freeplayColor;
        this.startUnlocked = a.startUnlocked;
        this.hiddenUntilUnlocked = a.hiddenUntilUnlocked;
        this.hideStoryMode = a.hideStoryMode;
        this.hideFreeplay = a.hideFreeplay;
        this.difficulties = a.difficulties;
        this.fileName = b;
      }
      h["backend.WeekData"] = ob;
      ob.__name__ = "backend.WeekData";
      ob.createWeekFile = function () {
        return {
          songs: [["Bopeebo", "dad", [146, 113, 253]], ["Fresh", "dad", [146, 113, 253]], ["Dad Battle", "dad", [146, 113, 253]]],
          weekCharacters: ["dad", "bf", "gf"],
          weekBackground: "stage",
          weekBefore: "tutorial",
          storyName: "Your New Week",
          weekName: "Custom Week",
          freeplayColor: [146, 113, 253],
          startUnlocked: true,
          hiddenUntilUnlocked: false,
          hideStoryMode: false,
          hideFreeplay: false,
          difficulties: ""
        };
      };
      ob.reloadWeekFiles = function (a) {
        if (a == null) {
          a = false;
        }
        ob.weeksList = [];
        ob.weeksLoaded.h = Object.create(null);
        var b = ["assets/shared/"];
        var c = "weeks/weekList.txt";
        if (c == null) {
          c = "";
        }
        c = "assets/shared/" + c;
        var d = null;
        if (W.exists(c)) {
          d = W.getText(c);
        }
        if (d != null) {
          var e = w.trim(d).split("\n");
          c = 0;
          for (d = e.length; c < d;) {
            var f = c++;
            e[f] = w.trim(e[f]);
          }
        } else {
          e = [];
        }
        c = 0;
        for (d = e.length; c < d;) {
          f = c++;
          for (var k = 0, r = b.length; k < r;) {
            var n = k++;
            n = b[n] + "weeks/" + e[f] + ".json";
            if (!Object.prototype.hasOwnProperty.call(ob.weeksLoaded.h, e[f])) {
              n = ob.getWeekFile(n);
              if (n != null) {
                n = new ob(n, e[f]);
                if (n != null && (a == null || a && !n.hideStoryMode || !a && !n.hideFreeplay)) {
                  ob.weeksLoaded.h[e[f]] = n;
                  ob.weeksList.push(e[f]);
                }
              }
            }
          }
        }
      };
      ob.getWeekFile = function (a) {
        var b = null;
        if (W.exists(a)) {
          b = oa.getText(a);
        }
        if (b != null && b.length > 0) {
          return JSON.parse(b);
        } else {
          return null;
        }
      };
      ob.getWeekFileName = function () {
        return ob.weeksList[z.storyWeek];
      };
      ob.getCurrentWeek = function () {
        return ob.weeksLoaded.h[ob.weeksList[z.storyWeek]];
      };
      ob.setDirectoryFromWeek = function (a) {
        Wd.currentModDirectory = "";
        if (a != null && a.folder != null && a.folder.length > 0) {
          Wd.currentModDirectory = a.folder;
        }
      };
      ob.prototype = {
        __class__: ob
      };
      function mh(a) {
        this._animations = new V();
        this.timeScale = 1;
        this.frameIndex = -1;
        this._sprite = a;
      }
      h["flixel.animation.FlxAnimationController"] = mh;
      mh.__name__ = "flixel.animation.FlxAnimationController";
      mh.__interfaces__ = [B];
      mh.prototype = {
        update: function (a) {
          if (this._curAnim != null) {
            this._curAnim.update(a * this.timeScale * g.animationTimeScale);
          } else if (this._prerotated != null) {
            this._prerotated.set_angle(this._sprite.angle);
          }
        },
        copyFrom: function (a) {
          this.destroyAnimations();
          var b = a._animations.h;
          var c = Object.keys(b);
          for (var d = c.length, e = 0; e < d;) {
            var f = b[c[e++]];
            this.add(f.name, f.frames, f.frameRate, f.looped, f.flipX, f.flipY);
          }
          if (a._prerotated != null) {
            this.createPrerotated();
          }
          if (a.get_name() != null) {
            this.set_name(a.get_name());
          }
          this.set_frameIndex(a.frameIndex);
          return this;
        },
        createPrerotated: function (a) {
          this.destroyAnimations();
          if (a == null) {
            a = this;
          }
          this._prerotated = new xk(a, a._sprite.bakedRotationAngle);
          this._prerotated.set_angle(this._sprite.angle);
        },
        destroyAnimations: function () {
          this.clearAnimations();
          this.clearPrerotated();
        },
        destroy: function () {
          this.destroyAnimations();
          this._sprite = this.callback = this._animations = null;
        },
        getFrameDuration: function (a) {
          return this._sprite.frames.frames[a].duration;
        },
        clearPrerotated: function () {
          if (this._prerotated != null) {
            this._prerotated.destroy();
          }
          this._prerotated = null;
        },
        clearAnimations: function () {
          if (this._animations != null) {
            var a;
            var b = Object.keys(this._animations.h);
            for (var c = b.length, d = 0; d < c;) {
              a = b[d++];
              a = this._animations.h[a];
              if (a != null) {
                a.destroy();
              }
            }
          }
          this._animations = new V();
          this._curAnim = null;
        },
        add: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = 30;
          }
          if (this._sprite.get_numFrames() == 0) {
            g.log.advanced("Could not create animation: \"" + a + "\", this sprite has no frames", Ba.WARNING, true);
          } else {
            var k = b;
            for (var r = false, n = k.length; n-- >= 0;) {
              if (k[n] >= this._sprite.get_numFrames()) {
                r = true;
                if (k == b) {
                  k = b.slice();
                }
                k.splice(n, 1);
              }
            }
            if (k.length > 0) {
              b = new Sh(this, a, k, c, d, e, f);
              this._animations.h[a] = b;
              if (r) {
                g.log.advanced("Could not add frames above " + (this._sprite.get_numFrames() - 1) + " to animation: \"" + a + "\"", Ba.WARNING, true);
              }
            } else {
              g.log.advanced("Could not create animation: \"" + a + "\", no valid frames were given", Ba.WARNING, true);
            }
          }
        },
        remove: function (a) {
          var b = this._animations.h[a];
          if (b != null) {
            var c = this._animations;
            if (Object.prototype.hasOwnProperty.call(c.h, a)) {
              delete c.h[a];
            }
            b.destroy();
          }
        },
        addByIndices: function (a, b, c, d, e, f, k, r) {
          if (r == null) {
            r = false;
          }
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = true;
          }
          if (e == null) {
            e = 30;
          }
          if (this._sprite.frames != null) {
            var n = [];
            this.byIndicesHelper(n, b, c, d);
            if (n.length > 0) {
              b = new Sh(this, a, n, e, f, k, r);
              this._animations.h[a] = b;
            }
          }
        },
        findSpriteFrame: function (a, b, c) {
          var d = this._sprite.frames.frames;
          for (var e = 0, f = d.length; e < f;) {
            var k = e++;
            var r = d[k].name;
            if (w.startsWith(r, a) && w.endsWith(r, c) && H.parseInt(r.substring(a.length, r.length - c.length)) == b) {
              return k;
            }
          }
          return -1;
        },
        addByPrefix: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = 30;
          }
          if (this._sprite.frames != null) {
            var k = [];
            this.findByPrefix(k, b);
            if (k.length > 0) {
              var r = [];
              this.byPrefixHelper(r, k, b);
              b = new Sh(this, a, r, c, d, e, f);
              this._animations.h[a] = b;
            } else {
              g.log.advanced("Could not create animation: \"" + a + "\", no frames were found with the prefix \"" + b + "\" ", Ba.WARNING, true);
            }
          }
        },
        play: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          if (a == null) {
            if (this._curAnim != null) {
              this._curAnim.stop();
            }
            this._curAnim = null;
          }
          if (a == null || this._animations.h[a] == null) {
            g.log.advanced("No animation called \"" + a + "\"", Ba.WARNING, true);
          } else {
            var e = false;
            var f = false;
            if (this._curAnim != null && a != this._curAnim.name) {
              e = this._curAnim.flipX;
              f = this._curAnim.flipY;
              this._curAnim.stop();
            }
            this._curAnim = this._animations.h[a];
            this._curAnim.play(b, c, d);
            if (e != this._curAnim.flipX || f != this._curAnim.flipY) {
              this._sprite.dirty = true;
            }
          }
        },
        byIndicesHelper: function (a, b, c, d) {
          for (var e = 0; e < c.length;) {
            var f = c[e];
            ++e;
            f = this.findSpriteFrame(b, f, d);
            if (f != -1) {
              a.push(f);
            }
          }
        },
        byPrefixHelper: function (a, b, c) {
          var d = b[0].name;
          var e = d.indexOf(".", c.length);
          d = d.substring(e == -1 ? d.length : e, d.length);
          pb.sortHelper(b, c.length, d == null ? 0 : d.length, true);
          for (c = 0; c < b.length;) {
            d = b[c];
            ++c;
            a.push(this._sprite.frames.frames.indexOf(d));
          }
        },
        findByPrefix: function (a, b, c) {
          c = 0;
          for (var d = this._sprite.frames.frames; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.name != null && w.startsWith(e.name, b)) {
              a.push(e);
            }
          }
          this.removeInvalidFrames(a);
        },
        removeInvalidFrames: function (a) {
          var b = [];
          for (var c = a.length; c-- > 0;) {
            if (a[c].parent.shader == null) {
              b.unshift(a.splice(c, 1)[0]);
            }
          }
          return b;
        },
        set_frameIndex: function (a) {
          if (this._sprite.frames != null && this._sprite.get_numFrames() > 0) {
            a %= this._sprite.get_numFrames();
            this._sprite.set_frame(this._sprite.frames.frames[a]);
            this.frameIndex = a;
            if (this.callback != null) {
              this.callback(this._curAnim != null ? this._curAnim.name : null, this._curAnim != null ? this._curAnim.curFrame : this.frameIndex, this.frameIndex);
            }
          }
          return this.frameIndex;
        },
        get_name: function () {
          var a = null;
          if (this._curAnim != null) {
            a = this._curAnim.name;
          }
          return a;
        },
        set_name: function (a) {
          this.play(a);
          return a;
        },
        get_finished: function () {
          var a = true;
          if (this._curAnim != null) {
            a = this._curAnim.finished;
          }
          return a;
        },
        __class__: mh,
        __properties__: {
          get_finished: "get_finished",
          set_name: "set_name",
          get_name: "get_name",
          set_frameIndex: "set_frameIndex"
        }
      };
      function nh(a) {
        this.followGlobalSpeed = true;
        mh.call(this, a);
      }
      h["backend.animation.PsychAnimationController"] = nh;
      nh.__name__ = "backend.animation.PsychAnimationController";
      nh.__super__ = mh;
      nh.prototype = q(mh.prototype, {
        update: function (a) {
          if (this._curAnim != null) {
            var b = this.timeScale;
            if (this.followGlobalSpeed) {
              b *= g.animationTimeScale;
            }
            this._curAnim.update(a * b);
          } else if (this._prerotated != null) {
            this._prerotated.set_angle(this._sprite.angle);
          }
        },
        __class__: nh
      });
      function nn() {
        this.firstFrame = false;
        this.cutsceneTime = 0;
        this.music = null;
        this.objects = [];
        this.endTime = 0;
        this.finishCallback = this.finishCallback2 = this.onStart = null;
        this.timedEvents = [];
        var a = this;
        Ea.call(this);
        this.timer(0, function () {
          if (a.music != null) {
            var b = g.sound;
            var c = y.returnSound("music", a.music, null);
            b.playMusic(c, 0, false);
            b = g.sound.music;
            if (b._channel == null) {
              b.play();
            }
            if (b.fadeTween != null) {
              b.fadeTween.cancel();
            }
            b.fadeTween = ka.num(0, 1, 1, {
              onComplete: null
            }, l(b, b.volumeTween));
          }
          if (a.onStart != null) {
            a.onStart();
          }
        });
        z.instance.add(this);
      }
      h["cutscenes.CutsceneHandler"] = nn;
      nn.__name__ = "cutscenes.CutsceneHandler";
      nn.__super__ = Ea;
      nn.prototype = q(Ea.prototype, {
        update: function (a) {
          Ea.prototype.update.call(this, a);
          if (g.game._state == z.instance && this.firstFrame) {
            this.cutsceneTime += a;
            if (this.endTime <= this.cutsceneTime) {
              this.finishCallback();
              if (this.finishCallback2 != null) {
                this.finishCallback2();
              }
              a = 0;
              for (var b = this.objects; a < b.length;) {
                var c = b[a];
                ++a;
                c.kill();
                z.instance.remove(c);
                c.destroy();
              }
              this.kill();
              this.destroy();
              z.instance.remove(this);
            }
            while (this.timedEvents.length > 0 && this.timedEvents[0][0] <= this.cutsceneTime) {
              this.timedEvents[0][1]();
              this.timedEvents.splice(0, 1);
            }
          } else {
            this.firstFrame = true;
          }
        },
        timer: function (a, b) {
          this.timedEvents.push([a, b]);
          this.timedEvents.sort(l(this, this.sortByTime));
        },
        sortByTime: function (a, b) {
          a = a[0];
          b = b[0];
          var c = 0;
          if (a < b) {
            c = -1;
          } else if (a > b) {
            c = 1;
          }
          return c;
        },
        __class__: nn
      });
      function hc(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        var e = Ha._pool.get();
        var f = 0;
        var k = 0;
        var r = 0;
        var n = 0;
        if (n == null) {
          n = 0;
        }
        if (r == null) {
          r = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        e.x = f;
        e.y = k;
        e.width = r;
        e.height = n;
        e._inPool = false;
        this._rect = e;
        f = e = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = fa.pool.get().set(e, f);
        e._inPool = false;
        this._point = e;
        this.path = null;
        this.allowCollisions = 4369;
        this.touching = this.wasTouching = 0;
        this.health = 1;
        this.maxAngular = 10000;
        this.angularVelocity = this.angularAcceleration = this.angularDrag = 0;
        this.immovable = false;
        this.moves = hc.defaultMoves;
        this.angle = 0;
        this.pixelPerfectPosition = true;
        this.x = this.y = 0;
        Ea.call(this);
        this.set_x(a);
        this.set_y(b);
        this.set_width(c);
        this.set_height(d);
        this.initVars();
      }
      h["flixel.FlxObject"] = hc;
      hc.__name__ = "flixel.FlxObject";
      hc.__super__ = Ea;
      hc.prototype = q(Ea.prototype, {
        initVars: function () {
          this.flixelType = 1;
          var a = this.x;
          var b = this.y;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          this.last = b;
          b = a = 1;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          this.scrollFactor = b;
          this.pixelPerfectPosition = hc.defaultPixelPerfectPosition;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          this.velocity = b;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          this.acceleration = b;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          this.drag = b;
          b = a = 10000;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          this.maxVelocity = b;
        },
        destroy: function () {
          Ea.prototype.destroy.call(this);
          this.velocity = da.put(this.velocity);
          this.acceleration = da.put(this.acceleration);
          this.drag = da.put(this.drag);
          this.maxVelocity = da.put(this.maxVelocity);
          this.scrollFactor = da.put(this.scrollFactor);
          this.last = da.put(this.last);
          this._point = da.put(this._point);
          this._rect = da.put(this._rect);
        },
        update: function (a) {
          var b = this.last;
          var c = this.x;
          var d = this.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          if (this.path != null && this.path.active) {
            this.path.update(a);
          }
          if (this.moves) {
            this.updateMotion(a);
          }
          this.wasTouching = this.touching;
          this.touching = 0;
        },
        updateMotion: function (a) {
          var b = (yk.computeVelocity(this.angularVelocity, this.angularAcceleration, this.angularDrag, this.maxAngular, a) - this.angularVelocity) * 0.5;
          this.angularVelocity += b;
          this.set_angle(this.angle + this.angularVelocity * a);
          this.angularVelocity += b;
          b = (yk.computeVelocity(this.velocity.x, this.acceleration.x, this.drag.x, this.maxVelocity.x, a) - this.velocity.x) * 0.5;
          this.velocity.set_x(this.velocity.x + b);
          var c = this.velocity.x * a;
          this.velocity.set_x(this.velocity.x + b);
          this.set_x(this.x + c);
          b = (yk.computeVelocity(this.velocity.y, this.acceleration.y, this.drag.y, this.maxVelocity.y, a) - this.velocity.y) * 0.5;
          this.velocity.set_y(this.velocity.y + b);
          c = this.velocity.y * a;
          this.velocity.set_y(this.velocity.y + b);
          this.set_y(this.y + c);
        },
        draw: function () {},
        overlaps: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          var d = Ra.resolveGroup(a);
          if (d != null) {
            var e = this;
            var f = b;
            var k = c;
            return d.any(function (a) {
              return e.overlaps(a, f, k);
            });
          }
          if (a.flixelType == 3) {
            return a.overlaps(this, b, c);
          }
          if (!b) {
            if (a.x + a.get_width() > this.x && a.x < this.x + this.get_width() && a.y + a.get_height() > this.y) {
              return a.y < this.y + this.get_height();
            } else {
              return false;
            }
          }
          if (c == null) {
            c = g.camera;
          }
          b = a.getScreenPosition(null, c);
          this.getScreenPosition(this._point, c);
          if (b.x + a.get_width() > this._point.x && b.x < this._point.x + this.get_width() && b.y + a.get_height() > this._point.y) {
            return b.y < this._point.y + this.get_height();
          } else {
            return false;
          }
        },
        overlapsPoint: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          if (!b) {
            if (a.x >= this.x && a.x < this.x + this.get_width() && a.y >= this.y) {
              return a.y < this.y + this.get_height();
            } else {
              return false;
            }
          }
          if (c == null) {
            c = g.camera;
          }
          b = a.x - c.scroll.x;
          var d = a.y - c.scroll.y;
          this.getScreenPosition(this._point, c);
          if (a._weak) {
            a.put();
          }
          if (b >= this._point.x && b < this._point.x + this.get_width() && d >= this._point.y) {
            return d < this._point.y + this.get_height();
          } else {
            return false;
          }
        },
        getScreenPosition: function (a, b) {
          if (a == null) {
            var c = 0;
            var d = 0;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a = fa.pool.get().set(c, d);
            a._inPool = false;
          }
          if (b == null) {
            b = g.camera;
          }
          c = this.x;
          d = this.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (this.pixelPerfectPosition) {
            a.set_x(Math.floor(a.x));
            a.set_y(Math.floor(a.y));
          }
          c = b.scroll.x * this.scrollFactor.x;
          d = b.scroll.y * this.scrollFactor.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(a.x - c);
          a.set_y(a.y - d);
          return a;
        },
        getPosition: function (a) {
          if (a == null) {
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a = fa.pool.get().set(b, c);
            a._inPool = false;
          }
          b = this.x;
          c = this.y;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          return a;
        },
        getMidpoint: function (a) {
          if (a == null) {
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a = fa.pool.get().set(b, c);
            a._inPool = false;
          }
          b = this.x + this.get_width() * 0.5;
          c = this.y + this.get_height() * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          return a;
        },
        isOnScreen: function (a) {
          if (a == null) {
            a = g.camera;
          }
          this.getScreenPosition(this._point, a);
          var b = this._point;
          var c = this.get_width();
          var d = this.get_height();
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a = b.x + c > a.viewMarginX && b.x < a.width - a.viewMarginX && b.y + d > a.viewMarginY && b.y < a.height - a.viewMarginY;
          if (b._weak) {
            b.put();
          }
          return a;
        },
        isPixelPerfectRender: function (a) {
          if (a == null) {
            a = g.camera;
          }
          if (this.pixelPerfectRender == null) {
            return a.pixelPerfectRender;
          } else {
            return this.pixelPerfectRender;
          }
        },
        setPosition: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.set_x(a);
          this.set_y(b);
        },
        toString: function () {
          var a = this.x;
          var b = Wc._pool.get();
          b.label = "x";
          b.value = a;
          a = this.y;
          var c = Wc._pool.get();
          c.label = "y";
          c.value = a;
          a = this.get_width();
          var d = Wc._pool.get();
          d.label = "w";
          d.value = a;
          a = this.get_height();
          var e = Wc._pool.get();
          e.label = "h";
          e.value = a;
          a = this.visible;
          var f = Wc._pool.get();
          f.label = "visible";
          f.value = a;
          a = this.velocity;
          var k = Wc._pool.get();
          k.label = "velocity";
          k.value = a;
          return Yb.getDebugString([b, c, d, e, f, k]);
        },
        set_x: function (a) {
          return this.x = a;
        },
        set_y: function (a) {
          return this.y = a;
        },
        set_width: function (a) {
          return this.width = a;
        },
        set_height: function (a) {
          return this.height = a;
        },
        get_width: function () {
          return this.width;
        },
        get_height: function () {
          return this.height;
        },
        set_angle: function (a) {
          return this.angle = a;
        },
        set_moves: function (a) {
          return this.moves = a;
        },
        set_immovable: function (a) {
          return this.immovable = a;
        },
        set_allowCollisions: function (a) {
          return this.allowCollisions = a;
        },
        __class__: hc,
        __properties__: q(Ea.prototype.__properties__, {
          set_allowCollisions: "set_allowCollisions",
          set_immovable: "set_immovable",
          set_moves: "set_moves",
          set_angle: "set_angle",
          set_height: "set_height",
          get_height: "get_height",
          set_width: "set_width",
          get_width: "get_width",
          set_y: "set_y",
          set_x: "set_x"
        })
      });
      function G(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._angleChanged = true;
        this._cosAngle = 1;
        this._sinAngle = 0;
        this._facingHorizontalMult = this._facingVerticalMult = 1;
        this.useColorTransform = false;
        this.color = 16777215;
        this.flipX = this.flipY = false;
        this.alpha = 1;
        this.frameWidth = this.frameHeight = this.bakedRotationAngle = 0;
        this.dirty = true;
        this.antialiasing = G.defaultAntialiasing;
        this.useFramePixels = true;
        hc.call(this, a, b);
        this.set_useFramePixels(g.renderBlit);
        if (c != null) {
          this.loadGraphic(c);
        }
      }
      h["flixel.FlxSprite"] = G;
      G.__name__ = "flixel.FlxSprite";
      G.__super__ = hc;
      G.prototype = q(hc.prototype, {
        initVars: function () {
          hc.prototype.initVars.call(this);
          this.animation = new mh(this);
          this._flashPoint = new kb();
          this._flashRect = new ea();
          this._flashRect2 = new ea();
          this._flashPointZero = new kb();
          var a = 0;
          var b = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          this.offset = b;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          this.origin = b;
          b = a = 1;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          this.scale = b;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          this._halfSize = b;
          this._matrix = new Sc();
          this.colorTransform = new Nb();
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          this._scaledOrigin = b;
        },
        destroy: function () {
          hc.prototype.destroy.call(this);
          this.animation = da.destroy(this.animation);
          this.offset = da.put(this.offset);
          this.origin = da.put(this.origin);
          this.scale = da.put(this.scale);
          this._halfSize = da.put(this._halfSize);
          this._scaledOrigin = da.put(this._scaledOrigin);
          this.framePixels = da.dispose(this.framePixels);
          this.colorTransform = this._matrix = this._flashPointZero = this._flashRect2 = this._flashRect = this._flashPoint = null;
          this.set_blend(null);
          this.set_frames(null);
          this.set_graphic(null);
          this._frame = da.destroy(this._frame);
          this._frameGraphic = da.destroy(this._frameGraphic);
          this.shader = null;
        },
        loadGraphic: function (a, b, c, d, e, f) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          a = g.bitmap.add(a, e, f);
          if (a == null) {
            return this;
          }
          if (c == 0) {
            c = b ? a.height : a.width;
            if (c > a.width) {
              c = a.width;
            }
          } else if (c > a.width) {
            g.log.advanced("frameWidth:" + c + " is larger than the graphic's width:" + a.width, Ba.WARNING, true);
          }
          if (d == 0) {
            d = b ? c : a.height;
            if (d > a.height) {
              d = a.height;
            }
          } else if (d > a.height) {
            g.log.advanced("frameHeight:" + d + " is larger than the graphic's height:" + a.height, Ba.WARNING, true);
          }
          if (b) {
            b = c;
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            d = fa.pool.get().set(b, d);
            d._inPool = false;
            this.set_frames(Ig.fromGraphic(a, d));
          } else {
            this.set_frames(a.get_imageFrame());
          }
          return this;
        },
        makeGraphic: function (a, b, c, d, e) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = -1;
          }
          a = g.bitmap.create(a, b, c, d, e);
          this.set_frames(a.get_imageFrame());
          return this;
        },
        graphicLoaded: function () {},
        setGraphicSize: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (!(a <= 0) || !(b <= 0)) {
            var c = a / this.frameWidth;
            var d = b / this.frameHeight;
            var e = this.scale;
            var f = c;
            var k = d;
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            e.set_x(f);
            e.set_y(k);
            if (a <= 0) {
              this.scale.set_x(d);
            } else if (b <= 0) {
              this.scale.set_y(c);
            }
          }
        },
        updateHitbox: function () {
          this.set_width(Math.abs(this.scale.x) * this.frameWidth);
          this.set_height(Math.abs(this.scale.y) * this.frameHeight);
          var a = this.offset;
          var b = (this.get_width() - this.frameWidth) * -0.5;
          var c = (this.get_height() - this.frameHeight) * -0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          a = this.origin;
          b = this.frameWidth * 0.5;
          c = this.frameHeight * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
        },
        resetHelpers: function () {
          if (this.frame != null) {
            this.frameWidth = this.frame.sourceSize.x | 0;
            this.frameHeight = this.frame.sourceSize.y | 0;
          }
          var a = this._halfSize;
          var b = this.frameWidth * 0.5;
          var c = this.frameHeight * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this._flashRect.x = 0;
          this._flashRect.y = 0;
          this._flashRect.width = this.frameWidth;
          this._flashRect.height = this.frameHeight;
          this.set_width(this.frameWidth);
          this.set_height(this.frameHeight);
          this._flashRect2.x = 0;
          this._flashRect2.y = 0;
          if (this.graphic != null) {
            this._flashRect2.width = this.graphic.width;
            this._flashRect2.height = this.graphic.height;
          }
          a = this.origin;
          b = this.frameWidth * 0.5;
          c = this.frameHeight * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          if (g.renderBlit) {
            this.dirty = true;
            this.updateFramePixels();
          }
        },
        update: function (a) {
          hc.prototype.update.call(this, a);
          this.updateAnimation(a);
        },
        updateAnimation: function (a) {
          this.animation.update(a);
        },
        checkEmptyFrame: function () {
          if (this._frame == null) {
            this.loadGraphic("flixel/images/logo/default.png");
          } else if (this.graphic != null && this.graphic.shader == null) {
            var a = this.get_width();
            var b = this.get_height();
            g.log.advanced("Cannot render a destroyed graphic, the placeholder image will be used instead", Ba.ERROR, true);
            this.loadGraphic("flixel/images/logo/default.png");
            this.set_width(a);
            this.set_height(b);
          }
        },
        draw: function () {
          this.checkEmptyFrame();
          if (this.alpha != 0 && this._frame.type != 2) {
            if (this.dirty) {
              this.calcFrame(this.useFramePixels);
            }
            for (var a = 0, b = this.getCamerasLegacy(); a < b.length;) {
              var c = b[a];
              ++a;
              if (c.visible && c.exists && this.isOnScreen(c)) {
                if (this.isSimpleRender(c)) {
                  this.drawSimple(c);
                } else {
                  this.drawComplex(c);
                }
              }
            }
          }
        },
        drawSimple: function (a) {
          var b = this.getScreenPosition(this._point, a);
          var c = this.offset;
          var d = c.x;
          var e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(b.x - d);
          b.set_y(b.y - e);
          if (c._weak) {
            c.put();
          }
          if (this.isPixelPerfectRender(a)) {
            b = this._point;
            b.set_x(Math.floor(b.x));
            b.set_y(Math.floor(b.y));
          }
          b = this._point;
          c = this._flashPoint;
          if (c == null) {
            c = new kb();
          }
          c.x = b.x;
          c.y = b.y;
          a.copyPixels(this._frame, this.framePixels, this._flashRect, this._flashPoint, this.colorTransform, this.blend, this.antialiasing);
        },
        drawComplex: function (a) {
          var b = this.flipX != this._frame.flipX;
          var c = this.flipY != this._frame.flipY;
          this._frame.prepareMatrix(this._matrix, 0, this.animation._curAnim != null ? b != this.animation._curAnim.flipX : b, this.animation._curAnim != null ? c != this.animation._curAnim.flipY : c);
          this._matrix.translate(-this.origin.x, -this.origin.y);
          this._matrix.scale(this.scale.x, this.scale.y);
          if (this.bakedRotationAngle <= 0 && (this._angleChanged && (b = Math.PI / 180 * this.angle, this._sinAngle = Math.sin(b), this._cosAngle = Math.cos(b), this._angleChanged = false), this.angle != 0)) {
            b = this._matrix;
            c = this._cosAngle;
            var d = this._sinAngle;
            var e = b.a * c - b.b * d;
            b.b = b.a * d + b.b * c;
            b.a = e;
            e = b.c * c - b.d * d;
            b.d = b.c * d + b.d * c;
            b.c = e;
            e = b.tx * c - b.ty * d;
            b.ty = b.tx * d + b.ty * c;
            b.tx = e;
          }
          b = this.getScreenPosition(this._point, a);
          c = this.offset;
          d = c.x;
          e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(b.x - d);
          b.set_y(b.y - e);
          b = c;
          if (b._weak) {
            b.put();
          }
          b = this._point;
          d = this.origin.x;
          e = this.origin.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(b.x + d);
          b.set_y(b.y + e);
          this._matrix.translate(this._point.x, this._point.y);
          if (this.isPixelPerfectRender(a)) {
            this._matrix.tx = Math.floor(this._matrix.tx);
            this._matrix.ty = Math.floor(this._matrix.ty);
          }
          a.drawPixels(this._frame, this.framePixels, this._matrix, this.colorTransform, this.blend, this.antialiasing, this.shader);
        },
        stamp: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.drawFrame();
          if (this.graphic == null || a.graphic == null) {
            throw K.thrown("Cannot stamp to or from a FlxSprite with no graphics.");
          }
          var d = a.framePixels;
          if (this.isSimpleRenderBlit()) {
            this._flashPoint.x = b + this.frame.frame.x;
            this._flashPoint.y = c + this.frame.frame.y;
            this._flashRect2.width = d.width;
            this._flashRect2.height = d.height;
            this.graphic.bitmap.copyPixels(d, this._flashRect2, this._flashPoint, null, null, true);
            this._flashRect2.width = this.graphic.bitmap.width;
            this._flashRect2.height = this.graphic.bitmap.height;
          } else {
            this._matrix.identity();
            this._matrix.translate(-a.origin.x, -a.origin.y);
            this._matrix.scale(a.scale.x, a.scale.y);
            if (a.angle != 0) {
              this._matrix.rotate(Math.PI / 180 * a.angle);
            }
            this._matrix.translate(b + this.frame.frame.x + a.origin.x, c + this.frame.frame.y + a.origin.y);
            this.graphic.bitmap.draw(d, this._matrix, null, a.blend, null, a.antialiasing);
          }
          if (g.renderBlit) {
            this.dirty = true;
            this.calcFrame();
          }
        },
        drawFrame: function (a) {
          if (a == null) {
            a = false;
          }
          if (g.renderBlit) {
            if (a || this.dirty) {
              this.dirty = true;
              this.calcFrame();
            }
          } else {
            this.dirty = true;
            this.calcFrame(true);
          }
        },
        centerOffsets: function (a) {
          if (a == null) {
            a = false;
          }
          this.offset.set_x((this.frameWidth - this.get_width()) * 0.5);
          this.offset.set_y((this.frameHeight - this.get_height()) * 0.5);
          if (a) {
            this.set_x(this.x + this.offset.x);
            this.set_y(this.y + this.offset.y);
          }
        },
        updateColorTransform: function () {
          if (this.colorTransform != null) {
            if (this.useColorTransform = this.alpha != 1 || this.color != 16777215) {
              af.setMultipliers(this.colorTransform, (this.color >> 16 & 255) / 255, (this.color >> 8 & 255) / 255, (this.color & 255) / 255, this.alpha);
            } else {
              af.setMultipliers(this.colorTransform, 1, 1, 1, 1);
            }
            this.dirty = true;
          }
        },
        pixelsOverlapPoint: function (a, b, c) {
          if (b == null) {
            b = 255;
          }
          a = this.getPixelAt(a, c);
          if (a != null) {
            return (a >> 24 & 255) * this.alpha >= b;
          } else {
            return false;
          }
        },
        getPixelAt: function (a, b) {
          this.transformWorldToPixels(a, b, this._point);
          if (this._point.x >= 0 && this._point.x <= this.frameWidth && this._point.y >= 0 && this._point.y <= this.frameHeight) {
            return this.updateFramePixels().getPixel32(this._point.x | 0, this._point.y | 0);
          } else {
            return null;
          }
        },
        transformWorldToPixels: function (a, b, c) {
          if (b == null) {
            b = g.camera;
          }
          var d = a.x - b.scroll.x;
          var e = a.y - b.scroll.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          d = fa.pool.get().set(d, e);
          d._inPool = false;
          d._weak = true;
          if (a._weak) {
            a.put();
          }
          return this.transformScreenToPixels(d, b, c);
        },
        transformScreenToPixels: function (a, b, c) {
          c = this.getScreenPosition(c, b);
          b = a.x;
          var d = a.y;
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          c.set_x(c.x - b);
          c.set_y(c.y - d);
          c.set_x(c.x * -1);
          c.set_y(c.y * -1);
          var e = this.offset;
          b = e.x;
          d = e.y;
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          c.set_x(c.x + b);
          c.set_y(c.y + d);
          b = e;
          if (b._weak) {
            b.put();
          }
          e = this.origin;
          b = e.x;
          d = e.y;
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          c.set_x(c.x - b);
          c.set_y(c.y - d);
          b = e;
          if (b._weak) {
            b.put();
          }
          b = 1 / this.scale.x;
          d = 1 / this.scale.y;
          if (d == null) {
            d = b;
          }
          c.set_x(c.x * b);
          c.set_y(c.y * d);
          b = (zk.get_radians(c) * (180 / Math.PI) - this.angle) * (Math.PI / 180);
          d = Math.sqrt(c.x * c.x + c.y * c.y);
          c.set_x(d * Math.cos(b));
          c.set_y(d * Math.sin(b));
          e = this.origin;
          b = e.x;
          d = e.y;
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          c.set_x(c.x + b);
          c.set_y(c.y + d);
          b = e;
          if (b._weak) {
            b.put();
          }
          b = a;
          if (b._weak) {
            b.put();
          }
          return c;
        },
        calcFrame: function (a) {
          if (a == null) {
            a = false;
          }
          this.checkEmptyFrame();
          if (!g.renderTile || !!a) {
            this.updateFramePixels();
          }
        },
        updateFramePixels: function () {
          if (this._frame == null || !this.dirty) {
            return this.framePixels;
          }
          if (g.renderTile && this._frameGraphic != null) {
            this.dirty = false;
            return this.framePixels;
          }
          var a = this.flipX != this._frame.flipX;
          a = this.animation._curAnim != null ? a != this.animation._curAnim.flipX : a;
          var b = this.flipY != this._frame.flipY;
          b = this.animation._curAnim != null ? b != this.animation._curAnim.flipY : b;
          this.framePixels = a || b || this._frame.type != 0 ? this._frame.paintRotatedAndFlipped(this.framePixels, this._flashPointZero, 0, a, b, false, true) : this._frame.paint(this.framePixels, this._flashPointZero, false, true);
          if (this.useColorTransform) {
            this.framePixels.colorTransform(this._flashRect, this.colorTransform);
          }
          if (g.renderTile && this.useFramePixels) {
            this._frameGraphic = da.destroy(this._frameGraphic);
            this._frameGraphic = cc.fromBitmapData(this.framePixels, false, null, false);
            this._frame = this._frameGraphic.get_imageFrame().get_frame().copyTo(this._frame);
          }
          this.dirty = false;
          return this.framePixels;
        },
        getGraphicMidpoint: function (a) {
          if (a == null) {
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a = fa.pool.get().set(b, c);
            a._inPool = false;
          }
          b = this.x + this.frameWidth * 0.5 * this.scale.x;
          c = this.y + this.frameHeight * 0.5 * this.scale.y;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          return a;
        },
        isOnScreen: function (a) {
          if (a == null) {
            a = g.camera;
          }
          var b = this.getScreenBounds(this._rect, a);
          a = b.x + b.width > a.viewMarginX && b.x < a.width - a.viewMarginX && b.y + b.height > a.viewMarginY && b.y < a.height - a.viewMarginY;
          if (b._weak && !b._inPool) {
            b._inPool = true;
            b._weak = false;
            Ha._pool.putUnsafe(b);
          }
          return a;
        },
        isSimpleRender: function (a) {
          if (g.renderTile) {
            return false;
          } else {
            return this.isSimpleRenderBlit(a);
          }
        },
        isSimpleRenderBlit: function (a) {
          var b = (this.angle == 0 || this.bakedRotationAngle > 0) && this.scale.x == 1 && this.scale.y == 1 && this.blend == null;
          return b = b && (a != null ? this.isPixelPerfectRender(a) : this.pixelPerfectRender);
        },
        getScreenBounds: function (a, b) {
          if (a == null) {
            a = Ha._pool.get();
            var c = 0;
            var d = 0;
            var e = 0;
            var f = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.x = c;
            a.y = d;
            a.width = e;
            a.height = f;
            a._inPool = false;
          }
          if (b == null) {
            b = g.camera;
          }
          a.x = this.x;
          a.y = this.y;
          if (this.pixelPerfectPosition) {
            a.x = Math.floor(a.x);
            a.y = Math.floor(a.y);
            a.width = Math.floor(a.width);
            a.height = Math.floor(a.height);
          }
          f = this._scaledOrigin;
          c = this.origin.x * this.scale.x;
          d = this.origin.y * this.scale.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          f.set_x(c);
          f.set_y(d);
          a.x += -(b.scroll.x * this.scrollFactor.x | 0) - this.offset.x + this.origin.x - this._scaledOrigin.x;
          a.y += -(b.scroll.y * this.scrollFactor.y | 0) - this.offset.y + this.origin.y - this._scaledOrigin.y;
          if (this.isPixelPerfectRender(b)) {
            a.x = Math.floor(a.x);
            a.y = Math.floor(a.y);
            a.width = Math.floor(a.width);
            a.height = Math.floor(a.height);
          }
          f = this.frameHeight * Math.abs(this.scale.y);
          a.width = this.frameWidth * Math.abs(this.scale.x);
          a.height = f;
          return a.getRotatedBounds(this.angle, this._scaledOrigin, a);
        },
        get_pixels: function () {
          if (this.graphic == null) {
            return null;
          } else {
            return this.graphic.bitmap;
          }
        },
        set_pixels: function (a) {
          var b = g.bitmap.findKeyForBitmap(a);
          if (b == null) {
            b = g.bitmap.getUniqueKey();
            this.set_graphic(g.bitmap.add(a, false, b));
          } else {
            this.set_graphic(g.bitmap._cache.h[b]);
          }
          this.set_frames(this.graphic.get_imageFrame());
          return a;
        },
        set_frame: function (a) {
          this.frame = a;
          if (this.frame != null) {
            if (this.frame != null) {
              this.frameWidth = this.frame.sourceSize.x | 0;
              this.frameHeight = this.frame.sourceSize.y | 0;
            }
            a = this._halfSize;
            var b = this.frameWidth * 0.5;
            var c = this.frameHeight * 0.5;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            this._flashRect.x = 0;
            this._flashRect.y = 0;
            this._flashRect.width = this.frameWidth;
            this._flashRect.height = this.frameHeight;
            this.dirty = true;
          } else if (this.frames != null && this.frames.frames != null && this.get_numFrames() > 0) {
            this.frame = this.frames.frames[0];
            this.dirty = true;
          } else {
            return null;
          }
          if (g.renderTile) {
            this._frameGraphic = da.destroy(this._frameGraphic);
          }
          this._frame = this.clipRect != null ? this.frame.clipTo(this.clipRect, this._frame) : this.frame.copyTo(this._frame);
          return this.frame;
        },
        set_alpha: function (a) {
          if (this.alpha == a) {
            return a;
          }
          a = a < 0 ? 0 : a;
          this.alpha = a > 1 ? 1 : a;
          this.updateColorTransform();
          return this.alpha;
        },
        set_color: function (a) {
          if (this.color == a) {
            return a;
          }
          this.color = a;
          this.updateColorTransform();
          return this.color;
        },
        set_angle: function (a) {
          var b = this.angle != a;
          a = hc.prototype.set_angle.call(this, a);
          if (b) {
            this._angleChanged = true;
            this.animation.update(0);
          }
          return a;
        },
        set_blend: function (a) {
          return this.blend = a;
        },
        set_graphic: function (a) {
          if (this.graphic != a) {
            if (a != null) {
              a.incrementUseCount();
            }
            if (this.graphic != null) {
              this.graphic.decrementUseCount();
            }
            this.graphic = a;
          }
          return a;
        },
        set_clipRect: function (a) {
          if (a != null) {
            a.x = Math.round(a.x);
            a.y = Math.round(a.y);
            a.width = Math.round(a.width);
            a.height = Math.round(a.height);
            this.clipRect = a;
          } else {
            this.clipRect = null;
          }
          if (this.frames != null) {
            this.set_frame(this.frames.frames[this.animation.frameIndex]);
          }
          return a;
        },
        set_frames: function (a) {
          if (this.animation != null) {
            this.animation.destroyAnimations();
          }
          if (a != null) {
            this.set_graphic(a.parent);
            this.frames = a;
            this.set_frame(this.frames.frames[0]);
            this.resetHelpers();
            this.bakedRotationAngle = 0;
            this.animation.set_frameIndex(0);
            this.graphicLoaded();
          } else {
            this.frames = null;
            this.set_frame(null);
            this.set_graphic(null);
          }
          return a;
        },
        get_numFrames: function () {
          if (this.frames != null) {
            return this.frames.frames.length;
          } else {
            return 0;
          }
        },
        set_flipX: function (a) {
          if (g.renderTile) {
            this._facingHorizontalMult = a ? -1 : 1;
          }
          this.dirty = this.flipX != a || this.dirty;
          return this.flipX = a;
        },
        set_flipY: function (a) {
          if (g.renderTile) {
            this._facingVerticalMult = a ? -1 : 1;
          }
          this.dirty = this.flipY != a || this.dirty;
          return this.flipY = a;
        },
        set_antialiasing: function (a) {
          return this.antialiasing = a;
        },
        set_useFramePixels: function (a) {
          if (g.renderTile) {
            if (a != this.useFramePixels) {
              this.useFramePixels = a;
              this.set_frame(this.frame);
              if (a) {
                this.updateFramePixels();
              }
            }
            return a;
          } else {
            return this.useFramePixels = true;
          }
        },
        __class__: G,
        __properties__: q(hc.prototype.__properties__, {
          set_clipRect: "set_clipRect",
          set_color: "set_color",
          set_blend: "set_blend",
          set_flipY: "set_flipY",
          set_flipX: "set_flipX",
          set_alpha: "set_alpha",
          set_graphic: "set_graphic",
          set_frames: "set_frames",
          get_numFrames: "get_numFrames",
          set_frame: "set_frame",
          set_pixels: "set_pixels",
          get_pixels: "get_pixels",
          set_antialiasing: "set_antialiasing",
          set_useFramePixels: "set_useFramePixels"
        })
      });
      function db(a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.directAlpha = this._skipTransformChildren = false;
        this.initGroup(c);
        G.call(this, a, b);
      }
      h["flixel.group.FlxTypedSpriteGroup"] = db;
      db.__name__ = "flixel.group.FlxTypedSpriteGroup";
      db.__super__ = G;
      db.prototype = q(G.prototype, {
        transformChildren_flixel_math_FlxRect: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_flixel_math_FlxPoint: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_openfl_display_BlendMode: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_Array_flixel_FlxCamera: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        multiTransformChildren_Float: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            var c = a.length;
            if (!(c > b.length)) {
              var d;
              for (var e = 0, f = this.group.members; e < f.length;) {
                var k = f[e];
                ++e;
                if (k != null && k.exists) {
                  for (var r = 0, n = c; r < n;) {
                    var g = r++;
                    d = a[g];
                    d(k, b[g]);
                  }
                }
              }
            }
          }
        },
        transformChildren_Bool: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_Int: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_Float: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        initGroup: function (a) {
          this.set_group(new Ra(a));
        },
        initVars: function () {
          this.flixelType = 4;
          this.offset = new oh(l(this, this.offsetCallback));
          this.origin = new oh(l(this, this.originCallback));
          this.scale = new oh(l(this, this.scaleCallback));
          this.scrollFactor = new oh(l(this, this.scrollFactorCallback));
          var a = this.scale;
          var b = 1;
          var c = 1;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          a = this.scrollFactor;
          c = b = 1;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          c = fa.pool.get().set(b, c);
          c._inPool = false;
          this.velocity = c;
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          c = fa.pool.get().set(b, c);
          c._inPool = false;
          this.acceleration = c;
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          c = fa.pool.get().set(b, c);
          c._inPool = false;
          this.drag = c;
          c = b = 10000;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a = b;
          if (c == null) {
            c = 0;
          }
          if (a == null) {
            a = 0;
          }
          c = fa.pool.get().set(a, c);
          c._inPool = false;
          this.maxVelocity = c;
        },
        destroy: function () {
          this.offset = da.destroy(this.offset);
          this.origin = da.destroy(this.origin);
          this.scale = da.destroy(this.scale);
          this.scrollFactor = da.destroy(this.scrollFactor);
          this.group = da.destroy(this.group);
          G.prototype.destroy.call(this);
        },
        isOnScreen: function (a) {
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.exists && d.visible && d.isOnScreen(a)) {
              return true;
            }
          }
          return false;
        },
        overlapsPoint: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          var d = false;
          for (var e = 0, f = this.group.members; e < f.length;) {
            var k = f[e];
            ++e;
            if (k != null && k.exists && k.visible) {
              d = d || k.overlapsPoint(a, b, c);
            }
          }
          return d;
        },
        pixelsOverlapPoint: function (a, b, c) {
          if (b == null) {
            b = 255;
          }
          var d = false;
          for (var e = 0, f = this.group.members; e < f.length;) {
            var k = f[e];
            ++e;
            if (k != null && k.exists && k.visible) {
              d = d || k.pixelsOverlapPoint(a, b, c);
            }
          }
          return d;
        },
        update: function (a) {
          this.group.update(a);
          if (this.path != null && this.path.active) {
            this.path.update(a);
          }
          if (this.moves) {
            this.updateMotion(a);
          }
        },
        draw: function () {
          this.group.draw();
        },
        add: function (a) {
          this.preAdd(a);
          return this.group.add(a);
        },
        preAdd: function (a) {
          a.set_x(a.x + this.x);
          a.set_y(a.y + this.y);
          a.set_alpha(a.alpha * this.alpha);
          var b = a.scrollFactor;
          var c = this.scrollFactor;
          var d = c.x;
          var e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(d);
          b.set_y(e);
          b = c;
          if (b._weak) {
            b.put();
          }
          a.set_cameras(this._cameras);
          if (this.clipRect != null) {
            b = this.clipRect;
            if (b == null) {
              a.set_clipRect(null);
            } else {
              e = b.x - a.x + this.x;
              var f = b.y - a.y + this.y;
              c = b.width;
              d = b.height;
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              b = Ha._pool.get();
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              b.x = e;
              b.y = f;
              b.width = c;
              b.height = d;
              b._inPool = false;
              a.set_clipRect(b);
            }
          }
        },
        remove: function (a, b) {
          if (b == null) {
            b = false;
          }
          a.set_x(a.x - this.x);
          a.set_y(a.y - this.y);
          a.set_cameras(null);
          return this.group.remove(a, b);
        },
        kill: function () {
          this._skipTransformChildren = true;
          G.prototype.kill.call(this);
          this._skipTransformChildren = false;
          this.group.kill();
        },
        revive: function () {
          this._skipTransformChildren = true;
          G.prototype.revive.call(this);
          this._skipTransformChildren = false;
          this.group.revive();
        },
        setPosition: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          var c = a - this.x;
          var d = b - this.y;
          this.multiTransformChildren_Float([l(this, this.xTransform), l(this, this.yTransform)], [c, d]);
          this._skipTransformChildren = true;
          this.set_x(a);
          this.set_y(b);
          this._skipTransformChildren = false;
        },
        set_cameras: function (a) {
          if (this._cameras != a) {
            this.transformChildren_Array_flixel_FlxCamera(l(this, this.camerasTransform), a);
          }
          return G.prototype.set_cameras.call(this, a);
        },
        set_exists: function (a) {
          if (this.exists != a) {
            this.transformChildren_Bool(l(this, this.existsTransform), a);
          }
          return G.prototype.set_exists.call(this, a);
        },
        set_visible: function (a) {
          if (this.exists && this.visible != a) {
            this.transformChildren_Bool(l(this, this.visibleTransform), a);
          }
          return G.prototype.set_visible.call(this, a);
        },
        set_active: function (a) {
          if (this.exists && this.active != a) {
            this.transformChildren_Bool(l(this, this.activeTransform), a);
          }
          return G.prototype.set_active.call(this, a);
        },
        set_alive: function (a) {
          if (this.alive != a) {
            this.transformChildren_Bool(l(this, this.aliveTransform), a);
          }
          return G.prototype.set_alive.call(this, a);
        },
        set_x: function (a) {
          if (this.exists && this.x != a) {
            this.transformChildren_Float(l(this, this.xTransform), a - this.x);
          }
          return this.x = a;
        },
        set_y: function (a) {
          if (this.exists && this.y != a) {
            this.transformChildren_Float(l(this, this.yTransform), a - this.y);
          }
          return this.y = a;
        },
        set_angle: function (a) {
          if (this.exists && this.angle != a) {
            this.transformChildren_Float(l(this, this.angleTransform), a - this.angle);
          }
          return this.angle = a;
        },
        set_alpha: function (a) {
          a = a < 0 ? 0 : a;
          a = a > 1 ? 1 : a;
          if (this.exists && this.alpha != a) {
            var b = this.alpha > 0 ? a / this.alpha : 0;
            if (this.directAlpha || this.alpha == 0) {
              this.transformChildren_Float(l(this, this.directAlphaTransform), a);
            } else {
              this.transformChildren_Float(l(this, this.alphaTransform), b);
            }
          }
          return this.alpha = a;
        },
        set_flipX: function (a) {
          if (this.exists && this.flipX != a) {
            this.transformChildren_Bool(l(this, this.flipXTransform), a);
          }
          return this.flipX = a;
        },
        set_flipY: function (a) {
          if (this.exists && this.flipY != a) {
            this.transformChildren_Bool(l(this, this.flipYTransform), a);
          }
          return this.flipY = a;
        },
        set_moves: function (a) {
          if (this.exists && this.moves != a) {
            this.transformChildren_Bool(l(this, this.movesTransform), a);
          }
          return this.moves = a;
        },
        set_immovable: function (a) {
          if (this.exists && this.immovable != a) {
            this.transformChildren_Bool(l(this, this.immovableTransform), a);
          }
          return this.immovable = a;
        },
        set_color: function (a) {
          if (this.exists && this.color != a) {
            this.transformChildren_Int(l(this, this.gColorTransform), a);
          }
          return this.color = a;
        },
        set_blend: function (a) {
          if (this.exists && this.blend != a) {
            this.transformChildren_openfl_display_BlendMode(l(this, this.blendTransform), a);
          }
          return this.blend = a;
        },
        set_clipRect: function (a) {
          if (this.exists) {
            this.transformChildren_flixel_math_FlxRect(l(this, this.clipRectTransform), a);
          }
          return G.prototype.set_clipRect.call(this, a);
        },
        set_width: function (a) {
          return a;
        },
        get_width: function () {
          if (this.group.length == 0) {
            return 0;
          } else {
            return this.findMaxXHelper() - this.findMinXHelper();
          }
        },
        findMinX: function () {
          if (this.group.length == 0) {
            return this.x;
          } else {
            return this.findMinXHelper();
          }
        },
        findMinXHelper: function () {
          var a = Infinity;
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              d = d.flixelType == 4 ? d.findMinX() : d.x;
              if (d < a) {
                a = d;
              }
            }
          }
          return a;
        },
        findMaxX: function () {
          if (this.group.length == 0) {
            return this.x;
          } else {
            return this.findMaxXHelper();
          }
        },
        findMaxXHelper: function () {
          var a = -Infinity;
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              d = d.flixelType == 4 ? d.findMaxX() : d.x + d.get_width();
              if (d > a) {
                a = d;
              }
            }
          }
          return a;
        },
        set_height: function (a) {
          return a;
        },
        get_height: function () {
          if (this.group.length == 0) {
            return 0;
          } else {
            return this.findMaxYHelper() - this.findMinYHelper();
          }
        },
        findMinY: function () {
          if (this.group.length == 0) {
            return this.y;
          } else {
            return this.findMinYHelper();
          }
        },
        findMinYHelper: function () {
          var a = Infinity;
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              d = d.flixelType == 4 ? d.findMinY() : d.y;
              if (d < a) {
                a = d;
              }
            }
          }
          return a;
        },
        findMaxY: function () {
          if (this.group.length == 0) {
            return this.y;
          } else {
            return this.findMaxYHelper();
          }
        },
        findMaxYHelper: function () {
          var a = -Infinity;
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              d = d.flixelType == 4 ? d.findMaxY() : d.y + d.get_height();
              if (d > a) {
                a = d;
              }
            }
          }
          return a;
        },
        xTransform: function (a, b) {
          a.set_x(a.x + b);
        },
        yTransform: function (a, b) {
          a.set_y(a.y + b);
        },
        angleTransform: function (a, b) {
          a.set_angle(a.angle + b);
        },
        alphaTransform: function (a, b) {
          if (a.alpha != 0 || b == 0) {
            a.set_alpha(a.alpha * b);
          } else {
            a.set_alpha(1 / b);
          }
        },
        directAlphaTransform: function (a, b) {
          a.set_alpha(b);
        },
        flipXTransform: function (a, b) {
          a.set_flipX(b);
        },
        flipYTransform: function (a, b) {
          a.set_flipY(b);
        },
        movesTransform: function (a, b) {
          a.set_moves(b);
        },
        gColorTransform: function (a, b) {
          a.set_color(b);
        },
        blendTransform: function (a, b) {
          a.set_blend(b);
        },
        immovableTransform: function (a, b) {
          a.set_immovable(b);
        },
        visibleTransform: function (a, b) {
          a.set_visible(b);
        },
        activeTransform: function (a, b) {
          a.set_active(b);
        },
        aliveTransform: function (a, b) {
          a.set_alive(b);
        },
        existsTransform: function (a, b) {
          a.set_exists(b);
        },
        camerasTransform: function (a, b) {
          a.set_cameras(b);
        },
        offsetTransform: function (a, b) {
          a = a.offset;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        originTransform: function (a, b) {
          a = a.origin;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        scaleTransform: function (a, b) {
          a = a.scale;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        scrollFactorTransform: function (a, b) {
          a = a.scrollFactor;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        clipRectTransform: function (a, b) {
          if (b == null) {
            a.set_clipRect(null);
          } else {
            var c = b.x - a.x + this.x;
            var d = b.y - a.y + this.y;
            var e = b.width;
            var f = b.height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b = Ha._pool.get();
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
            b._inPool = false;
            a.set_clipRect(b);
          }
        },
        offsetCallback: function (a) {
          this.transformChildren_flixel_math_FlxPoint(l(this, this.offsetTransform), a);
        },
        originCallback: function (a) {
          this.transformChildren_flixel_math_FlxPoint(l(this, this.originTransform), a);
        },
        scaleCallback: function (a) {
          this.transformChildren_flixel_math_FlxPoint(l(this, this.scaleTransform), a);
        },
        scrollFactorCallback: function (a) {
          this.transformChildren_flixel_math_FlxPoint(l(this, this.scrollFactorTransform), a);
        },
        loadGraphic: function (a, b, c, d, e, f) {
          return this;
        },
        makeGraphic: function (a, b, c, d, e) {
          return this;
        },
        set_pixels: function (a) {
          return a;
        },
        set_frame: function (a) {
          return a;
        },
        get_pixels: function () {
          return null;
        },
        set_group: function (a) {
          return this.group = a;
        },
        calcFrame: function (a) {},
        resetHelpers: function () {},
        stamp: function (a, b, c) {},
        set_frames: function (a) {
          return a;
        },
        updateColorTransform: function () {},
        __class__: db,
        __properties__: q(G.prototype.__properties__, {
          set_group: "set_group"
        })
      });
      function dc(a, b) {
        this.lastBoxType = "";
        this.lastCharacter = -1;
        this.closeVolume = 1;
        this.closeSound = "dialogueClose";
        this.ignoreThisFrame = true;
        this.daText = null;
        this.dialogueEnded = false;
        this.textBoxTypes = ["normal", "angry"];
        this.offsetPos = -600;
        this.currentText = 0;
        this.arrayCharacters = [];
        this.dialogueList = this.nextDialogueThing = this.skipDialogueThing = this.bgFade = null;
        this.scrollSpeed = 4000;
        db.call(this);
        y.sound("dialogue");
        y.sound("dialogueClose");
        if (b != null && b != "") {
          var c = g.sound;
          b = y.returnSound("music", b, null);
          c.playMusic(b, 0);
          c = g.sound.music;
          b = 2;
          var d = 0;
          var e = 1;
          if (e == null) {
            e = 1;
          }
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 1;
          }
          if (c._channel == null) {
            c.play();
          }
          if (c.fadeTween != null) {
            c.fadeTween.cancel();
          }
          c.fadeTween = ka.num(d, e, b, {
            onComplete: null
          }, l(c, c.volumeTween));
        }
        this.bgFade = new G(-500, -500).makeGraphic(g.width * 2, g.height * 2, -1);
        c = this.bgFade.scrollFactor;
        c.set_x(0);
        c.set_y(0);
        this.bgFade.set_visible(true);
        this.bgFade.set_alpha(0);
        this.add(this.bgFade);
        this.dialogueList = a;
        this.spawnCharacters();
        this.box = new G(70, 370);
        this.box.set_antialiasing(C.data.antialiasing);
        c = this.box;
        a = y.image("speech_bubble", null, true);
        c.set_frames(fb.fromSparrow(a, y.getPath("images/speech_bubble.xml", null, null)));
        c = this.box.scrollFactor;
        c.set_x(0);
        c.set_y(0);
        this.box.animation.addByPrefix("normal", "speech bubble normal", 24);
        this.box.animation.addByPrefix("normalOpen", "Speech Bubble Normal Open", 24, false);
        this.box.animation.addByPrefix("angry", "AHH speech bubble", 24);
        this.box.animation.addByPrefix("angryOpen", "speech bubble loud open", 24, false);
        this.box.animation.addByPrefix("center-normal", "speech bubble middle", 24);
        this.box.animation.addByPrefix("center-normalOpen", "Speech Bubble Middle Open", 24, false);
        this.box.animation.addByPrefix("center-angry", "AHH Speech Bubble middle", 24);
        this.box.animation.addByPrefix("center-angryOpen", "speech bubble Middle loud open", 24, false);
        this.box.animation.play("normal", true);
        this.box.set_visible(false);
        this.box.setGraphicSize(this.box.get_width() * 0.9 | 0);
        this.box.updateHitbox();
        this.add(this.box);
        this.daText = new Th(dc.DEFAULT_TEXT_X, dc.DEFAULT_TEXT_Y, "");
        this.daText.setScale(0.7);
        this.add(this.daText);
        this.startNextDialog();
      }
      h["cutscenes.DialogueBoxPsych"] = dc;
      dc.__name__ = "cutscenes.DialogueBoxPsych";
      dc.updateBoxOffsets = function (a) {
        a.centerOffsets();
        a.updateHitbox();
        if (w.startsWith(a.animation._curAnim.name, "angry")) {
          var b = a.offset;
          var c = 50;
          var d = 65;
        } else if (w.startsWith(a.animation._curAnim.name, "center-angry")) {
          b = a.offset;
          c = 50;
          d = 30;
        } else {
          b = a.offset;
          c = 10;
          d = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        b.set_x(c);
        b.set_y(d);
        if (!a.flipX) {
          a.offset.set_y(a.offset.y + 10);
        }
      };
      dc.__super__ = db;
      dc.prototype = q(db.prototype, {
        spawnCharacters: function () {
          var a = Object.create(null);
          for (var b = 0, c = this.dialogueList.dialogue.length; b < c;) {
            var d = b++;
            if (this.dialogueList.dialogue[d] != null) {
              d = this.dialogueList.dialogue[d].portrait;
              if (!Object.prototype.hasOwnProperty.call(a, d) || !a[d]) {
                a[d] = true;
              }
            }
          }
          a = Object.keys(a);
          b = a.length;
          for (c = 0; c < b;) {
            var e = a[c++];
            d = dc.LEFT_CHAR_X;
            var f = dc.DEFAULT_CHAR_Y;
            e = new md(d + this.offsetPos, f, e);
            e.setGraphicSize(e.get_width() * md.DEFAULT_SCALE * e.jsonFile.scale | 0);
            e.updateHitbox();
            var k = e.scrollFactor;
            k.set_x(0);
            k.set_y(0);
            e.set_alpha(0.00001);
            this.add(e);
            k = false;
            switch (e.jsonFile.dialogue_pos) {
              case "center":
                e.set_x(g.width / 2);
                e.set_x(e.x - e.get_width() / 2);
                f = e.y;
                e.set_y(g.height + 50);
                k = true;
                break;
              case "right":
                d = g.width - e.get_width() + dc.RIGHT_CHAR_X;
                e.set_x(d - this.offsetPos);
            }
            d += e.jsonFile.position[0];
            f += e.jsonFile.position[1];
            e.set_x(e.x + e.jsonFile.position[0]);
            e.set_y(e.y + e.jsonFile.position[1]);
            e.startingPos = k ? f : d;
            this.arrayCharacters.push(e);
          }
        },
        update: function (a) {
          if (this.ignoreThisFrame) {
            this.ignoreThisFrame = false;
          } else if (this.dialogueEnded) {
            if (this.box != null && this.box.animation._curAnim.curFrame <= 0) {
              this.box.kill();
              this.remove(this.box);
              this.box.destroy();
              this.box = null;
            }
            if (this.bgFade != null) {
              c = this.bgFade;
              c.set_alpha(c.alpha - a * 0.5);
              if (this.bgFade.alpha <= 0) {
                this.bgFade.kill();
                this.remove(this.bgFade);
                this.bgFade.destroy();
                this.bgFade = null;
              }
            }
            c = 0;
            for (d = this.arrayCharacters.length; c < d;) {
              e = c++;
              var b = this.arrayCharacters[e];
              if (b != null) {
                switch (this.arrayCharacters[e].jsonFile.dialogue_pos) {
                  case "center":
                    b.set_y(b.y + this.scrollSpeed * a);
                    break;
                  case "left":
                    b.set_x(b.x - this.scrollSpeed * a);
                    break;
                  case "right":
                    b.set_x(b.x + this.scrollSpeed * a);
                }
                b.set_alpha(b.alpha - a * 10);
              }
            }
            if (this.box == null && this.bgFade == null) {
              c = 0;
              for (d = this.arrayCharacters.length; c < d;) {
                c++;
                b = this.arrayCharacters[0];
                if (b != null) {
                  M.remove(this.arrayCharacters, b);
                  b.kill();
                  this.remove(b);
                  b.destroy();
                }
              }
              this.finishThing();
              this.kill();
            }
          } else {
            var c = this.bgFade;
            c.set_alpha(c.alpha + a * 0.5);
            if (this.bgFade.alpha > 0.5) {
              this.bgFade.set_alpha(0.5);
            }
            if (Ca.instance.get_ACCEPT()) {
              if (this.daText.finishedText) {
                if (this.currentText >= this.dialogueList.dialogue.length) {
                  this.dialogueEnded = true;
                  c = 0;
                  for (var d = this.textBoxTypes.length; c < d;) {
                    var e = c++;
                    b = ["", "center-"];
                    var f = this.box.animation._curAnim.name;
                    for (var k = 0, r = b.length; k < r;) {
                      var n = k++;
                      if (f == b[n] + this.textBoxTypes[e] || f == b[n] + this.textBoxTypes[e] + "Open") {
                        this.box.animation.play(b[n] + this.textBoxTypes[e] + "Open", true);
                      }
                    }
                  }
                  this.box.animation._curAnim.set_curFrame(this.box.animation._curAnim.frames.length - 1);
                  this.box.animation._curAnim.reverse();
                  if (this.daText != null) {
                    this.daText.kill();
                    this.remove(this.daText);
                    this.daText.destroy();
                  }
                  dc.updateBoxOffsets(this.box);
                  c = g.sound.music;
                  d = 1;
                  e = 0;
                  if (e == null) {
                    e = 0;
                  }
                  if (d == null) {
                    d = 1;
                  }
                  if (c.fadeTween != null) {
                    c.fadeTween.cancel();
                  }
                  c.fadeTween = ka.num(c._volume, e, d, {
                    onComplete: null
                  }, l(c, c.volumeTween));
                } else {
                  this.startNextDialog();
                }
              } else {
                this.daText.finishText();
                if (this.skipDialogueThing != null) {
                  this.skipDialogueThing();
                }
              }
              g.sound.play(y.sound(this.closeSound), this.closeVolume);
            } else if (this.daText.finishedText) {
              b = this.arrayCharacters[this.lastCharacter];
              if (b != null && b.animation._curAnim != null && b.animationIsLoop() && b.animation.get_finished()) {
                b.playAnim(b.animation._curAnim.name, true);
              }
            } else {
              b = this.arrayCharacters[this.lastCharacter];
              if (b != null && b.animation._curAnim != null && b.animation.get_finished()) {
                b.animation._curAnim.restart();
              }
            }
            if (this.box.animation._curAnim.finished) {
              c = 0;
              for (d = this.textBoxTypes.length; c < d;) {
                e = c++;
                b = ["", "center-"];
                f = this.box.animation._curAnim.name;
                k = 0;
                r = b.length;
                while (k < r) {
                  n = k++;
                  if (f == b[n] + this.textBoxTypes[e] || f == b[n] + this.textBoxTypes[e] + "Open") {
                    this.box.animation.play(b[n] + this.textBoxTypes[e], true);
                  }
                }
              }
              dc.updateBoxOffsets(this.box);
            }
            if (this.lastCharacter != -1 && this.arrayCharacters.length > 0) {
              c = 0;
              d = this.arrayCharacters.length;
              while (c < d) {
                e = c++;
                b = this.arrayCharacters[e];
                if (b != null) {
                  if (e != this.lastCharacter) {
                    switch (b.jsonFile.dialogue_pos) {
                      case "center":
                        b.set_y(b.y + this.scrollSpeed * a);
                        if (b.y > b.startingPos + g.height) {
                          b.set_y(b.startingPos + g.height);
                        }
                        break;
                      case "left":
                        b.set_x(b.x - this.scrollSpeed * a);
                        if (b.x < b.startingPos + this.offsetPos) {
                          b.set_x(b.startingPos + this.offsetPos);
                        }
                        break;
                      case "right":
                        b.set_x(b.x + this.scrollSpeed * a);
                        if (b.x > b.startingPos - this.offsetPos) {
                          b.set_x(b.startingPos - this.offsetPos);
                        }
                    }
                    b.set_alpha(b.alpha - a * 3);
                    if (b.alpha < 0.00001) {
                      b.set_alpha(0.00001);
                    }
                  } else {
                    switch (b.jsonFile.dialogue_pos) {
                      case "center":
                        b.set_y(b.y - this.scrollSpeed * a);
                        if (b.y < b.startingPos) {
                          b.set_y(b.startingPos);
                        }
                        break;
                      case "left":
                        b.set_x(b.x + this.scrollSpeed * a);
                        if (b.x > b.startingPos) {
                          b.set_x(b.startingPos);
                        }
                        break;
                      case "right":
                        b.set_x(b.x - this.scrollSpeed * a);
                        if (b.x < b.startingPos) {
                          b.set_x(b.startingPos);
                        }
                    }
                    b.set_alpha(b.alpha + a * 3);
                    if (b.alpha > 1) {
                      b.set_alpha(1);
                    }
                  }
                }
              }
            }
          }
          db.prototype.update.call(this, a);
        },
        startNextDialog: function () {
          do {
            var a = this.dialogueList.dialogue[this.currentText];
          } while (a == null);
          if (a.text == null || a.text.length < 1) {
            a.text = " ";
          }
          if (a.boxState == null) {
            a.boxState = "normal";
          }
          if (a.speed != null ? isNaN(a.speed) : 1) {
            a.speed = 0.05;
          }
          var b = a.boxState;
          var c = this.textBoxTypes[0];
          for (var d = 0, e = this.textBoxTypes.length; d < e;) {
            var f = d++;
            if (this.textBoxTypes[f] == b) {
              c = b;
            }
          }
          b = 0;
          this.box.set_visible(true);
          d = 0;
          for (e = this.arrayCharacters.length; d < e;) {
            f = d++;
            if (this.arrayCharacters[f].curCharacter == a.portrait) {
              b = f;
              break;
            }
          }
          d = "";
          e = this.arrayCharacters[b].jsonFile.dialogue_pos;
          if (e == "center") {
            d = "center-";
          }
          if (b != this.lastCharacter) {
            this.box.animation.play(d + c + "Open", true);
            dc.updateBoxOffsets(this.box);
            this.box.set_flipX(e == "left");
          } else if (c != this.lastBoxType) {
            this.box.animation.play(d + c, true);
            dc.updateBoxOffsets(this.box);
          }
          this.lastCharacter = b;
          this.lastBoxType = c;
          this.daText.set_text(a.text);
          this.daText.delay = a.speed;
          this.daText.sound = a.sound;
          if (this.daText.sound == null || w.trim(this.daText.sound) == "") {
            this.daText.sound = "dialogue";
          }
          this.daText.set_y(dc.DEFAULT_TEXT_Y);
          if (this.daText.rows > 2) {
            c = this.daText;
            c.set_y(c.y - dc.LONG_TEXT_ADD);
          }
          c = this.arrayCharacters[b];
          if (c != null) {
            c.playAnim(a.expression, this.daText.finishedText);
            if (c.animation._curAnim != null) {
              a = 24 - (a.speed - 0.05) / 5 * 480;
              if (a < 12) {
                a = 12;
              } else if (a > 48) {
                a = 48;
              }
              c.animation._curAnim.set_frameRate(a);
            }
          }
          this.currentText++;
          if (this.nextDialogueThing != null) {
            this.nextDialogueThing();
          }
        },
        __class__: dc
      });
      function md(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.curCharacter = "bf";
        this.isGhost = false;
        this.startingPos = 0;
        this.dialogueAnimations = new V();
        this.jsonFile = null;
        G.call(this, a, b);
        if (c == null) {
          c = md.DEFAULT_CHARACTER;
        }
        this.curCharacter = c;
        this.reloadCharacterJson(c);
        a = "dialogue/" + this.jsonFile.image;
        b = y.image(a, null, true);
        this.set_frames(fb.fromSparrow(b, y.getPath("images/" + a + ".xml", null, null)));
        this.reloadAnimations();
        this.set_antialiasing(C.data.antialiasing);
        if (this.jsonFile.no_antialiasing == 1) {
          this.set_antialiasing(false);
        }
      }
      h["cutscenes.DialogueCharacter"] = md;
      md.__name__ = "cutscenes.DialogueCharacter";
      md.__super__ = G;
      md.prototype = q(G.prototype, {
        reloadCharacterJson: function (a) {
          a = "images/dialogue/" + a + ".json";
          if (a == null) {
            a = "";
          }
          a = oa.getText("assets/shared/" + a);
          this.jsonFile = JSON.parse(a);
        },
        reloadAnimations: function () {
          this.dialogueAnimations.h = Object.create(null);
          if (this.jsonFile.animations != null && this.jsonFile.animations.length > 0) {
            for (var a = 0, b = this.jsonFile.animations; a < b.length;) {
              var c = b[a];
              ++a;
              this.animation.addByPrefix(c.anim, c.loop_name, 24, this.isGhost);
              this.animation.addByPrefix(c.anim + md.IDLE_SUFFIX, c.idle_name, 24, true);
              this.dialogueAnimations.h[c.anim] = c;
            }
          }
        },
        playAnim: function (a, b) {
          if (b == null) {
            b = false;
          }
          var c = a;
          if (a == null || !Object.prototype.hasOwnProperty.call(this.dialogueAnimations.h, a)) {
            var d = [];
            var e = this.dialogueAnimations.h;
            var f = Object.keys(e);
            for (var k = f.length, r = 0; r < k;) {
              a = e[f[r++]];
              d.push(a.anim);
            }
            if (d.length > 0) {
              c = d[g.random.int(0, d.length - 1)];
            }
          }
          if (Object.prototype.hasOwnProperty.call(this.dialogueAnimations.h, c) && (this.dialogueAnimations.h[c].loop_name == null || this.dialogueAnimations.h[c].loop_name.length < 1 || this.dialogueAnimations.h[c].loop_name == this.dialogueAnimations.h[c].idle_name)) {
            b = true;
          }
          this.animation.play(b ? c + md.IDLE_SUFFIX : c, false);
          if (Object.prototype.hasOwnProperty.call(this.dialogueAnimations.h, c)) {
            a = this.dialogueAnimations.h[c];
            if (b) {
              d = this.offset;
              e = a.idle_offsets[0];
              a = a.idle_offsets[1];
            } else {
              d = this.offset;
              e = a.loop_offsets[0];
              a = a.loop_offsets[1];
            }
            if (a == null) {
              a = 0;
            }
            if (e == null) {
              e = 0;
            }
            d.set_x(e);
            d.set_y(a);
          } else {
            d = this.offset;
            a = e = 0;
            if (a == null) {
              a = 0;
            }
            if (e == null) {
              e = 0;
            }
            d.set_x(e);
            d.set_y(a);
            yb.trace("Offsets not found! Dialogue character is badly formatted, anim: " + c + ", " + (b ? "idle anim" : "loop anim"), {
              fileName: "source/cutscenes/DialogueCharacter.hx",
              lineNumber: 118,
              className: "cutscenes.DialogueCharacter",
              methodName: "playAnim"
            });
          }
        },
        animationIsLoop: function () {
          if (this.animation._curAnim == null) {
            return false;
          } else {
            return !w.endsWith(this.animation._curAnim.name, md.IDLE_SUFFIX);
          }
        },
        __class__: md
      });
      function Xc() {
        this.__renderedOnCanvasWhileOnDOM = this.__forceCachedBitmapUpdate = false;
        this.__mouseScrollVCounter = 0;
        this.condenseWhite = false;
        tb.call(this);
        this.__drawableType = 7;
        this.__selectionIndex = this.__caretIndex = -1;
        this.__displayAsPassword = false;
        this.__graphics = new je(this);
        this.__textEngine = new ic(this);
        this.__layoutDirty = true;
        this.__offsetY = this.__offsetX = 0;
        this.__mouseWheelEnabled = true;
        this.__text = "";
        this.doubleClickEnabled = true;
        if (Xc.__defaultTextFormat == null) {
          Xc.__defaultTextFormat = new nd("Times New Roman", 12, 0, false, false, false, "", "", 3, 0, 0, 0, 0);
          Xc.__defaultTextFormat.blockIndent = 0;
          Xc.__defaultTextFormat.bullet = false;
          Xc.__defaultTextFormat.letterSpacing = 0;
          Xc.__defaultTextFormat.kerning = false;
        }
        this.__textFormat = Xc.__defaultTextFormat.clone();
        this.__textEngine.textFormatRanges.push(new Yd(this.__textFormat, 0, 0));
        this.addEventListener("mouseDown", l(this, this.this_onMouseDown));
        this.addEventListener("focusIn", l(this, this.this_onFocusIn));
        this.addEventListener("focusOut", l(this, this.this_onFocusOut));
        this.addEventListener("keyDown", l(this, this.this_onKeyDown));
        this.addEventListener("mouseWheel", l(this, this.this_onMouseWheel));
        this.addEventListener("doubleClick", l(this, this.this_onDoubleClick));
      }
      h["openfl.text.TextField"] = Xc;
      Xc.__name__ = "openfl.text.TextField";
      Xc.__super__ = tb;
      Xc.prototype = q(tb.prototype, {
        appendText: function (a) {
          if (a != null && a != "") {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__updateText(this.__text + a);
            this.__selectionIndex = this.__caretIndex = this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end = this.__text.length;
          }
        },
        getCharBoundaries: function (a) {
          if (a < 0 || a > this.__text.length - 1) {
            return null;
          }
          var b = new ea();
          if (this.__getCharBoundaries(a, b)) {
            return b;
          } else {
            return null;
          }
        },
        getLineIndexOfChar: function (a) {
          if (a < 0 || a > this.__text.length) {
            return -1;
          }
          this.__updateLayout();
          for (var b = this.__textEngine.layoutGroups.iterator(); b.hasNext();) {
            var c = b.next();
            if (c.startIndex <= a && c.endIndex >= a) {
              return c.lineIndex;
            }
          }
          return -1;
        },
        getLineLength: function (a) {
          this.__updateLayout();
          if (a < 0 || a > this.__textEngine.numLines - 1) {
            return 0;
          }
          var b = -1;
          var c = -1;
          for (var d = this.__textEngine.layoutGroups.iterator(); d.hasNext();) {
            var e = d.next();
            if (e.lineIndex == a) {
              if (b == -1) {
                b = e.startIndex;
              }
            } else if (e.lineIndex == a + 1) {
              c = e.startIndex;
              break;
            }
          }
          if (c == -1) {
            c = this.__text.length;
          }
          return c - b;
        },
        getLineOffset: function (a) {
          this.__updateLayout();
          if (a < 0 || a > this.__textEngine.numLines - 1) {
            return -1;
          }
          for (var b = this.__textEngine.layoutGroups.iterator(); b.hasNext();) {
            var c = b.next();
            if (c.lineIndex == a) {
              return c.startIndex;
            }
          }
          return 0;
        },
        replaceSelectedText: function (a) {
          this.__replaceSelectedText(a, false);
        },
        replaceText: function (a, b, c) {
          this.__replaceText(a, b, c, false);
        },
        setSelection: function (a, b) {
          this.__selectionIndex = a;
          this.__caretIndex = b;
          this.__updateScrollV();
          this.__updateScrollH();
          if (this.stage != null && this.stage.get_focus() == this) {
            this.__stopCursorTimer();
            this.__startCursorTimer();
          }
        },
        setTextFormat: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = -1;
          }
          var d = this.get_text().length;
          if (b == -1) {
            if (c == -1) {
              c = d;
            }
            b = 0;
          } else if (c == -1) {
            c = b + 1;
          }
          if (b != c) {
            if (b < 0 || c <= 0 || c < b || b >= d || c > d) {
              throw new Ni();
            }
            if (b == 0 && c == d) {
              this.__textEngine.textFormatRanges.set_length(1);
              var e = this.__textEngine.textFormatRanges.get(0);
              e.start = 0;
              e.end = d;
              e.format.__merge(a);
            } else {
              d = 0;
              for (var f; d < this.__textEngine.textFormatRanges.get_length();) {
                e = this.__textEngine.textFormatRanges.get(d);
                if (e.end <= b) {
                  ++d;
                } else if (e.start >= c) {
                  break;
                } else if (e.start <= b && e.end >= c) {
                  if (e.start == b && e.end == c) {
                    e.format = e.format.clone();
                    e.format.__merge(a);
                    break;
                  } else if (e.start == b) {
                    f = new Yd(e.format.clone(), b, c);
                    f.format.__merge(a);
                    this.__textEngine.textFormatRanges.insertAt(d, f);
                    e.start = c;
                    d += 2;
                  } else {
                    if (e.end == c) {
                      f = new Yd(e.format.clone(), b, c);
                      f.format.__merge(a);
                      this.__textEngine.textFormatRanges.insertAt(d + 1, f);
                    } else {
                      f = new Yd(e.format.clone(), b, c);
                      f.format.__merge(a);
                      this.__textEngine.textFormatRanges.insertAt(d + 1, f);
                      f = new Yd(e.format.clone(), c, e.end);
                      this.__textEngine.textFormatRanges.insertAt(d + 2, f);
                    }
                    e.end = b;
                    break;
                  }
                } else if (e.start >= b && e.end <= c) {
                  if (e.start == b) {
                    e.format = e.format.clone();
                    e.format.__merge(a);
                    e.end = c;
                  } else {
                    this.__textEngine.textFormatRanges.removeAt(d);
                  }
                } else if (e.start > b && e.end > b) {
                  e.start = c;
                  break;
                } else if (e.start < b && e.end <= c) {
                  f = new Yd(e.format.clone(), b, c);
                  f.format.__merge(a);
                  this.__textEngine.textFormatRanges.insertAt(d + 1, f);
                  e.end = b;
                  d += 2;
                } else {
                  ++d;
                  Ua.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                    fileName: "openfl/text/TextField.hx",
                    lineNumber: 1578,
                    className: "openfl.text.TextField",
                    methodName: "setTextFormat"
                  });
                }
              }
            }
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        __allowMouseFocus: function () {
          return this.mouseEnabled;
        },
        __caretBeginningOfLine: function () {
          this.__caretIndex = this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex));
        },
        __caretBeginningOfNextLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          this.__caretIndex = a < this.__textEngine.numLines - 1 ? this.getLineOffset(a + 1) : this.__text.length;
        },
        __caretBeginningOfPreviousLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          if (a > 0) {
            var b = this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex));
            this.__caretIndex = this.__caretIndex == b ? this.getLineOffset(a - 1) : b;
          }
        },
        __caretEndOfLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          this.__caretIndex = a < this.__textEngine.numLines - 1 ? this.getLineOffset(a + 1) - 1 : this.__text.length;
        },
        __caretNextCharacter: function () {
          if (this.__caretIndex < this.__text.length) {
            this.__caretIndex++;
          }
        },
        __caretNextLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          if (a < this.__textEngine.numLines - 1) {
            this.__caretIndex = this.__getCharIndexOnDifferentLine(this.get_caretIndex(), a + 1);
          }
        },
        __caretPreviousCharacter: function () {
          if (this.__caretIndex > 0) {
            this.__caretIndex--;
          }
        },
        __caretPreviousLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          if (a > 0) {
            this.__caretIndex = this.__getCharIndexOnDifferentLine(this.get_caretIndex(), a - 1);
          }
        },
        __disableInput: function () {
          if (this.__inputEnabled && this.stage != null) {
            this.stage.window.__backend.setTextInputEnabled(false);
            this.stage.window.onTextInput.remove(l(this, this.window_onTextInput));
            this.stage.window.onKeyDown.remove(l(this, this.window_onKeyDown));
            this.__inputEnabled = false;
            this.__stopCursorTimer();
          }
        },
        __dispatch: function (a) {
          if (a.eventPhase == 2 && a.type == "mouseUp") {
            var b = this.__getGroup(this.get_mouseX(), this.get_mouseY(), true);
            if (b != null) {
              b = b.format.url;
              if (b != null && b != "") {
                if (w.startsWith(b, "event:")) {
                  this.dispatchEvent(new Xf("link", true, false, M.substr(b, 6, null)));
                } else {
                  na.getURL(new Ui(b));
                }
              }
            }
          }
          return tb.prototype.__dispatch.call(this, a);
        },
        __enableInput: function () {
          if (this.stage != null) {
            var a = this.getBounds(this.stage);
            a = new Me(a.x, a.y, a.width, a.height);
            this.stage.window.setTextInputRect(a);
            this.stage.window.__backend.setTextInputEnabled(true);
            if (!this.__inputEnabled) {
              this.stage.window.__backend.setTextInputEnabled(true);
              if (!this.stage.window.onTextInput.has(l(this, this.window_onTextInput))) {
                this.stage.window.onTextInput.add(l(this, this.window_onTextInput));
                this.stage.window.onKeyDown.add(l(this, this.window_onKeyDown));
              }
              this.__inputEnabled = true;
              this.__stopCursorTimer();
              this.__startCursorTimer();
            }
          }
        },
        __getBounds: function (a, b) {
          this.__updateLayout();
          var c = ea.__pool.get();
          c.copyFrom(this.__textEngine.bounds);
          c.offset(this.__offsetX, this.__offsetY);
          c.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          ea.__pool.release(c);
        },
        __getCharBoundaries: function (a, b) {
          if (a < 0 || a > this.__text.length - 1) {
            return false;
          }
          this.__updateLayout();
          for (var c = this.__textEngine.layoutGroups.iterator(); c.hasNext();) {
            var d = c.next();
            if (a >= d.startIndex && a < d.endIndex) {
              try {
                var e = d.offsetX;
                for (var f = 0, k = a - d.startIndex; f < k;) {
                  var r = f++;
                  e += d.positions[r];
                }
                b.setTo(e, d.offsetY, d.positions[a - d.startIndex], d.ascent + d.descent);
                return true;
              } catch (n) {
                Na.lastError = n;
              }
            }
          }
          return false;
        },
        __getCharIndexOnDifferentLine: function (a, b) {
          if (a < 0 || a > this.__text.length || b < 0 || b > this.__textEngine.numLines - 1) {
            return -1;
          }
          var c = null;
          var d = null;
          for (var e = this.__textEngine.layoutGroups.iterator(); e.hasNext();) {
            var f = e.next();
            if (a >= f.startIndex && a <= f.endIndex) {
              c = f.offsetX;
              for (var k = 0, r = a - f.startIndex; k < r;) {
                var n = k++;
                c += f.positions[n];
              }
              if (d != null) {
                return this.__getPosition(c, d);
              }
            }
            if (f.lineIndex == b) {
              d = f.offsetY + f.height / 2;
              f = 0;
              for (k = this.get_scrollV() - 1; f < k;) {
                r = f++;
                d -= this.__textEngine.lineHeights.get(r);
              }
              if (c != null) {
                return this.__getPosition(c, d);
              }
            }
          }
          return -1;
        },
        __getCursor: function () {
          var a = this.__getGroup(this.get_mouseX(), this.get_mouseY(), true);
          if (a != null && a.format.url != "") {
            return "button";
          } else if (this.__textEngine.selectable) {
            return "ibeam";
          } else {
            return null;
          }
        },
        __getGroup: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          this.__updateLayout();
          a += this.get_scrollH();
          for (var d = 0, e = this.get_scrollV() - 1; d < e;) {
            var f = d++;
            b += this.__textEngine.lineHeights.get(f);
          }
          if (!c && b > this.__textEngine.textHeight) {
            b = this.__textEngine.textHeight;
          }
          var k = true;
          d = 0;
          for (e = this.__textEngine.layoutGroups.get_length(); d < e;) {
            f = d++;
            var r = this.__textEngine.layoutGroups.get(f);
            f = f < this.__textEngine.layoutGroups.get_length() - 1 ? this.__textEngine.layoutGroups.get(f + 1) : null;
            if (k) {
              if (b < r.offsetY) {
                b = r.offsetY;
              }
              if (a < r.offsetX) {
                a = r.offsetX;
              }
              k = false;
            }
            if (b >= r.offsetY && b <= r.offsetY + r.height || !c && f == null) {
              if (a >= r.offsetX && a <= r.offsetX + r.width || !c && (f == null || f.lineIndex != r.lineIndex)) {
                return r;
              }
            }
          }
          return null;
        },
        __getPosition: function (a, b) {
          b = this.__getGroup(a, b);
          if (b == null) {
            return this.__text.length;
          }
          var c = 0;
          for (var d = 0, e = b.positions.length; d < e;) {
            var f = d++;
            c += b.positions[f];
            if (a <= b.offsetX + c) {
              if (a <= b.offsetX + (c - b.positions[f]) + b.positions[f] / 2) {
                return b.startIndex + f;
              }
              if (b.startIndex + f < b.endIndex) {
                return b.startIndex + f + 1;
              }
              break;
            }
          }
          return b.endIndex;
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || e && !this.mouseEnabled || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          this.__getRenderTransform();
          this.__updateLayout();
          c = this.__renderTransform;
          e = c.a * c.d - c.b * c.c;
          var k = e == 0 ? -c.tx : 1 / e * (c.c * (c.ty - b) + c.d * (a - c.tx));
          c = this.__renderTransform;
          e = c.a * c.d - c.b * c.c;
          if (this.__textEngine.bounds.contains(k, e == 0 ? -c.ty : 1 / e * (c.a * (b - c.ty) + c.b * (c.tx - a)))) {
            if (d != null) {
              d.push(f);
            }
            return true;
          } else {
            return false;
          }
        },
        __hitTestMask: function (a, b) {
          this.__getRenderTransform();
          this.__updateLayout();
          var c = this.__renderTransform;
          var d = c.a * c.d - c.b * c.c;
          var e = d == 0 ? -c.tx : 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx));
          c = this.__renderTransform;
          d = c.a * c.d - c.b * c.c;
          if (this.__textEngine.bounds.contains(e, d == 0 ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a)))) {
            return true;
          } else {
            return false;
          }
        },
        __replaceSelectedText: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a == null) {
            a = "";
          }
          if (a != "" || this.__selectionIndex != this.__caretIndex) {
            var c = this.__caretIndex < this.__selectionIndex ? this.__caretIndex : this.__selectionIndex;
            var d = this.__caretIndex > this.__selectionIndex ? this.__caretIndex : this.__selectionIndex;
            if (c != d || !(this.__textEngine.maxChars > 0) || this.__text.length != this.__textEngine.maxChars) {
              if (c > this.__text.length) {
                c = this.__text.length;
              }
              if (d > this.__text.length) {
                d = this.__text.length;
              }
              if (d < c) {
                var e = d;
                d = c;
                c = e;
              }
              if (c < 0) {
                c = 0;
              }
              this.__replaceText(c, d, a, b);
            }
          }
        },
        __replaceText: function (a, b, c, d) {
          if (!(b < a) && !(a < 0) && !(b > this.__text.length) && c != null) {
            if (d) {
              c = this.__textEngine.restrictText(c);
              if (this.__textEngine.maxChars > 0) {
                d = this.__textEngine.maxChars - this.__text.length + (b - a);
                if (d <= 0) {
                  c = "";
                } else if (d < c.length) {
                  c = M.substr(c, 0, d);
                }
              }
            }
            this.__updateText(this.__text.substring(0, a) + c + this.__text.substring(b));
            d = c.length - (b - a);
            for (var e = 0, f; e < this.__textEngine.textFormatRanges.get_length();) {
              f = this.__textEngine.textFormatRanges.get(e);
              if (a == b) {
                if (f.start == f.end) {
                  if (f.start != 0) {
                    Ua.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                      fileName: "openfl/text/TextField.hx",
                      lineNumber: 2087,
                      className: "openfl.text.TextField",
                      methodName: "__replaceText"
                    });
                  } else {
                    f.end += d;
                  }
                } else if (f.end >= a) {
                  if (f.start >= a) {
                    f.start += d;
                    f.end += d;
                  } else if (f.start < a && f.end >= b) {
                    f.end += d;
                  }
                }
              } else if (f.end > a) {
                if (f.start > b) {
                  f.start += d;
                  f.end += d;
                } else if (f.start <= a && f.end > b) {
                  f.end += d;
                } else if (f.start >= a && f.end <= b) {
                  f = this.__textEngine.textFormatRanges;
                  f.__tempIndex = e--;
                  for (var k = 0, r = []; k < r.length;) {
                    var n = r[k++];
                    f.insertAt(f.__tempIndex, n);
                    f.__tempIndex++;
                  }
                  f.splice(f.__tempIndex, 1);
                } else if (f.end > b && f.start > a && f.start <= b) {
                  f.start = a;
                  f.end += d;
                } else if (f.start < a && f.end > a && f.end <= b) {
                  f.end = a;
                }
              }
              ++e;
            }
            if (this.__textEngine.textFormatRanges.get_length() == 0) {
              this.__textEngine.textFormatRanges.push(new Yd(this.get_defaultTextFormat().clone(), 0, c.length));
            } else if (a == b && this.__textEngine.textFormatRanges.get(0).start > 0) {
              this.__textEngine.textFormatRanges.unshift(new Yd(this.get_defaultTextFormat().clone(), 0, this.__textEngine.textFormatRanges.get(0).start));
            } else if (a != b && this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end < this.__text.length) {
              this.__textEngine.textFormatRanges.push(new Yd(this.get_defaultTextFormat().clone(), this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end, this.__text.length));
            }
            this.__selectionIndex = this.__caretIndex = a + c.length;
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        __startCursorTimer: function () {
          if (this.get_type() == 1) {
            if (this.__inputEnabled) {
              this.__cursorTimer = kg.delay(l(this, this.__startCursorTimer), 600);
              this.__showCursor = !this.__showCursor;
            }
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          } else if (this.get_selectable()) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        __startTextInput: function () {
          if (this.__caretIndex < 0) {
            this.__selectionIndex = this.__caretIndex = this.__text.length;
          }
          if (Fa.__supportDOM ? this.__renderedOnCanvasWhileOnDOM : 1) {
            this.__enableInput();
          }
        },
        __stopCursorTimer: function () {
          if (this.__cursorTimer != null) {
            this.__cursorTimer.stop();
            this.__cursorTimer = null;
          }
          if (this.__showCursor) {
            this.__showCursor = false;
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        __stopTextInput: function () {
          if (Fa.__supportDOM ? this.__renderedOnCanvasWhileOnDOM : 1) {
            this.__disableInput();
          }
        },
        __updateLayout: function () {
          if (this.__layoutDirty) {
            var a = this.__textEngine.width;
            this.__textEngine.update();
            if (this.__textEngine.autoSize != 2) {
              if (this.__textEngine.width != a) {
                switch (this.__textEngine.autoSize) {
                  case 0:
                    this.set_x(this.get_x() + (a - this.__textEngine.width) / 2);
                    break;
                  case 3:
                    this.set_x(this.get_x() + (a - this.__textEngine.width));
                }
              }
              this.__textEngine.getBounds();
            }
            this.__layoutDirty = false;
            this.setSelection(this.__selectionIndex, this.__caretIndex);
          }
        },
        __updateMouseDrag: function () {
          if (this.stage != null) {
            var a = this.getBounds(this);
            if (this.get_mouseX() > a.width - 1) {
              this.set_scrollH(this.get_scrollH() + (Math.max(Math.min((this.get_mouseX() - a.width) * 0.1, 10), 1) | 0));
            } else if (this.get_mouseX() < 1) {
              this.set_scrollH(this.get_scrollH() - (Math.max(Math.min(this.get_mouseX() * -0.1, 10), 1) | 0));
            }
            this.__mouseScrollVCounter++;
            if (this.__mouseScrollVCounter > this.stage.get_frameRate() / 10) {
              if (this.get_mouseY() > a.height - 2) {
                this.set_scrollV(Math.min(this.get_scrollV() + Math.max(Math.min((this.get_mouseY() - a.height) * 0.03, 5), 1), this.get_maxScrollV()) | 0);
              } else if (this.get_mouseY() < 2) {
                this.set_scrollV(this.get_scrollV() - (Math.max(Math.min(this.get_mouseY() * -0.03, 5), 1) | 0));
              }
              this.__mouseScrollVCounter = 0;
            }
            this.stage_onMouseMove(null);
          }
        },
        __updateScrollH: function () {
          this.__updateLayout();
          var a = this.getBounds(this);
          if (this.get_textWidth() <= a.width - 4) {
            this.set_scrollH(0);
          } else {
            var b = this.get_scrollH();
            if (this.__caretIndex == 0 || this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex)) == this.__caretIndex) {
              b = 0;
            } else {
              var c = ea.__pool.get();
              var d = false;
              if (this.__caretIndex < this.__text.length) {
                d = this.__getCharBoundaries(this.__caretIndex, c);
              }
              if (!d) {
                this.__getCharBoundaries(this.__caretIndex - 1, c);
                c.x += c.width;
              }
              while (c.x < b && b > 0) {
                b -= 24;
              }
              while (c.x > b + a.width - 4) {
                b += 24;
              }
              ea.__pool.release(c);
            }
            if (b > 0 && this.get_type() != 1) {
              c = this.getLineLength(this.getLineIndexOfChar(this.__caretIndex));
              if (this.get_scrollH() + a.width - 4 > c) {
                this.set_scrollH(Math.ceil(c - a.width + 4));
              }
            }
            if (b < 0) {
              this.set_scrollH(0);
            } else if (b > this.get_maxScrollH()) {
              this.set_scrollH(this.get_maxScrollH());
            } else {
              this.set_scrollH(b);
            }
          }
        },
        __updateScrollV: function () {
          this.__updateLayout();
          if (this.get_textHeight() <= this.get_height() - 4) {
            this.set_scrollV(1);
          } else {
            var a = this.getLineIndexOfChar(this.__caretIndex);
            if (a == -1 && this.__caretIndex > 0) {
              a = this.getLineIndexOfChar(this.__caretIndex - 1) + 1;
            }
            if (a + 1 < this.get_scrollV()) {
              this.set_scrollV(a + 1);
            } else if (a + 1 > this.get_bottomScrollV()) {
              var b = 0;
              for (a >= this.__textEngine.lineHeights.get_length() && (a = this.__textEngine.lineHeights.get_length() - 1); a >= 0;) {
                b += this.__textEngine.lineHeights.get(a);
                if (b > this.get_height() - 4) {
                  a += b - this.get_height() < 0 ? 1 : 2;
                  break;
                }
                --a;
              }
              this.set_scrollV(a);
            } else {
              this.set_scrollV(this.get_scrollV());
            }
          }
        },
        __updateText: function (a) {
          if (Fa.__supportDOM && this.__renderedOnCanvasWhileOnDOM) {
            this.__forceCachedBitmapUpdate = this.__text != a;
          }
          this.__textEngine.set_text(a);
          this.__text = this.__textEngine.text;
          if (this.stage != null && this.stage.get_focus() == this) {
            if (this.__text.length < this.__selectionIndex) {
              this.__selectionIndex = this.__text.length;
            }
            if (this.__text.length < this.__caretIndex) {
              this.__caretIndex = this.__text.length;
            }
          } else if (this.__isHTML) {
            this.__selectionIndex = this.__caretIndex = this.__text.length;
          } else {
            this.__caretIndex = this.__selectionIndex = 0;
          }
          if (!this.__displayAsPassword || Fa.__supportDOM && !this.__renderedOnCanvasWhileOnDOM) {
            this.__textEngine.set_text(this.__text);
          } else {
            a = "";
            for (var b = 0, c = this.get_text().length; b < c;) {
              b++;
              a += "*";
            }
            this.__textEngine.set_text(a);
          }
        },
        __updateTransforms: function (a) {
          tb.prototype.__updateTransforms.call(this, a);
          a = this.__renderTransform;
          var b = this.__offsetX;
          var c = this.__offsetY;
          a.tx = b * a.a + c * a.c + a.tx;
          a.ty = b * a.b + c * a.d + a.ty;
        },
        set_autoSize: function (a) {
          if (a != this.__textEngine.autoSize) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__textEngine.autoSize = a;
        },
        get_bottomScrollV: function () {
          this.__updateLayout();
          return this.__textEngine.get_bottomScrollV();
        },
        get_caretIndex: function () {
          return this.__caretIndex;
        },
        get_defaultTextFormat: function () {
          return this.__textFormat.clone();
        },
        set_defaultTextFormat: function (a) {
          this.__textFormat.__merge(a);
          this.__dirty = this.__layoutDirty = true;
          if (!this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return a;
        },
        get_displayAsPassword: function () {
          return this.__displayAsPassword;
        },
        set_displayAsPassword: function (a) {
          if (a != this.__displayAsPassword) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__displayAsPassword = a;
            this.__updateText(this.__text);
          }
          return a;
        },
        get_embedFonts: function () {
          return this.__textEngine.embedFonts;
        },
        set_embedFonts: function (a) {
          return this.__textEngine.embedFonts = a;
        },
        get_height: function () {
          this.__updateLayout();
          return this.__textEngine.height * Math.abs(this.get_scaleY());
        },
        set_height: function (a) {
          if (a != this.__textEngine.height) {
            this.__setTransformDirty();
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__textEngine.height = a;
          }
          return this.__textEngine.height * Math.abs(this.get_scaleY());
        },
        get_htmlText: function () {
          if (this.__isHTML) {
            return this.__htmlText;
          } else {
            return this.__text;
          }
        },
        set_htmlText: function (a) {
          if (!this.__isHTML || this.__text != a) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          this.__isHTML = true;
          if (this.condenseWhite) {
            a = a.replace(/\s+/g, " ");
          }
          this.__htmlText = a;
          a = Wa.parse(a, this.get_multiline(), this.__styleSheet, this.__textFormat, this.__textEngine.textFormatRanges);
          this.__updateText(a);
          return a;
        },
        get_maxScrollH: function () {
          this.__updateLayout();
          return this.__textEngine.maxScrollH;
        },
        get_maxScrollV: function () {
          this.__updateLayout();
          return this.__textEngine.get_maxScrollV();
        },
        get_mouseWheelEnabled: function () {
          return this.__mouseWheelEnabled;
        },
        get_multiline: function () {
          return this.__textEngine.multiline;
        },
        set_multiline: function (a) {
          return this.__textEngine.multiline = a;
        },
        get_numLines: function () {
          this.__updateLayout();
          return this.__textEngine.numLines;
        },
        get_scrollH: function () {
          return this.__textEngine.scrollH;
        },
        set_scrollH: function (a) {
          this.__updateLayout();
          if (a > this.__textEngine.maxScrollH) {
            a = this.__textEngine.maxScrollH;
          }
          if (a < 0) {
            a = 0;
          }
          if (a != this.__textEngine.scrollH) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__textEngine.scrollH = a;
            this.dispatchEvent(new Ga("scroll"));
          }
          return this.__textEngine.scrollH;
        },
        get_scrollV: function () {
          return this.__textEngine.get_scrollV();
        },
        set_scrollV: function (a) {
          this.__updateLayout();
          if (a > this.__textEngine.get_maxScrollV()) {
            a = this.__textEngine.get_maxScrollV();
          }
          if (a < 1) {
            a = 1;
          }
          if (a != this.__textEngine.get_scrollV() || this.__textEngine.get_scrollV() == 0) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__textEngine.set_scrollV(a);
            this.dispatchEvent(new Ga("scroll"));
          }
          return this.__textEngine.get_scrollV();
        },
        get_selectable: function () {
          return this.__textEngine.selectable;
        },
        set_selectable: function (a) {
          if (a != this.__textEngine.selectable && this.get_type() == 1) {
            if (this.stage != null && this.stage.get_focus() == this) {
              this.__startTextInput();
            } else if (!a) {
              this.__stopTextInput();
            }
          }
          return this.__textEngine.selectable = a;
        },
        set_sharpness: function (a) {
          if (a != this.__textEngine.sharpness) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__textEngine.sharpness = a;
        },
        get_tabEnabled: function () {
          if (this.__tabEnabled == null) {
            return this.__textEngine.type == 1;
          } else {
            return this.__tabEnabled;
          }
        },
        get_text: function () {
          return this.__text;
        },
        set_text: function (a) {
          if (this.__styleSheet != null) {
            return this.set_htmlText(a);
          }
          if (this.__isHTML || this.__text != a) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          } else {
            return a;
          }
          if (this.__textEngine.textFormatRanges.get_length() > 1) {
            var b = this.__textEngine.textFormatRanges;
            var c = this.__textEngine.textFormatRanges.get_length() - 1;
            b.__tempIndex = 1;
            for (var d = 0, e = []; d < e.length;) {
              var f = e[d++];
              b.insertAt(b.__tempIndex, f);
              b.__tempIndex++;
            }
            b.splice(b.__tempIndex, c);
          }
          b = this.__textEngine.textFormatRanges.get(0);
          b.format = this.__textFormat;
          b.start = 0;
          b.end = a.length;
          this.__isHTML = false;
          this.__updateText(a);
          return a;
        },
        set_textColor: function (a) {
          if (a != this.__textFormat.color) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          for (var b = this.__textEngine.textFormatRanges.iterator(); b.hasNext();) {
            b.next().format.color = a;
          }
          return this.__textFormat.color = a;
        },
        get_textWidth: function () {
          this.__updateLayout();
          return this.__textEngine.textWidth;
        },
        get_textHeight: function () {
          this.__updateLayout();
          return this.__textEngine.textHeight;
        },
        get_type: function () {
          return this.__textEngine.type;
        },
        get_width: function () {
          this.__updateLayout();
          return this.__textEngine.width * Math.abs(this.__scaleX);
        },
        set_width: function (a) {
          if (a != this.__textEngine.width) {
            this.__setTransformDirty();
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__textEngine.width = a;
          }
          return this.__textEngine.width * Math.abs(this.__scaleX);
        },
        get_wordWrap: function () {
          return this.__textEngine.wordWrap;
        },
        set_wordWrap: function (a) {
          if (a != this.__textEngine.wordWrap) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__textEngine.wordWrap = a;
        },
        get_x: function () {
          return this.__transform.tx + this.__offsetX;
        },
        set_x: function (a) {
          if (a != this.__transform.tx + this.__offsetX) {
            this.__setTransformDirty();
          }
          this.__transform.tx = a - this.__offsetX;
          return a;
        },
        get_y: function () {
          return this.__transform.ty + this.__offsetY;
        },
        set_y: function (a) {
          if (a != this.__transform.ty + this.__offsetY) {
            this.__setTransformDirty();
          }
          this.__transform.ty = a - this.__offsetY;
          return a;
        },
        stage_onMouseMove: function (a) {
          if (this.stage != null && this.get_selectable() && this.__selectionIndex >= 0) {
            this.__updateLayout();
            a = this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY());
            if (a != this.__caretIndex) {
              this.__caretIndex = a;
              a = true;
              if (Fa.__supportDOM) {
                if (this.__renderedOnCanvasWhileOnDOM) {
                  this.__forceCachedBitmapUpdate = true;
                }
                a = false;
              }
              if (a) {
                this.__dirty = true;
                if (!this.__renderDirty) {
                  this.__renderDirty = true;
                  this.__setParentRenderDirty();
                }
              }
            }
          }
        },
        stage_onMouseUp: function (a) {
          a = a.currentTarget;
          a.removeEventListener("enterFrame", l(this, this.this_onEnterFrame));
          a.removeEventListener("mouseMove", l(this, this.stage_onMouseMove));
          a.removeEventListener("mouseUp", l(this, this.stage_onMouseUp));
          if (this.stage == a && a.get_focus() == this) {
            this.__getWorldTransform();
            this.__updateLayout();
            a = this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY());
            var b = Math.max(this.__selectionIndex, a) | 0;
            this.__selectionIndex = Math.min(this.__selectionIndex, a) | 0;
            this.__caretIndex = b;
            if (this.__inputEnabled) {
              this.this_onFocusIn(null);
              this.__stopCursorTimer();
              this.__startCursorTimer();
              if (Fa.__supportDOM && this.__renderedOnCanvasWhileOnDOM) {
                this.__forceCachedBitmapUpdate = true;
              }
            }
          }
        },
        this_onEnterFrame: function (a) {
          this.__updateMouseDrag();
        },
        this_onFocusIn: function (a) {
          if (this.get_type() == 1 && this.stage != null && this.stage.get_focus() == this) {
            this.__startTextInput();
          } else if (this.get_type() != 1 && this.get_selectable() && this.stage != null && this.stage.get_focus() == this) {
            this.__startCursorTimer();
          }
        },
        this_onFocusOut: function (a) {
          this.__stopCursorTimer();
          this.__stopTextInput();
          if (this.__selectionIndex != this.__caretIndex) {
            this.__selectionIndex = this.__caretIndex;
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        this_onKeyDown: function (a) {
          if (this.get_selectable() && this.get_type() != 1 && a.keyCode == 67 && (a.commandKey || a.ctrlKey)) {
            if (this.__caretIndex != this.__selectionIndex && !this.get_displayAsPassword()) {
              kc.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex));
            }
          }
        },
        this_onMouseDown: function (a) {
          if (this.get_selectable() || this.get_type() == 1) {
            this.__updateLayout();
            this.__selectionIndex = this.__caretIndex = this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY());
            if (!Fa.__supportDOM) {
              this.__dirty = true;
              if (!this.__renderDirty) {
                this.__renderDirty = true;
                this.__setParentRenderDirty();
              }
            }
            if (this.stage != null) {
              this.stage.addEventListener("enterFrame", l(this, this.this_onEnterFrame));
              this.stage.addEventListener("mouseMove", l(this, this.stage_onMouseMove));
              this.stage.addEventListener("mouseUp", l(this, this.stage_onMouseUp));
            }
          }
        },
        this_onMouseWheel: function (a) {
          if (this.get_mouseWheelEnabled()) {
            this.set_scrollV(Math.min(this.get_scrollV() - a.delta, this.get_maxScrollV()) | 0);
          }
        },
        this_onDoubleClick: function (a) {
          if (this.get_selectable()) {
            this.__updateLayout();
            a = "\n.!?, ;:()-_/".split("");
            var b = this.__text;
            var c = -1;
            var d = b.length;
            var e = Math.max(this.__caretIndex, 1) | 0;
            if (b.length > 0 && this.__caretIndex >= 0 && d >= this.__caretIndex) {
              for (var f = 0; f < a.length;) {
                var k = a[f];
                ++f;
                var r = b.lastIndexOf(k, e - 1);
                if (r > c) {
                  c = r + 1;
                }
                r = b.indexOf(k, e);
                if (r < d && r != -1) {
                  d = r;
                }
              }
              if (c != d) {
                this.setSelection(c, d);
                a = true;
                if (Fa.__supportDOM) {
                  if (this.__renderedOnCanvasWhileOnDOM) {
                    this.__forceCachedBitmapUpdate = true;
                  }
                  a = false;
                }
                if (a) {
                  this.__dirty = true;
                  if (!this.__renderDirty) {
                    this.__renderDirty = true;
                    this.__setParentRenderDirty();
                  }
                }
              }
            }
          }
        },
        window_onKeyDown: function (a, b) {
          switch (a) {
            case 8:
              if (this.__selectionIndex == this.__caretIndex && this.__caretIndex > 0) {
                this.__selectionIndex = this.__caretIndex - 1;
              }
              if (this.__selectionIndex != this.__caretIndex) {
                this.replaceSelectedText("");
                this.__selectionIndex = this.__caretIndex;
                this.dispatchEvent(new Ga("change", true));
              } else {
                this.__stopCursorTimer();
                this.__startCursorTimer();
              }
              break;
            case 97:
              if (this.get_selectable() && (Qb.get_metaKey(b) || Qb.get_ctrlKey(b))) {
                this.setSelection(0, this.__text.length);
              }
              break;
            case 99:
              if (Qb.get_metaKey(b) || Qb.get_ctrlKey(b)) {
                if (this.__caretIndex != this.__selectionIndex && !this.get_displayAsPassword()) {
                  kc.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex));
                }
              }
              break;
            case 120:
              if ((!!Qb.get_metaKey(b) || !!Qb.get_ctrlKey(b)) && this.__caretIndex != this.__selectionIndex && !this.get_displayAsPassword()) {
                kc.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex));
                this.replaceSelectedText("");
                this.dispatchEvent(new Ga("change", true));
              }
              break;
            case 127:
              if (this.__selectionIndex == this.__caretIndex && this.__caretIndex < this.__text.length) {
                this.__selectionIndex = this.__caretIndex + 1;
              }
              if (this.__selectionIndex != this.__caretIndex) {
                this.replaceSelectedText("");
                this.__selectionIndex = this.__caretIndex;
                this.dispatchEvent(new Ga("change", true));
              } else {
                this.__stopCursorTimer();
                this.__startCursorTimer();
              }
              break;
            case 1073741898:
              if (this.get_selectable()) {
                if (Qb.get_metaKey(b) || Qb.get_ctrlKey(b)) {
                  this.__caretIndex = 0;
                } else {
                  this.__caretBeginningOfLine();
                }
                if (!Qb.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741901:
              if (this.get_selectable()) {
                if (Qb.get_metaKey(b) || Qb.get_ctrlKey(b)) {
                  this.__caretIndex = this.__text.length;
                } else {
                  this.__caretEndOfLine();
                }
                if (!Qb.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741903:
              if (this.get_selectable()) {
                if (Qb.get_metaKey(b) || Qb.get_ctrlKey(b)) {
                  this.__caretBeginningOfNextLine();
                } else {
                  this.__caretNextCharacter();
                }
                if (!Qb.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741904:
              if (this.get_selectable()) {
                if (Qb.get_metaKey(b) || Qb.get_ctrlKey(b)) {
                  this.__caretBeginningOfPreviousLine();
                } else {
                  this.__caretPreviousCharacter();
                }
                if (!Qb.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741905:
              if (this.get_selectable()) {
                if (Qb.get_metaKey(b) || Qb.get_ctrlKey(b)) {
                  this.__caretIndex = this.__text.length;
                } else {
                  this.__caretNextLine();
                }
                if (!Qb.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741906:
              if (this.get_selectable()) {
                if (Qb.get_metaKey(b) || Qb.get_ctrlKey(b)) {
                  this.__caretIndex = 0;
                } else {
                  this.__caretPreviousLine();
                }
                if (!Qb.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 13:
            case 1073741912:
              if (this.__textEngine.multiline) {
                a = new Xf("textInput", true, true, "\n");
                this.dispatchEvent(a);
                if (!a.isDefaultPrevented()) {
                  this.__replaceSelectedText("\n", true);
                  this.dispatchEvent(new Ga("change", true));
                }
              } else {
                this.__stopCursorTimer();
                this.__startCursorTimer();
              }
          }
        },
        window_onTextInput: function (a) {
          this.__replaceSelectedText(a, true);
          this.dispatchEvent(new Ga("change", true));
        },
        __class__: Xc,
        __properties__: q(tb.prototype.__properties__, {
          set_textColor: "set_textColor",
          set_sharpness: "set_sharpness",
          set_autoSize: "set_autoSize",
          set_wordWrap: "set_wordWrap",
          get_wordWrap: "get_wordWrap",
          get_type: "get_type",
          get_textWidth: "get_textWidth",
          get_textHeight: "get_textHeight",
          set_text: "set_text",
          get_text: "get_text",
          set_selectable: "set_selectable",
          get_selectable: "get_selectable",
          set_scrollV: "set_scrollV",
          get_scrollV: "get_scrollV",
          set_scrollH: "set_scrollH",
          get_scrollH: "get_scrollH",
          get_numLines: "get_numLines",
          set_multiline: "set_multiline",
          get_multiline: "get_multiline",
          get_mouseWheelEnabled: "get_mouseWheelEnabled",
          get_maxScrollV: "get_maxScrollV",
          get_maxScrollH: "get_maxScrollH",
          set_htmlText: "set_htmlText",
          get_htmlText: "get_htmlText",
          set_embedFonts: "set_embedFonts",
          get_embedFonts: "get_embedFonts",
          set_displayAsPassword: "set_displayAsPassword",
          get_displayAsPassword: "get_displayAsPassword",
          set_defaultTextFormat: "set_defaultTextFormat",
          get_defaultTextFormat: "get_defaultTextFormat",
          get_caretIndex: "get_caretIndex",
          get_bottomScrollV: "get_bottomScrollV"
        })
      });
      function ok(a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 10;
        }
        if (a == null) {
          a = 10;
        }
        this.deltaTimeout = 0;
        Xc.call(this);
        this.set_x(a);
        this.set_y(b);
        this.currentFPS = 0;
        this.set_selectable(false);
        this.mouseEnabled = false;
        this.set_defaultTextFormat(new nd("_sans", 14, c));
        this.set_autoSize(1);
        this.set_multiline(true);
        this.set_text("FPS: ");
        this.times = [];
      }
      h["debug.FPSCounter"] = ok;
      ok.__name__ = "debug.FPSCounter";
      ok.__super__ = Xc;
      ok.prototype = q(Xc.prototype, {
        __enterFrame: function (a) {
          if (this.deltaTimeout > 1000) {
            this.deltaTimeout = 0;
          } else {
            var b = new Date().getTime() / 1000 * 1000;
            for (this.times.push(b); this.times[0] < b - 1000;) {
              this.times.shift();
            }
            this.currentFPS = this.times.length < g.updateFramerate ? this.times.length : g.updateFramerate;
            this.updateText();
            this.deltaTimeout += a;
          }
        },
        updateText: function () {
          this.set_text("FPS: " + this.currentFPS + ("\nMemory: " + Yb.formatBytes(Dc.toFloat(ta.__cast(Ti.get_totalMemory(), Vi)))));
          this.set_textColor(-1);
          if (this.currentFPS < g.drawFramerate * 0.5) {
            this.set_textColor(-65536);
          }
        },
        __class__: ok
      });
      function Ak() {}
      h["flixel.IFlxBasic"] = Ak;
      Ak.__name__ = "flixel.IFlxBasic";
      Ak.__isInterface__ = true;
      Ak.prototype = {
        __class__: Ak,
        __properties__: {
          set_visible: "set_visible",
          set_active: "set_active"
        }
      };
      var xf = x["flixel.FlxCameraFollowStyle"] = {
        __ename__: "flixel.FlxCameraFollowStyle",
        __constructs__: null,
        LOCKON: {
          _hx_name: "LOCKON",
          _hx_index: 0,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        PLATFORMER: {
          _hx_name: "PLATFORMER",
          _hx_index: 1,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        TOPDOWN: {
          _hx_name: "TOPDOWN",
          _hx_index: 2,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        TOPDOWN_TIGHT: {
          _hx_name: "TOPDOWN_TIGHT",
          _hx_index: 3,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        SCREEN_BY_SCREEN: {
          _hx_name: "SCREEN_BY_SCREEN",
          _hx_index: 4,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        NO_DEAD_ZONE: {
          _hx_name: "NO_DEAD_ZONE",
          _hx_index: 5,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        }
      };
      xf.__constructs__ = [xf.LOCKON, xf.PLATFORMER, xf.TOPDOWN, xf.TOPDOWN_TIGHT, xf.SCREEN_BY_SCREEN, xf.NO_DEAD_ZONE];
      function Wi(a, b, c) {
        this.major = a;
        this.minor = b;
        this.patch = c;
      }
      h["flixel.system.FlxVersion"] = Wi;
      Wi.__name__ = "flixel.system.FlxVersion";
      Wi.prototype = {
        toString: function () {
          var a = Wi.sha;
          if (a != "") {
            a = "@" + a.substring(0, 7);
          }
          return "HaxeFlixel " + this.major + "." + this.minor + "." + this.patch + a;
        },
        __class__: Wi
      };
      function on() {
        this._lastUniqueKeyIndex = 0;
        this.reset();
      }
      h["flixel.system.frontEnds.BitmapFrontEnd"] = on;
      on.__name__ = "flixel.system.frontEnds.BitmapFrontEnd";
      on.prototype = {
        onAssetsReload: function (a) {
          a = Object.keys(this._cache.h);
          for (var b = a.length, c = 0; c < b;) {
            var d = a[c++];
            d = this._cache.h[d];
            if (d != null && (d.assetsClass != null || d.assetsKey != null)) {
              d.onAssetsReload();
            }
          }
        },
        onContext: function () {
          var a = Object.keys(this._cache.h);
          for (var b = a.length, c = 0; c < b;) {
            var d = a[c++];
            d = this._cache.h[d];
            if (d != null && d.isDumped) {
              d.onContext();
            }
          }
        },
        create: function (a, b, c, d, e) {
          if (d == null) {
            d = false;
          }
          return cc.fromRectangle(a, b, c, d, e);
        },
        add: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          if (a instanceof cc) {
            return cc.fromGraphic(a, b, c);
          } else if (a instanceof T) {
            return cc.fromBitmapData(a, b, c);
          } else {
            return cc.fromAssetKey(H.string(a), b, c);
          }
        },
        findKeyForBitmap: function (a) {
          var b = Object.keys(this._cache.h);
          for (var c = b.length, d = 0; d < c;) {
            var e = b[d++];
            var f = this._cache.h[e];
            if (f != null && f.bitmap == a) {
              return e;
            }
          }
          return null;
        },
        generateKey: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = a;
          }
          if (c || b == null) {
            b = this.getUniqueKey(b);
          }
          return b;
        },
        getUniqueKey: function (a) {
          if (a == null) {
            a = "pixels";
          }
          if (this._cache.h[a] == null) {
            return a;
          }
          var b = this._lastUniqueKeyIndex;
          do {
            ++b;
            var c = a + b;
          } while (this._cache.h[c] != null);
          this._lastUniqueKeyIndex = b;
          return c;
        },
        remove: function (a) {
          if (a != null) {
            var b = a.key;
            if (b != null) {
              W.cache.removeBitmapData(b);
              var c = this._cache;
              if (Object.prototype.hasOwnProperty.call(c.h, b)) {
                delete c.h[b];
              }
            }
            if (a.shader != null) {
              a.destroy();
            }
          }
        },
        removeByKey: function (a) {
          if (a != null) {
            var b = this._cache.h[a];
            if (a != null) {
              W.cache.removeBitmapData(a);
              var c = this._cache;
              if (Object.prototype.hasOwnProperty.call(c.h, a)) {
                delete c.h[a];
              }
            }
            if (b != null) {
              b.destroy();
            }
          }
        },
        removeIfNoUse: function (a) {
          if (a != null && a.useCount == 0 && !a.persist) {
            this.remove(a);
          }
        },
        clearCache: function () {
          if (this._cache == null) {
            this._cache = new V();
          } else {
            var a = Object.keys(this._cache.h);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              var e = this._cache.h[d];
              if (e != null && !e.persist && e.useCount <= 0) {
                if (d != null) {
                  W.cache.removeBitmapData(d);
                  var f = this._cache;
                  if (Object.prototype.hasOwnProperty.call(f.h, d)) {
                    delete f.h[d];
                  }
                }
                e.destroy();
              }
            }
          }
        },
        reset: function () {
          if (this._cache == null) {
            this._cache = new V();
          } else {
            var a = Object.keys(this._cache.h);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              var e = this._cache.h[d];
              if (d != null) {
                W.cache.removeBitmapData(d);
                var f = this._cache;
                if (Object.prototype.hasOwnProperty.call(f.h, d)) {
                  delete f.h[d];
                }
              }
              if (e != null) {
                e.destroy();
              }
            }
          }
        },
        __class__: on
      };
      function pn() {
        this.useBufferLocking = false;
        this.cameraResized = new wf();
        this.cameraRemoved = new wf();
        this.cameraAdded = new wf();
        this.defaults = [];
        this.list = [];
        Vb._defaultCameras = this.defaults;
      }
      h["flixel.system.frontEnds.CameraFrontEnd"] = pn;
      pn.__name__ = "flixel.system.frontEnds.CameraFrontEnd";
      pn.prototype = {
        add: function (a, b) {
          if (b == null) {
            b = true;
          }
          g.game.addChildAt(a.flashSprite, g.game.getChildIndex(g.game._inputContainer));
          this.list.push(a);
          if (b) {
            this.defaults.push(a);
          }
          a.ID = this.list.length - 1;
          this.cameraAdded.dispatch(a);
          return a;
        },
        remove: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this.list.indexOf(a);
          if (a != null && c != -1) {
            g.game.removeChild(a.flashSprite);
            this.list.splice(c, 1);
            M.remove(this.defaults, a);
            if (g.renderTile) {
              c = 0;
              for (var d = this.list.length; c < d;) {
                var e = c++;
                this.list[e].ID = e;
              }
            }
            if (b) {
              a.destroy();
            }
            this.cameraRemoved.dispatch(a);
          } else {
            g.log.advanced("FlxG.cameras.remove(): The camera you attempted to remove is not a part of the game.", Ba.WARNING, true);
          }
        },
        setDefaultDrawTarget: function (a, b) {
          if (this.list.indexOf(a) == -1) {
            g.log.advanced("FlxG.cameras.setDefaultDrawTarget(): The specified camera is not a part of the game.", Ba.WARNING, true);
          } else {
            var c = this.defaults.indexOf(a);
            if (b && c == -1) {
              this.defaults.push(a);
            } else if (!b) {
              this.defaults.splice(c, 1);
            }
          }
        },
        reset: function (a) {
          while (this.list.length > 0) {
            this.remove(this.list[0]);
          }
          if (a == null) {
            a = new Vb(0, 0, g.width, g.height);
          }
          g.camera = this.add(a);
          a.ID = 0;
          Vb._defaultCameras = this.defaults;
        },
        resize: function () {
          for (var a = 0, b = this.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.onResize();
          }
        },
        get_bgColor: function () {
          if (g.camera == null) {
            return -16777216;
          } else {
            return g.camera.bgColor;
          }
        },
        set_bgColor: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            d.bgColor = a;
          }
          return a;
        },
        __class__: pn,
        __properties__: {
          set_bgColor: "set_bgColor",
          get_bgColor: "get_bgColor"
        }
      };
      function qn() {
        this.visible = false;
        this.visibilityChanged = new Zd();
        this.precision = 3;
      }
      h["flixel.system.frontEnds.DebuggerFrontEnd"] = qn;
      qn.__name__ = "flixel.system.frontEnds.DebuggerFrontEnd";
      qn.prototype = {
        __class__: qn
      };
      function rn() {
        this.resetOnStateSwitch = true;
        this.list = [];
      }
      h["flixel.system.frontEnds.InputFrontEnd"] = rn;
      rn.__name__ = "flixel.system.frontEnds.InputFrontEnd";
      rn.prototype = {
        add_flixel_input_gamepad_FlxGamepadManager: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            if (Yb.getClassName(a, true) == Yb.getClassName(d, true)) {
              return a;
            }
          }
          this.list.push(a);
          return a;
        },
        add_flixel_input_touch_FlxTouchManager: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            if (Yb.getClassName(a, true) == Yb.getClassName(d, true)) {
              return a;
            }
          }
          this.list.push(a);
          return a;
        },
        replace_flixel_input_mouse_FlxMouse: function (a, b) {
          var c = 0;
          var d = false;
          for (var e = 0, f = this.list; e < f.length;) {
            var k = f[e];
            ++e;
            if (k == a) {
              this.list[c] = b;
              d = true;
              break;
            }
            ++c;
          }
          if (d) {
            return b;
          } else {
            return null;
          }
        },
        add_flixel_input_mouse_FlxMouse: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            if (Yb.getClassName(a, true) == Yb.getClassName(d, true)) {
              return a;
            }
          }
          this.list.push(a);
          return a;
        },
        add_flixel_input_keyboard_FlxKeyboard: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            if (Yb.getClassName(a, true) == Yb.getClassName(d, true)) {
              return a;
            }
          }
          this.list.push(a);
          return a;
        },
        reset: function () {
          for (var a = 0, b = this.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.reset();
          }
        },
        onStateSwitch: function () {
          if (this.resetOnStateSwitch) {
            this.reset();
          }
        },
        __class__: rn
      };
      function sn() {
        this._standardTraceFunction = yb.trace;
      }
      h["flixel.system.frontEnds.LogFrontEnd"] = sn;
      sn.__name__ = "flixel.system.frontEnds.LogFrontEnd";
      sn.prototype = {
        advanced: function (a, b, c) {
          if (b == null) {
            b = Ba.NORMAL;
          }
          if (!(a instanceof Array)) {
            a = [a];
          }
          if (b.throwException) {
            throw K.thrown(b.toLogString(a));
          }
        },
        __class__: sn
      };
      function yb() {}
      h["haxe.Log"] = yb;
      yb.__name__ = "haxe.Log";
      yb.formatOutput = function (a, b) {
        var c = H.string(a);
        if (b == null) {
          return c;
        }
        var d = b.fileName + ":" + b.lineNumber;
        if (b.customParams != null) {
          var e = 0;
          for (b = b.customParams; e < b.length;) {
            a = b[e];
            ++e;
            c += ", " + H.string(a);
          }
        }
        return d + ": " + c;
      };
      yb.trace = function (a, b) {
        a = yb.formatOutput(a, b);
        if (typeof console != "undefined" && console.log != null) {
          console.log(a);
        }
      };
      function ta() {}
      h["js.Boot"] = ta;
      ta.__name__ = "js.Boot";
      ta.getClass = function (a) {
        if (a == null) {
          return null;
        }
        if (a instanceof Array) {
          return Array;
        }
        var b = a.__class__;
        if (b != null) {
          return b;
        }
        a = ta.__nativeClassName(a);
        if (a != null) {
          return ta.__resolveNativeClass(a);
        } else {
          return null;
        }
      };
      ta.__string_rec = function (a, b) {
        if (a == null) {
          return "null";
        }
        if (b.length >= 5) {
          return "<...>";
        }
        var c = typeof a;
        if (c == "function" && (a.__name__ || a.__ename__)) {
          c = "object";
        }
        switch (c) {
          case "function":
            return "<function>";
          case "object":
            if (a.__enum__) {
              var d = x[a.__enum__].__constructs__[a._hx_index];
              c = d._hx_name;
              if (d.__params__) {
                b += "\t";
                var e = [];
                var f = 0;
                for (d = d.__params__; f < d.length;) {
                  var k = d[f];
                  f += 1;
                  e.push(ta.__string_rec(a[k], b));
                }
                return c + "(" + e.join(",") + ")";
              }
              return c;
            }
            if (a instanceof Array) {
              c = "[";
              b += "\t";
              e = 0;
              for (f = a.length; e < f;) {
                d = e++;
                c += (d > 0 ? "," : "") + ta.__string_rec(a[d], b);
              }
              return c + "]";
            }
            try {
              e = a.toString;
            } catch (r) {
              Na.lastError = r;
              return "???";
            }
            if (e != null && e != Object.toString && typeof e == "function" && (c = a.toString(), c != "[object Object]")) {
              return c;
            }
            c = "{\n";
            b += "\t";
            e = a.hasOwnProperty != null;
            f = null;
            for (f in a) {
              if ((!e || !!a.hasOwnProperty(f)) && f != "prototype" && f != "__class__" && f != "__super__" && f != "__interfaces__" && f != "__properties__") {
                if (c.length != 2) {
                  c += ", \n";
                }
                c += b + f + " : " + ta.__string_rec(a[f], b);
              }
            }
            b = b.substring(1);
            return c + ("\n" + b + "}");
          case "string":
            return a;
          default:
            return String(a);
        }
      };
      ta.__interfLoop = function (a, b) {
        if (a == null) {
          return false;
        }
        if (a == b) {
          return true;
        }
        var c = a.__interfaces__;
        if (c != null) {
          for (var d = 0, e = c.length; d < e;) {
            var f = d++;
            f = c[f];
            if (f == b || ta.__interfLoop(f, b)) {
              return true;
            }
          }
        }
        return ta.__interfLoop(a.__super__, b);
      };
      ta.__instanceof = function (a, b) {
        if (b == null) {
          return false;
        }
        switch (b) {
          case Array:
            return a instanceof Array;
          case Hp:
            return typeof a == "boolean";
          case Ip:
            return a != null;
          case tp:
            return typeof a == "number";
          case Vi:
            if (typeof a == "number") {
              return (a | 0) === a;
            } else {
              return false;
            }
          case String:
            return typeof a == "string";
          default:
            if (a != null) {
              if (typeof b == "function") {
                if (ta.__downcastCheck(a, b)) {
                  return true;
                }
              } else if (typeof b == "object" && ta.__isNativeObj(b) && a instanceof b) {
                return true;
              }
            } else {
              return false;
            }
            if (b == Xi && a.__name__ != null || b == zp && a.__ename__ != null) {
              return true;
            } else if (a.__enum__ != null) {
              return x[a.__enum__] == b;
            } else {
              return false;
            }
        }
      };
      ta.__downcastCheck = function (a, b) {
        if (a instanceof b) {
          return true;
        } else if (b.__isInterface__) {
          return ta.__interfLoop(ta.getClass(a), b);
        } else {
          return false;
        }
      };
      ta.__implements = function (a, b) {
        return ta.__interfLoop(ta.getClass(a), b);
      };
      ta.__cast = function (a, b) {
        if (a == null || ta.__instanceof(a, b)) {
          return a;
        }
        throw K.thrown("Cannot cast " + H.string(a) + " to " + H.string(b));
      };
      ta.__nativeClassName = function (a) {
        a = ta.__toStr.call(a).slice(8, -1);
        if (a == "Object" || a == "Function" || a == "Math" || a == "JSON") {
          return null;
        } else {
          return a;
        }
      };
      ta.__isNativeObj = function (a) {
        return ta.__nativeClassName(a) != null;
      };
      ta.__resolveNativeClass = function (a) {
        return I[a];
      };
      function Yi(a) {
        this.initialSeed = this.internalSeed = 1;
        if (a != null) {
          a = a < 1 ? 1 : a;
          a = (a > 2147483646 ? 2147483646 : a) | 0;
        } else {
          a = Math.random() * 2147483647 | 0;
          a = a < 1 ? 1 : a;
          a = (a > 2147483646 ? 2147483646 : a) | 0;
          a = a < 1 ? 1 : a;
          a = (a > 2147483646 ? 2147483646 : a) | 0;
        }
        a = a < 1 ? 1 : a;
        this.initialSeed = (this.internalSeed = (a > 2147483646 ? 2147483646 : a) | 0) | 0;
      }
      h["flixel.math.FlxRandom"] = Yi;
      Yi.__name__ = "flixel.math.FlxRandom";
      Yi.prototype = {
        getObject_Array_String: function (a, b, c, d) {
          if (c == null) {
            c = 0;
          }
          var e = null;
          if (a.length != 0) {
            if (b == null) {
              e = [];
              for (var f = 0, k = a.length; f < k;) {
                f++;
                e.push(1);
              }
              b = e;
            }
            if (d == null) {
              d = a.length - 1;
            }
            e = a.length - 1;
            f = c < 0 ? 0 : c;
            c = (e != null && f > e ? e : f) | 0;
            e = a.length - 1;
            f = d < 0 ? 0 : d;
            d = (e != null && f > e ? e : f) | 0;
            if (d < c) {
              c += d;
              d = c - d;
              c -= d;
            }
            if (d > b.length - 1) {
              d = b.length - 1;
            }
            e = [];
            f = c;
            for (k = d + 1; f < k;) {
              d = f++;
              e.push(b[d]);
            }
            Yi._arrayFloatHelper = e;
            e = a[c + this.weightedPick(Yi._arrayFloatHelper)];
          }
          return e;
        },
        int: function (a, b, c) {
          if (b == null) {
            b = 2147483647;
          }
          if (a == null) {
            a = 0;
          }
          if (a == 0 && b == 2147483647 && c == null) {
            return (this.internalSeed = this.internalSeed * 48271 % 2147483647) | 0;
          }
          if (a == b) {
            return a;
          }
          if (a > b) {
            a += b;
            b = a - b;
            a -= b;
          }
          if (c == null) {
            return Math.floor(a + (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647 * (b - a + 1));
          }
          do {
            var d = Math.floor(a + (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647 * (b - a + 1));
          } while (c.indexOf(d) >= 0);
          return d;
        },
        float: function (a, b, c) {
          if (b == null) {
            b = 1;
          }
          if (a == null) {
            a = 0;
          }
          if (a == 0 && b == 1 && c == null) {
            return (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647;
          }
          if (a == b) {
            var d = a;
          } else {
            if (a > b) {
              a += b;
              b = a - b;
              a -= b;
            }
            if (c == null) {
              d = a + (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647 * (b - a);
            } else {
              do {
                d = a + (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647 * (b - a);
              } while (c.indexOf(d) >= 0);
            }
          }
          return d;
        },
        weightedPick: function (a) {
          var b = 0;
          var c = 0;
          for (var d = 0; d < a.length;) {
            var e = a[d];
            ++d;
            b += e;
          }
          b = this.float(0, b);
          d = 0;
          for (var f = a.length; d < f;) {
            e = d++;
            if (b < a[e]) {
              c = e;
              break;
            }
            b -= a[e];
          }
          return c;
        },
        __class__: Yi
      };
      function Nd() {
        this.status = ph.EMPTY;
      }
      h["flixel.util.FlxSave"] = Nd;
      Nd.__name__ = "flixel.util.FlxSave";
      Nd.__interfaces__ = [B];
      Nd.validate = function (a) {
        return a;
      };
      Nd.validateAndWarn = function (a, b) {
        return Nd.validate(a);
      };
      Nd.prototype = {
        destroy: function () {
          this._sharedObject = null;
          this.status = ph.EMPTY;
          this.data = null;
        },
        bind: function (a, b) {
          this.destroy();
          a = Nd.validateAndWarn(a, "name");
          if (b != null) {
            b = Nd.validateAndWarn(b, "path");
          }
          try {
            this._sharedObject = cd.getLocal(a, b);
            this.status = ph.BOUND(a, b);
          } catch (d) {
            var c = K.caught(d);
            if (c instanceof Rb) {
              g.log.advanced("Error:" + c.get_message() + " name:\"" + a + "\", path:\"" + b + "\".", Ba.ERROR, true);
              this.destroy();
              return false;
            }
            throw d;
          }
          this.data = this._sharedObject.data;
          return true;
        },
        mergeDataFrom: function (a, b, c, d, e) {
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = false;
          }
          if (!this.checkStatus()) {
            return false;
          }
          var f = new Nd();
          if (f.bind(a, b)) {
            a = this.mergeData(f.data, c, e);
            if (d) {
              f.erase();
            }
            f.destroy();
            return a;
          }
          f.destroy();
          return false;
        },
        mergeData: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          var d = false;
          for (var e = 0, f = ma.fields(a); e < f.length;) {
            var k = f[e];
            ++e;
            d = true;
            if (b || !Object.prototype.hasOwnProperty.call(this.data, k)) {
              this.data[k] = ma.field(a, k);
            }
          }
          if (d) {
            return this.flush(c);
          } else {
            return true;
          }
        },
        flush: function (a) {
          if (a == null) {
            a = 0;
          }
          if (!this.checkStatus()) {
            return false;
          }
          try {
            if (this._sharedObject.flush(a) != 0) {
              this.status = ph.ERROR("FlxSave is requesting extra storage space.");
            }
          } catch (b) {
            if (K.caught(b) instanceof Rb) {
              this.status = ph.ERROR("There was an problem flushing the save data.");
            } else {
              throw b;
            }
          }
          this.checkStatus();
          if (this.status._hx_index == 1) {
            return true;
          } else {
            return false;
          }
        },
        erase: function () {
          if (!this.checkStatus()) {
            return false;
          }
          this._sharedObject.clear();
          this.data = {};
          return true;
        },
        checkStatus: function () {
          var a = this.status;
          switch (a._hx_index) {
            case 0:
              g.log.advanced("You must call FlxSave.bind() before you can read or write data.", Ba.WARNING, true);
              break;
            case 2:
              g.log.advanced(a.msg, Ba.ERROR, true);
              break;
            default:
              return true;
          }
          return false;
        },
        isEmpty: function () {
          if (this.data != null) {
            return ma.fields(this.data).length == 0;
          } else {
            return true;
          }
        },
        __class__: Nd
      };
      function Zi() {
        this.verticalAlign = tn.CENTER;
        this.horizontalAlign = un.CENTER;
        var a = 0;
        var b = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = fa.pool.get().set(a, b);
        a._inPool = false;
        this.deviceSize = a;
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = fa.pool.get().set(a, b);
        a._inPool = false;
        this.gameSize = a;
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = fa.pool.get().set(a, b);
        a._inPool = false;
        this.scale = a;
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = fa.pool.get().set(a, b);
        a._inPool = false;
        this.offset = a;
      }
      h["flixel.system.scaleModes.BaseScaleMode"] = Zi;
      Zi.__name__ = "flixel.system.scaleModes.BaseScaleMode";
      Zi.prototype = {
        onMeasure: function (a, b) {
          g.width = g.initialWidth;
          g.height = g.initialHeight;
          this.updateGameSize(a, b);
          this.updateDeviceSize(a, b);
          this.updateScaleOffset();
          this.updateGamePosition();
        },
        updateGameSize: function (a, b) {
          var c = this.gameSize;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
        },
        updateDeviceSize: function (a, b) {
          var c = this.deviceSize;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
        },
        updateScaleOffset: function () {
          this.scale.set_x(this.gameSize.x / g.width);
          this.scale.set_y(this.gameSize.y / g.height);
          this.updateOffsetX();
          this.updateOffsetY();
        },
        updateOffsetX: function () {
          var a = this.offset;
          switch (this.horizontalAlign._hx_index) {
            case 0:
              var b = 0;
              break;
            case 1:
              b = Math.ceil((this.deviceSize.x - this.gameSize.x) * 0.5);
              break;
            case 2:
              b = this.deviceSize.x - this.gameSize.x;
          }
          a.set_x(b);
        },
        updateOffsetY: function () {
          var a = this.offset;
          switch (this.verticalAlign._hx_index) {
            case 0:
              var b = 0;
              break;
            case 1:
              b = Math.ceil((this.deviceSize.y - this.gameSize.y) * 0.5);
              break;
            case 2:
              b = this.deviceSize.y - this.gameSize.y;
          }
          a.set_y(b);
        },
        updateGamePosition: function () {
          if (g.game != null) {
            g.game.set_x(this.offset.x);
            g.game.set_y(this.offset.y);
          }
        },
        __class__: Zi
      };
      function Bk(a) {
        if (a == null) {
          a = false;
        }
        Zi.call(this);
        this.fillScreen = a;
      }
      h["flixel.system.scaleModes.RatioScaleMode"] = Bk;
      Bk.__name__ = "flixel.system.scaleModes.RatioScaleMode";
      Bk.__super__ = Zi;
      Bk.prototype = q(Zi.prototype, {
        updateGameSize: function (a, b) {
          var c = g.width / g.height;
          var d = a / b < c;
          if (this.fillScreen) {
            d = !d;
          }
          if (d) {
            this.gameSize.set_x(a);
            this.gameSize.set_y(Math.floor(this.gameSize.x / c));
          } else {
            this.gameSize.set_y(b);
            this.gameSize.set_x(Math.floor(this.gameSize.y * c));
          }
        },
        __class__: Bk
      });
      function vn() {
        this.focusLost = new Zd();
        this.focusGained = new Zd();
        this.postDraw = new Zd();
        this.preDraw = new Zd();
        this.postUpdate = new Zd();
        this.preUpdate = new Zd();
        this.postGameStart = new Zd();
        this.preGameStart = new Zd();
        this.postGameReset = new Zd();
        this.preGameReset = new Zd();
        this.gameResized = new Ck();
        this.preStateCreate = new wf();
        this.postStateSwitch = new Zd();
        this.preStateSwitch = new Zd();
      }
      h["flixel.system.frontEnds.SignalFrontEnd"] = vn;
      vn.__name__ = "flixel.system.frontEnds.SignalFrontEnd";
      vn.prototype = {
        __class__: vn
      };
      function g() {}
      h["flixel.FlxG"] = g;
      g.__name__ = "flixel.FlxG";
      g.__properties__ = {
        set_mouse: "set_mouse",
        set_fullscreen: "set_fullscreen",
        get_fullscreen: "get_fullscreen",
        set_drawFramerate: "set_drawFramerate",
        set_updateFramerate: "set_updateFramerate"
      };
      g.canSwitchTo = function (a) {
        return g.game._state.switchTo(a);
      };
      g.overlap = function (a, b, c, d) {
        if (a == null) {
          a = g.game._state;
        }
        if (b == a) {
          b = null;
        }
        S.divisions = g.worldDivisions;
        var e = S.recycle(g.worldBounds.x, g.worldBounds.y, g.worldBounds.width, g.worldBounds.height);
        e.load(a, b, c, d);
        a = e.execute();
        e.destroy();
        return a;
      };
      g.addChildBelowMouse = function (a, b) {
        if (b == null) {
          b = 0;
        }
        var c = g.game.getChildIndex(g.game._inputContainer);
        var d = g.game.get_numChildren();
        c = $b.maxAdd(c, b, d);
        g.game.addChildAt(a, c);
        return a;
      };
      g.init = function (a, b, c) {
        if (b < 0) {
          b = -b;
        }
        if (c < 0) {
          c = -c;
        }
        g.game = a;
        g.width = b;
        g.height = c;
        g.initRenderMethod();
        g.initialWidth = b;
        g.initialHeight = c;
        b = na.get_current().stage.stageWidth;
        c = na.get_current().stage.stageHeight;
        g.scaleMode.onMeasure(b, c);
        g.keys = g.inputs.add_flixel_input_keyboard_FlxKeyboard(new Dk());
        g.set_mouse(g.inputs.add_flixel_input_mouse_FlxMouse(new lg(a._inputContainer)));
        g.touches = g.inputs.add_flixel_input_touch_FlxTouchManager(new Uh());
        g.gamepads = g.inputs.add_flixel_input_gamepad_FlxGamepadManager(new mg());
        g.accelerometer = new wn();
        g.initSave();
        g.plugins = new xn();
        g.vcr = new yn();
        g.sound = new zn();
      };
      g.initRenderMethod = function () {
        g.renderMethod = Vh.BLITTING;
        switch (na.get_current().stage.window.context.type) {
          case "opengl":
          case "opengles":
          case "webgl":
            var a = Vh.DRAW_TILES;
            break;
          default:
            a = Vh.BLITTING;
        }
        g.renderMethod = a;
        g.renderBlit = g.renderMethod == Vh.BLITTING;
        g.renderTile = g.renderMethod == Vh.DRAW_TILES;
        hc.defaultPixelPerfectPosition = g.renderBlit;
      };
      g.initSave = function () {
        if (g.save.status._hx_index != 1) {
          var a = na.get_current().stage.application.meta.h.file;
          g.save.bind(Nd.validate(a));
          if (g.save.isEmpty()) {
            g.save.mergeDataFrom("flixel", null, false, false);
          }
        }
      };
      g.reset = function () {
        var a = g.random;
        var b = Math.random() * 2147483647 | 0;
        b = b < 1 ? 1 : b;
        b = (b > 2147483646 ? 2147483646 : b) | 0;
        b = b < 1 ? 1 : b;
        b = (b > 2147483646 ? 2147483646 : b) | 0;
        b = b < 1 ? 1 : b;
        a.initialSeed = (a.internalSeed = (b > 2147483646 ? 2147483646 : b) | 0) | 0;
        g.bitmap.reset();
        g.inputs.reset();
        g.sound.destroy(true);
        g.autoPause = true;
        g.fixedTimestep = true;
        g.timeScale = 1;
        g.animationTimeScale = 1;
        g.elapsed = 0;
        g.maxElapsed = 0.1;
        a = g.worldBounds;
        var c = b = -10;
        var d = g.width + 20;
        var e = g.height + 20;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.x = b;
        a.y = c;
        a.width = d;
        a.height = e;
        g.worldDivisions = 6;
      };
      g.set_mouse = function (a) {
        if (g.mouse == null) {
          g.mouse = g.inputs.add_flixel_input_mouse_FlxMouse(a);
          return g.mouse;
        }
        var b = g.mouse;
        var c = g.inputs.replace_flixel_input_mouse_FlxMouse(b, a);
        if (c != null) {
          g.mouse = c;
          b.destroy();
          return a;
        } else {
          return b;
        }
      };
      g.set_updateFramerate = function (a) {
        if (a < g.drawFramerate) {
          g.log.advanced("FlxG.framerate: the game's framerate shouldn't be smaller than the flash framerate, since it can stop your game from updating.", Ba.WARNING, true);
        }
        g.updateFramerate = a;
        g.game._stepMS = Math.abs(1000 / a);
        g.game._stepSeconds = g.game._stepMS / 1000;
        if (g.game._maxAccumulation < g.game._stepMS) {
          g.game._maxAccumulation = g.game._stepMS;
        }
        return a;
      };
      g.set_drawFramerate = function (a) {
        if (a > g.updateFramerate) {
          g.log.advanced("FlxG.drawFramerate: the update framerate shouldn't be smaller than the draw framerate, since it can stop your game from updating.", Ba.WARNING, true);
        }
        g.drawFramerate = Math.abs(a) | 0;
        if (g.game.stage != null) {
          g.game.stage.set_frameRate(g.drawFramerate);
        }
        g.game._maxAccumulation = 2000 / g.drawFramerate - 1;
        if (g.game._maxAccumulation < g.game._stepMS) {
          g.game._maxAccumulation = g.game._stepMS;
        }
        return a;
      };
      g.get_fullscreen = function () {
        if (na.get_current().stage.get_displayState() != 0) {
          return na.get_current().stage.get_displayState() == 1;
        } else {
          return true;
        }
      };
      g.set_fullscreen = function (a) {
        na.get_current().stage.set_displayState(a ? 0 : 2);
        return a;
      };
      var Vh = x["flixel.FlxRenderMethod"] = {
        __ename__: "flixel.FlxRenderMethod",
        __constructs__: null,
        DRAW_TILES: {
          _hx_name: "DRAW_TILES",
          _hx_index: 0,
          __enum__: "flixel.FlxRenderMethod",
          toString: p
        },
        BLITTING: {
          _hx_name: "BLITTING",
          _hx_index: 1,
          __enum__: "flixel.FlxRenderMethod",
          toString: p
        }
      };
      Vh.__constructs__ = [Vh.DRAW_TILES, Vh.BLITTING];
      function nk(a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = 60;
        }
        if (d == null) {
          d = 60;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._skipSplash = this._resetGame = false;
        this._customSoundTray = Ek;
        this._lostFocus = false;
        this._total = this._startTime = 0;
        this._gameJustStarted = false;
        this.filtersEnabled = true;
        this.ticks = 0;
        this.focusLostFramerate = 10;
        $a.call(this);
        this._inputContainer = new $a();
        if (a == 0) {
          a = na.get_current().stage.stageWidth;
        }
        if (b == 0) {
          b = na.get_current().stage.stageHeight;
        }
        g.init(this, a, b);
        g.set_updateFramerate(d);
        g.set_drawFramerate(e);
        this._accumulator = this._stepMS;
        this._skipSplash = f;
        this._initialState = c == null ? Fg.fromMaker(function () {
          return new lc();
        }) : xp.toNextState(c);
        this.addEventListener("addedToStage", l(this, this.create));
      }
      h["flixel.FlxGame"] = nk;
      nk.__name__ = "flixel.FlxGame";
      nk.__super__ = $a;
      nk.prototype = q($a.prototype, {
        create: function (a) {
          if (this.stage != null) {
            this.removeEventListener("addedToStage", l(this, this.create));
            this._startTime = this.getTimer();
            this._total = this.getTimer() - this._startTime;
            this.stage.set_scaleMode(2);
            this.stage.align = 6;
            this.stage.set_frameRate(g.drawFramerate);
            this.addChild(this._inputContainer);
            this.soundTray = Db.createInstance(this._customSoundTray, []);
            this.addChild(this.soundTray);
            this.stage.addEventListener("deactivate", l(this, this.onFocusLost));
            this.stage.addEventListener("activate", l(this, this.onFocus));
            var b = this;
            g.signals.preGameReset.dispatch();
            if (this._skipSplash) {
              this._nextState = this._initialState;
              this._gameJustStarted = true;
            } else {
              this._nextState = Fg.fromMaker(function () {
                return new $i(b._initialState);
              });
              this._skipSplash = true;
            }
            g.reset();
            g.signals.postGameReset.dispatch();
            this.switchState();
            if (g.updateFramerate < g.drawFramerate) {
              g.log.advanced("FlxG.updateFramerate: The update framerate shouldn't be smaller than the draw framerate, since it can slow down your game.", Ba.WARNING, true);
            }
            this.stage.addEventListener("enterFrame", l(this, this.onEnterFrame));
            this.stage.addEventListener("resize", l(this, this.onResize));
            this.resizeGame(na.get_current().stage.stageWidth, na.get_current().stage.stageHeight);
            W.addEventListener("change", (u = g.bitmap, l(u, u.onAssetsReload)));
          }
        },
        onFocus: function (a) {
          this._lostFocus = false;
          g.signals.focusGained.dispatch();
          this._state.onFocus();
          if (g.autoPause) {
            this.stage.set_frameRate(g.drawFramerate);
            g.sound.onFocus();
            a = 0;
            for (var b = g.inputs.list; a < b.length;) {
              var c = b[a];
              ++a;
              c.onFocus();
            }
          }
        },
        onFocusLost: function (a) {
          this._lostFocus = true;
          g.signals.focusLost.dispatch();
          this._state.onFocusLost();
          if (g.autoPause) {
            this.stage.set_frameRate(this.focusLostFramerate);
            g.sound.onFocusLost();
            a = 0;
            for (var b = g.inputs.list; a < b.length;) {
              var c = b[a];
              ++a;
              c.onFocusLost();
            }
          }
        },
        onResize: function (a) {
          a = na.get_current().stage.stageWidth;
          var b = na.get_current().stage.stageHeight;
          if (g.renderTile) {
            g.bitmap.onContext();
          }
          this.resizeGame(a, b);
        },
        resizeGame: function (a, b) {
          g.scaleMode.onMeasure(a, b);
          this._state.onResize(a, b);
          g.cameras.resize();
          g.signals.gameResized.dispatch(a, b);
          if (this.soundTray != null) {
            this.soundTray.screenCenter();
          }
        },
        onEnterFrame: function (a) {
          this.ticks = this.getTimer() - this._startTime;
          this._elapsedMS = this.ticks - this._total;
          this._total = this.ticks;
          if (this.soundTray != null && this.soundTray.active) {
            this.soundTray.update(this._elapsedMS);
          }
          if (!this._lostFocus || !g.autoPause) {
            if (g.vcr.paused) {
              if (g.vcr.stepRequested) {
                g.vcr.stepRequested = false;
              } else if (this._nextState == null) {
                return;
              }
            }
            if (g.fixedTimestep) {
              this._accumulator += this._elapsedMS;
              this._accumulator = this._accumulator > this._maxAccumulation ? this._maxAccumulation : this._accumulator;
              while (this._accumulator >= this._stepMS) {
                this.step();
                this._accumulator -= this._stepMS;
              }
            } else {
              this.step();
            }
            this.draw();
          }
        },
        switchState: function () {
          g.cameras.reset();
          g.inputs.onStateSwitch();
          g.sound.destroy();
          g.signals.preStateSwitch.dispatch();
          if (this._state != null) {
            this._state.destroy();
          }
          g.bitmap.clearCache();
          this._state = Fg.createInstance(this._nextState);
          this._state._constructor = this._nextState;
          this._nextState = null;
          if (this._gameJustStarted) {
            g.signals.preGameStart.dispatch();
          }
          g.signals.preStateCreate.dispatch(this._state);
          this._state.create();
          if (this._gameJustStarted) {
            this.gameStart();
          }
          g.signals.postStateSwitch.dispatch();
        },
        gameStart: function () {
          g.signals.postGameStart.dispatch();
          this._gameJustStarted = false;
        },
        step: function () {
          if (this._resetGame) {
            var a = this;
            g.signals.preGameReset.dispatch();
            if (this._skipSplash) {
              this._nextState = this._initialState;
              this._gameJustStarted = true;
            } else {
              this._nextState = Fg.fromMaker(function () {
                return new $i(a._initialState);
              });
              this._skipSplash = true;
            }
            g.reset();
            g.signals.postGameReset.dispatch();
            this._resetGame = false;
          }
          this.handleReplayRequests();
          this.update();
        },
        handleReplayRequests: function () {},
        update: function () {
          if (this._state.active && this._state.exists) {
            if (this._nextState != null) {
              this.switchState();
            }
            this.updateElapsed();
            g.signals.preUpdate.dispatch();
            this.updateInput();
            g.sound.update(g.elapsed);
            var a = g.elapsed;
            for (var b = 0, c = g.plugins.list; b < c.length;) {
              var d = c[b];
              ++b;
              if (d.exists && d.active) {
                d.update(a);
              }
            }
            this._state.tryUpdate(g.elapsed);
            a = g.elapsed;
            b = 0;
            for (c = g.cameras.list; b < c.length;) {
              d = c[b];
              ++b;
              if (d != null && d.exists && d.active) {
                d.update(a);
              }
            }
            g.signals.postUpdate.dispatch();
            for (a = g.swipes.length; a-- > 0;) {
              b = g.swipes.pop();
              if (b != null) {
                b.destroy();
              }
            }
            this.set_filters(this.filtersEnabled ? this._filters : null);
          }
        },
        updateElapsed: function () {
          if (g.fixedTimestep) {
            g.elapsed = g.timeScale * this._stepSeconds;
          } else {
            g.elapsed = this._elapsedMS / 1000 * g.timeScale;
            var a = g.maxElapsed * g.timeScale;
            if (g.elapsed > a) {
              g.elapsed = a;
            }
          }
        },
        updateInput: function () {
          for (var a = 0, b = g.inputs.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.update();
          }
        },
        draw: function () {
          if (this._state.visible && this._state.exists) {
            g.signals.preDraw.dispatch();
            if (g.renderTile) {
              Od.drawCalls = 0;
            }
            var a = g.cameras;
            for (var b = 0, c = a.list; b < c.length;) {
              var d = c[b];
              ++b;
              if (d != null && d.exists && d.visible) {
                if (g.renderBlit) {
                  d.checkResize();
                  if (a.useBufferLocking) {
                    d.buffer.lock();
                  }
                }
                if (g.renderTile) {
                  d.clearDrawStack();
                  d.canvas.get_graphics().clear();
                }
                if (g.renderBlit) {
                  d.fill(d.bgColor, d.useBgAlphaBlending);
                  d.screen.dirty = true;
                } else {
                  d.fill(d.bgColor & 16777215, d.useBgAlphaBlending, (d.bgColor >> 24 & 255) / 255);
                }
              }
            }
            if (g.plugins.drawOnTop) {
              this._state.draw();
              b = 0;
              c = g.plugins.list;
              while (b < c.length) {
                a = c[b];
                ++b;
                if (a.exists && a.visible) {
                  a.draw();
                }
              }
            } else {
              b = 0;
              for (c = g.plugins.list; b < c.length;) {
                a = c[b];
                ++b;
                if (a.exists && a.visible) {
                  a.draw();
                }
              }
              this._state.draw();
            }
            if (g.renderTile && g.renderTile) {
              b = 0;
              c = g.cameras.list;
              while (b < c.length) {
                d = c[b];
                ++b;
                if (d != null && d.exists && d.visible) {
                  d.render();
                }
              }
            }
            a = g.cameras;
            b = 0;
            for (c = a.list; b < c.length;) {
              d = c[b];
              ++b;
              if (d != null && d.exists && d.visible) {
                d.drawFX();
                if (g.renderBlit) {
                  if (a.useBufferLocking) {
                    d.buffer.unlock();
                  }
                  d.screen.dirty = true;
                }
              }
            }
            g.signals.postDraw.dispatch();
          }
        },
        getTimer: function () {
          return na.getTimer();
        },
        __class__: nk
      });
      function ng(a) {
        this._curPart = 0;
        lc.call(this);
        this.nextState = a;
      }
      h["flixel.system.FlxSplash"] = ng;
      ng.__name__ = "flixel.system.FlxSplash";
      ng.__super__ = lc;
      ng.prototype = q(lc.prototype, {
        create: function () {
          this._cachedBgColor = g.cameras.get_bgColor();
          g.cameras.set_bgColor(-16777216);
          this._cachedTimestep = g.fixedTimestep;
          g.fixedTimestep = false;
          this._cachedAutoPause = g.autoPause;
          g.autoPause = false;
          g.keys.enabled = false;
          this._times = [0.041, 0.184, 0.334, 0.495, 0.636];
          this._colors = [47394, 16761138, 16066382, 3555839, 314875];
          this._functions = [l(this, this.drawGreen), l(this, this.drawYellow), l(this, this.drawRed), l(this, this.drawBlue), l(this, this.drawLightBlue)];
          for (var a = 0, b = this._times; a < b.length;) {
            var c = b[a];
            ++a;
            new Fc().start(c, l(this, this.timerCallback));
          }
          a = na.get_current().stage.stageWidth;
          b = na.get_current().stage.stageHeight;
          this._sprite = new $a();
          na.get_current().stage.addChild(this._sprite);
          this._gfx = this._sprite.get_graphics();
          this._text = new Xc();
          this._text.set_selectable(false);
          this._text.set_embedFonts(true);
          c = new nd(Qd.FONT_DEFAULT, 16, 16777215);
          c.align = 0;
          this._text.set_defaultTextFormat(c);
          this._text.set_text("HaxeFlixel");
          na.get_current().stage.addChild(this._text);
          this.onResize(a, b);
          if (!ng.muted) {
            g.sound.load(Qd.getSound("flixel/sounds/flixel")).play();
          }
        },
        destroy: function () {
          this._functions = this._colors = this._times = this._text = this._gfx = this._sprite = null;
          lc.prototype.destroy.call(this);
        },
        complete: function () {
          var a = this.nextState;
          var b = g.game._state;
          if (!(a instanceof lc) || !!g.canSwitchTo(a)) {
            g.game._state.startOutro(function () {
              if (g.game._state == b) {
                g.game._nextState = a;
              } else {
                g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Ba.WARNING, true);
              }
            });
          }
        },
        onResize: function (a, b) {
          lc.prototype.onResize.call(this, a, b);
          this._sprite.set_x(a / 2);
          this._sprite.set_y(b / 2 - g.game.get_scaleY() * 20);
          this._text.set_width(a / g.game.get_scaleX());
          this._text.set_x(0);
          this._text.set_y(this._sprite.get_y() + g.game.get_scaleY() * 80);
          this._sprite.set_scaleX(this._text.set_scaleX(g.game.get_scaleX()));
          this._sprite.set_scaleY(this._text.set_scaleY(g.game.get_scaleY()));
        },
        timerCallback: function (a) {
          var b = this;
          this._functions[this._curPart]();
          this._text.set_textColor(this._colors[this._curPart]);
          this._text.set_text("HaxeFlixel");
          this._curPart++;
          if (this._curPart == 5) {
            ka.tween(this._sprite, {
              alpha: 0
            }, 3, {
              ease: va.quadOut,
              onComplete: function (a) {
                b.complete();
              }
            });
            ka.tween(this._text, {
              alpha: 0
            }, 3, {
              ease: va.quadOut
            });
          }
        },
        drawGreen: function () {
          this._gfx.beginFill(47394);
          this._gfx.moveTo(0, -37);
          this._gfx.lineTo(1, -37);
          this._gfx.lineTo(37, 0);
          this._gfx.lineTo(37, 1);
          this._gfx.lineTo(1, 37);
          this._gfx.lineTo(0, 37);
          this._gfx.lineTo(-37, 1);
          this._gfx.lineTo(-37, 0);
          this._gfx.lineTo(0, -37);
          this._gfx.endFill();
        },
        drawYellow: function () {
          this._gfx.beginFill(16761138);
          this._gfx.moveTo(-50, -50);
          this._gfx.lineTo(-25, -50);
          this._gfx.lineTo(0, -37);
          this._gfx.lineTo(-37, 0);
          this._gfx.lineTo(-50, -25);
          this._gfx.lineTo(-50, -50);
          this._gfx.endFill();
        },
        drawRed: function () {
          this._gfx.beginFill(16066382);
          this._gfx.moveTo(50, -50);
          this._gfx.lineTo(25, -50);
          this._gfx.lineTo(1, -37);
          this._gfx.lineTo(37, 0);
          this._gfx.lineTo(50, -25);
          this._gfx.lineTo(50, -50);
          this._gfx.endFill();
        },
        drawBlue: function () {
          this._gfx.beginFill(3555839);
          this._gfx.moveTo(-50, 50);
          this._gfx.lineTo(-25, 50);
          this._gfx.lineTo(0, 37);
          this._gfx.lineTo(-37, 1);
          this._gfx.lineTo(-50, 25);
          this._gfx.lineTo(-50, 50);
          this._gfx.endFill();
        },
        drawLightBlue: function () {
          this._gfx.beginFill(314875);
          this._gfx.moveTo(50, 50);
          this._gfx.lineTo(25, 50);
          this._gfx.lineTo(1, 37);
          this._gfx.lineTo(37, 1);
          this._gfx.lineTo(50, 25);
          this._gfx.lineTo(50, 50);
          this._gfx.endFill();
        },
        startOutro: function (a) {
          g.cameras.set_bgColor(this._cachedBgColor);
          g.fixedTimestep = this._cachedTimestep;
          g.autoPause = this._cachedAutoPause;
          g.keys.enabled = true;
          na.get_current().stage.removeChild(this._sprite);
          na.get_current().stage.removeChild(this._text);
          lc.prototype.startOutro.call(this, a);
        },
        __class__: ng
      });
      function $i(a) {
        ng.call(this, a);
      }
      h["flixel._FlxGame.FlxIntroSplash"] = $i;
      $i.__name__ = "flixel._FlxGame.FlxIntroSplash";
      $i.__super__ = ng;
      $i.prototype = q(ng.prototype, {
        startOutro: function (a) {
          g.game._gameJustStarted = true;
          ng.prototype.startOutro.call(this, a);
        },
        __class__: $i
      });
      function aj() {}
      h["flixel.IFlxSprite"] = aj;
      aj.__name__ = "flixel.IFlxSprite";
      aj.__isInterface__ = true;
      aj.__interfaces__ = [Ak];
      aj.prototype = {
        __class__: aj,
        __properties__: {
          set_y: "set_y",
          set_x: "set_x"
        }
      };
      function yf(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 17;
        }
        this._prevDrawParams = {
          graphicKey: null,
          tilesX: -1,
          tilesY: -1,
          scaleX: 0,
          scaleY: 0,
          spacingX: 0,
          spacingY: 0,
          repeatAxes: 17,
          angle: 0
        };
        this._blitGraphic = null;
        var e = 0;
        var f = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = fa.pool.get().set(e, f);
        e._inPool = false;
        this._blitOffset = e;
        this.blitMode = Fk.AUTO;
        this.drawBlit = g.renderBlit;
        f = e = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = fa.pool.get().set(e, f);
        e._inPool = false;
        this.spacing = e;
        this.repeatAxes = 17;
        G.call(this, 0, 0, a);
        this.repeatAxes = b;
        a = this.spacing;
        e = c;
        f = d;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        a.set_x(e);
        a.set_y(f);
      }
      h["flixel.addons.display.FlxBackdrop"] = yf;
      yf.__name__ = "flixel.addons.display.FlxBackdrop";
      yf.__super__ = G;
      yf.prototype = q(G.prototype, {
        destroy: function () {
          this.spacing = da.destroy(this.spacing);
          this._blitOffset = da.destroy(this._blitOffset);
          this._blitGraphic = da.destroy(this._blitGraphic);
          G.prototype.destroy.call(this);
        },
        draw: function () {
          if (this.repeatAxes == 0) {
            G.prototype.draw.call(this);
          } else {
            this.checkEmptyFrame();
            if (this.alpha != 0 && this._frame.type != 2 && !(this.scale.x <= 0) && !(this.scale.y <= 0)) {
              if (this.dirty) {
                this.calcFrame(this.useFramePixels);
              }
              if (this.drawBlit) {
                this.drawToLargestCamera();
              }
              for (var a = this.getCamerasLegacy(), b = 0; b < a.length;) {
                var c = a[b];
                ++b;
                if (c.visible && c.exists && this.isOnScreen(c)) {
                  if (this.isSimpleRender(c)) {
                    this.drawSimple(c);
                  } else {
                    this.drawComplex(c);
                  }
                }
              }
            }
          }
        },
        isOnScreen: function (a) {
          if (this.repeatAxes == 17) {
            return true;
          }
          if (this.repeatAxes == 0) {
            return G.prototype.isOnScreen.call(this, a);
          }
          if (a == null) {
            a = g.camera;
          }
          var b = this.getScreenBounds(this._rect, a);
          var c = this.repeatAxes;
          if (c == 1 || c == 17) {
            b.x = a.viewMarginX;
          }
          c = this.repeatAxes;
          if (c == 16 || c == 17) {
            b.y = a.viewMarginY;
          }
          a = b.x + b.width > a.viewMarginX && b.x < a.width - a.viewMarginX && b.y + b.height > a.viewMarginY && b.y < a.height - a.viewMarginY;
          if (b._weak && !b._inPool) {
            b._inPool = true;
            b._weak = false;
            Ha._pool.putUnsafe(b);
          }
          return a;
        },
        drawToLargestCamera: function () {
          for (var a = null, b = 0, c = this.getCamerasLegacy(), d = 0; d < c.length;) {
            var e = c[d];
            ++d;
            if (e.visible && e.exists && this.isOnScreen(e) && (e.width - e.viewMarginX * 2) * (e.height - e.viewMarginY * 2) > b) {
              a = e;
              b = (e.width - e.viewMarginX * 2) * (e.height - e.viewMarginY * 2);
            }
          }
          if (a != null) {
            this.regenGraphic(a);
          }
        },
        isSimpleRenderBlit: function (a) {
          if (this.repeatAxes == 0) {
            return G.prototype.isSimpleRenderBlit.call(this, a);
          } else if (G.prototype.isSimpleRenderBlit.call(this, a) || this.drawBlit) {
            if (a != null) {
              return this.isPixelPerfectRender(a);
            } else {
              return this.pixelPerfectRender;
            }
          } else {
            return false;
          }
        },
        drawSimple: function (a) {
          if (this.repeatAxes == 0) {
            G.prototype.drawSimple.call(this, a);
          } else {
            var b = !this.drawBlit;
            var c = this.drawBlit ? this._blitGraphic.get_imageFrame().get_frame() : this._frame;
            var d = c.frame.width;
            var e = c.frame.height;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            var f = d;
            var k = e;
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            var r = fa.pool.get().set(f, k);
            r._inPool = false;
            f = r;
            if (b) {
              r = this.spacing;
              d = r.x;
              e = r.y;
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              f.set_x(f.x + d);
              f.set_y(f.y + e);
              e = r;
              if (e._weak) {
                e.put();
              }
            }
            var n = this.getScreenPosition(this._point, a);
            r = this.offset;
            d = r.x;
            e = r.y;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            n.set_x(n.x - d);
            n.set_y(n.y - e);
            e = r;
            if (e._weak) {
              e.put();
            }
            b = k = 1;
            if (this.repeatAxes != 0) {
              e = a.getViewMarginRect();
              n = this.repeatAxes;
              if (n == 1 || n == 17) {
                k = this.modMin(this._point.x + this.frameWidth, f.x, e.x) - this.frameWidth;
                d = this.modMax(this._point.x, f.x, e.x + e.width) + f.x;
                k = Math.round((d - k) / f.x);
                this._point.set_x(this.modMin(this._point.x + this.frameWidth, this.frameWidth + this.spacing.x, e.x) - this.frameWidth);
              }
              n = this.repeatAxes;
              if (n == 16 || n == 17) {
                b = this.modMin(this._point.y + this.frameHeight, f.y, e.y) - this.frameHeight;
                d = this.modMax(this._point.y, f.y, e.y + e.height) + f.y;
                b = Math.round((d - b) / f.y);
                this._point.set_y(this.modMin(this._point.y + this.frameHeight, this.frameHeight + this.spacing.y, e.y) - this.frameHeight);
              }
              if (!e._inPool) {
                e._inPool = true;
                e._weak = false;
                Ha._pool.putUnsafe(e);
              }
            }
            if (this.drawBlit) {
              n = this._point;
              r = this._blitOffset;
              d = r.x;
              e = r.y;
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              n.set_x(n.x + d);
              n.set_y(n.y + e);
              e = r;
              if (e._weak) {
                e.put();
              }
            }
            if (g.renderBlit) {
              this.calcFrame(true);
            }
            a.buffer.lock();
            for (e = 0; e < k;) {
              d = e++;
              r = 0;
              n = b;
              while (r < n) {
                var J = r++;
                this._flashPoint.setTo(this._point.x + f.x * d, this._point.y + f.y * J);
                if (this.isPixelPerfectRender(a)) {
                  this._flashPoint.x = Math.floor(this._flashPoint.x);
                  this._flashPoint.y = Math.floor(this._flashPoint.y);
                }
                J = this.drawBlit ? this._blitGraphic.bitmap : this.framePixels;
                a.copyPixels(c, J, J.rect, this._flashPoint, this.colorTransform, this.blend, this.antialiasing);
              }
            }
            a.buffer.unlock();
          }
        },
        drawComplex: function (a) {
          if (this.repeatAxes == 0) {
            G.prototype.drawComplex.call(this, a);
          } else {
            var b = !this.drawBlit;
            var c = this.drawBlit ? this._blitGraphic : this.graphic;
            var d = this.drawBlit ? this._blitGraphic.get_imageFrame().get_frame() : this._frame;
            var e = this.flipX != this._frame.flipX;
            var f = this.flipY != this._frame.flipY;
            d.prepareMatrix(this._matrix, 0, this.animation._curAnim != null ? e != this.animation._curAnim.flipX : e, this.animation._curAnim != null ? f != this.animation._curAnim.flipY : f);
            this._matrix.translate(-this.origin.x, -this.origin.y);
            var k = d.frame.width;
            var r = d.frame.height;
            if (r == null) {
              r = 0;
            }
            if (k == null) {
              k = 0;
            }
            e = k;
            f = r;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            var n = fa.pool.get().set(e, f);
            n._inPool = false;
            e = n;
            if (b) {
              k = (d.frame.width + this.spacing.x) * this.scale.x;
              r = (d.frame.height + this.spacing.y) * this.scale.y;
              if (r == null) {
                r = 0;
              }
              if (k == null) {
                k = 0;
              }
              e.set_x(k);
              e.set_y(r);
              this._matrix.scale(this.scale.x, this.scale.y);
              if (this.bakedRotationAngle <= 0) {
                if (this._angleChanged) {
                  b = Math.PI / 180 * this.angle;
                  this._sinAngle = Math.sin(b);
                  this._cosAngle = Math.cos(b);
                  this._angleChanged = false;
                }
                if (this.angle != 0) {
                  r = this._matrix;
                  b = this._cosAngle;
                  f = this._sinAngle;
                  k = r.a * b - r.b * f;
                  r.b = r.a * f + r.b * b;
                  r.a = k;
                  k = r.c * b - r.d * f;
                  r.d = r.c * f + r.d * b;
                  r.c = k;
                  k = r.tx * b - r.ty * f;
                  r.ty = r.tx * f + r.ty * b;
                  r.tx = k;
                }
              }
            }
            b = null;
            if (g.renderTile) {
              b = this.alpha != 1 || this.color != 16777215;
              f = this.colorTransform != null && af.hasRGBAOffsets(this.colorTransform);
              b = a.startQuadBatch(c, b, f, this.blend, this.antialiasing, this.shader);
            } else {
              a.buffer.lock();
            }
            var J = this.getScreenPosition(this._point, a);
            n = this.offset;
            k = n.x;
            r = n.y;
            if (r == null) {
              r = 0;
            }
            if (k == null) {
              k = 0;
            }
            J.set_x(J.x - k);
            J.set_y(J.y - r);
            r = n;
            if (r._weak) {
              r.put();
            }
            c = f = 1;
            if (this.repeatAxes != 0) {
              r = a.getViewMarginRect();
              k = this.getScreenBounds(null, a);
              J = this.repeatAxes;
              if (J == 1 || J == 17) {
                f = (this.frameWidth + this.spacing.x) * this.scale.x;
                n = this.modMin(k.x + k.width, f, r.x) - k.width;
                f = this.modMax(k.x, f, r.x + r.width) + f;
                f = Math.round((f - n) / e.x);
                this._point.set_x(n + this._point.x - k.x);
              }
              J = this.repeatAxes;
              if (J == 16 || J == 17) {
                c = (this.frameHeight + this.spacing.y) * this.scale.y;
                n = this.modMin(k.y + k.height, c, r.y) - k.height;
                c = this.modMax(k.y, c, r.y + r.height) + c;
                c = Math.round((c - n) / e.y);
                this._point.set_y(n + this._point.y - k.y);
              }
              if (!r._inPool) {
                r._inPool = true;
                r._weak = false;
                Ha._pool.putUnsafe(r);
              }
              if (!k._inPool) {
                k._inPool = true;
                k._weak = false;
                Ha._pool.putUnsafe(k);
              }
            }
            J = this._point;
            n = this.origin;
            k = n.x;
            r = n.y;
            if (r == null) {
              r = 0;
            }
            if (k == null) {
              k = 0;
            }
            J.set_x(J.x + k);
            J.set_y(J.y + r);
            r = n;
            if (r._weak) {
              r.put();
            }
            if (this.drawBlit) {
              J = this._point;
              n = this._blitOffset;
              k = n.x;
              r = n.y;
              if (r == null) {
                r = 0;
              }
              if (k == null) {
                k = 0;
              }
              J.set_x(J.x + k);
              J.set_y(J.y + r);
              r = n;
              if (r._weak) {
                r.put();
              }
            }
            r = new Sc();
            for (k = 0; k < f;) {
              n = k++;
              J = 0;
              for (var za = c; J < za;) {
                var m = J++;
                r.copyFrom(this._matrix);
                r.translate(this._point.x + e.x * n, this._point.y + e.y * m);
                if (this.isPixelPerfectRender(a)) {
                  r.tx = Math.floor(r.tx);
                  r.ty = Math.floor(r.ty);
                }
                if (g.renderBlit) {
                  a.drawPixels(d, this.drawBlit ? this._blitGraphic.bitmap : this.framePixels, r, this.colorTransform, this.blend, this.antialiasing, this.shader);
                } else {
                  b.addQuad(d, r, this.colorTransform);
                }
              }
            }
            if (g.renderBlit) {
              a.buffer.unlock();
            }
          }
        },
        modMin: function (a, b, c) {
          return a - Math.floor((a - c) / b) * b;
        },
        modMax: function (a, b, c) {
          return a - Math.ceil((a - c) / b) * b;
        },
        regenGraphic: function (a) {
          var b = (this.frameWidth + this.spacing.x) * this.scale.x;
          var c = (this.frameHeight + this.spacing.y) * this.scale.y;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          var d = b;
          var e = c;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          d = fa.pool.get().set(d, e);
          d._inPool = false;
          var f = a.getViewMarginRect();
          a = e = 1;
          if (this.repeatAxes != 0) {
            var k = this.blitMode;
            switch (k._hx_index) {
              case 0:
                k = this.repeatAxes;
                if (k == 1 || k == 17) {
                  e = Math.ceil(f.width / d.x) + 1;
                }
                k = this.repeatAxes;
                if (k == 16 || k == 17) {
                  a = Math.ceil(f.height / d.y) + 1;
                }
                break;
              case 1:
                b = k.x;
                c = k.y;
                if (b == 1) {
                  if (c != 1) {
                    k = this.repeatAxes;
                    if (k == 1 || k == 17) {
                      k = Math.ceil(f.width / d.x) + 1;
                      e = b < k ? b : k;
                    }
                    k = this.repeatAxes;
                    if (k == 16 || k == 17) {
                      k = Math.ceil(f.height / d.y) + 1;
                      a = c < k ? c : k;
                    }
                  }
                } else {
                  k = this.repeatAxes;
                  if (k == 1 || k == 17) {
                    k = Math.ceil(f.width / d.x) + 1;
                    e = b < k ? b : k;
                  }
                  k = this.repeatAxes;
                  if (k == 16 || k == 17) {
                    k = Math.ceil(f.height / d.y) + 1;
                    a = c < k ? c : k;
                  }
                }
                break;
              case 2:
                b = k.tiles;
                if (b != 1) {
                  c = b;
                  k = this.repeatAxes;
                  if (k == 1 || k == 17) {
                    k = Math.ceil(f.width / d.x) + 1;
                    e = c < k ? c : k;
                  }
                  k = this.repeatAxes;
                  if (k == 16 || k == 17) {
                    k = Math.ceil(f.height / d.y) + 1;
                    a = c < k ? c : k;
                  }
                }
                break;
              case 3:
                b = k.portions;
                if (b == 1) {
                  k = this.repeatAxes;
                  if (k == 1 || k == 17) {
                    e = Math.ceil(f.width / d.x) + 1;
                  }
                  k = this.repeatAxes;
                  if (k == 16 || k == 17) {
                    a = Math.ceil(f.height / d.y) + 1;
                  }
                } else {
                  c = b;
                  k = this.repeatAxes;
                  if (k == 1 || k == 17) {
                    k = this.repeatAxes;
                    e = k == 1 || k == 17 ? Math.ceil(f.width / d.x / c + 1) : 1;
                  }
                  k = this.repeatAxes;
                  if (k == 16 || k == 17) {
                    k = this.repeatAxes;
                    a = k == 16 || k == 17 ? Math.ceil(f.height / d.y / c + 1) : 1;
                  }
                }
            }
          }
          if (!f._inPool) {
            f._inPool = true;
            f._weak = false;
            Ha._pool.putUnsafe(f);
          }
          if (this._prevDrawParams.graphicKey != this.graphic.key || this._prevDrawParams.tilesX != e || this._prevDrawParams.tilesY != a || this._prevDrawParams.scaleX != this.scale.x || this._prevDrawParams.scaleY != this.scale.y || this._prevDrawParams.spacingX != this.spacing.x || this._prevDrawParams.spacingY != this.spacing.y || this._prevDrawParams.repeatAxes != this.repeatAxes || this._prevDrawParams.angle != this.angle) {
            this._prevDrawParams.graphicKey = this.graphic.key;
            this._prevDrawParams.tilesX = e;
            this._prevDrawParams.tilesY = a;
            this._prevDrawParams.scaleX = this.scale.x;
            this._prevDrawParams.scaleY = this.scale.y;
            this._prevDrawParams.spacingX = this.spacing.x;
            this._prevDrawParams.spacingY = this.spacing.y;
            this._prevDrawParams.repeatAxes = this.repeatAxes;
            this._prevDrawParams.angle = this.angle;
            k = this._blitOffset;
            c = b = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            k.set_x(b);
            k.set_y(c);
            f = Math.ceil(e * d.x);
            c = Math.ceil(a * d.y);
            if (this.repeatAxes != 17) {
              b = this.getScreenBounds();
              var r = this.getScreenPosition();
              k = this.repeatAxes;
              if (k != 1 && k != 17) {
                f = Math.ceil(b.width);
                this._blitOffset.set_x(b.x - r.x);
              }
              k = this.repeatAxes;
              if (k != 16 && k != 17) {
                c = Math.ceil(b.height);
                this._blitOffset.set_y(b.y - r.y);
              }
              if (!b._inPool) {
                b._inPool = true;
                b._weak = false;
                Ha._pool.putUnsafe(b);
              }
              r.put();
            }
            if (this._blitGraphic == null || this._blitGraphic.width != f || this._blitGraphic.height != c) {
              this._blitGraphic = g.bitmap.create(f, c, 0, true);
            }
            f = this._blitGraphic.bitmap;
            f.lock();
            f.fillRect(f.rect, 0);
            this.animation.set_frameIndex(0);
            this.calcFrame(true);
            this._matrix.identity();
            this._matrix.translate(-this.origin.x, -this.origin.y);
            this._matrix.scale(this.scale.x, this.scale.y);
            if (this.bakedRotationAngle <= 0) {
              if (this._angleChanged) {
                k = Math.PI / 180 * this.angle;
                this._sinAngle = Math.sin(k);
                this._cosAngle = Math.cos(k);
                this._angleChanged = false;
              }
              if (this.angle != 0) {
                k = this._matrix;
                c = this._cosAngle;
                b = this._sinAngle;
                r = k.a * c - k.b * b;
                k.b = k.a * b + k.b * c;
                k.a = r;
                r = k.c * c - k.d * b;
                k.d = k.c * b + k.d * c;
                k.c = r;
                r = k.tx * c - k.ty * b;
                k.ty = k.tx * b + k.ty * c;
                k.tx = r;
              }
            }
            this._matrix.translate(this.origin.x, this.origin.y);
            this._matrix.translate(-this._blitOffset.x, -this._blitOffset.y);
            k = this._point;
            b = this._matrix.tx;
            c = this._matrix.ty;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            k.set_x(b);
            k.set_y(c);
            k = this.repeatAxes;
            c = k != 1 && k != 17 || this.angle == 0 ? 0 : 1;
            k = this.repeatAxes;
            r = k != 16 && k != 17 || this.angle == 0 ? 0 : 1;
            k = -c;
            for (b = e + c; k < b;) {
              e = k++;
              c = -r;
              for (var n = a + r; c < n;) {
                var J = c++;
                this._matrix.tx = this._point.x + e * d.x;
                this._matrix.ty = this._point.y + J * d.y;
                f.draw(this.framePixels, this._matrix);
              }
            }
            f.unlock();
          }
          d.put();
        },
        __class__: yf
      });
      var Fk = x["flixel.addons.display.BackdropBlitMode"] = {
        __ename__: "flixel.addons.display.BackdropBlitMode",
        __constructs__: null,
        AUTO: {
          _hx_name: "AUTO",
          _hx_index: 0,
          __enum__: "flixel.addons.display.BackdropBlitMode",
          toString: p
        },
        MAX_TILES_XY: (u = function (a, b) {
          return {
            _hx_index: 1,
            x: a,
            y: b,
            __enum__: "flixel.addons.display.BackdropBlitMode",
            toString: p
          };
        }, u._hx_name = "MAX_TILES_XY", u.__params__ = ["x", "y"], u),
        MAX_TILES: (u = function (a) {
          return {
            _hx_index: 2,
            tiles: a,
            __enum__: "flixel.addons.display.BackdropBlitMode",
            toString: p
          };
        }, u._hx_name = "MAX_TILES", u.__params__ = ["tiles"], u),
        SPLIT: (u = function (a) {
          return {
            _hx_index: 3,
            portions: a,
            __enum__: "flixel.addons.display.BackdropBlitMode",
            toString: p
          };
        }, u._hx_name = "SPLIT", u.__params__ = ["portions"], u)
      };
      Fk.__constructs__ = [Fk.AUTO, Fk.MAX_TILES_XY, Fk.MAX_TILES, Fk.SPLIT];
      function qh() {}
      h["flixel.addons.display.FlxGridOverlay"] = qh;
      qh.__name__ = "flixel.addons.display.FlxGridOverlay";
      qh.create = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = -2501163;
        }
        if (f == null) {
          f = -1579290;
        }
        if (e == null) {
          e = true;
        }
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = -1;
        }
        if (c == -1) {
          c = g.width;
        }
        if (d == -1) {
          d = g.height;
        }
        if (c < a || d < b) {
          return null;
        }
        a = qh.createGrid(a, b, c, d, e, f, k);
        b = new G();
        b.set_pixels(a);
        b.dirty = true;
        return b;
      };
      qh.createGrid = function (a, b, c, d, e, f, k) {
        var r = f;
        var n = f;
        var g = new T(c, d, true);
        for (var za = 0; za <= d;) {
          if (za > 0 && n == r && e) {
            n = n == f ? k : f;
          } else if (za > 0 && n != r && e == 0) {
            n = n == k ? f : k;
          }
          for (var m = 0; m <= c;) {
            if (m == 0) {
              r = n;
            }
            g.fillRect(new ea(m, za, a, b), n);
            n = n == f ? k : f;
            m += a;
          }
          za += b;
        }
        return g;
      };
      function ke(a) {
        this.byteCode = a;
        this.precisionHint = 1;
        this.__glSourceDirty = true;
        this.__numPasses = 1;
        this.__data = Ap._new(a);
      }
      h["openfl.display.Shader"] = ke;
      ke.__name__ = "openfl.display.Shader";
      ke.prototype = {
        __clearUseArray: function () {
          for (var a = 0, b = this.__paramBool; a < b.length;) {
            var c = b[a];
            ++a;
            c.__useArray = false;
          }
          a = 0;
          for (b = this.__paramFloat; a < b.length;) {
            c = b[a];
            ++a;
            c.__useArray = false;
          }
          a = 0;
          for (b = this.__paramInt; a < b.length;) {
            c = b[a];
            ++a;
            c.__useArray = false;
          }
        },
        __createGLShader: function (a, b) {
          var c = this.__context.gl;
          var d = c.createShader(b);
          c.shaderSource(d, a);
          c.compileShader(d);
          var e = c.getShaderInfoLog(d);
          var f = e != null && w.trim(e) != "";
          var k = c.getShaderParameter(d, c.COMPILE_STATUS);
          if (f || k == 0) {
            b = (k == 0 ? "Error" : "Info") + (b == c.VERTEX_SHADER ? " compiling vertex shader" : " compiling fragment shader");
            b = b + ("\n" + e) + ("\n" + a);
            if (k == 0) {
              Ua.error(b, {
                fileName: "openfl/display/Shader.hx",
                lineNumber: 334,
                className: "openfl.display.Shader",
                methodName: "__createGLShader"
              });
            } else if (f) {
              Ua.debug(b, {
                fileName: "openfl/display/Shader.hx",
                lineNumber: 335,
                className: "openfl.display.Shader",
                methodName: "__createGLShader"
              });
            }
          }
          return d;
        },
        __createGLProgram: function (a, b) {
          var c = this.__context.gl;
          a = this.__createGLShader(a, c.VERTEX_SHADER);
          var d = this.__createGLShader(b, c.FRAGMENT_SHADER);
          b = c.createProgram();
          for (var e = 0, f = this.__paramFloat; e < f.length;) {
            var k = f[e];
            ++e;
            if (k.name.indexOf("Position") > -1 && w.startsWith(k.name, "openfl_")) {
              c.bindAttribLocation(b, 0, k.name);
              break;
            }
          }
          c.attachShader(b, a);
          c.attachShader(b, d);
          c.linkProgram(b);
          if (c.getProgramParameter(b, c.LINK_STATUS) == 0) {
            c = "Unable to initialize the shader program\n" + c.getProgramInfoLog(b);
            Ua.error(c, {
              fileName: "openfl/display/Shader.hx",
              lineNumber: 368,
              className: "openfl.display.Shader",
              methodName: "__createGLProgram"
            });
          }
          return b;
        },
        __disable: function () {
          if (this.program != null) {
            this.__disableGL();
          }
        },
        __disableGL: function () {
          var a = this.__context.gl;
          var b = 0;
          for (var c = 0, d = this.__inputBitmapData; c < d.length;) {
            var e = d[c];
            ++c;
            e.__disableGL(this.__context, b);
            ++b;
            if (b == a.MAX_TEXTURE_IMAGE_UNITS) {
              break;
            }
          }
          c = 0;
          for (d = this.__paramBool; c < d.length;) {
            b = d[c];
            ++c;
            b.__disableGL(this.__context);
          }
          c = 0;
          for (d = this.__paramFloat; c < d.length;) {
            b = d[c];
            ++c;
            b.__disableGL(this.__context);
          }
          c = 0;
          for (d = this.__paramInt; c < d.length;) {
            b = d[c];
            ++c;
            b.__disableGL(this.__context);
          }
          this.__context.__bindGLArrayBuffer(null);
          if (this.__context.__context.type == "opengl") {
            a.disable(a.TEXTURE_2D);
          }
        },
        __enable: function () {
          this.__init();
          if (this.program != null) {
            this.__enableGL();
          }
        },
        __enableGL: function () {
          var a = 0;
          var b = this.__context.gl;
          for (var c = 0, d = this.__inputBitmapData; c < d.length;) {
            var e = d[c];
            ++c;
            b.uniform1i(e.index, a);
            ++a;
          }
          if (this.__context.__context.type == "opengl" && a > 0) {
            b.enable(b.TEXTURE_2D);
          }
        },
        __init: function () {
          if (this.__data == null) {
            this.__data = Ap._new(null);
          }
          if (this.__glFragmentSource != null && this.__glVertexSource != null && (this.program == null || !!this.__glSourceDirty)) {
            this.__initGL();
          }
        },
        __initGL: function () {
          if (this.__glSourceDirty || this.__paramBool == null) {
            this.__glSourceDirty = false;
            this.program = null;
            this.__inputBitmapData = [];
            this.__paramBool = [];
            this.__paramFloat = [];
            this.__paramInt = [];
            this.__processGLData(this.get_glVertexSource(), "attribute");
            this.__processGLData(this.get_glVertexSource(), "uniform");
            this.__processGLData(this.get_glFragmentSource(), "uniform");
          }
          if (this.__context != null && this.program == null) {
            var a = this.__context.gl;
            var b = this.precisionHint == 1 ? "precision mediump float;\n" : "precision lowp float;\n";
            var c = b + this.get_glVertexSource();
            b += this.get_glFragmentSource();
            var d = c + b;
            if (Object.prototype.hasOwnProperty.call(this.__context.__programs.h, d)) {
              this.program = this.__context.__programs.h[d];
            } else {
              this.program = this.__context.createProgram(1);
              this.program.__glProgram = this.__createGLProgram(c, b);
              this.__context.__programs.h[d] = this.program;
            }
            if (this.program != null) {
              this.glProgram = this.program.__glProgram;
              c = 0;
              for (b = this.__inputBitmapData; c < b.length;) {
                d = b[c];
                ++c;
                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
              }
              c = 0;
              for (b = this.__paramBool; c < b.length;) {
                d = b[c];
                ++c;
                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
              }
              c = 0;
              for (b = this.__paramFloat; c < b.length;) {
                d = b[c];
                ++c;
                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
              }
              c = 0;
              for (b = this.__paramInt; c < b.length;) {
                d = b[c];
                ++c;
                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
              }
            }
          }
        },
        __processGLData: function (a, b) {
          var c = 0;
          var d;
          for (d = b == "uniform" ? new sa("uniform ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", "") : new sa("attribute ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", ""); d.matchSub(a, c);) {
            var e = d.matched(1);
            var f = d.matched(2);
            if (!w.startsWith(f, "gl_")) {
              c = b == "uniform";
              if (w.startsWith(e, "sampler")) {
                e = new bj();
                e.name = f;
                e.__isUniform = c;
                this.__inputBitmapData.push(e);
                switch (f) {
                  case "bitmap":
                    this.__bitmap = e;
                    break;
                  case "openfl_Texture":
                    this.__texture = e;
                }
                this.__data[f] = e;
                if (this.__isGenerated) {
                  this[f] = e;
                }
              } else if (!Object.prototype.hasOwnProperty.call(this.__data, f) || ma.field(this.__data, f) == null) {
                switch (e) {
                  case "bool":
                    var k = 0;
                    break;
                  case "bvec2":
                    k = 1;
                    break;
                  case "bvec3":
                    k = 2;
                    break;
                  case "bvec4":
                    k = 3;
                    break;
                  case "dvec2":
                  case "vec2":
                    k = 5;
                    break;
                  case "dvec3":
                  case "vec3":
                    k = 6;
                    break;
                  case "dvec4":
                  case "vec4":
                    k = 7;
                    break;
                  case "double":
                  case "float":
                    k = 4;
                    break;
                  case "mat2":
                  case "mat2x2":
                    k = 12;
                    break;
                  case "mat2x3":
                    k = 13;
                    break;
                  case "mat2x4":
                    k = 14;
                    break;
                  case "mat3x2":
                    k = 15;
                    break;
                  case "mat3":
                  case "mat3x3":
                    k = 16;
                    break;
                  case "mat3x4":
                    k = 17;
                    break;
                  case "mat4x2":
                    k = 18;
                    break;
                  case "mat4x3":
                    k = 19;
                    break;
                  case "mat4":
                  case "mat4x4":
                    k = 20;
                    break;
                  case "int":
                  case "uint":
                    k = 8;
                    break;
                  case "ivec2":
                  case "uvec2":
                    k = 9;
                    break;
                  case "ivec3":
                  case "uvec3":
                    k = 10;
                    break;
                  case "ivec4":
                  case "uvec4":
                    k = 11;
                    break;
                  default:
                    k = null;
                }
                switch (k) {
                  case 1:
                  case 5:
                  case 9:
                    e = 2;
                    break;
                  case 2:
                  case 6:
                  case 10:
                    e = 3;
                    break;
                  case 3:
                  case 7:
                  case 11:
                  case 12:
                    e = 4;
                    break;
                  case 16:
                    e = 9;
                    break;
                  case 20:
                    e = 16;
                    break;
                  default:
                    e = 1;
                }
                switch (k) {
                  case 12:
                    var r = 2;
                    break;
                  case 16:
                    r = 3;
                    break;
                  case 20:
                    r = 4;
                    break;
                  default:
                    r = 1;
                }
                switch (k) {
                  case 0:
                  case 1:
                  case 2:
                  case 3:
                    var n = new og();
                    n.set_name(f);
                    n.type = k;
                    n.__arrayLength = r;
                    n.__isBool = true;
                    n.__isUniform = c;
                    n.__length = e;
                    this.__paramBool.push(n);
                    if (f == "openfl_HasColorTransform") {
                      this.__hasColorTransform = n;
                    }
                    this.__data[f] = n;
                    if (this.__isGenerated) {
                      this[f] = n;
                    }
                    break;
                  case 8:
                  case 9:
                  case 10:
                  case 11:
                    n = new og();
                    n.set_name(f);
                    n.type = k;
                    n.__arrayLength = r;
                    n.__isInt = true;
                    n.__isUniform = c;
                    n.__length = e;
                    this.__paramInt.push(n);
                    this.__data[f] = n;
                    if (this.__isGenerated) {
                      this[f] = n;
                    }
                    break;
                  default:
                    n = new og();
                    n.set_name(f);
                    n.type = k;
                    n.__arrayLength = r;
                    if (r > 0) {
                      k = r * r;
                      k = k != null ? new Float32Array(k) : null;
                      n.__uniformMatrix = k;
                    }
                    n.__isFloat = true;
                    n.__isUniform = c;
                    n.__length = e;
                    this.__paramFloat.push(n);
                    if (w.startsWith(f, "openfl_")) {
                      switch (f) {
                        case "openfl_Alpha":
                          this.__alpha = n;
                          break;
                        case "openfl_ColorMultiplier":
                          this.__colorMultiplier = n;
                          break;
                        case "openfl_ColorOffset":
                          this.__colorOffset = n;
                          break;
                        case "openfl_Matrix":
                          this.__matrix = n;
                          break;
                        case "openfl_Position":
                          this.__position = n;
                          break;
                        case "openfl_TextureCoord":
                          this.__textureCoord = n;
                          break;
                        case "openfl_TextureSize":
                          this.__textureSize = n;
                      }
                    }
                    this.__data[f] = n;
                    if (this.__isGenerated) {
                      this[f] = n;
                    }
                }
              }
              f = d.matchedPos();
              c = f.pos + f.len;
            }
          }
        },
        __update: function () {
          if (this.program != null) {
            this.__updateGL();
          }
        },
        __updateFromBuffer: function (a, b) {
          if (this.program != null) {
            this.__updateGLFromBuffer(a, b);
          }
        },
        __updateGL: function () {
          var a = 0;
          for (var b = 0, c = this.__inputBitmapData; b < c.length;) {
            var d = c[b];
            ++b;
            d.__updateGL(this.__context, a);
            ++a;
          }
          b = 0;
          for (c = this.__paramBool; b < c.length;) {
            a = c[b];
            ++b;
            a.__updateGL(this.__context);
          }
          b = 0;
          for (c = this.__paramFloat; b < c.length;) {
            a = c[b];
            ++b;
            a.__updateGL(this.__context);
          }
          b = 0;
          for (c = this.__paramInt; b < c.length;) {
            a = c[b];
            ++b;
            a.__updateGL(this.__context);
          }
        },
        __updateGLFromBuffer: function (a, b) {
          for (var c = 0, d, e, f, k, r, n = 0, g = a.inputCount; n < g;) {
            r = n++;
            d = a.inputRefs[r];
            e = a.inputs[r];
            f = a.inputFilter[r];
            k = a.inputMipFilter[r];
            r = a.inputWrap[r];
            if (e != null) {
              d.__updateGL(this.__context, c, e, f, k, r);
              ++c;
            }
          }
          n = this.__context.gl;
          if (a.paramDataLength > 0) {
            if (a.paramDataBuffer == null) {
              a.paramDataBuffer = n.createBuffer();
            }
            this.__context.__bindGLArrayBuffer(a.paramDataBuffer);
            Yc.bufferData(n, n.ARRAY_BUFFER, a.paramData, n.DYNAMIC_DRAW);
          } else {
            this.__context.__bindGLArrayBuffer(null);
          }
          e = d = c = 0;
          f = a.paramBoolCount;
          k = a.paramFloatCount;
          var za = a.paramData;
          var m = null;
          var aa = null;
          var h = null;
          n = 0;
          for (g = a.paramCount; n < g;) {
            r = n++;
            var p = false;
            if (r < f) {
              var l = a.paramRefs_Bool[c];
              for (var q = 0, L = a.overrideBoolCount; q < L;) {
                var t = q++;
                if (l.name == a.overrideBoolNames[t]) {
                  m = a.overrideBoolValues[t];
                  p = true;
                  break;
                }
              }
              if (p) {
                l.__updateGL(this.__context, m);
              } else {
                l.__updateGLFromBuffer(this.__context, za, a.paramPositions[r], a.paramLengths[r], b);
              }
              ++c;
            } else if (r < f + k) {
              l = a.paramRefs_Float[d];
              q = 0;
              for (L = a.overrideFloatCount; q < L;) {
                t = q++;
                if (l.name == a.overrideFloatNames[t]) {
                  aa = a.overrideFloatValues[t];
                  p = true;
                  break;
                }
              }
              if (p) {
                l.__updateGL(this.__context, aa);
              } else {
                l.__updateGLFromBuffer(this.__context, za, a.paramPositions[r], a.paramLengths[r], b);
              }
              ++d;
            } else {
              l = a.paramRefs_Int[e];
              q = 0;
              for (L = a.overrideIntCount; q < L;) {
                t = q++;
                if (l.name == a.overrideIntNames[t]) {
                  h = a.overrideIntValues[t];
                  p = true;
                  break;
                }
              }
              if (p) {
                l.__updateGL(this.__context, h);
              } else {
                l.__updateGLFromBuffer(this.__context, za, a.paramPositions[r], a.paramLengths[r], b);
              }
              ++e;
            }
          }
        },
        get_glFragmentSource: function () {
          return this.__glFragmentSource;
        },
        get_glVertexSource: function () {
          return this.__glVertexSource;
        },
        __class__: ke,
        __properties__: {
          get_glVertexSource: "get_glVertexSource",
          get_glFragmentSource: "get_glFragmentSource"
        }
      };
      function rh(a) {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (bitmap, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}";
        }
        ke.call(this, a);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.display.GraphicsShader"] = rh;
      rh.__name__ = "openfl.display.GraphicsShader";
      rh.__super__ = ke;
      rh.prototype = q(ke.prototype, {
        __class__: rh
      });
      function $d() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\tgl_FragColor = flixel_texture2D(bitmap, openfl_TextureCoordv);\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\t\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\t\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\t\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        rh.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["flixel.graphics.tile.FlxGraphicsShader"] = $d;
      $d.__name__ = "flixel.graphics.tile.FlxGraphicsShader";
      $d.__super__ = rh;
      $d.prototype = q(rh.prototype, {
        __class__: $d
      });
      function le(a, b) {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\n\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\tgl_FragColor = flixel_texture2D(bitmap, openfl_TextureCoordv);\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\t\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\t\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\t\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        if (a != null && a.length > 0) {
          this.set_glFragmentSource(a);
        } else {
          this.set_glFragmentSource(le.BASE_FRAGMENT_SOURCE);
        }
        if (b != null && b.length > 0) {
          this.set_glVertexSource(b);
        } else {
          this.set_glVertexSource(le.BASE_VERTEX_SOURCE);
        }
        $d.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["flixel.addons.display.FlxRuntimeShader"] = le;
      le.__name__ = "flixel.addons.display.FlxRuntimeShader";
      le.__super__ = $d;
      le.prototype = q($d.prototype, {
        __processGLData: function (a, b) {
          var c = 0;
          var d;
          for (d = b == "uniform" ? new sa("uniform ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", "") : new sa("attribute ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", ""); d.matchSub(a, c);) {
            var e = d.matched(1);
            var f = d.matched(2);
            if (!w.startsWith(f, "gl_")) {
              c = b == "uniform";
              if (w.startsWith(e, "sampler")) {
                e = new bj();
                e.name = f;
                e.__isUniform = c;
                this.__inputBitmapData.push(e);
                switch (f) {
                  case "bitmap":
                    this.__bitmap = e;
                    break;
                  case "openfl_Texture":
                    this.__texture = e;
                }
                this.__data[f] = e;
                try {
                  if (this.__isGenerated) {
                    this[f] = e;
                  }
                } catch (J) {
                  Na.lastError = J;
                }
              } else if (!Object.prototype.hasOwnProperty.call(this.__data, f) || ma.field(this.__data, f) == null) {
                switch (e) {
                  case "bool":
                    var k = 0;
                    break;
                  case "bvec2":
                    k = 1;
                    break;
                  case "bvec3":
                    k = 2;
                    break;
                  case "bvec4":
                    k = 3;
                    break;
                  case "dvec2":
                  case "vec2":
                    k = 5;
                    break;
                  case "dvec3":
                  case "vec3":
                    k = 6;
                    break;
                  case "dvec4":
                  case "vec4":
                    k = 7;
                    break;
                  case "double":
                  case "float":
                    k = 4;
                    break;
                  case "mat2":
                  case "mat2x2":
                    k = 12;
                    break;
                  case "mat2x3":
                    k = 13;
                    break;
                  case "mat2x4":
                    k = 14;
                    break;
                  case "mat3x2":
                    k = 15;
                    break;
                  case "mat3":
                  case "mat3x3":
                    k = 16;
                    break;
                  case "mat3x4":
                    k = 17;
                    break;
                  case "mat4x2":
                    k = 18;
                    break;
                  case "mat4x3":
                    k = 19;
                    break;
                  case "mat4":
                  case "mat4x4":
                    k = 20;
                    break;
                  case "int":
                  case "uint":
                    k = 8;
                    break;
                  case "ivec2":
                  case "uvec2":
                    k = 9;
                    break;
                  case "ivec3":
                  case "uvec3":
                    k = 10;
                    break;
                  case "ivec4":
                  case "uvec4":
                    k = 11;
                    break;
                  default:
                    k = null;
                }
                switch (k) {
                  case 1:
                  case 5:
                  case 9:
                    e = 2;
                    break;
                  case 2:
                  case 6:
                  case 10:
                    e = 3;
                    break;
                  case 3:
                  case 7:
                  case 11:
                  case 12:
                    e = 4;
                    break;
                  case 16:
                    e = 9;
                    break;
                  case 20:
                    e = 16;
                    break;
                  default:
                    e = 1;
                }
                switch (k) {
                  case 12:
                    var r = 2;
                    break;
                  case 16:
                    r = 3;
                    break;
                  case 20:
                    r = 4;
                    break;
                  default:
                    r = 1;
                }
                switch (k) {
                  case 0:
                  case 1:
                  case 2:
                  case 3:
                    var n = new og();
                    n.set_name(f);
                    n.type = k;
                    n.__arrayLength = r;
                    n.__isBool = true;
                    n.__isUniform = c;
                    n.__length = e;
                    this.__paramBool.push(n);
                    if (f == "openfl_HasColorTransform") {
                      this.__hasColorTransform = n;
                    }
                    this.__data[f] = n;
                    try {
                      if (this.__isGenerated) {
                        this[f] = n;
                      }
                    } catch (J) {
                      Na.lastError = J;
                    }
                    break;
                  case 8:
                  case 9:
                  case 10:
                  case 11:
                    n = new og();
                    n.set_name(f);
                    n.type = k;
                    n.__arrayLength = r;
                    n.__isInt = true;
                    n.__isUniform = c;
                    n.__length = e;
                    this.__paramInt.push(n);
                    this.__data[f] = n;
                    try {
                      if (this.__isGenerated) {
                        this[f] = n;
                      }
                    } catch (J) {
                      Na.lastError = J;
                    }
                    break;
                  default:
                    n = new og();
                    n.set_name(f);
                    n.type = k;
                    n.__arrayLength = r;
                    if (r > 0) {
                      k = r * r;
                      k = k != null ? new Float32Array(k) : null;
                      n.__uniformMatrix = k;
                    }
                    n.__isFloat = true;
                    n.__isUniform = c;
                    n.__length = e;
                    this.__paramFloat.push(n);
                    if (w.startsWith(f, "openfl_")) {
                      switch (f) {
                        case "openfl_Alpha":
                          this.__alpha = n;
                          break;
                        case "openfl_ColorMultiplier":
                          this.__colorMultiplier = n;
                          break;
                        case "openfl_ColorOffset":
                          this.__colorOffset = n;
                          break;
                        case "openfl_Matrix":
                          this.__matrix = n;
                          break;
                        case "openfl_Position":
                          this.__position = n;
                          break;
                        case "openfl_TextureCoord":
                          this.__textureCoord = n;
                          break;
                        case "openfl_TextureSize":
                          this.__textureSize = n;
                      }
                    }
                    this.__data[f] = n;
                    try {
                      if (this.__isGenerated) {
                        this[f] = n;
                      }
                    } catch (J) {
                      Na.lastError = J;
                    }
                }
              }
              f = d.matchedPos();
              c = f.pos + f.len;
            }
          }
        },
        set_glFragmentSource: function (a) {
          if (a != null) {
            a = w.replace(w.replace(a, "#pragma header", le.BASE_FRAGMENT_HEADER), "#pragma body", le.BASE_FRAGMENT_BODY);
          }
          if (a != this.__glFragmentSource) {
            this.__glSourceDirty = true;
          }
          return this.__glFragmentSource = a;
        },
        set_glVertexSource: function (a) {
          if (a != null) {
            a = w.replace(w.replace(a, "#pragma header", le.BASE_VERTEX_HEADER), "#pragma body", le.BASE_VERTEX_BODY);
          }
          if (a != this.__glVertexSource) {
            this.__glSourceDirty = true;
          }
          return this.__glVertexSource = a;
        },
        __class__: le
      });
      function Wh(a, b, c, d, e, f, k, r) {
        if (r == null) {
          r = 0;
        }
        if (k == null) {
          k = 0;
        }
        this.shapeDirty = false;
        this.shape_id = bf.UNKNOWN;
        G.call(this, a, b);
        this.lineStyle = e;
        this.shapeDirty = true;
        this.fillColor = f;
        this.shapeDirty = true;
        if (c == 0 && k != 0) {
          c = k + this.get_strokeBuffer();
        }
        if (d == 0 && r != 0) {
          d = r + this.get_strokeBuffer();
        }
        if (c < 1) {
          c = 1;
        }
        if (d < 1) {
          d = 1;
        }
        this.shapeWidth = k;
        this.shapeHeight = r;
        this.shapeDirty = true;
        this.set_width(c);
        this.set_height(d);
        this.makeGraphic(this.get_width() | 0, this.get_height() | 0, 0, true);
        this._drawStyle = {
          matrix: null,
          colorTransform: null,
          blendMode: 10,
          clipRect: null,
          smoothing: true
        };
        if (this.shapeWidth != 0 && this.shapeHeight != 0 && this.shapeWidth < c && this.shapeHeight < d) {
          this.fixBoundaries(this.shapeWidth, this.shapeHeight);
        }
        this.shapeDirty = true;
      }
      h["flixel.addons.display.shapes.FlxShape"] = Wh;
      Wh.__name__ = "flixel.addons.display.shapes.FlxShape";
      Wh.__super__ = G;
      Wh.prototype = q(G.prototype, {
        destroy: function () {
          this.lineStyle = null;
          this.shapeDirty = true;
          G.prototype.destroy.call(this);
        },
        drawSpecificShape: function (a) {},
        redrawShape: function () {
          var a = (this.shapeWidth | 0) - this.get_pixels().width;
          var b = (this.shapeHeight | 0) - this.get_pixels().height;
          if (a != 0 || b != 0) {
            a = this.shapeWidth;
            b = this.shapeHeight;
            this.makeGraphic(this.get_width() + this.get_strokeBuffer() | 0, this.get_height() + this.get_strokeBuffer() | 0, 0, true);
            this.fixBoundaries(a, b);
          } else {
            this.get_pixels().fillRect(this.get_pixels().rect, 0);
          }
          if (this.lineStyle.thickness > 1) {
            a = this.getStrokeOffsetMatrix(this._matrix);
            this.drawSpecificShape(a);
          } else {
            this.drawSpecificShape();
          }
        },
        draw: function () {
          if (this.shapeDirty) {
            this.redrawShape();
            this.shapeDirty = false;
          }
          G.prototype.draw.call(this);
        },
        fixBoundaries: function (a, b) {
          this.set_width(a);
          this.set_height(b);
          this.offset.set_x(this.getStrokeOffsetX());
          this.offset.set_y(this.getStrokeOffsetY());
          this.shapeDirty = true;
        },
        getStrokeOffsetX: function () {
          return this.get_strokeBuffer() / 4;
        },
        getStrokeOffsetY: function () {
          return this.get_strokeBuffer() / 4;
        },
        get_strokeBuffer: function () {
          return this.lineStyle.thickness * 2;
        },
        getStrokeOffsetMatrix: function (a) {
          var b = this.get_strokeBuffer() / 2;
          a.identity();
          a.translate(b, b);
          return a;
        },
        __class__: Wh,
        __properties__: q(G.prototype.__properties__, {
          get_strokeBuffer: "get_strokeBuffer"
        })
      });
      function Xh(a, b, c, d, e) {
        Wh.call(this, a, b, 0, 0, d, e, c * 2, c * 2);
        this.radius = c;
        this.shapeWidth = c * 2;
        this.shapeHeight = c * 2;
        this.shapeDirty = true;
        this.shape_id = bf.CIRCLE;
      }
      h["flixel.addons.display.shapes.FlxShapeCircle"] = Xh;
      Xh.__name__ = "flixel.addons.display.shapes.FlxShapeCircle";
      Xh.__super__ = Wh;
      Xh.prototype = q(Wh.prototype, {
        drawSpecificShape: function (a) {
          Gc.drawCircle(this, this.radius, this.radius, this.radius, this.fillColor, this.lineStyle, {
            matrix: a
          });
        },
        getStrokeOffsetX: function () {
          return this.get_strokeBuffer() / 2;
        },
        getStrokeOffsetY: function () {
          return this.get_strokeBuffer() / 2;
        },
        get_strokeBuffer: function () {
          return this.lineStyle.thickness;
        },
        __class__: Xh
      });
      var bf = x["flixel.addons.display.shapes.FlxShapeType"] = {
        __ename__: "flixel.addons.display.shapes.FlxShapeType",
        __constructs__: null,
        ARROW: {
          _hx_name: "ARROW",
          _hx_index: 0,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        BOX: {
          _hx_name: "BOX",
          _hx_index: 1,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        CIRCLE: {
          _hx_name: "CIRCLE",
          _hx_index: 2,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        CROSS: {
          _hx_name: "CROSS",
          _hx_index: 3,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        DONUT: {
          _hx_name: "DONUT",
          _hx_index: 4,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        DOUBLE_CIRCLE: {
          _hx_name: "DOUBLE_CIRCLE",
          _hx_index: 5,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        GRID: {
          _hx_name: "GRID",
          _hx_index: 6,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        LIGHTNING: {
          _hx_name: "LIGHTNING",
          _hx_index: 7,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        LINE: {
          _hx_name: "LINE",
          _hx_index: 8,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        SQUARE_DONUT: {
          _hx_name: "SQUARE_DONUT",
          _hx_index: 9,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        UNKNOWN: {
          _hx_name: "UNKNOWN",
          _hx_index: 10,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        }
      };
      bf.__constructs__ = [bf.ARROW, bf.BOX, bf.CIRCLE, bf.CROSS, bf.DONUT, bf.DOUBLE_CIRCLE, bf.GRID, bf.LIGHTNING, bf.LINE, bf.SQUARE_DONUT, bf.UNKNOWN];
      function Yh(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
      }
      h["lime.math.Vector2"] = Yh;
      Yh.__name__ = "lime.math.Vector2";
      Yh.prototype = {
        offset: function (a, b) {
          this.x += a;
          this.y += b;
        },
        __toFlashPoint: function () {
          return null;
        },
        __class__: Yh
      };
      function T(a, b, c, d) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        this.__drawableType = 0;
        this.transparent = c;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a < 0) {
          a = 0;
        }
        if (b < 0) {
          b = 0;
        }
        this.width = a;
        this.height = b;
        this.rect = new ea(0, 0, a, b);
        this.__textureWidth = a;
        this.__textureHeight = b;
        if (a > 0 && b > 0) {
          if (c) {
            if ((d & -16777216) == 0) {
              d = 0;
            }
          } else {
            d = d & 16777215 | -16777216;
          }
          this.image = new Eb(null, 0, 0, a, b, d << 8 | d >>> 24 & 255);
          this.image.set_transparent(c);
          this.readable = this.__isValid = true;
        }
        this.__renderTransform = new Aa();
        this.__worldAlpha = 1;
        this.__worldTransform = new Aa();
        this.__worldColorTransform = new Nb();
        this.__renderable = true;
      }
      h["openfl.display.BitmapData"] = T;
      T.__name__ = "openfl.display.BitmapData";
      T.__interfaces__ = [ra];
      T.fromCanvas = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (a == null) {
          return null;
        }
        var c = new T(0, 0, b, 0);
        c.__fromImage(Eb.fromCanvas(a));
        c.image.set_transparent(b);
        return c;
      };
      T.fromImage = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (a == null || a.buffer == null) {
          return null;
        }
        var c = new T(0, 0, b, 0);
        c.__fromImage(a);
        c.image.set_transparent(b);
        if (c.image != null) {
          return c;
        } else {
          return null;
        }
      };
      T.fromTexture = function (a) {
        if (a == null) {
          return null;
        }
        var b = new T(a.__width, a.__height, true, 0);
        b.readable = false;
        b.__texture = a;
        b.__textureContext = a.__textureContext;
        b.image = null;
        return b;
      };
      T.prototype = {
        clone: function () {
          if (this.__isValid) {
            if (this.readable || this.image != null) {
              var a = T.fromImage(this.image.clone(), this.transparent);
            } else {
              a = new T(0, 0, this.transparent, 0);
              a.width = this.width;
              a.height = this.height;
              a.__textureWidth = this.__textureWidth;
              a.__textureHeight = this.__textureHeight;
              a.rect.copyFrom(this.rect);
              a.__framebuffer = this.__framebuffer;
              a.__framebufferContext = this.__framebufferContext;
              a.__texture = this.__texture;
              a.__textureContext = this.__textureContext;
              a.__isValid = true;
            }
          } else {
            a = new T(this.width, this.height, this.transparent, 0);
          }
          a.__worldTransform.copyFrom(this.__worldTransform);
          a.__renderTransform.copyFrom(this.__renderTransform);
          return a;
        },
        colorTransform: function (a, b) {
          if (this.readable) {
            this.image.colorTransform(a.__toLimeRectangle(), b.__toLimeColorMatrix());
          }
        },
        copyPixels: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (this.readable && a != null) {
            if (e != null) {
              T.__tempVector.x = e.x;
              T.__tempVector.y = e.y;
            }
            this.image.copyPixels(a.image, b.__toLimeRectangle(), c.__toLimeVector2(), d != null ? d.image : null, e != null ? T.__tempVector : null, f);
          }
        },
        dispose: function () {
          this.image = null;
          this.height = this.width = 0;
          this.rect = null;
          this.readable = this.__isValid = false;
          this.__textureContext = this.__texture = this.__framebufferContext = this.__framebuffer = this.__vertexBuffer = this.__surface = null;
        },
        disposeImage: function () {
          this.readable = false;
        },
        draw: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (a != null) {
            var k = true;
            var r = null;
            if (a instanceof Fa) {
              r = ta.__cast(a, Fa);
              if (!r.get_visible()) {
                k = false;
                r.set_visible(true);
              }
            }
            a.__update(false, true);
            var n = Aa.__pool.get();
            n.copyFrom(a.__renderTransform);
            n.invert();
            if (b != null) {
              n.concat(b);
            }
            b = null;
            if (e != null) {
              b = Aa.__pool.get();
              b.copyFrom(n);
              b.invert();
            }
            var g = new Nb();
            g.__copyFrom(a.__worldColorTransform);
            g.__invert();
            if (this.readable || na.get_current().stage.context3D == null) {
              if (c != null) {
                var za = ea.__pool.get();
                var m = Aa.__pool.get();
                a.__getBounds(za, m);
                var aa = Math.ceil(za.width);
                var h = Math.ceil(za.height);
                m.tx = -za.x;
                m.ty = -za.y;
                aa = new T(aa, h, true, 0);
                aa.draw(a, m);
                aa.colorTransform(aa.rect, c);
                aa.__renderTransform.identity();
                aa.__renderTransform.tx = za.x;
                aa.__renderTransform.ty = za.y;
                aa.__renderTransform.concat(a.__renderTransform);
                aa.__worldAlpha = a.__worldAlpha;
                aa.__worldColorTransform.__copyFrom(a.__worldColorTransform);
                a = aa;
                ea.__pool.release(za);
                Aa.__pool.release(m);
              }
              Xa.convertToCanvas(this.image);
              c = new pg(this.image.buffer.__srcContext);
              c.__allowSmoothing = f;
              c.__overrideBlendMode = d;
              c.__worldTransform = n;
              c.__worldAlpha = 1 / a.__worldAlpha;
              c.__worldColorTransform = g;
              if (e != null) {
                c.__pushMaskRect(e, b);
              }
              this.__drawCanvas(a, c);
            } else {
              if (this.__textureContext == null) {
                this.__textureContext = rb.current.__window.context;
              }
              if (c != null) {
                g.__combine(c);
              }
              c = new Ja(na.get_current().stage.context3D, this);
              c.__allowSmoothing = f;
              c.__pixelRatio = na.get_current().stage.window.__scale;
              c.__overrideBlendMode = d;
              c.__worldTransform = n;
              c.__worldAlpha = 1 / a.__worldAlpha;
              c.__worldColorTransform = g;
              c.__resize(this.width, this.height);
              if (e != null) {
                c.__pushMaskRect(e, b);
              }
              this.__drawGL(a, c);
            }
            if (e != null) {
              c.__popMaskRect();
              Aa.__pool.release(b);
            }
            Aa.__pool.release(n);
            if (r != null && !k) {
              r.set_visible(false);
            }
          }
        },
        fillRect: function (a, b) {
          this.__fillRect(a, b, true);
        },
        getIndexBuffer: function (a, b) {
          if (this.__indexBuffer == null || this.__indexBufferContext != a.__context || b != null && this.__indexBufferGrid == null || this.__indexBufferGrid != null && !this.__indexBufferGrid.equals(b)) {
            this.__indexBufferContext = a.__context;
            this.__indexBuffer = null;
            if (b != null) {
              if (this.__indexBufferGrid == null) {
                this.__indexBufferGrid = new ea();
              }
              this.__indexBufferGrid.copyFrom(b);
              var c = b.width;
              b = b.height;
              if (c != 0 && b != 0) {
                this.__indexBufferData = new Uint16Array(54);
                this.__indexBufferData[0] = 0;
                this.__indexBufferData[1] = 1;
                this.__indexBufferData[2] = 2;
                this.__indexBufferData[3] = 2;
                this.__indexBufferData[4] = 1;
                this.__indexBufferData[5] = 3;
                this.__indexBufferData[6] = 4;
                this.__indexBufferData[7] = 0;
                this.__indexBufferData[8] = 5;
                this.__indexBufferData[9] = 5;
                this.__indexBufferData[10] = 0;
                this.__indexBufferData[11] = 2;
                this.__indexBufferData[12] = 6;
                this.__indexBufferData[13] = 4;
                this.__indexBufferData[14] = 7;
                this.__indexBufferData[15] = 7;
                this.__indexBufferData[16] = 4;
                this.__indexBufferData[17] = 5;
                this.__indexBufferData[18] = 8;
                this.__indexBufferData[19] = 9;
                this.__indexBufferData[20] = 0;
                this.__indexBufferData[21] = 0;
                this.__indexBufferData[22] = 9;
                this.__indexBufferData[23] = 1;
                this.__indexBufferData[24] = 10;
                this.__indexBufferData[25] = 8;
                this.__indexBufferData[26] = 4;
                this.__indexBufferData[27] = 4;
                this.__indexBufferData[28] = 8;
                this.__indexBufferData[29] = 0;
                this.__indexBufferData[30] = 11;
                this.__indexBufferData[31] = 10;
                this.__indexBufferData[32] = 6;
                this.__indexBufferData[33] = 6;
                this.__indexBufferData[34] = 10;
                this.__indexBufferData[35] = 4;
                this.__indexBufferData[36] = 12;
                this.__indexBufferData[37] = 13;
                this.__indexBufferData[38] = 8;
                this.__indexBufferData[39] = 8;
                this.__indexBufferData[40] = 13;
                this.__indexBufferData[41] = 9;
                this.__indexBufferData[42] = 14;
                this.__indexBufferData[43] = 12;
                this.__indexBufferData[44] = 10;
                this.__indexBufferData[45] = 10;
                this.__indexBufferData[46] = 12;
                this.__indexBufferData[47] = 8;
                this.__indexBufferData[48] = 15;
                this.__indexBufferData[49] = 14;
                this.__indexBufferData[50] = 11;
                this.__indexBufferData[51] = 11;
                this.__indexBufferData[52] = 14;
                this.__indexBufferData[53] = 10;
                this.__indexBuffer = a.createIndexBuffer(54);
              } else if (c == 0 && b != 0) {
                this.__indexBufferData = new Uint16Array(18);
                this.__indexBufferData[0] = 0;
                this.__indexBufferData[1] = 1;
                this.__indexBufferData[2] = 2;
                this.__indexBufferData[3] = 2;
                this.__indexBufferData[4] = 1;
                this.__indexBufferData[5] = 3;
                this.__indexBufferData[6] = 4;
                this.__indexBufferData[7] = 5;
                this.__indexBufferData[8] = 0;
                this.__indexBufferData[9] = 0;
                this.__indexBufferData[10] = 5;
                this.__indexBufferData[11] = 1;
                this.__indexBufferData[12] = 6;
                this.__indexBufferData[13] = 7;
                this.__indexBufferData[14] = 4;
                this.__indexBufferData[15] = 4;
                this.__indexBufferData[16] = 7;
                this.__indexBufferData[17] = 5;
                this.__indexBuffer = a.createIndexBuffer(18);
              } else if (c != 0 && b == 0) {
                this.__indexBufferData = new Uint16Array(18);
                this.__indexBufferData[0] = 0;
                this.__indexBufferData[1] = 1;
                this.__indexBufferData[2] = 2;
                this.__indexBufferData[3] = 2;
                this.__indexBufferData[4] = 1;
                this.__indexBufferData[5] = 3;
                this.__indexBufferData[6] = 4;
                this.__indexBufferData[7] = 0;
                this.__indexBufferData[8] = 5;
                this.__indexBufferData[9] = 5;
                this.__indexBufferData[10] = 0;
                this.__indexBufferData[11] = 2;
                this.__indexBufferData[12] = 6;
                this.__indexBufferData[13] = 4;
                this.__indexBufferData[14] = 7;
                this.__indexBufferData[15] = 7;
                this.__indexBufferData[16] = 4;
                this.__indexBufferData[17] = 5;
                this.__indexBuffer = a.createIndexBuffer(18);
              }
            } else {
              this.__indexBufferGrid = null;
            }
            if (this.__indexBuffer == null) {
              this.__indexBufferData = new Uint16Array(6);
              this.__indexBufferData[0] = 0;
              this.__indexBufferData[1] = 1;
              this.__indexBufferData[2] = 2;
              this.__indexBufferData[3] = 2;
              this.__indexBufferData[4] = 1;
              this.__indexBufferData[5] = 3;
              this.__indexBuffer = a.createIndexBuffer(6);
            }
            this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData);
          }
          return this.__indexBuffer;
        },
        getVertexBuffer: function (a, b, c) {
          if (this.__vertexBuffer == null || this.__vertexBufferContext != a.__context || b != null && this.__vertexBufferGrid == null || this.__vertexBufferGrid != null && !this.__vertexBufferGrid.equals(b) || c != null && (this.__vertexBufferWidth != c.get_width() || this.__vertexBufferHeight != c.get_height() || this.__vertexBufferScaleX != c.get_scaleX() || this.__vertexBufferScaleY != c.get_scaleY())) {
            this.__uvRect = new ea(0, 0, this.width, this.height);
            this.__vertexBufferContext = a.__context;
            this.__vertexBuffer = null;
            if (c != null) {
              this.__vertexBufferWidth = c.get_width();
              this.__vertexBufferHeight = c.get_height();
              this.__vertexBufferScaleX = c.get_scaleX();
              this.__vertexBufferScaleY = c.get_scaleY();
            }
            if (b != null && c != null) {
              if (this.__vertexBufferGrid == null) {
                this.__vertexBufferGrid = new ea();
              }
              this.__vertexBufferGrid.copyFrom(b);
              this.__vertexBufferWidth = c.get_width();
              this.__vertexBufferHeight = c.get_height();
              this.__vertexBufferScaleX = c.get_scaleX();
              this.__vertexBufferScaleY = c.get_scaleY();
              var d = b.width;
              var e = b.height;
              if (d != 0 && e != 0) {
                this.__vertexBufferData = new Float32Array(224);
                var f = b.x;
                var k = b.y;
                var r = this.width - d - f;
                var n = this.height - e - k;
                b = f / this.width;
                var g = k / this.height;
                d /= this.width;
                e /= this.height;
                f /= c.get_scaleX();
                k /= c.get_scaleY();
                r /= c.get_scaleX();
                var za = n / c.get_scaleY();
                n = c.get_width() / c.get_scaleX() - f - r;
                r = c.get_height() / c.get_scaleY() - k - za;
                this.__vertexBufferData[0] = f;
                this.__vertexBufferData[1] = k;
                this.__vertexBufferData[3] = b * 1;
                this.__vertexBufferData[4] = g * 1;
                this.__vertexBufferData[15] = k;
                this.__vertexBufferData[18] = g * 1;
                this.__vertexBufferData[28] = f;
                this.__vertexBufferData[31] = b * 1;
                this.__vertexBufferData[56] = f + n;
                this.__vertexBufferData[57] = k;
                this.__vertexBufferData[59] = (b + d) * 1;
                this.__vertexBufferData[60] = g * 1;
                this.__vertexBufferData[70] = f + n;
                this.__vertexBufferData[73] = (b + d) * 1;
                this.__vertexBufferData[84] = this.width;
                this.__vertexBufferData[85] = k;
                this.__vertexBufferData[87] = 1;
                this.__vertexBufferData[88] = g * 1;
                this.__vertexBufferData[98] = this.width;
                this.__vertexBufferData[101] = 1;
                this.__vertexBufferData[112] = f;
                this.__vertexBufferData[113] = k + r;
                this.__vertexBufferData[115] = b * 1;
                this.__vertexBufferData[116] = (g + e) * 1;
                this.__vertexBufferData[127] = k + r;
                this.__vertexBufferData[130] = (g + e) * 1;
                this.__vertexBufferData[140] = f + n;
                this.__vertexBufferData[141] = k + r;
                this.__vertexBufferData[143] = (b + d) * 1;
                this.__vertexBufferData[144] = (g + e) * 1;
                this.__vertexBufferData[154] = this.width;
                this.__vertexBufferData[155] = k + r;
                this.__vertexBufferData[157] = 1;
                this.__vertexBufferData[158] = (g + e) * 1;
                this.__vertexBufferData[168] = f;
                this.__vertexBufferData[169] = this.height;
                this.__vertexBufferData[171] = b * 1;
                this.__vertexBufferData[172] = 1;
                this.__vertexBufferData[183] = this.height;
                this.__vertexBufferData[186] = 1;
                this.__vertexBufferData[196] = f + n;
                this.__vertexBufferData[197] = this.height;
                this.__vertexBufferData[199] = (b + d) * 1;
                this.__vertexBufferData[200] = 1;
                this.__vertexBufferData[210] = this.width;
                this.__vertexBufferData[211] = this.height;
                this.__vertexBufferData[213] = 1;
                this.__vertexBufferData[214] = 1;
                this.__vertexBuffer = a.createVertexBuffer(16, 14);
              } else if (d == 0 && e != 0) {
                this.__vertexBufferData = new Float32Array(112);
                k = b.y;
                n = this.height - e - k;
                g = k / this.height;
                e /= this.height;
                k /= c.get_scaleY();
                za = n / c.get_scaleY();
                r = c.get_height() / c.get_scaleY() - k - za;
                c = c.get_width() / c.get_scaleX();
                this.__vertexBufferData[0] = c;
                this.__vertexBufferData[1] = k;
                this.__vertexBufferData[3] = 1;
                this.__vertexBufferData[4] = g * 1;
                this.__vertexBufferData[15] = k;
                this.__vertexBufferData[18] = g * 1;
                this.__vertexBufferData[28] = c;
                this.__vertexBufferData[31] = 1;
                this.__vertexBufferData[56] = c;
                this.__vertexBufferData[57] = k + r;
                this.__vertexBufferData[59] = 1;
                this.__vertexBufferData[60] = (g + e) * 1;
                this.__vertexBufferData[71] = k + r;
                this.__vertexBufferData[74] = (g + e) * 1;
                this.__vertexBufferData[84] = c;
                this.__vertexBufferData[85] = this.height;
                this.__vertexBufferData[87] = 1;
                this.__vertexBufferData[88] = 1;
                this.__vertexBufferData[99] = this.height;
                this.__vertexBufferData[102] = 1;
                this.__vertexBuffer = a.createVertexBuffer(8, 14);
              } else if (e == 0 && d != 0) {
                this.__vertexBufferData = new Float32Array(112);
                f = b.x;
                r = this.width - d - f;
                b = f / this.width;
                d /= this.width;
                f /= c.get_scaleX();
                r /= c.get_scaleX();
                n = c.get_width() / c.get_scaleX() - f - r;
                c = c.get_height() / c.get_scaleY();
                this.__vertexBufferData[0] = f;
                this.__vertexBufferData[1] = c;
                this.__vertexBufferData[3] = b * 1;
                this.__vertexBufferData[4] = 1;
                this.__vertexBufferData[15] = c;
                this.__vertexBufferData[18] = 1;
                this.__vertexBufferData[28] = f;
                this.__vertexBufferData[31] = b * 1;
                this.__vertexBufferData[56] = f + n;
                this.__vertexBufferData[57] = c;
                this.__vertexBufferData[59] = (b + d) * 1;
                this.__vertexBufferData[60] = 1;
                this.__vertexBufferData[70] = f + n;
                this.__vertexBufferData[73] = (b + d) * 1;
                this.__vertexBufferData[84] = this.width;
                this.__vertexBufferData[85] = c;
                this.__vertexBufferData[87] = 1;
                this.__vertexBufferData[88] = 1;
                this.__vertexBufferData[98] = this.width;
                this.__vertexBufferData[101] = 1;
                this.__vertexBuffer = a.createVertexBuffer(8, 14);
              }
            } else {
              this.__vertexBufferGrid = null;
            }
            if (this.__vertexBuffer == null) {
              this.__vertexBufferData = new Float32Array(56);
              this.__vertexBufferData[0] = this.width;
              this.__vertexBufferData[1] = this.height;
              this.__vertexBufferData[3] = 1;
              this.__vertexBufferData[4] = 1;
              this.__vertexBufferData[15] = this.height;
              this.__vertexBufferData[18] = 1;
              this.__vertexBufferData[28] = this.width;
              this.__vertexBufferData[31] = 1;
              this.__vertexBuffer = a.createVertexBuffer(3, 14);
            }
            this.__vertexBuffer.uploadFromTypedArray(cj.toArrayBufferView(this.__vertexBufferData));
          }
          return this.__vertexBuffer;
        },
        getPixel32: function (a, b) {
          if (this.readable) {
            return this.image.getPixel32(a, b, 1);
          } else {
            return 0;
          }
        },
        getTexture: function (a) {
          if (!this.__isValid) {
            return null;
          }
          if (this.__texture == null || this.__textureContext != a.__context) {
            this.__textureContext = a.__context;
            this.__texture = a.createRectangleTexture(this.width, this.height, 1, false);
            this.__textureVersion = -1;
          }
          Xa.sync(this.image, false);
          if (this.image != null && this.image.version > this.__textureVersion) {
            if (this.__surface != null) {
              Jp.flush(this.__surface);
            }
            a = this.image;
            if (!Zb.__supportsBGRA && a.get_format() != 0) {
              a = a.clone();
              a.set_format(0);
            }
            this.__texture.__uploadFromImage(a);
            this.__textureVersion = this.image.version;
            this.__textureWidth = a.buffer.width;
            this.__textureHeight = a.buffer.height;
          }
          if (!this.readable && this.image != null) {
            this.image = this.__surface = null;
          }
          return this.__texture;
        },
        lock: function () {},
        setPixel: function (a, b, c) {
          if (this.readable) {
            this.image.setPixel(a, b, c, 1);
          }
        },
        setPixel32: function (a, b, c) {
          if (this.readable) {
            this.image.setPixel32(a, b, c, 1);
          }
        },
        unlock: function (a) {},
        __drawCanvas: function (a, b) {
          var c = this.image.buffer;
          if (!b.__allowSmoothing) {
            b.applySmoothing(c.__srcContext, false);
          }
          b.__render(a);
          if (!b.__allowSmoothing) {
            b.applySmoothing(c.__srcContext, true);
          }
          c.__srcContext.setTransform(1, 0, 0, 1, 0, 0);
          c.__srcImageData = null;
          c.data = null;
          this.image.dirty = true;
          this.image.version++;
        },
        __drawGL: function (a, b) {
          var c = b.__context3D;
          var d = c.__state.renderToTexture;
          var e = c.__state.renderToTextureDepthStencil;
          var f = c.__state.renderToTextureAntiAlias;
          var k = c.__state.renderToTextureSurfaceSelector;
          c.setRenderToTexture(this.getTexture(c), true);
          b.__render(a);
          if (d != null) {
            c.setRenderToTexture(d, e, f, k);
          } else {
            c.setRenderToBackBuffer();
          }
        },
        __fillRect: function (a, b, c) {
          if (a != null) {
            if (this.transparent && (b & -16777216) == 0) {
              b = 0;
            }
            if (c && this.__texture != null && this.__texture.__glFramebuffer != null && na.get_current().stage.__renderer.__type == "opengl") {
              c = na.get_current().stage.__renderer.__context3D;
              var d = !this.rect.equals(a);
              var e = c.__state.renderToTexture;
              var f = c.__state.renderToTextureDepthStencil;
              var k = c.__state.renderToTextureAntiAlias;
              var r = c.__state.renderToTextureSurfaceSelector;
              c.setRenderToTexture(this.__texture);
              if (d) {
                c.setScissorRectangle(a);
              }
              c.clear((b >>> 16 & 255) / 255, (b >>> 8 & 255) / 255, (b & 255) / 255, this.transparent ? (b >>> 24 & 255) / 255 : 1, 0, 0, 1);
              if (d) {
                c.setScissorRectangle(null);
              }
              if (e != null) {
                c.setRenderToTexture(e, f, k, r);
              } else {
                c.setRenderToBackBuffer();
              }
            } else if (this.readable) {
              this.image.fillRect(a.__toLimeRectangle(), b, 1);
            }
          }
        },
        __fromImage: function (a) {
          if (a != null && a.buffer != null) {
            this.image = a;
            this.width = a.width;
            this.height = a.height;
            this.rect = new ea(0, 0, a.width, a.height);
            this.__textureWidth = this.width;
            this.__textureHeight = this.height;
            this.__isValid = this.readable = true;
          }
        },
        __getBounds: function (a, b) {
          var c = ea.__pool.get();
          this.rect.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          ea.__pool.release(c);
        },
        __setUVRect: function (a, b, c, d, e) {
          if (this.getVertexBuffer(a) != null && (d != this.__uvRect.width || e != this.__uvRect.height || b != this.__uvRect.x || c != this.__uvRect.y)) {
            if (this.__uvRect == null) {
              this.__uvRect = new ea();
            }
            this.__uvRect.setTo(b, c, d, e);
            a = this.__textureWidth > 0 ? b / this.__textureWidth : 0;
            c = this.__textureHeight > 0 ? c / this.__textureHeight : 0;
            b = this.__textureWidth > 0 ? d / this.__textureWidth : 0;
            var f = this.__textureHeight > 0 ? e / this.__textureHeight : 0;
            this.__vertexBufferData[0] = d;
            this.__vertexBufferData[1] = e;
            this.__vertexBufferData[3] = a + b;
            this.__vertexBufferData[4] = c + f;
            this.__vertexBufferData[15] = e;
            this.__vertexBufferData[17] = a;
            this.__vertexBufferData[18] = c + f;
            this.__vertexBufferData[28] = d;
            this.__vertexBufferData[31] = a + b;
            this.__vertexBufferData[32] = c;
            this.__vertexBufferData[45] = a;
            this.__vertexBufferData[46] = c;
            this.__vertexBuffer.uploadFromTypedArray(cj.toArrayBufferView(this.__vertexBufferData));
          }
        },
        __update: function (a, b) {
          this.__updateTransforms();
        },
        __updateTransforms: function (a) {
          if (a == null) {
            this.__worldTransform.identity();
          } else {
            this.__worldTransform.copyFrom(a);
          }
          this.__renderTransform.copyFrom(this.__worldTransform);
        },
        __class__: T
      };
      function Be(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (Be.preload != null) {
          this.__fromImage(Be.preload);
        } else {
          var f = this;
          Eb.loadFromBase64(cf.getString(Be.resourceName), Be.resourceType).then(function (a) {
            f.__fromImage(a);
            return Cb.withValue(f);
          }).onComplete(function (a) {
            if (Be.preload == null) {
              Be.preload = a.image;
            }
            if (e != null && ma.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.addons.transition._FlxTransitionSprite.RawGraphicTransTileCircle"] = Be;
      Be.__name__ = "flixel.addons.transition._FlxTransitionSprite.RawGraphicTransTileCircle";
      Be.__super__ = T;
      Be.prototype = q(T.prototype, {
        __class__: Be
      });
      function An(a) {
        Be.call(this, 544, 32, true, -1, a);
        this.width = 544;
        this.height = 32;
      }
      h["flixel.addons.transition.GraphicTransTileCircle"] = An;
      An.__name__ = "flixel.addons.transition.GraphicTransTileCircle";
      An.__super__ = Be;
      An.prototype = q(Be.prototype, {
        __class__: An
      });
      function Ce(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (Ce.preload != null) {
          this.__fromImage(Ce.preload);
        } else {
          var f = this;
          Eb.loadFromBase64(cf.getString(Ce.resourceName), Ce.resourceType).then(function (a) {
            f.__fromImage(a);
            return Cb.withValue(f);
          }).onComplete(function (a) {
            if (Ce.preload == null) {
              Ce.preload = a.image;
            }
            if (e != null && ma.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.addons.transition._FlxTransitionSprite.RawGraphicTransTileDiamond"] = Ce;
      Ce.__name__ = "flixel.addons.transition._FlxTransitionSprite.RawGraphicTransTileDiamond";
      Ce.__super__ = T;
      Ce.prototype = q(T.prototype, {
        __class__: Ce
      });
      function Gk(a) {
        Ce.call(this, 544, 32, true, -1, a);
        this.width = 544;
        this.height = 32;
      }
      h["flixel.addons.transition.GraphicTransTileDiamond"] = Gk;
      Gk.__name__ = "flixel.addons.transition.GraphicTransTileDiamond";
      Gk.__super__ = Ce;
      Gk.prototype = q(Ce.prototype, {
        __class__: Gk
      });
      function De(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (De.preload != null) {
          this.__fromImage(De.preload);
        } else {
          var f = this;
          Eb.loadFromBase64(cf.getString(De.resourceName), De.resourceType).then(function (a) {
            f.__fromImage(a);
            return Cb.withValue(f);
          }).onComplete(function (a) {
            if (De.preload == null) {
              De.preload = a.image;
            }
            if (e != null && ma.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.addons.transition.RawGraphicTransTileSquare"] = De;
      De.__name__ = "flixel.addons.transition.RawGraphicTransTileSquare";
      De.__super__ = T;
      De.prototype = q(T.prototype, {
        __class__: De
      });
      function Bn(a) {
        De.call(this, 544, 32, true, -1, a);
        this.width = 544;
        this.height = 32;
      }
      h["flixel.addons.transition.GraphicTransTileSquare"] = Bn;
      Bn.__name__ = "flixel.addons.transition.GraphicTransTileSquare";
      Bn.__super__ = De;
      Bn.prototype = q(De.prototype, {
        __class__: Bn
      });
      function Hk(a, b, c, d, e, f, k) {
        if (k == null) {
          k = 40;
        }
        if (f == null) {
          f = 32;
        }
        if (e == null) {
          e = 32;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._newStatus = -1;
        this.status = 0;
        this._finished = false;
        this._starting = true;
        G.call(this, a, b);
        if (d == null) {
          d = cc.fromClass(Gk);
          f = e = 32;
        }
        this._delay = c;
        this.loadGraphic(d, true, e, f);
        if (this.graphic != null) {
          this.graphic.persist = true;
          this.graphic.set_destroyOnNoUse(false);
          a = [];
          b = 1;
          for (c = this.get_numFrames() - 1; b < c;) {
            d = b++;
            a.push(d);
          }
          b = a.slice();
          b.reverse();
          this.animation.add("empty", [0], 0, false);
          this.animation.add("in", a, k, false);
          this.animation.add("full", [this.get_numFrames() - 1], 0, false);
          this.animation.add("out", b, k, false);
          this.setStatus(3);
        }
      }
      h["flixel.addons.transition.FlxTransitionSprite"] = Hk;
      Hk.__name__ = "flixel.addons.transition.FlxTransitionSprite";
      Hk.__super__ = G;
      Hk.prototype = q(G.prototype, {
        start: function (a) {
          this._starting = true;
          this._finished = false;
          this._count = 0;
          this._newStatus = a;
        },
        setStatus: function (a) {
          switch (a) {
            case -1:
            case 2:
              var b = "empty";
              break;
            case 0:
              b = "in";
              break;
            case 1:
              b = "out";
              break;
            case 3:
              b = "full";
          }
          this.animation.play(b);
          this.animation.finishCallback = l(this, this.onFinishAnim);
          this.status = a;
        },
        onFinishAnim: function (a) {
          if (!this._finished) {
            this._finished = true;
            switch (this.status) {
              case 0:
                this.setStatus(3);
                break;
              case 1:
                this.setStatus(2);
            }
          }
        },
        update: function (a) {
          G.prototype.update.call(this, a);
          if (this._starting && (this._count += a, this._count >= this._delay)) {
            this.onTime();
          }
        },
        onTime: function () {
          this._starting = false;
          this._count = 0;
          this.setStatus(this._newStatus);
          this._newStatus = -1;
        },
        __class__: Hk
      });
      function Pi(a) {
        sd.call(this, 0);
        this._effect = this.createEffect(a);
        a = this._effect.scrollFactor;
        var b = 0;
        var c = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.set_x(b);
        a.set_y(c);
        this.add(this._effect);
      }
      h["flixel.addons.transition.Transition"] = Pi;
      Pi.__name__ = "flixel.addons.transition.Transition";
      Pi.__super__ = sd;
      Pi.prototype = q(sd.prototype, {
        destroy: function () {
          sd.prototype.destroy.call(this);
          this.set_finishCallback(null);
          this._effect = da.destroy(this._effect);
        },
        start: function (a) {
          this._effect.start(a);
        },
        setStatus: function (a) {
          this._effect.setStatus(a);
        },
        createEffect: function (a) {
          switch (a.type) {
            case "fade":
              return new Ik(a);
            case "none":
              throw K.thrown("Unexpected TransitionType: NONE");
            case "tiles":
              return new Jk(a);
          }
        },
        get_finishCallback: function () {
          if (this._effect != null) {
            return this._effect.finishCallback;
          } else {
            return null;
          }
        },
        set_finishCallback: function (a) {
          if (this._effect != null) {
            return this._effect.finishCallback = a;
          } else {
            return null;
          }
        },
        __class__: Pi,
        __properties__: q(sd.prototype.__properties__, {
          set_finishCallback: "set_finishCallback",
          get_finishCallback: "get_finishCallback"
        })
      });
      var Kk = x["flixel.addons.transition.TransitionCameraMode"] = {
        __ename__: "flixel.addons.transition.TransitionCameraMode",
        __constructs__: null,
        TOP: {
          _hx_name: "TOP",
          _hx_index: 0,
          __enum__: "flixel.addons.transition.TransitionCameraMode",
          toString: p
        },
        NEW: {
          _hx_name: "NEW",
          _hx_index: 1,
          __enum__: "flixel.addons.transition.TransitionCameraMode",
          toString: p
        },
        DEFAULT: {
          _hx_name: "DEFAULT",
          _hx_index: 2,
          __enum__: "flixel.addons.transition.TransitionCameraMode",
          toString: p
        }
      };
      Kk.__constructs__ = [Kk.TOP, Kk.NEW, Kk.DEFAULT];
      function Cn(a, b, c, d, e, f, k) {
        if (k == null) {
          k = Kk.TOP;
        }
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = -1;
        }
        if (a == null) {
          a = "fade";
        }
        this.cameraMode = Kk.TOP;
        this.duration = 1;
        this.type = a;
        this.tileData = e;
        this.duration = c;
        this.color = b;
        if (d == null) {
          a = d = 0;
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          d = fa.pool.get().set(d, a);
          d._inPool = false;
        } else {
          a = d.x;
          a = a < -1 ? -1 : a;
          d.set_x(a > 1 ? 1 : a);
          a = d.y;
          a = a < -1 ? -1 : a;
          d.set_y(a > 1 ? 1 : a);
        }
        this.direction = d;
        this.tweenOptions = {
          onComplete: null
        };
        if (f == null) {
          f = new Ha(0, 0, g.width, g.height);
        }
        this.region = f;
        this.cameraMode = k;
      }
      h["flixel.addons.transition.TransitionData"] = Cn;
      Cn.__name__ = "flixel.addons.transition.TransitionData";
      Cn.__interfaces__ = [B];
      Cn.prototype = {
        destroy: function () {
          this.direction = this.region = this.tweenOptions = this.direction = this.tileData = null;
        },
        __class__: Cn
      };
      function Yf(a, b, c) {
        db.call(this, a, b, c);
      }
      h["flixel.group.FlxTypedSpriteContainer"] = Yf;
      Yf.__name__ = "flixel.group.FlxTypedSpriteContainer";
      Yf.__super__ = db;
      Yf.prototype = q(db.prototype, {
        initGroup: function (a) {
          this.group = new Lk(this, a);
        },
        draw: function () {
          var a = Vb._defaultCameras;
          if (this._cameras != null) {
            Vb._defaultCameras = this._cameras;
          }
          db.prototype.draw.call(this);
          Vb._defaultCameras = a;
        },
        set_group: function (a) {
          throw K.thrown("FlxSpriteContainer.group cannot be set in FlxSpriteContainers");
        },
        set_camera: function (a) {
          this._cameras = a == null ? null : [a];
          return a;
        },
        set_cameras: function (a) {
          return this._cameras = a;
        },
        __class__: Yf
      });
      function me(a) {
        this._finalDelayTime = 0;
        this.finished = this._started = false;
        this._data = a;
        db.call(this, undefined, undefined, undefined);
      }
      h["flixel.addons.transition.TransitionEffect"] = me;
      me.__name__ = "flixel.addons.transition.TransitionEffect";
      me.__super__ = Yf;
      me.prototype = q(Yf.prototype, {
        destroy: function () {
          Yf.prototype.destroy.call(this);
          this.finishCallback = null;
          if (this._customCamera != null) {
            if (g.cameras.list.indexOf(this._customCamera) != -1) {
              g.cameras.remove(this._customCamera, true);
            }
            this._customCamera = null;
          }
        },
        start: function (a) {
          this._started = true;
          this._endStatus = a == 0 ? 3 : 2;
          switch (this._data.cameraMode._hx_index) {
            case 0:
              a = g.cameras.list;
              this.set_camera(a[a.length - 1]);
              break;
            case 1:
              this._customCamera = new Vb(0, 0, this._data.region.width | 0, this._data.region.height | 0);
              this._customCamera.bgColor = 0;
              g.cameras.add(this._customCamera, false);
              this.set_camera(this._customCamera);
          }
        },
        setStatus: function (a) {},
        delayThenFinish: function () {
          new Fc().start(this._finalDelayTime, l(this, this.onFinish));
        },
        onFinish: function (a) {
          this.finished = true;
          if (this.finishCallback != null) {
            a = this.finishCallback;
            this.finishCallback = null;
            a();
          }
        },
        __class__: me
      });
      function Ee(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (Ee.preload != null) {
          this.__fromImage(Ee.preload);
        } else {
          var f = this;
          Eb.loadFromBase64(cf.getString(Ee.resourceName), Ee.resourceType).then(function (a) {
            f.__fromImage(a);
            return Cb.withValue(f);
          }).onComplete(function (a) {
            if (Ee.preload == null) {
              Ee.preload = a.image;
            }
            if (e != null && ma.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.addons.transition._TransitionFade.RawGraphicDiagonalGradient"] = Ee;
      Ee.__name__ = "flixel.addons.transition._TransitionFade.RawGraphicDiagonalGradient";
      Ee.__super__ = T;
      Ee.prototype = q(T.prototype, {
        __class__: Ee
      });
      function Dn(a) {
        Ee.call(this, 319, 128, true, -1, a);
        this.width = 319;
        this.height = 128;
      }
      h["flixel.addons.transition.GraphicDiagonalGradient"] = Dn;
      Dn.__name__ = "flixel.addons.transition.GraphicDiagonalGradient";
      Dn.__super__ = Ee;
      Dn.prototype = q(Ee.prototype, {
        __class__: Dn
      });
      function Ik(a) {
        me.call(this, a);
        this.back = this.makeSprite(a.direction.x, a.direction.y, a.region);
        a = this.back.scrollFactor;
        var b = 0;
        var c = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.set_x(b);
        a.set_y(c);
        this.add(this.back);
      }
      h["flixel.addons.transition.TransitionFade"] = Ik;
      Ik.__name__ = "flixel.addons.transition.TransitionFade";
      Ik.__super__ = me;
      Ik.prototype = q(me.prototype, {
        destroy: function () {
          me.prototype.destroy.call(this);
          this.back = null;
        },
        start: function (a) {
          me.prototype.start.call(this, a);
          var b = {};
          this.setTweenValues(a == 0, this._data.direction.x, this._data.direction.y, this.back, b);
          this._data.tweenOptions.onComplete = l(this, this.finishTween);
          ka.tween(this.back, b, this._data.duration, this._data.tweenOptions);
        },
        setTweenValues: function (a, b, c, d, e) {
          var f = !a;
          if (b == 0 && c == 0) {
            d.set_alpha(a ? 0 : 1);
            e.alpha = f ? 0 : 1;
          } else if (b != 0 && c != 0) {
            if (b > 0) {
              d.set_x(a ? -this.back.get_width() : 0);
              e.x = f ? -this.back.get_width() : 0;
            } else {
              d.set_x(a ? g.width : g.width - this.back.get_width());
              e.x = f ? g.width : g.width - this.back.get_width();
            }
          } else if (b != 0) {
            if (b > 0) {
              d.set_x(a ? -this.back.get_width() : 0);
              e.x = f ? -this.back.get_width() : 0;
            } else {
              d.set_x(a ? g.width : -this.back.get_width() / 2);
              e.x = f ? g.width : -this.back.get_width() / 2;
            }
          } else if (c > 0) {
            d.set_y(a ? -this.back.get_height() : 0);
            e.y = f ? -this.back.get_height() : 0;
          } else {
            d.set_y(a ? g.height : -this.back.get_height() / 2);
            e.y = f ? g.height : -this.back.get_height() / 2;
          }
        },
        makeSprite: function (a, b, c) {
          var d = new G(c.x, c.y);
          var e = "transition" + this._data.color + "x" + a + "y" + b;
          d.set_antialiasing(false);
          if (a == 0 && b == 0) {
            d.makeGraphic(1, 1, this._data.color, false, e);
            e = d.scale;
            b = c.width | 0;
            c = c.height | 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            e.set_x(b);
            e.set_y(c);
            d.updateHitbox();
          } else if (a == 0 && b != 0) {
            d.makeGraphic(1, c.height * 2 | 0, this._data.color, false, e);
            e = td.createGradientBitmapData(1, c.height | 0, [this._data.color, 0], 1, b > 0 ? 90 : 270);
            b = b > 0 ? c.height : 0;
            d.get_pixels().copyPixels(e, e.rect, new kb(0, b));
            e = d.scale;
            b = c.width;
            c = 1;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            e.set_x(b);
            e.set_y(c);
            d.updateHitbox();
          } else if (a != 0 && b == 0) {
            b = a > 0 ? c.width : 0;
            a = a > 0 ? 0 : 180;
            d.makeGraphic(c.width * 2 | 0, 1, this._data.color, false, e);
            e = td.createGradientBitmapData(c.width | 0, 1, [this._data.color, 0], 1, a);
            d.get_pixels().copyPixels(e, e.rect, new kb(b, 0));
            e = d.scale;
            b = 1;
            c = c.height;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            e.set_x(b);
            e.set_y(c);
            d.updateHitbox();
          } else if (a != 0 && b != 0) {
            d.loadGraphic(this.getGradient());
            d.set_color(this._data.color);
            d.set_flipX(a < 0);
            d.set_flipY(b < 0);
          }
          return d;
        },
        getGradient: function () {
          var a = g.width;
          var b = g.height;
          var c = g.bitmap.add("flixel/images/transitions/diagonal_gradient.png").bitmap;
          var d = "flixel/images/transitions/diagonal_gradient.png:" + a + "x" + b;
          var e = g.bitmap._cache.h[d];
          if (e == null) {
            a = new T(Math.floor(a * 2.5), b, true, 0);
            b = new Aa();
            b.scale(a.width / c.width, a.height / c.height);
            a.draw(c, b, null, null, null, true);
            e = g.bitmap.add(a, false, d);
            e.persist = true;
            e.set_destroyOnNoUse(false);
          }
          return e;
        },
        finishTween: function (a) {
          this.delayThenFinish();
        },
        __class__: Ik
      });
      function Jk(a) {
        this._isCenter = false;
        me.call(this, a);
        this._grpSprites = new db();
        var b = 0;
        if (a.tileData == null) {
          a.tileData = {
            asset: null,
            width: 32,
            height: 32
          };
        }
        var c = a.region;
        var d = Math.ceil(c.width / a.tileData.width);
        var e = Math.ceil(c.height / a.tileData.height);
        var f = a.duration / (d > e ? d : e);
        var k = f * Math.abs(a.direction.x);
        f *= Math.abs(a.direction.y);
        var r = a.tileData.width;
        var n = a.tileData.height;
        var g = c.x | 0;
        var za = c.y | 0;
        if (a.direction.x < 0) {
          r *= -1;
          g += c.width + r | 0;
        }
        if (a.direction.y < 0) {
          n *= -1;
          za += c.height + n | 0;
        }
        c = g;
        for (var m = 0; m < e;) {
          var aa = m++;
          for (var h = 0, p = d; h < p;) {
            h++;
            var l = 40;
            if (a.tileData.frameRate != null) {
              l = a.tileData.frameRate;
            }
            l = new Hk(c, za, b, a.tileData.asset, a.tileData.width, a.tileData.height, l);
            l.set_color(a.color);
            var q = l.scrollFactor;
            var L = 0;
            var t = 0;
            if (t == null) {
              t = 0;
            }
            if (L == null) {
              L = 0;
            }
            q.set_x(L);
            q.set_y(t);
            this._grpSprites.add(l);
            c += r;
            b += k;
          }
          za += n;
          c = g;
          b = (aa + 1) * f;
        }
        this.add(this._grpSprites);
        this._isCenter = a.direction.x == 0 && a.direction.y == 0;
      }
      h["flixel.addons.transition.TransitionTiles"] = Jk;
      Jk.__name__ = "flixel.addons.transition.TransitionTiles";
      Jk.__super__ = me;
      Jk.prototype = q(me.prototype, {
        destroy: function () {
          me.prototype.destroy.call(this);
          this._grpSprites = null;
        },
        start: function (a) {
          me.prototype.start.call(this, a);
          this._grpSprites.group.forEach(function (b) {
            b.start(a);
          }, false);
        },
        setStatus: function (a) {
          me.prototype.setStatus.call(this, a);
          this._grpSprites.group.forEach(function (b) {
            b.setStatus(a);
          }, false);
        },
        update: function (a) {
          me.prototype.update.call(this, a);
          if (this._started) {
            a = true;
            for (var b = 0, c = this._grpSprites.group.members; b < c.length;) {
              var d = c[b];
              ++b;
              if (d.status != -1 && d.status != this._endStatus) {
                a = false;
                break;
              }
            }
            if (a) {
              this._started = false;
              this.delayThenFinish();
            }
          }
        },
        __class__: Jk
      });
      function Jg(a, b, c, d, e, f) {
        this.x = new Mk(a, c, e);
        this.y = new Mk(b, d, f);
      }
      h["flixel.addons.ui.Anchor"] = Jg;
      Jg.__name__ = "flixel.addons.ui.Anchor";
      Jg.__interfaces__ = [B];
      Jg.prototype = {
        destroy: function () {
          this.y = this.x = null;
        },
        anchorThing: function (a, b) {
          switch (this.x.side) {
            case "center":
              var c = b.x + b.get_width() / 2;
              break;
            case "left":
              c = b.x;
              break;
            case "right":
              c = b.x + b.get_width();
              break;
            default:
              c = b.x;
          }
          switch (this.y.side) {
            case "bottom":
              b = b.y + b.get_height();
              break;
            case "center":
              b = b.y + b.get_height() / 2;
              break;
            case "top":
              b = b.y;
              break;
            default:
              b = b.y;
          }
          switch (this.x.flush) {
            case "center":
              c -= a.get_width() / 2;
              break;
            case "right":
              c -= a.get_width();
          }
          switch (this.y.flush) {
            case "bottom":
              b -= a.get_height();
              break;
            case "center":
              b -= a.get_height() / 2;
          }
          a.set_x(c + this.x.offset);
          a.set_y(b + this.y.offset);
        },
        getFlipped: function (a, b, c) {
          var d = a ? this.x.offset * -1 : this.x.offset;
          var e = b ? this.y.offset * -1 : this.y.offset;
          var f = a ? this.flipAnchorSide(this.x.side) : this.x.side;
          var k = b ? this.flipAnchorSide(this.y.side) : this.y.side;
          a = a ? this.flipAnchorSide(this.x.flush) : this.x.flush;
          b = b ? this.flipAnchorSide(this.y.flush) : this.y.flush;
          if (c == null) {
            c = new Jg(d, e, f, k, a, b);
          } else {
            c.x.offset = d;
            c.y.offset = e;
            c.x.side = f;
            c.y.side = k;
            c.x.flush = a;
            c.y.flush = b;
          }
          return c;
        },
        clone: function () {
          return new Jg(this.x.offset, this.y.offset, this.x.side, this.y.side, this.x.flush, this.y.flush);
        },
        flipAnchorSide: function (a) {
          if (a == "left") {
            return "right";
          } else if (a == "right") {
            return "left";
          } else if (a == "top") {
            return "bottom";
          } else if (a == "bottom") {
            return "top";
          } else {
            return a;
          }
        },
        __class__: Jg
      };
      function Mk(a, b, c) {
        this.side = this.flush = "center";
        this.offset = 0;
        this.offset = a;
        this.side = b;
        this.flush = c;
      }
      h["flixel.addons.ui.AnchorPoint"] = Mk;
      Mk.__name__ = "flixel.addons.ui.AnchorPoint";
      Mk.prototype = {
        __class__: Mk
      };
      function df(a, b, c, d) {
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 1;
        }
        this.style = a;
        this.color = b;
        this.size = c;
        this.quality = d;
      }
      h["flixel.addons.ui.BorderDef"] = df;
      df.__name__ = "flixel.addons.ui.BorderDef";
      df.fromXML = function (a) {
        var b = F.xml_str(a, "border");
        var c = Ta.NONE;
        var d = F.xml_color(a, "border_color", true, 0);
        var e = F.xml_f(a, "border_size", 1);
        var f = F.xml_f(a, "border_quality", 0);
        c = new df(c, d, e, f);
        switch (b) {
          case "":
            b = F.xml_str(a, "shadow", true, "");
            if (b != "" && b != "false" && b != "none") {
              c.style = Ta.SHADOW;
              a = true;
              if (a == null) {
                a = false;
              }
              d = xb.fromString(b);
              if (d == null) {
                if (a) {
                  d = 0;
                } else {
                  throw K.thrown("U.parseHex() unable to parse hex String " + b);
                }
              }
              c.color = d;
            } else {
              b = F.xml_str(a, "outline", true, "");
              if (b != "" && b != "false" && b != "none") {
                c.style = Ta.OUTLINE;
                a = true;
                if (a == null) {
                  a = false;
                }
                d = xb.fromString(b);
                if (d == null) {
                  if (a) {
                    d = 0;
                  } else {
                    throw K.thrown("U.parseHex() unable to parse hex String " + b);
                  }
                }
                c.color = d;
              } else {
                b = F.xml_str(a, "outline_fast");
                if (b != "" && b != "false" && b != "none") {
                  c.style = Ta.OUTLINE_FAST;
                  a = true;
                  if (a == null) {
                    a = false;
                  }
                  d = xb.fromString(b);
                  if (d == null) {
                    if (a) {
                      d = 0;
                    } else {
                      throw K.thrown("U.parseHex() unable to parse hex String " + b);
                    }
                  }
                  c.color = d;
                }
              }
            }
            break;
          case "false":
          case "none":
            c.style = Ta.NONE;
            break;
          case "outline":
            c.style = Ta.OUTLINE;
            break;
          case "outline_fast":
            c.style = Ta.OUTLINE_FAST;
            break;
          case "shadow":
            c.style = Ta.SHADOW;
        }
        return c;
      };
      df.prototype = {
        clone: function () {
          return new df(this.style, this.color, this.size, this.quality);
        },
        apply: function (a) {
          var b = this.color;
          var c = this.size;
          var d = this.quality;
          if (d == null) {
            d = 1;
          }
          if (c == null) {
            c = 1;
          }
          if (b == null) {
            b = 0;
          }
          a.set_borderStyle(this.style);
          a.set_borderColor(b);
          a.set_borderSize(c);
          a.set_borderQuality(d);
          return a;
        },
        __class__: df
      };
      function dj(a, b, c, d) {
        this.font = this.border = this.color = this.align = null;
        this.font = a;
        this.border = d;
        this.color = c;
        this.align = b;
      }
      h["flixel.addons.ui.ButtonLabelStyle"] = dj;
      dj.__name__ = "flixel.addons.ui.ButtonLabelStyle";
      dj.prototype = {
        apply: function (a) {
          if (this.font != null) {
            this.font.apply(null, a);
          }
          if (this.border != null) {
            this.border.apply(a);
          }
          if (this.color != null) {
            a.set_color(this.color);
          }
          if (this.align != null) {
            a.set_alignment(this.align);
          }
        },
        __class__: dj
      };
      function Kg() {}
      h["flixel.addons.ui.FlxBaseMultiInput"] = Kg;
      Kg.__name__ = "flixel.addons.ui.FlxBaseMultiInput";
      Kg.__interfaces__ = [B];
      Kg.prototype = {
        destroy: function () {
          this.forbiddens = this.combos = null;
        },
        checkJustPressed: function () {
          return false;
        },
        checkPressed: function () {
          return false;
        },
        justPressed: function () {
          if (this.checkJustPressed()) {
            return this.passCombosAndForbiddens();
          } else {
            return false;
          }
        },
        pressed: function () {
          if (this.checkPressed()) {
            return this.passCombosAndForbiddens();
          } else {
            return false;
          }
        },
        equals: function (a) {
          if (a == null || Db.typeof(a) != Db.typeof(this) || this.input != a.input || this.combos == null != (a.combos == null) || this.forbiddens == null != (a.forbiddens == null)) {
            return false;
          }
          if (this.combos != null && a.combos != null) {
            for (var b = 0, c = this.combos; b < c.length;) {
              var d = c[b];
              ++b;
              if (a.combos.indexOf(d) == -1) {
                return false;
              }
            }
          }
          if (this.forbiddens != null && a.forbiddens != null) {
            b = 0;
            c = this.forbiddens;
            while (b < c.length) {
              d = c[b];
              ++b;
              if (a.forbiddens.indexOf(d) == -1) {
                return false;
              }
            }
          }
          return true;
        },
        passCombosAndForbiddens: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            a = true;
          }
          a = this.combos == null || this.checkCombos(a);
          b = this.forbiddens == null || this.checkForbiddens(b);
          if (a) {
            return b;
          } else {
            return false;
          }
        },
        checkCombos: function (a) {
          return false;
        },
        checkForbiddens: function (a) {
          return false;
        },
        __class__: Kg
      };
      function Q(a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 8;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._hasBorderAlpha = false;
        this._regen = true;
        this._formatRanges = [];
        this._autoHeight = true;
        this.borderSize = this.borderQuality = 1;
        this.borderColor = 0;
        this.borderStyle = Ta.NONE;
        this.text = "";
        G.call(this, a, b);
        if (d == null || d == "") {
          this.set_text("");
          d = " ";
        } else {
          this.set_text(d);
        }
        this.textField = new Xc();
        this.textField.set_selectable(false);
        this.textField.set_multiline(true);
        this.textField.set_wordWrap(true);
        this._defaultFormat = new nd(null, e, 16777215);
        this.set_letterSpacing(0);
        this.set_font(Qd.FONT_DEFAULT);
        this._formatAdjusted = new nd();
        this.textField.set_defaultTextFormat(this._defaultFormat);
        this.textField.set_text(d);
        this.set_fieldWidth(c);
        this.textField.set_embedFonts(f);
        this.textField.set_sharpness(100);
        this.textField.set_height(d.length <= 0 ? 1 : 10);
        this.set_allowCollisions(0);
        this.set_moves(false);
        this.drawFrame();
        a = b = 1;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = fa.pool.get().set(b, a);
        a._inPool = false;
        this.shadowOffset = a;
      }
      h["flixel.text.FlxText"] = Q;
      Q.__name__ = "flixel.text.FlxText";
      Q.__super__ = G;
      Q.prototype = q(G.prototype, {
        destroy: function () {
          this._formatAdjusted = this._defaultFormat = this._font = this.textField = null;
          this.shadowOffset = da.put(this.shadowOffset);
          G.prototype.destroy.call(this);
        },
        drawFrame: function (a) {
          if (a == null) {
            a = false;
          }
          this._regen = this._regen || a;
          G.prototype.drawFrame.call(this, this._regen);
        },
        setFormat: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = true;
          }
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = 8;
          }
          if (e == null) {
            e = Ta.NONE;
          }
          if (k) {
            this.set_font(a);
          } else if (a != null) {
            this.set_systemFont(a);
          }
          this.set_size(b);
          this.set_color(c);
          if (d != null) {
            this.set_alignment(d);
          }
          c = f;
          if (c == null) {
            c = 0;
          }
          this.set_borderStyle(e);
          this.set_borderColor(c);
          this.set_borderSize(1);
          this.set_borderQuality(1);
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return this;
        },
        updateHitbox: function () {
          this.regenGraphic();
          G.prototype.updateHitbox.call(this);
        },
        getScreenBounds: function (a, b) {
          this.regenGraphic();
          return G.prototype.getScreenBounds.call(this, a, b);
        },
        set_fieldWidth: function (a) {
          if (this.textField == null) {
            return a;
          }
          if (a <= 0) {
            this.set_wordWrap(false);
            this.set_autoSize(true);
            this._autoHeight = true;
          } else {
            this.set_autoSize(false);
            this.set_wordWrap(true);
            this.textField.set_width(a);
          }
          this._regen = true;
          return a;
        },
        get_fieldWidth: function () {
          if (this.textField != null) {
            return this.textField.get_width();
          } else {
            return 0;
          }
        },
        set_fieldHeight: function (a) {
          if (this.textField == null) {
            return a;
          }
          if (a <= 0) {
            this._autoHeight = true;
          } else {
            this._autoHeight = false;
            this.textField.set_height(a);
          }
          this._regen = true;
          return a;
        },
        set_autoSize: function (a) {
          if (this.textField != null) {
            this.textField.set_autoSize(a ? 1 : 2);
            this._regen = true;
          }
          return a;
        },
        set_text: function (a) {
          this.text = a;
          if (this.textField != null) {
            var b = this.textField.get_text();
            this.textField.set_text(a);
            this._regen = this.textField.get_text() != b || this._regen;
          }
          return a;
        },
        set_size: function (a) {
          this._defaultFormat.size = a;
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_letterSpacing: function (a) {
          this._defaultFormat.letterSpacing = a;
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_color: function (a) {
          if (this._defaultFormat.color == (a & 16777215)) {
            return a;
          }
          this._defaultFormat.color = a & 16777215;
          this.color = a;
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_font: function (a) {
          this.textField.set_embedFonts(true);
          if (a != null) {
            var b = a;
            if (W.exists(a, "FONT")) {
              b = W.getFont(a).name;
            }
            this._defaultFormat.font = b;
          } else {
            this._defaultFormat.font = Qd.FONT_DEFAULT;
          }
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return this._font = this._defaultFormat.font;
        },
        set_systemFont: function (a) {
          this.textField.set_embedFonts(false);
          this._defaultFormat.font = a;
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_wordWrap: function (a) {
          if (this.textField.get_wordWrap() != a) {
            this.textField.set_wordWrap(a);
            this._regen = true;
          }
          return a;
        },
        set_alignment: function (a) {
          this._defaultFormat.align = En.toOpenFL(a);
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_borderStyle: function (a) {
          if (a != this.borderStyle) {
            this._regen = true;
          }
          return this.borderStyle = a;
        },
        set_borderColor: function (a) {
          if (this.borderColor != a && this.borderStyle != Ta.NONE) {
            this._regen = true;
          }
          this._hasBorderAlpha = (a >> 24 & 255) / 255 < 1;
          return this.borderColor = a;
        },
        set_borderSize: function (a) {
          if (a != this.borderSize && this.borderStyle != Ta.NONE) {
            this._regen = true;
          }
          return this.borderSize = a;
        },
        set_borderQuality: function (a) {
          a = a < 0 ? 0 : a;
          a = a > 1 ? 1 : a;
          if (a != this.borderQuality && this.borderStyle != Ta.NONE) {
            this._regen = true;
          }
          return this.borderQuality = a;
        },
        set_graphic: function (a) {
          var b = this.graphic;
          a = G.prototype.set_graphic.call(this, a);
          g.bitmap.removeIfNoUse(b);
          return a;
        },
        get_width: function () {
          this.regenGraphic();
          return G.prototype.get_width.call(this);
        },
        get_height: function () {
          this.regenGraphic();
          return G.prototype.get_height.call(this);
        },
        updateColorTransform: function () {
          if (this.colorTransform == null) {
            this.colorTransform = new Nb();
          }
          if (this.alpha != 1) {
            this.colorTransform.alphaMultiplier = this.alpha;
            this.useColorTransform = true;
          } else {
            this.colorTransform.alphaMultiplier = 1;
            this.useColorTransform = false;
          }
          this.dirty = true;
        },
        regenGraphic: function () {
          if (this.textField != null && this._regen) {
            var a = 0;
            var b = 4;
            if (this.graphic != null) {
              a = this.graphic.width;
              b = this.graphic.height;
            }
            var c = Math.ceil(this.textField.get_width());
            var d = this._autoHeight ? this.textField.get_textHeight() : this.textField.get_height();
            d = Math.ceil(d) + (this._autoHeight ? 4 : 0);
            if (this.textField.get_textHeight() == 0) {
              d = b;
            }
            if (a != c || b != d) {
              a = g.bitmap.getUniqueKey("text");
              this.makeGraphic(c, d, 0, false, a);
              if (this._hasBorderAlpha) {
                this._borderPixels = this.graphic.bitmap.clone();
              }
              if (this._autoHeight) {
                this.textField.set_height(d);
              }
              this._flashRect.x = 0;
              this._flashRect.y = 0;
              this._flashRect.width = c;
              this._flashRect.height = d;
            } else {
              this.graphic.bitmap.fillRect(this._flashRect, 0);
              if (this._hasBorderAlpha) {
                if (this._borderPixels == null) {
                  this._borderPixels = new T(this.frameWidth, this.frameHeight, true);
                } else {
                  this._borderPixels.fillRect(this._flashRect, 0);
                }
              }
            }
            if (this.textField != null && this.textField.get_text() != null) {
              this.copyTextFormat(this._defaultFormat, this._formatAdjusted);
              this._matrix.identity();
              this.applyBorderStyle();
              if (this._hasBorderAlpha) {
                if (this._borderColorTransform == null) {
                  this._borderColorTransform = new Nb();
                }
                this._borderColorTransform.alphaMultiplier = (this.borderColor >> 24 & 255) / 255;
                this._borderPixels.colorTransform(this._borderPixels.rect, this._borderColorTransform);
                this.graphic.bitmap.draw(this._borderPixels);
              }
              this.applyFormats(this._formatAdjusted, false);
              this.drawTextFieldTo(this.graphic.bitmap);
            }
            this._regen = false;
            this.set_frame(this.frame);
          }
        },
        drawTextFieldTo: function (a) {
          a.draw(this.textField, this._matrix);
        },
        draw: function () {
          this.regenGraphic();
          G.prototype.draw.call(this);
        },
        calcFrame: function (a) {
          if (a == null) {
            a = false;
          }
          if (this.textField != null && (!g.renderTile || !!a)) {
            this.regenGraphic();
            G.prototype.calcFrame.call(this, a);
          }
        },
        applyBorderStyle: function () {
          var a = this.borderSize * this.borderQuality | 0;
          if (a <= 0) {
            a = 1;
          }
          var b = this.borderSize / a;
          switch (this.borderStyle._hx_index) {
            case 1:
              this.applyFormats(this._formatAdjusted, true);
              for (var c = 0; c < a;) {
                c++;
                var d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(b, b);
                this.drawTextFieldTo(d);
              }
              this._matrix.translate(-this.shadowOffset.x * this.borderSize, -this.shadowOffset.y * this.borderSize);
              break;
            case 2:
              this.applyFormats(this._formatAdjusted, true);
              var e = b;
              for (c = 0; c < a;) {
                c++;
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e, -e);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(e, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(e, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(0, e);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(0, e);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(0, -e);
                this.drawTextFieldTo(d);
                this._matrix.translate(e, 0);
                e += b;
              }
              break;
            case 3:
              this.applyFormats(this._formatAdjusted, true);
              e = b;
              c = 0;
              while (c < a) {
                c++;
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e, -e);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(e * 2, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(0, e * 2);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e * 2, 0);
                this.drawTextFieldTo(d);
                this._matrix.translate(e, -e);
                e += b;
              }
          }
        },
        applyFormats: function (a, b) {
          if (b == null) {
            b = false;
          }
          this.copyTextFormat(this._defaultFormat, a, false);
          a.color = b ? this.borderColor & 16777215 : this._defaultFormat.color;
          this.textField.setTextFormat(a);
          for (var c = 0, d = this._formatRanges; c < d.length;) {
            var e = d[c];
            ++c;
            if (this.textField.get_text().length - 1 < e.range.start) {
              break;
            } else {
              var f = e.format.format;
              this.copyTextFormat(f, a, false);
              a.color = b ? e.format.borderColor & 16777215 : f.color;
            }
            this.textField.setTextFormat(a, e.range.start, Math.min(e.range.end, this.textField.get_text().length) | 0);
          }
        },
        copyTextFormat: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          b.font = a.font;
          b.bold = a.bold;
          b.italic = a.italic;
          b.underline = a.underline;
          b.size = a.size;
          b.color = a.color;
          b.leading = a.leading;
          if (c) {
            b.align = a.align;
          }
        },
        set_frames: function (a) {
          G.prototype.set_frames.call(this, a);
          this._regen = false;
          return a;
        },
        __class__: Q,
        __properties__: q(G.prototype.__properties__, {
          set_alignment: "set_alignment",
          set_wordWrap: "set_wordWrap",
          set_systemFont: "set_systemFont",
          set_font: "set_font",
          set_letterSpacing: "set_letterSpacing",
          set_size: "set_size",
          set_autoSize: "set_autoSize",
          set_fieldHeight: "set_fieldHeight",
          set_fieldWidth: "set_fieldWidth",
          get_fieldWidth: "get_fieldWidth",
          set_borderQuality: "set_borderQuality",
          set_borderSize: "set_borderSize",
          set_borderColor: "set_borderColor",
          set_borderStyle: "set_borderStyle",
          set_text: "set_text"
        })
      });
      function ef(a, b, c, d, e, f, k, r) {
        if (r == null) {
          r = true;
        }
        if (k == null) {
          k = -1;
        }
        if (f == null) {
          f = -16777216;
        }
        if (e == null) {
          e = 8;
        }
        if (c == null) {
          c = 150;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.backgroundColor = -1;
        this.fieldBorderThickness = 1;
        this.fieldBorderColor = -16777216;
        this.caretIndex = this.forceCase = this.maxLength = this.filterMode = 0;
        this.hasFocus = false;
        this.caretWidth = 1;
        this.background = false;
        Q.call(this, a, b, c, d, e, r);
        this.set_backgroundColor(k);
        if (k != 0) {
          this.background = true;
        }
        this.set_color(f);
        this.set_caretColor(f);
        this.caret = new G();
        this.caret.makeGraphic(this.caretWidth, e + 2 | 0);
        this._caretTimer = new Fc();
        this.set_caretIndex(0);
        this.set_hasFocus(false);
        if (this.background) {
          this.fieldBorderSprite = new G(a, b);
          this.backgroundSprite = new G(a, b);
        }
        this.set_lines(1);
        na.get_current().stage.addEventListener("keyDown", l(this, this.onKeyDown));
        if (d == null) {
          d = "";
        }
        this.set_text(d);
        this.calcFrame();
      }
      h["flixel.addons.ui.FlxInputText"] = ef;
      ef.__name__ = "flixel.addons.ui.FlxInputText";
      ef.__super__ = Q;
      ef.prototype = q(Q.prototype, {
        set_caretColor: function (a) {
          this.caretColor = a;
          this.dirty = true;
          return this.caretColor;
        },
        destroy: function () {
          na.get_current().stage.removeEventListener("keyDown", l(this, this.onKeyDown));
          this.backgroundSprite = da.destroy(this.backgroundSprite);
          this.fieldBorderSprite = da.destroy(this.fieldBorderSprite);
          this.callback = null;
          Q.prototype.destroy.call(this);
        },
        draw: function () {
          this.drawSprite(this.fieldBorderSprite);
          this.drawSprite(this.backgroundSprite);
          Q.prototype.draw.call(this);
          if (this.caretColor != this.caret.color || this.caret.get_height() != (this._defaultFormat.size | 0) + 2) {
            this.caret.set_color(this.caretColor);
          }
          this.drawSprite(this.caret);
        },
        drawSprite: function (a) {
          if (a != null && a.visible) {
            a.scrollFactor = this.scrollFactor;
            a.set_cameras(this.get_cameras());
            a.draw();
          }
        },
        update: function (a) {
          Q.prototype.update.call(this, a);
          if (g.mouse._leftButton.current == 2) {
            a = this.hasFocus;
            if (g.mouse.overlaps(this, this.get_camera())) {
              this.set_caretIndex(this.getCaretIndex());
              this.set_hasFocus(true);
              if (!a && this.focusGained != null) {
                this.focusGained();
              }
            } else {
              this.set_hasFocus(false);
              if (a && this.focusLost != null) {
                this.focusLost();
              }
            }
          }
        },
        onKeyDown: function (a) {
          var b = a.keyCode;
          if (this.hasFocus) {
            if (b == 67 && a.ctrlKey) {
              kc.set_text(this.text);
              this.onChange("copy");
            } else if (b == 86 && a.ctrlKey) {
              a = this.filter(kc.get_text());
              if (a.length > 0 && (this.maxLength == 0 || this.text.length + a.length < this.maxLength)) {
                this.set_text(this.insertSubstring(this.text, a, this.caretIndex));
                this.set_caretIndex(this.caretIndex + a.length);
                this.onChange("input");
                this.onChange("paste");
              }
            } else if (b == 88 && a.ctrlKey) {
              kc.set_text(this.text);
              this.set_text("");
              this.set_caretIndex(0);
              this.onChange("input");
              this.onChange("cut");
            } else if (b != 16 && b != 17 && b != 220 && b != 27) {
              if (b == 37) {
                if (this.caretIndex > 0) {
                  this.set_caretIndex(this.caretIndex - 1);
                  this.set_text(this.text);
                }
              } else if (b == 39) {
                if (this.caretIndex < this.text.length) {
                  this.set_caretIndex(this.caretIndex + 1);
                  this.set_text(this.text);
                }
              } else if (b == 35) {
                this.set_caretIndex(this.text.length);
                this.set_text(this.text);
              } else if (b == 36) {
                this.set_caretIndex(0);
                this.set_text(this.text);
              } else if (b == 8) {
                if (this.caretIndex > 0) {
                  this.set_caretIndex(this.caretIndex - 1);
                  this.set_text(this.text.substring(0, this.caretIndex) + this.text.substring(this.caretIndex + 1));
                  this.onChange("backspace");
                }
              } else if (b == 46) {
                if (this.text.length > 0 && this.caretIndex < this.text.length) {
                  this.set_text(this.text.substring(0, this.caretIndex) + this.text.substring(this.caretIndex + 1));
                  this.onChange("delete");
                }
              } else if (b == 13) {
                this.onChange("enter");
              } else if (a.charCode != 0) {
                a = this.filter(String.fromCodePoint(a.charCode));
                if (a.length > 0 && (this.maxLength == 0 || this.text.length + a.length < this.maxLength)) {
                  this.set_text(this.insertSubstring(this.text, a, this.caretIndex));
                  this.set_caretIndex(this.caretIndex + 1);
                  this.onChange("input");
                }
              }
            }
          }
        },
        onChange: function (a) {
          if (this.callback != null) {
            this.callback(this.text, a);
          }
        },
        insertSubstring: function (a, b, c) {
          return a = c != a.length ? a.substring(0, c) + b + a.substring(c) : a + b;
        },
        getCaretIndex: function () {
          var a = g.mouse.x - this.x;
          var b = g.mouse.y - this.y;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          return this.getCharIndexAtPoint(b.x, b.y);
        },
        getCharBoundaries: function (a) {
          if (this._charBoundaries != null && a >= 0 && this._charBoundaries.length > 0) {
            var b = new ea();
            if (a >= this._charBoundaries.length) {
              a = this._charBoundaries[this._charBoundaries.length - 1];
              var c = b;
            } else {
              a = this._charBoundaries[a];
              c = b;
            }
            if (c == null) {
              c = new ea();
            }
            c.x = a.x;
            c.y = a.y;
            c.width = a.width;
            c.height = a.height;
            return b;
          }
          return null;
        },
        set_text: function (a) {
          var b = Q.prototype.set_text.call(this, a);
          if (this.textField == null) {
            return b;
          }
          var c = a.length;
          this.prepareCharBoundaries(c);
          this.textField.set_text("");
          var d = 0;
          var e;
          var f = 0;
          for (var k = 0; k < c;) {
            var r = k++;
            this.textField.appendText(M.substr(a, r, 1));
            e = this.textField.get_textWidth();
            if (r == 0) {
              d = this.textField.get_textHeight();
            }
            this._charBoundaries[r].x = 2 + f;
            this._charBoundaries[r].y = 2;
            this._charBoundaries[r].width = e - f;
            this._charBoundaries[r].height = d;
            f = e;
          }
          this.textField.set_text(a);
          this.onSetTextCheck();
          return b;
        },
        getCharIndexAtPoint: function (a, b) {
          b = 0;
          if (this._charBoundaries != null && this._charBoundaries.length > 0 && this.textField.get_textWidth() <= this.textField.get_width()) {
            switch (this.getAlignStr()) {
              case "center":
                a = a - this.textField.get_width() / 2 + this.textField.get_textWidth() / 2;
                break;
              case "right":
                a = a - this.textField.get_width() + this.textField.get_textWidth();
            }
          }
          if (this._charBoundaries != null) {
            for (var c = 0, d = this._charBoundaries; c < d.length;) {
              var e = d[c];
              ++c;
              if (a >= e.x && a <= e.x + e.width) {
                return b;
              }
              ++b;
            }
          }
          if (this._charBoundaries != null && this._charBoundaries.length > 0 && a > this.textField.get_textWidth()) {
            return this._charBoundaries.length;
          } else {
            return 0;
          }
        },
        prepareCharBoundaries: function (a) {
          if (this._charBoundaries == null) {
            this._charBoundaries = [];
          }
          if (this._charBoundaries.length > a) {
            for (var b = 0, c = this._charBoundaries.length - a; b < c;) {
              b++;
              this._charBoundaries.pop();
            }
          }
          b = 0;
          for (c = a; b < c;) {
            a = b++;
            if (this._charBoundaries.length - 1 < a) {
              a = this._charBoundaries;
              var d = 0;
              var e = 0;
              var f = 0;
              var k = 0;
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              var r = Ha._pool.get();
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              r.x = d;
              r.y = e;
              r.width = f;
              r.height = k;
              r._inPool = false;
              a.push(r);
            }
          }
        },
        onSetTextCheck: function () {},
        calcFrame: function (a) {
          if (a == null) {
            a = false;
          }
          Q.prototype.calcFrame.call(this, a);
          if (this.fieldBorderSprite != null) {
            if (this.fieldBorderThickness > 0) {
              this.fieldBorderSprite.makeGraphic(this.get_width() + this.fieldBorderThickness * 2 | 0, this.get_height() + this.fieldBorderThickness * 2 | 0, this.fieldBorderColor);
              this.fieldBorderSprite.set_x(this.x - this.fieldBorderThickness);
              this.fieldBorderSprite.set_y(this.y - this.fieldBorderThickness);
            } else if (this.fieldBorderThickness == 0) {
              this.fieldBorderSprite.set_visible(false);
            }
          }
          if (this.backgroundSprite != null) {
            if (this.background) {
              this.backgroundSprite.makeGraphic(this.get_width() | 0, this.get_height() | 0, this.backgroundColor);
              this.backgroundSprite.set_x(this.x);
              this.backgroundSprite.set_y(this.y);
            } else {
              this.backgroundSprite.set_visible(false);
            }
          }
          if (this.caret != null) {
            a = this.caretWidth;
            var b = (this._defaultFormat.size | 0) + 2 | 0;
            var c = this.borderColor & 16777215 | -16777216;
            var d = this.caretColor & 16777215 | -16777216;
            var e = "caret" + a + "x" + b + "c:" + d + "b:" + H.string(this.borderStyle) + "," + this.borderSize + "," + c;
            switch (this.borderStyle._hx_index) {
              case 0:
                this.caret.makeGraphic(a, b, d, false, e);
                this.caret.offset.set_x(this.caret.offset.set_y(0));
                break;
              case 1:
                a += this.borderSize | 0;
                b += this.borderSize | 0;
                this.caret.makeGraphic(a, b, 0, false, e);
                e = new ea(this.borderSize, this.borderSize, this.caretWidth, (this._defaultFormat.size | 0) + 2 | 0);
                this.caret.get_pixels().fillRect(e, c);
                e.x = e.y = 0;
                this.caret.get_pixels().fillRect(e, d);
                this.caret.offset.set_x(this.caret.offset.set_y(0));
                break;
              case 2:
              case 3:
                a += this.borderSize * 2 | 0;
                b += this.borderSize * 2 | 0;
                this.caret.makeGraphic(a, b, c, false, e);
                e = new ea(this.borderSize, this.borderSize, this.caretWidth, (this._defaultFormat.size | 0) + 2 | 0);
                this.caret.get_pixels().fillRect(e, d);
                this.caret.offset.set_x(this.caret.offset.set_y(this.borderSize));
            }
            this.caret.set_width(a);
            this.caret.set_height(b);
            this.set_caretIndex(this.caretIndex);
          }
        },
        toggleCaret: function (a) {
          this.caret.set_visible(!this.caret.visible);
        },
        filter: function (a) {
          if (this.forceCase == 1) {
            a = a.toUpperCase();
          } else if (this.forceCase == 2) {
            a = a.toLowerCase();
          }
          if (this.filterMode != 0) {
            switch (this.filterMode) {
              case 1:
                var b = new sa("[^a-zA-Z]*", "g");
                break;
              case 2:
                b = new sa("[^0-9]*", "g");
                break;
              case 3:
                b = new sa("[^a-zA-Z0-9]*", "g");
                break;
              case 4:
                b = this.customFilterPattern;
                break;
              default:
                throw new Rb("FlxInputText: Unknown filterMode (" + this.filterMode + ")");
            }
            a = a.replace(b.r, "");
          }
          return a;
        },
        set_params: function (a) {
          this.params = a;
          if (this.params == null) {
            this.params = [];
          }
          this.params.push({
            name: "value",
            value: this.text
          });
          return a;
        },
        set_x: function (a) {
          if (this.fieldBorderSprite != null && this.fieldBorderThickness > 0) {
            this.fieldBorderSprite.set_x(a - this.fieldBorderThickness);
          }
          if (this.backgroundSprite != null && this.background) {
            this.backgroundSprite.set_x(a);
          }
          return Q.prototype.set_x.call(this, a);
        },
        set_y: function (a) {
          if (this.fieldBorderSprite != null && this.fieldBorderThickness > 0) {
            this.fieldBorderSprite.set_y(a - this.fieldBorderThickness);
          }
          if (this.backgroundSprite != null && this.background) {
            this.backgroundSprite.set_y(a);
          }
          return Q.prototype.set_y.call(this, a);
        },
        set_hasFocus: function (a) {
          if (a) {
            if (this.hasFocus != a) {
              this._caretTimer = new Fc().start(0.5, l(this, this.toggleCaret), 0);
              this.caret.set_visible(true);
              this.set_caretIndex(this.text.length);
            }
          } else {
            this.caret.set_visible(false);
            if (this._caretTimer != null) {
              this._caretTimer.cancel();
            }
          }
          if (a != this.hasFocus) {
            this.calcFrame();
          }
          return this.hasFocus = a;
        },
        getAlignStr: function () {
          var a = "left";
          if (this._defaultFormat != null && this._defaultFormat.align != null) {
            a = En.fromOpenFL(this._defaultFormat.align);
          }
          return a;
        },
        set_caretIndex: function (a) {
          var b = 0;
          switch (this.getAlignStr()) {
            case "center":
              if (b <= 1) {
                b = 0;
              }
              break;
            case "right":
              b = this.textField.get_width() - 2 - this.textField.get_textWidth() - 2;
              if (b < 0) {
                b = 0;
              }
              break;
            default:
              b = 0;
          }
          this.caretIndex = a;
          if (this.caretIndex > this.text.length + 1) {
            this.caretIndex = -1;
          }
          if (this.caretIndex != -1) {
            if (this.caretIndex < this.text.length) {
              a = this.getCharBoundaries(this.caretIndex);
              if (a != null) {
                this.caret.set_x(b + a.get_left() + this.x);
                this.caret.set_y(a.get_top() + this.y);
              }
            } else {
              a = this.getCharBoundaries(this.caretIndex - 1);
              if (a != null) {
                this.caret.set_x(b + a.get_right() + this.x);
                this.caret.set_y(a.get_top() + this.y);
              } else if (this.text.length == 0) {
                this.caret.set_x(this.x + b + 2);
                this.caret.set_y(this.y + 2);
              }
            }
          }
          if (this.lines == 1 && this.caret.x + this.caret.get_width() > this.x + this.get_width()) {
            this.caret.set_x(this.x + this.get_width() - 2);
          }
          return this.caretIndex;
        },
        set_forceCase: function (a) {
          this.forceCase = a;
          this.set_text(this.filter(this.text));
          return this.forceCase;
        },
        set_size: function (a) {
          Q.prototype.set_size.call(this, a);
          this.caret.makeGraphic(1, (this._defaultFormat.size | 0) + 2 | 0);
          return a;
        },
        set_lines: function (a) {
          if (a == 0) {
            return 0;
          }
          if (a > 1) {
            this.textField.set_wordWrap(true);
            this.textField.set_multiline(true);
          } else {
            this.textField.set_wordWrap(false);
            this.textField.set_multiline(false);
          }
          this.lines = a;
          this.calcFrame();
          return this.lines;
        },
        set_passwordMode: function (a) {
          this.textField.set_displayAsPassword(a);
          this.calcFrame();
          return a;
        },
        set_filterMode: function (a) {
          this.filterMode = a;
          this.set_text(this.filter(this.text));
          return this.filterMode;
        },
        set_backgroundColor: function (a) {
          this.backgroundColor = a;
          this.calcFrame();
          return this.backgroundColor;
        },
        __class__: ef,
        __properties__: q(Q.prototype.__properties__, {
          set_passwordMode: "set_passwordMode",
          set_backgroundColor: "set_backgroundColor",
          set_filterMode: "set_filterMode",
          set_lines: "set_lines",
          set_forceCase: "set_forceCase",
          set_caretIndex: "set_caretIndex",
          set_hasFocus: "set_hasFocus",
          set_params: "set_params",
          set_caretColor: "set_caretColor"
        })
      });
      function Cd(a, b, c, d) {
        this.input = b;
        this.gamepad = a;
        this.combos = c;
        this.forbiddens = d;
      }
      h["flixel.addons.ui.FlxMultiGamepad"] = Cd;
      Cd.__name__ = "flixel.addons.ui.FlxMultiGamepad";
      Cd.__super__ = Kg;
      Cd.prototype = q(Kg.prototype, {
        destroy: function () {
          Kg.prototype.destroy.call(this);
          this.gamepad = null;
        },
        checkJustPressed: function () {
          var a = this.gamepad;
          var b = this.input;
          switch (b) {
            case -2:
              return a.anyButton(2);
            case -1:
              return !a.anyButton(2);
            default:
              b = a.mapping.getRawID(b);
              a = a.buttons[b];
              if (a != null) {
                return a.hasState(2);
              } else {
                return false;
              }
          }
        },
        checkPressed: function () {
          var a = this.gamepad;
          var b = this.input;
          switch (b) {
            case -2:
              return a.anyButton(1);
            case -1:
              return !a.anyButton(1);
            default:
              b = a.mapping.getRawID(b);
              a = a.buttons[b];
              if (a != null) {
                return a.hasState(1);
              } else {
                return false;
              }
          }
        },
        checkCombos: function (a) {
          return this.gamepad.checkButtonArrayState(this.combos, 1) == a;
        },
        checkForbiddens: function (a) {
          return this.gamepad.checkButtonArrayState(this.forbiddens, 1) == a;
        },
        __class__: Cd
      });
      function zf(a, b, c, d) {
        this.sInput = b;
        Cd.call(this, a, b.id, c, d);
      }
      h["flixel.addons.ui.FlxMultiGamepadAnalogStick"] = zf;
      zf.__name__ = "flixel.addons.ui.FlxMultiGamepadAnalogStick";
      zf.__super__ = Cd;
      zf.prototype = q(Cd.prototype, {
        destroy: function () {
          Cd.prototype.destroy.call(this);
          this.sInput = null;
        },
        checkJustPressed: function () {
          if (this.gamepad == null) {
            return false;
          }
          var a = this.gamepad.get_deadZone();
          switch (this.sInput.id) {
            case 19:
              if (this.sInput.axis == Ne.X) {
                var b = this.gamepad.analog.justMoved;
                var c = b.gamepad.mapping.getAnalogStick(19);
                if (c == null) {
                  b = false;
                } else {
                  c = b.gamepad.buttons[c.x];
                  b = c != null && c.hasState(b.status);
                }
                if (b) {
                  if (this.sInput.positive) {
                    b = this.gamepad.analog.value.gamepad;
                    return b.getAnalogXAxisValue(b.mapping.getAnalogStick(19)) > a;
                  }
                  b = this.gamepad.analog.value.gamepad;
                  return b.getAnalogXAxisValue(b.mapping.getAnalogStick(19)) < -a;
                }
              } else {
                b = this.gamepad.analog.justMoved;
                c = b.gamepad.mapping.getAnalogStick(19);
                if (c == null) {
                  b = false;
                } else {
                  c = b.gamepad.buttons[c.y];
                  b = c != null && c.hasState(b.status);
                }
                if (b) {
                  if (this.sInput.positive) {
                    b = this.gamepad.analog.value.gamepad;
                    return b.getYAxisRaw(b.mapping.getAnalogStick(19)) > a;
                  }
                  b = this.gamepad.analog.value.gamepad;
                  return b.getYAxisRaw(b.mapping.getAnalogStick(19)) < -a;
                }
              }
              return false;
            case 20:
              if (this.sInput.axis == Ne.X) {
                b = this.gamepad.analog.justMoved;
                c = b.gamepad.mapping.getAnalogStick(20);
                if (c == null) {
                  b = false;
                } else {
                  c = b.gamepad.buttons[c.x];
                  b = c != null && c.hasState(b.status);
                }
                if (b) {
                  if (this.sInput.positive) {
                    b = this.gamepad.analog.value.gamepad;
                    return b.getAnalogXAxisValue(b.mapping.getAnalogStick(20)) > a;
                  }
                  b = this.gamepad.analog.value.gamepad;
                  return b.getAnalogXAxisValue(b.mapping.getAnalogStick(20)) < -a;
                }
              } else {
                b = this.gamepad.analog.justMoved;
                c = b.gamepad.mapping.getAnalogStick(20);
                if (c == null) {
                  b = false;
                } else {
                  c = b.gamepad.buttons[c.y];
                  b = c != null && c.hasState(b.status);
                }
                if (b) {
                  if (this.sInput.positive) {
                    b = this.gamepad.analog.value.gamepad;
                    return b.getYAxisRaw(b.mapping.getAnalogStick(20)) > a;
                  }
                  b = this.gamepad.analog.value.gamepad;
                  return b.getYAxisRaw(b.mapping.getAnalogStick(20)) < -a;
                }
              }
              return false;
            default:
              return false;
          }
        },
        checkPressed: function () {
          if (this.gamepad == null) {
            return false;
          }
          var a = this.gamepad.get_deadZone();
          switch (this.sInput.id) {
            case 19:
              if (this.sInput.axis == Ne.X) {
                if (this.sInput.positive) {
                  var b = this.gamepad.analog.value.gamepad;
                  return b.getAnalogXAxisValue(b.mapping.getAnalogStick(19)) > a;
                }
                b = this.gamepad.analog.value.gamepad;
                return b.getAnalogXAxisValue(b.mapping.getAnalogStick(19)) < -a;
              }
              if (this.sInput.positive) {
                b = this.gamepad.analog.value.gamepad;
                return b.getYAxisRaw(b.mapping.getAnalogStick(19)) > a;
              }
              b = this.gamepad.analog.value.gamepad;
              return b.getYAxisRaw(b.mapping.getAnalogStick(19)) < -a;
            case 20:
              if (this.sInput.axis == Ne.X) {
                if (this.sInput.positive) {
                  b = this.gamepad.analog.value.gamepad;
                  return b.getAnalogXAxisValue(b.mapping.getAnalogStick(20)) > a;
                }
                b = this.gamepad.analog.value.gamepad;
                return b.getAnalogXAxisValue(b.mapping.getAnalogStick(20)) < -a;
              }
              if (this.sInput.positive) {
                b = this.gamepad.analog.value.gamepad;
                return b.getYAxisRaw(b.mapping.getAnalogStick(20)) > a;
              }
              b = this.gamepad.analog.value.gamepad;
              return b.getYAxisRaw(b.mapping.getAnalogStick(20)) < -a;
            default:
              return false;
          }
        },
        checkCombos: function (a) {
          if (this.gamepad == null) {
            return false;
          } else {
            return this.gamepad.checkButtonArrayState(this.combos, 1) == a;
          }
        },
        checkForbiddens: function (a) {
          if (this.gamepad == null) {
            return false;
          } else {
            return this.gamepad.checkButtonArrayState(this.forbiddens, 1) == a;
          }
        },
        __class__: zf
      });
      var Ne = x["flixel.addons.ui.XY"] = {
        __ename__: "flixel.addons.ui.XY",
        __constructs__: null,
        X: {
          _hx_name: "X",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.XY",
          toString: p
        },
        Y: {
          _hx_name: "Y",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.XY",
          toString: p
        }
      };
      Ne.__constructs__ = [Ne.X, Ne.Y];
      function dd(a, b, c) {
        this.input = a;
        this.combos = b;
        this.forbiddens = c;
      }
      h["flixel.addons.ui.FlxMultiKey"] = dd;
      dd.__name__ = "flixel.addons.ui.FlxMultiKey";
      dd.__super__ = Kg;
      dd.prototype = q(Kg.prototype, {
        checkJustPressed: function () {
          return g.keys.checkStatus(this.input, 2);
        },
        checkPressed: function () {
          return g.keys.checkStatus(this.input, 1);
        },
        checkCombos: function (a) {
          return g.keys.checkKeyArrayState(this.combos, 1) == a;
        },
        checkForbiddens: function (a) {
          return g.keys.checkKeyArrayState(this.forbiddens, 1) == a;
        },
        __class__: dd
      });
      function Zh(a, b, c, d, e, f, k, r, n, J, za) {
        if (za == null) {
          za = -8224126;
        }
        if (J == null) {
          J = -16777216;
        }
        if (n == null) {
          n = 3;
        }
        if (r == null) {
          r = 15;
        }
        if (k == null) {
          k = 100;
        }
        if (f == null) {
          f = 10;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        this._justClicked = this._justHovered = false;
        this.setVariable = true;
        this.callback = null;
        this.hoverAlpha = 0.5;
        this.decimals = 0;
        db.call(this);
        this.set_x(c);
        this.set_y(d);
        if (e == f) {
          g.log.advanced("FlxSlider: MinValue and MaxValue can't be the same (" + e + ")", Ba.ERROR, true);
        }
        this.decimals = $b.getDecimals(e);
        if ($b.getDecimals(f) > this.decimals) {
          this.decimals = $b.getDecimals(f);
        }
        this.decimals++;
        this.minValue = e;
        this.maxValue = f;
        this._object = a;
        this.set_varString(b);
        this._width = k;
        this._height = r;
        this._thickness = n;
        this._color = J;
        this._handleColor = za;
        this.createSlider();
      }
      h["flixel.addons.ui.FlxSlider"] = Zh;
      Zh.__name__ = "flixel.addons.ui.FlxSlider";
      Zh.__super__ = db;
      Zh.prototype = q(db.prototype, {
        createSlider: function () {
          var a = this.offset;
          var b = 7;
          var c = 18;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          c = this.x + this.offset.x;
          var d = this.y + this.offset.y;
          var e = this._width;
          b = this._height;
          if (b == null) {
            b = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a = Ha._pool.get();
          if (b == null) {
            b = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.x = c;
          a.y = d;
          a.width = e;
          a.height = b;
          a._inPool = false;
          this._bounds = a;
          this.body = new G(this.offset.x, this.offset.y);
          a = this._color;
          a = "slider:W=" + this._width + "H=" + this._height + "C=" + ("0x" + w.hex(a >> 24 & 255, 2) + w.hex(a >> 16 & 255, 2) + w.hex(a >> 8 & 255, 2) + w.hex(a & 255, 2)) + "T=" + this._thickness;
          this.body.makeGraphic(this._width, this._height, 0, false, a);
          a = this.body.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          Gc.drawLine(this.body, 0, this._height / 2, this._width, this._height / 2, {
            color: this._color,
            thickness: this._thickness
          });
          this.handle = new G(this.offset.x, this.offset.y);
          this.handle.makeGraphic(this._thickness, this._height, this._handleColor);
          a = this.handle.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.nameLabel = new Q(this.offset.x, 0, this._width, this.varString);
          this.nameLabel.set_alignment("center");
          this.nameLabel.set_color(this._color);
          a = this.nameLabel.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          b = this._height + this.offset.y + 3;
          this.valueLabel = new Q(this.offset.x, b, this._width);
          this.valueLabel.set_alignment("center");
          this.valueLabel.set_color(this._handleColor);
          a = this.valueLabel.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.minLabel = new Q(-50 + this.offset.x, b, 100, H.string(this.minValue));
          this.minLabel.set_alignment("center");
          this.minLabel.set_color(this._color);
          a = this.minLabel.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.maxLabel = new Q(this._width - 50 + this.offset.x, b, 100, H.string(this.maxValue));
          this.maxLabel.set_alignment("center");
          this.maxLabel.set_color(this._color);
          a = this.maxLabel.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.body);
          this.add(this.handle);
          this.add(this.nameLabel);
          this.add(this.valueLabel);
          this.add(this.minLabel);
          this.add(this.maxLabel);
        },
        update: function (a) {
          if (this.mouseInRect(this._bounds)) {
            if (this.hoverAlpha != 1) {
              this.set_alpha(this.hoverAlpha);
            }
            if (this.hoverSound != null && !this._justHovered) {
              g.sound.play(this.hoverSound);
            }
            this._justHovered = true;
            var b = g.mouse._leftButton;
            if (b.current == 1 || b.current == 2) {
              this.handle.set_x(g.mouse.getPositionInCameraView(this.get_camera()).x);
              this.updateValue();
              if (this.clickSound != null && !this._justClicked) {
                g.sound.play(this.clickSound);
                this._justClicked = true;
              }
            }
            b = g.mouse._leftButton;
            if (b.current != 1 && b.current != 2) {
              this._justClicked = false;
            }
          } else {
            if (this.hoverAlpha != 1) {
              this.set_alpha(1);
            }
            this._justHovered = false;
          }
          b = g.mouse._leftButton;
          if ((b.current == 1 || b.current == 2) && !!this.mouseInRect(this._bounds)) {
            this.updateValue();
          }
          if (this.varString != null && ma.getProperty(this._object, this.varString) != null) {
            this.value = ma.getProperty(this._object, this.varString);
          }
          if (this.handle.x != this.get_expectedPos()) {
            this.handle.set_x(this.get_expectedPos());
          }
          this.valueLabel.set_text(H.string($b.roundDecimal(this.value, this.decimals)));
          db.prototype.update.call(this, a);
        },
        mouseInRect: function (a) {
          if ($b.pointInFlxRect(g.mouse.getPositionInCameraView(this.get_camera()).x, g.mouse.getPositionInCameraView(this.get_camera()).y, a)) {
            return true;
          } else {
            return false;
          }
        },
        updateValue: function () {
          if (this._lastPos != this.get_relativePos()) {
            if (this.setVariable && this.varString != null) {
              ma.setProperty(this._object, this.varString, this.get_relativePos() * (this.maxValue - this.minValue) + this.minValue);
            }
            this._lastPos = this.get_relativePos();
            if (this.callback != null) {
              this.callback(this.get_relativePos());
            }
          }
        },
        destroy: function () {
          this.body = da.destroy(this.body);
          this.handle = da.destroy(this.handle);
          this.minLabel = da.destroy(this.minLabel);
          this.maxLabel = da.destroy(this.maxLabel);
          this.nameLabel = da.destroy(this.nameLabel);
          this.valueLabel = da.destroy(this.valueLabel);
          this._bounds = da.put(this._bounds);
          db.prototype.destroy.call(this);
        },
        get_expectedPos: function () {
          var a = this.x + this.offset.x + (this._width - this.handle.get_width()) * ((this.value - this.minValue) / (this.maxValue - this.minValue));
          if (a > this.x + this._width + this.offset.x) {
            a = this.x + this._width + this.offset.x;
          } else if (a < this.x + this.offset.x) {
            a = this.x + this.offset.x;
          }
          return a;
        },
        get_relativePos: function () {
          var a = (this.handle.x - this.x - this.offset.x) / (this._width - this.handle.get_width());
          if (a > 1) {
            a = 1;
          }
          return a;
        },
        set_varString: function (a) {
          try {
            ma.getProperty(this._object, a);
            this.varString = a;
          } catch (b) {
            Na.lastError = b;
            g.log.advanced("Could not create FlxSlider - '" + a + "' is not a valid field of '" + H.string(this._object) + "'", Ba.ERROR, true);
            this.varString = null;
          }
          return a;
        },
        set_x: function (a) {
          db.prototype.set_x.call(this, a);
          if (this._bounds != null) {
            var b = this._bounds;
            var c = this.x + this.offset.x;
            var d = this.y + this.offset.y;
            var e = this._width;
            var f = this._height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
          }
          return this.x = a;
        },
        set_y: function (a) {
          db.prototype.set_y.call(this, a);
          if (this._bounds != null) {
            var b = this._bounds;
            var c = this.x + this.offset.x;
            var d = this.y + this.offset.y;
            var e = this._width;
            var f = this._height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
          }
          return this.y = a;
        },
        __class__: Zh,
        __properties__: q(db.prototype.__properties__, {
          set_varString: "set_varString",
          get_relativePos: "get_relativePos",
          get_expectedPos: "get_expectedPos"
        })
      });
      function ud() {}
      h["flixel.addons.ui.interfaces.IFlxUIWidget"] = ud;
      ud.__name__ = "flixel.addons.ui.interfaces.IFlxUIWidget";
      ud.__isInterface__ = true;
      ud.__interfaces__ = [aj];
      ud.prototype = {
        __class__: ud,
        __properties__: {
          set_height: "set_height",
          get_height: "get_height",
          set_width: "set_width",
          get_width: "get_width"
        }
      };
      function eb(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.broadcastToFlxUI = this.autoBounds = true;
        db.call(this, a, b, undefined);
      }
      h["flixel.addons.ui.FlxTypedUIGroup"] = eb;
      eb.__name__ = "flixel.addons.ui.FlxTypedUIGroup";
      eb.__interfaces__ = [ud];
      eb.__super__ = Yf;
      eb.prototype = q(Yf.prototype, {
        add: function (a) {
          Yf.prototype.add.call(this, a);
          if (this.autoBounds) {
            this.calcBounds();
          }
          return a;
        },
        remove: function (a, b) {
          if (b == null) {
            b = false;
          }
          a = Yf.prototype.remove.call(this, a, b);
          if (this.autoBounds) {
            this.calcBounds();
          }
          return a;
        },
        setScrollFactor: function (a, b) {
          for (var c = 0, d = this.group.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              e = e.scrollFactor;
              var f = a;
              var k = b;
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              e.set_x(f);
              e.set_y(k);
            }
          }
        },
        contains: function (a) {
          return this.group.members.indexOf(a) != -1;
        },
        calcBounds: function (a) {
          if (this.group.members == null || this.group.members.length == 0) {
            this.set_width(this.set_height(0));
            if (a != null) {
              a.x = 0;
              a.y = 0;
              a.width = 0;
              a.height = 0;
            }
          } else {
            var b = Infinity;
            var c = -Infinity;
            var d = Infinity;
            var e = -Infinity;
            for (var f = 0, k = this.group.members; f < k.length;) {
              var r = k[f];
              ++f;
              if (r != null) {
                if (r.x < b) {
                  b = r.x;
                }
                if (r.x + r.get_width() > c) {
                  c = r.x + r.get_width();
                }
                if (r.y < d) {
                  d = r.y;
                }
                if (r.y + r.get_height() > e) {
                  e = r.y + r.get_height();
                }
              }
            }
            this.set_width(c - b);
            this.set_height(e - d);
            if (a != null) {
              a.x = b;
              a.y = d;
              a.width = this.get_width();
              a.height = this.get_height();
            }
          }
        },
        __class__: eb
      });
      function Ma(a, b, c, d, e, f) {
        this._scaledAssets = [];
        this._assetsToCleanUp = [];
        this._safe_input_delay_elapsed = 0;
        this._curr_mode = "";
        this._pointX = this._pointY = 1;
        this._postLoaded = false;
        this.getTextFallback = this.cursorLists = null;
        this.failed_by = 0;
        this.failed = false;
        this.safe_input_delay_time = 0.01;
        this.do_safe_input_delay = true;
        eb.call(this);
        this._ptr_tongue = d;
        this._ptr = b;
        if (c != null) {
          this.setSuperIndex(c);
        }
        if (f != null) {
          this._variable_index = new V();
          b = Object.keys(f.h);
          c = b.length;
          d = 0;
          while (d < c) {
            e = b[d++];
            this._variable_index.h[e] = f.h[e];
          }
        }
        if (a != null) {
          this.load(a);
        }
      }
      h["flixel.addons.ui.FlxUI"] = Ma;
      Ma.__name__ = "flixel.addons.ui.FlxUI";
      Ma.__interfaces__ = [kh];
      Ma.event = function (a, b, c, d) {
        var e = Ma.getLeafUIState();
        if (e != null) {
          e.getEvent(a, b, c, d);
        }
      };
      Ma.fontSize = function (a, b) {
        var c = Ma.getLeafUIState()._tongue;
        c = c ?? null;
        if (c != null) {
          b = c.getFontSize(a, b);
        }
        return b;
      };
      Ma.font = function (a, b, c) {
        if (c == null) {
          c = ".ttf";
        }
        if (b == null) {
          b = "";
        }
        var d = Ma.getLeafUIState()._tongue;
        d = d ?? null;
        if (d != null) {
          a = d.getFont(a);
        }
        return F.font(a, b, c);
      };
      Ma.forceFocus = function (a, b) {
        var c = Ma.getLeafUIState();
        if (c != null) {
          c.forceFocus(a, b);
        }
      };
      Ma.getLeafUIState = function () {
        var a = g.game._state;
        if (a != null) {
          while (a.subState != null) {
            a = a.subState;
          }
        }
        if (ta.__implements(a, Hg)) {
          return a;
        } else {
          return null;
        }
      };
      Ma.consolidateData = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        if (a == null && b != null) {
          return b;
        }
        if (b == null) {
          return a;
        }
        b = X.parse(Eg.print(b)).firstElement();
        for (var d = a.attributes(); d.hasNext();) {
          var e = d.next();
          var f = Mb.resolve(a, e);
          b.set(e, f);
        }
        if (a.nodeType == X.Document) {
          f = "Document";
        } else {
          if (a.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
          }
          f = a.nodeName;
        }
        if (b.nodeType != X.Element) {
          throw K.thrown("Bad node type, expected Element but found " + (b.nodeType == null ? "null" : hb.toString(b.nodeType)));
        }
        b.nodeName = f;
        if (ec.resolve(a, "name") || ec.resolve(a, "id")) {
          b.set("name", F.xml_name(a));
        } else {
          b.set("name", "");
        }
        for (f = a.elements(); f.hasNext();) {
          var k = f.next();
          if (k.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element but found " + (k.nodeType == null ? "null" : hb.toString(k.nodeType)));
          }
          d = k.nodeName;
          var r = !c;
          if (c) {
            e = b.elementsNamed(d);
            var n = e.next();
            if (fc.resolve(a, d).length == 1 && n != null && e.hasNext() == 0) {
              for (d = k.attributes(); d.hasNext();) {
                e = d.next();
                n.set(e, k.get(e));
              }
            } else {
              r = true;
            }
          }
          if (r) {
            b.insertChild(X.parse(Eg.print(k)).firstElement(), 0);
          }
        }
        if (b.nodeType != X.Document && b.nodeType != X.Element) {
          throw K.thrown("Invalid nodeType " + (b.nodeType == null ? "null" : hb.toString(b.nodeType)));
        }
        return b;
      };
      Ma.sortParams = function (a, b) {
        if (a.sort < b.sort) {
          return -1;
        } else if (a.sort > b.sort) {
          return 1;
        } else {
          return 0;
        }
      };
      Ma.__super__ = eb;
      Ma.prototype = q(eb.prototype, {
        set_focus: function (a) {
          if (this.focus != null) {
            this.onFocusLost(this.focus);
          }
          this.focus = a;
          if (this.focus != null) {
            this.onFocus(this.focus);
          }
          return a;
        },
        getEvent: function (a, b, c, d) {
          if (this._ptr != null && (this._ptr.getEvent(a, b, c, d), a == "post_load")) {
            a = Object.keys(this._asset_index.h);
            d = a.length;
            for (var e = 0; e < d;) {
              var f = a[e++];
              f = this._asset_index.h[f];
              if (f instanceof Ma) {
                f.getEvent("post_load", b, c);
              }
            }
          }
        },
        getRequest: function (a, b, c, d) {
          if (this._ptr != null) {
            return this._ptr.getRequest(a, b, c, d);
          } else {
            return null;
          }
        },
        onFocus: function (a) {
          if (a instanceof vc) {
            for (var b = 0, c = this.group.members; b < c.length;) {
              var d = c[b];
              ++b;
              this.setWidgetSuppression(d, a);
            }
          }
        },
        setWidgetSuppression: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          if (ta.__implements(a, Af)) {
            var d = false;
            if (a instanceof vc && a == b) {
              d = true;
            }
            if (!d) {
              a.set_skipButtonUpdate(c);
            }
          } else if (a instanceof eb) {
            d = 0;
            a = a.group.members;
            while (d < a.length) {
              var e = a[d];
              ++d;
              this.setWidgetSuppression(e, b, c);
            }
          }
        },
        onFocusLost: function (a) {
          if (a instanceof vc) {
            a = 0;
            for (var b = this.group.members; a < b.length;) {
              var c = b[a];
              ++a;
              this.setWidgetSuppression(c, null, false);
            }
          }
        },
        setSuperIndex: function (a) {
          this._superIndexUI = a;
        },
        update: function (a) {
          if (this.do_safe_input_delay) {
            this._safe_input_delay_elapsed += g.elapsed;
            if (this._safe_input_delay_elapsed > this.safe_input_delay_time) {
              this.do_safe_input_delay = false;
            } else {
              return;
            }
          }
          eb.prototype.update.call(this, a);
        },
        addAsset: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = "";
          }
          if (Object.prototype.hasOwnProperty.call(this._asset_index.h, b)) {
            if (b == "screen") {
              g.log.advanced("Failed to add a widget with the name 'screen', that is reserved by the system for the screen itself", Ba.NOTICE);
            } else {
              g.log.advanced("Duplicate screen name '" + b + "'", Ba.NOTICE);
            }
            return false;
          }
          c = this.getGroup(c, d);
          if (c != null) {
            c.add(a);
          } else {
            this.add(a);
          }
          this._asset_index.h[b] = a;
          return true;
        },
        destroy: function () {
          if (this._group_index != null) {
            var a = this._group_index.h;
            a = Object.keys(a);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              var e = this._group_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._group_index = null;
          }
          if (this._asset_index != null) {
            a = this._asset_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              e = this._asset_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._asset_index = null;
          }
          if (this._tag_index != null) {
            a = this._tag_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              ze.clearArray(this._tag_index.h[d]);
              e = this._tag_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._tag_index = null;
          }
          if (this._definition_index != null) {
            a = this._definition_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              e = this._definition_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._definition_index = null;
          }
          if (this._variable_index != null) {
            a = this._variable_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              e = this._variable_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._variable_index = null;
          }
          if (this._mode_index != null) {
            a = this._mode_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              e = this._mode_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._mode_index = null;
          }
          this._ptr_tongue = this._superIndexUI = this._ptr = null;
          if (this.cursorLists != null) {
            a = 0;
            for (b = this.cursorLists; a < b.length;) {
              c = b[a];
              ++a;
              ze.clearArray(c);
            }
            ze.clearArray(this.cursorLists);
          }
          this.cursorLists = null;
          ze.clearArray(this._failure_checks);
          this._failure_checks = null;
          ze.clearArray(this._assetsToCleanUp);
          this._assetsToCleanUp = null;
          ze.clearArray(this._scaledAssets);
          this._scaledAssets = null;
          eb.prototype.destroy.call(this);
        },
        load: function (a) {
          this._group_index = new V();
          this._asset_index = new V();
          this._tag_index = new V();
          this._definition_index = new V();
          if (this._variable_index == null) {
            this._variable_index = new V();
          }
          this._mode_index = new V();
          if (a != null) {
            if (this._superIndexUI == null) {
              var b = new sh(0, 0, g.width, g.height);
              b.name = "screen";
              this.addAsset(b, "screen");
              if (cb.resolve(a, "screen_override") && this._loadTest(Fb.resolve(a, "screen_override"))) {
                var c = Fb.resolve(a, "screen_override");
                this._loadPosition(c, b);
                b.set_width(this._loadWidth(c, g.width));
                b.set_height(this._loadHeight(c, g.height));
              }
            }
            this._data = a;
            if (cb.resolve(a, "inject")) {
              while (cb.resolve(a, "inject")) {
                var d = Fb.resolve(a, "inject");
                b = F.xml_name(d);
                var e = F.xml(b, "xml", false);
                if (e != null) {
                  var f = d.parent;
                  var k = 0;
                  b = 0;
                  for (c = f.children; b < c.length;) {
                    var r = c[b];
                    ++b;
                    if (r == d) {
                      break;
                    }
                    ++k;
                  }
                  if (f.removeChild(d)) {
                    b = 0;
                    c = e.elements();
                    while (c.hasNext()) {
                      d = c.next();
                      f.insertChild(d, k + b);
                      ++b;
                    }
                  }
                }
              }
            }
            if (cb.resolve(a, "include")) {
              b = 0;
              c = fc.resolve(a, "include");
              while (b < c.length) {
                f = c[b];
                ++b;
                f = F.xml_name(f);
                f = F.xml(f);
                if (f != null) {
                  e = 0;
                  for (r = fc.resolve(f, "definition"); e < r.length;) {
                    k = r[e];
                    ++e;
                    d = "include:" + F.xml_name(k);
                    this.unparentXML(k);
                    this._definition_index.h[d] = k;
                  }
                  if (cb.resolve(f, "point_size")) {
                    this._loadPointSize(f);
                  }
                  if (cb.resolve(f, "default")) {
                    k = 0;
                    f = fc.resolve(f, "default");
                    while (k < f.length) {
                      d = f[k];
                      ++k;
                      if (this._loadTest(d)) {
                        e = F.xml_name(d);
                        this.unparentXML(d);
                        this._definition_index.h["default:" + e] = d;
                      }
                    }
                  }
                }
              }
            }
            if (cb.resolve(a, "point_size")) {
              this._loadPointSize(a);
            }
            if (cb.resolve(a, "definition")) {
              b = 0;
              c = fc.resolve(a, "definition");
              while (b < c.length) {
                k = c[b];
                ++b;
                if (this._loadTest(k)) {
                  d = F.xml_name(k);
                  f = "";
                  if (d.indexOf("default:") != -1) {
                    f = "'default:'";
                  }
                  if (d.indexOf("include:") != -1) {
                    f = "'include:'";
                  }
                  if (f != "") {
                    g.log.advanced("Can't create FlxUI definition '" + d + "', because '" + f + "' is a reserved name prefix!", Ba.WARNING, true);
                  } else {
                    this.unparentXML(k);
                    this._definition_index.h[d] = k;
                  }
                }
              }
            }
            if (cb.resolve(a, "default")) {
              b = 0;
              c = fc.resolve(a, "default");
              while (b < c.length) {
                d = c[b];
                ++b;
                if (this._loadTest(d)) {
                  e = F.xml_name(d);
                  this.unparentXML(d);
                  this._definition_index.h["default:" + e] = d;
                }
              }
            }
            if (cb.resolve(a, "variable")) {
              b = 0;
              c = fc.resolve(a, "variable");
              while (b < c.length) {
                k = c[b];
                ++b;
                if (this._loadTest(k)) {
                  f = F.xml_name(k);
                  k = F.xml_str(k, "value");
                  if (f != "") {
                    this._variable_index.h[f] = k;
                  }
                }
              }
            }
            if (cb.resolve(a, "mode")) {
              b = 0;
              c = fc.resolve(a, "mode");
              while (b < c.length) {
                k = c[b];
                ++b;
                if (this._loadTest(k)) {
                  f = this.applyNodeConditionals(k);
                  k = F.xml_name(k);
                  this.unparentXML(f);
                  this._mode_index.h[k] = f;
                }
              }
            }
            if (cb.resolve(a, "group")) {
              b = 0;
              c = fc.resolve(a, "group");
              while (b < c.length) {
                k = c[b];
                ++b;
                if (this._loadTest(k)) {
                  f = F.xml_name(k);
                  d = F.xml_str(k, "custom");
                  k = null;
                  if (d != "") {
                    d = this._ptr.getRequest("ui_get_group:", this, d);
                    if (d != null && d instanceof eb) {
                      k = d;
                    }
                  }
                  if (k == null) {
                    k = new eb();
                  }
                  k.name = f;
                  this._group_index.h[f] = k;
                  this.add(k);
                }
              }
            }
            if (a.firstElement() != null) {
              for (b = a.elements(); b.hasNext();) {
                c = b.next();
                this._loadSub(c);
              }
            }
            this._postLoad(a);
          } else {
            this._onFinishLoad();
          }
        },
        unparentXML: function (a) {
          return F.unparentXML(a);
        },
        _loadPointSize: function (a) {
          var b = Fb.resolve(a, "point_size");
          var c = -1;
          if (c == null) {
            c = 0;
          }
          var d = this._loadWidth(b, c, "x");
          b = Fb.resolve(a, "point_size");
          c = -1;
          if (c == null) {
            c = 0;
          }
          b = this._loadHeight(b, c, "y");
          if (b < 1 && d < 1) {
            d = b = this._loadHeight(Fb.resolve(a, "point_size"), -1, "value");
          }
          if (b > 0) {
            this._pointX = d;
          }
          if (d > 0) {
            this._pointY = b;
          }
        },
        _loadSub: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
          }
          var c = a.nodeName;
          if (a.nodeType != X.Document && a.nodeType != X.Element) {
            throw K.thrown("Invalid nodeType " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
          }
          if (c == "load_if") {
            if (this._loadTest(a) && a.firstElement() != null) {
              for (a = a.elements(); a.hasNext();) {
                var d = a.next();
                this._loadSub(d, b + 1);
              }
            }
          } else {
            d = null;
            b = F.xml_name(a);
            if (ec.resolve(a, "group")) {
              d = Mb.resolve(a, "group");
              d = this.getGroup(d);
            }
            c = this._loadThing(c, a);
            if (c != null) {
              this._loadGlobals(a, c);
              if (b != null && b != "") {
                this._asset_index.h[b] = c;
                c.name = b;
                var e = F.xml_str(a, "tags");
                if (e != "") {
                  e = e.split(",");
                  this._addTags(e, b);
                }
              }
              this._loadTooltip(c, a);
              if (d != null) {
                d.add(c);
              } else {
                this.add(c);
              }
              this._loadPosition(a, c);
            }
          }
        },
        _addTags: function (a, b) {
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            if (!Object.prototype.hasOwnProperty.call(this._tag_index.h, d)) {
              this._tag_index.h[d] = [];
            }
            d = this._tag_index.h[d];
            if (d.indexOf(b) == -1) {
              d.push(b);
            }
          }
        },
        _loadGlobals: function (a, b) {
          if (b instanceof Ea) {
            var c = F.xml_bool(a, "visible", true);
            var d = F.xml_bool(a, "active", true);
            var e = F.xml_i(a, "num_id");
            b.visible = c;
            b.active = d;
            b.ID = e;
            if (b instanceof G) {
              a = F.xml_f(a, "alpha", 1);
              b.set_alpha(a);
            }
          }
        },
        _postLoad: function (a) {
          this._postLoaded = true;
          if (a.firstElement() != null) {
            for (var b = a.elements(); b.hasNext();) {
              var c = b.next();
              if (c.nodeType != X.Element) {
                throw K.thrown("Bad node type, expected Element but found " + (c.nodeType == null ? "null" : hb.toString(c.nodeType)));
              }
              var d = c.nodeName.toLowerCase();
              if (c.nodeType != X.Document && c.nodeType != X.Element) {
                throw K.thrown("Invalid nodeType " + (c.nodeType == null ? "null" : hb.toString(c.nodeType)));
              }
              this._postLoadThing(d, c);
            }
          }
          if (cb.resolve(a, "mode")) {
            b = 0;
            c = fc.resolve(a, "mode");
            while (b < c.length) {
              a = c[b];
              ++b;
              if (F.xml_bool(a, "is_default")) {
                a = F.xml_name(a);
                this.setMode(a);
                break;
              }
            }
          }
          if (this._failure_checks != null) {
            b = 0;
            for (c = this._failure_checks; b < c.length;) {
              a = c[b];
              ++b;
              if (this._checkFailure(a)) {
                this.failed = true;
                break;
              }
            }
            F.clearArraySoft(this._failure_checks);
            this._failure_checks = null;
          }
          this._onFinishLoad();
        },
        _sendTo: function (a, b) {
          var c = this.getAssetGroup(null, a);
          if (c == null) {
            if (this.group.members.indexOf(a) != -1) {
              c = this;
            } else {
              return;
            }
          }
          if (b == -1 || b == 1) {
            M.remove(c.group.members, a);
            switch (b) {
              case -1:
                c.group.members.splice(0, 0, a);
                break;
              case 1:
                c.group.members.push(a);
            }
          }
        },
        setMode: function (a, b) {
          if (b == null) {
            b = "";
          }
          if (this._curr_mode != a) {
            var c = this.getMode(a);
            this._curr_mode = a;
            if (b == "") {
              if (c != null) {
                for (a = c.elements(); a.hasNext();) {
                  b = a.next();
                  c = b = this.applyNodeConditionals(b);
                  if (c.nodeType != X.Element) {
                    throw K.thrown("Bad node type, expected Element but found " + (c.nodeType == null ? "null" : hb.toString(c.nodeType)));
                  }
                  var d = c.nodeName;
                  var e = F.xml_str(c, "active") == "" ? null : true;
                  if (e != null) {
                    e = F.xml_bool(c, "active");
                  }
                  if (this._loadTest(b)) {
                    switch (d) {
                      case "align":
                        this._alignThing(b);
                        break;
                      case "change":
                        this._changeThing(b);
                        break;
                      case "hide":
                        this.showThing(F.xml_name(c), false, e);
                        break;
                      case "position":
                        c = F.xml_name(c);
                        c = this.getAsset(c);
                        if (c != null) {
                          this._loadPosition(b, c);
                        }
                        break;
                      case "show":
                        this.showThing(F.xml_name(c), true, e);
                    }
                  }
                }
              }
            } else {
              b = this.getAsset(b);
              if (b != null && b instanceof Ma) {
                ta.__cast(b, Ma).setMode(a, "");
              }
            }
          }
        },
        showThing: function (a, b, c) {
          if (b == null) {
            b = true;
          }
          if (a.indexOf(",") != -1) {
            a = a.split(",");
            for (var d = 0; d < a.length;) {
              var e = a[d];
              ++d;
              var f = this.getAsset(e);
              if (f != null) {
                f.set_visible(b);
                if (c != null) {
                  f.set_active(c);
                }
              } else {
                f = this.getGroup(e);
                if (f != null) {
                  f.set_visible(b);
                  if (c != null) {
                    f.set_active(c);
                  }
                }
              }
            }
          } else if (a != "*") {
            f = this.getAsset(a);
            if (f != null) {
              f.set_visible(b);
              if (c != null) {
                f.set_active(c);
              }
            } else {
              f = this.getGroup(a);
              if (f != null) {
                f.set_visible(b);
                if (c != null) {
                  f.set_active(c);
                }
              }
            }
          } else {
            a = Object.keys(this._asset_index.h);
            d = a.length;
            f = 0;
            while (f < d) {
              e = a[f++];
              if (e != "*") {
                this.showThing(e, b, c);
              }
            }
          }
        },
        getGroup: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._group_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            return this._superIndexUI.getGroup(a, b);
          } else {
            return c;
          }
        },
        hasAsset: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (Object.prototype.hasOwnProperty.call(this._asset_index.h, a)) {
            return true;
          } else if (b && this._superIndexUI != null) {
            return this._superIndexUI.hasAsset(a, b);
          } else {
            return false;
          }
        },
        getAsset: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._asset_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            return this._superIndexUI.getAsset(a, b);
          } else {
            return c;
          }
        },
        getAssetGroup: function (a, b) {
          if (b == null && (a == null || a == "")) {
            return null;
          }
          if (b == null) {
            b = this.getAsset(a);
          }
          if (b == null) {
            return null;
          }
          var c = Object.keys(this._group_index.h);
          for (var d = c.length, e = 0; e < d;) {
            a = c[e++];
            a = this._group_index.h[a];
            if (a.group.members.indexOf(b) != -1) {
              return a;
            }
          }
          return null;
        },
        getMode: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._mode_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            return this._superIndexUI.getMode(a, b);
          } else {
            return c;
          }
        },
        checkVariable: function (a, b, c, d, e) {
          if (e == null) {
            e = true;
          }
          if (d == null) {
            d = "==";
          }
          a = this.getVariable(a, e);
          if (a != null) {
            return F.compareStringVars(a, b, c, d);
          } else {
            return F.compareStringVars("", b, c, d);
          }
        },
        setVariable: function (a, b) {
          this._variable_index.h[a] = b;
        },
        getVariable: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._variable_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            c = this._superIndexUI.getVariable(a, b);
          }
          return c;
        },
        getDefinition: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._definition_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            c = this._superIndexUI.getDefinition(a, b);
          }
          if (c == null && a.indexOf("include:") == -1) {
            c = this.getDefinition("include:" + a, b);
          }
          return c;
        },
        screenWidth: function () {
          if (this.hasAsset("screen")) {
            return this.getAsset("screen").get_width() | 0;
          } else {
            return g.width;
          }
        },
        screenHeight: function () {
          if (this.hasAsset("height")) {
            return this.getAsset("screen").get_height() | 0;
          } else {
            return g.height;
          }
        },
        applyNodeConditionals: function (a) {
          if (cb.resolve(a, "locale") || cb.resolve(a, "haxedef")) {
            a = X.parse(Eg.print(a)).firstElement();
            if (a.nodeType != X.Document && a.nodeType != X.Element) {
              throw K.thrown("Invalid nodeType " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
            }
            if (cb.resolve(a, "locale")) {
              a = this.applyNodeChanges(a, "locale");
            }
            if (cb.resolve(a, "haxedef")) {
              a = this.applyNodeChanges(a, "haxedef");
            }
            if (cb.resolve(a, "window")) {
              a = this.applyNodeChanges(a, "window");
            }
          }
          return a;
        },
        applyNodeChanges: function (a, b) {
          var c = "";
          if (b == "locale") {
            if (this._ptr_tongue == null) {
              return a;
            }
            c = this._ptr_tongue.locale.toLowerCase();
          }
          var d = false;
          if (b == "haxedef") {
            d = true;
          }
          if (b == "window") {
            c = g.width + "," + g.height;
          }
          var e = 0;
          for (b = fc.resolve(a, b); e < b.length;) {
            var f = b[e];
            ++e;
            var k = F.xml_name(f);
            if (d) {
              c = "";
              if (F.checkHaxedef(k)) {
                c = k;
              }
            }
            if (k == c && cb.resolve(f, "change")) {
              k = 0;
              f = fc.resolve(f, "change");
              while (k < f.length) {
                var r = f[k];
                ++k;
                for (var n = r.attributes(); n.hasNext();) {
                  var J = n.next();
                  var za = r.get(J);
                  a.set(J, za);
                }
              }
            }
          }
          return a;
        },
        _loadThingGetInfo: function (a) {
          if (a.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
          }
          var b = this.getDefinition("default:" + a.nodeName);
          var c = null;
          if (b != null) {
            c = Ma.consolidateData(a, b, true);
          }
          if (c == null) {
            c = a;
          }
          a = F.xml_str(c, "use_def", true);
          b = null;
          if (a != "") {
            b = this.getDefinition(a);
          }
          c = Ma.consolidateData(c, b);
          c = this.applyNodeConditionals(c);
          if (this._loadTest(c) == 0) {
            return null;
          } else {
            return c;
          }
        },
        _loadTooltip: function (a, b) {
          if (cb.resolve(b, "tooltip")) {
            b = this._loadTooltipData(Fb.resolve(b, "tooltip"));
            var c = Ma.getLeafUIState();
            if (a instanceof zb) {
              c.tooltips.add(a.button, b);
            } else {
              c.tooltips.add(a, b);
            }
          }
        },
        _loadTooltipData: function (a) {
          var b = {
            title: "",
            body: "",
            anchor: null,
            style: {
              titleFormat: null,
              bodyFormat: null,
              titleBorder: null,
              bodyBorder: null,
              titleOffset: null,
              bodyOffset: null,
              titleWidth: -1,
              bodyWidth: -1,
              background: null,
              borderSize: -1,
              borderColor: null,
              arrow: null,
              autoSizeVertical: null,
              autoSizeHorizontal: null,
              leftPadding: -1,
              rightPadding: -1,
              topPadding: -1,
              bottomPadding: -1
            }
          };
          var c = this.getDefinition("default:tooltip");
          if (c != null) {
            a = Ma.consolidateData(a, c, true);
          }
          if (ec.resolve(a, "use_def")) {
            c = F.xml_str(a, "use_def", true);
            c = this.getDefinition(c);
            if (c != null) {
              a = Ma.consolidateData(a, c, true);
            }
          }
          if (ec.resolve(a, "text")) {
            this._loadTooltipText(a, "text", b);
          }
          if (cb.resolve(a, "title")) {
            this._loadTooltipText(Fb.resolve(a, "title"), "text", b);
          }
          if (cb.resolve(a, "body")) {
            this._loadTooltipText(Fb.resolve(a, "body"), "text", b);
          }
          b.anchor = this._loadAnchor(a);
          this._loadTooltipStyle(a, b);
          return b;
        },
        _loadTooltipStyle: function (a, b) {
          b.style.background = F.xml_color(a, "background");
          b.style.borderSize = F.xml_i(a, "border", -1);
          b.style.borderColor = F.xml_color(a, "border_color");
          if (ec.resolve(a, "arrow")) {
            var c = "";
            if (a.get("arrow") != null) {
              c = a.get("arrow");
              if (c == "" || c == null) {
                c = "";
              } else {
                c = F.gfx(c);
                try {
                  if (!W.exists(c, "IMAGE")) {
                    throw K.thrown("couldn't load bmp \"arrow\"");
                  }
                } catch (e) {
                  Na.lastError = e;
                  var d = K.caught(e).unwrap();
                  if (typeof d == "string") {
                    g.log.advanced("FlxUI: U.xml_gfx() : " + d, Ba.ERROR, true);
                  } else {
                    throw e;
                  }
                }
              }
            }
          } else {
            c = null;
          }
          b.style.arrow = c;
          b.style.autoSizeHorizontal = F.xml_bool(a, "auto_size_horizontal", true);
          b.style.autoSizeVertical = F.xml_bool(a, "auto_size_vertical", true);
          c = this._loadHeight(a, -1, "pad_all") | 0;
          if (c != -1) {
            b.style.leftPadding = b.style.rightPadding = b.style.topPadding = b.style.bottomPadding = c;
          } else {
            c = this._loadWidth(a, 0, "pad_left") | 0;
            b.style.leftPadding = c;
            c = this._loadWidth(a, 0, "pad_right") | 0;
            b.style.rightPadding = c;
            c = this._loadHeight(a, 0, "pad_top") | 0;
            b.style.topPadding = c;
            c = this._loadHeight(a, 0, "pad_bottom") | 0;
            b.style.bottomPadding = c;
          }
        },
        _loadTooltipText: function (a, b, c) {
          if (a.nodeType == X.Document) {
            var d = "Document";
          } else {
            if (a.nodeType != X.Element) {
              throw K.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
            }
            d = a.nodeName;
          }
          b = this._loadString(a, b);
          var e = this._loadWidth(a, 0, "x");
          var f = this._loadHeight(a, 0, "y");
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          e = fa.pool.get().set(e, f);
          e._inPool = false;
          if (ec.resolve(a, "use_def")) {
            f = F.xml_str(a, "use_def", true);
            f = this.getDefinition(f);
            if (f != null) {
              a = Ma.consolidateData(a, f);
            }
          }
          f = this._loadBorder(a);
          var k = this._loadFontDef(a);
          var r = F.xml_color(a, "color", true, -16777216);
          k.format.color = r;
          a = this._loadWidth(a, -1, "width") | 0;
          switch (d) {
            case "body":
              if (b != "") {
                c.body = b;
              }
              c.style.bodyOffset = e;
              c.style.bodyFormat = k;
              c.style.bodyWidth = a;
              c.style.bodyBorder = f;
              break;
            case "title":
            case "tooltip":
              if (b != "") {
                c.title = b;
              }
              c.style.titleOffset = e;
              c.style.titleFormat = k;
              c.style.titleWidth = a;
              c.style.titleBorder = f;
          }
        },
        _loadAnchor: function (a) {
          var b = this._loadWidth(a, 0, "x");
          var c = this._loadHeight(a, 0, "y");
          if (cb.resolve(a, "anchor")) {
            var d = F.xml_str(Fb.resolve(a, "anchor"), "x", true, "right");
            var e = F.xml_str(Fb.resolve(a, "anchor"), "y", true, "top");
            var f = F.xml_str(Fb.resolve(a, "anchor"), "x-flush", true, "left");
            a = F.xml_str(Fb.resolve(a, "anchor"), "y-flush", true, "top");
            return new Jg(b, c, d, e, f, a);
          }
          return null;
        },
        _loadThing: function (a, b) {
          var c = this._loadThingGetInfo(b);
          if (c == null) {
            return null;
          }
          switch (a) {
            case "align":
              this._alignThing(c, true);
              return null;
            case "bar":
              return this._loadBar(c);
            case "box":
              return this._loadBox(c);
            case "button":
              return this._loadButton(c);
            case "button_toggle":
              return this._loadButton(c, true, true);
            case "change":
              this._changeThing(c);
              return null;
            case "checkbox":
              return this._loadCheckBox(c);
            case "failure":
              if (this._failure_checks == null) {
                this._failure_checks = [];
              }
              this.unparentXML(c);
              this._failure_checks.push(c);
              return null;
            case "input_text":
              return this._loadInputText(c);
            case "line":
              return this._loadLine(c);
            case "default":
            case "group":
            case "include":
            case "inject":
            case "load_if":
            case "mode":
              return null;
            case "chrome":
            case "nine_slice":
            case "nine_slice_sprite":
            case "nineslice":
            case "nineslicesprite":
              return this._load9SliceSprite(c);
            case "num_stepper":
            case "numeric_stepper":
            case "numstepper":
              return this._loadNumericStepper(c);
            case "position":
              this.name = F.xml_name(c);
              a = this.getAsset(this.name);
              if (a != null) {
                this._loadPosition(c, a);
              }
              return null;
            case "dropdown":
            case "dropdown_menu":
            case "pulldown":
            case "pulldown_menu":
              return this._loadDropDownMenu(c);
            case "radio_group":
              return this._loadRadioGroup(c);
            case "region":
              return this._loadRegion(c);
            case "sprite":
              return this._loadSprite(c);
            case "tab_menu":
              return this._loadTabMenu(c);
            case "text":
              return this._loadText(c);
            case "tile_test":
              return this._loadTileTest(c);
            case "layout":
            case "ui":
              return this._loadLayout(c);
            default:
              return this._ptr.getRequest("ui_get:" + a, this, c, [b]);
          }
        },
        _loadScale: function (a, b, c) {
          if (c == null) {
            c = "scale";
          }
          if (b == null) {
            b = 1;
          }
          return this._loadHeight(a, b, c, "none");
        },
        _loadScaleX: function (a, b) {
          if (b == null) {
            b = 1;
          }
          return this._loadWidth(a, b, "scale_x", "none");
        },
        _loadScaleY: function (a, b) {
          if (b == null) {
            b = 1;
          }
          return this._loadHeight(a, b, "scale_y", "none");
        },
        _loadWidth: function (a, b, c, d) {
          if (d == null) {
            d = "";
          }
          if (c == null) {
            c = "width";
          }
          if (b == null) {
            b = 10;
          }
          c = F.xml_str(a, c, true, b == null ? "null" : "" + b);
          a = this.getRound(a, d);
          return this.doRound(this._getDataSize("w", c, b), a);
        },
        _loadHeight: function (a, b, c, d) {
          if (d == null) {
            d = "";
          }
          if (c == null) {
            c = "height";
          }
          if (b == null) {
            b = 10;
          }
          c = F.xml_str(a, c, true, b == null ? "null" : "" + b);
          a = this.getRound(a, d);
          return this.doRound(this._getDataSize("h", c, b), a);
        },
        _loadCompass: function (a, b) {
          if (b == null) {
            b = "resize_point";
          }
          a = F.xml_str(a, b, true, "nw");
          var c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = fa.pool.get().set(b, c);
          b._inPool = false;
          switch (a) {
            case "c":
            case "center":
            case "m":
            case "mid":
              b.set_x(0.5);
              b.set_y(0.5);
              break;
            case "ll":
            case "sw":
              b.set_x(0);
              b.set_y(1);
              break;
            case "lr":
            case "se":
              b.set_x(1);
              b.set_y(1);
              break;
            case "e":
            case "r":
              b.set_x(1);
              b.set_y(0.5);
              break;
            case "s":
              b.set_x(0.5);
              b.set_y(1);
              break;
            case "n":
            case "u":
              b.set_x(0.5);
              b.set_y(0);
              break;
            case "nw":
            case "ul":
              b.set_x(0);
              b.set_y(0);
              break;
            case "ne":
            case "ur":
              b.set_x(1);
              b.set_y(0);
              break;
            case "w":
              b.set_x(0.5);
              b.set_y(0);
          }
          return b;
        },
        _changeThing: function (a) {
          var b = F.xml_name(a);
          b = this.getAsset(b);
          if (b != null) {
            var c = -1;
            var d = -1;
            var e;
            var f;
            for (var k = a.attributes(); k.hasNext();) {
              switch (k.next()) {
                case "height":
                  d = this._loadHeight(a);
                  break;
                case "label":
                  var r = F.xml_str(a, "label");
                  e = F.xml_str(a, "context", true, "ui");
                  f = F.xml_str(a, "code", true, "");
                  r = this.getText(r, e, true, f);
                  if (ta.__implements(b, $h)) {
                    b.getLabel().set_text(r);
                  }
                  break;
                case "text":
                  if (b instanceof ae) {
                    r = F.xml_str(a, "text");
                    e = F.xml_str(a, "context", true, "ui");
                    var n = b;
                    f = F.xml_str(a, "code", true, "");
                    n.set_text(this.getText(r, e, true, f));
                  }
                  break;
                case "width":
                  c = this._loadWidth(a);
              }
            }
            if (!!ta.__implements(b, ed) && (c != -1 || d != -1)) {
              if (c == -1) {
                c = b.get_width();
              }
              if (d == -1) {
                d = b.get_height();
              }
              b.resize(c, d);
            }
            if (cb.resolve(a, "param") && ta.__implements(b, Oe)) {
              c = null;
              if (cb.resolve(a, "param")) {
                c = [];
                d = 0;
                for (a = fc.resolve(a, "param"); d < a.length;) {
                  f = a[d];
                  ++d;
                  if (ec.resolve(f, "type") && ec.resolve(f, "value")) {
                    k = Mb.resolve(f, "type");
                    k = k.toLowerCase();
                    r = e = Mb.resolve(f, "value");
                    f = F.xml_i(f, "sort", -1);
                    switch (k) {
                      case "bool":
                      case "boolean":
                        e = new String(e);
                        e = e.toLowerCase();
                        r = e == "true" || e == "1" ? true : false;
                        break;
                      case "float":
                        r = parseFloat(e);
                        break;
                      case "color":
                      case "hex":
                        k = xb.fromString(e);
                        if (k == null) {
                          throw K.thrown("U.parseHex() unable to parse hex String " + e);
                        }
                        r = k;
                        break;
                      case "int":
                        r = H.parseInt(e);
                        break;
                      case "string":
                        r = new String(e);
                    }
                    c.push({
                      sort: f,
                      value: r
                    });
                  }
                }
                c.sort(Ma.sortParams);
                d = 0;
                for (a = c.length; d < a;) {
                  e = d++;
                  c[e] = c[e].value;
                }
              }
              b.set_params(c);
            }
          }
        },
        _alignThing: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (cb.resolve(a, "objects")) {
            for (var c = 0, d = fc.resolve(a, "objects"); c < d.length;) {
              var e = d[c];
              ++c;
              e = F.xml_str(e, "value", true, "").split(",");
              var f = F.xml_str(a, "axis", true);
              if (f != "horizontal" && f != "vertical") {
                throw new Rb("FlxUI._alignThing(): axis must be \"horizontal\" or \"vertical\"!");
              }
              var k = f == "horizontal" ? this._getDataSize("w", F.xml_str(a, "spacing", true), -1) : this._getDataSize("h", F.xml_str(a, "spacing", true), -1);
              var r = F.xml_bool(a, "resize");
              var n = F.xml_bool(a, "grow", true);
              var J = F.xml_bool(a, "shrink", true);
              var za = -1;
              var m = -1;
              if (m == null) {
                m = 0;
              }
              if (za == null) {
                za = 0;
              }
              if (m == null) {
                m = 0;
              }
              if (za == null) {
                za = 0;
              }
              m = fa.pool.get().set(za, m);
              m._inPool = false;
              za = "";
              if (cb.resolve(a, "bounds")) {
                if (f == "horizontal") {
                  m.set_x(this._getDataSize("w", F.xml_str(Fb.resolve(a, "bounds"), "left"), -1));
                  m.set_y(this._getDataSize("w", F.xml_str(Fb.resolve(a, "bounds"), "right"), -1));
                } else if (f == "vertical") {
                  m.set_x(this._getDataSize("h", F.xml_str(Fb.resolve(a, "bounds"), "top"), -1));
                  m.set_y(this._getDataSize("h", F.xml_str(Fb.resolve(a, "bounds"), "bottom"), -1));
                }
              }
              if (m.x != -1 && m.y != -1) {
                if (m.y <= m.x) {
                  za = "bounds max must be > bounds min! (max=" + m.y + " min=" + m.x + ")";
                }
              } else {
                za = "missing bound!";
              }
              if (za == "") {
                this._doAlign(e, f, k, r, m, n, J);
              }
              if (cb.resolve(a, "anchor") || ec.resolve(a, "x") || ec.resolve(a, "y")) {
                for (f = 0; f < e.length;) {
                  k = e[f];
                  ++f;
                  k = this.getAsset(k);
                  this._loadPosition(a, k);
                }
              } else if (za != "") {
                if (!b) {
                  g.log.advanced(za, Ba.ERROR, true);
                }
              }
            }
          } else {
            throw new Rb("FlxUI._alignThing(): <objects> node not found!");
          }
        },
        _doAlign: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = true;
          }
          if (f == null) {
            f = true;
          }
          var r = 0;
          var n = e.y - e.x;
          var g = a.length - 1;
          var za = 0;
          var m = "width";
          var aa = "x";
          if (b == "vertical") {
            m = "height";
            aa = "y";
          }
          for (var h = 0; h < a.length;) {
            var p = a[h];
            ++h;
            p = this.getAsset(p);
            if (p != null) {
              var l = 0;
              switch (m) {
                case "height":
                  l = p.get_height();
                  break;
                case "width":
                  l = p.get_width();
              }
              r += l;
            }
          }
          if (d == 0) {
            r = (n - r) / g;
          } else {
            r = c;
            za = (n - c * g) / a.length;
          }
          za |= 0;
          r |= 0;
          e = e.x;
          for (h = 0; h < a.length;) {
            p = a[h];
            ++h;
            p = this.getAsset(p);
            if (p != null) {
              c = e;
              if (d) {
                if (ta.__implements(p, ed)) {
                  e = true;
                  n = p;
                  if (b == "vertical") {
                    if (za > n.get_width()) {
                      e = f;
                    } else if (za < n.get_width()) {
                      e = k;
                    }
                    if (e) {
                      n.resize(n.get_width(), za);
                    }
                  } else if (b == "horizontal") {
                    if (za > n.get_height()) {
                      e = f;
                    } else if (za < n.get_height()) {
                      e = k;
                    }
                    if (e) {
                      n.resize(za, n.get_height());
                    }
                  }
                }
              } else {
                switch (m) {
                  case "height":
                    za = p.get_height();
                    break;
                  case "width":
                    za = p.get_width();
                }
              }
              e = c + za + r;
              switch (aa) {
                case "x":
                  p.set_x(c);
                  break;
                case "y":
                  p.set_y(c);
              }
            }
          }
        },
        _checkFailure: function (a) {
          var b = F.xml_str(a, "target", true);
          var c = F.xml_str(a, "property", true);
          var d = F.xml_str(a, "compare", true);
          a = F.xml_str(a, "value", true);
          var e = this.getAsset(b);
          if (e == null) {
            return false;
          }
          var f = b = 0;
          var k = F.perc_to_float(a);
          switch (c) {
            case "h":
            case "height":
              b = e.get_height();
              break;
            case "w":
            case "width":
              b = e.get_width();
          }
          if (isNaN(k)) {
            if (F.isStrNum(a)) {
              f = parseFloat(a);
            } else {
              return false;
            }
          } else {
            switch (c) {
              case "h":
              case "height":
                f = k * this.screenHeight();
                break;
              case "w":
              case "width":
                f = k * this.screenWidth();
            }
          }
          c = false;
          switch (d) {
            case "<":
              if (b < f) {
                this.failed_by = f - b;
                c = true;
              }
              break;
            case "<=":
              if (b <= f) {
                this.failed_by = f - b;
                c = true;
              }
              break;
            case "=":
            case "==":
              if (b == f) {
                this.failed_by = Math.abs(b - f);
                c = true;
              }
              break;
            case ">":
              if (b > f) {
                this.failed_by = b - f;
                c = true;
              }
              break;
            case ">=":
              if (b >= f) {
                this.failed_by = b - f;
                c = true;
              }
          }
          return c;
        },
        _resizeThing: function (a, b) {
          var c = false;
          var d = a.get_width();
          var e = a.get_height();
          if (d < b.min_width) {
            c = true;
            d = b.min_width;
          } else if (d > b.max_width) {
            c = true;
            d = b.max_width;
          }
          if (e < b.min_height) {
            c = true;
            e = b.min_height;
          } else if (e > b.max_height) {
            c = true;
            e = b.max_height;
          }
          if (c) {
            a.resize(d, e);
          }
        },
        _postLoadThing: function (a, b) {
          if (a == "load_if") {
            if (this._loadTest(b) && b.firstElement() != null) {
              for (var c = b.elements(); c.hasNext();) {
                var d = c.next();
                if (d.nodeType != X.Element) {
                  throw K.thrown("Bad node type, expected Element but found " + (d.nodeType == null ? "null" : hb.toString(d.nodeType)));
                }
                b = d.nodeName.toLowerCase();
                if (d.nodeType != X.Document && d.nodeType != X.Element) {
                  throw K.thrown("Invalid nodeType " + (d.nodeType == null ? "null" : hb.toString(d.nodeType)));
                }
                this._postLoadThing(b, d);
              }
            }
          } else if (this._loadTest(b) != 0) {
            var e = F.xml_name(b);
            c = this.getAsset(e);
            if (d = a == "group") {
              c = this.getGroup(e);
            }
            if (a == "align") {
              this._alignThing(b);
            }
            if (a == "change") {
              this._changeThing(b);
            }
            if (a == "position") {
              this._loadPosition(b, c);
            } else {
              if (a == "cursor") {
                this._loadCursor(b);
              }
              if (c != null || d) {
                if (!d) {
                  a = F.xml_str(b, "use_def", true);
                  if (a != "") {
                    this.getDefinition(a);
                  }
                  if (ta.__implements(c, ed)) {
                    a = this._getDataSize("w", F.xml_str(b, "width"));
                    e = this._getDataSize("h", F.xml_str(b, "height"));
                    if (a == 0 || a == c.get_width()) {
                      a = null;
                    }
                    if (e == 0 || e == c.get_height()) {
                      e = null;
                    }
                    var f = this.calcMaxMinSize(b);
                    if (f != null) {
                      if (a != null) {
                        if (a < f.min_width) {
                          a = f.min_width;
                        }
                        if (a > f.max_width) {
                          a = f.max_width;
                        }
                        f.min_width = f.max_width = a;
                      }
                      if (e != null) {
                        if (e < f.min_height) {
                          e = f.min_height;
                        }
                        if (e > f.max_height) {
                          e = f.max_height;
                        }
                        f.min_height = f.max_height = e;
                      }
                      this._resizeThing(ta.__cast(c, ed), f);
                    }
                  }
                  a = -c.x;
                  e = -c.y;
                  if (e == null) {
                    e = 0;
                  }
                  if (a == null) {
                    a = 0;
                  }
                  c.set_x(c.x + a);
                  c.set_y(c.y + e);
                  this._loadPosition(b, c);
                }
                b = F.xml_str(b, "send_to", true, "");
                if (b != "") {
                  switch (b) {
                    case "back":
                    case "bottom":
                      this._sendTo(c, -1);
                      break;
                    case "front":
                    case "top":
                      this._sendTo(c, 1);
                  }
                }
                if (!d && c instanceof Ma && c._postLoaded == 0) {
                  c.getEvent("post_load", this, null);
                }
              }
            }
          }
        },
        _loadTileTest: function (a) {
          var b = F.xml_i(a, "tiles_w", 2);
          var c = F.xml_i(a, "tiles_h", 2);
          var d = this._loadWidth(a);
          var e = this._loadHeight(a);
          var f = this.calcMaxMinSize(a);
          if (d < f.min_width) {
            d = f.min_width;
          }
          if (e < f.min_height) {
            e = f.min_height;
          }
          d = d / b | 0;
          e = e / c | 0;
          if (d < e) {
            e = d;
          } else if (e < d) {
            d = e;
          }
          if (d * b > f.max_width) {
            d = f.max_width / b | 0;
          }
          if (e * c > f.max_height) {
            e = f.max_height / c | 0;
          }
          if (d < e) {
            e = d;
          } else if (e < d) {
            d = e;
          }
          if (d < 2) {
            d = 2;
          }
          if (e < 2) {
            e = 2;
          }
          var k = xb.fromString(F.xml_str(a, "color1", true, "0x808080"));
          var r = xb.fromString(F.xml_str(a, "color2", true, "0xc4c4c4"));
          f = F.xml_i(a, "base_tile_size", -1);
          a = F.xml_bool(a, "floor_to_even", false);
          b = new ej(0, 0, d, e, b, c, k, r, a);
          b.baseTileSize = f;
          return b;
        },
        _loadString: function (a, b) {
          b = F.xml_str(a, b);
          var c = F.xml_str(a, "context", true, "ui");
          a = F.xml_str(a, "code", true, "");
          return b = this.getText(b, c, true, a);
        },
        _loadText: function (a) {
          var b = F.xml_str(a, "text");
          var c = F.xml_str(a, "context", true, "ui");
          var d = F.xml_str(a, "code", true, "");
          b = this.getText(b, c, true, d);
          d = this._loadWidth(a, 100) | 0;
          c = this._loadHeight(a, -1) | 0;
          var e = this._loadFontFace(a);
          if (F.xml_bool(a, "input")) {
            throw new Rb("FlxUI._loadText(): <text> with input has been deprecated. Use <input_text> instead.");
          }
          var f = F.xml_str(a, "align");
          if (f == "") {
            f = null;
          }
          var k = this._loadHeight(a, 8, "size", "floor") | 0;
          var r = this._loadColor(a);
          var n = this._loadBorder(a);
          d = new ae(0, 0, d, b, k);
          d.setFormat(e, k, r, f);
          n.apply(d);
          d.drawFrame();
          if (cb.resolve(a, "param")) {
            e = null;
            if (cb.resolve(a, "param")) {
              e = [];
              f = 0;
              for (a = fc.resolve(a, "param"); f < a.length;) {
                r = a[f];
                ++f;
                if (ec.resolve(r, "type") && ec.resolve(r, "value")) {
                  n = Mb.resolve(r, "type");
                  n = n.toLowerCase();
                  var g = k = Mb.resolve(r, "value");
                  r = F.xml_i(r, "sort", -1);
                  switch (n) {
                    case "bool":
                    case "boolean":
                      k = new String(k);
                      k = k.toLowerCase();
                      g = k == "true" || k == "1" ? true : false;
                      break;
                    case "float":
                      g = parseFloat(k);
                      break;
                    case "color":
                    case "hex":
                      n = xb.fromString(k);
                      if (n == null) {
                        throw K.thrown("U.parseHex() unable to parse hex String " + k);
                      }
                      g = n;
                      break;
                    case "int":
                      g = H.parseInt(k);
                      break;
                    case "string":
                      g = new String(k);
                  }
                  e.push({
                    sort: r,
                    value: g
                  });
                }
              }
              e.sort(Ma.sortParams);
              f = 0;
              for (a = e.length; f < a;) {
                k = f++;
                e[k] = e[k].value;
              }
            }
            d.set_params(e);
          }
          if (c > 0 && d.get_height() != c && ta.__implements(d, ed)) {
            d.resize(d.get_width(), c);
          }
          d.set_text(" ");
          d.set_text(b);
          return d;
        },
        _loadInputText: function (a) {
          var b = F.xml_str(a, "text");
          var c = F.xml_str(a, "context", true, "ui");
          var d = F.xml_str(a, "code", true, "");
          b = this.getText(b, c, true, d);
          var e = this._loadWidth(a, 100) | 0;
          c = this._loadHeight(a, -1) | 0;
          d = this._loadFontFace(a);
          var f = F.xml_str(a, "align");
          if (f == "") {
            f = null;
          }
          var k = this._loadHeight(a, 8, "size") | 0;
          var r = this._loadColor(a);
          var n = this._loadBorder(a);
          var g = F.xml_str(a, "background", true, "0x00000000");
          var za = true;
          var m = 0;
          if (m == null) {
            m = 0;
          }
          if (za == null) {
            za = false;
          }
          var aa = xb.fromString(g);
          if (aa == null) {
            if (za) {
              aa = m;
            } else {
              throw K.thrown("U.parseHex() unable to parse hex String " + g);
            }
          }
          g = aa;
          aa = F.xml_bool(a, "password_mode");
          b = new gb(0, 0, e, b, k, r, g);
          b.set_passwordMode(aa);
          switch (F.xml_str(a, "force_case", true, "")) {
            case "l":
            case "u":
              throw new Rb("FlxUI._loadInputText(): 1 letter values have been deprecated (force_case attribute).");
            case "lower":
            case "lower_case":
            case "lowercase":
              aa = 2;
              break;
            case "upper":
            case "upper_case":
            case "uppercase":
              aa = 1;
              break;
            default:
              aa = 0;
          }
          for (g = F.xml_str(a, "filter", true, ""); g.indexOf("_") != -1;) {
            g = w.replace(g, "_", "");
          }
          switch (g) {
            case "a":
            case "an":
            case "n":
              throw new Rb("FlxUI._loadInputText(): 1 letter values have been deprecated (filter attribute).");
            case "alpha":
            case "onlyalpha":
              g = 1;
              break;
            case "alphanum":
            case "alphanumeric":
            case "onlyalphanumeric":
              g = 3;
              break;
            case "num":
            case "numeric":
            case "onlynumeric":
              g = 2;
              break;
            default:
              g = 0;
          }
          b.setFormat(d, k, r, f);
          b.set_forceCase(aa);
          b.set_filterMode(g);
          n.apply(b);
          b.drawFrame();
          if (cb.resolve(a, "param")) {
            d = null;
            if (cb.resolve(a, "param")) {
              d = [];
              f = 0;
              for (a = fc.resolve(a, "param"); f < a.length;) {
                r = a[f];
                ++f;
                if (ec.resolve(r, "type") && ec.resolve(r, "value")) {
                  n = Mb.resolve(r, "type");
                  n = n.toLowerCase();
                  aa = k = Mb.resolve(r, "value");
                  r = F.xml_i(r, "sort", -1);
                  switch (n) {
                    case "bool":
                    case "boolean":
                      g = new String(k);
                      g = g.toLowerCase();
                      aa = g == "true" || g == "1" ? true : false;
                      break;
                    case "float":
                      aa = parseFloat(k);
                      break;
                    case "color":
                    case "hex":
                      aa = xb.fromString(k);
                      if (aa == null) {
                        throw K.thrown("U.parseHex() unable to parse hex String " + k);
                      }
                      break;
                    case "int":
                      aa = H.parseInt(k);
                      break;
                    case "string":
                      aa = new String(k);
                  }
                  d.push({
                    sort: r,
                    value: aa
                  });
                }
              }
              d.sort(Ma.sortParams);
              f = 0;
              for (a = d.length; f < a;) {
                k = f++;
                d[k] = d[k].value;
              }
            }
            b.set_params(d);
          }
          if (c > 0 && b.get_height() != c && ta.__implements(b, ed)) {
            b.resize(b.get_width(), c);
          }
          return b;
        },
        _loadRadioGroup: function (a) {
          var b = F.xml_str(a, "dot_src", true);
          var c = F.xml_str(a, "radio_src", true);
          var d = [];
          var e = [];
          var f = this._loadWidth(a, 11, "radio_width");
          var k = this._loadHeight(a, 11, "radio_height");
          var r = this._loadHeight(a, 0, "height");
          var n = this._loadHeight(a, 0, "width");
          var g = this._loadWidth(a, 100, "label_width");
          for (var za = 0, m = fc.resolve(a, "radio"); za < m.length;) {
            var aa = m[za];
            ++za;
            var h = F.xml_name(aa);
            var p = F.xml_str(aa, "label");
            var l = F.xml_str(aa, "context", true, "ui");
            aa = F.xml_str(aa, "code", true, "");
            p = this.getText(p, l, true, aa);
            e.push(h);
            d.push(p);
          }
          e.reverse();
          d.reverse();
          aa = this._loadHeight(a, 25, "y_space");
          l = null;
          if (cb.resolve(a, "param")) {
            l = [];
            za = 0;
            for (m = fc.resolve(a, "param"); za < m.length;) {
              h = m[za];
              ++za;
              if (ec.resolve(h, "type") && ec.resolve(h, "value")) {
                var q = Mb.resolve(h, "type");
                q = q.toLowerCase();
                var L = p = Mb.resolve(h, "value");
                h = F.xml_i(h, "sort", -1);
                switch (q) {
                  case "bool":
                  case "boolean":
                    p = new String(p);
                    p = p.toLowerCase();
                    L = p == "true" || p == "1" ? true : false;
                    break;
                  case "float":
                    L = parseFloat(p);
                    break;
                  case "color":
                  case "hex":
                    q = xb.fromString(p);
                    if (q == null) {
                      throw K.thrown("U.parseHex() unable to parse hex String " + p);
                    }
                    L = q;
                    break;
                  case "int":
                    L = H.parseInt(p);
                    break;
                  case "string":
                    L = new String(p);
                }
                l.push({
                  sort: h,
                  value: L
                });
              }
            }
            l.sort(Ma.sortParams);
            za = 0;
            for (m = l.length; za < m;) {
              p = za++;
              l[p] = l[p].value;
            }
          }
          p = l;
          l = null;
          if (c != "") {
            l = F.gfx(c);
          } else if (cb.resolve(a, "box")) {
            l = F.xml_str(Fb.resolve(a, "box"), "slice9") != "" ? this._load9SliceSprite(Fb.resolve(a, "box")) : this._loadSprite(Fb.resolve(a, "box"));
          }
          c = null;
          if (b != "") {
            c = F.gfx(b);
          } else if (cb.resolve(a, "dot")) {
            c = F.xml_str(Fb.resolve(a, "dot"), "slice9") != "" ? this._load9SliceSprite(Fb.resolve(a, "dot")) : this._loadSprite(Fb.resolve(a, "dot"));
          }
          q = b = null;
          if (cb.resolve(a, "button")) {
            za = 0;
            m = fc.resolve(a, "button");
            while (za < m.length) {
              L = m[za];
              ++za;
              h = F.xml_name(L);
              if (h == "previous" || h == "prev") {
                b = F.xml_f(L, "x");
                h = F.xml_f(L, "y");
                if (h == null) {
                  h = 0;
                }
                if (b == null) {
                  b = 0;
                }
                if (h == null) {
                  h = 0;
                }
                if (b == null) {
                  b = 0;
                }
                b = fa.pool.get().set(b, h);
                b._inPool = false;
              } else if (h == "next") {
                h = F.xml_f(L, "x");
                q = F.xml_f(L, "y");
                if (q == null) {
                  q = 0;
                }
                if (h == null) {
                  h = 0;
                }
                if (q == null) {
                  q = 0;
                }
                if (h == null) {
                  h = 0;
                }
                h = fa.pool.get().set(h, q);
                h._inPool = false;
                q = h;
              }
            }
          }
          d = new fj(0, 0, e, d, null, aa, f, k, g, null, b, q);
          d.set_params(p);
          if (l != "" && l != null) {
            d.loadGraphics(l, c);
          }
          e = this._loadWidth(a, 0, "text_x") | 0;
          f = this._loadHeight(a, 0, "text_y") | 0;
          k = d.getRadios();
          p = 0;
          l = false;
          g = a.elementsNamed("radio");
          za = 0;
          for (m = k.length; za < m;) {
            aa = za++;
            b = k[k.length - 1 - aa];
            aa = g.hasNext() ? g.next() : null;
            if (b != null && b instanceof zb && (b = ta.__cast(b, zb), c = this.formatButtonText(a, b), c != null && l == 0 && (l = od.copyFromFlxText(c), h = new df(c.borderStyle, c.borderColor, c.borderSize, c.borderQuality), d.set_activeStyle(new gj(16777215, l, En.fromOpenFL(c._defaultFormat.align), c.color, h)), l = true), b.set_textX(e), b.set_textY(f), ++p, aa != null)) {
              if (aa.nodeType != X.Document && aa.nodeType != X.Element) {
                throw K.thrown("Invalid nodeType " + (aa.nodeType == null ? "null" : hb.toString(aa.nodeType)));
              }
              this._loadTooltip(b, aa);
            }
          }
          if (n != 0) {
            d.fixedSize = true;
            d.set_width(n);
          }
          if (r != 0) {
            d.fixedSize = true;
            d.set_height(r);
          }
          return d;
        },
        _loadCheckBox: function (a) {
          var b = F.xml_str(a, "label");
          var c = F.xml_str(a, "context", true, "ui");
          var d = F.xml_str(a, "code", true, "");
          var e = F.xml_bool(a, "checked", false);
          b = this.getText(b, c, true, d);
          c = this._loadWidth(a, 100, "label_width");
          d = F.xml_str(a, "check_src", true);
          var f = F.xml_str(a, "box_src", true);
          var k = null;
          if (cb.resolve(a, "param")) {
            k = [];
            for (var r = 0, n = fc.resolve(a, "param"); r < n.length;) {
              var g = n[r];
              ++r;
              if (ec.resolve(g, "type") && ec.resolve(g, "value")) {
                var za = Mb.resolve(g, "type");
                za = za.toLowerCase();
                var m = Mb.resolve(g, "value");
                var h = m;
                g = F.xml_i(g, "sort", -1);
                switch (za) {
                  case "bool":
                  case "boolean":
                    m = new String(m);
                    m = m.toLowerCase();
                    h = m == "true" || m == "1" ? true : false;
                    break;
                  case "float":
                    h = parseFloat(m);
                    break;
                  case "color":
                  case "hex":
                    za = xb.fromString(m);
                    if (za == null) {
                      throw K.thrown("U.parseHex() unable to parse hex String " + m);
                    }
                    h = za;
                    break;
                  case "int":
                    h = H.parseInt(m);
                    break;
                  case "string":
                    h = new String(m);
                }
                k.push({
                  sort: g,
                  value: h
                });
              }
            }
            k.sort(Ma.sortParams);
            r = 0;
            for (n = k.length; r < n;) {
              m = r++;
              k[m] = k[m].value;
            }
          }
          n = r = null;
          if (f != "") {
            r = F.gfx(f);
          } else if (cb.resolve(a, "box")) {
            r = F.xml_str(Fb.resolve(a, "box"), "slice9") != "" ? this._load9SliceSprite(Fb.resolve(a, "box")) : this._loadSprite(Fb.resolve(a, "box"));
          }
          if (d != "") {
            n = F.gfx(d);
          } else if (cb.resolve(a, "check")) {
            n = F.xml_str(Fb.resolve(a, "check"), "slice9") != "" ? this._load9SliceSprite(Fb.resolve(a, "check")) : this._loadSprite(Fb.resolve(a, "check"));
          }
          c = new zb(0, 0, r, n, b, c, k);
          this.formatButtonText(a, c);
          d = this._loadWidth(a, 0, "text_x") | 0;
          a = this._loadHeight(a, 0, "text_y") | 0;
          c.set_textX(d);
          c.set_textY(a);
          c.set_text(b);
          c.set_checked(e);
          return c;
        },
        _loadDropDownMenu: function (a) {
          var b = F.xml_str(a, "label");
          var c = F.xml_str(a, "context", true, "ui");
          var d = F.xml_str(a, "code", true, "");
          b = this.getText(b, c, true, d);
          var e = F.xml_str(a, "back_def", true);
          var f = F.xml_str(a, "panel_def", true);
          var k = F.xml_str(a, "button_def", true);
          var r = F.xml_str(a, "label_def", true);
          var n = c = d = null;
          var J = null;
          if (e != "") {
            d = this._loadSprite(this.getDefinition(e));
          }
          if (f != "") {
            c = this._load9SliceSprite(this.getDefinition(f));
          }
          if (k != "") {
            try {
              n = this._loadButton(this.getDefinition(k), false, false);
            } catch (m) {
              if (K.caught(m) instanceof Rb) {
                g.log.advanced("couldn't loadButton with definition \"" + k + "\"", Ba.NORMAL);
                n = null;
              } else {
                throw m;
              }
            }
          }
          if (r != "") {
            try {
              J = this._loadText(this.getDefinition(r));
            } catch (m) {
              if (K.caught(m) instanceof Rb) {
                g.log.advanced("couldn't loadText with definition \"" + r + "\"", Ba.NORMAL);
                J = null;
              } else {
                throw m;
              }
            }
            if (J != null && b != "") {
              J.set_text(b);
            }
          }
          e = b = null;
          if (cb.resolve(a, "data")) {
            f = 0;
            a = fc.resolve(a, "data");
            while (f < a.length) {
              k = a[f];
              ++f;
              if (e == null) {
                e = [];
              }
              k = new Nk(F.xml_str(k, "name", true), F.xml_str(k, "label"));
              e.push(k);
            }
          } else if (cb.resolve(a, "asset")) {
            f = 0;
            a = fc.resolve(a, "asset");
            while (f < a.length) {
              r = a[f];
              ++f;
              if (b == null) {
                b = [];
              }
              k = F.xml_str(r, "def", true);
              r = F.xml_name(r);
              var h = null;
              try {
                h = this._loadButton(this.getDefinition(k), false);
              } catch (m) {
                if (K.caught(m) instanceof Rb) {
                  g.log.advanced("couldn't loadButton with definition \"" + k + "\"", Ba.NORMAL);
                } else {
                  throw m;
                }
              }
              if (h != null) {
                h.name = r;
                if (b == null) {
                  b = [];
                }
                b.push(h);
              }
            }
          }
          d = new hj(120, d, J, n);
          return new vc(0, 0, e, null, d, c, b);
        },
        _loadTest: function (a) {
          var b = true;
          if (a.nodeType == X.Document) {
            var c = "Document";
          } else {
            if (a.nodeType != X.Element) {
              throw K.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
            }
            c = a.nodeName;
          }
          if (c == "load_if" && (b = this._loadTestSub(a), b == 0)) {
            return false;
          }
          if (cb.resolve(a, "load_if")) {
            c = 0;
            a = fc.resolve(a, "load_if");
            while (c < a.length) {
              var d = a[c];
              ++c;
              var e = d;
              if (e.nodeType != X.Document && e.nodeType != X.Element) {
                throw K.thrown("Bad node type, expected Element or Document but found " + (e.nodeType == null ? "null" : hb.toString(e.nodeType)));
              }
              if (e.children[0] == null && (b = this._loadTestSub(d), b == 0)) {
                return false;
              }
            }
          }
          return b;
        },
        _loadTestSub: function (a) {
          var b = F.xml_bool(a, "is", true);
          var c = F.xml_f(a, "aspect_ratio", -1);
          if (c != -1) {
            var d = true;
            var e = ta.__cast(g.width, tp) / ta.__cast(g.height, tp);
            var f = Math.abs(e - c);
            if (ec.resolve(a, "tolerance")) {
              c = F.xml_f(a, "tolerance", 0.1);
              if (f > c) {
                d = false;
              }
            } else if (ec.resolve(a, "tolerance_plus") || ec.resolve(a, "tolerance_minus")) {
              var k = F.xml_f(a, "tolerance_minus", -1);
              var r = F.xml_f(a, "tolerance_plus", -1);
              if (e > c && r != -1 && f > r) {
                d = false;
              }
              if (e < c && k != -1 && f > k) {
                d = false;
              }
            }
            if (d != b) {
              return false;
            }
          }
          f = F.xml_pt(a, "resolution", null);
          if (f != null) {
            d = true;
            c = F.xml_pt(a, "tolerance", null);
            if (c == null) {
              e = c = 0;
              if (e == null) {
                e = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (c == null) {
                c = 0;
              }
              c = fa.pool.get().set(c, e);
              c._inPool = false;
            }
            e = Math.abs(f.y - g.height);
            if (Math.abs(f.x - g.width) > c.x || e > c.y) {
              d = false;
            }
            if (d != b) {
              return false;
            }
          }
          d = F.xml_str(a, "haxedef", true, "");
          f = F.xml_bool(a, "value", true);
          if (d != "" && F.checkHaxedef(d) == f != b) {
            return false;
          }
          f = F.xml_str(a, "variable", false, "");
          a = F.xml_str(a, "type", true, "string");
          if (f != "" && (d = true, f = this.parseVarValue(f), f != null && (d = this.checkVariable(f.variable, f.value, a, f.op)), d != b)) {
            return false;
          } else {
            return true;
          }
        },
        parseVarValue: function (a) {
          for (var b = "== = != !== < > <= >=".split(" "), c, d = 0; d < b.length;) {
            var e = b[d];
            ++d;
            if (a.indexOf(e) != -1 && (c = a.split(e), c != null && c.length == 2)) {
              return {
                variable: c[0],
                value: c[1],
                op: e
              };
            }
          }
          return null;
        },
        _loadLayout: function (a) {
          var b = F.xml_str(a, "name", true);
          var c = this._loadWidth(a, 0, "x");
          var d = this._loadHeight(a, 0, "y");
          a = this.createUI(a);
          a.set_x(c);
          a.set_y(d);
          a.name = b;
          return a;
        },
        addToCleanup: function (a) {
          if (this._assetsToCleanUp != null && this._assetsToCleanUp.indexOf(a) == -1) {
            this._assetsToCleanUp.push(a);
          }
        },
        addToScaledAssets: function (a) {
          if (this._scaledAssets != null && this._scaledAssets.indexOf(a) == -1) {
            this._scaledAssets.push(a);
          }
        },
        cleanup: function () {
          for (var a = 0, b = this._assetsToCleanUp; a < b.length;) {
            var c = b[a];
            ++a;
            g.bitmap.removeByKey(c);
          }
          this._scaledAssets = this._assetsToCleanUp = null;
        },
        createUI: function (a) {
          return new Ma(a, this, this, this._ptr_tongue, this.liveFilePath);
        },
        _loadTabMenu: function (a) {
          var b = F.xml_str(a, "back_def");
          b = this.getDefinition(b);
          if (b == null) {
            b = a;
          }
          b = Ma.consolidateData(b, a);
          switch (F.xml_str(a, "back_type", true, "chrome")) {
            case "region":
              b = new sh();
              break;
            case "sprite":
              b = this._loadSprite(b);
              break;
            default:
              b = this._load9SliceSprite(b, "tab_menu");
          }
          var c = null;
          var d = F.xml_bool(a, "stretch_tabs", false);
          var e = "front";
          var f = "back";
          if (cb.resolve(a, "stacking")) {
            e = F.xml_str(Fb.resolve(a, "stacking"), "toggled", true, "front");
            f = F.xml_str(Fb.resolve(a, "stacking"), "untoggled", true, "back");
          }
          var k = null;
          if (F.xml_str(a, "spacing", true, "") != "") {
            k = this._loadWidth(a, 0, "spacing");
          }
          var r = this._loadWidth(a, 0, "tab_x");
          var n = this._loadHeight(a, 0, "tab_y");
          if (n == null) {
            n = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (r == null) {
            r = 0;
          }
          r = fa.pool.get().set(r, n);
          r._inPool = false;
          var g = "";
          if (cb.resolve(a, "tab")) {
            n = 0;
            for (var h = fc.resolve(a, "tab"); n < h.length;) {
              c = h[n];
              ++n;
              c = F.xml_str(c, "use_def");
              if (c != "") {
                g = c;
              }
            }
            c = g != "" ? this.getDefinition(g) : Fb.resolve(a, "tab");
          }
          g = [];
          if (cb.resolve(a, "tab")) {
            n = 0;
            h = fc.resolve(a, "tab");
            while (n < h.length) {
              var m = h[n];
              ++n;
              var aa = F.xml_name(m);
              if (aa != "") {
                var p = F.xml_str(m, "label");
                var l = F.xml_str(m, "context", true, "ui");
                var q = F.xml_str(m, "code", true, "");
                p = this.getText(p, l, true, q);
                this.getText(p, l, true, q);
                m = Ma.consolidateData(m, c);
                p = this._loadButton(m, true, true, "tab_menu");
                p.name = aa;
                g.push(p);
                this._loadTooltip(p, m);
              }
            }
          }
          if (g.length > 0) {
            if (c == null || !cb.resolve(c, "text")) {
              for (n = 0; n < g.length;) {
                h = g[n];
                ++n;
                if (h instanceof Ic) {
                  h.label.set_color(16777215);
                  if (h.label instanceof ae) {
                    h = h.label;
                    h.set_borderStyle(Ta.OUTLINE);
                    h.set_borderColor(0);
                    h.set_borderSize(1);
                    h.set_borderQuality(1);
                  }
                }
              }
            }
            if (c == null || !ec.resolve(c, "width")) {
              d = true;
            }
          }
          b = new ne(b, g, null, r, d, k, [e, f]);
          if (cb.resolve(a, "group")) {
            n = 0;
            h = fc.resolve(a, "group");
            while (n < h.length) {
              a = h[n];
              ++n;
              aa = F.xml_name(a);
              a = new Ma(a, b, this, this._ptr_tongue);
              if (g != null && g.length > 0) {
                a.set_y(a.y + g[0].get_height());
              }
              a.name = aa;
              b.addGroup(a);
            }
          }
          return b;
        },
        _loadNumericStepper: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = F.xml_f(a, "step", 1);
          var d = F.xml_f(a, "value", 0);
          var e = F.xml_f(a, "min", 0);
          var f = F.xml_f(a, "max", 10);
          var k = F.xml_i(a, "decimals", 0);
          var r = F.xml_bool(a, "percent");
          var n = F.xml_str(a, "stack", true, "");
          if (n == "") {
            n = F.xml_str(a, "stacking", true, "");
          }
          n = n.toLowerCase();
          switch (n) {
            case "h":
            case "horizontal":
            case "horz":
              n = 1;
              break;
            case "v":
            case "vert":
            case "vertical":
              n = 0;
              break;
            default:
              n = 1;
          }
          var g = null;
          var h = null;
          var m = null;
          if (cb.resolve(a, "text")) {
            g = this._loadThing("text", Fb.resolve(a, "text"));
          }
          if (cb.resolve(a, "plus")) {
            h = this._loadThing("button", Fb.resolve(a, "plus"));
          }
          if (cb.resolve(a, "minus")) {
            m = this._loadThing("button", Fb.resolve(a, "minus"));
          }
          c = new Sb(0, 0, c, d, e, f, k, n, g, h, m, r);
          if (b) {
            b = null;
            if (cb.resolve(a, "param")) {
              b = [];
              d = 0;
              for (a = fc.resolve(a, "param"); d < a.length;) {
                f = a[d];
                ++d;
                if (ec.resolve(f, "type") && ec.resolve(f, "value")) {
                  k = Mb.resolve(f, "type");
                  k = k.toLowerCase();
                  r = e = Mb.resolve(f, "value");
                  f = F.xml_i(f, "sort", -1);
                  switch (k) {
                    case "bool":
                    case "boolean":
                      e = new String(e);
                      e = e.toLowerCase();
                      r = e == "true" || e == "1" ? true : false;
                      break;
                    case "float":
                      r = parseFloat(e);
                      break;
                    case "color":
                    case "hex":
                      k = xb.fromString(e);
                      if (k == null) {
                        throw K.thrown("U.parseHex() unable to parse hex String " + e);
                      }
                      r = k;
                      break;
                    case "int":
                      r = H.parseInt(e);
                      break;
                    case "string":
                      r = new String(e);
                  }
                  b.push({
                    sort: f,
                    value: r
                  });
                }
              }
              b.sort(Ma.sortParams);
              d = 0;
              for (a = b.length; d < a;) {
                e = d++;
                b[e] = b[e].value;
              }
            }
            c.set_params(b);
          }
          return c;
        },
        getResizeRatio: function (a, b) {
          if (b == null) {
            b = 1;
          }
          var c = F.xml_str(a, "resize_ratio_x", true);
          if (c == "") {
            c = F.xml_str(a, "resize_ratio_y", true);
            if (c == "") {
              a = F.xml_f(a, "resize_ratio", -1);
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              b = fa.pool.get().set(a, b);
            } else {
              a = parseFloat(c);
              b = 1;
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              b = fa.pool.get().set(a, b);
            }
          } else {
            a = parseFloat(c);
            b = 0;
            if (b == null) {
              b = 0;
            }
            if (a == null) {
              a = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (a == null) {
              a = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (a == null) {
              a = 0;
            }
            b = fa.pool.get().set(a, b);
          }
          b._inPool = false;
          return b;
        },
        _loadButton: function (a, b, c, d) {
          if (d == null) {
            d = "";
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = true;
          }
          var e = this._loadColor(a);
          var f = F.xml_f(a, "resize_ratio", -1);
          var k = this._loadCompass(a, "resize_point");
          var r = F.xml_bool(a, "resize_label", false);
          var n = F.xml_str(a, "label");
          var g = null;
          var h = null;
          if (cb.resolve(a, "sprite")) {
            for (var m = 0, aa = fc.resolve(a, "sprite"); m < aa.length;) {
              var p = aa[m];
              ++m;
              if (c && F.xml_bool(p, "toggle")) {
                h = this._loadThing("sprite", p);
              } else {
                g = this._loadThing("sprite", p);
              }
            }
          }
          m = F.xml_str(a, "context", true, "ui");
          p = F.xml_str(a, "code", true, "");
          n = this.getText(n, m, true, p);
          p = this._loadWidth(a, 0, "width") | 0;
          var l = this._loadHeight(a, 0, "height") | 0;
          var q = null;
          if (cb.resolve(a, "param")) {
            q = [];
            m = 0;
            for (aa = fc.resolve(a, "param"); m < aa.length;) {
              var t = aa[m];
              ++m;
              if (ec.resolve(t, "type") && ec.resolve(t, "value")) {
                var L = Mb.resolve(t, "type");
                L = L.toLowerCase();
                var u = Mb.resolve(t, "value");
                var x = u;
                t = F.xml_i(t, "sort", -1);
                switch (L) {
                  case "bool":
                  case "boolean":
                    u = new String(u);
                    u = u.toLowerCase();
                    x = u == "true" || u == "1" ? true : false;
                    break;
                  case "float":
                    x = parseFloat(u);
                    break;
                  case "color":
                  case "hex":
                    L = xb.fromString(u);
                    if (L == null) {
                      throw K.thrown("U.parseHex() unable to parse hex String " + u);
                    }
                    x = L;
                    break;
                  case "int":
                    x = H.parseInt(u);
                    break;
                  case "string":
                    x = new String(u);
                }
                q.push({
                  sort: t,
                  value: x
                });
              }
            }
            q.sort(Ma.sortParams);
            m = 0;
            for (aa = q.length; m < aa;) {
              u = m++;
              q[u] = q[u].value;
            }
          }
          m = q;
          if (g == null) {
            aa = cb.resolve(a, "graphic") == 0;
            e = new vd(0, 0, n, null, aa, false, e);
            e._autoCleanup = false;
          } else if (n != "") {
            e = new ae(0, 0, 80, n, 8);
            e.setFormat(null, 8, 3355443, "center");
            aa = new db();
            aa.add(g);
            aa.add(e);
            e = new ff(0, 0, aa);
          } else {
            e = new ff(0, 0, g);
          }
          e.resize_ratio = f;
          e.resize_point = k;
          e.autoResizeLabel = r;
          if (b) {
            e.set_params(m);
          }
          if (cb.resolve(a, "graphic")) {
            if (F.xml_bool(Fb.resolve(a, "graphic"), "blank")) {
              e.loadGraphicSlice9(["", "", ""], p, l, null, 0, f);
            } else {
              r = null;
              if (c) {
                b = "     ".split(" ");
                k = [null, null, null, null, null, null];
              } else {
                b = ["", "", ""];
                k = [null, null, null];
              }
              q = F.xml_i(Fb.resolve(a, "graphic"), "src_w", 0);
              u = F.xml_i(Fb.resolve(a, "graphic"), "src_h", 0);
              t = F.xml_str(Fb.resolve(a, "graphic"), "tile", true, "");
              var w = 0;
              switch (t) {
                case "h":
                case "horizontal":
                  w = 16;
                  break;
                case "v":
                case "vertical":
                  w = 1;
                  break;
                case "all":
                case "both":
                case "hv":
                case "true":
                case "vh":
                  w = 17;
              }
              t = w;
              m = F.xml_str(Fb.resolve(a, "graphic"), "frames", true);
              if (m != "") {
                r = [];
                aa = m.split(",");
                m = 0;
                while (m < aa.length) {
                  L = aa[m];
                  ++m;
                  r.push(H.parseInt(L));
                }
              }
              m = 0;
              for (aa = fc.resolve(a, "graphic"); m < aa.length;) {
                L = aa[m];
                ++m;
                var z = F.xml_name(L);
                x = F.xml_str(L, "image");
                var A = Yb.toIntArray(F.xml_str(L, "slice9"));
                t = F.xml_str(L, "tile", true, "");
                w = 0;
                switch (t) {
                  case "h":
                  case "horizontal":
                    w = 16;
                    break;
                  case "v":
                  case "vertical":
                    w = 1;
                    break;
                  case "all":
                  case "both":
                  case "hv":
                  case "true":
                  case "vh":
                    w = 17;
                }
                t = w;
                var y = F.xml_bool(L, "toggle");
                y = y && c;
                w = F.gfx(x);
                switch (z) {
                  case "all":
                    z = c ? 6 : 3;
                    if (u != 0) {
                      z = F.getBmp(w).height / u | 0;
                    }
                    if (x != "") {
                      b = [this.loadScaledSrc(L, "image", "scale_src", 1, z)];
                    }
                    k = [this.load9SliceSprite_scaleSub(A, L, b[0], "image")];
                    u = F.getBmp(b[0]);
                    q = u.width;
                    u = u.height / z | 0;
                    break;
                  case "active":
                  case "highlight":
                  case "hilight":
                  case "hover":
                  case "over":
                    if (x != "") {
                      if (y) {
                        b[4] = this.loadScaledSrc(L, "image", "scale_src");
                      } else {
                        b[1] = this.loadScaledSrc(L, "image", "scale_src");
                      }
                    }
                    if (y) {
                      k[4] = this.load9SliceSprite_scaleSub(A, L, b[4], "image");
                    } else {
                      k[1] = this.load9SliceSprite_scaleSub(A, L, b[1], "image");
                    }
                    break;
                  case "down":
                  case "pressed":
                  case "pushed":
                    if (x != "") {
                      if (y) {
                        b[5] = this.loadScaledSrc(L, "image", "scale_src");
                      } else {
                        b[2] = this.loadScaledSrc(L, "image", "scale_src");
                      }
                    }
                    if (y) {
                      k[5] = this.load9SliceSprite_scaleSub(A, L, b[5], "image");
                    } else {
                      k[2] = this.load9SliceSprite_scaleSub(A, L, b[2], "image");
                    }
                    break;
                  case "":
                  case "inactive":
                  case "normal":
                  case "up":
                    if (x != "") {
                      if (y) {
                        b[3] = this.loadScaledSrc(L, "image", "scale_src");
                      } else {
                        b[0] = this.loadScaledSrc(L, "image", "scale_src");
                      }
                    }
                    if (y) {
                      k[3] = this.load9SliceSprite_scaleSub(A, L, b[3], "image");
                    } else {
                      k[0] = this.load9SliceSprite_scaleSub(A, L, b[0], "image");
                    }
                }
                if (b[0] != "" && b.length >= 3) {
                  if (b[1] == "") {
                    b[1] = b[0];
                  }
                  if (b[2] == "") {
                    b[2] = b[1];
                  }
                  if (b.length >= 6) {
                    if (b[3] == "") {
                      b[3] = b[0];
                    }
                    if (b[4] == "") {
                      b[4] = b[1];
                    }
                    if (b[5] == "") {
                      b[5] = b[2];
                    }
                  }
                }
              }
              e.loadGraphicSlice9(b, p, l, k, t, f, c, q, u, r);
            }
          } else if (d == "tab_menu") {
            b = "flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab.png flixel/flixel-ui/img/tab.png flixel/flixel-ui/img/tab.png".split(" ");
            m = Yb.toIntArray("6,6,11,11");
            k = [m, m, m, m, m, m];
            e.loadGraphicSlice9(b, p, l, k, 0, f, c);
          } else {
            if (p <= 0) {
              p = 80;
            }
            if (l <= 0) {
              l = 20;
            }
            e.loadGraphicSlice9(null, p, l, null, 0, f, c);
          }
          if (g == null) {
            if (a != null && cb.resolve(a, "text")) {
              this.formatButtonText(a, e);
            } else if (d == "tab_menu") {
              e.up_color = 16777215;
              e.down_color = 16777215;
              e.over_color = 16777215;
              e.up_toggle_color = 16777215;
              e.down_toggle_color = 16777215;
              e.over_toggle_color = 16777215;
            } else {
              e.autoCenterLabel();
            }
          } else {
            e.autoCenterLabel();
          }
          if (g != null && n != "" && a != null && cb.resolve(a, "text")) {
            this.formatButtonText(a, e);
          }
          d = c = 0;
          if (a.get("text_x") != null) {
            c = this._loadWidth(a, 0, "text_x") | 0;
          } else if (a.get("label_x") != null) {
            c = this._loadWidth(a, 0, "label_x") | 0;
          }
          if (a.get("text_y") != null) {
            d = this._loadHeight(a, 0, "text_y") | 0;
          } else if (a.get("label_y") != null) {
            d = this._loadHeight(a, 0, "label_y") | 0;
          }
          if (e instanceof ff) {
            f = e;
            if (f.label instanceof db) {
              a = f.label;
              m = 0;
              aa = a.group.members;
              while (m < aa.length) {
                a = aa[m];
                ++m;
                if (a instanceof ae) {
                  a.offset.set_x(a.offset.x - c);
                  a.offset.set_y(a.offset.y - d);
                  break;
                }
              }
            } else {
              a = f.label;
              a.offset.set_x(a.offset.x - c);
              a = f.label;
              a.offset.set_y(a.offset.y - d);
              if (h != null) {
                h.offset.set_x(h.offset.x - c);
                h.offset.set_y(h.offset.y - d);
              }
            }
          } else {
            f = e;
            a = f.label;
            a.offset.set_x(a.offset.x - c);
            a = f.label;
            a.offset.set_y(a.offset.y - d);
          }
          if (g != null && h != null) {
            e.set_toggle_label(h);
          }
          if (e instanceof Ic && (g = e, g._assetsToCleanup != null)) {
            m = 0;
            aa = g._assetsToCleanup;
            while (m < aa.length) {
              g = aa[m];
              ++m;
              this.addToCleanup(g);
            }
          }
          return e;
        },
        _loadRegion: function (a) {
          var b = this.calcMaxMinSize(a);
          var c = this._loadWidth(a) | 0;
          var d = this._loadHeight(a) | 0;
          if (b != null) {
            d = F.conformToBounds(new kb(c, d), b);
            c = d.x | 0;
            d = d.y | 0;
          }
          a = F.xml_bool(a, "visible", true);
          c = new sh(0, 0, c, d);
          c.set_visible(a);
          return c;
        },
        _load9SliceSprite: function (a, b) {
          if (b == null) {
            b = "";
          }
          var c = this.getResizeRatio(a);
          var d = this._loadColor(a);
          var e = c.x;
          var f = this._loadCompass(a, "resize_point");
          c = c.y | 0;
          var k = this.calcMaxMinSize(a);
          var r = "";
          if (a.get("src") != null) {
            r = a.get("src");
            if (r == "" || r == null) {
              r = "";
            } else {
              r = F.gfx(r);
              try {
                if (!W.exists(r, "IMAGE")) {
                  throw K.thrown("couldn't load bmp \"src\"");
                }
              } catch (m) {
                Na.lastError = m;
                var n = K.caught(m).unwrap();
                if (typeof n == "string") {
                  g.log.advanced("FlxUI: U.xml_gfx() : " + n, Ba.ERROR, true);
                } else {
                  throw m;
                }
              }
            }
          }
          if (n = cb.resolve(a, "scale_src")) {
            var J = r;
            r = this.loadScaledSrc(a, "src", "scale_src");
            if (r != J) {
              this.addToCleanup(J);
            }
          }
          if (r == "") {
            r = null;
          }
          if (r == null && b == "tab_menu") {
            r = "flixel/flixel-ui/img/chrome_flat.png";
          }
          b = this._loadWidth(a) | 0;
          J = this._loadHeight(a) | 0;
          if (k != null) {
            if (b < k.min_width) {
              b = k.min_width | 0;
            } else if (b > k.max_width) {
              b = k.max_width;
            }
            if (J < k.min_height) {
              J = k.min_height | 0;
            } else if (J > k.max_height) {
              J = k.max_height | 0;
            }
          }
          if (b == 0 || J == 0) {
            return null;
          }
          k = new ea(0, 0, b, J);
          b = Yb.toIntArray(F.xml_str(a, "slice9"));
          J = "";
          var h = r;
          if (n) {
            b = this.load9SliceSprite_scaleSub(b, a, r);
            J = r;
            h = g.bitmap._cache.h[r];
          }
          r = F.xml_bool(a, "smooth", false);
          n = 0;
          switch (F.xml_str(a, "tile", true, "")) {
            case "h":
            case "horizontal":
              n = 16;
              break;
            case "v":
            case "vertical":
              n = 1;
              break;
            case "all":
            case "both":
            case "hv":
            case "true":
            case "vh":
              n = 17;
          }
          return new ba(0, 0, h, k, b, n, r, J, e, f, c, false, d);
        },
        load9SliceSprite_scaleSub: function (a, b, c, d) {
          if (d == null) {
            d = "src";
          }
          var e = "";
          if (b.get(d) != null) {
            e = b.get(d);
            if (e == "" || e == null) {
              e = "";
            } else {
              e = F.gfx(e);
              try {
                if (!W.exists(e, "IMAGE")) {
                  throw K.thrown("couldn't load bmp \"" + d + "\"");
                }
              } catch (k) {
                Na.lastError = k;
                b = K.caught(k).unwrap();
                if (typeof b == "string") {
                  g.log.advanced("FlxUI: U.xml_gfx() : " + b, Ba.ERROR, true);
                } else {
                  throw k;
                }
              }
            }
          }
          if (c == e) {
            return a;
          }
          c = g.bitmap._cache.h[c] != null ? g.bitmap._cache.h[c].bitmap : null;
          if (c == null) {
            c = W.getBitmapData(e);
          }
          e = W.getBitmapData(e, false);
          b = c.width / e.width;
          d = c.height / e.height;
          if (Math.abs(1 - b) <= 0.001 && Math.abs(1 - d) <= 0.001) {
            return a;
          }
          if (a != null) {
            a[0] = a[0] * b | 0;
            a[1] = a[1] * d | 0;
            var f = e.height - a[3];
            a[2] = c.width - ((e.width - a[2]) * b | 0) | 0;
            a[3] = c.height - (f * d | 0) | 0;
          }
          return a;
        },
        _loadBox: function (a) {
          var b = this._loadWidth(a, 1, "thickness") | 0;
          var c = this.calcMaxMinSize(a);
          if (c == null) {
            c = {
              min_width: -Infinity,
              min_height: -Infinity,
              max_width: Infinity,
              max_height: Infinity
            };
          }
          var d = this._loadWidth(a) | 0;
          var e = this._loadHeight(a) | 0;
          if (c != null) {
            if (d < c.min_width) {
              d = c.min_width | 0;
            } else if (d > c.max_width) {
              d = c.max_width | 0;
            }
            if (e < c.min_height) {
              e = c.max_height | 0;
            } else if (e > c.max_height) {
              e = c.max_height | 0;
            }
          }
          a = F.xml_str(a, "color", true, "0xff000000");
          c = 0;
          if (a != "" && (c = xb.fromString(a), c == null)) {
            throw K.thrown("U.parseHex() unable to parse hex String " + a);
          }
          a = new Bc(0, 0);
          var f = d + "x" + e + ":" + c + ":" + b;
          if (g.bitmap._cache.h[f] != null) {
            a.loadGraphic(f);
          } else {
            a.makeGraphic(d, e, c, false, f);
            b = new ea(b, b, d - b * 2, e - b * 2);
            a.graphic.bitmap.fillRect(b, 0);
          }
          return a;
        },
        _loadLine: function (a) {
          var b = F.xml_str(a, "axis", true, "horizontal");
          var c = this._loadWidth(a, -1, "thickness") | 0;
          var d = this.calcMaxMinSize(a);
          if (d == null) {
            d = {
              min_width: 1,
              min_height: 1,
              max_width: Infinity,
              max_height: Infinity
            };
          }
          switch (b) {
            case "h":
            case "horizontal":
            case "horz":
              d.max_height = c;
              d.min_height = c;
              break;
            case "v":
            case "vert":
            case "vertical":
              d.max_width = c;
              d.min_width = c;
          }
          var e = this._loadWidth(a) | 0;
          var f = this._loadHeight(a) | 0;
          if (d != null) {
            if (e < d.min_width) {
              e = d.min_width | 0;
            } else if (e > d.max_width) {
              e = d.max_width | 0;
            }
            if (f < d.min_height) {
              f = d.max_height | 0;
            } else if (f > d.max_height) {
              f = d.max_height | 0;
            }
          }
          a = F.xml_str(a, "color", true, "0xff000000");
          d = 0;
          if (a != "" && (d = xb.fromString(a), d == null)) {
            throw K.thrown("U.parseHex() unable to parse hex String " + a);
          }
          b = b == "horizontal" ? Lg.HORIZONTAL : Lg.VERTICAL;
          return new ij(0, 0, b, b == Lg.HORIZONTAL ? e : f, c != -1 ? c : b == Lg.HORIZONTAL ? f : e, d);
        },
        _loadBar: function (a) {
          var b = {
            filledColors: null,
            emptyColors: null,
            chunkSize: null,
            gradRotation: null,
            filledColor: null,
            emptyColor: null,
            borderColor: null,
            filledImgSrc: "",
            emptyImgSrc: ""
          };
          var c = this._loadWidth(a, -1) | 0;
          var d = this._loadHeight(a, -1) | 0;
          switch (F.xml_str(a, "fill_direction", true)) {
            case "bottom_to_top":
              var e = Dd.BOTTOM_TO_TOP;
              break;
            case "horizontal_inside_out":
              e = Dd.HORIZONTAL_INSIDE_OUT;
              break;
            case "horizontal_outside_in":
              e = Dd.HORIZONTAL_OUTSIDE_IN;
              break;
            case "left_to_right":
              e = Dd.LEFT_TO_RIGHT;
              break;
            case "right_to_left":
              e = Dd.RIGHT_TO_LEFT;
              break;
            case "top_to_bottom":
              e = Dd.TOP_TO_BOTTOM;
              break;
            case "vertical_inside_out":
              e = Dd.VERTICAL_INSIDE_OUT;
              break;
            case "vertical_outside_in":
              e = Dd.VERTICAL_OUTSIDE_IN;
              break;
            default:
              e = Dd.LEFT_TO_RIGHT;
          }
          var f = F.xml_str(a, "parent_ref", true);
          var k = f != "" ? this.getAsset(f) : null;
          var r = F.xml_str(a, "variable");
          f = F.xml_f(a, "value", -1);
          var n = F.xml_f(a, "min", 0);
          var g = F.xml_f(a, "max", 100);
          if (f == -1) {
            f = g;
          }
          b.borderColor = F.xml_color(a, "border_color");
          var h = b.borderColor != null;
          b.filledColor = F.xml_color(a, "filled_color");
          if (b.filledColor == null) {
            b.filledColor = F.xml_color(a, "color");
          }
          b.emptyColor = F.xml_color(a, "empty_color");
          b.filledColors = F.xml_colorArray(a, "filled_colors");
          b.emptyColors = F.xml_colorArray(a, "empty_colors");
          if (b.filledColors == null) {
            b.filledColors = F.xml_colorArray(a, "colors");
          }
          b.filledImgSrc = this.loadScaledSrc(a, "src_filled");
          b.emptyImgSrc = this.loadScaledSrc(a, "src_empty");
          if (b.filledImgSrc == "") {
            b.filledImgSrc = this.loadScaledSrc(a, "src");
          }
          b.chunkSize = F.xml_i(a, "chunk_size", 1);
          b.gradRotation = F.xml_i(a, "rotation", 90);
          if (b.filledImgSrc == "" && b.filledColor == null && b.filledColors == null) {
            b.filledColor = -65536;
          }
          a = c == -1 && d == -1 ? new ai(0, 0, e, 100, 10, k, r, n, g, h) : new ai(0, 0, e, c, d, k, r, n, g, h);
          a.set_style(b);
          a.resize(a.barWidth, a.barHeight);
          a.set_value(f);
          return a;
        },
        _loadSprite: function (a) {
          var b = this.loadScaledSrc(a);
          var c = this.calcMaxMinSize(a);
          var d = this.getResizeRatio(a, -1);
          var e = d.x;
          d = d.y | 0;
          var f = this._loadCompass(a, "resize_point");
          var k = this._loadWidth(a, -1) | 0;
          var r = this._loadHeight(a, -1) | 0;
          if (c != null) {
            if (k < c.min_width) {
              k = c.min_width | 0;
            } else if (k > c.max_width) {
              k = c.max_width | 0;
            }
            if (r < c.min_height) {
              r = c.max_height | 0;
            } else if (r > c.max_height) {
              r = c.max_height | 0;
            }
          }
          if (b != "") {
            if (k == -1 && r == -1) {
              a = new Bc(0, 0, b);
            } else {
              if (e != -1 && (k == -1 || r == -1)) {
                if (d == -1) {
                  if (k == -1) {
                    d = 0;
                  }
                  if (r == -1) {
                    d = 1;
                  }
                }
                if (d == 1) {
                  r = 1 / e * k;
                } else if (d == 0) {
                  k = 1 / e * r;
                }
              }
              b = this.loadSmooth(a, true);
              a = new Bc(0, 0, F.loadScaledImage(F.xml_str(a, "src"), k, r, b));
            }
          } else {
            a = F.xml_str(a, "color");
            b = 0;
            if (a != "" && (b = xb.fromString(a), b == null)) {
              throw K.thrown("U.parseHex() unable to parse hex String " + a);
            }
            a = new Bc(0, 0);
            a.makeGraphic(k, r, b);
          }
          a.set_resize_point(f);
          a.set_resize_ratio(e);
          a.resize_ratio_axis = d;
          return a;
        },
        loadSmooth: function (a, b) {
          b = b ? "true" : "false";
          var c = F.xml_str(a, "smooth", true, b);
          if (c == "") {
            c = F.xml_str(a, "antialias", true, b);
          }
          return F.boolify(c);
        },
        loadScaledSrc: function (a, b, c, d, e) {
          if (e == null) {
            e = 1;
          }
          if (d == null) {
            d = 1;
          }
          if (c == null) {
            c = "scale";
          }
          if (b == null) {
            b = "src";
          }
          var f = F.xml_str(a, b);
          if (cb.resolve(a, c)) {
            for (var k = 0, r = fc.resolve(a, c); k < r.length;) {
              c = r[k];
              ++k;
              var n = F.xml_f(c, "screen_ratio", -1);
              var J = F.xml_f(c, "tolerance", 0.1);
              var h = g.width / g.height;
              if (n < 0 || n > 0 && Math.abs(n - h) <= J) {
                k = F.xml_str(c, "suffix");
                k = f + k;
                J = -1;
                r = this.loadSmooth(c, true);
                n = this._loadHeight(c, -1, "to_height");
                if (n != -1) {
                  h = F.getBmp(F.gfx(f));
                  if (h != null) {
                    J = n / h.height;
                  }
                } else {
                  J = this._loadScale(c, -1);
                  if (J == -1) {
                    J = this._loadScale(c, -1, "value");
                  }
                }
                n = J != -1 ? J : this._loadScaleX(c, -1);
                J = J != -1 ? J : this._loadScaleY(c, -1);
                if (n > 0 && J > 0) {
                  if (n <= 0) {
                    n = 1;
                  }
                  if (J <= 0) {
                    J = 1;
                  }
                  h = this._loadWidth(c, -1);
                  var m = this._loadHeight(c, -1);
                  if (h == -1 || m == -1) {
                    c = W.getBitmapData(F.gfx(f));
                    h = c.width;
                    m = c.height;
                  }
                  h *= n;
                  m *= J;
                } else {
                  h = this._loadWidth(c, -1);
                  m = this._loadHeight(c, -1);
                }
                if (h != 0 && m != 0) {
                  if (e > 1 || d > 1) {
                    c = W.getBitmapData(F.gfx(f));
                    d = F.scaleAndStoreTileset(F.gfx(k), J, c.width / d | 0, c.height / e | 0, h | 0, m / e | 0, r);
                    this.addToScaledAssets(d);
                    return d;
                  }
                  a = F.loadScaledImage(k, h, m, r);
                  this.addToScaledAssets(a);
                  return a;
                }
                break;
              }
            }
          }
          d = "";
          if (a.get(b) != null) {
            d = a.get(b);
            if (d == "" || d == null) {
              d = "";
            } else {
              d = F.gfx(d);
              try {
                if (!W.exists(d, "IMAGE")) {
                  throw K.thrown("couldn't load bmp \"" + b + "\"");
                }
              } catch (aa) {
                Na.lastError = aa;
                r = K.caught(aa).unwrap();
                if (typeof r == "string") {
                  g.log.advanced("FlxUI: U.xml_gfx() : " + r, Ba.ERROR, true);
                } else {
                  throw aa;
                }
              }
            }
          }
          return d;
        },
        _getAnchorPos: function (a, b, c) {
          switch (c) {
            case "":
              break;
            case "center":
              if (b == "x") {
                return this.screenWidth() / 2;
              }
              if (b == "y") {
                return this.screenHeight() / 2;
              }
              break;
            case "bottom":
            case "down":
              return this.screenHeight();
            case "left":
              break;
            case "right":
              return this.screenWidth();
            case "top":
            case "up":
              break;
            default:
              a = F.perc_to_float(c);
              if (!isNaN(a)) {
                if (b == "x") {
                  return a * this.screenWidth();
                }
                if (b == "y") {
                  return a * this.screenHeight();
                }
              } else if (new sa("[\\w]+\\.[\\w]+", "").match(c)) {
                a = "";
                if (b == "x") {
                  a = "w";
                }
                if (b == "y") {
                  a = "h";
                }
                return this._getStretch(1, a, c);
              }
          }
          return 0;
        },
        getRound: function (a, b) {
          if (b == null) {
            b = "";
          }
          switch (F.xml_str(a, "round", true, b)) {
            case "1":
            case "ceil":
            case "ceiling":
            case "up":
              return th.Ceil;
            case "-1":
            case "down":
            case "floor":
              return th.Floor;
            case "0":
            case "round":
            case "true":
              return th.Round;
          }
          return th.None;
        },
        doRound: function (a, b) {
          switch (b._hx_index) {
            case 0:
              return Math.floor(a);
            case 1:
              return Math.ceil(a);
            case 2:
              return Math.round(a);
            case 3:
              return a;
          }
        },
        calcMaxMinSize: function (a, b, c) {
          var d = 0;
          var e = 0;
          var f = Infinity;
          var k = Infinity;
          if (cb.resolve(a, "exact_size")) {
            var r = 0;
            for (a = fc.resolve(a, "exact_size"); r < a.length;) {
              f = a[r];
              ++r;
              d = F.xml_str(f, "width");
              e = F.xml_str(f, "height");
              var n = this.getRound(f);
              d = this.doRound(this._getDataSize("w", d, 0), n);
              e = this.doRound(this._getDataSize("h", e, 0), n);
              f = this.doRound(d, n);
              k = this.doRound(e, n);
            }
          } else if (cb.resolve(a, "min_size")) {
            r = 0;
            a = fc.resolve(a, "min_size");
            while (r < a.length) {
              n = a[r];
              ++r;
              var g = F.xml_str(n, "width");
              var h = F.xml_str(n, "height");
              n = this.getRound(n);
              g = this.doRound(this._getDataSize("w", g, 0), n);
              n = this.doRound(this._getDataSize("h", h, 0), n);
              if (g > d) {
                d = g;
              }
              if (n > e) {
                e = n;
              }
            }
          } else if (cb.resolve(a, "max_size")) {
            r = 0;
            a = fc.resolve(a, "max_size");
            while (r < a.length) {
              n = a[r];
              ++r;
              g = F.xml_str(n, "width");
              h = F.xml_str(n, "height");
              n = this.getRound(n);
              g = this.doRound(this._getDataSize("w", g, Infinity), n);
              n = this.doRound(this._getDataSize("h", h, Infinity), n);
              if (g < f) {
                f = g;
              }
              if (n < k) {
                k = n;
              }
            }
          } else {
            return null;
          }
          if (b != null) {
            if (b > d) {
              d = b;
            }
            if (b < f) {
              f = b;
            }
          }
          if (c != null) {
            if (c > e) {
              e = c;
            }
            if (c < k) {
              k = c;
            }
          }
          if (f <= 0) {
            f = Infinity;
          }
          if (k <= 0) {
            k = Infinity;
          }
          return {
            min_width: d,
            min_height: e,
            max_width: f,
            max_height: k
          };
        },
        _getDataSize: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (F.isStrNum(b)) {
            return parseFloat(b);
          }
          var d = F.perc_to_float(b);
          if (isNaN(d)) {
            if (b.indexOf("stretch:") == 0) {
              b = w.replace(b, "stretch:", "");
              d = b.split(",");
              b = this._getStretch(0, a, d[0]);
              a = this._getStretch(1, a, d[1]);
              if (b != -1 && a != -1) {
                return a - b;
              } else {
                return c;
              }
            }
            if (b.indexOf("asset:") == 0) {
              b = w.replace(b, "asset:", "");
              return c = this._getStretch(1, a, b);
            }
            if (new sa("[\\w]+\\.[\\w]+", "").match(b)) {
              return c = this._getStretch(1, a, b);
            }
            d = "";
            if (b.indexOf("pt") == b.length - 2) {
              d = M.substr(b, 0, b.length - 2);
            }
            if (d != "" && F.isStrNum(d)) {
              b = parseFloat(d);
              switch (a) {
                case "h":
                case "height":
                  return this._pointY * b;
                case "w":
                case "width":
                  return this._pointX * b;
              }
            }
          } else {
            switch (a) {
              case "h":
              case "height":
                return this.screenHeight() * d;
              case "scale":
              case "scale_x":
              case "scale_y":
                return d;
              case "w":
              case "width":
                return this.screenWidth() * d;
            }
          }
          return c;
        },
        _getOperation: function (a) {
          for (var b = ["+", "-", "*", "/", "^"], c = "", d = Infinity, e = 0; e < b.length;) {
            var f = b[e];
            ++e;
            var k = a.indexOf(f);
            if (k != -1 && k < d) {
              d = k;
              c = f;
            }
          }
          d = false;
          if (c != "" && a.indexOf(c) != -1 && (e = a.indexOf(c), e != a.length - 1 && (b = M.substr(a, 0, e), a = M.substr(a, e + 1, a.length - (e + 1)), e = a.indexOf("pt"), e != -1 && e == a.length - 2 ? (d = w.replace(a, "pt", ""), e = parseFloat(d), d = true) : e = parseFloat(a), isNaN(e) && (e = this.getAssetProperty(1, "", a)), e != 0 || a == "0"))) {
            return [b, c, e, d];
          } else {
            return null;
          }
        },
        _doOperation: function (a, b, c) {
          switch (b) {
            case "*":
              return a * c;
            case "+":
              return a + c;
            case "-":
              return a - c;
            case "/":
              return a / c;
            case "^":
              return Math.pow(a, c);
          }
          return a;
        },
        _getStretch: function (a, b, c) {
          var d = "";
          var e = 0;
          var f = this._getOperation(c);
          if (f != null && (c = f[0], d = f[1], e = f[2], f = f[3])) {
            switch (b) {
              case "h":
              case "height":
                e *= this._pointY;
                break;
              case "w":
              case "width":
                e *= this._pointX;
                break;
              default:
                e *= this._pointY;
            }
          }
          a = this.getAssetProperty(a, b, c);
          if (a != -1 && d != "") {
            a = this._doOperation(a, d, e);
          }
          return a;
        },
        getAssetProperty: function (a, b, c) {
          var d = "";
          if (c.indexOf(".") != -1) {
            d = c.split(".");
            c = d[0];
            d = d[1];
          }
          var e = this.getAsset(c);
          var f = 0;
          if (e == null) {
            switch (c) {
              case "bottom":
              case "down":
                f = this.screenHeight();
                break;
              case "left":
                f = 0;
                break;
              case "right":
                f = this.screenWidth();
                break;
              case "top":
              case "up":
                f = 0;
                break;
              default:
                f = F.isStrNum(c) ? parseFloat(c) : -1;
            }
          } else {
            switch (b) {
              case "h":
              case "height":
                if (d == "") {
                  if (a == 0) {
                    f = e.y + e.get_height();
                  }
                  if (a == 1) {
                    f = e.y;
                  }
                } else {
                  switch (d) {
                    case "center":
                      f = e.y + e.get_height() / 2;
                      break;
                    case "bottom":
                    case "down":
                      f = e.y + e.get_height();
                      break;
                    case "halfheight":
                      f = e.get_height() / 2;
                      break;
                    case "halfwidth":
                      f = e.get_width() / 2;
                      break;
                    case "height":
                      f = e.get_height();
                      break;
                    case "right":
                      f = e.x + e.get_width();
                      break;
                    case "width":
                      f = e.get_width();
                      break;
                    case "left":
                    case "x":
                      f = e.x;
                      break;
                    case "top":
                    case "up":
                    case "y":
                      f = e.y;
                  }
                }
                break;
              case "w":
              case "width":
                if (d == "") {
                  if (a == 0) {
                    f = e.x + e.get_width();
                  }
                  if (a == 1) {
                    f = e.x;
                  }
                } else {
                  switch (d) {
                    case "center":
                      f = e.x + e.get_width() / 2;
                      break;
                    case "bottom":
                    case "down":
                      f = e.y + e.get_height();
                      break;
                    case "halfheight":
                      f = e.get_height() / 2;
                      break;
                    case "halfwidth":
                      f = e.get_width() / 2;
                      break;
                    case "height":
                      f = e.get_height();
                      break;
                    case "right":
                      f = e.x + e.get_width();
                      break;
                    case "width":
                      f = e.get_width();
                      break;
                    case "left":
                    case "x":
                      f = e.x;
                      break;
                    case "top":
                    case "up":
                    case "y":
                      f = e.y;
                  }
                }
                break;
              default:
                switch (d) {
                  case "centerx":
                    f = e.x + e.get_width() / 2;
                    break;
                  case "centery":
                    f = e.y + e.get_height() / 2;
                    break;
                  case "bottom":
                  case "down":
                    f = e.y + e.get_height();
                    break;
                  case "halfheight":
                    f = e.get_height() / 2;
                    break;
                  case "halfwidth":
                    f = e.get_width() / 2;
                    break;
                  case "height":
                    f = e.get_height();
                    break;
                  case "right":
                    f = e.x + e.get_width();
                    break;
                  case "width":
                    f = e.get_width();
                    break;
                  case "left":
                  case "x":
                    f = e.x;
                    break;
                  case "top":
                  case "up":
                  case "y":
                    f = e.y;
                }
            }
          }
          return f;
        },
        _loadCursor: function (a) {
          if (cb.resolve(a, "list")) {
            if (this.cursorLists == null) {
              this.cursorLists = [];
            }
            var b = 0;
            for (a = fc.resolve(a, "list"); b < a.length;) {
              var c = a[b];
              ++b;
              c = F.xml_str(c, "ids").split(",");
              if (c != null && c.length > 0) {
                var d = [];
                for (var e = 0; e < c.length;) {
                  var f = c[e];
                  ++e;
                  f = this.getAsset(f);
                  if (f != null) {
                    d.push(f);
                  }
                }
                this.cursorLists.push(d);
              }
            }
          }
        },
        _loadPosition: function (a, b) {
          var c = this._loadWidth(a, 0, "x");
          var d = this._loadHeight(a, 0, "y");
          var e = F.xml_bool(a, "center_x");
          var f = F.xml_bool(a, "center_y");
          var k = F.xml_str(a, "center_on");
          var r = F.xml_str(a, "center_on_x");
          var n = F.xml_str(a, "center_on_y");
          var J = "";
          var h = "";
          var m = 0;
          var aa = 0;
          var p = "";
          var l = "";
          if (cb.resolve(a, "anchor")) {
            J = F.xml_str(Fb.resolve(a, "anchor"), "x");
            h = F.xml_str(Fb.resolve(a, "anchor"), "y");
            p = this.getRound(Fb.resolve(a, "anchor"));
            m = this._getAnchorPos(b, "x", J);
            aa = this._getAnchorPos(b, "y", h);
            m = this.doRound(m, p);
            aa = this.doRound(aa, p);
            p = F.xml_str(Fb.resolve(a, "anchor"), "x-flush", true);
            l = F.xml_str(Fb.resolve(a, "anchor"), "y-flush", true);
          }
          if (J != "" || h != "") {
            switch (p) {
              case "center":
                m -= b.get_width() / 2;
                break;
              case "right":
                m -= b.get_width();
            }
            switch (l) {
              case "bottom":
              case "down":
                aa -= b.get_height();
                break;
              case "center":
                aa -= b.get_height() / 2;
            }
            if (J != "") {
              b.set_x(m);
            }
            if (h != "") {
              b.set_y(aa);
            }
          }
          if (e || f) {
            a = e;
            if (f == null) {
              f = true;
            }
            if (a == null) {
              a = true;
            }
            if (a) {
              b.set_x((g.width - b.get_width()) / 2);
            }
            if (f) {
              b.set_y((g.height - b.get_height()) / 2);
            }
          }
          if (k != "") {
            k = this.getAsset(k);
            if (k != null) {
              k = ta.__cast(k, hc);
              r = ta.__cast(b, hc);
              r.set_x(k.x + (k.get_width() - r.get_width()) / 2);
              r.set_y(k.y + (k.get_height() - r.get_height()) / 2);
            }
          } else {
            if (r != "") {
              k = this.getAsset(r);
              if (k != null) {
                k = ta.__cast(k, hc);
                r = ta.__cast(b, hc);
                f = true;
                a = false;
                if (a == null) {
                  a = true;
                }
                if (f == null) {
                  f = true;
                }
                if (f) {
                  r.set_x(k.x + (k.get_width() - r.get_width()) / 2);
                }
                if (a) {
                  r.set_y(k.y + (k.get_height() - r.get_height()) / 2);
                }
              }
            }
            if (n != "") {
              k = this.getAsset(n);
              if (k != null) {
                k = ta.__cast(k, hc);
                r = ta.__cast(b, hc);
                f = false;
                a = true;
                if (a == null) {
                  a = true;
                }
                if (f == null) {
                  f = true;
                }
                if (f) {
                  r.set_x(k.x + (k.get_width() - r.get_width()) / 2);
                }
                if (a) {
                  r.set_y(k.y + (k.get_height() - r.get_height()) / 2);
                }
              }
            }
          }
          a = c;
          f = d;
          if (f == null) {
            f = 0;
          }
          if (a == null) {
            a = 0;
          }
          b.set_x(b.x + a);
          b.set_y(b.y + f);
        },
        _loadBorder: function (a) {
          var b = df.fromXML(a);
          var c = this.getRound(a, "floor");
          a = this._getDataSize("h", F.xml_str(a, "border_size"), 1);
          c = this.doRound(a, c) | 0;
          b.size = c;
          return b;
        },
        _loadColor: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = "color";
          }
          var d = F.xml_str(a, b);
          if (d == "") {
            if (a.nodeType != X.Element) {
              throw K.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
            }
            b = a.nodeName == b;
          } else {
            b = false;
          }
          if (b) {
            d = F.xml_str(a, "value");
          }
          a = c;
          if (d != "" && (a = xb.fromString(d), a == null)) {
            throw K.thrown("U.parseHex() unable to parse hex String " + d);
          }
          return a;
        },
        _loadFontDef: function (a) {
          var b = od.fromXML(a);
          a = this._loadHeight(a, 8, "size") | 0;
          b.format.size = Ma.fontSize(b.file, a);
          b.set_size(a);
          return b;
        },
        _loadFontFace: function (a) {
          var b = F.xml_str(a, "font");
          a = F.xml_str(a, "style");
          var c = null;
          if (b != "") {
            c = Ma.font(b, a);
          }
          return c;
        },
        _onFinishLoad: function () {
          if (this._ptr != null) {
            this._ptr.getEvent("finish_load", this, null);
          }
        },
        getText: function (a, b, c, d) {
          if (d == null) {
            d = "";
          }
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = "data";
          }
          if (this._ptr_tongue != null) {
            a = this._ptr_tongue.get(a, b, c);
            return this.formatFromCode(a, d);
          } else if (this.getTextFallback != null) {
            a = this.getTextFallback(a, b, c);
            return this.formatFromCode(a, d);
          } else {
            return a;
          }
        },
        formatFromCode: function (a, b) {
          switch (b) {
            case "fu":
              return F.FU(a);
            case "fu_":
              return F.FU_(a);
            case "l":
              return a.toLowerCase();
            case "u":
              return a.toUpperCase();
          }
          return a;
        },
        formatButtonText: function (a, b) {
          if (a != null && cb.resolve(a, "text")) {
            a = Fb.resolve(a, "text");
            var c = F.xml_str(a, "use_def", true);
            var d = null;
            if (c != "") {
              d = this.getDefinition(c);
            }
            var e = Ma.consolidateData(a, d);
            var f = this._loadFontFace(e);
            var k = this._loadHeight(e, 8, "size", "floor") | 0;
            a = this._loadColor(e);
            var r = F.xml_f(e, "width");
            var n = this._loadBorder(e);
            var g = F.xml_str(e, "align", true);
            if (g == "") {
              g = null;
            }
            var h = c = null;
            var m = null;
            if (b instanceof zb == 0) {
              if (g == "" || g == null) {
                g = "center";
              }
            } else {
              b = b.button;
              g = "left";
            }
            if (b != null) {
              if (b instanceof vd) {
                h = b;
                c = h.label;
              } else if (b instanceof ff) {
                m = b;
                if (m.label instanceof Q) {
                  c = m.label;
                } else if (m.label instanceof db) {
                  d = 0;
                  for (var aa = m.label.group.members; d < aa.length;) {
                    var p = aa[d];
                    ++d;
                    if (p instanceof Q) {
                      c = p;
                      break;
                    }
                  }
                }
              }
              b.up_color = a;
              b.down_color = 0;
              b.over_color = 0;
            }
            if (c != null) {
              if (r != 0) {
                c.set_width(r);
                c.resetHelpers();
              }
              if (h != null) {
                h.setLabelFormat(f, k, a, g);
              } else {
                c.setFormat(f, k, a, g);
              }
              c.set_borderStyle(n.style);
              c.set_borderColor(n.color);
              c.set_borderSize(n.size);
              c.set_borderQuality(n.quality);
              if (c instanceof ae) {
                c.drawFrame();
              }
              if (h != null) {
                h.autoCenterLabel();
              }
              if (m != null) {
                m.autoCenterLabel();
              }
            }
            d = 0;
            for (aa = fc.resolve(e, "color"); d < aa.length;) {
              k = aa[d];
              ++d;
              a = this._loadColor(k);
              e = F.xml_bool(k, "visible", true);
              f = F.xml_name(k);
              k = F.xml_bool(k, "toggle");
              switch (f) {
                case "active":
                case "hilight":
                case "hover":
                case "over":
                  if (k) {
                    b.over_toggle_color = a;
                    b.over_toggle_visible = e;
                  } else {
                    b.over_color = a;
                    b.over_visible = e;
                  }
                  break;
                case "":
                case "inactive":
                case "normal":
                case "up":
                  if (k) {
                    b.up_toggle_color = a;
                    b.up_toggle_visible = e;
                  } else {
                    b.up_color = a;
                    b.up_visible = e;
                  }
                  break;
                case "down":
                case "pressed":
                case "pushed":
                  if (k) {
                    b.down_toggle_color = a;
                    b.down_toggle_visible = e;
                  } else {
                    b.down_color = a;
                    b.down_visible = e;
                  }
              }
            }
            if (b.over_color == 0) {
              b.over_color = b.up_color;
            }
            if (b.down_color == 0) {
              b.down_color = b.over_color;
            }
            if (b.up_toggle_color == 0) {
              b.up_toggle_color = b.up_color;
            }
            if (b.over_toggle_color == 0) {
              b.over_toggle_color = b.over_color;
            }
            if (b.down_toggle_color == 0) {
              b.down_toggle_color = b.down_color;
            }
            if (c != null) {
              c.set_visible(b.up_visible);
              c.set_color(b.up_color);
            }
            return c;
          }
          return null;
        },
        __class__: Ma,
        __properties__: q(eb.prototype.__properties__, {
          set_focus: "set_focus"
        })
      });
      var th = x["flixel.addons.ui.Rounding"] = {
        __ename__: "flixel.addons.ui.Rounding",
        __constructs__: null,
        Floor: {
          _hx_name: "Floor",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.Rounding",
          toString: p
        },
        Ceil: {
          _hx_name: "Ceil",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.Rounding",
          toString: p
        },
        Round: {
          _hx_name: "Round",
          _hx_index: 2,
          __enum__: "flixel.addons.ui.Rounding",
          toString: p
        },
        None: {
          _hx_name: "None",
          _hx_index: 3,
          __enum__: "flixel.addons.ui.Rounding",
          toString: p
        }
      };
      th.__constructs__ = [th.Floor, th.Ceil, th.Round, th.None];
      function ed() {}
      h["flixel.addons.ui.interfaces.IResizable"] = ed;
      ed.__name__ = "flixel.addons.ui.interfaces.IResizable";
      ed.__isInterface__ = true;
      ed.prototype = {
        __class__: ed,
        __properties__: {
          get_height: "get_height",
          get_width: "get_width"
        }
      };
      function Bc(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._originalKey = "";
        this.resize_ratio_axis = 1;
        this.ptr_owner = null;
        G.call(this, a, b, c);
      }
      h["flixel.addons.ui.FlxUISprite"] = Bc;
      Bc.__name__ = "flixel.addons.ui.FlxUISprite";
      Bc.__interfaces__ = [ed, ud];
      Bc.__super__ = G;
      Bc.prototype = q(G.prototype, {
        set_resize_ratio: function (a) {
          return this.resize_ratio = a;
        },
        set_resize_point: function (a) {
          if (a != null) {
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = fa.pool.get().set(b, c);
            b._inPool = false;
            this.resize_point = b;
            this.resize_point.set_x(a.x);
            this.resize_point.set_y(a.y);
          }
          return this.resize_point;
        },
        resize: function (a, b) {
          var c = this.get_width();
          var d = this.get_height();
          if (this.resize_ratio > 0 && Math.abs(a / b - this.resize_ratio) > 0.0001) {
            if (this.resize_ratio_axis == 1) {
              b = 1 / this.resize_ratio * a;
            } else {
              a = 1 / this.resize_ratio * b;
            }
          }
          if (this._originalKey != "" && this._originalKey != null) {
            a = F.loadScaledImage(this._originalKey, a, b);
            if (a != "" && a != null) {
              this.loadFromScaledGraphic(a);
            }
          }
          c = this.get_width() - c;
          d = this.get_height() - d;
          if (this.resize_point != null) {
            d *= this.resize_point.y;
            this.set_x(this.x - c * this.resize_point.x);
            this.set_y(this.y - d);
          }
        },
        loadGraphic: function (a, b, c, d, e, f) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          a = G.prototype.loadGraphic.call(this, a, b, c, d, e, f);
          this._originalKey = this.graphic.assetsKey;
          if (this._originalKey == null) {
            this._originalKey = this.graphic.key;
          }
          return a;
        },
        destroy: function () {
          this.ptr_owner = null;
          G.prototype.destroy.call(this);
        },
        loadFromScaledGraphic: function (a, b, c, d, e, f) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          G.prototype.loadGraphic.call(this, a, b, c, d, e, f);
        },
        __class__: Bc,
        __properties__: q(G.prototype.__properties__, {
          set_resize_point: "set_resize_point",
          set_resize_ratio: "set_resize_ratio"
        })
      });
      function kb(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
      }
      h["openfl.geom.Point"] = kb;
      kb.__name__ = "openfl.geom.Point";
      kb.prototype = {
        copyFrom: function (a) {
          this.x = a.x;
          this.y = a.y;
        },
        offset: function (a, b) {
          this.x += a;
          this.y += b;
        },
        setTo: function (a, b) {
          this.x = a;
          this.y = b;
        },
        __toLimeVector2: function () {
          if (kb.__limeVector2 == null) {
            kb.__limeVector2 = new Yh();
          }
          var a = kb.__limeVector2;
          a.x = this.x;
          a.y = this.y;
          return kb.__limeVector2;
        },
        __class__: kb
      };
      function ea(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
        this.width = c;
        this.height = d;
      }
      h["openfl.geom.Rectangle"] = ea;
      ea.__name__ = "openfl.geom.Rectangle";
      ea.prototype = {
        clone: function () {
          return new ea(this.x, this.y, this.width, this.height);
        },
        contains: function (a, b) {
          if (a >= this.x && b >= this.y && a < this.get_right()) {
            return b < this.get_bottom();
          } else {
            return false;
          }
        },
        containsPoint: function (a) {
          return this.contains(a.x, a.y);
        },
        copyFrom: function (a) {
          this.x = a.x;
          this.y = a.y;
          this.width = a.width;
          this.height = a.height;
        },
        equals: function (a) {
          if (a == this) {
            return true;
          } else if (a != null && this.x == a.x && this.y == a.y && this.width == a.width) {
            return this.height == a.height;
          } else {
            return false;
          }
        },
        inflate: function (a, b) {
          this.x -= a;
          this.width += a * 2;
          this.y -= b;
          this.height += b * 2;
        },
        offset: function (a, b) {
          this.x += a;
          this.y += b;
        },
        setEmpty: function () {
          this.x = this.y = this.width = this.height = 0;
        },
        setTo: function (a, b, c, d) {
          this.x = a;
          this.y = b;
          this.width = c;
          this.height = d;
        },
        union: function (a) {
          if (this.width == 0 || this.height == 0) {
            return a.clone();
          }
          if (a.width == 0 || a.height == 0) {
            return this.clone();
          }
          var b = this.x > a.x ? a.x : this.x;
          var c = this.get_right() < a.get_right() ? a.get_right() : this.get_right();
          var d = this.y > a.y ? a.y : this.y;
          a = this.get_bottom() < a.get_bottom() ? a.get_bottom() : this.get_bottom();
          return new ea(b, d, c - b, a - d);
        },
        __contract: function (a, b, c, d) {
          if (this.width != 0 || this.height != 0) {
            var e = 0;
            var f = 0;
            var k = 0;
            var r = 0;
            if (this.x < a) {
              e = a - this.x;
            }
            if (this.y < b) {
              f = b - this.y;
            }
            if (this.get_right() > a + c) {
              k = a + c - this.get_right();
            }
            if (this.get_bottom() > b + d) {
              r = b + d - this.get_bottom();
            }
            this.x += e;
            this.y += f;
            this.width += k - e;
            this.height += r - f;
          }
        },
        __expand: function (a, b, c, d) {
          if (this.width == 0 && this.height == 0) {
            this.x = a;
            this.y = b;
            this.width = c;
            this.height = d;
          } else {
            var e = this.get_right();
            var f = this.get_bottom();
            if (this.x > a) {
              this.x = a;
              this.width = e - a;
            }
            if (this.y > b) {
              this.y = b;
              this.height = f - b;
            }
            if (e < a + c) {
              this.width = a + c - this.x;
            }
            if (f < b + d) {
              this.height = b + d - this.y;
            }
          }
        },
        __toLimeRectangle: function () {
          if (ea.__limeRectangle == null) {
            ea.__limeRectangle = new Me();
          }
          ea.__limeRectangle.setTo(this.x, this.y, this.width, this.height);
          return ea.__limeRectangle;
        },
        __transform: function (a, b) {
          var c = b.a * this.x + b.c * this.y;
          var d = c;
          var e = b.b * this.x + b.d * this.y;
          var f = e;
          var k = b.a * (this.x + this.width) + b.c * this.y;
          var r = b.b * (this.x + this.width) + b.d * this.y;
          if (k < c) {
            c = k;
          }
          if (r < e) {
            e = r;
          }
          if (k > d) {
            d = k;
          }
          if (r > f) {
            f = r;
          }
          k = b.a * (this.x + this.width) + b.c * (this.y + this.height);
          r = b.b * (this.x + this.width) + b.d * (this.y + this.height);
          if (k < c) {
            c = k;
          }
          if (r < e) {
            e = r;
          }
          if (k > d) {
            d = k;
          }
          if (r > f) {
            f = r;
          }
          k = b.a * this.x + b.c * (this.y + this.height);
          r = b.b * this.x + b.d * (this.y + this.height);
          if (k < c) {
            c = k;
          }
          if (r < e) {
            e = r;
          }
          if (k > d) {
            d = k;
          }
          if (r > f) {
            f = r;
          }
          a.setTo(c + b.tx, e + b.ty, d - c, f - e);
        },
        get_bottom: function () {
          return this.y + this.height;
        },
        get_left: function () {
          return this.x;
        },
        get_right: function () {
          return this.x + this.width;
        },
        get_top: function () {
          return this.y;
        },
        get_topLeft: function () {
          return new kb(this.x, this.y);
        },
        __class__: ea,
        __properties__: {
          get_topLeft: "get_topLeft",
          get_top: "get_top",
          get_right: "get_right",
          get_left: "get_left",
          get_bottom: "get_bottom"
        }
      };
      function ba(a, b, c, d, e, f, k, r, n, g, h, m, aa) {
        if (aa == null) {
          aa = -1;
        }
        if (m == null) {
          m = false;
        }
        if (h == null) {
          h = 1;
        }
        if (n == null) {
          n = -1;
        }
        if (r == null) {
          r = "";
        }
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = 0;
        }
        this._asset_id = "";
        this._smooth = false;
        this._tile = 0;
        this._slice9 = null;
        this.paintScale9_id = "";
        Bc.call(this, a, b, null);
        this.set_color(aa);
        this._slice9 = e;
        this._tile = f;
        this._smooth = k;
        this._asset_id = "";
        if (c == null) {
          c = "flixel/flixel-ui/img/chrome.png";
        }
        if (typeof c == "string") {
          this._asset_id = c;
          this._raw_pixels = null;
        } else if (c instanceof T) {
          this._asset_id = r;
          this._raw_pixels = c;
        } else if (c instanceof cc) {
          a = c;
          this._asset_id = a.key;
          this._raw_pixels = a.bitmap;
        }
        this.set_resize_ratio(n);
        this.resize_ratio_axis = h;
        if (g != null) {
          this.set_resize_point(g);
        }
        if (m) {
          d = F.applyResize(this.resize_ratio, this.resize_ratio_axis, d.width, d.height);
          this.set_width(d.x);
          this.set_height(d.y);
        } else {
          this.resize(d.width, d.height);
        }
      }
      h["flixel.addons.ui.FlxUI9SliceSprite"] = ba;
      ba.__name__ = "flixel.addons.ui.FlxUI9SliceSprite";
      ba.__interfaces__ = [ud, ed];
      ba.paintScale9 = function (a, b, c, d, e, f, k) {
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = 0;
        }
        if (c != null) {
          if (k == null) {
            var r = F.getBmp(b);
            if (r != null) {
              var n = r.width;
              r = r.height;
            } else {
              r = g.bitmap._cache.h[b];
              n = r.width;
              r = r.height;
            }
          } else {
            n = k.width;
            r = k.height;
          }
          var J = c[0];
          var h = c[1];
          var m = c[2];
          var aa = c[3];
          if (ba._staticRects == null) {
            ba._staticRects = new V();
            var p = ba._staticRects;
            var l = Ha._pool.get();
            var q = 0;
            var t = 0;
            var L = 0;
            var u = 0;
            if (u == null) {
              u = 0;
            }
            if (L == null) {
              L = 0;
            }
            if (t == null) {
              t = 0;
            }
            if (q == null) {
              q = 0;
            }
            l.x = q;
            l.y = t;
            l.width = L;
            l.height = u;
            l._inPool = false;
            p.h["top.left"] = l;
            p = ba._staticRects;
            l = Ha._pool.get();
            u = L = t = q = 0;
            if (u == null) {
              u = 0;
            }
            if (L == null) {
              L = 0;
            }
            if (t == null) {
              t = 0;
            }
            if (q == null) {
              q = 0;
            }
            l.x = q;
            l.y = t;
            l.width = L;
            l.height = u;
            l._inPool = false;
            p.h.top = l;
            p = ba._staticRects;
            l = Ha._pool.get();
            u = L = t = q = 0;
            if (u == null) {
              u = 0;
            }
            if (L == null) {
              L = 0;
            }
            if (t == null) {
              t = 0;
            }
            if (q == null) {
              q = 0;
            }
            l.x = q;
            l.y = t;
            l.width = L;
            l.height = u;
            l._inPool = false;
            p.h["top.right"] = l;
            p = ba._staticRects;
            l = Ha._pool.get();
            u = L = t = q = 0;
            if (u == null) {
              u = 0;
            }
            if (L == null) {
              L = 0;
            }
            if (t == null) {
              t = 0;
            }
            if (q == null) {
              q = 0;
            }
            l.x = q;
            l.y = t;
            l.width = L;
            l.height = u;
            l._inPool = false;
            p.h.left = l;
            p = ba._staticRects;
            l = Ha._pool.get();
            u = L = t = q = 0;
            if (u == null) {
              u = 0;
            }
            if (L == null) {
              L = 0;
            }
            if (t == null) {
              t = 0;
            }
            if (q == null) {
              q = 0;
            }
            l.x = q;
            l.y = t;
            l.width = L;
            l.height = u;
            l._inPool = false;
            p.h.middle = l;
            p = ba._staticRects;
            l = Ha._pool.get();
            u = L = t = q = 0;
            if (u == null) {
              u = 0;
            }
            if (L == null) {
              L = 0;
            }
            if (t == null) {
              t = 0;
            }
            if (q == null) {
              q = 0;
            }
            l.x = q;
            l.y = t;
            l.width = L;
            l.height = u;
            l._inPool = false;
            p.h.right = l;
            p = ba._staticRects;
            l = Ha._pool.get();
            u = L = t = q = 0;
            if (u == null) {
              u = 0;
            }
            if (L == null) {
              L = 0;
            }
            if (t == null) {
              t = 0;
            }
            if (q == null) {
              q = 0;
            }
            l.x = q;
            l.y = t;
            l.width = L;
            l.height = u;
            l._inPool = false;
            p.h["bottom.left"] = l;
            p = ba._staticRects;
            l = Ha._pool.get();
            u = L = t = q = 0;
            if (u == null) {
              u = 0;
            }
            if (L == null) {
              L = 0;
            }
            if (t == null) {
              t = 0;
            }
            if (q == null) {
              q = 0;
            }
            l.x = q;
            l.y = t;
            l.width = L;
            l.height = u;
            l._inPool = false;
            p.h.bottom = l;
            p = ba._staticRects;
            l = Ha._pool.get();
            u = L = t = q = 0;
            if (u == null) {
              u = 0;
            }
            if (L == null) {
              L = 0;
            }
            if (t == null) {
              t = 0;
            }
            if (q == null) {
              q = 0;
            }
            l.x = q;
            l.y = t;
            l.width = L;
            l.height = u;
            l._inPool = false;
            p.h["bottom.right"] = l;
          }
          l = ba._staticRects.h["top.left"];
          t = q = 0;
          L = J;
          u = h;
          if (u == null) {
            u = 0;
          }
          if (L == null) {
            L = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (q == null) {
            q = 0;
          }
          l.x = q;
          l.y = t;
          l.width = L;
          l.height = u;
          l = ba._staticRects.h.top;
          q = J;
          t = 0;
          L = m - J;
          u = h;
          if (u == null) {
            u = 0;
          }
          if (L == null) {
            L = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (q == null) {
            q = 0;
          }
          l.x = q;
          l.y = t;
          l.width = L;
          l.height = u;
          l = ba._staticRects.h["top.right"];
          q = m;
          t = 0;
          L = n - m;
          u = h;
          if (u == null) {
            u = 0;
          }
          if (L == null) {
            L = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (q == null) {
            q = 0;
          }
          l.x = q;
          l.y = t;
          l.width = L;
          l.height = u;
          l = ba._staticRects.h.left;
          q = 0;
          t = h;
          L = J;
          u = aa - h;
          if (u == null) {
            u = 0;
          }
          if (L == null) {
            L = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (q == null) {
            q = 0;
          }
          l.x = q;
          l.y = t;
          l.width = L;
          l.height = u;
          l = ba._staticRects.h.middle;
          q = J;
          t = h;
          L = m - J;
          u = aa - h;
          if (u == null) {
            u = 0;
          }
          if (L == null) {
            L = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (q == null) {
            q = 0;
          }
          l.x = q;
          l.y = t;
          l.width = L;
          l.height = u;
          l = ba._staticRects.h.right;
          q = m;
          t = h;
          L = n - m;
          u = aa - h;
          if (u == null) {
            u = 0;
          }
          if (L == null) {
            L = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (q == null) {
            q = 0;
          }
          l.x = q;
          l.y = t;
          l.width = L;
          l.height = u;
          l = ba._staticRects.h["bottom.left"];
          q = 0;
          t = aa;
          L = J;
          u = r - aa;
          if (u == null) {
            u = 0;
          }
          if (L == null) {
            L = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (q == null) {
            q = 0;
          }
          l.x = q;
          l.y = t;
          l.width = L;
          l.height = u;
          l = ba._staticRects.h.bottom;
          q = J;
          t = aa;
          L = m - J;
          u = r - aa;
          if (u == null) {
            u = 0;
          }
          if (L == null) {
            L = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (q == null) {
            q = 0;
          }
          l.x = q;
          l.y = t;
          l.width = L;
          l.height = u;
          l = ba._staticRects.h["bottom.right"];
          q = m;
          t = aa;
          L = n - m;
          u = r - aa;
          if (u == null) {
            u = 0;
          }
          if (L == null) {
            L = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (q == null) {
            q = 0;
          }
          l.x = q;
          l.y = t;
          l.width = L;
          l.height = u;
          if (ba.cacheCounter == null) {
            ba.cacheCounter = new V();
          }
          c = ba.makePaintScale9Id(b, c, d);
          n = ba.cacheCounter.h[c];
          if (n == null) {
            n = {
              useCount: 0,
              subKeys: []
            };
            for (r = 0; r < 9;) {
              switch (r++) {
                case 0:
                  l = ba._staticRects.h["top.left"];
                  break;
                case 1:
                  l = ba._staticRects.h.top;
                  break;
                case 2:
                  l = ba._staticRects.h["top.right"];
                  break;
                case 3:
                  l = ba._staticRects.h.left;
                  break;
                case 4:
                  l = ba._staticRects.h.middle;
                  break;
                case 5:
                  l = ba._staticRects.h.right;
                  break;
                case 6:
                  l = ba._staticRects.h["bottom.left"];
                  break;
                case 7:
                  l = ba._staticRects.h.bottom;
                  break;
                case 8:
                  l = ba._staticRects.h["bottom.right"];
                  break;
                default:
                  l = ba._staticRects.h["top.left"];
              }
              n.subKeys.push(b + "_" + l.x + "_" + l.y + "_" + l.width + "_" + l.height + "_");
            }
            ba.cacheCounter.h[c] = n;
          }
          ba.paintCompoundBitmap(a, b, ba._staticRects, d, e, f, k);
          return c;
        }
        return "";
      };
      ba.makePaintScale9Id = function (a, b, c) {
        a = a + "_" + b.join(",") + "_";
        b = c.x;
        var d = Wc._pool.get();
        d.label = "x";
        d.value = b;
        b = c.y;
        var e = Wc._pool.get();
        e.label = "y";
        e.value = b;
        b = c.width;
        var f = Wc._pool.get();
        f.label = "w";
        f.value = b;
        b = c.height;
        c = Wc._pool.get();
        c.label = "h";
        c.value = b;
        return a + Yb.getDebugString([d, e, f, c]);
      };
      ba.paintCompoundBitmap = function (a, b, c, d, e, f, k) {
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = 0;
        }
        d.x |= 0;
        d.y |= 0;
        d.width |= 0;
        d.height |= 0;
        var r = c.h["top.left"];
        if (r != null) {
          var n = ba._staticFlxRect2;
          var g = 0;
          var h = 0;
          var m = r.width;
          var aa = r.height;
          if (aa == null) {
            aa = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          n.x = g;
          n.y = h;
          n.width = m;
          n.height = aa;
          ba.paintBitmapSection(a, b, r, ba._staticFlxRect2, null, 0, f, k);
        }
        var p = c.h["top.right"];
        if (p != null) {
          n = ba._staticFlxRect2;
          g = d.width - p.width;
          h = 0;
          m = p.width;
          aa = p.height;
          if (aa == null) {
            aa = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          n.x = g;
          n.y = h;
          n.width = m;
          n.height = aa;
          ba.paintBitmapSection(a, b, p, ba._staticFlxRect2, null, 0, f, k);
        }
        var l = c.h.top;
        if (l != null) {
          n = ba._staticFlxRect2;
          g = r.width;
          h = 0;
          m = d.width - r.width - p.width;
          aa = l.height;
          if (aa == null) {
            aa = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          n.x = g;
          n.y = h;
          n.width = m;
          n.height = aa;
          ba.paintBitmapSection(a, b, l, ba._staticFlxRect2, null, e & 16, f, k);
        }
        var q = c.h["bottom.left"];
        if (q != null) {
          n = ba._staticFlxRect2;
          g = 0;
          h = d.height - q.height;
          m = q.width;
          aa = q.height;
          if (aa == null) {
            aa = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          n.x = g;
          n.y = h;
          n.width = m;
          n.height = aa;
          ba.paintBitmapSection(a, b, q, ba._staticFlxRect2, null, 0, f, k);
        }
        var t = c.h["bottom.right"];
        if (t != null) {
          n = ba._staticFlxRect2;
          g = d.width - t.width;
          h = d.height - t.height;
          m = t.width;
          aa = t.height;
          if (aa == null) {
            aa = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          n.x = g;
          n.y = h;
          n.width = m;
          n.height = aa;
          ba.paintBitmapSection(a, b, t, ba._staticFlxRect2, null, 0, f, k);
        }
        var u = c.h.bottom;
        if (u != null) {
          n = ba._staticFlxRect2;
          g = q.width;
          h = d.height - u.height;
          m = d.width - q.width - t.width;
          aa = u.height;
          if (aa == null) {
            aa = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          n.x = g;
          n.y = h;
          n.width = m;
          n.height = aa;
          ba.paintBitmapSection(a, b, u, ba._staticFlxRect2, null, e & 16, f, k);
        }
        t = c.h.left;
        if (t != null) {
          n = ba._staticFlxRect2;
          g = 0;
          h = r.height;
          m = t.width;
          aa = d.height - r.height - q.height;
          if (aa == null) {
            aa = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          n.x = g;
          n.y = h;
          n.width = m;
          n.height = aa;
          ba.paintBitmapSection(a, b, t, ba._staticFlxRect2, null, e & 1, f, k);
        }
        var x = c.h.right;
        if (x != null) {
          n = ba._staticFlxRect2;
          g = d.width - x.width;
          h = p.height;
          m = x.width;
          aa = d.height - r.height - q.height;
          if (aa == null) {
            aa = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          n.x = g;
          n.y = h;
          n.width = m;
          n.height = aa;
          ba.paintBitmapSection(a, b, x, ba._staticFlxRect2, null, e & 1, f, k);
        }
        c = c.h.middle;
        if (c != null) {
          n = ba._staticFlxRect2;
          g = t.width;
          h = l.height;
          m = d.width - t.width - x.width;
          aa = d.height - l.height - u.height;
          if (aa == null) {
            aa = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          n.x = g;
          n.y = h;
          n.width = m;
          n.height = aa;
          ba.paintBitmapSection(a, b, c, ba._staticFlxRect2, null, e, f, k);
        }
      };
      ba.paintBitmapSection = function (a, b, c, d, e, f, k, r) {
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = r ?? F.getBmp(b);
        }
        c.x |= 0;
        c.y |= 0;
        c.width |= 0;
        c.height |= 0;
        d.x |= 0;
        d.y |= 0;
        d.width |= 0;
        d.height |= 0;
        var g = r = null;
        if (ba.useSectionCache == 1 && b != null) {
          if (ba.sectionCache == null) {
            ba.sectionCache = new V();
          }
          g = b + "_" + c.x + "_" + c.y + "_" + c.width + "_" + c.height + "_";
          r = ba.sectionCache.h[g];
        }
        if (r == null) {
          r = new T(c.width | 0, c.height | 0, true, 16777215);
          ba._staticRect2.x = c.x;
          ba._staticRect2.y = c.y;
          ba._staticRect2.width = c.width;
          ba._staticRect2.height = c.height;
          r.copyPixels(e, ba._staticRect2, ba._staticPointZero);
          if (ba.useSectionCache == 1 && g != null) {
            ba.sectionCache.h[g] = r;
          }
          ba.bitmapsCreated++;
        }
        if (d.width > 0 && d.height > 0) {
          ba._staticRect2.x = d.x;
          ba._staticRect2.y = d.y;
          ba._staticRect2.width = d.width;
          ba._staticRect2.height = d.height;
          ba.bitmapFillRect(a, ba._staticRect2, r, f, k);
        }
      };
      ba.bitmapFillRect = function (a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        var f = new T(b.width | 0, b.height | 0, true, 0);
        ba._staticMatrix.identity();
        ba._staticRect.x = 0;
        ba._staticRect.y = 0;
        ba._staticRect.width = c.width;
        ba._staticRect.height = c.height;
        if ((d & 16) == 0) {
          ba._staticMatrix.scale(b.width / c.width, 1);
          ba._staticRect.width = b.width;
        }
        if ((d & 1) == 0) {
          ba._staticMatrix.scale(1, b.height / c.height);
          ba._staticRect.height = b.height;
        }
        if (c.width == b.width && c.height == b.height) {
          ba._staticPoint.x = 0;
          ba._staticPoint.y = 0;
          f.copyPixels(c, c.rect, ba._staticPoint);
        } else if (e) {
          f.draw(c, ba._staticMatrix, null, null, null, true);
        } else {
          f.draw(c, ba._staticMatrix, null, null, null, false);
        }
        if (d != 0) {
          if ((d & 16) == 16) {
            ba._staticPoint.x = 0;
            ba._staticPoint.y = 0;
            while (ba._staticPoint.x < b.width) {
              ba._staticPoint.x += ba._staticRect.width;
              f.copyPixels(f, ba._staticRect, ba._staticPoint);
            }
          }
          if ((d & 1) == 1) {
            ba._staticPoint.x = 0;
            ba._staticPoint.y = 0;
            ba._staticRect.width = f.width;
            while (ba._staticPoint.y < b.height) {
              ba._staticPoint.y += ba._staticRect.height;
              f.copyPixels(f, ba._staticRect, ba._staticPoint);
            }
          }
        }
        ba._staticPoint.x = b.x;
        ba._staticPoint.y = b.y;
        a.copyPixels(f, f.rect, ba._staticPoint);
        da.dispose(f);
      };
      ba.__super__ = Bc;
      ba.prototype = q(Bc.prototype, {
        destroy: function () {
          this.noLongerUsingCachedID(this.paintScale9_id);
          Bc.prototype.destroy.call(this);
        },
        resize: function (a, b) {
          if ((a | 0) < 1) {
            a = 1;
          }
          if ((b | 0) < 1) {
            b = 1;
          }
          var c = this.get_width();
          var d = this.get_height();
          var e = F.applyResize(this.resize_ratio, this.resize_ratio_axis, a, b);
          a = e.x;
          b = e.y;
          var f = e.x | 0;
          var k = e.y | 0;
          if (this._slice9 == null || this._slice9.length != 4) {
            if (this._slice9 != null) {
              g.log.advanced("Invalid 9slice array, expected a length of 4", Ba.WARNING, true);
            }
            this._slice9 = [4, 4, 7, 7];
          }
          e = this._asset_id + "_" + this._slice9.join(",") + "_" + f + "x" + k + "_" + this._tile + "_" + H.string(this._smooth);
          if (g.bitmap._cache.h[e] != null) {
            this.loadGraphic(e, false, f, k);
          } else {
            f = new T(a | 0, b | 0);
            ba._staticFlxRect.x = 0;
            ba._staticFlxRect.y = 0;
            ba._staticFlxRect.width = a;
            ba._staticFlxRect.height = b;
            a = this.paintScale9_id;
            if (ba.makePaintScale9Id(this._asset_id, this._slice9, ba._staticFlxRect) != a) {
              this.paintScale9_id = ba.paintScale9(f, this._asset_id, this._slice9, ba._staticFlxRect, this._tile, this._smooth, this._raw_pixels);
              ba.cacheCounter.h[this.paintScale9_id].useCount++;
              this.noLongerUsingCachedID(a);
            }
            this.loadGraphic(f, false, f.width, f.height, false, e);
          }
          c = this.get_width() - c;
          d = this.get_height() - d;
          if (this.resize_point != null) {
            d *= this.resize_point.y;
            this.set_x(this.x - c * this.resize_point.x);
            this.set_y(this.y - d);
          }
        },
        noLongerUsingCachedID: function (a) {
          if (Object.prototype.hasOwnProperty.call(ba.cacheCounter.h, a)) {
            var b = ba.cacheCounter.h[a];
            b.useCount--;
            if (b.useCount <= 0) {
              this.purgeSections(a);
            }
          }
        },
        purgeSections: function (a) {
          var b = ba.cacheCounter.h[a];
          if (b != null) {
            for (var c = 0, d = b.subKeys; c < d.length;) {
              var e = d[c];
              ++c;
              var f = ba.sectionCache;
              if (Object.prototype.hasOwnProperty.call(f.h, e)) {
                delete f.h[e];
              }
            }
            b.subKeys = null;
            f = ba.cacheCounter;
            if (Object.prototype.hasOwnProperty.call(f.h, a)) {
              delete f.h[a];
            }
          }
        },
        __class__: ba
      });
      function Mg(a, b, c, d, e, f, k, r, n, J) {
        if (J == null) {
          J = false;
        }
        if (n == null) {
          n = 100;
        }
        if (r == null) {
          r = 0;
        }
        if (k == null) {
          k = "";
        }
        if (e == null) {
          e = 10;
        }
        if (d == null) {
          d = 100;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.numDivisions = this._maxPercent = 100;
        this.killOnEmpty = false;
        this.fixedPosition = true;
        G.call(this, a, b);
        if (c == null) {
          c = Dd.LEFT_TO_RIGHT;
        }
        this.barWidth = d;
        this.barHeight = e;
        this._filledBarPoint = new kb();
        this._filledBarRect = new ea();
        if (g.renderBlit) {
          this._zeroOffset = new kb();
          this._emptyBarRect = new ea();
          this.makeGraphic(d, e, 0, true);
        } else {
          a = Ha._pool.get();
          var h = e = d = b = 0;
          if (h == null) {
            h = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.x = b;
          a.y = d;
          a.width = e;
          a.height = h;
          a._inPool = false;
          this._filledFlxRect = a;
        }
        if (f != null) {
          this.parent = f;
          this.parentVariable = k;
        }
        this.set_fillDirection(c);
        this.createFilledBar(-16756480, -16714752, J);
        this.setRange(r, n);
      }
      h["flixel.ui.FlxBar"] = Mg;
      Mg.__name__ = "flixel.ui.FlxBar";
      Mg.__super__ = G;
      Mg.prototype = q(G.prototype, {
        destroy: function () {
          this.positionOffset = da.put(this.positionOffset);
          if (g.renderTile) {
            this.set_frontFrames(null);
            this._filledFlxRect = da.put(this._filledFlxRect);
          } else {
            this._zeroOffset = this._emptyBarRect = null;
            this._emptyBar = da.dispose(this._emptyBar);
            this._filledBar = da.dispose(this._filledBar);
          }
          this.filledCallback = this.emptyCallback = this.parent = this._filledBarPoint = this._filledBarRect = null;
          G.prototype.destroy.call(this);
        },
        trackParent: function (a, b) {
          this.fixedPosition = false;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          this.positionOffset = b;
          if (Object.prototype.hasOwnProperty.call(this.parent, "scrollFactor")) {
            this.scrollFactor.set_x(this.parent.scrollFactor.x);
            this.scrollFactor.set_y(this.parent.scrollFactor.y);
          }
        },
        setParent: function (a, b, c, d, e) {
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          this.parent = a;
          this.parentVariable = b;
          if (c) {
            this.trackParent(d, e);
          }
          this.updateValueFromParent();
        },
        setRange: function (a, b) {
          if (b <= a) {
            throw K.thrown("FlxBar: max cannot be less than or equal to min");
          }
          this.min = a;
          this.max = b;
          this.range = b - a;
          this.pct = this.range / this._maxPercent;
          this.pxPerPercent = this._fillHorizontal ? this.barWidth / this._maxPercent : this.barHeight / this._maxPercent;
          var c = this.get_value();
          if (isNaN(c)) {
            this.set_value(a);
          } else {
            this.set_value(Math.max(a, Math.min(this.get_value(), b)));
          }
        },
        createFilledBar: function (a, b, c, d) {
          if (d == null) {
            d = -1;
          }
          if (c == null) {
            c = false;
          }
          this.createColoredEmptyBar(a, c, d);
          this.createColoredFilledBar(b, c, d);
          return this;
        },
        createColoredEmptyBar: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = false;
          }
          if (g.renderTile) {
            var d = "empty: " + this.barWidth + "x" + this.barHeight + ":" + ("0x" + w.hex(a >> 24 & 255, 2) + w.hex(a >> 16 & 255, 2) + w.hex(a >> 8 & 255, 2) + w.hex(a & 255, 2));
            if (b) {
              d += ",border: " + ("0x" + w.hex(c >> 24 & 255, 2) + w.hex(c >> 16 & 255, 2) + w.hex(c >> 8 & 255, 2) + w.hex(c & 255, 2));
            }
            if (g.bitmap._cache.h[d] == null) {
              if (b) {
                b = new T(this.barWidth, this.barHeight, true, c);
                b.fillRect(new ea(1, 1, this.barWidth - 2, this.barHeight - 2), a);
              } else {
                b = new T(this.barWidth, this.barHeight, true, a);
              }
              g.bitmap.add(b, false, d);
            }
            this.set_frames(g.bitmap._cache.h[d].get_imageFrame());
          } else {
            if (b) {
              this._emptyBar = new T(this.barWidth, this.barHeight, true, c);
              this._emptyBar.fillRect(new ea(1, 1, this.barWidth - 2, this.barHeight - 2), a);
            } else {
              this._emptyBar = new T(this.barWidth, this.barHeight, true, a);
            }
            this._emptyBarRect.setTo(0, 0, this.barWidth, this.barHeight);
            this.updateEmptyBar();
          }
          return this;
        },
        createColoredFilledBar: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = false;
          }
          if (g.renderTile) {
            var d = "filled: " + this.barWidth + "x" + this.barHeight + ":" + ("0x" + w.hex(a >> 24 & 255, 2) + w.hex(a >> 16 & 255, 2) + w.hex(a >> 8 & 255, 2) + w.hex(a & 255, 2));
            if (b) {
              d += ",border: " + ("0x" + w.hex(c >> 24 & 255, 2) + w.hex(c >> 16 & 255, 2) + w.hex(c >> 8 & 255, 2) + w.hex(c & 255, 2));
            }
            if (g.bitmap._cache.h[d] == null) {
              if (b) {
                b = new T(this.barWidth, this.barHeight, true, c);
                b.fillRect(new ea(1, 1, this.barWidth - 2, this.barHeight - 2), a);
              } else {
                b = new T(this.barWidth, this.barHeight, true, a);
              }
              g.bitmap.add(b, false, d);
            }
            this.set_frontFrames(g.bitmap._cache.h[d].get_imageFrame());
          } else {
            if (b) {
              this._filledBar = new T(this.barWidth, this.barHeight, true, c);
              this._filledBar.fillRect(new ea(1, 1, this.barWidth - 2, this.barHeight - 2), a);
            } else {
              this._filledBar = new T(this.barWidth, this.barHeight, true, a);
            }
            this._filledBarRect.setTo(0, 0, this.barWidth, this.barHeight);
            this.updateFilledBar();
          }
          return this;
        },
        createGradientBar: function (a, b, c, d, e, f) {
          if (f == null) {
            f = -1;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 180;
          }
          if (c == null) {
            c = 1;
          }
          this.createGradientEmptyBar(a, c, d, e, f);
          this.createGradientFilledBar(b, c, d, e, f);
          return this;
        },
        createGradientEmptyBar: function (a, b, c, d, e) {
          if (e == null) {
            e = -1;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 180;
          }
          if (b == null) {
            b = 1;
          }
          if (g.renderTile) {
            var f = "Gradient:" + this.barWidth + "x" + this.barHeight + ",colors:[";
            for (var k = 0; k < a.length;) {
              var r = a[k];
              ++k;
              f += "0x" + w.hex(r >> 24 & 255, 2) + w.hex(r >> 16 & 255, 2) + w.hex(r >> 8 & 255, 2) + w.hex(r & 255, 2) + ",";
            }
            f += "],chunkSize: " + b + ",rotation: " + c;
            if (d) {
              f += ",border: " + ("0x" + w.hex(e >> 24 & 255, 2) + w.hex(e >> 16 & 255, 2) + w.hex(e >> 8 & 255, 2) + w.hex(e & 255, 2));
            }
            if (g.bitmap._cache.h[f] == null) {
              if (d) {
                d = new T(this.barWidth, this.barHeight, true, e);
                td.overlayGradientOnBitmapData(d, this.barWidth - 2, this.barHeight - 2, a, 1, 1, b, c);
              } else {
                d = td.createGradientBitmapData(this.barWidth, this.barHeight, a, b, c);
              }
              g.bitmap.add(d, false, f);
            }
            this.set_frames(g.bitmap._cache.h[f].get_imageFrame());
          } else {
            if (d) {
              this._emptyBar = new T(this.barWidth, this.barHeight, true, e);
              td.overlayGradientOnBitmapData(this._emptyBar, this.barWidth - 2, this.barHeight - 2, a, 1, 1, b, c);
            } else {
              this._emptyBar = td.createGradientBitmapData(this.barWidth, this.barHeight, a, b, c);
            }
            this._emptyBarRect.setTo(0, 0, this.barWidth, this.barHeight);
            this.updateEmptyBar();
          }
          return this;
        },
        createGradientFilledBar: function (a, b, c, d, e) {
          if (e == null) {
            e = -1;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 180;
          }
          if (b == null) {
            b = 1;
          }
          if (g.renderTile) {
            var f = "Gradient:" + this.barWidth + "x" + this.barHeight + ",colors:[";
            for (var k = 0; k < a.length;) {
              var r = a[k];
              ++k;
              f += "0x" + w.hex(r >> 24 & 255, 2) + w.hex(r >> 16 & 255, 2) + w.hex(r >> 8 & 255, 2) + w.hex(r & 255, 2) + ",";
            }
            f += "],chunkSize: " + b + ",rotation: " + c;
            if (d) {
              f += ",border: " + ("0x" + w.hex(e >> 24 & 255, 2) + w.hex(e >> 16 & 255, 2) + w.hex(e >> 8 & 255, 2) + w.hex(e & 255, 2));
            }
            if (g.bitmap._cache.h[f] == null) {
              if (d) {
                d = new T(this.barWidth, this.barHeight, true, e);
                td.overlayGradientOnBitmapData(d, this.barWidth - 2, this.barHeight - 2, a, 1, 1, b, c);
              } else {
                d = td.createGradientBitmapData(this.barWidth, this.barHeight, a, b, c);
              }
              g.bitmap.add(d, false, f);
            }
            this.set_frontFrames(g.bitmap._cache.h[f].get_imageFrame());
          } else {
            if (d) {
              this._filledBar = new T(this.barWidth, this.barHeight, true, e);
              td.overlayGradientOnBitmapData(this._filledBar, this.barWidth - 2, this.barHeight - 2, a, 1, 1, b, c);
            } else {
              this._filledBar = td.createGradientBitmapData(this.barWidth, this.barHeight, a, b, c);
            }
            this._filledBarRect.setTo(0, 0, this.barWidth, this.barHeight);
            this.updateFilledBar();
          }
          return this;
        },
        createImageBar: function (a, b, c, d) {
          if (d == null) {
            d = -16711936;
          }
          if (c == null) {
            c = -16777216;
          }
          this.createImageEmptyBar(a, c);
          this.createImageFilledBar(b, d);
          return this;
        },
        createImageEmptyBar: function (a, b) {
          if (b == null) {
            b = -16777216;
          }
          if (a != null) {
            a = g.bitmap.add(a);
            if (g.renderTile) {
              this.set_frames(a.get_imageFrame());
            } else {
              this._emptyBar = a.bitmap.clone();
              this.barWidth = this._emptyBar.width;
              this.barHeight = this._emptyBar.height;
              this._emptyBarRect.setTo(0, 0, this.barWidth, this.barHeight);
              if (this.graphic == null || this.frame.sourceSize.x != this.barWidth || this.frame.sourceSize.y != this.barHeight) {
                this.makeGraphic(this.barWidth, this.barHeight, 0, true);
              }
              this.updateEmptyBar();
            }
          } else {
            this.createColoredEmptyBar(b);
          }
          return this;
        },
        createImageFilledBar: function (a, b) {
          if (b == null) {
            b = -16711936;
          }
          if (a != null) {
            a = g.bitmap.add(a);
            if (g.renderTile) {
              this.set_frontFrames(a.get_imageFrame());
            } else {
              this._filledBar = a.bitmap.clone();
              this._filledBarRect.setTo(0, 0, this.barWidth, this.barHeight);
              if (this.graphic == null || this.frame.sourceSize.x != this.barWidth || this.frame.sourceSize.y != this.barHeight) {
                this.makeGraphic(this.barWidth, this.barHeight, 0, true);
              }
              this.pxPerPercent = this._fillHorizontal ? this.barWidth / this._maxPercent : this.barHeight / this._maxPercent;
              this.updateFilledBar();
            }
          } else {
            this.createColoredFilledBar(b);
          }
          return this;
        },
        set_fillDirection: function (a) {
          this.fillDirection = a;
          switch (a._hx_index) {
            case 0:
            case 1:
            case 4:
            case 5:
              this._fillHorizontal = true;
              break;
            case 2:
            case 3:
            case 6:
            case 7:
              this._fillHorizontal = false;
          }
          return this.fillDirection;
        },
        updateValueFromParent: function () {
          this.set_value(ma.getProperty(this.parent, this.parentVariable));
        },
        updateBar: function () {
          this.updateEmptyBar();
          this.updateFilledBar();
        },
        updateEmptyBar: function () {
          if (g.renderBlit) {
            this.get_pixels().copyPixels(this._emptyBar, this._emptyBarRect, this._zeroOffset);
            this.dirty = true;
          }
        },
        updateFilledBar: function () {
          this._filledBarRect.width = this.barWidth;
          this._filledBarRect.height = this.barHeight;
          var a = (this.get_value() - this.min) / this.range;
          var b = a * this._maxPercent;
          var c = this._fillHorizontal ? this.barWidth : this.barHeight;
          var d = c / this.numDivisions;
          a = Math.round((a * c / d | 0) * d);
          if (this._fillHorizontal) {
            this._filledBarRect.width = a | 0;
          } else {
            this._filledBarRect.height = a | 0;
          }
          if (b > 0) {
            switch (this.fillDirection._hx_index) {
              case 1:
                this._filledBarRect.x = this.barWidth - this._filledBarRect.width;
                this._filledBarPoint.x = this.barWidth - this._filledBarRect.width;
                break;
              case 3:
                this._filledBarRect.y = this.barHeight - this._filledBarRect.height;
                this._filledBarPoint.y = this.barHeight - this._filledBarRect.height;
                break;
              case 4:
                this._filledBarRect.x = this.barWidth / 2 - this._filledBarRect.width / 2 | 0;
                this._filledBarPoint.x = this.barWidth / 2 - this._filledBarRect.width / 2 | 0;
                break;
              case 5:
                this._filledBarRect.width = c - a | 0;
                this._filledBarPoint.x = (this.barWidth - this._filledBarRect.width) / 2 | 0;
                break;
              case 6:
                this._filledBarRect.y = this.barHeight / 2 - this._filledBarRect.height / 2 | 0;
                this._filledBarPoint.y = this.barHeight / 2 - this._filledBarRect.height / 2 | 0;
                break;
              case 7:
                this._filledBarRect.height = c - a | 0;
                this._filledBarPoint.y = (this.barHeight - this._filledBarRect.height) / 2 | 0;
            }
            if (g.renderBlit) {
              this.get_pixels().copyPixels(this._filledBar, this._filledBarRect, this._filledBarPoint, null, null, true);
            } else if (this.get_frontFrames() != null) {
              c = this._filledFlxRect;
              a = this._filledBarRect;
              c.x = a.x;
              c.y = a.y;
              c.width = a.width;
              c.height = a.height;
              c.x = Math.round(c.x);
              c.y = Math.round(c.y);
              c.width = Math.round(c.width);
              c.height = Math.round(c.height);
              if ((b | 0) > 0) {
                this._frontFrame = this.get_frontFrames().get_frame().clipTo(this._filledFlxRect, this._frontFrame);
              }
            }
          }
          if (g.renderBlit) {
            this.dirty = true;
          }
        },
        update: function (a) {
          if (this.parent != null) {
            if (ma.getProperty(this.parent, this.parentVariable) != this.get_value()) {
              this.updateValueFromParent();
            }
            if (!this.fixedPosition) {
              this.set_x(this.parent.x + this.positionOffset.x);
              this.set_y(this.parent.y + this.positionOffset.y);
            }
          }
          G.prototype.update.call(this, a);
        },
        draw: function () {
          G.prototype.draw.call(this);
          if (g.renderTile && this.alpha != 0 && this.get_percent() > 0 && this._frontFrame.type != 2) {
            for (var a = 0, b = this.getCamerasLegacy(); a < b.length;) {
              var c = b[a];
              ++a;
              if (c.visible && c.exists && this.isOnScreen(c)) {
                var d = this.flipX != this._frame.flipX;
                var e = this.flipY != this._frame.flipY;
                this._frontFrame.prepareMatrix(this._matrix, 0, this.animation._curAnim != null ? d != this.animation._curAnim.flipX : d, this.animation._curAnim != null ? e != this.animation._curAnim.flipY : e);
                this._matrix.translate(-this.origin.x, -this.origin.y);
                this._matrix.scale(this.scale.x, this.scale.y);
                if (this.bakedRotationAngle <= 0 && (this._angleChanged && (d = Math.PI / 180 * this.angle, this._sinAngle = Math.sin(d), this._cosAngle = Math.cos(d), this._angleChanged = false), this.angle != 0)) {
                  d = this._matrix;
                  e = this._cosAngle;
                  var f = this._sinAngle;
                  var k = d.a * e - d.b * f;
                  d.b = d.a * f + d.b * e;
                  d.a = k;
                  k = d.c * e - d.d * f;
                  d.d = d.c * f + d.d * e;
                  d.c = k;
                  k = d.tx * e - d.ty * f;
                  d.ty = d.tx * f + d.ty * e;
                  d.tx = k;
                }
                d = this.getScreenPosition(this._point, c);
                e = this.offset;
                f = e.x;
                k = e.y;
                if (k == null) {
                  k = 0;
                }
                if (f == null) {
                  f = 0;
                }
                d.set_x(d.x - f);
                d.set_y(d.y - k);
                d = e;
                if (d._weak) {
                  d.put();
                }
                d = this._point;
                e = this.origin.x;
                f = this.origin.y;
                if (f == null) {
                  f = 0;
                }
                if (e == null) {
                  e = 0;
                }
                d.set_x(d.x + e);
                d.set_y(d.y + f);
                this._matrix.translate(this._point.x, this._point.y);
                if (this.isPixelPerfectRender(c)) {
                  this._matrix.tx = Math.floor(this._matrix.tx);
                  this._matrix.ty = Math.floor(this._matrix.ty);
                }
                c.drawPixels(this._frontFrame, null, this._matrix, this.colorTransform, this.blend, this.antialiasing, this.shader);
              }
            }
          }
        },
        set_pixels: function (a) {
          if (g.renderTile) {
            return a;
          } else {
            return G.prototype.set_pixels.call(this, a);
          }
        },
        toString: function () {
          var a = this.min;
          var b = Wc._pool.get();
          b.label = "min";
          b.value = a;
          a = this.max;
          var c = Wc._pool.get();
          c.label = "max";
          c.value = a;
          a = this.range;
          var d = Wc._pool.get();
          d.label = "range";
          d.value = a;
          a = this.pct;
          var e = Wc._pool.get();
          e.label = "%";
          e.value = a;
          a = this.pxPerPercent;
          var f = Wc._pool.get();
          f.label = "px/%";
          f.value = a;
          a = this.get_value();
          var k = Wc._pool.get();
          k.label = "value";
          k.value = a;
          return Yb.getDebugString([b, c, d, e, f, k]);
        },
        get_percent: function () {
          if (this.get_value() > this.max) {
            return this._maxPercent;
          } else {
            return Math.floor((this.get_value() - this.min) / this.range * this._maxPercent);
          }
        },
        set_value: function (a) {
          this.value = Math.max(this.min, Math.min(a, this.max));
          if (this.get_value() == this.min && this.emptyCallback != null) {
            this.emptyCallback();
          }
          if (this.get_value() == this.max && this.filledCallback != null) {
            this.filledCallback();
          }
          if (this.get_value() == this.min && this.killOnEmpty) {
            this.kill();
          }
          this.updateBar();
          return a;
        },
        get_value: function () {
          return this.value;
        },
        set_numDivisions: function (a) {
          this.numDivisions = a > 0 ? a : 100;
          this.updateFilledBar();
          return a;
        },
        get_frontFrames: function () {
          if (g.renderTile) {
            return this.frontFrames;
          } else {
            return null;
          }
        },
        set_frontFrames: function (a) {
          if (g.renderTile) {
            if (a != null) {
              a.parent.incrementUseCount();
            }
            if (this.get_frontFrames() != null) {
              this.get_frontFrames().parent.decrementUseCount();
            }
            this.frontFrames = a;
            this._frontFrame = a != null ? a.get_frame().copyTo(this._frontFrame) : da.destroy(this._frontFrame);
          } else {
            this.createImageFilledBar(a.get_frame().paint());
          }
          return a;
        },
        __class__: Mg,
        __properties__: q(G.prototype.__properties__, {
          set_fillDirection: "set_fillDirection",
          set_frontFrames: "set_frontFrames",
          get_frontFrames: "get_frontFrames",
          set_numDivisions: "set_numDivisions",
          set_value: "set_value",
          get_value: "get_value",
          get_percent: "get_percent"
        })
      });
      function Oe() {}
      h["flixel.addons.ui.interfaces.IHasParams"] = Oe;
      Oe.__name__ = "flixel.addons.ui.interfaces.IHasParams";
      Oe.__isInterface__ = true;
      Oe.prototype = {
        __class__: Oe,
        __properties__: {
          set_params: "set_params"
        }
      };
      function ai(a, b, c, d, e, f, k, r, g, J) {
        if (J == null) {
          J = false;
        }
        if (g == null) {
          g = 100;
        }
        if (r == null) {
          r = 0;
        }
        if (k == null) {
          k = "";
        }
        if (e == null) {
          e = 10;
        }
        if (d == null) {
          d = 100;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        Mg.call(this, a, b, c, d, e, f, k, r, g, J);
      }
      h["flixel.addons.ui.FlxUIBar"] = ai;
      ai.__name__ = "flixel.addons.ui.FlxUIBar";
      ai.__interfaces__ = [Oe, ud, ed];
      ai.__super__ = Mg;
      ai.prototype = q(Mg.prototype, {
        set_style: function (a) {
          this.style = a;
          this.resize(this.barWidth, this.barHeight);
          return this.style;
        },
        resize: function (a, b) {
          this.set_width(a);
          this.set_height(b);
          this.barWidth = this.get_width() | 0;
          this.barHeight = this.get_height() | 0;
          if (g.renderBlit) {
            this.makeGraphic(this.barWidth, this.barHeight, 0, true);
          }
          a = this.style.borderColor != null;
          b = this.style.emptyColor == null ? -16777216 : this.style.emptyColor;
          var c = this.style.filledColor == null ? -65536 : this.style.filledColor;
          var d = this.style.borderColor == null ? -16777216 : this.style.borderColor;
          if (this.style.filledColor != null) {
            this.createFilledBar(b, c, a, d);
          }
          if (this.style.filledColors != null) {
            this.createGradientBar(this.style.emptyColors == null ? [-16777216] : this.style.emptyColors, this.style.filledColors == null ? [-65536] : this.style.filledColors, this.style.chunkSize == null ? 1 : this.style.chunkSize, this.style.emptyImgSrc == null ? 180 : this.style.gradRotation, a, d);
          }
          if (this.style.filledImgSrc != "") {
            this.createImageBar(this.style.emptyImgSrc, this.style.filledImgSrc, b, c);
          }
          this.setRange(this.min, this.max);
          this.set_value(this.get_value());
        },
        set_params: function (a) {
          return this.params = a;
        },
        __class__: ai,
        __properties__: q(Mg.prototype.__properties__, {
          set_params: "set_params",
          set_style: "set_style"
        })
      });
      function uh() {}
      h["flixel.input.IFlxInput"] = uh;
      uh.__name__ = "flixel.input.IFlxInput";
      uh.__isInterface__ = true;
      uh.prototype = {
        __class__: uh,
        __properties__: {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased"
        }
      };
      function fd(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.lastStatus = -1;
        this.maxInputMovement = Infinity;
        this.mouseButtons = [-1];
        this.allowSwiping = true;
        this.statusAnimations = ["normal", "highlight", "pressed", "disabled"];
        this.labelAlphas = [0.8, 1, 0.5, 0.3];
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var f = fa.pool.get().set(d, e);
        f._inPool = false;
        e = d = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var k = fa.pool.get().set(d, e);
        k._inPool = false;
        d = 0;
        e = 1;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var r = d;
        if (e == null) {
          e = 0;
        }
        if (r == null) {
          r = 0;
        }
        r = fa.pool.get().set(r, e);
        r._inPool = false;
        e = d = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        e = fa.pool.get().set(d, e);
        e._inPool = false;
        this.labelOffsets = [f, k, r, e];
        G.call(this, a, b);
        this.loadDefaultGraphic();
        this.onUp = new Bf(c);
        this.onDown = new Bf();
        this.onOver = new Bf();
        this.onOut = new Bf();
        this.set_status(0);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        na.get_current().stage.addEventListener("mouseUp", l(this, this.onUpEventListener));
        this.input = new oe(0);
      }
      h["flixel.ui.FlxTypedButton"] = fd;
      fd.__name__ = "flixel.ui.FlxTypedButton";
      fd.__interfaces__ = [uh];
      fd.__super__ = G;
      fd.prototype = q(G.prototype, {
        graphicLoaded: function () {
          G.prototype.graphicLoaded.call(this);
          this.setupAnimation("normal", 0);
          this.setupAnimation("highlight", 1);
          this.setupAnimation("pressed", 2);
          this.setupAnimation("disabled", 3);
        },
        loadDefaultGraphic: function () {
          this.loadGraphic("flixel/images/ui/button.png", true, 80, 20);
        },
        setupAnimation: function (a, b) {
          b = Math.min(b, this.animation._sprite.get_numFrames() - 1) | 0;
          this.animation.add(a, [b]);
        },
        destroy: function () {
          this.set_label(da.destroy(this.label));
          this._spriteLabel = null;
          this.onUp = da.destroy(this.onUp);
          this.onDown = da.destroy(this.onDown);
          this.onOver = da.destroy(this.onOver);
          this.onOut = da.destroy(this.onOut);
          this.labelOffsets = da.putArray(this.labelOffsets);
          this.input = this.currentInput = this.labelAlphas = null;
          na.get_current().stage.removeEventListener("mouseUp", l(this, this.onUpEventListener));
          G.prototype.destroy.call(this);
        },
        update: function (a) {
          G.prototype.update.call(this, a);
          if (this.visible) {
            this.updateButton();
            if (this.lastStatus != this.status) {
              this.updateStatusAnimation();
              this.lastStatus = this.status;
            }
          }
          this.input.update();
        },
        updateStatusAnimation: function () {
          this.animation.play(this.statusAnimations[this.status]);
        },
        draw: function () {
          G.prototype.draw.call(this);
          if (this._spriteLabel != null && this._spriteLabel.visible) {
            this._spriteLabel.set_cameras(this._cameras);
            this._spriteLabel.draw();
          }
        },
        updateButton: function () {
          if (this.status != 3) {
            var a = this.checkMouseOverlap();
            a ||= this.checkTouchOverlap();
            if (this.currentInput != null && this.currentInput.get_justReleased() && a) {
              this.onUpHandler();
            }
            if (this.status != 0 && (!a || this.currentInput != null && this.currentInput.get_justReleased())) {
              this.onOutHandler();
            }
          }
        },
        checkMouseOverlap: function () {
          var a = false;
          for (var b = 0, c = this.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            for (var e = 0, f = this.mouseButtons; e < f.length;) {
              var k = f[e];
              ++e;
              k = gf.getByID(k);
              if (k != null && this.checkInput(g.mouse, k, k.justPressedPosition, d)) {
                a = true;
              }
            }
          }
          return a;
        },
        checkTouchOverlap: function () {
          var a = false;
          for (var b = 0, c = this.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            for (var e = 0, f = g.touches.list; e < f.length;) {
              var k = f[e];
              ++e;
              if (this.checkInput(k, k, k.justPressedPosition, d)) {
                a = true;
              }
            }
          }
          return a;
        },
        checkInput: function (a, b, c, d) {
          if (this.maxInputMovement != Infinity) {
            var e = 0;
            var f = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            f = fa.pool.get().set(e, f);
            f._inPool = false;
            f._weak = true;
            c = zk.distanceTo(c, a.getScreenPosition(null, f)) > this.maxInputMovement;
          } else {
            c = false;
          }
          if (c && b == this.currentInput) {
            this.currentInput = null;
          } else if (this.overlapsPoint(a.getWorldPosition(d, this._point), true, d)) {
            this.updateStatus(b);
            return true;
          }
          return false;
        },
        updateStatus: function (a) {
          if (a.get_justPressed()) {
            this.currentInput = a;
            this.onDownHandler();
          } else if (this.status == 0) {
            if (this.allowSwiping && a.get_pressed()) {
              this.onDownHandler();
            } else {
              this.onOverHandler();
            }
          }
        },
        updateLabelPosition: function () {
          if (this._spriteLabel != null) {
            this._spriteLabel.set_x((this.pixelPerfectPosition ? Math.floor(this.x) : this.x) + this.labelOffsets[this.status].x);
            this._spriteLabel.set_y((this.pixelPerfectPosition ? Math.floor(this.y) : this.y) + this.labelOffsets[this.status].y);
          }
        },
        updateLabelAlpha: function () {
          if (this._spriteLabel != null && this.labelAlphas.length > this.status) {
            this._spriteLabel.set_alpha(this.alpha * this.labelAlphas[this.status]);
          }
        },
        onUpEventListener: function (a) {
          if (this.visible && this.exists && this.active && this.status == 2) {
            this.onUpHandler();
          }
        },
        onUpHandler: function () {
          this.set_status(1);
          this.input.release();
          this.currentInput = null;
          var a = this.onUp;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        onDownHandler: function () {
          this.set_status(2);
          this.input.press();
          var a = this.onDown;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        onOverHandler: function () {
          if (g.mouse.enabled) {
            this.set_status(1);
            var a = this.onOver;
            if (a.callback != null) {
              a.callback();
            }
            if (a.sound != null) {
              a.sound.play(true);
            }
          } else {
            this.set_status(0);
          }
        },
        onOutHandler: function () {
          this.set_status(0);
          this.input.release();
          var a = this.onOut;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        set_label: function (a) {
          if (a != null) {
            a.scrollFactor.put();
            a.scrollFactor = this.scrollFactor;
          }
          this._spriteLabel = this.label = a;
          this.updateLabelPosition();
          return a;
        },
        set_status: function (a) {
          this.status = a;
          this.updateLabelAlpha();
          return this.status;
        },
        set_alpha: function (a) {
          G.prototype.set_alpha.call(this, a);
          this.updateLabelAlpha();
          return this.alpha;
        },
        set_x: function (a) {
          G.prototype.set_x.call(this, a);
          this.updateLabelPosition();
          return this.x;
        },
        set_y: function (a) {
          G.prototype.set_y.call(this, a);
          this.updateLabelPosition();
          return this.y;
        },
        get_justReleased: function () {
          return this.input.current == -1;
        },
        get_pressed: function () {
          var a = this.input;
          if (a.current != 1) {
            return a.current == 2;
          } else {
            return true;
          }
        },
        get_justPressed: function () {
          return this.input.current == 2;
        },
        __class__: fd,
        __properties__: q(G.prototype.__properties__, {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased",
          set_status: "set_status",
          set_label: "set_label"
        })
      });
      function jj() {}
      h["flixel.addons.ui.interfaces.ICursorPointable"] = jj;
      jj.__name__ = "flixel.addons.ui.interfaces.ICursorPointable";
      jj.__isInterface__ = true;
      function Af() {}
      h["flixel.addons.ui.interfaces.IFlxUIClickable"] = Af;
      Af.__name__ = "flixel.addons.ui.interfaces.IFlxUIClickable";
      Af.__isInterface__ = true;
      Af.prototype = {
        __class__: Af,
        __properties__: {
          set_skipButtonUpdate: "set_skipButtonUpdate"
        }
      };
      function Ng() {}
      h["flixel.addons.ui.interfaces.IFlxUIButton"] = Ng;
      Ng.__name__ = "flixel.addons.ui.interfaces.IFlxUIButton";
      Ng.__isInterface__ = true;
      Ng.__interfaces__ = [B, Oe, ud];
      Ng.prototype = {
        __class__: Ng,
        __properties__: {
          get_justMousedOut: "get_justMousedOut",
          get_mouseIsOut: "get_mouseIsOut",
          get_mouseIsOver: "get_mouseIsOver",
          get_justMousedOver: "get_justMousedOver",
          set_toggle_label: "set_toggle_label",
          set_toggled: "set_toggled"
        }
      };
      function Ic(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._centerLabelOffset = null;
        this._src_w = this._src_h = 0;
        this._no_graphic = false;
        this._assetsToCleanup = [];
        this._autoCleanup = true;
        this.skipButtonUpdate = this.autoResizeLabel = false;
        this.up_visible = this.over_visible = this.down_visible = this.up_toggle_visible = this.over_toggle_visible = this.down_toggle_visible = this.round_labels = true;
        this.up_color = this.over_color = this.down_color = this.up_toggle_color = this.over_toggle_color = this.down_toggle_color = null;
        this.broadcastToFlxUI = true;
        this.has_toggle = this.toggled = false;
        this.tile = 0;
        this.resize_point = null;
        this.resize_ratio_axis = 1;
        this.resize_ratio = -1;
        fd.call(this, a, b, c);
        a = b = 0;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = fa.pool.get().set(b, a);
        a._inPool = false;
        this._centerLabelOffset = a;
        this.statusAnimations[3] = "normal_toggled";
        this.statusAnimations[4] = "highlight_toggled";
        this.statusAnimations[5] = "pressed_toggled";
        a = [];
        a.push(1);
        a.push(1);
        a.push(1);
        this.labelAlphas = a;
        this.inputOver = new oe(0);
      }
      h["flixel.addons.ui.FlxUITypedButton"] = Ic;
      Ic.__name__ = "flixel.addons.ui.FlxUITypedButton";
      Ic.__interfaces__ = [jj, Oe, Af, ud, ed, Ng];
      Ic.__super__ = fd;
      Ic.prototype = q(fd.prototype, {
        set_toggled: function (a) {
          this.toggled = a;
          this.updateStatusAnimation();
          return this.toggled;
        },
        get_justMousedOver: function () {
          return this.inputOver.current == 2;
        },
        get_justMousedOut: function () {
          return this.inputOver.current == -1;
        },
        get_mouseIsOver: function () {
          var a = this.inputOver;
          if (a.current != 1) {
            return a.current == 2;
          } else {
            return true;
          }
        },
        get_mouseIsOut: function () {
          var a = this.inputOver;
          if (a.current != 0) {
            return a.current == -1;
          } else {
            return true;
          }
        },
        set_toggle_label: function (a) {
          if (this.label != null) {
            return this.toggle_label = a;
          } else {
            return null;
          }
        },
        set_visible: function (a) {
          if (this.visible && a == 0) {
            this.inputOver.release();
          }
          return fd.prototype.set_visible.call(this, a);
        },
        set_skipButtonUpdate: function (a) {
          return this.skipButtonUpdate = a;
        },
        set_params: function (a) {
          return this.params = a;
        },
        destroy: function () {
          this.resize_point = da.put(this.resize_point);
          fd.prototype.destroy.call(this);
        },
        graphicLoaded: function () {
          fd.prototype.graphicLoaded.call(this);
          this.setupAnimation("normal_toggled", 3);
          this.setupAnimation("highlight_toggled", 4);
          this.setupAnimation("pressed_toggled", 5);
          if (this._autoCleanup) {
            this.cleanup();
          }
        },
        copyStyle: function (a) {
          this.up_color = a.up_color;
          this.over_color = a.over_color;
          this.down_color = a.down_color;
          this.up_toggle_color = a.up_toggle_color;
          this.down_toggle_color = this.over_toggle_color = a.over_toggle_color;
          this.up_visible = a.up_visible;
          this.over_visible = a.over_visible;
          this.down_visible = a.down_visible;
          this.up_toggle_visible = a.up_toggle_visible;
          this.over_toggle_visible = a.over_toggle_visible;
          this.down_toggle_visible = a.down_toggle_visible;
          var b = a.getCenterLabelOffset();
          this.setCenterLabelOffset(b.x, b.y);
          for (var c = b = 0, d = a.labelOffsets; c < d.length;) {
            var e = d[c];
            ++c;
            this.labelOffsets[b].set_x(e.x);
            this.labelOffsets[b].set_y(e.y);
            ++b;
          }
          c = b = 0;
          for (d = a.labelAlphas; c < d.length;) {
            a = d[c];
            ++c;
            this.labelAlphas[b] = a;
            ++b;
          }
        },
        setAllLabelOffsets: function (a, b) {
          for (var c = 0, d = this.labelOffsets; c < d.length;) {
            var e = d[c];
            ++c;
            var f = a;
            var k = b;
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            e.set_x(f);
            e.set_y(k);
          }
        },
        update: function (a) {
          fd.prototype.update.call(this, a);
          if (this.status == 0) {
            a = this.inputOver;
            a = a.current == 1 || a.current == 2;
          } else {
            a = false;
          }
          if (a && this.input.current == -1 == 0) {
            this.inputOver.release();
          }
          this.inputOver.update();
          if (this.label != null) {
            a = this.fetchAndShowCorrectLabel();
            a.set_x(this.x + this._centerLabelOffset.x + this.labelOffsets[this.status].x);
            a.set_y(this.y + this._centerLabelOffset.y + this.labelOffsets[this.status].y);
            if (this.round_labels) {
              a.set_x(a.x + 0.5 | 0);
              a.set_y(a.y + 0.5 | 0);
            }
            a.scrollFactor = this.scrollFactor;
          }
        },
        updateStatusAnimation: function () {
          if (this.has_toggle && this.toggled) {
            this.animation.play(this.statusAnimations[this.status + 3]);
          } else {
            fd.prototype.updateStatusAnimation.call(this);
          }
        },
        draw: function () {
          fd.prototype.draw.call(this);
          if (this.has_toggle && this.toggled && this.toggle_label != null && this.toggle_label.visible == 1) {
            this.toggle_label._cameras = this._cameras;
            this.toggle_label.draw();
          }
        },
        resize: function (a, b) {
          this.doResize(a, b);
        },
        doResize: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          var d = this.get_width();
          var e = this.get_height();
          var f = 0;
          var k = 0;
          if (this.label != null) {
            f = this.get_width() - this._spriteLabel.get_width();
            k = this.get_height() - this._spriteLabel.get_height();
          }
          if (a <= 0) {
            a = 80;
          }
          if (b <= 0) {
            b = 20;
          }
          if (c) {
            if (this._slice9_assets != null) {
              this.loadGraphicSlice9(this._slice9_assets, a | 0, b | 0, this._slice9_arrays, this.tile, this.resize_ratio, this.has_toggle, this._src_w, this._src_h, this._frame_indeces);
            } else if (this._no_graphic) {
              c = this.has_toggle ? new T(a | 0, b * 6 | 0, true, 0) : new T(a | 0, b * 3 | 0, true, 0);
              this.loadGraphicsUpOverDown(c);
            } else {
              this.loadGraphicSlice9(null, a | 0, b | 0, null, this.tile);
            }
          }
          if (this.label != null && this.autoResizeLabel && ta.__implements(this.label, ed)) {
            this.label.resize(a - f, b - k);
          }
          this.autoCenterLabel();
          a = this.get_width() - d;
          e = this.get_height() - e;
          if (this.resize_point != null) {
            e *= this.resize_point.y;
            this.set_x(this.x - a * this.resize_point.x);
            this.set_y(this.y - e);
          }
        },
        getBmp: function (a) {
          return F.getBmp(a);
        },
        loadGraphicsUpOverDown: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          this._slice9_arrays = this._slice9_assets = null;
          this.resize_ratio = -1;
          if (b) {
            this.has_toggle = true;
          }
          b = null;
          if (a instanceof T) {
            b = a;
          } else if (typeof a == "string") {
            b = this.getBmp(a);
          }
          a = this.grabButtonFrame(b, 0, this.has_toggle, 0, 0, c);
          var d = this.grabButtonFrame(b, 1, this.has_toggle, 0, 0, c);
          var e = this.grabButtonFrame(b, 2, this.has_toggle, 0, 0, c);
          var f = c;
          if (c == null || c == "" || g.bitmap._cache.h[c] != null == 0) {
            f = this.assembleButtonFrames(a, d, e);
          }
          if (this.has_toggle) {
            f = this.assembleButtonFrames(a, d, e);
            a = this.grabButtonFrame(b, 3, true, 0, 0, c);
            d = this.grabButtonFrame(b, 4, true, 0, 0, c);
            e = this.grabButtonFrame(b, 5, true, 0, 0, c);
            b = this.assembleButtonFrames(a, d, e);
            d = this.combineToggleBitmaps(f, b);
            da.dispose(f);
            da.dispose(b);
            this.loadGraphic(d, true, a.width, a.height, false, c);
          } else {
            this.loadGraphic(f, true, a.width, a.height, false, c);
          }
        },
        loadGraphicSlice9: function (a, b, c, d, e, f, k, r, n, J) {
          if (n == null) {
            n = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = -1;
          }
          if (e == null) {
            e = 0;
          }
          if (c == null) {
            c = 20;
          }
          if (b == null) {
            b = 80;
          }
          if (r != 0) {
            this._src_w = r;
          }
          if (n != 0) {
            this._src_h = n;
          }
          this.tile = e;
          this.has_toggle = k;
          this.resize_ratio = f;
          this._slice9_assets = a;
          this._slice9_arrays = d;
          e = "";
          if (J == null) {
            J = this.has_toggle ? [0, 1, 2, 3, 4, 5] : [0, 1, 2];
          } else {
            f = 2;
            for (this.has_toggle && (f = 5); J.length < f + 1;) {
              J.push(J.length - 1);
            }
            for (var h = 0, m = J.length; h < m;) {
              var p = h++;
              if (J[p] > 5) {
                J[p] = 5;
              } else if (J[p] < 0) {
                J[p] = 0;
              }
            }
          }
          this._frame_indeces = J;
          if (b == 0) {
            b = 80;
          }
          if (c == 0) {
            c = 20;
          }
          c = F.applyResize(this.resize_ratio, this.resize_ratio_axis, b, c);
          b = c.x | 0;
          c = c.y | 0;
          if (a == null) {
            if (k) {
              a = ["flixel/flixel-ui/img/button_toggle.png"];
              d = [Yb.toIntArray("6,6,11,11")];
              k = this.getBmp(a[0]);
              this._src_w = k.width | 0;
              this._src_h = k.height / 6 | 0;
            } else {
              a = ["flixel/flixel-ui/img/button.png"];
              d = [Yb.toIntArray("6,6,11,11")];
              k = this.getBmp(a[0]);
              this._src_w = k.width | 0;
              this._src_h = k.height / 3 | 0;
            }
          }
          if (!this.has_toggle && a.length <= 3) {
            k = [null, null, null];
            f = [null, null, null];
          } else {
            this.has_toggle = true;
            k = [null, null, null, null, null, null];
            f = [null, null, null, null, null, null];
          }
          this._flashRect2.width = b;
          this._flashRect2.height = c;
          r = e += H.string(a) + "_slice9=" + H.string(d) + "_src=" + this._src_w + "x" + this._src_h;
          e += "_final=" + b + "x" + c + "_fi=" + H.string(this._frame_indeces);
          if (a.length == 1) {
            n = this.getBmp(a[0]);
            h = "_all";
            if (this._src_w == 0 || this._src_h == 0) {
              throw new Rb("Ambiguous situation! If you only provide one asset, you MUST provide src_w and src_h. Otherwise I can't tell if it's a stacked set of frames or a single frame.");
            }
            m = n.height > this._src_h;
            h += m ? "_multiframe" : "";
            e += h;
            r += h;
            if (g.bitmap._cache.h[e] != null) {
              this.loadGraphic(e, true, b, c);
              return;
            }
            if (m) {
              h = 0;
              for (m = k.length; h < m;) {
                p = h++;
                k[p] = this.grabButtonFrame(n, p, this.has_toggle, this._src_w, this._src_h, r);
              }
              if (d != null && d[0] != []) {
                h = 0;
                for (m = k.length; h < m;) {
                  p = h++;
                  f[p] = new ba(0, 0, k[p], this._flashRect2, d[0], this.tile, false, a[0] + ":" + p, this.resize_ratio);
                  f[p].set_resize_point(this.resize_point);
                }
                h = 0;
                for (m = k.length; h < m;) {
                  p = h++;
                  k[p] = f[p].get_pixels();
                }
                b = k[0].width;
                c = k[0].height;
              }
            } else {
              k[0] = n;
            }
          } else {
            if (g.bitmap._cache.h[e] != null) {
              this.loadGraphic(e, true, b, c);
              return;
            }
            if (this.has_toggle) {
              while (a.length < 6) {
                a.push("");
              }
            } else {
              while (a.length < 3) {
                a.push("");
              }
            }
            if (a[0] != "") {
              if (d != null && d.length > 0 && d[0] != null && d[0].length > 0) {
                while (d.length < a.length) {
                  d.push(null);
                }
                f[0] = d[0] != null ? new ba(0, 0, a[0], this._flashRect2, d[0], this.tile, false, "", this.resize_ratio) : new Bc(0, 0, a[0]);
                k[0] = f[0].get_pixels();
                h = 1;
                for (m = a.length; h < m;) {
                  p = h++;
                  if (a[p] != "") {
                    f[p] = d[p] != null ? new ba(0, 0, a[p], this._flashRect2, d[p], this.tile, false, "", this.resize_ratio) : new Bc(0, 0, a[p]);
                    k[p] = f[p].get_pixels();
                  }
                }
              } else {
                h = 0;
                m = a.length;
                while (h < m) {
                  p = h++;
                  k[p] = this.getBmp(a[p]);
                }
              }
              b = k[0].width;
              c = k[0].height;
            } else {
              if (b == 0) {
                b = 80;
              }
              if (c == 0) {
                c = 20;
              }
              k[0] = new T(b, c * 3, true, 0);
              this._no_graphic = true;
            }
          }
          if (this.has_toggle) {
            a = this.assembleButtonFrames(k[J[0]], k[J[1]], k[J[2]]);
            J = this.assembleButtonFrames(k[J[3]], k[J[4]], k[J[5]]);
            d = this.combineToggleBitmaps(a, J);
            da.dispose(a);
            da.dispose(J);
            g.bitmap.add(d, true, e);
          } else {
            a = this.assembleButtonFrames(k[J[0]], k[J[1]], k[J[2]]);
            g.bitmap.add(a, true, e);
          }
          this.loadGraphic(e, true, b, c);
          h = 0;
          for (m = f.length; h < m;) {
            p = h++;
            if (f[p] != null) {
              f[p].destroy();
              f[p] = null;
            }
          }
          while (f.length > 0) {
            f.pop();
          }
          while (k.length > 0) {
            k.pop();
          }
        },
        autoCenterLabel: function () {
          if (this.label != null) {
            this.get_width();
            this._spriteLabel.get_width();
            if (this.label instanceof ae) {
              var a = this.label;
              var b = (this.get_width() - a.get_fieldWidth()) / 2;
              a = (this.get_height() - a.get_height()) / 2;
            } else {
              b = (this.get_width() - this._spriteLabel.get_width()) / 2;
              a = (this.get_height() - this._spriteLabel.get_height()) / 2;
            }
            this._centerLabelOffset.set_x(b);
            this._centerLabelOffset.set_y(a);
          }
        },
        setCenterLabelOffset: function (a, b) {
          this._centerLabelOffset.set_x(a);
          this._centerLabelOffset.set_y(b);
        },
        getCenterLabelOffset: function () {
          var a = this._centerLabelOffset.x;
          var b = this._centerLabelOffset.y;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          return b;
        },
        forceStateHandler: function (a) {
          switch (a) {
            case "click_button":
              this.onUpHandler();
              break;
            case "down_button":
              this.onDownHandler();
              break;
            case "out_button":
              this.onOutHandler();
              break;
            case "over_button":
              this.onOverHandler();
          }
        },
        grabButtonFrame: function (a, b, c, d, e, f) {
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (e == 0) {
            e = c ? a.height / 6 | 0 : a.height / 3 | 0;
          }
          c = d;
          if (c == 0) {
            c = a.width;
          }
          this._flashRect.x = 0;
          this._flashRect.y = b * e;
          this._flashRect.width = c;
          this._flashRect.height = e;
          if (this._flashRect.y >= a.height && (a.height / e | 0) == 4) {
            if (b == 4) {
              this._flashRect.y = e * 3;
            } else if (b == 5) {
              this._flashRect.y = e * 2;
            }
          }
          b = f + "{x:" + this._flashRect.x + "y:" + this._flashRect.y + "w:" + this._flashRect.width + "h:" + this._flashRect.height + "}";
          if (b != null && g.bitmap._cache.h[b] != null) {
            return g.bitmap._cache.h[b].bitmap;
          }
          e = new T(c, e);
          e.copyPixels(a, this._flashRect, this._flashPointZero);
          if (f != null) {
            g.bitmap.add(e, true, b);
            this.addToCleanup(b);
          }
          return e;
        },
        combineToggleBitmaps: function (a, b) {
          var c = new T(a.width, a.height + b.height);
          c.copyPixels(a, a.rect, this._flashPointZero);
          this._flashPoint.x = 0;
          this._flashPoint.y = a.height;
          c.copyPixels(b, b.rect, this._flashPoint);
          return c;
        },
        assembleButtonFrames: function (a, b, c) {
          var d = b != null ? c != null ? new T(a.width, a.height * 3) : new T(a.width, a.height * 2) : new T(a.width, a.height);
          d.copyPixels(a, a.rect, this._flashPointZero);
          if (b != null) {
            this._flashPoint.x = 0;
            this._flashPoint.y = a.height;
            d.copyPixels(b, b.rect, this._flashPoint);
            if (c != null) {
              this._flashPoint.y = a.height * 2;
              d.copyPixels(c, c.rect, this._flashPoint);
            }
          }
          return d;
        },
        updateButton: function () {
          if (!this.skipButtonUpdate) {
            fd.prototype.updateButton.call(this);
          }
        },
        addToCleanup: function (a) {
          if (this._assetsToCleanup == null) {
            this._assetsToCleanup = [];
          }
          if (this._assetsToCleanup.indexOf(a) == -1) {
            this._assetsToCleanup.push(a);
          }
        },
        cleanup: function () {
          if (this._assetsToCleanup != null) {
            for (var a = 0, b = this._assetsToCleanup; a < b.length;) {
              var c = b[a];
              ++a;
              g.bitmap.removeByKey(c);
            }
            this._assetsToCleanup = null;
          }
        },
        fetchAndShowCorrectLabel: function () {
          if (this.has_toggle) {
            if (this.toggled && this.toggle_label != null) {
              this._spriteLabel.set_visible(false);
              this.toggle_label.set_visible(true);
              return this.toggle_label;
            }
            if (this.toggle_label != null) {
              this.toggle_label.set_visible(false);
            }
            this._spriteLabel.set_visible(true);
          }
          return this.label;
        },
        onUpHandler: function () {
          if (this.has_toggle) {
            this.set_toggled(!this.toggled);
          }
          fd.prototype.onUpHandler.call(this);
          if (this.label != null) {
            var a = this.fetchAndShowCorrectLabel();
            a.set_visible(this.toggled ? this.up_toggle_visible : this.up_visible);
            var b = this.toggled ? this.up_toggle_color : this.up_color;
            if (b != null) {
              a.set_color(b);
            }
          }
          if (this.broadcastToFlxUI) {
            Ma.event("click_button", this, null, this.params);
          }
        },
        onDownHandler: function () {
          fd.prototype.onDownHandler.call(this);
          if (this.label != null) {
            var a = this.fetchAndShowCorrectLabel();
            a.set_visible(this.toggled ? this.down_toggle_visible : this.down_visible);
            var b = this.toggled ? this.down_toggle_color : this.down_color;
            if (b != null) {
              a.set_color(b);
            }
          }
          if (this.broadcastToFlxUI) {
            Ma.event("down_button", this, null, this.params);
          }
        },
        onOverHandler: function () {
          fd.prototype.onOverHandler.call(this);
          this.inputOver.press();
          if (this.label != null) {
            var a = this.fetchAndShowCorrectLabel();
            a.set_visible(this.toggled ? this.over_toggle_visible : this.over_visible);
            var b = this.toggled ? this.over_toggle_color : this.over_color;
            if (b != null) {
              a.set_color(b);
            }
          }
          if (this.broadcastToFlxUI) {
            Ma.event("over_button", this, null, this.params);
          }
        },
        onOutHandler: function () {
          fd.prototype.onOutHandler.call(this);
          this.inputOver.release();
          if (this.label != null) {
            var a = this.fetchAndShowCorrectLabel();
            a.set_visible(this.toggled ? this.up_toggle_visible : this.up_visible);
            var b = this.toggled ? this.up_toggle_color : this.up_color;
            if (b != null) {
              a.set_color(b);
            }
          }
          if (this.broadcastToFlxUI) {
            Ma.event("out_button", this, null, this.params);
          }
        },
        set_x: function (a) {
          fd.prototype.set_x.call(this, a);
          if (this._spriteLabel != null) {
            this._spriteLabel.set_x(this.x + this._centerLabelOffset.x + this.labelOffsets[this.status].x);
            if (this.round_labels) {
              this._spriteLabel.set_x(this._spriteLabel.x + 0.5 | 0);
            }
            if (this.has_toggle && this.toggle_label != null) {
              this.toggle_label.set_x(this._spriteLabel.x);
            }
          }
          return a;
        },
        set_y: function (a) {
          fd.prototype.set_y.call(this, a);
          if (this.label != null) {
            this._spriteLabel.set_y(this.y + this._centerLabelOffset.y + this.labelOffsets[this.status].y);
            if (this.round_labels) {
              this._spriteLabel.set_y(this._spriteLabel.y + 0.5 | 0);
            }
            if (this.has_toggle && this.toggle_label != null) {
              this.toggle_label.set_y(this._spriteLabel.y);
            }
          }
          return a;
        },
        __class__: Ic,
        __properties__: q(fd.prototype.__properties__, {
          set_params: "set_params",
          set_skipButtonUpdate: "set_skipButtonUpdate",
          set_toggle_label: "set_toggle_label",
          get_justMousedOut: "get_justMousedOut",
          get_mouseIsOut: "get_mouseIsOut",
          get_mouseIsOver: "get_mouseIsOver",
          get_justMousedOver: "get_justMousedOver",
          set_toggled: "set_toggled"
        })
      });
      function $h() {}
      h["flixel.addons.ui.interfaces.ILabeled"] = $h;
      $h.__name__ = "flixel.addons.ui.interfaces.ILabeled";
      $h.__isInterface__ = true;
      $h.prototype = {
        __class__: $h
      };
      function vd(a, b, c, d, e, f, k) {
        if (k == null) {
          k = -1;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = true;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.up_style = this.over_style = this.down_style = this.up_toggle_style = this.over_toggle_style = this.down_toggle_style = null;
        Ic.call(this, a, b, d);
        this.set_color(k);
        if (c != null) {
          this.set_label(new ae(0, 0, 80, c, 8));
          this.label.setFormat(null, 8, 3355443, "center");
        }
        if (f) {
          this._no_graphic = true;
        }
        if (e) {
          this.resize(this.get_width(), this.get_height());
        } else if (this._no_graphic == 0) {
          this.doResize(this.get_width(), this.get_height(), false);
        } else {
          this.doResize(this.get_width(), this.get_height(), true);
        }
      }
      h["flixel.addons.ui.FlxUIButton"] = vd;
      vd.__name__ = "flixel.addons.ui.FlxUIButton";
      vd.__interfaces__ = [Ng, $h];
      vd.__super__ = Ic;
      vd.prototype = q(Ic.prototype, {
        setLabelFormat: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = true;
          }
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = 8;
          }
          if (this.label != null) {
            this.label.setFormat(a, b, c, d, e, f, k);
            return this.label;
          } else {
            return null;
          }
        },
        autoCenterLabel: function () {
          Ic.prototype.autoCenterLabel.call(this);
        },
        copyStyle: function (a) {
          Ic.prototype.copyStyle.call(this, a);
          if (a instanceof vd) {
            this.up_style = a.up_style;
            this.over_style = a.over_style;
            this.down_style = a.down_style;
            this.up_toggle_style = a.up_toggle_style;
            this.over_toggle_style = a.over_toggle_style;
            this.down_toggle_style = a.down_toggle_style;
            a = a.label;
            var b = a.textField.get_defaultTextFormat();
            if (a._font.indexOf(Qd.FONT_DEFAULT) == -1) {
              od.copyFromFlxText(a).apply(null, this.label);
            } else {
              var c = En.fromOpenFL(b.align);
              this.label.setFormat(null, b.size | 0, b.color, c, a.borderStyle, a.borderColor, a.textField.get_embedFonts());
            }
          }
        },
        getLabel: function () {
          return this.label;
        },
        resize: function (a, b) {
          Ic.prototype.resize.call(this, a, b);
        },
        destroy: function () {
          this._noIconGraphicsBkup = da.dispose(this._noIconGraphicsBkup);
          Ic.prototype.destroy.call(this);
        },
        loadDefaultGraphic: function () {},
        resetHelpers: function () {
          Ic.prototype.resetHelpers.call(this);
          if (this.label != null) {
            var a = this.label;
            var b = this.get_width() | 0;
            a.set_width(this.label.frameWidth = b);
            this.label.set_fieldWidth(this.label.get_width());
            this.label.set_size(this.label._defaultFormat.size | 0);
          }
        },
        onDownHandler: function () {
          Ic.prototype.onDownHandler.call(this);
          if (this.label != null) {
            if (this.toggled && this.down_toggle_style != null) {
              this.label.set_color(this.down_toggle_style.color);
              if (this.down_toggle_style.border != null) {
                this.label.set_borderStyle(this.down_toggle_style.border.style);
                this.label.set_borderColor(this.down_toggle_style.border.color);
                this.label.set_borderSize(this.down_toggle_style.border.size);
                this.label.set_borderQuality(this.down_toggle_style.border.quality);
              }
            } else if (!this.toggled && this.down_style != null) {
              this.label.set_color(this.down_style.color);
              if (this.down_style.border != null) {
                this.label.set_borderStyle(this.down_style.border.style);
                this.label.set_borderColor(this.down_style.border.color);
                this.label.set_borderSize(this.down_style.border.size);
                this.label.set_borderQuality(this.down_style.border.quality);
              }
            }
          }
        },
        onOverHandler: function () {
          Ic.prototype.onOverHandler.call(this);
          if (this.label != null) {
            if (this.toggled && this.over_toggle_style != null) {
              this.label.set_color(this.over_toggle_style.color);
              if (this.over_toggle_style.border != null) {
                this.label.set_borderStyle(this.over_toggle_style.border.style);
                this.label.set_borderColor(this.over_toggle_style.border.color);
                this.label.set_borderSize(this.over_toggle_style.border.size);
                this.label.set_borderQuality(this.over_toggle_style.border.quality);
              }
            } else if (!this.toggled && this.over_style != null) {
              this.label.set_color(this.over_style.color);
              if (this.over_style.border != null) {
                this.label.set_borderStyle(this.over_style.border.style);
                this.label.set_borderColor(this.over_style.border.color);
                this.label.set_borderSize(this.over_style.border.size);
                this.label.set_borderQuality(this.over_style.border.quality);
              }
            }
          }
        },
        onOutHandler: function () {
          Ic.prototype.onOutHandler.call(this);
          if (this.label != null) {
            if (this.toggled && this.up_toggle_style != null) {
              this.label.set_color(this.up_toggle_style.color);
              if (this.up_toggle_style.border != null) {
                this.label.set_borderStyle(this.up_toggle_style.border.style);
                this.label.set_borderColor(this.up_toggle_style.border.color);
                this.label.set_borderSize(this.up_toggle_style.border.size);
                this.label.set_borderQuality(this.up_toggle_style.border.quality);
              }
            } else if (!this.toggled && this.up_style != null) {
              this.label.set_color(this.up_style.color);
              if (this.up_style.border != null) {
                this.label.set_borderStyle(this.up_style.border.style);
                this.label.set_borderColor(this.up_style.border.color);
                this.label.set_borderSize(this.up_style.border.size);
                this.label.set_borderQuality(this.up_style.border.quality);
              }
            }
          }
        },
        onUpHandler: function () {
          Ic.prototype.onUpHandler.call(this);
          if (this.label != null) {
            if (this.toggled && this.up_toggle_style != null) {
              this.label.set_color(this.up_toggle_style.color);
              if (this.up_toggle_style.border != null) {
                this.label.set_borderStyle(this.up_toggle_style.border.style);
                this.label.set_borderColor(this.up_toggle_style.border.color);
                this.label.set_borderSize(this.up_toggle_style.border.size);
                this.label.set_borderQuality(this.up_toggle_style.border.quality);
              }
            } else if (!this.toggled && this.up_style != null) {
              this.label.set_color(this.up_style.color);
              if (this.up_style.border != null) {
                this.label.set_borderStyle(this.up_style.border.style);
                this.label.set_borderColor(this.up_style.border.color);
                this.label.set_borderSize(this.up_style.border.size);
                this.label.set_borderQuality(this.up_style.border.quality);
              }
            }
          }
        },
        __class__: vd
      });
      function zb(a, b, c, d, e, f, k, r) {
        if (f == null) {
          f = 100;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.skipButtonUpdate = false;
        this.box_space = 2;
        this.textX = this.textY = 0;
        this.checked = this.checkbox_dirty = false;
        this.max_width = -1;
        eb.call(this);
        this.callback = r;
        this.set_params(k);
        if (c == null) {
          c = "flixel/flixel-ui/img/check_box.png";
        }
        if (c instanceof G) {
          this.box = c;
        } else {
          this.box = new G();
          this.box.loadGraphic(c, true);
        }
        this.button = new vd(0, 0, e, l(this, this._clickCheck));
        this.button.label.setFormat(null, 8, 16777215, "left", Ta.OUTLINE);
        this.button.label.set_fieldWidth(f);
        this.button.up_color = 16777215;
        this.button.down_color = 16777215;
        this.button.over_color = 16777215;
        this.button.up_toggle_color = 16777215;
        this.button.down_toggle_color = 16777215;
        this.button.over_toggle_color = 16777215;
        this.button.loadGraphicSlice9(["", "", ""], this.box.get_width() + this.box_space + f | 0, this.box.get_height() | 0);
        this.max_width = this.box.get_width() + this.box_space + f | 0;
        this.button.onUp.callback = l(this, this._clickCheck);
        if (d == null) {
          d = "flixel/flixel-ui/img/check_mark.png";
        }
        if (d instanceof G) {
          this.mark = d;
        } else {
          this.mark = new G();
          this.mark.loadGraphic(d);
        }
        this.add(this.box);
        this.add(this.mark);
        this.add(this.button);
        this.anchorLabelX();
        this.anchorLabelY();
        this.set_checked(false);
        this.button.setAllLabelOffsets(0, 0);
        this.set_x(a);
        this.set_y(b);
        this.set_textX(0);
        this.set_textY(0);
      }
      h["flixel.addons.ui.FlxUICheckBox"] = zb;
      zb.__name__ = "flixel.addons.ui.FlxUICheckBox";
      zb.__interfaces__ = [jj, Oe, Af, $h];
      zb.__super__ = eb;
      zb.prototype = q(eb.prototype, {
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          this.button.set_skipButtonUpdate(this.skipButtonUpdate);
          return this.skipButtonUpdate;
        },
        set_params: function (a) {
          this.params = a;
          if (this.params == null) {
            this.params = [];
          }
          this.params.push({
            name: "checked",
            value: false
          });
          return this.params;
        },
        set_color: function (a) {
          if (this.button != null) {
            this.button.label.set_color(a);
          }
          return eb.prototype.set_color.call(this, a);
        },
        getLabel: function () {
          if (this.button == null) {
            return null;
          } else {
            return this.button.label;
          }
        },
        set_visible: function (a) {
          return this.visible = a;
        },
        set_textX: function (a) {
          this.textX = a;
          this.anchorLabelX();
          return this.textX;
        },
        set_textY: function (a) {
          this.textY = a;
          this.anchorLabelY();
          return this.textY;
        },
        anchorLabelX: function () {
          if (this.button != null) {
            this.button.label.offset.set_x(-(this.box.get_width() + this.box_space + this.textX));
          }
        },
        anchorLabelY: function () {
          if (this.button != null) {
            this.button.set_y(this.box.y + (this.box.get_height() - this.button.get_height()) / 2 + this.textY);
          }
        },
        destroy: function () {
          eb.prototype.destroy.call(this);
          if (this.mark != null) {
            this.mark.destroy();
            this.mark = null;
          }
          if (this.box != null) {
            this.box.destroy();
            this.box = null;
          }
          if (this.button != null) {
            this.button.destroy();
            this.button = null;
          }
        },
        set_text: function (a) {
          this.button.label.set_text(a);
          this.checkbox_dirty = true;
          return a;
        },
        update: function (a) {
          eb.prototype.update.call(this, a);
          if (this.checkbox_dirty && this.button.label != null) {
            if (this.button.label instanceof ae) {
              this.button.label.drawFrame();
            }
            this.anchorLabelX();
            this.anchorLabelY();
            this.button.set_width(this.box.frameWidth + this.box_space + this.button.label.textField.get_textWidth());
            this.checkbox_dirty = false;
          }
        },
        set_checked: function (a) {
          this.mark.set_visible(a);
          return this.checked = a;
        },
        _clickCheck: function () {
          if (this.visible) {
            this.set_checked(!this.checked);
            if (this.callback != null) {
              this.callback();
            }
            if (this.broadcastToFlxUI) {
              Ma.event("click_check_box", this, this.checked, this.params);
            }
          }
        },
        __class__: zb,
        __properties__: q(eb.prototype.__properties__, {
          set_text: "set_text",
          set_skipButtonUpdate: "set_skipButtonUpdate",
          set_textY: "set_textY",
          set_textX: "set_textX",
          set_params: "set_params",
          set_checked: "set_checked"
        })
      });
      function Ri(a, b, c, d) {
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 1;
        }
        this._clickTime = 0;
        this._clickPressed = false;
        this.inputMethod = this.lastMouseX = this.lastMouseY = 0;
        this.dispatchEvents = true;
        this.gamepadAutoConnect = Ok.FirstActive;
        this.listIndex = 0;
        this.location = -1;
        this.wrap = true;
        if (d == null) {
          d = g.height < 400 ? "flixel/flixel-ui/img/finger_small.png" : "flixel/flixel-ui/img/finger_big.png";
        }
        Bc.call(this, 0, 0, d);
        this.inputMethod = b;
        this._lists = [{
          x: 0,
          y: 0,
          width: 0,
          height: 0,
          widgets: []
        }];
        this._widgets = this._lists[0].widgets;
        this.anchor = new Jg(-2, 0, "left", "center", "right", "center");
        this.setDefaultKeys(c);
        this.callback = a;
        a = this.scrollFactor;
        c = b = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.set_x(b);
        a.set_y(c);
        if (g.mouse != null && g.mouse instanceof kj == 0) {
          this._newMouse = new kj(g.mouse.cursorContainer);
          g.set_mouse(this._newMouse);
        } else {
          this._newMouse = g.mouse;
        }
      }
      h["flixel.addons.ui.FlxUICursor"] = Ri;
      Ri.__name__ = "flixel.addons.ui.FlxUICursor";
      Ri.__super__ = Bc;
      Ri.prototype = q(Bc.prototype, {
        findVisibleLocation: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = true;
          }
          this.set_location(a);
          if (this.location != -1) {
            for (a = false; this._widgets[this.location] == null || this._widgets[this.location].visible == 0;) {
              if (b) {
                if (this.location == this._widgets.length - 1) {
                  if (c) {
                    if (a) {
                      this.set_location(-1);
                      break;
                    } else {
                      a = true;
                      this.set_location(0);
                    }
                  } else {
                    this.set_location(-1);
                    break;
                  }
                } else {
                  this.set_location(this.location + 1);
                }
              } else if (this.location == 0) {
                if (c) {
                  if (a) {
                    this.set_location(-1);
                    break;
                  } else {
                    a = true;
                    this.set_location(this._widgets.length - 1);
                  }
                } else {
                  this.set_location(-1);
                  break;
                }
              } else {
                this.set_location(this.location - 1);
              }
            }
          }
        },
        set_listIndex: function (a) {
          if (a >= this._lists.length) {
            a = this._lists.length - 1;
          } else if (a < 0) {
            a = 0;
          }
          this.listIndex = a;
          this.set_location(0);
          this._updateCursor();
          return this.listIndex;
        },
        set_visible: function (a) {
          return a = Bc.prototype.set_visible.call(this, a);
        },
        set_location: function (a) {
          if (a >= this._widgets.length) {
            a = this._widgets.length - 1;
          }
          this.location = a;
          this._updateCursor();
          return this.location;
        },
        set_gamepad: function (a) {
          this._gamepad = a;
          this.setDefaultKeys(this._defaultCode);
          for (var b = [this.keysUp, this.keysDown, this.keysLeft, this.keysRight, this.keysClick], c = 0; c < b.length;) {
            var d = b[c];
            ++c;
            if (d != null) {
              for (var e = 0; e < d.length;) {
                var f = d[e];
                ++e;
                if (f instanceof Cd) {
                  f.gamepad = this._gamepad;
                }
              }
            }
          }
          return a;
        },
        get_gamepad: function () {
          return this._gamepad;
        },
        destroy: function () {
          Bc.prototype.destroy.call(this);
          if (g.mouse == this._newMouse) {
            this._newMouse = null;
          }
          this.keysUp = da.destroyArray(this.keysUp);
          this.keysDown = da.destroyArray(this.keysDown);
          this.keysLeft = da.destroyArray(this.keysLeft);
          this.keysRight = da.destroyArray(this.keysRight);
          this.keysClick = da.destroyArray(this.keysClick);
          this.anchor = da.destroy(this.anchor);
          for (var a = 0, b = this._lists; a < b.length;) {
            var c = b[a];
            ++a;
            F.clearArraySoft(c.widgets);
          }
          F.clearArraySoft(this._lists);
          this._widgets = null;
        },
        update: function (a) {
          if (this.get_gamepad() == null || !this.get_gamepad().connected) {
            var b = this.getGamepad(false);
            if (this.get_gamepad() != b) {
              this.set_gamepad(b);
            }
          }
          if (this.lastMouseX != g.mouse.x || this.lastMouseY != g.mouse.y) {
            b = this.visible;
            if (this.scrollFactor.x == 0 && this.scrollFactor.y == 0) {
              this.jumpToXY(g.mouse.screenX, g.mouse.screenY);
            } else {
              this.jumpToXY(g.mouse.x, g.mouse.y);
            }
            this.set_visible(b);
            this.lastMouseX = g.mouse.x;
            this.lastMouseY = g.mouse.y;
          }
          this._checkKeys();
          this._clickTime += a;
          Bc.prototype.update.call(this, a);
        },
        addWidgetsFromUI: function (a) {
          if (a.cursorLists != null) {
            var b = 0;
            for (a = a.cursorLists; b < a.length;) {
              var c = a[b];
              ++b;
              this.addWidgetList(c);
            }
            this._widgets = this._lists[0].widgets;
            this.set_location(0);
            this.set_listIndex(0);
          } else {
            b = 0;
            a = a.group.members;
            while (b < a.length) {
              c = a[b];
              ++b;
              if (ta.__implements(c, jj) || c instanceof eb) {
                this.addWidget(c);
              }
            }
          }
        },
        jumpToXY: function (a, b) {
          var c = 0;
          var d = Infinity;
          var e = -1;
          var f = -1;
          if (this._lists != null) {
            for (var k = 0, r = this._lists; k < r.length;) {
              var g = r[k];
              ++k;
              for (var J = 0, h = g.widgets.length; J < h;) {
                var m = J++;
                var p = g.widgets[m];
                if (p.visible == 1 && a >= p.x && b >= p.y && a <= p.x + p.get_width() && b <= p.y + p.get_height()) {
                  var l = p.x + p.get_width() / 2 - a;
                  p = p.y + p.get_height() / 2 - b;
                  l = l * l + p * p;
                  if (l < d) {
                    d = l;
                    e = c;
                    f = m;
                  }
                }
              }
              ++c;
            }
            if (e != -1 && f != -1) {
              this.set_listIndex(e);
              this.set_location(f);
              return true;
            }
          } else {
            k = 0;
            for (r = this._widgets.length; k < r;) {
              m = k++;
              p = this._widgets[m];
              if (p.visible == 1 && a >= p.x && b >= p.y && a <= p.x + p.get_width() && b <= p.y + p.get_height()) {
                l = p.x + p.get_width() / 2 - a;
                p = p.y + p.get_height() / 2 - b;
                l = l * l + p * p;
                if (l < d) {
                  d = l;
                  f = m;
                }
              }
            }
            if (f != -1) {
              this.set_location(f);
              return true;
            }
          }
          return false;
        },
        addWidgetList: function (a) {
          for (var b = 0, c = this._lists; b < c.length;) {
            var d = c[b];
            ++b;
            if (ze.equals(d.widgets, a)) {
              return;
            }
          }
          d = c = Infinity;
          var e = -Infinity;
          var f = -Infinity;
          for (b = 0; b < a.length;) {
            var k = a[b];
            ++b;
            if (k.x < c) {
              c = k.x;
            }
            if (k.y < d) {
              d = k.y;
            }
            if (k.x + k.get_width() > e) {
              e = k.x;
            }
            if (k.y + k.get_height() > f) {
              f = k.y;
            }
          }
          if (this._lists.length == 1 && this._lists[0].widgets != null && this._lists[0].widgets.length == 0) {
            this._lists[0].widgets = [];
            this._lists[0].x = c | 0;
            this._lists[0].y = d | 0;
            this._lists[0].width = e - c | 0;
            this._lists[0].height = f - d | 0;
            b = this._lists[0];
          } else {
            this._lists.push({
              x: c | 0,
              y: d | 0,
              width: e - c | 0,
              height: f - d | 0,
              widgets: []
            });
            b = this._lists[this._lists.length - 1];
          }
          c = this._widgets;
          this._widgets = b.widgets;
          for (b = 0; b < a.length;) {
            d = a[b];
            ++b;
            this.addWidget(d);
          }
          this._widgets = c;
          this._lists.sort(l(this, this._sortXYWidgetList));
          b = 0;
          for (c = this._lists; b < c.length;) {
            a = c[b];
            ++b;
            a.widgets.sort(l(this, this._sortXYVisible));
          }
        },
        addWidget: function (a) {
          if (ta.__implements(a, jj)) {
            this._widgets.push(a);
          } else if (a instanceof eb) {
            var b = 0;
            for (a = a.group.members; b < a.length;) {
              var c = a[b];
              ++b;
              if (ta.__implements(c, ud)) {
                this.addWidget(c);
              }
            }
          }
          this._widgets.sort(l(this, this._sortXYVisible));
        },
        setDefaultKeys: function (a) {
          this._defaultCode = a;
          this._clearKeys();
          this._newKeys();
          var b = 1;
          if ((a & b) == b) {
            this._addToKeys(this.keysRight, new dd(9, null, [16]));
            this._addToKeys(this.keysLeft, new dd(9, [16]));
            this._addToKeys(this.keysClick, new dd(13));
          }
          b = 256;
          if ((a & b) == b) {
            this._addToKeys(this.keysRight, new dd(39));
            this._addToKeys(this.keysLeft, new dd(37));
            this._addToKeys(this.keysDown, new dd(40));
            this._addToKeys(this.keysUp, new dd(38));
            this._addToKeys(this.keysClick, new dd(13));
          }
          b = 16;
          if ((a & b) == b) {
            this._addToKeys(this.keysRight, new dd(68));
            this._addToKeys(this.keysLeft, new dd(65));
            this._addToKeys(this.keysDown, new dd(83));
            this._addToKeys(this.keysUp, new dd(87));
            this._addToKeys(this.keysClick, new dd(13));
          }
          b = 4096;
          if ((a & b) == b) {
            this._addToKeys(this.keysRight, new dd(102));
            this._addToKeys(this.keysLeft, new dd(100));
            this._addToKeys(this.keysDown, new dd(98));
            this._addToKeys(this.keysUp, new dd(104));
            this._addToKeys(this.keysClick, new dd(13));
          }
          if (this._gamepad == null || !this._gamepad.connected) {
            this._gamepad = this.getGamepad();
          }
          if (this._gamepad != null && this._gamepad.connected) {
            b = 65536;
            if ((a & b) == b) {
              this._addToKeys(this.keysLeft, new Cd(this.get_gamepad(), 13));
              this._addToKeys(this.keysRight, new Cd(this.get_gamepad(), 14));
              this._addToKeys(this.keysDown, new Cd(this.get_gamepad(), 12));
              this._addToKeys(this.keysUp, new Cd(this.get_gamepad(), 11));
              this._addToKeys(this.keysClick, new Cd(this.get_gamepad(), 0));
            }
            b = 268435456;
            if ((a & b) == b) {
              this._addToKeys(this.keysLeft, new Cd(this.get_gamepad(), 4));
              this._addToKeys(this.keysRight, new Cd(this.get_gamepad(), 5));
              this._addToKeys(this.keysClick, new Cd(this.get_gamepad(), 0));
            }
            b = 1048576;
            if ((a & b) == b) {
              this._addToKeys(this.keysLeft, new zf(this.get_gamepad(), {
                id: 19,
                axis: Ne.X,
                positive: false
              }));
              this._addToKeys(this.keysRight, new zf(this.get_gamepad(), {
                id: 19,
                axis: Ne.X,
                positive: true
              }));
              this._addToKeys(this.keysUp, new zf(this.get_gamepad(), {
                id: 19,
                axis: Ne.Y,
                positive: false
              }));
              this._addToKeys(this.keysDown, new zf(this.get_gamepad(), {
                id: 19,
                axis: Ne.Y,
                positive: true
              }));
              this._addToKeys(this.keysClick, new Cd(this.get_gamepad(), 0));
            }
            b = 16777216;
            if ((a & b) == b) {
              this._addToKeys(this.keysLeft, new zf(this.get_gamepad(), {
                id: 20,
                axis: Ne.X,
                positive: false
              }));
              this._addToKeys(this.keysRight, new zf(this.get_gamepad(), {
                id: 20,
                axis: Ne.X,
                positive: true
              }));
              this._addToKeys(this.keysUp, new zf(this.get_gamepad(), {
                id: 20,
                axis: Ne.Y,
                positive: false
              }));
              this._addToKeys(this.keysDown, new zf(this.get_gamepad(), {
                id: 20,
                axis: Ne.Y,
                positive: true
              }));
              this._addToKeys(this.keysClick, new Cd(this.get_gamepad(), 0));
            }
          }
        },
        getGamepad: function (a) {
          if (a == null) {
            a = true;
          }
          var b = this.gamepadAutoConnect;
          switch (b._hx_index) {
            case 0:
              var c = null;
              break;
            case 1:
              c = g.gamepads.getFirstActiveGamepad();
              break;
            case 2:
              c = g.gamepads.lastActive;
              break;
            case 3:
              c = b.i;
              c = g.gamepads._activeGamepads[c];
          }
          if (c != null && c.connected || !a) {
            return c;
          }
          b = 0;
          for (a = g.gamepads.get_numActiveGamepads(); b < a;) {
            c = b++;
            c = g.gamepads._activeGamepads[c];
            if (c != null && c.connected) {
              return c;
            }
          }
          return null;
        },
        _sortXYWidgetList: function (a, b) {
          if (a.y < b.y) {
            return -1;
          } else if (a.y > b.y) {
            return 1;
          } else if (a.x < b.x) {
            return -1;
          } else if (a.x > b.x) {
            return 1;
          } else {
            return 0;
          }
        },
        _sortXYVisible: function (a, b) {
          if (a.visible && !b.visible) {
            return -1;
          } else if (b.visible && !a.visible) {
            return 1;
          } else if (a.y < b.y) {
            return -1;
          } else if (a.y > b.y) {
            return 1;
          } else if (a.x < b.x) {
            return -1;
          } else if (a.x > b.x) {
            return 1;
          } else {
            return 0;
          }
        },
        _addToKeys: function (a, b) {
          var c = false;
          for (var d = 0; d < a.length;) {
            var e = a[d];
            ++d;
            if (b.equals(e)) {
              c = true;
              break;
            }
          }
          if (!c) {
            a.push(b);
          }
        },
        _clearKeys: function () {
          F.clearArray(this.keysUp);
          this.keysUp = null;
          F.clearArray(this.keysDown);
          this.keysDown = null;
          F.clearArray(this.keysLeft);
          this.keysLeft = null;
          F.clearArray(this.keysRight);
          this.keysRight = null;
          F.clearArray(this.keysClick);
          this.keysClick = null;
        },
        _newKeys: function () {
          this.keysUp = [];
          this.keysDown = [];
          this.keysLeft = [];
          this.keysRight = [];
          this.keysClick = [];
        },
        _checkKeys: function () {
          var a = this.visible == 0;
          var b = this.location;
          for (var c = 0, d = this.keysUp; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.justPressed()) {
              this._doInput(0, -1);
              break;
            }
          }
          c = 0;
          for (d = this.keysDown; c < d.length;) {
            e = d[c];
            ++c;
            if (e.justPressed()) {
              this._doInput(0, 1);
              break;
            }
          }
          c = 0;
          for (d = this.keysLeft; c < d.length;) {
            e = d[c];
            ++c;
            if (e.justPressed()) {
              this._doInput(-1, 0);
              break;
            }
          }
          c = 0;
          for (d = this.keysRight; c < d.length;) {
            e = d[c];
            ++c;
            if (e.justPressed()) {
              this._doInput(1, 0);
              break;
            }
          }
          if (a && this.visible && b != -1) {
            this.set_location(b);
          }
          if (this._clickKeysJustPressed()) {
            if (this.ignoreNextInput) {
              this.ignoreNextInput = false;
            } else {
              this._clickPressed = true;
              this._clickTime = 0;
              this._doPress();
            }
          }
          if (this._clickKeysPressed()) {
            this._clickPressed = true;
            this._doMouseMove();
          } else if (this._clickTime > 0 && this._clickPressed) {
            this._doRelease();
            this._clickPressed = false;
          }
        },
        _clickKeysJustPressed: function () {
          for (var a = 0, b = this.keysClick; a < b.length;) {
            var c = b[a];
            ++a;
            if (c.justPressed()) {
              return true;
            }
          }
          return false;
        },
        _clickKeysPressed: function () {
          for (var a = 0, b = this.keysClick; a < b.length;) {
            var c = b[a];
            ++a;
            if (c.pressed()) {
              return true;
            }
          }
          return false;
        },
        _getWidgetPoint: function (a) {
          if (a == null) {
            a = g.camera;
          }
          var b = this._widgets[this.location];
          if (b == null) {
            return null;
          }
          var c = null;
          if (b instanceof hc) {
            c = b.getScreenPosition();
          }
          c.set_x(c.x * a.totalScaleX);
          c.set_y(c.y * a.totalScaleY);
          if (c == null) {
            var d = b.x;
            c = b.y;
            if (c == null) {
              c = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (d == null) {
              d = 0;
            }
            c = fa.pool.get().set(d, c);
            c._inPool = false;
          }
          c.set_x(c.x + b.get_width() * a.totalScaleX * 0.5);
          c.set_y(c.y + b.get_height() * a.totalScaleY * 0.5);
          return c;
        },
        _doMouseMove: function (a) {
          var b = false;
          if (a == null) {
            a = this._getWidgetPoint();
            if (a == null) {
              return;
            }
            b = true;
          }
          if (this.dispatchEvents) {
            var c = g.mouse;
            c._globalScreenX = a.x / g.scaleMode.scale.x | 0;
            c._globalScreenY = a.y / g.scaleMode.scale.y | 0;
            c.updatePositions();
            if (this._newMouse != null) {
              this._newMouse.updateGlobalScreenPosition = false;
            }
            var d = na.get_current().stage;
            var e = a.x;
            var f = a.y;
            var k = na.get_current().stage;
            c = g.keys.pressed;
            var r = c.keyManager.checkStatusUnsafe(17, c.status);
            c = g.keys.pressed;
            var n = c.keyManager.checkStatusUnsafe(18, c.status);
            c = g.keys.pressed;
            d.dispatchEvent(new Xb("mouseMove", true, false, e, f, k, r, n, c.keyManager.checkStatusUnsafe(16, c.status)));
          }
          if (b) {
            a.put();
          }
        },
        _doPress: function (a) {
          var b = this._widgets[this.location];
          if (b != null) {
            var c = false;
            if (a == null) {
              a = this._getWidgetPoint();
              if (a == null) {
                return;
              }
              c = true;
            }
            if (this.dispatchEvents) {
              var d = a.x * g.camera.zoom;
              var e = a.y * g.camera.zoom;
              var f = g.keys.pressed;
              var k = f.keyManager.checkStatusUnsafe(17, f.status);
              f = g.keys.pressed;
              var r = f.keyManager.checkStatusUnsafe(18, f.status);
              f = g.keys.pressed;
              f = f.keyManager.checkStatusUnsafe(16, f.status);
              na.get_current().stage.dispatchEvent(new Xb("mouseDown", true, false, d, e, na.get_current().stage, k, r, f));
            }
            if (this.callback != null) {
              this.callback("cursor_down", b);
            }
            if (c) {
              a.put();
            }
          }
        },
        _doRelease: function (a) {
          var b = this._widgets[this.location];
          if (b != null) {
            var c = false;
            if (a == null) {
              a = this._getWidgetPoint();
              if (a == null) {
                return;
              }
              c = true;
            }
            if (this.dispatchEvents) {
              var d = a.x * g.camera.zoom;
              var e = a.y * g.camera.zoom;
              var f = g.keys.pressed;
              var k = f.keyManager.checkStatusUnsafe(17, f.status);
              f = g.keys.pressed;
              var r = f.keyManager.checkStatusUnsafe(18, f.status);
              f = g.keys.pressed;
              f = f.keyManager.checkStatusUnsafe(16, f.status);
              na.get_current().stage.dispatchEvent(new Xb("mouseUp", true, false, d, e, na.get_current().stage, k, r, f));
              if (this._clickPressed) {
                na.get_current().stage.dispatchEvent(new Xb("click", true, false, d, e, na.get_current().stage, k, r, f));
              }
            }
            if (this.callback != null) {
              this.callback("cursor_click", b);
            }
            if (c) {
              a.put();
            }
            if (this._newMouse != null) {
              this._newMouse.updateGlobalScreenPosition = true;
              f = this._newMouse;
              a = g.game.get_mouseX() | 0;
              b = g.game.get_mouseY() | 0;
              f._globalScreenX = a / g.scaleMode.scale.x | 0;
              f._globalScreenY = b / g.scaleMode.scale.y | 0;
              f.updatePositions();
            }
          }
        },
        _findNextY: function (a, b, c, d) {
          var e = 0;
          var f = 0;
          var k = 0;
          if (c != null) {
            e = c[b].x | 0;
            f = c[b].y | 0;
            k = c.length;
          } else if (d != null) {
            e = d[b].x;
            f = d[b].y;
            k = d.length;
          }
          for (var r = 0, g = 0, J = Infinity, h = Infinity, m = J, p = h, l = -1, q = 0; q < k;) {
            var t = q++;
            if (t != b) {
              if (c != null) {
                r = c[t].x | 0;
                g = c[t].y | 0;
              } else if (d != null) {
                r = d[t].x;
                g = d[t].y;
              }
              h = g - f;
              if ((h < 0 ? -1 : 1) == (a < 0 ? -1 : 1) && h != 0) {
                h = Math.abs(h);
                if (h < p) {
                  p = h;
                  m = Math.abs(e - r);
                  l = t;
                } else if (h == p) {
                  J = Math.abs(e - r);
                  if (J < m) {
                    m = J;
                    l = t;
                  }
                }
              }
            }
          }
          return l;
        },
        _wrapX: function (a, b, c) {
          if (b + a < 0) {
            b = b + a + c;
          } else if (b + a >= c) {
            b = b + a - c;
          }
          return b;
        },
        _wrapY: function (a, b, c, d) {
          var e;
          var f;
          var k = -1;
          var r = Infinity;
          var g = f = 0;
          var J = 0;
          var h = 0;
          if (c != null) {
            g = c.length;
            J = c[b].x | 0;
            h = c[b].y | 0;
          }
          if (d != null) {
            g = d.length;
            J = d[b].x;
            h = d[b].y;
          }
          for (var m = 0; m < g;) {
            var p = m++;
            if (p != this.location) {
              var l = e = 0;
              if (c != null) {
                e = c[p].x | 0;
                l = c[p].y | 0;
              } else if (d != null) {
                e = d[p].x | 0;
                l = d[p].y | 0;
              }
              l -= h;
              if ((l < 0 ? -1 : 1) == (a < 0 ? -1 : 1) == 0 && l != 0) {
                l = Math.abs(l);
                if (l > f) {
                  f = l;
                  r = Math.abs(J - e);
                  k = p;
                } else if (l == f) {
                  e = Math.abs(J - e);
                  if (e < r) {
                    r = e;
                    k = p;
                  }
                }
              }
            }
          }
          if (k != -1) {
            b = k;
          }
          return b;
        },
        _doInput: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (this.ignoreNextInput) {
            this.ignoreNextInput = false;
          } else {
            var d = null;
            if (b == 0) {
              if (this.location + a >= 0 && this.location + a < this._widgets.length) {
                this.set_location(this.location + a);
              } else if (this.wrap) {
                if (this._lists.length == 1) {
                  this.set_location(this._wrapX(a, this.location, this._widgets.length));
                } else {
                  if (this.listIndex + a >= 0 && this.listIndex + a < this._lists.length) {
                    this.set_listIndex(this.listIndex + a);
                  } else {
                    this.set_listIndex(this._wrapX(a, this.listIndex, this._lists.length));
                  }
                  if (a == -1) {
                    this.set_location(this._widgets.length - 1);
                  }
                }
              }
              d = this._widgets[this.location];
            } else {
              var e = this._findNextY(b, this.location, this._widgets, null);
              if (e != -1) {
                this.set_location(e);
                d = this._widgets[this.location];
              } else if (this.wrap) {
                if (this._lists.length == 1) {
                  this.set_location(this._wrapY(b, this.location, this._widgets, null));
                } else {
                  d = this._findNextY(b, this.listIndex, null, this._lists);
                  if (d != -1) {
                    this.set_listIndex(d);
                  } else {
                    this.set_listIndex(this._wrapY(b, this.listIndex, null, this._lists));
                  }
                  if (b == -1) {
                    this.set_location(this._widgets.length - 1);
                  }
                }
                d = this._widgets[this.location];
              }
            }
            if (d != null && this._widgets != null && d.visible == 0 && c < this._widgets.length) {
              this._doInput(a, b, c + 1);
            } else if (this.callback != null) {
              this.callback("cursor_jump", d);
            }
          }
        },
        _updateCursor: function () {
          this._widgets = this._lists[this.listIndex].widgets;
          if (this.location < 0 || this._lists == null || this._widgets == null) {
            this.set_visible(false);
          } else {
            this.set_visible(this.set_active(true));
            var a = this._widgets[this.location];
            var b = false;
            var c = false;
            if (a != null) {
              var d = a;
              if (d instanceof G) {
                var e = d;
                if (e != null && e.scrollFactor != null) {
                  var f = this.scrollFactor;
                  var k = e.scrollFactor.x;
                  e = e.scrollFactor.y;
                  if (e == null) {
                    e = 0;
                  }
                  if (k == null) {
                    k = 0;
                  }
                  f.set_x(k);
                  f.set_y(e);
                }
              }
              if (a instanceof zb) {
                d = d.box;
              }
              this.anchor.anchorThing(this, d);
              if (this.x < 0) {
                this._flipAnchor("left", d);
                b = true;
              } else if (this.x > g.width + this.get_width()) {
                this._flipAnchor("right", d);
                b = true;
              }
              if (this.y < 0) {
                this._flipAnchor("top", d);
                c = true;
              } else if (this.y > g.height + this.get_height()) {
                this._flipAnchor("bottom", d);
                c = true;
              }
              this.set_flipX(b);
              this.set_flipY(c);
            }
          }
        },
        _flipAnchor: function (a, b) {
          var c = null;
          switch (a) {
            case "bottom":
              if (this.anchor.y.side == "bottom") {
                c = this._bottomAnchor = this.anchor.getFlipped(true, false, this._bottomAnchor);
              }
              break;
            case "left":
              if (this.anchor.x.side == "left") {
                c = this._leftAnchor = this.anchor.getFlipped(true, false, this._leftAnchor);
              }
              break;
            case "right":
              if (this.anchor.x.side == "right") {
                this._topAnchor = this.anchor.getFlipped(true, false, this._rightAnchor);
                c = this._rightAnchor;
              }
              break;
            case "top":
              if (this.anchor.y.side == "top") {
                c = this._topAnchor = this.anchor.getFlipped(true, false, this._topAnchor);
              }
          }
          if (c != null) {
            c.anchorThing(this, b);
          }
        },
        __class__: Ri,
        __properties__: q(Bc.prototype.__properties__, {
          set_gamepad: "set_gamepad",
          get_gamepad: "get_gamepad",
          set_listIndex: "set_listIndex",
          set_location: "set_location"
        })
      });
      var Ok = x["flixel.addons.ui.GamepadAutoConnectPreference"] = {
        __ename__: "flixel.addons.ui.GamepadAutoConnectPreference",
        __constructs__: null,
        Never: {
          _hx_name: "Never",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.GamepadAutoConnectPreference",
          toString: p
        },
        FirstActive: {
          _hx_name: "FirstActive",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.GamepadAutoConnectPreference",
          toString: p
        },
        LastActive: {
          _hx_name: "LastActive",
          _hx_index: 2,
          __enum__: "flixel.addons.ui.GamepadAutoConnectPreference",
          toString: p
        },
        GamepadID: (u = function (a) {
          return {
            _hx_index: 3,
            i: a,
            __enum__: "flixel.addons.ui.GamepadAutoConnectPreference",
            toString: p
          };
        }, u._hx_name = "GamepadID", u.__params__ = ["i"], u)
      };
      Ok.__constructs__ = [Ok.Never, Ok.FirstActive, Ok.LastActive, Ok.GamepadID];
      function vc(a, b, c, d, e, f, k, r) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.dropDirection = lj.Down;
        this.list = [];
        this.canScroll = true;
        this.currentScroll = 0;
        eb.call(this, a, b);
        this.callback = d;
        this.header = e;
        this.dropPanel = f;
        if (this.header == null) {
          this.header = new hj();
        }
        if (this.dropPanel == null) {
          a = new ea(0, 0, this.header.background.get_width(), this.header.background.get_height());
          this.dropPanel = new ba(0, 0, "flixel/flixel-ui/img/box.png", a, [1, 1, 14, 14]);
        }
        if (c != null) {
          a = 0;
          for (k = c.length; a < k;) {
            b = a++;
            d = c[b];
            this.list.push(this.makeListButton(b, d.label, d.name));
          }
          this.selectSomething(c[0].name, c[0].label);
        } else if (k != null) {
          for (a = 0; a < k.length;) {
            c = k[a];
            ++a;
            this.list.push(c);
            c.resize(this.header.background.get_width(), this.header.background.get_height());
            c.set_x(1);
          }
        }
        this.updateButtonPositions();
        this.dropPanel.resize(this.header.background.get_width(), this.getPanelHeight());
        this.dropPanel.set_visible(false);
        this.add(this.dropPanel);
        a = 0;
        for (k = this.list; a < k.length;) {
          c = k[a];
          ++a;
          this.add(c);
          c.set_visible(false);
        }
        this.header.button.onUp.callback = l(this, this.onDropdown);
        this.add(this.header);
      }
      h["flixel.addons.ui.FlxUIDropDownMenu"] = vc;
      vc.__name__ = "flixel.addons.ui.FlxUIDropDownMenu";
      vc.__interfaces__ = [Oe, Af, ud];
      vc.makeStrIdLabelArray = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = [];
        for (var d = 0, e = a.length; d < e;) {
          var f = d++;
          var k = a[f];
          if (b) {
            k = f == null ? "null" : "" + f;
          }
          c[f] = new Nk(k, a[f]);
        }
        return c;
      };
      vc.__super__ = eb;
      vc.prototype = q(eb.prototype, {
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          this.header.button.set_skipButtonUpdate(a);
          return a;
        },
        get_selectedId: function () {
          return this._selectedId;
        },
        set_selectedId: function (a) {
          if (this._selectedId == a) {
            return a;
          }
          var b = 0;
          for (var c = 0, d = this.list; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && e.name == a) {
              b = this.list[b];
              this._selectedId = a;
              if (b.label != null) {
                this._selectedLabel = b.label.text;
                this.header.text.set_text(b.label.text);
              } else {
                this._selectedLabel = "";
                this.header.text.set_text("");
              }
              break;
            }
            ++b;
          }
          return a;
        },
        get_selectedLabel: function () {
          return this._selectedLabel;
        },
        set_selectedLabel: function (a) {
          if (this._selectedLabel == a) {
            return a;
          }
          var b = 0;
          for (var c = 0, d = this.list; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.label.text == a) {
              this._selectedId = this.list[b].name;
              this._selectedLabel = a;
              this.header.text.set_text(a);
              break;
            }
            ++b;
          }
          return a;
        },
        set_params: function (a) {
          return this.params = a;
        },
        updateButtonPositions: function () {
          var a = this.header.background.get_height();
          this.dropPanel.set_y(this.header.background.y);
          if (this.dropsUp()) {
            var b = this.dropPanel;
            b.set_y(b.y - this.getPanelHeight());
          } else {
            b = this.dropPanel;
            b.set_y(b.y + a);
          }
          b = this.dropPanel.y;
          for (var c = 0, d = this.currentScroll; c < d;) {
            var e = c++;
            e = this.list[e];
            if (e != null) {
              e.set_y(g.height + 250);
            }
          }
          c = this.currentScroll;
          for (d = this.list.length; c < d;) {
            e = c++;
            e = this.list[e];
            if (e != null) {
              e.set_y(b);
              b += a;
            }
          }
        },
        set_visible: function (a) {
          var b = this.dropPanel.visible;
          var c = [];
          for (var d = 0, e = this.list.length; d < e;) {
            var f = d++;
            if (this.list[f] != null) {
              c.push(this.list[f].visible);
            } else {
              c.push(false);
            }
          }
          eb.prototype.set_visible.call(this, a);
          this.dropPanel.set_visible(b);
          d = 0;
          for (e = this.list.length; d < e;) {
            f = d++;
            if (this.list[f] != null) {
              this.list[f].set_visible(c[f]);
            }
          }
          return a;
        },
        dropsUp: function () {
          if (this.dropDirection != lj.Up) {
            if (this.dropDirection == lj.Automatic) {
              return this.exceedsHeight();
            } else {
              return false;
            }
          } else {
            return true;
          }
        },
        exceedsHeight: function () {
          return this.y + this.getPanelHeight() + this.header.background.get_height() > g.height;
        },
        getPanelHeight: function () {
          return this.list.length * this.header.background.get_height();
        },
        setData: function (a) {
          var b = 0;
          if (a != null) {
            for (var c = 0; c < a.length;) {
              var d = a[c];
              ++c;
              var e = false;
              if (this.list != null) {
                if (b <= this.list.length - 1) {
                  var f = this.list[b];
                  if (f != null) {
                    f.label.set_text(d.label);
                    this.list[b].name = d.name;
                    e = true;
                  }
                }
              } else {
                this.list = [];
              }
              if (!e) {
                d = this.makeListButton(b, d.label, d.name);
                this.list.push(d);
                this.add(d);
                d.set_visible(false);
              }
              ++b;
            }
            if (this.list.length > a.length) {
              c = a.length;
              b = this.list.length;
              while (c < b) {
                c++;
                d = this.list.pop();
                d.set_visible(false);
                d.set_active(false);
                this.remove(d, true);
                d.destroy();
              }
            }
            this.selectSomething(a[0].name, a[0].label);
          }
          this.dropPanel.resize(this.header.background.get_width(), this.getPanelHeight());
          this.updateButtonPositions();
        },
        selectSomething: function (a, b) {
          this.header.text.set_text(b);
          this.set_selectedId(a);
          this.set_selectedLabel(b);
        },
        makeListButton: function (a, b, c) {
          b = new vd(0, 0, b);
          b.broadcastToFlxUI = false;
          var d = this;
          b.onUp.callback = function () {
            d.onClickItem(a);
          };
          b.name = c;
          b.loadGraphicSlice9(["flixel/flixel-ui/img/invis.png", "flixel/flixel-ui/img/hilight.png", "flixel/flixel-ui/img/hilight.png"], this.header.background.get_width() | 0, this.header.background.get_height() | 0, [[1, 1, 3, 3], [1, 1, 3, 3], [1, 1, 3, 3]], 0);
          c = b.labelOffsets;
          c[2].set_y(c[2].y - 1);
          b.up_color = -16777216;
          b.over_color = -1;
          b.down_color = -1;
          b.resize(this.header.background.get_width() - 2, this.header.background.get_height() - 1);
          b.label.set_alignment("left");
          b.autoCenterLabel();
          b.set_x(1);
          c = 0;
          for (var e = b.labelOffsets; c < e.length;) {
            var f = e[c];
            ++c;
            f.set_x(f.x + 2);
          }
          return b;
        },
        update: function (a) {
          eb.prototype.update.call(this, a);
          if (this.dropPanel.visible) {
            if (this.list.length > 1 && this.canScroll) {
              a = this.currentScroll;
              if (g.mouse.wheel <= 0) {
                var b = g.keys.justPressed;
                b = b.keyManager.checkStatusUnsafe(38, b.status);
              } else {
                b = true;
              }
              if (b) {
                --this.currentScroll;
                if (this.currentScroll < 0) {
                  this.currentScroll = 0;
                }
              } else {
                if (g.mouse.wheel >= 0) {
                  b = g.keys.justPressed;
                  b = b.keyManager.checkStatusUnsafe(40, b.status);
                } else {
                  b = true;
                }
                if (b) {
                  this.currentScroll++;
                  if (this.currentScroll >= this.list.length) {
                    this.currentScroll = this.list.length - 1;
                  }
                }
              }
              if (a != this.currentScroll) {
                this.updateButtonPositions();
              }
            }
            if (g.mouse._leftButton.current == 2 && !g.mouse.overlaps(this, this.get_camera())) {
              this.showList(false);
            }
          }
        },
        destroy: function () {
          eb.prototype.destroy.call(this);
          this.dropPanel = da.destroy(this.dropPanel);
          this.list = da.destroyArray(this.list);
          this.callback = null;
        },
        showList: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            d.set_visible(a);
            d.set_active(a);
          }
          this.dropPanel.set_visible(a);
          if (this.currentScroll != 0) {
            this.currentScroll = 0;
            this.updateButtonPositions();
          }
          Ma.forceFocus(a, this);
        },
        onDropdown: function () {
          if (this.dropPanel.visible) {
            this.showList(false);
          } else {
            this.showList(true);
          }
        },
        onClickItem: function (a) {
          a = this.list[a];
          this.selectSomething(a.name, a.label.text);
          this.showList(false);
          if (this.callback != null) {
            this.callback(a.name);
          }
          if (this.broadcastToFlxUI) {
            Ma.event("click_dropdown", this, a.name, this.params);
          }
        },
        __class__: vc,
        __properties__: q(eb.prototype.__properties__, {
          set_params: "set_params",
          set_selectedLabel: "set_selectedLabel",
          get_selectedLabel: "get_selectedLabel",
          set_selectedId: "set_selectedId",
          get_selectedId: "get_selectedId",
          set_skipButtonUpdate: "set_skipButtonUpdate"
        })
      });
      function hj(a, b, c, d) {
        if (a == null) {
          a = 120;
        }
        eb.call(this);
        this.background = b;
        this.text = c;
        this.button = d;
        if (this.background == null) {
          this.background = new ba(0, 0, "flixel/flixel-ui/img/box.png", new ea(0, 0, a, 20), [1, 1, 14, 14]);
        }
        if (this.button == null) {
          this.button = new ff(0, 0, new G(0, 0, "flixel/flixel-ui/img/dropdown_mark.png"));
          this.button.loadGraphicSlice9(["flixel/flixel-ui/img/button_thin.png"], 80, 20, [Yb.toIntArray("6,6,11,11")], 0, -1, false, 18, 18);
        }
        this.button.resize(this.background.get_height(), this.background.get_height());
        this.button.set_x(this.background.x + this.background.get_width() - this.button.get_width());
        this.button.set_width(a);
        b = this.button;
        b.offset.set_x(b.offset.x - (a - this.button.frameWidth));
        this.button.set_x(this.offset.x);
        b = this.button.label;
        b.offset.set_x(b.offset.x + this.button.offset.x);
        if (this.text == null) {
          this.text = new ae(0, 0, this.background.get_width() | 0);
        }
        this.text.setPosition(2, 4);
        this.text.set_color(-16777216);
        this.add(this.background);
        this.add(this.button);
        this.add(this.text);
      }
      h["flixel.addons.ui.FlxUIDropDownHeader"] = hj;
      hj.__name__ = "flixel.addons.ui.FlxUIDropDownHeader";
      hj.__super__ = eb;
      hj.prototype = q(eb.prototype, {
        destroy: function () {
          eb.prototype.destroy.call(this);
          this.background = da.destroy(this.background);
          this.text = da.destroy(this.text);
          this.button = da.destroy(this.button);
        },
        __class__: hj
      });
      var lj = x["flixel.addons.ui.FlxUIDropDownMenuDropDirection"] = {
        __ename__: "flixel.addons.ui.FlxUIDropDownMenuDropDirection",
        __constructs__: null,
        Automatic: {
          _hx_name: "Automatic",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.FlxUIDropDownMenuDropDirection",
          toString: p
        },
        Down: {
          _hx_name: "Down",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.FlxUIDropDownMenuDropDirection",
          toString: p
        },
        Up: {
          _hx_name: "Up",
          _hx_index: 2,
          __enum__: "flixel.addons.ui.FlxUIDropDownMenuDropDirection",
          toString: p
        }
      };
      lj.__constructs__ = [lj.Automatic, lj.Down, lj.Up];
      function gb(a, b, c, d, e, f, k, r) {
        this.broadcastToFlxUI = true;
        ef.call(this, a, b, c, d, e, f, k, r);
      }
      h["flixel.addons.ui.FlxUIInputText"] = gb;
      gb.__name__ = "flixel.addons.ui.FlxUIInputText";
      gb.__interfaces__ = [Oe, ud, ed];
      gb.__super__ = ef;
      gb.prototype = q(ef.prototype, {
        resize: function (a, b) {
          this.set_width(a);
          this.set_height(b);
          this.calcFrame();
        },
        onChange: function (a) {
          ef.prototype.onChange.call(this, a);
          if (this.broadcastToFlxUI) {
            switch (a) {
              case "backspace":
              case "delete":
                Ma.event("delete_input_text", this, this.text, this.params);
                Ma.event("change_input_text", this, this.text, this.params);
                break;
              case "copy":
                Ma.event("copy_input_text", this, this.text, this.params);
                break;
              case "cut":
                Ma.event("cut_input_text", this, this.text, this.params);
                Ma.event("change_input_text", this, this.text, this.params);
                break;
              case "enter":
                Ma.event("enter_input_text", this, this.text, this.params);
                break;
              case "input":
                Ma.event("input_input_text", this, this.text, this.params);
                Ma.event("change_input_text", this, this.text, this.params);
                break;
              case "paste":
                Ma.event("paste_input_text", this, this.text, this.params);
                Ma.event("change_input_text", this, this.text, this.params);
            }
          }
        },
        __class__: gb
      });
      function ij(a, b, c, d, e, f) {
        this.thickness = 1;
        this.length = 10;
        this.axis = Lg.HORIZONTAL;
        Bc.call(this, a, b);
        this.makeGraphic(2, 2, -1);
        this.set_color(f);
        this.set_axis(c);
        this.set_length(d);
        this.set_thickness(e);
      }
      h["flixel.addons.ui.FlxUILine"] = ij;
      ij.__name__ = "flixel.addons.ui.FlxUILine";
      ij.__interfaces__ = [ed];
      ij.__super__ = Bc;
      ij.prototype = q(Bc.prototype, {
        set_axis: function (a) {
          this.axis = a;
          this.refresh();
          return a;
        },
        set_length: function (a) {
          this.length = a;
          this.refresh();
          return a;
        },
        set_thickness: function (a) {
          this.thickness = a;
          this.refresh();
          return a;
        },
        refresh: function () {
          if (this.axis == Lg.HORIZONTAL) {
            var a = this.scale;
            var b = this.length * 0.5;
            var c = this.thickness * 0.5;
          } else {
            a = this.scale;
            b = this.thickness * 0.5;
            c = this.length * 0.5;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this.updateHitbox();
        },
        resize: function (a, b) {
          if (this.axis == Lg.HORIZONTAL) {
            this.set_length(a);
            this.set_thickness(b);
          } else {
            this.set_length(b);
            this.set_thickness(a);
          }
        },
        __class__: ij,
        __properties__: q(Bc.prototype.__properties__, {
          set_thickness: "set_thickness",
          set_length: "set_length",
          set_axis: "set_axis"
        })
      });
      var Lg = x["flixel.addons.ui.LineAxis"] = {
        __ename__: "flixel.addons.ui.LineAxis",
        __constructs__: null,
        HORIZONTAL: {
          _hx_name: "HORIZONTAL",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.LineAxis",
          toString: p
        },
        VERTICAL: {
          _hx_name: "VERTICAL",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.LineAxis",
          toString: p
        }
      };
      Lg.__constructs__ = [Lg.HORIZONTAL, Lg.VERTICAL];
      function Pk(a, b, c, d, e, f, k, r, g, J, h, m) {
        if (r == null) {
          r = 0;
        }
        if (k == null) {
          k = 1;
        }
        if (f == null) {
          f = "<X> more...";
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._skipRefresh = false;
        this.scrollIndex = 0;
        this._skipRefresh = true;
        eb.call(this, a, b);
        this.set_stacking(k);
        this.set_spacing(r);
        if (c != null) {
          for (var n = 0; n < c.length;) {
            a = c[n];
            ++n;
            this.add(a);
          }
        }
        this.prevButton = h;
        this.nextButton = m;
        this.prevButtonOffset = g;
        this.nextButtonOffset = J;
        this.set_moreString(f);
        if (this.prevButton == null) {
          n = this;
          c = new vd(0, 0, " ", function () {
            n.onClick(-1);
          });
          if (this.stacking == 0) {
            c.loadGraphicsUpOverDown("flixel/flixel-ui/img/button_arrow_left.png");
            c.label.set_width(c.label.set_fieldWidth(100));
            c.label.set_text(this.getMoreString(0));
            c.setAllLabelOffsets(c.get_width() - c.label.get_width(), c.get_height() + 2);
            c.label.set_alignment("right");
          } else {
            c.loadGraphicsUpOverDown("flixel/flixel-ui/img/button_arrow_up.png");
            c.label.set_width(c.label.set_fieldWidth(100));
            c.label.set_text(this.getMoreString(0));
            c.setAllLabelOffsets(0, 0);
            c.setCenterLabelOffset(c.get_width() + 2, c.get_height() - c.label.get_height());
            c.label.set_alignment("left");
          }
          this.prevButton = c;
        } else {
          if (this.prevButton instanceof vd) {
            c = this.prevButton;
            var p = this;
            c.onUp.callback = function () {
              p.onClick(-1);
            };
          }
          if (this.prevButton instanceof ff) {
            c = this.prevButton;
            var l = this;
            c.onUp.callback = function () {
              l.onClick(-1);
            };
          }
        }
        if (this.nextButton == null) {
          var za = this;
          c = new vd(0, 0, " ", function () {
            za.onClick(1);
          });
          if (this.stacking == 0) {
            c.loadGraphicsUpOverDown("flixel/flixel-ui/img/button_arrow_right.png");
            c.label.set_width(c.label.set_fieldWidth(100));
            c.label.set_text(this.getMoreString(0));
            c.setAllLabelOffsets(0, c.get_height() + 2);
          } else {
            c.loadGraphicsUpOverDown("flixel/flixel-ui/img/button_arrow_down.png");
            c.label.set_width(c.label.set_fieldWidth(100));
            c.label.set_text(this.getMoreString(0));
            c.setAllLabelOffsets(0, 0);
            c.setCenterLabelOffset(c.get_width() + 2, 0);
          }
          c.label.set_alignment("left");
          this.nextButton = c;
        } else {
          if (this.nextButton instanceof vd) {
            c = this.nextButton;
            var q = this;
            c.onUp.callback = function () {
              q.onClick(1);
            };
          }
          if (this.nextButton instanceof ff) {
            c = this.nextButton;
            var t = this;
            c.onUp.callback = function () {
              t.onClick(1);
            };
          }
        }
        if (this.prevButtonOffset == null) {
          c = f = 0;
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          c = fa.pool.get().set(f, c);
          c._inPool = false;
          this.prevButtonOffset = c;
        }
        if (this.nextButtonOffset == null) {
          c = f = 0;
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          c = fa.pool.get().set(f, c);
          c._inPool = false;
          this.nextButtonOffset = c;
        }
        this._skipRefresh = false;
        this.setSize(d, e);
      }
      h["flixel.addons.ui.FlxUIList"] = Pk;
      Pk.__name__ = "flixel.addons.ui.FlxUIList";
      Pk.__super__ = eb;
      Pk.prototype = q(eb.prototype, {
        set_scrollIndex: function (a) {
          this.scrollIndex = a;
          this.refreshList();
          return a;
        },
        set_stacking: function (a) {
          this.stacking = a;
          this.refreshList();
          return a;
        },
        set_spacing: function (a) {
          this.spacing = a;
          this.refreshList();
          return a;
        },
        set_moreString: function (a) {
          this.moreString = a;
          this.refreshList();
          return this.moreString;
        },
        destroy: function () {
          this.prevButton = da.destroy(this.prevButton);
          this.nextButton = da.destroy(this.nextButton);
          this.prevButtonOffset = da.put(this.prevButtonOffset);
          this.nextButtonOffset = da.put(this.nextButtonOffset);
          eb.prototype.destroy.call(this);
        },
        setSize: function (a, b) {
          var c = false;
          if (this._skipRefresh == 0) {
            c = this._skipRefresh = true;
          }
          this.set_width(a);
          this.set_height(b);
          if (c) {
            this._skipRefresh = false;
          }
          this.refreshList();
        },
        add: function (a) {
          eb.prototype.add.call(this, a);
          this.refreshList();
          return a;
        },
        safeAdd: function (a) {
          return eb.prototype.add.call(this, a);
        },
        getMoreString: function (a) {
          for (var b = this.moreString; b.indexOf("<X>") != -1;) {
            b = w.replace(b, "<X>", a == null ? "null" : "" + a);
          }
          return b;
        },
        set_visible: function (a) {
          eb.prototype.set_visible.call(this, a);
          this.refreshList();
          return a;
        },
        onClick: function (a) {
          this.set_scrollIndex(this.scrollIndex + a);
          this.refreshList();
        },
        refreshList: function () {
          if (!this._skipRefresh) {
            this.autoBounds = false;
            if (this.group.members.indexOf(this.prevButton) != -1) {
              this.remove(this.prevButton, true);
            }
            if (this.group.members.indexOf(this.nextButton) != -1) {
              this.remove(this.nextButton, true);
            }
            var a = 0;
            var b = 0;
            var c = 0;
            if (this.stacking == 0) {
              this.prevButton.set_x(this.prevButtonOffset.x - this.prevButton.get_width() - 2);
              this.prevButton.set_y(this.prevButtonOffset.y);
              this.nextButton.set_x(this.nextButtonOffset.x + this.get_width() + 2);
              this.nextButton.set_y(this.nextButtonOffset.y);
            } else {
              this.prevButton.set_x(this.prevButtonOffset.x);
              this.prevButton.set_y(this.prevButtonOffset.y - this.prevButton.get_height() - 2);
              this.nextButton.set_x(this.nextButtonOffset.x);
              this.nextButton.set_y(this.nextButtonOffset.y + this.get_height() + 2);
            }
            this.prevButton.set_x(this.prevButton.x | 0);
            this.prevButton.set_y(this.prevButton.y | 0);
            this.nextButton.set_x(this.nextButton.x | 0);
            this.nextButton.set_y(this.nextButton.y | 0);
            for (var d = 0, e = 0, f = this.group.members; e < f.length;) {
              var k = f[e];
              ++e;
              var r = false;
              if (c >= this.scrollIndex) {
                r = this.stacking == 1 ? b + k.get_height() <= this.get_height() || this.get_height() <= 0 : a + k.get_width() <= this.get_width() || this.get_width() <= 0;
              }
              if (r) {
                d = c;
                k.set_visible(k.set_active(true));
                k.set_x(this.x + a);
                k.set_y(this.y + b);
                if (this.stacking == 1) {
                  b += k.get_height() + this.spacing;
                } else {
                  a += k.get_width() + this.spacing;
                }
              } else {
                k.set_x(k.set_y(0));
                k.set_visible(k.set_active(false));
              }
              ++c;
            }
            this.amountPrevious = this.scrollIndex;
            this.amountNext = this.group.members.length - (d + 1);
            if (this.amountPrevious > 0) {
              this.safeAdd(this.prevButton);
              if (this.prevButton instanceof vd) {
                a = this.prevButton;
                a.label.set_text(this.getMoreString(this.amountPrevious));
              }
            }
            if (this.amountNext > 0) {
              this.safeAdd(this.nextButton);
              if (this.nextButton instanceof vd) {
                a = this.nextButton;
                a.label.set_text(this.getMoreString(this.amountNext));
              }
            }
          }
        },
        get_width: function () {
          return this.width;
        },
        get_height: function () {
          return this.height;
        },
        set_width: function (a) {
          this.width = a;
          this.refreshList();
          return a;
        },
        set_height: function (a) {
          this.height = a;
          this.refreshList();
          return a;
        },
        __class__: Pk,
        __properties__: q(eb.prototype.__properties__, {
          set_moreString: "set_moreString",
          set_spacing: "set_spacing",
          set_stacking: "set_stacking",
          set_scrollIndex: "set_scrollIndex"
        })
      });
      function gd() {
        this.x = this.y = this.screenX = this.screenY = this._globalScreenX = this._globalScreenY = 0;
      }
      h["flixel.input.FlxPointer"] = gd;
      gd.__name__ = "flixel.input.FlxPointer";
      gd.prototype = {
        getWorldPosition: function (a, b) {
          if (a == null) {
            a = g.camera;
          }
          if (b == null) {
            var c = b = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = fa.pool.get().set(b, c);
            b._inPool = false;
          }
          this.getScreenPosition(a, gd._cachedPoint);
          b.set_x(gd._cachedPoint.x + a.scroll.x);
          b.set_y(gd._cachedPoint.y + a.scroll.y);
          return b;
        },
        getScreenPosition: function (a, b) {
          if (a == null) {
            a = g.camera;
          }
          if (b == null) {
            var c = b = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = fa.pool.get().set(b, c);
            b._inPool = false;
          }
          b.set_x((this._globalScreenX - a.x + a.width * 0.5 * (a.zoom - a.initialZoom)) / a.zoom);
          b.set_y((this._globalScreenY - a.y + a.height * 0.5 * (a.zoom - a.initialZoom)) / a.zoom);
          return b;
        },
        getPositionInCameraView: function (a, b) {
          if (a == null) {
            a = g.camera;
          }
          if (b == null) {
            var c = b = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = fa.pool.get().set(b, c);
            b._inPool = false;
          }
          b.set_x((this._globalScreenX - a.x) / a.zoom + a.viewMarginX);
          b.set_y((this._globalScreenY - a.y) / a.zoom + a.viewMarginY);
          return b;
        },
        overlaps: function (a, b) {
          var c = this;
          var d = false;
          var e = Ra.resolveGroup(a);
          if (e != null) {
            e.forEachExists(function (a) {
              if (c.overlaps(a, b)) {
                d = true;
              }
            });
          } else {
            this.getWorldPosition(b, gd._cachedPoint);
            d = a.overlapsPoint(gd._cachedPoint, true, b);
          }
          return d;
        },
        updatePositions: function () {
          this.getScreenPosition(g.camera, gd._cachedPoint);
          this.screenX = gd._cachedPoint.x | 0;
          this.screenY = gd._cachedPoint.y | 0;
          this.getWorldPosition(g.camera, gd._cachedPoint);
          this.x = gd._cachedPoint.x | 0;
          this.y = gd._cachedPoint.y | 0;
        },
        __class__: gd
      };
      function Og() {}
      h["flixel.input.IFlxInputManager"] = Og;
      Og.__name__ = "flixel.input.IFlxInputManager";
      Og.__isInterface__ = true;
      Og.__interfaces__ = [B];
      Og.prototype = {
        __class__: Og
      };
      function lg(a) {
        this._prevX = this._prevY = this._prevScreenX = this._prevScreenY = 0;
        this._visibleWhenFocusLost = true;
        this.useSystemCursor = this._wheelUsed = false;
        this.visible = true;
        this.wheel = 0;
        this.enabled = true;
        gd.call(this);
        this.cursorContainer = a;
        this.cursorContainer.mouseChildren = false;
        this.cursorContainer.mouseEnabled = false;
        this._leftButton = new gf(-1);
        this._stage = na.get_current().stage;
        this._stage.addEventListener("mouseDown", (u = this._leftButton, l(u, u.onDown)));
        this._stage.addEventListener("mouseUp", (u = this._leftButton, l(u, u.onUp)));
        this._middleButton = new gf(-2);
        this._rightButton = new gf(-3);
        this._stage.addEventListener("middleMouseDown", (u = this._middleButton, l(u, u.onDown)));
        this._stage.addEventListener("middleMouseUp", (u = this._middleButton, l(u, u.onUp)));
        this._stage.addEventListener("rightMouseDown", (u = this._rightButton, l(u, u.onDown)));
        this._stage.addEventListener("rightMouseUp", (u = this._rightButton, l(u, u.onUp)));
        this._stage.addEventListener("mouseLeave", l(this, this.onMouseLeave));
        this._stage.addEventListener("mouseWheel", l(this, this.onMouseWheel));
        g.signals.postGameStart.add(l(this, this.onGameStart));
        hd.hide();
      }
      h["flixel.input.mouse.FlxMouse"] = lg;
      lg.__name__ = "flixel.input.mouse.FlxMouse";
      lg.__interfaces__ = [Og];
      lg.__super__ = gd;
      lg.prototype = q(gd.prototype, {
        load: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 1;
          }
          if (this.cursor != null) {
            da.removeChild(this.cursorContainer, this.cursor);
          }
          if (a == null) {
            a = new Pe(0, 0);
          }
          if (ta.__instanceof(a, Xi)) {
            this.cursor = Db.createInstance(a, []);
          } else if (a instanceof T) {
            this.cursor = new Nc(a);
          } else if (typeof a == "string") {
            if (W.exists(a)) {
              a = W.getBitmapData(a, true);
            } else {
              g.log.advanced("Could not find a BitmapData asset with ID '" + a + "'.", Ba.ERROR, true);
              a = null;
            }
            this.cursor = new Nc(a);
          } else {
            this.cursor = new Nc(new Pe(0, 0));
          }
          this.cursor.set_x(c);
          this.cursor.set_y(d);
          this.cursor.set_scaleX(b);
          this.cursor.set_scaleY(b);
          this.cursorContainer.addChild(this.cursor);
        },
        destroy: function () {
          if (this._stage != null) {
            this._stage.removeEventListener("mouseDown", (u = this._leftButton, l(u, u.onDown)));
            this._stage.removeEventListener("mouseUp", (u = this._leftButton, l(u, u.onUp)));
            this._stage.removeEventListener("middleMouseDown", (u = this._middleButton, l(u, u.onDown)));
            this._stage.removeEventListener("middleMouseUp", (u = this._middleButton, l(u, u.onUp)));
            this._stage.removeEventListener("rightMouseDown", (u = this._rightButton, l(u, u.onDown)));
            this._stage.removeEventListener("rightMouseUp", (u = this._rightButton, l(u, u.onUp)));
            this._stage.removeEventListener("mouseLeave", l(this, this.onMouseLeave));
            this._stage.removeEventListener("mouseWheel", l(this, this.onMouseWheel));
          }
          this.cursor = this.cursorContainer = null;
          this._leftButton = da.destroy(this._leftButton);
          this._middleButton = da.destroy(this._middleButton);
          this._rightButton = da.destroy(this._rightButton);
          this._cursorBitmapData = da.dispose(this._cursorBitmapData);
          g.signals.postGameStart.remove(l(this, this.onGameStart));
        },
        reset: function () {
          this._leftButton.reset();
          this._middleButton.reset();
          this._rightButton.reset();
        },
        update: function () {
          this._prevX = this.x;
          this._prevY = this.y;
          this._prevScreenX = this.screenX;
          this._prevScreenY = this.screenY;
          var a = g.game.get_mouseX();
          var b = g.game.get_mouseY();
          this._globalScreenX = a / g.scaleMode.scale.x | 0;
          this._globalScreenY = b / g.scaleMode.scale.y | 0;
          this.updatePositions();
          if (this.visible) {
            this.cursorContainer.set_x(g.game.get_mouseX());
            this.cursorContainer.set_y(g.game.get_mouseY());
          }
          this._leftButton.update();
          this._middleButton.update();
          this._rightButton.update();
          if (!this._wheelUsed) {
            this.wheel = 0;
          }
          this._wheelUsed = false;
        },
        onFocus: function () {
          this.reset();
          this.set_useSystemCursor(this.useSystemCursor);
          this.set_visible(this._visibleWhenFocusLost);
        },
        onFocusLost: function () {
          if (this._visibleWhenFocusLost = this.visible) {
            this.set_visible(false);
          }
          hd.show();
        },
        onGameStart: function () {
          this.set_visible(this.visible);
        },
        onMouseWheel: function (a) {
          if (this.enabled) {
            this._wheelUsed = true;
            this.wheel = a.delta;
          }
        },
        onMouseLeave: function (a) {
          this._rightButton.onUp();
          this._middleButton.onUp();
        },
        showSystemCursor: function () {
          this.cursorContainer.set_visible(false);
          hd.show();
        },
        hideSystemCursor: function () {
          hd.hide();
          if (this.visible) {
            this.cursorContainer.set_visible(true);
          }
        },
        set_useSystemCursor: function (a) {
          if (a) {
            this.showSystemCursor();
          } else {
            this.hideSystemCursor();
          }
          return this.useSystemCursor = a;
        },
        showCursor: function () {
          if (this.useSystemCursor) {
            hd.show();
          } else {
            if (this.cursor == null) {
              this.load();
            }
            this.cursorContainer.set_visible(true);
            hd.hide();
          }
        },
        hideCursor: function () {
          this.cursorContainer.set_visible(false);
          hd.hide();
        },
        set_visible: function (a) {
          if (a) {
            this.showCursor();
          } else {
            this.hideCursor();
          }
          return this.visible = a;
        },
        __class__: lg,
        __properties__: {
          set_useSystemCursor: "set_useSystemCursor",
          set_visible: "set_visible"
        }
      });
      function kj(a) {
        this.updateGlobalScreenPosition = true;
        lg.call(this, a);
      }
      h["flixel.addons.ui.FlxUIMouse"] = kj;
      kj.__name__ = "flixel.addons.ui.FlxUIMouse";
      kj.__super__ = lg;
      kj.prototype = q(lg.prototype, {
        update: function () {
          var a = this._globalScreenX;
          var b = this._globalScreenY;
          lg.prototype.update.call(this);
          if (!this.updateGlobalScreenPosition) {
            this._globalScreenX = a;
            this._globalScreenY = b;
          }
        },
        __class__: kj
      });
      function Sb(a, b, c, d, e, f, k, r, g, J, h, m) {
        if (m == null) {
          m = false;
        }
        if (r == null) {
          r = 1;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 999;
        }
        if (e == null) {
          e = -999;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.isPercent = false;
        this.stack = 1;
        this.value = 0;
        this.max = 10;
        this.stepSize = this.decimals = this.min = 0;
        eb.call(this, a, b);
        if (g == null) {
          g = new gb(0, 0, 25);
        }
        g.set_x(0);
        g.set_y(0);
        this.text_field = g;
        this.text_field.set_text(d == null ? "null" : "" + d);
        if (this.text_field instanceof gb) {
          a = this.text_field;
          a.set_lines(1);
          a.callback = l(this, this._onInputTextEvent);
          a.broadcastToFlxUI = false;
        }
        this.stepSize = c;
        this.set_decimals(k);
        this.set_min(e);
        this.set_max(f);
        this.set_value(d);
        this.set_isPercent(m);
        c = 1 + g.get_height();
        if (J == null) {
          J = new Ic(0, 0);
          J.loadGraphicSlice9(["flixel/flixel-ui/img/button_thin.png"], c, c, [Yb.toIntArray("2,2,15,15")], 0, -1, false, 18, 18);
          J.set_label(new G(0, 0, "flixel/flixel-ui/img/plus_mark.png"));
        }
        if (h == null) {
          h = new Ic(0, 0);
          h.loadGraphicSlice9(["flixel/flixel-ui/img/button_thin.png"], c, c, [Yb.toIntArray("2,2,15,15")], 0, -1, false, 18, 18);
          h.set_label(new G(0, 0, "flixel/flixel-ui/img/minus_mark.png"));
        }
        this.button_plus = J;
        this.button_minus = h;
        this.add(this.text_field);
        this.add(this.button_plus);
        this.add(this.button_minus);
        this.button_plus.onUp.callback = l(this, this._onPlus);
        this.button_plus.broadcastToFlxUI = false;
        this.button_minus.onUp.callback = l(this, this._onMinus);
        this.button_minus.broadcastToFlxUI = false;
        this.set_stack(r);
      }
      h["flixel.addons.ui.FlxUINumericStepper"] = Sb;
      Sb.__name__ = "flixel.addons.ui.FlxUINumericStepper";
      Sb.__interfaces__ = [Oe, Af, ud];
      Sb.__super__ = eb;
      Sb.prototype = q(eb.prototype, {
        set_params: function (a) {
          return this.params = a;
        },
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          this.button_plus.set_skipButtonUpdate(a);
          this.button_minus.set_skipButtonUpdate(a);
          return a;
        },
        set_color: function (a) {
          this.color = a;
          this.button_plus.set_color(a);
          this.button_minus.set_color(a);
          if (this.text_field instanceof ef) {
            this.text_field.set_backgroundColor(a);
          } else {
            this.text_field.set_color(a);
          }
          return a;
        },
        set_min: function (a) {
          this.min = a;
          if (this.value < this.min) {
            this.set_value(this.min);
          }
          return this.min;
        },
        set_max: function (a) {
          this.max = a;
          if (this.value > this.max) {
            this.set_value(this.max);
          }
          return this.max;
        },
        set_value: function (a) {
          this.value = a;
          if (this.value < this.min) {
            this.value = this.min;
          }
          if (this.value > this.max) {
            this.value = this.max;
          }
          if (this.text_field != null) {
            a = this.value;
            if (this.isPercent) {
              var b = Math.pow(10, this.decimals);
              this.text_field.set_text(H.string(H.string(Math.round(a * 100 * b) / b)) + "%");
            } else {
              b = Math.pow(10, this.decimals);
              this.text_field.set_text(H.string(Math.round(a * b) / b));
            }
          }
          return this.value;
        },
        set_decimals: function (a) {
          this.decimals = a;
          if (a < 0) {
            this.decimals = 0;
          }
          this.set_value(this.value);
          return this.decimals;
        },
        set_isPercent: function (a) {
          this.isPercent = a;
          this.set_value(this.value);
          return this.isPercent;
        },
        set_stack: function (a) {
          this.stack = a;
          var b = 0;
          var c = 0;
          if (this.text_field instanceof gb) {
            c = b = 1;
          }
          switch (this.stack) {
            case 0:
              a = 1 + this.text_field.get_height() / 2;
              if (this.button_plus.get_height() != a) {
                this.button_plus.resize(a, a);
              }
              if (this.button_minus.get_height() != a) {
                this.button_minus.resize(a, a);
              }
              this.button_plus.set_x(b + this.text_field.x + this.text_field.get_width());
              this.button_plus.set_y(-c + this.text_field.y);
              this.button_minus.set_x(b + this.text_field.x + this.text_field.get_width());
              this.button_minus.set_y(c + this.text_field.y + (this.text_field.get_height() - this.button_minus.get_height()));
              break;
            case 1:
              a = 2 + this.text_field.get_height();
              if (this.button_plus.get_height() != a) {
                this.button_plus.resize(a, a);
              }
              if (this.button_minus.get_height() != a) {
                this.button_minus.resize(a, a);
              }
              this.button_plus.set_x(b + this.text_field.x + this.text_field.get_width());
              this.button_plus.set_y(-c + this.text_field.y);
              this.button_minus.set_x(this.button_plus.x + this.button_plus.get_width());
              this.button_minus.set_y(this.button_plus.y);
          }
          return this.stack;
        },
        _onInputTextEvent: function (a, b) {
          if (a == "") {
            a = H.string(this.min);
          }
          for (var c = b = 0, d = a.length; c < d;) {
            var e = c++;
            if (a.charAt(e) == ".") {
              ++b;
            }
          }
          if (b != 1 || a.indexOf(".") != a.length - 1) {
            this.set_value(parseFloat(a));
            this._doCallback("edit_numeric_stepper");
            this._doCallback("change_numeric_stepper");
          }
        },
        _onPlus: function () {
          this.set_value(this.value + this.stepSize);
          this._doCallback("click_numeric_stepper");
          this._doCallback("change_numeric_stepper");
        },
        _onMinus: function () {
          this.set_value(this.value - this.stepSize);
          this._doCallback("click_numeric_stepper");
          this._doCallback("change_numeric_stepper");
        },
        _doCallback: function (a) {
          if (this.broadcastToFlxUI) {
            Ma.event(a, this, this.value, this.params);
          }
        },
        __class__: Sb,
        __properties__: q(eb.prototype.__properties__, {
          set_skipButtonUpdate: "set_skipButtonUpdate",
          set_params: "set_params",
          set_isPercent: "set_isPercent",
          set_stack: "set_stack",
          set_value: "set_value",
          set_max: "set_max",
          set_min: "set_min",
          set_decimals: "set_decimals"
        })
      });
      function Zf(a) {
        if (a == null) {
          a = 0;
        }
        this.getTextFallback = null;
        this._reload_countdown = 0;
        this.reload_ui_on_resize = this._reload = false;
        this._xml_id = "";
        this.cursor = null;
        sd.call(this, a);
      }
      h["flixel.addons.ui.FlxUISubState"] = Zf;
      Zf.__name__ = "flixel.addons.ui.FlxUISubState";
      Zf.__interfaces__ = [Hg];
      Zf.__super__ = sd;
      Zf.prototype = q(sd.prototype, {
        forceScrollFactor: function (a, b) {
          if (this._ui != null) {
            for (var c = 0, d = this._ui.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              e = e.scrollFactor;
              var f = a;
              var k = b;
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              e.set_x(f);
              e.set_y(k);
            }
            if (this._ui.scrollFactor != null) {
              e = this._ui.scrollFactor;
              f = a;
              k = b;
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              e.set_x(f);
              e.set_y(k);
            }
          }
        },
        forceFocus: function (a, b) {
          if (this._ui != null) {
            if (a) {
              this._ui.set_focus(b);
            } else {
              this._ui.set_focus(null);
            }
          }
        },
        create: function () {
          if (Xd.static_tongue != null) {
            this._tongue = Xd.static_tongue;
          }
          if (this._makeCursor == 1) {
            this.cursor = this.createCursor();
          }
          this.tooltips = new Qi(null, this);
          this._ui = this.createUI(null, this, null, this._tongue);
          this.add(this._ui);
          this._ui.getTextFallback = this.getTextFallback;
          if (this._xml_id != "" && this._xml_id != null) {
            var a = F.xml(this._xml_id);
            if (a == null) {
              a = F.xml(this._xml_id, "xml", true, "");
            }
            if (a != null) {
              this._ui.load(a);
            }
          } else {
            this._ui.load(null);
          }
          if (this.cursor != null && this._ui != null) {
            this.add(this.cursor);
            this.cursor.addWidgetsFromUI(this._ui);
            this.cursor.findVisibleLocation(0);
          }
          g.mouse.set_visible(true);
          this.tooltips.init();
          sd.prototype.create.call(this);
          this.cleanup();
          if (this._parentState instanceof Xd) {
            this.reload_ui_on_resize = ta.__cast(this._parentState, Xd).reload_ui_on_resize;
          }
        },
        onCursorEvent: function (a, b) {
          this.getEvent(a, b, null);
        },
        onShowTooltip: function (a) {},
        onResize: function (a, b) {
          if (this.reload_ui_on_resize) {
            g.scaleMode.onMeasure(a, b);
            this._reload_countdown = 5;
            this._reload = true;
          }
        },
        update: function (a) {
          sd.prototype.update.call(this, a);
          this.tooltips.update(a);
          if (this._reload && this._reload_countdown > 0) {
            this._reload_countdown--;
            if (this._reload_countdown == 0) {
              this.reloadUI();
            }
          }
        },
        destroy: function () {
          this.destroyed = true;
          if (this.tooltips != null) {
            this.tooltips.destroy();
            this.tooltips = null;
          }
          if (this._ui != null) {
            this._ui.destroy();
            this.remove(this._ui, true);
            this._ui = null;
          }
          sd.prototype.destroy.call(this);
        },
        getEvent: function (a, b, c, d) {},
        getRequest: function (a, b, c, d) {
          return null;
        },
        getText: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = "ui";
          }
          if (this._tongue != null) {
            return this._tongue.get(a, b, c);
          } else if (this.getTextFallback != null) {
            return this.getTextFallback(a, b, c);
          } else {
            return a;
          }
        },
        cleanup: function () {
          this._ui.cleanup();
        },
        createCursor: function () {
          return new Ri(l(this, this.onCursorEvent));
        },
        createUI: function (a, b, c, d, e) {
          if (e == null) {
            e = "";
          }
          return new Ma(a, b, c, d, e);
        },
        reloadUI: function () {
          if (this._ui != null) {
            this.remove(this._ui, true);
            this._ui.destroy();
            this._ui = null;
          }
          this._ui = this.createUI(null, this, null, this._tongue);
          this.add(this._ui);
          var a = F.xml(this._xml_id);
          this._ui.load(a);
          this._reload = false;
          this._reload_countdown = 0;
        },
        __class__: Zf
      });
      function mj(a) {
        this._quickSetupParams = null;
        this._width = this._height = 0;
        this.alpha = 1;
        this.params = null;
        this.x = this.y = 0;
        this.broadcastToFlxUI = true;
        Zf.call(this, a);
      }
      h["flixel.addons.ui.FlxUIPopup"] = mj;
      mj.__name__ = "flixel.addons.ui.FlxUIPopup";
      mj.__interfaces__ = [ud];
      mj.__super__ = Zf;
      mj.prototype = q(Zf.prototype, {
        set_immovable: function (a) {
          return this.immovable;
        },
        set_x: function (a) {
          return this.x = a;
        },
        set_y: function (a) {
          return this.y = a;
        },
        get_width: function () {
          return this._width;
        },
        get_height: function () {
          return this._height;
        },
        set_width: function (a) {
          return this._width = a;
        },
        set_height: function (a) {
          return this._height = a;
        },
        set_angle: function (a) {
          return this.angle = a;
        },
        set_alpha: function (a) {
          return this.alpha = a;
        },
        set_facing: function (a) {
          return this.facing = a;
        },
        set_moves: function (a) {
          return this.moves = a;
        },
        set_offset: function (a) {
          return this.offset = a;
        },
        set_origin: function (a) {
          return this.origin = a;
        },
        set_scale: function (a) {
          return this.scale = a;
        },
        set_scrollFactor: function (a) {
          return this.scrollFactor = a;
        },
        reset: function (a, b) {
          this.setPosition(a, b);
        },
        setPosition: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.set_x(a);
          this.set_y(b);
        },
        create: function () {
          if (this._xml_id == "") {
            this._xml_id = "flixel/flixel-ui/xml/default_popup";
          }
          var a = 0;
          var b = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = fa.pool.get().set(a, b);
          b._inPool = false;
          this.set_scrollFactor(b);
          this.getTextFallback = l(this, this.myGetTextFallback);
          Zf.prototype.create.call(this);
          if (this._quickSetupParams != null) {
            this._doQuickSetup();
          }
          var c = this.scrollFactor;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
          this._ui.setScrollFactor(0, 0);
        },
        quickSetup: function (a, b, c) {
          this._quickSetupParams = {
            title: a,
            body: b,
            button_labels: c
          };
        },
        getEvent: function (a, b, c, d) {
          if (d == null && this.params != null) {
            d = [];
          }
          if (this.params != null) {
            d = d.concat(this.params);
          }
          if (a == "click_button") {
            var e = "";
            if (d != null) {
              if (typeof d[0] == "string") {
                e = H.string(d[0]);
              }
              var f = d[0] | 0;
              if (e == "affirm" || e == "cancel" || e == "alt") {
                if (ta.__implements(this._parentState, Hg)) {
                  this.castParent().getEvent("click_popup", this, f, d);
                } else {
                  Ma.event("click_popup", this, f, d);
                }
                this.close();
              }
            }
          }
          Zf.prototype.getEvent.call(this, a, b, c, d);
        },
        castParent: function () {
          return this._parentState;
        },
        myGetTextFallback: function (a, b, c) {
          switch (a) {
            case "$POPUP_BODY_DEFAULT":
              return "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam consectetur vehicula pellentesque. Phasellus at blandit augue. Suspendisse vel leo ut elit imperdiet eleifend ut quis purus. Quisque imperdiet turpis vitae justo hendrerit molestie. Quisque tempor ante eget posuere viverra.";
            case "$POPUP_CANCEL":
              return "Cancel";
            case "$POPUP_NO":
              return "No";
            case "$POPUP_OK":
              return "Ok";
            case "$POPUP_TITLE_DEFAULT":
              return "Alert!";
            case "$POPUP_YES":
              return "Yes";
          }
          return a;
        },
        _doQuickSetup: function () {
          if (this._ui.hasAsset("title")) {
            this._ui.getAsset("title").set_text(this._quickSetupParams.title);
          }
          if (this._ui.hasAsset("body")) {
            this._ui.getAsset("body").set_text(this._quickSetupParams.body);
          }
          this._doQuickSetupButtons();
          this._quickSetupParams = this._quickSetupParams.button_labels = null;
        },
        _doQuickSetupButtons: function () {
          var a = ["btn0", "btn1", "btn2"];
          var b = 0;
          switch (this._quickSetupParams.button_labels.length) {
            case 1:
              this._ui.setMode("1btn");
              break;
            case 2:
              this._ui.setMode("2btn");
              break;
            case 3:
              this._ui.setMode("3btn");
          }
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            if (this._ui.hasAsset(d) && (d = this._ui.getAsset(d), this._quickSetupParams.button_labels.length > b)) {
              var e = this._quickSetupParams.button_labels[b];
              var f = e;
              switch (e) {
                case "<cancel>":
                case "<no>":
                case "<yes>":
                  e = M.substr(e, 1, e.length - 2).toUpperCase();
                  f = "$POPUP_" + e;
                  f = this._ui.getText(f, "ui", false);
                  if (f == null || f == "") {
                    f = e;
                  }
              }
              F.setButtonLabel(d, f);
            }
            ++b;
          }
        },
        __class__: mj,
        __properties__: q(Zf.prototype.__properties__, {
          set_height: "set_height",
          get_height: "get_height",
          set_width: "set_width",
          get_width: "get_width",
          set_alpha: "set_alpha",
          set_y: "set_y",
          set_x: "set_x",
          set_scrollFactor: "set_scrollFactor",
          set_scale: "set_scale",
          set_origin: "set_origin",
          set_offset: "set_offset",
          set_moves: "set_moves",
          set_facing: "set_facing",
          set_angle: "set_angle",
          set_immovable: "set_immovable"
        })
      });
      function fj(a, b, c, d, e, f, k, r, g, J, h, m, p, l) {
        if (J == null) {
          J = "<X> more...";
        }
        if (g == null) {
          g = 100;
        }
        if (r == null) {
          r = 20;
        }
        if (k == null) {
          k = 100;
        }
        if (f == null) {
          f = 25;
        }
        this._clickable = true;
        this._selected = 0;
        this._y_space = 25;
        this._height = 20;
        this._label_width = this._width = 100;
        this.fixedSize = false;
        eb.call(this);
        this._y_space = f;
        this._width = k;
        this._height = r;
        this._label_width = g;
        if (c == null) {
          c = [];
        }
        if (d == null) {
          d = [];
        }
        this.callback = e;
        this._list_radios = [];
        this._list_active = [];
        this._list = new Pk(0, 0, null, 0, 0, J, 1, 0, h, m, p, l);
        this.add(this._list);
        this.updateRadios(c, d);
        this.loadGraphics(null, null);
        this.set_x(a);
        this.set_y(b);
      }
      h["flixel.addons.ui.FlxUIRadioGroup"] = fj;
      fj.__name__ = "flixel.addons.ui.FlxUIRadioGroup";
      fj.__interfaces__ = [Oe, Af];
      fj.__super__ = eb;
      fj.prototype = q(eb.prototype, {
        set_activeStyle: function (a) {
          this.activeStyle = a;
          this.updateActives();
          return this.activeStyle;
        },
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          for (var b = 0, c = this._list_radios; b < c.length;) {
            var d = c[b];
            ++b;
            d.set_skipButtonUpdate(a);
          }
          return this.skipButtonUpdate;
        },
        set_params: function (a) {
          return this.params = a;
        },
        set_width: function (a) {
          eb.prototype.set_width.call(this, a);
          if (this.fixedSize && this._list != null) {
            this._list.set_width(a);
          }
          return a;
        },
        set_height: function (a) {
          eb.prototype.set_height.call(this, a);
          if (this.fixedSize && this._list != null) {
            this._list.set_height(a);
          }
          return a;
        },
        loadGraphics: function (a, b) {
          this._box_asset = a ?? "flixel/flixel-ui/img/radio.png";
          this._dot_asset = b ?? "flixel/flixel-ui/img/radio_dot.png";
          if (this._box_asset instanceof G) {
            a = this._box_asset;
            this._box_asset = a.graphic.key;
          }
          if (this._dot_asset instanceof G) {
            a = this._dot_asset;
            this._dot_asset = a.graphic.key;
          }
          a = 0;
          for (b = this._list_radios; a < b.length;) {
            var c = b[a];
            ++a;
            c.box.loadGraphic(this._box_asset, true);
            c.mark.loadGraphic(this._dot_asset);
          }
          this._refreshRadios();
        },
        destroy: function () {
          if (this._list_radios != null) {
            F.clearArray(this._list_radios);
          }
          if (this._list_active != null) {
            F.clearArray(this._list_active);
          }
          this._labels = this._ids = this._list = this._list_radios = this._list_active = null;
          eb.prototype.destroy.call(this);
        },
        updateRadios: function (a, b) {
          this._ids = a;
          this._labels = b;
          a = 0;
          for (b = this._list_radios; a < b.length;) {
            var c = b[a];
            ++a;
            c.set_visible(false);
          }
          this._refreshRadios();
        },
        getRadios: function () {
          return this._list_radios;
        },
        get_selectedId: function () {
          return this._ids[this._selected];
        },
        _refreshRadios: function () {
          var a = this.x;
          var b = this.y;
          var c = 0;
          var d = 0;
          var e = 0;
          this._list._skipRefresh = true;
          for (var f = 0, k = this._ids; f < k.length;) {
            var r = k[f];
            ++f;
            var g = "";
            g = this._labels != null && this._labels.length > c ? this._labels[c] : "<" + r + ">";
            if (this._list_radios.length > c) {
              r = this._list_radios[c];
              r.set_visible(true);
              r.set_text(g);
              if (c == 0) {
                a = r.x;
                b = r.y;
              } else {
                r.set_x(a | 0);
                r.set_y(b | 0);
              }
            } else {
              r = new zb(0, 0, this._box_asset, this._dot_asset, g, this._label_width, [r, false]);
              r.broadcastToFlxUI = false;
              r.callback = function (a, b) {
                return function () {
                  a[0]._onCheckBoxEvent(b[0]);
                };
              }([this], [r]);
              this._list.add(r);
              r.set_x(a | 0);
              r.set_y(b | 0);
              r.set_text(g);
              if (this._list_radios.length > 0) {
                r.button.copyStyle(this._list_radios[0].button);
                if (this.activeStyle == null) {
                  this.set_activeStyle(this.makeActiveStyle());
                }
                r.button.set_width(this._list_radios[0].button.get_width());
                r.button.set_height(this._list_radios[0].button.get_height());
                r.set_textX(this._list_radios[0].textX);
                r.set_textY(this._list_radios[0].textY);
              }
              this._list_radios.push(r);
              this._list_active.push(true);
            }
            if (a + r.get_width() > d) {
              d = a + r.get_width();
            }
            if (b + r.get_height() > e) {
              e = b + r.get_height();
            }
            b += this._y_space;
            ++c;
          }
          if (this.fixedSize == 0) {
            d += 5;
            e += 5;
            if (d > this._list.get_width()) {
              this._list.set_width(d);
            }
            if (e > this._list.get_height()) {
              this._list.set_height(e);
            }
            this.set_width(d);
            this.set_height(e);
          }
          this._list._skipRefresh = false;
          if (this.fixedSize == 1) {
            this._list.refreshList();
          }
          this.updateActives();
        },
        updateActives: function () {
          var a = 0;
          for (var b = 0, c = this._list_radios; b < c.length;) {
            var d = c[b];
            ++b;
            d.set_active(this._list_active[a]);
            if (this._list_active[a] == 0 && this.inactiveStyle != null) {
              this.inactiveStyle.applyToCheck(d);
            } else if (this._list_active[a] == 1 && this.activeStyle != null) {
              this.activeStyle.applyToCheck(d);
            }
            ++a;
          }
        },
        makeActiveStyle: function () {
          if (this._list_radios.length > 0) {
            var a = this._list_radios[0].button.label;
            var b = od.copyFromFlxText(a);
            var c = new df(a.borderStyle, a.borderColor, a.borderSize, a.borderQuality);
            return new gj(16777215, b, En.fromOpenFL(a._defaultFormat.align), a.color, c);
          }
          return null;
        },
        _onCheckBoxEvent: function (a) {
          this._onClick(a, true);
        },
        _onClick: function (a, b) {
          if (!this._clickable) {
            return false;
          }
          for (var c = 0, d = 0, e = this._list_radios; d < e.length;) {
            var f = e[d];
            ++d;
            f.set_checked(false);
            if (a == f) {
              this._selected = c;
              f.set_checked(true);
            }
            ++c;
          }
          if (b) {
            if (this.callback != null) {
              this.callback(this.get_selectedId());
            }
            if (this.broadcastToFlxUI) {
              Ma.event("click_radio_group", this, this._ids[this._selected], this.params);
            }
          }
          return true;
        },
        __class__: fj,
        __properties__: q(eb.prototype.__properties__, {
          set_params: "set_params",
          set_skipButtonUpdate: "set_skipButtonUpdate",
          set_activeStyle: "set_activeStyle",
          get_selectedId: "get_selectedId"
        })
      });
      function gj(a, b, c, d, e) {
        this.checkColor = a;
        dj.call(this, b, c, d, e);
      }
      h["flixel.addons.ui.CheckStyle"] = gj;
      gj.__name__ = "flixel.addons.ui.CheckStyle";
      gj.__super__ = dj;
      gj.prototype = q(dj.prototype, {
        applyToCheck: function (a) {
          if (this.checkColor != null) {
            a.set_color(this.checkColor);
          }
          this.apply(a.button.label);
        },
        __class__: gj
      });
      function sh(a, b, c, d) {
        if (d == null) {
          d = 16;
        }
        if (c == null) {
          c = 16;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        G.call(this, a, b);
        this.makeGraphic(1, 1, 0);
        if (d < 1) {
          d = 1;
        }
        if (c < 1) {
          c = 1;
        }
        this.resize(c, d);
      }
      h["flixel.addons.ui.FlxUIRegion"] = sh;
      sh.__name__ = "flixel.addons.ui.FlxUIRegion";
      sh.__interfaces__ = [ed, ud];
      sh.__super__ = G;
      sh.prototype = q(G.prototype, {
        resize: function (a, b) {
          this.set_width(a);
          this.set_height(b);
        },
        __class__: sh
      });
      function vh(a, b, c, d, e, f, k, r, g, J, h) {
        Zh.call(this, a, b, c, d, e, f, k, r, g, J, h);
      }
      h["flixel.addons.ui.FlxUISlider"] = vh;
      vh.__name__ = "flixel.addons.ui.FlxUISlider";
      vh.__interfaces__ = [ud];
      vh.__super__ = Zh;
      vh.prototype = q(Zh.prototype, {
        __class__: vh
      });
      function ff(a, b, c, d) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        Ic.call(this, a, b, d);
        this.up_color = this.over_color = this.down_color = this.up_toggle_color = this.over_toggle_color = this.down_toggle_color = -1;
        if (c != null) {
          this.set_label(c);
        }
      }
      h["flixel.addons.ui.FlxUISpriteButton"] = ff;
      ff.__name__ = "flixel.addons.ui.FlxUISpriteButton";
      ff.__interfaces__ = [Ng];
      ff.__super__ = Ic;
      ff.prototype = q(Ic.prototype, {
        resize: function (a, b) {
          Ic.prototype.resize.call(this, a, b);
          this.autoCenterLabel();
        },
        autoCenterLabel: function () {
          if (this.label != null) {
            if (this.label instanceof db) {
              var a = this.label;
              for (var b = 0, c = a.group.members; b < c.length;) {
                var d = c[b];
                ++b;
                d.set_x(-d.get_width() / 2);
                d.set_y(-d.get_height() / 2);
              }
              var e = a.get_width();
              var f = a.get_height();
              b = 0;
              for (c = a.group.members; b < c.length;) {
                d = c[b];
                ++b;
                d.set_x((e - d.get_width()) / 2);
                d.set_y((f - d.get_height()) / 2);
              }
            }
            Ic.prototype.autoCenterLabel.call(this);
          }
        },
        __class__: ff
      });
      function ne(a, b, c, d, e, f, k) {
        if (e == null) {
          e = false;
        }
        this._selected_tab = -1;
        this._selected_tab_id = "";
        this._tab_spacing = this._tab_stacking = this._tab_offset = null;
        this._stretch_tabs = false;
        eb.call(this);
        if (a == null) {
          a = new ba(0, 0, "flixel/flixel-ui/img/chrome_flat.png", new ea(0, 0, 200, 200));
        }
        this._back = a;
        this.add(this._back);
        if (b == null && c != null) {
          b = [];
          a = 0;
          while (a < c.length) {
            var r = c[a];
            ++a;
            var g = new vd(0, 0, r.label);
            g.up_color = 16777215;
            g.down_color = 16777215;
            g.over_color = 16777215;
            g.up_toggle_color = 16777215;
            g.down_toggle_color = 16777215;
            g.over_toggle_color = 16777215;
            g.label.set_color(16777215);
            var J = g.label;
            J.set_borderStyle(Ta.OUTLINE);
            J.set_borderColor(0);
            J.set_borderSize(1);
            J.set_borderQuality(1);
            g.name = r.name;
            r = Yb.toIntArray("6,6,11,11");
            g.loadGraphicSlice9("flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab.png flixel/flixel-ui/img/tab.png flixel/flixel-ui/img/tab.png".split(" "), 0, 0, [r, r, r, r, r, r], 0, -1, true);
            b.push(g);
          }
        }
        this._tabs = b;
        this._stretch_tabs = e;
        this._tab_spacing = f;
        this._tab_stacking = k;
        if (this._tab_stacking == null) {
          this._tab_stacking = ["front", "back"];
        }
        this._tab_offset = d;
        b = 0;
        d = null;
        a = 0;
        for (c = this._tabs; a < c.length;) {
          d = c[a];
          ++a;
          this.add(d);
          e = function (a, b) {
            return function () {
              a[0]._onTabEvent(b[0]);
            };
          }([this], [d.name]);
          d.onUp.callback = e;
          ++b;
        }
        this.distributeTabs();
        this._tab_groups = [];
      }
      h["flixel.addons.ui.FlxUITabMenu"] = ne;
      ne.__name__ = "flixel.addons.ui.FlxUITabMenu";
      ne.__interfaces__ = [kh, Af, ed];
      ne.__super__ = eb;
      ne.prototype = q(eb.prototype, {
        getEvent: function (a, b, c, d) {},
        getRequest: function (a, b, c, d) {
          return null;
        },
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          for (var b = 0, c = this._tabs; b < c.length;) {
            var d = c[b];
            ++b;
            d.set_skipButtonUpdate(a);
          }
          b = 0;
          for (c = this._tab_groups; b < c.length;) {
            var e = c[b];
            ++b;
            d = 0;
            for (e = e.group.members; d < e.length;) {
              var f = e[d];
              ++d;
              if (ta.__implements(f, Af)) {
                f.set_skipButtonUpdate(a);
              }
            }
          }
          return a;
        },
        get_width: function () {
          return this._back.get_width();
        },
        get_height: function () {
          var a = this.getFirstTab();
          if (a != null) {
            return this._back.y + this._back.get_height() - a.y;
          } else {
            return this._back.get_height();
          }
        },
        resize: function (a, b) {
          if (ta.__implements(this._back, ed)) {
            this.distributeTabs(a);
            var c = this._back;
            var d = this.getFirstTab();
            if (d != null) {
              c.resize(a, b - d.get_height());
            } else {
              c.resize(a, b);
            }
          } else {
            this.distributeTabs();
          }
        },
        get_selected_tab: function () {
          return this._selected_tab;
        },
        set_selected_tab: function (a) {
          this.showTabInt(a);
          return this._selected_tab;
        },
        get_selected_tab_id: function () {
          return this._selected_tab_id;
        },
        set_selected_tab_id: function (a) {
          this.showTabId(a);
          return this._selected_tab_id;
        },
        destroy: function () {
          eb.prototype.destroy.call(this);
          F.clearArray(this._tab_groups);
          F.clearArray(this._tabs);
          this._tab_groups = this._tabs = this._back = null;
        },
        getTab: function (a, b) {
          if (a != null) {
            for (var c = 0, d = this._tabs; c < d.length;) {
              var e = d[c];
              ++c;
              if (e.name == a) {
                return e;
              }
            }
          }
          if (b != null && b < this._tabs.length) {
            return this._tabs[b];
          } else {
            return null;
          }
        },
        addGroup: function (a) {
          if (a != this) {
            if (!this.contains(a)) {
              a.set_y(this._back.y - this.y);
              this.add(a);
              this._tab_groups.push(a);
            }
            this._showOnlyGroup("");
            if (this._tab_groups.length == 1) {
              this.set_selected_tab(0);
            }
            if (this._selected_tab != -1) {
              this.set_selected_tab(this._selected_tab);
            }
          }
        },
        _onTabEvent: function (a) {
          this.showTabId(a);
          var b = this.getTab(a);
          b = b != null ? b.params : null;
          if (this.broadcastToFlxUI) {
            Ma.event("tab_menu_click", this, a, b);
          }
        },
        stackTabs: function () {
          var a = this._back.x;
          var b = this._back.y;
          this.group.remove(this._back, true);
          var c;
          for (var d = 0, e = this._tabs; d < e.length;) {
            c = e[d];
            ++d;
            if (c.toggled) {
              this.group.remove(c, true);
            }
          }
          this.group.add(this._back);
          d = 0;
          for (e = this._tabs; d < e.length;) {
            c = e[d];
            ++d;
            if (c.toggled) {
              this.group.add(c);
            }
          }
          d = 0;
          for (e = this._tab_groups; d < e.length;) {
            c = e[d];
            ++d;
            var f = c.x;
            var k = c.y;
            this.remove(c, true);
            this.add(c);
            c.set_x(f);
            c.set_y(k);
          }
          this._back.set_x(a);
          this._back.set_y(b);
        },
        showTabId: function (a) {
          this._selected_tab = -1;
          this._selected_tab_id = "";
          for (var b = 0, c = 0, d = this._tabs; c < d.length;) {
            var e = d[c];
            ++c;
            e.set_toggled(false);
            e.forceStateHandler("out_button");
            if (e.name == a) {
              e.set_toggled(true);
              this._selected_tab_id = a;
              this._selected_tab = b;
            }
            ++b;
          }
          this._showOnlyGroup(a);
          this.stackTabs();
        },
        sortTabs: function (a, b) {
          if (!(a.name < b.name) && a.name > b.name) {
            return 1;
          } else {
            return -1;
          }
        },
        showTabInt: function (a) {
          if (a >= 0 && this._tabs != null && this._tabs.length > a) {
            this.showTabId(this._tabs[a].name);
          } else {
            this.showTabId("");
          }
        },
        _showOnlyGroup: function (a) {
          for (var b = 0, c = this._tab_groups; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.name == a) {
              d.set_visible(d.set_active(true));
            } else {
              d.set_visible(d.set_active(false));
            }
          }
        },
        getFirstTab: function () {
          var a = null;
          if (this._tabs != null && this._tabs.length > 0) {
            a = this._tabs[0];
          }
          return a;
        },
        distributeTabs: function (a) {
          if (a == null) {
            a = -1;
          }
          var b = 0;
          var c = 0;
          if (a == -1) {
            a = this._back.get_width();
          }
          var d = 0;
          if (this._stretch_tabs) {
            c = a / this._tabs.length;
            var e = (c | 0) * this._tabs.length;
            if (e < a) {
              d = a - e;
            }
          }
          this._tabs.sort(l(this, this.sortTabs));
          e = a = 0;
          var f;
          for (var k = 0, r = this._tabs; k < r.length;) {
            f = r[k];
            ++k;
            f.set_x(this.x + b);
            f.set_y(this.y);
            if (this._tab_offset != null) {
              f.set_x(f.x + this._tab_offset.x);
              f.set_y(f.y + this._tab_offset.y);
            }
            if (this._stretch_tabs) {
              var g = f.get_height();
              if (a != 0) {
                g = e;
                f.resize_ratio = -1;
              }
              if (d > 0) {
                f.resize(c + 1, g);
                b += (c | 0) + 1;
                --d;
              } else {
                f.resize(c, g);
                b += c | 0;
              }
            } else {
              b = this._tab_spacing != null ? b + (f.get_width() + this._tab_spacing) : b + f.get_width();
            }
            if (a == 0) {
              e = f.get_height();
            }
            ++a;
          }
          if (this._tabs != null && this._tabs.length > 0 && this._tabs[0] != null) {
            this._back.set_y(this._tabs[0].y + this._tabs[0].get_height() - 2);
            if (this._tab_offset != null) {
              b = this._back;
              b.set_y(b.y - this._tab_offset.y);
            }
          }
          this.calcBounds();
        },
        __class__: ne,
        __properties__: q(eb.prototype.__properties__, {
          set_selected_tab_id: "set_selected_tab_id",
          get_selected_tab_id: "get_selected_tab_id",
          set_selected_tab: "set_selected_tab",
          get_selected_tab: "get_selected_tab",
          set_skipButtonUpdate: "set_skipButtonUpdate"
        })
      });
      function ae(a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 8;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.minimumHeight = 1;
        Q.call(this, a, b, c, d, e, f);
      }
      h["flixel.addons.ui.FlxUIText"] = ae;
      ae.__name__ = "flixel.addons.ui.FlxUIText";
      ae.__interfaces__ = [Oe, ud, ed];
      ae.__super__ = Q;
      ae.prototype = q(Q.prototype, {
        resize: function (a, b) {
          var c = 1;
          if (b < this.minimumHeight) {
            b = this.minimumHeight;
          }
          if (b < this.get_height()) {
            c = -1;
          }
          this.set_width(a);
          this.set_height(b);
          this.textField.set_width(this.get_width());
          var d = this._defaultFormat.size | 0;
          for (var e = this.get_height() - this.graphic.bitmap.height, f = 0, k = this.textField.get_numLines(); e * c > 0 && f < 999;) {
            ++f;
            this.set_size((this._defaultFormat.size | 0) + c);
            if (c > 0 && this.textField.get_numLines() > k) {
              this.set_size((this._defaultFormat.size | 0) - c);
              break;
            }
            this._regen = true;
            this.calcFrame(true);
            e = b - this.graphic.bitmap.height;
          }
          if (f >= 999) {
            g.log.advanced("Loop failsafe tripped while resizing FlxUIText to height(" + b + ")", Ba.WARNING, true);
            this.set_size(d);
          }
          this.set_width(a);
          this.set_height(b);
          this._regen = true;
          this.calcFrame(true);
        },
        set_params: function (a) {
          return this.params = a;
        },
        __class__: ae,
        __properties__: q(Q.prototype.__properties__, {
          set_params: "set_params"
        })
      });
      function ej(a, b, c, d, e, f, k, r, g) {
        if (g == null) {
          g = false;
        }
        if (r == null) {
          r = 12895428;
        }
        if (k == null) {
          k = 8421504;
        }
        this.baseTileSize = -1;
        this.floorToEven = false;
        this._color1 = this._color2 = 0;
        this._tilesWide = this._tilesTall = 2;
        Bc.call(this, a, b);
        this.tileWidth = c;
        this.tileHeight = d;
        this._tilesWide = e;
        this._tilesTall = f;
        this._color1 = k;
        this._color2 = r;
        this.floorToEven = g;
        this.makeTiles(this.tileWidth, this.tileHeight, this._tilesWide, this._tilesTall, this._color1, this._color2);
      }
      h["flixel.addons.ui.FlxUITileTest"] = ej;
      ej.__name__ = "flixel.addons.ui.FlxUITileTest";
      ej.__interfaces__ = [ud, ed];
      ej.__super__ = Bc;
      ej.prototype = q(Bc.prototype, {
        makeTiles: function (a, b, c, d, e, f) {
          if (f == null) {
            f = -3881788;
          }
          if (e == null) {
            e = -8355712;
          }
          b = this.constrain(a * this._tilesWide, b * this._tilesTall);
          a = b.x | 0;
          b = b.y | 0;
          this.makeGraphic(c, d, e);
          e = this.get_pixels();
          var k = 0;
          for (var r = 0; r < c;) {
            var g = r++;
            for (var J = 0, h = d; J < h;) {
              var m = J++;
              if (k % 2 == 0) {
                e.setPixel(g, m, f);
              }
              ++k;
            }
            if (c % 2 != 0) {
              ++k;
            }
          }
          this.set_pixels(e);
          c = this.scale;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
          this.updateHitbox();
        },
        constrain: function (a, b) {
          a = a / this._tilesWide | 0;
          var c = b / this._tilesTall | 0;
          if (a < c) {
            c = a;
          } else if (c < a) {
            a = c;
          }
          if (this.floorToEven && a % 2 == 1) {
            --a;
            c = a;
          }
          if (this.baseTileSize > 0) {
            c = a = (a / this.baseTileSize | 0) * this.baseTileSize;
          }
          b = a;
          a = c;
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = fa.pool.get().set(b, a);
          b._inPool = false;
          return b;
        },
        resize: function (a, b) {
          this.makeTiles(this.tileWidth, this.tileHeight, this._tilesWide, this._tilesTall, this._color1, this._color2);
        },
        __class__: ej
      });
      function Rd(a, b, c, d) {
        eb.call(this, 0, 0);
        if (c == null) {
          c = new Jg(0, 0, "left", "top", "right", "top");
        }
        d = Rd.styleFix(d);
        this.refresh(a, b, "", "", c, d);
        this.setScrollFactor(0, 0);
      }
      h["flixel.addons.ui.FlxUITooltip"] = Rd;
      Rd.__name__ = "flixel.addons.ui.FlxUITooltip";
      Rd.styleFix = function (a, b) {
        if (a == null) {
          a = {
            titleFormat: null,
            bodyFormat: null,
            titleBorder: null,
            bodyBorder: null,
            titleOffset: null,
            bodyOffset: null,
            background: null,
            borderSize: -1,
            borderColor: null,
            arrow: null,
            titleWidth: -1,
            bodyWidth: -1,
            autoSizeHorizontal: null,
            autoSizeVertical: null,
            leftPadding: -1,
            rightPadding: -1,
            topPadding: -1,
            bottomPadding: -1
          };
        }
        if (b != null) {
          if (a.titleFormat == null) {
            a.titleFormat = b.titleFormat;
          }
          if (a.bodyFormat == null) {
            a.bodyFormat = b.bodyFormat;
          }
          if (a.titleBorder == null) {
            a.titleBorder = b.titleBorder;
          }
          if (a.bodyBorder == null) {
            a.bodyBorder = b.bodyBorder;
          }
          if (a.titleOffset == null) {
            a.titleOffset = b.titleOffset;
          }
          if (a.bodyOffset == null) {
            a.bodyOffset = b.bodyOffset;
          }
          if (a.background == null) {
            a.background = b.background;
          }
          if (a.borderColor == null) {
            a.borderColor = b.borderColor;
          }
          if (a.arrow == null) {
            a.arrow = b.arrow;
          }
          if (a.borderSize == null || a.borderSize < 0) {
            a.borderSize = b.borderSize;
          }
          if (a.titleWidth == null || a.titleWidth < 0) {
            a.titleWidth = b.titleWidth;
          }
          if (a.bodyWidth == null || a.bodyWidth < 0) {
            a.bodyWidth = b.bodyWidth;
          }
          if (a.autoSizeHorizontal == null) {
            a.autoSizeHorizontal = b.autoSizeHorizontal;
          }
          if (a.autoSizeVertical == null) {
            a.autoSizeVertical = b.autoSizeVertical;
          }
          if (a.leftPadding == null || a.leftPadding < 0) {
            a.leftPadding = b.leftPadding;
          }
          if (a.rightPadding == null || a.rightPadding < 0) {
            a.rightPadding = b.rightPadding;
          }
          if (a.topPadding == null || a.topPadding < 0) {
            a.topPadding = b.topPadding;
          }
          if (a.leftPadding == null || a.bottomPadding < 0) {
            a.bottomPadding = b.bottomPadding;
          }
        }
        if (b != null) {
          if (a.titleFormat != null) {
            Rd.fillFontDefNulls(a.titleFormat, b.titleFormat);
            if (a.titleFormat.format != null && b.titleFormat.format != null) {
              Rd.fillFormatNulls(a.titleFormat.format, b.titleFormat.format);
            }
          }
          if (a.bodyFormat != null) {
            Rd.fillFontDefNulls(a.bodyFormat, b.bodyFormat);
            if (a.bodyFormat.format != null && b.bodyFormat.format != null) {
              Rd.fillFormatNulls(a.bodyFormat.format, b.bodyFormat.format);
            }
          }
        }
        if (a.titleFormat == null) {
          a.titleFormat = new od(null, null, null, new nd(null, 8, -16777216), null);
        }
        if (a.bodyFormat == null) {
          a.bodyFormat = new od(null, null, null, new nd(null, 8, -16777216), null);
        }
        if (a.titleBorder == null) {
          a.titleBorder = new df(Ta.NONE, 0, 0, 1);
        }
        if (a.bodyBorder == null) {
          a.bodyBorder = new df(Ta.NONE, 0, 0, 1);
        }
        if (a.titleOffset == null) {
          var c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = fa.pool.get().set(b, c);
          b._inPool = false;
          a.titleOffset = b;
        }
        if (a.bodyOffset == null) {
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = fa.pool.get().set(b, c);
          b._inPool = false;
          a.bodyOffset = b;
        }
        if (a.background == null) {
          a.background = 16777162;
        }
        if (a.borderColor == null) {
          a.borderColor = -16777216;
        }
        if (a.arrow == null) {
          a.arrow = "flixel/flixel-ui/img/tooltip_arrow.png";
        }
        if (a.borderSize == null || a.borderSize < 0) {
          a.borderSize = 1;
        }
        if (a.titleWidth == null || a.titleWidth < 0) {
          a.titleWidth = 100;
        }
        if (a.bodyWidth == null || a.bodyWidth < 0) {
          a.bodyWidth = 100;
        }
        if (a.autoSizeHorizontal == null) {
          a.autoSizeHorizontal = true;
        }
        if (a.autoSizeVertical == null) {
          a.autoSizeVertical = true;
        }
        if (a.leftPadding == null || a.leftPadding < 0) {
          a.leftPadding = 0;
        }
        if (a.rightPadding == null || a.rightPadding < 0) {
          a.rightPadding = 0;
        }
        if (a.topPadding == null || a.topPadding < 0) {
          a.topPadding = 0;
        }
        if (a.leftPadding == null || a.bottomPadding < 0) {
          a.bottomPadding = 0;
        }
        return a;
      };
      Rd.cloneStyle = function (a) {
        var b = a.titleFormat != null ? a.titleFormat.clone() : null;
        var c = a.bodyFormat != null ? a.bodyFormat.clone() : null;
        var d = a.borderSize;
        var e = a.titleWidth;
        var f = a.bodyWidth;
        var k = a.background;
        var r = a.borderColor;
        var g = a.arrow;
        var J = a.titleOffset;
        var h = null;
        if (h == null) {
          var m = 0;
          var p = 0;
          if (p == null) {
            p = 0;
          }
          if (m == null) {
            m = 0;
          }
          m = fa.pool.get().set(m, p);
          m._inPool = false;
          h = m;
        }
        m = J.x;
        p = J.y;
        if (p == null) {
          p = 0;
        }
        if (m == null) {
          m = 0;
        }
        h.set_x(m);
        h.set_y(p);
        J = a.bodyOffset;
        var l = null;
        if (l == null) {
          p = m = 0;
          if (p == null) {
            p = 0;
          }
          if (m == null) {
            m = 0;
          }
          m = fa.pool.get().set(m, p);
          m._inPool = false;
          l = m;
        }
        m = J.x;
        p = J.y;
        if (p == null) {
          p = 0;
        }
        if (m == null) {
          m = 0;
        }
        l.set_x(m);
        l.set_y(p);
        return {
          titleFormat: b,
          bodyFormat: c,
          borderSize: d,
          titleWidth: e,
          bodyWidth: f,
          background: k,
          borderColor: r,
          arrow: g,
          titleOffset: h,
          bodyOffset: l,
          titleBorder: a.titleBorder.clone(),
          bodyBorder: a.bodyBorder.clone(),
          autoSizeVertical: a.autoSizeVertical,
          autoSizeHorizontal: a.autoSizeHorizontal,
          leftPadding: a.leftPadding,
          rightPadding: a.rightPadding,
          topPadding: a.topPadding,
          bottomPadding: a.bottomPadding
        };
      };
      Rd.fillFontDefNulls = function (a, b) {
        if (a.get_size() == 0) {
          a.set_size(b.get_size());
        }
        if (a.name == null || a.name == "") {
          a.name = b.name;
        }
        if (a.file == null || a.file == "") {
          a.file = b.file;
        }
        if (a.extension == null || a.extension == "") {
          a.extension = b.extension;
        }
        if (a.border == null) {
          a.border = b.border != null ? b.border.clone() : null;
        }
      };
      Rd.fillFormatNulls = function (a, b) {
        if (a.align == null) {
          a.align = b.align;
        }
        if (a.blockIndent == null) {
          a.blockIndent = b.blockIndent;
        }
        if (a.bold == null) {
          a.bold = b.bold;
        }
        if (a.bullet == null) {
          a.bullet = b.bullet;
        }
        if (a.color == null) {
          a.color = b.color;
        }
        if (a.font == null) {
          a.font = b.font;
        }
        if (a.indent == null) {
          a.indent = b.indent;
        }
        if (a.italic == null) {
          a.italic = b.italic;
        }
        if (a.kerning == null) {
          a.kerning = b.kerning;
        }
        if (a.leading == null) {
          a.leading = b.leading;
        }
        if (a.leftMargin == null) {
          a.leftMargin = b.leftMargin;
        }
        if (a.letterSpacing == null) {
          a.letterSpacing = b.letterSpacing;
        }
        if (a.rightMargin == null) {
          a.rightMargin = b.rightMargin;
        }
        if (a.size == null) {
          a.size = b.size;
        }
        if (a.tabStops == null) {
          a.tabStops = b.tabStops;
        }
        if (a.target == null) {
          a.target = b.target;
        }
        if (a.underline == null) {
          a.underline = b.underline;
        }
        if (a.url == null) {
          a.url = b.url;
        }
      };
      Rd.__super__ = eb;
      Rd.prototype = q(eb.prototype, {
        show: function (a, b, c, d, e, f) {
          if (f == null) {
            f = true;
          }
          if (e == null) {
            e = true;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = "";
          }
          if (b == null) {
            b = "";
          }
          this.set_visible(true);
          this.set_active(true);
          this.set_x(0);
          this.set_y(0);
          this._bkg.set_x(0);
          this._bkg.set_y(0);
          this._arrow.set_x(0);
          this._arrow.set_y(0);
          this._arrowBkg.set_x(0);
          this._arrowBkg.set_y(0);
          this._arrowBkg = this.makeArrowBkg(this._arrowBkg);
          this._arrow.set_color(this.style.background);
          this._arrow.set_visible(this._arrowBkg.set_visible(f));
          if (this.style.titleWidth > 0) {
            this._titleText.set_width(this._titleText.textField.set_width(this.style.titleWidth) | 0);
          }
          if (this.style.bodyWidth > 0) {
            this._bodyText.set_width(this._bodyText.textField.set_width(this.style.bodyWidth) | 0);
          }
          if (this.style.titleFormat != null) {
            this.style.titleFormat.apply(null, this._titleText);
          }
          if (this.style.bodyFormat != null) {
            this.style.bodyFormat.apply(null, this._bodyText);
          }
          if (this.style.titleBorder != null) {
            this.style.titleBorder.apply(this._titleText);
          }
          if (this.style.bodyBorder != null) {
            this.style.bodyBorder.apply(this._bodyText);
          }
          this._titleText.set_text(b);
          this._bodyText.set_text(c);
          this._titleText.update(0);
          this._bodyText.update(0);
          b = this._titleText.textField.get_textHeight() + 4 | 0;
          if (this.style.titleOffset != null) {
            this._titleText.set_x(this.style.titleOffset.x | 0);
            this._titleText.set_y(this.style.titleOffset.y | 0);
          }
          if (this.style.bodyOffset != null) {
            this._bodyText.set_x(this.style.bodyOffset.x | 0);
            this._bodyText.set_y(this._titleText.y + b + this.style.bodyOffset.y | 0);
          }
          f = this._bkg.get_width() | 0;
          c = this._bkg.get_height() | 0;
          if (e) {
            e = this._titleText.text != "" ? this._titleText.x + this._titleText.get_width() : 0;
            f = this._bodyText.text != "" ? this._bodyText.x + this._bodyText.get_width() : 0;
            f = Math.max(e, f) | 0;
          }
          if (d) {
            c = this._titleText.text != "" ? this._titleText.y + this._titleText.get_height() : 0;
            d = this._bodyText.text != "" ? this._bodyText.y + this._bodyText.get_height() : 0;
            c = Math.max(c, d) | 0;
            c = Math.max(c, this._arrowBkg.get_height()) | 0;
          }
          if (this.style.leftPadding == null) {
            this.style.leftPadding = 0;
          }
          if (this.style.rightPadding == null) {
            this.style.rightPadding = 0;
          }
          if (this.style.topPadding == null) {
            this.style.topPadding = 0;
          }
          if (this.style.bottomPadding == null) {
            this.style.bottomPadding = 0;
          }
          f += this.style.leftPadding + this.style.rightPadding;
          c += this.style.topPadding + this.style.bottomPadding;
          c |= 0;
          this.refreshBkg(f | 0, c, this.style);
          d = this._anchorArrow.x.offset | 0;
          e = this._anchorArrow.y.offset | 0;
          this._anchorArrow.x.offset -= this.anchor.x.offset;
          this._anchorArrow.y.offset += this.anchor.y.offset;
          this._anchorArrow.x.offset |= 0;
          this._anchorArrow.y.offset |= 0;
          this._anchorArrow.anchorThing(this._arrow, this._bkg);
          this._anchorArrow.x.offset = d;
          this._anchorArrow.y.offset = e;
          if (this._arrow.x < 0) {
            e = Math.abs(this._arrow.x) | 0;
            d = this._bkg;
            d.set_x(d.x + e);
            d = this._titleText;
            d.set_x(d.x + e);
            d = this._bodyText;
            d.set_x(d.x + e);
            this._arrow.set_x(0);
          }
          if (this._arrow.y < 0) {
            e = Math.abs(this._arrow.y) | 0;
            d = this._bkg;
            d.set_y(d.y + e);
            d = this._titleText;
            d.set_y(d.y + e);
            d = this._bodyText;
            d.set_y(d.y + e);
            this._arrow.set_y(0);
          }
          if (this._titleText.text != "" && this._bodyText.text == "") {
            c -= this.style.topPadding + this.style.bottomPadding;
            d = this._titleText;
            d.set_y(d.y + ((c - b) / 2 | 0));
          }
          d = this._titleText;
          d.set_x(d.x + this.style.leftPadding);
          d = this._bodyText;
          d.set_x(d.x + this.style.leftPadding);
          d = this._titleText;
          d.set_y(d.y + this.style.topPadding);
          d = this._bodyText;
          d.set_y(d.y + this.style.topPadding);
          if (this._titleText.text == "") {
            this._titleText.set_x(this._bkg.x);
            this._titleText.set_y(this._bkg.y);
            this._titleText.set_width(this._bkg.get_width());
          }
          if (this._bodyText.text == "") {
            this._bodyText.set_x(this._bkg.x);
            this._bodyText.set_y(this._bkg.y);
            this._bodyText.set_width(this._bkg.get_width());
          }
          this.anchor.anchorThing(this, a);
          this.set_x(this.x | 0);
          this.set_y(this.y | 0);
          this._arrowBkg.set_x(this._arrow.x - this.style.borderSize | 0);
          this._arrowBkg.set_y(this._arrow.y - this.style.borderSize | 0);
          this._titleText.set_x(this._titleText.x | 0);
          this._bodyText.set_x(this._bodyText.x | 0);
          this._bkg.set_x(this._bkg.x | 0);
          this._bkg.set_y(this._bkg.y | 0);
          this._arrowBkg.set_x(this._arrowBkg.x | 0);
          this._arrowBkg.set_y(this._arrowBkg.y | 0);
          this._arrow.set_x(this._arrow.x | 0);
          this._arrow.set_y(this._arrow.y | 0);
        },
        get_height: function () {
          if (this.group.length == 0) {
            return 0;
          }
          var a = Infinity;
          var b = -Infinity;
          for (var c = 0, d = this.group.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && !(e instanceof Q)) {
              var f = e.y;
              e = f + e.get_height();
              if (e > b) {
                b = e;
              }
              if (f < a) {
                a = f;
              }
            }
          }
          return b - a;
        },
        hide: function () {
          this.set_visible(false);
          this.set_active(false);
        },
        set_anchor: function (a) {
          this.anchor = a;
          this._anchorArrow = this.getArrowAnchor(a, this._anchorArrow);
          if (this._arrowBkg != null) {
            this.makeArrowBkg(this._arrowBkg);
          }
          return a;
        },
        set_style: function (a) {
          return this.style = a;
        },
        refresh: function (a, b, c, d, e, f) {
          var k = this._bkg == null;
          var r = this._arrow == null;
          var n = this._titleText == null;
          var J = this._bodyText == null;
          if (k) {
            this._bkg = new G();
          }
          if (r) {
            this._arrow = new G();
          }
          if (n) {
            this._titleText = new ae(0, 0, a);
            if (f.titleFormat != null) {
              f.titleFormat.apply(null, this._titleText);
            }
            if (f.titleBorder != null) {
              f.titleBorder.apply(this._titleText);
            }
          }
          if (J) {
            this._bodyText = new ae(0, 0, a);
            if (f.bodyFormat != null) {
              f.bodyFormat.apply(null, this._bodyText);
            }
            if (f.bodyBorder != null) {
              f.bodyBorder.apply(this._bodyText);
            }
          }
          this._titleText.set_text(c);
          this._bodyText.set_text(d);
          this._arrow.set_color(f.background);
          c = g.bitmap.add(f.arrow);
          if (f.arrow == null) {
            f.arrow = "flixel/flixel-ui/img/tooltip_arrow.png";
            g.bitmap.add(f.arrow);
          }
          this._arrow.loadGraphic(f.arrow, true, c.height, c.height);
          if (r) {
            this._arrow.animation.add("right", [0], 0, false);
            this._arrow.animation.add("down", [1], 0, false);
            this._arrow.animation.add("left", [2], 0, false);
            this._arrow.animation.add("up", [3], 0, false);
          }
          this.refreshBkg(a, b, f);
          this.set_style(f);
          if (r && f.borderSize > 0) {
            this._arrowBkg = new G();
            this.add(this._arrowBkg);
          }
          this.set_anchor(e);
          if (k) {
            this.add(this._bkg);
          }
          if (r) {
            this.add(this._arrow);
          }
          if (n) {
            this.add(this._titleText);
          }
          if (J) {
            this.add(this._bodyText);
          }
        },
        refreshBkg: function (a, b, c) {
          var d = this.getStyleKey(a, b, c);
          if (g.bitmap._cache.h[d] == null) {
            if (c.borderSize > 0) {
              var e = new T(a, b, false, c.borderColor);
              e.fillRect(new ea(c.borderSize, c.borderSize, a - c.borderSize * 2, b - c.borderSize * 2), c.background);
            } else {
              e = new T(a, b, false, c.background);
            }
            g.bitmap.add(e, true, d);
          }
          this._bkg.loadGraphic(d);
        },
        getStyleKey: function (a, b, c) {
          var d = c.background;
          a = a + "," + b + "," + ("0x" + w.hex(d >> 24 & 255, 2) + w.hex(d >> 16 & 255, 2) + w.hex(d >> 8 & 255, 2) + w.hex(d & 255, 2)) + "," + c.borderSize + ",";
          d = c.borderColor;
          return a + ("0x" + w.hex(d >> 24 & 255, 2) + w.hex(d >> 16 & 255, 2) + w.hex(d >> 8 & 255, 2) + w.hex(d & 255, 2));
        },
        makeArrowBkg: function (a) {
          if (a == null) {
            a = new G();
          }
          var b = "arrowBkg:" + this.style.background + "," + this.style.borderSize + "," + this.style.borderColor + "," + (this._arrow == null ? "null" : this._arrow.animation._curAnim == null ? "null" : this._arrow.animation._curAnim.name);
          if (g.bitmap._cache.h[b] == null) {
            var c = this.style.borderSize;
            if (c < 0 || c == null) {
              c = 0;
            }
            var d = this._arrow.get_width() + c | 0;
            c = this._arrow.get_height() + c | 0;
            d = new T(d, c, true, 0);
            g.bitmap.add(d, false, b);
            a.loadGraphic(b);
            d = this._arrow.color;
            this._arrow.set_color(this.style.borderColor);
            new Aa().identity();
            a.stamp(this._arrow, this.style.borderSize * 0, this.style.borderSize * 0);
            a.stamp(this._arrow, this.style.borderSize, this.style.borderSize * 0);
            a.stamp(this._arrow, this.style.borderSize * 2, this.style.borderSize * 0);
            a.stamp(this._arrow, this.style.borderSize * 0, this.style.borderSize);
            a.stamp(this._arrow, this.style.borderSize * 2, this.style.borderSize);
            a.stamp(this._arrow, this.style.borderSize * 0, this.style.borderSize * 2);
            a.stamp(this._arrow, this.style.borderSize, this.style.borderSize * 2);
            a.stamp(this._arrow, this.style.borderSize * 2, this.style.borderSize * 2);
            this._arrow.set_color(d);
          }
          a.loadGraphic(b);
          return a;
        },
        getArrowAnchor: function (a, b) {
          var c = a.x.side == "left" && a.x.flush == "right" || a.x.side == "right" && a.x.flush == "left";
          var d = a.y.side == "top" && a.y.flush == "bottom" || a.y.side == "bottom" && a.y.flush == "top";
          var e = a.x.side == "left" && a.x.flush == "left" || a.x.side == "right" && a.x.flush == "right";
          var f = a.y.side == "top" && a.y.flush == "top" || a.y.side == "bottom" && a.y.flush == "bottom";
          var k = e && f;
          var r = this.style.borderSize;
          if (!c || !d) {
            if (c) {
              b = a.getFlipped(true, false, b);
              if (b.x.flush == "left") {
                b.x.offset -= r;
                this._arrow.animation.play("right");
              }
              if (b.x.flush == "right") {
                b.x.offset += r;
                this._arrow.animation.play("left");
              }
            }
            if (d) {
              b = a.getFlipped(false, true, b);
              if (b.y.flush == "top") {
                b.y.offset -= r;
                this._arrow.animation.play("down");
              }
              if (b.y.flush == "bottom") {
                b.y.offset += r;
                this._arrow.animation.play("up");
              }
            }
          }
          if (!k) {
            if (e) {
              if (b.x.flush == "left") {
                b.x.offset += r;
              }
              if (b.x.flush == "right") {
                b.x.offset -= r;
              }
            }
            if (f) {
              if (b.y.flush == "top") {
                b.y.offset += r;
              }
              if (b.y.flush == "bottom") {
                b.y.offset -= r;
              }
            }
          }
          return b ?? a;
        },
        __class__: Rd,
        __properties__: q(eb.prototype.__properties__, {
          set_anchor: "set_anchor",
          set_style: "set_style"
        })
      });
      function Qi(a, b) {
        this.current = -1;
        this._init = false;
        this.delay = 0.1;
        this.defaultAnchor = this.fixedPosition = this.defaultStyle = null;
        this.autoFlipAnchor = true;
        if (a != null) {
          this.state = a;
        } else if (b != null) {
          this.subState = b;
        }
        this.list = [];
        this.tooltip = new Rd(100, 50);
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = fa.pool.get().set(a, b);
        a._inPool = false;
        this.lastPosition = a;
        this.defaultAnchor = this.tooltip.anchor.clone();
        this.defaultStyle = Rd.cloneStyle(this.tooltip.style);
      }
      h["flixel.addons.ui.FlxUITooltipManager"] = Qi;
      Qi.__name__ = "flixel.addons.ui.FlxUITooltipManager";
      Qi.__interfaces__ = [B];
      Qi.prototype = {
        init: function () {
          var a = this.state != null ? this.state._ui : this.subState != null ? this.subState._ui : null;
          if (a != null && a != null && a.getDefinition("default:tooltip") != null) {
            a = a._loadTooltipData(null);
            this.defaultStyle = Rd.cloneStyle(a.style);
            this.tooltip.set_style(this.defaultStyle);
          }
        },
        destroy: function () {
          da.destroyArray(this.list);
          this.defaultStyle = this.defaultAnchor = this.subState = this.state = this.lastPosition = this.tooltip = this.list = null;
        },
        add: function (a, b) {
          if (this._init) {
            b.style = Rd.styleFix(b.style, this.defaultStyle);
          }
          if (ta.__implements(a, Ng)) {
            var c = a;
            var d = this.findBtn(c);
            if (d == -1) {
              this.list.push(new nj(c, b));
            } else {
              this.list[d].data = b;
              this.list[d].count = 0;
            }
          } else {
            d = this.findObj(a);
            if (d == -1) {
              c = new vd(0, 0, "", null, false, true);
              c.resize(a.get_width(), a.get_height());
              c.set_x(a.x);
              c.set_y(a.y);
              c.set_width(a.get_width());
              c.set_height(a.get_height());
              d = c.scrollFactor;
              var e = a.scrollFactor.x;
              var f = a.scrollFactor.y;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              d.set_x(e);
              d.set_y(f);
              if (this.state != null) {
                this.state.add(c);
              } else if (this.subState != null) {
                this.subState.add(c);
              }
              this.list.push(new nj(c, b, a));
            } else {
              this.list[d].data = b;
              this.list[d].count = 0;
              this.list[d].btn.set_x(a.x);
              this.list[d].btn.set_y(a.y);
              this.list[d].btn.set_width(a.get_width());
              this.list[d].btn.set_height(a.get_height());
              d = this.list[d].btn.scrollFactor;
              e = a.scrollFactor.x;
              f = a.scrollFactor.y;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              d.set_x(e);
              d.set_y(f);
            }
          }
        },
        update: function (a) {
          for (var b = 0, c = this.list.length; b < c;) {
            var d = b++;
            var e = this.list[d].btn;
            var f = this.list[d].obj;
            if (this.list[d].enabled == 0) {
              if (this.current == d) {
                this.hide(d);
              }
              this.list[d].count = 0;
            } else {
              if (f != null) {
                e.set_x(f.x);
                e.set_y(f.y);
                e.set_width(f.get_width());
                e.set_height(f.get_height());
                e.set_visible(f.visible);
              }
              if (this.list[d].sticky == 0 && (e.visible == 0 || e.get_justMousedOut() || e.get_mouseIsOut())) {
                this.list[d].count = 0;
                this.hide(d);
              } else if ((e.get_justMousedOver() || e.get_mouseIsOver()) && e.get_mouseIsOver()) {
                this.list[d].count += a;
              }
              if (this.list[d].count > this.delay || this.list[d].data.delay >= 0 && this.list[d].count > this.list[d].data.delay) {
                if (this.current != d) {
                  this.show(d);
                } else if (this.list[d].data.moving) {
                  this.show(d);
                }
              }
            }
          }
        },
        hide: function (a) {
          if (this.current == a) {
            this.tooltip.hide();
            if (this.state != null) {
              this.state.remove(this.tooltip, true);
            }
            if (this.subState != null) {
              this.subState.remove(this.tooltip, true);
            }
            this.current = -1;
          }
        },
        findBtn: function (a) {
          if (a == null) {
            return -1;
          }
          for (var b = 0, c = this.list.length; b < c;) {
            var d = b++;
            if (this.list[d] != null && this.list[d].btn == a) {
              return d;
            }
          }
          return -1;
        },
        findObj: function (a) {
          if (a == null) {
            return -1;
          }
          for (var b = 0, c = this.list.length; b < c;) {
            var d = b++;
            if (this.list[d] != null && this.list[d].obj == a) {
              return d;
            }
          }
          return -1;
        },
        show: function (a) {
          if (!(a < 0) && !(a >= this.list.length)) {
            var b = this.list[a].btn;
            if (b.visible != 0 && (this.list[a].obj == null || this.list[a].obj.visible != 0)) {
              if (this.current == a) {
                a = b.x - this.lastPosition.x;
                var c = b.y - this.lastPosition.y;
                this.lastPosition.set_x(b.x);
                this.lastPosition.set_y(b.y);
                b = this.tooltip;
                b.set_x(b.x + a);
                b = this.tooltip;
                b.set_y(b.y + c);
              } else {
                this.current = a;
                a = this.list[a].data;
                if (a.init != 1) {
                  a.style = Rd.styleFix(a.style, this.defaultStyle);
                  a.init = true;
                }
                var d = c = true;
                if (a.style != null) {
                  this.tooltip.set_style(a.style);
                  c = a.style.autoSizeVertical;
                  d = a.style.autoSizeHorizontal;
                }
                if (a.anchor != null) {
                  this.tooltip.set_anchor(a.anchor);
                } else if (this.defaultAnchor != null) {
                  this.tooltip.set_anchor(this.defaultAnchor);
                }
                if (this.state != null) {
                  this.state.add(this.tooltip);
                }
                if (this.subState != null) {
                  this.subState.add(this.tooltip);
                }
                this.tooltip.show(b, a.title, a.body, c, d);
                if (this.fixedPosition != null) {
                  this.fixedPosition.anchor.anchorThing(this.tooltip, this.fixedPosition.object);
                }
                if (this.autoFlipAnchor && this.checkAutoFlip(this.tooltip, this.fixedPosition != null ? this.fixedPosition.anchor : null)) {
                  if (this.fixedPosition != null) {
                    this.fixedPosition.anchor.anchorThing(this.tooltip, this.fixedPosition.object);
                  } else {
                    this.tooltip.show(b, a.title, a.body, c, d, this.showTooltipArrow);
                  }
                }
                a = this.lastPosition;
                c = b.x;
                b = b.y;
                if (b == null) {
                  b = 0;
                }
                if (c == null) {
                  c = 0;
                }
                a.set_x(c);
                a.set_y(b);
                if (this.state != null) {
                  this.state.onShowTooltip(this.tooltip);
                } else if (this.subState != null) {
                  this.subState.onShowTooltip(this.tooltip);
                }
              }
            }
          }
        },
        checkAutoFlip: function (a, b) {
          var c = a.x < 0 || a.x + a.get_width() > g.width;
          var d = a.y < 0 || a.y + a.get_height() > g.height;
          if (c || d) {
            if (b == null) {
              b = a.anchor;
            }
            b.getFlipped(c, d, b);
            return true;
          } else {
            return false;
          }
        },
        __class__: Qi
      };
      function nj(a, b, c) {
        this.sticky = false;
        this.btn = a;
        this.data = b;
        this.obj = c;
        this.count = 0;
        this.enabled = true;
        if (this.data != null) {
          if (this.data.delay == null) {
            this.data.delay = -1;
          }
          if (this.data.moving == null) {
            this.data.moving = false;
          }
        }
      }
      h["flixel.addons.ui._FlxUITooltipManager.FlxUITooltipEntry"] = nj;
      nj.__name__ = "flixel.addons.ui._FlxUITooltipManager.FlxUITooltipEntry";
      nj.__interfaces__ = [B];
      nj.prototype = {
        destroy: function () {
          this.count = 0;
          this.btn = this.obj = null;
          this.data.anchor = null;
          this.data = this.data.style = null;
        },
        __class__: nj
      };
      function od(a, b, c, d, e) {
        if (c == null) {
          c = "";
        }
        if (b == null) {
          b = ".ttf";
        }
        this._size = 0;
        this.name = a;
        this.extension = b;
        this.file = c;
        this.format = d;
        if (this.format == null) {
          this.format = new nd();
        }
        this.border = e;
        if (this.border == null) {
          this.border = new df(Ta.NONE, 0);
        }
      }
      h["flixel.addons.ui.FontDef"] = od;
      od.__name__ = "flixel.addons.ui.FontDef";
      od.copyFromTextField = function (a) {
        a = a.get_defaultTextFormat();
        var b = new od("");
        b.fromStr(a.font);
        b.format.font = a.font;
        b.format.size = a.size;
        b.format.color = a.color;
        b.format.bold = a.bold;
        b.format.italic = a.italic;
        b.format.underline = a.underline;
        b.format.url = a.url;
        b.format.letterSpacing = a.letterSpacing;
        b.format.leading = a.leading;
        b.format.target = a.target;
        b.format.align = a.align;
        return b;
      };
      od.copyFromFlxText = function (a) {
        var b = od.copyFromTextField(a.textField);
        b.fromStr(a._font);
        b.border.style = a.borderStyle;
        b.border.color = a.borderColor;
        b.border.quality = a.borderQuality;
        b.border.size = a.borderSize;
        return b;
      };
      od.fromXML = function (a) {
        var b = F.xml_str(a, "font");
        var c = F.xml_str(a, "style");
        var d = null;
        if (b != "") {
          d = Ma.font(b, c);
        }
        c = F.xml_str(a, "style");
        b = Ma.fontSize(d, F.xml_i(a, "size", 8));
        var e = F.xml_color(a, "color", true, -1);
        switch (F.xml_str(a, "align").toLowerCase()) {
          case "center":
            var f = 0;
            break;
          case "justify":
            f = 2;
            break;
          case "left":
            f = 3;
            break;
          case "right":
            f = 4;
            break;
          default:
            f = 3;
        }
        d = new od(F.xml_str(a, "font"), ".ttf", d);
        d.format.color = e;
        d.format.size = b;
        d.format.align = f;
        d.set_size(b);
        d.setFontStyle(c);
        d.border = df.fromXML(a);
        return d;
      };
      od.prototype = {
        get_size: function () {
          if (this.format != null) {
            this._size = this.format.size | 0;
          }
          return this._size;
        },
        set_size: function (a) {
          if (this.format != null) {
            this.format.size = a;
          }
          return this._size = a;
        },
        clone: function () {
          var a = this.border == null ? null : this.border.clone();
          var b = this.format == null ? null : new nd(this.format.font, this.format.size, this.format.color, this.format.bold, this.format.italic, this.format.underline, this.format.url, this.format.target, this.format.align, this.format.leftMargin, this.format.rightMargin, this.format.indent, this.format.leading);
          if (this.format != null) {
            b.letterSpacing = this.format.letterSpacing;
          }
          a = new od(this.name, this.extension, this.file, b, a);
          a.set_size(this.get_size());
          return a;
        },
        applyFlx: function (a) {
          var b = null;
          if (this.format.align != null) {
            switch (this.format.align) {
              case 0:
                b = "center";
                break;
              case 2:
                b = "justify";
                break;
              case 3:
                b = "left";
                break;
              case 4:
                b = "right";
                break;
              default:
                b = "left";
            }
          }
          a.setFormat(this.file == "" || this.file == null ? null : this.file, this.format.size | 0, this.format.color, b, this.border.style, this.border.color);
          a.textField.get_defaultTextFormat().leading = this.format.leading;
          a.textField.get_defaultTextFormat().letterSpacing = this.format.letterSpacing;
          return a;
        },
        apply: function (a, b) {
          if (a != null) {
            a.setTextFormat(this.format);
          }
          if (b != null) {
            this.applyFlx(b);
          }
        },
        fromStr: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (!(b > 3)) {
            a = pe.fix(a);
            var c = this.getFontStyle(a);
            this.setFontStyle(c);
            var d = "";
            for (var e = 0, f = od.EXTENSIONS; e < f.length;) {
              var k = f[e];
              ++e;
              if (a.indexOf(k) != -1 && W.exists(a + d, "FONT")) {
                this.name = w.replace(a, d, "");
                this.file = a;
                d = k;
                break;
              }
            }
            if (d == "") {
              e = 0;
              for (f = od.EXTENSIONS; e < f.length;) {
                k = f[e];
                ++e;
                if (W.exists(a + k, "FONT")) {
                  d = k;
                  this.name = a;
                  this.file = a + d;
                  break;
                }
              }
              this.setFontStyle(c);
            } else {
              a = this.stripFontExtensions(a);
              if (this.getFontStyle(a) != "") {
                a = M.substr(a, a.length - 1, 1);
              }
              this.fromStr(a, b + 1);
            }
          }
        },
        stripFontExtensions: function (a) {
          if (a == null) {
            return a;
          }
          for (var b = 0, c = od.EXTENSIONS; b < c.length;) {
            var d = c[b];
            ++b;
            if (a != null && a.indexOf(d) != -1) {
              a = w.replace(a, d, "");
            }
          }
          return a;
        },
        getFontExtension: function (a) {
          if (a == null) {
            return "";
          }
          for (var b = 0, c = od.EXTENSIONS; b < c.length;) {
            var d = c[b];
            ++b;
            if (a.indexOf(d) != -1) {
              return d;
            }
          }
          return a;
        },
        fixFontName: function () {
          var a = this.getFontStyle(this.file);
          var b = this.getFontExtension(this.file);
          var c = this.stripFontExtensions(this.file);
          if (a != "") {
            c = M.substr(c, 0, c.length - 1);
          }
          a = "";
          if (this.format.bold && this.format.italic) {
            a = "z";
          } else if (this.format.bold) {
            a = "b";
          } else if (this.format.italic) {
            a = "i";
          }
          this.file = c + a + b;
        },
        getFontStyle: function (a) {
          if (a == null) {
            return "";
          }
          a = this.stripFontExtensions(a);
          a = M.substr(a, a.length - 1, 1);
          if (a != "" && a != null) {
            a = a.toLowerCase();
            switch (a) {
              case "b":
                return "b";
              case "i":
                return "i";
              case "z":
                return "z";
            }
          }
          return "";
        },
        setFontStyle: function (a) {
          a = a.toLowerCase();
          switch (a) {
            case "b":
            case "bold":
              this.format.bold = true;
              this.format.italic = false;
              break;
            case "all":
            case "bi":
            case "bold-italic":
            case "bolditalic":
            case "both":
            case "ib":
            case "italicbold":
            case "z":
              this.format.bold = true;
              this.format.italic = true;
              break;
            case "i":
            case "italic":
              this.format.bold = false;
              this.format.italic = true;
              break;
            default:
              this.format.bold = false;
              this.format.italic = false;
          }
          this.fixFontName();
        },
        __class__: od,
        __properties__: {
          set_size: "set_size",
          get_size: "get_size"
        }
      };
      function pe() {}
      h["flixel.addons.ui.FontFixer"] = pe;
      pe.__name__ = "flixel.addons.ui.FontFixer";
      pe.init = function () {
        if (pe.name2File == null) {
          pe.name2File = new V();
        }
      };
      pe.fix = function (a) {
        pe.init();
        if (a.indexOf(".ttf") == -1 && Object.prototype.hasOwnProperty.call(pe.name2File.h, a)) {
          a = pe.name2File.h[a];
        }
        return a;
      };
      pe.add = function (a, b) {
        if (b == null) {
          b = "";
        }
        pe.init();
        if (b != "" && Object.prototype.hasOwnProperty.call(pe.name2File.h, b)) {
          return pe.name2File.h[b];
        }
        if (!W.exists(a, "FONT")) {
          return a;
        }
        var c = W.getFont(a);
        if (c == null) {
          return a;
        }
        if (b == "") {
          b = c.name;
        }
        pe.name2File.h[b] = a;
        return pe.fix(a);
      };
      function Nk(a, b) {
        if (b == null) {
          b = "";
        }
        if (a == null) {
          a = "";
        }
        this.name = a;
        this.label = b;
      }
      h["flixel.addons.ui.StrNameLabel"] = Nk;
      Nk.__name__ = "flixel.addons.ui.StrNameLabel";
      Nk.prototype = {
        __class__: Nk
      };
      function F() {}
      h["flixel.addons.ui.U"] = F;
      F.__name__ = "flixel.addons.ui.U";
      F.xml_str = function (a, b, c, d) {
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (a.get(b) != null) {
          if (c) {
            return a.get(b).toLowerCase();
          } else {
            return a.get(b);
          }
        } else {
          return d;
        }
      };
      F.xml_name = function (a) {
        var b = F.xml_str(a, "name", true, "");
        if (b == "") {
          b = F.xml_str(a, "id", true, "");
        }
        return b;
      };
      F.xml_color = function (a, b, c, d) {
        c = null;
        a = F.xml_str(a, b, true);
        if (a != "") {
          b = xb.fromString(a);
          if (b == null) {
            throw K.thrown("U.parseHex() unable to parse hex String " + a);
          }
          c = b;
        }
        if (c == null && d != null) {
          c = d;
        }
        return c;
      };
      F.xml_strArray = function (a, b, c, d) {
        if (c == null) {
          c = true;
        }
        a = F.xml_str(a, b, c);
        if (a != "") {
          return a.split(",");
        } else {
          return d;
        }
      };
      F.xml_colorArray = function (a, b, c) {
        a = F.xml_strArray(a, b);
        b = null;
        if (a != null && a.length > 0) {
          b = [];
          c = 0;
          for (var d = a.length; c < d;) {
            var e = c++;
            var f = a[e];
            var k = xb.fromString(f);
            if (k == null) {
              throw K.thrown("U.parseHex() unable to parse hex String " + f);
            }
            b[e] = k;
          }
        }
        return b;
      };
      F.perc_to_float = function (a) {
        if (a.lastIndexOf("%") == a.length - 1) {
          a = M.substr(a, 0, a.length - 1);
          var b = new sa("([0-9]+)?(\\.)?([0-9]*)?", "");
          if (b.match(a) && (b = b.matchedPos(), b.pos == 0 && b.len == a.length)) {
            return parseFloat(a) / 100;
          }
        }
        return NaN;
      };
      F.isStrNum = function (a) {
        if (a == null || a == "") {
          return false;
        }
        var b = new sa("-?([0-9]+)?(\\.)?([0-9]*)?", "");
        if (b.match(a) && (b = b.matchedPos(), b.pos == 0 && b.len == a.length)) {
          return true;
        } else {
          return false;
        }
      };
      F.xml_f = function (a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (a.get(b) != null) {
          return parseFloat(a.get(b));
        } else {
          return c;
        }
      };
      F.xml_i = function (a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (a.get(b) != null) {
          return H.parseInt(a.get(b));
        } else {
          return c;
        }
      };
      F.xml_pt = function (a, b, c) {
        if (a.get(b) != null) {
          return F.pointify(a.get(b));
        } else {
          return c;
        }
      };
      F.boolify = function (a) {
        a = a.toLowerCase();
        if (a == "true" || a == "1") {
          return true;
        } else {
          return false;
        }
      };
      F.pointify = function (a) {
        var b = null;
        if (a != null) {
          for (var c = ["(", ")", " ", "=", ":"], d = 0; d < c.length;) {
            var e = c[d];
            for (++d; a.indexOf(e) != -1;) {
              a = w.replace(a, e, "");
            }
          }
          if (a.indexOf(",") == -1 && a.indexOf("x") != -1) {
            a = w.replace(a, "x", ",");
          }
          c = a.split(",");
          if (c.length == 2) {
            a = parseFloat(c[0]);
            c = parseFloat(c[1]);
            if (c == null) {
              c = 0;
            }
            if (a == null) {
              a = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (a == null) {
              a = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (a == null) {
              a = 0;
            }
            c = fa.pool.get().set(a, c);
            c._inPool = false;
            b = c;
          }
        }
        return b;
      };
      F.compareStringVars = function (a, b, c, d) {
        if (d == null) {
          d = "==";
        }
        switch (c) {
          case "bool":
            a = F.boolify(a);
            b = F.boolify(b);
            if (d == "==" || d == "=") {
              return a == b;
            }
            if (d == "!==" || d == "!=") {
              return a != b;
            }
            break;
          case "float":
            a = parseFloat(a);
            b = parseFloat(b);
            if (d == "==" || d == "=") {
              return a == b;
            }
            if (d == "!==" || d == "!=") {
              return a != b;
            }
            if (d == "<") {
              return a < b;
            }
            if (d == ">") {
              return a > b;
            }
            if (d == "<=") {
              return a <= b;
            }
            if (d == ">=") {
              return a >= b;
            }
            break;
          case "int":
            a = H.parseInt(a);
            b = H.parseInt(b);
            if (d == "==" || d == "=") {
              return a == b;
            }
            if (d == "!==" || d == "!=") {
              return a != b;
            }
            if (d == "<") {
              return a < b;
            }
            if (d == ">") {
              return a > b;
            }
            if (d == "<=") {
              return a <= b;
            }
            if (d == ">=") {
              return a >= b;
            }
            break;
          case "string":
            if (d == "==" || d == "=") {
              return a == b;
            }
            if (d == "!==" || d == "!=") {
              return a != b;
            }
        }
        return false;
      };
      F.xml_bool = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        if (a.get(b) != null) {
          a = a.get(b);
          a = a.toLowerCase();
          if (a == "true" || a == "1") {
            return true;
          } else {
            return false;
          }
        } else {
          return c;
        }
      };
      F.conformToBounds = function (a, b) {
        if (b != null) {
          if (a.x < b.min_width) {
            a.x = b.min_width;
          }
          if (a.y < b.min_height) {
            a.y = b.min_height;
          }
          if (a.x > b.max_width) {
            a.x = b.max_width;
          }
          if (a.x > b.max_height) {
            a.y = b.max_height;
          }
        }
        return a;
      };
      F.applyResize = function (a, b, c, d, e) {
        if (e == null) {
          var f = 0;
          var k = 0;
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          e = f;
          if (k == null) {
            k = 0;
          }
          if (e == null) {
            e = 0;
          }
          k = fa.pool.get().set(e, k);
          k._inPool = false;
          e = k;
        }
        if (a > 0 && Math.abs(c / d - a) > 0.0001) {
          if (b == 1) {
            d = 1 / a * c;
          } else {
            c = 1 / a * d;
          }
        }
        if ((c | 0) < 1) {
          c = 1;
        }
        if ((d | 0) < 1) {
          d = 1;
        }
        f = c;
        k = d;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        e.set_x(f);
        e.set_y(k);
        return e;
      };
      F.xml = function (a, b, c, d) {
        if (d == null) {
          d = "assets/xml/";
        }
        if (c == null) {
          c = true;
        }
        if (b == null) {
          b = "xml";
        }
        if (a.indexOf("raw:") == 0 || a.indexOf("RAW:") == 0) {
          a = M.substr(a, 4, a.length - 4);
          d = "";
        }
        if (!W.exists(d + a + "." + b, "TEXT")) {
          return null;
        }
        a = W.getText(d + a + "." + b);
        if (a == null) {
          return null;
        }
        a = X.parse(a);
        if (c) {
          c = a.firstElement();
          if (c.nodeType != X.Document && c.nodeType != X.Element) {
            throw K.thrown("Invalid nodeType " + (c.nodeType == null ? "null" : hb.toString(c.nodeType)));
          }
          return c;
        }
        return a.firstElement();
      };
      F.clearArraySoft = function (a) {
        if (a != null) {
          for (var b = a.length - 1; b >= 0;) {
            a[b] = null;
            a.splice(b, 1);
            --b;
          }
        }
      };
      F.clearArray = function (a) {
        if (a != null) {
          for (var b = a.length - 1; b >= 0;) {
            F.destroyThing(a[b]);
            a[b] = null;
            a.splice(b, 1);
            --b;
          }
        }
      };
      F.destroyThing = function (a) {
        if (a != null) {
          if (a instanceof Array) {
            F.clearArray(a);
          } else if (ta.__implements(a, B)) {
            ta.__cast(a, B).destroy();
          } else if (a instanceof Ea) {
            ta.__cast(a, Ea).destroy();
          }
        }
      };
      F.font = function (a, b, c) {
        if (c == null) {
          c = ".ttf";
        }
        if (b == null) {
          b = "";
        }
        var d = a;
        var e = b;
        if (e == null) {
          e = "";
        }
        e = e.toLowerCase();
        var f = "";
        switch (e) {
          case "":
          case "none":
          case "normal":
          case "regular":
            f = "";
            break;
          case "b":
          case "bold":
            f = "b";
            break;
          case "i":
          case "italic":
            f = "i";
            break;
          case "bi":
          case "bold-italic":
          case "boldi":
          case "bolditalic":
          case "ib":
          case "ibold":
          case "italic-bold":
          case "italicbold":
          case "z":
            f = "z";
        }
        a = a.indexOf("assets/fonts/") != 0 ? "assets/fonts/" + a + f : a + f;
        if (a.indexOf(c) == -1) {
          a += c;
        }
        a = pe.add(a);
        if (!W.exists(a, "FONT") && c == ".ttf" && (b = F.font(d, b, ".otf"), W.exists(b, "FONT"))) {
          return b;
        } else {
          return a;
        }
      };
      F.FU = function (a) {
        return M.substr(a, 0, 1).toUpperCase() + M.substr(a, 1, a.length - 1);
      };
      F.getBmp = function (a) {
        var b = null;
        if (typeof a == "string") {
          b = a;
        } else if (a instanceof cc) {
          b = a.key;
        } else if (a instanceof T) {
          return a;
        }
        if (g.bitmap._cache.h[b] != null && (a = g.bitmap._cache.h[b], a.bitmap != null)) {
          return a.bitmap;
        } else {
          return W.getBitmapData(b, false);
        }
      };
      F.checkHaxedef = function (a) {
        a = a.toLowerCase();
        switch (a) {
          case "html5":
            return true;
          case "js":
            return true;
          case "lime_next":
          case "next":
            return true;
          case "web":
            return true;
        }
        return false;
      };
      F.FU_ = function (a) {
        var b = a.split(" ");
        a = "";
        for (var c = 0, d = b.length; c < d;) {
          var e = c++;
          a += F.FU(b[e]);
          if (e != b.length - 1) {
            a += " ";
          }
        }
        return a;
      };
      F.scaleTileBmp = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = true;
        }
        if (f == null) {
          f = -1;
        }
        if (e == null) {
          e = -1;
        }
        var r = W.getBitmapData(a, false);
        if (r == null) {
          if (g.bitmap._cache.h[a] != null) {
            r = g.bitmap._cache.h[a].bitmap;
          } else {
            return null;
          }
        }
        a = r.width / c | 0;
        var n = r.height / d | 0;
        if (e == -1) {
          e = c * b | 0;
        }
        if (f == -1) {
          f = d * b | 0;
          b = f / d;
        }
        if (Math.abs(b - 1) > 0.001) {
          var J = new T(e * a | 0, f * n | 0, true, 0);
          var h = new ea();
          var m = new kb();
          var p = new Aa();
          p.scale(b, b);
          for (b = 0; b < n;) {
            var l = b++;
            for (var q = 0, t = a; q < t;) {
              var u = q++;
              var L = new T(c, d, true, 0);
              h.setTo(u * c, l * d, c, d);
              m.setTo(0, 0);
              L.copyPixels(r, h, m);
              var x = new T(e, f, true, 0);
              x.draw(L, p, null, null, null, k);
              m.setTo(u * e, l * f);
              J.copyPixels(x, x.rect, m);
            }
          }
          return J;
        }
        return r.clone();
      };
      F.scaleAndStoreTileset = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = true;
        }
        if (f == null) {
          f = -1;
        }
        if (e == null) {
          e = -1;
        }
        var r = a + "_x" + b;
        if (g.bitmap._cache.h[r] != null == 0) {
          a = F.scaleTileBmp(a, b, c, d, e, f, k);
          g.bitmap.add(a, false, r);
        }
        return r;
      };
      F.loadScaledImage = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        var e = F.gfx(a);
        a = W.getBitmapData(e, false);
        if (a != null) {
          if (b < 0) {
            b = a.width;
          }
          if (c < 0) {
            c = a.height;
          }
          if (Math.abs(b - a.width) + Math.abs(c - a.height) > 0.01 && (e = e + "_" + (b | 0) + "x" + (c | 0), g.bitmap._cache.h[e] == null)) {
            var f = new T(b | 0, c | 0, true, 0);
            var k = F.getMatrix();
            k.identity();
            k.scale(b / a.width, c / a.height);
            f.draw(a, k, null, null, null, d);
            g.bitmap.add(f, true, e);
          }
          return e;
        }
        return null;
      };
      F.gfx = function (a, b, c, d, e, f) {
        if (e == null) {
          e = "";
        }
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = "";
        }
        if (b == null) {
          b = "";
        }
        if (a != null) {
          a = a.toLowerCase();
        }
        f = "";
        if (b != "") {
          f = b + "/";
          if (c != "") {
            f += c + "/";
            if (d != "") {
              f += d + "/";
              if (e != "") {
                f += e + "/";
              }
            }
          }
        }
        if (f != "") {
          a = f + a;
        }
        if (a.indexOf("raw:") != 0) {
          a = w.replace(a, "-", "_");
        }
        return F.get_gfx(a);
      };
      F.get_gfx = function (a) {
        var b = "";
        var c = a.indexOf(".jpg") != -1 ? ".jpg" : ".png";
        if (a != null && a.length > 4 && a.indexOf(c) != -1) {
          a = M.substr(a, 0, a.length - 4);
        }
        if (a.indexOf("raw:") == 0 || a.indexOf("RAW:") == 0) {
          a = M.substr(a, 4, a.length - 4);
          b = a + c;
        }
        if (a != null && a.indexOf("assets/gfx/") == 0) {
          b = a + c;
        }
        if (b == "") {
          b = "assets/gfx/" + a + c;
        }
        if (b.indexOf(".stitch.txt" + c) != -1) {
          b = w.replace(b, ".stitch.txt" + c, ".stitch.txt");
        }
        return b;
      };
      F.unparentXML = function (a) {
        if (a.parent != null) {
          a.parent.removeChild(a);
        }
        return a;
      };
      F.setButtonLabel = function (a, b) {
        if (a != null) {
          if (a instanceof vd) {
            ta.__cast(a, vd).label.set_text(b);
          } else if (a instanceof ff && a.label != null && a.label instanceof db) {
            var c = a.label;
            if (c.group.members != null) {
              a = 0;
              c = c.group.members;
              while (a < c.length) {
                var d = c[a];
                ++a;
                if (d != null && d instanceof Q) {
                  ta.__cast(d, Q).set_text(b);
                  break;
                }
              }
            }
          }
        }
      };
      F.getMatrix = function () {
        if (F._matrix == null) {
          F._matrix = new Aa();
        }
        return F._matrix;
      };
      function Fn() {}
      h["flixel.addons.ui.interfaces.IFireTongue"] = Fn;
      Fn.__name__ = "flixel.addons.ui.interfaces.IFireTongue";
      Fn.__isInterface__ = true;
      Fn.prototype = {
        __class__: Fn
      };
      function hf(a, b) {
        this.curIndex = 0;
        this.parent = a;
        this.name = b;
      }
      h["flixel.animation.FlxBaseAnimation"] = hf;
      hf.__name__ = "flixel.animation.FlxBaseAnimation";
      hf.__interfaces__ = [B];
      hf.prototype = {
        set_curIndex: function (a) {
          this.curIndex = a;
          if (this.parent != null && this.parent._curAnim == this) {
            this.parent.set_frameIndex(a);
          }
          return a;
        },
        destroy: function () {
          this.name = this.parent = null;
        },
        __class__: hf,
        __properties__: {
          set_curIndex: "set_curIndex"
        }
      };
      function Sh(a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = true;
        }
        if (d == null) {
          d = 0;
        }
        this._frameTimer = 0;
        this.timeScale = 1;
        this.reversed = this.flipX = this.flipY = false;
        this.loopPoint = 0;
        this.finished = this.paused = this.looped = true;
        this.curFrame = this.frameDuration = 0;
        hf.call(this, a, b);
        this.set_frameRate(d);
        this.frames = c;
        this.looped = e;
        this.flipX = f;
        this.flipY = k;
      }
      h["flixel.animation.FlxAnimation"] = Sh;
      Sh.__name__ = "flixel.animation.FlxAnimation";
      Sh.__super__ = hf;
      Sh.prototype = q(hf.prototype, {
        destroy: function () {
          this.name = this.frames = null;
          hf.prototype.destroy.call(this);
        },
        play: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          if (a == null) {
            a = false;
          }
          if (a || this.finished || this.reversed != b) {
            this.reversed = b;
            this.paused = false;
            this._frameTimer = 0;
            this.finished = this.frameDuration == 0;
            a = this.frames.length - 1;
            if (c < 0) {
              this.set_curFrame(g.random.int(0, a));
            } else {
              if (c > a) {
                c = a;
              }
              if (this.reversed) {
                c = a - c;
              }
              this.set_curFrame(c);
            }
            if (this.finished) {
              c = this.parent;
              if (c.finishCallback != null) {
                c.finishCallback(this.name);
              }
            }
          } else {
            this.paused = false;
          }
        },
        restart: function () {
          this.play(true, this.reversed);
        },
        stop: function () {
          this.paused = this.finished = true;
        },
        finish: function () {
          this.stop();
          this.set_curFrame(this.reversed ? 0 : this.frames.length - 1);
        },
        pause: function () {
          this.paused = true;
        },
        reverse: function () {
          this.reversed = !this.reversed;
          if (this.finished) {
            this.play(false, this.reversed);
          }
        },
        update: function (a) {
          var b = this.getCurrentFrameDuration();
          if (b != 0 && !this.finished && !this.paused) {
            for (this._frameTimer += a * this.timeScale; this._frameTimer > b && !this.finished;) {
              this._frameTimer -= b;
              if (this.reversed) {
                if (this.looped && this.curFrame == this.loopPoint) {
                  this.set_curFrame(this.frames.length - 1);
                } else {
                  this.set_curFrame(this.curFrame - 1);
                }
              } else if (this.looped && this.curFrame == this.frames.length - 1) {
                this.set_curFrame(this.loopPoint);
              } else {
                this.set_curFrame(this.curFrame + 1);
              }
              if (this.finished) {
                break;
              }
              b = this.getCurrentFrameDuration();
            }
          }
        },
        getCurrentFrameDuration: function () {
          var a = this.parent.getFrameDuration(this.frames[this.curFrame]);
          if (a > 0) {
            return a;
          } else {
            return this.frameDuration;
          }
        },
        set_frameRate: function (a) {
          this.frameRate = a;
          this.frameDuration = a > 0 ? 1 / a : 0;
          return a;
        },
        set_curFrame: function (a) {
          var b = this.frames.length - 1;
          var c = this.reversed ? b - a : a;
          if (c >= 0) {
            if (!this.looped && c > b) {
              this.finished = true;
              this.curFrame = this.reversed ? 0 : b;
            } else {
              this.curFrame = a;
            }
          } else {
            this.curFrame = g.random.int(0, b);
          }
          this.set_curIndex(this.frames[this.curFrame]);
          if (this.finished && this.parent != null) {
            b = this.parent;
            if (b.finishCallback != null) {
              b.finishCallback(this.name);
            }
          }
          return a;
        },
        __class__: Sh,
        __properties__: q(hf.prototype.__properties__, {
          set_curFrame: "set_curFrame",
          set_frameRate: "set_frameRate"
        })
      });
      function xk(a, b) {
        this.angle = 0;
        hf.call(this, a, "prerotated_animation");
        this.baked = b;
        this.rotations = Math.round(360 / b);
      }
      h["flixel.animation.FlxPrerotatedAnimation"] = xk;
      xk.__name__ = "flixel.animation.FlxPrerotatedAnimation";
      xk.__super__ = hf;
      xk.prototype = q(hf.prototype, {
        set_angle: function (a) {
          if (isNaN(a)) {
            throw K.thrown("angle must not be NaN");
          }
          var b = this.curIndex;
          for (var c = Math.floor(a % 360); c < 0;) {
            c += 360;
          }
          c = Math.floor(c / this.baked + 0.5);
          c = c % this.rotations | 0;
          if (b != c) {
            this.set_curIndex(c);
          }
          return this.angle = a;
        },
        set_curIndex: function (a) {
          this.curIndex = a;
          if (this.parent != null) {
            this.parent.set_frameIndex(a);
          }
          return a;
        },
        __class__: xk,
        __properties__: q(hf.prototype.__properties__, {
          set_angle: "set_angle"
        })
      });
      function id() {}
      h["flixel.effects.FlxFlicker"] = id;
      id.__name__ = "flixel.effects.FlxFlicker";
      id.__interfaces__ = [B];
      id.flicker = function (a, b, c, d, e, f, k) {
        if (e == null) {
          e = true;
        }
        if (d == null) {
          d = true;
        }
        if (c == null) {
          c = 0.04;
        }
        if (b == null) {
          b = 1;
        }
        if (id.isFlickering(a)) {
          if (e) {
            id.stopFlickering(a);
          } else {
            return id._boundObjects.h[a.__id__];
          }
        }
        if (c <= 0) {
          c = g.elapsed;
        }
        e = id._pool.get();
        e.start(a, b, c, d, f, k);
        id._boundObjects.set(a, e);
        return e;
      };
      id.isFlickering = function (a) {
        return id._boundObjects.h.__keys__[a.__id__] != null;
      };
      id.stopFlickering = function (a) {
        a = id._boundObjects.h[a.__id__];
        if (a != null) {
          a.stop();
        }
      };
      id.prototype = {
        destroy: function () {
          this.progressCallback = this.completionCallback = this.timer = this.object = null;
        },
        start: function (a, b, c, d, e, f) {
          this.object = a;
          this.duration = b;
          this.interval = c;
          this.completionCallback = e;
          this.progressCallback = f;
          this.endVisibility = d;
          this.timer = new Fc().start(this.interval, l(this, this.flickerProgress), this.duration / this.interval | 0);
        },
        stop: function () {
          this.timer.cancel();
          this.object.set_visible(true);
          this.release();
        },
        release: function () {
          id._boundObjects.remove(this.object);
          id._pool.put(this);
        },
        flickerProgress: function (a) {
          this.object.set_visible(!this.object.visible);
          if (this.progressCallback != null) {
            this.progressCallback(this);
          }
          if (a.loops > 0 && a.loops - a._loopsCounter == 0) {
            this.object.set_visible(this.endVisibility);
            if (this.completionCallback != null) {
              this.completionCallback(this);
            }
            if (this.timer == a) {
              this.release();
            }
          }
        },
        __class__: id
      };
      function cc(a, b, c) {
        this.unique = false;
        this.useCount = 0;
        this.isDumped = false;
        this.destroyOnNoUse = true;
        this.persist = false;
        this.width = this.height = 0;
        this.key = a;
        this.persist = c ?? cc.defaultPersist;
        this.frameCollections = new oj();
        this.frameCollectionTypes = [];
        this.set_bitmap(b);
        this.shader = new $d();
      }
      h["flixel.graphics.FlxGraphic"] = cc;
      cc.__name__ = "flixel.graphics.FlxGraphic";
      cc.__interfaces__ = [B];
      cc.fromAssetKey = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (b == null) {
          b = false;
        }
        if (!d) {
          if (W.exists(a)) {
            var e = W.getBitmapData(a, true);
          } else {
            g.log.advanced("Could not find a BitmapData asset with ID '" + a + "'.", Ba.ERROR, true);
            e = null;
          }
          if (e == null) {
            return null;
          } else {
            return cc.createGraphic(e, c, b, d);
          }
        }
        c = g.bitmap.generateKey(a, c, b);
        e = g.bitmap._cache.h[c];
        if (e != null) {
          return e;
        }
        if (W.exists(a)) {
          e = W.getBitmapData(a, true);
        } else {
          g.log.advanced("Could not find a BitmapData asset with ID '" + a + "'.", Ba.ERROR, true);
          e = null;
        }
        if (e == null) {
          return null;
        }
        e = cc.createGraphic(e, c, b);
        e.assetsKey = a;
        return e;
      };
      cc.fromClass = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (b == null) {
          b = false;
        }
        if (!d) {
          var e = Db.createInstance(a, []);
          return cc.createGraphic(e, c, b, d);
        }
        d = a.__name__;
        d = g.bitmap.generateKey(d, c, b);
        c = g.bitmap._cache.h[d];
        if (c != null) {
          return c;
        }
        e = Db.createInstance(a, []);
        c = cc.createGraphic(e, d, b);
        c.assetsClass = a;
        return c;
      };
      cc.fromBitmapData = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (b == null) {
          b = false;
        }
        if (!d) {
          return cc.createGraphic(a, c, b, d);
        }
        d = g.bitmap.findKeyForBitmap(a);
        var e = null;
        var f = null;
        if (d != null) {
          var k = g.bitmap._cache.h[d];
          e = k.assetsKey;
          f = k.assetsClass;
        }
        d = g.bitmap.generateKey(d, c, b);
        k = g.bitmap._cache.h[d];
        if (k != null) {
          return k;
        }
        k = cc.createGraphic(a, d, b);
        k.assetsKey = e;
        k.assetsClass = f;
        return k;
      };
      cc.fromGraphic = function (a, b, c) {
        if (b == null) {
          b = false;
        }
        if (!b) {
          return a;
        }
        c = g.bitmap.generateKey(a.key, c, b);
        c = cc.createGraphic(a.bitmap, c, b);
        c.unique = b;
        c.assetsClass = a.assetsClass;
        c.assetsKey = a.assetsKey;
        return g.bitmap._cache.h[c.key] = c;
      };
      cc.fromRectangle = function (a, b, c, d, e) {
        if (d == null) {
          d = false;
        }
        d = g.bitmap.generateKey(a + "x" + b + ":" + c, e, d);
        e = g.bitmap._cache.h[d];
        if (e != null) {
          return e;
        }
        a = new T(a, b, true, c);
        return cc.createGraphic(a, d);
      };
      cc.createGraphic = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (c == null) {
          c = false;
        }
        var e = c;
        if (e == null) {
          e = false;
        }
        if (e) {
          a = a.clone();
        }
        if (d) {
          a = new cc(b, a);
          a.unique = c;
          g.bitmap._cache.h[a.key] = a;
        } else {
          a = new cc(null, a);
        }
        return a;
      };
      cc.prototype = {
        dump: function () {},
        undump: function () {
          var a = this.getBitmapFromSystem();
          if (a != null) {
            this.set_bitmap(a);
          }
          this.isDumped = false;
        },
        onContext: function () {
          if (this.isDumped) {
            this.undump();
            this.dump();
          }
        },
        onAssetsReload: function () {
          if (this.assetsClass != null || this.assetsKey != null) {
            var a = this.isDumped;
            this.undump();
            if (a) {
              this.dump();
            }
          }
        },
        destroy: function () {
          this.set_bitmap(da.dispose(this.bitmap));
          this.assetsClass = this.assetsKey = this.key = this.shader = null;
          this.imageFrame = da.destroy(this.get_imageFrame());
          if (this.frameCollections != null) {
            var a;
            for (var b = 0, c = this.frameCollectionTypes; b < c.length;) {
              a = c[b];
              ++b;
              a = this.frameCollections.get(a);
              da.destroyArray(a);
            }
            this.frameCollectionTypes = this.frameCollections = null;
          }
        },
        addFrameCollection: function (a) {
          if (a.type != null) {
            var b = a.type;
            var c = this.frameCollections.get(b);
            if (c == null) {
              c = [];
              this.frameCollections.set(b, c);
            }
            b = c;
            if (b.indexOf(a) != -1) {
              g.log.advanced("Attempting to add already added collection", Ba.WARNING, true);
            } else {
              b.push(a);
            }
          }
        },
        getBitmapFromSystem: function () {
          var a = null;
          if (this.assetsClass != null) {
            a = Db.createInstance(this.assetsClass, []);
          } else if (this.assetsKey != null) {
            a = this.assetsKey;
            if (W.exists(a)) {
              a = W.getBitmapData(a, true);
            } else {
              g.log.advanced("Could not find a BitmapData asset with ID '" + a + "'.", Ba.ERROR, true);
              a = null;
            }
          }
          if (a != null) {
            var b = this.unique;
            if (b == null) {
              b = false;
            }
            if (b) {
              return a.clone();
            } else {
              return a;
            }
          }
          return null;
        },
        incrementUseCount: function () {
          this.useCount++;
        },
        decrementUseCount: function () {
          this.useCount--;
          this.checkUseCount();
        },
        checkUseCount: function () {
          if (this.useCount <= 0 && this.destroyOnNoUse && !this.persist) {
            g.bitmap.remove(this);
          }
        },
        set_destroyOnNoUse: function (a) {
          this.destroyOnNoUse = a;
          this.checkUseCount();
          return a;
        },
        get_imageFrame: function () {
          if (this.imageFrame == null) {
            this.imageFrame = $f.fromRectangle(this);
          }
          return this.imageFrame;
        },
        set_bitmap: function (a) {
          if (a != null) {
            this.bitmap = a;
            this.width = this.bitmap.width;
            this.height = this.bitmap.height;
          }
          return a;
        },
        __class__: cc,
        __properties__: {
          get_imageFrame: "get_imageFrame",
          set_destroyOnNoUse: "set_destroyOnNoUse",
          set_bitmap: "set_bitmap"
        }
      };
      function Fe(a, b, c) {
        this.parent = a;
        this.type = b;
        if (c == null) {
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = fa.pool.get().set(b, c);
          b._inPool = false;
        } else {
          b = c;
        }
        this.border = b;
        this.frames = [];
        this.framesByName = new V();
        if (a != null) {
          a.addFrameCollection(this);
        }
      }
      h["flixel.graphics.frames.FlxFramesCollection"] = Fe;
      Fe.__name__ = "flixel.graphics.frames.FlxFramesCollection";
      Fe.__interfaces__ = [B];
      Fe.prototype = {
        destroy: function () {
          this.frames = da.destroyArray(this.frames);
          this.border = da.put(this.border);
          this.type = this.parent = this.framesByName = null;
        },
        addEmptyFrame: function (a) {
          var b = new pb(this.parent);
          b.type = 2;
          var c = Ha._pool.get();
          var d = 0;
          var e = 0;
          var f = 0;
          var k = 0;
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.x = d;
          c.y = e;
          c.width = f;
          c.height = k;
          c._inPool = false;
          b.set_frame(c);
          c = b.sourceSize;
          d = a.width;
          a = a.height;
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(a);
          this.frames.push(b);
          return b;
        },
        addSpriteSheetFrame: function (a) {
          var b = Ha._pool.get();
          var c = 0;
          var d = 0;
          var e = 0;
          var f = 0;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.x = c;
          b.y = d;
          b.width = e;
          b.height = f;
          b._inPool = false;
          b.x = a.x;
          b.y = a.y;
          b.width = a.width;
          b.height = a.height;
          if (a._weak && !a._inPool) {
            a._inPool = true;
            a._weak = false;
            Ha._pool.putUnsafe(a);
          }
          a = b;
          b = new pb(this.parent);
          b.set_frame(this.checkFrame(a));
          c = b.sourceSize;
          d = a.width;
          a = a.height;
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(a);
          c = b.offset;
          a = d = 0;
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(a);
          return this.pushFrame(b);
        },
        addAtlasFrame: function (a, b, c, d, e, f, k, r) {
          if (r == null) {
            r = 0;
          }
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = 0;
          }
          if (d != null && Object.prototype.hasOwnProperty.call(this.framesByName.h, d)) {
            return this.framesByName.h[d];
          }
          e = new pb(this.parent, e, f, k, r);
          e.name = d;
          f = e.sourceSize;
          k = b.x;
          r = b.y;
          if (r == null) {
            r = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.set_x(k);
          f.set_y(r);
          f = e.offset;
          k = c.x;
          r = c.y;
          if (r == null) {
            r = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.set_x(k);
          f.set_y(r);
          e.set_frame(this.checkFrame(a, d));
          da.put(b);
          da.put(c);
          return this.pushFrame(e);
        },
        checkFrame: function (a, b) {
          var c = a.x;
          var d = this.parent.width;
          var e = c < 0 ? 0 : c;
          var f = d != null && e > d ? d : e;
          c = a.y;
          d = this.parent.height;
          e = c < 0 ? 0 : c;
          var k = d != null && e > d ? d : e;
          c = a.x + a.width;
          d = this.parent.width;
          e = c < 0 ? 0 : c;
          var r = d != null && e > d ? d : e;
          c = a.y + a.height;
          d = this.parent.height;
          e = c < 0 ? 0 : c;
          c = f;
          var n = k;
          f = r - f;
          d = (d != null && e > d ? d : e) - k;
          if (d == null) {
            d = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.x = c;
          a.y = n;
          a.width = f;
          a.height = d;
          if (a.width <= 0 || a.height <= 0) {
            g.log.advanced("The frame " + b + " has incorrect data and results in an image with the size of (0, 0)", Ba.WARNING, true);
          }
          return a;
        },
        pushFrame: function (a, b) {
          if (b == null) {
            b = false;
          }
          var c = a.name;
          if (c != null && Object.prototype.hasOwnProperty.call(this.framesByName.h, c) && !b) {
            return this.framesByName.h[c];
          }
          this.frames.push(a);
          a.cacheFrameMatrix();
          if (c != null) {
            this.framesByName.h[c] = a;
          }
          return a;
        },
        __class__: Fe
      };
      function fb(a, b) {
        this.usedGraphics = [];
        Fe.call(this, a, Cf.ATLAS, b);
      }
      h["flixel.graphics.frames.FlxAtlasFrames"] = fb;
      fb.__name__ = "flixel.graphics.frames.FlxAtlasFrames";
      fb.fromTexturePackerJson = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        var d = g.bitmap.add(a, false);
        if (d == null) {
          return null;
        }
        a = fb.findFrame(d);
        if (a != null) {
          return a;
        }
        if (d == null || b == null) {
          return null;
        }
        a = new fb(d);
        b = Kp.getData(b);
        if (b.frames instanceof Array) {
          d = 0;
          for (var e = b.frames; d < e.length;) {
            b = e[d];
            ++d;
            fb.texturePackerHelper(b.filename, b, a, c);
          }
        } else {
          d = b.frames;
          e = ma.fields(d);
          for (var f = 0; f < e.length;) {
            var k = b = e[f++];
            b = d[b];
            fb.texturePackerHelper(k, b, a, c);
          }
        }
        return a;
      };
      fb.texturePackerHelper = function (a, b, c, d) {
        if (d == null) {
          d = false;
        }
        var e = 0;
        var f = b.frame;
        if (b.rotated) {
          var k = f.x;
          var r = f.y;
          var g = f.h;
          var J = f.w;
          if (J == null) {
            J = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (k == null) {
            k = 0;
          }
          f = Ha._pool.get();
          if (J == null) {
            J = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.x = k;
          f.y = r;
          f.width = g;
          f.height = J;
          f._inPool = false;
          e = -90;
        } else {
          k = f.x;
          r = f.y;
          g = f.w;
          J = f.h;
          if (J == null) {
            J = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (k == null) {
            k = 0;
          }
          f = Ha._pool.get();
          if (J == null) {
            J = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.x = k;
          f.y = r;
          f.width = g;
          f.height = J;
          f._inPool = false;
        }
        k = b.sourceSize.w;
        J = b.sourceSize.h;
        if (J == null) {
          J = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (J == null) {
          J = 0;
        }
        if (k == null) {
          k = 0;
        }
        J = fa.pool.get().set(k, J);
        J._inPool = false;
        g = J;
        k = b.spriteSourceSize.x;
        J = b.spriteSourceSize.y;
        if (J == null) {
          J = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (J == null) {
          J = 0;
        }
        if (k == null) {
          k = 0;
        }
        J = fa.pool.get().set(k, J);
        J._inPool = false;
        c.addAtlasFrame(f, g, J, a, e, false, false, d && b.duration != null ? b.duration / 1000 : 0);
      };
      fb.fromSparrow = function (a, b) {
        var c = g.bitmap.add(a);
        if (c == null) {
          return null;
        }
        a = fb.findFrame(c);
        if (a != null) {
          return a;
        }
        if (c == null || b == null) {
          return null;
        }
        a = new fb(c);
        var d = Lp.getXml(b).firstElement();
        if (d.nodeType != X.Document && d.nodeType != X.Element) {
          throw K.thrown("Invalid nodeType " + (d.nodeType == null ? "null" : hb.toString(d.nodeType)));
        }
        b = 0;
        for (c = fc.resolve(d, "SubTexture"); b < c.length;) {
          var e = c[b];
          ++b;
          if (!ec.resolve(e, "width") && ec.resolve(e, "w")) {
            throw K.thrown("Sparrow v1 is not supported, use Sparrow v2");
          }
          var f = Mb.resolve(e, "name");
          var k = ec.resolve(e, "frameX");
          var r = ec.resolve(e, "rotated") && Mb.resolve(e, "rotated") == "true";
          var n = ec.resolve(e, "flipX") && Mb.resolve(e, "flipX") == "true";
          var J = ec.resolve(e, "flipY") && Mb.resolve(e, "flipY") == "true";
          var h = parseFloat(Mb.resolve(e, "x"));
          var m = parseFloat(Mb.resolve(e, "y"));
          d = parseFloat(Mb.resolve(e, "width"));
          var p = parseFloat(Mb.resolve(e, "height"));
          if (p == null) {
            p = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          var l = Ha._pool.get();
          if (p == null) {
            p = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          l.x = h;
          l.y = m;
          l.width = d;
          l.height = p;
          l._inPool = false;
          if (k) {
            d = H.parseInt(Mb.resolve(e, "frameX"));
            m = H.parseInt(Mb.resolve(e, "frameY"));
            p = H.parseInt(Mb.resolve(e, "frameWidth"));
            h = H.parseInt(Mb.resolve(e, "frameHeight"));
            if (h == null) {
              h = 0;
            }
            if (p == null) {
              p = 0;
            }
            if (m == null) {
              m = 0;
            }
            if (d == null) {
              d = 0;
            }
            e = Ha._pool.get();
            if (h == null) {
              h = 0;
            }
            if (p == null) {
              p = 0;
            }
            if (m == null) {
              m = 0;
            }
            if (d == null) {
              d = 0;
            }
            e.x = d;
            e.y = m;
            e.width = p;
            e.height = h;
            e._inPool = false;
          } else {
            m = h = 0;
            d = l.width;
            p = l.height;
            if (p == null) {
              p = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (m == null) {
              m = 0;
            }
            if (h == null) {
              h = 0;
            }
            e = Ha._pool.get();
            if (p == null) {
              p = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (m == null) {
              m = 0;
            }
            if (h == null) {
              h = 0;
            }
            e.x = h;
            e.y = m;
            e.width = d;
            e.height = p;
            e._inPool = false;
          }
          p = r ? -90 : 0;
          d = -e.x;
          h = -e.y;
          if (h == null) {
            h = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (d == null) {
            d = 0;
          }
          h = fa.pool.get().set(d, h);
          h._inPool = false;
          m = e.width;
          d = e.height;
          if (d == null) {
            d = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (m == null) {
            m = 0;
          }
          d = fa.pool.get().set(m, d);
          d._inPool = false;
          if (r && !k) {
            r = e.height;
            m = e.width;
            if (m == null) {
              m = 0;
            }
            if (r == null) {
              r = 0;
            }
            d.set_x(r);
            d.set_y(m);
          }
          if (l.width == 0 || l.height == 0) {
            if (!k) {
              e.width = 1;
              e.height = 1;
            }
            k = a.addEmptyFrame(e);
            k.name = f;
            f = k.offset;
            k = h.x;
            n = h.y;
            if (n == null) {
              n = 0;
            }
            if (k == null) {
              k = 0;
            }
            f.set_x(k);
            f.set_y(n);
            f = h;
            if (f._weak) {
              f.put();
            }
          } else {
            a.addAtlasFrame(l, d, h, f, p, n, J);
          }
        }
        return a;
      };
      fb.fromSpriteSheetPacker = function (a, b) {
        var c = g.bitmap.add(a);
        if (c == null) {
          return null;
        }
        a = fb.findFrame(c);
        if (a != null) {
          return a;
        }
        if (c == null || b == null) {
          return null;
        }
        a = new fb(c);
        if (W.exists(b)) {
          b = W.getText(b);
        }
        b = w.trim(b).split("\n");
        c = 0;
        for (var d = b.length; c < d;) {
          var e = c++;
          var f = b[e].split("=");
          e = w.trim(f[0]);
          f = w.trim(f[1]).split(" ");
          var k = H.parseInt(f[0]);
          var r = H.parseInt(f[1]);
          var n = H.parseInt(f[2]);
          var J = H.parseInt(f[3]);
          if (J == null) {
            J = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (k == null) {
            k = 0;
          }
          f = Ha._pool.get();
          if (J == null) {
            J = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.x = k;
          f.y = r;
          f.width = n;
          f.height = J;
          f._inPool = false;
          J = f.width;
          n = f.height;
          if (n == null) {
            n = 0;
          }
          if (J == null) {
            J = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (J == null) {
            J = 0;
          }
          n = fa.pool.get().set(J, n);
          n._inPool = false;
          k = J = 0;
          if (k == null) {
            k = 0;
          }
          if (J == null) {
            J = 0;
          }
          J = fa.pool.get().set(J, k);
          J._inPool = false;
          a.addAtlasFrame(f, n, J, e, 0);
        }
        return a;
      };
      fb.findFrame = function (a, b) {
        if (b == null) {
          var c = 0;
          b = 0;
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          b = fa.pool.get().set(c, b);
          b._inPool = false;
          b._weak = true;
        }
        c = Cf.ATLAS;
        var d = a.frameCollections.get(c);
        if (d == null) {
          d = [];
          a.frameCollections.set(c, d);
        }
        a = d;
        for (c = 0; c < a.length;) {
          d = a[c];
          ++c;
          var e = d.border;
          e = Math.abs(e.x - b.x) <= 1e-7 && Math.abs(e.y - b.y) <= 1e-7;
          if (b._weak) {
            b.put();
          }
          if (e) {
            return d;
          }
        }
        return null;
      };
      fb.__super__ = Fe;
      fb.prototype = q(Fe.prototype, {
        destroy: function () {
          while (this.usedGraphics.length > 0) {
            this.usedGraphics.shift().decrementUseCount();
          }
          Fe.prototype.destroy.call(this);
        },
        addAtlas: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (var c = 0, d = a.frames; c < d.length;) {
            var e = d[c];
            ++c;
            this.pushFrame(e, b);
          }
          if (this.usedGraphics.indexOf(a.parent) == -1) {
            this.usedGraphics.push(a.parent);
            a.parent.incrementUseCount();
          }
          return this;
        },
        __class__: fb
      });
      function Sc(a, b, c, d, e, f) {
        Aa.call(this, a, b, c, d, e, f);
      }
      h["flixel.math.FlxMatrix"] = Sc;
      Sc.__name__ = "flixel.math.FlxMatrix";
      Sc.__super__ = Aa;
      Sc.prototype = q(Aa.prototype, {
        __class__: Sc
      });
      function pb(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = 0;
        }
        this.parent = a;
        this.angle = b;
        this.flipX = c;
        this.flipY = d;
        this.duration = e;
        b = a = this.type = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = fa.pool.get().set(a, b);
        a._inPool = false;
        this.sourceSize = a;
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = fa.pool.get().set(a, b);
        a._inPool = false;
        this.offset = a;
        this.blitMatrix = Array(6);
        if (g.renderTile) {
          this.tileMatrix = Array(6);
        }
      }
      h["flixel.graphics.frames.FlxFrame"] = pb;
      pb.__name__ = "flixel.graphics.frames.FlxFrame";
      pb.__interfaces__ = [B];
      pb.sortHelper = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (d) {
          for (d = 0; d < a.length;) {
            var e = a[d];
            ++d;
            e = e.name;
            var f = e.substring(b, e.length - c);
            var k = H.parseInt(f);
            if (k == null) {
              g.log.advanced("Could not parse frame number of \"" + f + "\" in frame named \"" + e + "\"", Ba.WARNING, true);
            } else if (k < 0) {
              g.log.advanced("Found negative frame number \"" + f + "\" in frame named \"" + e + "\"", Ba.WARNING, true);
            }
          }
        }
        Zc.sort(a, function (a, d) {
          return pb.sortByName(a, d, b, c);
        });
      };
      pb.sortByName = function (a, b, c, d) {
        var e = a.name;
        a = H.parseInt(e.substring(c, e.length - d));
        e = b.name;
        b = H.parseInt(e.substring(c, e.length - d));
        return (a == null ? 0 : a > 0 ? a : -a) - (b == null ? 0 : b > 0 ? b : -b);
      };
      pb.prototype = {
        cacheFrameMatrix: function () {
          var a = pb._matrix;
          var b = true;
          if (b == null) {
            b = true;
          }
          a.identity();
          if (b) {
            a.translate(-this.frame.x, -this.frame.y);
          }
          if (this.angle == 90) {
            a.setTo(-a.b, a.a, -a.d, a.c, -a.ty, a.tx);
            a.translate(this.frame.height, 0);
          } else if (this.angle == -90) {
            a.setTo(a.b, -a.a, a.d, -a.c, a.ty, -a.tx);
            a.translate(0, this.frame.width);
          }
          a.translate(this.offset.x, this.offset.y);
          this.blitMatrix[0] = pb._matrix.a;
          this.blitMatrix[1] = pb._matrix.b;
          this.blitMatrix[2] = pb._matrix.c;
          this.blitMatrix[3] = pb._matrix.d;
          this.blitMatrix[4] = pb._matrix.tx;
          this.blitMatrix[5] = pb._matrix.ty;
          if (g.renderTile) {
            a = pb._matrix;
            b = false;
            if (b == null) {
              b = true;
            }
            a.identity();
            if (b) {
              a.translate(-this.frame.x, -this.frame.y);
            }
            if (this.angle == 90) {
              a.setTo(-a.b, a.a, -a.d, a.c, -a.ty, a.tx);
              a.translate(this.frame.height, 0);
            } else if (this.angle == -90) {
              a.setTo(a.b, -a.a, a.d, -a.c, a.ty, -a.tx);
              a.translate(0, this.frame.width);
            }
            a.translate(this.offset.x, this.offset.y);
            this.tileMatrix[0] = pb._matrix.a;
            this.tileMatrix[1] = pb._matrix.b;
            this.tileMatrix[2] = pb._matrix.c;
            this.tileMatrix[3] = pb._matrix.d;
            this.tileMatrix[4] = pb._matrix.tx;
            this.tileMatrix[5] = pb._matrix.ty;
          }
        },
        prepareTransformedBlitMatrix: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          a.a = this.blitMatrix[0];
          a.b = this.blitMatrix[1];
          a.c = this.blitMatrix[2];
          a.d = this.blitMatrix[3];
          a.tx = this.blitMatrix[4];
          a.ty = this.blitMatrix[5];
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          var e = this.sourceSize.x | 0;
          var f = this.sourceSize.y | 0;
          if (b != 0) {
            var k = e;
            e = f;
            f = k;
            if (b == 90) {
              a.setTo(-a.b, a.a, -a.d, a.c, -a.ty, a.tx);
              a.translate(this.sourceSize.y, 0);
            } else if (b == -90 || b == -90) {
              a.setTo(a.b, -a.a, a.d, -a.c, a.ty, -a.tx);
              a.translate(0, this.sourceSize.x);
            }
          }
          if (c) {
            a.scale(-1, 1);
            a.translate(e, 0);
          }
          if (d) {
            a.scale(1, -1);
            a.translate(0, f);
          }
          return a;
        },
        prepareMatrix: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          if (g.renderBlit) {
            a.identity();
            return a;
          }
          a.a = this.tileMatrix[0];
          a.b = this.tileMatrix[1];
          a.c = this.tileMatrix[2];
          a.d = this.tileMatrix[3];
          a.tx = this.tileMatrix[4];
          a.ty = this.tileMatrix[5];
          c = c != this.flipX;
          d = d != this.flipY;
          if (b == 0 && !c && !d) {
            return a;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          var e = this.sourceSize.x | 0;
          var f = this.sourceSize.y | 0;
          if (b != 0) {
            var k = e;
            e = f;
            f = k;
            if (b == 90) {
              a.setTo(-a.b, a.a, -a.d, a.c, -a.ty, a.tx);
              a.translate(this.sourceSize.y, 0);
            } else if (b == -90 || b == -90) {
              a.setTo(a.b, -a.a, a.d, -a.c, a.ty, -a.tx);
              a.translate(0, this.sourceSize.x);
            }
          }
          if (c) {
            a.scale(-1, 1);
            a.translate(e, 0);
          }
          if (d) {
            a.scale(1, -1);
            a.translate(0, f);
          }
          return a;
        },
        paint: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          var e = 0;
          var f = c;
          if (d == null) {
            d = false;
          }
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = 0;
          }
          var k = e != 0;
          e = (k ? this.sourceSize.y : this.sourceSize.x) | 0;
          k = (k ? this.sourceSize.x : this.sourceSize.y) | 0;
          if (a != null && d) {
            a = da.disposeIfNotEqual(a, e, k);
          }
          if (a == null || f) {
            if (a == null) {
              a = new T(e, k, true, 0);
            }
          } else {
            if (b != null) {
              pb._rect.setTo(b.x, b.y, e, k);
            } else {
              pb._rect.setTo(0, 0, e, k);
            }
            a.fillRect(pb._rect, 0);
          }
          if (this.type == 2) {
            return a;
          }
          if (this.angle == 0) {
            f = this.offset;
            d = pb._point;
            if (d == null) {
              d = new kb();
            }
            d.x = f.x;
            d.y = f.y;
            if (b != null) {
              pb._point.offset(b.x, b.y);
            }
            f = this.parent.bitmap;
            k = this.frame;
            e = pb._rect;
            if (e == null) {
              e = new ea();
            }
            e.x = k.x;
            e.y = k.y;
            e.width = k.width;
            e.height = k.height;
            a.copyPixels(f, e, pb._point, null, null, c);
          } else {
            var r = pb._matrix;
            r.a = this.blitMatrix[0];
            r.b = this.blitMatrix[1];
            r.c = this.blitMatrix[2];
            r.d = this.blitMatrix[3];
            r.tx = this.blitMatrix[4];
            r.ty = this.blitMatrix[5];
            if (b != null) {
              pb._matrix.translate(b.x, b.y);
            }
            f = this.parent.bitmap;
            r = c = pb._matrix;
            d = pb._rect;
            var g = this.frame.x;
            k = this.frame.y;
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            b = fa.pool.get().set(g, k);
            b._inPool = false;
            b._weak = true;
            e = b;
            k = this.frame;
            g = k.x + k.width;
            k = this.frame;
            k = k.y + k.height;
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            b = fa.pool.get().set(g, k);
            b._inPool = false;
            b._weak = true;
            g = e.x * r.a + e.y * r.c + r.tx;
            k = e.x * r.b + e.y * r.d + r.ty;
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            e.set_x(g);
            e.set_y(k);
            g = b.x * r.a + b.y * r.c + r.tx;
            k = b.x * r.b + b.y * r.d + r.ty;
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            b.set_x(g);
            b.set_y(k);
            k = Ha._pool.get();
            var J = g = r = 0;
            var h = 0;
            if (h == null) {
              h = 0;
            }
            if (J == null) {
              J = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (r == null) {
              r = 0;
            }
            k.x = r;
            k.y = g;
            k.width = J;
            k.height = h;
            k._inPool = false;
            J = Math.min(e.x, b.x);
            h = Math.min(e.y, b.y);
            var m = Math.max(e.x, b.x);
            var p = Math.max(e.y, b.y);
            if (e._weak) {
              e.put();
            }
            e = b;
            if (e._weak) {
              e.put();
            }
            r = J;
            g = h;
            J = m - J;
            h = p - h;
            if (h == null) {
              h = 0;
            }
            if (J == null) {
              J = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (r == null) {
              r = 0;
            }
            k.x = r;
            k.y = g;
            k.width = J;
            k.height = h;
            b = k;
            e = d;
            if (e == null) {
              e = new ea();
            }
            e.x = b.x;
            e.y = b.y;
            e.width = b.width;
            e.height = b.height;
            if (!b._inPool) {
              b._inPool = true;
              b._weak = false;
              Ha._pool.putUnsafe(b);
            }
            a.draw(f, c, null, null, d);
          }
          return a;
        },
        paintRotatedAndFlipped: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 0;
          }
          if (this.type == 2 && c == 0) {
            return this.paint(a, b, f, k);
          }
          var r = c;
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = false;
          }
          if (r == null) {
            r = 0;
          }
          var g = r != 0;
          r = (g ? this.sourceSize.y : this.sourceSize.x) | 0;
          g = (g ? this.sourceSize.x : this.sourceSize.y) | 0;
          if (a != null && k) {
            a = da.disposeIfNotEqual(a, r, g);
          }
          if (a == null || f) {
            if (a == null) {
              a = new T(r, g, true, 0);
            }
          } else {
            if (b != null) {
              pb._rect.setTo(b.x, b.y, r, g);
            } else {
              pb._rect.setTo(0, 0, r, g);
            }
            a.fillRect(pb._rect, 0);
          }
          if (this.type == 2) {
            return a;
          }
          this.prepareTransformedBlitMatrix(pb._matrix, c, d != this.flipX, e != this.flipY);
          if (b != null) {
            pb._matrix.translate(b.x, b.y);
          }
          c = this.parent.bitmap;
          r = d = pb._matrix;
          e = pb._rect;
          g = this.frame.x;
          k = this.frame.y;
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          b = fa.pool.get().set(g, k);
          b._inPool = false;
          b._weak = true;
          f = b;
          k = this.frame;
          g = k.x + k.width;
          k = this.frame;
          k = k.y + k.height;
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          b = fa.pool.get().set(g, k);
          b._inPool = false;
          b._weak = true;
          g = f.x * r.a + f.y * r.c + r.tx;
          k = f.x * r.b + f.y * r.d + r.ty;
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          f.set_x(g);
          f.set_y(k);
          g = b.x * r.a + b.y * r.c + r.tx;
          k = b.x * r.b + b.y * r.d + r.ty;
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          b.set_x(g);
          b.set_y(k);
          k = Ha._pool.get();
          var J = g = r = 0;
          var h = 0;
          if (h == null) {
            h = 0;
          }
          if (J == null) {
            J = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (r == null) {
            r = 0;
          }
          k.x = r;
          k.y = g;
          k.width = J;
          k.height = h;
          k._inPool = false;
          J = Math.min(f.x, b.x);
          h = Math.min(f.y, b.y);
          var m = Math.max(f.x, b.x);
          var p = Math.max(f.y, b.y);
          if (f._weak) {
            f.put();
          }
          f = b;
          if (f._weak) {
            f.put();
          }
          r = J;
          g = h;
          J = m - J;
          h = p - h;
          if (h == null) {
            h = 0;
          }
          if (J == null) {
            J = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (r == null) {
            r = 0;
          }
          k.x = r;
          k.y = g;
          k.width = J;
          k.height = h;
          f = k;
          b = e;
          if (b == null) {
            b = new ea();
          }
          b.x = f.x;
          b.y = f.y;
          b.width = f.width;
          b.height = f.height;
          if (!f._inPool) {
            f._inPool = true;
            f._weak = false;
            Ha._pool.putUnsafe(f);
          }
          a.draw(c, d, null, null, e);
          return a;
        },
        clipTo: function (a, b) {
          if (b == null) {
            b = new pb(this.parent, this.angle);
          } else {
            b.parent = this.parent;
            b.angle = this.angle;
            b.set_frame(da.put(b.frame));
          }
          var c = b.sourceSize;
          var d = this.sourceSize;
          var e = d.x;
          var f = d.y;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          c.set_x(e);
          c.set_y(f);
          e = d;
          if (e._weak) {
            e.put();
          }
          b.name = this.name;
          if (this.type == 2) {
            b.type = 2;
            c = b.offset;
            f = e = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.set_x(e);
            c.set_y(f);
            return b;
          }
          var k = 0;
          c = 0;
          if (c == null) {
            c = 0;
          }
          if (k == null) {
            k = 0;
          }
          e = Ha._pool.get();
          d = k;
          var r = 0;
          f = 0;
          if (f == null) {
            f = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          e.x = d;
          e.y = c;
          e.width = r;
          e.height = f;
          d = e;
          d._inPool = false;
          e = d;
          e.width = this.frame.width;
          e.height = this.frame.height;
          c = e;
          if (this.angle != 0) {
            c.width = this.frame.height;
            c.height = this.frame.width;
          }
          a.x += -this.offset.x;
          a.y += -this.offset.y;
          d = c.intersection(a);
          if (!c._inPool) {
            c._inPool = true;
            c._weak = false;
            Ha._pool.putUnsafe(c);
          }
          if (d.width == 0 || d.height == 0) {
            b.type = 2;
            f = r = c = k = 0;
            if (f == null) {
              f = 0;
            }
            if (r == null) {
              r = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (k == null) {
              k = 0;
            }
            d.x = k;
            d.y = c;
            d.width = r;
            d.height = f;
            b.set_frame(d);
            c = b.offset;
            f = e = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.set_x(e);
            c.set_y(f);
          } else {
            b.type = 0;
            c = b.offset;
            e = d.x;
            f = d.y;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.set_x(e);
            c.set_y(f);
            k = this.offset;
            e = k.x;
            f = k.y;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.set_x(c.x + e);
            c.set_y(c.y + f);
            e = k;
            if (e._weak) {
              e.put();
            }
            e = d.x;
            f = d.y;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            k = fa.pool.get().set(e, f);
            k._inPool = false;
            e = k;
            e._weak = true;
            c = e;
            e = d.x + d.width;
            f = d.y + d.height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            k = fa.pool.get().set(e, f);
            k._inPool = false;
            e = k;
            e._weak = true;
            k = e;
            pb._matrix.identity();
            if (this.angle == -90) {
              e = pb._matrix;
              e.setTo(-e.b, e.a, -e.d, e.c, -e.ty, e.tx);
              pb._matrix.translate(this.frame.width, 0);
            } else if (this.angle == 90) {
              e = pb._matrix;
              e.setTo(e.b, -e.a, e.d, -e.c, e.ty, -e.tx);
              pb._matrix.translate(0, this.frame.height);
            }
            if (this.angle != 0) {
              f = pb._matrix;
              e = c.x * f.a + c.y * f.c + f.tx;
              f = c.x * f.b + c.y * f.d + f.ty;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(f);
              f = pb._matrix;
              e = k.x * f.a + k.y * f.c + f.tx;
              f = k.x * f.b + k.y * f.d + f.ty;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              k.set_x(e);
              k.set_y(f);
            }
            r = Math.min(c.x, k.x);
            f = Math.min(c.y, k.y);
            var g = Math.max(c.x, k.x);
            var J = Math.max(c.y, k.y);
            e = c;
            if (e._weak) {
              e.put();
            }
            e = k;
            if (e._weak) {
              e.put();
            }
            k = r;
            c = f;
            r = g - r;
            f = J - f;
            if (f == null) {
              f = 0;
            }
            if (r == null) {
              r = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (k == null) {
              k = 0;
            }
            d.x = k;
            d.y = c;
            d.width = r;
            d.height = f;
            d.x += this.frame.x;
            d.y += this.frame.y;
            b.set_frame(d);
            b.cacheFrameMatrix();
          }
          a.x += this.offset.x;
          a.y += this.offset.y;
          return b;
        },
        copyTo: function (a) {
          if (a == null) {
            a = new pb(this.parent, this.angle);
          } else {
            a.parent = this.parent;
            a.angle = this.angle;
            a.set_frame(da.put(a.frame));
          }
          var b = a.offset;
          var c = this.offset;
          var d = c.x;
          var e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(d);
          b.set_y(e);
          b = c;
          if (b._weak) {
            b.put();
          }
          a.flipX = this.flipX;
          a.flipY = this.flipY;
          b = a.sourceSize;
          c = this.sourceSize;
          d = c.x;
          e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(d);
          b.set_y(e);
          b = c;
          if (b._weak) {
            b.put();
          }
          b = Ha._pool.get();
          var f = e = d = c = 0;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.x = c;
          b.y = d;
          b.width = e;
          b.height = f;
          b._inPool = false;
          c = this.frame;
          b.x = c.x;
          b.y = c.y;
          b.width = c.width;
          b.height = c.height;
          if (c._weak && !c._inPool) {
            c._inPool = true;
            c._weak = false;
            Ha._pool.putUnsafe(c);
          }
          a.set_frame(b);
          a.type = this.type;
          a.name = this.name;
          a.cacheFrameMatrix();
          return a;
        },
        destroy: function () {
          this.parent = this.name = null;
          this.sourceSize = da.put(this.sourceSize);
          this.offset = da.put(this.offset);
          this.set_frame(da.put(this.frame));
          this.uv = da.put(this.uv);
          this.tileMatrix = this.blitMatrix = null;
        },
        set_frame: function (a) {
          if (a != null) {
            if (this.uv == null) {
              var b = Ha._pool.get();
              var c = 0;
              var d = 0;
              var e = 0;
              var f = 0;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              b.x = c;
              b.y = d;
              b.width = e;
              b.height = f;
              b._inPool = false;
              this.uv = b;
            }
            b = this.uv;
            c = a.x / this.parent.width;
            d = a.y / this.parent.height;
            e = (a.x + a.width) / this.parent.width;
            f = (a.y + a.height) / this.parent.height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
          }
          return this.frame = a;
        },
        __class__: pb,
        __properties__: {
          set_frame: "set_frame"
        }
      };
      var Cf = x["flixel.graphics.frames.FlxFrameCollectionType"] = {
        __ename__: "flixel.graphics.frames.FlxFrameCollectionType",
        __constructs__: null,
        IMAGE: {
          _hx_name: "IMAGE",
          _hx_index: 0,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        },
        TILES: {
          _hx_name: "TILES",
          _hx_index: 1,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        },
        ATLAS: {
          _hx_name: "ATLAS",
          _hx_index: 2,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        },
        FONT: {
          _hx_name: "FONT",
          _hx_index: 3,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        },
        USER: (u = function (a) {
          return {
            _hx_index: 4,
            type: a,
            __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
            toString: p
          };
        }, u._hx_name = "USER", u.__params__ = ["type"], u),
        FILTER: {
          _hx_name: "FILTER",
          _hx_index: 5,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        }
      };
      Cf.__constructs__ = [Cf.IMAGE, Cf.TILES, Cf.ATLAS, Cf.FONT, Cf.USER, Cf.FILTER];
      function $f(a, b) {
        Fe.call(this, a, Cf.IMAGE, b);
      }
      h["flixel.graphics.frames.FlxImageFrame"] = $f;
      $f.__name__ = "flixel.graphics.frames.FlxImageFrame";
      $f.fromGraphic = function (a, b) {
        if (a == null || a.shader == null) {
          return null;
        }
        var c = 0;
        var d = 0;
        var e = a.width;
        var f = a.height;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        var k = Ha._pool.get();
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        k.x = c;
        k.y = d;
        k.width = e;
        k.height = f;
        k._inPool = false;
        if (b != null) {
          k.x = b.x;
          k.y = b.y;
          k.width = b.width;
          k.height = b.height;
          if (k._weak && !k._inPool) {
            k._inPool = true;
            k._weak = false;
            Ha._pool.putUnsafe(k);
          }
        }
        var r = $f.findFrame(a, k);
        if (!k._inPool) {
          k._inPool = true;
          k._weak = false;
          Ha._pool.putUnsafe(k);
        }
        if (r != null) {
          if (b != null && b._weak && !b._inPool) {
            b._inPool = true;
            b._weak = false;
            Ha._pool.putUnsafe(b);
          }
          return r;
        }
        r = new $f(a);
        if (b == null) {
          d = c = 0;
          e = a.width;
          f = a.height;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          k = Ha._pool.get();
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          k.x = c;
          k.y = d;
          k.width = e;
          k.height = f;
          k._inPool = false;
          a = k;
          a._weak = true;
          b = a;
        } else {
          if (b.width == 0) {
            b.width = a.width - b.x;
          }
          if (b.height == 0) {
            b.height = a.height - b.y;
          }
        }
        r.addSpriteSheetFrame(b);
        return r;
      };
      $f.fromRectangle = function (a, b) {
        a = g.bitmap.add(a, false);
        return $f.fromGraphic(a, b);
      };
      $f.findFrame = function (a, b, c) {
        if (c == null) {
          var d = 0;
          c = 0;
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          var e = fa.pool.get().set(d, c);
          e._inPool = false;
          c = e;
          c._weak = true;
        }
        d = Cf.IMAGE;
        var f = a.frameCollections.get(d);
        if (f == null) {
          f = [];
          a.frameCollections.set(d, f);
        }
        a = f;
        for (d = 0; d < a.length;) {
          f = a[d];
          ++d;
          e = f.get_frame().frame;
          var k = Math.abs(b.x - e.x) <= 1e-7 && Math.abs(b.y - e.y) <= 1e-7 && Math.abs(b.width - e.width) <= 1e-7 && Math.abs(b.height - e.height) <= 1e-7;
          if (e._weak && !e._inPool) {
            e._inPool = true;
            e._weak = false;
            Ha._pool.putUnsafe(e);
          }
          if (k) {
            k = c;
            e = f.border;
            k = Math.abs(k.x - e.x) <= 1e-7 && Math.abs(k.y - e.y) <= 1e-7;
            if (e._weak) {
              e.put();
            }
            e = k;
          } else {
            e = false;
          }
          if (e && f.get_frame().type != 2) {
            return f;
          }
        }
        k = c;
        if (k._weak) {
          k.put();
        }
        if (b._weak && !b._inPool) {
          b._inPool = true;
          b._weak = false;
          Ha._pool.putUnsafe(b);
        }
        return null;
      };
      $f.__super__ = Fe;
      $f.prototype = q(Fe.prototype, {
        get_frame: function () {
          return this.frames[0];
        },
        __class__: $f,
        __properties__: {
          get_frame: "get_frame"
        }
      });
      function Ig(a, b) {
        this.numRows = this.numCols = 0;
        Fe.call(this, a, Cf.TILES, b);
      }
      h["flixel.graphics.frames.FlxTileFrames"] = Ig;
      Ig.__name__ = "flixel.graphics.frames.FlxTileFrames";
      Ig.fromGraphic = function (a, b, c, d) {
        var e = Ig.findFrame(a, b, c, null, d);
        if (e != null) {
          return e;
        }
        if (c == null) {
          var f = 0;
          var k = 0;
          var r = a.width;
          var g = a.height;
          if (g == null) {
            g = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          var J = Ha._pool.get();
          if (g == null) {
            g = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          J.x = f;
          J.y = k;
          J.width = r;
          J.height = g;
          J._inPool = false;
          c = J;
        } else {
          if (c.width == 0) {
            c.width = a.width - c.x;
          }
          if (c.height == 0) {
            c.height = a.height - c.y;
          }
        }
        if (d == null) {
          var h = 0;
          e = 0;
          if (e == null) {
            e = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (h == null) {
            h = 0;
          }
          e = fa.pool.get().set(h, e);
          e._inPool = false;
          d = e;
        }
        e = new Ig(a);
        e.region = c;
        e.atlasFrame = null;
        e.tileSize = b;
        e.tileSpacing = d;
        c.x = Math.floor(c.x);
        c.y = Math.floor(c.y);
        c.width = Math.floor(c.width);
        c.height = Math.floor(c.height);
        d.set_x(Math.floor(d.x));
        d.set_y(Math.floor(d.y));
        b.set_x(Math.floor(b.x));
        b.set_y(Math.floor(b.y));
        a = b.x + d.x;
        h = b.y + d.y;
        var m = b.y == 0 ? 1 : (c.height + d.y) / h | 0;
        d = b.x == 0 ? 1 : (c.width + d.x) / a | 0;
        for (var p = 0; p < m;) {
          var l = p++;
          for (var q = 0, t = d; q < t;) {
            J = q++;
            f = c.x + J * a;
            k = c.y + l * h;
            r = b.x;
            g = b.y;
            if (g == null) {
              g = 0;
            }
            if (r == null) {
              r = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            J = Ha._pool.get();
            if (g == null) {
              g = 0;
            }
            if (r == null) {
              r = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            J.x = f;
            J.y = k;
            J.width = r;
            J.height = g;
            J._inPool = false;
            e.addSpriteSheetFrame(J);
          }
        }
        e.numCols = d;
        e.numRows = m;
        return e;
      };
      Ig.findFrame = function (a, b, c, d, e, f) {
        d = Cf.TILES;
        var k = a.frameCollections.get(d);
        if (k == null) {
          k = [];
          a.frameCollections.set(d, k);
        }
        a = k;
        for (d = 0; d < a.length;) {
          k = a[d];
          ++d;
          if (k.equals(b, c, null, e, f)) {
            return k;
          }
        }
        return null;
      };
      Ig.__super__ = Fe;
      Ig.prototype = q(Fe.prototype, {
        equals: function (a, b, c, d, e) {
          if (this.region == null && this.atlasFrame == null) {
            return false;
          }
          if (c != null) {
            b = c.frame;
          }
          if (b == null) {
            var f = b = 0;
            var k = this.parent.width;
            var r = this.parent.height;
            if (r == null) {
              r = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (r == null) {
              r = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (b == null) {
              b = 0;
            }
            var g = Ha._pool.get();
            if (r == null) {
              r = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (b == null) {
              b = 0;
            }
            g.x = b;
            g.y = f;
            g.width = k;
            g.height = r;
            g._inPool = false;
            g._weak = true;
            b = g;
          }
          if (d == null) {
            g = f = 0;
            if (g == null) {
              g = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (f == null) {
              f = 0;
            }
            g = fa.pool.get().set(f, g);
            g._inPool = false;
            g._weak = true;
            d = g;
          }
          if (e == null) {
            g = f = 0;
            if (g == null) {
              g = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (f == null) {
              f = 0;
            }
            g = fa.pool.get().set(f, g);
            g._inPool = false;
            g._weak = true;
            e = g;
          }
          if (this.atlasFrame == c) {
            g = this.region;
            c = Math.abs(g.x - b.x) <= 1e-7 && Math.abs(g.y - b.y) <= 1e-7 && Math.abs(g.width - b.width) <= 1e-7 && Math.abs(g.height - b.height) <= 1e-7;
            if (b._weak && !b._inPool) {
              b._inPool = true;
              b._weak = false;
              Ha._pool.putUnsafe(b);
            }
          } else {
            c = false;
          }
          if (c) {
            g = this.tileSize;
            c = Math.abs(g.x - a.x) <= 1e-7 && Math.abs(g.y - a.y) <= 1e-7;
            if (a._weak) {
              a.put();
            }
            a = c;
          } else {
            a = false;
          }
          if (a) {
            g = this.tileSpacing;
            c = Math.abs(g.x - d.x) <= 1e-7 && Math.abs(g.y - d.y) <= 1e-7;
            if (d._weak) {
              d.put();
            }
            d = c;
          } else {
            d = false;
          }
          if (d) {
            g = this.border;
            c = Math.abs(g.x - e.x) <= 1e-7 && Math.abs(g.y - e.y) <= 1e-7;
            if (e._weak) {
              e.put();
            }
            return c;
          } else {
            return false;
          }
        },
        destroy: function () {
          Fe.prototype.destroy.call(this);
          this.atlasFrame = null;
          this.region = da.put(this.region);
          this.tileSize = da.put(this.tileSize);
          this.tileSpacing = da.put(this.tileSpacing);
        },
        __class__: Ig
      });
      function Od() {
        this.blending = 0;
        this.antialiasing = this.colored = this.hasColorOffsets = false;
      }
      h["flixel.graphics.tile.FlxDrawBaseItem"] = Od;
      Od.__name__ = "flixel.graphics.tile.FlxDrawBaseItem";
      Od.blendToInt = function (a) {
        return 0;
      };
      Od.prototype = {
        reset: function () {
          this.graphics = null;
          this.antialiasing = false;
          this.next = this.nextTyped = null;
        },
        render: function (a) {
          Od.drawCalls++;
        },
        __class__: Od
      };
      var vk = x["flixel.graphics.tile.FlxDrawItemType"] = {
        __ename__: "flixel.graphics.tile.FlxDrawItemType",
        __constructs__: null,
        TILES: {
          _hx_name: "TILES",
          _hx_index: 0,
          __enum__: "flixel.graphics.tile.FlxDrawItemType",
          toString: p
        },
        TRIANGLES: {
          _hx_name: "TRIANGLES",
          _hx_index: 1,
          __enum__: "flixel.graphics.tile.FlxDrawItemType",
          toString: p
        }
      };
      vk.__constructs__ = [vk.TILES, vk.TRIANGLES];
      function wk() {
        Od.call(this);
        this.type = vk.TILES;
        this.rects = qb.toFloatVector(null);
        this.transforms = qb.toFloatVector(null);
        this.alphas = [];
      }
      h["flixel.graphics.tile.FlxDrawQuadsItem"] = wk;
      wk.__name__ = "flixel.graphics.tile.FlxDrawQuadsItem";
      wk.__super__ = Od;
      wk.prototype = q(Od.prototype, {
        reset: function () {
          Od.prototype.reset.call(this);
          this.rects.set_length(0);
          this.transforms.set_length(0);
          this.alphas.splice(0, this.alphas.length);
          if (this.colorMultipliers != null) {
            this.colorMultipliers.splice(0, this.colorMultipliers.length);
          }
          if (this.colorOffsets != null) {
            this.colorOffsets.splice(0, this.colorOffsets.length);
          }
        },
        addQuad: function (a, b, c) {
          a = a.frame;
          this.rects.push(a.x);
          this.rects.push(a.y);
          this.rects.push(a.width);
          this.rects.push(a.height);
          this.transforms.push(b.a);
          this.transforms.push(b.b);
          this.transforms.push(b.c);
          this.transforms.push(b.d);
          this.transforms.push(b.tx);
          this.transforms.push(b.ty);
          b = c != null ? c.alphaMultiplier : 1;
          this.alphas.push(b);
          this.alphas.push(b);
          this.alphas.push(b);
          this.alphas.push(b);
          if (this.colored || this.hasColorOffsets) {
            if (this.colorMultipliers == null) {
              this.colorMultipliers = [];
            }
            if (this.colorOffsets == null) {
              this.colorOffsets = [];
            }
            b = 0;
            while (b < 4) {
              b++;
              if (c != null) {
                this.colorMultipliers.push(c.redMultiplier);
                this.colorMultipliers.push(c.greenMultiplier);
                this.colorMultipliers.push(c.blueMultiplier);
                this.colorOffsets.push(c.redOffset);
                this.colorOffsets.push(c.greenOffset);
                this.colorOffsets.push(c.blueOffset);
                this.colorOffsets.push(c.alphaOffset);
              } else {
                this.colorMultipliers.push(1);
                this.colorMultipliers.push(1);
                this.colorMultipliers.push(1);
                this.colorOffsets.push(0);
                this.colorOffsets.push(0);
                this.colorOffsets.push(0);
                this.colorOffsets.push(0);
              }
              this.colorMultipliers.push(1);
            }
          }
        },
        render: function (a) {
          if (this.rects.get_length() != 0) {
            if (this.shader == null && this.graphics.shader == null) {
              throw K.thrown("Attempted to render an invalid FlxDrawItem, did you destroy a cached sprite?");
            }
            var b = this.shader ?? this.graphics.shader;
            b.bitmap.input = this.graphics.bitmap;
            b.bitmap.filter = a.antialiasing || this.antialiasing ? 4 : 5;
            b.alpha.value = this.alphas;
            if (this.colored || this.hasColorOffsets) {
              b.colorMultiplier.value = this.colorMultipliers;
              b.colorOffset.value = this.colorOffsets;
            }
            var c = b.hasTransform;
            if (c.value == null) {
              c.value = [];
            }
            c.value[0] = true;
            c = b.hasColorTransform;
            if (c.value == null) {
              c.value = [];
            }
            c.value[0] = this.colored || this.hasColorOffsets;
            a.canvas.get_graphics().overrideBlendMode(this.blend);
            a.canvas.get_graphics().beginShaderFill(b);
            a.canvas.get_graphics().drawQuads(this.rects, null, this.transforms);
            Od.prototype.render.call(this, a);
          }
        },
        __class__: wk
      });
      function Gn() {
        this.verticesPosition = this.indicesPosition = this.colorsPosition = 0;
        this.colors = qb.toIntVector(null);
        this.uvtData = qb.toFloatVector(null);
        this.indices = qb.toIntVector(null);
        this.vertices = qb.toFloatVector(null);
        Od.call(this);
        this.type = vk.TRIANGLES;
        this.alphas = [];
      }
      h["flixel.graphics.tile.FlxDrawTrianglesItem"] = Gn;
      Gn.__name__ = "flixel.graphics.tile.FlxDrawTrianglesItem";
      Gn.__super__ = Od;
      Gn.prototype = q(Od.prototype, {
        render: function (a) {
          if (g.renderTile && !(this.get_numTriangles() <= 0)) {
            var b = this.shader ?? this.graphics.shader;
            b.bitmap.input = this.graphics.bitmap;
            b.bitmap.filter = a.antialiasing || this.antialiasing ? 4 : 5;
            b.bitmap.wrap = 2;
            b.alpha.value = this.alphas;
            if (this.colored || this.hasColorOffsets) {
              b.colorMultiplier.value = this.colorMultipliers;
              b.colorOffset.value = this.colorOffsets;
            }
            var c = b.hasTransform;
            if (c.value == null) {
              c.value = [];
            }
            c.value[0] = true;
            c = b.hasColorTransform;
            if (c.value == null) {
              c.value = [];
            }
            c.value[0] = this.colored || this.hasColorOffsets;
            a.canvas.get_graphics().overrideBlendMode(this.blend);
            a.canvas.get_graphics().beginShaderFill(b);
            a.canvas.get_graphics().drawTriangles(this.vertices, this.indices, this.uvtData, 1);
            a.canvas.get_graphics().endFill();
            Od.prototype.render.call(this, a);
          }
        },
        reset: function () {
          Od.prototype.reset.call(this);
          var a = this.vertices;
          var b = this.vertices.get_length();
          for (var c = a.__tempIndex = 0, d = []; c < d.length;) {
            var e = d[c++];
            a.insertAt(a.__tempIndex, e);
            a.__tempIndex++;
          }
          a.splice(a.__tempIndex, b);
          a = this.indices;
          b = this.indices.get_length();
          c = a.__tempIndex = 0;
          for (d = []; c < d.length;) {
            e = d[c++];
            a.insertAt(a.__tempIndex, e);
            a.__tempIndex++;
          }
          a.splice(a.__tempIndex, b);
          a = this.uvtData;
          b = this.uvtData.get_length();
          c = a.__tempIndex = 0;
          for (d = []; c < d.length;) {
            e = d[c++];
            a.insertAt(a.__tempIndex, e);
            a.__tempIndex++;
          }
          a.splice(a.__tempIndex, b);
          a = this.colors;
          b = this.colors.get_length();
          c = a.__tempIndex = 0;
          for (d = []; c < d.length;) {
            e = d[c++];
            a.insertAt(a.__tempIndex, e);
            a.__tempIndex++;
          }
          a.splice(a.__tempIndex, b);
          this.colorsPosition = this.indicesPosition = this.verticesPosition = 0;
          this.alphas.splice(0, this.alphas.length);
          if (this.colorMultipliers != null) {
            this.colorMultipliers.splice(0, this.colorMultipliers.length);
          }
          if (this.colorOffsets != null) {
            this.colorOffsets.splice(0, this.colorOffsets.length);
          }
        },
        get_numTriangles: function () {
          return this.indices.get_length() / 3 | 0;
        },
        __class__: Gn
      });
      function wc(a, b) {
        this._groupMembers = a;
        this._filter = b;
        this._cursor = 0;
        this._length = this._groupMembers.length;
      }
      h["flixel.group.FlxTypedGroupIterator"] = wc;
      wc.__name__ = "flixel.group.FlxTypedGroupIterator";
      wc.prototype = {
        next: function () {
          if (this.hasNext()) {
            return this._groupMembers[this._cursor++];
          } else {
            return null;
          }
        },
        hasNext: function () {
          while (this._cursor < this._length && (this._groupMembers[this._cursor] == null || this._filter != null && !this._filter(this._groupMembers[this._cursor]))) {
            this._cursor++;
          }
          return this._cursor < this._length;
        },
        __class__: wc
      };
      function Lk(a, b) {
        this.parentSprite = a;
        $e.call(this, b);
      }
      h["flixel.group._FlxSpriteContainer.SpriteContainer"] = Lk;
      Lk.__name__ = "flixel.group._FlxSpriteContainer.SpriteContainer";
      Lk.__super__ = $e;
      Lk.prototype = q($e.prototype, {
        get_container: function () {
          return this.parentSprite.get_container();
        },
        getCamerasLegacy: function () {
          return this._cameras ?? this.parentSprite.getCamerasLegacy();
        },
        getCameras: function () {
          return this._cameras ?? this.parentSprite.getCameras();
        },
        __class__: Lk
      });
      function wn() {
        this.x = this.y = this.z = 0;
        if (mc.get_isSupported()) {
          this._sensor = new mc();
          this._sensor.addEventListener("update", l(this, this.update));
        }
      }
      h["flixel.input.FlxAccelerometer"] = wn;
      wn.__name__ = "flixel.input.FlxAccelerometer";
      wn.prototype = {
        update: function (a) {
          this.x = a.accelerationX;
          this.y = a.accelerationY;
          this.z = a.accelerationZ;
          this.x /= 10;
          this.y /= 10;
          this.z /= 10;
        },
        __class__: wn
      };
      function pj(a, b) {
        this.status = a;
        this.keyManager = b;
      }
      h["flixel.input.FlxBaseKeyList"] = pj;
      pj.__name__ = "flixel.input.FlxBaseKeyList";
      pj.prototype = {
        get_ANY: function () {
          for (var a = 0, b = this.keyManager._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && this.keyManager.checkStatusUnsafe(c.ID, this.status)) {
              return true;
            }
          }
          return false;
        },
        get_NONE: function () {
          for (var a = 0, b = this.keyManager._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && this.keyManager.checkStatusUnsafe(c.ID, this.status)) {
              return false;
            }
          }
          return true;
        },
        __class__: pj,
        __properties__: {
          get_NONE: "get_NONE",
          get_ANY: "get_ANY"
        }
      };
      function oe(a) {
        this.current = this.last = 0;
        this.ID = a;
      }
      h["flixel.input.FlxInput"] = oe;
      oe.__name__ = "flixel.input.FlxInput";
      oe.__interfaces__ = [uh];
      oe.prototype = {
        press: function () {
          this.last = this.current;
          this.current = this.current == 1 || this.current == 2 ? 1 : 2;
        },
        release: function () {
          this.last = this.current;
          this.current = this.current == 1 || this.current == 2 ? -1 : 0;
        },
        update: function () {
          if (this.last == -1 && this.current == -1) {
            this.current = 0;
          } else if (this.last == 2 && this.current == 2) {
            this.current = 1;
          }
          this.last = this.current;
        },
        reset: function () {
          this.last = this.current = 0;
        },
        hasState: function (a) {
          switch (a) {
            case -1:
              return this.current == -1;
            case 0:
              if (this.current != 0) {
                return this.current == -1;
              } else {
                return true;
              }
            case 1:
              if (this.current != 1) {
                return this.current == 2;
              } else {
                return true;
              }
            case 2:
              return this.current == 2;
          }
        },
        get_justReleased: function () {
          return this.current == -1;
        },
        get_pressed: function () {
          if (this.current != 1) {
            return this.current == 2;
          } else {
            return true;
          }
        },
        get_justPressed: function () {
          return this.current == 2;
        },
        __class__: oe,
        __properties__: {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased"
        }
      };
      function Pg(a) {
        this._keyListMap = new rc();
        this._keyListArray = [];
        this.preventDefaultKeys = [];
        this.enabled = true;
        na.get_current().stage.addEventListener("keyDown", l(this, this.onKeyDown));
        na.get_current().stage.addEventListener("keyUp", l(this, this.onKeyUp));
        this.pressed = a(1, this);
        this.released = a(0, this);
        this.justPressed = a(2, this);
        this.justReleased = a(-1, this);
      }
      h["flixel.input.FlxKeyManager"] = Pg;
      Pg.__name__ = "flixel.input.FlxKeyManager";
      Pg.__interfaces__ = [Og];
      Pg.prototype = {
        firstJustPressed: function () {
          for (var a = 0, b = this._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.current == 2) {
              return c.ID;
            }
          }
          return -1;
        },
        firstJustReleased: function () {
          for (var a = 0, b = this._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.current == -1) {
              return c.ID;
            }
          }
          return -1;
        },
        checkStatus: function (a, b) {
          if (a == -2) {
            switch (b) {
              case -1:
                return this.justReleased.get_ANY();
              case 0:
                return this.released.get_ANY();
              case 1:
                return this.pressed.get_ANY();
              case 2:
                return this.justPressed.get_ANY();
            }
          }
          if (a == -1) {
            switch (b) {
              case -1:
                return this.justReleased.get_NONE();
              case 0:
                return this.released.get_NONE();
              case 1:
                return this.pressed.get_NONE();
              case 2:
                return this.justPressed.get_NONE();
            }
          }
          if (this._keyListMap.h.hasOwnProperty(a)) {
            return this.checkStatusUnsafe(a, b);
          } else {
            return false;
          }
        },
        checkStatusUnsafe: function (a, b) {
          return this._keyListMap.h[a].hasState(b);
        },
        destroy: function () {
          this._keyListMap = this._keyListArray = null;
        },
        reset: function () {
          for (var a = 0, b = this._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.release();
            }
          }
        },
        update: function () {
          for (var a = 0, b = this._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.update();
            }
          }
        },
        checkKeyArrayState: function (a, b) {
          if (a == null) {
            return false;
          }
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            if (this.checkStatus(d, b)) {
              return true;
            }
          }
          return false;
        },
        onKeyUp: function (a) {
          var b = this.resolveKeyCode(a);
          this.handlePreventDefaultKeys(b, a);
          if (this.enabled) {
            a = this._keyListMap.h[b];
            if (a != null) {
              a.release();
            }
          }
        },
        onKeyDown: function (a) {
          var b = this.resolveKeyCode(a);
          this.handlePreventDefaultKeys(b, a);
          if (this.enabled) {
            a = this._keyListMap.h[b];
            if (a != null) {
              a.press();
            }
          }
        },
        handlePreventDefaultKeys: function (a, b) {
          a = this._keyListMap.h[a];
          if (a != null && this.preventDefaultKeys != null && this.preventDefaultKeys.indexOf(a.ID) != -1) {
            b.stopImmediatePropagation();
            b.stopPropagation();
            b.preventDefault();
          }
        },
        resolveKeyCode: function (a) {
          return a.keyCode;
        },
        onFocus: function () {},
        onFocusLost: function () {
          this.reset();
        },
        __class__: Pg
      };
      function qj(a, b, c, d) {
        this.ID = a;
        this.startPosition = b;
        this.endPosition = c;
        this._startTimeInTicks = d;
        this._endTimeInTicks = g.game.ticks;
      }
      h["flixel.input.FlxSwipe"] = qj;
      qj.__name__ = "flixel.input.FlxSwipe";
      qj.__interfaces__ = [B];
      qj.prototype = {
        destroy: function () {
          this.startPosition = da.put(this.startPosition);
          this.endPosition = da.put(this.endPosition);
        },
        __class__: qj
      };
      function Rk(a, b, c, d) {
        this.buttons = [];
        this._deadZone = 0.15;
        d = [];
        d.push(0);
        d.push(0);
        d.push(0);
        d.push(0);
        d.push(0);
        d.push(0);
        this.axis = d;
        this.deadZoneMode = Qk.INDEPENDENT_AXES;
        this.connected = true;
        this.id = a;
        this.manager = b;
        this.pressed = new wh(1, this);
        this.released = new wh(0, this);
        this.justPressed = new wh(2, this);
        this.justReleased = new wh(-1, this);
        this.analog = new Hn(this);
        this.motion = new In(this);
        this.pointer = new Jn(this);
        if (c == null) {
          c = uc.XINPUT;
        }
        this.set_model(c);
        this.detectedModel = c;
      }
      h["flixel.input.gamepad.FlxGamepad"] = Rk;
      Rk.__name__ = "flixel.input.gamepad.FlxGamepad";
      Rk.__interfaces__ = [B];
      Rk.prototype = {
        getButton: function (a) {
          if (a == -1) {
            return null;
          }
          var b = this.buttons[a];
          if (b == null) {
            b = new Sk(a);
            this.buttons[a] = b;
          }
          return b;
        },
        update: function () {
          if (this._device != null) {
            for (var a = 0, b = this._device.get_numControls(); a < b;) {
              var c = a++;
              var d = this._device.getControlAt(c);
              var e = this.getButton(c);
              if (this.isAxisForAnalogStick(c)) {
                this.handleAxisMove(c, d.value, e.value);
              }
              e.value = d.value;
              d = Math.abs(d.value);
              if (d < this.get_deadZone()) {
                e.release();
              } else if (d > this.get_deadZone()) {
                e.press();
              }
            }
            a = 0;
            for (b = this.buttons; a < b.length;) {
              e = b[a];
              ++a;
              if (e != null) {
                e.update();
              }
            }
          }
        },
        reset: function () {
          for (var a = 0, b = this.buttons; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.reset();
            }
          }
          b = this.axis.length;
          for (a = 0; a < b;) {
            c = a++;
            this.axis[c] = 0;
          }
        },
        destroy: function () {
          this.connected = false;
          this.manager = this.axis = this.buttons = null;
        },
        checkButtonArrayState: function (a, b) {
          if (a == null) {
            return false;
          }
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            switch (d) {
              case -2:
                d = this.anyButton(b);
                break;
              case -1:
                d = !this.anyButton(b);
                break;
              default:
                d = this.mapping.getRawID(d);
                d = this.buttons[d];
                d = d != null && d.hasState(b);
            }
            if (d) {
              return true;
            }
          }
          return false;
        },
        firstJustPressedRawID: function () {
          for (var a = 0, b = this.buttons; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.current == 2) {
              return c.ID;
            }
          }
          return -1;
        },
        firstJustReleasedRawID: function () {
          for (var a = 0, b = this.buttons; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.current == -1) {
              return c.ID;
            }
          }
          return -1;
        },
        getAxis: function (a) {
          a = this.getAxisValue(this.mapping.getRawID(a));
          if (Math.abs(a) > this.get_deadZone()) {
            return a;
          } else {
            return 0;
          }
        },
        isAxisForAnalogStick: function (a) {
          var b = this.mapping.leftStick;
          var c = this.mapping.rightStick;
          if (b != null && (a == b.x || a == b.y) || c != null && (a == c.x || a == c.y)) {
            return true;
          } else {
            return false;
          }
        },
        getYAxisRaw: function (a) {
          return this.getAnalogYAxisValue(a);
        },
        anyButton: function (a) {
          if (a == null) {
            a = 1;
          }
          for (var b = 0, c = this.buttons; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.hasState(a)) {
              return true;
            }
          }
          return false;
        },
        anyInput: function () {
          if (this.anyButton()) {
            return true;
          }
          for (var a = 0, b = this.axis.length; a < b;) {
            a++;
            if (this.axis[0] != 0) {
              return true;
            }
          }
          return false;
        },
        getAxisValue: function (a) {
          var b = 0;
          if (a == -1) {
            return 0;
          }
          if (this._device != null && this._device.enabled) {
            var c = this._device.get_numControls() - 1;
            c = a >= 0 && (c == null || a <= c);
          } else {
            c = false;
          }
          if (c) {
            b = this._device.getControlAt(a).value;
          }
          if (this.isAxisForAnalogStick(a) && this.mapping.isAxisFlipped(a)) {
            b *= -1;
          }
          return b;
        },
        getAnalogXAxisValue: function (a) {
          if (a == null) {
            return 0;
          } else if (this.deadZoneMode == Qk.CIRCULAR) {
            return this.getAnalogAxisValueCircular(a, a.x);
          } else {
            return this.getAnalogAxisValueIndependent(a.x);
          }
        },
        getAnalogYAxisValue: function (a) {
          if (a == null) {
            return 0;
          } else if (this.deadZoneMode == Qk.CIRCULAR) {
            return this.getAnalogAxisValueCircular(a, a.y);
          } else {
            return this.getAnalogAxisValueIndependent(a.y);
          }
        },
        getAnalogAxisValueCircular: function (a, b) {
          if (a == null) {
            return 0;
          }
          var c = this.getAxisValue(a.x);
          a = this.getAxisValue(a.y);
          if (a == null) {
            a = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (c == null) {
            c = 0;
          }
          c = fa.pool.get().set(c, a);
          c._inPool = false;
          a = Math.sqrt(c.x * c.x + c.y * c.y);
          c.put();
          if (a > this.get_deadZone()) {
            return this.getAxisValue(b);
          } else {
            return 0;
          }
        },
        getAnalogAxisValueIndependent: function (a) {
          a = this.getAxisValue(a);
          if (Math.abs(a) > this.get_deadZone()) {
            return a;
          } else {
            return 0;
          }
        },
        handleAxisMove: function (a, b, c) {
          var d = b;
          if (this.mapping.isAxisFlipped(a)) {
            d *= -1;
          }
          b = d;
          d = c;
          if (this.mapping.isAxisFlipped(a)) {
            d *= -1;
          }
          c = d;
          d = this.mapping.leftStick;
          var e = this.mapping.rightStick;
          d = d != null && a == d.x || a == d.y ? d : e != null && a == e.x || a == e.y ? e : null;
          if (d.mode == Qg.ONLY_DIGITAL || d.mode == Qg.BOTH) {
            this.handleAxisMoveSub(d, a, b, c, 1);
            this.handleAxisMoveSub(d, a, b, c, -1);
          }
        },
        handleAxisMoveSub: function (a, b, c, d, e) {
          if (e == null) {
            e = 1;
          }
          var f = -1;
          if (b == a.x) {
            f = e < 0 ? a.rawLeft : a.rawRight;
          } else if (b == a.y) {
            f = e < 0 ? a.rawUp : a.rawDown;
          }
          a = a.digitalThreshold;
          c *= e;
          d *= e;
          if (c > a && d <= a) {
            f = this.getButton(f);
            if (f != null) {
              f.press();
            }
          } else if (c <= a && d > a) {
            f = this.getButton(f);
            if (f != null) {
              f.release();
            }
          }
        },
        createMappingForModel: function (a) {
          switch (a._hx_index) {
            case 0:
              return new Tk(this.attachment);
            case 1:
              return new Uk(this.attachment);
            case 2:
              return new Vk(this.attachment);
            case 3:
              return new Wk(this.attachment);
            case 4:
              return new rj(this.attachment);
            case 5:
              return new Xk(this.attachment);
            case 6:
              return new Yk(this.attachment);
            case 7:
              return new Zk(this.attachment);
            case 8:
              return new $k(this.attachment);
            case 9:
              return new al(this.attachment);
            case 10:
              return new bl(this.attachment);
            default:
              return new rj(this.attachment);
          }
        },
        set_model: function (a) {
          this.model = a;
          this.mapping = this.createMappingForModel(this.model);
          return this.model;
        },
        get_deadZone: function () {
          if (this.manager == null || this.manager.globalDeadZone == null) {
            return this._deadZone;
          } else {
            return this.manager.globalDeadZone;
          }
        },
        __class__: Rk,
        __properties__: {
          get_deadZone: "get_deadZone",
          set_model: "set_model"
        }
      };
      var Qk = x["flixel.input.gamepad.FlxGamepadDeadZoneMode"] = {
        __ename__: "flixel.input.gamepad.FlxGamepadDeadZoneMode",
        __constructs__: null,
        INDEPENDENT_AXES: {
          _hx_name: "INDEPENDENT_AXES",
          _hx_index: 0,
          __enum__: "flixel.input.gamepad.FlxGamepadDeadZoneMode",
          toString: p
        },
        CIRCULAR: {
          _hx_name: "CIRCULAR",
          _hx_index: 1,
          __enum__: "flixel.input.gamepad.FlxGamepadDeadZoneMode",
          toString: p
        }
      };
      Qk.__constructs__ = [Qk.INDEPENDENT_AXES, Qk.CIRCULAR];
      var uc = x["flixel.input.gamepad.FlxGamepadModel"] = {
        __ename__: "flixel.input.gamepad.FlxGamepadModel",
        __constructs__: null,
        LOGITECH: {
          _hx_name: "LOGITECH",
          _hx_index: 0,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        OUYA: {
          _hx_name: "OUYA",
          _hx_index: 1,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        PS4: {
          _hx_name: "PS4",
          _hx_index: 2,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        PSVITA: {
          _hx_name: "PSVITA",
          _hx_index: 3,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        XINPUT: {
          _hx_name: "XINPUT",
          _hx_index: 4,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        MAYFLASH_WII_REMOTE: {
          _hx_name: "MAYFLASH_WII_REMOTE",
          _hx_index: 5,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        WII_REMOTE: {
          _hx_name: "WII_REMOTE",
          _hx_index: 6,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        MFI: {
          _hx_name: "MFI",
          _hx_index: 7,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        SWITCH_PRO: {
          _hx_name: "SWITCH_PRO",
          _hx_index: 8,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        SWITCH_JOYCON_LEFT: {
          _hx_name: "SWITCH_JOYCON_LEFT",
          _hx_index: 9,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        SWITCH_JOYCON_RIGHT: {
          _hx_name: "SWITCH_JOYCON_RIGHT",
          _hx_index: 10,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        UNKNOWN: {
          _hx_name: "UNKNOWN",
          _hx_index: 11,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        }
      };
      uc.__constructs__ = [uc.LOGITECH, uc.OUYA, uc.PS4, uc.PSVITA, uc.XINPUT, uc.MAYFLASH_WII_REMOTE, uc.WII_REMOTE, uc.MFI, uc.SWITCH_PRO, uc.SWITCH_JOYCON_LEFT, uc.SWITCH_JOYCON_RIGHT, uc.UNKNOWN];
      var Kn = x["flixel.input.gamepad.FlxGamepadAttachment"] = {
        __ename__: "flixel.input.gamepad.FlxGamepadAttachment",
        __constructs__: null,
        WII_NUNCHUCK: {
          _hx_name: "WII_NUNCHUCK",
          _hx_index: 0,
          __enum__: "flixel.input.gamepad.FlxGamepadAttachment",
          toString: p
        },
        WII_CLASSIC_CONTROLLER: {
          _hx_name: "WII_CLASSIC_CONTROLLER",
          _hx_index: 1,
          __enum__: "flixel.input.gamepad.FlxGamepadAttachment",
          toString: p
        },
        NONE: {
          _hx_name: "NONE",
          _hx_index: 2,
          __enum__: "flixel.input.gamepad.FlxGamepadAttachment",
          toString: p
        }
      };
      Kn.__constructs__ = [Kn.WII_NUNCHUCK, Kn.WII_CLASSIC_CONTROLLER, Kn.NONE];
      function Oc(a, b, c) {
        this.mode = Qg.BOTH;
        this.digitalThreshold = 0.5;
        this.rawUp = this.rawDown = this.rawLeft = this.rawRight = -1;
        this.x = a;
        this.y = b;
        if (c != null) {
          this.mode = c.mode ?? Qg.BOTH;
          this.rawUp = c.up ?? -1;
          this.rawDown = c.down ?? -1;
          this.rawLeft = c.left ?? -1;
          this.rawRight = c.right ?? -1;
          this.digitalThreshold = c.threshold ?? 0.5;
        }
      }
      h["flixel.input.gamepad.FlxGamepadAnalogStick"] = Oc;
      Oc.__name__ = "flixel.input.gamepad.FlxGamepadAnalogStick";
      Oc.prototype = {
        __class__: Oc
      };
      var Qg = x["flixel.input.gamepad.FlxAnalogToDigitalMode"] = {
        __ename__: "flixel.input.gamepad.FlxAnalogToDigitalMode",
        __constructs__: null,
        BOTH: {
          _hx_name: "BOTH",
          _hx_index: 0,
          __enum__: "flixel.input.gamepad.FlxAnalogToDigitalMode",
          toString: p
        },
        ONLY_DIGITAL: {
          _hx_name: "ONLY_DIGITAL",
          _hx_index: 1,
          __enum__: "flixel.input.gamepad.FlxAnalogToDigitalMode",
          toString: p
        },
        ONLY_ANALOG: {
          _hx_name: "ONLY_ANALOG",
          _hx_index: 2,
          __enum__: "flixel.input.gamepad.FlxAnalogToDigitalMode",
          toString: p
        }
      };
      Qg.__constructs__ = [Qg.BOTH, Qg.ONLY_DIGITAL, Qg.ONLY_ANALOG];
      function Sk(a) {
        this.value = 0;
        oe.call(this, a);
      }
      h["flixel.input.gamepad.FlxGamepadButton"] = Sk;
      Sk.__name__ = "flixel.input.gamepad.FlxGamepadButton";
      Sk.__super__ = oe;
      Sk.prototype = q(oe.prototype, {
        __class__: Sk
      });
      function rc() {
        this.h = {};
      }
      h["haxe.ds.IntMap"] = rc;
      rc.__name__ = "haxe.ds.IntMap";
      rc.__interfaces__ = [jb];
      rc.prototype = {
        set: function (a, b) {
          this.h[a] = b;
        },
        get: function (a) {
          return this.h[a];
        },
        remove: function (a) {
          if (!this.h.hasOwnProperty(a)) {
            return false;
          }
          delete this.h[a];
          return true;
        },
        keys: function () {
          var a = [];
          var b;
          for (b in this.h) {
            if (this.h.hasOwnProperty(b)) {
              a.push(+b);
            }
          }
          return new Uf(a);
        },
        iterator: function () {
          return {
            ref: this.h,
            it: this.keys(),
            hasNext: function () {
              return this.it.hasNext();
            },
            next: function () {
              var a = this.it.next();
              return this.ref[a];
            }
          };
        },
        __class__: rc
      };
      var ig = {};
      function nb() {
        ua.call(this);
        nb.__instances.push(this);
      }
      h["openfl.ui.GameInput"] = nb;
      nb.__name__ = "openfl.ui.GameInput";
      nb.getDeviceAt = function (a) {
        if (a >= 0 && a < nb.__deviceList.length) {
          return nb.__deviceList[a];
        } else {
          return null;
        }
      };
      nb.__getDevice = function (a) {
        if (a == null) {
          return null;
        }
        if (nb.__devices.h.__keys__[a.__id__] == null) {
          var b = Lc.__getDeviceData();
          var c = b[a.id].id;
          b = Lc.__getDeviceData();
          b = new Ln(c, b[a.id].id);
          nb.__deviceList.push(b);
          nb.__devices.set(a, b);
          nb.numDevices = nb.__deviceList.length;
        }
        return nb.__devices.h[a.__id__];
      };
      nb.__onGamepadAxisMove = function (a, b, c) {
        a = nb.__getDevice(a);
        if (a != null && a.enabled) {
          if (!a.__axis.h.hasOwnProperty(b)) {
            if (b == null) {
              var d = "null";
            } else {
              switch (b) {
                case 0:
                  d = "LEFT_X";
                  break;
                case 1:
                  d = "LEFT_Y";
                  break;
                case 2:
                  d = "RIGHT_X";
                  break;
                case 3:
                  d = "RIGHT_Y";
                  break;
                case 4:
                  d = "TRIGGER_LEFT";
                  break;
                case 5:
                  d = "TRIGGER_RIGHT";
                  break;
                default:
                  d = "UNKNOWN (" + b + ")";
              }
            }
            d = new Qe(a, "AXIS_" + d, -1, 1);
            a.__axis.h[b] = d;
            a.__controls.push(d);
          }
          d = a.__axis.h[b];
          d.value = c;
          d.dispatchEvent(new Ga("change"));
        }
      };
      nb.__onGamepadButtonDown = function (a, b) {
        a = nb.__getDevice(a);
        if (a != null && a.enabled) {
          if (!a.__button.h.hasOwnProperty(b)) {
            if (b == null) {
              var c = "null";
            } else {
              switch (b) {
                case 0:
                  c = "A";
                  break;
                case 1:
                  c = "B";
                  break;
                case 2:
                  c = "X";
                  break;
                case 3:
                  c = "Y";
                  break;
                case 4:
                  c = "BACK";
                  break;
                case 5:
                  c = "GUIDE";
                  break;
                case 6:
                  c = "START";
                  break;
                case 7:
                  c = "LEFT_STICK";
                  break;
                case 8:
                  c = "RIGHT_STICK";
                  break;
                case 9:
                  c = "LEFT_SHOULDER";
                  break;
                case 10:
                  c = "RIGHT_SHOULDER";
                  break;
                case 11:
                  c = "DPAD_UP";
                  break;
                case 12:
                  c = "DPAD_DOWN";
                  break;
                case 13:
                  c = "DPAD_LEFT";
                  break;
                case 14:
                  c = "DPAD_RIGHT";
                  break;
                default:
                  c = "UNKNOWN (" + b + ")";
              }
            }
            c = new Qe(a, "BUTTON_" + c, 0, 1);
            a.__button.h[b] = c;
            a.__controls.push(c);
          }
          c = a.__button.h[b];
          c.value = 1;
          c.dispatchEvent(new Ga("change"));
        }
      };
      nb.__onGamepadButtonUp = function (a, b) {
        a = nb.__getDevice(a);
        if (a != null && a.enabled) {
          if (!a.__button.h.hasOwnProperty(b)) {
            if (b == null) {
              var c = "null";
            } else {
              switch (b) {
                case 0:
                  c = "A";
                  break;
                case 1:
                  c = "B";
                  break;
                case 2:
                  c = "X";
                  break;
                case 3:
                  c = "Y";
                  break;
                case 4:
                  c = "BACK";
                  break;
                case 5:
                  c = "GUIDE";
                  break;
                case 6:
                  c = "START";
                  break;
                case 7:
                  c = "LEFT_STICK";
                  break;
                case 8:
                  c = "RIGHT_STICK";
                  break;
                case 9:
                  c = "LEFT_SHOULDER";
                  break;
                case 10:
                  c = "RIGHT_SHOULDER";
                  break;
                case 11:
                  c = "DPAD_UP";
                  break;
                case 12:
                  c = "DPAD_DOWN";
                  break;
                case 13:
                  c = "DPAD_LEFT";
                  break;
                case 14:
                  c = "DPAD_RIGHT";
                  break;
                default:
                  c = "UNKNOWN (" + b + ")";
              }
            }
            c = new Qe(a, "BUTTON_" + c, 0, 1);
            a.__button.h[b] = c;
            a.__controls.push(c);
          }
          c = a.__button.h[b];
          c.value = 0;
          c.dispatchEvent(new Ga("change"));
        }
      };
      nb.__onGamepadConnect = function (a) {
        a = nb.__getDevice(a);
        if (a != null) {
          for (var b = 0, c = nb.__instances; b < c.length;) {
            var d = c[b];
            ++b;
            d.dispatchEvent(new bi("deviceAdded", true, false, a));
          }
        }
      };
      nb.__onGamepadDisconnect = function (a) {
        var b = nb.__devices.h[a.__id__];
        if (b != null) {
          if (nb.__devices.h.__keys__[a.__id__] != null) {
            M.remove(nb.__deviceList, nb.__devices.h[a.__id__]);
            nb.__devices.remove(a);
          }
          nb.numDevices = nb.__deviceList.length;
          a = 0;
          for (var c = nb.__instances; a < c.length;) {
            var d = c[a];
            ++a;
            d.dispatchEvent(new bi("deviceRemoved", true, false, b));
          }
        }
      };
      nb.__super__ = ua;
      nb.prototype = q(ua.prototype, {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          ua.prototype.addEventListener.call(this, a, b, c, d, e);
          if (a == "deviceAdded") {
            a = 0;
            b = nb.__deviceList;
            while (a < b.length) {
              c = b[a];
              ++a;
              this.dispatchEvent(new bi("deviceAdded", true, false, c));
            }
          }
        },
        __class__: nb
      });
      function mg() {
        this._activeGamepads = [];
        this._gamepads = [];
        this.deviceConnected = new wf();
        this.deviceDisconnected = new wf();
        mg._gameInput.addEventListener("deviceAdded", l(this, this.onDeviceAdded));
        mg._gameInput.addEventListener("deviceRemoved", l(this, this.onDeviceRemoved));
        for (var a = 0, b = nb.numDevices; a < b;) {
          var c = a++;
          this.addGamepad(nb.getDeviceAt(c));
        }
      }
      h["flixel.input.gamepad.FlxGamepadManager"] = mg;
      mg.__name__ = "flixel.input.gamepad.FlxGamepadManager";
      mg.__interfaces__ = [Og];
      mg.prototype = {
        removeByID: function (a) {
          var b = this._gamepads[a];
          if (b != null) {
            this._gamepads[a] = null;
            a = this._activeGamepads.indexOf(b);
            if (a != -1) {
              this._activeGamepads[a] = null;
              this.deviceDisconnected.dispatch(b);
            }
            da.destroy(b);
          }
          if (this.lastActive == b) {
            this.lastActive = null;
          }
          if (this.firstActive == b) {
            this.firstActive = null;
          }
        },
        createByID: function (a, b) {
          var c = this._gamepads[a];
          if (c == null) {
            c = new Rk(a, this, b);
            this._gamepads[a] = c;
            a = false;
            b = 0;
            for (var d = this._activeGamepads.length; b < d;) {
              var e = b++;
              if (this._activeGamepads[e] == null) {
                this._activeGamepads[e] = c;
                a = true;
                break;
              }
            }
            if (!a) {
              this._activeGamepads.push(c);
            }
          }
          this.lastActive = c;
          if (this.firstActive == null) {
            this.firstActive = c;
          }
          return c;
        },
        getActiveGamepads: function (a) {
          if (a == null) {
            a = [];
          }
          for (var b = 0, c = this._gamepads; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.anyInput()) {
              a.push(d);
            }
          }
          return a;
        },
        getFirstActiveGamepad: function () {
          for (var a = 0, b = this._gamepads; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.anyInput()) {
              return c;
            }
          }
          return null;
        },
        anyInput: function () {
          for (var a = 0, b = this._gamepads; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.anyInput()) {
              return true;
            }
          }
          return false;
        },
        anyHasState: function (a, b) {
          for (var c = 0, d = this._gamepads; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              switch (a) {
                case -2:
                  e = e.anyButton(b);
                  break;
                case -1:
                  e = !e.anyButton(b);
                  break;
                default:
                  var f = e.mapping.getRawID(a);
                  e = e.buttons[f];
                  e = e != null && e.hasState(b);
              }
            } else {
              e = false;
            }
            if (e) {
              return true;
            }
          }
          return false;
        },
        destroy: function () {
          da.destroyArray(this._gamepads);
          this._gamepads = this.lastActive = this.firstActive = null;
          mg._gameInput.removeEventListener("deviceAdded", l(this, this.onDeviceAdded));
          mg._gameInput.removeEventListener("deviceRemoved", l(this, this.onDeviceRemoved));
        },
        reset: function () {
          for (var a = 0, b = this._gamepads; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.reset();
            }
          }
        },
        onDeviceAdded: function (a) {
          this.addGamepad(a.device);
        },
        onDeviceRemoved: function (a) {
          this.removeGamepad(a.device);
        },
        findGamepadIndex: function (a) {
          if (a == null) {
            return -1;
          }
          for (var b = 0, c = nb.numDevices; b < c;) {
            var d = b++;
            if (nb.getDeviceAt(d) == a) {
              return d;
            }
          }
          return -1;
        },
        addGamepad: function (a) {
          if (a != null) {
            a.enabled = true;
            var b = this.findGamepadIndex(a);
            if (!(b < 0)) {
              b = this.createByID(b, this.getModelFromDeviceName(a.name));
              b._device = a;
              this.deviceConnected.dispatch(b);
            }
          }
        },
        getModelFromDeviceName: function (a) {
          if (a == null) {
            return uc.UNKNOWN;
          }
          a = w.replace(w.replace(a.toLowerCase(), "-", ""), "_", "");
          if (a.indexOf("ouya") != -1) {
            return uc.OUYA;
          } else if (a.indexOf("wireless controller") != -1 || a.indexOf("ps4") != -1) {
            return uc.PS4;
          } else if (a.indexOf("logitech") != -1) {
            return uc.LOGITECH;
          } else if (a.indexOf("xbox") != -1 && a.indexOf("360") != -1 || a.indexOf("xinput") != -1) {
            return uc.XINPUT;
          } else if (a.indexOf("nintendo rvlcnt01tr") != -1) {
            return uc.WII_REMOTE;
          } else if (a.indexOf("nintendo rvlcnt01") != -1) {
            return uc.WII_REMOTE;
          } else if (a.indexOf("mayflash wiimote pc adapter") != -1) {
            return uc.MAYFLASH_WII_REMOTE;
          } else if (a.indexOf("pro controller") != -1 || a.indexOf("joycon l+r") != -1) {
            return uc.SWITCH_PRO;
          } else if (a.indexOf("joycon (l)") != -1) {
            return uc.SWITCH_JOYCON_LEFT;
          } else if (a.indexOf("joycon (r)") != -1) {
            return uc.SWITCH_JOYCON_RIGHT;
          } else if (a.indexOf("mfi") != -1) {
            return uc.MFI;
          } else {
            return uc.UNKNOWN;
          }
        },
        removeGamepad: function (a) {
          if (a != null) {
            for (var b = 0, c = this._gamepads.length; b < c;) {
              var d = b++;
              var e = this._gamepads[d];
              if (e != null && e._device == a) {
                this.removeByID(d);
              }
            }
          }
        },
        update: function () {
          for (var a = 0, b = this._gamepads; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.update();
            }
          }
        },
        onFocus: function () {},
        onFocusLost: function () {
          this.reset();
        },
        get_numActiveGamepads: function () {
          var a = 0;
          for (var b = 0, c = this._gamepads; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              ++a;
            }
          }
          return a;
        },
        __class__: mg,
        __properties__: {
          get_numActiveGamepads: "get_numActiveGamepads"
        }
      };
      function jf() {}
      h["flixel.input.gamepad.id.LogitechID"] = jf;
      jf.__name__ = "flixel.input.gamepad.id.LogitechID";
      function kf() {}
      h["flixel.input.gamepad.id.MFiID"] = kf;
      kf.__name__ = "flixel.input.gamepad.id.MFiID";
      function Ed() {}
      h["flixel.input.gamepad.id.MayflashWiiRemoteID"] = Ed;
      Ed.__name__ = "flixel.input.gamepad.id.MayflashWiiRemoteID";
      function lf() {}
      h["flixel.input.gamepad.id.OUYAID"] = lf;
      lf.__name__ = "flixel.input.gamepad.id.OUYAID";
      function mf() {}
      h["flixel.input.gamepad.id.PS4ID"] = mf;
      mf.__name__ = "flixel.input.gamepad.id.PS4ID";
      function Ge() {}
      h["flixel.input.gamepad.id.PSVitaID"] = Ge;
      Ge.__name__ = "flixel.input.gamepad.id.PSVitaID";
      function ci() {}
      h["flixel.input.gamepad.id.SwitchJoyconLeftID"] = ci;
      ci.__name__ = "flixel.input.gamepad.id.SwitchJoyconLeftID";
      function di() {}
      h["flixel.input.gamepad.id.SwitchJoyconRightID"] = di;
      di.__name__ = "flixel.input.gamepad.id.SwitchJoyconRightID";
      function nf() {}
      h["flixel.input.gamepad.id.SwitchProID"] = nf;
      nf.__name__ = "flixel.input.gamepad.id.SwitchProID";
      function Fd() {}
      h["flixel.input.gamepad.id.WiiRemoteID"] = Fd;
      Fd.__name__ = "flixel.input.gamepad.id.WiiRemoteID";
      function of() {}
      h["flixel.input.gamepad.id.XInputID"] = of;
      of.__name__ = "flixel.input.gamepad.id.XInputID";
      function sj(a, b) {
        this.status = a;
        this.gamepad = b;
      }
      h["flixel.input.gamepad.lists.FlxBaseGamepadList"] = sj;
      sj.__name__ = "flixel.input.gamepad.lists.FlxBaseGamepadList";
      sj.prototype = {
        __class__: sj
      };
      function Hn(a) {
        this.value = new Mn(a);
        this.justMoved = new cl(2, a);
        this.justReleased = new cl(-1, a);
      }
      h["flixel.input.gamepad.lists.FlxGamepadAnalogList"] = Hn;
      Hn.__name__ = "flixel.input.gamepad.lists.FlxGamepadAnalogList";
      Hn.prototype = {
        __class__: Hn
      };
      function cl(a, b) {
        this.status = a;
        this.gamepad = b;
      }
      h["flixel.input.gamepad.lists.FlxGamepadAnalogStateList"] = cl;
      cl.__name__ = "flixel.input.gamepad.lists.FlxGamepadAnalogStateList";
      cl.prototype = {
        get_LEFT_STICK: function () {
          return this.checkXY(19);
        },
        get_LEFT_STICK_X: function () {
          var a = this.gamepad.mapping.getAnalogStick(19);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.x];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        get_LEFT_STICK_Y: function () {
          var a = this.gamepad.mapping.getAnalogStick(19);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.y];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        get_RIGHT_STICK: function () {
          return this.checkXY(20);
        },
        get_RIGHT_STICK_X: function () {
          var a = this.gamepad.mapping.getAnalogStick(20);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.x];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        get_RIGHT_STICK_Y: function () {
          var a = this.gamepad.mapping.getAnalogStick(20);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.y];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        checkXY: function (a) {
          a = this.gamepad.mapping.getAnalogStick(a);
          if (a == null) {
            return false;
          }
          var b = this.gamepad.buttons[a.x];
          var c = b != null && b.hasState(this.status);
          b = this.gamepad.buttons[a.y];
          var d = b != null && b.hasState(this.status);
          if (c && d || c && (b = this.gamepad.buttons[a.y], c = b != null && b.hasState(0), b = this.gamepad.buttons[a.y], b = b != null && b.hasState(-1), c || b) || d && (b = this.gamepad.buttons[a.x], d = b != null && b.hasState(0), b = this.gamepad.buttons[a.x], a = b != null && b.hasState(-1), d || a)) {
            return true;
          } else {
            return false;
          }
        },
        checkX: function (a) {
          a = this.gamepad.mapping.getAnalogStick(a);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.x];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        checkY: function (a) {
          a = this.gamepad.mapping.getAnalogStick(a);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.y];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        checkRaw: function (a, b) {
          a = this.gamepad.buttons[a];
          if (a != null) {
            return a.hasState(b);
          } else {
            return false;
          }
        },
        __class__: cl,
        __properties__: {
          get_RIGHT_STICK_Y: "get_RIGHT_STICK_Y",
          get_RIGHT_STICK_X: "get_RIGHT_STICK_X",
          get_RIGHT_STICK: "get_RIGHT_STICK",
          get_LEFT_STICK_Y: "get_LEFT_STICK_Y",
          get_LEFT_STICK_X: "get_LEFT_STICK_X",
          get_LEFT_STICK: "get_LEFT_STICK"
        }
      };
      function Mn(a) {
        this.gamepad = a;
      }
      h["flixel.input.gamepad.lists.FlxGamepadAnalogValueList"] = Mn;
      Mn.__name__ = "flixel.input.gamepad.lists.FlxGamepadAnalogValueList";
      Mn.prototype = {
        get_LEFT_STICK_X: function () {
          var a = this.gamepad;
          return a.getAnalogXAxisValue(a.mapping.getAnalogStick(19));
        },
        get_LEFT_STICK_Y: function () {
          var a = this.gamepad;
          return a.getYAxisRaw(a.mapping.getAnalogStick(19));
        },
        get_RIGHT_STICK_X: function () {
          var a = this.gamepad;
          return a.getAnalogXAxisValue(a.mapping.getAnalogStick(20));
        },
        get_RIGHT_STICK_Y: function () {
          var a = this.gamepad;
          return a.getYAxisRaw(a.mapping.getAnalogStick(20));
        },
        get_LEFT_TRIGGER: function () {
          return this.gamepad.getAxis(17);
        },
        get_RIGHT_TRIGGER: function () {
          return this.gamepad.getAxis(18);
        },
        get_POINTER_X: function () {
          return this.gamepad.getAxis(28);
        },
        get_POINTER_Y: function () {
          return this.gamepad.getAxis(29);
        },
        getAxis: function (a) {
          return this.gamepad.getAxis(a);
        },
        getXAxis: function (a) {
          var b = this.gamepad;
          return b.getAnalogXAxisValue(b.mapping.getAnalogStick(a));
        },
        getYAxis: function (a) {
          var b = this.gamepad;
          return b.getYAxisRaw(b.mapping.getAnalogStick(a));
        },
        __class__: Mn,
        __properties__: {
          get_POINTER_Y: "get_POINTER_Y",
          get_POINTER_X: "get_POINTER_X",
          get_RIGHT_TRIGGER: "get_RIGHT_TRIGGER",
          get_LEFT_TRIGGER: "get_LEFT_TRIGGER",
          get_RIGHT_STICK_Y: "get_RIGHT_STICK_Y",
          get_RIGHT_STICK_X: "get_RIGHT_STICK_X",
          get_LEFT_STICK_Y: "get_LEFT_STICK_Y",
          get_LEFT_STICK_X: "get_LEFT_STICK_X"
        }
      };
      function wh(a, b) {
        sj.call(this, a, b);
      }
      h["flixel.input.gamepad.lists.FlxGamepadButtonList"] = wh;
      wh.__name__ = "flixel.input.gamepad.lists.FlxGamepadButtonList";
      wh.__super__ = sj;
      wh.prototype = q(sj.prototype, {
        __class__: wh
      });
      function In(a) {
        this.gamepad = a;
      }
      h["flixel.input.gamepad.lists.FlxGamepadMotionValueList"] = In;
      In.__name__ = "flixel.input.gamepad.lists.FlxGamepadMotionValueList";
      In.prototype = {
        get_TILT_PITCH: function () {
          if (this.gamepad.mapping.supportsMotion) {
            return this.gamepad.getAxis(26);
          } else {
            return 0;
          }
        },
        get_TILT_ROLL: function () {
          if (this.gamepad.mapping.supportsMotion) {
            return this.gamepad.getAxis(27);
          } else {
            return 0;
          }
        },
        getAxis: function (a) {
          if (this.gamepad.mapping.supportsMotion) {
            return this.gamepad.getAxis(a);
          } else {
            return 0;
          }
        },
        get_isSupported: function () {
          return this.gamepad.mapping.supportsMotion;
        },
        __class__: In,
        __properties__: {
          get_TILT_ROLL: "get_TILT_ROLL",
          get_TILT_PITCH: "get_TILT_PITCH",
          get_isSupported: "get_isSupported"
        }
      };
      function Jn(a) {
        this.gamepad = a;
      }
      h["flixel.input.gamepad.lists.FlxGamepadPointerValueList"] = Jn;
      Jn.__name__ = "flixel.input.gamepad.lists.FlxGamepadPointerValueList";
      Jn.prototype = {
        get_X: function () {
          if (this.gamepad.mapping.supportsPointer) {
            return this.gamepad.getAxis(28);
          } else {
            return 0;
          }
        },
        get_Y: function () {
          if (this.gamepad.mapping.supportsPointer) {
            return this.gamepad.getAxis(29);
          } else {
            return 0;
          }
        },
        getAxis: function (a) {
          if (this.gamepad.mapping.supportsPointer) {
            return this.gamepad.getAxis(a);
          } else {
            return 0;
          }
        },
        get_isSupported: function () {
          return this.gamepad.mapping.supportsPointer;
        },
        __class__: Jn,
        __properties__: {
          get_Y: "get_Y",
          get_X: "get_X",
          get_isSupported: "get_isSupported"
        }
      };
      function ac(a) {
        this.attachment = Kn.NONE;
        this.supportsMotion = this.supportsPointer = false;
        if (a != null) {
          this.set_attachment(a);
        }
        this.initValues();
      }
      h["flixel.input.gamepad.mappings.FlxGamepadMapping"] = ac;
      ac.__name__ = "flixel.input.gamepad.mappings.FlxGamepadMapping";
      ac.prototype = {
        initValues: function () {},
        getAnalogStick: function (a) {
          switch (a) {
            case 19:
              return this.leftStick;
            case 20:
              return this.rightStick;
            default:
              return null;
          }
        },
        getID: function (a) {
          return -1;
        },
        getRawID: function (a) {
          return -1;
        },
        isAxisFlipped: function (a) {
          return false;
        },
        set_attachment: function (a) {
          return this.attachment = a;
        },
        __class__: ac,
        __properties__: {
          set_attachment: "set_attachment"
        }
      };
      function Tk(a) {
        ac.call(this, a);
      }
      h["flixel.input.gamepad.mappings.LogitechMapping"] = Tk;
      Tk.__name__ = "flixel.input.gamepad.mappings.LogitechMapping";
      Tk.__super__ = ac;
      Tk.prototype = q(ac.prototype, {
        initValues: function () {
          this.leftStick = jf.LEFT_ANALOG_STICK;
          this.rightStick = jf.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case -5:
              return 10;
            case 0:
              return 2;
            case 1:
              return 0;
            case 2:
              return 1;
            case 3:
              return 3;
            case 4:
              return 4;
            case 5:
              return 5;
            case 6:
              return 17;
            case 7:
              return 18;
            case 8:
              return 6;
            case 9:
              return 7;
            case 10:
              return 8;
            case 11:
              return 9;
            case 16:
              return 11;
            case 17:
              return 12;
            case 18:
              return 13;
            case 19:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 1;
            case 1:
              return 2;
            case 2:
              return 0;
            case 3:
              return 3;
            case 4:
              return 4;
            case 5:
              return 5;
            case 6:
              return 8;
            case 7:
              return 9;
            case 8:
              return 10;
            case 9:
              return 11;
            case 10:
              return -5;
            case 11:
              return 16;
            case 12:
              return 17;
            case 13:
              return 18;
            case 14:
              return 19;
            case 17:
              return 6;
            case 18:
              return 7;
            case 34:
              return jf.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return jf.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return jf.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return jf.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return jf.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return jf.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return jf.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return jf.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: Tk
      });
      function Zk(a) {
        ac.call(this, a);
      }
      h["flixel.input.gamepad.mappings.MFiMapping"] = Zk;
      Zk.__name__ = "flixel.input.gamepad.mappings.MFiMapping";
      Zk.__super__ = ac;
      Zk.prototype = q(ac.prototype, {
        initValues: function () {
          this.leftStick = kf.LEFT_ANALOG_STICK;
          this.rightStick = kf.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 11:
              return 10;
            case 12:
              return 7;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return 11;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 34:
              return kf.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return kf.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return kf.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return kf.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return kf.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return kf.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return kf.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return kf.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: Zk
      });
      function Xk(a) {
        ac.call(this, a);
      }
      h["flixel.input.gamepad.mappings.MayflashWiiRemoteMapping"] = Xk;
      Xk.__name__ = "flixel.input.gamepad.mappings.MayflashWiiRemoteMapping";
      Xk.__super__ = ac;
      Xk.prototype = q(ac.prototype, {
        initValues: function () {
          this.supportsPointer = true;
        },
        getID: function (a) {
          switch (this.attachment._hx_index) {
            case 0:
              return this.getIDNunchuk(a);
            case 1:
              return this.getIDClassicController(a);
            case 2:
              return this.getIDDefault(a);
          }
        },
        getIDClassicController: function (a) {
          switch (a) {
            case 4:
              return 11;
            case 5:
              return 12;
            case 6:
              return 13;
            case 7:
              return 14;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 0;
            case 11:
              return 1;
            case 12:
              return 17;
            case 13:
              return 18;
            case 14:
              return 4;
            case 15:
              return 5;
            case 16:
              return 6;
            case 17:
              return 7;
            case 19:
              return 10;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getIDNunchuk: function (a) {
          switch (a) {
            case 4:
              return 11;
            case 5:
              return 12;
            case 6:
              return 13;
            case 7:
              return 14;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 0;
            case 11:
              return 1;
            case 12:
              return 6;
            case 13:
              return 7;
            case 14:
              return 17;
            case 15:
              return 4;
            case 19:
              return 10;
            default:
              return -1;
          }
        },
        getIDDefault: function (a) {
          switch (a) {
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 0;
            case 11:
              return 1;
            case 12:
              return 6;
            case 13:
              return 7;
            case 19:
              return 10;
            case 22:
              return 11;
            case 23:
              return 12;
            case 24:
              return 13;
            case 25:
              return 14;
            default:
              return -1;
          }
        },
        getRawID: function (a) {
          switch (this.attachment._hx_index) {
            case 0:
              return this.getRawNunchuk(a);
            case 1:
              return this.getRawClassicController(a);
            case 2:
              return this.getRawDefault(a);
          }
        },
        getRawClassicController: function (a) {
          switch (a) {
            case 0:
              return 10;
            case 1:
              return 11;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 14;
            case 5:
              return 15;
            case 6:
              return 16;
            case 7:
              return 17;
            case 10:
              return 19;
            case 11:
              return 4;
            case 12:
              return 5;
            case 13:
              return 6;
            case 14:
              return 7;
            case 17:
              return 12;
            case 18:
              return 13;
            case 30:
              return -1;
            case 31:
              return -1;
            case 34:
              return Ed.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Ed.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Ed.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Ed.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return Ed.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return Ed.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return Ed.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return Ed.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return this.getRawDefault(a);
          }
        },
        getRawNunchuk: function (a) {
          switch (a) {
            case 0:
              return 10;
            case 1:
              return 11;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 6:
              return 12;
            case 7:
              return 13;
            case 10:
              return 19;
            case 11:
              return 4;
            case 12:
              return 5;
            case 13:
              return 6;
            case 14:
              return 7;
            case 17:
              return 14;
            case 28:
              return 2;
            case 29:
              return 3;
            case 34:
              return Ed.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Ed.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Ed.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Ed.LEFT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        getRawDefault: function (a) {
          switch (a) {
            case 0:
              return 10;
            case 1:
              return 11;
            case 2:
              return 8;
            case 3:
              return 9;
            case 6:
              return 12;
            case 7:
              return 13;
            case 10:
              return 19;
            case 11:
              return 22;
            case 12:
              return 23;
            case 13:
              return 24;
            case 14:
              return 25;
            default:
              return -1;
          }
        },
        set_attachment: function (a) {
          switch (a._hx_index) {
            case 0:
            case 1:
              var b = Ed.LEFT_ANALOG_STICK;
              break;
            case 2:
              b = Ed.REMOTE_DPAD;
          }
          this.leftStick = b;
          this.rightStick = a._hx_index == 1 ? Ed.RIGHT_ANALOG_STICK : null;
          return ac.prototype.set_attachment.call(this, a);
        },
        __class__: Xk
      });
      function Uk(a) {
        ac.call(this, a);
      }
      h["flixel.input.gamepad.mappings.OUYAMapping"] = Uk;
      Uk.__name__ = "flixel.input.gamepad.mappings.OUYAMapping";
      Uk.__super__ = ac;
      Uk.prototype = q(ac.prototype, {
        initValues: function () {
          this.leftStick = lf.LEFT_ANALOG_STICK;
          this.rightStick = lf.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case 4:
              return 17;
            case 5:
              return 18;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            case 16777234:
              return 10;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return 16777234;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 34:
              return lf.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return lf.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return lf.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return lf.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return lf.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return lf.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return lf.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return lf.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: Uk
      });
      function Vk(a) {
        ac.call(this, a);
      }
      h["flixel.input.gamepad.mappings.PS4Mapping"] = Vk;
      Vk.__name__ = "flixel.input.gamepad.mappings.PS4Mapping";
      Vk.__super__ = ac;
      Vk.prototype = q(ac.prototype, {
        initValues: function () {
          this.leftStick = mf.LEFT_ANALOG_STICK;
          this.rightStick = mf.RIGHT_ANALOG_STICK;
          this.supportsPointer = this.supportsMotion = true;
        },
        getID: function (a) {
          switch (a) {
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 11:
              return 10;
            case 12:
              return 7;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return 11;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 34:
              return mf.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return mf.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return mf.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return mf.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return mf.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return mf.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return mf.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return mf.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: Vk
      });
      function Wk(a) {
        ac.call(this, a);
      }
      h["flixel.input.gamepad.mappings.PSVitaMapping"] = Wk;
      Wk.__name__ = "flixel.input.gamepad.mappings.PSVitaMapping";
      Wk.__super__ = ac;
      Wk.prototype = q(ac.prototype, {
        initValues: function () {
          this.leftStick = Ge.LEFT_ANALOG_STICK;
          this.rightStick = Ge.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 12:
              return 7;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 34;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 34:
              return Ge.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Ge.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Ge.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Ge.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return Ge.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return Ge.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return Ge.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return Ge.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        isAxisFlipped: function (a) {
          if (a != Ge.LEFT_ANALOG_STICK.y) {
            return a == Ge.RIGHT_ANALOG_STICK.y;
          } else {
            return true;
          }
        },
        __class__: Wk
      });
      function al(a) {
        ac.call(this, a);
      }
      h["flixel.input.gamepad.mappings.SwitchJoyconLeftMapping"] = al;
      al.__name__ = "flixel.input.gamepad.mappings.SwitchJoyconLeftMapping";
      al.__super__ = ac;
      al.prototype = q(ac.prototype, {
        initValues: function () {
          this.leftStick = ci.LEFT_ANALOG_STICK;
          this.supportsMotion = true;
          this.supportsPointer = false;
        },
        getID: function (a) {
          switch (a) {
            case 4:
              return 17;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 30;
            case 12:
              return 7;
            case 13:
              return 8;
            case 15:
              return 4;
            case 16:
              return 5;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 7:
              return 12;
            case 8:
              return 13;
            case 17:
              return 4;
            case 30:
              return 10;
            case 34:
              return ci.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return ci.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return ci.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return ci.LEFT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: al
      });
      function bl(a) {
        ac.call(this, a);
      }
      h["flixel.input.gamepad.mappings.SwitchJoyconRightMapping"] = bl;
      bl.__name__ = "flixel.input.gamepad.mappings.SwitchJoyconRightMapping";
      bl.__super__ = ac;
      bl.prototype = q(ac.prototype, {
        initValues: function () {
          this.leftStick = di.LEFT_ANALOG_STICK;
          this.supportsMotion = true;
          this.supportsPointer = false;
        },
        getID: function (a) {
          switch (a) {
            case 5:
              return 18;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 30;
            case 11:
              return 10;
            case 12:
              return 7;
            case 13:
              return 8;
            case 15:
              return 4;
            case 16:
              return 5;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 7:
              return 12;
            case 8:
              return 13;
            case 10:
              return 11;
            case 18:
              return 5;
            case 30:
              return 10;
            case 34:
              return di.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return di.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return di.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return di.LEFT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: bl
      });
      function $k(a) {
        ac.call(this, a);
      }
      h["flixel.input.gamepad.mappings.SwitchProMapping"] = $k;
      $k.__name__ = "flixel.input.gamepad.mappings.SwitchProMapping";
      $k.__super__ = ac;
      $k.prototype = q(ac.prototype, {
        initValues: function () {
          this.leftStick = nf.LEFT_ANALOG_STICK;
          this.rightStick = nf.RIGHT_ANALOG_STICK;
          this.supportsMotion = true;
          this.supportsPointer = false;
        },
        getID: function (a) {
          switch (a) {
            case 4:
              return 17;
            case 5:
              return 18;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 11:
              return 10;
            case 12:
              return 7;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            case 21:
              return 30;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return 11;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 30:
              return 21;
            case 34:
              return nf.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return nf.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return nf.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return nf.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return nf.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return nf.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return nf.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return nf.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: $k
      });
      function Yk(a) {
        ac.call(this, a);
      }
      h["flixel.input.gamepad.mappings.WiiRemoteMapping"] = Yk;
      Yk.__name__ = "flixel.input.gamepad.mappings.WiiRemoteMapping";
      Yk.__super__ = ac;
      Yk.prototype = q(ac.prototype, {
        initValues: function () {
          this.supportsMotion = true;
          this.supportsPointer = false;
        },
        getID: function (a) {
          switch (this.attachment._hx_index) {
            case 0:
              return this.getIDNunchuk(a);
            case 1:
              return this.getIDClassicController(a);
            case 2:
              return this.getIDDefault(a);
          }
        },
        getIDClassicController: function (a) {
          switch (a) {
            case 5:
              return 11;
            case 6:
              return 12;
            case 7:
              return 13;
            case 8:
              return 14;
            case 9:
              return 1;
            case 10:
              return 0;
            case 11:
              return 2;
            case 12:
              return 3;
            case 13:
              return 17;
            case 14:
              return 18;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 7;
            case 18:
              return 6;
            case 19:
              return 10;
            case 20:
              return 30;
            case 21:
              return 31;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getIDNunchuk: function (a) {
          switch (a) {
            case 5:
              return 11;
            case 6:
              return 12;
            case 7:
              return 13;
            case 8:
              return 14;
            case 9:
              return 0;
            case 10:
              return 1;
            case 11:
              return 4;
            case 12:
              return 17;
            case 13:
              return 2;
            case 14:
              return 3;
            case 15:
              return 7;
            case 16:
              return 6;
            case 17:
              return 10;
            default:
              return -1;
          }
        },
        getIDDefault: function (a) {
          switch (a) {
            case 9:
              return 2;
            case 10:
              return 3;
            case 11:
              return 0;
            case 12:
              return 1;
            case 13:
              return 7;
            case 14:
              return 6;
            case 15:
              return 10;
            case 22:
              return 11;
            case 23:
              return 12;
            case 24:
              return 13;
            case 25:
              return 14;
            default:
              return -1;
          }
        },
        getRawID: function (a) {
          switch (this.attachment._hx_index) {
            case 0:
              return this.getRawNunchuk(a);
            case 1:
              return this.getRawClassicController(a);
            case 2:
              return this.getRawDefault(a);
          }
        },
        getRawClassicController: function (a) {
          switch (a) {
            case 0:
              return 10;
            case 1:
              return 9;
            case 2:
              return 11;
            case 3:
              return 12;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 18;
            case 7:
              return 17;
            case 10:
              return 19;
            case 11:
              return 5;
            case 12:
              return 6;
            case 13:
              return 7;
            case 14:
              return 8;
            case 17:
              return 13;
            case 18:
              return 14;
            case 30:
              return 20;
            case 31:
              return 21;
            case 34:
              return Fd.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Fd.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Fd.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Fd.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return Fd.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return Fd.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return Fd.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return Fd.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        getRawNunchuk: function (a) {
          switch (a) {
            case 0:
              return 9;
            case 1:
              return 10;
            case 2:
              return 13;
            case 3:
              return 14;
            case 4:
              return 11;
            case 6:
              return 16;
            case 7:
              return 15;
            case 10:
              return 17;
            case 11:
              return 5;
            case 12:
              return 6;
            case 13:
              return 7;
            case 14:
              return 8;
            case 17:
              return 12;
            case 26:
              return 3;
            case 27:
              return 2;
            case 34:
              return Fd.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Fd.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Fd.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Fd.LEFT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        getRawDefault: function (a) {
          switch (a) {
            case 0:
              return 11;
            case 1:
              return 12;
            case 2:
              return 9;
            case 3:
              return 10;
            case 6:
              return 14;
            case 7:
              return 13;
            case 10:
              return 15;
            case 11:
              return 22;
            case 12:
              return 23;
            case 13:
              return 24;
            case 14:
              return 25;
            case 26:
              return 2;
            case 27:
              return 3;
            default:
              return -1;
          }
        },
        isAxisFlipped: function (a) {
          return a == 4;
        },
        set_attachment: function (a) {
          switch (a._hx_index) {
            case 0:
            case 1:
              var b = Fd.LEFT_ANALOG_STICK;
              break;
            case 2:
              b = Fd.REMOTE_DPAD;
          }
          this.leftStick = b;
          this.rightStick = a._hx_index == 1 ? Fd.RIGHT_ANALOG_STICK : null;
          return ac.prototype.set_attachment.call(this, a);
        },
        __class__: Yk
      });
      function rj(a) {
        ac.call(this, a);
      }
      h["flixel.input.gamepad.mappings.XInputMapping"] = rj;
      rj.__name__ = "flixel.input.gamepad.mappings.XInputMapping";
      rj.__super__ = ac;
      rj.prototype = q(ac.prototype, {
        initValues: function () {
          this.leftStick = of.LEFT_ANALOG_STICK;
          this.rightStick = of.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case -1:
              return 10;
            case 4:
              return 17;
            case 5:
              return 18;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 12:
              return 7;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return -1;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 34:
              return of.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return of.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return of.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return of.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return of.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return of.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return of.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return of.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: rj
      });
      var Gg = {};
      function dl(a, b) {
        pj.call(this, a, b);
      }
      h["flixel.input.keyboard.FlxKeyList"] = dl;
      dl.__name__ = "flixel.input.keyboard.FlxKeyList";
      dl.__super__ = pj;
      dl.prototype = q(pj.prototype, {
        __class__: dl
      });
      function Dk() {
        Pg.call(this, function (a, b) {
          return new dl(a, b);
        });
        this.preventDefaultKeys = [38, 40, 37, 39, 32, 9];
        var a = Gg.fromStringMap.h;
        var b = Object.keys(a);
        for (var c = b.length, d = 0; d < c;) {
          var e = a[b[d++]];
          if (e != -2 && e != -1) {
            var f = new oe(e);
            this._keyListArray.push(f);
            this._keyListMap.h[e] = f;
          }
        }
      }
      h["flixel.input.keyboard.FlxKeyboard"] = Dk;
      Dk.__name__ = "flixel.input.keyboard.FlxKeyboard";
      Dk.__super__ = Pg;
      Dk.prototype = q(Pg.prototype, {
        onKeyUp: function (a) {
          Pg.prototype.onKeyUp.call(this, a);
        },
        onKeyDown: function (a) {
          Pg.prototype.onKeyDown.call(this, a);
        },
        resolveKeyCode: function (a) {
          return a.keyCode;
        },
        __class__: Dk
      });
      function Pe(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (Pe.preload != null) {
          this.__fromImage(Pe.preload);
        } else {
          var f = this;
          Eb.loadFromBase64(cf.getString(Pe.resourceName), Pe.resourceType).then(function (a) {
            f.__fromImage(a);
            return Cb.withValue(f);
          }).onComplete(function (a) {
            if (Pe.preload == null) {
              Pe.preload = a.image;
            }
            if (e != null && ma.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.input.mouse._FlxMouse.GraphicCursor"] = Pe;
      Pe.__name__ = "flixel.input.mouse._FlxMouse.GraphicCursor";
      Pe.__super__ = T;
      Pe.prototype = q(T.prototype, {
        __class__: Pe
      });
      function gf(a) {
        this.justPressedTimeInTicks = -1;
        var b = 0;
        var c = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        b = fa.pool.get().set(b, c);
        b._inPool = false;
        this.justPressedPosition = b;
        oe.call(this, a);
      }
      h["flixel.input.mouse.FlxMouseButton"] = gf;
      gf.__name__ = "flixel.input.mouse.FlxMouseButton";
      gf.__interfaces__ = [B];
      gf.getByID = function (a) {
        switch (a) {
          case -3:
            return g.mouse._rightButton;
          case -2:
            return g.mouse._middleButton;
          case -1:
            return g.mouse._leftButton;
        }
      };
      gf.__super__ = oe;
      gf.prototype = q(oe.prototype, {
        update: function () {
          oe.prototype.update.call(this);
          if (this.current == 2) {
            var a = this.justPressedPosition;
            var b = g.mouse.screenX;
            var c = g.mouse.screenY;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            this.justPressedTimeInTicks = g.game.ticks;
          } else if (this.current == -1) {
            var d = g.swipes;
            var e = this.ID;
            a = this.justPressedPosition;
            var f = null;
            if (f == null) {
              c = b = 0;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              b = fa.pool.get().set(b, c);
              b._inPool = false;
              f = b;
            }
            b = a.x;
            c = a.y;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            f.set_x(b);
            f.set_y(c);
            d.push(new qj(e, f, g.mouse.getScreenPosition(), this.justPressedTimeInTicks));
          }
        },
        destroy: function () {
          this.justPressedPosition = da.put(this.justPressedPosition);
        },
        onDown: function (a) {
          if (g.mouse.enabled) {
            this.press();
          }
        },
        onUp: function (a) {
          if (g.mouse.enabled) {
            this.release();
          }
        },
        __class__: gf
      });
      function el(a, b, c, d, e, f, k, g, n) {
        this.object = a;
        this.onMouseDown = b;
        this.onMouseUp = c;
        this.onMouseOver = d;
        this.onMouseOut = e;
        this.mouseChildren = f;
        this.mouseEnabled = k;
        this.pixelPerfect = g;
        this.mouseButtons = n == null ? [-1] : n;
        if (a instanceof G) {
          this.sprite = a;
        }
      }
      h["flixel.input.mouse.FlxMouseEvent"] = el;
      el.__name__ = "flixel.input.mouse.FlxMouseEvent";
      el.__interfaces__ = [B];
      el.prototype = {
        destroy: function () {
          this.mouseButtons = this.onMouseWheel = this.onMouseMove = this.onMouseOut = this.onMouseOver = this.onMouseDoubleClick = this.onMouseClick = this.onMouseUp = this.onMouseDown = this.sprite = this.object = null;
        },
        __class__: el
      };
      function fl() {
        this.maxDoubleClickDelay = 500;
        var a = 0;
        var b = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = fa.pool.get().set(a, b);
        a._inPool = false;
        this._point = a;
        this.mouseClickedTime = -1;
        this._clickList = [];
        this._downList = [];
        this._overList = [];
        this._list = [];
        Ea.call(this);
        if (this._list != null) {
          this.clearRegistry();
        }
        this._list = [];
        this._overList = [];
        this._downList = [];
        this._clickList = [];
        g.signals.preStateSwitch.add(l(this, this.removeAll));
      }
      h["flixel.input.mouse.FlxMouseEventManager"] = fl;
      fl.__name__ = "flixel.input.mouse.FlxMouseEventManager";
      fl.__super__ = Ea;
      fl.prototype = q(Ea.prototype, {
        destroy: function () {
          this.clearRegistry();
          this._point = da.put(this._point);
          g.signals.preStateSwitch.remove(l(this, this.removeAll));
          Ea.prototype.destroy.call(this);
        },
        update: function (a) {
          Ea.prototype.update.call(this, a);
          a = [];
          for (var b = 0, c = this._list; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.object.alive && d.object.exists && d.object.visible && d.mouseEnabled && this.checkOverlap(d) && (a.push(d), !d.mouseChildren)) {
              break;
            }
          }
          b = 0;
          for (c = this._overList; b < c.length;) {
            d = c[b];
            ++b;
            if (d.onMouseOut != null && (!d.object.exists || !d.object.visible || this.get(d.object, a) == null)) {
              d.onMouseOut(d.object);
            }
          }
          for (b = 0; b < a.length;) {
            d = a[b];
            ++b;
            if (d.onMouseOver != null && d.object.exists && d.object.visible && this.get(d.object, this._overList) == null) {
              d.onMouseOver(d.object);
            }
          }
          if (g.mouse.enabled) {
            b = g.mouse;
            if (b._prevX != b.x || b._prevY != b.y) {
              for (b = 0; b < a.length;) {
                d = a[b];
                ++b;
                if (d.onMouseMove != null && d.object.exists && d.object.visible) {
                  d.onMouseMove(d.object);
                }
              }
            }
            for (b = 0; b < a.length;) {
              d = a[b];
              ++b;
              if (d.onMouseDown != null && d.object.exists && d.object.visible) {
                c = 0;
                for (var e = d.mouseButtons; c < e.length;) {
                  var f = e[c];
                  ++c;
                  if (gf.getByID(f).current == 2) {
                    d.onMouseDown(d.object);
                  }
                }
              }
            }
            if (g.mouse._leftButton.current == 2) {
              for (b = 0; b < a.length;) {
                d = a[b];
                ++b;
                if ((d.onMouseClick != null || d.onMouseDoubleClick != null) && d.object.exists && d.object.visible) {
                  this._downList.push(d);
                }
              }
            }
            for (b = 0; b < a.length;) {
              d = a[b];
              ++b;
              if (d.onMouseUp != null && d.object.exists && d.object.visible) {
                c = 0;
                e = d.mouseButtons;
                while (c < e.length) {
                  f = e[c];
                  ++c;
                  if (gf.getByID(f).current == -1) {
                    d.onMouseUp(d.object);
                  }
                }
              }
            }
            if (this._clickList.length > 0 && g.game.ticks - this.mouseClickedTime > this.maxDoubleClickDelay) {
              this._clickList = [];
            }
            if (g.mouse._leftButton.current == -1) {
              this.mouseClickedTime = g.game.ticks;
              d = this._clickList;
              if (this._clickList.length > 0) {
                this._clickList = [];
              }
              b = 0;
              c = this._downList;
              while (b < c.length) {
                e = c[b];
                ++b;
                if (e.object != null && e.object.exists && e.object.visible && this.get(e.object, a) != null) {
                  if (e.onMouseClick != null) {
                    e.onMouseClick(e.object);
                  }
                  if (e.onMouseDoubleClick != null) {
                    if (this.get(e.object, d) != null) {
                      e.onMouseDoubleClick(e.object);
                    } else {
                      this._clickList.push(e);
                    }
                  }
                }
              }
            }
            if (this._downList.length > 0) {
              b = g.mouse._leftButton;
              b = b.current != 1 && b.current != 2;
            } else {
              b = false;
            }
            if (b) {
              this._downList = [];
            }
            if (g.mouse.wheel != 0) {
              for (b = 0; b < a.length;) {
                d = a[b];
                ++b;
                if (d.onMouseWheel != null && d.object.exists && d.object.visible) {
                  d.onMouseWheel(d.object);
                }
              }
            }
            this._overList = a;
          }
        },
        removeAll: function () {
          if (this._list != null) {
            for (var a = 0, b = this._list; a < b.length;) {
              var c = b[a];
              ++a;
              c.destroy();
            }
          }
          this._list.splice(0, this._list.length);
          this._overList = [];
          this._downList = [];
          this._clickList = [];
        },
        get: function (a, b) {
          if (b == null) {
            b = this._list;
          }
          for (var c = 0; c < b.length;) {
            var d = b[c];
            ++c;
            if (d.object == a) {
              return d;
            }
          }
          return null;
        },
        clearRegistry: function () {
          this._clickList = this._downList = this._overList = null;
          this._list = da.destroyArray(this._list);
        },
        checkOverlap: function (a) {
          for (var b = 0, c = a.object.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            var e = this._point = g.mouse.getPositionInCameraView(d, this._point);
            var f = e.x > d.viewMarginX && e.x < d.width - d.viewMarginX && e.y > d.viewMarginY && e.y < d.height - d.viewMarginY;
            if (e._weak) {
              e.put();
            }
            if (f && (f = this._point = g.mouse.getWorldPosition(d, this._point), a.pixelPerfect && a.sprite != null ? a.sprite.pixelsOverlapPoint(f, 1, d) : a.object.overlapsPoint(f, true, d))) {
              return true;
            }
            f = 0;
            for (e = g.touches.list; f < e.length;) {
              var k = e[f];
              ++f;
              var r = this._point = k.getPositionInCameraView(d, this._point);
              var n = r.x > d.viewMarginX && r.x < d.width - d.viewMarginX && r.y > d.viewMarginY && r.y < d.height - d.viewMarginY;
              if (r._weak) {
                r.put();
              }
              if (n && (k = this._point = k.getWorldPosition(d, this._point), a.pixelPerfect && a.sprite != null ? a.sprite.pixelsOverlapPoint(k, 1, d) : a.object.overlapsPoint(k, true, d))) {
                return true;
              }
            }
          }
          return false;
        },
        __class__: fl
      });
      function tj(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.justPressedTimeInTicks = -1;
        var e = 0;
        var f = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = fa.pool.get().set(e, f);
        e._inPool = false;
        this.justPressedPosition = e;
        this.flashPoint = new kb();
        gd.call(this);
        this.input = new oe(c);
        this.setXY(a, b);
        this.pressure = d;
      }
      h["flixel.input.touch.FlxTouch"] = tj;
      tj.__name__ = "flixel.input.touch.FlxTouch";
      tj.__interfaces__ = [uh, B];
      tj.__super__ = gd;
      tj.prototype = q(gd.prototype, {
        destroy: function () {
          this.input = null;
          this.justPressedPosition = da.put(this.justPressedPosition);
          this.flashPoint = null;
        },
        recycle: function (a, b, c, d) {
          this.setXY(a, b);
          this.input.ID = c;
          this.input.reset();
          this.pressure = d;
        },
        update: function () {
          this.input.update();
          if (this.input.current == 2) {
            var a = this.justPressedPosition;
            var b = this.screenX;
            var c = this.screenY;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            this.justPressedTimeInTicks = g.game.ticks;
          } else if (this.input.current == -1) {
            var d = g.swipes;
            var e = this.input.ID;
            a = this.justPressedPosition;
            var f = null;
            if (f == null) {
              c = b = 0;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              b = fa.pool.get().set(b, c);
              b._inPool = false;
              f = b;
            }
            b = a.x;
            c = a.y;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            f.set_x(b);
            f.set_y(c);
            d.push(new qj(e, f, this.getScreenPosition(), this.justPressedTimeInTicks));
          }
        },
        setXY: function (a, b) {
          this.flashPoint.setTo(a, b);
          this.flashPoint = g.game.globalToLocal(this.flashPoint);
          this._globalScreenX = this.flashPoint.x / g.scaleMode.scale.x | 0;
          this._globalScreenY = this.flashPoint.y / g.scaleMode.scale.y | 0;
          this.updatePositions();
        },
        get_justReleased: function () {
          return this.input.current == -1;
        },
        get_pressed: function () {
          var a = this.input;
          if (a.current != 1) {
            return a.current == 2;
          } else {
            return true;
          }
        },
        get_justPressed: function () {
          return this.input.current == 2;
        },
        __class__: tj,
        __properties__: {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased"
        }
      });
      function Uh() {
        this.list = [];
        this._inactiveTouches = [];
        this._touchesCache = new rc();
        Uh.maxTouchPoints = ei.maxTouchPoints;
        ei.inputMode = 2;
        na.get_current().stage.addEventListener("touchBegin", l(this, this.handleTouchBegin));
        na.get_current().stage.addEventListener("touchEnd", l(this, this.handleTouchEnd));
        na.get_current().stage.addEventListener("touchMove", l(this, this.handleTouchMove));
      }
      h["flixel.input.touch.FlxTouchManager"] = Uh;
      Uh.__name__ = "flixel.input.touch.FlxTouchManager";
      Uh.__interfaces__ = [Og];
      Uh.prototype = {
        destroy: function () {
          for (var a = 0, b = this.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.destroy();
          }
          this.list = null;
          a = 0;
          for (b = this._inactiveTouches; a < b.length;) {
            c = b[a];
            ++a;
            c.destroy();
          }
          this._touchesCache = this._inactiveTouches = null;
        },
        reset: function () {
          for (var a = this._touchesCache.keys(); a.hasNext();) {
            var b = a.next();
            this._touchesCache.remove(b);
          }
          a = 0;
          for (b = this.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.input.reset();
            this._inactiveTouches.push(c);
          }
          this.list.splice(0, this.list.length);
        },
        handleTouchBegin: function (a) {
          var b = this._touchesCache.h[a.touchPointID];
          if (b != null) {
            b.setXY(a.stageX | 0, a.stageY | 0);
            b.pressure = a.pressure;
          } else {
            b = this.recycle(a.stageX | 0, a.stageY | 0, a.touchPointID, a.pressure);
          }
          b.input.press();
        },
        handleTouchEnd: function (a) {
          a = this._touchesCache.h[a.touchPointID];
          if (a != null) {
            a.input.release();
          }
        },
        handleTouchMove: function (a) {
          var b = this._touchesCache.h[a.touchPointID];
          if (b != null) {
            b.setXY(a.stageX | 0, a.stageY | 0);
            b.pressure = a.pressure;
          }
        },
        add: function (a) {
          this.list.push(a);
          return this._touchesCache.h[a.input.ID] = a;
        },
        recycle: function (a, b, c, d) {
          if (this._inactiveTouches.length > 0) {
            var e = this._inactiveTouches.pop();
            e.recycle(a, b, c, d);
            return this.add(e);
          }
          return this.add(new tj(a, b, c, d));
        },
        update: function () {
          for (var a = this.list.length - 1, b; a >= 0;) {
            b = this.list[a];
            var c = b.input;
            if (c.current != 0 && c.current != -1 || b.input.current == -1) {
              b.update();
            } else {
              b.input.reset();
              this._touchesCache.remove(b.input.ID);
              this.list.splice(a, 1);
              this._inactiveTouches.push(b);
            }
            --a;
          }
        },
        onFocus: function () {},
        onFocusLost: function () {
          this.reset();
        },
        __class__: Uh
      };
      function $b() {}
      h["flixel.math.FlxMath"] = $b;
      $b.__name__ = "flixel.math.FlxMath";
      $b.roundDecimal = function (a, b) {
        var c = 1;
        for (var d = 0; d < b;) {
          d++;
          c *= 10;
        }
        return Math.round(a * c) / c;
      };
      $b.pointInFlxRect = function (a, b, c) {
        if (a >= c.x && a <= c.x + c.width && b >= c.y) {
          return b <= c.y + c.height;
        } else {
          return false;
        }
      };
      $b.maxAdd = function (a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        a += b;
        if (a > c) {
          a = c;
        } else if (a <= d) {
          a = d;
        }
        return a;
      };
      $b.wrap = function (a, b, c) {
        c = c - b + 1;
        if (a < b) {
          a += c * ((b - a) / c + 1 | 0);
        }
        return b + (a - b) % c;
      };
      $b.remapToRange = function (a, b, c, d, e) {
        return d + (e - d) / (c - b) * (a - b);
      };
      $b.getDecimals = function (a) {
        a = (a == null ? "null" : "" + a).split(".");
        var b = 0;
        if (a.length > 1) {
          b = a[1].length;
        }
        return b;
      };
      var zk = {
        __properties__: {
          get_radians: "get_radians"
        },
        distanceTo: function (a, b) {
          var c = a.x - b.x;
          a = a.y - b.y;
          if (b._weak) {
            b.put();
          }
          return Math.sqrt(c * c + a * a);
        },
        get_radians: function (a) {
          var b = a.x;
          a = a.y;
          var c = false;
          if (c == null) {
            c = false;
          }
          if (c) {
            return 180 / Math.PI * Math.atan2(a, b);
          } else {
            return Math.atan2(a, b);
          }
        }
      };
      function oh(a, b, c) {
        fa.call(this);
        this._setXCallback = a;
        this._setXYCallback = this._setYCallback = c;
        if (this._setXCallback != null) {
          if (this._setYCallback == null) {
            this._setYCallback = a;
          }
          if (this._setXYCallback == null) {
            this._setXYCallback = a;
          }
        }
      }
      h["flixel.math.FlxCallbackPoint"] = oh;
      oh.__name__ = "flixel.math.FlxCallbackPoint";
      oh.__super__ = fa;
      oh.prototype = q(fa.prototype, {
        set: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          fa.prototype.set.call(this, a, b);
          if (this._setXYCallback != null) {
            this._setXYCallback(this);
          }
          return this;
        },
        set_x: function (a) {
          fa.prototype.set_x.call(this, a);
          if (this._setXCallback != null) {
            this._setXCallback(this);
          }
          return a;
        },
        set_y: function (a) {
          fa.prototype.set_y.call(this, a);
          if (this._setYCallback != null) {
            this._setYCallback(this);
          }
          return a;
        },
        destroy: function () {
          fa.prototype.destroy.call(this);
          this._setXYCallback = this._setYCallback = this._setXCallback = null;
        },
        put: function () {},
        __class__: oh
      });
      function yk() {}
      h["flixel.math.FlxVelocity"] = yk;
      yk.__name__ = "flixel.math.FlxVelocity";
      yk.computeVelocity = function (a, b, c, d, e) {
        if (b != 0) {
          a += b * e;
        } else if (c != 0) {
          b = c * e;
          a = a - b > 0 ? a - b : a + b < 0 ? a + b : 0;
        }
        if (a != 0 && d != 0) {
          if (a > d) {
            a = d;
          } else if (a < -d) {
            a = -d;
          }
        }
        return a;
      };
      var gl = x["flixel.path.CenterMode"] = {
        __ename__: "flixel.path.CenterMode",
        __constructs__: null,
        TOP_LEFT: {
          _hx_name: "TOP_LEFT",
          _hx_index: 0,
          __enum__: "flixel.path.CenterMode",
          toString: p
        },
        CENTER: {
          _hx_name: "CENTER",
          _hx_index: 1,
          __enum__: "flixel.path.CenterMode",
          toString: p
        },
        ORIGIN: {
          _hx_name: "ORIGIN",
          _hx_index: 2,
          __enum__: "flixel.path.CenterMode",
          toString: p
        },
        CUSTOM: (u = function (a) {
          return {
            _hx_index: 3,
            offset: a,
            __enum__: "flixel.path.CenterMode",
            toString: p
          };
        }, u._hx_name = "CUSTOM", u.__params__ = ["offset"], u)
      };
      gl.__constructs__ = [gl.TOP_LEFT, gl.CENTER, gl.ORIGIN, gl.CUSTOM];
      function be(a) {
        this._firstUpdate = false;
        this._wasObjectImmovable = null;
        this._inc = 1;
        this.axes = 17;
        this.finished = false;
        this.nodeIndex = 0;
        this.active = false;
        this.angleOffset = 0;
        this.autoRotate = false;
        this.centerMode = gl.CENTER;
        this.angle = 0;
        this.immovable = false;
        this.speed = 0;
        this._nodes = a != null ? a.slice() : [];
      }
      h["flixel.path.FlxPath"] = be;
      be.__name__ = "flixel.path.FlxPath";
      be.__interfaces__ = [B];
      be.prototype = {
        computeCenter: function (a) {
          a.set_x(this.object.x);
          a.set_y(this.object.y);
          var b = this.centerMode;
          switch (b._hx_index) {
            case 0:
              return a;
            case 1:
              b = this.object.get_width() * 0.5;
              var c = this.object.get_height() * 0.5;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              a.set_x(a.x + b);
              a.set_y(a.y + c);
              return a;
            case 2:
              if (this.object instanceof G) {
                b = ta.__cast(this.object, G).origin.x;
                c = ta.__cast(this.object, G).origin.y;
                if (c == null) {
                  c = 0;
                }
                if (b == null) {
                  b = 0;
                }
                a.set_x(a.x + b);
                a.set_y(a.y + c);
              }
              return a;
            case 3:
              var d = b.offset;
              b = d.x;
              c = d.y;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              a.set_x(a.x + b);
              a.set_y(a.y + c);
              if (d._weak) {
                d.put();
              }
              return a;
          }
        },
        update: function (a) {
          if (this.object != null) {
            if (this._firstUpdate) {
              if (this.immovable) {
                this._wasObjectImmovable = this.object.immovable;
                this.object.set_immovable(true);
              }
              this._firstUpdate = false;
            }
            be._point = this.computeCenter(be._point);
            var b = this._nodes[this.nodeIndex];
            var c = b.x - be._point.x;
            var d = b.y - be._point.y;
            var e = this.axes == 1;
            var f = this.axes == 16;
            if (e) {
              if ((c > 0 ? c : -c) < this.speed * a) {
                b = this.advancePath();
              }
            } else if (f) {
              if ((d > 0 ? d : -d) < this.speed * a) {
                b = this.advancePath();
              }
            } else if (Math.sqrt(c * c + d * d) < this.speed * a) {
              b = this.advancePath();
            }
            if (this.object != null && this.speed != 0) {
              be._point = this.computeCenter(be._point);
              a = be._point;
              a = Math.abs(a.x - b.x) <= 1e-7 && Math.abs(a.y - b.y) <= 1e-7;
              if (b._weak) {
                b.put();
              }
              if (a) {
                b = this.object.velocity;
                b.set_x(0);
                b.set_y(0);
              } else {
                this.calculateVelocity(b, e, f);
              }
              if (this.autoRotate) {
                this.object.angularVelocity = 0;
                this.object.angularAcceleration = 0;
                this.object.set_angle(this.angle + this.angleOffset);
              }
              if (this.finished) {
                this.cancel();
              }
            }
          }
        },
        calculateVelocity: function (a, b, c) {
          if (b || be._point.y == a.y) {
            this.object.velocity.set_x(be._point.x < a.x ? this.speed : -this.speed);
            this.angle = this.object.velocity.x < 0 ? 180 : 0;
            if (!b) {
              this.object.velocity.set_y(0);
            }
          } else if (c || be._point.x == a.x) {
            this.object.velocity.set_y(be._point.y < a.y ? this.speed : -this.speed);
            this.angle = this.object.velocity.y < 0 ? -90 : 90;
            if (!c) {
              this.object.velocity.set_x(0);
            }
          } else {
            b = this.object.velocity;
            c = a.x;
            var d = a.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
            if (a._weak) {
              a.put();
            }
            a = be._point;
            c = a.x;
            d = a.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(b.x - c);
            b.set_y(b.y - d);
            if (a._weak) {
              a.put();
            }
            a = this.speed;
            if (!(Math.abs(b.x) < 1e-7) || !(Math.abs(b.y) < 1e-7)) {
              c = zk.get_radians(b);
              b.set_x(a * Math.cos(c));
              b.set_y(a * Math.sin(c));
            }
            this.angle = zk.get_radians(b) * (180 / Math.PI);
          }
        },
        advancePath: function (a) {
          if (a == null) {
            a = true;
          }
          if (a && (a = this._nodes[this.nodeIndex], a != null)) {
            var b = this.axes;
            if (b == 1 || b == 17) {
              this.object.set_x(a.x);
              b = this.centerMode;
              switch (b._hx_index) {
                case 1:
                  b = this.object;
                  b.set_x(b.x - this.object.get_width() * 0.5);
                  break;
                case 2:
                  if (this.object instanceof G) {
                    b = this.object;
                    b.set_x(b.x - this.object.origin.x);
                  }
                  break;
                case 3:
                  var c = b.offset;
                  b = this.object;
                  b.set_x(b.x - c.x);
              }
            }
            b = this.axes;
            if (b == 16 || b == 17) {
              this.object.set_y(a.y);
              b = this.centerMode;
              switch (b._hx_index) {
                case 1:
                  b = this.object;
                  b.set_y(b.y - this.object.get_height() * 0.5);
                  break;
                case 2:
                  if (this.object instanceof G) {
                    b = this.object;
                    b.set_y(b.y - this.object.origin.y);
                  }
                  break;
                case 3:
                  c = b.offset;
                  b = this.object;
                  b.set_y(b.y - c.y);
              }
            }
          }
          a = false;
          this.nodeIndex += this._inc;
          if (this._mode == 1) {
            if (this.nodeIndex < 0) {
              this.nodeIndex = 0;
              a = true;
              this.onEnd();
            }
          } else if (this._mode == 16) {
            if (this.nodeIndex >= this._nodes.length) {
              a = true;
              this.nodeIndex = 0;
            }
          } else if (this._mode == 256) {
            if (this.nodeIndex < 0) {
              this.nodeIndex = this._nodes.length - 1;
              a = true;
              if (this.nodeIndex < 0) {
                this.nodeIndex = 0;
              }
            }
          } else if (this._mode == 4096) {
            if (this._inc > 0) {
              if (this.nodeIndex >= this._nodes.length) {
                this.nodeIndex = this._nodes.length - 2;
                a = true;
                if (this.nodeIndex < 0) {
                  this.nodeIndex = 0;
                }
                this._inc = -this._inc;
              }
            } else if (this.nodeIndex < 0) {
              this.nodeIndex = 1;
              a = true;
              if (this.nodeIndex >= this._nodes.length) {
                this.nodeIndex = this._nodes.length - 1;
              }
              if (this.nodeIndex < 0) {
                this.nodeIndex = 0;
              }
              this._inc = -this._inc;
            }
          } else if (this.nodeIndex >= this._nodes.length) {
            this.nodeIndex = this._nodes.length - 1;
            a = true;
            this.onEnd();
          }
          if (a && this.onComplete != null) {
            this.onComplete(this);
          }
          return this._nodes[this.nodeIndex];
        },
        cancel: function () {
          this.onEnd();
          if (this.object != null) {
            var a = this.object.velocity;
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
          }
          return this;
        },
        onEnd: function () {
          this.finished = true;
          this.active = false;
          if (this._wasObjectImmovable != null) {
            this.object.set_immovable(this._wasObjectImmovable);
          }
          this._wasObjectImmovable = null;
        },
        destroy: function () {
          da.putArray(this._nodes);
          this.onComplete = this.object = this._nodes = null;
        },
        __class__: be
      };
      function ce() {
        this._alreadyPaused = false;
        this._pitch = this._volumeAdjust = 1;
        this.loopTime = this._time = this._length = 0;
        Ea.call(this);
        this.reset();
      }
      h["flixel.sound.FlxSound"] = ce;
      ce.__name__ = "flixel.sound.FlxSound";
      ce.__super__ = Ea;
      ce.prototype = q(Ea.prototype, {
        reset: function () {
          this.destroy();
          this._time = this.y = this.x = 0;
          this._paused = false;
          this._volumeAdjust = this._volume = 1;
          this.looped = false;
          this.endTime = this.loopTime = 0;
          this._target = null;
          this._radius = 0;
          this._proximityPan = false;
          this.set_visible(false);
          this.amplitudeRight = this.amplitudeLeft = this.amplitude = 0;
          this.autoDestroy = false;
          if (this._transform == null) {
            this._transform = new qg();
          }
          this._transform.pan = 0;
        },
        destroy: function () {
          if (this.group != null) {
            this.group.remove(this);
          }
          this._transform = null;
          this.set_exists(false);
          this.set_active(false);
          this.artist = this.name = this._target = null;
          if (this._channel != null) {
            this._channel.removeEventListener("soundComplete", l(this, this.stopped));
            this._channel.stop();
            this._channel = null;
          }
          if (this._sound != null) {
            this._sound.removeEventListener("id3", l(this, this.gotID3));
            this._sound = null;
          }
          this.onComplete = null;
          Ea.prototype.destroy.call(this);
        },
        update: function (a) {
          if (this._channel != null) {
            this._time = this._channel.get_position();
            var b = 1;
            if (this._target != null) {
              a = this._target.getPosition();
              b = this.x;
              var c = this.y;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              b = fa.pool.get().set(b, c);
              b._inPool = false;
              b._weak = true;
              b = zk.distanceTo(a, b) / this._radius;
              a.put();
              a = b < 0 ? 0 : b;
              b = 1 - (a > 1 ? 1 : a);
              if (this._proximityPan) {
                a = (this.x - this._target.x) / this._radius;
                a = a < -1 ? -1 : a;
                this._transform.pan = a > 1 ? 1 : a;
              }
            }
            this._volumeAdjust = b;
            this.updateTransform();
            if (this._transform.volume > 0) {
              this.amplitudeLeft = this._channel.leftPeak / this._transform.volume;
              this.amplitudeRight = this._channel.rightPeak / this._transform.volume;
              this.amplitude = (this.amplitudeLeft + this.amplitudeRight) * 0.5;
            } else {
              this.amplitude = this.amplitudeRight = this.amplitudeLeft = 0;
            }
            if (this.endTime != null && this._time >= this.endTime) {
              this.stopped();
            }
          }
        },
        kill: function () {
          Ea.prototype.kill.call(this);
          this.cleanup(false);
        },
        loadEmbedded: function (a, b, c, d) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return this;
          }
          this.cleanup(true);
          if (a instanceof rg) {
            this._sound = a;
          } else if (ta.__instanceof(a, Xi)) {
            this._sound = Db.createInstance(a, []);
          } else if (typeof a == "string") {
            if (W.exists(a, "SOUND") || W.exists(a, "MUSIC")) {
              this._sound = W.getSound(a);
            } else {
              g.log.advanced("Could not find a Sound asset with an ID of '" + a + "'.", Ba.ERROR, true);
            }
          }
          return this.init(b, c, d);
        },
        loadStream: function (a, b, c, d, e) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          var f = this;
          this.cleanup(true);
          this._sound = new rg();
          this._sound.addEventListener("id3", l(this, this.gotID3));
          var k = null;
          k = function (a) {
            a.target.removeEventListener(a.type, k);
            if (pf.__eq(f._sound, a.target)) {
              f._length = f._sound.get_length();
              if (e != null) {
                e();
              }
            }
          };
          this._sound.addEventListener("complete", k, false, 0, true);
          this._sound.load(new Ui(a));
          return this.init(b, c, d);
        },
        init: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            a = false;
          }
          this.looped = a;
          this.autoDestroy = b;
          this.updateTransform();
          this.set_exists(true);
          this.onComplete = c;
          this.set_pitch(1);
          this.endTime = this._length = this._sound == null ? 0 : this._sound.get_length();
          return this;
        },
        play: function (a, b, c) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = false;
          }
          if (!this.exists) {
            return this;
          }
          if (a) {
            this.cleanup(false, true);
          } else if (this._channel != null) {
            return this;
          }
          if (this._paused) {
            this.resume();
          } else {
            this.startSound(b);
          }
          this.endTime = c;
          return this;
        },
        resume: function () {
          if (this._paused) {
            this.startSound(this._time);
          }
          return this;
        },
        pause: function () {
          if (this._channel == null) {
            return this;
          }
          this._time = this._channel.get_position();
          this._paused = true;
          this.cleanup(false, false);
          return this;
        },
        volumeTween: function (a) {
          this.set_volume(a);
        },
        updateTransform: function () {
          this._transform.volume = (g.sound.muted ? 0 : 1) * g.sound.volume * (this.group != null ? this.group.volume : 1) * this._volume * this._volumeAdjust;
          if (this._channel != null) {
            this._channel.set_soundTransform(this._transform);
          }
        },
        startSound: function (a) {
          if (this._sound != null) {
            this._time = a;
            this._paused = false;
            this._channel = this._sound.play(this._time, 0, this._transform);
            if (this._channel != null) {
              this.set_pitch(this._pitch);
              this._channel.addEventListener("soundComplete", l(this, this.stopped));
              this.set_active(true);
            } else {
              this.set_exists(false);
              this.set_active(false);
            }
          }
        },
        stopped: function (a) {
          if (this.onComplete != null) {
            this.onComplete();
          }
          if (this.looped) {
            this.cleanup(false);
            this.play(false, this.loopTime, this.endTime);
          } else {
            this.cleanup(this.autoDestroy);
          }
        },
        cleanup: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a) {
            this.reset();
          } else {
            if (this._channel != null) {
              this._channel.removeEventListener("soundComplete", l(this, this.stopped));
              this._channel.stop();
              this._channel = null;
            }
            this.set_active(false);
            if (b) {
              this._time = 0;
              this._paused = false;
            }
          }
        },
        gotID3: function (a) {
          this.name = this._sound.get_id3().songName;
          this.artist = this._sound.get_id3().artist;
          this._sound.removeEventListener("id3", l(this, this.gotID3));
        },
        onFocus: function () {
          if (!this._alreadyPaused) {
            this.resume();
          }
        },
        onFocusLost: function () {
          this._alreadyPaused = this._paused;
          this.pause();
        },
        set_volume: function (a) {
          var b = a < 0 ? 0 : a;
          this._volume = b > 1 ? 1 : b;
          this.updateTransform();
          return a;
        },
        set_pitch: function (a) {
          if (this._channel != null && this._channel.__audioSource != null) {
            this._channel.__audioSource.set_pitch(a);
          }
          return this._pitch = a;
        },
        set_time: function (a) {
          if (this._channel != null) {
            this.cleanup(false, true);
            this.startSound(a);
          }
          return this._time = a;
        },
        __class__: ce,
        __properties__: q(Ea.prototype.__properties__, {
          set_time: "set_time",
          set_pitch: "set_pitch",
          set_volume: "set_volume"
        })
      });
      function hl(a) {
        if (a == null) {
          a = 1;
        }
        this.sounds = [];
        this.set_volume(a);
      }
      h["flixel.sound.FlxSoundGroup"] = hl;
      hl.__name__ = "flixel.sound.FlxSoundGroup";
      hl.prototype = {
        add: function (a) {
          if (this.sounds.indexOf(a) == -1) {
            if (a.group != null) {
              M.remove(a.group.sounds, a);
            }
            this.sounds.push(a);
            a.group = this;
            a.updateTransform();
            return true;
          } else {
            return false;
          }
        },
        remove: function (a) {
          if (this.sounds.indexOf(a) != -1) {
            a.group = null;
            M.remove(this.sounds, a);
            a.updateTransform();
            return true;
          } else {
            return false;
          }
        },
        set_volume: function (a) {
          this.volume = a;
          for (var b = 0, c = this.sounds; b < c.length;) {
            var d = c[b];
            ++b;
            d.updateTransform();
          }
          return a;
        },
        __class__: hl,
        __properties__: {
          set_volume: "set_volume"
        }
      };
      function Df(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (Df.preload != null) {
          this.__fromImage(Df.preload);
        } else {
          var f = this;
          Eb.loadFromBase64(cf.getString(Df.resourceName), Df.resourceType).then(function (a) {
            f.__fromImage(a);
            return Cb.withValue(f);
          }).onComplete(function (a) {
            if (Df.preload == null) {
              Df.preload = a.image;
            }
            if (e != null && ma.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.system.GraphicLogo"] = Df;
      Df.__name__ = "flixel.system.GraphicLogo";
      Df.__super__ = T;
      Df.prototype = q(T.prototype, {
        __class__: Df
      });
      function Ef(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (Ef.preload != null) {
          this.__fromImage(Ef.preload);
        } else {
          var f = this;
          Eb.loadFromBase64(cf.getString(Ef.resourceName), Ef.resourceType).then(function (a) {
            f.__fromImage(a);
            return Cb.withValue(f);
          }).onComplete(function (a) {
            if (Ef.preload == null) {
              Ef.preload = a.image;
            }
            if (e != null && ma.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.system.GraphicVirtualInput"] = Ef;
      Ef.__name__ = "flixel.system.GraphicVirtualInput";
      Ef.__super__ = T;
      Ef.prototype = q(T.prototype, {
        __class__: Ef
      });
      function bc(a) {
        this.length = a.byteLength;
        this.b = new Uint8Array(a);
        this.b.bufferValue = a;
        a.hxBytes = this;
        a.bytes = this.b;
      }
      h["haxe.io.Bytes"] = bc;
      bc.__name__ = "haxe.io.Bytes";
      bc.ofString = function (a, b) {
        b = [];
        for (var c = 0; c < a.length;) {
          var d = a.charCodeAt(c++);
          if (d >= 55296 && d <= 56319) {
            d = d - 55232 << 10 | a.charCodeAt(c++) & 1023;
          }
          if (d <= 127) {
            b.push(d);
          } else {
            if (d <= 2047) {
              b.push(d >> 6 | 192);
            } else {
              if (d <= 65535) {
                b.push(d >> 12 | 224);
              } else {
                b.push(d >> 18 | 240);
                b.push(d >> 12 & 63 | 128);
              }
              b.push(d >> 6 & 63 | 128);
            }
            b.push(d & 63 | 128);
          }
        }
        return new bc(new Uint8Array(b).buffer);
      };
      bc.ofData = function (a) {
        var b = a.hxBytes;
        return b ?? new bc(a);
      };
      bc.prototype = {
        blit: function (a, b, c, d) {
          if (a < 0 || c < 0 || d < 0 || a + d > this.length || c + d > b.length) {
            throw K.thrown(Ff.OutsideBounds);
          }
          if (c == 0 && d == b.b.byteLength) {
            this.b.set(b.b, a);
          } else {
            this.b.set(b.b.subarray(c, c + d), a);
          }
        },
        getString: function (a, b, c) {
          if (a < 0 || b < 0 || a + b > this.length) {
            throw K.thrown(Ff.OutsideBounds);
          }
          c = "";
          var d = this.b;
          var e = Xo.fromCharCode;
          var f = a;
          for (a += b; f < a;) {
            b = d[f++];
            if (b < 128) {
              if (b == 0) {
                break;
              }
              c += e(b);
            } else if (b < 224) {
              c += e((b & 63) << 6 | d[f++] & 127);
            } else if (b < 240) {
              var k = d[f++];
              c += e((b & 31) << 12 | (k & 127) << 6 | d[f++] & 127);
            } else {
              k = d[f++];
              var g = d[f++];
              b = (b & 15) << 18 | (k & 127) << 12 | (g & 127) << 6 | d[f++] & 127;
              c += e((b >> 10) + 55232);
              c += e(b & 1023 | 56320);
            }
          }
          return c;
        },
        toString: function () {
          return this.getString(0, this.length);
        },
        __class__: bc
      };
      function $o() {}
      h["openfl.utils.IDataOutput"] = $o;
      $o.__name__ = "openfl.utils.IDataOutput";
      $o.__isInterface__ = true;
      function ap() {}
      h["openfl.utils.IDataInput"] = ap;
      ap.__name__ = "openfl.utils.IDataInput";
      ap.__isInterface__ = true;
      function wd(a) {
        if (a == null) {
          a = 0;
        }
        var b = new bc(new ArrayBuffer(a));
        bc.call(this, b.b.buffer);
        this.__allocated = a;
        if (wd.__defaultEndian == null) {
          if (bd.get_endianness() == il.LITTLE_ENDIAN) {
            wd.__defaultEndian = 1;
          } else {
            wd.__defaultEndian = 0;
          }
        }
        this.__endian = wd.__defaultEndian;
        this.objectEncoding = wd.defaultObjectEncoding;
        this.position = 0;
      }
      h["openfl.utils.ByteArrayData"] = wd;
      wd.__name__ = "openfl.utils.ByteArrayData";
      wd.__interfaces__ = [$o, ap];
      wd.fromBytes = function (a) {
        var b = new wd();
        b.__fromBytes(a);
        return b;
      };
      wd.__super__ = bc;
      wd.prototype = q(bc.prototype, {
        readByte: function () {
          var a = this.readUnsignedByte();
          if ((a & 128) != 0) {
            return a - 256;
          } else {
            return a;
          }
        },
        readInt: function () {
          var a = this.readUnsignedByte();
          var b = this.readUnsignedByte();
          var c = this.readUnsignedByte();
          var d = this.readUnsignedByte();
          if (this.__endian == 1) {
            return d << 24 | c << 16 | b << 8 | a;
          } else {
            return a << 24 | b << 16 | c << 8 | d;
          }
        },
        readUnsignedByte: function () {
          if (this.position < this.length) {
            return this.b[this.position++];
          }
          throw new uj();
        },
        readUnsignedInt: function () {
          var a = this.readUnsignedByte();
          var b = this.readUnsignedByte();
          var c = this.readUnsignedByte();
          var d = this.readUnsignedByte();
          if (this.__endian == 1) {
            return d << 24 | c << 16 | b << 8 | a;
          } else {
            return a << 24 | b << 16 | c << 8 | d;
          }
        },
        readUnsignedShort: function () {
          var a = this.readUnsignedByte();
          var b = this.readUnsignedByte();
          if (this.__endian == 1) {
            return (b << 8) + a;
          } else {
            return a << 8 | b;
          }
        },
        readUTF: function () {
          var a = this.readUnsignedShort();
          return this.readUTFBytes(a);
        },
        readUTFBytes: function (a) {
          if (this.position + a > this.length) {
            throw new uj();
          }
          this.position += a;
          return this.getString(this.position - a, a);
        },
        writeByte: function (a) {
          this.__resize(this.position + 1);
          this.b[this.position++] = a & 255;
        },
        writeBytes: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (Re.get_length(a) != 0) {
            if (c == 0) {
              c = Re.get_length(a) - b;
            }
            this.__resize(this.position + c);
            this.blit(this.position, a, b, c);
            this.position += c;
          }
        },
        writeInt: function (a) {
          this.__resize(this.position + 4);
          if (this.__endian == 1) {
            this.b[this.position++] = a & 255;
            this.b[this.position++] = a >> 8 & 255;
            this.b[this.position++] = a >> 16 & 255;
            this.b[this.position++] = a >> 24 & 255;
          } else {
            this.b[this.position++] = a >> 24 & 255;
            this.b[this.position++] = a >> 16 & 255;
            this.b[this.position++] = a >> 8 & 255;
            this.b[this.position++] = a & 255;
          }
        },
        writeShort: function (a) {
          this.__resize(this.position + 2);
          if (this.__endian == 1) {
            this.b[this.position++] = a & 255;
            this.b[this.position++] = a >> 8 & 255;
          } else {
            this.b[this.position++] = a >> 8 & 255;
            this.b[this.position++] = a & 255;
          }
        },
        writeUnsignedInt: function (a) {
          this.writeInt(a);
        },
        writeUTFBytes: function (a) {
          a = bc.ofString(a);
          this.writeBytes(Re.fromBytes(a));
        },
        __fromBytes: function (a) {
          this.b = a.b;
          this.__allocated = a.length;
          this.data = a.data;
          this.length = a.length;
        },
        __resize: function (a) {
          if (a > this.__allocated) {
            var b = new bc(new ArrayBuffer((a + 1) * 3 >> 1));
            if (this.__allocated > 0) {
              var c = this.length;
              this.length = this.__allocated;
              b.blit(0, this, 0, this.__allocated);
              this.length = c;
            }
            this.b = b.b;
            this.__allocated = b.length;
            this.data = b.data;
          }
          if (this.length < a) {
            this.length = a;
          }
        },
        __class__: wd
      });
      var Lp = {
        getXml: function (a) {
          if (typeof a == "string") {
            if (W.exists(a)) {
              return X.parse(W.getText(a));
            } else {
              return X.parse(a);
            }
          } else {
            return ta.__cast(a, X);
          }
        }
      };
      var Kp = {
        getData: function (a) {
          if (typeof a == "string") {
            if (W.exists(a)) {
              return JSON.parse(W.getText(a));
            } else {
              return JSON.parse(a);
            }
          } else {
            return a;
          }
        }
      };
      function Qd() {}
      h["flixel.system.FlxAssets"] = Qd;
      Qd.__name__ = "flixel.system.FlxAssets";
      Qd.drawLogo = function (a) {
        a.beginFill(47394);
        a.moveTo(50, 13);
        a.lineTo(51, 13);
        a.lineTo(87, 50);
        a.lineTo(87, 51);
        a.lineTo(51, 87);
        a.lineTo(50, 87);
        a.lineTo(13, 51);
        a.lineTo(13, 50);
        a.lineTo(50, 13);
        a.endFill();
        a.beginFill(16761138);
        a.moveTo(0, 0);
        a.lineTo(25, 0);
        a.lineTo(50, 13);
        a.lineTo(13, 50);
        a.lineTo(0, 25);
        a.lineTo(0, 0);
        a.endFill();
        a.beginFill(16066382);
        a.moveTo(100, 0);
        a.lineTo(75, 0);
        a.lineTo(51, 13);
        a.lineTo(87, 50);
        a.lineTo(100, 25);
        a.lineTo(100, 0);
        a.endFill();
        a.beginFill(3555839);
        a.moveTo(0, 100);
        a.lineTo(25, 100);
        a.lineTo(50, 87);
        a.lineTo(13, 51);
        a.lineTo(0, 75);
        a.lineTo(0, 100);
        a.endFill();
        a.beginFill(314875);
        a.moveTo(100, 100);
        a.lineTo(75, 100);
        a.lineTo(51, 87);
        a.lineTo(87, 51);
        a.lineTo(100, 75);
        a.lineTo(100, 100);
        a.endFill();
      };
      Qd.getSound = function (a) {
        if (!w.endsWith(a, ".mp3") && !w.endsWith(a, ".ogg") && !w.endsWith(a, ".wav")) {
          a += "." + Qd.defaultSoundExtension;
        }
        return W.getSound(a);
      };
      function tk() {
        G.call(this);
        this.makeGraphic(1, 1, -1, true, g.bitmap.getUniqueKey("bg_graphic_"));
        var a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      h["flixel.system.FlxBGSprite"] = tk;
      tk.__name__ = "flixel.system.FlxBGSprite";
      tk.__super__ = G;
      tk.prototype = q(G.prototype, {
        draw: function () {
          for (var a = 0, b = this.getCamerasLegacy(); a < b.length;) {
            var c = b[a];
            ++a;
            if (c.visible && c.exists) {
              this._matrix.identity();
              this._matrix.scale(c.width - c.viewMarginX * 2, c.height - c.viewMarginY * 2);
              c.drawPixels(this.frame, null, this._matrix, this.colorTransform);
            }
          }
        },
        __class__: tk
      });
      function Rg() {
        $a.call(this);
        this.addEventListener("addedToStage", l(this, this.onAddedToStage));
      }
      h["flixel.system._FlxBasePreloader.DefaultPreloader"] = Rg;
      Rg.__name__ = "flixel.system._FlxBasePreloader.DefaultPreloader";
      Rg.__super__ = $a;
      Rg.prototype = q($a.prototype, {
        onAddedToStage: function (a) {
          this.removeEventListener("addedToStage", l(this, this.onAddedToStage));
          this.onInit();
          this.onUpdate(this.get_loaderInfo().bytesLoaded, this.get_loaderInfo().bytesTotal);
          this.addEventListener("progress", l(this, this.onProgress));
          this.addEventListener("complete", l(this, this.onComplete));
        },
        onComplete: function (a) {
          a.preventDefault();
          this.removeEventListener("progress", l(this, this.onProgress));
          this.removeEventListener("complete", l(this, this.onComplete));
          this.onLoaded();
        },
        onProgress: function (a) {
          this.onUpdate(a.bytesLoaded | 0, a.bytesTotal | 0);
        },
        onInit: function () {},
        onLoaded: function () {
          this.dispatchEvent(new Ga("unload"));
        },
        onUpdate: function (a, b) {},
        __class__: Rg
      });
      function Sg(a, b) {
        if (a == null) {
          a = 0;
        }
        this._loaded = this._urlChecked = this._destroyed = false;
        this._percent = 0;
        this.siteLockBodyText = "It appears the website you are using is hosting an unauthorized copy of this game. Storage or redistribution of this content, without the express permission of the developer or other copyright holder, is prohibited under copyright law.\n\nThank you for your interest in this game! Please support the developer by visiting the following website to play the game:";
        this.siteLockTitleText = "Sorry.";
        this.minDisplayTime = this.siteLockURLIndex = 0;
        Rg.call(this);
        this.minDisplayTime = a;
        this.allowedURLs = b ?? [];
        this._startTime = new Date().getTime();
      }
      h["flixel.system.FlxBasePreloader"] = Sg;
      Sg.__name__ = "flixel.system.FlxBasePreloader";
      Sg.__super__ = Rg;
      Sg.prototype = q(Rg.prototype, {
        create: function () {},
        onInit: function () {
          Rg.prototype.onInit.call(this);
          na.get_current().stage.set_scaleMode(2);
          na.get_current().stage.align = 6;
          this.create();
          this.addEventListener("enterFrame", l(this, this.onEnterFrame));
          this.checkSiteLock();
        },
        onUpdate: function (a, b) {
          this._percent = b != 0 ? a / b : 0;
        },
        onEnterFrame: function (a) {
          a = new Date().getTime() - this._startTime;
          var b = this.minDisplayTime * 1000;
          var c = this._percent;
          if (b > 0 && this._percent > a / b) {
            c = a / b;
          }
          if (!this._destroyed) {
            this.update(c);
          }
          if (this._loaded && (b <= 0 || a / b >= 1)) {
            this.removeEventListener("enterFrame", l(this, this.onEnterFrame));
            Rg.prototype.onLoaded.call(this);
            this.destroy();
            this._destroyed = true;
          }
        },
        destroy: function () {},
        update: function (a) {},
        onLoaded: function () {
          this._loaded = true;
          this._percent = 1;
        },
        createBitmap: function (a, b) {
          var c = new Nc();
          c.set_bitmapData(Db.createInstance(a, [0, 0, true, -1, function (a) {
            b(c);
          }]));
          return c;
        },
        checkSiteLock: function () {
              this._urlChecked = true;
            
        },
        createSiteLockFailureScreen: function () {
          this.addChild(this.createSiteLockFailureBackground(16777215, 15066597));
          this.addChild(this.createSiteLockFailureIcon(15066597, 0.9));
          this.addChild(this.createSiteLockFailureText(30));
        },
        createSiteLockFailureBackground: function (a, b) {
          var c = new sg();
          var d = c.get_graphics();
          d.clear();
          var e = new Aa();
          e.createGradientBox(1, 1, 0, -0.5, -0.5);
          var f = Math.max(this.stage.stageWidth, this.stage.stageHeight);
          e.scale(f, f);
          e.translate(this.stage.stageWidth * 0.5, this.stage.stageHeight * 0.5);
          d.beginGradientFill(1, [a, b], [1, 1], [0, 255], e);
          d.drawRect(0, 0, this.stage.stageWidth, this.stage.stageHeight);
          d.endFill();
          return c;
        },
        createSiteLockFailureIcon: function (a, b) {
          var c = new sg();
          var d = c.get_graphics();
          d.clear();
          d.beginFill(a);
          a = [1, 6, 2, 2, 2, 6, 6, 2, 2, 2, 6, 1, 6, 2, 6, 2, 6, 2, 6, 1, 6, 6, 2, 2, 2, 6, 6];
          var e = qb.toIntVector(null);
          for (var f = 0, k = a.length; f < k;) {
            var g = f++;
            e.set(g, a[g]);
          }
          var n = e;
          a = [120, 0, 164, 0, 200, 35, 200, 79, 200, 130, 160, 130, 160, 79, 160, 57, 142, 40, 120, 40, 97, 40, 79, 57, 79, 79, 80, 130, 40, 130, 40, 79, 40, 35, 75, 0, 120, 0, 220, 140, 231, 140, 240, 148, 240, 160, 240, 300, 240, 311, 231, 320, 220, 320, 20, 320, 8, 320, 0, 311, 0, 300, 0, 160, 0, 148, 8, 140, 20, 140, 120, 190, 108, 190, 100, 198, 100, 210, 100, 217, 104, 223, 110, 227, 110, 270, 130, 270, 130, 227, 135, 223, 140, 217, 140, 210, 140, 198, 131, 190, 120, 190];
          e = qb.toFloatVector(null);
          f = 0;
          for (k = a.length; f < k;) {
            g = f++;
            e.set(g, a[g]);
          }
          d.drawPath(n, e, 1);
          d.endFill();
          d = new Aa();
          d.translate(c.get_width() * -0.5, c.get_height() * -0.5);
          b *= Math.min(this.stage.stageWidth / c.get_width(), this.stage.stageHeight / c.get_height());
          d.scale(b, b);
          d.translate(this.stage.stageWidth * 0.5, this.stage.stageHeight * 0.5);
          c.get_transform().set_matrix(d);
          return c;
        },
        createSiteLockFailureText: function (a) {
          var b = new $a();
          var c = new ea(0, 0, this.stage.stageWidth, this.stage.stageHeight);
          c.inflate(-a, -a);
          a = new Xc();
          var d = new nd("_sans", 33, 3355443, true);
          d.align = 3;
          a.set_defaultTextFormat(d);
          a.set_selectable(false);
          a.set_width(c.width);
          a.set_text(this.siteLockTitleText);
          d = new Xc();
          var e = new nd("_sans", 22, 3355443);
          e.align = 2;
          d.set_defaultTextFormat(e);
          d.set_multiline(true);
          d.set_wordWrap(true);
          d.set_selectable(false);
          d.set_width(c.width);
          d.set_text(this.siteLockBodyText);
          e = new Xc();
          var f = new nd("_sans", 22, 7247820, true, false, true);
          f.align = 0;
          f.url = this.allowedURLs[this.siteLockURLIndex];
          e.set_defaultTextFormat(f);
          e.set_selectable(true);
          e.set_width(c.width);
          e.set_text(this.allowedURLs[this.siteLockURLIndex]);
          this.adjustSiteLockTextFields(a, d, e);
          a.set_height(a.get_textHeight() + 4);
          d.set_height(d.get_textHeight() + 4);
          e.set_height(e.get_textHeight() + 4);
          a.set_x(d.set_x(e.set_x(c.get_left())));
          a.set_y(c.get_top());
          d.set_y(a.get_y() + a.get_height() * 2);
          e.set_y(d.get_y() + d.get_height() + e.get_height());
          b.addChild(a);
          b.addChild(d);
          b.addChild(e);
          return b;
        },
        adjustSiteLockTextFields: function (a, b, c) {},
        isHostUrlAllowed: function () {
          if (this.allowedURLs.length == 0) {
            return true;
          }
          var a = Yb.getDomain(I.location.href);
          for (var b = 0, c = this.allowedURLs; b < c.length;) {
            var d = c[b];
            ++b;
            if (Yb.getDomain(d) == a) {
              return true;
            }
          }
          return false;
        },
        __class__: Sg
      });
      function pd() {
        this.exists = true;
      }
      h["flixel.system.FlxLinkedList"] = pd;
      pd.__name__ = "flixel.system.FlxLinkedList";
      pd.__interfaces__ = [B];
      pd.recycle = function () {
        if (pd._cachedListsHead != null) {
          var a = pd._cachedListsHead;
          pd._cachedListsHead = pd._cachedListsHead.next;
          pd._NUM_CACHED_FLX_LIST--;
          a.exists = true;
          a.next = null;
          return a;
        }
        return new pd();
      };
      pd.prototype = {
        destroy: function () {
          if (this.exists) {
            this.object = null;
            if (this.next != null) {
              this.next.destroy();
            }
            this.exists = false;
            this.next = pd._cachedListsHead;
            pd._cachedListsHead = this;
            pd._NUM_CACHED_FLX_LIST++;
          }
        },
        __class__: pd
      };
      function qf(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (qf.preload != null) {
          this.__fromImage(qf.preload);
        } else {
          var f = this;
          Eb.loadFromBase64(cf.getString(qf.resourceName), qf.resourceType).then(function (a) {
            f.__fromImage(a);
            return Cb.withValue(f);
          }).onComplete(function (a) {
            if (qf.preload == null) {
              qf.preload = a.image;
            }
            if (e != null && ma.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.system._FlxPreloader.GraphicLogoLight"] = qf;
      qf.__name__ = "flixel.system._FlxPreloader.GraphicLogoLight";
      qf.__super__ = T;
      qf.prototype = q(T.prototype, {
        __class__: qf
      });
      function rf(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (rf.preload != null) {
          this.__fromImage(rf.preload);
        } else {
          var f = this;
          Eb.loadFromBase64(cf.getString(rf.resourceName), rf.resourceType).then(function (a) {
            f.__fromImage(a);
            return Cb.withValue(f);
          }).onComplete(function (a) {
            if (rf.preload == null) {
              rf.preload = a.image;
            }
            if (e != null && ma.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.system._FlxPreloader.GraphicLogoCorners"] = rf;
      rf.__name__ = "flixel.system._FlxPreloader.GraphicLogoCorners";
      rf.__super__ = T;
      rf.prototype = q(T.prototype, {
        __class__: rf
      });
  function ik(a, b) {
    if (a == null) {
      a = 0;
    }
    Sg.call(this, a, ["https://www.snokido.com", "https://www.snokido.fr", "https://w8.snokido.com", "localhost"]);
  }
  h["flixel.system.FlxPreloader"] = ik;
  ik.__name__ = "flixel.system.FlxPreloader";
  ik.__super__ = Sg;
  ik.prototype = q(Sg.prototype, {
    create: function () {
      var a = this;
      this._buffer = new $a();
      this._buffer.set_scaleX(this._buffer.set_scaleY(2));
      this.addChild(this._buffer);
      this._width = na.get_current().stage.stageWidth / this._buffer.get_scaleX() | 0;
      this._height = na.get_current().stage.stageHeight / this._buffer.get_scaleY() | 0;
      this._buffer.addChild(new Nc(new T(this._width, this._height, false, 13406)));
      var b = this.createBitmap(qf, function (b) {
        b.set_width(b.set_height(a._height));
        b.set_x((a._width - b.get_width()) / 2);
      });
      b.smoothing = true;
      this._buffer.addChild(b);
      this._bmpBar = new Nc(new T(1, 7, false, 6253311));
      this._bmpBar.set_x(4);
      this._bmpBar.set_y(this._height - 11);
      this._buffer.addChild(this._bmpBar);
      this._text = new Xc();
      this._text.set_defaultTextFormat(new nd(Qd.FONT_DEFAULT, 8, 6253311));
      this._text.set_embedFonts(true);
      this._text.set_selectable(false);
      this._text.set_multiline(false);
      this._text.set_x(2);
      this._text.set_y(this._bmpBar.get_y() - 11);
      this._text.set_width(200);
      this._buffer.addChild(this._text);
      this._logo = new $a();
      Qd.drawLogo(this._logo.get_graphics());
      this._logo.set_scaleX(this._logo.set_scaleY(this._height / 8 * 0.04));
      this._logo.set_x((this._width - this._logo.get_width()) / 2);
      this._logo.set_y((this._height - this._logo.get_height()) / 2);
      this._buffer.addChild(this._logo);
      this._logoGlow = new $a();
      Qd.drawLogo(this._logoGlow.get_graphics());
      this._logoGlow.set_blendMode(12);
      this._logoGlow.set_scaleX(this._logoGlow.set_scaleY(this._height / 8 * 0.04));
      this._logoGlow.set_x((this._width - this._logoGlow.get_width()) / 2);
      this._logoGlow.set_y((this._height - this._logoGlow.get_height()) / 2);
      this._buffer.addChild(this._logoGlow);
      b = this.createBitmap(rf, function (b) {
        b.set_width(a._width);
        b.set_height(a.get_height());
      });
      b.smoothing = true;
      this._buffer.addChild(b);
      b = new Nc(new T(this._width, this._height, false, 16777215));
      for (var c = 0, d = 0; c < this._height;) {
        for (d = 0; d < this._width;) {
          b.get_bitmapData().setPixel(d++, c, 0);
        }
        c += 2;
      }
      b.set_blendMode(11);
      b.set_alpha(0.25);
      this._buffer.addChild(b);
      Sg.prototype.create.call(this);
    },
    destroy: function () {
      if (this._buffer != null) {
        this.removeChild(this._buffer);
      }
      this._logoGlow = this._logo = this._text = this._bmpBar = this._buffer = null;
      Sg.prototype.destroy.call(this);
    },
    update: function (a) {
      this._bmpBar.set_scaleX(a * (this._width - 8));
      this._text.set_text(H.string(g.VERSION) + " " + (a * 100 | 0) + "%");
      if (a < 0.1) {
        this._logoGlow.set_alpha(0);
        this._logo.set_alpha(0);
      } else if (a < 0.15) {
        this._logoGlow.set_alpha(Math.random());
        this._logo.set_alpha(0);
      } else if (a < 0.2) {
        this._logoGlow.set_alpha(0);
        this._logo.set_alpha(0);
      } else if (a < 0.25) {
        this._logoGlow.set_alpha(0);
        this._logo.set_alpha(Math.random());
      } else if (a < 0.7) {
        this._logoGlow.set_alpha((a - 0.45) / 0.45);
        this._logo.set_alpha(1);
      } else if (a > 0.8 && a < 0.9) {
        this._logoGlow.set_alpha(1 - (a - 0.8) / 0.1);
        this._logo.set_alpha(0);
      } else if (a > 0.9) {
        this._buffer.set_alpha(1 - (a - 0.9) / 0.1);
      }
    },
    __class__: ik
  });
      function S(a, b, c, d, e) {
        Ha.call(this);
        var f = a;
        var k = b;
        var g = c;
        var n = d;
        if (n == null) {
          n = 0;
        }
        if (g == null) {
          g = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        this.x = f;
        this.y = k;
        this.width = g;
        this.height = n;
        this.reset(a, b, c, d, e);
      }
      h["flixel.system.FlxQuadTree"] = S;
      S.__name__ = "flixel.system.FlxQuadTree";
      S.recycle = function (a, b, c, d, e) {
        if (S._cachedTreesHead != null) {
          var f = S._cachedTreesHead;
          S._cachedTreesHead = S._cachedTreesHead.next;
          S._NUM_CACHED_QUAD_TREES--;
          f.reset(a, b, c, d, e);
          return f;
        }
        return new S(a, b, c, d, e);
      };
      S.__super__ = Ha;
      S.prototype = q(Ha.prototype, {
        reset: function (a, b, c, d, e) {
          this.exists = true;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.x = a;
          this.y = b;
          this.width = c;
          this.height = d;
          this._headA = this._tailA = pd.recycle();
          this._headB = this._tailB = pd.recycle();
          if (e != null) {
            if (e._headA.object != null) {
              for (d = e._headA; d != null;) {
                if (this._tailA.object != null) {
                  a = this._tailA;
                  this._tailA = pd.recycle();
                  a.next = this._tailA;
                }
                this._tailA.object = d.object;
                d = d.next;
              }
            }
            if (e._headB.object != null) {
              for (d = e._headB; d != null;) {
                if (this._tailB.object != null) {
                  a = this._tailB;
                  this._tailB = pd.recycle();
                  a.next = this._tailB;
                }
                this._tailB.object = d.object;
                d = d.next;
              }
            }
          } else {
            S._min = Math.floor((this.width + this.height) / (S.divisions * 2));
          }
          this._canSubdivide = this.width > S._min || this.height > S._min;
          this._southWestTree = this._southEastTree = this._northEastTree = this._northWestTree = null;
          this._leftEdge = this.x;
          this._rightEdge = this.x + this.width;
          this._halfWidth = this.width / 2;
          this._midpointX = this._leftEdge + this._halfWidth;
          this._topEdge = this.y;
          this._bottomEdge = this.y + this.height;
          this._halfHeight = this.height / 2;
          this._midpointY = this._topEdge + this._halfHeight;
        },
        destroy: function () {
          this._headA = da.destroy(this._headA);
          this._headB = da.destroy(this._headB);
          this._tailA = da.destroy(this._tailA);
          this._tailB = da.destroy(this._tailB);
          this._northWestTree = da.destroy(this._northWestTree);
          this._northEastTree = da.destroy(this._northEastTree);
          this._southWestTree = da.destroy(this._southWestTree);
          this._southEastTree = da.destroy(this._southEastTree);
          S._object = null;
          S._processingCallback = null;
          S._notifyCallback = null;
          this.exists = false;
          this.next = S._cachedTreesHead;
          S._cachedTreesHead = this;
          S._NUM_CACHED_QUAD_TREES++;
          Ha.prototype.destroy.call(this);
        },
        load: function (a, b, c, d) {
          this.add(a, 0);
          if (b != null) {
            this.add(b, 1);
            S._useBothLists = true;
          } else {
            S._useBothLists = false;
          }
          S._notifyCallback = c;
          S._processingCallback = d;
        },
        add: function (a, b) {
          S._list = b;
          var c = Ra.resolveGroup(a);
          if (c != null) {
            a = 0;
            for (var d, e = c.members, f = c.length; a < f;) {
              d = e[a++];
              if (d != null && d.exists) {
                c = Ra.resolveGroup(d);
                if (c != null) {
                  this.add(c, b);
                } else {
                  S._object = d;
                  if (S._object.exists && S._object.allowCollisions != 0) {
                    S._objectLeftEdge = S._object.x;
                    S._objectTopEdge = S._object.y;
                    S._objectRightEdge = S._object.x + S._object.get_width();
                    S._objectBottomEdge = S._object.y + S._object.get_height();
                    this.addObject();
                  }
                }
              }
            }
          } else {
            S._object = a;
            if (S._object.exists && S._object.allowCollisions != 0) {
              S._objectLeftEdge = S._object.x;
              S._objectTopEdge = S._object.y;
              S._objectRightEdge = S._object.x + S._object.get_width();
              S._objectBottomEdge = S._object.y + S._object.get_height();
              this.addObject();
            }
          }
        },
        addObject: function () {
          if (!this._canSubdivide || this._leftEdge >= S._objectLeftEdge && this._rightEdge <= S._objectRightEdge && this._topEdge >= S._objectTopEdge && this._bottomEdge <= S._objectBottomEdge) {
            this.addToList();
          } else {
            if (S._objectLeftEdge > this._leftEdge && S._objectRightEdge < this._midpointX) {
              if (S._objectTopEdge > this._topEdge && S._objectBottomEdge < this._midpointY) {
                if (this._northWestTree == null) {
                  this._northWestTree = S.recycle(this._leftEdge, this._topEdge, this._halfWidth, this._halfHeight, this);
                }
                this._northWestTree.addObject();
                return;
              }
              if (S._objectTopEdge > this._midpointY && S._objectBottomEdge < this._bottomEdge) {
                if (this._southWestTree == null) {
                  this._southWestTree = S.recycle(this._leftEdge, this._midpointY, this._halfWidth, this._halfHeight, this);
                }
                this._southWestTree.addObject();
                return;
              }
            }
            if (S._objectLeftEdge > this._midpointX && S._objectRightEdge < this._rightEdge) {
              if (S._objectTopEdge > this._topEdge && S._objectBottomEdge < this._midpointY) {
                if (this._northEastTree == null) {
                  this._northEastTree = S.recycle(this._midpointX, this._topEdge, this._halfWidth, this._halfHeight, this);
                }
                this._northEastTree.addObject();
                return;
              }
              if (S._objectTopEdge > this._midpointY && S._objectBottomEdge < this._bottomEdge) {
                if (this._southEastTree == null) {
                  this._southEastTree = S.recycle(this._midpointX, this._midpointY, this._halfWidth, this._halfHeight, this);
                }
                this._southEastTree.addObject();
                return;
              }
            }
            if (S._objectRightEdge > this._leftEdge && S._objectLeftEdge < this._midpointX && S._objectBottomEdge > this._topEdge && S._objectTopEdge < this._midpointY) {
              if (this._northWestTree == null) {
                this._northWestTree = S.recycle(this._leftEdge, this._topEdge, this._halfWidth, this._halfHeight, this);
              }
              this._northWestTree.addObject();
            }
            if (S._objectRightEdge > this._midpointX && S._objectLeftEdge < this._rightEdge && S._objectBottomEdge > this._topEdge && S._objectTopEdge < this._midpointY) {
              if (this._northEastTree == null) {
                this._northEastTree = S.recycle(this._midpointX, this._topEdge, this._halfWidth, this._halfHeight, this);
              }
              this._northEastTree.addObject();
            }
            if (S._objectRightEdge > this._midpointX && S._objectLeftEdge < this._rightEdge && S._objectBottomEdge > this._midpointY && S._objectTopEdge < this._bottomEdge) {
              if (this._southEastTree == null) {
                this._southEastTree = S.recycle(this._midpointX, this._midpointY, this._halfWidth, this._halfHeight, this);
              }
              this._southEastTree.addObject();
            }
            if (S._objectRightEdge > this._leftEdge && S._objectLeftEdge < this._midpointX && S._objectBottomEdge > this._midpointY && S._objectTopEdge < this._bottomEdge) {
              if (this._southWestTree == null) {
                this._southWestTree = S.recycle(this._leftEdge, this._midpointY, this._halfWidth, this._halfHeight, this);
              }
              this._southWestTree.addObject();
            }
          }
        },
        addToList: function () {
          if (S._list == 0) {
            if (this._tailA.object != null) {
              var a = this._tailA;
              this._tailA = pd.recycle();
              a.next = this._tailA;
            }
            this._tailA.object = S._object;
          } else {
            if (this._tailB.object != null) {
              a = this._tailB;
              this._tailB = pd.recycle();
              a.next = this._tailB;
            }
            this._tailB.object = S._object;
          }
          if (this._canSubdivide) {
            if (this._northWestTree != null) {
              this._northWestTree.addToList();
            }
            if (this._northEastTree != null) {
              this._northEastTree.addToList();
            }
            if (this._southEastTree != null) {
              this._southEastTree.addToList();
            }
            if (this._southWestTree != null) {
              this._southWestTree.addToList();
            }
          }
        },
        execute: function () {
          var a = false;
          if (this._headA.object != null) {
            for (var b = this._headA; b != null;) {
              S._object = b.object;
              S._iterator = S._useBothLists ? this._headB : b.next;
              if (S._object != null && S._object.exists && S._object.allowCollisions > 0 && S._iterator != null && S._iterator.object != null && this.overlapNode()) {
                a = true;
              }
              b = b.next;
            }
          }
          if (this._northWestTree != null && this._northWestTree.execute()) {
            a = true;
          }
          if (this._northEastTree != null && this._northEastTree.execute()) {
            a = true;
          }
          if (this._southEastTree != null && this._southEastTree.execute()) {
            a = true;
          }
          if (this._southWestTree != null && this._southWestTree.execute()) {
            a = true;
          }
          return a;
        },
        overlapNode: function () {
          S._objectHullX = S._object.x < S._object.last.x ? S._object.x : S._object.last.x;
          S._objectHullY = S._object.y < S._object.last.y ? S._object.y : S._object.last.y;
          S._objectHullWidth = S._object.x - S._object.last.x;
          S._objectHullWidth = S._object.get_width() + (S._objectHullWidth > 0 ? S._objectHullWidth : -S._objectHullWidth);
          S._objectHullHeight = S._object.y - S._object.last.y;
          S._objectHullHeight = S._object.get_height() + (S._objectHullHeight > 0 ? S._objectHullHeight : -S._objectHullHeight);
          for (var a = false, b; S._iterator != null;) {
            b = S._iterator.object;
            if (S._object == b || !b.exists || b.allowCollisions <= 0) {
              S._iterator = S._iterator.next;
            } else {
              S._checkObjectHullX = b.x < b.last.x ? b.x : b.last.x;
              S._checkObjectHullY = b.y < b.last.y ? b.y : b.last.y;
              S._checkObjectHullWidth = b.x - b.last.x;
              S._checkObjectHullWidth = b.get_width() + (S._checkObjectHullWidth > 0 ? S._checkObjectHullWidth : -S._checkObjectHullWidth);
              S._checkObjectHullHeight = b.y - b.last.y;
              S._checkObjectHullHeight = b.get_height() + (S._checkObjectHullHeight > 0 ? S._checkObjectHullHeight : -S._checkObjectHullHeight);
              if (S._objectHullX + S._objectHullWidth > S._checkObjectHullX && S._objectHullX < S._checkObjectHullX + S._checkObjectHullWidth && S._objectHullY + S._objectHullHeight > S._checkObjectHullY && S._objectHullY < S._checkObjectHullY + S._checkObjectHullHeight && (S._processingCallback == null || S._processingCallback(S._object, b))) {
                a = true;
                if (S._notifyCallback != null) {
                  S._notifyCallback(S._object, b);
                }
              }
              if (S._iterator != null) {
                S._iterator = S._iterator.next;
              }
            }
          }
          return a;
        },
        __class__: S
      });
      function tg() {}
      h["flixel.system.debug.DebuggerUtil"] = tg;
      tg.__name__ = "flixel.system.debug.DebuggerUtil";
      tg.createTextField = function (a, b, c, d) {
        if (d == null) {
          d = 12;
        }
        if (c == null) {
          c = -1;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        return tg.initTextField(new Xc(), a, b, c, d);
      };
      tg.initTextField = function (a, b, c, d, e) {
        if (e == null) {
          e = 12;
        }
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.set_x(b);
        a.set_y(c);
        a.set_multiline(false);
        a.set_wordWrap(false);
        a.set_embedFonts(true);
        a.set_selectable(false);
        a.set_defaultTextFormat(new nd(Qd.FONT_DEBUGGER, e, d & 16777215));
        a.set_alpha((d >> 24 & 255) / 255);
        a.set_autoSize(1);
        return a;
      };
      tg.fixSize = function (a) {
        ma.setProperty(a, "width", 11);
        ma.setProperty(a, "height", 11);
        return a;
      };
      function Nn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug._FlxDebugger.GraphicFlixel"] = Nn;
      Nn.__name__ = "flixel.system.debug._FlxDebugger.GraphicFlixel";
      Nn.__super__ = T;
      Nn.prototype = q(T.prototype, {
        __class__: Nn
      });
      function On(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug._FlxDebugger.GraphicDrawDebug"] = On;
      On.__name__ = "flixel.system.debug._FlxDebugger.GraphicDrawDebug";
      On.__super__ = T;
      On.prototype = q(T.prototype, {
        __class__: On
      });
      function Pn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicLog"] = Pn;
      Pn.__name__ = "flixel.system.debug.GraphicLog";
      Pn.__super__ = T;
      Pn.prototype = q(T.prototype, {
        __class__: Pn
      });
      function Qn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicStats"] = Qn;
      Qn.__name__ = "flixel.system.debug.GraphicStats";
      Qn.__super__ = T;
      Qn.prototype = q(T.prototype, {
        __class__: Qn
      });
      function Rn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicWatch"] = Rn;
      Rn.__name__ = "flixel.system.debug.GraphicWatch";
      Rn.__super__ = T;
      Rn.prototype = q(T.prototype, {
        __class__: Rn
      });
      function Sn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicBitmapLog"] = Sn;
      Sn.__name__ = "flixel.system.debug.GraphicBitmapLog";
      Sn.__super__ = T;
      Sn.prototype = q(T.prototype, {
        __class__: Sn
      });
      function Tn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicConsole"] = Tn;
      Tn.__name__ = "flixel.system.debug.GraphicConsole";
      Tn.__super__ = T;
      Tn.prototype = q(T.prototype, {
        __class__: Tn
      });
      function Un(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicArrowLeft"] = Un;
      Un.__name__ = "flixel.system.debug.GraphicArrowLeft";
      Un.__super__ = T;
      Un.prototype = q(T.prototype, {
        __class__: Un
      });
      function Vn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicArrowRight"] = Vn;
      Vn.__name__ = "flixel.system.debug.GraphicArrowRight";
      Vn.__super__ = T;
      Vn.prototype = q(T.prototype, {
        __class__: Vn
      });
      function jl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicCloseButton"] = jl;
      jl.__name__ = "flixel.system.debug.GraphicCloseButton";
      jl.__super__ = T;
      jl.prototype = q(T.prototype, {
        __class__: jl
      });
      function kl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicInteractive"] = kl;
      kl.__name__ = "flixel.system.debug.GraphicInteractive";
      kl.__super__ = T;
      kl.prototype = q(T.prototype, {
        __class__: kl
      });
      function ll() {
        $a.call(this);
      }
      h["flixel.system.debug.FlxDebugger"] = ll;
      ll.__name__ = "flixel.system.debug.FlxDebugger";
      ll.__super__ = $a;
      ll.prototype = q($a.prototype, {
        __class__: ll
      });
      function fi() {}
      h["flixel.system.debug.Tooltip"] = fi;
      fi.__name__ = "flixel.system.debug.Tooltip";
      fi.add = function (a, b) {
        a = new ml(a, b);
        fi._container.addChild(a);
        fi._tooltips.push(a);
        return a;
      };
      function ml(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        $a.call(this);
        this.owner = a;
        this.maxSize = new kb(c, d);
        this._shadow = new Nc(new T(1, 2, true, -16777216));
        this._background = new Nc(new T(1, 1, true, -12961222));
        this.textField = tg.createTextField(2, 1);
        this.textField.set_alpha(0.8);
        this.textField.set_text(b);
        this.textField.set_wordWrap(true);
        this.addChild(this._shadow);
        this.addChild(this._background);
        this.addChild(this.textField);
        this.updateSize();
        this.setVisible(false);
        if (this.owner != null) {
          this.owner.addEventListener("mouseOver", l(this, this.handleMouseEvents));
          this.owner.addEventListener("mouseOut", l(this, this.handleMouseEvents));
        }
      }
      h["flixel.system.debug.TooltipOverlay"] = ml;
      ml.__name__ = "flixel.system.debug.TooltipOverlay";
      ml.__super__ = $a;
      ml.prototype = q($a.prototype, {
        setVisible: function (a) {
          this.set_visible(a);
          if (this.get_visible()) {
            this.parent.addChild(this);
            this.ensureOnScreen();
          }
        },
        updateSize: function () {
          this._width = ((this.maxSize.x <= 0 ? this.textField.get_textWidth() : Math.abs(this.maxSize.x)) | 0) + 8;
          this._height = ((this.maxSize.y <= 0 ? this.textField.get_textHeight() : Math.abs(this.maxSize.y)) | 0) + 8;
          this._background.set_scaleX(this._width);
          this._background.set_scaleY(this._height);
          this._shadow.set_scaleX(this._width);
          this._shadow.set_y(this._height);
          this.textField.set_width(this._width);
        },
        ensureOnScreen: function () {
          this.set_x(this.get_x() < 0 ? 0 : this.get_x());
          this.set_y(this.get_y() < 0 ? 0 : this.get_y());
          var a = this.get_x() + this.get_width() >= na.get_current().stage.stageWidth ? na.get_current().stage.stageWidth - (this.get_x() + this.get_width()) : 0;
          var b = this.get_y() + this.get_height() >= na.get_current().stage.stageHeight ? na.get_current().stage.stageHeight - (this.get_y() + this.get_height()) : 0;
          this.set_x(this.get_x() + a);
          this.set_y(this.get_y() + b);
        },
        handleMouseEvents: function (a) {
          if (a.type != "mouseOver" || this.get_visible()) {
            if (a.type == "mouseOut") {
              this.setVisible(false);
            }
          } else {
            this.set_x(a.stageX + 10);
            this.set_y(a.stageY + 10);
            this.setVisible(true);
          }
        },
        __class__: ml
      });
      function nl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug._Window.GraphicWindowHandle"] = nl;
      nl.__name__ = "flixel.system.debug._Window.GraphicWindowHandle";
      nl.__super__ = T;
      nl.prototype = q(T.prototype, {
        __class__: nl
      });
      function Se(a, b, c, d, e, f, k, g) {
        if (g == null) {
          g = true;
        }
        if (k == null) {
          k = false;
        }
        if (e == null) {
          e = true;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        $a.call(this);
        this.minSize = new kb(50, 30);
        this._width = Math.abs(c) | 0;
        this._height = Math.abs(d) | 0;
        this.updateBounds(f);
        this._drag = new kb();
        this._resizable = e;
        this._closable = k;
        this._alwaysOnTop = g;
        this._shadow = new Nc(new T(1, 2, true, -16777216));
        this._background = new Nc(new T(1, 1, true, -580952225));
        this._header = new Nc(new T(1, 15, true, -1157627904));
        this._background.set_y(this._header.get_height());
        this._title = tg.createTextField(2, -1);
        this._title.set_alpha(0.8);
        this._title.set_text(a);
        this.addChild(this._shadow);
        this.addChild(this._background);
        this.addChild(this._header);
        this.addChild(this._title);
        if (b != null) {
          tg.fixSize(b);
          this._icon = new Nc(b);
          this._icon.set_x(5);
          this._icon.set_y(2);
          this._icon.set_alpha(0.8);
          this._title.set_x(this._icon.get_x() + this._icon.get_width() + 2);
          this.addChild(this._icon);
        }
        if (this._resizable) {
          this._handle = new Nc(tg.fixSize(new nl(0, 0)));
          this.addChild(this._handle);
        }
        if (this._closable) {
          this._closeButton = new gi(new jl(0, 0), l(this, this.close));
          this._closeButton.set_alpha(0.8);
          this.addChild(this._closeButton);
        } else {
          this._id = Se.windowAmount;
          this.loadSaveData();
          Se.windowAmount++;
        }
        if (this._width != 0 || this._height != 0) {
          this.updateSize();
        }
        this.bound();
        this.addEventListener("enterFrame", l(this, this.init));
      }
      h["flixel.system.debug.Window"] = Se;
      Se.__name__ = "flixel.system.debug.Window";
      Se.__super__ = $a;
      Se.prototype = q($a.prototype, {
        destroy: function () {
          this._bounds = this.maxSize = this.minSize = null;
          if (this._shadow != null) {
            this.removeChild(this._shadow);
          }
          this._shadow = null;
          if (this._background != null) {
            this.removeChild(this._background);
          }
          this._background = null;
          if (this._header != null) {
            this.removeChild(this._header);
          }
          this._header = null;
          if (this._title != null) {
            this.removeChild(this._title);
          }
          this._title = null;
          if (this._handle != null) {
            this.removeChild(this._handle);
          }
          this._drag = this._handle = null;
          this._closeButton = da.destroy(this._closeButton);
          var a = na.get_current().stage;
          if (a.hasEventListener("mouseMove")) {
            a.removeEventListener("mouseMove", l(this, this.onMouseMove));
          }
          if (this.hasEventListener("mouseDown")) {
            this.removeEventListener("mouseDown", l(this, this.onMouseDown));
          }
          if (a.hasEventListener("mouseUp")) {
            a.removeEventListener("mouseUp", l(this, this.onMouseUp));
          }
        },
        resize: function (a, b) {
          this._width = Math.abs(a) | 0;
          this._height = Math.abs(b) | 0;
          this.updateSize();
        },
        reposition: function (a, b) {
          this.set_x(a);
          this.set_y(b);
          this.bound();
        },
        updateBounds: function (a) {
          this._bounds = a;
          this.maxSize = this._bounds != null ? new kb(this._bounds.width, this._bounds.height) : new kb(1.79e+308, 1.79e+308);
        },
        loadSaveData: function () {
          if (g.save.status._hx_index == 1) {
            if (g.save.data.windowSettings == null) {
              this.initWindowsSave();
              g.save.flush();
            }
            this.set_visible(g.save.data.windowSettings[this._id]);
          }
        },
        initWindowsSave: function () {
          var a = [];
          for (var b = 0; b < 10;) {
            b++;
            a.push(true);
          }
          g.save.data.windowSettings = a;
        },
        init: function (a) {
          if (this.stage != null) {
            this.removeEventListener("enterFrame", l(this, this.init));
            this.stage.addEventListener("mouseMove", l(this, this.onMouseMove));
            this.stage.addEventListener("mouseUp", l(this, this.onMouseUp));
            this.addEventListener("mouseDown", l(this, this.onMouseDown));
          }
        },
        onMouseMove: function (a) {
          a = this.get_mouseX() < 0 ? 0 : this.get_mouseX();
          var b = this.get_mouseY() < 0 ? 0 : this.get_mouseY();
          if (this.parent.get_visible()) {
            if (this._dragging) {
              this._overHeader = true;
              this.reposition(this.parent.get_mouseX() - this._drag.x, this.parent.get_mouseY() - this._drag.y);
            } else if (this._resizing) {
              this._overHandle = true;
              this.resize(a - this._drag.x, b - this._drag.y);
            } else if (a >= 0 && a <= this._width && b >= 0 && b <= this._height) {
              this._overHeader = a <= this._header.get_width() && b <= this._header.get_height();
              if (this._resizable) {
                this._overHandle = a >= this._width - this._handle.get_width() && b >= this._height - this._handle.get_height();
              }
            } else {
              this._overHandle = this._overHeader = false;
            }
          } else {
            this._overHandle = this._overHeader = false;
          }
        },
        onMouseDown: function (a) {
          if (this._overHeader) {
            if (this._alwaysOnTop) {
              this.parent.addChild(this);
            }
            this._dragging = true;
            this._drag.x = this.get_mouseX();
            this._drag.y = this.get_mouseY();
          } else if (this._overHandle) {
            if (this._alwaysOnTop) {
              this.parent.addChild(this);
            }
            this._resizing = true;
            a = this._width;
            var b = this.get_mouseX();
            this._drag.x = a - b;
            a = this._height;
            b = this.get_mouseY();
            this._drag.y = a - b;
          }
        },
        onMouseUp: function (a) {
          this._resizing = this._dragging = false;
        },
        bound: function () {
          if (this._bounds != null) {
            var a = this.get_x();
            var b = this._bounds.get_left();
            var c = this._bounds.get_right() - this._width;
            a = b != null && a < b ? b : a;
            this.set_x(c != null && a > c ? c : a);
            a = this.get_y();
            b = this._bounds.get_top();
            c = this._bounds.get_bottom() - this._height;
            a = b != null && a < b ? b : a;
            this.set_y(c != null && a > c ? c : a);
          }
        },
        updateSize: function () {
          var a = this._width;
          var b = this.minSize.x;
          var c = this.maxSize.x;
          a = b != null && a < b ? b : a;
          this._width = (c != null && a > c ? c : a) | 0;
          a = this._height;
          b = this.minSize.y;
          c = this.maxSize.y;
          a = b != null && a < b ? b : a;
          this._height = (c != null && a > c ? c : a) | 0;
          this._header.set_scaleX(this._width);
          this._background.set_scaleX(this._width);
          this._background.set_scaleY(this._height - this._header.get_height());
          this._shadow.set_scaleX(this._width);
          this._shadow.set_y(this._height);
          this._title.set_width(this._width - 4);
          if (this._resizable) {
            this._handle.set_x(this._width - this._handle.get_width());
            this._handle.set_y(this._height - this._handle.get_height());
          }
          if (this._closeButton != null) {
            this._closeButton.set_x(this._width - this._closeButton.get_width() - 3);
            this._closeButton.set_y(3);
          }
        },
        close: function () {
          this.destroy();
        },
        __class__: Se
      });
      function Wn(a) {
        this._flixelPointer = new gd();
        this._debuggerInteraction = false;
        this._keysUp = new rc();
        this._keysDown = new rc();
        this._turn = 2;
        this._tools = [];
        this.macKeyboard = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent) || /Mac/.test(navigator.platform);
        this.shouldDrawItemsSelection = true;
        this.pointerJustPressed = this.pointerJustReleased = this.pointerPressed = false;
        var b = 0;
        var c = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        c = fa.pool.get().set(b, c);
        c._inPool = false;
        this.flixelPointer = c;
        this.selectedItems = new Ra();
        Se.call(this, "Tools", new kl(0, 0), 40, 25, false);
        this.reposition(2, 100);
        this._container = a;
        this._customCursor = new $a();
        this._customCursor.mouseEnabled = false;
        this._container.addChild(this._customCursor);
        this.addTool(new ol());
        this.addTool(new pl());
        this.addTool(new ql());
        this.addTool(new rl());
        this.addTool(new sl());
        g.signals.postDraw.add(l(this, this.postDraw));
        g.debugger.visibilityChanged.add(l(this, this.handleDebuggerVisibilityChanged));
        na.get_current().stage.addEventListener("mouseMove", l(this, this.updateMouse));
        na.get_current().stage.addEventListener("mouseDown", l(this, this.handleMouseClick));
        na.get_current().stage.addEventListener("mouseUp", l(this, this.handleMouseClick));
        na.get_current().stage.addEventListener("keyDown", l(this, this.handleKeyEvent));
        na.get_current().stage.addEventListener("keyUp", l(this, this.handleKeyEvent));
        this._container.addEventListener("mouseOver", l(this, this.handleMouseInDebugger));
        this._container.addEventListener("mouseOut", l(this, this.handleMouseInDebugger));
      }
      h["flixel.system.debug.interaction.Interaction"] = Wn;
      Wn.__name__ = "flixel.system.debug.interaction.Interaction";
      Wn.__super__ = Se;
      Wn.prototype = q(Se.prototype, {
        handleDebuggerVisibilityChanged: function () {
          if (g.debugger.visible) {
            this.saveSystemCursorInfo();
          } else {
            this.restoreSystemCursor();
          }
        },
        updateMouse: function (a) {
          if (a.stageX != null && a.stageY != null) {
            var b = 0;
            var c = 0;
            if (this.activeTool != null) {
              var d = this.activeTool.cursor;
              if (d != null) {
                b = d.width / g.scaleMode.scale.x / 2;
                c = d.height / g.scaleMode.scale.y / 2;
              }
            }
            this._customCursor.set_x(a.stageX + b);
            this._customCursor.set_y(a.stageY + c);
            d = this._flixelPointer;
            d._globalScreenX = a.stageX / g.scaleMode.scale.x | 0;
            d._globalScreenY = a.stageY / g.scaleMode.scale.y | 0;
            d.updatePositions();
            this.flixelPointer.set_x(this._flixelPointer.x + b);
            this.flixelPointer.set_y(this._flixelPointer.y + c);
          }
        },
        handleMouseClick: function (a) {
          if (a.type != "mouseDown" || !this.belongsToDebugger(a.target)) {
            this.pointerJustPressed = a.type == "mouseDown";
            this.pointerJustReleased = a.type == "mouseUp";
            if (this.pointerJustPressed) {
              this.pointerPressed = true;
            } else if (this.pointerJustReleased) {
              this.pointerPressed = false;
            }
          }
        },
        belongsToDebugger: function (a) {
          if (a == null) {
            return false;
          } else if (a instanceof ll) {
            return true;
          } else {
            return this.belongsToDebugger(a.parent);
          }
        },
        handleMouseInDebugger: function (a) {
          if (this.isActive()) {
            if (a.type == "mouseOver") {
              this._debuggerInteraction = true;
            } else if (a.type == "mouseOut") {
              this._debuggerInteraction = false;
            }
            a.stopPropagation();
          }
        },
        handleKeyEvent: function (a) {
          if (a.type == "keyDown") {
            this._keysDown.h[a.keyCode] = true;
          } else if (a.type == "keyUp") {
            this._keysDown.h[a.keyCode] = false;
            this._keysUp.h[a.keyCode] = this._turn;
          }
        },
        countToolsWithUIButton: function () {
          var a = 0;
          for (var b = 0, c = this._tools; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.button != null) {
              ++a;
            }
          }
          return a;
        },
        addTool: function (a) {
          a.init(this);
          this._tools.push(a);
          a = a.button;
          if (a != null) {
            var b = this.countToolsWithUIButton();
            var c = Math.ceil(b / 2);
            a.set_x(10 + (b - 1) % 2 * 25);
            a.set_y(c * 20);
            this.addChild(a);
            this.resize(Math.min(b, 2) * 25 + 10, Math.ceil(b / 2) * 25 + 10);
          }
        },
        destroy: function () {
          g.signals.postDraw.remove(l(this, this.postDraw));
          g.debugger.visibilityChanged.remove(l(this, this.handleDebuggerVisibilityChanged));
          na.get_current().stage.removeEventListener("mouseMove", l(this, this.updateMouse));
          na.get_current().stage.removeEventListener("mouseDown", l(this, this.handleMouseClick));
          na.get_current().stage.removeEventListener("mouseUp", l(this, this.handleMouseClick));
          na.get_current().stage.removeEventListener("keyDown", l(this, this.handleKeyEvent));
          na.get_current().stage.removeEventListener("keyUp", l(this, this.handleKeyEvent));
          if (this._container != null) {
            this._container.removeEventListener("mouseOver", l(this, this.handleMouseInDebugger));
            this._container.removeEventListener("mouseOut", l(this, this.handleMouseInDebugger));
          }
          if (this._customCursor != null) {
            this._customCursor.parent.removeChild(this._customCursor);
            this._customCursor = null;
          }
          this._tools = da.destroyArray(this._tools);
          this.selectedItems = da.destroy(this.selectedItems);
          this.flixelPointer = da.destroy(this.flixelPointer);
          this._keysUp = this._keysDown = null;
        },
        isActive: function () {
          if (g.debugger.visible) {
            return this.get_visible();
          } else {
            return false;
          }
        },
        postDraw: function () {
          if (this.isActive()) {
            for (var a = 0, b = this._tools; a < b.length;) {
              var c = b[a];
              ++a;
              c.draw();
            }
            if (this.shouldDrawItemsSelection) {
              this.drawItemsSelection();
            }
          }
        },
        getDebugGraphics: function () {
          if (g.renderBlit) {
            Gc.flashGfx.clear();
            return Gc.flashGfx;
          } else {
            return null;
          }
        },
        drawItemsSelection: function () {
          var a = this.getDebugGraphics();
          if (a != null) {
            for (var b = new wc(this.selectedItems.members, null); b.hasNext();) {
              var c = b.next();
              if (c != null && c.scrollFactor != null && c.isOnScreen()) {
                var d = g.camera.scroll;
                a.lineStyle(1, 16777215, 0.75);
                a.drawRect(c.x - d.x - 0.5, c.y - d.y - 0.5, c.get_width() + 1, c.get_height() + 1);
              }
            }
            if (g.renderBlit) {
              g.camera.buffer.draw(Gc.flashGfxSprite);
            }
          }
        },
        registerCustomCursor: function (a, b) {
          if (b != null) {
            var c = new $a();
            c.set_visible(false);
            c.set_name(a);
            c.addChild(new Nc(b));
            this._customCursor.addChild(c);
          }
        },
        updateCustomCursors: function () {
          if (this.activeTool == null || this._debuggerInteraction) {
            g.mouse.set_useSystemCursor(true);
          } else if (this.activeTool.cursor != null) {
            var a = this.activeTool.cursorInUse == "" ? this.activeTool.getName() : this.activeTool.cursorInUse;
            for (var b = 0, c = this._customCursor.get_numChildren(); b < c;) {
              var d = b++;
              d = this._customCursor.getChildAt(d);
              d.set_visible(d.get_name() == a);
            }
            if (g.mouse.visible) {
              g.mouse.set_visible(false);
            }
          } else {
            g.mouse.set_useSystemCursor(true);
          }
        },
        saveSystemCursorInfo: function () {
          this._wasMouseVisible = g.mouse.visible;
          this._wasUsingSystemCursor = g.mouse.useSystemCursor;
        },
        restoreSystemCursor: function () {
          g.mouse.set_useSystemCursor(this._wasUsingSystemCursor);
          g.mouse.set_visible(this._wasMouseVisible);
          this._customCursor.set_visible(false);
        },
        setActiveTool: function (a) {
          if (this.activeTool != null) {
            this.activeTool.deactivate();
            this.activeTool.button.set_toggled(true);
          }
          if (this.activeTool == a) {
            a = null;
          }
          this.activeTool = a;
          if (this.activeTool != null) {
            this.setToolsCursorVisibility(true);
            this.activeTool.button.set_toggled(false);
            this.activeTool.activate();
            this.updateCustomCursors();
          } else {
            this.setSystemCursorVisibility(true);
          }
          g.mouse.enabled = !this.isInUse();
        },
        setSystemCursorVisibility: function (a) {
          g.mouse.set_useSystemCursor(a);
          this._customCursor.set_visible(!a);
        },
        setToolsCursorVisibility: function (a) {
          g.mouse.set_useSystemCursor(false);
          this._customCursor.set_visible(a);
          if (!a) {
            a = 0;
            for (var b = this._customCursor.get_numChildren(); a < b;) {
              var c = a++;
              this._customCursor.getChildAt(c).set_visible(false);
            }
          }
        },
        keyPressed: function (a) {
          return this._keysDown.h[a];
        },
        isInUse: function () {
          if (g.debugger.visible && this.get_visible()) {
            return this.activeTool != null;
          } else {
            return false;
          }
        },
        __class__: Wn
      });
      function Xn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Eraser.GraphicEraserTool"] = Xn;
      Xn.__name__ = "flixel.system.debug.interaction.tools._Eraser.GraphicEraserTool";
      Xn.__super__ = T;
      Xn.prototype = q(T.prototype, {
        __class__: Xn
      });
      function Pc() {
        this._name = "(Unknown tool)";
        this.cursorInUse = "";
        $a.call(this);
      }
      h["flixel.system.debug.interaction.tools.Tool"] = Pc;
      Pc.__name__ = "flixel.system.debug.interaction.tools.Tool";
      Pc.__interfaces__ = [B];
      Pc.__super__ = $a;
      Pc.prototype = q($a.prototype, {
        init: function (a) {
          this._brain = a;
          return this;
        },
        draw: function () {},
        activate: function () {},
        deactivate: function () {},
        destroy: function () {},
        isActive: function () {
          if (this._brain.activeTool == this) {
            return this._brain.get_visible();
          } else {
            return false;
          }
        },
        setButton: function (a) {
          this.button = new gi(Db.createInstance(a, [0, 0]), l(this, this.onButtonClicked), true);
          this.button.set_toggled(true);
          a = this._name;
          if (this._shortcut != null) {
            a += " (" + this._shortcut + ")";
          }
          fi.add(this.button, a);
        },
        setCursor: function (a) {
          this.cursor = a;
          this._brain.registerCustomCursor(this._name, this.cursor);
        },
        onButtonClicked: function () {
          this._brain.setActiveTool(this);
        },
        getName: function () {
          return this._name;
        },
        __class__: Pc
      });
      function ql() {
        Pc.call(this);
      }
      h["flixel.system.debug.interaction.tools.Eraser"] = ql;
      ql.__name__ = "flixel.system.debug.interaction.tools.Eraser";
      ql.__super__ = Pc;
      ql.prototype = q(Pc.prototype, {
        init: function (a) {
          Pc.prototype.init.call(this, a);
          this._name = "Eraser";
          return this;
        },
        activate: function () {
          this.doDeletion(this._brain.keyPressed(16));
          this._brain.setActiveTool(null);
        },
        doDeletion: function (a) {
          var b = this._brain.selectedItems;
          if (b != null) {
            this.findAndDelete(b, a);
            b.clear();
          }
        },
        findAndDelete: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (a = new wc(a.members, null); a.hasNext();) {
            var c = a.next();
            if (c != null && !(c instanceof Ra)) {
              c.kill();
              if (b) {
                this.removeFromMemory(c, g.game._state);
              }
            }
          }
        },
        removeFromMemory: function (a, b) {
          for (var c = 0, d = b.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              if (e instanceof Ra) {
                this.removeFromMemory(a, e);
              } else if (e == a) {
                b.remove(e);
              }
            }
          }
        },
        __class__: ql
      });
      function vj(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Mover.GraphicMoverTool"] = vj;
      vj.__name__ = "flixel.system.debug.interaction.tools._Mover.GraphicMoverTool";
      vj.__super__ = T;
      vj.prototype = q(T.prototype, {
        __class__: vj
      });
      function pl() {
        Pc.call(this);
      }
      h["flixel.system.debug.interaction.tools.Mover"] = pl;
      pl.__name__ = "flixel.system.debug.interaction.tools.Mover";
      pl.__super__ = Pc;
      pl.prototype = q(Pc.prototype, {
        init: function (a) {
          Pc.prototype.init.call(this, a);
          var b = a.flixelPointer.x;
          var c = a.flixelPointer.x;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = fa.pool.get().set(b, c);
          b._inPool = false;
          this._lastCursorPosition = b;
          this._name = "Mover";
          this._shortcut = a.macKeyboard ? "" : "Ctrl";
          this.setButton(vj);
          this.setCursor(new vj(0, 0));
          return this;
        },
        __class__: pl
      });
      function hi(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools.GraphicCursorCross"] = hi;
      hi.__name__ = "flixel.system.debug.interaction.tools.GraphicCursorCross";
      hi.__super__ = T;
      hi.prototype = q(T.prototype, {
        __class__: hi
      });
      function ol() {
        this._selectionArea = new Ha();
        this._selectionHappening = false;
        Pc.call(this);
      }
      h["flixel.system.debug.interaction.tools.Pointer"] = ol;
      ol.__name__ = "flixel.system.debug.interaction.tools.Pointer";
      ol.__super__ = Pc;
      ol.prototype = q(Pc.prototype, {
        init: function (a) {
          Pc.prototype.init.call(this, a);
          this._name = "Pointer";
          this.setButton(hi);
          this.setCursor(new hi(0, 0));
          return this;
        },
        draw: function () {
          var a = this._brain.getDebugGraphics();
          if (a != null) {
            if (this._selectionHappening) {
              a.lineStyle(0.9, 12255232);
              a.drawRect(this._selectionArea.x - g.camera.scroll.x, this._selectionArea.y - g.camera.scroll.y, this._selectionArea.width, this._selectionArea.height);
            }
            if (g.renderBlit) {
              g.camera.buffer.draw(Gc.flashGfxSprite);
            }
          }
        },
        __class__: ol
      });
      function tl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._ToggleBounds.GraphicToggleBoundsTool"] = tl;
      tl.__name__ = "flixel.system.debug.interaction.tools._ToggleBounds.GraphicToggleBoundsTool";
      tl.__super__ = T;
      tl.prototype = q(T.prototype, {
        __class__: tl
      });
      function sl() {
        Pc.call(this);
      }
      h["flixel.system.debug.interaction.tools.ToggleBounds"] = sl;
      sl.__name__ = "flixel.system.debug.interaction.tools.ToggleBounds";
      sl.__super__ = Pc;
      sl.prototype = q(Pc.prototype, {
        init: function (a) {
          Pc.prototype.init.call(this, a);
          this._name = "Toggle Debug Draw";
          this.setButton(tl);
          this.button.toggleMode = false;
          return this;
        },
        onButtonClicked: function () {},
        __class__: sl
      });
      function ul(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Transform.GraphicTransformTool"] = ul;
      ul.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformTool";
      ul.__super__ = T;
      ul.prototype = q(T.prototype, {
        __class__: ul
      });
      function vl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorDefault"] = vl;
      vl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorDefault";
      vl.__super__ = T;
      vl.prototype = q(T.prototype, {
        __class__: vl
      });
      function wl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleY"] = wl;
      wl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleY";
      wl.__super__ = T;
      wl.prototype = q(T.prototype, {
        __class__: wl
      });
      function xl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleX"] = xl;
      xl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleX";
      xl.__super__ = T;
      xl.prototype = q(T.prototype, {
        __class__: xl
      });
      function yl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleXY"] = yl;
      yl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleXY";
      yl.__super__ = T;
      yl.prototype = q(T.prototype, {
        __class__: yl
      });
      function zl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorRotate"] = zl;
      zl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorRotate";
      zl.__super__ = T;
      zl.prototype = q(T.prototype, {
        __class__: zl
      });
      function rl() {
        this._markers = [];
        Pc.call(this);
      }
      h["flixel.system.debug.interaction.tools.Transform"] = rl;
      rl.__name__ = "flixel.system.debug.interaction.tools.Transform";
      rl.__super__ = Pc;
      rl.prototype = q(Pc.prototype, {
        init: function (a) {
          var b = this;
          Pc.prototype.init.call(this, a);
          this._name = "Transform";
          this.setButton(ul);
          this.setCursor(new vl(0, 0));
          a.registerCustomCursor("transformRotate", new zl(0, 0));
          a.registerCustomCursor("transformScaleX", new xl(0, 0));
          a.registerCustomCursor("transformScaleY", new wl(0, 0));
          a.registerCustomCursor("transformScaleXY", new yl(0, 0));
          this._tooltip = fi.add(null, "");
          this._tooltip.textField.set_wordWrap(false);
          a = this._markers;
          var c = 0;
          var d = 0;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          d = fa.pool.get().set(c, d);
          d._inPool = false;
          a.push(d);
          a = this._markers;
          d = c = 0;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          d = fa.pool.get().set(c, d);
          d._inPool = false;
          a.push(d);
          a = this._markers;
          d = c = 0;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          d = fa.pool.get().set(c, d);
          d._inPool = false;
          a.push(d);
          a = this._markers;
          d = c = 0;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          d = fa.pool.get().set(c, d);
          d._inPool = false;
          a.push(d);
          this.stopAction();
          g.signals.preStateSwitch.add(function () {
            b._target = null;
          });
          return this;
        },
        stopAction: function () {
          this._actionHappening = false;
          this._actionMarker = -1;
          this._tooltip.setVisible(false);
        },
        drawTargetAreaOutline: function (a) {
          a.lineStyle(0.9, -65281, 1, false, 2, 2);
          a.moveTo(this._markers[0].x, this._markers[0].y);
          for (var b = 0, c = this._markers.length; b < c;) {
            var d = b++;
            a.lineTo(this._markers[d].x, this._markers[d].y);
          }
          a.lineTo(this._markers[0].x, this._markers[0].y);
        },
        drawMarkers: function (a) {
          a.lineStyle(0.9, -65281, 1, false, 2, 2);
          a.beginFill(-65281);
          for (var b = 0, c = this._markers.length; b < c;) {
            var d = b++;
            if (d == 0) {
              a.drawCircle(this._markers[d].x, this._markers[d].y, 2.7);
            } else {
              a.drawRect(this._markers[d].x - 1.5, this._markers[d].y - 1.5, 3, 3);
            }
          }
          a.endFill();
        },
        draw: function () {
          var a = this._brain.getDebugGraphics();
          if (a != null && this._target != null && this.isActive()) {
            this.drawTargetAreaOutline(a);
            this.drawMarkers(a);
            if (g.renderBlit) {
              g.camera.buffer.draw(Gc.flashGfxSprite);
            }
          }
        },
        activate: function () {
          this._target = null;
          if (this._brain.selectedItems.length != 0) {
            for (var a = new wc(this._brain.selectedItems.members, null); a.hasNext();) {
              var b = a.next();
              if (b != null && b.scrollFactor != null && b.isOnScreen()) {
                this._target = b;
                break;
              }
            }
            this._brain.shouldDrawItemsSelection = false;
          }
        },
        deactivate: function () {
          this._brain.shouldDrawItemsSelection = true;
        },
        __class__: rl
      });
      function Ba(a, b, c, d, e, f, k, g, n, h) {
        if (h == null) {
          h = false;
        }
        if (g == null) {
          g = false;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = 12;
        }
        if (b == null) {
          b = "FFFFFF";
        }
        if (a == null) {
          a = "";
        }
        this.throwException = false;
        this.prefix = a;
        this.color = b;
        this.size = c;
        this.bold = d;
        this.italic = e;
        this.underlined = f;
        this.errorSound = k;
        this.openConsole = g;
        this.callbackFunction = n;
        this.throwException = h;
      }
      h["flixel.system.debug.log.LogStyle"] = Ba;
      Ba.__name__ = "flixel.system.debug.log.LogStyle";
      Ba.prototype = {
        toLogString: function (a) {
          var b = [];
          for (var c = 0, d = a.length; c < d;) {
            var e = c++;
            e = a[e] == null ? "null" : H.string(a[e]);
            b.push(w.htmlEscape(e));
          }
          return this.prefix + b.join(" ");
        },
        __class__: Ba
      };
      function wj(a, b, c, d, e, f, k, g) {
        Se.call(this, a, b, c, d, e, f, k, g);
      }
      h["flixel.system.debug.watch.Watch"] = wj;
      wj.__name__ = "flixel.system.debug.watch.Watch";
      wj.__super__ = Se;
      wj.prototype = q(Se.prototype, {
        __class__: wj
      });
      function Yn(a, b, c, d, e, f, k, g) {
        Se.call(this, a, b, c, d, e, f, k, g);
      }
      h["flixel.system.debug.watch.Tracker"] = Yn;
      Yn.__name__ = "flixel.system.debug.watch.Tracker";
      Yn.__super__ = wj;
      Yn.prototype = q(wj.prototype, {
        __class__: Yn
      });
      function xn() {
        this.drawOnTop = false;
        this.list = [];
        this.addPlugin(Fc.globalManager = new Al());
        this.addPlugin(ka.globalManager = new Bl());
        this.addPlugin(el.globalManager = new fl());
      }
      h["flixel.system.frontEnds.PluginFrontEnd"] = xn;
      xn.__name__ = "flixel.system.frontEnds.PluginFrontEnd";
      xn.prototype = {
        addPlugin: function (a) {
          this.list.push(a);
          return a;
        },
        __class__: xn
      };
      function zn() {
        this.volume = 1;
        this.list = new Ra();
        this.defaultSoundGroup = new hl();
        this.defaultMusicGroup = new hl();
        this.soundTrayEnabled = true;
        this.muteKeys = [48, 96];
        this.volumeDownKeys = [189, 109];
        this.volumeUpKeys = [187, 107];
        this.muted = false;
        this.loadSavedPrefs();
      }
      h["flixel.system.frontEnds.SoundFrontEnd"] = zn;
      zn.__name__ = "flixel.system.frontEnds.SoundFrontEnd";
      zn.prototype = {
        playMusic: function (a, b, c, d) {
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = 1;
          }
          if (d == null) {
            d = this.defaultMusicGroup;
          }
          if (this.music == null) {
            this.music = new ce();
          } else if (this.music.active) {
            var e = this.music;
            e.cleanup(e.autoDestroy, true);
          }
          this.music.loadEmbedded(a, c);
          this.music.set_volume(b);
          this.music.persist = true;
          d.add(this.music);
          this.music.play();
        },
        load: function (a, b, c, d, e, f, k, r, n) {
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 1;
          }
          if (a == null && k == null) {
            g.log.advanced("FlxG.sound.load() requires either\nan embedded sound or a URL to work.", Ba.WARNING, true);
            return null;
          }
          var h = this.list.recycle(ce);
          if (a != null) {
            h.loadEmbedded(a, c, e, r);
            this.loadHelper(h, b, d, f);
            if (n != null && h._sound != null) {
              n();
            }
          } else {
            a = n;
            if (f) {
              a = function () {
                h.play();
                if (n != null) {
                  n();
                }
              };
            }
            h.loadStream(k, c, e, r, a);
            this.loadHelper(h, b, d);
          }
          return h;
        },
        loadHelper: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = this.defaultSoundGroup;
          }
          a.set_volume(b);
          c.add(a);
          if (d) {
            a.play();
          }
          return a;
        },
        play: function (a, b, c, d, e, f) {
          if (e == null) {
            e = true;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 1;
          }
          if (typeof a == "string") {
            if (W.exists(a, "SOUND") || W.exists(a, "MUSIC")) {
              a = W.getSound(a, true);
            } else {
              g.log.advanced("Could not find a Sound asset with an ID of '" + a + "'.", Ba.ERROR, true);
              a = null;
            }
          }
          a = this.list.recycle(ce).loadEmbedded(a, c, e, f);
          return this.loadHelper(a, b, d, true);
        },
        pause: function () {
          if (this.music != null && this.music.exists && this.music.active) {
            this.music.pause();
          }
          for (var a = 0, b = this.list.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.exists && c.active) {
              c.pause();
            }
          }
        },
        destroy: function (a) {
          if (a == null) {
            a = false;
          }
          if (this.music != null && (!!a || !this.music.persist)) {
            this.music.destroy();
            this.music = null;
          }
          for (var b = 0, c = this.list.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && (!!a || !d.persist)) {
              d.destroy();
            }
          }
        },
        toggleMuted: function () {
          this.muted = !this.muted;
          if (this.volumeHandler != null) {
            this.volumeHandler(this.muted ? 0 : this.volume);
          }
          this.showSoundTray(true);
        },
        changeVolume: function (a) {
          this.muted = false;
          this.set_volume(this.volume + a);
          this.showSoundTray(a > 0);
        },
        showSoundTray: function (a) {
          if (a == null) {
            a = false;
          }
          if (g.game.soundTray != null && this.soundTrayEnabled) {
            g.game.soundTray.show(a);
          }
        },
        update: function (a) {
          if (this.music != null && this.music.active) {
            this.music.update(a);
          }
          if (this.list != null && this.list.active) {
            this.list.update(a);
          }
          if (g.keys.checkKeyArrayState(this.muteKeys, -1)) {
            this.toggleMuted();
          } else if (g.keys.checkKeyArrayState(this.volumeUpKeys, -1)) {
            this.changeVolume(0.1);
          } else if (g.keys.checkKeyArrayState(this.volumeDownKeys, -1)) {
            this.changeVolume(-0.1);
          }
        },
        onFocusLost: function () {
          if (this.music != null) {
            this.music.onFocusLost();
          }
          for (var a = 0, b = this.list.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.onFocusLost();
            }
          }
        },
        onFocus: function () {
          if (this.music != null) {
            this.music.onFocus();
          }
          for (var a = 0, b = this.list.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.onFocus();
            }
          }
        },
        loadSavedPrefs: function () {
          if (g.save.status._hx_index == 1) {
            if (g.save.data.volume != null) {
              this.set_volume(g.save.data.volume);
            }
            if (g.save.data.mute != null) {
              this.muted = g.save.data.mute;
            }
          }
        },
        set_volume: function (a) {
          a = a < 0 ? 0 : a;
          a = a > 1 ? 1 : a;
          if (this.volumeHandler != null) {
            this.volumeHandler(this.muted ? 0 : a);
          }
          return this.volume = a;
        },
        __class__: zn,
        __properties__: {
          set_volume: "set_volume"
        }
      };
      function yn() {
        this.paused = this.stepRequested = false;
      }
      h["flixel.system.frontEnds.VCRFrontEnd"] = yn;
      yn.__name__ = "flixel.system.frontEnds.VCRFrontEnd";
      yn.prototype = {
        __class__: yn
      };
      function Ek() {
        this.silent = false;
        this.volumeUpSound = this.volumeDownSound = "flixel/sounds/beep";
        this._defaultScale = 2;
        this._width = 80;
        $a.call(this);
        this.set_visible(false);
        this.set_scaleX(this._defaultScale);
        this.set_scaleY(this._defaultScale);
        var a = new Nc(new T(this._width, 30, true, 2130706432));
        this.screenCenter();
        this.addChild(a);
        var b = new Xc();
        b.set_width(a.get_width());
        b.set_height(a.get_height());
        b.set_multiline(true);
        b.set_wordWrap(true);
        b.set_selectable(false);
        a = new nd(Qd.FONT_DEFAULT, 10, 16777215);
        a.align = 0;
        b.set_defaultTextFormat(a);
        this.addChild(b);
        b.set_text("VOLUME");
        b.set_y(16);
        b = 10;
        var c = 14;
        this._bars = [];
        for (var d = 0; d < 10;) {
          a = d++;
          a = new Nc(new T(4, a + 1, false, -1));
          a.set_x(b);
          a.set_y(c);
          this.addChild(a);
          this._bars.push(a);
          b += 6;
          --c;
        }
        this.set_y(-this.get_height());
        this.set_visible(false);
      }
      h["flixel.system.ui.FlxSoundTray"] = Ek;
      Ek.__name__ = "flixel.system.ui.FlxSoundTray";
      Ek.__super__ = $a;
      Ek.prototype = q($a.prototype, {
        update: function (a) {
          if (this._timer > 0) {
            this._timer -= a / 1000;
          } else if (this.get_y() > -this.get_height()) {
            this.set_y(this.get_y() - a / 1000 * this.get_height() * 0.5);
            if (this.get_y() <= -this.get_height()) {
              this.set_visible(false);
              this.active = false;
              if (g.save.status._hx_index == 1) {
                g.save.data.mute = g.sound.muted;
                g.save.data.volume = g.sound.volume;
                g.save.flush();
              }
            }
          }
        },
        show: function (a) {
          if (a == null) {
            a = false;
          }
          if (!this.silent) {
            a = Qd.getSound(a ? this.volumeUpSound : this.volumeDownSound);
            if (a != null) {
              g.sound.load(a).play();
            }
          }
          this._timer = 1;
          this.set_y(0);
          this.set_visible(true);
          this.active = true;
          a = Math.round(g.sound.volume * 10);
          if (g.sound.muted) {
            a = 0;
          }
          for (var b = 0, c = this._bars.length; b < c;) {
            var d = b++;
            if (d < a) {
              this._bars[d].set_alpha(1);
            } else {
              this._bars[d].set_alpha(0.5);
            }
          }
        },
        screenCenter: function () {
          this.set_scaleX(this._defaultScale);
          this.set_scaleY(this._defaultScale);
          this.set_x((na.get_current().stage.stageWidth - this._width * this._defaultScale) * 0.5 - g.game.get_x());
        },
        __class__: Ek
      });
      function gi(a, b, c) {
        if (c == null) {
          c = false;
        }
        this.toggleMode = this.toggled = this._mouseDown = false;
        this.enabled = true;
        $a.call(this);
        if (a != null) {
          this.changeIcon(a);
        }
        this.upHandler = b;
        this.toggleMode = c;
        this.addEventListener("mouseUp", l(this, this.onMouseUp));
        this.addEventListener("mouseDown", l(this, this.onMouseDown));
        this.addEventListener("mouseOut", l(this, this.onMouseOut));
        this.addEventListener("mouseOver", l(this, this.onMouseOver));
      }
      h["flixel.system.ui.FlxSystemButton"] = gi;
      gi.__name__ = "flixel.system.ui.FlxSystemButton";
      gi.__interfaces__ = [B];
      gi.__super__ = $a;
      gi.prototype = q($a.prototype, {
        changeIcon: function (a) {
          if (this._icon != null) {
            this.removeChild(this._icon);
          }
          tg.fixSize(a);
          this._icon = new Nc(a);
          this.addChild(this._icon);
        },
        destroy: function () {
          this.removeEventListener("mouseUp", l(this, this.onMouseUp));
          this.removeEventListener("mouseDown", l(this, this.onMouseDown));
          this.removeEventListener("mouseOut", l(this, this.onMouseOut));
          this.removeEventListener("mouseOver", l(this, this.onMouseOver));
          this.upHandler = this._icon = null;
        },
        onMouseUp: function (a) {
          if (this.enabled && this._mouseDown) {
            this.set_toggled(!this.toggled);
            this._mouseDown = false;
            if (this.upHandler != null) {
              this.upHandler();
            }
          }
        },
        onMouseDown: function (a) {
          this._mouseDown = true;
        },
        onMouseOver: function (a) {
          if (this.enabled) {
            this.set_alpha(this.get_alpha() - 0.2);
          }
        },
        onMouseOut: function (a) {
          if (this.enabled) {
            this.set_alpha(this.get_alpha() + 0.2);
          }
        },
        set_toggled: function (a) {
          if (this.toggleMode) {
            this.set_alpha(a ? 0.3 : 1);
          }
          return this.toggled = a;
        },
        __class__: gi,
        __properties__: q($a.prototype.__properties__, {
          set_toggled: "set_toggled"
        })
      });
      function bp(a, b, c, d, e) {
        this.format = new nd(null, null, a, b, c, e);
        this.borderColor = d == null ? 0 : d;
      }
      h["flixel.text.FlxTextFormat"] = bp;
      bp.__name__ = "flixel.text.FlxTextFormat";
      bp.prototype = {
        __class__: bp
      };
      function cp(a, b, c) {
        this.range = new Zn(b, c);
        this.format = a;
      }
      h["flixel.text._FlxText.FlxTextFormatRange"] = cp;
      cp.__name__ = "flixel.text._FlxText.FlxTextFormatRange";
      cp.prototype = {
        __class__: cp
      };
      var Ta = x["flixel.text.FlxTextBorderStyle"] = {
        __ename__: "flixel.text.FlxTextBorderStyle",
        __constructs__: null,
        NONE: {
          _hx_name: "NONE",
          _hx_index: 0,
          __enum__: "flixel.text.FlxTextBorderStyle",
          toString: p
        },
        SHADOW: {
          _hx_name: "SHADOW",
          _hx_index: 1,
          __enum__: "flixel.text.FlxTextBorderStyle",
          toString: p
        },
        OUTLINE: {
          _hx_name: "OUTLINE",
          _hx_index: 2,
          __enum__: "flixel.text.FlxTextBorderStyle",
          toString: p
        },
        OUTLINE_FAST: {
          _hx_name: "OUTLINE_FAST",
          _hx_index: 3,
          __enum__: "flixel.text.FlxTextBorderStyle",
          toString: p
        }
      };
      Ta.__constructs__ = [Ta.NONE, Ta.SHADOW, Ta.OUTLINE, Ta.OUTLINE_FAST];
      var En = {
        fromOpenFL: function (a) {
          switch (a) {
            case 0:
              return "center";
            case 2:
              return "justify";
            case 3:
              return "left";
            case 4:
              return "right";
            default:
              return "left";
          }
        },
        toOpenFL: function (a) {
          switch (a) {
            case "center":
              return 0;
            case "justify":
              return 2;
            case "left":
              return 3;
            case "right":
              return 4;
            default:
              return 3;
          }
        }
      };
      function $n() {
        this._tileObjects = [];
        hc.call(this);
        this.flixelType = 3;
        this.set_immovable(true);
        this.set_moves(false);
      }
      h["flixel.tile.FlxBaseTilemap"] = $n;
      $n.__name__ = "flixel.tile.FlxBaseTilemap";
      $n.__super__ = hc;
      $n.prototype = q(hc.prototype, {
        getTileIndexByCoords: function (a) {
          throw K.thrown("getTileIndexByCoords must be implemented");
        },
        overlapsWithCallback: function (a, b, c, d) {
          throw K.thrown("overlapsWithCallback must be implemented");
        },
        destroy: function () {
          this._data = null;
          hc.prototype.destroy.call(this);
        },
        overlaps: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          var d = Ra.resolveGroup(a);
          if (d != null) {
            var e = this;
            var f = b;
            return d.any(function (a) {
              var b = f;
              if (b == null) {
                b = false;
              }
              if (a.flixelType == 1 || a.flixelType == 3) {
                return e.overlapsWithCallback(a);
              } else {
                return e.overlaps(a, b, c);
              }
            });
          }
          if (a.flixelType == 1 || a.flixelType == 3) {
            return this.overlapsWithCallback(a);
          } else {
            return this.overlaps(a, false, null);
          }
        },
        overlapsPoint: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          if (b) {
            if (c == null) {
              c = g.camera;
            }
            b = c.scroll;
            c = b.x;
            var d = b.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.set_x(a.x - c);
            a.set_y(a.y - d);
            if (b._weak) {
              b.put();
            }
            b = a;
            if (b._weak) {
              b.put();
            }
          }
          return this.tileAtPointAllowsCollisions(a);
        },
        tileAtPointAllowsCollisions: function (a) {
          a = this.getTileIndexByCoords(a);
          if (a < 0 || a >= this._data.length) {
            return false;
          } else {
            return this._tileObjects[this._data[a]].allowCollisions > 0;
          }
        },
        __class__: $n
      });
      function ao(a, b, c, d) {
        G.call(this, a, b);
        this.makeGraphic(c, d, 0, true);
        this.set_active(false);
        this.set_immovable(true);
        this.set_moves(false);
      }
      h["flixel.tile.FlxTileblock"] = ao;
      ao.__name__ = "flixel.tile.FlxTileblock";
      ao.__super__ = G;
      ao.prototype = q(G.prototype, {
        destroy: function () {
          this.tileSprite = da.destroy(this.tileSprite);
          G.prototype.destroy.call(this);
        },
        __class__: ao
      });
      function va() {}
      h["flixel.tweens.FlxEase"] = va;
      va.__name__ = "flixel.tweens.FlxEase";
      va.linear = function (a) {
        return a;
      };
      va.quadOut = function (a) {
        return -a * (a - 2);
      };
      va.quadInOut = function (a) {
        if (a <= 0.5) {
          return a * a * 2;
        } else {
          return 1 - --a * a * 2;
        }
      };
      va.cubeIn = function (a) {
        return a * a * a;
      };
      va.cubeOut = function (a) {
        return 1 + --a * a * a;
      };
      va.cubeInOut = function (a) {
        if (a <= 0.5) {
          return a * a * a * 4;
        } else {
          return 1 + --a * a * a * 4;
        }
      };
      va.quartIn = function (a) {
        return a * a * a * a;
      };
      va.quartOut = function (a) {
        return 1 - --a * a * a * a;
      };
      va.quartInOut = function (a) {
        if (a <= 0.5) {
          return a * a * a * a * 8;
        }
        a = a * 2 - 2;
        return (1 - a * a * a * a) / 2 + 0.5;
      };
      va.sineIn = function (a) {
        return -Math.cos(va.PI2 * a) + 1;
      };
      va.sineOut = function (a) {
        return Math.sin(va.PI2 * a);
      };
      va.circOut = function (a) {
        return Math.sqrt(1 - (a - 1) * (a - 1));
      };
      va.elasticInOut = function (a) {
        if (a < 0.5) {
          return Math.pow(2, (a -= 0.5) * 10) * -0.5 * Math.sin((a - va.ELASTIC_PERIOD / 4) * 2 * Math.PI / va.ELASTIC_PERIOD);
        } else {
          return Math.pow(2, (a -= 0.5) * -10) * Math.sin((a - va.ELASTIC_PERIOD / 4) * 2 * Math.PI / va.ELASTIC_PERIOD) * 0.5 + 1;
        }
      };
      function ka(a, b) {
        this._running = this._waitingForRestart = false;
        this.duration = this.scale = this.executions = this.startDelay = this.loopDelay = this._secondsSinceStart = this._delayToUse = 0;
        this.active = false;
        a = this.resolveTweenOptions(a);
        this.set_type(a.type);
        this.onStart = a.onStart;
        this.onUpdate = a.onUpdate;
        this.onComplete = a.onComplete;
        this.ease = a.ease;
        this.setDelays(a.startDelay, a.loopDelay);
        this.manager = b ?? ka.globalManager;
      }
      h["flixel.tweens.FlxTween"] = ka;
      ka.__name__ = "flixel.tweens.FlxTween";
      ka.__interfaces__ = [B];
      ka.tween = function (a, b, c, d) {
        if (c == null) {
          c = 1;
        }
        return ka.globalManager.tween(a, b, c, d);
      };
      ka.num = function (a, b, c, d, e) {
        if (c == null) {
          c = 1;
        }
        return ka.globalManager.num(a, b, c, d, e);
      };
      ka.color = function (a, b, c, d, e) {
        if (b == null) {
          b = 1;
        }
        return ka.globalManager.color(a, b, c, d, e);
      };
      ka.cancelTweensOf = function (a, b) {
        ka.globalManager.cancelTweensOf(a, b);
      };
      ka.prototype = {
        resolveTweenOptions: function (a) {
          if (a == null) {
            a = {
              type: 8
            };
          }
          if (a.type == null) {
            a.type = 8;
          }
          return a;
        },
        destroy: function () {
          this._nextTweenInChain = this._chainedTweens = this.manager = this.ease = this.onComplete = this.onUpdate = this.onStart = null;
        },
        update: function (a) {
          this._secondsSinceStart += a;
          a = this.executions > 0 ? this.loopDelay : this.startDelay;
          if (!(this._secondsSinceStart < a)) {
            this.scale = Math.max(this._secondsSinceStart - a, 0) / this.duration;
            if (this.ease != null) {
              this.scale = this.ease(this.scale);
            }
            if (this.backward) {
              this.scale = 1 - this.scale;
            }
            if (this._secondsSinceStart > a && !this._running && (this._running = true, this.onStart != null)) {
              this.onStart(this);
            }
            if (this._secondsSinceStart >= this.duration + a) {
              this.scale = this.backward ? 0 : 1;
              this.finished = true;
            } else if (this.onUpdate != null) {
              this.onUpdate(this);
            }
          }
        },
        start: function () {
          this._waitingForRestart = false;
          this._secondsSinceStart = 0;
          this._delayToUse = this.executions > 0 ? this.loopDelay : this.startDelay;
          if (this.duration == 0) {
            this.set_active(false);
            return this;
          }
          this.set_active(true);
          this.finished = this._running = false;
          return this;
        },
        cancel: function () {
          this.onEnd();
          if (this.manager != null) {
            this.manager.remove(this);
          }
        },
        finish: function () {
          this.executions++;
          if (this.onComplete != null) {
            this.onComplete(this);
          }
          var a = this.type & -17;
          if (a == 1 || a == 8) {
            this.onEnd();
            this._secondsSinceStart = this.duration + this.startDelay;
            if (a == 8 && this.manager != null) {
              this.manager.remove(this);
            }
          }
          if (a == 2 || a == 4) {
            this._secondsSinceStart = (this._secondsSinceStart - this._delayToUse) % this.duration + this._delayToUse;
            this.scale = Math.max(this._secondsSinceStart - this._delayToUse, 0) / this.duration;
            if (this.ease != null && this.scale > 0 && this.scale < 1) {
              this.scale = this.ease(this.scale);
            }
            if (a == 4 && (this.backward = !this.backward)) {
              this.scale = 1 - this.scale;
            }
            this.restart();
          }
        },
        onEnd: function () {
          this.setVarsOnEnd();
          this.processTweenChain();
        },
        setVarsOnEnd: function () {
          this.set_active(false);
          this._running = false;
          this.finished = true;
        },
        processTweenChain: function () {
          if (this._chainedTweens != null && !(this._chainedTweens.length <= 0)) {
            this._nextTweenInChain = this._chainedTweens.shift();
            this.doNextTween(this._nextTweenInChain);
            this._chainedTweens = null;
          }
        },
        doNextTween: function (a) {
          if (!a.active) {
            a.start();
            this.manager.add_flixel_tweens_FlxTween(a);
          }
          a.setChain(this._chainedTweens);
        },
        setChain: function (a) {
          if (a != null) {
            this._chainedTweens = this._chainedTweens == null ? a : this._chainedTweens.concat(a);
          }
        },
        restart: function () {
          if (this.active) {
            this.start();
          } else {
            this._waitingForRestart = true;
          }
        },
        isTweenOf: function (a, b) {
          return false;
        },
        setDelays: function (a, b) {
          this.set_startDelay(a ?? 0);
          this.set_loopDelay(b ?? 0);
          return this;
        },
        set_startDelay: function (a) {
          a = Math.abs(a);
          if (this.executions == 0) {
            this._delayToUse = a;
          }
          return this.startDelay = a;
        },
        set_loopDelay: function (a) {
          a = Math.abs(a);
          if (this.executions > 0) {
            this._secondsSinceStart = Math.max(this._secondsSinceStart - this._delayToUse, 0) / this.duration * this.duration + Math.max(a - this.loopDelay, 0);
            this._delayToUse = a;
          }
          return this.loopDelay = a;
        },
        set_type: function (a) {
          if (a == 0) {
            a = 8;
          } else if (a == 16) {
            a = 17;
          }
          this.backward = (a & 16) > 0;
          return this.type = a;
        },
        set_active: function (a) {
          this.active = a;
          if (this._waitingForRestart) {
            this.restart();
          }
          return a;
        },
        __class__: ka,
        __properties__: {
          set_loopDelay: "set_loopDelay",
          set_startDelay: "set_startDelay",
          set_type: "set_type",
          set_active: "set_active"
        }
      };
      function Bl() {
        this._tweens = [];
        Ea.call(this);
        this.set_visible(false);
        g.signals.preStateSwitch.add(l(this, this.clear));
      }
      h["flixel.tweens.FlxTweenManager"] = Bl;
      Bl.__name__ = "flixel.tweens.FlxTweenManager";
      Bl.__super__ = Ea;
      Bl.prototype = q(Ea.prototype, {
        add_flixel_tweens_misc_ColorTween: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return null;
          }
          this._tweens.push(a);
          if (b) {
            a.start();
          }
          return a;
        },
        add_flixel_tweens_misc_NumTween: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return null;
          }
          this._tweens.push(a);
          if (b) {
            a.start();
          }
          return a;
        },
        add_flixel_tweens_misc_VarTween: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return null;
          }
          this._tweens.push(a);
          if (b) {
            a.start();
          }
          return a;
        },
        add_flixel_tweens_FlxTween: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return null;
          }
          this._tweens.push(a);
          if (b) {
            a.start();
          }
          return a;
        },
        tween: function (a, b, c, d) {
          if (c == null) {
            c = 1;
          }
          d = new Cl(d, this);
          d.tween(a, b, c);
          return this.add_flixel_tweens_misc_VarTween(d);
        },
        num: function (a, b, c, d, e) {
          if (c == null) {
            c = 1;
          }
          d = new Dl(d, this);
          d.tween(a, b, c, e);
          return this.add_flixel_tweens_misc_NumTween(d);
        },
        color: function (a, b, c, d, e) {
          if (b == null) {
            b = 1;
          }
          e = new El(e, this);
          e.tween(b, c, d, a);
          return this.add_flixel_tweens_misc_ColorTween(e);
        },
        destroy: function () {
          Ea.prototype.destroy.call(this);
          g.signals.preStateSwitch.remove(l(this, this.clear));
        },
        update: function (a) {
          var b = null;
          for (var c = 0, d = this._tweens; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.active) {
              e.update(a);
              if (e.finished) {
                if (b == null) {
                  b = [];
                }
                b.push(e);
              }
            }
          }
          if (b != null) {
            while (b.length > 0) {
              b.shift().finish();
            }
          }
        },
        remove: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a == null) {
            return null;
          }
          a.set_active(false);
          if (b) {
            a.destroy();
          }
          b = this._tweens;
          var c = b.indexOf(a);
          if (c != -1) {
            b[c] = b[b.length - 1];
            b.pop();
          }
          return a;
        },
        clear: function () {
          for (var a = 0, b = this._tweens; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.set_active(false);
              c.destroy();
            }
          }
          this._tweens.splice(0, this._tweens.length);
        },
        cancelTweensOf: function (a, b) {
          this.forEachTweensOf(a, b, function (a) {
            a.cancel();
          });
        },
        forEachTweensOf: function (a, b, c) {
          if (a == null) {
            throw K.thrown("Cannot cancel tween variables of an object that is null.");
          }
          if (b == null || b.length == 0) {
            for (b = this._tweens.length; b-- > 0;) {
              var d = this._tweens[b];
              if (d.isTweenOf(a)) {
                c(d);
              }
            }
          } else {
            var e = [];
            for (var f = 0; f < b.length;) {
              var k = b[f];
              ++f;
              d = a;
              k = k.split(".");
              var g = k.pop();
              for (var n = 0; n < k.length;) {
                var h = k[n];
                ++n;
                d = ma.getProperty(d, h);
                if (!ma.isObject(d)) {
                  break;
                }
              }
              if (ma.isObject(d)) {
                e.push({
                  object: d,
                  field: g
                });
              }
            }
            for (b = this._tweens.length; b-- > 0;) {
              d = this._tweens[b];
              f = 0;
              while (f < e.length) {
                a = e[f];
                ++f;
                if (d.isTweenOf(a.object, a.field)) {
                  c(d);
                  break;
                }
              }
            }
          }
        },
        forEach: function (a) {
          for (var b = 0, c = this._tweens; b < c.length;) {
            var d = c[b];
            ++b;
            a(d);
          }
        },
        __class__: Bl
      });
      function El(a, b) {
        ka.call(this, a, b);
      }
      h["flixel.tweens.misc.ColorTween"] = El;
      El.__name__ = "flixel.tweens.misc.ColorTween";
      El.__super__ = ka;
      El.prototype = q(ka.prototype, {
        destroy: function () {
          ka.prototype.destroy.call(this);
          this.sprite = null;
        },
        tween: function (a, b, c, d) {
          this.color = this.startColor = b;
          this.endColor = c;
          this.duration = a;
          this.sprite = d;
          this.start();
          return this;
        },
        update: function (a) {
          ka.prototype.update.call(this, a);
          var b = this.startColor;
          var c = this.endColor;
          var d = this.scale;
          if (d == null) {
            d = 0.5;
          }
          a = ((c >> 16 & 255) - (b >> 16 & 255)) * d + (b >> 16 & 255) | 0;
          var e = ((c >> 8 & 255) - (b >> 8 & 255)) * d + (b >> 8 & 255) | 0;
          var f = ((c & 255) - (b & 255)) * d + (b & 255) | 0;
          c = ((c >> 24 & 255) - (b >> 24 & 255)) * d + (b >> 24 & 255) | 0;
          if (c == null) {
            c = 255;
          }
          b = xb._new();
          if (c == null) {
            c = 255;
          }
          b = (b & -16711681 | (a > 255 ? 255 : a < 0 ? 0 : a) << 16) & -65281 | (e > 255 ? 255 : e < 0 ? 0 : e) << 8;
          b &= -256;
          b |= f > 255 ? 255 : f < 0 ? 0 : f;
          b &= 16777215;
          this.color = b |= (c > 255 ? 255 : c < 0 ? 0 : c) << 24;
          if (this.sprite != null) {
            this.sprite.set_color(this.color);
            this.sprite.set_alpha((this.color >> 24 & 255) / 255);
          }
        },
        isTweenOf: function (a, b) {
          if (this.sprite == a) {
            if (b != null) {
              return b == "color";
            } else {
              return true;
            }
          } else {
            return false;
          }
        },
        __class__: El
      });
      function Dl(a, b) {
        ka.call(this, a, b);
      }
      h["flixel.tweens.misc.NumTween"] = Dl;
      Dl.__name__ = "flixel.tweens.misc.NumTween";
      Dl.__super__ = ka;
      Dl.prototype = q(ka.prototype, {
        destroy: function () {
          ka.prototype.destroy.call(this);
          this._tweenFunction = null;
        },
        tween: function (a, b, c, d) {
          this._tweenFunction = d;
          this._start = this.value = a;
          this._range = b - this.value;
          this.duration = c;
          this.start();
          return this;
        },
        update: function (a) {
          ka.prototype.update.call(this, a);
          this.value = this._start + this._range * this.scale;
          if (this._tweenFunction != null) {
            this._tweenFunction(this.value);
          }
        },
        __class__: Dl
      });
      function Cl(a, b) {
        ka.call(this, a, b);
      }
      h["flixel.tweens.misc.VarTween"] = Cl;
      Cl.__name__ = "flixel.tweens.misc.VarTween";
      Cl.__super__ = ka;
      Cl.prototype = q(ka.prototype, {
        tween: function (a, b, c) {
          this._object = a;
          this._properties = b;
          this._propertyInfos = [];
          this.duration = c;
          this.start();
          this.initializeVars();
          return this;
        },
        update: function (a) {
          if (this._secondsSinceStart < (this.executions > 0 ? this.loopDelay : this.startDelay)) {
            ka.prototype.update.call(this, a);
          } else {
            if (isNaN(this._propertyInfos[0].startValue)) {
              this.setStartValues();
            }
            ka.prototype.update.call(this, a);
            if (this.active) {
              a = 0;
              for (var b = this._propertyInfos; a < b.length;) {
                var c = b[a];
                ++a;
                ma.setProperty(c.object, c.field, c.startValue + c.range * this.scale);
              }
            }
          }
        },
        initializeVars: function () {
          if (ma.isObject(this._properties)) {
            var a = ma.fields(this._properties);
          } else {
            throw K.thrown("Unsupported properties container - use an object containing key/value pairs.");
          }
          for (var b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            var d = this._object;
            for (var e = c.split("."), f = e.pop(), k = 0; k < e.length;) {
              var g = e[k];
              ++k;
              d = ma.getProperty(d, g);
              if (!ma.isObject(d)) {
                throw K.thrown("The object does not have the property \"" + g + "\" in \"" + c + "\"");
              }
            }
            this._propertyInfos.push({
              object: d,
              field: f,
              startValue: NaN,
              range: ma.getProperty(this._properties, c)
            });
          }
        },
        setStartValues: function () {
          for (var a = 0, b = this._propertyInfos; a < b.length;) {
            var c = b[a];
            ++a;
            if (ma.getProperty(c.object, c.field) == null) {
              throw K.thrown("The object does not have the property \"" + c.field + "\"");
            }
            var d = ma.getProperty(c.object, c.field);
            if (isNaN(d)) {
              throw K.thrown("The property \"" + c.field + "\" is not numeric.");
            }
            c.startValue = d;
            c.range -= d;
          }
        },
        destroy: function () {
          ka.prototype.destroy.call(this);
          this._propertyInfos = this._properties = this._object = null;
        },
        isTweenOf: function (a, b) {
          if (a == this._object && b == null) {
            return true;
          }
          for (var c = 0, d = this._propertyInfos; c < d.length;) {
            var e = d[c];
            ++c;
            if (a == e.object && (b == e.field || b == null)) {
              return true;
            }
          }
          return false;
        },
        __class__: Cl
      });
      var Dd = x["flixel.ui.FlxBarFillDirection"] = {
        __ename__: "flixel.ui.FlxBarFillDirection",
        __constructs__: null,
        LEFT_TO_RIGHT: {
          _hx_name: "LEFT_TO_RIGHT",
          _hx_index: 0,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        RIGHT_TO_LEFT: {
          _hx_name: "RIGHT_TO_LEFT",
          _hx_index: 1,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        TOP_TO_BOTTOM: {
          _hx_name: "TOP_TO_BOTTOM",
          _hx_index: 2,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        BOTTOM_TO_TOP: {
          _hx_name: "BOTTOM_TO_TOP",
          _hx_index: 3,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        HORIZONTAL_INSIDE_OUT: {
          _hx_name: "HORIZONTAL_INSIDE_OUT",
          _hx_index: 4,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        HORIZONTAL_OUTSIDE_IN: {
          _hx_name: "HORIZONTAL_OUTSIDE_IN",
          _hx_index: 5,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        VERTICAL_INSIDE_OUT: {
          _hx_name: "VERTICAL_INSIDE_OUT",
          _hx_index: 6,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        VERTICAL_OUTSIDE_IN: {
          _hx_name: "VERTICAL_OUTSIDE_IN",
          _hx_index: 7,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        }
      };
      Dd.__constructs__ = [Dd.LEFT_TO_RIGHT, Dd.RIGHT_TO_LEFT, Dd.TOP_TO_BOTTOM, Dd.BOTTOM_TO_TOP, Dd.HORIZONTAL_INSIDE_OUT, Dd.HORIZONTAL_OUTSIDE_IN, Dd.VERTICAL_INSIDE_OUT, Dd.VERTICAL_OUTSIDE_IN];
      function Tg(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.lastStatus = -1;
        this.maxInputMovement = Infinity;
        this.mouseButtons = [-1];
        this.allowSwiping = true;
        this.statusAnimations = ["normal", "highlight", "pressed", "disabled"];
        this.labelAlphas = [0.8, 1, 0.5, 0.3];
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var f = fa.pool.get().set(d, e);
        f._inPool = false;
        e = d = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var k = fa.pool.get().set(d, e);
        k._inPool = false;
        d = 0;
        e = 1;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var g = d;
        if (e == null) {
          e = 0;
        }
        if (g == null) {
          g = 0;
        }
        g = fa.pool.get().set(g, e);
        g._inPool = false;
        e = d = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        e = fa.pool.get().set(d, e);
        e._inPool = false;
        this.labelOffsets = [f, k, g, e];
        G.call(this, a, b);
        this.loadDefaultGraphic();
        this.onUp = new Bf(c);
        this.onDown = new Bf();
        this.onOver = new Bf();
        this.onOut = new Bf();
        this.set_status(0);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        na.get_current().stage.addEventListener("mouseUp", l(this, this.onUpEventListener));
        this.input = new oe(0);
      }
      h["flixel.ui.FlxTypedButton_flixel_text_FlxText"] = Tg;
      Tg.__name__ = "flixel.ui.FlxTypedButton_flixel_text_FlxText";
      Tg.__interfaces__ = [uh];
      Tg.__super__ = G;
      Tg.prototype = q(G.prototype, {
        graphicLoaded: function () {
          G.prototype.graphicLoaded.call(this);
          this.setupAnimation("normal", 0);
          this.setupAnimation("highlight", 1);
          this.setupAnimation("pressed", 2);
          this.setupAnimation("disabled", 3);
        },
        loadDefaultGraphic: function () {
          this.loadGraphic("flixel/images/ui/button.png", true, 80, 20);
        },
        setupAnimation: function (a, b) {
          b = Math.min(b, this.animation._sprite.get_numFrames() - 1) | 0;
          this.animation.add(a, [b]);
        },
        destroy: function () {
          this.set_label(da.destroy(this.label));
          this._spriteLabel = null;
          this.onUp = da.destroy(this.onUp);
          this.onDown = da.destroy(this.onDown);
          this.onOver = da.destroy(this.onOver);
          this.onOut = da.destroy(this.onOut);
          this.labelOffsets = da.putArray(this.labelOffsets);
          this.input = this.currentInput = this.labelAlphas = null;
          na.get_current().stage.removeEventListener("mouseUp", l(this, this.onUpEventListener));
          G.prototype.destroy.call(this);
        },
        update: function (a) {
          G.prototype.update.call(this, a);
          if (this.visible) {
            this.updateButton();
            if (this.lastStatus != this.status) {
              this.updateStatusAnimation();
              this.lastStatus = this.status;
            }
          }
          this.input.update();
        },
        updateStatusAnimation: function () {
          this.animation.play(this.statusAnimations[this.status]);
        },
        draw: function () {
          G.prototype.draw.call(this);
          if (this._spriteLabel != null && this._spriteLabel.visible) {
            this._spriteLabel.set_cameras(this._cameras);
            this._spriteLabel.draw();
          }
        },
        updateButton: function () {
          if (this.status != 3) {
            var a = this.checkMouseOverlap();
            a ||= this.checkTouchOverlap();
            if (this.currentInput != null && this.currentInput.get_justReleased() && a) {
              this.onUpHandler();
            }
            if (this.status != 0 && (!a || this.currentInput != null && this.currentInput.get_justReleased())) {
              this.onOutHandler();
            }
          }
        },
        checkMouseOverlap: function () {
          var a = false;
          for (var b = 0, c = this.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            for (var e = 0, f = this.mouseButtons; e < f.length;) {
              var k = f[e];
              ++e;
              k = gf.getByID(k);
              if (k != null && this.checkInput(g.mouse, k, k.justPressedPosition, d)) {
                a = true;
              }
            }
          }
          return a;
        },
        checkTouchOverlap: function () {
          var a = false;
          for (var b = 0, c = this.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            for (var e = 0, f = g.touches.list; e < f.length;) {
              var k = f[e];
              ++e;
              if (this.checkInput(k, k, k.justPressedPosition, d)) {
                a = true;
              }
            }
          }
          return a;
        },
        checkInput: function (a, b, c, d) {
          if (this.maxInputMovement != Infinity) {
            var e = 0;
            var f = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            f = fa.pool.get().set(e, f);
            f._inPool = false;
            f._weak = true;
            c = zk.distanceTo(c, a.getScreenPosition(null, f)) > this.maxInputMovement;
          } else {
            c = false;
          }
          if (c && b == this.currentInput) {
            this.currentInput = null;
          } else if (this.overlapsPoint(a.getWorldPosition(d, this._point), true, d)) {
            this.updateStatus(b);
            return true;
          }
          return false;
        },
        updateStatus: function (a) {
          if (a.get_justPressed()) {
            this.currentInput = a;
            this.onDownHandler();
          } else if (this.status == 0) {
            if (this.allowSwiping && a.get_pressed()) {
              this.onDownHandler();
            } else {
              this.onOverHandler();
            }
          }
        },
        updateLabelPosition: function () {
          if (this._spriteLabel != null) {
            this._spriteLabel.set_x((this.pixelPerfectPosition ? Math.floor(this.x) : this.x) + this.labelOffsets[this.status].x);
            this._spriteLabel.set_y((this.pixelPerfectPosition ? Math.floor(this.y) : this.y) + this.labelOffsets[this.status].y);
          }
        },
        updateLabelAlpha: function () {
          if (this._spriteLabel != null && this.labelAlphas.length > this.status) {
            this._spriteLabel.set_alpha(this.alpha * this.labelAlphas[this.status]);
          }
        },
        onUpEventListener: function (a) {
          if (this.visible && this.exists && this.active && this.status == 2) {
            this.onUpHandler();
          }
        },
        onUpHandler: function () {
          this.set_status(1);
          this.input.release();
          this.currentInput = null;
          var a = this.onUp;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        onDownHandler: function () {
          this.set_status(2);
          this.input.press();
          var a = this.onDown;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        onOverHandler: function () {
          if (g.mouse.enabled) {
            this.set_status(1);
            var a = this.onOver;
            if (a.callback != null) {
              a.callback();
            }
            if (a.sound != null) {
              a.sound.play(true);
            }
          } else {
            this.set_status(0);
          }
        },
        onOutHandler: function () {
          this.set_status(0);
          this.input.release();
          var a = this.onOut;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        set_label: function (a) {
          if (a != null) {
            a.scrollFactor.put();
            a.scrollFactor = this.scrollFactor;
          }
          this._spriteLabel = this.label = a;
          this.updateLabelPosition();
          return a;
        },
        set_status: function (a) {
          this.status = a;
          this.updateLabelAlpha();
          return this.status;
        },
        set_alpha: function (a) {
          G.prototype.set_alpha.call(this, a);
          this.updateLabelAlpha();
          return this.alpha;
        },
        set_x: function (a) {
          G.prototype.set_x.call(this, a);
          this.updateLabelPosition();
          return this.x;
        },
        set_y: function (a) {
          G.prototype.set_y.call(this, a);
          this.updateLabelPosition();
          return this.y;
        },
        get_justReleased: function () {
          return this.input.current == -1;
        },
        get_pressed: function () {
          var a = this.input;
          if (a.current != 1) {
            return a.current == 2;
          } else {
            return true;
          }
        },
        get_justPressed: function () {
          return this.input.current == 2;
        },
        __class__: Tg,
        __properties__: q(G.prototype.__properties__, {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased",
          set_status: "set_status",
          set_label: "set_label"
        })
      });
      function ub(a, b, c, d) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        Tg.call(this, a, b, d);
        a = 0;
        for (b = this.labelOffsets; a < b.length;) {
          d = b[a];
          ++a;
          var e = d.x;
          var f = d.y + 3;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          d.set_x(e);
          d.set_y(f);
        }
        if (c != null) {
          this.set_label(new Q(this.x + this.labelOffsets[0].x, this.y + this.labelOffsets[0].y, 80, c));
          this.label.setFormat(null, 8, 3355443, "center");
          this.label.set_alpha(this.labelAlphas[this.status]);
          this.label.drawFrame(true);
        }
      }
      h["flixel.ui.FlxButton"] = ub;
      ub.__name__ = "flixel.ui.FlxButton";
      ub.__super__ = Tg;
      ub.prototype = q(Tg.prototype, {
        resetHelpers: function () {
          Tg.prototype.resetHelpers.call(this);
          if (this.label != null) {
            var a = this.label;
            var b = this.get_width() | 0;
            a.set_fieldWidth(this.label.frameWidth = b);
            this.label.set_size(this.label._defaultFormat.size | 0);
          }
        },
        __class__: ub
      });
      function Bf(a, b) {
        this.callback = a;
        this.sound = b;
      }
      h["flixel.ui._FlxButton.FlxButtonEvent"] = Bf;
      Bf.__name__ = "flixel.ui._FlxButton.FlxButtonEvent";
      Bf.__interfaces__ = [B];
      Bf.prototype = {
        destroy: function () {
          this.callback = null;
          this.sound = da.destroy(this.sound);
        },
        __class__: Bf
      };
      function ze() {}
      h["flixel.util.FlxArrayUtil"] = ze;
      ze.__name__ = "flixel.util.FlxArrayUtil";
      ze.clearArray = function (a, b) {
        if (b == null) {
          b = false;
        }
        if (a == null) {
          return a;
        }
        if (b) {
          while (a.length > 0) {
            if (a.pop() instanceof Array) {
              ze.clearArray(a, b);
            }
          }
        } else {
          while (a.length > 0) {
            a.pop();
          }
        }
        return a;
      };
      ze.equals = function (a, b) {
        if (a == null && b == null) {
          return true;
        }
        if (a == null && b != null || a != null && b == null || a.length != b.length) {
          return false;
        }
        for (var c = 0, d = a.length; c < d;) {
          var e = c++;
          if (a[e] != b[e]) {
            return false;
          }
        }
        return true;
      };
      var xb = {
        __properties__: {
          get_hue: "get_hue"
        },
        fromHSB: function (a, b, c, d) {
          if (d == null) {
            d = 1;
          }
          var e = xb._new();
          b *= c;
          c -= b;
          var f = a % 360 / 60;
          a = b * (1 - Math.abs(f % 2 - 1)) + c;
          b += c;
          switch (f | 0) {
            case 0:
              if (d == null) {
                d = 1;
              }
              f = Math.round(b * 255);
              e = e & -16711681 | (f > 255 ? 255 : f < 0 ? 0 : f) << 16;
              f = Math.round(a * 255);
              e = e & -65281 | (f > 255 ? 255 : f < 0 ? 0 : f) << 8;
              f = Math.round(c * 255);
              e = e & -256 | (f > 255 ? 255 : f < 0 ? 0 : f);
              f = Math.round(d * 255);
              e = e & 16777215 | (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
              break;
            case 1:
              if (d == null) {
                d = 1;
              }
              f = Math.round(a * 255);
              e = e & -16711681 | (f > 255 ? 255 : f < 0 ? 0 : f) << 16;
              f = Math.round(b * 255);
              e = e & -65281 | (f > 255 ? 255 : f < 0 ? 0 : f) << 8;
              f = Math.round(c * 255);
              e = e & -256 | (f > 255 ? 255 : f < 0 ? 0 : f);
              f = Math.round(d * 255);
              e = e & 16777215 | (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
              break;
            case 2:
              if (d == null) {
                d = 1;
              }
              f = Math.round(c * 255);
              e = e & -16711681 | (f > 255 ? 255 : f < 0 ? 0 : f) << 16;
              f = Math.round(b * 255);
              e = e & -65281 | (f > 255 ? 255 : f < 0 ? 0 : f) << 8;
              f = Math.round(a * 255);
              e = e & -256 | (f > 255 ? 255 : f < 0 ? 0 : f);
              f = Math.round(d * 255);
              e = e & 16777215 | (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
              break;
            case 3:
              if (d == null) {
                d = 1;
              }
              f = Math.round(c * 255);
              e = e & -16711681 | (f > 255 ? 255 : f < 0 ? 0 : f) << 16;
              f = Math.round(a * 255);
              e = e & -65281 | (f > 255 ? 255 : f < 0 ? 0 : f) << 8;
              f = Math.round(b * 255);
              e = e & -256 | (f > 255 ? 255 : f < 0 ? 0 : f);
              f = Math.round(d * 255);
              e = e & 16777215 | (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
              break;
            case 4:
              if (d == null) {
                d = 1;
              }
              f = Math.round(a * 255);
              e = e & -16711681 | (f > 255 ? 255 : f < 0 ? 0 : f) << 16;
              f = Math.round(c * 255);
              e = e & -65281 | (f > 255 ? 255 : f < 0 ? 0 : f) << 8;
              f = Math.round(b * 255);
              e = e & -256 | (f > 255 ? 255 : f < 0 ? 0 : f);
              f = Math.round(d * 255);
              e = e & 16777215 | (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
              break;
            case 5:
              if (d == null) {
                d = 1;
              }
              f = Math.round(b * 255);
              e = e & -16711681 | (f > 255 ? 255 : f < 0 ? 0 : f) << 16;
              f = Math.round(c * 255);
              e = e & -65281 | (f > 255 ? 255 : f < 0 ? 0 : f) << 8;
              f = Math.round(a * 255);
              e = e & -256 | (f > 255 ? 255 : f < 0 ? 0 : f);
              f = Math.round(d * 255);
              e = e & 16777215 | (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
          }
          return e;
        },
        fromString: function (a) {
          var b = null;
          a = w.trim(a);
          if (xb.COLOR_REGEX.match(a)) {
            a = "0x" + xb.COLOR_REGEX.matched(2);
            b = xb._new(H.parseInt(a));
            if (a.length == 8) {
              b = b & 16777215 | -16777216;
            }
          } else {
            a = a.toUpperCase();
            var c = Object.keys(xb.colorLookup.h);
            for (var d = c.length, e = 0; e < d;) {
              var f = c[e++];
              if (f.toUpperCase() == a) {
                b = xb._new(xb.colorLookup.h[f]);
                break;
              }
            }
          }
          return b;
        },
        _new: function (a) {
          if (a == null) {
            a = 0;
          }
          return a;
        },
        get_hue: function (a) {
          a = Math.atan2(Math.sqrt(3) * ((a >> 8 & 255) / 255 - (a & 255) / 255), (a >> 16 & 255) / 255 * 2 - (a >> 8 & 255) / 255 - (a & 255) / 255);
          var b = 0;
          if (a != 0) {
            b = 180 / Math.PI * a;
          }
          if (b < 0) {
            return b + 360;
          } else {
            return b;
          }
        }
      };
      function af() {}
      h["flixel.util.FlxColorTransformUtil"] = af;
      af.__name__ = "flixel.util.FlxColorTransformUtil";
      af.setMultipliers = function (a, b, c, d, e) {
        a.redMultiplier = b;
        a.greenMultiplier = c;
        a.blueMultiplier = d;
        a.alphaMultiplier = e;
        return a;
      };
      af.hasRGBMultipliers = function (a) {
        if (a.redMultiplier == 1 && a.greenMultiplier == 1) {
          return a.blueMultiplier != 1;
        } else {
          return true;
        }
      };
      af.hasRGBOffsets = function (a) {
        if (a.redOffset == 0 && a.greenOffset == 0) {
          return a.blueOffset != 0;
        } else {
          return true;
        }
      };
      af.hasRGBAOffsets = function (a) {
        if (af.hasRGBOffsets(a)) {
          return true;
        } else {
          return a.alphaOffset != 0;
        }
      };
      function da() {}
      h["flixel.util.FlxDestroyUtil"] = da;
      da.__name__ = "flixel.util.FlxDestroyUtil";
      da.destroy = function (a) {
        if (a != null) {
          a.destroy();
        }
        return null;
      };
      da.destroyArray = function (a) {
        if (a != null) {
          for (var b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            da.destroy(c);
          }
          a.splice(0, a.length);
        }
        return null;
      };
      da.put = function (a) {
        if (a != null) {
          a.put();
        }
        return null;
      };
      da.putArray = function (a) {
        if (a != null) {
          for (var b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            da.put(c);
          }
          a.splice(0, a.length);
        }
        return null;
      };
      da.dispose = function (a) {
        if (a != null) {
          a.dispose();
        }
        return null;
      };
      da.disposeIfNotEqual = function (a, b, c) {
        if (a != null && (a.width != b || a.height != c)) {
          a.dispose();
        } else if (a != null) {
          return a;
        }
        return null;
      };
      da.removeChild = function (a, b) {
        if (a != null && b != null && a.contains(b)) {
          a.removeChild(b);
        }
        return null;
      };
      function td() {}
      h["flixel.util.FlxGradient"] = td;
      td.__name__ = "flixel.util.FlxGradient";
      td.createGradientMatrix = function (a, b, c, d, e) {
        if (e == null) {
          e = 90;
        }
        if (d == null) {
          d = 1;
        }
        var f = new Aa();
        e *= Math.PI / 180;
        f.createGradientBox(a, Dc.toFloat(b) / Dc.toFloat(d), e, 0, 0);
        a = [];
        b = 0;
        for (d = c.length; b < d;) {
          e = b++;
          a.push((c[e] >> 24 & 255) / 255);
        }
        e = [];
        if (c.length == 2) {
          e[0] = 0;
          e[1] = 255;
        } else {
          var k = 255 / (c.length - 1) | 0;
          e.push(0);
          b = 1;
          for (d = c.length - 1; b < d;) {
            c = b++;
            e.push(c * k);
          }
          e.push(255);
        }
        return {
          matrix: f,
          alpha: a,
          ratio: e
        };
      };
      td.createGradientFlxSprite = function (a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 90;
        }
        if (d == null) {
          d = 1;
        }
        a = td.createGradientBitmapData(a, b, c, d, e, f);
        b = new G();
        b.set_pixels(a);
        return b;
      };
      td.createGradientBitmapData = function (a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 90;
        }
        if (d == null) {
          d = 1;
        }
        if (Dc.gt(1, a)) {
          a = 1;
        }
        if (Dc.gt(1, b)) {
          b = 1;
        }
        var k = td.createGradientMatrix(a, b, c, d, e);
        e = new sg();
        f = f ? 1 : 0;
        e.get_graphics().beginGradientFill(0, c, k.alpha, k.ratio, k.matrix, 0, f, 0);
        e.get_graphics().drawRect(0, 0, Dc.toFloat(a), Dc.toFloat(b) / Dc.toFloat(d));
        f = new T(a, b, true, 0);
        if (d == 1) {
          f.draw(e);
        } else {
          k = new Nc(new T(a, Dc.toFloat(b) / Dc.toFloat(d) | 0, true, 0));
          k.get_bitmapData().draw(e);
          k.set_scaleY(Dc.toFloat(d));
          d = new Aa();
          d.scale(k.get_scaleX(), k.get_scaleY());
          f.draw(k, d);
          d = k.get_height();
          a = Dc.toFloat(a);
          e = k.get_height();
          b = new ea(0, d, a, Dc.toFloat(b) - e);
          f.fillRect(b, c[c.length - 1]);
        }
        return f;
      };
      td.overlayGradientOnBitmapData = function (a, b, c, d, e, f, k, g, n) {
        if (n == null) {
          n = true;
        }
        if (g == null) {
          g = 90;
        }
        if (k == null) {
          k = 1;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (b > a.width) {
          b = a.width;
        }
        if (c > a.height) {
          c = a.height;
        }
        b = td.createGradientBitmapData(b, c, d, k, g, n);
        a.copyPixels(b, new ea(0, 0, b.width, b.height), new kb(e, f), null, null, true);
        b.dispose();
        return a;
      };
      var un = x["flixel.util.FlxHorizontalAlign"] = {
        __ename__: "flixel.util.FlxHorizontalAlign",
        __constructs__: null,
        LEFT: {
          _hx_name: "LEFT",
          _hx_index: 0,
          __enum__: "flixel.util.FlxHorizontalAlign",
          toString: p
        },
        CENTER: {
          _hx_name: "CENTER",
          _hx_index: 1,
          __enum__: "flixel.util.FlxHorizontalAlign",
          toString: p
        },
        RIGHT: {
          _hx_name: "RIGHT",
          _hx_index: 2,
          __enum__: "flixel.util.FlxHorizontalAlign",
          toString: p
        }
      };
      un.__constructs__ = [un.LEFT, un.CENTER, un.RIGHT];
      function ag() {
        ua.call(this);
        this.client = this;
        this.objectEncoding = ag.defaultObjectEncoding;
      }
      h["openfl.net.SharedObject"] = ag;
      ag.__name__ = "openfl.net.SharedObject";
      ag.__resolveClass = function (a) {
        if (a != null) {
          if (w.startsWith(a, "neash.")) {
            a = w.replace(a, "neash.", "openfl.");
          }
          if (w.startsWith(a, "native.")) {
            a = w.replace(a, "native.", "openfl.");
          }
          if (w.startsWith(a, "flash.")) {
            a = w.replace(a, "flash.", "openfl.");
          }
          if (w.startsWith(a, "openfl._v2.")) {
            a = w.replace(a, "openfl._v2.", "openfl.");
          }
          if (w.startsWith(a, "openfl._legacy.")) {
            a = w.replace(a, "openfl._legacy.", "openfl.");
          }
          return h[a];
        } else {
          return null;
        }
      };
      ag.__super__ = ua;
      ag.prototype = q(ua.prototype, {
        clear: function () {
          this.data = {};
          try {
            var a = ug.getLocalStorage();
            if (a != null) {
              a.removeItem(this.__localPath + ":" + this.__name);
            }
          } catch (b) {
            Na.lastError = b;
          }
        },
        flush: function (a) {
          if (ma.fields(this.data).length == 0) {
            return 0;
          }
          a = qe.run(this.data);
          try {
            var b = ug.getLocalStorage();
            if (b != null) {
              b.removeItem(this.__localPath + ":" + this.__name);
              b.setItem(this.__localPath + ":" + this.__name, a);
            }
          } catch (c) {
            Na.lastError = c;
            return 1;
          }
          return 0;
        },
        __class__: ag
      });
      function cd() {
        ag.call(this);
      }
      h["flixel.util._FlxSave.FlxSharedObject"] = cd;
      cd.__name__ = "flixel.util._FlxSave.FlxSharedObject";
      cd.init = function () {
        if (cd.all == null) {
          cd.all = new V();
          var a = rb.current;
          if (a != null) {
            a.onExit.add(cd.onExit);
          }
        }
      };
      cd.onExit = function (a) {
        a = cd.all.h;
        var b = Object.keys(a);
        for (var c = b.length, d = 0; d < c;) {
          a[b[d++]].flush();
        }
      };
      cd.getDefaultLocalPath = function () {
        var a = na.get_current().stage.application.meta.h.company;
        return a = a == null || a == "" ? "HaxeFlixel" : Nd.validate(a);
      };
      cd.getLocal = function (a, b) {
        if (a == null || a == "") {
          throw new Rb("Error: Invalid name:\"" + a + "\".");
        }
        if (b == null) {
          b = "";
        }
        var c = b + "/" + a;
        cd.init();
        if (!Object.prototype.hasOwnProperty.call(cd.all.h, c)) {
          var d = null;
          try {
            if (new sa("(?:^|/)\\.\\./", "").match(b)) {
              throw new Rb("../ not allowed in localPath");
            }
            d = cd.getData(a, b);
          } catch (k) {
            Na.lastError = k;
          }
          if (b == "") {
            b = cd.getDefaultLocalPath();
          }
          var e = new cd();
          e.data = {};
          e.__localPath = b;
          e.__name = a;
          if (d != null && d != "") {
            try {
              var f = new de(d);
              f.setResolver({
                resolveEnum: Db.resolveEnum,
                resolveClass: ag.__resolveClass
              });
              e.data = f.unserialize();
            } catch (k) {
              Na.lastError = k;
            }
          }
          cd.all.h[c] = e;
        }
        return cd.all.h[c];
      };
      cd.getData = function (a, b) {
        var c = ug.getLocalStorage();
        if (c == null) {
          return null;
        }
        if (b != "") {
          return c.getItem(b + ":" + a);
        }
        b = c.getItem(cd.getDefaultLocalPath() + ":" + a);
        if (b != null) {
          return b;
        }
        b = c.getItem(window.location.pathname + ":" + a);
        return b ?? c.getItem(window.location.href + ":" + a);
      };
      cd.__super__ = ag;
      cd.prototype = q(ag.prototype, {
        __class__: cd
      });
      var ph = x["flixel.util.FlxSaveStatus"] = {
        __ename__: "flixel.util.FlxSaveStatus",
        __constructs__: null,
        EMPTY: {
          _hx_name: "EMPTY",
          _hx_index: 0,
          __enum__: "flixel.util.FlxSaveStatus",
          toString: p
        },
        BOUND: (u = function (a, b) {
          return {
            _hx_index: 1,
            name: a,
            path: b,
            __enum__: "flixel.util.FlxSaveStatus",
            toString: p
          };
        }, u._hx_name = "BOUND", u.__params__ = ["name", "path"], u),
        ERROR: (u = function (a) {
          return {
            _hx_index: 2,
            msg: a,
            __enum__: "flixel.util.FlxSaveStatus",
            toString: p
          };
        }, u._hx_name = "ERROR", u.__params__ = ["msg"], u)
      };
      ph.__constructs__ = [ph.EMPTY, ph.BOUND, ph.ERROR];
      function Fl(a, b) {
        this.dispatchOnce = false;
        this.listener = a;
        this.dispatchOnce = b;
      }
      h["flixel.util._FlxSignal.FlxSignalHandler"] = Fl;
      Fl.__name__ = "flixel.util._FlxSignal.FlxSignalHandler";
      Fl.__interfaces__ = [B];
      Fl.prototype = {
        destroy: function () {
          this.listener = null;
        },
        __class__: Fl
      };
      function xj() {}
      h["flixel.util.IFlxSignal"] = xj;
      xj.__name__ = "flixel.util.IFlxSignal";
      xj.__isInterface__ = true;
      xj.__interfaces__ = [B];
      xj.prototype = {
        __class__: xj
      };
      function sf() {
        this.processingListeners = false;
        this.handlers = [];
        this.pendingRemove = [];
      }
      h["flixel.util._FlxSignal.FlxBaseSignal"] = sf;
      sf.__name__ = "flixel.util._FlxSignal.FlxBaseSignal";
      sf.__interfaces__ = [xj];
      sf.prototype = {
        add: function (a) {
          if (a != null) {
            this.registerListener(a, false);
          }
        },
        remove: function (a) {
          if (a != null) {
            a = this.getHandler(a);
            if (a != null) {
              if (this.processingListeners) {
                this.pendingRemove.push(a);
              } else {
                M.remove(this.handlers, a);
                a.destroy();
              }
            }
          }
        },
        destroy: function () {
          da.destroyArray(this.handlers);
          this.pendingRemove = this.handlers = null;
        },
        registerListener: function (a, b) {
          var c = this.getHandler(a);
          if (c == null) {
            c = new Fl(a, b);
            this.handlers.push(c);
            return c;
          }
          if (c.dispatchOnce != b) {
            throw K.thrown("You cannot addOnce() then add() the same listener without removing the relationship first.");
          }
          return c;
        },
        getHandler: function (a) {
          for (var b = 0, c = this.handlers; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.listener == a) {
              return d;
            }
          }
          return null;
        },
        __class__: sf
      };
      function Zd() {
        sf.call(this);
        this.dispatch = l(this, this.dispatch0);
      }
      h["flixel.util._FlxSignal.FlxSignal0"] = Zd;
      Zd.__name__ = "flixel.util._FlxSignal.FlxSignal0";
      Zd.__super__ = sf;
      Zd.prototype = q(sf.prototype, {
        dispatch0: function () {
          this.processingListeners = true;
          for (var a = 0, b = this.handlers; a < b.length;) {
            var c = b[a];
            ++a;
            c.listener();
            if (c.dispatchOnce) {
              if (this.processingListeners) {
                this.pendingRemove.push(c);
              } else {
                M.remove(this.handlers, c);
                c.destroy();
              }
            }
          }
          this.processingListeners = false;
          a = 0;
          for (b = this.pendingRemove; a < b.length;) {
            c = b[a];
            ++a;
            if (this.processingListeners) {
              this.pendingRemove.push(c);
            } else {
              M.remove(this.handlers, c);
              c.destroy();
            }
          }
          if (this.pendingRemove.length > 0) {
            this.pendingRemove = [];
          }
        },
        __class__: Zd
      });
      function wf() {
        sf.call(this);
        this.dispatch = l(this, this.dispatch1);
      }
      h["flixel.util._FlxSignal.FlxSignal1"] = wf;
      wf.__name__ = "flixel.util._FlxSignal.FlxSignal1";
      wf.__super__ = sf;
      wf.prototype = q(sf.prototype, {
        dispatch1: function (a) {
          this.processingListeners = true;
          for (var b = 0, c = this.handlers; b < c.length;) {
            var d = c[b];
            ++b;
            d.listener(a);
            if (d.dispatchOnce) {
              if (this.processingListeners) {
                this.pendingRemove.push(d);
              } else {
                M.remove(this.handlers, d);
                d.destroy();
              }
            }
          }
          this.processingListeners = false;
          b = 0;
          for (c = this.pendingRemove; b < c.length;) {
            d = c[b];
            ++b;
            if (this.processingListeners) {
              this.pendingRemove.push(d);
            } else {
              M.remove(this.handlers, d);
              d.destroy();
            }
          }
          if (this.pendingRemove.length > 0) {
            this.pendingRemove = [];
          }
        },
        __class__: wf
      });
      function Ck() {
        sf.call(this);
        this.dispatch = l(this, this.dispatch2);
      }
      h["flixel.util._FlxSignal.FlxSignal2"] = Ck;
      Ck.__name__ = "flixel.util._FlxSignal.FlxSignal2";
      Ck.__super__ = sf;
      Ck.prototype = q(sf.prototype, {
        dispatch2: function (a, b) {
          this.processingListeners = true;
          for (var c = 0, d = this.handlers; c < d.length;) {
            var e = d[c];
            ++c;
            e.listener(a, b);
            if (e.dispatchOnce) {
              if (this.processingListeners) {
                this.pendingRemove.push(e);
              } else {
                M.remove(this.handlers, e);
                e.destroy();
              }
            }
          }
          this.processingListeners = false;
          c = 0;
          for (d = this.pendingRemove; c < d.length;) {
            e = d[c];
            ++c;
            if (this.processingListeners) {
              this.pendingRemove.push(e);
            } else {
              M.remove(this.handlers, e);
              e.destroy();
            }
          }
          if (this.pendingRemove.length > 0) {
            this.pendingRemove = [];
          }
        },
        __class__: Ck
      });
      function bo() {}
      h["flixel.util.FlxSort"] = bo;
      bo.__name__ = "flixel.util.FlxSort";
      bo.byY = function (a, b, c) {
        b = b.y;
        c = c.y;
        var d = 0;
        if (b < c) {
          d = a;
        } else if (b > c) {
          d = -a;
        }
        return d;
      };
      function Gc() {}
      h["flixel.util.FlxSpriteUtil"] = Gc;
      Gc.__name__ = "flixel.util.FlxSpriteUtil";
      Gc.drawLine = function (a, b, c, d, e, f, k) {
        if (f == null) {
          f = {
            thickness: 1,
            color: -1
          };
        }
        if (f.thickness == null) {
          f.thickness = 1;
        }
        if (f.color == null) {
          f.color = -1;
        }
        Gc.flashGfx.clear();
        if (f != null) {
          var g = f.color == null ? -16777216 : f.color;
          if (f.thickness == null) {
            f.thickness = 1;
          }
          if (f.pixelHinting == null) {
            f.pixelHinting = false;
          }
          if (f.miterLimit == null) {
            f.miterLimit = 3;
          }
          Gc.flashGfx.lineStyle(f.thickness, g & 16777215, (g >> 24 & 255) / 255, f.pixelHinting, f.scaleMode, f.capsStyle, f.jointStyle, f.miterLimit);
        }
        Gc.flashGfx.moveTo(b, c);
        Gc.flashGfx.lineTo(d, e);
        Gc.flashGfx.endFill();
        Gc.updateSpriteGraphic(a, k);
        return a;
      };
      Gc.drawCircle = function (a, b, c, d, e, f, k) {
        if (e == null) {
          e = -1;
        }
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = -1;
        }
        if (b == null) {
          b = -1;
        }
        if (b == -1 || c == -1) {
          var g = a.getGraphicMidpoint();
          if (b == -1) {
            b = g.x - a.x;
          }
          if (c == -1) {
            c = g.y - a.y;
          }
          g.put();
        }
        if (d < 1) {
          d = Math.min(a.frameWidth, a.frameHeight) / 2;
        }
        Gc.flashGfx.clear();
        if (f != null) {
          g = f.color == null ? -16777216 : f.color;
          if (f.thickness == null) {
            f.thickness = 1;
          }
          if (f.pixelHinting == null) {
            f.pixelHinting = false;
          }
          if (f.miterLimit == null) {
            f.miterLimit = 3;
          }
          Gc.flashGfx.lineStyle(f.thickness, g & 16777215, (g >> 24 & 255) / 255, f.pixelHinting, f.scaleMode, f.capsStyle, f.jointStyle, f.miterLimit);
        }
        if (e != 0) {
          Gc.flashGfx.beginFill(e & 16777215, (e >> 24 & 255) / 255);
        }
        Gc.flashGfx.drawCircle(b, c, d);
        Gc.flashGfx.endFill();
        Gc.updateSpriteGraphic(a, k);
        return a;
      };
      Gc.updateSpriteGraphic = function (a, b) {
        if (b == null) {
          b = {
            smoothing: false
          };
        } else if (b.smoothing == null) {
          b.smoothing = false;
        }
        a.get_pixels().draw(Gc.flashGfxSprite, b.matrix, b.colorTransform, b.blendMode, b.clipRect, b.smoothing);
        a.dirty = true;
        return a;
      };
      function Yb() {}
      h["flixel.util.FlxStringUtil"] = Yb;
      Yb.__name__ = "flixel.util.FlxStringUtil";
      Yb.formatTime = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = (a / 60 | 0) + ":";
        var d = (a | 0) % 60;
        if (d < 10) {
          c += "0";
        }
        c += d;
        if (b) {
          c += ".";
          d = (a - (a | 0)) * 100 | 0;
          if (d < 10) {
            c += "0";
          }
          c += d;
        }
        return c;
      };
      Yb.formatBytes = function (a, b) {
        if (b == null) {
          b = 2;
        }
        for (var c = "Bytes kB MB GB TB PB".split(" "), d = 0; a >= 1024 && d < c.length - 1;) {
          a /= 1024;
          ++d;
        }
        return $b.roundDecimal(a, b) + c[d];
      };
      Yb.getClassName = function (a, b) {
        if (b == null) {
          b = false;
        }
        a = ta.__instanceof(a, Xi) ? a : ta.getClass(a);
        return Yb.formatPackage(a.__name__, b);
      };
      Yb.formatPackage = function (a, b) {
        if (a == null) {
          return null;
        }
        a = w.replace(a, "::", ".");
        if (b) {
          a = M.substr(a, a.lastIndexOf(".") + 1, null);
        }
        return a;
      };
      Yb.getHost = function (a) {
        var b = new sa("^(?:[a-z][a-z0-9+\\-.]*://)?(?:[a-z0-9\\-._~%!$&'()*+,;=]+@)?([a-z0-9\\-._~%]{3,}|\\[[a-f0-9:.]+\\])?(?::[0-9]+)?", "i");
        if (b.match(a) && (a = b.matched(1), a != null)) {
          return decodeURIComponent(a.split("+").join(" ")).toLowerCase();
        } else {
          return "";
        }
      };
      Yb.getDomain = function (a) {
        a = Yb.getHost(a);
        var b = new sa("^(localhost|[0-9.]+|\\[[a-f0-9:.]+\\])$", "i");
        var c = new sa("^(?:[a-z0-9\\-]+\\.)*([a-z0-9\\-]+\\.[a-z0-9\\-]+)$", "i");
        if (!b.match(a) && c.match(a) && (a = c.matched(1), a != null)) {
          return a.toLowerCase();
        } else {
          return "";
        }
      };
      Yb.toIntArray = function (a) {
        if (a != null && a != "") {
          a = a.split(",");
          var b = [];
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            b.push(H.parseInt(d));
          }
          return b;
        }
        return null;
      };
      Yb.getDebugString = function (a) {
        var b = "(";
        for (var c = 0; c < a.length;) {
          var d = a[c];
          ++c;
          b += d.label + ": ";
          var e = d.value;
          if (typeof e == "number") {
            e = $b.roundDecimal(e, g.debugger.precision);
          }
          b += H.string(e) + " | ";
          Wc._pool.put(d);
        }
        b = w.trim(M.substr(b, 0, b.length - 2));
        return b + ")";
      };
      function Wc() {}
      h["flixel.util.LabelValuePair"] = Wc;
      Wc.__name__ = "flixel.util.LabelValuePair";
      Wc.__interfaces__ = [B];
      Wc.prototype = {
        destroy: function () {
          this.value = this.label = null;
        },
        __class__: Wc
      };
      function Fc(a) {
        this._inManager = false;
        this._timeCounter = this._loopsCounter = 0;
        this.active = this.finished = false;
        this.time = this.loops = 0;
        this.manager = a ?? Fc.globalManager;
      }
      h["flixel.util.FlxTimer"] = Fc;
      Fc.__name__ = "flixel.util.FlxTimer";
      Fc.__interfaces__ = [B];
      Fc.prototype = {
        destroy: function () {
          this.onComplete = null;
        },
        start: function (a, b, c) {
          if (c == null) {
            c = 1;
          }
          if (a == null) {
            a = 1;
          }
          if (this.manager != null && !this._inManager) {
            this.manager.add(this);
            this._inManager = true;
          }
          this.active = true;
          this.finished = false;
          this.time = Math.abs(a);
          if (c < 0) {
            c *= -1;
          }
          this.loops = c;
          this.onComplete = b;
          this._loopsCounter = this._timeCounter = 0;
          return this;
        },
        cancel: function () {
          this.finished = true;
          this.active = false;
          if (this.manager != null && this._inManager) {
            this.manager.remove(this);
            this._inManager = false;
          }
        },
        update: function (a) {
          for (this._timeCounter += a; this._timeCounter >= this.time && this.active && !this.finished;) {
            this._timeCounter -= this.time;
            this._loopsCounter++;
            if (this.loops > 0 && this._loopsCounter >= this.loops) {
              this.finished = true;
            }
          }
        },
        onLoopFinished: function () {
          if (this.finished) {
            this.cancel();
          }
          if (this.onComplete != null) {
            this.onComplete(this);
          }
        },
        __class__: Fc
      };
      function Al() {
        this._timers = [];
        Ea.call(this);
        this.set_visible(false);
        g.signals.preStateSwitch.add(l(this, this.clear));
      }
      h["flixel.util.FlxTimerManager"] = Al;
      Al.__name__ = "flixel.util.FlxTimerManager";
      Al.__super__ = Ea;
      Al.prototype = q(Ea.prototype, {
        destroy: function () {
          ze.clearArray(this._timers);
          this._timers = null;
          g.signals.preStateSwitch.remove(l(this, this.clear));
          Ea.prototype.destroy.call(this);
        },
        update: function (a) {
          var b = null;
          for (var c = 0, d = this._timers; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.active && !e.finished && e.time >= 0) {
              var f = e._loopsCounter;
              e.update(a);
              if (f != e._loopsCounter) {
                if (b == null) {
                  b = [];
                }
                b.push(e);
              }
            }
          }
          if (b != null) {
            while (b.length > 0) {
              b.shift().onLoopFinished();
            }
          }
        },
        add: function (a) {
          this._timers.push(a);
        },
        remove: function (a) {
          var b = this._timers;
          a = b.indexOf(a);
          if (a != -1) {
            b[a] = b[b.length - 1];
            b.pop();
          }
        },
        clear: function () {
          ze.clearArray(this._timers);
        },
        forEach: function (a) {
          for (var b = 0, c = this._timers; b < c.length;) {
            var d = c[b];
            ++b;
            a(d);
          }
        },
        __class__: Al
      });
      var tn = x["flixel.util.FlxVerticalAlign"] = {
        __ename__: "flixel.util.FlxVerticalAlign",
        __constructs__: null,
        TOP: {
          _hx_name: "TOP",
          _hx_index: 0,
          __enum__: "flixel.util.FlxVerticalAlign",
          toString: p
        },
        CENTER: {
          _hx_name: "CENTER",
          _hx_index: 1,
          __enum__: "flixel.util.FlxVerticalAlign",
          toString: p
        },
        BOTTOM: {
          _hx_name: "BOTTOM",
          _hx_index: 2,
          __enum__: "flixel.util.FlxVerticalAlign",
          toString: p
        }
      };
      tn.__constructs__ = [tn.TOP, tn.CENTER, tn.BOTTOM];
      function Zn(a, b) {
        this.start = a;
        this.end = b == null ? a : b;
      }
      h["flixel.util.helpers.FlxRange"] = Zn;
      Zn.__name__ = "flixel.util.helpers.FlxRange";
      Zn.prototype = {
        __class__: Zn
      };
      var Fg = {
        fromState: function (a) {
          return a;
        },
        fromMaker: function (a) {
          return a;
        },
        createInstance: function (a) {
          if (a instanceof lc) {
            return a;
          } else if (ta.__instanceof(a, Xi)) {
            return Db.createInstance(a, []);
          } else {
            return a();
          }
        }
      };
      var xp = {
        fromType: function (a) {
          return a;
        },
        toNextState: function (a) {
          if (ta.__instanceof(a, Xi)) {
            return Fg.fromMaker(function () {
              return Db.createInstance(a, []);
            });
          } else {
            return a;
          }
        }
      };
      function ii(a, b, c, d) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._mat = new Sc();
        this.pressed = false;
        this.renderer = new co();
        this.showPivot = false;
        G.call(this, a, b);
        this._sprite = new $a();
        this.anim = new Gl(this);
        if (c != null) {
          this.loadAtlas(c);
        }
        if (d != null) {
          this.setTheSettings(d);
        }
        this._pivot = cc.fromBitmapData(W.getBitmapData("flxanimate/images/pivot.png"), null, "__pivot").get_imageFrame().get_frame();
        this._indicator = cc.fromBitmapData(W.getBitmapData("flxanimate/images/indicator.png"), null, "__indicator").get_imageFrame().get_frame();
        this.get_camera().canvas.addChild(this._sprite);
        this.rect = ea.__pool.get();
      }
      h["flxanimate.FlxAnimate"] = ii;
      ii.__name__ = "flxanimate.FlxAnimate";
      ii.__super__ = G;
      ii.prototype = q(G.prototype, {
        loadAtlas: function (a) {
          if (Jc.extension(a) == "zip" || W.exists("" + a + "/Animation.json")) {
            this.anim._loadAtlas(this.atlasSetting(a));
            this.set_frames(xd.fromTextureAtlas(a));
            this.origin = this.anim.curInstance.symbol.transformationPoint;
          } else {
            g.log.advanced("Animation file not found in specified path: \"" + H.string(this.path) + "\", have you written the correct path?", Ba.ERROR, true);
          }
        },
        draw: function () {
          this._matrix.identity();
          if (this.flipX) {
            this._matrix.a *= -1;
            this._matrix.tx += this.get_width();
          }
          if (this.flipY) {
            this._matrix.d *= -1;
            this._matrix.ty += this.get_height();
          }
          this.frameHeight = this.frameWidth = 0;
          this.set_width(0);
          this.set_height(0);
          this._flashRect.setEmpty();
          this.parseElement(this.anim.curInstance, this.anim.get_curFrame(), this._matrix, this.colorTransform, true, null, this.get_cameras());
          this.set_width(this._flashRect.width);
          this.set_height(this._flashRect.height);
          this.frameWidth = this.get_width() | 0;
          this.frameHeight = this.get_height() | 0;
          if (this.showPivot) {
            this.drawLimb(this._pivot, new Sc(1, 0, 0, 1, this.origin.x - this._pivot.frame.width * 0.5, this.origin.y - this._pivot.frame.height * 0.5), null, null, this.get_cameras());
            this.drawLimb(this._indicator, new Sc(1, 0, 0, 1, -this._indicator.frame.width * 0.5, -this._indicator.frame.height * 0.5), null, null, this.get_cameras());
          }
        },
        parseElement: function (a, b, c, d, e, f, k) {
          if (e == null) {
            e = false;
          }
          var g = f != null;
          if (k == null) {
            k = this.get_cameras();
          }
          var n = new Sc();
          n.concat(a.matrix);
          n.concat(c);
          var h = new Nb();
          h.__copyFrom(d);
          d = a.symbol != null ? this.anim.symbolDictionary.h[a.symbol.name] : null;
          if (a.symbol != null && (a.symbol.colorEffect != null && h.concat(a.symbol.colorEffect.__create()), a.symbol.get_cacheAsBitmap() && (a.symbol._renderDirty && (a.symbol._renderDirty = false, this.filterCamera == null && (this.filterCamera = new Vb(0, 0, 0, 0, 1)), a.symbol._cacheBitmapMatrix.copyFrom(a.symbol.cacheAsBitmapMatrix), this.parseElement(a, b, a.symbol._cacheBitmapMatrix, new Nb(), e, {
            instance: a
          }, [this.filterCamera]), a.symbol._filterBitmap == null && (a.symbol._filterBitmap = cc.fromRectangle(1, 1, 0, true).get_imageFrame().get_frame()), this.renderFilter(this.filterCamera, a.symbol.filters, a.symbol._filterBitmap, a.symbol._cacheBitmapMatrix, this.renderer), a.symbol._renderDirty = false), (!g || g && f.instance != a) && a.symbol._filterBitmap != null))) {
            n.identity();
            n.concat(a.symbol._cacheBitmapMatrix);
            n.concat(c);
            this.drawLimb(a.symbol._filterBitmap, n, h, g, k);
            return;
          }
          if (a.bitmap != null) {
            this.drawLimb(this.frames.framesByName.h[a.bitmap], n, h, g, k);
          } else {
            b = a.symbol.firstFrame + b;
            if (a.symbol.type._hx_index == 2) {
              b = this.setButtonFrames(b);
            }
            switch (a.symbol.loop._hx_index) {
              case 0:
                b %= d.get_length();
                break;
              case 1:
                var p = d.get_length() - 1;
                b = b < 0 ? 0 : b;
                b = p != null && b > p ? p : b;
            }
            d = d.timeline.getList();
            p = 0;
            for (var m = d.length; p < m;) {
              var l = p++;
              var q = d[d.length - 1 - l];
              if (q.visible || g || !e) {
                q._setCurFrame(b);
                l = q._currFrame;
                if (l != null) {
                  l.update(b);
                  var t = l.filters != null;
                  if (t) {
                    if (l._renderDirty || l._filterFrame == null) {
                      l._filterFrame = cc.fromRectangle(1, 1, 0, true).get_imageFrame().get_frame();
                      if (q._filterCamera == null) {
                        q._filterCamera = new Vb();
                      }
                    } else {
                      q = new Sc();
                      q.concat(l._bitmapMatrix);
                      q.concat(a.matrix);
                      q.concat(c);
                      this.drawLimb(l._filterFrame, q, null, g, k);
                      continue;
                    }
                  }
                  for (var u = 0, x = l.getList(); u < x.length;) {
                    var L = x[u];
                    ++u;
                    var w = 0;
                    if (L.symbol != null && L.symbol.type == ee.Graphic && L.symbol.loop != Sd.SingleFrame) {
                      w = b - l.index;
                    }
                    var z = new Nb();
                    z.__copyFrom(h);
                    if (l.colorEffect != null) {
                      z.concat(l.colorEffect.__create());
                    }
                    this.parseElement(L, w, t ? new Sc() : n, z, false, t ? {
                      instance: null
                    } : f, t ? [q._filterCamera] : k);
                    if (t && L.symbol != null && L.symbol._layerDirty) {
                      L.symbol._layerDirty = false;
                    }
                  }
                  if (t) {
                    l._bitmapMatrix.identity();
                    this.renderFilter(q._filterCamera, l.filters, l._filterFrame, l._bitmapMatrix, this.renderer);
                    l._renderDirty = false;
                    q = new Sc();
                    q.concat(l._bitmapMatrix);
                    q.concat(a.matrix);
                    q.concat(c);
                    this.drawLimb(l._filterFrame, q, null, g, k);
                  }
                }
              }
            }
          }
        },
        renderFilter: function (a, b, c, d, e) {
          a.render();
          var f = e.graphicstoBitmapData(a.canvas.get_graphics());
          if (f != null) {
            var k = f.rect.clone();
            if (k != null) {
              var g = new ea();
              a.canvas.__getBounds(g, d);
              if (b != null && b.length > 0) {
                f = this.applyFilter(e, f, b, k);
              }
              d.translate(g.x + k.x - (f.width - k.width) * 0.5, g.y + k.y - (f.height - k.height) * 0.5);
              a.clearDrawStack();
              a.canvas.get_graphics().clear();
              c.parent.bitmap.dispose();
              c.parent.set_bitmap(f);
              a = c.frame;
              a.width = f.width;
              a.height = f.height;
            }
          }
        },
        applyFilter: function (a, b, c, d) {
          var e = ea.__pool.get();
          for (var f = 0; f < c.length;) {
            var k = c[f];
            ++f;
            e.__expand(-k.__leftExtension, -k.__topExtension, k.__leftExtension + k.__rightExtension, k.__topExtension + k.__bottomExtension);
          }
          d.width += e.width;
          d.height += e.height;
          d.x += e.x;
          d.y += e.y;
          ea.__pool.release(e);
          return a.applyFilter(b, c, d);
        },
        setButtonFrames: function (a) {
          var b = a = false;
          var c = g.mouse._leftButton;
          if ((c.current == 1 || c.current == 2) && !!g.mouse.overlaps(this)) {
            b = true;
          }
          c = g.mouse._leftButton;
          if ((c.current == 1 || c.current == 2) && !g.mouse.overlaps(this) && !b) {
            a = true;
          }
          c = g.mouse._leftButton;
          if (c.current != 1 && c.current != 2) {
            a = false;
          }
          if (g.mouse.overlaps(this) && !a) {
            c = this.anim.buttonMap;
            a = this.anim.get_curSymbol().name;
            b = c.h[a];
            if (g.mouse._leftButton.current == 2 && !this.pressed) {
              if (b != null) {
                c = new Hl(b.Callbacks != null ? b.Callbacks.OnClick : null, b.Sound);
                if (c.callback != null) {
                  c.callback();
                }
                if (c.sound != null) {
                  c.sound.play(true);
                }
              }
              this.pressed = true;
            }
            c = g.mouse._leftButton;
            a = c.current == 1 || c.current == 2 ? 2 : 1;
            if (g.mouse._leftButton.current == -1 && this.pressed) {
              if (b != null) {
                c = new Hl(b.Callbacks != null ? b.Callbacks.OnRelease : null, b.Sound);
                if (c.callback != null) {
                  c.callback();
                }
                if (c.sound != null) {
                  c.sound.play(true);
                }
              }
              this.pressed = false;
            }
          } else {
            a = 0;
          }
          return a;
        },
        drawLimb: function (a, b, c, d, e) {
          if (d == null) {
            d = false;
          }
          if (e != null && this.alpha != 0 && (c == null || c.alphaMultiplier != 0 && c.alphaOffset != -255) && a != null && a.type != 2) {
            for (var f = 0; f < e.length;) {
              var k = e[f];
              ++f;
              a.prepareMatrix(this._mat);
              var g = this._mat;
              g.concat(b);
              if (!k.visible || !k.exists) {
                break;
              }
              if (!d) {
                var n = this.getScreenPosition(this._point, k);
                var h = this.offset;
                var p = h.x;
                var m = h.y;
                if (m == null) {
                  m = 0;
                }
                if (p == null) {
                  p = 0;
                }
                n.set_x(n.x - p);
                n.set_y(n.y - m);
                n = h;
                if (n._weak) {
                  n.put();
                }
                if ([this._pivot, this._indicator].indexOf(a) == -1) {
                  g.translate(-this.origin.x, -this.origin.y);
                  g.scale(this.scale.x, this.scale.y);
                  if (this.bakedRotationAngle <= 0) {
                    if (this._angleChanged) {
                      n = Math.PI / 180 * this.angle;
                      this._sinAngle = Math.sin(n);
                      this._cosAngle = Math.cos(n);
                      this._angleChanged = false;
                    }
                    if (this.angle != 0) {
                      n = this._cosAngle;
                      h = this._sinAngle;
                      p = g.a * n - g.b * h;
                      g.b = g.a * h + g.b * n;
                      g.a = p;
                      p = g.c * n - g.d * h;
                      g.d = g.c * h + g.d * n;
                      g.c = p;
                      p = g.tx * n - g.ty * h;
                      g.ty = g.tx * h + g.ty * n;
                      g.tx = p;
                    }
                  }
                  n = this._point;
                  h = this.origin;
                  p = h.x;
                  m = h.y;
                  if (m == null) {
                    m = 0;
                  }
                  if (p == null) {
                    p = 0;
                  }
                  n.set_x(n.x + p);
                  n.set_y(n.y + m);
                  n = h;
                  if (n._weak) {
                    n.put();
                  }
                } else {
                  g.scale(0.7, 0.7);
                  g.a /= k.zoom;
                  g.d /= k.zoom;
                  g.tx /= k.zoom;
                  g.ty /= k.zoom;
                }
                if (this.isPixelPerfectRender(k)) {
                  n = this._point;
                  n.set_x(Math.floor(n.x));
                  n.set_y(Math.floor(n.y));
                }
                g.translate(this._point.x, this._point.y);
                if (!this.limbOnScreen(a, g, k)) {
                  break;
                }
              }
              k.drawPixels(a, null, g, c, this.blend, this.antialiasing);
            }
          }
        },
        limbOnScreen: function (a, b, c) {
          if (c == null) {
            c = g.camera;
          }
          var d = a.frame;
          var e = this.rect;
          if (e == null) {
            e = new ea();
          }
          e.x = d.x;
          e.y = d.y;
          e.width = d.width;
          e.height = d.height;
          this.rect.x = 0;
          this.rect.y = 0;
          this.rect.__transform(this.rect, b);
          d = this._point;
          b = this.rect.get_topLeft();
          d.set(b.x, b.y);
          if (a != this._pivot) {
            this._flashRect = this._flashRect.union(this.rect);
          }
          a = this._point;
          d = this.rect.width;
          b = this.rect.height;
          if (b == null) {
            b = 0;
          }
          if (d == null) {
            d = 0;
          }
          c = a.x + d > c.viewMarginX && a.x < c.width - c.viewMarginX && a.y + b > c.viewMarginY && a.y < c.height - c.viewMarginY;
          d = a;
          if (d._weak) {
            d.put();
          }
          return c;
        },
        destroy: function () {
          if (this.anim != null) {
            this.anim.destroy();
          }
          this.anim = null;
          G.prototype.destroy.call(this);
        },
        updateAnimation: function (a) {
          this.anim.update(a);
        },
        setTheSettings: function (a) {
          this.set_antialiasing(a.Antialiasing);
          if (a.ButtonSettings != null) {
            this.anim.buttonMap = a.ButtonSettings;
            if (this.anim.get_symbolType() != ee.Button) {
              this.anim.set_symbolType(ee.Button);
            }
          }
          if (a.Reversed != null) {
            this.anim.set_reversed(a.Reversed);
          }
          if (a.FrameRate != null) {
            this.anim.set_framerate(a.FrameRate > 0 ? this.anim.metadata.frameRate : a.FrameRate);
          }
          if (a.OnComplete != null) {
            this.anim.onComplete = a.OnComplete;
          }
          if (a.ShowPivot != null) {
            this.showPivot = a.ShowPivot;
          }
          if (a.Antialiasing != null) {
            this.set_antialiasing(a.Antialiasing);
          }
          if (a.ScrollFactor != null) {
            this.scrollFactor = a.ScrollFactor;
          }
          if (a.Offset != null) {
            this.offset = a.Offset;
          }
        },
        atlasSetting: function (a) {
          var b = null;
          if (Jc.extension(a) == "zip") {
            a = Il.readZip(Re.toBytes(W.getBytes(a)));
            for (var c = Il.unzip(a).h; c != null;) {
              var d = c.item;
              c = c.next;
              if (d.fileName.indexOf("Animation.json") != -1) {
                b = JSON.parse(d.data.toString());
                a.remove(d);
              }
            }
            xd.zip = a;
          } else {
            b = JSON.parse(W.getText("" + a + "/Animation.json"));
          }
          return b;
        },
        loadAtlasEx: function (a, b, c) {
          if (typeof c == "string") {
            var d = w.trim(b);
            d = M.substr(d, d.length - 5, null).toLowerCase();
            if (d == ".json") {
              c = W.getText(c);
            }
            c = JSON.parse(this._removeBOM(c));
          }
          var e = null;
          var f = b;
          d = w.trim(b);
          d = M.substr(d, d.length - 5, null).toLowerCase();
          if (d == ".json") {
            f = W.getText(b);
            e = false;
          } else if (M.substr(d, 1, null) == ".xml") {
            f = W.getText(b);
            e = true;
          }
          f = this._removeBOM(f);
          if (e == null) {
            try {
              f = JSON.parse(f);
              e = false;
            } catch (k) {
              f = X.parse(f);
              e = true;
            }
          } else {
            f = e ? X.parse(f) : JSON.parse(f);
          }
          this.anim._loadAtlas(c);
          if (e) {
            this.set_frames(xd.fromSparrow(f, a));
          } else {
            this.set_frames(xd.fromAnimateAtlas(f, a));
          }
          this.origin = this.anim.curInstance.symbol.transformationPoint;
        },
        _removeBOM: function (a) {
          if (M.cca(a, 0) == 65279) {
            a = M.substr(a, 1, null);
          }
          return a;
        },
        __class__: ii
      });
      function Hl(a, b) {
        this.callback = a;
        this.sound = b;
      }
      h["flxanimate.animate.ButtonEvent"] = Hl;
      Hl.__name__ = "flxanimate.animate.ButtonEvent";
      Hl.prototype = {
        __class__: Hl
      };
      function Gl(a, b) {
        this.lastPlayedAnim = null;
        this.animsMap = new V();
        this.buttonMap = new V();
        this.swfRender = false;
        this._tick = 0;
        this._parent = a;
        this.isPlaying = false;
        if (b != null) {
          this._loadAtlas(b);
        }
      }
      h["flxanimate.animate.FlxAnim"] = Gl;
      Gl.__name__ = "flxanimate.animate.FlxAnim";
      Gl.__interfaces__ = [B];
      Gl.prototype = {
        _loadAtlas: function (a) {
          this.symbolDictionary = new V();
          this.stageInstance = null;
          this.setSymbols(a);
          this.curInstance = this.stageInstance = up.get_STI(Ug.get_AN(a)) != null ? Gf.fromJSON(up.get_STI(Ug.get_AN(a))) : new Gf(null, new xh(yj.get_SN(Ug.get_AN(a))));
          this.set_curFrame(this.stageInstance.symbol.firstFrame);
          var b = this._parent.origin;
          var c = this.stageInstance.symbol.transformationPoint;
          var d = c.x;
          var e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(d);
          b.set_y(e);
          if (c._weak) {
            c.put();
          }
          this.metadata = new eo(up.get_N(Ug.get_AN(a)), Mp.get_FRT(Ug.get_MD(a)));
          this.set_framerate(this.metadata.frameRate);
        },
        play: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          if (a == null) {
            a = "";
          }
          this.pause();
          b = b || this.get_finished();
          if (a != "") {
            if (Object.prototype.hasOwnProperty.call(this.animsMap.h, a)) {
              var e = this.animsMap.h[a];
              this.set_framerate(e.frameRate == 0 ? this.metadata.frameRate : e.frameRate);
              b = b || this.curInstance != e.instance;
              this.curInstance = e.instance;
            } else if (a == this.metadata.name) {
              this.curInstance = this.stageInstance;
            } else if (Object.prototype.hasOwnProperty.call(this.symbolDictionary.h, a)) {
              this.curInstance.symbol.reset();
              this.curInstance.symbol.name = a;
            } else {
              g.log.advanced("There's no animation called " + a + "!", Ba.ERROR, true);
            }
            this.lastPlayedAnim = a;
          }
          if (b) {
            this.set_curFrame(c ? d - this.get_length() : d);
          }
          this.set_reversed(c);
          this.resume();
        },
        pause: function () {
          this.isPlaying = false;
        },
        resume: function () {
          this.isPlaying = true;
        },
        setSymbols: function (a) {
          var b = this.symbolDictionary;
          var c = yj.get_SN(Ug.get_AN(a));
          var d = new zj(Jc.withoutDirectory(yj.get_SN(Ug.get_AN(a))), yh.fromJSON(yj.get_TL(Ug.get_AN(a))));
          b.h[c] = d;
          if (Ug.get_SD(a) != null) {
            var e = 0;
            for (a = Np.get_S(Ug.get_SD(a)); e < a.length;) {
              d = a[e];
              ++e;
              b = this.symbolDictionary;
              c = yj.get_SN(d);
              d = new zj(Jc.withoutDirectory(yj.get_SN(d)), yh.fromJSON(yj.get_TL(d)));
              b.h[c] = d;
            }
          }
        },
        update: function (a) {
          if (this.frameDelay != 0 && this.isPlaying && !this.get_finished()) {
            for (this._tick += a; this._tick > this.frameDelay;) {
              if (this.get_reversed()) {
                this.set_curFrame(this.get_curFrame() - 1);
              } else {
                this.set_curFrame(this.get_curFrame() + 1);
              }
              this.get_curSymbol().fireCallbacks(this.get_curFrame());
              this._tick -= this.frameDelay;
            }
            if (this.get_finished() || this.get_curFrame() == (this.get_reversed() ? 0 : this.get_curSymbol().get_length() - 1)) {
              if (this.get_loopType() == Sd.PlayOnce) {
                this.pause();
              }
              if (this.onComplete != null) {
                this.onComplete();
              }
            }
          }
        },
        get_finished: function () {
          if (this.get_loopType() == Sd.PlayOnce) {
            if (this.get_reversed() && this.get_curFrame() == 0) {
              return true;
            } else if (this.get_reversed()) {
              return false;
            } else {
              return this.get_curFrame() >= this.get_length() - 1;
            }
          } else {
            return false;
          }
        },
        get_curFrame: function () {
          return this.get_curSymbol().get_curFrame();
        },
        set_curFrame: function (a) {
          var b = this.get_curSymbol();
          switch (this.get_loopType()._hx_index) {
            case 0:
              var c = a % this.get_curSymbol().get_length();
              break;
            case 1:
              c = this.get_curSymbol().get_length() - 1;
              a = a < 0 ? 0 : a;
              c = c != null && a > c ? c : a;
              break;
            default:
              c = a;
          }
          b.set_curFrame(c);
          if (this.get_symbolType() == ee.MovieClip && !this.swfRender) {
            this.get_curSymbol().set_curFrame(0);
          }
          return this.get_curSymbol().get_curFrame();
        },
        addBySymbol: function (a, b, c, d, e, f) {
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = 0;
          }
          d = new Gf(null, new xh(null, null, null, d ? Sd.Loop : Sd.PlayOnce), new Sc(1, 0, 0, 1, e, f));
          e = Object.keys(this.symbolDictionary.h);
          f = e.length;
          for (var k = 0; k < f;) {
            var r = e[k++];
            if (this.startsWith(r, b)) {
              d.symbol.name = r;
              break;
            }
          }
          if (d.symbol.name != null) {
            this.animsMap.h[a] = {
              instance: d,
              frameRate: c
            };
          } else {
            g.log.advanced("No symbol was found with the name " + b + "!", Ba.ERROR, true);
          }
        },
        startsWith: function (a, b) {
          if (w.endsWith(b, "\\")) {
            return a == b.substring(0, b.length - 1);
          } else {
            return w.startsWith(a, b);
          }
        },
        addBySymbolIndices: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = true;
          }
          if (d == null) {
            d = 0;
          }
          if (Object.prototype.hasOwnProperty.call(this.symbolDictionary.h, b)) {
            e = new Gf(null, new xh(null, null, null, e ? Sd.Loop : Sd.PlayOnce), new Sc(1, 0, 0, 1, f, k));
            f = new yh();
            f.add(null, "Layer 1");
            k = 0;
            for (var r = c.length; k < r;) {
              var n = k++;
              var h = c[n];
              n = new Vg(n);
              var p = new xh(b, null, null, e.symbol.loop);
              p.set_firstFrame(h);
              n.add(new Gf(null, p));
              f.get(0).add(n);
            }
            b = new zj(a, f);
            e.symbol.name = b.name;
            this.symbolDictionary.h[b.name] = b;
            this.animsMap.h[a] = {
              instance: e,
              frameRate: d
            };
          } else {
            g.log.advanced("" + b + " does not exist as a symbol! maybe you misspelled it?", Ba.ERROR, true);
          }
        },
        set_framerate: function (a) {
          this.frameDelay = 1 / a;
          return this.framerate = a;
        },
        get_length: function () {
          return this.get_curSymbol().get_length();
        },
        get_loopType: function () {
          return this.curInstance.symbol.loop;
        },
        get_symbolType: function () {
          return this.curInstance.symbol.type;
        },
        set_symbolType: function (a) {
          return this.curInstance.symbol.set_type(a);
        },
        get_reversed: function () {
          return this.curInstance.symbol.reverse;
        },
        set_reversed: function (a) {
          return this.curInstance.symbol.reverse = a;
        },
        get_curSymbol: function () {
          return this.symbolDictionary.h[this.curInstance.symbol.name];
        },
        destroy: function () {
          this.isPlaying = false;
          this.set_curFrame(0);
          this.set_framerate(0);
          this._tick = 0;
          this.animsMap = this.buttonMap = null;
          this.curInstance.destroy();
          this.curInstance = null;
          this.stageInstance.destroy();
          this.stageInstance = null;
          this.metadata.destroy();
          this.metadata = null;
          this.swfRender = false;
          this.symbolDictionary = this._parent = null;
        },
        __class__: Gl,
        __properties__: {
          set_symbolType: "set_symbolType",
          get_symbolType: "get_symbolType",
          get_loopType: "get_loopType",
          set_curFrame: "set_curFrame",
          get_curFrame: "get_curFrame",
          set_framerate: "set_framerate",
          set_reversed: "set_reversed",
          get_reversed: "get_reversed",
          get_finished: "get_finished",
          get_curSymbol: "get_curSymbol",
          get_length: "get_length"
        }
      };
      function eo(a, b) {
        this.name = a;
        this.frameRate = b;
      }
      h["flxanimate.animate.FlxMetaData"] = eo;
      eo.__name__ = "flxanimate.animate.FlxMetaData";
      eo.prototype = {
        destroy: function () {
          this.name = null;
          this.frameRate = 0;
        },
        __class__: eo
      };
      function Gf(a, b, c) {
        this.set_bitmap(a);
        this.symbol = b;
        if (b != null) {
          b._parent = this;
        }
        this.set_matrix(c == null ? new Sc() : c);
      }
      h["flxanimate.animate.FlxElement"] = Gf;
      Gf.__name__ = "flxanimate.animate.FlxElement";
      Gf.fromJSON = function (a) {
        var b = He.get_SI(a) != null;
        var c = null;
        if (b) {
          c = new xh();
          c.instance = Te.get_IN(He.get_SI(a));
          switch (Te.get_ST(He.get_SI(a))) {
            case "B":
            case "button":
              var d = ee.Button;
              break;
            case "MC":
            case "movieclip":
              d = ee.MovieClip;
              break;
            default:
              d = ee.Graphic;
          }
          c.set_type(d);
          switch (Te.get_LP(He.get_SI(a)) == null ? "LP" : Te.get_LP(He.get_SI(a)).split("R")[0]) {
            case "PO":
            case "playonce":
              d = Sd.PlayOnce;
              break;
            case "SF":
            case "singleframe":
              d = Sd.SingleFrame;
              break;
            default:
              d = Sd.Loop;
          }
          c.set_loop(d);
          c.reverse = Te.get_LP(He.get_SI(a)) == null ? false : Te.get_LP(He.get_SI(a)).indexOf("R") != -1;
          c.set_firstFrame(Te.get_FF(He.get_SI(a)));
          c.set_colorEffect(La.fromColorJson(Te.get_C(He.get_SI(a))));
          c.name = Te.get_SN(He.get_SI(a));
          d = Te.get_TRP(He.get_SI(a)).x;
          var e = Te.get_TRP(He.get_SI(a)).y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          d = fa.pool.get().set(d, e);
          d._inPool = false;
          d._weak = true;
          c.transformationPoint = d;
          c.set_filters(La.fromFilterJson(Te.get_F(He.get_SI(a))));
        }
        d = b ? Te.get_M3D(He.get_SI(a)) : Op.get_M3D(vp.get_ASI(a));
        e = ma.fields(d);
        if (!(d instanceof Array)) {
          e.sort(function (a, b) {
            return H.parseInt(a.substring(1)) - H.parseInt(b.substring(1));
          });
        }
        if (d instanceof Array) {
          e = d;
        } else {
          var f = [];
          for (var k = 0; k < e.length;) {
            var g = e[k];
            ++k;
            f.push(ma.field(d, g));
          }
          e = f;
        }
        if (!b && d == null) {
          e[0] = e[5] = 1;
          e[1] = e[4] = e[12] = e[13] = 0;
        }
        d = b ? dp.get_POS(Te.get_bitmap(He.get_SI(a))) : dp.get_POS(vp.get_ASI(a));
        if (d == null) {
          d = {
            x: 0,
            y: 0
          };
        }
        return new Gf(b ? dp.get_N(Te.get_bitmap(He.get_SI(a))) : dp.get_N(vp.get_ASI(a)), c, new Sc(e[0], e[1], e[4], e[5], e[12], e[13]));
      };
      Gf.prototype = {
        destroy: function () {
          this._parent = null;
          if (this.symbol != null) {
            this.symbol.destroy();
          }
          this.set_bitmap(null);
          this.set_matrix(null);
        },
        set_bitmap: function (a) {
          if (a != this.bitmap && this.symbol != null && this.symbol.get_cacheAsBitmap()) {
            this.symbol._renderDirty = true;
          }
          return this.bitmap = a;
        },
        set_matrix: function (a) {
          if (a == null) {
            this.matrix.identity();
          } else {
            this.matrix = a;
          }
          return a;
        },
        __class__: Gf,
        __properties__: {
          set_matrix: "set_matrix",
          set_bitmap: "set_bitmap"
        }
      };
      function Vg(a, b, c, d, e) {
        if (b == null) {
          b = 1;
        }
        this._renderDirty = false;
        this.set_index(a);
        this.set_duration(b);
        this.set_name(e);
        this._elements = c == null ? [] : c;
        this.set_colorEffect(d);
        this.callbacks = [];
        this._bitmapMatrix = new Sc();
      }
      h["flxanimate.animate.FlxKeyFrame"] = Vg;
      Vg.__name__ = "flxanimate.animate.FlxKeyFrame";
      Vg.fromJSON = function (a) {
        if (a == null) {
          return null;
        }
        var b = new Vg(Aj.get_I(a), Aj.get_DU(a), null, null, Aj.get_N(a));
        b.set_colorEffect(La.fromColorJson(Aj.get_C(a)));
        if (Aj.get_E(a) != null) {
          for (var c = 0, d = Aj.get_E(a); c < d.length;) {
            var e = d[c];
            ++c;
            b.add(Gf.fromJSON(e));
          }
        }
        b.set_filters(La.fromFilterJson(Aj.get_F(a)));
        return b;
      };
      Vg.prototype = {
        set_duration: function (a) {
          var b = null;
          var c = a < 1 ? 1 : a;
          var d = this.duration - (b != null && c > b ? b : c);
          b = null;
          c = a < 1 ? 1 : a;
          this.duration = b != null && c > b ? b : c;
          if (this._parent != null) {
            b = this._parent.get(this.index + a);
            if (b != null) {
              b.set_index(b.index - d);
            }
          }
          return a;
        },
        set_filters: function (a) {
          this._renderDirty = true;
          return this.filters = a;
        },
        update: function (a) {
          if (this.filters != null && this.filters.length != 0 && !this._renderDirty) {
            a = 0;
            for (var b = this.filters; a < b.length;) {
              var c = b[a];
              ++a;
              if (c.__renderDirty) {
                this._renderDirty = true;
                return;
              }
            }
            a = 0;
            for (b = this._elements; a < b.length;) {
              c = b[a];
              ++a;
              if (c.symbol != null && (c.symbol._renderDirty || c.symbol._layerDirty)) {
                this._renderDirty = true;
                break;
              }
            }
          }
        },
        add: function (a) {
          if (a instanceof Gf) {
            if (a == null) {
              g.log.advanced("this element is null!", Ba.ERROR, true);
              return null;
            }
            a._parent = this;
            this._elements.push(a);
          } else {
            if (a == null) {
              g.log.advanced("this callback is null!", Ba.ERROR, true);
              return null;
            }
            this.callbacks.push(a);
          }
          return a;
        },
        getList: function () {
          return this._elements;
        },
        fireCallbacks: function () {
          for (var a = 0; a < this.callbacks.length;) {
            this.callbacks[a]();
            ++a;
          }
        },
        destroy: function () {
          this.set_name(null);
          this.set_index(0);
          this.set_duration(0);
          this._parent = this.callbacks = null;
          this.set_colorEffect(null);
          for (var a = 0, b = this._elements; a < b.length;) {
            var c = b[a];
            ++a;
            c.destroy();
          }
        },
        set_colorEffect: function (a) {
          if (a == null) {
            a = Td.None;
          }
          if (ta.__instanceof(a, Td)) {
            this.colorEffect = La.parseColorEffect(a);
          } else {
            this.colorEffect = a;
          }
          return this.colorEffect;
        },
        set_index: function (a) {
          this.index = a;
          if (this._parent != null) {
            this._parent.remove(this);
            this._parent.add(this);
          }
          return this.index;
        },
        set_name: function (a) {
          if (this._parent != null) {
            var b = this.name;
            var c = this._parent._labels;
            if (Object.prototype.hasOwnProperty.call(c.h, b)) {
              delete c.h[b];
            }
            this._parent._labels.h[a] = this;
          }
          return this.name = a;
        },
        __class__: Vg,
        __properties__: {
          set_filters: "set_filters",
          set_colorEffect: "set_colorEffect",
          set_duration: "set_duration",
          set_index: "set_index",
          set_name: "set_name"
        }
      };
      function zh(a, b) {
        this._renderable = true;
        hc.call(this);
        this.name = a;
        this.set_type(ji.Normal);
        this._keyframes = b ?? [];
        this.set_visible(true);
        this._labels = new V();
        this._filterMatrix = new Sc();
      }
      h["flxanimate.animate.FlxLayer"] = zh;
      zh.__name__ = "flxanimate.animate.FlxLayer";
      zh.fromJSON = function (a) {
        if (a == null) {
          return null;
        }
        var b = new zh(Bj.get_LN(a));
        if (Bj.get_LT(a) != null || Bj.get_Clpb(a) != null) {
          b.set_type(Bj.get_LT(a) != null ? ji.Clipper : ji.Clipped(Bj.get_Clpb(a)));
        }
        if (Bj.get_FR(a) != null) {
          var c = 0;
          for (a = Bj.get_FR(a); c < a.length;) {
            var d = a[c];
            ++c;
            b.add(Vg.fromJSON(d));
          }
        }
        return b;
      };
      zh.__super__ = hc;
      zh.prototype = q(hc.prototype, {
        destroy: function () {},
        get: function (a) {
          return this._get(a, false);
        },
        _get: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b) {
            var c = this.type;
            c = x[c.__enum__].__constructs__[c._hx_index]._hx_name == "Clipped";
          } else {
            c = false;
          }
          if (c) {
            b = this._parent.getList();
            b = b[b.indexOf(this) - 1];
            if (this._parent != null && b != null) {
              c = b.type;
              c = x[c.__enum__].__constructs__[c._hx_index]._hx_name == "Clipper";
            } else {
              c = false;
            }
            if (c) {
              b._renderable = false;
            }
          }
          if (typeof a == "string") {
            if (Object.prototype.hasOwnProperty.call(this._labels.h, a)) {
              return this._labels.h[a];
            } else {
              return null;
            }
          }
          if (a > this.get_length()) {
            return null;
          }
          b = 0;
          for (c = this._keyframes; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.index + d.duration > a) {
              return d;
            }
          }
          return null;
        },
        add: function (a) {
          if (a == null) {
            return null;
          }
          var b = a.index;
          if (a.name != null) {
            this._labels.h[a.name] = a;
          }
          var c = this.get_length() - 1;
          var d = b < 0 ? 0 : b;
          var e = this.get(c != null && d > c ? c : d);
          if (this.get_length() == 0) {
            e = new Vg(0, 1);
            this._keyframes.push(e);
          }
          c = Math.abs(b - e.index);
          if (b == e.index) {
            a.set_duration(a.duration + (e.duration - 1));
            this._keyframes.splice(this._keyframes.indexOf(e), 0, a);
            M.remove(this._keyframes, e);
            e.destroy();
          } else {
            b = e.duration;
            e.set_duration(e.duration + (c - b));
            b = b - c - 1;
            c = null;
            d = b < 0 ? 0 : b;
            a.set_duration(a.duration + (c != null && d > c ? c : d));
            this._keyframes.splice(this._keyframes.indexOf(e) + 1, 0, a);
          }
          a._parent = this;
          return a;
        },
        remove: function (a) {
          if (a instanceof Vg) {
            M.remove(this._keyframes, a);
            return a;
          } else if (this.get_length() > a) {
            a = this.get(a);
            if (a.duration > 1) {
              a.set_duration(a.duration - 1);
            } else {
              M.remove(this._keyframes, a);
            }
            return a;
          } else {
            return null;
          }
        },
        rename: function (a) {
          if (a == null) {
            a = "";
          }
          if (["", null].indexOf(a) != -1 && ["", null].indexOf(this.name) != -1) {
            a = "Layer " + (this._parent != null ? this._parent.getList().length : 1);
          }
          if (this._parent != null && this._parent.get(a) != null) {
            a += " copy";
          }
          if (["", null].indexOf(a) == -1) {
            this.name = a;
          }
        },
        set__parent: function (a) {
          this._parent = a;
          this.rename();
          return a;
        },
        get_length: function () {
          var a = this._keyframes[this._keyframes.length - 1];
          if (a != null) {
            return a.index + a.duration;
          } else {
            return 0;
          }
        },
        set_type: function (a) {
          if (this.type != null) {
            var b = this.type;
            b = x[b.__enum__].__constructs__[b._hx_index]._hx_name == "Clipped";
          } else {
            b = false;
          }
          if (b) {
            var c = this._parent.getList();
            c = c[c.indexOf(this) - 1];
            if (this._parent != null && c != null) {
              b = c.type;
              b = x[b.__enum__].__constructs__[b._hx_index]._hx_name == "Clipper";
            } else {
              b = false;
            }
            if (b) {
              c._renderable = true;
            }
          }
          return this.type = a;
        },
        _setCurFrame: function (a) {
          if (this.get_length() == 0 || a > this.get_length()) {
            this._currFrame = null;
          } else if (this._currFrame != null) {
            if (!(a >= this._currFrame.index) || !(a < this._currFrame.duration)) {
              var b = this._keyframes.indexOf(this._currFrame);
              if (a >= this._currFrame.index + this._currFrame.duration) {
                for (var c = this._keyframes[b]; a >= c.index + c.duration && (c = this._keyframes[b++], c != null););
                this._currFrame = c;
              } else if (a < this._currFrame.index) {
                for (c = this._keyframes[b]; a < c.index && (c = this._keyframes[b--], c != null););
                this._currFrame = c;
              }
            }
          } else {
            this._currFrame = this.get(a);
          }
        },
        __class__: zh,
        __properties__: q(hc.prototype.__properties__, {
          get_length: "get_length",
          set_type: "set_type",
          set__parent: "set__parent"
        })
      });
      function zj(a, b) {
        this.activeCount = 0;
        this.layers = [];
        this.set_curFrame(0);
        this.timeline = b;
        b._parent = this;
        this.name = a;
        this.activeCount = 0;
      }
      h["flxanimate.animate.FlxSymbol"] = zj;
      zj.__name__ = "flxanimate.animate.FlxSymbol";
      zj.prototype = {
        fireCallbacks: function (a) {
          if (a == null) {
            a = this._curFrame;
          }
          for (var b = 0, c = this.timeline.getList(); b < c.length;) {
            var d = c[b];
            ++b;
            var e = d._labels.h;
            d = e;
            e = Object.keys(e);
            for (var f = e.length, k = 0; k < f;) {
              var g = d[e[k++]];
              if (g.index == a) {
                g.fireCallbacks();
              }
            }
          }
          if (this.onCallback != null) {
            this.onCallback();
          }
        },
        get_length: function () {
          return this.timeline.get_totalFrames();
        },
        get_curFrame: function () {
          return this._curFrame;
        },
        set_curFrame: function (a) {
          return this._curFrame = a;
        },
        __class__: zj,
        __properties__: {
          set_curFrame: "set_curFrame",
          get_curFrame: "get_curFrame",
          get_length: "get_length"
        }
      };
      function yh(a) {
        this._layers = a ?? [];
      }
      h["flxanimate.animate.FlxTimeline"] = yh;
      yh.__name__ = "flxanimate.animate.FlxTimeline";
      yh.fromJSON = function (a) {
        if (a == null || Bp.get_L(a) == null) {
          return null;
        }
        var b = [];
        var c = 0;
        for (a = Bp.get_L(a); c < a.length;) {
          var d = a[c];
          ++c;
          b.push(zh.fromJSON(d));
        }
        return new yh(b);
      };
      yh.prototype = {
        getList: function () {
          return this._layers;
        },
        get: function (a) {
          if (typeof a == "number" && (a | 0) === a) {
            return this._layers[a];
          }
          for (var b = 0, c = this._layers; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.name == a) {
              return d;
            }
          }
          return null;
        },
        add: function (a, b) {
          if (a == null) {
            a = 0;
          }
          b = typeof b == "string" || b == null ? new zh(b) : b;
          b.set__parent(this);
          this._layers.splice(a, 0, b);
          return b;
        },
        get_totalFrames: function () {
          var a = 0;
          for (var b = 0, c = this._layers; b < c.length;) {
            var d = c[b];
            ++b;
            d = d.get_length();
            if (a < d) {
              a = d;
            }
          }
          return a;
        },
        __class__: yh,
        __properties__: {
          get_totalFrames: "get_totalFrames"
        }
      };
      function xh(a, b, c, d) {
        if (d == null) {
          d = Sd.Loop;
        }
        if (c == null) {
          c = ee.Graphic;
        }
        if (b == null) {
          b = "";
        }
        this._cacheAsBitmap = this._renderDirty = this._layerDirty = false;
        this.name = a;
        this.instance = b;
        this.set_type(c);
        this.set_loop(d);
        this.set_firstFrame(0);
        a = b = 0;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = fa.pool.get().set(b, a);
        a._inPool = false;
        this.transformationPoint = a;
        this.set_colorEffect(Td.None);
        this._curFrame = -1;
        this.set_filters(null);
        this.cacheAsBitmapMatrix = new Sc();
        this._cacheBitmapMatrix = new Sc();
      }
      h["flxanimate.animate.SymbolParameters"] = xh;
      xh.__name__ = "flxanimate.animate.SymbolParameters";
      xh.prototype = {
        destroy: function () {
          this.instance = null;
          this.set_type(null);
          this.reverse = false;
          this.set_firstFrame(0);
          this.name = null;
          this.set_colorEffect(null);
          this.transformationPoint = null;
        },
        set_type: function (a) {
          this.type = a;
          this.set_loop(a == null ? null : Sd.Loop);
          if (a == ee.Graphic) {
            this.set_filters(null);
            da.destroy(this._filterBitmap);
            this.set_cacheAsBitmap(false);
          }
          return a;
        },
        set_loop: function (a) {
          if (this.type == null) {
            return this.loop = null;
          }
          switch (this.type._hx_index) {
            case 1:
              var b = Sd.Loop;
              break;
            case 2:
              b = Sd.SingleFrame;
              break;
            default:
              b = a;
          }
          this.loop = b;
          return a;
        },
        set_firstFrame: function (a) {
          if (this.type == ee.Graphic && this.firstFrame != a) {
            this.firstFrame = a;
            this._layerDirty = true;
          }
          return a;
        },
        reset: function () {
          this.name = null;
          this.set_type(ee.Graphic);
          this.set_loop(Sd.Loop);
          this.instance = "";
          this.set_firstFrame(0);
          var a = this.transformationPoint;
          a.set_x(0);
          a.set_y(0);
          this.set_colorEffect(Td.None);
        },
        set_colorEffect: function (a) {
          if (this.get_cacheAsBitmap()) {
            this._renderDirty = true;
          }
          if (a == null) {
            a = Td.None;
          }
          if (ta.__instanceof(a, Td)) {
            this.colorEffect = La.parseColorEffect(a);
          } else {
            this.colorEffect = a;
          }
          return this.colorEffect;
        },
        set_filters: function (a) {
          if (this.type == ee.Graphic) {
            return null;
          }
          if (a != null && a.length > 0) {
            this._renderDirty = true;
          } else if (this._cacheAsBitmap) {
            this._renderDirty = true;
          } else {
            this._filterBitmap = da.destroy(this._filterBitmap);
          }
          return this.filters = a;
        },
        get_cacheAsBitmap: function () {
          if (this.type == ee.Graphic) {
            return false;
          } else if (this.filters != null && this.filters.length > 0) {
            return true;
          } else {
            return this._cacheAsBitmap;
          }
        },
        set_cacheAsBitmap: function (a) {
          if (this.type == ee.Graphic) {
            return false;
          }
          if (a) {
            this._renderDirty = true;
          }
          return this._cacheAsBitmap = a;
        },
        __class__: xh,
        __properties__: {
          set_filters: "set_filters",
          set_cacheAsBitmap: "set_cacheAsBitmap",
          get_cacheAsBitmap: "get_cacheAsBitmap",
          set_colorEffect: "set_colorEffect",
          set_firstFrame: "set_firstFrame",
          set_loop: "set_loop",
          set_type: "set_type"
        }
      };
      function La() {}
      h["flxanimate.data.AnimationData"] = La;
      La.__name__ = "flxanimate.data.AnimationData";
      La.setFieldBool = function (a, b, c) {
        if (a == null) {
          return ma.field({}, "");
        }
        for (var d = 0; d < b.length;) {
          var e = b[d];
          ++d;
          if (c != null) {
            return a[e] = c;
          }
          if (Object.prototype.hasOwnProperty.call(a, e)) {
            return ma.field(a, e);
          }
        }
        return ma.field(a, "");
      };
      La.fromColorJson = function (a) {
        var b = Td.None;
        if (a == null) {
          return b;
        }
        switch (tf.get_M(a)) {
          case "AD":
          case "Advanced":
            b = new Nb();
            b.redMultiplier = tf.get_RM(a);
            b.redOffset = tf.get_RO(a);
            b.greenMultiplier = tf.get_GM(a);
            b.greenOffset = tf.get_GO(a);
            b.blueMultiplier = tf.get_BM(a);
            b.blueOffset = tf.get_BO(a);
            b.alphaMultiplier = tf.get_AM(a);
            b.alphaOffset = tf.get_AO(a);
            b = Td.Advanced(b);
            break;
          case "Alpha":
          case "CA":
            b = Td.Alpha(tf.get_AM(a));
            break;
          case "Brightness":
          case "CBRT":
            b = Td.Brightness(tf.get_BRT(a));
            break;
          case "T":
          case "Tint":
            b = "0x" + tf.get_TC(a).substring(1);
            b = Td.Tint(H.parseInt(b), tf.get_TM(a));
            break;
          default:
            g.log.advanced("color Effect mode \"" + tf.get_M(a) + "\" is invalid or not supported!", Ba.ERROR, true);
        }
        return b;
      };
      La.colorFromString = function (a) {
        return H.parseInt("0x" + a.substring(1));
      };
      La.fromFilterJson = function (a) {
        if (a == null) {
          return null;
        }
        var b = [];
        for (var c = 0, d = ma.fields(a); c < d.length;) {
          var e = d[c];
          ++c;
          switch (e) {
            case "ACF":
            case "AdjustColorFilter":
              e = ma.field(a, e);
              var f = new Cj();
              f.set_hue(ep.get_H(e));
              f.set_brightness(ep.get_BRT(e));
              f.set_contrast(ep.get_CT(e));
              f.set_saturation(ep.get_SAT(e));
              b.push(new Wg(f.calculateFinalFlatArray()));
              break;
            case "BF":
            case "BevelFilter":
              e = ma.field(a, e);
              b.push(new Hf(Ah.get_DST(e), Ah.get_AL(e), La.colorFromString(Ah.get_HC(e)), Ah.get_HA(e), La.colorFromString(Ah.get_SC(e)), Ah.get_SA(e), Bh.get_BLX(e), Bh.get_BLY(e), Ah.get_STR(e), Bh.get_Q(e), Ah.get_TP(e), Ah.get_KK(e)));
              break;
            case "BLF":
            case "BlurFilter":
              e = ma.field(a, e);
              b.push(new If(Bh.get_BLX(e), Bh.get_BLY(e), Bh.get_Q(e)));
              break;
            case "GF":
            case "GlowFilter":
              e = ma.field(a, e);
              b.push(new Gd(La.colorFromString(fo.get_C(e)), fo.get_A(e), Bh.get_BLX(e), Bh.get_BLY(e), fo.get_STR(e), Bh.get_Q(e), fo.get_IN(e), fo.get_KK(e)));
          }
        }
        return b;
      };
      La.parseColorEffect = function (a) {
        if (a == null) {
          a = Td.None;
        }
        var b = null;
        if ([Td.None, null].indexOf(a) == -1) {
          b = Db.enumParameters(a);
          switch (x[a.__enum__].__constructs__[a._hx_index]._hx_name) {
            case "Advanced":
              b = new Jl(b[0]);
              break;
            case "Alpha":
              b = new Kl(b[0]);
              break;
            case "Brightness":
              b = new Ll(b[0]);
              break;
            case "Tint":
              b = new Ml(b[0], b[1]);
              break;
            default:
              b = new re();
          }
        }
        return b;
      };
      var Td = x["flxanimate.data.ColorEffect"] = {
        __ename__: "flxanimate.data.ColorEffect",
        __constructs__: null,
        None: {
          _hx_name: "None",
          _hx_index: 0,
          __enum__: "flxanimate.data.ColorEffect",
          toString: p
        },
        Brightness: (u = function (a) {
          return {
            _hx_index: 1,
            Bright: a,
            __enum__: "flxanimate.data.ColorEffect",
            toString: p
          };
        }, u._hx_name = "Brightness", u.__params__ = ["Bright"], u),
        Tint: (u = function (a, b) {
          return {
            _hx_index: 2,
            Color: a,
            Opacity: b,
            __enum__: "flxanimate.data.ColorEffect",
            toString: p
          };
        }, u._hx_name = "Tint", u.__params__ = ["Color", "Opacity"], u),
        Alpha: (u = function (a) {
          return {
            _hx_index: 3,
            Alpha: a,
            __enum__: "flxanimate.data.ColorEffect",
            toString: p
          };
        }, u._hx_name = "Alpha", u.__params__ = ["Alpha"], u),
        Advanced: (u = function (a) {
          return {
            _hx_index: 4,
            transform: a,
            __enum__: "flxanimate.data.ColorEffect",
            toString: p
          };
        }, u._hx_name = "Advanced", u.__params__ = ["transform"], u)
      };
      Td.__constructs__ = [Td.None, Td.Brightness, Td.Tint, Td.Alpha, Td.Advanced];
      var Sd = x["flxanimate.data.Loop"] = {
        __ename__: "flxanimate.data.Loop",
        __constructs__: null,
        Loop: {
          _hx_name: "Loop",
          _hx_index: 0,
          __enum__: "flxanimate.data.Loop",
          toString: p
        },
        PlayOnce: {
          _hx_name: "PlayOnce",
          _hx_index: 1,
          __enum__: "flxanimate.data.Loop",
          toString: p
        },
        SingleFrame: {
          _hx_name: "SingleFrame",
          _hx_index: 2,
          __enum__: "flxanimate.data.Loop",
          toString: p
        }
      };
      Sd.__constructs__ = [Sd.Loop, Sd.PlayOnce, Sd.SingleFrame];
      var ee = x["flxanimate.data.SymbolT"] = {
        __ename__: "flxanimate.data.SymbolT",
        __constructs__: null,
        Graphic: {
          _hx_name: "Graphic",
          _hx_index: 0,
          __enum__: "flxanimate.data.SymbolT",
          toString: p
        },
        MovieClip: {
          _hx_name: "MovieClip",
          _hx_index: 1,
          __enum__: "flxanimate.data.SymbolT",
          toString: p
        },
        Button: {
          _hx_name: "Button",
          _hx_index: 2,
          __enum__: "flxanimate.data.SymbolT",
          toString: p
        }
      };
      ee.__constructs__ = [ee.Graphic, ee.MovieClip, ee.Button];
      var ji = x["flxanimate.data.LayerType"] = {
        __ename__: "flxanimate.data.LayerType",
        __constructs__: null,
        Normal: {
          _hx_name: "Normal",
          _hx_index: 0,
          __enum__: "flxanimate.data.LayerType",
          toString: p
        },
        Clipper: {
          _hx_name: "Clipper",
          _hx_index: 1,
          __enum__: "flxanimate.data.LayerType",
          toString: p
        },
        Clipped: (u = function (a) {
          return {
            _hx_index: 2,
            layer: a,
            __enum__: "flxanimate.data.LayerType",
            toString: p
          };
        }, u._hx_name = "Clipped", u.__params__ = ["layer"], u),
        Folder: {
          _hx_name: "Folder",
          _hx_index: 3,
          __enum__: "flxanimate.data.LayerType",
          toString: p
        }
      };
      ji.__constructs__ = [ji.Normal, ji.Clipper, ji.Clipped, ji.Folder];
      var Ug = {
        __properties__: {
          get_MD: "get_MD",
          get_SD: "get_SD",
          get_AN: "get_AN"
        },
        get_AN: function (a) {
          return La.setFieldBool(a, ["AN", "ANIMATION"]);
        },
        get_MD: function (a) {
          return La.setFieldBool(a, ["MD", "metadata"]);
        },
        get_SD: function (a) {
          return La.setFieldBool(a, ["SD", "SYMBOL_DICTIONARY"]);
        }
      };
      var Np = {
        __properties__: {
          get_S: "get_S"
        },
        get_S: function (a) {
          return La.setFieldBool(a, ["S", "Symbols"]);
        }
      };
      var up = {
        __properties__: {
          get_STI: "get_STI",
          get_N: "get_N"
        },
        get_N: function (a) {
          return La.setFieldBool(a, ["N", "name"]);
        },
        get_STI: function (a) {
          return La.setFieldBool(a, ["STI", "StageInstance"]);
        }
      };
      var He = {
        __properties__: {
          get_SI: "get_SI"
        },
        get_SI: function (a) {
          return La.setFieldBool(a, ["SI", "SYMBOL_Instance"]);
        }
      };
      var yj = {
        __properties__: {
          get_TL: "get_TL",
          get_SN: "get_SN"
        },
        get_SN: function (a) {
          return La.setFieldBool(a, ["SN", "SYMBOL_name"]);
        },
        get_TL: function (a) {
          return La.setFieldBool(a, ["TL", "TIMELINE"]);
        }
      };
      var Bp = {
        __properties__: {
          get_L: "get_L"
        },
        get_L: function (a) {
          return La.setFieldBool(a, ["L", "LAYERS"]);
        }
      };
      var Bj = {
        __properties__: {
          get_FR: "get_FR",
          get_Clpb: "get_Clpb",
          get_LT: "get_LT",
          get_LN: "get_LN"
        },
        get_LN: function (a) {
          return La.setFieldBool(a, ["LN", "Layer_name"]);
        },
        get_LT: function (a) {
          return La.setFieldBool(a, ["LT", "Layer_type"]);
        },
        get_Clpb: function (a) {
          return La.setFieldBool(a, ["Clpb", "Clipped_by"]);
        },
        get_FR: function (a) {
          return La.setFieldBool(a, ["FR", "Frames"]);
        }
      };
      var Mp = {
        __properties__: {
          get_FRT: "get_FRT"
        },
        get_FRT: function (a) {
          return La.setFieldBool(a, ["FRT", "framerate"]);
        }
      };
      var Aj = {
        __properties__: {
          get_F: "get_F",
          get_C: "get_C",
          get_E: "get_E",
          get_DU: "get_DU",
          get_I: "get_I",
          get_N: "get_N"
        },
        get_N: function (a) {
          return La.setFieldBool(a, ["N", "name"]);
        },
        get_I: function (a) {
          return La.setFieldBool(a, ["I", "index"]);
        },
        get_DU: function (a) {
          return La.setFieldBool(a, ["DU", "duration"]);
        },
        get_E: function (a) {
          return La.setFieldBool(a, ["E", "elements"]);
        },
        get_C: function (a) {
          return La.setFieldBool(a, ["C", "color"]);
        },
        get_F: function (a) {
          return La.setFieldBool(a, ["F", "filters"]);
        }
      };
      var vp = {
        __properties__: {
          get_ASI: "get_ASI"
        },
        get_ASI: function (a) {
          return La.setFieldBool(a, ["ASI", "ATLAS_SPRITE_instance"]);
        }
      };
      var Te = {
        __properties__: {
          get_F: "get_F",
          get_C: "get_C",
          get_M3D: "get_M3D",
          get_TRP: "get_TRP",
          get_LP: "get_LP",
          get_FF: "get_FF",
          get_bitmap: "get_bitmap",
          get_ST: "get_ST",
          get_IN: "get_IN",
          get_SN: "get_SN"
        },
        get_SN: function (a) {
          return La.setFieldBool(a, ["SN", "SYMBOL_name"]);
        },
        get_IN: function (a) {
          return La.setFieldBool(a, ["IN", "Instance_Name"]);
        },
        get_ST: function (a) {
          return La.setFieldBool(a, ["ST", "symbolType"]);
        },
        get_bitmap: function (a) {
          return La.setFieldBool(a, ["BM", "bitmap"]);
        },
        get_FF: function (a) {
          return La.setFieldBool(a, ["FF", "firstFrame"]);
        },
        get_LP: function (a) {
          return La.setFieldBool(a, ["LP", "loop"]);
        },
        get_TRP: function (a) {
          return La.setFieldBool(a, ["TRP", "transformationPoint"]);
        },
        get_M3D: function (a) {
          return La.setFieldBool(a, ["M3D", "Matrix3D"]);
        },
        get_C: function (a) {
          return La.setFieldBool(a, ["C", "color"]);
        },
        get_F: function (a) {
          return La.setFieldBool(a, ["F", "filters"]);
        }
      };
      var tf = {
        __properties__: {
          get_BRT: "get_BRT",
          get_BO: "get_BO",
          get_BM: "get_BM",
          get_GO: "get_GO",
          get_GM: "get_GM",
          get_RO: "get_RO",
          get_RM: "get_RM",
          get_AO: "get_AO",
          get_AM: "get_AM",
          get_TM: "get_TM",
          get_TC: "get_TC",
          get_M: "get_M"
        },
        get_M: function (a) {
          return La.setFieldBool(a, ["M", "mode"]);
        },
        get_TC: function (a) {
          return La.setFieldBool(a, ["TC", "tintColor"]);
        },
        get_TM: function (a) {
          return La.setFieldBool(a, ["TM", "tintMultiplier"]);
        },
        get_AM: function (a) {
          return La.setFieldBool(a, ["AM", "alphaMultiplier"]);
        },
        get_AO: function (a) {
          return La.setFieldBool(a, ["AO", "AlphaOffset"]);
        },
        get_RM: function (a) {
          return La.setFieldBool(a, ["RM", "RedMultiplier"]);
        },
        get_RO: function (a) {
          return La.setFieldBool(a, ["RO", "redOffset"]);
        },
        get_GM: function (a) {
          return La.setFieldBool(a, ["GM", "greenMultiplier"]);
        },
        get_GO: function (a) {
          return La.setFieldBool(a, ["GO", "greenOffset"]);
        },
        get_BM: function (a) {
          return La.setFieldBool(a, ["BM", "blueMultiplier"]);
        },
        get_BO: function (a) {
          return La.setFieldBool(a, ["BO", "blueOffset"]);
        },
        get_BRT: function (a) {
          return La.setFieldBool(a, ["BRT", "Brightness"]);
        }
      };
      var ep = {
        __properties__: {
          get_H: "get_H",
          get_SAT: "get_SAT",
          get_CT: "get_CT",
          get_BRT: "get_BRT"
        },
        get_BRT: function (a) {
          return La.setFieldBool(a, ["BRT", "brightness"]);
        },
        get_CT: function (a) {
          return La.setFieldBool(a, ["CT", "contrast"]);
        },
        get_SAT: function (a) {
          return La.setFieldBool(a, ["SAT", "saturation"]);
        },
        get_H: function (a) {
          return La.setFieldBool(a, ["H", "hue"]);
        }
      };
      var Bh = {
        __properties__: {
          get_Q: "get_Q",
          get_BLY: "get_BLY",
          get_BLX: "get_BLX"
        },
        get_BLX: function (a) {
          return La.setFieldBool(a, ["BLX", "blurX"]);
        },
        get_BLY: function (a) {
          return La.setFieldBool(a, ["BLY", "blurY"]);
        },
        get_Q: function (a) {
          return La.setFieldBool(a, ["Q", "quality"]);
        }
      };
      var fo = {
        __properties__: {
          get_IN: "get_IN",
          get_KK: "get_KK",
          get_STR: "get_STR",
          get_A: "get_A",
          get_C: "get_C"
        },
        get_C: function (a) {
          return La.setFieldBool(a, ["C"]);
        },
        get_A: function (a) {
          return La.setFieldBool(a, ["A"]);
        },
        get_STR: function (a) {
          return La.setFieldBool(a, ["STR", "strength"]);
        },
        get_KK: function (a) {
          return La.setFieldBool(a, ["KK", "knockout"]);
        },
        get_IN: function (a) {
          return La.setFieldBool(a, ["IN"]);
        }
      };
      var Ah = {
        __properties__: {
          get_TP: "get_TP",
          get_DST: "get_DST",
          get_AL: "get_AL",
          get_KK: "get_KK",
          get_STR: "get_STR",
          get_HA: "get_HA",
          get_HC: "get_HC",
          get_SA: "get_SA",
          get_SC: "get_SC"
        },
        get_SC: function (a) {
          return La.setFieldBool(a, ["SC", "shadowColor"]);
        },
        get_SA: function (a) {
          return La.setFieldBool(a, ["SA", "shadowAlpha"]);
        },
        get_HC: function (a) {
          return La.setFieldBool(a, ["HC", "highlightColor"]);
        },
        get_HA: function (a) {
          return La.setFieldBool(a, ["HA", "highlightAlpha"]);
        },
        get_STR: function (a) {
          return La.setFieldBool(a, ["STR", "strength"]);
        },
        get_KK: function (a) {
          return La.setFieldBool(a, ["KK", "knockout"]);
        },
        get_AL: function (a) {
          return La.setFieldBool(a, ["AL", "angle"]);
        },
        get_DST: function (a) {
          return La.setFieldBool(a, ["DST", "distance"]);
        },
        get_TP: function (a) {
          return La.setFieldBool(a, ["TP", "type"]);
        }
      };
      var dp = {
        __properties__: {
          get_POS: "get_POS",
          get_N: "get_N"
        },
        get_N: function (a) {
          return La.setFieldBool(a, ["N", "name"]);
        },
        get_POS: function (a) {
          return La.setFieldBool(a, ["POS", "Position"]);
        }
      };
      var Op = {
        __properties__: {
          get_M3D: "get_M3D"
        },
        get_M3D: function (a) {
          return La.setFieldBool(a, ["M3D", "Matrix3D"]);
        }
      };
      function co() {
        this.renderer = new Ja(g.game.stage.context3D);
      }
      h["flxanimate.display.FlxAnimateFilterRenderer"] = co;
      co.__name__ = "flxanimate.display.FlxAnimateFilterRenderer";
      co.prototype = {
        applyFilter: function (a, b, c) {
          if (b == null || b.length == 0) {
            return a;
          }
          this.renderer.__setBlendMode(10);
          this.renderer.__worldAlpha = 1;
          if (this.renderer.__worldTransform == null) {
            this.renderer.__worldTransform = new Aa();
            this.renderer.__worldColorTransform = new Nb();
          }
          c = new T(Math.ceil(c.width), Math.ceil(c.height), true, 0);
          var d = c.clone();
          var e = d.clone();
          c.copyPixels(a, a.rect, new kb((c.width - a.width) * 0.5, (c.height - a.height) * 0.5));
          this.renderer.__setBlendMode(10);
          this.renderer.__worldAlpha = 1;
          this.renderer.__worldTransform.identity();
          this.renderer.__worldColorTransform.__identity();
          var f = null;
          for (a = 0; a < b.length;) {
            var k = b[a];
            ++a;
            if (k.__preserveObject) {
              this.renderer.__setRenderTarget(e);
              this.renderer.__renderFilterPass(c, this.renderer.__defaultDisplayShader, k.__smooth);
            }
            for (var g = 0, n = k.__numShaderPasses; g < n;) {
              f = g++;
              f = k.__initShader(this.renderer, f, k.__preserveObject ? e : null);
              this.renderer.__setBlendMode(k.__shaderBlendMode);
              this.renderer.__setRenderTarget(d);
              this.renderer.__renderFilterPass(c, f, k.__smooth);
              f = c;
              c = d;
              d = f;
            }
            k.__renderDirty = false;
          }
          d.dispose();
          e.dispose();
          if (f != null) {
            f.dispose();
          }
          return c;
        },
        graphicstoBitmapData: function (a) {
          D.render(a, this.renderer.__softwareRenderer);
          var b = a.__bitmap;
          a.__bitmap = null;
          a.__renderTransform.identity();
          return b;
        },
        __class__: co
      };
      function re() {
        this.c_Transform = null;
        this.renderDirty = true;
      }
      h["flxanimate.effects.FlxColorEffect"] = re;
      re.__name__ = "flxanimate.effects.FlxColorEffect";
      re.prototype = {
        process: function () {},
        __create: function () {
          if (!this.renderDirty) {
            return this.c_Transform;
          }
          if (this.c_Transform == null) {
            this.c_Transform = new Nb();
          }
          this.process();
          this.renderDirty = false;
          return this.c_Transform;
        },
        __class__: re
      };
      function Jl(a) {
        re.call(this);
        this.set_colorTransform(a);
      }
      h["flxanimate.effects.FlxAdvanced"] = Jl;
      Jl.__name__ = "flxanimate.effects.FlxAdvanced";
      Jl.__super__ = re;
      Jl.prototype = q(re.prototype, {
        set_colorTransform: function (a) {
          return this.c_Transform = a;
        },
        __class__: Jl,
        __properties__: {
          set_colorTransform: "set_colorTransform"
        }
      });
      function Kl(a) {
        re.call(this);
        this.set_alpha(a);
      }
      h["flxanimate.effects.FlxAlpha"] = Kl;
      Kl.__name__ = "flxanimate.effects.FlxAlpha";
      Kl.__super__ = re;
      Kl.prototype = q(re.prototype, {
        process: function () {
          this.c_Transform.alphaMultiplier = this.alpha;
        },
        set_alpha: function (a) {
          if (this.alpha != a) {
            this.renderDirty = true;
          }
          return this.alpha = a;
        },
        __class__: Kl,
        __properties__: {
          set_alpha: "set_alpha"
        }
      });
      function Ll(a) {
        re.call(this);
        this.set_brightness(a);
      }
      h["flxanimate.effects.FlxBrightness"] = Ll;
      Ll.__name__ = "flxanimate.effects.FlxBrightness";
      Ll.__super__ = re;
      Ll.prototype = q(re.prototype, {
        process: function () {
          this.c_Transform.redMultiplier = this.c_Transform.greenMultiplier = this.c_Transform.blueMultiplier = 1 - Math.abs(this.brightness);
          if (this.brightness >= 0) {
            this.c_Transform.redOffset = this.c_Transform.greenOffset = this.c_Transform.blueOffset = this.brightness * 255;
          }
        },
        set_brightness: function (a) {
          if (this.brightness != a) {
            this.renderDirty = true;
          }
          return this.brightness = a;
        },
        __class__: Ll,
        __properties__: {
          set_brightness: "set_brightness"
        }
      });
      function Ml(a, b) {
        re.call(this);
        b = Math.round(b * 255);
        this.set_tint(a & 16777215 | (b > 255 ? 255 : b < 0 ? 0 : b) << 24);
      }
      h["flxanimate.effects.FlxTint"] = Ml;
      Ml.__name__ = "flxanimate.effects.FlxTint";
      Ml.__super__ = re;
      Ml.prototype = q(re.prototype, {
        process: function () {
          var a = (this.tint >> 24 & 255) / 255;
          var b = 1 - a;
          this.c_Transform.redMultiplier = b;
          this.c_Transform.redOffset = Math.round((this.tint >> 16 & 255) * a);
          this.c_Transform.greenMultiplier = b;
          this.c_Transform.greenOffset = Math.round((this.tint >> 8 & 255) * a);
          this.c_Transform.blueMultiplier = b;
          this.c_Transform.blueOffset = Math.round((this.tint & 255) * a);
        },
        set_tint: function (a) {
          if (this.tint != a) {
            this.renderDirty = true;
          }
          return this.tint = a;
        },
        __class__: Ml,
        __properties__: {
          set_tint: "set_tint"
        }
      });
      function se() {
        this.__leftExtension = this.__bottomExtension = 0;
        this.__needSecondBitmapData = true;
        this.__numShaderPasses = 0;
        this.__preserveObject = false;
        this.__rightExtension = 0;
        this.__shaderBlendMode = 10;
        this.__topExtension = 0;
        this.__smooth = true;
      }
      h["openfl.filters.BitmapFilter"] = se;
      se.__name__ = "openfl.filters.BitmapFilter";
      se.prototype = {
        clone: function () {
          return new se();
        },
        __applyFilter: function (a, b, c, d) {
          return b;
        },
        __initShader: function (a, b, c) {
          return null;
        },
        __class__: se
      };
      function nc(a) {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}";
        }
        ke.call(this, a);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters.BitmapFilterShader"] = nc;
      nc.__name__ = "openfl.filters.BitmapFilterShader";
      nc.__super__ = ke;
      nc.prototype = q(ke.prototype, {
        __class__: nc
      });
      function uf() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec4 uColorH;\r\n\t\tuniform vec4 uColorS;\r\n\t\tuniform int knockout;\r\n\t\tuniform sampler2D sourceBitmap;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\t\tvoid main(void) {\n\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\r\n\t\tvec4 highlight = texture2D(openfl_Texture, textureCoords.zw);\r\n\t\thighlight.rgb = vec3(1., 1., 1.) * highlight.a;\r\n\t\tvec4 shadow = texture2D(openfl_Texture, textureCoords.xy);\r\n\r\n\t\tshadow.rgb = vec3(1., 1., 1.) * shadow.a;\r\n\r\n\t\tvec4 a = highlight;\r\n\r\n\t\thighlight = mix(highlight, vec4(0.), shadow.a);\r\n\t\t\r\n\t\tshadow = mix(shadow, vec4(0.), a.a);\r\n\r\n\t\tvec4 bevel = (uColorS * shadow) + (uColorH * highlight);\r\n\r\n\t\tvec4 src = texture2D(sourceBitmap, openfl_TextureCoordv);\r\n\t\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec2 offset;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\ntextureCoords = vec4(openfl_TextureCoord - offset / openfl_TextureSize, openfl_TextureCoord + offset / openfl_TextureSize);\n\n\t\t}";
        }
        nc.call(this);
        this.uColorH.value = [0, 0, 0, 0];
        this.uColorS.value = [0, 0, 0, 0];
        this.offset.value = [0, 0];
        this.knockout.value = [0];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["flxanimate.filters._BevelFilter.BevelShader"] = uf;
      uf.__name__ = "flxanimate.filters._BevelFilter.BevelShader";
      uf.__super__ = nc;
      uf.prototype = q(nc.prototype, {
        __class__: uf
      });
      function Nl() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\r\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec4 uColorH;\r\n\t\tuniform vec4 uColorS;\r\n\t\tuniform int knockout;\r\n\t\tuniform sampler2D sourceBitmap;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\r\n\r\n\t\tvoid main(void) {\r\n\t\t\t\r\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\r\n\t\tvec4 highlight = texture2D(openfl_Texture, textureCoords.zw);\r\n\t\thighlight.rgb = vec3(1., 1., 1.) * highlight.a;\r\n\t\tvec4 shadow = texture2D(openfl_Texture, textureCoords.xy);\r\n\r\n\t\tshadow.rgb = vec3(1., 1., 1.) * shadow.a;\r\n\r\n\t\tvec4 a = highlight;\r\n\r\n\t\thighlight = mix(highlight, vec4(0.), shadow.a);\r\n\t\t\r\n\t\tshadow = mix(shadow, vec4(0.), a.a);\r\n\r\n\t\tvec4 bevel = (uColorS * shadow) + (uColorH * highlight);\r\n\r\n\t\tvec4 src = texture2D(sourceBitmap, openfl_TextureCoordv);\r\n\t\n\r\n\r\n\t\t\tif (knockout == 0)\r\n\t\t\t\tgl_FragColor = src + bevel * (1.0 - src.a);\r\n\t\t\telse\r\n\t\t\t\tgl_FragColor = bevel * (1.0 - src.a);\r\n\t\t}\r\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec2 offset;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\ntextureCoords = vec4(openfl_TextureCoord - offset / openfl_TextureSize, openfl_TextureCoord + offset / openfl_TextureSize);\n\n\n\t\t}";
        }
        uf.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["flxanimate.filters._BevelFilter.CombineShader"] = Nl;
      Nl.__name__ = "flxanimate.filters._BevelFilter.CombineShader";
      Nl.__super__ = uf;
      Nl.prototype = q(uf.prototype, {
        __class__: Nl
      });
      var Ap = {
        _new: function (a) {
          return {};
        }
      };
      function Ol() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\r\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec4 uColorH;\r\n\t\tuniform vec4 uColorS;\r\n\t\tuniform int knockout;\r\n\t\tuniform sampler2D sourceBitmap;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\r\n\r\n\t\tvoid main(void) {\r\n\r\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\r\n\t\tvec4 highlight = texture2D(openfl_Texture, textureCoords.zw);\r\n\t\thighlight.rgb = vec3(1., 1., 1.) * highlight.a;\r\n\t\tvec4 shadow = texture2D(openfl_Texture, textureCoords.xy);\r\n\r\n\t\tshadow.rgb = vec3(1., 1., 1.) * shadow.a;\r\n\r\n\t\tvec4 a = highlight;\r\n\r\n\t\thighlight = mix(highlight, vec4(0.), shadow.a);\r\n\t\t\r\n\t\tshadow = mix(shadow, vec4(0.), a.a);\r\n\r\n\t\tvec4 bevel = (uColorS * shadow) + (uColorH * highlight);\r\n\r\n\t\tvec4 src = texture2D(sourceBitmap, openfl_TextureCoordv);\r\n\t\n\r\n\t\t\t\r\n\t\t\tif (knockout == 0)\r\n\t\t\t\tgl_FragColor = src + bevel;\r\n\t\t\telse\r\n\t\t\t\tgl_FragColor = bevel;\r\n\t\t}\r\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec2 offset;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\ntextureCoords = vec4(openfl_TextureCoord - offset / openfl_TextureSize, openfl_TextureCoord + offset / openfl_TextureSize);\n\n\n\t\t}";
        }
        uf.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["flxanimate.filters._BevelFilter.FullCombineShader"] = Ol;
      Ol.__name__ = "flxanimate.filters._BevelFilter.FullCombineShader";
      Ol.__super__ = uf;
      Ol.prototype = q(uf.prototype, {
        __class__: Ol
      });
      function Pl() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\r\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec4 uColorH;\r\n\t\tuniform vec4 uColorS;\r\n\t\tuniform int knockout;\r\n\t\tuniform sampler2D sourceBitmap;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\r\n\r\n\t\tvoid main(void) {\r\n\t\t\t\r\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\r\n\t\tvec4 highlight = texture2D(openfl_Texture, textureCoords.zw);\r\n\t\thighlight.rgb = vec3(1., 1., 1.) * highlight.a;\r\n\t\tvec4 shadow = texture2D(openfl_Texture, textureCoords.xy);\r\n\r\n\t\tshadow.rgb = vec3(1., 1., 1.) * shadow.a;\r\n\r\n\t\tvec4 a = highlight;\r\n\r\n\t\thighlight = mix(highlight, vec4(0.), shadow.a);\r\n\t\t\r\n\t\tshadow = mix(shadow, vec4(0.), a.a);\r\n\r\n\t\tvec4 bevel = (uColorS * shadow) + (uColorH * highlight);\r\n\r\n\t\tvec4 src = texture2D(sourceBitmap, openfl_TextureCoordv);\r\n\t\n\r\n\r\n\t\t\tif (knockout == 0)\r\n\t\t\t\tgl_FragColor = vec4((src.rgb * (1.0 - bevel.a)) + (bevel.rgb * src.a), src.a);\r\n\t\t\telse\r\n\t\t\t\tgl_FragColor = bevel * src.a;\r\n\t\t}\r\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec2 offset;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\ntextureCoords = vec4(openfl_TextureCoord - offset / openfl_TextureSize, openfl_TextureCoord + offset / openfl_TextureSize);\n\n\n\t\t}";
        }
        uf.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["flxanimate.filters._BevelFilter.InnerCombineShader"] = Pl;
      Pl.__name__ = "flxanimate.filters._BevelFilter.InnerCombineShader";
      Pl.__super__ = uf;
      Pl.prototype = q(uf.prototype, {
        __class__: Pl
      });
      function Hf(a, b, c, d, e, f, k, g, n, h, p, m) {
        if (m == null) {
          m = false;
        }
        if (p == null) {
          p = "inner";
        }
        if (h == null) {
          h = 1;
        }
        if (n == null) {
          n = 1;
        }
        if (g == null) {
          g = 4;
        }
        if (k == null) {
          k = 4;
        }
        if (f == null) {
          f = 1;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 16777215;
        }
        if (b == null) {
          b = 45;
        }
        if (a == null) {
          a = 4;
        }
        se.call(this);
        this.__offsetY = this.__offsetX = 0;
        this.__distance = a;
        this.__angle = b;
        this.__highlightColor = c;
        this.__highlightAlpha = d;
        this.__shadowColor = e;
        this.__shadowAlpha = f;
        this.__blurX = k;
        this.__blurY = g;
        this.__strength = n;
        this.__quality = h;
        this.__type = p;
        this.__knockout = m;
        this.__updateSize();
        this.__renderDirty = this.__preserveObject = this.__needSecondBitmapData = true;
      }
      h["flxanimate.filters.BevelFilter"] = Hf;
      Hf.__name__ = "flxanimate.filters.BevelFilter";
      Hf.__super__ = se;
      Hf.prototype = q(se.prototype, {
        clone: function () {
          return new Hf(this.__distance, this.__angle, this.__highlightColor, this.__highlightAlpha, this.__shadowColor, this.__shadowAlpha, this.__blurX, this.__blurY, this.__strength, this.__quality, this.__type, this.__knockout);
        },
        __initShader: function (a, b, c) {
          if (b < this.__horizontalPasses + this.__verticalPasses) {
            a = Gd.__blurAlphaShader;
            if (b < this.__horizontalPasses) {
              c = Math.pow(0.5, b >> 1) * 0.5;
              a.uRadius.value[0] = this.get_blurX() * c;
              a.uRadius.value[1] = 0;
            } else {
              c = Math.pow(0.5, b - this.__horizontalPasses >> 1) * 0.5;
              a.uRadius.value[0] = 0;
              a.uRadius.value[1] = this.get_blurY() * c;
            }
            a.uColor.value[3] = 1;
            a.uStrength.value[0] = b == this.__horizontalPasses + this.__verticalPasses - 1 ? this.__strength : 1;
            return a;
          }
          switch (Pp.fromString(this.__type)) {
            case 0:
              a = Hf.__fullCombineShader;
              break;
            case 1:
              a = Hf.__innerCombineShader;
              break;
            case 2:
              a = Hf.__combineShader;
              break;
            default:
              a = null;
          }
          if (a != null) {
            a.sourceBitmap.input = c;
            a.uColorH.value[0] = (this.get_highlightColor() >> 16 & 255) / 255;
            a.uColorH.value[1] = (this.get_highlightColor() >> 8 & 255) / 255;
            a.uColorH.value[2] = (this.get_highlightColor() & 255) / 255;
            a.uColorH.value[3] = this.get_highlightAlpha();
            a.uColorS.value[0] = (this.get_shadowColor() >> 16 & 255) / 255;
            a.uColorS.value[1] = (this.get_shadowColor() >> 8 & 255) / 255;
            a.uColorS.value[2] = (this.get_shadowColor() & 255) / 255;
            a.uColorS.value[3] = this.get_shadowAlpha();
            a.knockout.value[0] = this.__knockout ? 1 : 0;
            a.offset.value[0] = this.__offsetX;
            a.offset.value[1] = this.__offsetY;
          }
          return a;
        },
        __updateSize: function () {
          var a = this.get_type() == "inner";
          this.__offsetX = this.__distance * Math.cos(this.__angle * Math.PI / 180) | 0;
          this.__offsetY = this.__distance * Math.sin(this.__angle * Math.PI / 180) | 0;
          this.__bottomExtension = this.__topExtension = a ? 0 : Math.ceil(Math.abs(this.__offsetY) + this.__blurY);
          this.__rightExtension = this.__leftExtension = a ? 0 : Math.ceil(Math.abs(this.__offsetX) + this.__blurX);
          this.__calculateNumShaderPasses();
        },
        __calculateNumShaderPasses: function () {
          this.__horizontalPasses = this.__blurX <= 0 ? 0 : Math.round(this.__quality / 4 * this.__blurX) + 1;
          this.__verticalPasses = this.__blurY <= 0 ? 0 : Math.round(this.__quality / 4 * this.__blurY) + 1;
          this.__numShaderPasses = this.__horizontalPasses + this.__verticalPasses + 1;
        },
        get_blurX: function () {
          return this.__blurX;
        },
        get_blurY: function () {
          return this.__blurY;
        },
        get_highlightAlpha: function () {
          return this.__highlightAlpha;
        },
        get_highlightColor: function () {
          return this.__highlightColor;
        },
        get_shadowAlpha: function () {
          return this.__shadowAlpha;
        },
        get_shadowColor: function () {
          return this.__shadowColor;
        },
        get_type: function () {
          return this.__type;
        },
        __class__: Hf,
        __properties__: {
          get_type: "get_type",
          get_shadowColor: "get_shadowColor",
          get_shadowAlpha: "get_shadowAlpha",
          get_highlightColor: "get_highlightColor",
          get_highlightAlpha: "get_highlightAlpha",
          get_blurY: "get_blurY",
          get_blurX: "get_blurX"
        }
      });
      function xd() {
        fb.call(this, null);
        this.parents = [];
      }
      h["flxanimate.frames.FlxAnimateFrames"] = xd;
      xd.__name__ = "flxanimate.frames.FlxAnimateFrames";
      xd.fromTextureAtlas = function (a) {
        var b = new xd();
        if (xd.zip != null || Jc.extension(a) == "zip") {
          g.log.advanced("Zip Stuff isn't supported on Html5 since it can't transform bytes into an image", Ba.ERROR, true);
          return null;
        }
        var c = [];
        for (var d = 0, e = W.list("TEXT"); d < e.length;) {
          var f = e[d];
          ++d;
          if (w.startsWith(f, "" + a + "/spritemap")) {
            c.push(f);
          }
        }
        d = c;
        if (d.length > 1) {
          d.sort(function (a, b) {
            a = H.parseInt(Jc.withoutDirectory(a).charAt(9));
            b = H.parseInt(Jc.withoutDirectory(b).charAt(9));
            if (isNaN(a) || isNaN(b)) {
              return 0;
            } else {
              return a - b;
            }
          });
        }
        f = [];
        for (c = 0; c < d.length;) {
          e = d[c];
          ++c;
          e = W.getText(e);
          if (M.cca(e, 0) == 65279) {
            e = e.substring(1);
          }
          e = JSON.parse(e);
          f.push({
            image: W.getBitmapData("" + a + "/" + e.meta.image),
            json: e
          });
        }
        for (c = 0; c < f.length;) {
          var k = f[c];
          ++c;
          if (k.image == null) {
            g.log.advanced("the image called \"" + k.json.meta.image + "\" does not exist in Path " + a + ", maybe you changed the image Path somewhere else?", Ba.ERROR, true);
          } else {
            var r = g.bitmap.add(k.image);
            var n = fb.findFrame(r);
            if (n == null) {
              n = new xd();
              d = 0;
              e = k.json.ATLAS.SPRITES;
              while (d < e.length) {
                var h = e[d];
                ++d;
                n.pushFrame(xd.textureAtlasHelper(r, h.SPRITE, k.json.meta));
              }
            }
            r.addFrameCollection(n);
            b.animateConcat(n);
          }
        }
        if (b.frames == []) {
          g.log.advanced("the Frames parsing couldn't parse any of the frames, it's completely empty! \n Maybe you misspelled the Path?", Ba.ERROR, true);
          return null;
        } else {
          return b;
        }
      };
      xd.fromSparrow = function (a, b) {
        if (typeof a == "string" && !W.exists(a)) {
          return null;
        }
        var c = typeof a == "string" ? X.parse(W.getText(a)).firstElement() : a.firstElement();
        if (c.nodeType != X.Document && c.nodeType != X.Element) {
          throw K.thrown("Invalid nodeType " + (c.nodeType == null ? "null" : hb.toString(c.nodeType)));
        }
        var d = c;
        if (b == null) {
          if (typeof a == "string") {
            b = Jc.directory(a) + Mb.resolve(d, "imagePath");
          } else {
            return null;
          }
        }
        b = g.bitmap.add(b);
        if (b == null) {
          return null;
        }
        a = fb.findFrame(b);
        if (a != null) {
          return a;
        }
        a = new fb(b);
        b = 0;
        for (d = fc.resolve(d, "SubTexture"); b < d.length;) {
          var e = d[b];
          ++b;
          var f = ec.resolve(e, "width");
          var k = Mb.resolve(e, "name");
          var r = ec.resolve(e, "frameX");
          var n = f ? Mb.resolve(e, "width") : Mb.resolve(e, "w");
          var h = f ? Mb.resolve(e, "height") : Mb.resolve(e, "h");
          var p = ec.resolve(e, "rotated") && Mb.resolve(e, "rotated") == "true";
          f = ec.resolve(e, "flipX") && Mb.resolve(e, "flipX") == "true";
          var m = ec.resolve(e, "flipY") && Mb.resolve(e, "flipY") == "true";
          var l = parseFloat(Mb.resolve(e, "x"));
          var q = parseFloat(Mb.resolve(e, "y"));
          c = parseFloat(n);
          h = parseFloat(h);
          if (h == null) {
            h = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (q == null) {
            q = 0;
          }
          if (l == null) {
            l = 0;
          }
          n = Ha._pool.get();
          if (h == null) {
            h = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (q == null) {
            q = 0;
          }
          if (l == null) {
            l = 0;
          }
          n.x = l;
          n.y = q;
          n.width = c;
          n.height = h;
          n._inPool = false;
          q = r ? new Ha(H.parseInt(Mb.resolve(e, "frameX")), H.parseInt(Mb.resolve(e, "frameY")), H.parseInt(Mb.resolve(e, "frameWidth")), H.parseInt(Mb.resolve(e, "frameHeight"))) : new Ha(0, 0, n.width == 0 ? 1 : n.width, n.height == 0 ? 1 : n.height);
          if (n.width == 0 || n.height == 0) {
            a.addEmptyFrame(q);
          } else {
            e = p ? -90 : 0;
            c = -q.x;
            h = -q.y;
            if (h == null) {
              h = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (h == null) {
              h = 0;
            }
            if (c == null) {
              c = 0;
            }
            c = fa.pool.get().set(c, h);
            c._inPool = false;
            l = q.width;
            h = q.height;
            if (h == null) {
              h = 0;
            }
            if (l == null) {
              l = 0;
            }
            if (h == null) {
              h = 0;
            }
            if (l == null) {
              l = 0;
            }
            h = fa.pool.get().set(l, h);
            h._inPool = false;
            if (p && !r) {
              r = q.height;
              p = q.width;
              if (p == null) {
                p = 0;
              }
              if (r == null) {
                r = 0;
              }
              h.set_x(r);
              h.set_y(p);
            }
            a.addAtlasFrame(n, h, c, k, e, f, m);
          }
        }
        return a;
      };
      xd.fromAnimateAtlas = function (a, b) {
        var c = new xd();
        b = g.bitmap.add(b);
        var d = fb.findFrame(b);
        if (d == null) {
          d = new xd();
          for (var e = 0, f = a.ATLAS.SPRITES; e < f.length;) {
            var k = f[e];
            ++e;
            d.pushFrame(xd.textureAtlasHelper(b, k.SPRITE, a.meta));
          }
        }
        b.addFrameCollection(d);
        c.animateConcat(d);
        if (c.frames == []) {
          g.log.advanced("the Frames parsing couldn't parse any of the frames, it's completely empty! \n Maybe you misspelled the Path?", Ba.ERROR, true);
          return null;
        } else {
          return c;
        }
      };
      xd.textureAtlasHelper = function (a, b, c) {
        var d = b.rotated ? b.h : b.w;
        c = b.rotated ? b.w : b.h;
        a = new pb(a);
        a.name = b.name;
        var e = a.sourceSize;
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        e.set_x(d);
        e.set_y(c);
        a.set_frame(new Ha(b.x, b.y, b.w, b.h));
        if (b.rotated) {
          a.angle = -90;
        }
        return a;
      };
      xd.texturePackerHelper = function (a, b, c) {
        var d = b.rotated;
        var e = b.sourceSize.w;
        var f = b.sourceSize.h;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        f = fa.pool.get().set(e, f);
        f._inPool = false;
        var k = f;
        e = b.spriteSourceSize.x;
        f = b.spriteSourceSize.y;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        f = fa.pool.get().set(e, f);
        f._inPool = false;
        e = 0;
        if (d) {
          var g = b.frame.x;
          var n = b.frame.y;
          d = b.frame.h;
          var h = b.frame.w;
          if (h == null) {
            h = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (g == null) {
            g = 0;
          }
          b = Ha._pool.get();
          if (h == null) {
            h = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (g == null) {
            g = 0;
          }
          b.x = g;
          b.y = n;
          b.width = d;
          b.height = h;
          b._inPool = false;
          e = -90;
        } else {
          g = b.frame.x;
          n = b.frame.y;
          d = b.frame.w;
          h = b.frame.h;
          if (h == null) {
            h = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (g == null) {
            g = 0;
          }
          b = Ha._pool.get();
          if (h == null) {
            h = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (g == null) {
            g = 0;
          }
          b.x = g;
          b.y = n;
          b.width = d;
          b.height = h;
          b._inPool = false;
        }
        c.addAtlasFrame(b, k, f, a, e);
      };
      xd.__super__ = fb;
      xd.prototype = q(fb.prototype, {
        animateConcat: function (a) {
          if (this.parents.indexOf(a.parent) == -1) {
            this.parents.push(a.parent);
          }
          var b = 0;
          for (a = a.frames; b < a.length;) {
            var c = a[b];
            ++b;
            this.frames.push(c);
            this.framesByName.h[c.name] = c;
          }
          return this;
        },
        __class__: xd
      });
      function Ql(a) {
        if (a != null && a.get_length() == 16) {
          this.rawData = a.concat(null);
        } else {
          this.rawData = qb.toFloatVector(null, null, null, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
        }
      }
      h["openfl.geom.Matrix3D"] = Ql;
      Ql.__name__ = "openfl.geom.Matrix3D";
      Ql.prototype = {
        append: function (a) {
          var b = this.rawData.get(0);
          var c = this.rawData.get(4);
          var d = this.rawData.get(8);
          var e = this.rawData.get(12);
          var f = this.rawData.get(1);
          var k = this.rawData.get(5);
          var g = this.rawData.get(9);
          var n = this.rawData.get(13);
          var h = this.rawData.get(2);
          var p = this.rawData.get(6);
          var m = this.rawData.get(10);
          var l = this.rawData.get(14);
          var q = this.rawData.get(3);
          var t = this.rawData.get(7);
          var u = this.rawData.get(11);
          var x = this.rawData.get(15);
          var L = a.rawData.get(0);
          var w = a.rawData.get(4);
          var z = a.rawData.get(8);
          var A = a.rawData.get(12);
          var y = a.rawData.get(1);
          var H = a.rawData.get(5);
          var D = a.rawData.get(9);
          var C = a.rawData.get(13);
          var Ka = a.rawData.get(2);
          var F = a.rawData.get(6);
          var B = a.rawData.get(10);
          var v = a.rawData.get(14);
          var G = a.rawData.get(3);
          var K = a.rawData.get(7);
          var ha = a.rawData.get(11);
          a = a.rawData.get(15);
          this.rawData.set(0, b * L + f * w + h * z + q * A);
          this.rawData.set(1, b * y + f * H + h * D + q * C);
          this.rawData.set(2, b * Ka + f * F + h * B + q * v);
          this.rawData.set(3, b * G + f * K + h * ha + q * a);
          this.rawData.set(4, c * L + k * w + p * z + t * A);
          this.rawData.set(5, c * y + k * H + p * D + t * C);
          this.rawData.set(6, c * Ka + k * F + p * B + t * v);
          this.rawData.set(7, c * G + k * K + p * ha + t * a);
          this.rawData.set(8, d * L + g * w + m * z + u * A);
          this.rawData.set(9, d * y + g * H + m * D + u * C);
          this.rawData.set(10, d * Ka + g * F + m * B + u * v);
          this.rawData.set(11, d * G + g * K + m * ha + u * a);
          this.rawData.set(12, e * L + n * w + l * z + x * A);
          this.rawData.set(13, e * y + n * H + l * D + x * C);
          this.rawData.set(14, e * Ka + n * F + l * B + x * v);
          this.rawData.set(15, e * G + n * K + l * ha + x * a);
        },
        appendTranslation: function (a, b, c) {
          var d = this.rawData;
          d.set(12, d.get(12) + a);
          d = this.rawData;
          d.set(13, d.get(13) + b);
          d = this.rawData;
          d.set(14, d.get(14) + c);
        },
        copyRawDataFrom: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          if (c) {
            this.transpose();
          }
          for (var d = 0, e = a.get_length() - b; d < e;) {
            var f = d++;
            this.rawData.set(f, a.get(f + b));
          }
          if (c) {
            this.transpose();
          }
        },
        identity: function () {
          this.rawData = qb.toFloatVector(null, null, null, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
        },
        transpose: function () {
          var a = this.rawData.copy();
          this.rawData.set(1, a.get(4));
          this.rawData.set(2, a.get(8));
          this.rawData.set(3, a.get(12));
          this.rawData.set(4, a.get(1));
          this.rawData.set(6, a.get(9));
          this.rawData.set(7, a.get(13));
          this.rawData.set(8, a.get(2));
          this.rawData.set(9, a.get(6));
          this.rawData.set(11, a.get(14));
          this.rawData.set(12, a.get(3));
          this.rawData.set(13, a.get(7));
          this.rawData.set(14, a.get(11));
        },
        __class__: Ql
      };
      function Cj() {}
      h["flxanimate.motion.AdjustColor"] = Cj;
      Cj.__name__ = "flxanimate.motion.AdjustColor";
      Cj.prototype = {
        set_brightness: function (a) {
          if (this.m_brightnessMatrix == null) {
            this.m_brightnessMatrix = new Ie();
          }
          if (a != 0) {
            this.m_brightnessMatrix.setBrightnessMatrix(a);
          }
          return a;
        },
        set_contrast: function (a) {
          var b = a > 0 ? Cj.s_arrayOfDeltaIndex[a | 0] * 127 + 127 : a / 100 * 127 + 127;
          if (this.m_contrastMatrix == null) {
            this.m_contrastMatrix = new Ie();
          }
          this.m_contrastMatrix.setContrastMatrix(b);
          return a;
        },
        set_saturation: function (a) {
          var b = a > 0 ? 1 + a * 3 / 100 : a / 100 + 1;
          if (this.m_saturationMatrix == null) {
            this.m_saturationMatrix = new Ie();
          }
          this.m_saturationMatrix.setSaturationMatrix(b);
          return a;
        },
        set_hue: function (a) {
          if (this.m_hueMatrix == null) {
            this.m_hueMatrix = new Ie();
          }
          if (a != 0) {
            this.m_hueMatrix.setHueMatrix(a * Math.PI / 180);
          }
          return a;
        },
        allValuesAreSet: function () {
          return [this.m_brightnessMatrix, this.m_contrastMatrix, this.m_saturationMatrix, this.m_hueMatrix].indexOf(null) == -1;
        },
        calculateFinalFlatArray: function () {
          if (this.calculateFinalMatrix()) {
            return this.m_finalMatrix.getFlatArray();
          } else {
            return null;
          }
        },
        calculateFinalMatrix: function () {
          if (!this.allValuesAreSet()) {
            return false;
          }
          this.m_finalMatrix = new Ie();
          this.m_finalMatrix.multiply(this.m_brightnessMatrix);
          this.m_finalMatrix.multiply(this.m_contrastMatrix);
          this.m_finalMatrix.multiply(this.m_saturationMatrix);
          this.m_finalMatrix.multiply(this.m_hueMatrix);
          return true;
        },
        __class__: Cj,
        __properties__: {
          set_hue: "set_hue",
          set_saturation: "set_saturation",
          set_contrast: "set_contrast",
          set_brightness: "set_brightness"
        }
      };
      function Jf(a, b) {
        this.create(a, b);
      }
      h["flxanimate.motion.DynamicMatrix"] = Jf;
      Jf.__name__ = "flxanimate.motion.DynamicMatrix";
      Jf.prototype = {
        create: function (a, b) {
          if (!(a <= 0) && !(b <= 0)) {
            this.m_width = a;
            this.m_height = b;
            this.m_matrix = qb.toNullVector(null, b, true);
            for (var c = 0; c < b;) {
              var d = c++;
              this.m_matrix.set(d, qb.toFloatVector(null, a, true));
              for (var e = 0, f = a; e < f;) {
                var k = e++;
                this.m_matrix.get(d).set(k, 0);
              }
            }
          }
        },
        destroy: function () {
          this.m_matrix = null;
        },
        getWidth: function () {
          return this.m_width;
        },
        getHeight: function () {
          return this.m_height;
        },
        getValue: function (a, b) {
          var c = 0;
          if (a >= 0 && a < this.m_height && b >= 0 && b <= this.m_width) {
            c = this.m_matrix.get(a).get(b);
          }
          return c;
        },
        setValue: function (a, b, c) {
          if (a >= 0 && a < this.m_height && b >= 0 && b <= this.m_width) {
            this.m_matrix.get(a).set(b, c);
          }
        },
        loadIdentity: function () {
          if (this.m_matrix != null) {
            for (var a = 0, b = this.m_height; a < b;) {
              var c = a++;
              for (var d = 0, e = this.m_width; d < e;) {
                var f = d++;
                this.m_matrix.get(c).set(f, c == f ? 1 : 0);
              }
            }
          }
        },
        multiply: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (this.m_matrix == null || a == null) {
            return false;
          }
          var c = a.getHeight();
          var d = a.getWidth();
          var e = b == Jf.MATRIX_ORDER_APPEND ? d : a.getWidth();
          b = b == Jf.MATRIX_ORDER_APPEND ? c : this.m_height;
          if (e != b) {
            return false;
          }
          var f = new Jf(e, b);
          for (var k = 0, g = b; k < g;) {
            var n = k++;
            for (var h = 0, p = e; h < p;) {
              var m = h++;
              var l = 0;
              for (var q = 0, t = 0; q < Math.max(this.m_height, c) && t < Math.max(this.m_width, d);) {
                l += a.getValue(q, m) * this.m_matrix.get(n).get(t);
                ++q;
                ++t;
              }
              f.setValue(n, m, l);
            }
          }
          this.destroy();
          this.create(e, b);
          k = 0;
          for (g = c; k < g;) {
            n = k++;
            h = 0;
            p = this.m_width;
            while (h < p) {
              m = h++;
              this.m_matrix.get(n).set(m, f.getValue(n, m));
            }
          }
          return true;
        },
        multiplyNumber: function (a) {
          if (this.m_matrix == null) {
            return false;
          }
          for (var b = 0, c = this.m_height; b < c;) {
            var d = b++;
            for (var e = 0, f = this.m_width; e < f;) {
              var k = e++;
              var g = this.m_matrix.get(d);
              g.set(k, g.get(k) * a);
            }
          }
          return true;
        },
        add: function (a) {
          if (this.m_matrix == null || a == null) {
            return false;
          }
          var b = a.getHeight();
          var c = a.getWidth();
          if (this.m_width != c || b != this.m_height) {
            return false;
          }
          b = 0;
          for (c = this.m_height; b < c;) {
            var d = b++;
            for (var e = 0, f = this.m_width; e < f;) {
              var k = e++;
              var g = k;
              var n = this.m_matrix.get(d);
              n.set(g, n.get(g) + a.getValue(d, k));
            }
          }
          return true;
        },
        __class__: Jf
      };
      function Ie() {
        this.create(5, 5);
        this.loadIdentity();
      }
      h["flxanimate.motion.ColorMatrix"] = Ie;
      Ie.__name__ = "flxanimate.motion.ColorMatrix";
      Ie.__super__ = Jf;
      Ie.prototype = q(Jf.prototype, {
        setBrightnessMatrix: function (a) {
          if (this.m_matrix != null) {
            this.m_matrix.get(0).set(4, a);
            this.m_matrix.get(1).set(4, a);
            this.m_matrix.get(2).set(4, a);
          }
        },
        setContrastMatrix: function (a) {
          if (this.m_matrix != null) {
            var b = (127 - a) * 0.5;
            a /= 127;
            this.m_matrix.get(0).set(0, a);
            this.m_matrix.get(1).set(1, a);
            this.m_matrix.get(2).set(2, a);
            this.setBrightnessMatrix(b);
          }
        },
        setSaturationMatrix: function (a) {
          if (this.m_matrix != null) {
            var b = 1 - a;
            var c = b * Ie.lumR;
            this.m_matrix.get(0).set(0, c + a);
            this.m_matrix.get(1).set(0, c);
            this.m_matrix.get(2).set(0, c);
            c = b * Ie.lumG;
            this.m_matrix.get(0).set(1, c);
            this.m_matrix.get(1).set(1, c + a);
            this.m_matrix.get(2).set(1, c);
            c = b * Ie.lumB;
            this.m_matrix.get(0).set(2, c);
            this.m_matrix.get(1).set(2, c);
            this.m_matrix.get(2).set(2, c + a);
          }
        },
        setHueMatrix: function (a) {
          if (this.m_matrix != null) {
            this.loadIdentity();
            var b = new Jf(3, 3);
            var c = new Jf(3, 3);
            var d = new Jf(3, 3);
            var e = Math.cos(a);
            a = Math.sin(a);
            b.setValue(0, 0, 0.213);
            b.setValue(1, 0, 0.213);
            b.setValue(2, 0, 0.213);
            b.setValue(0, 1, 0.715);
            b.setValue(1, 1, 0.715);
            b.setValue(2, 1, 0.715);
            b.setValue(0, 2, 0.072);
            b.setValue(1, 2, 0.072);
            b.setValue(2, 2, 0.072);
            c.setValue(0, 0, 0.787);
            c.setValue(1, 0, -0.213);
            c.setValue(2, 0, -0.213);
            c.setValue(0, 1, -0.715);
            c.setValue(1, 1, 0.28500000000000003);
            c.setValue(2, 1, -0.715);
            c.setValue(0, 2, -0.072);
            c.setValue(1, 2, -0.072);
            c.setValue(2, 2, 0.928);
            c.multiplyNumber(e);
            d.setValue(0, 0, -0.213);
            d.setValue(1, 0, 0.14300000000000002);
            d.setValue(2, 0, -0.787);
            d.setValue(0, 1, -0.715);
            d.setValue(1, 1, 0.14);
            d.setValue(2, 1, 0.715);
            d.setValue(0, 2, 0.928);
            d.setValue(1, 2, -0.283);
            d.setValue(2, 2, 0.072);
            d.multiplyNumber(a);
            b.add(c);
            b.add(d);
            this.m_matrix.get(0).set(0, b.getValue(0, 0));
            this.m_matrix.get(0).set(1, b.getValue(0, 1));
            this.m_matrix.get(0).set(2, b.getValue(0, 2));
            this.m_matrix.get(1).set(0, b.getValue(1, 0));
            this.m_matrix.get(1).set(1, b.getValue(1, 1));
            this.m_matrix.get(1).set(2, b.getValue(1, 2));
            this.m_matrix.get(2).set(0, b.getValue(2, 0));
            this.m_matrix.get(2).set(1, b.getValue(2, 1));
            this.m_matrix.get(2).set(2, b.getValue(2, 2));
          }
        },
        getFlatArray: function () {
          if (this.m_matrix == null) {
            return null;
          }
          var a = 0;
          var b = [];
          b[a] = this.m_matrix.get(0).get(0);
          ++a;
          b[a] = this.m_matrix.get(0).get(1);
          ++a;
          b[a] = this.m_matrix.get(0).get(2);
          ++a;
          b[a] = this.m_matrix.get(0).get(3);
          ++a;
          b[a] = this.m_matrix.get(0).get(4);
          ++a;
          b[a] = this.m_matrix.get(1).get(0);
          ++a;
          b[a] = this.m_matrix.get(1).get(1);
          ++a;
          b[a] = this.m_matrix.get(1).get(2);
          ++a;
          b[a] = this.m_matrix.get(1).get(3);
          ++a;
          b[a] = this.m_matrix.get(1).get(4);
          ++a;
          b[a] = this.m_matrix.get(2).get(0);
          ++a;
          b[a] = this.m_matrix.get(2).get(1);
          ++a;
          b[a] = this.m_matrix.get(2).get(2);
          ++a;
          b[a] = this.m_matrix.get(2).get(3);
          ++a;
          b[a] = this.m_matrix.get(2).get(4);
          ++a;
          b[a] = this.m_matrix.get(3).get(0);
          ++a;
          b[a] = this.m_matrix.get(3).get(1);
          ++a;
          b[a] = this.m_matrix.get(3).get(2);
          ++a;
          b[a] = this.m_matrix.get(3).get(3);
          ++a;
          b[a] = this.m_matrix.get(3).get(4);
          return b;
        },
        __class__: Ie
      });
      function Il() {}
      h["flxanimate.zip.Zip"] = Il;
      Il.__name__ = "flxanimate.zip.Zip";
      Il.readZip = function (a) {
        return new ki(new Dj(a)).read();
      };
      Il.unzip = function (a) {
        for (var b = a.h; b != null;) {
          var c = b.item;
          b = b.next;
          if (c.compressed) {
            c.data = go.decompress(c.data);
            c.compressed = false;
            c.dataSize = c.fileSize;
          }
        }
        return a;
      };
      var Kf = x["haxe.StackItem"] = {
        __ename__: "haxe.StackItem",
        __constructs__: null,
        CFunction: {
          _hx_name: "CFunction",
          _hx_index: 0,
          __enum__: "haxe.StackItem",
          toString: p
        },
        Module: (u = function (a) {
          return {
            _hx_index: 1,
            m: a,
            __enum__: "haxe.StackItem",
            toString: p
          };
        }, u._hx_name = "Module", u.__params__ = ["m"], u),
        FilePos: (u = function (a, b, c, d) {
          return {
            _hx_index: 2,
            s: a,
            file: b,
            line: c,
            column: d,
            __enum__: "haxe.StackItem",
            toString: p
          };
        }, u._hx_name = "FilePos", u.__params__ = ["s", "file", "line", "column"], u),
        Method: (u = function (a, b) {
          return {
            _hx_index: 3,
            classname: a,
            method: b,
            __enum__: "haxe.StackItem",
            toString: p
          };
        }, u._hx_name = "Method", u.__params__ = ["classname", "method"], u),
        LocalFunction: (u = function (a) {
          return {
            _hx_index: 4,
            v: a,
            __enum__: "haxe.StackItem",
            toString: p
          };
        }, u._hx_name = "LocalFunction", u.__params__ = ["v"], u)
      };
      Kf.__constructs__ = [Kf.CFunction, Kf.Module, Kf.FilePos, Kf.Method, Kf.LocalFunction];
      var Xg = {
        callStack: function () {
          return Na.toHaxe(Na.callStack());
        },
        exceptionStack: function (a) {
          if (a == null) {
            a = false;
          }
          var b = Na.toHaxe(Na.exceptionStack());
          if (a) {
            return b;
          } else {
            return Xg.subtract(b, Xg.callStack());
          }
        },
        toString: function (a) {
          var b = new ye();
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            b.b += "\nCalled from ";
            Xg.itemToString(b, d);
          }
          return b.b;
        },
        subtract: function (a, b) {
          var c = -1;
          for (var d = -1; ++d < a.length;) {
            for (var e = 0, f = b.length; e < f;) {
              var k = e++;
              if (Xg.equalItems(a[d], b[k])) {
                if (c < 0) {
                  c = d;
                }
                ++d;
                if (d >= a.length) {
                  break;
                }
              } else {
                c = -1;
              }
            }
            if (c >= 0) {
              break;
            }
          }
          if (c >= 0) {
            return a.slice(0, c);
          } else {
            return a;
          }
        },
        equalItems: function (a, b) {
          if (a == null) {
            if (b == null) {
              return true;
            } else {
              return false;
            }
          }
          switch (a._hx_index) {
            case 0:
              if (b == null) {
                return false;
              } else if (b._hx_index == 0) {
                return true;
              } else {
                return false;
              }
            case 1:
              if (b == null) {
                return false;
              } else if (b._hx_index == 1) {
                return a.m == b.m;
              } else {
                return false;
              }
            case 2:
              if (b == null) {
                return false;
              }
              if (b._hx_index == 2) {
                var c = b.s;
                var d = b.line;
                var e = b.column;
                var f = a.column;
                var k = a.line;
                var g = a.s;
                if (a.file == b.file && k == d && f == e) {
                  return Xg.equalItems(g, c);
                } else {
                  return false;
                }
              }
              return false;
            case 3:
              if (b == null) {
                return false;
              } else if (b._hx_index == 3) {
                c = b.method;
                d = a.method;
                if (a.classname == b.classname) {
                  return d == c;
                } else {
                  return false;
                }
              } else {
                return false;
              }
            case 4:
              if (b == null) {
                return false;
              } else if (b._hx_index == 4) {
                return a.v == b.v;
              } else {
                return false;
              }
          }
        },
        itemToString: function (a, b) {
          switch (b._hx_index) {
            case 0:
              a.b += "a C function";
              break;
            case 1:
              b = b.m;
              a.b += "module ";
              a.b += b == null ? "null" : "" + b;
              break;
            case 2:
              var c = b.s;
              var d = b.file;
              var e = b.line;
              b = b.column;
              if (c != null) {
                Xg.itemToString(a, c);
                a.b += " (";
              }
              a.b += d == null ? "null" : "" + d;
              a.b += " line ";
              a.b += e == null ? "null" : "" + e;
              if (b != null) {
                a.b += " column ";
                a.b += b == null ? "null" : "" + b;
              }
              if (c != null) {
                a.b += ")";
              }
              break;
            case 3:
              c = b.classname;
              b = b.method;
              a.b += H.string(c == null ? "<unknown>" : c);
              a.b += ".";
              a.b += b == null ? "null" : "" + b;
              break;
            case 4:
              b = b.v;
              a.b += "local function #";
              a.b += b == null ? "null" : "" + b;
          }
        }
      };
      function K(a, b, c) {
        Error.call(this, a);
        this.message = a;
        this.__previousException = b;
        this.__nativeException = c ?? this;
        this.__skipStack = 0;
        a = Error.prepareStackTrace;
        Error.prepareStackTrace = function (a) {
          return a.stack;
        };
        if (c instanceof Error) {
          this.stack = c.stack;
        } else {
          c = null;
          if (Error.captureStackTrace) {
            Error.captureStackTrace(this, K);
            c = this;
          } else {
            c = Error();
            if (typeof c.stack == "undefined") {
              try {
                throw c;
              } catch (d) {}
              this.__skipStack++;
            }
          }
          this.stack = c.stack;
        }
        Error.prepareStackTrace = a;
      }
      h["haxe.Exception"] = K;
      K.__name__ = "haxe.Exception";
      K.caught = function (a) {
        if (a instanceof K) {
          return a;
        } else if (a instanceof Error) {
          return new K(a.message, null, a);
        } else {
          return new Ej(a, null, a);
        }
      };
      K.thrown = function (a) {
        if (a instanceof K) {
          return a.get_native();
        }
        if (a instanceof Error) {
          return a;
        }
        a = new Ej(a);
        a.__skipStack++;
        return a;
      };
      K.__super__ = Error;
      K.prototype = q(Error.prototype, {
        unwrap: function () {
          return this.__nativeException;
        },
        toString: function () {
          return this.get_message();
        },
        __shiftStack: function () {
          this.__skipStack++;
        },
        get_message: function () {
          return this.message;
        },
        get_native: function () {
          return this.__nativeException;
        },
        get_stack: function () {
          var a = this.__exceptionStack;
          if (a == null) {
            a = Na.toHaxe(Na.normalize(this.stack), this.__skipStack);
            this.setProperty("__exceptionStack", a);
          }
          return a;
        },
        setProperty: function (a, b) {
          try {
            Object.defineProperty(this, a, {
              value: b
            });
          } catch (c) {
            this[a] = b;
          }
        },
        __class__: K,
        __properties__: {
          get_native: "get_native",
          get_stack: "get_stack",
          get_message: "get_message"
        }
      });
      function Ab(a, b) {
        this.high = a;
        this.low = b;
      }
      h["haxe._Int64.___Int64"] = Ab;
      Ab.__name__ = "haxe._Int64.___Int64";
      Ab.prototype = {
        __class__: Ab
      };
      function Na() {}
      h["haxe.NativeStackTrace"] = Na;
      Na.__name__ = "haxe.NativeStackTrace";
      Na.saveStack = function (a) {
        Na.lastError = a;
      };
      Na.callStack = function () {
        var a = Error("");
        var b = Na.tryHaxeStack(a);
        if (typeof b == "undefined") {
          try {
            throw a;
          } catch (c) {}
          b = a.stack;
        }
        return Na.normalize(b, 2);
      };
      Na.exceptionStack = function () {
        return Na.normalize(Na.tryHaxeStack(Na.lastError));
      };
      Na.toHaxe = function (a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          return [];
        }
        if (typeof a == "string") {
          a = a.split("\n");
          if (a[0] == "Error") {
            a.shift();
          }
          var c = [];
          for (var d = 0, e = a.length; d < e;) {
            var f = d++;
            if (!(b > f)) {
              var k = a[f];
              f = k.match(/^    at ([$A-Za-z0-9_. ]+) \(([^)]+):([0-9]+):([0-9]+)\)$/);
              if (f != null) {
                k = f[1].split(".");
                if (k[0] == "$hxClasses") {
                  k.shift();
                }
                var g = k.pop();
                var n = f[2];
                var h = H.parseInt(f[3]);
                f = H.parseInt(f[4]);
                c.push(Kf.FilePos(g == "Anonymous function" ? Kf.LocalFunction() : g == "Global code" ? null : Kf.Method(k.join("."), g), n, h, f));
              } else {
                c.push(Kf.Module(w.trim(k)));
              }
            }
          }
          return c;
        }
        if (b > 0 && Array.isArray(a)) {
          return a.slice(b);
        } else {
          return a;
        }
      };
      Na.tryHaxeStack = function (a) {
        if (a == null) {
          return [];
        }
        var b = Error.prepareStackTrace;
        Error.prepareStackTrace = Na.prepareHxStackTrace;
        a = a.stack;
        Error.prepareStackTrace = b;
        return a;
      };
      Na.prepareHxStackTrace = function (a, b) {
        a = [];
        for (var c = 0; c < b.length;) {
          var d = b[c];
          ++c;
          if (Na.wrapCallSite != null) {
            d = Na.wrapCallSite(d);
          }
          var e = null;
          var f = d.getFunctionName();
          if (f != null) {
            var k = f.lastIndexOf(".");
            if (k >= 0) {
              e = f.substring(0, k);
              f = f.substring(k + 1);
              e = Kf.Method(e, f);
            } else {
              e = Kf.Method(null, f);
            }
          }
          f = d.getFileName();
          k = f == null ? -1 : f.indexOf("file:");
          if (Na.wrapCallSite != null && k > 0) {
            f = f.substring(k + 6);
          }
          a.push(Kf.FilePos(e, f, d.getLineNumber(), d.getColumnNumber()));
        }
        return a;
      };
      Na.normalize = function (a, b) {
        if (b == null) {
          b = 0;
        }
        if (Array.isArray(a) && b > 0) {
          return a.slice(b);
        }
        if (typeof a == "string") {
          switch (a.substring(0, 6)) {
            case "Error\n":
            case "Error:":
              ++b;
          }
          return Na.skipLines(a, b);
        }
        return a;
      };
      Na.skipLines = function (a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (b > 0) {
          c = a.indexOf("\n", c);
          if (c < 0) {
            return "";
          } else {
            return Na.skipLines(a, --b, c + 1);
          }
        } else {
          return a.substring(c);
        }
      };
      function cf() {}
      h["haxe.Resource"] = cf;
      cf.__name__ = "haxe.Resource";
      cf.getString = function (a) {
        for (var b = 0, c = cf.content; b < c.length;) {
          var d = c[b];
          ++b;
          if (d.name == a) {
            return d.str ?? li.decode(d.data).toString();
          }
        }
        return null;
      };
      function qe() {
        this.buf = new ye();
        this.cache = [];
        this.useCache = qe.USE_CACHE;
        this.useEnumIndex = qe.USE_ENUM_INDEX;
        this.shash = new V();
        this.scount = 0;
      }
      h["haxe.Serializer"] = qe;
      qe.__name__ = "haxe.Serializer";
      qe.run = function (a) {
        var b = new qe();
        b.serialize(a);
        return b.toString();
      };
      qe.prototype = {
        toString: function () {
          return this.buf.b;
        },
        serializeString: function (a) {
          var b = this.shash.h[a];
          if (b != null) {
            this.buf.b += "R";
            this.buf.b += b == null ? "null" : "" + b;
          } else {
            this.shash.h[a] = this.scount++;
            this.buf.b += "y";
            a = encodeURIComponent(a);
            this.buf.b += H.string(a.length);
            this.buf.b += ":";
            this.buf.b += a == null ? "null" : "" + a;
          }
        },
        serializeRef: function (a) {
          var b = typeof a;
          for (var c = 0, d = this.cache.length; c < d;) {
            var e = c++;
            var f = this.cache[e];
            if (typeof f == b && f == a) {
              this.buf.b += "r";
              this.buf.b += e == null ? "null" : "" + e;
              return true;
            }
          }
          this.cache.push(a);
          return false;
        },
        serializeFields: function (a) {
          for (var b = 0, c = ma.fields(a); b < c.length;) {
            var d = c[b];
            ++b;
            this.serializeString(d);
            this.serialize(ma.field(a, d));
          }
          this.buf.b += "g";
        },
        serialize: function (a) {
          var b = Db.typeof(a);
          switch (b._hx_index) {
            case 0:
              this.buf.b += "n";
              break;
            case 1:
              if (a == 0) {
                this.buf.b += "z";
                break;
              }
              this.buf.b += "i";
              this.buf.b += a == null ? "null" : "" + a;
              break;
            case 2:
              if (isNaN(a)) {
                this.buf.b += "k";
              } else if (isFinite(a)) {
                this.buf.b += "d";
                this.buf.b += a == null ? "null" : "" + a;
              } else {
                this.buf.b += a < 0 ? "m" : "p";
              }
              break;
            case 3:
              this.buf.b += a ? "t" : "f";
              break;
            case 4:
              if (ta.__instanceof(a, Xi)) {
                a = a.__name__;
                this.buf.b += "A";
                this.serializeString(a);
              } else if (ta.__instanceof(a, zp)) {
                this.buf.b += "B";
                this.serializeString(a.__ename__);
              } else if (!this.useCache || !this.serializeRef(a)) {
                this.buf.b += "o";
                this.serializeFields(a);
              }
              break;
            case 5:
              throw K.thrown("Cannot serialize function");
            case 6:
              b = b.c;
              if (b == String) {
                this.serializeString(a);
                break;
              }
              if (this.useCache && this.serializeRef(a)) {
                break;
              }
              switch (b) {
                case Array:
                  var c = 0;
                  this.buf.b += "a";
                  for (var d = 0, e = a.length; d < e;) {
                    b = d++;
                    if (a[b] == null) {
                      ++c;
                    } else {
                      if (c > 0) {
                        if (c == 1) {
                          this.buf.b += "n";
                        } else {
                          this.buf.b += "u";
                          this.buf.b += c == null ? "null" : "" + c;
                        }
                        c = 0;
                      }
                      this.serialize(a[b]);
                    }
                  }
                  if (c > 0) {
                    if (c == 1) {
                      this.buf.b += "n";
                    } else {
                      this.buf.b += "u";
                      this.buf.b += c == null ? "null" : "" + c;
                    }
                  }
                  this.buf.b += "h";
                  break;
                case Date:
                  this.buf.b += "v";
                  this.buf.b += H.string(a.getTime());
                  break;
                case rc:
                  this.buf.b += "q";
                  for (b = a.keys(); b.hasNext();) {
                    c = b.next();
                    this.buf.b += ":";
                    this.buf.b += c == null ? "null" : "" + c;
                    this.serialize(a.h[c]);
                  }
                  this.buf.b += "h";
                  break;
                case ab:
                  this.buf.b += "l";
                  for (a = a.h; a != null;) {
                    b = a.item;
                    a = a.next;
                    this.serialize(b);
                  }
                  this.buf.b += "h";
                  break;
                case Oa:
                  this.buf.b += "M";
                  for (b = a.keys(); b.hasNext();) {
                    c = b.next();
                    var f = ma.field(c, "__id__");
                    ma.deleteField(c, "__id__");
                    this.serialize(c);
                    c.__id__ = f;
                    this.serialize(a.h[c.__id__]);
                  }
                  this.buf.b += "h";
                  break;
                case V:
                  this.buf.b += "b";
                  c = Object.keys(a.h);
                  f = c.length;
                  for (d = 0; d < f;) {
                    b = c[d++];
                    this.serializeString(b);
                    this.serialize(a.h[b]);
                  }
                  this.buf.b += "h";
                  break;
                case bc:
                  this.buf.b += "s";
                  this.buf.b += H.string(Math.ceil(a.length * 8 / 6));
                  this.buf.b += ":";
                  b = 0;
                  c = a.length - 2;
                  f = qe.BASE64_CODES;
                  if (f == null) {
                    f = Array(qe.BASE64.length);
                    d = 0;
                    for (e = qe.BASE64.length; d < e;) {
                      var k = d++;
                      f[k] = M.cca(qe.BASE64, k);
                    }
                    qe.BASE64_CODES = f;
                  }
                  while (b < c) {
                    d = a.b[b++];
                    e = a.b[b++];
                    k = a.b[b++];
                    this.buf.b += String.fromCodePoint(f[d >> 2]);
                    this.buf.b += String.fromCodePoint(f[(d << 4 | e >> 4) & 63]);
                    this.buf.b += String.fromCodePoint(f[(e << 2 | k >> 6) & 63]);
                    this.buf.b += String.fromCodePoint(f[k & 63]);
                  }
                  if (b == c) {
                    d = a.b[b++];
                    e = a.b[b++];
                    this.buf.b += String.fromCodePoint(f[d >> 2]);
                    this.buf.b += String.fromCodePoint(f[(d << 4 | e >> 4) & 63]);
                    this.buf.b += String.fromCodePoint(f[e << 2 & 63]);
                  } else if (b == c + 1) {
                    d = a.b[b++];
                    this.buf.b += String.fromCodePoint(f[d >> 2]);
                    this.buf.b += String.fromCodePoint(f[d << 4 & 63]);
                  }
                  break;
                default:
                  if (this.useCache) {
                    this.cache.pop();
                  }
                  if (a.hxSerialize != null) {
                    this.buf.b += "C";
                    this.serializeString(b.__name__);
                    if (this.useCache) {
                      this.cache.push(a);
                    }
                    a.hxSerialize(this);
                    this.buf.b += "g";
                  } else {
                    this.buf.b += "c";
                    this.serializeString(b.__name__);
                    if (this.useCache) {
                      this.cache.push(a);
                    }
                    this.serializeFields(a);
                  }
              }
              break;
            case 7:
              b = b.e;
              if (this.useCache) {
                if (this.serializeRef(a)) {
                  break;
                }
                this.cache.pop();
              }
              this.buf.b += H.string(this.useEnumIndex ? "j" : "w");
              this.serializeString(b.__ename__);
              if (this.useEnumIndex) {
                this.buf.b += ":";
                this.buf.b += H.string(a._hx_index);
              } else {
                b = a;
                this.serializeString(x[b.__enum__].__constructs__[b._hx_index]._hx_name);
              }
              this.buf.b += ":";
              c = Db.enumParameters(a);
              this.buf.b += H.string(c.length);
              for (b = 0; b < c.length;) {
                f = c[b];
                ++b;
                this.serialize(f);
              }
              if (this.useCache) {
                this.cache.push(a);
              }
              break;
            default:
              throw K.thrown("Cannot serialize " + H.string(a));
          }
        },
        __class__: qe
      };
      function kg(a) {
        var b = this;
        this.id = setInterval(function () {
          b.run();
        }, a);
      }
      h["haxe.Timer"] = kg;
      kg.__name__ = "haxe.Timer";
      kg.delay = function (a, b) {
        var c = new kg(b);
        c.run = function () {
          c.stop();
          a();
        };
        return c;
      };
      kg.prototype = {
        stop: function () {
          if (this.id != null) {
            clearInterval(this.id);
            this.id = null;
          }
        },
        run: function () {},
        __class__: kg
      };
      function Rl() {}
      h["haxe._Unserializer.DefaultResolver"] = Rl;
      Rl.__name__ = "haxe._Unserializer.DefaultResolver";
      Rl.prototype = {
        resolveClass: function (a) {
          return h[a];
        },
        resolveEnum: function (a) {
          return x[a];
        },
        __class__: Rl
      };
      function de(a) {
        this.buf = a;
        this.length = this.buf.length;
        this.pos = 0;
        this.scache = [];
        this.cache = [];
        a = de.DEFAULT_RESOLVER;
        if (a == null) {
          a = new Rl();
          de.DEFAULT_RESOLVER = a;
        }
        this.resolver = a;
      }
      h["haxe.Unserializer"] = de;
      de.__name__ = "haxe.Unserializer";
      de.initCodes = function () {
        var a = [];
        for (var b = 0, c = de.BASE64.length; b < c;) {
          var d = b++;
          a[de.BASE64.charCodeAt(d)] = d;
        }
        return a;
      };
      de.run = function (a) {
        return new de(a).unserialize();
      };
      de.prototype = {
        setResolver: function (a) {
          if (a == null) {
            if (mi.instance == null) {
              mi.instance = new mi();
            }
            this.resolver = mi.instance;
          } else {
            this.resolver = a;
          }
        },
        readDigits: function () {
          var a = 0;
          var b = false;
          var c = this.pos;
          while (true) {
            var d = this.buf.charCodeAt(this.pos);
            if (d != d) {
              break;
            }
            if (d == 45) {
              if (this.pos != c) {
                break;
              }
              b = true;
            } else {
              if (d < 48 || d > 57) {
                break;
              }
              a = a * 10 + (d - 48);
            }
            this.pos++;
          }
          if (b) {
            a *= -1;
          }
          return a;
        },
        readFloat: function () {
          var a = this.pos;
          for (;;) {
            var b = this.buf.charCodeAt(this.pos);
            if (b != b) {
              break;
            }
            if (b >= 43 && b < 58 || b == 101 || b == 69) {
              this.pos++;
            } else {
              break;
            }
          }
          return parseFloat(M.substr(this.buf, a, this.pos - a));
        },
        unserializeObject: function (a) {
          while (true) {
            if (this.pos >= this.length) {
              throw K.thrown("Invalid object");
            }
            if (this.buf.charCodeAt(this.pos) == 103) {
              break;
            }
            var b = this.unserialize();
            if (typeof b != "string") {
              throw K.thrown("Invalid object key");
            }
            var c = this.unserialize();
            a[b] = c;
          }
          this.pos++;
        },
        unserializeEnum: function (a, b) {
          if (this.buf.charCodeAt(this.pos++) != 58) {
            throw K.thrown("Invalid enum format");
          }
          var c = this.readDigits();
          if (c == 0) {
            return Db.createEnum(a, b);
          }
          var d = [];
          for (; c-- > 0;) {
            d.push(this.unserialize());
          }
          return Db.createEnum(a, b, d);
        },
        unserialize: function () {
          switch (this.buf.charCodeAt(this.pos++)) {
            case 65:
              var a = this.unserialize();
              var b = this.resolver.resolveClass(a);
              if (b == null) {
                throw K.thrown("Class not found " + a);
              }
              return b;
            case 66:
              a = this.unserialize();
              b = this.resolver.resolveEnum(a);
              if (b == null) {
                throw K.thrown("Enum not found " + a);
              }
              return b;
            case 67:
              a = this.unserialize();
              b = this.resolver.resolveClass(a);
              if (b == null) {
                throw K.thrown("Class not found " + a);
              }
              b = Object.create(b.prototype);
              this.cache.push(b);
              b.hxUnserialize(this);
              if (this.buf.charCodeAt(this.pos++) != 103) {
                throw K.thrown("Invalid custom data");
              }
              return b;
            case 77:
              a = new Oa();
              this.cache.push(a);
              var c;
              for (; this.buf.charCodeAt(this.pos) != 104;) {
                b = this.unserialize();
                a.set(b, this.unserialize());
              }
              this.pos++;
              return a;
            case 82:
              a = this.readDigits();
              if (a < 0 || a >= this.scache.length) {
                throw K.thrown("Invalid string reference");
              }
              return this.scache[a];
            case 97:
              b = [];
              for (this.cache.push(b);;) {
                c = this.buf.charCodeAt(this.pos);
                if (c == 104) {
                  this.pos++;
                  break;
                }
                if (c == 117) {
                  this.pos++;
                  a = this.readDigits();
                  b[b.length + a - 1] = null;
                } else {
                  b.push(this.unserialize());
                }
              }
              return b;
            case 98:
              a = new V();
              for (this.cache.push(a); this.buf.charCodeAt(this.pos) != 104;) {
                b = this.unserialize();
                c = this.unserialize();
                a.h[b] = c;
              }
              this.pos++;
              return a;
            case 99:
              a = this.unserialize();
              b = this.resolver.resolveClass(a);
              if (b == null) {
                throw K.thrown("Class not found " + a);
              }
              b = Object.create(b.prototype);
              this.cache.push(b);
              this.unserializeObject(b);
              return b;
            case 100:
              return this.readFloat();
            case 102:
              return false;
            case 105:
              return this.readDigits();
            case 106:
              a = this.unserialize();
              c = this.resolver.resolveEnum(a);
              if (c == null) {
                throw K.thrown("Enum not found " + a);
              }
              this.pos++;
              var d = this.readDigits();
              var e = c.__constructs__;
              var f = Array(e.length);
              for (var k = 0, g = e.length; k < g;) {
                b = k++;
                f[b] = e[b]._hx_name;
              }
              b = f[d];
              if (b == null) {
                throw K.thrown("Unknown enum index " + a + "@" + d);
              }
              b = this.unserializeEnum(c, b);
              this.cache.push(b);
              return b;
            case 107:
              return NaN;
            case 108:
              b = new ab();
              for (this.cache.push(b); this.buf.charCodeAt(this.pos) != 104;) {
                b.add(this.unserialize());
              }
              this.pos++;
              return b;
            case 109:
              return -Infinity;
            case 110:
              return null;
            case 111:
              b = {};
              this.cache.push(b);
              this.unserializeObject(b);
              return b;
            case 112:
              return Infinity;
            case 113:
              a = new rc();
              this.cache.push(a);
              for (c = this.buf.charCodeAt(this.pos++); c == 58;) {
                b = this.readDigits();
                c = this.unserialize();
                a.h[b] = c;
                c = this.buf.charCodeAt(this.pos++);
              }
              if (c != 104) {
                throw K.thrown("Invalid IntMap format");
              }
              return a;
            case 114:
              a = this.readDigits();
              if (a < 0 || a >= this.cache.length) {
                throw K.thrown("Invalid reference");
              }
              return this.cache[a];
            case 115:
              a = this.readDigits();
              c = this.buf;
              if (this.buf.charCodeAt(this.pos++) != 58 || this.length - this.pos < a) {
                throw K.thrown("Invalid bytes length");
              }
              d = de.CODES;
              if (d == null) {
                d = de.initCodes();
                de.CODES = d;
              }
              b = this.pos;
              e = a & 3;
              f = b + (a - e);
              k = new bc(new ArrayBuffer((a >> 2) * 3 + (e >= 2 ? e - 1 : 0)));
              for (g = 0; b < f;) {
                var n = d[c.charCodeAt(b++)];
                var h = d[c.charCodeAt(b++)];
                k.b[g++] = (n << 2 | h >> 4) & 255;
                n = d[c.charCodeAt(b++)];
                k.b[g++] = (h << 4 | n >> 2) & 255;
                h = d[c.charCodeAt(b++)];
                k.b[g++] = (n << 6 | h) & 255;
              }
              if (e >= 2) {
                n = d[c.charCodeAt(b++)];
                h = d[c.charCodeAt(b++)];
                k.b[g++] = (n << 2 | h >> 4) & 255;
                if (e == 3) {
                  n = d[c.charCodeAt(b++)];
                  k.b[g++] = (h << 4 | n >> 2) & 255;
                }
              }
              this.pos += a;
              this.cache.push(k);
              return k;
            case 116:
              return true;
            case 118:
              if (this.buf.charCodeAt(this.pos) >= 48 && this.buf.charCodeAt(this.pos) <= 57 && this.buf.charCodeAt(this.pos + 1) >= 48 && this.buf.charCodeAt(this.pos + 1) <= 57 && this.buf.charCodeAt(this.pos + 2) >= 48 && this.buf.charCodeAt(this.pos + 2) <= 57 && this.buf.charCodeAt(this.pos + 3) >= 48 && this.buf.charCodeAt(this.pos + 3) <= 57 && this.buf.charCodeAt(this.pos + 4) == 45) {
                b = M.strDate(M.substr(this.buf, this.pos, 19));
                this.pos += 19;
              } else {
                b = new Date(this.readFloat());
              }
              this.cache.push(b);
              return b;
            case 119:
              a = this.unserialize();
              c = this.resolver.resolveEnum(a);
              if (c == null) {
                throw K.thrown("Enum not found " + a);
              }
              b = this.unserializeEnum(c, this.unserialize());
              this.cache.push(b);
              return b;
            case 120:
              throw K.thrown(this.unserialize());
            case 121:
              a = this.readDigits();
              if (this.buf.charCodeAt(this.pos++) != 58 || this.length - this.pos < a) {
                throw K.thrown("Invalid string length");
              }
              b = M.substr(this.buf, this.pos, a);
              this.pos += a;
              b = decodeURIComponent(b.split("+").join(" "));
              this.scache.push(b);
              return b;
            case 122:
              return 0;
          }
          this.pos--;
          throw K.thrown("Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos);
        },
        __class__: de
      };
      function mi() {}
      h["haxe._Unserializer.NullResolver"] = mi;
      mi.__name__ = "haxe._Unserializer.NullResolver";
      mi.prototype = {
        resolveClass: function (a) {
          return null;
        },
        resolveEnum: function (a) {
          return null;
        },
        __class__: mi
      };
      function ho(a) {
        this.__b = "";
      }
      h["haxe.Utf8"] = ho;
      ho.__name__ = "haxe.Utf8";
      ho.prototype = {
        __class__: ho
      };
      function Ej(a, b, c) {
        K.call(this, String(a), b, c);
        this.value = a;
        this.__skipStack++;
      }
      h["haxe.ValueException"] = Ej;
      Ej.__name__ = "haxe.ValueException";
      Ej.__super__ = K;
      Ej.prototype = q(K.prototype, {
        unwrap: function () {
          return this.value;
        },
        __class__: Ej
      });
      function ni() {
        this.a1 = 1;
        this.a2 = 0;
      }
      h["haxe.crypto.Adler32"] = ni;
      ni.__name__ = "haxe.crypto.Adler32";
      ni.read = function (a) {
        var b = new ni();
        var c = a.readByte();
        var d = a.readByte();
        var e = a.readByte();
        a = a.readByte();
        b.a1 = e << 8 | a;
        b.a2 = c << 8 | d;
        return b;
      };
      ni.prototype = {
        update: function (a, b, c) {
          var d = this.a1;
          var e = this.a2;
          var f = b;
          for (b += c; f < b;) {
            c = f++;
            d = (d + a.b[c]) % 65521;
            e = (e + d) % 65521;
          }
          this.a1 = d;
          this.a2 = e;
        },
        equals: function (a) {
          if (a.a1 == this.a1) {
            return a.a2 == this.a2;
          } else {
            return false;
          }
        },
        __class__: ni
      };
      function li() {}
      h["haxe.crypto.Base64"] = li;
      li.__name__ = "haxe.crypto.Base64";
      li.decode = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b) {
          while (M.cca(a, a.length - 1) == 61) {
            a = M.substr(a, 0, -1);
          }
        }
        return new io(li.BYTES).decodeBytes(bc.ofString(a));
      };
      function io(a) {
        for (var b = a.length, c = 1; b > 1 << c;) {
          ++c;
        }
        if (c > 8 || b != 1 << c) {
          throw K.thrown("BaseCode : base length must be a power of two.");
        }
        this.base = a;
        this.nbits = c;
      }
      h["haxe.crypto.BaseCode"] = io;
      io.__name__ = "haxe.crypto.BaseCode";
      io.prototype = {
        initTable: function () {
          var a = [];
          for (var b = 0; b < 256;) {
            var c = b++;
            a[c] = -1;
          }
          b = 0;
          for (var d = this.base.length; b < d;) {
            c = b++;
            a[this.base.b[c]] = c;
          }
          this.tbl = a;
        },
        decodeBytes: function (a) {
          var b = this.nbits;
          if (this.tbl == null) {
            this.initTable();
          }
          var c = this.tbl;
          for (var d = a.length * b >> 3, e = new bc(new ArrayBuffer(d)), f = 0, k = 0, g = 0, n = 0; n < d;) {
            while (k < 8) {
              k += b;
              f <<= b;
              var h = c[a.b[g++]];
              if (h == -1) {
                throw K.thrown("BaseCode : invalid encoded char");
              }
              f |= h;
            }
            k -= 8;
            e.b[n++] = f >> k & 255;
          }
          return e;
        },
        __class__: io
      };
      function Zc() {}
      h["haxe.ds.ArraySort"] = Zc;
      Zc.__name__ = "haxe.ds.ArraySort";
      Zc.sort = function (a, b) {
        Zc.rec(a, b, 0, a.length);
      };
      Zc.rec = function (a, b, c, d) {
        var e = c + d >> 1;
        if (d - c < 12) {
          if (!(d <= c)) {
            for (e = c + 1; e < d;) {
              for (var f = e++; f > c;) {
                if (b(a[f], a[f - 1]) < 0) {
                  Zc.swap(a, f - 1, f);
                } else {
                  break;
                }
                --f;
              }
            }
          }
        } else {
          Zc.rec(a, b, c, e);
          Zc.rec(a, b, e, d);
          Zc.doMerge(a, b, c, e, d, e - c, d - e);
        }
      };
      Zc.doMerge = function (a, b, c, d, e, f, k) {
        if (f != 0 && k != 0) {
          if (f + k == 2) {
            if (b(a[d], a[c]) < 0) {
              Zc.swap(a, d, c);
            }
          } else {
            if (f > k) {
              var g = f >> 1;
              var n = c + g;
              var h = Zc.lower(a, b, d, e, n);
              var p = h - d;
            } else {
              p = k >> 1;
              h = d + p;
              n = Zc.upper(a, b, c, d, h);
              g = n - c;
            }
            Zc.rotate(a, b, n, d, h);
            d = n + p;
            Zc.doMerge(a, b, c, n, d, g, p);
            Zc.doMerge(a, b, d, h, e, f - g, k - p);
          }
        }
      };
      Zc.rotate = function (a, b, c, d, e) {
        if (c != d && d != e) {
          for (b = Zc.gcd(e - c, d - c); b-- != 0;) {
            var f = a[c + b];
            var k = d - c;
            var g = c + b;
            for (var n = c + b + k; n != c + b;) {
              a[g] = a[n];
              g = n;
              n = e - n > k ? n + k : c + (k - (e - n));
            }
            a[g] = f;
          }
        }
      };
      Zc.gcd = function (a, b) {
        while (b != 0) {
          var c = a % b;
          a = b;
          b = c;
        }
        return a;
      };
      Zc.upper = function (a, b, c, d, e) {
        d -= c;
        var f;
        var k;
        for (; d > 0;) {
          f = d >> 1;
          k = c + f;
          if (b(a[e], a[k]) < 0) {
            d = f;
          } else {
            c = k + 1;
            d = d - f - 1;
          }
        }
        return c;
      };
      Zc.lower = function (a, b, c, d, e) {
        d -= c;
        var f;
        var k;
        for (; d > 0;) {
          f = d >> 1;
          k = c + f;
          if (b(a[k], a[e]) < 0) {
            c = k + 1;
            d = d - f - 1;
          } else {
            d = f;
          }
        }
        return c;
      };
      Zc.swap = function (a, b, c) {
        var d = a[b];
        a[b] = a[c];
        a[c] = d;
      };
      function Fj() {}
      h["haxe.ds.BalancedTree"] = Fj;
      Fj.__name__ = "haxe.ds.BalancedTree";
      Fj.__interfaces__ = [jb];
      Fj.prototype = {
        set: function (a, b) {
          this.root = this.setLoop(a, b, this.root);
        },
        get: function (a) {
          for (var b = this.root; b != null;) {
            var c = this.compare(a, b.key);
            if (c == 0) {
              return b.value;
            }
            b = c < 0 ? b.left : b.right;
          }
          return null;
        },
        remove: function (a) {
          try {
            this.root = this.removeLoop(a, this.root);
            return true;
          } catch (b) {
            Na.lastError = b;
            if (typeof K.caught(b).unwrap() == "string") {
              return false;
            }
            throw b;
          }
        },
        keys: function () {
          var a = [];
          this.keysLoop(this.root, a);
          return new Uf(a);
        },
        setLoop: function (a, b, c) {
          if (c == null) {
            return new te(null, a, b, null);
          }
          var d = this.compare(a, c.key);
          if (d == 0) {
            return new te(c.left, a, b, c.right, c == null ? 0 : c._height);
          }
          if (d < 0) {
            a = this.setLoop(a, b, c.left);
            return this.balance(a, c.key, c.value, c.right);
          }
          a = this.setLoop(a, b, c.right);
          return this.balance(c.left, c.key, c.value, a);
        },
        removeLoop: function (a, b) {
          if (b == null) {
            throw K.thrown("Not_found");
          }
          var c = this.compare(a, b.key);
          if (c == 0) {
            return this.merge(b.left, b.right);
          } else if (c < 0) {
            return this.balance(this.removeLoop(a, b.left), b.key, b.value, b.right);
          } else {
            return this.balance(b.left, b.key, b.value, this.removeLoop(a, b.right));
          }
        },
        keysLoop: function (a, b) {
          if (a != null) {
            this.keysLoop(a.left, b);
            b.push(a.key);
            this.keysLoop(a.right, b);
          }
        },
        merge: function (a, b) {
          if (a == null) {
            return b;
          }
          if (b == null) {
            return a;
          }
          var c = this.minBinding(b);
          return this.balance(a, c.key, c.value, this.removeMinBinding(b));
        },
        minBinding: function (a) {
          if (a == null) {
            throw K.thrown("Not_found");
          }
          if (a.left == null) {
            return a;
          } else {
            return this.minBinding(a.left);
          }
        },
        removeMinBinding: function (a) {
          if (a.left == null) {
            return a.right;
          } else {
            return this.balance(this.removeMinBinding(a.left), a.key, a.value, a.right);
          }
        },
        balance: function (a, b, c, d) {
          var e = a == null ? 0 : a._height;
          var f = d == null ? 0 : d._height;
          if (e > f + 2) {
            e = a.left;
            f = a.right;
            if ((e == null ? 0 : e._height) >= (f == null ? 0 : f._height)) {
              return new te(a.left, a.key, a.value, new te(a.right, b, c, d));
            } else {
              return new te(new te(a.left, a.key, a.value, a.right.left), a.right.key, a.right.value, new te(a.right.right, b, c, d));
            }
          } else if (f > e + 2) {
            e = d.right;
            f = d.left;
            if ((e == null ? 0 : e._height) > (f == null ? 0 : f._height)) {
              return new te(new te(a, b, c, d.left), d.key, d.value, d.right);
            } else {
              return new te(new te(a, b, c, d.left.left), d.left.key, d.left.value, new te(d.left.right, d.key, d.value, d.right));
            }
          } else {
            return new te(a, b, c, d, (e > f ? e : f) + 1);
          }
        },
        compare: function (a, b) {
          return ma.compare(a, b);
        },
        __class__: Fj
      };
      function te(a, b, c, d, e) {
        if (e == null) {
          e = -1;
        }
        this.left = a;
        this.key = b;
        this.value = c;
        this.right = d;
        if (e == -1) {
          a = this.left;
          b = this.right;
          a = (a == null ? 0 : a._height) > (b == null ? 0 : b._height) ? this.left : this.right;
          this._height = (a == null ? 0 : a._height) + 1;
        } else {
          this._height = e;
        }
      }
      h["haxe.ds.TreeNode"] = te;
      te.__name__ = "haxe.ds.TreeNode";
      te.prototype = {
        __class__: te
      };
      function oj() {}
      h["haxe.ds.EnumValueMap"] = oj;
      oj.__name__ = "haxe.ds.EnumValueMap";
      oj.__interfaces__ = [jb];
      oj.__super__ = Fj;
      oj.prototype = q(Fj.prototype, {
        compare: function (a, b) {
          var c = a._hx_index - b._hx_index;
          if (c != 0) {
            return c;
          }
          a = Db.enumParameters(a);
          b = Db.enumParameters(b);
          if (a.length == 0 && b.length == 0) {
            return 0;
          } else {
            return this.compareArgs(a, b);
          }
        },
        compareArgs: function (a, b) {
          var c = a.length - b.length;
          if (c != 0) {
            return c;
          }
          c = 0;
          for (var d = a.length; c < d;) {
            var e = c++;
            e = this.compareArg(a[e], b[e]);
            if (e != 0) {
              return e;
            }
          }
          return 0;
        },
        compareArg: function (a, b) {
          if (ma.isEnumValue(a) && ma.isEnumValue(b)) {
            return this.compare(a, b);
          } else if (a instanceof Array && b instanceof Array) {
            return this.compareArgs(a, b);
          } else {
            return ma.compare(a, b);
          }
        },
        __class__: oj
      });
      function kk(a, b) {
        this.item = a;
        this.next = b;
      }
      h["haxe.ds._List.ListNode"] = kk;
      kk.__name__ = "haxe.ds._List.ListNode";
      kk.prototype = {
        __class__: kk
      };
      function ln(a) {
        this.head = a;
      }
      h["haxe.ds._List.ListIterator"] = ln;
      ln.__name__ = "haxe.ds._List.ListIterator";
      ln.prototype = {
        hasNext: function () {
          return this.head != null;
        },
        next: function () {
          var a = this.head.item;
          this.head = this.head.next;
          return a;
        },
        __class__: ln
      };
      function jk(a) {
        this.h = a;
        this.keys = Object.keys(a);
        this.length = this.keys.length;
        this.current = 0;
      }
      h["haxe.ds._StringMap.StringMapKeyIterator"] = jk;
      jk.__name__ = "haxe.ds._StringMap.StringMapKeyIterator";
      jk.prototype = {
        hasNext: function () {
          return this.current < this.length;
        },
        next: function () {
          return this.keys[this.current++];
        },
        __class__: jk
      };
      function oi(a, b, c) {
        K.call(this, a, b);
        this.posInfos = c == null ? {
          fileName: "(unknown)",
          lineNumber: 0,
          className: "(unknown)",
          methodName: "(unknown)"
        } : c;
        this.__skipStack++;
      }
      h["haxe.exceptions.PosException"] = oi;
      oi.__name__ = "haxe.exceptions.PosException";
      oi.__super__ = K;
      oi.prototype = q(K.prototype, {
        toString: function () {
          return "" + K.prototype.toString.call(this) + " in " + this.posInfos.className + "." + this.posInfos.methodName + " at " + this.posInfos.fileName + ":" + this.posInfos.lineNumber;
        },
        __class__: oi
      });
      function Sl(a, b, c) {
        if (a == null) {
          a = "Not implemented";
        }
        oi.call(this, a, b, c);
        this.__skipStack++;
      }
      h["haxe.exceptions.NotImplementedException"] = Sl;
      Sl.__name__ = "haxe.exceptions.NotImplementedException";
      Sl.__super__ = oi;
      Sl.prototype = q(oi.prototype, {
        __class__: Sl
      });
      function Tl() {
        this.size = this.pos = 0;
      }
      h["haxe.io.BytesBuffer"] = Tl;
      Tl.__name__ = "haxe.io.BytesBuffer";
      Tl.prototype = {
        addByte: function (a) {
          if (this.pos == this.size) {
            this.grow(1);
          }
          this.view.setUint8(this.pos++, a);
        },
        add: function (a) {
          if (this.pos + a.length > this.size) {
            this.grow(a.length);
          }
          if (this.size != 0) {
            var b = new Uint8Array(a.b.buffer, a.b.byteOffset, a.length);
            this.u8.set(b, this.pos);
            this.pos += a.length;
          }
        },
        addBytes: function (a, b, c) {
          if (b < 0 || c < 0 || b + c > a.length) {
            throw K.thrown(Ff.OutsideBounds);
          }
          if (this.pos + c > this.size) {
            this.grow(c);
          }
          if (this.size != 0) {
            a = new Uint8Array(a.b.buffer, a.b.byteOffset + b, c);
            this.u8.set(a, this.pos);
            this.pos += c;
          }
        },
        grow: function (a) {
          var b = this.pos + a;
          for (a = this.size == 0 ? 16 : this.size; a < b;) {
            a = a * 3 >> 1;
          }
          b = new ArrayBuffer(a);
          var c = new Uint8Array(b);
          if (this.size > 0) {
            c.set(this.u8);
          }
          this.size = a;
          this.buffer = b;
          this.u8 = c;
          this.view = new DataView(this.buffer);
        },
        getBytes: function () {
          if (this.size == 0) {
            return new bc(new ArrayBuffer(0));
          }
          var a = new bc(this.buffer);
          a.length = this.pos;
          return a;
        },
        __class__: Tl
      };
      function Ul() {}
      h["haxe.io.Input"] = Ul;
      Ul.__name__ = "haxe.io.Input";
      Ul.prototype = {
        readByte: function () {
          throw new Sl(null, null, {
            fileName: "haxe/io/Input.hx",
            lineNumber: 53,
            className: "haxe.io.Input",
            methodName: "readByte"
          });
        },
        readBytes: function (a, b, c) {
          var d = c;
          var e = a.b;
          if (b < 0 || c < 0 || b + c > a.length) {
            throw K.thrown(Ff.OutsideBounds);
          }
          try {
            while (d > 0) {
              e[b] = this.readByte();
              ++b;
              --d;
            }
          } catch (f) {
            Na.lastError = f;
            if (!(K.caught(f).unwrap() instanceof Gj)) {
              throw f;
            }
          }
          return c - d;
        },
        readFullBytes: function (a, b, c) {
          while (c > 0) {
            var d = this.readBytes(a, b, c);
            if (d == 0) {
              throw K.thrown(Ff.Blocked);
            }
            b += d;
            c -= d;
          }
        },
        read: function (a) {
          var b = new bc(new ArrayBuffer(a));
          var c = 0;
          for (; a > 0;) {
            var d = this.readBytes(b, c, a);
            if (d == 0) {
              throw K.thrown(Ff.Blocked);
            }
            c += d;
            a -= d;
          }
          return b;
        },
        readInt16: function () {
          var a = this.readByte();
          var b = this.readByte();
          a = this.bigEndian ? b | a << 8 : a | b << 8;
          if ((a & 32768) != 0) {
            return a - 65536;
          } else {
            return a;
          }
        },
        readUInt16: function () {
          var a = this.readByte();
          var b = this.readByte();
          if (this.bigEndian) {
            return b | a << 8;
          } else {
            return a | b << 8;
          }
        },
        readInt32: function () {
          var a = this.readByte();
          var b = this.readByte();
          var c = this.readByte();
          var d = this.readByte();
          if (this.bigEndian) {
            return d | c << 8 | b << 16 | a << 24;
          } else {
            return a | b << 8 | c << 16 | d << 24;
          }
        },
        readString: function (a, b) {
          var c = new bc(new ArrayBuffer(a));
          this.readFullBytes(c, 0, a);
          return c.getString(0, a, b);
        },
        __class__: Ul
      };
      function Dj(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (c == null) {
          c = a.length - b;
        }
        if (b < 0 || c < 0 || b + c > a.length) {
          throw K.thrown(Ff.OutsideBounds);
        }
        this.b = a.b;
        this.pos = b;
        this.totlen = this.len = c;
      }
      h["haxe.io.BytesInput"] = Dj;
      Dj.__name__ = "haxe.io.BytesInput";
      Dj.__super__ = Ul;
      Dj.prototype = q(Ul.prototype, {
        readByte: function () {
          if (this.len == 0) {
            throw K.thrown(new Gj());
          }
          this.len--;
          return this.b[this.pos++];
        },
        readBytes: function (a, b, c) {
          if (b < 0 || c < 0 || b + c > a.length) {
            throw K.thrown(Ff.OutsideBounds);
          }
          if (this.len == 0 && c > 0) {
            throw K.thrown(new Gj());
          }
          if (this.len < c) {
            c = this.len;
          }
          var d = this.b;
          a = a.b;
          for (var e = 0, f = c; e < f;) {
            var k = e++;
            a[b + k] = d[this.pos + k];
          }
          this.pos += c;
          this.len -= c;
          return c;
        },
        __class__: Dj
      });
      var wp = x["haxe.io.Encoding"] = {
        __ename__: "haxe.io.Encoding",
        __constructs__: null,
        UTF8: {
          _hx_name: "UTF8",
          _hx_index: 0,
          __enum__: "haxe.io.Encoding",
          toString: p
        },
        RawNative: {
          _hx_name: "RawNative",
          _hx_index: 1,
          __enum__: "haxe.io.Encoding",
          toString: p
        }
      };
      wp.__constructs__ = [wp.UTF8, wp.RawNative];
      function Gj() {}
      h["haxe.io.Eof"] = Gj;
      Gj.__name__ = "haxe.io.Eof";
      Gj.prototype = {
        toString: function () {
          return "Eof";
        },
        __class__: Gj
      };
      var Ff = x["haxe.io.Error"] = {
        __ename__: "haxe.io.Error",
        __constructs__: null,
        Blocked: {
          _hx_name: "Blocked",
          _hx_index: 0,
          __enum__: "haxe.io.Error",
          toString: p
        },
        Overflow: {
          _hx_name: "Overflow",
          _hx_index: 1,
          __enum__: "haxe.io.Error",
          toString: p
        },
        OutsideBounds: {
          _hx_name: "OutsideBounds",
          _hx_index: 2,
          __enum__: "haxe.io.Error",
          toString: p
        },
        Custom: (u = function (a) {
          return {
            _hx_index: 3,
            e: a,
            __enum__: "haxe.io.Error",
            toString: p
          };
        }, u._hx_name = "Custom", u.__params__ = ["e"], u)
      };
      Ff.__constructs__ = [Ff.Blocked, Ff.Overflow, Ff.OutsideBounds, Ff.Custom];
      var Qp = {
        fromBytes: function (a, b, c) {
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = a.length - b >> 2;
          }
          return new Float32Array(a.b.bufferValue, b, c);
        }
      };
      function Jc(a) {
        switch (a) {
          case ".":
          case "..":
            this.dir = a;
            this.file = "";
            return;
        }
        var b = a.lastIndexOf("/");
        var c = a.lastIndexOf("\\");
        if (b < c) {
          this.dir = M.substr(a, 0, c);
          a = M.substr(a, c + 1, null);
          this.backslash = true;
        } else if (c < b) {
          this.dir = M.substr(a, 0, b);
          a = M.substr(a, b + 1, null);
        } else {
          this.dir = null;
        }
        b = a.lastIndexOf(".");
        if (b != -1) {
          this.ext = M.substr(a, b + 1, null);
          this.file = M.substr(a, 0, b);
        } else {
          this.ext = null;
          this.file = a;
        }
      }
      h["haxe.io.Path"] = Jc;
      Jc.__name__ = "haxe.io.Path";
      Jc.withoutDirectory = function (a) {
        a = new Jc(a);
        a.dir = null;
        return a.toString();
      };
      Jc.directory = function (a) {
        a = new Jc(a);
        if (a.dir == null) {
          return "";
        } else {
          return a.dir;
        }
      };
      Jc.extension = function (a) {
        a = new Jc(a);
        if (a.ext == null) {
          return "";
        } else {
          return a.ext;
        }
      };
      Jc.prototype = {
        toString: function () {
          return (this.dir == null ? "" : this.dir + (this.backslash ? "\\" : "/")) + this.file + (this.ext == null ? "" : "." + this.ext);
        },
        __class__: Jc
      };
      function Uf(a) {
        this.current = 0;
        this.array = a;
      }
      h["haxe.iterators.ArrayIterator"] = Uf;
      Uf.__name__ = "haxe.iterators.ArrayIterator";
      Uf.prototype = {
        hasNext: function () {
          return this.current < this.array.length;
        },
        next: function () {
          return this.array[this.current++];
        },
        __class__: Uf
      };
      function mn(a) {
        this.current = 0;
        this.array = a;
      }
      h["haxe.iterators.ArrayKeyValueIterator"] = mn;
      mn.__name__ = "haxe.iterators.ArrayKeyValueIterator";
      mn.prototype = {
        hasNext: function () {
          return this.current < this.array.length;
        },
        next: function () {
          return {
            value: this.array[this.current],
            key: this.current++
          };
        },
        __class__: mn
      };
      function fp(a) {
        this.map = a;
        this.keys = a.keys();
      }
      h["haxe.iterators.MapKeyValueIterator"] = fp;
      fp.__name__ = "haxe.iterators.MapKeyValueIterator";
      fp.prototype = {
        hasNext: function () {
          return this.keys.hasNext();
        },
        next: function () {
          var a = this.keys.next();
          return {
            value: this.map.get(a),
            key: a
          };
        },
        __class__: fp
      };
      var Fb = {
        resolve: function (a, b) {
          var c = a.elementsNamed(b).next();
          if (c == null) {
            if (a.nodeType == X.Document) {
              a = "Document";
            } else {
              if (a.nodeType != X.Element) {
                throw K.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
              }
              a = a.nodeName;
            }
            throw K.thrown(a + " is missing element " + b);
          }
          if (c.nodeType != X.Document && c.nodeType != X.Element) {
            throw K.thrown("Invalid nodeType " + (c.nodeType == null ? "null" : hb.toString(c.nodeType)));
          }
          return c;
        }
      };
      var Mb = {
        resolve: function (a, b) {
          if (a.nodeType == X.Document) {
            throw K.thrown("Cannot access document attribute " + b);
          }
          var c = a.get(b);
          if (c == null) {
            if (a.nodeType != X.Element) {
              throw K.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
            }
            throw K.thrown(a.nodeName + " is missing attribute " + b);
          }
          return c;
        }
      };
      var ec = {
        resolve: function (a, b) {
          if (a.nodeType == X.Document) {
            throw K.thrown("Cannot access document attribute " + b);
          }
          return a.exists(b);
        }
      };
      var cb = {
        resolve: function (a, b) {
          return a.elementsNamed(b).hasNext();
        }
      };
      var fc = {
        resolve: function (a, b) {
          var c = [];
          for (a = a.elementsNamed(b); a.hasNext();) {
            b = a.next();
            if (b.nodeType != X.Document && b.nodeType != X.Element) {
              throw K.thrown("Invalid nodeType " + (b.nodeType == null ? "null" : hb.toString(b.nodeType)));
            }
            c.push(b);
          }
          return c;
        }
      };
      function jd(a, b, c) {
        this.xml = b;
        this.message = a;
        this.position = c;
        this.lineNumber = 1;
        for (a = this.positionAtLine = 0; a < c;) {
          var d = a++;
          d = b.charCodeAt(d);
          if (d == 10) {
            this.lineNumber++;
            this.positionAtLine = 0;
          } else if (d != 13) {
            this.positionAtLine++;
          }
        }
      }
      h["haxe.xml.XmlParserException"] = jd;
      jd.__name__ = "haxe.xml.XmlParserException";
      jd.prototype = {
        toString: function () {
          return ta.getClass(this).__name__ + ": " + this.message + " at line " + this.lineNumber + " char " + this.positionAtLine;
        },
        __class__: jd
      };
      function Dg() {}
      h["haxe.xml.Parser"] = Dg;
      Dg.__name__ = "haxe.xml.Parser";
      Dg.parse = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = X.createDocument();
        Dg.doParse(a, b, 0, c);
        return c;
      };
      Dg.doParse = function (a, b, c, d) {
        if (c == null) {
          c = 0;
        }
        var e = null;
        for (var f = 1, k = 1, g = null, n = 0, h = 0, p = 0, m = new ye(), l = 1, q = -1; c < a.length;) {
          var t = a.charCodeAt(c);
          switch (f) {
            case 0:
              switch (t) {
                case 9:
                case 10:
                case 13:
                case 32:
                  break;
                default:
                  f = k;
                  continue;
              }
              break;
            case 1:
              if (t == 60) {
                f = 0;
                k = 2;
              } else {
                n = c;
                f = 13;
                continue;
              }
              break;
            case 2:
              switch (t) {
                case 33:
                  if (a.charCodeAt(c + 1) == 91) {
                    c += 2;
                    if (M.substr(a, c, 6).toUpperCase() != "CDATA[") {
                      throw K.thrown(new jd("Expected <![CDATA[", a, c));
                    }
                    c += 5;
                    f = 17;
                  } else if (a.charCodeAt(c + 1) == 68 || a.charCodeAt(c + 1) == 100) {
                    if (M.substr(a, c + 2, 6).toUpperCase() != "OCTYPE") {
                      throw K.thrown(new jd("Expected <!DOCTYPE", a, c));
                    }
                    c += 8;
                    f = 16;
                  } else {
                    if (a.charCodeAt(c + 1) != 45 || a.charCodeAt(c + 2) != 45) {
                      throw K.thrown(new jd("Expected <!--", a, c));
                    }
                    c += 2;
                    f = 15;
                  }
                  n = c + 1;
                  break;
                case 47:
                  if (d == null) {
                    throw K.thrown(new jd("Expected node name", a, c));
                  }
                  n = c + 1;
                  f = 0;
                  k = 10;
                  break;
                case 63:
                  f = 14;
                  n = c;
                  break;
                default:
                  f = 3;
                  n = c;
                  continue;
              }
              break;
            case 3:
              if ((!(t >= 97) || !(t <= 122)) && (!(t >= 65) || !(t <= 90)) && (!(t >= 48) || !(t <= 57)) && t != 58 && t != 46 && t != 95 && t != 45) {
                if (c == n) {
                  throw K.thrown(new jd("Expected node name", a, c));
                }
                e = X.createElement(M.substr(a, n, c - n));
                d.addChild(e);
                ++h;
                f = 0;
                k = 4;
                continue;
              }
              break;
            case 4:
              switch (t) {
                case 47:
                  f = 11;
                  break;
                case 62:
                  f = 9;
                  break;
                default:
                  f = 5;
                  n = c;
                  continue;
              }
              break;
            case 5:
              if ((!(t >= 97) || !(t <= 122)) && (!(t >= 65) || !(t <= 90)) && (!(t >= 48) || !(t <= 57)) && t != 58 && t != 46 && t != 95 && t != 45) {
                if (n == c) {
                  throw K.thrown(new jd("Expected attribute name", a, c));
                }
                g = M.substr(a, n, c - n);
                if (e.exists(g)) {
                  throw K.thrown(new jd("Duplicate attribute [" + g + "]", a, c));
                }
                f = 0;
                k = 6;
                continue;
              }
              break;
            case 6:
              if (t == 61) {
                f = 0;
                k = 7;
              } else {
                throw K.thrown(new jd("Expected =", a, c));
              }
              break;
            case 7:
              switch (t) {
                case 34:
                case 39:
                  m = new ye();
                  f = 8;
                  n = c + 1;
                  q = t;
                  break;
                default:
                  throw K.thrown(new jd("Expected \"", a, c));
              }
              break;
            case 8:
              switch (t) {
                case 38:
                  l = c - n;
                  m.b += l == null ? M.substr(a, n, null) : M.substr(a, n, l);
                  f = 18;
                  l = 8;
                  n = c + 1;
                  break;
                case 60:
                case 62:
                  if (b) {
                    throw K.thrown(new jd("Invalid unescaped " + String.fromCodePoint(t) + " in attribute value", a, c));
                  }
                  if (t == q) {
                    k = c - n;
                    m.b += k == null ? M.substr(a, n, null) : M.substr(a, n, k);
                    k = m.b;
                    m = new ye();
                    e.set(g, k);
                    f = 0;
                    k = 4;
                  }
                  break;
                default:
                  if (t == q) {
                    k = c - n;
                    m.b += k == null ? M.substr(a, n, null) : M.substr(a, n, k);
                    k = m.b;
                    m = new ye();
                    e.set(g, k);
                    f = 0;
                    k = 4;
                  }
              }
              break;
            case 9:
              n = c = Dg.doParse(a, b, c, e);
              f = 1;
              break;
            case 10:
              if ((!(t >= 97) || !(t <= 122)) && (!(t >= 65) || !(t <= 90)) && (!(t >= 48) || !(t <= 57)) && t != 58 && t != 46 && t != 95 && t != 45) {
                if (n == c) {
                  throw K.thrown(new jd("Expected node name", a, c));
                }
                k = M.substr(a, n, c - n);
                if (d == null || d.nodeType != 0) {
                  throw K.thrown(new jd("Unexpected </" + k + ">, tag is not open", a, c));
                }
                if (d.nodeType != X.Element) {
                  throw K.thrown("Bad node type, expected Element but found " + (d.nodeType == null ? "null" : hb.toString(d.nodeType)));
                }
                if (k != d.nodeName) {
                  if (d.nodeType != X.Element) {
                    throw K.thrown("Bad node type, expected Element but found " + (d.nodeType == null ? "null" : hb.toString(d.nodeType)));
                  }
                  throw K.thrown(new jd("Expected </" + d.nodeName + ">", a, c));
                }
                f = 0;
                k = 12;
                continue;
              }
              break;
            case 11:
              if (t == 62) {
                f = 1;
              } else {
                throw K.thrown(new jd("Expected >", a, c));
              }
              break;
            case 12:
              if (t == 62) {
                if (h == 0) {
                  d.addChild(X.createPCData(""));
                }
                return c;
              }
              throw K.thrown(new jd("Expected >", a, c));
            case 13:
              if (t == 60) {
                k = c - n;
                m.b += k == null ? M.substr(a, n, null) : M.substr(a, n, k);
                k = X.createPCData(m.b);
                m = new ye();
                d.addChild(k);
                ++h;
                f = 0;
                k = 2;
              } else if (t == 38) {
                l = c - n;
                m.b += l == null ? M.substr(a, n, null) : M.substr(a, n, l);
                f = 18;
                l = 13;
                n = c + 1;
              }
              break;
            case 14:
              if (t == 63 && a.charCodeAt(c + 1) == 62) {
                ++c;
                f = M.substr(a, n + 1, c - n - 2);
                d.addChild(X.createProcessingInstruction(f));
                ++h;
                f = 1;
              }
              break;
            case 15:
              if (t == 45 && a.charCodeAt(c + 1) == 45 && a.charCodeAt(c + 2) == 62) {
                d.addChild(X.createComment(M.substr(a, n, c - n)));
                ++h;
                c += 2;
                f = 1;
              }
              break;
            case 16:
              if (t == 91) {
                ++p;
              } else if (t == 93) {
                --p;
              } else if (t == 62 && p == 0) {
                d.addChild(X.createDocType(M.substr(a, n, c - n)));
                ++h;
                f = 1;
              }
              break;
            case 17:
              if (t == 93 && a.charCodeAt(c + 1) == 93 && a.charCodeAt(c + 2) == 62) {
                f = X.createCData(M.substr(a, n, c - n));
                d.addChild(f);
                ++h;
                c += 2;
                f = 1;
              }
              break;
            case 18:
              if (t == 59) {
                n = M.substr(a, n, c - n);
                if (n.charCodeAt(0) == 35) {
                  n = n.charCodeAt(1) == 120 ? H.parseInt("0" + M.substr(n, 1, n.length - 1)) : H.parseInt(M.substr(n, 1, n.length - 1));
                  m.b += String.fromCodePoint(n);
                } else if (Object.prototype.hasOwnProperty.call(Dg.escapes.h, n)) {
                  m.b += H.string(Dg.escapes.h[n]);
                } else {
                  if (b) {
                    throw K.thrown(new jd("Undefined entity: " + n, a, c));
                  }
                  m.b += H.string("&" + n + ";");
                }
                n = c + 1;
                f = l;
              } else if ((!(t >= 97) || !(t <= 122)) && (!(t >= 65) || !(t <= 90)) && (!(t >= 48) || !(t <= 57)) && t != 58 && t != 46 && t != 95 && t != 45 && t != 35) {
                if (b) {
                  throw K.thrown(new jd("Invalid character in entity: " + String.fromCodePoint(t), a, c));
                }
                m.b += String.fromCodePoint(38);
                f = c - n;
                m.b += f == null ? M.substr(a, n, null) : M.substr(a, n, f);
                --c;
                n = c + 1;
                f = l;
              }
          }
          ++c;
        }
        if (f == 1) {
          n = c;
          f = 13;
        }
        if (f == 13) {
          if (d.nodeType == 0) {
            if (d.nodeType != X.Element) {
              throw K.thrown("Bad node type, expected Element but found " + (d.nodeType == null ? "null" : hb.toString(d.nodeType)));
            }
            throw K.thrown(new jd("Unclosed node <" + d.nodeName + ">", a, c));
          }
          if (c != n || h == 0) {
            l = c - n;
            m.b += l == null ? M.substr(a, n, null) : M.substr(a, n, l);
            d.addChild(X.createPCData(m.b));
          }
          return c;
        }
        if (!b && f == 18 && l == 13) {
          m.b += String.fromCodePoint(38);
          l = c - n;
          m.b += l == null ? M.substr(a, n, null) : M.substr(a, n, l);
          d.addChild(X.createPCData(m.b));
          return c;
        }
        throw K.thrown(new jd("Unexpected end", a, c));
      };
      function Eg(a) {
        this.output = new ye();
        this.pretty = a;
      }
      h["haxe.xml.Printer"] = Eg;
      Eg.__name__ = "haxe.xml.Printer";
      Eg.print = function (a, b) {
        if (b == null) {
          b = false;
        }
        b = new Eg(b);
        b.writeNode(a, "");
        return b.output.b;
      };
      Eg.prototype = {
        writeNode: function (a, b) {
          switch (a.nodeType) {
            case 0:
              this.output.b += H.string(b + "<");
              if (a.nodeType != X.Element) {
                throw K.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
              }
              this.output.b += H.string(a.nodeName);
              for (var c = a.attributes(); c.hasNext();) {
                var d = c.next();
                this.output.b += H.string(" " + d + "=\"");
                d = w.htmlEscape(a.get(d), true);
                this.output.b += H.string(d);
                this.output.b += "\"";
              }
              if (this.hasChildren(a)) {
                this.output.b += ">";
                if (this.pretty) {
                  this.output.b += "\n";
                }
                if (a.nodeType != X.Document && a.nodeType != X.Element) {
                  throw K.thrown("Bad node type, expected Element or Document but found " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
                }
                c = 0;
                for (d = a.children; c < d.length;) {
                  var e = d[c++];
                  this.writeNode(e, this.pretty ? b + "\t" : b);
                }
                this.output.b += H.string(b + "</");
                if (a.nodeType != X.Element) {
                  throw K.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
                }
                this.output.b += H.string(a.nodeName);
                this.output.b += ">";
              } else {
                this.output.b += "/>";
              }
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 1:
              if (a.nodeType == X.Document || a.nodeType == X.Element) {
                throw K.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
              }
              a = a.nodeValue;
              if (a.length != 0) {
                d = b + w.htmlEscape(a);
                this.output.b += H.string(d);
                if (this.pretty) {
                  this.output.b += "\n";
                }
              }
              break;
            case 2:
              this.output.b += H.string(b + "<![CDATA[");
              if (a.nodeType == X.Document || a.nodeType == X.Element) {
                throw K.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
              }
              this.output.b += H.string(a.nodeValue);
              this.output.b += "]]>";
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 3:
              if (a.nodeType == X.Document || a.nodeType == X.Element) {
                throw K.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
              }
              a = a.nodeValue;
              a = a.replace(/[\n\r\t]+/g, "");
              this.output.b += b == null ? "null" : "" + b;
              d = w.trim("<!--" + a + "-->");
              this.output.b += H.string(d);
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 4:
              if (a.nodeType == X.Document || a.nodeType == X.Element) {
                throw K.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
              }
              this.output.b += H.string("<!DOCTYPE " + a.nodeValue + ">");
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 5:
              if (a.nodeType == X.Document || a.nodeType == X.Element) {
                throw K.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
              }
              this.output.b += H.string("<?" + a.nodeValue + "?>");
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 6:
              if (a.nodeType != X.Document && a.nodeType != X.Element) {
                throw K.thrown("Bad node type, expected Element or Document but found " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
              }
              c = 0;
              for (d = a.children; c < d.length;) {
                e = d[c++];
                this.writeNode(e, b);
              }
          }
        },
        hasChildren: function (a) {
          if (a.nodeType != X.Document && a.nodeType != X.Element) {
            throw K.thrown("Bad node type, expected Element or Document but found " + (a.nodeType == null ? "null" : hb.toString(a.nodeType)));
          }
          var b = 0;
          for (a = a.children; b < a.length;) {
            var c = a[b++];
            switch (c.nodeType) {
              case 0:
              case 1:
                return true;
              case 2:
              case 3:
                if (c.nodeType == X.Document || c.nodeType == X.Element) {
                  throw K.thrown("Bad node type, unexpected " + (c.nodeType == null ? "null" : hb.toString(c.nodeType)));
                }
                if (w.ltrim(c.nodeValue).length != 0) {
                  return true;
                }
            }
          }
          return false;
        },
        __class__: Eg
      };
      var pi = x["haxe.zip.ExtraField"] = {
        __ename__: "haxe.zip.ExtraField",
        __constructs__: null,
        FUnknown: (u = function (a, b) {
          return {
            _hx_index: 0,
            tag: a,
            bytes: b,
            __enum__: "haxe.zip.ExtraField",
            toString: p
          };
        }, u._hx_name = "FUnknown", u.__params__ = ["tag", "bytes"], u),
        FInfoZipUnicodePath: (u = function (a, b) {
          return {
            _hx_index: 1,
            name: a,
            crc: b,
            __enum__: "haxe.zip.ExtraField",
            toString: p
          };
        }, u._hx_name = "FInfoZipUnicodePath", u.__params__ = ["name", "crc"], u),
        FUtf8: {
          _hx_name: "FUtf8",
          _hx_index: 2,
          __enum__: "haxe.zip.ExtraField",
          toString: p
        }
      };
      pi.__constructs__ = [pi.FUnknown, pi.FInfoZipUnicodePath, pi.FUtf8];
      var Lf = x["haxe.zip.Huffman"] = {
        __ename__: "haxe.zip.Huffman",
        __constructs__: null,
        Found: (u = function (a) {
          return {
            _hx_index: 0,
            i: a,
            __enum__: "haxe.zip.Huffman",
            toString: p
          };
        }, u._hx_name = "Found", u.__params__ = ["i"], u),
        NeedBit: (u = function (a, b) {
          return {
            _hx_index: 1,
            left: a,
            right: b,
            __enum__: "haxe.zip.Huffman",
            toString: p
          };
        }, u._hx_name = "NeedBit", u.__params__ = ["left", "right"], u),
        NeedBits: (u = function (a, b) {
          return {
            _hx_index: 2,
            n: a,
            table: b,
            __enum__: "haxe.zip.Huffman",
            toString: p
          };
        }, u._hx_name = "NeedBits", u.__params__ = ["n", "table"], u)
      };
      Lf.__constructs__ = [Lf.Found, Lf.NeedBit, Lf.NeedBits];
      function jo() {}
      h["haxe.zip.HuffTools"] = jo;
      jo.__name__ = "haxe.zip.HuffTools";
      jo.prototype = {
        treeDepth: function (a) {
          switch (a._hx_index) {
            case 0:
              return 0;
            case 1:
              var b = a.right;
              a = this.treeDepth(a.left);
              b = this.treeDepth(b);
              return 1 + (a < b ? a : b);
            case 2:
              throw K.thrown("assert");
          }
        },
        treeCompress: function (a) {
          var b = this.treeDepth(a);
          if (b == 0) {
            return a;
          }
          if (b == 1) {
            if (a._hx_index == 1) {
              b = a.right;
              return Lf.NeedBit(this.treeCompress(a.left), this.treeCompress(b));
            }
            throw K.thrown("assert");
          }
          var c = [];
          for (var d = 0, e = 1 << b; d < e;) {
            d++;
            c.push(Lf.Found(-1));
          }
          this.treeWalk(c, 0, 0, b, a);
          return Lf.NeedBits(b, c);
        },
        treeWalk: function (a, b, c, d, e) {
          if (e._hx_index == 1) {
            var f = e.left;
            var k = e.right;
            if (d > 0) {
              this.treeWalk(a, b, c + 1, d - 1, f);
              this.treeWalk(a, b | 1 << c, c + 1, d - 1, k);
            } else {
              a[b] = this.treeCompress(e);
            }
          } else {
            a[b] = this.treeCompress(e);
          }
        },
        treeMake: function (a, b, c, d) {
          if (d > b) {
            throw K.thrown("Invalid huffman");
          }
          var e = c << 5 | d;
          if (a.h.hasOwnProperty(e)) {
            return Lf.Found(a.h[e]);
          }
          c <<= 1;
          ++d;
          return Lf.NeedBit(this.treeMake(a, b, c, d), this.treeMake(a, b, c | 1, d));
        },
        make: function (a, b, c, d) {
          if (c == 1) {
            return Lf.NeedBit(Lf.Found(0), Lf.Found(0));
          }
          var e = [];
          var f = [];
          if (d > 32) {
            throw K.thrown("Invalid huffman");
          }
          for (var k = 0, g = d; k < g;) {
            k++;
            e.push(0);
            f.push(0);
          }
          k = 0;
          for (g = c; k < g;) {
            var n = k++;
            n = a[n + b];
            if (n >= d) {
              throw K.thrown("Invalid huffman");
            }
            e[n]++;
          }
          var h = 0;
          k = 1;
          for (g = d - 1; k < g;) {
            n = k++;
            h = h + e[n] << 1;
            f[n] = h;
          }
          e = new rc();
          k = 0;
          for (g = c; k < g;) {
            n = k++;
            c = a[n + b];
            if (c != 0) {
              h = f[c - 1];
              f[c - 1] = h + 1;
              e.h[h << 5 | c] = n;
            }
          }
          return this.treeCompress(Lf.NeedBit(this.treeMake(e, d, 0, 1), this.treeMake(e, d, 1, 1)));
        },
        __class__: jo
      };
      function ko(a) {
        this.buffer = new bc(new ArrayBuffer(65536));
        this.pos = 0;
        if (a) {
          this.crc = new ni();
        }
      }
      h["haxe.zip._InflateImpl.Window"] = ko;
      ko.__name__ = "haxe.zip._InflateImpl.Window";
      ko.prototype = {
        slide: function () {
          if (this.crc != null) {
            this.crc.update(this.buffer, 0, 32768);
          }
          var a = new bc(new ArrayBuffer(65536));
          this.pos -= 32768;
          a.blit(0, this.buffer, 32768, this.pos);
          this.buffer = a;
        },
        addBytes: function (a, b, c) {
          if (this.pos + c > 65536) {
            this.slide();
          }
          this.buffer.blit(this.pos, a, b, c);
          this.pos += c;
        },
        addByte: function (a) {
          if (this.pos == 65536) {
            this.slide();
          }
          this.buffer.b[this.pos] = a & 255;
          this.pos++;
        },
        getLastChar: function () {
          return this.buffer.b[this.pos - 1];
        },
        available: function () {
          return this.pos;
        },
        checksum: function () {
          if (this.crc != null) {
            this.crc.update(this.buffer, 0, this.pos);
          }
          return this.crc;
        },
        __class__: ko
      };
      var Tc = x["haxe.zip._InflateImpl.State"] = {
        __ename__: "haxe.zip._InflateImpl.State",
        __constructs__: null,
        Head: {
          _hx_name: "Head",
          _hx_index: 0,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Block: {
          _hx_name: "Block",
          _hx_index: 1,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        CData: {
          _hx_name: "CData",
          _hx_index: 2,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Flat: {
          _hx_name: "Flat",
          _hx_index: 3,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Crc: {
          _hx_name: "Crc",
          _hx_index: 4,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Dist: {
          _hx_name: "Dist",
          _hx_index: 5,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        DistOne: {
          _hx_name: "DistOne",
          _hx_index: 6,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Done: {
          _hx_name: "Done",
          _hx_index: 7,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        }
      };
      Tc.__constructs__ = [Tc.Head, Tc.Block, Tc.CData, Tc.Flat, Tc.Crc, Tc.Dist, Tc.DistOne, Tc.Done];
      function Hd(a, b, c) {
        if (c == null) {
          c = true;
        }
        if (b == null) {
          b = true;
        }
        this.isFinal = false;
        this.htools = new jo();
        this.huffman = this.buildFixedHuffman();
        this.huffdist = null;
        this.dist = this.len = 0;
        this.state = b ? Tc.Head : Tc.Block;
        this.input = a;
        this.needed = this.nbits = this.bits = 0;
        this.output = null;
        this.outpos = 0;
        this.lengths = [];
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.window = new ko(c);
      }
      h["haxe.zip.InflateImpl"] = Hd;
      Hd.__name__ = "haxe.zip.InflateImpl";
      Hd.prototype = {
        buildFixedHuffman: function () {
          if (Hd.FIXED_HUFFMAN != null) {
            return Hd.FIXED_HUFFMAN;
          }
          var a = [];
          for (var b = 0; b < 288;) {
            var c = b++;
            a.push(c <= 143 ? 8 : c <= 255 ? 9 : c <= 279 ? 7 : 8);
          }
          Hd.FIXED_HUFFMAN = this.htools.make(a, 0, 288, 10);
          return Hd.FIXED_HUFFMAN;
        },
        readBytes: function (a, b, c) {
          this.needed = c;
          this.outpos = b;
          this.output = a;
          if (c > 0) {
            while (this.inflateLoop());
          }
          return c - this.needed;
        },
        getBits: function (a) {
          while (this.nbits < a) {
            this.bits |= this.input.readByte() << this.nbits;
            this.nbits += 8;
          }
          var b = this.bits & (1 << a) - 1;
          this.nbits -= a;
          this.bits >>= a;
          return b;
        },
        getBit: function () {
          if (this.nbits == 0) {
            this.nbits = 8;
            this.bits = this.input.readByte();
          }
          var a = (this.bits & 1) == 1;
          this.nbits--;
          this.bits >>= 1;
          return a;
        },
        getRevBits: function (a) {
          if (a == 0) {
            return 0;
          } else if (this.getBit()) {
            return 1 << a - 1 | this.getRevBits(a - 1);
          } else {
            return this.getRevBits(a - 1);
          }
        },
        resetBits: function () {
          this.nbits = this.bits = 0;
        },
        addBytes: function (a, b, c) {
          this.window.addBytes(a, b, c);
          this.output.blit(this.outpos, a, b, c);
          this.needed -= c;
          this.outpos += c;
        },
        addByte: function (a) {
          this.window.addByte(a);
          this.output.b[this.outpos] = a & 255;
          this.needed--;
          this.outpos++;
        },
        addDistOne: function (a) {
          var b = this.window.getLastChar();
          for (var c = 0; c < a;) {
            c++;
            this.addByte(b);
          }
        },
        addDist: function (a, b) {
          this.addBytes(this.window.buffer, this.window.pos - a, b);
        },
        applyHuffman: function (a) {
          switch (a._hx_index) {
            case 0:
              var b = a.i;
              return b;
            case 1:
              b = a.left;
              a = a.right;
              return this.applyHuffman(this.getBit() ? a : b);
            case 2:
              b = a.n;
              return this.applyHuffman(a.table[this.getBits(b)]);
          }
        },
        inflateLengths: function (a, b) {
          for (var c = 0, d = 0; c < b;) {
            var e = this.applyHuffman(this.huffman);
            switch (e) {
              case 0:
              case 1:
              case 2:
              case 3:
              case 4:
              case 5:
              case 6:
              case 7:
              case 8:
              case 9:
              case 10:
              case 11:
              case 12:
              case 13:
              case 14:
              case 15:
                d = e;
                a[c] = e;
                ++c;
                break;
              case 16:
                e = c + 3 + this.getBits(2);
                if (e > b) {
                  throw K.thrown("Invalid data");
                }
                while (c < e) {
                  a[c] = d;
                  ++c;
                }
                break;
              case 17:
                c += 3 + this.getBits(3);
                if (c > b) {
                  throw K.thrown("Invalid data");
                }
                break;
              case 18:
                c += 11 + this.getBits(7);
                if (c > b) {
                  throw K.thrown("Invalid data");
                }
                break;
              default:
                throw K.thrown("Invalid data");
            }
          }
        },
        inflateLoop: function () {
          switch (this.state._hx_index) {
            case 0:
              var a = this.input.readByte();
              if ((a & 15) != 8) {
                throw K.thrown("Invalid data");
              }
              var b = this.input.readByte();
              var c = (b & 32) != 0;
              if (((a << 8) + b) % 31 != 0) {
                throw K.thrown("Invalid data");
              }
              if (c) {
                throw K.thrown("Unsupported dictionary");
              }
              this.state = Tc.Block;
              return true;
            case 1:
              this.isFinal = this.getBit();
              switch (this.getBits(2)) {
                case 0:
                  this.len = this.input.readUInt16();
                  if (this.input.readUInt16() != 65535 - this.len) {
                    throw K.thrown("Invalid data");
                  }
                  this.state = Tc.Flat;
                  a = this.inflateLoop();
                  this.resetBits();
                  return a;
                case 1:
                  this.huffman = this.buildFixedHuffman();
                  this.huffdist = null;
                  this.state = Tc.CData;
                  return true;
                case 2:
                  a = this.getBits(5) + 257;
                  b = this.getBits(5) + 1;
                  var d = this.getBits(4) + 4;
                  c = 0;
                  for (var e = d; c < e;) {
                    var f = c++;
                    this.lengths[Hd.CODE_LENGTHS_POS[f]] = this.getBits(3);
                  }
                  c = d;
                  for (e = 19; c < e;) {
                    f = c++;
                    this.lengths[Hd.CODE_LENGTHS_POS[f]] = 0;
                  }
                  this.huffman = this.htools.make(this.lengths, 0, 19, 8);
                  d = [];
                  c = 0;
                  for (e = a + b; c < e;) {
                    c++;
                    d.push(0);
                  }
                  this.inflateLengths(d, a + b);
                  this.huffdist = this.htools.make(d, a, b, 16);
                  this.huffman = this.htools.make(d, 0, a, 16);
                  this.state = Tc.CData;
                  return true;
                default:
                  throw K.thrown("Invalid data");
              }
            case 2:
              b = this.applyHuffman(this.huffman);
              if (b < 256) {
                this.addByte(b);
                return this.needed > 0;
              }
              if (b == 256) {
                this.state = this.isFinal ? Tc.Crc : Tc.Block;
              } else {
                b -= 257;
                a = Hd.LEN_EXTRA_BITS_TBL[b];
                if (a == -1) {
                  throw K.thrown("Invalid data");
                }
                this.len = Hd.LEN_BASE_VAL_TBL[b] + this.getBits(a);
                b = this.huffdist == null ? this.getRevBits(5) : this.applyHuffman(this.huffdist);
                a = Hd.DIST_EXTRA_BITS_TBL[b];
                if (a == -1) {
                  throw K.thrown("Invalid data");
                }
                this.dist = Hd.DIST_BASE_VAL_TBL[b] + this.getBits(a);
                if (this.dist > this.window.available()) {
                  throw K.thrown("Invalid data");
                }
                this.state = this.dist == 1 ? Tc.DistOne : Tc.Dist;
              }
              return true;
            case 3:
              a = this.len < this.needed ? this.len : this.needed;
              b = this.input.read(a);
              this.len -= a;
              this.addBytes(b, 0, a);
              if (this.len == 0) {
                this.state = this.isFinal ? Tc.Crc : Tc.Block;
              }
              return this.needed > 0;
            case 4:
              a = this.window.checksum();
              if (a == null) {
                this.state = Tc.Done;
                return true;
              }
              b = ni.read(this.input);
              if (!a.equals(b)) {
                throw K.thrown("Invalid CRC");
              }
              this.state = Tc.Done;
              return true;
            case 5:
              while (this.len > 0 && this.needed > 0) {
                a = this.len < this.dist ? this.len : this.dist;
                a = this.needed < a ? this.needed : a;
                this.addDist(this.dist, a);
                this.len -= a;
              }
              if (this.len == 0) {
                this.state = Tc.CData;
              }
              return this.needed > 0;
            case 6:
              a = this.len < this.needed ? this.len : this.needed;
              this.addDistOne(a);
              this.len -= a;
              if (this.len == 0) {
                this.state = Tc.CData;
              }
              return this.needed > 0;
            case 7:
              return false;
          }
        },
        __class__: Hd
      };
      function ki(a) {
        this.i = a;
      }
      h["haxe.zip.Reader"] = ki;
      ki.__name__ = "haxe.zip.Reader";
      ki.readZip = function (a) {
        return new ki(a).read();
      };
      ki.prototype = {
        readZipDate: function () {
          var a = this.i.readUInt16();
          var b = a >> 11 & 31;
          var c = a >> 5 & 63;
          a &= 31;
          var d = this.i.readUInt16();
          return new Date((d >> 9) + 1980, (d >> 5 & 15) - 1, d & 31, b, c, a << 1);
        },
        readExtraFields: function (a) {
          var b = new ab();
          for (; a > 0;) {
            if (a < 4) {
              throw K.thrown("Invalid extra fields data");
            }
            var c = this.i.readUInt16();
            var d = this.i.readUInt16();
            if (a < d) {
              throw K.thrown("Invalid extra fields data");
            }
            if (c == 28789) {
              var e = this.i.readByte();
              if (e != 1) {
                var f = new Tl();
                f.addByte(e);
                f.add(this.i.read(d - 1));
                b.add(pi.FUnknown(c, f.getBytes()));
              } else {
                c = this.i.readInt32();
                e = this.i.read(d - 5).toString();
                b.add(pi.FInfoZipUnicodePath(e, c));
              }
            } else {
              b.add(pi.FUnknown(c, this.i.read(d)));
            }
            a -= 4 + d;
          }
          return b;
        },
        readEntryHeader: function () {
          var a = this.i;
          var b = a.readInt32();
          if (b == 33639248 || b == 101010256) {
            return null;
          }
          if (b != 67324752) {
            throw K.thrown("Invalid Zip Data");
          }
          a.readUInt16();
          b = a.readUInt16();
          var c = (b & 2048) != 0;
          if ((b & 63473) != 0) {
            throw K.thrown("Unsupported flags " + b);
          }
          var d = a.readUInt16();
          var e = d != 0;
          if (e && d != 8) {
            throw K.thrown("Unsupported compression " + d);
          }
          d = this.readZipDate();
          var f = a.readInt32();
          var k = a.readInt32();
          var g = a.readInt32();
          var n = a.readInt16();
          var h = a.readInt16();
          a = a.readString(n);
          h = this.readExtraFields(h);
          if (c) {
            h.push(pi.FUtf8);
          }
          if ((b & 8) != 0) {
            f = null;
          }
          return {
            fileName: a,
            fileSize: g,
            fileTime: d,
            compressed: e,
            dataSize: k,
            data: null,
            crc32: f,
            extraFields: h
          };
        },
        read: function () {
          var a = new ab();
          var b = null;
          while (true) {
            var c = this.readEntryHeader();
            if (c == null) {
              break;
            }
            if (c.crc32 == null) {
              if (c.compressed) {
                if (b == null) {
                  b = new bc(new ArrayBuffer(65536));
                }
                var d = new Tl();
                var e = new Hd(this.i, false, false);
                while (true) {
                  var f = e.readBytes(b, 0, 65536);
                  d.addBytes(b, 0, f);
                  if (f < 65536) {
                    break;
                  }
                }
                c.data = d.getBytes();
              } else {
                c.data = this.i.read(c.dataSize);
              }
              c.crc32 = this.i.readInt32();
              if (c.crc32 == 134695760) {
                c.crc32 = this.i.readInt32();
              }
              c.dataSize = this.i.readInt32();
              c.fileSize = this.i.readInt32();
              c.dataSize = c.fileSize;
              c.compressed = false;
            } else {
              c.data = this.i.read(c.dataSize);
            }
            a.add(c);
          }
          return a;
        },
        __class__: ki
      };
      function ug() {}
      h["js.Browser"] = ug;
      ug.__name__ = "js.Browser";
      ug.__properties__ = {
        get_supported: "get_supported"
      };
      ug.get_supported = function () {
        if (typeof window != "undefined" && typeof window.location != "undefined") {
          return typeof window.location.protocol == "string";
        } else {
          return false;
        }
      };
      ug.getLocalStorage = function () {
        try {
          var a = window.localStorage;
          a.getItem("");
          if (a.length == 0) {
            var b = "_hx_" + Math.random();
            a.setItem(b, b);
            a.removeItem(b);
          }
          return a;
        } catch (c) {
          Na.lastError = c;
          return null;
        }
      };
      function gp() {}
      h["js.html._CanvasElement.CanvasUtil"] = gp;
      gp.__name__ = "js.html._CanvasElement.CanvasUtil";
      gp.getContextWebGL = function (a, b) {
        var c = a.getContext("webgl", b);
        if (c != null) {
          return c;
        }
        c = a.getContext("experimental-webgl", b);
        return c ?? null;
      };
      function hp() {}
      h["js.lib._ArrayBuffer.ArrayBufferCompat"] = hp;
      hp.__name__ = "js.lib._ArrayBuffer.ArrayBufferCompat";
      hp.sliceImpl = function (a, b) {
        a = new Uint8Array(this, a, b == null ? null : b - a);
        b = new Uint8Array(a.byteLength);
        b.set(a);
        return b.buffer;
      };
      function hn() {
        this.connected = true;
        this.buttons = [];
        this.axes = [];
      }
      h["lime._internal.backend.html5.GameDeviceData"] = hn;
      hn.__name__ = "lime._internal.backend.html5.GameDeviceData";
      hn.prototype = {
        __class__: hn
      };
      function mo(a) {
        this.parent = a;
        this.id = -1;
        this.gain = 1;
        this.position = new lo();
      }
      h["lime._internal.backend.html5.HTML5AudioSource"] = mo;
      mo.__name__ = "lime._internal.backend.html5.HTML5AudioSource";
      mo.prototype = {
        dispose: function () {},
        init: function () {},
        play: function () {
          if (!this.playing && this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            this.playing = true;
            var a = this.getCurrentTime();
            this.completed = false;
            var b = this.parent.buffer.__srcHowl._volume;
            this.parent.buffer.__srcHowl._volume = this.parent.get_gain();
            this.id = this.parent.buffer.__srcHowl.play();
            this.parent.buffer.__srcHowl._volume = b;
            this.setPosition(this.parent.get_position());
            this.parent.buffer.__srcHowl.on("end", l(this, this.howl_onEnd), this.id);
            this.setCurrentTime(a);
          }
        },
        stop: function () {
          this.playing = false;
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            this.parent.buffer.__srcHowl.stop(this.id);
            this.parent.buffer.__srcHowl.off("end", l(this, this.howl_onEnd), this.id);
          }
        },
        howl_onEnd: function () {
          this.playing = false;
          if (this.loops > 0) {
            this.loops--;
            this.stop();
            this.play();
          } else {
            if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
              this.parent.buffer.__srcHowl.stop(this.id);
              this.parent.buffer.__srcHowl.off("end", l(this, this.howl_onEnd), this.id);
            }
            this.completed = true;
            this.parent.onComplete.dispatch();
          }
        },
        getCurrentTime: function () {
          if (this.id == -1) {
            return 0;
          }
          if (this.completed) {
            return this.getLength();
          }
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            var a = (this.parent.buffer.__srcHowl.seek(this.id) * 1000 | 0) - this.parent.offset;
            if (a < 0) {
              return 0;
            } else {
              return a;
            }
          }
          return 0;
        },
        setCurrentTime: function (a) {
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            var b = (a + this.parent.offset) / 1000;
            if (b < 0) {
              b = 0;
            }
            this.parent.buffer.__srcHowl.seek(b, this.id);
          }
          return a;
        },
        getGain: function () {
          return this.gain;
        },
        setGain: function (a) {
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null && this.id != -1) {
            this.parent.buffer.__srcHowl.volume(a, this.id);
          }
          return this.gain = a;
        },
        getLength: function () {
          if (this.length != 0) {
            return this.length;
          } else if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            return this.parent.buffer.__srcHowl.duration() * 1000 | 0;
          } else {
            return 0;
          }
        },
        setLength: function (a) {
          return this.length = a;
        },
        setLoops: function (a) {
          return this.loops = a;
        },
        getPitch: function () {
          return this.parent.buffer.__srcHowl.rate();
        },
        setPitch: function (a) {
          this.parent.buffer.__srcHowl.rate(a);
          return this.getPitch();
        },
        getPosition: function () {
          return this.position;
        },
        setPosition: function (a) {
          this.position.x = a.x;
          this.position.y = a.y;
          this.position.z = a.z;
          this.position.w = a.w;
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null && this.parent.buffer.__srcHowl.pos != null) {
            this.parent.buffer.__srcHowl.pos(this.position.x, this.position.y, this.position.z, this.id);
          }
          return this.position;
        },
        __class__: mo
      };
      function Sa() {
        this.validStatus0 = new sa("Tizen", "gi").match(window.navigator.userAgent);
      }
      h["lime._internal.backend.html5.HTML5HTTPRequest"] = Sa;
      Sa.__name__ = "lime._internal.backend.html5.HTML5HTTPRequest";
      Sa.loadImage = function (a) {
        var b = new Md();
        if (Sa.activeRequests < Sa.requestLimit) {
          Sa.activeRequests++;
          Sa.__loadImage(a, b, 0);
        } else {
          Sa.requestQueue.add({
            instance: null,
            uri: a,
            promise: b,
            type: "IMAGE",
            options: 0
          });
        }
        return b.future;
      };
      Sa.loadImageFromBytes = function (a, b) {
        var c = URL.createObjectURL(new Blob([a.b.bufferValue], {
          type: b
        }));
        if (c != null) {
          a = new Md();
          if (Sa.activeRequests < Sa.requestLimit) {
            Sa.activeRequests++;
            Sa.__loadImage(c, a, 1);
          } else {
            Sa.requestQueue.add({
              instance: null,
              uri: c,
              promise: a,
              type: "IMAGE",
              options: 1
            });
          }
          return a.future;
        } else {
          return Sa.loadImage("data:" + b + ";base64," + bg.encode(a));
        }
      };
      Sa.processQueue = function () {
        if (Sa.activeRequests < Sa.requestLimit && Sa.requestQueue.length > 0) {
          Sa.activeRequests++;
          var a = Sa.requestQueue.pop();
          switch (a.type) {
            case "BINARY":
              a.instance.__loadData(a.uri, a.promise);
              break;
            case "IMAGE":
              Sa.__loadImage(a.uri, a.promise, a.options);
              break;
            case "TEXT":
              a.instance.__loadText(a.uri, a.promise);
              break;
            default:
              Sa.activeRequests--;
          }
        }
      };
      Sa.__fixHostname = function (a) {
        if (a == null) {
          return "";
        } else {
          return a;
        }
      };
      Sa.__fixPort = function (a, b) {
        if (a == null || a == "") {
          switch (b) {
            case "ftp:":
              return "21";
            case "gopher:":
              return "70";
            case "http:":
              return "80";
            case "https:":
              return "443";
            case "ws:":
              return "80";
            case "wss:":
              return "443";
            default:
              return "";
          }
        }
        return a;
      };
      Sa.__fixProtocol = function (a) {
        if (a == null || a == "") {
          return "http:";
        } else {
          return a;
        }
      };
      Sa.__isInMemoryURI = function (a) {
        if (w.startsWith(a, "data:")) {
          return true;
        } else {
          return w.startsWith(a, "blob:");
        }
      };
      Sa.__isSameOrigin = function (a) {
        if (a == null || a == "" || Sa.__isInMemoryURI(a)) {
          return true;
        }
        if (Sa.originElement == null) {
          Sa.originElement = window.document.createElement("a");
          Sa.originHostname = Sa.__fixHostname(I.location.hostname);
          Sa.originProtocol = Sa.__fixProtocol(I.location.protocol);
          Sa.originPort = Sa.__fixPort(I.location.port, Sa.originProtocol);
        }
        var b = Sa.originElement;
        b.href = a;
        if (b.hostname == "") {
          b.href = b.href;
        }
        var c = Sa.__fixHostname(b.hostname);
        a = Sa.__fixProtocol(b.protocol);
        b = Sa.__fixPort(b.port, a);
        c = c == "" || c == Sa.originHostname;
        b = b == "" || b == Sa.originPort;
        if (a != "file:" && c) {
          return b;
        } else {
          return false;
        }
      };
      Sa.__loadImage = function (a, b, c) {
        var d = new window.Image();
        if (!Sa.__isSameOrigin(a)) {
          d.crossOrigin = "Anonymous";
        }
        if (Sa.supportsImageProgress == null) {
          Sa.supportsImageProgress = "onprogress" in d;
        }
        if (Sa.supportsImageProgress || Sa.__isInMemoryURI(a)) {
          d.addEventListener("load", function (e) {
            Sa.__revokeBlobURI(a, c);
            e = new vg(null, d.width, d.height);
            e.__srcImage = d;
            Sa.activeRequests--;
            Sa.processQueue();
            b.complete(new Eb(e));
          }, false);
          d.addEventListener("progress", function (a) {
            b.progress(a.loaded, a.total);
          }, false);
          d.addEventListener("error", function (d) {
            Sa.__revokeBlobURI(a, c);
            Sa.activeRequests--;
            Sa.processQueue();
            b.error(new qi(d.detail, null));
          }, false);
          d.src = a;
        } else {
          var e = new XMLHttpRequest();
          e.onload = function (a) {
            Sa.activeRequests--;
            Sa.processQueue();
            new Eb().__fromBytes(bc.ofData(e.response), function (a) {
              b.complete(a);
            });
          };
          e.onerror = function (a) {
            b.error(new qi(a.message, null));
          };
          e.onprogress = function (a) {
            if (a.lengthComputable) {
              b.progress(a.loaded, a.total);
            }
          };
          e.open("GET", a, true);
          e.responseType = "arraybuffer";
          e.overrideMimeType("text/plain; charset=x-user-defined");
          e.send(null);
        }
      };
      Sa.__revokeBlobURI = function (a, b) {
        if ((b & 1) != 0) {
          URL.revokeObjectURL(a);
        }
      };
      Sa.prototype = {
        init: function (a) {
          this.parent = a;
        },
        load: function (a, b, c) {
          this.request = new XMLHttpRequest();
          if (this.parent.method == "POST") {
            this.request.upload.addEventListener("progress", b, false);
          } else {
            this.request.addEventListener("progress", b, false);
          }
          this.request.onreadystatechange = c;
          b = "";
          if (this.parent.data == null) {
            c = Object.keys(this.parent.formData.h);
            for (var d = c.length, e = 0; e < d;) {
              var f = c[e++];
              if (b.length > 0) {
                b += "&";
              }
              var k = this.parent.formData.h[f];
              if (f.indexOf("[]") > -1 && k instanceof Array) {
                var g = [];
                for (k = O(k); k.hasNext();) {
                  var n = k.next();
                  g.push(encodeURIComponent(n));
                }
                g = g.join("&amp;" + f + "=");
                b += encodeURIComponent(f) + "=" + g;
              } else {
                g = encodeURIComponent(f) + "=";
                f = H.string(k);
                b += g + encodeURIComponent(f);
              }
            }
            if (this.parent.method == "GET" && b != "") {
              a = a.indexOf("?") > -1 ? a + ("&" + b) : a + ("?" + b);
              b = "";
            }
          }
          this.request.open(H.string(this.parent.method), a, true);
          if (this.parent.timeout > 0) {
            this.request.timeout = this.parent.timeout;
          }
          if (this.binary) {
            this.request.responseType = "arraybuffer";
          }
          a = null;
          g = 0;
          for (c = this.parent.headers; g < c.length;) {
            d = c[g];
            ++g;
            if (d.name == "Content-Type") {
              a = d.value;
            } else {
              this.request.setRequestHeader(d.name, d.value);
            }
          }
          if (this.parent.contentType != null) {
            a = this.parent.contentType;
          }
          if (a == null) {
            if (this.parent.data != null) {
              a = "application/octet-stream";
            } else if (b != "") {
              a = "application/x-www-form-urlencoded";
            }
          }
          if (a != null) {
            this.request.setRequestHeader("Content-Type", a);
          }
          if (this.parent.withCredentials) {
            this.request.withCredentials = true;
          }
          if (this.parent.data != null) {
            this.request.send(this.parent.data.b.bufferValue);
          } else {
            this.request.send(b);
          }
        },
        loadData: function (a) {
          var b = new Md();
          if (Sa.activeRequests < Sa.requestLimit) {
            Sa.activeRequests++;
            this.__loadData(a, b);
          } else {
            Sa.requestQueue.add({
              instance: this,
              uri: a,
              promise: b,
              type: "BINARY",
              options: 0
            });
          }
          return b.future;
        },
        loadText: function (a) {
          var b = new Md();
          if (Sa.activeRequests < Sa.requestLimit) {
            Sa.activeRequests++;
            this.__loadText(a, b);
          } else {
            Sa.requestQueue.add({
              instance: this,
              uri: a,
              promise: b,
              type: "TEXT",
              options: 0
            });
          }
          return b.future;
        },
        processResponse: function () {
          if (this.parent.enableResponseHeaders) {
            this.parent.responseHeaders = [];
            var a;
            var b;
            for (var c = 0, d = this.request.getAllResponseHeaders().split("\n"); c < d.length;) {
              b = d[c];
              ++c;
              a = w.trim(M.substr(b, 0, b.indexOf(":")));
              b = w.trim(M.substr(b, b.indexOf(":") + 1, null));
              if (a != "") {
                this.parent.responseHeaders.push(new Vl(a, b));
              }
            }
          }
          this.parent.responseStatus = this.request.status;
        },
        __loadData: function (a, b) {
          var c = this;
          this.binary = true;
          this.load(a, function (a) {
            b.progress(a.loaded, a.total);
          }, function (a) {
            if (c.request.readyState == 4) {
              a = null;
              if (c.request.responseType == "") {
                if (c.request.responseText != null) {
                  a = bc.ofString(c.request.responseText);
                }
              } else if (c.request.response != null) {
                a = bc.ofData(c.request.response);
              }
              if (c.request.status != null && (c.request.status >= 200 && c.request.status < 400 || c.validStatus0 && c.request.status == 0)) {
                c.processResponse();
                b.complete(a);
              } else {
                c.processResponse();
                b.error(new qi(c.request.status, a));
              }
              c.request = null;
              Sa.activeRequests--;
              Sa.processQueue();
            }
          });
        },
        __loadText: function (a, b) {
          var c = this;
          this.binary = false;
          this.load(a, function (a) {
            b.progress(a.loaded, a.total);
          }, function (a) {
            if (c.request.readyState == 4) {
              if (c.request.status != null && (c.request.status >= 200 && c.request.status < 400 || c.validStatus0 && c.request.status == 0)) {
                c.processResponse();
                b.complete(c.request.responseText);
              } else {
                c.processResponse();
                b.error(new qi(c.request.status, c.request.responseText));
              }
              c.request = null;
              Sa.activeRequests--;
              Sa.processQueue();
            }
          });
        },
        __class__: Sa
      };
      function Ya(a) {
        this.imeCompositionActive = false;
        this.unusedTouchesPool = new ab();
        this.scale = 1;
        this.currentTouches = new rc();
        this.parent = a;
        this.cursor = Tb.DEFAULT;
        this.cacheMouseY = this.cacheMouseX = 0;
        var b = a.__attributes;
        if (!Object.prototype.hasOwnProperty.call(b, "context")) {
          b.context = {};
        }
        this.renderType = b.context.type;
        if (Object.prototype.hasOwnProperty.call(b, "element")) {
          a.element = b.element;
        }
        var c = a.element;
        if (Object.prototype.hasOwnProperty.call(b, "allowHighDPI") && b.allowHighDPI && this.renderType != "dom") {
          this.scale = window.devicePixelRatio;
        }
        a.__scale = this.scale;
        this.setWidth = Object.prototype.hasOwnProperty.call(b, "width") ? b.width : 0;
        this.setHeight = Object.prototype.hasOwnProperty.call(b, "height") ? b.height : 0;
        a.__width = this.setWidth;
        a.__height = this.setHeight;
        a.id = Ya.windowID++;
        if (c instanceof HTMLCanvasElement) {
          this.canvas = c;
        } else if (this.renderType == "dom") {
          this.div = window.document.createElement("div");
        } else {
          this.canvas = window.document.createElement("canvas");
        }
        if (this.canvas != null) {
          var d = this.canvas.style;
          d.setProperty("-webkit-transform", "translateZ(0)", null);
          d.setProperty("transform", "translateZ(0)", null);
        } else if (this.div != null) {
          d = this.div.style;
          d.setProperty("-webkit-transform", "translate3D(0,0,0)", null);
          d.setProperty("transform", "translate3D(0,0,0)", null);
          d.position = "relative";
          d.overflow = "hidden";
          d.setProperty("-webkit-user-select", "none", null);
          d.setProperty("-moz-user-select", "none", null);
          d.setProperty("-ms-user-select", "none", null);
          d.setProperty("-o-user-select", "none", null);
        }
        if (a.__width == 0 && a.__height == 0) {
          if (c != null) {
            a.__width = c.clientWidth;
            a.__height = c.clientHeight;
          } else {
            a.__width = window.innerWidth;
            a.__height = window.innerHeight;
          }
          this.cacheElementWidth = a.__width;
          this.cacheElementHeight = a.__height;
          this.resizeElement = true;
        }
        if (this.canvas != null) {
          this.canvas.width = Math.round(a.__width * this.scale);
          this.canvas.height = Math.round(a.__height * this.scale);
          this.canvas.style.width = a.__width + "px";
          this.canvas.style.height = a.__height + "px";
        } else {
          this.div.style.width = a.__width + "px";
          this.div.style.height = a.__height + "px";
        }
        if (Object.prototype.hasOwnProperty.call(b, "resizable") && b.resizable || !Object.prototype.hasOwnProperty.call(b, "width") && this.setWidth == 0 && this.setHeight == 0) {
          a.__resizable = true;
        }
        this.updateSize();
        if (c != null) {
          if (this.canvas != null) {
            if (c != this.canvas) {
              c.appendChild(this.canvas);
            }
          } else {
            c.appendChild(this.div);
          }
          b = "mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");
          for (d = 0; d < b.length;) {
            var e = b[d];
            ++d;
            c.addEventListener(e, l(this, this.handleMouseEvent), true);
          }
          c.addEventListener("contextmenu", l(this, this.handleContextMenuEvent), true);
          c.addEventListener("dragstart", l(this, this.handleDragEvent), true);
          c.addEventListener("dragover", l(this, this.handleDragEvent), true);
          c.addEventListener("drop", l(this, this.handleDragEvent), true);
          c.addEventListener("touchstart", l(this, this.handleTouchEvent), true);
          c.addEventListener("touchmove", l(this, this.handleTouchEvent), true);
          c.addEventListener("touchend", l(this, this.handleTouchEvent), true);
          c.addEventListener("touchcancel", l(this, this.handleTouchEvent), true);
          c.addEventListener("gamepadconnected", l(this, this.handleGamepadEvent), true);
          c.addEventListener("gamepaddisconnected", l(this, this.handleGamepadEvent), true);
        }
        this.createContext();
        if (a.context.type == "webgl") {
          this.canvas.addEventListener("webglcontextlost", l(this, this.handleContextEvent), false);
          this.canvas.addEventListener("webglcontextrestored", l(this, this.handleContextEvent), false);
        }
      }
      h["lime._internal.backend.html5.HTML5Window"] = Ya;
      Ya.__name__ = "lime._internal.backend.html5.HTML5Window";
      Ya.prototype = {
        close: function () {
          var a = this.parent.element;
          if (a != null) {
            if (this.canvas != null) {
              if (a != this.canvas) {
                a.removeChild(this.canvas);
              }
              this.canvas = null;
            } else if (this.div != null) {
              a.removeChild(this.div);
              this.div = null;
            }
            for (var b = "mousedown mouseenter mouseleave mousemove mouseup wheel".split(" "), c = 0; c < b.length;) {
              var d = b[c];
              ++c;
              a.removeEventListener(d, l(this, this.handleMouseEvent), true);
            }
            a.removeEventListener("contextmenu", l(this, this.handleContextMenuEvent), true);
            a.removeEventListener("dragstart", l(this, this.handleDragEvent), true);
            a.removeEventListener("dragover", l(this, this.handleDragEvent), true);
            a.removeEventListener("drop", l(this, this.handleDragEvent), true);
            a.removeEventListener("touchstart", l(this, this.handleTouchEvent), true);
            a.removeEventListener("touchmove", l(this, this.handleTouchEvent), true);
            a.removeEventListener("touchend", l(this, this.handleTouchEvent), true);
            a.removeEventListener("touchcancel", l(this, this.handleTouchEvent), true);
            a.removeEventListener("gamepadconnected", l(this, this.handleGamepadEvent), true);
            a.removeEventListener("gamepaddisconnected", l(this, this.handleGamepadEvent), true);
          }
          this.parent.application.__removeWindow(this.parent);
        },
        createContext: function () {
          var a = new no();
          var b = this.parent.__attributes.context;
          a.window = this.parent;
          a.attributes = b;
          if (this.div != null) {
            a.dom = this.div;
            a.type = "dom";
            a.version = "";
          } else if (this.canvas != null) {
            var c = null;
            var d = this.renderType == "canvas";
            var e = this.renderType == "opengl" || this.renderType == "opengles" || this.renderType == "webgl";
            var f = !Object.prototype.hasOwnProperty.call(b, "version") || b.version != "1";
            var k = false;
            if (e || !d && (!Object.prototype.hasOwnProperty.call(b, "hardware") || b.hardware)) {
              d = Object.prototype.hasOwnProperty.call(b, "background") && b.background == null;
              e = Object.prototype.hasOwnProperty.call(b, "colorDepth") ? b.colorDepth : 16;
              var g = Object.prototype.hasOwnProperty.call(b, "antialiasing") && b.antialiasing > 0;
              var n = Object.prototype.hasOwnProperty.call(b, "depth") ? b.depth : true;
              b = Object.prototype.hasOwnProperty.call(b, "stencil") && b.stencil;
              b = {
                alpha: d || e > 16,
                antialias: g,
                depth: n,
                premultipliedAlpha: true,
                stencil: b,
                preserveDrawingBuffer: false,
                failIfMajorPerformanceCaveat: false
              };
              d = ["webgl", "experimental-webgl"];
              if (f) {
                d.unshift("webgl2");
              }
              for (f = 0; f < d.length && (e = d[f], ++f, c = this.canvas.getContext(e, b), c != null && e == "webgl2" && (k = true), c == null););
            }
            if (c == null) {
              a.canvas2D = this.canvas.getContext("2d");
              a.type = "canvas";
              a.version = "";
            } else {
              a.webgl = Yc.fromWebGL2RenderContext(c);
              if (k) {
                a.webgl2 = c;
              }
              if (wg.context == null) {
                wg.context = c;
                wg.type = "webgl";
                wg.version = k ? 2 : 1;
              }
              a.type = "webgl";
              a.version = k ? "2" : "1";
            }
          }
          this.parent.context = a;
        },
        focusTextInput: function () {
          var a = this;
          if (!this.__focusPending) {
            this.__focusPending = true;
            kg.delay(function () {
              a.__focusPending = false;
              if (a.textInputEnabled) {
                Ya.textInput.focus();
              }
            }, 20);
          }
        },
        getFrameRate: function () {
          if (this.parent.application == null) {
            return 0;
          } else if (this.parent.application.__backend.framePeriod < 0) {
            return 60;
          } else if (this.parent.application.__backend.framePeriod == 1000) {
            return 0;
          } else {
            return 1000 / this.parent.application.__backend.framePeriod;
          }
        },
        handleContextEvent: function (a) {
          switch (a.type) {
            case "webglcontextlost":
              if (a.cancelable) {
                a.preventDefault();
              }
              this.parent.context = null;
              this.parent.onRenderContextLost.dispatch();
              break;
            case "webglcontextrestored":
              this.createContext();
              this.parent.onRenderContextRestored.dispatch(this.parent.context);
          }
        },
        handleContextMenuEvent: function (a) {
          if ((this.parent.onMouseUp.canceled || this.parent.onMouseDown.canceled) && a.cancelable) {
            a.preventDefault();
          }
        },
        handleCutOrCopyEvent: function (a) {
          var b = kc.get_text();
          if (b == null) {
            b = "";
          }
          a.clipboardData.setData("text/plain", b);
          if (a.cancelable) {
            a.preventDefault();
          }
        },
        handleDragEvent: function (a) {
          switch (a.type) {
            case "dragover":
              a.preventDefault();
              return false;
            case "dragstart":
              if (ta.__cast(a.target, HTMLElement).nodeName.toLowerCase() == "img" && a.cancelable) {
                a.preventDefault();
                return false;
              }
              break;
            case "drop":
              if (a.dataTransfer != null && a.dataTransfer.files.length > 0) {
                this.parent.onDropFile.dispatch(a.dataTransfer.files);
                a.preventDefault();
                return false;
              }
          }
          return true;
        },
        handleFocusEvent: function (a) {
          if (this.textInputEnabled && (a.relatedTarget == null || this.isDescendent(a.relatedTarget))) {
            this.focusTextInput();
          }
        },
        handleFullscreenEvent: function (a) {
          if ((document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement) != null) {
            this.isFullscreen = true;
            this.parent.__fullscreen = true;
            if (this.requestedFullscreen) {
              this.requestedFullscreen = false;
              this.parent.onFullscreen.dispatch();
            }
          } else {
            this.isFullscreen = false;
            this.parent.__fullscreen = false;
            this.parent.onRestore.dispatch();
            a = ["fullscreenchange", "mozfullscreenchange", "webkitfullscreenchange", "MSFullscreenChange"];
            var b = ["fullscreenerror", "mozfullscreenerror", "webkitfullscreenerror", "MSFullscreenError"];
            for (var c = 0, d = a.length; c < d;) {
              var e = c++;
              window.document.removeEventListener(a[e], l(this, this.handleFullscreenEvent), false);
              window.document.removeEventListener(b[e], l(this, this.handleFullscreenEvent), false);
            }
          }
        },
        handleGamepadEvent: function (a) {
          switch (a.type) {
            case "gamepadconnected":
              Lc.__connect(a.gamepad.index);
              if (a.gamepad.mapping == "standard") {
                Qc.__connect(a.gamepad.index);
              }
              break;
            case "gamepaddisconnected":
              Lc.__disconnect(a.gamepad.index);
              Qc.__disconnect(a.gamepad.index);
          }
        },
        handleInputEvent: function (a) {
          if (!this.imeCompositionActive && Ya.textInput.value != Ya.dummyCharacter) {
            a = w.replace(Ya.textInput.value, Ya.dummyCharacter, "");
            if (a.length > 0) {
              this.parent.onTextInput.dispatch(a);
            }
            Ya.textInput.value = Ya.dummyCharacter;
          }
        },
        handleMouseEvent: function (a) {
          if (a.type != "wheel") {
            if (this.parent.element != null) {
              if (this.canvas != null) {
                var b = this.canvas.getBoundingClientRect();
                var c = this.parent.__width / b.width * (a.clientX - b.left);
                b = this.parent.__height / b.height * (a.clientY - b.top);
              } else if (this.div != null) {
                b = this.div.getBoundingClientRect();
                c = a.clientX - b.left;
                b = a.clientY - b.top;
              } else {
                b = this.parent.element.getBoundingClientRect();
                c = this.parent.__width / b.width * (a.clientX - b.left);
                b = this.parent.__height / b.height * (a.clientY - b.top);
              }
            } else {
              c = a.clientX;
              b = a.clientY;
            }
            switch (a.type) {
              case "mousedown":
                if (a.currentTarget == this.parent.element) {
                  window.addEventListener("mouseup", l(this, this.handleMouseEvent));
                }
                this.parent.clickCount = a.detail;
                this.parent.onMouseDown.dispatch(c, b, a.button);
                this.parent.clickCount = 0;
                if (this.parent.onMouseDown.canceled && a.cancelable) {
                  a.preventDefault();
                }
                break;
              case "mouseenter":
                if (a.target == this.parent.element) {
                  this.parent.onEnter.dispatch();
                  if (this.parent.onEnter.canceled && a.cancelable) {
                    a.preventDefault();
                  }
                }
                break;
              case "mouseleave":
                if (a.target == this.parent.element) {
                  this.parent.onLeave.dispatch();
                  if (this.parent.onLeave.canceled && a.cancelable) {
                    a.preventDefault();
                  }
                }
                break;
              case "mousemove":
                if (c != this.cacheMouseX || b != this.cacheMouseY) {
                  this.parent.onMouseMove.dispatch(c, b);
                  this.parent.onMouseMoveRelative.dispatch(c - this.cacheMouseX, b - this.cacheMouseY);
                  if ((this.parent.onMouseMove.canceled || this.parent.onMouseMoveRelative.canceled) && a.cancelable) {
                    a.preventDefault();
                  }
                }
                break;
              case "mouseup":
                window.removeEventListener("mouseup", l(this, this.handleMouseEvent));
                if (a.currentTarget == this.parent.element) {
                  a.stopPropagation();
                }
                this.parent.clickCount = a.detail;
                this.parent.onMouseUp.dispatch(c, b, a.button);
                this.parent.clickCount = 0;
                if (this.parent.onMouseUp.canceled && a.cancelable) {
                  a.preventDefault();
                }
            }
            this.cacheMouseX = c;
            this.cacheMouseY = b;
          } else {
            switch (a.deltaMode) {
              case 0:
                c = Yg.PIXELS;
                break;
              case 1:
                c = Yg.LINES;
                break;
              case 2:
                c = Yg.PAGES;
                break;
              default:
                c = Yg.UNKNOWN;
            }
            this.parent.onMouseWheel.dispatch(a.deltaX, -a.deltaY, c);
            if (this.parent.onMouseWheel.canceled && a.cancelable) {
              a.preventDefault();
            }
          }
        },
        handlePasteEvent: function (a) {
          if (a.clipboardData.types.indexOf("text/plain") > -1) {
            var b = a.clipboardData.getData("text/plain");
            kc.set_text(b);
            if (this.textInputEnabled) {
              this.parent.onTextInput.dispatch(b);
            }
            if (a.cancelable) {
              a.preventDefault();
            }
          }
        },
        handleResizeEvent: function (a) {
          this.primaryTouch = null;
          this.updateSize();
        },
        handleTouchEvent: function (a) {
          if (a.cancelable) {
            a.preventDefault();
          }
          var b = null;
          if (this.parent.element != null) {
            b = this.canvas != null ? this.canvas.getBoundingClientRect() : this.div != null ? this.div.getBoundingClientRect() : this.parent.element.getBoundingClientRect();
          }
          var c = this.setWidth;
          var d = this.setHeight;
          if (c == 0 || d == 0) {
            if (b != null) {
              c = b.width;
              d = b.height;
            } else {
              d = c = 1;
            }
          }
          var e;
          for (var f, k, g, n, h = 0, p = a.changedTouches; h < p.length;) {
            var m = p[h];
            ++h;
            if (b != null) {
              f = c / b.width * (m.clientX - b.left);
              k = d / b.height * (m.clientY - b.top);
            } else {
              f = m.clientX;
              k = m.clientY;
            }
            if (a.type == "touchstart") {
              e = this.unusedTouchesPool.pop();
              if (e == null) {
                e = new Cc(f / c, k / d, m.identifier, 0, 0, m.force, this.parent.id);
              } else {
                e.x = f / c;
                e.y = k / d;
                e.id = m.identifier;
                e.dx = 0;
                e.dy = 0;
                e.pressure = m.force;
                e.device = this.parent.id;
              }
              this.currentTouches.h[m.identifier] = e;
              Cc.onStart.dispatch(e);
              if (this.primaryTouch == null) {
                this.primaryTouch = e;
              }
              if (e == this.primaryTouch) {
                this.parent.onMouseDown.dispatch(f, k, 0);
              }
            } else {
              e = this.currentTouches.h[m.identifier];
              if (e != null) {
                g = e.x;
                n = e.y;
                e.x = f / c;
                e.y = k / d;
                e.dx = e.x - g;
                e.dy = e.y - n;
                e.pressure = m.force;
                switch (a.type) {
                  case "touchcancel":
                    Cc.onCancel.dispatch(e);
                    this.currentTouches.remove(m.identifier);
                    this.unusedTouchesPool.add(e);
                    if (e == this.primaryTouch) {
                      this.primaryTouch = null;
                    }
                    break;
                  case "touchend":
                    Cc.onEnd.dispatch(e);
                    this.currentTouches.remove(m.identifier);
                    this.unusedTouchesPool.add(e);
                    if (e == this.primaryTouch) {
                      this.parent.onMouseUp.dispatch(f, k, 0);
                      this.primaryTouch = null;
                    }
                    break;
                  case "touchmove":
                    Cc.onMove.dispatch(e);
                    if (e == this.primaryTouch) {
                      this.parent.onMouseMove.dispatch(f, k);
                    }
                }
              }
            }
          }
        },
        isDescendent: function (a) {
          if (a == this.parent.element) {
            return true;
          }
          while (a != null) {
            if (a.parentNode == this.parent.element) {
              return true;
            }
            a = a.parentNode;
          }
          return false;
        },
        setClipboard: function (a) {
          if (Ya.textArea == null) {
            Ya.textArea = window.document.createElement("textarea");
            Ya.textArea.style.height = "0px";
            Ya.textArea.style.left = "-100px";
            Ya.textArea.style.opacity = "0";
            Ya.textArea.style.position = "fixed";
            Ya.textArea.style.top = "-100px";
            Ya.textArea.style.width = "0px";
            window.document.body.appendChild(Ya.textArea);
          }
          Ya.textArea.value = a;
          Ya.textArea.focus();
          Ya.textArea.select();
          if (window.document.queryCommandEnabled("copy")) {
            window.document.execCommand("copy");
          }
          if (this.textInputEnabled) {
            this.focusTextInput();
          }
        },
        setCursor: function (a) {
          if (this.cursor != a) {
            if (a == null) {
              this.parent.element.style.cursor = "none";
            } else {
              switch (a._hx_index) {
                case 0:
                  var b = "default";
                  break;
                case 1:
                  b = "crosshair";
                  break;
                case 3:
                  b = "move";
                  break;
                case 4:
                  b = "pointer";
                  break;
                case 5:
                  b = "nesw-resize";
                  break;
                case 6:
                  b = "ns-resize";
                  break;
                case 7:
                  b = "nwse-resize";
                  break;
                case 8:
                  b = "ew-resize";
                  break;
                case 9:
                  b = "text";
                  break;
                case 10:
                  b = "wait";
                  break;
                case 11:
                  b = "wait";
                  break;
                default:
                  b = "auto";
              }
              this.parent.element.style.cursor = b;
            }
            this.cursor = a;
          }
          return this.cursor;
        },
        setFrameRate: function (a) {
          if (this.parent.application != null) {
            if (a >= 60) {
              if (this.parent == this.parent.application.__window) {
                this.parent.application.__backend.framePeriod = -1;
              }
            } else if (a > 0) {
              if (this.parent == this.parent.application.__window) {
                this.parent.application.__backend.framePeriod = 1000 / a;
              }
            } else if (this.parent == this.parent.application.__window) {
              this.parent.application.__backend.framePeriod = 1000;
            }
          }
          return a;
        },
        setFullscreen: function (a) {
          if (a) {
            if (!this.requestedFullscreen && !this.isFullscreen) {
              this.requestedFullscreen = true;
              u = this.parent.element;
              if (l(u, u.requestFullscreen)) {
                document.addEventListener("fullscreenchange", l(this, this.handleFullscreenEvent), false);
                document.addEventListener("fullscreenerror", l(this, this.handleFullscreenEvent), false);
                this.parent.element.requestFullscreen();
              } else if (this.parent.element.mozRequestFullScreen) {
                document.addEventListener("mozfullscreenchange", l(this, this.handleFullscreenEvent), false);
                document.addEventListener("mozfullscreenerror", l(this, this.handleFullscreenEvent), false);
                this.parent.element.mozRequestFullScreen();
              } else if (this.parent.element.webkitRequestFullscreen) {
                document.addEventListener("webkitfullscreenchange", l(this, this.handleFullscreenEvent), false);
                document.addEventListener("webkitfullscreenerror", l(this, this.handleFullscreenEvent), false);
                this.parent.element.webkitRequestFullscreen();
              } else if (this.parent.element.msRequestFullscreen) {
                document.addEventListener("MSFullscreenChange", l(this, this.handleFullscreenEvent), false);
                document.addEventListener("MSFullscreenError", l(this, this.handleFullscreenEvent), false);
                this.parent.element.msRequestFullscreen();
              }
            }
          } else if (this.isFullscreen) {
            this.requestedFullscreen = false;
            if (document.exitFullscreen) {
              document.exitFullscreen();
            } else if (document.mozCancelFullScreen) {
              document.mozCancelFullScreen();
            } else if (document.webkitExitFullscreen) {
              document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) {
              document.msExitFullscreen();
            }
          }
          return a;
        },
        setTextInputEnabled: function (a) {
          if (a) {
            if (Ya.textInput == null) {
              Ya.textInput = window.document.createElement("input");
              var b = I.navigator.userAgent.indexOf("Android") >= 0 ? "password" : "text";
              Ya.textInput.type = b;
              Ya.textInput.style.position = "absolute";
              Ya.textInput.style.opacity = "0";
              Ya.textInput.style.color = "transparent";
              Ya.textInput.value = Ya.dummyCharacter;
              Ya.textInput.autocapitalize = "off";
              Ya.textInput.autocorrect = "off";
              Ya.textInput.autocomplete = "off";
              Ya.textInput.style.left = "0px";
              Ya.textInput.style.top = "50%";
              if (new sa("(iPad|iPhone|iPod).*OS 8_", "gi").match(window.navigator.userAgent)) {
                Ya.textInput.style.fontSize = "0px";
                Ya.textInput.style.width = "0px";
                Ya.textInput.style.height = "0px";
              } else {
                Ya.textInput.style.width = "1px";
                Ya.textInput.style.height = "1px";
              }
              Ya.textInput.style.pointerEvents = "none";
              Ya.textInput.style.zIndex = "-10000000";
            }
            if (Ya.textInput.parentNode == null) {
              this.parent.element.appendChild(Ya.textInput);
            }
            if (!this.textInputEnabled) {
              Ya.textInput.addEventListener("input", l(this, this.handleInputEvent), true);
              Ya.textInput.addEventListener("blur", l(this, this.handleFocusEvent), true);
              Ya.textInput.addEventListener("cut", l(this, this.handleCutOrCopyEvent), true);
              Ya.textInput.addEventListener("copy", l(this, this.handleCutOrCopyEvent), true);
              Ya.textInput.addEventListener("paste", l(this, this.handlePasteEvent), true);
              Ya.textInput.addEventListener("compositionstart", l(this, this.handleCompositionstartEvent), true);
              Ya.textInput.addEventListener("compositionend", l(this, this.handleCompositionendEvent), true);
            }
            Ya.textInput.focus();
            Ya.textInput.select();
          } else if (Ya.textInput != null) {
            Ya.textInput.blur();
            Ya.textInput.removeEventListener("input", l(this, this.handleInputEvent), true);
            Ya.textInput.removeEventListener("blur", l(this, this.handleFocusEvent), true);
            Ya.textInput.removeEventListener("cut", l(this, this.handleCutOrCopyEvent), true);
            Ya.textInput.removeEventListener("copy", l(this, this.handleCutOrCopyEvent), true);
            Ya.textInput.removeEventListener("paste", l(this, this.handlePasteEvent), true);
            Ya.textInput.removeEventListener("compositionstart", l(this, this.handleCompositionstartEvent), true);
            Ya.textInput.removeEventListener("compositionend", l(this, this.handleCompositionendEvent), true);
          }
          return this.textInputEnabled = a;
        },
        setTextInputRect: function (a) {
          return this.textInputRect = a;
        },
        handleCompositionstartEvent: function (a) {
          this.imeCompositionActive = true;
        },
        handleCompositionendEvent: function (a) {
          this.imeCompositionActive = false;
          this.handleInputEvent(a);
        },
        updateSize: function () {
          if (this.parent.__resizable) {
            if (this.parent.element != null) {
              var a = this.parent.element.clientWidth;
              var b = this.parent.element.clientHeight;
            } else {
              a = window.innerWidth;
              b = window.innerHeight;
            }
            if (a != this.cacheElementWidth || b != this.cacheElementHeight) {
              this.cacheElementWidth = a;
              this.cacheElementHeight = b;
              var c = this.resizeElement || this.setWidth == 0 && this.setHeight == 0;
              if (this.parent.element != null && (this.div == null || this.div != null && c)) {
                if (c) {
                  if (this.parent.__width != a || this.parent.__height != b) {
                    this.parent.__width = a;
                    this.parent.__height = b;
                    if (this.canvas != null) {
                      if (this.parent.element != this.canvas) {
                        this.canvas.width = Math.round(a * this.scale);
                        this.canvas.height = Math.round(b * this.scale);
                        this.canvas.style.width = a + "px";
                        this.canvas.style.height = b + "px";
                      }
                    } else {
                      this.div.style.width = a + "px";
                      this.div.style.height = b + "px";
                    }
                    this.parent.onResize.dispatch(a, b);
                  }
                } else {
                  c = this.setWidth != 0 ? a / this.setWidth : 1;
                  var d = this.setHeight != 0 ? b / this.setHeight : 1;
                  var e = a;
                  var f = b;
                  var k = 0;
                  var g = 0;
                  if (c < d) {
                    f = Math.floor(this.setHeight * c);
                    g = Math.floor((b - f) / 2);
                  } else {
                    e = Math.floor(this.setWidth * d);
                    k = Math.floor((a - e) / 2);
                  }
                  if (this.canvas != null) {
                    if (this.parent.element != this.canvas) {
                      this.canvas.style.width = e + "px";
                      this.canvas.style.height = f + "px";
                      this.canvas.style.marginLeft = k + "px";
                      this.canvas.style.marginTop = g + "px";
                    }
                  } else {
                    this.div.style.width = e + "px";
                    this.div.style.height = f + "px";
                    this.div.style.marginLeft = k + "px";
                    this.div.style.marginTop = g + "px";
                  }
                }
              }
            }
          }
        },
        __class__: Ya
      };
      function bg() {}
      h["lime._internal.format.Base64"] = bg;
      bg.__name__ = "lime._internal.format.Base64";
      bg.encode = function (a) {
        var b = [];
        var c = bg.DICTIONARY;
        var d = bg.EXTENDED_DICTIONARY;
        var e = a.length;
        var f = Math.floor(e / 3);
        var k = f * 2;
        b.length = Math.ceil(e / 3) * 2;
        var g = 0;
        for (var n = 0, h; n < k;) {
          h = a.b[g] << 16 | a.b[g + 1] << 8 | a.b[g + 2];
          b[n] = d[h >> 12 & 4095];
          b[n + 1] = d[h & 4095];
          g += 3;
          n += 2;
        }
        switch (e - f * 3) {
          case 1:
            h = a.b[g] << 16;
            b[n] = d[h >> 12 & 4095];
            b[n + 1] = "==";
            break;
          case 2:
            h = a.b[g] << 16 | a.b[g + 1] << 8;
            b[n] = d[h >> 12 & 4095];
            b[n + 1] = c[h >> 6 & 63] + "=";
        }
        return b.join("");
      };
      function go() {}
      h["lime._internal.format.Deflate"] = go;
      go.__name__ = "lime._internal.format.Deflate";
      go.decompress = function (a) {
        a = pako.inflateRaw(a.b.bufferValue);
        return bc.ofData(a);
      };
      function ip() {}
      h["lime._internal.format.GZip"] = ip;
      ip.__name__ = "lime._internal.format.GZip";
      ip.decompress = function (a) {
        a = pako.ungzip(a.b.bufferValue);
        return bc.ofData(a);
      };
      function jp() {}
      h["lime._internal.format.LZMA"] = jp;
      jp.__name__ = "lime._internal.format.LZMA";
      jp.decompress = function (a) {
        return null;
      };
      function kp() {}
      h["lime._internal.format.Zlib"] = kp;
      kp.__name__ = "lime._internal.format.Zlib";
      kp.decompress = function (a) {
        a = pako.inflate(a.b.bufferValue);
        return bc.ofData(a);
      };
      function Xa() {}
      h["lime._internal.graphics.ImageCanvasUtil"] = Xa;
      Xa.__name__ = "lime._internal.graphics.ImageCanvasUtil";
      Xa.colorTransform = function (a, b, c) {
        Xa.convertToData(a);
        Ac.colorTransform(a, b, c);
      };
      Xa.convertToCanvas = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = a.buffer;
        if (c.__srcImage != null) {
          if (c.__srcCanvas == null) {
            Xa.createCanvas(a, c.__srcImage.width, c.__srcImage.height);
            c.__srcContext.drawImage(c.__srcImage, 0, 0);
          }
          c.__srcImage = null;
        } else if (c.__srcCanvas == null && c.data != null) {
          a.set_transparent(true);
          Xa.createCanvas(a, c.width, c.height);
          Xa.createImageData(a);
          c.__srcContext.putImageData(c.__srcImageData, 0, 0);
        } else if (a.type == Id.DATA && c.__srcImageData != null && a.dirty) {
          c.__srcContext.putImageData(c.__srcImageData, 0, 0);
          a.dirty = false;
        }
        if (b) {
          c.data = null;
          c.__srcImageData = null;
        } else if (c.data == null && c.__srcImageData != null) {
          c.data = c.__srcImageData.data;
        }
        a.type = Id.CANVAS;
      };
      Xa.convertToData = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = a.buffer;
        if (c.__srcImage != null) {
          Xa.convertToCanvas(a);
        }
        if (c.__srcCanvas != null && c.data == null) {
          Xa.createImageData(a);
          if (a.type == Id.CANVAS) {
            a.dirty = false;
          }
        } else if (a.type == Id.CANVAS && c.__srcCanvas != null && a.dirty) {
          if (c.__srcImageData == null) {
            Xa.createImageData(a);
          } else {
            c.__srcImageData = c.__srcContext.getImageData(0, 0, c.width, c.height);
            var d = c.__srcImageData.data.buffer;
            d = d != null ? new Uint8Array(d) : null;
            c.data = d;
          }
          a.dirty = false;
        }
        if (b) {
          a.buffer.__srcCanvas = null;
          a.buffer.__srcContext = null;
        }
        a.type = Id.DATA;
      };
      Xa.copyChannel = function (a, b, c, d, e, f) {
        Xa.convertToData(b);
        Xa.convertToData(a);
        Ac.copyChannel(a, b, c, d, e, f);
      };
      Xa.copyPixels = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (d != null && !(d.x >= a.width) && !(d.y >= a.height) && c != null && !(c.width < 1) && !(c.height < 1)) {
          if (e != null && e.get_transparent()) {
            if (f == null) {
              f = new Yh();
            }
            b = b.clone();
            b.copyChannel(e, new Me(c.x + f.x, c.y + f.y, c.width, c.height), new Yh(c.x, c.y), ri.ALPHA, ri.ALPHA);
          }
          Xa.convertToCanvas(a, true);
          if (!k) {
            if (a.get_transparent() && b.get_transparent()) {
              a.buffer.__srcContext.clearRect(d.x + a.offsetX, d.y + a.offsetY, c.width + a.offsetX, c.height + a.offsetY);
            }
          }
          Xa.convertToCanvas(b);
          if (b.buffer.get_src() != null) {
            a.buffer.__srcContext.globalCompositeOperation = "source-over";
            a.buffer.__srcContext.drawImage(b.buffer.get_src(), c.x + b.offsetX | 0, c.y + b.offsetY | 0, c.width | 0, c.height | 0, d.x + a.offsetX | 0, d.y + a.offsetY | 0, c.width | 0, c.height | 0);
          }
          a.dirty = true;
          a.version++;
        }
      };
      Xa.createCanvas = function (a, b, c) {
        var d = a.buffer;
        if (d.__srcCanvas == null) {
          d.__srcCanvas = window.document.createElement("canvas");
          d.__srcCanvas.width = b;
          d.__srcCanvas.height = c;
          if (a.get_transparent()) {
            d.__srcContext = d.__srcCanvas.getContext("2d");
          } else {
            if (!a.get_transparent()) {
              d.__srcCanvas.setAttribute("moz-opaque", "true");
            }
            d.__srcContext = d.__srcCanvas.getContext("2d", {
              alpha: false
            });
          }
        }
      };
      Xa.createImageData = function (a) {
        a = a.buffer;
        if (a.__srcImageData == null) {
          if (a.data == null) {
            a.__srcImageData = a.__srcContext.getImageData(0, 0, a.width, a.height);
          } else {
            a.__srcImageData = a.__srcContext.createImageData(a.width, a.height);
            a.__srcImageData.data.set(a.data);
          }
          var b = a.__srcImageData.data.buffer;
          b = b != null ? new Uint8Array(b) : null;
          a.data = b;
        }
      };
      Xa.fillRect = function (a, b, c, d) {
        Xa.convertToCanvas(a);
        if (d == 1) {
          d = c >> 16 & 255;
          var e = c >> 8 & 255;
          var f = c & 255;
          c = a.get_transparent() ? c >> 24 & 255 : 255;
        } else {
          d = c >> 24 & 255;
          e = c >> 16 & 255;
          f = c >> 8 & 255;
          c = a.get_transparent() ? c & 255 : 255;
        }
        if (b.x == 0 && b.y == 0 && b.width == a.width && b.height == a.height && a.get_transparent() && c == 0) {
          a.buffer.__srcCanvas.width = a.buffer.width;
        } else {
          if (c < 255) {
            a.buffer.__srcContext.clearRect(b.x + a.offsetX, b.y + a.offsetY, b.width + a.offsetX, b.height + a.offsetY);
          }
          if (c > 0) {
            a.buffer.__srcContext.fillStyle = "rgba(" + d + ", " + e + ", " + f + ", " + c / 255 + ")";
            a.buffer.__srcContext.fillRect(b.x + a.offsetX, b.y + a.offsetY, b.width + a.offsetX, b.height + a.offsetY);
          }
          a.dirty = true;
          a.version++;
        }
      };
      Xa.getPixel32 = function (a, b, c, d) {
        Xa.convertToData(a);
        return Ac.getPixel32(a, b, c, d);
      };
      Xa.setPixel = function (a, b, c, d, e) {
        Xa.convertToData(a);
        Ac.setPixel(a, b, c, d, e);
      };
      Xa.setPixel32 = function (a, b, c, d, e) {
        Xa.convertToData(a);
        Ac.setPixel32(a, b, c, d, e);
      };
      Xa.sync = function (a, b) {
        if (a != null) {
          if (a.type != Id.CANVAS || a.buffer.__srcCanvas == null && a.buffer.data == null) {
            if (a.type == Id.DATA) {
              Xa.convertToData(a, b);
            }
          } else {
            Xa.convertToCanvas(a, b);
          }
        }
      };
      function Ac() {}
      h["lime._internal.graphics.ImageDataUtil"] = Ac;
      Ac.__name__ = "lime._internal.graphics.ImageDataUtil";
      Ac.colorTransform = function (a, b, c) {
        var d = a.buffer.data;
        if (d != null) {
          var e = a.buffer.format;
          var f = a.buffer.premultiplied;
          b = new xg(a, b);
          var k = qd.getAlphaTable(c);
          var g = qd.getRedTable(c);
          var n = qd.getGreenTable(c);
          c = qd.getBlueTable(c);
          var h;
          var p;
          for (var m = 0, l = 0, q = b.height; l < q;) {
            h = l++;
            h = b.byteOffset + b.stride * h;
            for (var t = 0, u = b.width; t < u;) {
              p = t++;
              p = h + p * 4;
              var x = e;
              var L = f;
              if (L == null) {
                L = false;
              }
              if (x == null) {
                x = 0;
              }
              switch (x) {
                case 0:
                  m = (d[p] & 255) << 24 | (d[p + 1] & 255) << 16 | (d[p + 2] & 255) << 8 | d[p + 3] & 255;
                  break;
                case 1:
                  m = (d[p + 1] & 255) << 24 | (d[p + 2] & 255) << 16 | (d[p + 3] & 255) << 8 | d[p] & 255;
                  break;
                case 2:
                  m = (d[p + 2] & 255) << 24 | (d[p + 1] & 255) << 16 | (d[p] & 255) << 8 | d[p + 3] & 255;
              }
              if (L && (m & 255) != 0 && (m & 255) != 255) {
                R.unmult = 255 / (m & 255);
                m = (R.__clamp[Math.round((m >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((m >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((m >>> 8 & 255) * R.unmult)] & 255) << 8 | m & 255;
              }
              m = (g[m >>> 24 & 255] & 255) << 24 | (n[m >>> 16 & 255] & 255) << 16 | (c[m >>> 8 & 255] & 255) << 8 | k[m & 255] & 255;
              x = e;
              L = f;
              if (L == null) {
                L = false;
              }
              if (x == null) {
                x = 0;
              }
              if (L) {
                if ((m & 255) == 0) {
                  if (m != 0) {
                    m = 0;
                  }
                } else if ((m & 255) != 255) {
                  R.a16 = R.__alpha16[m & 255];
                  m = ((m >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((m >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((m >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | m & 255;
                }
              }
              switch (x) {
                case 0:
                  d[p] = m >>> 24 & 255;
                  d[p + 1] = m >>> 16 & 255;
                  d[p + 2] = m >>> 8 & 255;
                  d[p + 3] = m & 255;
                  break;
                case 1:
                  d[p] = m & 255;
                  d[p + 1] = m >>> 24 & 255;
                  d[p + 2] = m >>> 16 & 255;
                  d[p + 3] = m >>> 8 & 255;
                  break;
                case 2:
                  d[p] = m >>> 8 & 255;
                  d[p + 1] = m >>> 16 & 255;
                  d[p + 2] = m >>> 24 & 255;
                  d[p + 3] = m & 255;
              }
            }
          }
          a.dirty = true;
          a.version++;
        }
      };
      Ac.copyChannel = function (a, b, c, d, e, f) {
        switch (f._hx_index) {
          case 0:
            var k = 0;
            break;
          case 1:
            k = 1;
            break;
          case 2:
            k = 2;
            break;
          case 3:
            k = 3;
        }
        switch (e._hx_index) {
          case 0:
            var g = 0;
            break;
          case 1:
            g = 1;
            break;
          case 2:
            g = 2;
            break;
          case 3:
            g = 3;
        }
        e = b.buffer.data;
        f = a.buffer.data;
        if (e != null && f != null) {
          c = new xg(b, c);
          d = new xg(a, new Me(d.x, d.y, c.width, c.height));
          var n = b.buffer.format;
          var h = a.buffer.format;
          b = b.buffer.premultiplied;
          var p = a.buffer.premultiplied;
          var m;
          var l;
          for (var q = 0, t = 0, u = 0, x = 0, L = d.height; x < L;) {
            l = x++;
            m = c.byteOffset + c.stride * l;
            l = d.byteOffset + d.stride * l;
            for (var w = 0, z = d.width; w < z;) {
              w++;
              var A = n;
              var y = b;
              if (y == null) {
                y = false;
              }
              if (A == null) {
                A = 0;
              }
              switch (A) {
                case 0:
                  q = (e[m] & 255) << 24 | (e[m + 1] & 255) << 16 | (e[m + 2] & 255) << 8 | e[m + 3] & 255;
                  break;
                case 1:
                  q = (e[m + 1] & 255) << 24 | (e[m + 2] & 255) << 16 | (e[m + 3] & 255) << 8 | e[m] & 255;
                  break;
                case 2:
                  q = (e[m + 2] & 255) << 24 | (e[m + 1] & 255) << 16 | (e[m] & 255) << 8 | e[m + 3] & 255;
              }
              if (y && (q & 255) != 0 && (q & 255) != 255) {
                R.unmult = 255 / (q & 255);
                q = (R.__clamp[Math.round((q >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((q >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((q >>> 8 & 255) * R.unmult)] & 255) << 8 | q & 255;
              }
              A = h;
              y = p;
              if (y == null) {
                y = false;
              }
              if (A == null) {
                A = 0;
              }
              switch (A) {
                case 0:
                  t = (f[l] & 255) << 24 | (f[l + 1] & 255) << 16 | (f[l + 2] & 255) << 8 | f[l + 3] & 255;
                  break;
                case 1:
                  t = (f[l + 1] & 255) << 24 | (f[l + 2] & 255) << 16 | (f[l + 3] & 255) << 8 | f[l] & 255;
                  break;
                case 2:
                  t = (f[l + 2] & 255) << 24 | (f[l + 1] & 255) << 16 | (f[l] & 255) << 8 | f[l + 3] & 255;
              }
              if (y && (t & 255) != 0 && (t & 255) != 255) {
                R.unmult = 255 / (t & 255);
                t = (R.__clamp[Math.round((t >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((t >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((t >>> 8 & 255) * R.unmult)] & 255) << 8 | t & 255;
              }
              switch (g) {
                case 0:
                  u = q >>> 24 & 255;
                  break;
                case 1:
                  u = q >>> 16 & 255;
                  break;
                case 2:
                  u = q >>> 8 & 255;
                  break;
                case 3:
                  u = q & 255;
              }
              switch (k) {
                case 0:
                  t = (u & 255) << 24 | (t >>> 16 & 255) << 16 | (t >>> 8 & 255) << 8 | t & 255;
                  break;
                case 1:
                  t = (t >>> 24 & 255) << 24 | (u & 255) << 16 | (t >>> 8 & 255) << 8 | t & 255;
                  break;
                case 2:
                  t = (t >>> 24 & 255) << 24 | (t >>> 16 & 255) << 16 | (u & 255) << 8 | t & 255;
                  break;
                case 3:
                  t = (t >>> 24 & 255) << 24 | (t >>> 16 & 255) << 16 | (t >>> 8 & 255) << 8 | u & 255;
              }
              A = h;
              y = p;
              if (y == null) {
                y = false;
              }
              if (A == null) {
                A = 0;
              }
              if (y) {
                if ((t & 255) == 0) {
                  if (t != 0) {
                    t = 0;
                  }
                } else if ((t & 255) != 255) {
                  R.a16 = R.__alpha16[t & 255];
                  t = ((t >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((t >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((t >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | t & 255;
                }
              }
              switch (A) {
                case 0:
                  f[l] = t >>> 24 & 255;
                  f[l + 1] = t >>> 16 & 255;
                  f[l + 2] = t >>> 8 & 255;
                  f[l + 3] = t & 255;
                  break;
                case 1:
                  f[l] = t & 255;
                  f[l + 1] = t >>> 24 & 255;
                  f[l + 2] = t >>> 16 & 255;
                  f[l + 3] = t >>> 8 & 255;
                  break;
                case 2:
                  f[l] = t >>> 8 & 255;
                  f[l + 1] = t >>> 16 & 255;
                  f[l + 2] = t >>> 24 & 255;
                  f[l + 3] = t & 255;
              }
              m += 4;
              l += 4;
            }
          }
          a.dirty = true;
          a.version++;
        }
      };
      Ac.copyPixels = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (a.width == b.width && a.height == b.height && c.width == b.width && c.height == b.height && c.x == 0 && c.y == 0 && d.x == 0 && d.y == 0 && e == null && f == null && k == 0 && a.get_format() == b.get_format()) {
          a.buffer.data.set(b.buffer.data);
        } else {
          var g = b.buffer.data;
          var n = a.buffer.data;
          if (g == null || n == null) {
            return;
          }
          c = new xg(b, c);
          var h = new Me(d.x, d.y, c.width, c.height);
          h = new xg(a, h);
          var p = b.buffer.format;
          var m = a.buffer.format;
          var l = 0;
          var t = 0;
          var q = b.buffer.premultiplied;
          var u = a.buffer.premultiplied;
          var x = b.buffer.bitsPerPixel / 8 | 0;
          var L = a.buffer.bitsPerPixel / 8 | 0;
          var w = e != null && e.get_transparent();
          var z = k || w && !a.get_transparent() || !k && !a.get_transparent() && b.get_transparent();
          if (w) {
            L = e.buffer.data;
            b = e.buffer.format;
            k = 0;
            e = new xg(e, new Me(c.x + (f == null ? 0 : f.x), c.y + (f == null ? 0 : f.y), c.width, c.height));
            h.clip(d.x | 0, d.y | 0, e.width, e.height);
            if (z) {
              z = 0;
              x = h.height;
              while (z < x) {
                w = z++;
                d = c.byteOffset + c.stride * w;
                f = h.byteOffset + h.stride * w;
                w = e.byteOffset + e.stride * w;
                C = 0;
                Ka = h.width;
                while (C < Ka) {
                  C++;
                  var A = p;
                  var y = q;
                  if (y == null) {
                    y = false;
                  }
                  if (A == null) {
                    A = 0;
                  }
                  switch (A) {
                    case 0:
                      l = (g[d] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d + 2] & 255) << 8 | g[d + 3] & 255;
                      break;
                    case 1:
                      l = (g[d + 1] & 255) << 24 | (g[d + 2] & 255) << 16 | (g[d + 3] & 255) << 8 | g[d] & 255;
                      break;
                    case 2:
                      l = (g[d + 2] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d] & 255) << 8 | g[d + 3] & 255;
                  }
                  if (y && (l & 255) != 0 && (l & 255) != 255) {
                    R.unmult = 255 / (l & 255);
                    l = (R.__clamp[Math.round((l >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((l >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((l >>> 8 & 255) * R.unmult)] & 255) << 8 | l & 255;
                  }
                  A = m;
                  y = u;
                  if (y == null) {
                    y = false;
                  }
                  if (A == null) {
                    A = 0;
                  }
                  switch (A) {
                    case 0:
                      t = (n[f] & 255) << 24 | (n[f + 1] & 255) << 16 | (n[f + 2] & 255) << 8 | n[f + 3] & 255;
                      break;
                    case 1:
                      t = (n[f + 1] & 255) << 24 | (n[f + 2] & 255) << 16 | (n[f + 3] & 255) << 8 | n[f] & 255;
                      break;
                    case 2:
                      t = (n[f + 2] & 255) << 24 | (n[f + 1] & 255) << 16 | (n[f] & 255) << 8 | n[f + 3] & 255;
                  }
                  if (y && (t & 255) != 0 && (t & 255) != 255) {
                    R.unmult = 255 / (t & 255);
                    t = (R.__clamp[Math.round((t >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((t >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((t >>> 8 & 255) * R.unmult)] & 255) << 8 | t & 255;
                  }
                  A = b;
                  y = false;
                  if (y == null) {
                    y = false;
                  }
                  if (A == null) {
                    A = 0;
                  }
                  switch (A) {
                    case 0:
                      k = (L[w] & 255) << 24 | (L[w + 1] & 255) << 16 | (L[w + 2] & 255) << 8 | L[w + 3] & 255;
                      break;
                    case 1:
                      k = (L[w + 1] & 255) << 24 | (L[w + 2] & 255) << 16 | (L[w + 3] & 255) << 8 | L[w] & 255;
                      break;
                    case 2:
                      k = (L[w + 2] & 255) << 24 | (L[w + 1] & 255) << 16 | (L[w] & 255) << 8 | L[w + 3] & 255;
                  }
                  if (y && (k & 255) != 0 && (k & 255) != 255) {
                    R.unmult = 255 / (k & 255);
                    k = (R.__clamp[Math.round((k >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((k >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((k >>> 8 & 255) * R.unmult)] & 255) << 8 | k & 255;
                  }
                  y = (k & 255) / 255 * ((l & 255) / 255);
                  if (y > 0) {
                    var H = (t & 255) / 255;
                    var D = 1 - y;
                    A = y + H * D;
                    F = R.__clamp[Math.round(((l >>> 24 & 255) * y + (t >>> 24 & 255) * H * D) / A)];
                    t = (F & 255) << 24 | (t >>> 16 & 255) << 16 | (t >>> 8 & 255) << 8 | t & 255;
                    F = R.__clamp[Math.round(((l >>> 16 & 255) * y + (t >>> 16 & 255) * H * D) / A)];
                    t = (t >>> 24 & 255) << 24 | (F & 255) << 16 | (t >>> 8 & 255) << 8 | t & 255;
                    y = R.__clamp[Math.round(((l >>> 8 & 255) * y + (t >>> 8 & 255) * H * D) / A)];
                    t = (t >>> 24 & 255) << 24 | (t >>> 16 & 255) << 16 | (y & 255) << 8 | t & 255;
                    A = R.__clamp[Math.round(A * 255)];
                    t = (t >>> 24 & 255) << 24 | (t >>> 16 & 255) << 16 | (t >>> 8 & 255) << 8 | A & 255;
                    A = m;
                    y = u;
                    if (y == null) {
                      y = false;
                    }
                    if (A == null) {
                      A = 0;
                    }
                    if (y) {
                      if ((t & 255) == 0) {
                        if (t != 0) {
                          t = 0;
                        }
                      } else if ((t & 255) != 255) {
                        R.a16 = R.__alpha16[t & 255];
                        t = ((t >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((t >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((t >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | t & 255;
                      }
                    }
                    switch (A) {
                      case 0:
                        n[f] = t >>> 24 & 255;
                        n[f + 1] = t >>> 16 & 255;
                        n[f + 2] = t >>> 8 & 255;
                        n[f + 3] = t & 255;
                        break;
                      case 1:
                        n[f] = t & 255;
                        n[f + 1] = t >>> 24 & 255;
                        n[f + 2] = t >>> 16 & 255;
                        n[f + 3] = t >>> 8 & 255;
                        break;
                      case 2:
                        n[f] = t >>> 8 & 255;
                        n[f + 1] = t >>> 16 & 255;
                        n[f + 2] = t >>> 24 & 255;
                        n[f + 3] = t & 255;
                    }
                  }
                  d += 4;
                  f += 4;
                  w += 4;
                }
              }
            } else {
              z = 0;
              x = h.height;
              while (z < x) {
                w = z++;
                d = c.byteOffset + c.stride * w;
                f = h.byteOffset + h.stride * w;
                w = e.byteOffset + e.stride * w;
                C = 0;
                Ka = h.width;
                while (C < Ka) {
                  C++;
                  A = p;
                  y = q;
                  if (y == null) {
                    y = false;
                  }
                  if (A == null) {
                    A = 0;
                  }
                  switch (A) {
                    case 0:
                      l = (g[d] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d + 2] & 255) << 8 | g[d + 3] & 255;
                      break;
                    case 1:
                      l = (g[d + 1] & 255) << 24 | (g[d + 2] & 255) << 16 | (g[d + 3] & 255) << 8 | g[d] & 255;
                      break;
                    case 2:
                      l = (g[d + 2] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d] & 255) << 8 | g[d + 3] & 255;
                  }
                  if (y && (l & 255) != 0 && (l & 255) != 255) {
                    R.unmult = 255 / (l & 255);
                    l = (R.__clamp[Math.round((l >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((l >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((l >>> 8 & 255) * R.unmult)] & 255) << 8 | l & 255;
                  }
                  A = b;
                  y = false;
                  if (y == null) {
                    y = false;
                  }
                  if (A == null) {
                    A = 0;
                  }
                  switch (A) {
                    case 0:
                      k = (L[w] & 255) << 24 | (L[w + 1] & 255) << 16 | (L[w + 2] & 255) << 8 | L[w + 3] & 255;
                      break;
                    case 1:
                      k = (L[w + 1] & 255) << 24 | (L[w + 2] & 255) << 16 | (L[w + 3] & 255) << 8 | L[w] & 255;
                      break;
                    case 2:
                      k = (L[w + 2] & 255) << 24 | (L[w + 1] & 255) << 16 | (L[w] & 255) << 8 | L[w + 3] & 255;
                  }
                  if (y && (k & 255) != 0 && (k & 255) != 255) {
                    R.unmult = 255 / (k & 255);
                    k = (R.__clamp[Math.round((k >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((k >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((k >>> 8 & 255) * R.unmult)] & 255) << 8 | k & 255;
                  }
                  F = Math.round((k & 255) / 255 * (l & 255));
                  l = (l >>> 24 & 255) << 24 | (l >>> 16 & 255) << 16 | (l >>> 8 & 255) << 8 | F & 255;
                  A = m;
                  y = u;
                  if (y == null) {
                    y = false;
                  }
                  if (A == null) {
                    A = 0;
                  }
                  if (y) {
                    if ((l & 255) == 0) {
                      if (l != 0) {
                        l = 0;
                      }
                    } else if ((l & 255) != 255) {
                      R.a16 = R.__alpha16[l & 255];
                      l = ((l >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((l >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((l >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | l & 255;
                    }
                  }
                  switch (A) {
                    case 0:
                      n[f] = l >>> 24 & 255;
                      n[f + 1] = l >>> 16 & 255;
                      n[f + 2] = l >>> 8 & 255;
                      n[f + 3] = l & 255;
                      break;
                    case 1:
                      n[f] = l & 255;
                      n[f + 1] = l >>> 24 & 255;
                      n[f + 2] = l >>> 16 & 255;
                      n[f + 3] = l >>> 8 & 255;
                      break;
                    case 2:
                      n[f] = l >>> 8 & 255;
                      n[f + 1] = l >>> 16 & 255;
                      n[f + 2] = l >>> 24 & 255;
                      n[f + 3] = l & 255;
                  }
                  d += 4;
                  f += 4;
                  w += 4;
                }
              }
            }
          } else if (z) {
            z = 0;
            x = h.height;
            while (z < x) {
              w = z++;
              d = c.byteOffset + c.stride * w;
              f = h.byteOffset + h.stride * w;
              for (var C = 0, Ka = h.width; C < Ka;) {
                C++;
                A = p;
                y = q;
                if (y == null) {
                  y = false;
                }
                if (A == null) {
                  A = 0;
                }
                switch (A) {
                  case 0:
                    l = (g[d] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d + 2] & 255) << 8 | g[d + 3] & 255;
                    break;
                  case 1:
                    l = (g[d + 1] & 255) << 24 | (g[d + 2] & 255) << 16 | (g[d + 3] & 255) << 8 | g[d] & 255;
                    break;
                  case 2:
                    l = (g[d + 2] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d] & 255) << 8 | g[d + 3] & 255;
                }
                if (y && (l & 255) != 0 && (l & 255) != 255) {
                  R.unmult = 255 / (l & 255);
                  l = (R.__clamp[Math.round((l >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((l >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((l >>> 8 & 255) * R.unmult)] & 255) << 8 | l & 255;
                }
                A = m;
                y = u;
                if (y == null) {
                  y = false;
                }
                if (A == null) {
                  A = 0;
                }
                switch (A) {
                  case 0:
                    t = (n[f] & 255) << 24 | (n[f + 1] & 255) << 16 | (n[f + 2] & 255) << 8 | n[f + 3] & 255;
                    break;
                  case 1:
                    t = (n[f + 1] & 255) << 24 | (n[f + 2] & 255) << 16 | (n[f + 3] & 255) << 8 | n[f] & 255;
                    break;
                  case 2:
                    t = (n[f + 2] & 255) << 24 | (n[f + 1] & 255) << 16 | (n[f] & 255) << 8 | n[f + 3] & 255;
                }
                if (y && (t & 255) != 0 && (t & 255) != 255) {
                  R.unmult = 255 / (t & 255);
                  t = (R.__clamp[Math.round((t >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((t >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((t >>> 8 & 255) * R.unmult)] & 255) << 8 | t & 255;
                }
                y = (l & 255) / 255;
                H = (t & 255) / 255;
                D = 1 - y;
                A = y + H * D;
                if (A == 0) {
                  t = 0;
                } else {
                  var F = R.__clamp[Math.round(((l >>> 24 & 255) * y + (t >>> 24 & 255) * H * D) / A)];
                  t = (F & 255) << 24 | (t >>> 16 & 255) << 16 | (t >>> 8 & 255) << 8 | t & 255;
                  F = R.__clamp[Math.round(((l >>> 16 & 255) * y + (t >>> 16 & 255) * H * D) / A)];
                  t = (t >>> 24 & 255) << 24 | (F & 255) << 16 | (t >>> 8 & 255) << 8 | t & 255;
                  y = R.__clamp[Math.round(((l >>> 8 & 255) * y + (t >>> 8 & 255) * H * D) / A)];
                  t = (t >>> 24 & 255) << 24 | (t >>> 16 & 255) << 16 | (y & 255) << 8 | t & 255;
                  A = R.__clamp[Math.round(A * 255)];
                  t = (t >>> 24 & 255) << 24 | (t >>> 16 & 255) << 16 | (t >>> 8 & 255) << 8 | A & 255;
                }
                A = m;
                y = u;
                if (y == null) {
                  y = false;
                }
                if (A == null) {
                  A = 0;
                }
                if (y) {
                  if ((t & 255) == 0) {
                    if (t != 0) {
                      t = 0;
                    }
                  } else if ((t & 255) != 255) {
                    R.a16 = R.__alpha16[t & 255];
                    t = ((t >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((t >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((t >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | t & 255;
                  }
                }
                switch (A) {
                  case 0:
                    n[f] = t >>> 24 & 255;
                    n[f + 1] = t >>> 16 & 255;
                    n[f + 2] = t >>> 8 & 255;
                    n[f + 3] = t & 255;
                    break;
                  case 1:
                    n[f] = t & 255;
                    n[f + 1] = t >>> 24 & 255;
                    n[f + 2] = t >>> 16 & 255;
                    n[f + 3] = t >>> 8 & 255;
                    break;
                  case 2:
                    n[f] = t >>> 8 & 255;
                    n[f + 1] = t >>> 16 & 255;
                    n[f + 2] = t >>> 24 & 255;
                    n[f + 3] = t & 255;
                }
                d += 4;
                f += 4;
              }
            }
          } else if (p == m && q == u && x == L) {
            z = 0;
            x = h.height;
            while (z < x) {
              w = z++;
              d = c.byteOffset + c.stride * w;
              f = h.byteOffset + h.stride * w;
              n.set(g.subarray(d, d + h.width * L), f);
            }
          } else {
            z = 0;
            x = h.height;
            while (z < x) {
              w = z++;
              d = c.byteOffset + c.stride * w;
              f = h.byteOffset + h.stride * w;
              C = 0;
              Ka = h.width;
              while (C < Ka) {
                C++;
                A = p;
                y = q;
                if (y == null) {
                  y = false;
                }
                if (A == null) {
                  A = 0;
                }
                switch (A) {
                  case 0:
                    l = (g[d] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d + 2] & 255) << 8 | g[d + 3] & 255;
                    break;
                  case 1:
                    l = (g[d + 1] & 255) << 24 | (g[d + 2] & 255) << 16 | (g[d + 3] & 255) << 8 | g[d] & 255;
                    break;
                  case 2:
                    l = (g[d + 2] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d] & 255) << 8 | g[d + 3] & 255;
                }
                if (y && (l & 255) != 0 && (l & 255) != 255) {
                  R.unmult = 255 / (l & 255);
                  l = (R.__clamp[Math.round((l >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((l >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((l >>> 8 & 255) * R.unmult)] & 255) << 8 | l & 255;
                }
                A = m;
                y = u;
                if (y == null) {
                  y = false;
                }
                if (A == null) {
                  A = 0;
                }
                if (y) {
                  if ((l & 255) == 0) {
                    if (l != 0) {
                      l = 0;
                    }
                  } else if ((l & 255) != 255) {
                    R.a16 = R.__alpha16[l & 255];
                    l = ((l >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((l >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((l >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | l & 255;
                  }
                }
                switch (A) {
                  case 0:
                    n[f] = l >>> 24 & 255;
                    n[f + 1] = l >>> 16 & 255;
                    n[f + 2] = l >>> 8 & 255;
                    n[f + 3] = l & 255;
                    break;
                  case 1:
                    n[f] = l & 255;
                    n[f + 1] = l >>> 24 & 255;
                    n[f + 2] = l >>> 16 & 255;
                    n[f + 3] = l >>> 8 & 255;
                    break;
                  case 2:
                    n[f] = l >>> 8 & 255;
                    n[f + 1] = l >>> 16 & 255;
                    n[f + 2] = l >>> 24 & 255;
                    n[f + 3] = l & 255;
                }
                d += 4;
                f += 4;
              }
            }
          }
        }
        a.dirty = true;
        a.version++;
      };
      Ac.fillRect = function (a, b, c, d) {
        switch (d) {
          case 1:
            c = (c >>> 16 & 255) << 24 | (c >>> 8 & 255) << 16 | (c & 255) << 8 | c >>> 24 & 255;
            break;
          case 2:
            c = (c >>> 8 & 255) << 24 | (c >>> 16 & 255) << 16 | (c >>> 24 & 255) << 8 | c & 255;
        }
        if (!a.get_transparent()) {
          c = (c >>> 24 & 255) << 24 | (c >>> 16 & 255) << 16 | (c >>> 8 & 255) << 8 | 255;
        }
        var e = a.buffer.data;
        if (e != null) {
          d = a.buffer.format;
          var f = a.buffer.premultiplied;
          if (f) {
            if ((c & 255) == 0) {
              if (c != 0) {
                c = 0;
              }
            } else if ((c & 255) != 255) {
              R.a16 = R.__alpha16[c & 255];
              c = ((c >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((c >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((c >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | c & 255;
            }
          }
          b = new xg(a, b);
          var k;
          for (var g = 0, n = b.height; g < n;) {
            f = g++;
            k = b.byteOffset + b.stride * f;
            for (var h = 0, p = b.width; h < p;) {
              f = h++;
              var m = k + f * 4;
              var l = d;
              f = false;
              if (f == null) {
                f = false;
              }
              if (l == null) {
                l = 0;
              }
              if (f) {
                if ((c & 255) == 0) {
                  if (c != 0) {
                    c = 0;
                  }
                } else if ((c & 255) != 255) {
                  R.a16 = R.__alpha16[c & 255];
                  c = ((c >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((c >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((c >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | c & 255;
                }
              }
              switch (l) {
                case 0:
                  e[m] = c >>> 24 & 255;
                  e[m + 1] = c >>> 16 & 255;
                  e[m + 2] = c >>> 8 & 255;
                  e[m + 3] = c & 255;
                  break;
                case 1:
                  e[m] = c & 255;
                  e[m + 1] = c >>> 24 & 255;
                  e[m + 2] = c >>> 16 & 255;
                  e[m + 3] = c >>> 8 & 255;
                  break;
                case 2:
                  e[m] = c >>> 8 & 255;
                  e[m + 1] = c >>> 16 & 255;
                  e[m + 2] = c >>> 24 & 255;
                  e[m + 3] = c & 255;
              }
            }
          }
          a.dirty = true;
          a.version++;
        }
      };
      Ac.gaussianBlur = function (a, b, c, d, e, f, k, g, n) {
        if (k == null) {
          k = 1;
        }
        if (f == null) {
          f = 4;
        }
        if (e == null) {
          e = 4;
        }
        if (g = a.get_premultiplied()) {
          a.set_premultiplied(false);
        }
        ue.blur(a, b, c, d, e, f, k);
        a.dirty = true;
        a.version++;
        if (g) {
          a.set_premultiplied(true);
        }
        return a;
      };
      Ac.getPixel32 = function (a, b, c, d) {
        var e = 0;
        var f = a.buffer.data;
        b = (c + a.offsetY) * 4 * a.buffer.width + (b + a.offsetX) * 4;
        c = a.buffer.format;
        a = a.buffer.premultiplied;
        if (a == null) {
          a = false;
        }
        if (c == null) {
          c = 0;
        }
        switch (c) {
          case 0:
            e = (f[b] & 255) << 24 | (f[b + 1] & 255) << 16 | (f[b + 2] & 255) << 8 | f[b + 3] & 255;
            break;
          case 1:
            e = (f[b + 1] & 255) << 24 | (f[b + 2] & 255) << 16 | (f[b + 3] & 255) << 8 | f[b] & 255;
            break;
          case 2:
            e = (f[b + 2] & 255) << 24 | (f[b + 1] & 255) << 16 | (f[b] & 255) << 8 | f[b + 3] & 255;
        }
        if (a && (e & 255) != 0 && (e & 255) != 255) {
          R.unmult = 255 / (e & 255);
          e = (R.__clamp[Math.round((e >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((e >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((e >>> 8 & 255) * R.unmult)] & 255) << 8 | e & 255;
        }
        switch (d) {
          case 1:
            return (e & 255) << 24 | (e >>> 24 & 255) << 16 | (e >>> 16 & 255) << 8 | e >>> 8 & 255;
          case 2:
            return (e >>> 8 & 255) << 24 | (e >>> 16 & 255) << 16 | (e >>> 24 & 255) << 8 | e & 255;
          default:
            return e;
        }
      };
      Ac.multiplyAlpha = function (a) {
        var b = a.buffer.data;
        if (b != null && a.buffer.transparent) {
          var c = a.buffer.format;
          for (var d = 0, e = 0, f = b.length / 4 | 0; e < f;) {
            var k = e++;
            var g = k * 4;
            var n = c;
            var h = false;
            if (h == null) {
              h = false;
            }
            if (n == null) {
              n = 0;
            }
            switch (n) {
              case 0:
                d = (b[g] & 255) << 24 | (b[g + 1] & 255) << 16 | (b[g + 2] & 255) << 8 | b[g + 3] & 255;
                break;
              case 1:
                d = (b[g + 1] & 255) << 24 | (b[g + 2] & 255) << 16 | (b[g + 3] & 255) << 8 | b[g] & 255;
                break;
              case 2:
                d = (b[g + 2] & 255) << 24 | (b[g + 1] & 255) << 16 | (b[g] & 255) << 8 | b[g + 3] & 255;
            }
            if (h && (d & 255) != 0 && (d & 255) != 255) {
              R.unmult = 255 / (d & 255);
              d = (R.__clamp[Math.round((d >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((d >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((d >>> 8 & 255) * R.unmult)] & 255) << 8 | d & 255;
            }
            k *= 4;
            g = c;
            n = true;
            if (n == null) {
              n = false;
            }
            if (g == null) {
              g = 0;
            }
            if (n) {
              if ((d & 255) == 0) {
                if (d != 0) {
                  d = 0;
                }
              } else if ((d & 255) != 255) {
                R.a16 = R.__alpha16[d & 255];
                d = ((d >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | d & 255;
              }
            }
            switch (g) {
              case 0:
                b[k] = d >>> 24 & 255;
                b[k + 1] = d >>> 16 & 255;
                b[k + 2] = d >>> 8 & 255;
                b[k + 3] = d & 255;
                break;
              case 1:
                b[k] = d & 255;
                b[k + 1] = d >>> 24 & 255;
                b[k + 2] = d >>> 16 & 255;
                b[k + 3] = d >>> 8 & 255;
                break;
              case 2:
                b[k] = d >>> 8 & 255;
                b[k + 1] = d >>> 16 & 255;
                b[k + 2] = d >>> 24 & 255;
                b[k + 3] = d & 255;
            }
          }
          a.buffer.premultiplied = true;
          a.dirty = true;
          a.version++;
        }
      };
      Ac.setFormat = function (a, b) {
        var c = a.buffer.data;
        if (c != null) {
          var d = c.length / 4 | 0;
          switch (a.get_format()) {
            case 0:
              var e = 0;
              var f = 1;
              var k = 2;
              var g = 3;
              break;
            case 1:
              e = 1;
              f = 2;
              k = 3;
              g = 0;
              break;
            case 2:
              e = 2;
              f = 1;
              k = 0;
              g = 3;
          }
          switch (b) {
            case 0:
              var n = 0;
              var h = 1;
              var p = 2;
              var m = 3;
              break;
            case 1:
              n = 1;
              h = 2;
              p = 3;
              m = 0;
              break;
            case 2:
              n = 2;
              h = 1;
              p = 0;
              m = 3;
          }
          for (var l = 0; l < d;) {
            var t = l++ * 4;
            var q = c[t + e];
            var u = c[t + f];
            var x = c[t + k];
            var L = c[t + g];
            c[t + n] = q;
            c[t + h] = u;
            c[t + p] = x;
            c[t + m] = L;
          }
          a.buffer.format = b;
          a.dirty = true;
          a.version++;
        }
      };
      Ac.setPixel = function (a, b, c, d, e) {
        switch (e) {
          case 1:
            d = (d >>> 16 & 255) << 24 | (d >>> 8 & 255) << 16 | (d & 255) << 8 | d >>> 24 & 255;
            break;
          case 2:
            d = (d >>> 8 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 24 & 255) << 8 | d & 255;
        }
        var f = 0;
        var k = a.buffer.data;
        var g = (c + a.offsetY) * 4 * a.buffer.width + (b + a.offsetX) * 4;
        e = a.buffer.format;
        var n = a.buffer.premultiplied;
        if (n == null) {
          n = false;
        }
        if (e == null) {
          e = 0;
        }
        switch (e) {
          case 0:
            f = (k[g] & 255) << 24 | (k[g + 1] & 255) << 16 | (k[g + 2] & 255) << 8 | k[g + 3] & 255;
            break;
          case 1:
            f = (k[g + 1] & 255) << 24 | (k[g + 2] & 255) << 16 | (k[g + 3] & 255) << 8 | k[g] & 255;
            break;
          case 2:
            f = (k[g + 2] & 255) << 24 | (k[g + 1] & 255) << 16 | (k[g] & 255) << 8 | k[g + 3] & 255;
        }
        if (n && (f & 255) != 0 && (f & 255) != 255) {
          R.unmult = 255 / (f & 255);
          f = (R.__clamp[Math.round((f >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((f >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((f >>> 8 & 255) * R.unmult)] & 255) << 8 | f & 255;
        }
        d = (d >>> 24 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 8 & 255) << 8 | f & 255;
        k = a.buffer.data;
        g = (c + a.offsetY) * 4 * a.buffer.width + (b + a.offsetX) * 4;
        e = a.buffer.format;
        n = a.buffer.premultiplied;
        if (n == null) {
          n = false;
        }
        if (e == null) {
          e = 0;
        }
        if (n) {
          if ((d & 255) == 0) {
            if (d != 0) {
              d = 0;
            }
          } else if ((d & 255) != 255) {
            R.a16 = R.__alpha16[d & 255];
            d = ((d >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | d & 255;
          }
        }
        switch (e) {
          case 0:
            k[g] = d >>> 24 & 255;
            k[g + 1] = d >>> 16 & 255;
            k[g + 2] = d >>> 8 & 255;
            k[g + 3] = d & 255;
            break;
          case 1:
            k[g] = d & 255;
            k[g + 1] = d >>> 24 & 255;
            k[g + 2] = d >>> 16 & 255;
            k[g + 3] = d >>> 8 & 255;
            break;
          case 2:
            k[g] = d >>> 8 & 255;
            k[g + 1] = d >>> 16 & 255;
            k[g + 2] = d >>> 24 & 255;
            k[g + 3] = d & 255;
        }
        a.dirty = true;
        a.version++;
      };
      Ac.setPixel32 = function (a, b, c, d, e) {
        switch (e) {
          case 1:
            d = (d >>> 16 & 255) << 24 | (d >>> 8 & 255) << 16 | (d & 255) << 8 | d >>> 24 & 255;
            break;
          case 2:
            d = (d >>> 8 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 24 & 255) << 8 | d & 255;
        }
        if (!a.get_transparent()) {
          d = (d >>> 24 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 8 & 255) << 8 | 255;
        }
        var f = a.buffer.data;
        b = (c + a.offsetY) * 4 * a.buffer.width + (b + a.offsetX) * 4;
        e = a.buffer.format;
        c = a.buffer.premultiplied;
        if (c == null) {
          c = false;
        }
        if (e == null) {
          e = 0;
        }
        if (c) {
          if ((d & 255) == 0) {
            if (d != 0) {
              d = 0;
            }
          } else if ((d & 255) != 255) {
            R.a16 = R.__alpha16[d & 255];
            d = ((d >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | d & 255;
          }
        }
        switch (e) {
          case 0:
            f[b] = d >>> 24 & 255;
            f[b + 1] = d >>> 16 & 255;
            f[b + 2] = d >>> 8 & 255;
            f[b + 3] = d & 255;
            break;
          case 1:
            f[b] = d & 255;
            f[b + 1] = d >>> 24 & 255;
            f[b + 2] = d >>> 16 & 255;
            f[b + 3] = d >>> 8 & 255;
            break;
          case 2:
            f[b] = d >>> 8 & 255;
            f[b + 1] = d >>> 16 & 255;
            f[b + 2] = d >>> 24 & 255;
            f[b + 3] = d & 255;
        }
        a.dirty = true;
        a.version++;
      };
      Ac.unmultiplyAlpha = function (a) {
        var b = a.buffer.data;
        if (b != null) {
          var c = a.buffer.format;
          for (var d = 0, e = 0, f = b.length / 4 | 0; e < f;) {
            var k = e++;
            var g = k * 4;
            var n = c;
            var h = true;
            if (h == null) {
              h = false;
            }
            if (n == null) {
              n = 0;
            }
            switch (n) {
              case 0:
                d = (b[g] & 255) << 24 | (b[g + 1] & 255) << 16 | (b[g + 2] & 255) << 8 | b[g + 3] & 255;
                break;
              case 1:
                d = (b[g + 1] & 255) << 24 | (b[g + 2] & 255) << 16 | (b[g + 3] & 255) << 8 | b[g] & 255;
                break;
              case 2:
                d = (b[g + 2] & 255) << 24 | (b[g + 1] & 255) << 16 | (b[g] & 255) << 8 | b[g + 3] & 255;
            }
            if (h && (d & 255) != 0 && (d & 255) != 255) {
              R.unmult = 255 / (d & 255);
              d = (R.__clamp[Math.round((d >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((d >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((d >>> 8 & 255) * R.unmult)] & 255) << 8 | d & 255;
            }
            k *= 4;
            g = c;
            n = false;
            if (n == null) {
              n = false;
            }
            if (g == null) {
              g = 0;
            }
            if (n) {
              if ((d & 255) == 0) {
                if (d != 0) {
                  d = 0;
                }
              } else if ((d & 255) != 255) {
                R.a16 = R.__alpha16[d & 255];
                d = ((d >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | d & 255;
              }
            }
            switch (g) {
              case 0:
                b[k] = d >>> 24 & 255;
                b[k + 1] = d >>> 16 & 255;
                b[k + 2] = d >>> 8 & 255;
                b[k + 3] = d & 255;
                break;
              case 1:
                b[k] = d & 255;
                b[k + 1] = d >>> 24 & 255;
                b[k + 2] = d >>> 16 & 255;
                b[k + 3] = d >>> 8 & 255;
                break;
              case 2:
                b[k] = d >>> 8 & 255;
                b[k + 1] = d >>> 16 & 255;
                b[k + 2] = d >>> 24 & 255;
                b[k + 3] = d & 255;
            }
          }
          a.buffer.premultiplied = false;
          a.dirty = true;
          a.version++;
        }
      };
      function xg(a, b) {
        this.image = a;
        if (b == null) {
          this.rect = a.get_rect();
        } else {
          if (b.x < 0) {
            b.x = 0;
          }
          if (b.y < 0) {
            b.y = 0;
          }
          if (b.x + b.width > a.width) {
            b.width = a.width - b.x;
          }
          if (b.y + b.height > a.height) {
            b.height = a.height - b.y;
          }
          if (b.width < 0) {
            b.width = 0;
          }
          if (b.height < 0) {
            b.height = 0;
          }
          this.rect = b;
        }
        this.stride = a.buffer.get_stride();
        this.__update();
      }
      h["lime._internal.graphics._ImageDataUtil.ImageDataView"] = xg;
      xg.__name__ = "lime._internal.graphics._ImageDataUtil.ImageDataView";
      xg.prototype = {
        clip: function (a, b, c, d) {
          if (this.tempRect == null) {
            this.tempRect = new Me();
          }
          this.tempRect.setTo(a, b, c, d);
          this.rect.intersection(this.tempRect, this.rect);
          this.__update();
        },
        __update: function () {
          this.x = Math.ceil(this.rect.x);
          this.y = Math.ceil(this.rect.y);
          this.width = Math.floor(this.rect.width);
          this.height = Math.floor(this.rect.height);
          this.byteOffset = this.stride * (this.y + this.image.offsetY) + (this.x + this.image.offsetX) * 4;
        },
        __class__: xg
      };
      function ue() {}
      h["lime._internal.graphics.StackBlur"] = ue;
      ue.__name__ = "lime._internal.graphics.StackBlur";
      ue.blur = function (a, b, c, d, e, f, k) {
        a.copyPixels(b, c, d);
        ue.__stackBlurCanvasRGBA(a, c.width | 0, c.height | 0, e, f, k);
      };
      ue.__stackBlurCanvasRGBA = function (a, b, c, d, e, f) {
        d = Math.round(d) >> 1;
        e = Math.round(e) >> 1;
        if (ue.MUL_TABLE != null && (d >= ue.MUL_TABLE.length && (d = ue.MUL_TABLE.length - 1), e >= ue.MUL_TABLE.length && (e = ue.MUL_TABLE.length - 1), !(d < 0) && !(e < 0))) {
          if (f < 1) {
            f = 1;
          }
          if (f > 3) {
            f = 3;
          }
          a = a.get_data();
          var k;
          var g = d + d + 1;
          var n = e + e + 1;
          var h = b - 1;
          var p = c - 1;
          var m = d + 1;
          var l = e + 1;
          var t = new si();
          var q = t;
          var u = 1;
          for (var x = g; u < x;) {
            u++;
            q = q.n = new si();
          }
          q.n = t;
          var L = g = new si();
          u = 1;
          for (x = n; u < x;) {
            u++;
            L = L.n = new si();
          }
          L.n = g;
          var w = ue.MUL_TABLE[d];
          var A = ue.SHG_TABLE[d];
          var y = ue.MUL_TABLE[e];
          var z = ue.SHG_TABLE[e];
          for (; f > 0;) {
            --f;
            var H = k = 0;
            var D = w;
            var C = A;
            var Ka = c;
            do {
              var F = a[k];
              n = m * F;
              var B = a[k + 1];
              var v = m * B;
              var G = a[k + 2];
              var K = m * G;
              u = a[k + 3];
              var ha = m * u;
              q = t;
              L = m;
              do {
                q.r = F;
                q.g = B;
                q.b = G;
                q.a = u;
                q = q.n;
              } while (--L > -1);
              u = 1;
              for (x = m; u < x;) {
                L = u++;
                L = k + ((h < L ? h : L) << 2);
                n += q.r = a[L];
                v += q.g = a[L + 1];
                K += q.b = a[L + 2];
                ha += q.a = a[L + 3];
                q = q.n;
              }
              x = t;
              q = 0;
              for (u = b; q < u;) {
                L = q++;
                a[k++] = n * D >>> C;
                a[k++] = v * D >>> C;
                a[k++] = K * D >>> C;
                a[k++] = ha * D >>> C;
                L = L + d + 1;
                L = H + (L < h ? L : h) << 2;
                n -= x.r - (x.r = a[L]);
                v -= x.g - (x.g = a[L + 1]);
                K -= x.b - (x.b = a[L + 2]);
                ha -= x.a - (x.a = a[L + 3]);
                x = x.n;
              }
              H += b;
            } while (--Ka > 0);
            D = y;
            C = z;
            Ka = 0;
            for (H = b; Ka < H;) {
              q = Ka++;
              k = q << 2;
              F = a[k];
              n = l * F;
              B = a[k + 1];
              v = l * B;
              G = a[k + 2];
              K = l * G;
              u = a[k + 3];
              ha = l * u;
              L = g;
              k = 0;
              for (x = l; k < x;) {
                k++;
                L.r = F;
                L.g = B;
                L.b = G;
                L.a = u;
                L = L.n;
              }
              u = b;
              x = 1;
              for (F = e + 1; x < F;) {
                B = x++;
                k = u + q << 2;
                n += L.r = a[k];
                v += L.g = a[k + 1];
                K += L.b = a[k + 2];
                ha += L.a = a[k + 3];
                L = L.n;
                if (B < p) {
                  u += b;
                }
              }
              k = q;
              x = g;
              if (f > 0) {
                F = 0;
                B = c;
                while (F < B) {
                  G = F++;
                  L = k << 2;
                  u = ha * D >>> C;
                  a[L + 3] = u;
                  if (u > 0) {
                    a[L] = n * D >>> C;
                    a[L + 1] = v * D >>> C;
                    a[L + 2] = K * D >>> C;
                  } else {
                    a[L] = a[L + 1] = a[L + 2] = 0;
                  }
                  L = G + l;
                  L = q + (L < p ? L : p) * b << 2;
                  n -= x.r - (x.r = a[L]);
                  v -= x.g - (x.g = a[L + 1]);
                  K -= x.b - (x.b = a[L + 2]);
                  ha -= x.a - (x.a = a[L + 3]);
                  x = x.n;
                  k += b;
                }
              } else {
                for (var la = 0, ya = c; la < ya;) {
                  var M = la++;
                  L = k << 2;
                  u = ha * D >>> C;
                  a[L + 3] = u;
                  if (u > 0) {
                    u = 255 / u;
                    F = (n * D >>> C) * u | 0;
                    B = (v * D >>> C) * u | 0;
                    G = (K * D >>> C) * u | 0;
                    a[L] = F > 255 ? 255 : F;
                    a[L + 1] = B > 255 ? 255 : B;
                    a[L + 2] = G > 255 ? 255 : G;
                  } else {
                    a[L] = a[L + 1] = a[L + 2] = 0;
                  }
                  L = M + l;
                  L = q + (L < p ? L : p) * b << 2;
                  n -= x.r - (x.r = a[L]);
                  v -= x.g - (x.g = a[L + 1]);
                  K -= x.b - (x.b = a[L + 2]);
                  ha -= x.a - (x.a = a[L + 3]);
                  x = x.n;
                  k += b;
                }
              }
            }
          }
        }
      };
      function si() {
        this.a = this.b = this.g = this.r = 0;
        this.n = null;
      }
      h["lime._internal.graphics.BlurStack"] = si;
      si.__name__ = "lime._internal.graphics.BlurStack";
      si.prototype = {
        __class__: si
      };
      function Cb(a, b) {
        if (b == null) {
          b = false;
        }
        if (a != null) {
          if (b) {
            b = new Md();
            b.future = this;
            fe.queue({
              promise: b,
              work: a
            });
          } else {
            try {
              this.value = a();
              this.isComplete = true;
            } catch (c) {
              Na.lastError = c;
              this.error = K.caught(c).unwrap();
              this.isError = true;
            }
          }
        }
      }
      h["lime.app.Future"] = Cb;
      Cb.__name__ = "lime.app.Future";
      Cb.withError = function (a) {
        var b = new Cb();
        b.isError = true;
        b.error = a;
        return b;
      };
      Cb.withValue = function (a) {
        var b = new Cb();
        b.isComplete = true;
        b.value = a;
        return b;
      };
      Cb.prototype = {
        onComplete: function (a) {
          if (a != null) {
            if (this.isComplete) {
              a(this.value);
            } else if (!this.isError) {
              if (this.__completeListeners == null) {
                this.__completeListeners = [];
              }
              this.__completeListeners.push(a);
            }
          }
          return this;
        },
        onError: function (a) {
          if (a != null) {
            if (this.isError) {
              a(this.error);
            } else if (!this.isComplete) {
              if (this.__errorListeners == null) {
                this.__errorListeners = [];
              }
              this.__errorListeners.push(a);
            }
          }
          return this;
        },
        onProgress: function (a) {
          if (a != null) {
            if (this.__progressListeners == null) {
              this.__progressListeners = [];
            }
            this.__progressListeners.push(a);
          }
          return this;
        },
        then: function (a) {
          if (this.isComplete) {
            return a(this.value);
          }
          if (this.isError) {
            var b = new Cb();
            b.isError = true;
            b.error = this.error;
            return b;
          }
          var c = new Md();
          this.onError(l(c, c.error));
          this.onProgress(l(c, c.progress));
          this.onComplete(function (b) {
            b = a(b);
            b.onError(l(c, c.error));
            b.onComplete(l(c, c.complete));
          });
          return c.future;
        },
        __class__: Cb
      };
      function fe() {}
      h["lime.app._Future.FutureWork"] = fe;
      fe.__name__ = "lime.app._Future.FutureWork";
      fe.queue = function (a) {
        if (fe.threadPool == null) {
          fe.threadPool = new oo();
          fe.threadPool.doWork.add(fe.threadPool_doWork);
          fe.threadPool.onComplete.add(fe.threadPool_onComplete);
          fe.threadPool.onError.add(fe.threadPool_onError);
        }
        fe.threadPool.queue(a);
      };
      fe.threadPool_doWork = function (a) {
        try {
          var b = a.work();
          fe.threadPool.sendComplete({
            promise: a.promise,
            result: b
          });
        } catch (c) {
          Na.lastError = c;
          b = K.caught(c).unwrap();
          fe.threadPool.sendError({
            promise: a.promise,
            error: b
          });
        }
      };
      fe.threadPool_onComplete = function (a) {
        a.promise.complete(a.result);
      };
      fe.threadPool_onError = function (a) {
        a.promise.error(a.error);
      };
      function Md() {
        this.future = new Cb();
      }
      h["lime.app.Promise"] = Md;
      Md.__name__ = "lime.app.Promise";
      Md.prototype = {
        complete: function (a) {
          if (!this.future.isError && (this.future.isComplete = true, this.future.value = a, this.future.__completeListeners != null)) {
            for (var b = 0, c = this.future.__completeListeners; b < c.length;) {
              var d = c[b];
              ++b;
              d(a);
            }
            this.future.__completeListeners = null;
          }
          return this;
        },
        completeWith: function (a) {
          a.onComplete(l(this, this.complete));
          a.onError(l(this, this.error));
          a.onProgress(l(this, this.progress));
          return this;
        },
        error: function (a) {
          if (!this.future.isComplete && (this.future.isError = true, this.future.error = a, this.future.__errorListeners != null)) {
            for (var b = 0, c = this.future.__errorListeners; b < c.length;) {
              var d = c[b];
              ++b;
              d(a);
            }
            this.future.__errorListeners = null;
          }
          return this;
        },
        progress: function (a, b) {
          if (!this.future.isError && !this.future.isComplete && this.future.__progressListeners != null) {
            for (var c = 0, d = this.future.__progressListeners; c < d.length;) {
              var e = d[c];
              ++c;
              e(a, b);
            }
          }
          return this;
        },
        __class__: Md
      };
      function ti() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Dynamic_Void"] = ti;
      ti.__name__ = "lime.app._Event_Dynamic_Void";
      ti.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: ti
      };
      function po() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Float_Float_Float_Void"] = po;
      po.__name__ = "lime.app._Event_Float_Float_Float_Void";
      po.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b, c) {
          this.canceled = false;
          for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled););
        },
        __class__: po
      };
      function qo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Float_Float_Int_Void"] = qo;
      qo.__name__ = "lime.app._Event_Float_Float_Int_Void";
      qo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b, c) {
          this.canceled = false;
          for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled););
        },
        __class__: qo
      };
      function Hj() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Float_Float_Void"] = Hj;
      Hj.__name__ = "lime.app._Event_Float_Float_Void";
      Hj.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: Hj
      };
      function ro() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Float_Float_lime_ui_MouseButton_Void"] = ro;
      ro.__name__ = "lime.app._Event_Float_Float_lime_ui_MouseButton_Void";
      ro.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b, c) {
          this.canceled = false;
          for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled););
        },
        __class__: ro
      };
      function so() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void"] = so;
      so.__name__ = "lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void";
      so.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b, c) {
          this.canceled = false;
          for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled););
        },
        __class__: so
      };
      function to() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Int_Float_Float_Void"] = to;
      to.__name__ = "lime.app._Event_Int_Float_Float_Void";
      to.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        __class__: to
      };
      function uo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Int_Float_Void"] = uo;
      uo.__name__ = "lime.app._Event_Int_Float_Void";
      uo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: uo
      };
      function Wl() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Int_Int_Void"] = Wl;
      Wl.__name__ = "lime.app._Event_Int_Int_Void";
      Wl.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: Wl
      };
      function ih() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Int_Void"] = ih;
      ih.__name__ = "lime.app._Event_Int_Void";
      ih.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: ih
      };
      function vo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Int_lime_ui_JoystickHatPosition_Void"] = vo;
      vo.__name__ = "lime.app._Event_Int_lime_ui_JoystickHatPosition_Void";
      vo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        __class__: vo
      };
      function wo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_String_Int_Int_Void"] = wo;
      wo.__name__ = "lime.app._Event_String_Int_Int_Void";
      wo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        __class__: wo
      };
      function Ij() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_String_Void"] = Ij;
      Ij.__name__ = "lime.app._Event_String_Void";
      Ij.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        has: function (a) {
          for (var b = 0, c = this.__listeners; b < c.length;) {
            var d = c[b];
            ++b;
            if (d == a) {
              return true;
            }
          }
          return false;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: Ij
      };
      function Uc() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Void_Void"] = Uc;
      Uc.__name__ = "lime.app._Event_Void_Void";
      Uc.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        has: function (a) {
          for (var b = 0, c = this.__listeners; b < c.length;) {
            var d = c[b];
            ++b;
            if (d == a) {
              return true;
            }
          }
          return false;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function () {
          this.canceled = false;
          for (var a = this.__listeners, b = this.__repeat, c = 0; c < a.length && (a[c](), b[c] ? ++c : this.remove(a[c]), !this.canceled););
        },
        __class__: Uc
      };
      function Xl() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_graphics_RenderContext_Void"] = Xl;
      Xl.__name__ = "lime.app._Event_lime_graphics_RenderContext_Void";
      Xl.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: Xl
      };
      function xo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_ui_GamepadAxis_Float_Void"] = xo;
      xo.__name__ = "lime.app._Event_lime_ui_GamepadAxis_Float_Void";
      xo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: xo
      };
      function Yl() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_ui_GamepadButton_Void"] = Yl;
      Yl.__name__ = "lime.app._Event_lime_ui_GamepadButton_Void";
      Yl.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: Yl
      };
      function yo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_ui_Gamepad_Void"] = yo;
      yo.__name__ = "lime.app._Event_lime_ui_Gamepad_Void";
      yo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: yo
      };
      function zo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_ui_Joystick_Void"] = zo;
      zo.__name__ = "lime.app._Event_lime_ui_Joystick_Void";
      zo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: zo
      };
      function Zl() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"] = Zl;
      Zl.__name__ = "lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void";
      Zl.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: Zl
      };
      function ui() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_ui_Touch_Void"] = ui;
      ui.__name__ = "lime.app._Event_lime_ui_Touch_Void";
      ui.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: ui
      };
      function jn() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_ui_Window_Void"] = jn;
      jn.__name__ = "lime.app._Event_lime_ui_Window_Void";
      jn.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: jn
      };
      function Eb(a, b, c, d, e, f, k) {
        if (e == null) {
          e = -1;
        }
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        this.offsetX = b;
        this.offsetY = c;
        this.width = d;
        this.height = e;
        this.version = 0;
        if (k == null) {
          k = Id.CANVAS;
        }
        this.type = k;
        if (a == null) {
          if (d > 0 && e > 0) {
            switch (this.type._hx_index) {
              case 0:
                this.buffer = new vg(null, d, e);
                Xa.createCanvas(this, d, e);
                if (f != null && f != 0) {
                  this.fillRect(new Me(0, 0, d, e), f);
                }
                break;
              case 1:
                a = d * e * 4;
                a = a != null ? new Uint8Array(a) : null;
                this.buffer = new vg(a, d, e);
                if (f != null && f != 0) {
                  this.fillRect(new Me(0, 0, d, e), f);
                }
            }
          }
        } else {
          this.__fromImageBuffer(a);
        }
      }
      h["lime.graphics.Image"] = Eb;
      Eb.__name__ = "lime.graphics.Image";
      Eb.fromCanvas = function (a) {
        if (a == null) {
          return null;
        }
        var b = new vg(null, a.width, a.height);
        b.set_src(a);
        a = new Eb(b);
        a.type = Id.CANVAS;
        return a;
      };
      Eb.fromFile = function (a) {
        if (a == null) {
          return null;
        }
        var b = new Eb();
        if (b.__fromFile(a)) {
          return b;
        } else {
          return null;
        }
      };
      Eb.loadFromBase64 = function (a, b) {
        if (a == null || b == null) {
          return Cb.withValue(null);
        } else {
          return Sa.loadImage("data:" + b + ";base64," + a);
        }
      };
      Eb.loadFromBytes = function (a) {
        if (a == null) {
          return Cb.withValue(null);
        }
        if (Eb.__isPNG(a)) {
          var b = "image/png";
        } else if (Eb.__isJPG(a)) {
          b = "image/jpeg";
        } else if (Eb.__isGIF(a)) {
          b = "image/gif";
        } else if (Eb.__isWebP(a)) {
          b = "image/webp";
        } else {
          return Cb.withValue(null);
        }
        return Sa.loadImageFromBytes(a, b);
      };
      Eb.loadFromFile = function (a) {
        if (a == null) {
          return Cb.withValue(null);
        } else {
          return Sa.loadImage(a);
        }
      };
      Eb.__isGIF = function (a) {
        if (a == null || a.length < 6) {
          return false;
        }
        a = a.getString(0, 6);
        if (a != "GIF87a") {
          return a == "GIF89a";
        } else {
          return true;
        }
      };
      Eb.__isJPG = function (a) {
        if (a == null || a.length < 4) {
          return false;
        } else if (a.b[0] == 255 && a.b[1] == 216 && a.b[a.length - 2] == 255) {
          return a.b[a.length - 1] == 217;
        } else {
          return false;
        }
      };
      Eb.__isPNG = function (a) {
        if (a == null || a.length < 8) {
          return false;
        } else if (a.b[0] == 137 && a.b[1] == 80 && a.b[2] == 78 && a.b[3] == 71 && a.b[4] == 13 && a.b[5] == 10 && a.b[6] == 26) {
          return a.b[7] == 10;
        } else {
          return false;
        }
      };
      Eb.__isWebP = function (a) {
        if (a == null || a.length < 16) {
          return false;
        } else if (a.getString(0, 4) == "RIFF") {
          return a.getString(8, 4) == "WEBP";
        } else {
          return false;
        }
      };
      Eb.prototype = {
        clone: function () {
          if (this.buffer != null) {
            if (this.type == Id.CANVAS) {
              Xa.convertToCanvas(this);
            } else {
              Xa.convertToData(this);
            }
            var a = new Eb(this.buffer.clone(), this.offsetX, this.offsetY, this.width, this.height, null, this.type);
            a.version = this.version;
            return a;
          }
          return new Eb(null, this.offsetX, this.offsetY, this.width, this.height, null, this.type);
        },
        colorTransform: function (a, b) {
          a = this.__clipRect(a);
          if (this.buffer != null && a != null) {
            switch (this.type._hx_index) {
              case 0:
                Xa.colorTransform(this, a, b);
                break;
              case 1:
                Xa.convertToData(this);
                Ac.colorTransform(this, a, b);
                break;
              case 2:
                a.offset(this.offsetX, this.offsetY);
                this.buffer.__srcBitmapData.colorTransform(a.__toFlashRectangle(), qd.__toFlashColorTransform(b));
            }
          }
        },
        copyChannel: function (a, b, c, d, e) {
          b = this.__clipRect(b);
          if (this.buffer != null && b != null && (e != ri.ALPHA || !!this.get_transparent()) && !(b.width <= 0) && !(b.height <= 0)) {
            if (b.x + b.width > a.width) {
              b.width = a.width - b.x;
            }
            if (b.y + b.height > a.height) {
              b.height = a.height - b.y;
            }
            switch (this.type._hx_index) {
              case 0:
                Xa.copyChannel(this, a, b, c, d, e);
                break;
              case 1:
                Xa.convertToData(this);
                Xa.convertToData(a);
                Ac.copyChannel(this, a, b, c, d, e);
                break;
              case 2:
                switch (d._hx_index) {
                  case 0:
                    var f = 1;
                    break;
                  case 1:
                    f = 2;
                    break;
                  case 2:
                    f = 4;
                    break;
                  case 3:
                    f = 8;
                }
                switch (e._hx_index) {
                  case 0:
                    var k = 1;
                    break;
                  case 1:
                    k = 2;
                    break;
                  case 2:
                    k = 4;
                    break;
                  case 3:
                    k = 8;
                }
                b.offset(a.offsetX, a.offsetY);
                c.offset(this.offsetX, this.offsetY);
                this.buffer.__srcBitmapData.copyChannel(a.buffer.get_src(), b.__toFlashRectangle(), c.__toFlashPoint(), f, k);
            }
          }
        },
        copyPixels: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (this.buffer != null && a != null && !(b.width <= 0) && !(b.height <= 0) && !(this.width <= 0) && !(this.height <= 0)) {
            if (b.x + b.width > a.width) {
              b.width = a.width - b.x;
            }
            if (b.y + b.height > a.height) {
              b.height = a.height - b.y;
            }
            if (b.x < 0) {
              b.width += b.x;
              b.x = 0;
            }
            if (b.y < 0) {
              b.height += b.y;
              b.y = 0;
            }
            if (c.x + b.width > this.width) {
              b.width = this.width - c.x;
            }
            if (c.y + b.height > this.height) {
              b.height = this.height - c.y;
            }
            if (c.x < 0) {
              b.width += c.x;
              b.x -= c.x;
              c.x = 0;
            }
            if (c.y < 0) {
              b.height += c.y;
              b.y -= c.y;
              c.y = 0;
            }
            if (a == this && c.x < b.get_right() && c.y < b.get_bottom()) {
              a = this.clone();
            }
            if (d == a && (e == null || e.x == 0 && e.y == 0)) {
              e = d = null;
            }
            switch (this.type._hx_index) {
              case 0:
                if (d != null) {
                  Xa.convertToData(this);
                  Xa.convertToData(a);
                  if (d != null) {
                    Xa.convertToData(d);
                  }
                  Ac.copyPixels(this, a, b, c, d, e, f);
                } else {
                  Xa.convertToCanvas(this);
                  Xa.convertToCanvas(a);
                  Xa.copyPixels(this, a, b, c, d, e, f);
                }
                break;
              case 1:
                Xa.convertToData(this);
                Xa.convertToData(a);
                if (d != null) {
                  Xa.convertToData(d);
                }
                Ac.copyPixels(this, a, b, c, d, e, f);
                break;
              case 2:
                b.offset(a.offsetX, a.offsetY);
                c.offset(this.offsetX, this.offsetY);
                if (d != null && e != null) {
                  e.offset(d.offsetX, d.offsetY);
                }
                this.buffer.__srcBitmapData.copyPixels(a.buffer.__srcBitmapData, b.__toFlashRectangle(), c.__toFlashPoint(), d != null ? d.buffer.get_src() : null, e != null ? e.__toFlashPoint() : null, f);
            }
          }
        },
        fillRect: function (a, b, c) {
          a = this.__clipRect(a);
          if (this.buffer != null && a != null) {
            switch (this.type._hx_index) {
              case 0:
                Xa.fillRect(this, a, b, c);
                break;
              case 1:
                Xa.convertToData(this);
                if (this.buffer.data.length == 0) {
                  break;
                }
                Ac.fillRect(this, a, b, c);
                break;
              case 2:
                a.offset(this.offsetX, this.offsetY);
                if (c == null) {
                  b = (b & 255) << 24 | (b >>> 24 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 8 & 255;
                } else {
                  switch (c) {
                    case 1:
                      break;
                    case 2:
                      b = (b & 255) << 24 | (b >>> 8 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 24 & 255;
                      break;
                    default:
                      b = (b & 255) << 24 | (b >>> 24 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 8 & 255;
                  }
                }
                this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(), b);
            }
          }
        },
        getPixel32: function (a, b, c) {
          if (this.buffer == null || a < 0 || b < 0 || a >= this.width || b >= this.height) {
            return 0;
          }
          switch (this.type._hx_index) {
            case 0:
              return Xa.getPixel32(this, a, b, c);
            case 1:
              Xa.convertToData(this);
              return Ac.getPixel32(this, a, b, c);
            case 2:
              a = this.buffer.__srcBitmapData.getPixel32(a + this.offsetX, b + this.offsetY);
              if (c == null) {
                return (a >>> 16 & 255) << 24 | (a >>> 8 & 255) << 16 | (a & 255) << 8 | a >>> 24 & 255;
              }
              switch (c) {
                case 1:
                  return a;
                case 2:
                  return (a & 255) << 24 | (a >>> 8 & 255) << 16 | (a >>> 16 & 255) << 8 | a >>> 24 & 255;
                default:
                  return (a >>> 16 & 255) << 24 | (a >>> 8 & 255) << 16 | (a & 255) << 8 | a >>> 24 & 255;
              }
            default:
              return 0;
          }
        },
        setPixel: function (a, b, c, d) {
          if (this.buffer != null && !(a < 0) && !(b < 0) && !(a >= this.width) && !(b >= this.height)) {
            switch (this.type._hx_index) {
              case 0:
                Xa.setPixel(this, a, b, c, d);
                break;
              case 1:
                Xa.convertToData(this);
                Ac.setPixel(this, a, b, c, d);
                break;
              case 2:
                if (d == null) {
                  c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                } else {
                  switch (d) {
                    case 1:
                      break;
                    case 2:
                      c = (c & 255) << 24 | (c >>> 8 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 24 & 255;
                      break;
                    default:
                      c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                  }
                }
                this.buffer.__srcBitmapData.setPixel(a + this.offsetX, b + this.offsetX, c);
            }
          }
        },
        setPixel32: function (a, b, c, d) {
          if (this.buffer != null && !(a < 0) && !(b < 0) && !(a >= this.width) && !(b >= this.height)) {
            switch (this.type._hx_index) {
              case 0:
                Xa.setPixel32(this, a, b, c, d);
                break;
              case 1:
                Xa.convertToData(this);
                Ac.setPixel32(this, a, b, c, d);
                break;
              case 2:
                if (d == null) {
                  c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                } else {
                  switch (d) {
                    case 1:
                      break;
                    case 2:
                      c = (c & 255) << 24 | (c >>> 8 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 24 & 255;
                      break;
                    default:
                      c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                  }
                }
                this.buffer.__srcBitmapData.setPixel32(a + this.offsetX, b + this.offsetY, c);
            }
          }
        },
        __clipRect: function (a) {
          if (a == null || a.x < 0 && (a.width -= -a.x, a.x = 0, a.x + a.width <= 0) || a.y < 0 && (a.height -= -a.y, a.y = 0, a.y + a.height <= 0) || a.x + a.width >= this.width && (a.width -= a.x + a.width - this.width, a.width <= 0) || a.y + a.height >= this.height && (a.height -= a.y + a.height - this.height, a.height <= 0)) {
            return null;
          } else {
            return a;
          }
        },
        __fromBase64: function (a, b, c) {
          var d = this;
          var e = new window.Image();
          e.addEventListener("load", function (a) {
            d.buffer = new vg(null, e.width, e.height);
            d.buffer.__srcImage = e;
            d.offsetX = 0;
            d.offsetY = 0;
            d.width = d.buffer.width;
            d.height = d.buffer.height;
            if (c != null) {
              c(d);
            }
          }, false);
          e.src = "data:" + b + ";base64," + a;
        },
        __fromBytes: function (a, b) {
          if (Eb.__isPNG(a)) {
            var c = "image/png";
          } else if (Eb.__isJPG(a)) {
            c = "image/jpeg";
          } else if (Eb.__isGIF(a)) {
            c = "image/gif";
          } else {
            return false;
          }
          this.__fromBase64(bg.encode(a), c, b);
          return true;
        },
        __fromFile: function (a, b, c) {
          var d = this;
          var e = new window.Image();
          if (!Sa.__isSameOrigin(a)) {
            e.crossOrigin = "Anonymous";
          }
          e.onload = function (a) {
            d.buffer = new vg(null, e.width, e.height);
            d.buffer.__srcImage = e;
            d.width = e.width;
            d.height = e.height;
            if (b != null) {
              b(d);
            }
          };
          e.onerror = function (a) {
            if (c != null) {
              c();
            }
          };
          e.src = a;
          return true;
        },
        __fromImageBuffer: function (a) {
          this.buffer = a;
          if (a != null) {
            if (this.width == -1) {
              this.width = a.width;
            }
            if (this.height == -1) {
              this.height = a.height;
            }
          }
        },
        get_data: function () {
          if (this.buffer.data == null && this.buffer.width > 0 && this.buffer.height > 0) {
            Xa.convertToData(this);
          }
          return this.buffer.data;
        },
        set_data: function (a) {
          return this.buffer.data = a;
        },
        get_format: function () {
          return this.buffer.format;
        },
        set_format: function (a) {
          if (this.buffer.format != a && this.type._hx_index == 1) {
            Ac.setFormat(this, a);
          }
          return this.buffer.format = a;
        },
        get_premultiplied: function () {
          return this.buffer.premultiplied;
        },
        set_premultiplied: function (a) {
          if (a && !this.buffer.premultiplied) {
            switch (this.type._hx_index) {
              case 0:
              case 1:
                Xa.convertToData(this);
                Ac.multiplyAlpha(this);
            }
          } else if (!a && this.buffer.premultiplied && this.type._hx_index == 1) {
            Xa.convertToData(this);
            Ac.unmultiplyAlpha(this);
          }
          return a;
        },
        get_rect: function () {
          return new Me(0, 0, this.width, this.height);
        },
        get_src: function () {
          if (this.buffer.__srcCanvas == null && (this.buffer.data != null || this.type == Id.DATA)) {
            Xa.convertToCanvas(this);
          }
          return this.buffer.get_src();
        },
        get_transparent: function () {
          if (this.buffer == null) {
            return false;
          } else {
            return this.buffer.transparent;
          }
        },
        set_transparent: function (a) {
          if (this.buffer == null) {
            return false;
          } else {
            return this.buffer.transparent = a;
          }
        },
        __class__: Eb,
        __properties__: {
          set_transparent: "set_transparent",
          get_transparent: "get_transparent",
          get_src: "get_src",
          get_rect: "get_rect",
          set_premultiplied: "set_premultiplied",
          get_premultiplied: "get_premultiplied",
          set_format: "set_format",
          get_format: "get_format",
          set_data: "set_data",
          get_data: "get_data"
        }
      };
      function vg(a, b, c, d, e) {
        if (d == null) {
          d = 32;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        this.data = a;
        this.width = b;
        this.height = c;
        this.bitsPerPixel = d;
        this.format = e == null ? 0 : e;
        this.premultiplied = false;
        this.transparent = true;
      }
      h["lime.graphics.ImageBuffer"] = vg;
      vg.__name__ = "lime.graphics.ImageBuffer";
      vg.prototype = {
        clone: function () {
          var a = new vg(this.data, this.width, this.height, this.bitsPerPixel);
          if (this.data != null) {
            var b = this.data.byteLength;
            var c = null;
            var d = null;
            var e = null;
            var f = null;
            var k = null;
            b = b != null ? new Uint8Array(b) : c != null ? new Uint8Array(c) : d != null ? new Uint8Array(d.__array) : e != null ? new Uint8Array(e) : f != null ? k == null ? new Uint8Array(f, 0) : new Uint8Array(f, 0, k) : null;
            a.data = b;
            d = c = b = null;
            e = this.data;
            k = f = null;
            b = b != null ? new Uint8Array(b) : c != null ? new Uint8Array(c) : d != null ? new Uint8Array(d.__array) : e != null ? new Uint8Array(e) : f != null ? k == null ? new Uint8Array(f, 0) : new Uint8Array(f, 0, k) : null;
            a.data.set(b);
          } else if (this.__srcImageData != null) {
            a.__srcCanvas = window.document.createElement("canvas");
            a.__srcContext = a.__srcCanvas.getContext("2d");
            a.__srcCanvas.width = this.__srcImageData.width;
            a.__srcCanvas.height = this.__srcImageData.height;
            a.__srcImageData = a.__srcContext.createImageData(this.__srcImageData.width, this.__srcImageData.height);
            b = new Uint8ClampedArray(this.__srcImageData.data);
            a.__srcImageData.data.set(b);
          } else if (this.__srcCanvas != null) {
            a.__srcCanvas = window.document.createElement("canvas");
            a.__srcContext = a.__srcCanvas.getContext("2d");
            a.__srcCanvas.width = this.__srcCanvas.width;
            a.__srcCanvas.height = this.__srcCanvas.height;
            a.__srcContext.drawImage(this.__srcCanvas, 0, 0);
          } else {
            a.__srcImage = this.__srcImage;
          }
          a.bitsPerPixel = this.bitsPerPixel;
          a.format = this.format;
          a.premultiplied = this.premultiplied;
          a.transparent = this.transparent;
          return a;
        },
        get_src: function () {
          return this.__srcImage ?? this.__srcCanvas;
        },
        set_src: function (a) {
          if (a instanceof Image) {
            this.__srcImage = a;
          } else if (a instanceof HTMLCanvasElement) {
            this.__srcCanvas = a;
            this.__srcContext = this.__srcCanvas.getContext("2d");
          }
          return a;
        },
        get_stride: function () {
          return this.width * (this.bitsPerPixel / 8 | 0);
        },
        __class__: vg,
        __properties__: {
          get_stride: "get_stride",
          set_src: "set_src",
          get_src: "get_src"
        }
      };
      var ri = x["lime.graphics.ImageChannel"] = {
        __ename__: "lime.graphics.ImageChannel",
        __constructs__: null,
        RED: {
          _hx_name: "RED",
          _hx_index: 0,
          __enum__: "lime.graphics.ImageChannel",
          toString: p
        },
        GREEN: {
          _hx_name: "GREEN",
          _hx_index: 1,
          __enum__: "lime.graphics.ImageChannel",
          toString: p
        },
        BLUE: {
          _hx_name: "BLUE",
          _hx_index: 2,
          __enum__: "lime.graphics.ImageChannel",
          toString: p
        },
        ALPHA: {
          _hx_name: "ALPHA",
          _hx_index: 3,
          __enum__: "lime.graphics.ImageChannel",
          toString: p
        }
      };
      ri.__constructs__ = [ri.RED, ri.GREEN, ri.BLUE, ri.ALPHA];
      var Id = x["lime.graphics.ImageType"] = {
        __ename__: "lime.graphics.ImageType",
        __constructs__: null,
        CANVAS: {
          _hx_name: "CANVAS",
          _hx_index: 0,
          __enum__: "lime.graphics.ImageType",
          toString: p
        },
        DATA: {
          _hx_name: "DATA",
          _hx_index: 1,
          __enum__: "lime.graphics.ImageType",
          toString: p
        },
        FLASH: {
          _hx_name: "FLASH",
          _hx_index: 2,
          __enum__: "lime.graphics.ImageType",
          toString: p
        },
        CUSTOM: {
          _hx_name: "CUSTOM",
          _hx_index: 3,
          __enum__: "lime.graphics.ImageType",
          toString: p
        }
      };
      Id.__constructs__ = [Id.CANVAS, Id.DATA, Id.FLASH, Id.CUSTOM];
      function no() {}
      h["lime.graphics.RenderContext"] = no;
      no.__name__ = "lime.graphics.RenderContext";
      no.prototype = {
        __class__: no
      };
      var Rp = {
        uniform2fv: function (a, b, c, d, e) {
          if (d != null) {
            a.uniform2fv(b, c, d, e);
          } else {
            a.uniform2fv(b, c);
          }
        }
      };
      var Yc = {
        bufferData: function (a, b, c, d) {
          a.bufferData(b, c, d);
        },
        texImage2D: function (a, b, c, d, e, f, k, g, n, h) {
          if (g != null) {
            a.texImage2D(b, c, d, e, f, k, g, n, h);
          } else {
            a.texImage2D(b, c, d, e, f, k);
          }
        },
        uniformMatrix2fv: function (a, b, c, d) {
          a.uniformMatrix2fv(b, c, d);
        },
        uniformMatrix3fv: function (a, b, c, d) {
          a.uniformMatrix3fv(b, c, d);
        },
        uniformMatrix4fv: function (a, b, c, d) {
          a.uniformMatrix4fv(b, c, d);
        },
        fromWebGL2RenderContext: function (a) {
          return a;
        }
      };
      function lp(a) {}
      h["lime.graphics.cairo.Cairo"] = lp;
      lp.__name__ = "lime.graphics.cairo.Cairo";
      lp.prototype = {
        clip: function () {},
        identityMatrix: function () {},
        newPath: function () {},
        paint: function () {},
        rectangle: function (a, b, c, d) {},
        restore: function () {},
        save: function () {},
        setOperator: function (a) {
          return a;
        },
        setSourceRGB: function (a, b, c) {},
        set_matrix: function (a) {
          return a;
        },
        __class__: lp,
        __properties__: {
          set_matrix: "set_matrix"
        }
      };
      var Jp = {
        flush: function (a) {}
      };
      function wg() {}
      h["lime.graphics.opengl.GL"] = wg;
      wg.__name__ = "lime.graphics.opengl.GL";
      function mp() {
        this.STACK_UNDERFLOW = 1284;
        this.STACK_OVERFLOW = 1283;
        this.CONTEXT_FLAG_DEBUG_BIT = 2;
        this.DEBUG_OUTPUT = 37600;
        this.DEBUG_SEVERITY_LOW = 37192;
        this.DEBUG_SEVERITY_MEDIUM = 37191;
        this.DEBUG_SEVERITY_HIGH = 37190;
        this.DEBUG_LOGGED_MESSAGES = 37189;
        this.MAX_DEBUG_LOGGED_MESSAGES = 37188;
        this.MAX_DEBUG_MESSAGE_LENGTH = 37187;
        this.MAX_LABEL_LENGTH = 33512;
        this.SAMPLER = 33510;
        this.QUERY = 33507;
        this.PROGRAM = 33506;
        this.SHADER = 33505;
        this.BUFFER = 33504;
        this.DEBUG_GROUP_STACK_DEPTH = 33389;
        this.MAX_DEBUG_GROUP_STACK_DEPTH = 33388;
        this.DEBUG_SEVERITY_NOTIFICATION = 33387;
        this.DEBUG_TYPE_POP_GROUP = 33386;
        this.DEBUG_TYPE_PUSH_GROUP = 33385;
        this.DEBUG_TYPE_MARKER = 33384;
        this.DEBUG_TYPE_OTHER = 33361;
        this.DEBUG_TYPE_PERFORMANCE = 33360;
        this.DEBUG_TYPE_PORTABILITY = 33359;
        this.DEBUG_TYPE_UNDEFINED_BEHAVIOR = 33358;
        this.DEBUG_TYPE_DEPRECATED_BEHAVIOR = 33357;
        this.DEBUG_TYPE_ERROR = 33356;
        this.DEBUG_SOURCE_OTHER = 33355;
        this.DEBUG_SOURCE_APPLICATION = 33354;
        this.DEBUG_SOURCE_THIRD_PARTY = 33353;
        this.DEBUG_SOURCE_SHADER_COMPILER = 33352;
        this.DEBUG_SOURCE_WINDOW_SYSTEM = 33351;
        this.DEBUG_SOURCE_API = 33350;
        this.DEBUG_CALLBACK_USER_PARAM = 33349;
        this.DEBUG_CALLBACK_FUNCTION = 33348;
        this.DEBUG_NEXT_LOGGED_MESSAGE_LENGTH = 33347;
        this.DEBUG_OUTPUT_SYNCHRONOUS = 33346;
      }
      h["lime.graphics.opengl.ext.KHR_debug"] = mp;
      mp.__name__ = "lime.graphics.opengl.ext.KHR_debug";
      mp.prototype = {
        __class__: mp
      };
      var qd = {
        getAlphaTable: function (a) {
          if (qd.__alphaTable == null) {
            qd.__alphaTable = new Uint8Array(256);
          }
          qd.__alphaTable[0] = 0;
          for (var b = 1; b < 256;) {
            var c = b++;
            var d = Math.floor(c * a[18] + a[19] * 255);
            if (d > 255) {
              d = 255;
            }
            if (d < 0) {
              d = 0;
            }
            qd.__alphaTable[c] = d;
          }
          return qd.__alphaTable;
        },
        getBlueTable: function (a) {
          if (qd.__blueTable == null) {
            qd.__blueTable = new Uint8Array(256);
          }
          var b;
          for (var c = 0; c < 256;) {
            var d = c++;
            b = Math.floor(d * a[12] + a[14] * 255);
            if (b > 255) {
              b = 255;
            }
            if (b < 0) {
              b = 0;
            }
            qd.__blueTable[d] = b;
          }
          return qd.__blueTable;
        },
        getGreenTable: function (a) {
          if (qd.__greenTable == null) {
            qd.__greenTable = new Uint8Array(256);
          }
          var b;
          for (var c = 0; c < 256;) {
            var d = c++;
            b = Math.floor(d * a[6] + a[9] * 255);
            if (b > 255) {
              b = 255;
            }
            if (b < 0) {
              b = 0;
            }
            qd.__greenTable[d] = b;
          }
          return qd.__greenTable;
        },
        getRedTable: function (a) {
          if (qd.__redTable == null) {
            qd.__redTable = new Uint8Array(256);
          }
          var b;
          for (var c = 0; c < 256;) {
            var d = c++;
            b = Math.floor(d * a[0] + a[4] * 255);
            if (b > 255) {
              b = 255;
            }
            if (b < 0) {
              b = 0;
            }
            qd.__redTable[d] = b;
          }
          return qd.__redTable;
        },
        __toFlashColorTransform: function (a) {
          return null;
        }
      };
      var Bb = {
        _new: function (a) {
          if (a == null || a.length != 16) {
            a = Bb.__identity;
            a = a != null ? new Float32Array(a) : null;
          }
          return a;
        },
        append: function (a, b) {
          var c = a[0];
          var d = a[4];
          var e = a[8];
          var f = a[12];
          var k = a[1];
          var g = a[5];
          var n = a[9];
          var h = a[13];
          var p = a[2];
          var m = a[6];
          var l = a[10];
          var t = a[14];
          var q = a[3];
          var u = a[7];
          var x = a[11];
          var L = a[15];
          var w = Bb.get(b, 0);
          var A = Bb.get(b, 4);
          var y = Bb.get(b, 8);
          var z = Bb.get(b, 12);
          var D = Bb.get(b, 1);
          var C = Bb.get(b, 5);
          var H = Bb.get(b, 9);
          var Ka = Bb.get(b, 13);
          var F = Bb.get(b, 2);
          var B = Bb.get(b, 6);
          var v = Bb.get(b, 10);
          var G = Bb.get(b, 14);
          var K = Bb.get(b, 3);
          var ha = Bb.get(b, 7);
          var la = Bb.get(b, 11);
          b = Bb.get(b, 15);
          a[0] = c * w + k * A + p * y + q * z;
          a[1] = c * D + k * C + p * H + q * Ka;
          a[2] = c * F + k * B + p * v + q * G;
          a[3] = c * K + k * ha + p * la + q * b;
          a[4] = d * w + g * A + m * y + u * z;
          a[5] = d * D + g * C + m * H + u * Ka;
          a[6] = d * F + g * B + m * v + u * G;
          a[7] = d * K + g * ha + m * la + u * b;
          a[8] = e * w + n * A + l * y + x * z;
          a[9] = e * D + n * C + l * H + x * Ka;
          a[10] = e * F + n * B + l * v + x * G;
          a[11] = e * K + n * ha + l * la + x * b;
          a[12] = f * w + h * A + t * y + L * z;
          a[13] = f * D + h * C + t * H + L * Ka;
          a[14] = f * F + h * B + t * v + L * G;
          a[15] = f * K + h * ha + t * la + L * b;
        },
        createOrtho: function (a, b, c, d, e, f, k) {
          var g = 1 / (c - b);
          var n = 1 / (e - d);
          var h = 1 / (k - f);
          a[0] = g * 2;
          a[1] = 0;
          a[2] = 0;
          a[3] = 0;
          a[4] = 0;
          a[5] = n * 2;
          a[6] = 0;
          a[7] = 0;
          a[8] = 0;
          a[9] = 0;
          a[10] = h * -2;
          a[11] = 0;
          a[12] = -(b + c) * g;
          a[13] = -(d + e) * n;
          a[14] = -(f + k) * h;
          a[15] = 1;
        },
        identity: function (a) {
          a[0] = 1;
          a[1] = 0;
          a[2] = 0;
          a[3] = 0;
          a[4] = 0;
          a[5] = 1;
          a[6] = 0;
          a[7] = 0;
          a[8] = 0;
          a[9] = 0;
          a[10] = 1;
          a[11] = 0;
          a[12] = 0;
          a[13] = 0;
          a[14] = 0;
          a[15] = 1;
        },
        get: function (a, b) {
          return a[b];
        },
        set: function (a, b, c) {
          return a[b] = c;
        }
      };
      var R = {};
      function Me(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
        this.width = c;
        this.height = d;
      }
      h["lime.math.Rectangle"] = Me;
      Me.__name__ = "lime.math.Rectangle";
      Me.prototype = {
        intersection: function (a, b) {
          if (b == null) {
            b = new Me();
          }
          var c = this.x < a.x ? a.x : this.x;
          var d = this.get_right() > a.get_right() ? a.get_right() : this.get_right();
          if (d <= c) {
            b.setEmpty();
            return b;
          }
          var e = this.y < a.y ? a.y : this.y;
          a = this.get_bottom() > a.get_bottom() ? a.get_bottom() : this.get_bottom();
          if (a <= e) {
            b.setEmpty();
            return b;
          }
          b.x = c;
          b.y = e;
          b.width = d - c;
          b.height = a - e;
          return b;
        },
        offset: function (a, b) {
          this.x += a;
          this.y += b;
        },
        setEmpty: function () {
          this.x = this.y = this.width = this.height = 0;
        },
        setTo: function (a, b, c, d) {
          this.x = a;
          this.y = b;
          this.width = c;
          this.height = d;
        },
        __toFlashRectangle: function () {
          return null;
        },
        get_bottom: function () {
          return this.y + this.height;
        },
        get_right: function () {
          return this.x + this.width;
        },
        __class__: Me,
        __properties__: {
          get_right: "get_right",
          get_bottom: "get_bottom"
        }
      };
      function lo(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.w = d;
        this.x = a;
        this.y = b;
        this.z = c;
      }
      h["lime.math.Vector4"] = lo;
      lo.__name__ = "lime.math.Vector4";
      lo.prototype = {
        __class__: lo
      };
      function $c() {}
      h["lime.media.AudioBuffer"] = $c;
      $c.__name__ = "lime.media.AudioBuffer";
      $c.fromBytes = function (a) {
        if (a == null) {
          return null;
        }
        var b = new $c();
        b.set_src(new Howl({
          src: ["data:" + $c.__getCodec(a) + ";base64," + bg.encode(a)],
          html5: true,
          preload: false
        }));
        return b;
      };
      $c.fromFile = function (a) {
        if (a == null) {
          return null;
        }
        var b = new $c();
        b.__srcHowl = new Howl({
          src: [a],
          preload: false
        });
        return b;
      };
      $c.fromFiles = function (a) {
        var b = new $c();
        b.__srcHowl = new Howl({
          src: a,
          preload: false
        });
        return b;
      };
      $c.loadFromFile = function (a) {
        var b = new Md();
        var c = $c.fromFile(a);
        if (c != null) {
          if (c != null) {
            c.__srcHowl.on("load", function () {
              b.complete(c);
            });
            c.__srcHowl.on("loaderror", function (a, c) {
              b.error(c);
            });
            c.__srcHowl.load();
          }
        } else {
          b.error(null);
        }
        return b.future;
      };
      $c.loadFromFiles = function (a) {
        var b = new Md();
        var c = $c.fromFiles(a);
        if (c != null) {
          c.__srcHowl.on("load", function () {
            b.complete(c);
          });
          c.__srcHowl.on("loaderror", function () {
            b.error(null);
          });
          c.__srcHowl.load();
        } else {
          b.error(null);
        }
        return b.future;
      };
      $c.__getCodec = function (a) {
        switch (a.getString(0, 4)) {
          case "OggS":
            return "audio/ogg";
          case "RIFF":
            if (a.getString(8, 4) == "WAVE") {
              return "audio/wav";
            }
            var b = a.b[1];
            var c = a.b[2];
            switch (a.b[0]) {
              case 73:
                if (b == 68 && c == 51) {
                  return "audio/mp3";
                }
                break;
              case 255:
                switch (b) {
                  case 243:
                  case 250:
                  case 251:
                    return "audio/mp3";
                }
            }
            break;
          case "fLaC":
            return "audio/flac";
          default:
            b = a.b[1];
            c = a.b[2];
            switch (a.b[0]) {
              case 73:
                if (b == 68 && c == 51) {
                  return "audio/mp3";
                }
                break;
              case 255:
                switch (b) {
                  case 243:
                  case 250:
                  case 251:
                    return "audio/mp3";
                }
            }
        }
        Ua.error("Unsupported sound format", {
          fileName: "lime/media/AudioBuffer.hx",
          lineNumber: 362,
          className: "lime.media.AudioBuffer",
          methodName: "__getCodec"
        });
        return null;
      };
      $c.prototype = {
        get_src: function () {
          return this.__srcHowl;
        },
        set_src: function (a) {
          return this.__srcHowl = a;
        },
        __class__: $c,
        __properties__: {
          set_src: "set_src",
          get_src: "get_src"
        }
      };
      function Bo(a) {
        if (a != "custom") {
          if (a == null || a == "web") {
            try {
              window.AudioContext = window.AudioContext || window.webkitAudioContext;
              this.web = new window.AudioContext();
              this.type = "web";
            } catch (b) {
              Na.lastError = b;
            }
          }
          if (this.web == null && a != "web") {
            this.html5 = new Ao();
            this.type = "html5";
          }
        } else {
          this.type = "custom";
        }
      }
      h["lime.media.AudioContext"] = Bo;
      Bo.__name__ = "lime.media.AudioContext";
      Bo.prototype = {
        __class__: Bo
      };
      function gg() {}
      h["lime.media.AudioManager"] = gg;
      gg.__name__ = "lime.media.AudioManager";
      gg.init = function (a) {
        if (gg.context == null) {
          if (a == null && (gg.context = new Bo(), a = gg.context, a.type == "openal")) {
            var b = a.openal;
            var c = b.openDevice();
            c = b.createContext(c);
            b.makeContextCurrent(c);
            b.processContext(c);
          }
          gg.context = a;
        }
      };
      function Co(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (b == null) {
          b = 0;
        }
        this.onComplete = new Uc();
        this.buffer = a;
        this.offset = b;
        this.__backend = new mo(this);
        if (c != null && c != 0) {
          this.set_length(c);
        }
        this.set_loops(d);
        if (a != null) {
          this.init();
        }
      }
      h["lime.media.AudioSource"] = Co;
      Co.__name__ = "lime.media.AudioSource";
      Co.prototype = {
        dispose: function () {
          this.__backend.dispose();
        },
        init: function () {
          this.__backend.init();
        },
        play: function () {
          this.__backend.play();
        },
        stop: function () {
          this.__backend.stop();
        },
        get_currentTime: function () {
          return this.__backend.getCurrentTime();
        },
        set_currentTime: function (a) {
          return this.__backend.setCurrentTime(a);
        },
        get_gain: function () {
          return this.__backend.getGain();
        },
        set_gain: function (a) {
          return this.__backend.setGain(a);
        },
        set_length: function (a) {
          return this.__backend.setLength(a);
        },
        set_loops: function (a) {
          return this.__backend.setLoops(a);
        },
        set_pitch: function (a) {
          return this.__backend.setPitch(a);
        },
        get_position: function () {
          return this.__backend.getPosition();
        },
        set_position: function (a) {
          return this.__backend.setPosition(a);
        },
        __class__: Co,
        __properties__: {
          set_pitch: "set_pitch",
          set_loops: "set_loops",
          set_length: "set_length",
          set_position: "set_position",
          get_position: "get_position",
          set_gain: "set_gain",
          get_gain: "get_gain",
          set_currentTime: "set_currentTime",
          get_currentTime: "get_currentTime"
        }
      };
      function Ao() {}
      h["lime.media.HTML5AudioContext"] = Ao;
      Ao.__name__ = "lime.media.HTML5AudioContext";
      Ao.prototype = {
        __class__: Ao
      };
      function np() {}
      h["lime.media.OpenALAudioContext"] = np;
      np.__name__ = "lime.media.OpenALAudioContext";
      np.prototype = {
        createContext: function (a, b) {
          return Zg.createContext(a, b);
        },
        makeContextCurrent: function (a) {
          return Zg.makeContextCurrent(a);
        },
        openDevice: function (a) {
          return Zg.openDevice(a);
        },
        processContext: function (a) {
          Zg.processContext(a);
        },
        __class__: np
      };
      function Zg() {}
      h["lime.media.openal.ALC"] = Zg;
      Zg.__name__ = "lime.media.openal.ALC";
      Zg.createContext = function (a, b) {
        return null;
      };
      Zg.makeContextCurrent = function (a) {
        return false;
      };
      Zg.openDevice = function (a) {
        return null;
      };
      Zg.processContext = function (a) {};
      function $l() {}
      h["lime.net._IHTTPRequest"] = $l;
      $l.__name__ = "lime.net._IHTTPRequest";
      $l.__isInterface__ = true;
      $l.prototype = {
        __class__: $l
      };
      function Mf(a) {
        this.uri = a;
        this.contentType = "application/x-www-form-urlencoded";
        this.followRedirects = true;
        this.enableResponseHeaders = false;
        this.formData = new V();
        this.headers = [];
        this.method = "GET";
        this.timeout = 30000;
        this.withCredentials = false;
        this.manageCookies = true;
        this.__backend = new Sa();
        this.__backend.init(this);
      }
      h["lime.net._HTTPRequest.AbstractHTTPRequest"] = Mf;
      Mf.__name__ = "lime.net._HTTPRequest.AbstractHTTPRequest";
      Mf.__interfaces__ = [$l];
      Mf.prototype = {
        __class__: Mf
      };
      function $g(a) {
        Mf.call(this, a);
      }
      h["lime.net._HTTPRequest_Bytes"] = $g;
      $g.__name__ = "lime.net._HTTPRequest_Bytes";
      $g.__super__ = Mf;
      $g.prototype = q(Mf.prototype, {
        fromBytes: function (a) {
          return a;
        },
        load: function (a) {
          var b = this;
          if (a != null) {
            this.uri = a;
          }
          var c = new Md();
          a = this.__backend.loadData(this.uri);
          a.onProgress(l(c, c.progress));
          a.onError(function (a) {
            b.responseData = a.responseData;
            c.error(a.error);
          });
          a.onComplete(function (a) {
            b.responseData = b.fromBytes(a);
            c.complete(b.responseData);
          });
          return c.future;
        },
        __class__: $g
      });
      function vi(a) {
        Mf.call(this, a);
      }
      h["lime.net._HTTPRequest_String"] = vi;
      vi.__name__ = "lime.net._HTTPRequest_String";
      vi.__super__ = Mf;
      vi.prototype = q(Mf.prototype, {
        load: function (a) {
          var b = this;
          if (a != null) {
            this.uri = a;
          }
          var c = new Md();
          a = this.__backend.loadText(this.uri);
          a.onProgress(l(c, c.progress));
          a.onError(function (a) {
            b.responseData = a.responseData;
            c.error(a.error);
          });
          a.onComplete(function (a) {
            b.responseData = a;
            c.complete(b.responseData);
          });
          return c.future;
        },
        __class__: vi
      });
      function qi(a, b) {
        this.error = a;
        this.responseData = b;
      }
      h["lime.net._HTTPRequestErrorResponse"] = qi;
      qi.__name__ = "lime.net._HTTPRequestErrorResponse";
      qi.prototype = {
        __class__: qi
      };
      function Vl(a, b) {
        if (b == null) {
          b = "";
        }
        this.name = a;
        this.value = b;
      }
      h["lime.net.HTTPRequestHeader"] = Vl;
      Vl.__name__ = "lime.net.HTTPRequestHeader";
      Vl.prototype = {
        __class__: Vl
      };
      function am(a) {
        Mf.call(this, a);
      }
      h["lime.net._HTTPRequest_lime_utils_Bytes"] = am;
      am.__name__ = "lime.net._HTTPRequest_lime_utils_Bytes";
      am.__super__ = $g;
      am.prototype = q($g.prototype, {
        fromBytes: function (a) {
          return Ch.fromBytes(a);
        },
        __class__: am
      });
      function bm(a) {
        Mf.call(this, a);
      }
      h["lime.net._HTTPRequest_openfl_utils_ByteArray"] = bm;
      bm.__name__ = "lime.net._HTTPRequest_openfl_utils_ByteArray";
      bm.__super__ = $g;
      bm.prototype = q($g.prototype, {
        fromBytes: function (a) {
          return Re.fromBytes(a);
        },
        __class__: bm
      });
      function kc() {}
      h["lime.system.Clipboard"] = kc;
      kc.__name__ = "lime.system.Clipboard";
      kc.__properties__ = {
        set_text: "set_text",
        get_text: "get_text"
      };
      kc.__update = function () {
        var a = kc._text;
        kc._text = a;
        kc.__updated = true;
        if (kc._text != a) {
          kc.onUpdate.dispatch();
        }
      };
      kc.get_text = function () {
        kc.__update();
        return kc._text;
      };
      kc.set_text = function (a) {
        var b = kc._text;
        kc._text = a;
        var c = rb.current.__window;
        if (c != null) {
          c.__backend.setClipboard(a);
        }
        if (kc._text != b) {
          kc.onUpdate.dispatch();
        }
        return a;
      };
      var il = x["lime.system.Endian"] = {
        __ename__: "lime.system.Endian",
        __constructs__: null,
        LITTLE_ENDIAN: {
          _hx_name: "LITTLE_ENDIAN",
          _hx_index: 0,
          __enum__: "lime.system.Endian",
          toString: p
        },
        BIG_ENDIAN: {
          _hx_name: "BIG_ENDIAN",
          _hx_index: 1,
          __enum__: "lime.system.Endian",
          toString: p
        }
      };
      il.__constructs__ = [il.LITTLE_ENDIAN, il.BIG_ENDIAN];
      function Le(a, b) {
        this.onUpdate = new po();
        this.type = a;
        this.id = b;
      }
      h["lime.system.Sensor"] = Le;
      Le.__name__ = "lime.system.Sensor";
      Le.getSensors = function (a) {
        if (a == null) {
          return Le.sensors.slice();
        }
        var b = [];
        for (var c = 0, d = Le.sensors; c < d.length;) {
          var e = d[c];
          ++c;
          if (e.type == a) {
            b.push(e);
          }
        }
        return b;
      };
      Le.registerSensor = function (a, b) {
        a = new Le(a, b);
        Le.sensors.push(a);
        return Le.sensorByID.h[b] = a;
      };
      Le.prototype = {
        __class__: Le
      };
      var Wo = x["lime.system.SensorType"] = {
        __ename__: "lime.system.SensorType",
        __constructs__: null,
        ACCELEROMETER: {
          _hx_name: "ACCELEROMETER",
          _hx_index: 0,
          __enum__: "lime.system.SensorType",
          toString: p
        }
      };
      Wo.__constructs__ = [Wo.ACCELEROMETER];
      function bd() {}
      h["lime.system.System"] = bd;
      bd.__name__ = "lime.system.System";
      bd.__properties__ = {
        get_endianness: "get_endianness"
      };
      bd.embed = v.lime.embed = function (a, b, c, d, e) {
        if (bd.__applicationEntryPoint != null && Object.prototype.hasOwnProperty.call(bd.__applicationEntryPoint.h, a)) {
          var f = typeof b == "string" ? window.document.getElementById(b) : b == null ? window.document.createElement("div") : b;
          if (f == null) {
            window.console.log("[lime.embed] ERROR: Cannot find target element: " + H.string(b));
          } else {
            if (c == null) {
              c = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (e == null) {
              e = {};
            }
            if (Object.prototype.hasOwnProperty.call(e, "background") && typeof e.background == "string") {
              b = w.replace(H.string(e.background), "#", "");
              if (b.indexOf("0x") > -1) {
                e.background = H.parseInt(b);
              } else {
                e.background = H.parseInt("0x" + b);
              }
            }
            e.element = f;
            e.width = c;
            e.height = d;
            bd.__applicationEntryPoint.h[a](e);
          }
        }
      };
      bd.exit = function (a) {
        var b = rb.current;
        if (b != null && (b.onExit.dispatch(a), b.onExit.canceled)) {
          return;
        }
        if (b != null && b.__window != null) {
          b.__window.close();
        }
      };
      bd.getTimer = function () {
        return window.performance.now() | 0;
      };
      bd.openURL = function (a, b) {
        if (b == null) {
          b = "_blank";
        }
        if (a != null) {
          window.open(a, b);
        }
      };
      bd.__registerEntryPoint = function (a, b) {
        if (bd.__applicationEntryPoint == null) {
          bd.__applicationEntryPoint = new V();
        }
        bd.__applicationEntryPoint.h[a] = b;
      };
      bd.get_endianness = function () {
        if (bd.__endianness == null) {
          var a = new ArrayBuffer(2);
          var b = null;
          var c = null;
          var d = null;
          var e = null;
          var f = null;
          var k = b = b != null ? new Uint8Array(b) : c != null ? new Uint8Array(c) : d != null ? new Uint8Array(d.__array) : e != null ? new Uint8Array(e) : a != null ? f == null ? new Uint8Array(a, 0) : new Uint8Array(a, 0, f) : null;
          f = e = d = c = b = null;
          b = b != null ? new Uint16Array(b) : c != null ? new Uint16Array(c) : d != null ? new Uint16Array(d.__array) : e != null ? new Uint16Array(e) : a != null ? f == null ? new Uint16Array(a, 0) : new Uint16Array(a, 0, f) : null;
          k[0] = 170;
          k[1] = 187;
          bd.__endianness = b[0] == 43707 ? il.BIG_ENDIAN : il.LITTLE_ENDIAN;
        }
        return bd.__endianness;
      };
      function oo(a, b) {
        if (b == null) {
          b = 1;
        }
        if (a == null) {
          a = 0;
        }
        this.onRun = new ti();
        this.onError = new ti();
        this.onComplete = new ti();
        this.doWork = new ti();
        this.minThreads = a;
        this.maxThreads = b;
        this.currentThreads = 0;
      }
      h["lime.system.ThreadPool"] = oo;
      oo.__name__ = "lime.system.ThreadPool";
      oo.prototype = {
        queue: function (a) {
          this.runWork(a);
        },
        sendComplete: function (a) {
          this.onComplete.dispatch(a);
        },
        sendError: function (a) {
          this.onError.dispatch(a);
        },
        runWork: function (a) {
          this.onRun.dispatch(a);
          this.doWork.dispatch(a);
        },
        __class__: oo
      };
      function Do() {
        this.onSave = new Ij();
        this.onCancel = new Uc();
      }
      h["lime.ui.FileDialog"] = Do;
      Do.__name__ = "lime.ui.FileDialog";
      Do.prototype = {
        save: function (a, b, c, d, e) {
          if (e == null) {
            e = "application/octet-stream";
          }
          if (a == null) {
            this.onCancel.dispatch();
            return false;
          }
          b = "";
          if (Eb.__isPNG(a)) {
            e = "image/png";
            b = ".png";
          } else if (Eb.__isJPG(a)) {
            e = "image/jpeg";
            b = ".jpg";
          } else if (Eb.__isGIF(a)) {
            e = "image/gif";
            b = ".gif";
          } else if (Eb.__isWebP(a)) {
            e = "image/webp";
            b = ".webp";
          }
          c = c != null ? Jc.withoutDirectory(c) : "download" + b;
          b = a.b.bufferValue;
          b = b.slice(0, a.length);
          window.saveAs(new Blob([b], {
            type: e
          }), c, true);
          this.onSave.dispatch(c);
          return true;
        },
        __class__: Do
      };
      function Qc(a) {
        this.onDisconnect = new Uc();
        this.onButtonUp = new Yl();
        this.onButtonDown = new Yl();
        this.onAxisMove = new xo();
        this.id = a;
        this.connected = true;
      }
      h["lime.ui.Gamepad"] = Qc;
      Qc.__name__ = "lime.ui.Gamepad";
      Qc.__connect = function (a) {
        if (!Qc.devices.h.hasOwnProperty(a)) {
          var b = new Qc(a);
          Qc.devices.h[a] = b;
          Qc.onConnect.dispatch(b);
        }
      };
      Qc.__disconnect = function (a) {
        var b = Qc.devices.h[a];
        if (b != null) {
          b.connected = false;
        }
        Qc.devices.remove(a);
        if (b != null) {
          b.onDisconnect.dispatch();
        }
      };
      Qc.prototype = {
        __class__: Qc
      };
      function Lc(a) {
        this.onTrackballMove = new to();
        this.onHatMove = new vo();
        this.onDisconnect = new Uc();
        this.onButtonUp = new ih();
        this.onButtonDown = new ih();
        this.onAxisMove = new uo();
        this.id = a;
        this.connected = true;
      }
      h["lime.ui.Joystick"] = Lc;
      Lc.__name__ = "lime.ui.Joystick";
      Lc.__connect = function (a) {
        if (!Lc.devices.h.hasOwnProperty(a)) {
          var b = new Lc(a);
          Lc.devices.h[a] = b;
          Lc.onConnect.dispatch(b);
        }
      };
      Lc.__disconnect = function (a) {
        var b = Lc.devices.h[a];
        if (b != null) {
          b.connected = false;
        }
        Lc.devices.remove(a);
        if (b != null) {
          b.onDisconnect.dispatch();
        }
      };
      Lc.__getDeviceData = function () {
        var a = null;
        try {
          a = navigator.getGamepads ? navigator.getGamepads() : navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : null;
        } catch (b) {
          Na.lastError = b;
        }
        return a;
      };
      Lc.prototype = {
        __class__: Lc
      };
      var Qb = {
        __properties__: {
          get_shiftKey: "get_shiftKey",
          get_metaKey: "get_metaKey",
          get_ctrlKey: "get_ctrlKey",
          get_altKey: "get_altKey"
        },
        get_altKey: function (a) {
          if ((a & 256) <= 0) {
            return (a & 512) > 0;
          } else {
            return true;
          }
        },
        get_ctrlKey: function (a) {
          if ((a & 64) <= 0) {
            return (a & 128) > 0;
          } else {
            return true;
          }
        },
        get_metaKey: function (a) {
          if ((a & 1024) <= 0) {
            return (a & 2048) > 0;
          } else {
            return true;
          }
        },
        get_shiftKey: function (a) {
          if ((a & 1) <= 0) {
            return (a & 2) > 0;
          } else {
            return true;
          }
        }
      };
      var Tb = x["lime.ui.MouseCursor"] = {
        __ename__: "lime.ui.MouseCursor",
        __constructs__: null,
        ARROW: {
          _hx_name: "ARROW",
          _hx_index: 0,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        CROSSHAIR: {
          _hx_name: "CROSSHAIR",
          _hx_index: 1,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        DEFAULT: {
          _hx_name: "DEFAULT",
          _hx_index: 2,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        MOVE: {
          _hx_name: "MOVE",
          _hx_index: 3,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        POINTER: {
          _hx_name: "POINTER",
          _hx_index: 4,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        RESIZE_NESW: {
          _hx_name: "RESIZE_NESW",
          _hx_index: 5,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        RESIZE_NS: {
          _hx_name: "RESIZE_NS",
          _hx_index: 6,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        RESIZE_NWSE: {
          _hx_name: "RESIZE_NWSE",
          _hx_index: 7,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        RESIZE_WE: {
          _hx_name: "RESIZE_WE",
          _hx_index: 8,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        TEXT: {
          _hx_name: "TEXT",
          _hx_index: 9,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        WAIT: {
          _hx_name: "WAIT",
          _hx_index: 10,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        WAIT_ARROW: {
          _hx_name: "WAIT_ARROW",
          _hx_index: 11,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        CUSTOM: {
          _hx_name: "CUSTOM",
          _hx_index: 12,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        }
      };
      Tb.__constructs__ = [Tb.ARROW, Tb.CROSSHAIR, Tb.DEFAULT, Tb.MOVE, Tb.POINTER, Tb.RESIZE_NESW, Tb.RESIZE_NS, Tb.RESIZE_NWSE, Tb.RESIZE_WE, Tb.TEXT, Tb.WAIT, Tb.WAIT_ARROW, Tb.CUSTOM];
      var Yg = x["lime.ui.MouseWheelMode"] = {
        __ename__: "lime.ui.MouseWheelMode",
        __constructs__: null,
        PIXELS: {
          _hx_name: "PIXELS",
          _hx_index: 0,
          __enum__: "lime.ui.MouseWheelMode",
          toString: p
        },
        LINES: {
          _hx_name: "LINES",
          _hx_index: 1,
          __enum__: "lime.ui.MouseWheelMode",
          toString: p
        },
        PAGES: {
          _hx_name: "PAGES",
          _hx_index: 2,
          __enum__: "lime.ui.MouseWheelMode",
          toString: p
        },
        UNKNOWN: {
          _hx_name: "UNKNOWN",
          _hx_index: 3,
          __enum__: "lime.ui.MouseWheelMode",
          toString: p
        }
      };
      Yg.__constructs__ = [Yg.PIXELS, Yg.LINES, Yg.PAGES, Yg.UNKNOWN];
      function Cc(a, b, c, d, e, f, k) {
        this.x = a;
        this.y = b;
        this.id = c;
        this.dx = d;
        this.dy = e;
        this.pressure = f;
        this.device = k;
      }
      h["lime.ui.Touch"] = Cc;
      Cc.__name__ = "lime.ui.Touch";
      Cc.prototype = {
        __class__: Cc
      };
      function wi(a, b) {
        this.clickCount = 0;
        this.onTextInput = new Ij();
        this.onTextEdit = new wo();
        this.onRestore = new Uc();
        this.onResize = new Wl();
        this.onRenderContextRestored = new Xl();
        this.onRenderContextLost = new Uc();
        this.onRender = new Xl();
        this.onMove = new Hj();
        this.onMouseWheel = new so();
        this.onMouseUp = new qo();
        this.onMouseMoveRelative = new Hj();
        this.onMouseMove = new Hj();
        this.onMouseDown = new ro();
        this.onMinimize = new Uc();
        this.onLeave = new Uc();
        this.onKeyUp = new Zl();
        this.onKeyDown = new Zl();
        this.onFullscreen = new Uc();
        this.onFocusOut = new Uc();
        this.onFocusIn = new Uc();
        this.onExpose = new Uc();
        this.onEnter = new Uc();
        this.onDropFile = new Ij();
        this.onDeactivate = new Uc();
        this.onClose = new Uc();
        this.onActivate = new Uc();
        this.application = a;
        this.__attributes = b ?? {};
        if (Object.prototype.hasOwnProperty.call(this.__attributes, "parameters")) {
          this.parameters = this.__attributes.parameters;
        }
        this.__height = this.__width = 0;
        this.__fullscreen = false;
        this.__scale = 1;
        this.__y = this.__x = 0;
        this.__title = Object.prototype.hasOwnProperty.call(this.__attributes, "title") ? this.__attributes.title : "";
        this.id = -1;
        this.__backend = new Ya(this);
      }
      h["lime.ui.Window"] = wi;
      wi.__name__ = "lime.ui.Window";
      wi.prototype = {
        close: function () {
          this.__backend.close();
        },
        set_cursor: function (a) {
          return this.__backend.setCursor(a);
        },
        set_fullscreen: function (a) {
          return this.__fullscreen = this.__backend.setFullscreen(a);
        },
        setTextInputRect: function (a) {
          return this.__backend.setTextInputRect(a);
        },
        __class__: wi,
        __properties__: {
          set_fullscreen: "set_fullscreen",
          set_cursor: "set_cursor"
        }
      };
      function Nf() {
        this.data = new V();
        this.paths = [];
      }
      h["lime.utils.AssetBundle"] = Nf;
      Nf.__name__ = "lime.utils.AssetBundle";
      Nf.fromBytes = function (a) {
        a = new Dj(a);
        return Nf.__extractBundle(a);
      };
      Nf.loadFromBytes = function (a) {
        return Cb.withValue(Nf.fromBytes(a));
      };
      Nf.loadFromFile = function (a) {
        return Ch.loadFromFile(a).then(Nf.loadFromBytes);
      };
      Nf.__extractBundle = function (a) {
        var b = ki.readZip(a);
        a = new Nf();
        for (b = b.h; b != null;) {
          var c = b.item;
          b = b.next;
          if (c.compressed) {
            var d = a.data;
            var e = c.fileName;
            var f = Ch.decompress(c.data, cm.DEFLATE);
            d.h[e] = f;
          } else {
            a.data.h[c.fileName] = c.data;
          }
          a.paths.push(c.fileName);
        }
        return a;
      };
      Nf.prototype = {
        __class__: Nf
      };
      function Eo() {
        this.enabled = true;
        this.audio = new V();
        this.font = new V();
        this.image = new V();
        this.version = 602891;
      }
      h["lime.utils.AssetCache"] = Eo;
      Eo.__name__ = "lime.utils.AssetCache";
      Eo.prototype = {
        exists: function (a, b) {
          if ((b == "IMAGE" || b == null) && Object.prototype.hasOwnProperty.call(this.image.h, a) || (b == "FONT" || b == null) && Object.prototype.hasOwnProperty.call(this.font.h, a) || (b == "SOUND" || b == "MUSIC" || b == null) && Object.prototype.hasOwnProperty.call(this.audio.h, a)) {
            return true;
          } else {
            return false;
          }
        },
        set: function (a, b, c) {
          switch (b) {
            case "FONT":
              this.font.h[a] = c;
              break;
            case "IMAGE":
              if (!(c instanceof Eb)) {
                throw K.thrown("Cannot cache non-Image asset: " + H.string(c) + " as Image");
              }
              this.image.h[a] = c;
              break;
            case "MUSIC":
            case "SOUND":
              if (!(c instanceof $c)) {
                throw K.thrown("Cannot cache non-AudioBuffer asset: " + H.string(c) + " as AudioBuffer");
              }
              this.audio.h[a] = c;
              break;
            default:
              throw K.thrown(b + " assets are not cachable");
          }
        },
        clear: function (a) {
          if (a == null) {
            this.audio = new V();
            this.font = new V();
            this.image = new V();
          } else {
            var b = this.audio.h;
            b = Object.keys(b);
            for (var c = b.length, d = 0; d < c;) {
              var e = b[d++];
              if (w.startsWith(e, a)) {
                var f = this.audio;
                if (Object.prototype.hasOwnProperty.call(f.h, e)) {
                  delete f.h[e];
                }
              }
            }
            b = this.font.h;
            b = Object.keys(b);
            c = b.length;
            for (d = 0; d < c;) {
              e = b[d++];
              if (w.startsWith(e, a)) {
                f = this.font;
                if (Object.prototype.hasOwnProperty.call(f.h, e)) {
                  delete f.h[e];
                }
              }
            }
            b = this.image.h;
            b = Object.keys(b);
            c = b.length;
            for (d = 0; d < c;) {
              e = b[d++];
              if (w.startsWith(e, a)) {
                f = this.image;
                if (Object.prototype.hasOwnProperty.call(f.h, e)) {
                  delete f.h[e];
                }
              }
            }
          }
        },
        __class__: Eo
      };
      function jc() {
        this.types = new V();
        this.sizes = new V();
        this.preload = new V();
        this.paths = new V();
        this.pathGroups = new V();
        this.classTypes = new V();
        this.cachedText = new V();
        this.cachedImages = new V();
        this.cachedFonts = new V();
        this.cachedBytes = new V();
        this.cachedAudioBuffers = new V();
        this.onChange = new Uc();
        this.bytesTotal = this.bytesLoaded = 0;
      }
      h["lime.utils.AssetLibrary"] = jc;
      jc.__name__ = "lime.utils.AssetLibrary";
      jc.fromBundle = function (a) {
        if (Object.prototype.hasOwnProperty.call(a.data.h, "library.json")) {
          var b = Ud.fromBytes(a.data.h["library.json"]);
          if (b != null) {
            if (b.libraryType == null) {
              var c = new jc();
            } else {
              c = h[b.libraryType];
              if (c != null) {
                c = Db.createInstance(c, b.libraryArgs);
              } else {
                Ua.warn("Could not find library type: " + b.libraryType, {
                  fileName: "lime/utils/AssetLibrary.hx",
                  lineNumber: 122,
                  className: "lime.utils.AssetLibrary",
                  methodName: "fromBundle"
                });
                return null;
              }
            }
            c.__fromBundle(a, b);
            return c;
          }
        } else {
          c = new jc();
          c.__fromBundle(a);
          return c;
        }
        return null;
      };
      jc.fromManifest = function (a) {
        if (a == null) {
          return null;
        }
        if (a.libraryType == null) {
          var b = new jc();
        } else {
          b = h[a.libraryType];
          if (b != null) {
            b = Db.createInstance(b, a.libraryArgs);
          } else {
            Ua.warn("Could not find library type: " + a.libraryType, {
              fileName: "lime/utils/AssetLibrary.hx",
              lineNumber: 160,
              className: "lime.utils.AssetLibrary",
              methodName: "fromManifest"
            });
            return null;
          }
        }
        b.__fromManifest(a);
        return b;
      };
      jc.prototype = {
        exists: function (a, b) {
          b = b != null ? ta.__cast(b, String) : null;
          a = this.types.h[a];
          if (a == null || a != b && (b != "SOUND" && b != "MUSIC" || a != "MUSIC" && a != "SOUND") && b != "BINARY" && b != null && (a != "BINARY" || b != "TEXT")) {
            return false;
          } else {
            return true;
          }
        },
        getAsset: function (a, b) {
          switch (b) {
            case "BINARY":
              return this.getBytes(a);
            case "FONT":
              return this.getFont(a);
            case "IMAGE":
              return this.getImage(a);
            case "MUSIC":
            case "SOUND":
              return this.getAudioBuffer(a);
            case "TEMPLATE":
              throw K.thrown("Not sure how to get template: " + a);
            case "TEXT":
              return this.getText(a);
            default:
              throw K.thrown("Unknown asset type: " + b);
          }
        },
        getAudioBuffer: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a)) {
            return this.cachedAudioBuffers.h[a];
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return $c.fromBytes(ta.__cast(Db.createInstance(this.classTypes.h[a], []), bc));
          } else {
            return $c.fromFile(this.getPath(a));
          }
        },
        getBytes: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a)) {
            return this.cachedBytes.h[a];
          }
          if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) {
            var b = Ch.ofString(this.cachedText.h[a]);
            return this.cachedBytes.h[a] = b;
          }
          if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return ta.__cast(Db.createInstance(this.classTypes.h[a], []), bc);
          } else {
            return Ch.fromFile(this.getPath(a));
          }
        },
        getFont: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a)) {
            return this.cachedFonts.h[a];
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return ta.__cast(Db.createInstance(this.classTypes.h[a], []), Y);
          } else {
            return Y.fromFile(this.getPath(a));
          }
        },
        getImage: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedImages.h, a)) {
            return this.cachedImages.h[a];
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return ta.__cast(Db.createInstance(this.classTypes.h[a], []), Eb);
          } else {
            return Eb.fromFile(this.getPath(a));
          }
        },
        getPath: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.paths.h, a)) {
            return this.paths.h[a];
          } else if (Object.prototype.hasOwnProperty.call(this.pathGroups.h, a)) {
            return this.pathGroups.h[a][0];
          } else {
            return null;
          }
        },
        getText: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) {
            return this.cachedText.h[a];
          }
          a = this.getBytes(a);
          if (a == null) {
            return null;
          } else {
            return a.getString(0, a.length);
          }
        },
        isLocal: function (a, b) {
          if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return true;
          }
          b = ta.__cast(b, String);
          if (b == null) {
            if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) || Object.prototype.hasOwnProperty.call(this.cachedText.h, a) || Object.prototype.hasOwnProperty.call(this.cachedImages.h, a) || Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a)) {
              return true;
            } else {
              return Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a);
            }
          }
          switch (b) {
            case "FONT":
              return Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a);
            case "IMAGE":
              return Object.prototype.hasOwnProperty.call(this.cachedImages.h, a);
            case "MUSIC":
            case "SOUND":
              return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a);
            default:
              if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a)) {
                return true;
              } else {
                return Object.prototype.hasOwnProperty.call(this.cachedText.h, a);
              }
          }
        },
        list: function (a) {
          var b = a != null ? ta.__cast(a, String) : null;
          var c = [];
          var d = Object.keys(this.types.h);
          for (var e = d.length, f = 0; f < e;) {
            var k = d[f++];
            if (b == null || this.exists(k, a)) {
              c.push(k);
            }
          }
          return c;
        },
        loadAsset: function (a, b) {
          switch (b) {
            case "BINARY":
              return this.loadBytes(a);
            case "FONT":
              return this.loadFont(a);
            case "IMAGE":
              return this.loadImage(a);
            case "MUSIC":
            case "SOUND":
              return this.loadAudioBuffer(a);
            case "TEMPLATE":
              throw K.thrown("Not sure how to load template: " + a);
            case "TEXT":
              return this.loadText(a);
            default:
              throw K.thrown("Unknown asset type: " + b);
          }
        },
        load: function () {
          if (this.loaded) {
            return Cb.withValue(this);
          }
          if (this.promise == null) {
            this.promise = new Md();
            this.bytesLoadedCache = new V();
            this.assetsLoaded = 0;
            this.assetsTotal = 1;
            var a = Object.keys(this.preload.h);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              if (this.preload.h[d]) {
                Ua.verbose("Preloading asset: " + d + " [" + this.types.h[d] + "]", {
                  fileName: "lime/utils/AssetLibrary.hx",
                  lineNumber: 408,
                  className: "lime.utils.AssetLibrary",
                  methodName: "load"
                });
                var e = this.types.h[d];
                if (e != null) {
                  switch (e) {
                    case "BINARY":
                      this.assetsTotal++;
                      e = this.loadBytes(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].load_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadBytes_onComplete(a[0], c);
                        };
                      }([d], [this]));
                      break;
                    case "FONT":
                      this.assetsTotal++;
                      e = this.loadFont(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].load_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadFont_onComplete(a[0], c);
                        };
                      }([d], [this]));
                      break;
                    case "IMAGE":
                      this.assetsTotal++;
                      e = this.loadImage(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].load_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadImage_onComplete(a[0], c);
                        };
                      }([d], [this]));
                      break;
                    case "MUSIC":
                    case "SOUND":
                      this.assetsTotal++;
                      e = this.loadAudioBuffer(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].loadAudioBuffer_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadAudioBuffer_onComplete(a[0], c);
                        };
                      }([d], [this]));
                      break;
                    case "TEXT":
                      this.assetsTotal++;
                      e = this.loadText(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].load_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadText_onComplete(a[0], c);
                        };
                      }([d], [this]));
                  }
                }
              }
            }
            this.__assetLoaded(null);
          }
          return this.promise.future;
        },
        loadAudioBuffer: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a)) {
            return Cb.withValue(this.cachedAudioBuffers.h[a]);
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return Cb.withValue($c.fromBytes(ta.__cast(Db.createInstance(this.classTypes.h[a], []), bc)));
          } else if (Object.prototype.hasOwnProperty.call(this.pathGroups.h, a)) {
            return $c.loadFromFiles(this.pathGroups.h[a]);
          } else {
            return $c.loadFromFile(this.paths.h[a]);
          }
        },
        loadBytes: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a)) {
            return Cb.withValue(this.cachedBytes.h[a]);
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return Cb.withValue(Db.createInstance(this.classTypes.h[a], []));
          } else {
            return Ch.loadFromFile(this.getPath(a));
          }
        },
        loadFont: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a)) {
            return Cb.withValue(this.cachedFonts.h[a]);
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            a = Db.createInstance(this.classTypes.h[a], []);
            return a.__loadFromName(a.name);
          } else {
            return Y.loadFromName(this.getPath(a));
          }
        },
        loadImage: function (a) {
          var b = this;
          if (Object.prototype.hasOwnProperty.call(this.cachedImages.h, a)) {
            return Cb.withValue(this.cachedImages.h[a]);
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return Cb.withValue(Db.createInstance(this.classTypes.h[a], []));
          } else if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a)) {
            return Eb.loadFromBytes(this.cachedBytes.h[a]).then(function (c) {
              var d = b.cachedBytes;
              if (Object.prototype.hasOwnProperty.call(d.h, a)) {
                delete d.h[a];
              }
              b.cachedImages.h[a] = c;
              return Cb.withValue(c);
            });
          } else {
            return Eb.loadFromFile(this.getPath(a));
          }
        },
        loadText: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) {
            return Cb.withValue(this.cachedText.h[a]);
          }
          if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) || Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            var b = this.getBytes(a);
            if (b == null) {
              return Cb.withValue(null);
            }
            b = b.getString(0, b.length);
            this.cachedText.h[a] = b;
            return Cb.withValue(b);
          }
          return new vi().load(this.getPath(a));
        },
        unload: function () {
          this.cachedBytes.h = Object.create(null);
          this.cachedFonts.h = Object.create(null);
          this.cachedImages.h = Object.create(null);
          this.cachedAudioBuffers.h = Object.create(null);
          this.cachedText.h = Object.create(null);
        },
        __assetLoaded: function (a) {
          this.assetsLoaded++;
          if (a != null) {
            Ua.verbose("Loaded asset: " + a + " [" + this.types.h[a] + "] (" + (this.assetsLoaded - 1) + "/" + (this.assetsTotal - 1) + ")", {
              fileName: "lime/utils/AssetLibrary.hx",
              lineNumber: 637,
              className: "lime.utils.AssetLibrary",
              methodName: "__assetLoaded"
            });
          }
          if (a != null) {
            var b = Object.prototype.hasOwnProperty.call(this.sizes.h, a) ? this.sizes.h[a] : 0;
            if (Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h, a)) {
              var c = this.bytesLoadedCache.h[a];
              if (c < b) {
                this.bytesLoaded += b - c;
              }
            } else {
              this.bytesLoaded += b;
            }
            this.bytesLoadedCache.h[a] = b;
          }
          if (this.assetsLoaded < this.assetsTotal) {
            this.promise.progress(this.bytesLoaded, this.bytesTotal);
          } else {
            this.loaded = true;
            this.promise.progress(this.bytesTotal, this.bytesTotal);
            this.promise.complete(this);
          }
        },
        __cacheBreak: function (a) {
          return oa.__cacheBreak(a);
        },
        __fromBundle: function (a, b) {
          if (b != null) {
            var c = 0;
            for (b = b.assets; c < b.length;) {
              var d = b[c];
              ++c;
              var e = Object.prototype.hasOwnProperty.call(d, "id") ? d.id : d.path;
              var f = a.data.h[d.path];
              if (Object.prototype.hasOwnProperty.call(d, "type")) {
                var k = d.type;
                if (k == "TEXT") {
                  this.cachedText.h[e] = f != null ? H.string(f) : null;
                } else {
                  this.cachedBytes.h[e] = f;
                }
                this.types.h[e] = d.type;
              } else {
                this.cachedBytes.h[e] = f;
                this.types.h[e] = "BINARY";
              }
            }
          } else {
            c = 0;
            b = a.paths;
            while (c < b.length) {
              e = b[c];
              ++c;
              this.cachedBytes.h[e] = a.data.h[e];
              this.types.h[e] = "BINARY";
            }
          }
        },
        __fromManifest: function (a) {
          var b = a.version >= 2;
          var c = a.rootPath;
          if (c == null) {
            c = "";
          }
          if (c != "") {
            c += "/";
          }
          for (var d = 0, e = a.assets; d < e.length;) {
            var f = e[d];
            ++d;
            var k = b && Object.prototype.hasOwnProperty.call(f, "size") ? f.size : 100;
            var g = Object.prototype.hasOwnProperty.call(f, "id") ? f.id : f.path;
            if (Object.prototype.hasOwnProperty.call(f, "path")) {
              var n = this.paths;
              var p = this.__cacheBreak(this.__resolvePath(c + H.string(ma.field(f, "path"))));
              n.h[g] = p;
            }
            if (Object.prototype.hasOwnProperty.call(f, "pathGroup")) {
              n = ma.field(f, "pathGroup");
              p = 0;
              for (var l = n.length; p < l;) {
                var m = p++;
                n[m] = this.__cacheBreak(this.__resolvePath(c + n[m]));
              }
              this.pathGroups.h[g] = n;
            }
            this.sizes.h[g] = k;
            this.types.h[g] = f.type;
            if (Object.prototype.hasOwnProperty.call(f, "preload")) {
              this.preload.h[g] = ma.field(f, "preload");
            }
            if (Object.prototype.hasOwnProperty.call(f, "className")) {
              k = ma.field(f, "className");
              k = h[k];
              this.classTypes.h[g] = k;
            }
          }
          d = this.bytesTotal = 0;
          for (e = a.assets; d < e.length;) {
            f = e[d];
            ++d;
            g = Object.prototype.hasOwnProperty.call(f, "id") ? f.id : f.path;
            if (Object.prototype.hasOwnProperty.call(this.preload.h, g) && this.preload.h[g] && Object.prototype.hasOwnProperty.call(this.sizes.h, g)) {
              this.bytesTotal += this.sizes.h[g];
            }
          }
        },
        __resolvePath: function (a) {
          a = w.replace(a, "\\", "/");
          var b = a.indexOf(":");
          if (w.startsWith(a, "http") && b > 0) {
            b += 3;
            a = M.substr(a, 0, b) + w.replace(M.substr(a, b, null), "//", "/");
          } else {
            a = w.replace(a, "//", "/");
          }
          if (a.indexOf("./") > -1) {
            a = a.split("/");
            b = [];
            for (var c = 0, d = a.length; c < d;) {
              var e = c++;
              if (a[e] == "..") {
                if (e == 0 || b[e - 1] == "..") {
                  b.push("..");
                } else {
                  b.pop();
                }
              } else if (a[e] == ".") {
                if (e == 0) {
                  b.push(".");
                }
              } else {
                b.push(a[e]);
              }
            }
            a = b.join("/");
          }
          return a;
        },
        loadAudioBuffer_onComplete: function (a, b) {
          this.cachedAudioBuffers.h[a] = b;
          if (Object.prototype.hasOwnProperty.call(this.pathGroups.h, a)) {
            var c = this.pathGroups.h[a];
            var d = Object.keys(this.pathGroups.h);
            for (var e = d.length, f = 0; f < e;) {
              var k = d[f++];
              if (k != a) {
                for (var g = 0; g < c.length;) {
                  var n = c[g];
                  ++g;
                  if (this.pathGroups.h[k].indexOf(n) > -1) {
                    this.cachedAudioBuffers.h[k] = b;
                    break;
                  }
                }
              }
            }
          }
          this.__assetLoaded(a);
        },
        loadAudioBuffer_onError: function (a, b) {
          if (b != null && b != "") {
            Ua.warn("Could not load \"" + a + "\": " + H.string(b), {
              fileName: "lime/utils/AssetLibrary.hx",
              lineNumber: 883,
              className: "lime.utils.AssetLibrary",
              methodName: "loadAudioBuffer_onError"
            });
          } else {
            Ua.warn("Could not load \"" + a + "\"", {
              fileName: "lime/utils/AssetLibrary.hx",
              lineNumber: 887,
              className: "lime.utils.AssetLibrary",
              methodName: "loadAudioBuffer_onError"
            });
          }
          this.loadAudioBuffer_onComplete(a, new $c());
        },
        loadBytes_onComplete: function (a, b) {
          this.cachedBytes.h[a] = b;
          this.__assetLoaded(a);
        },
        loadFont_onComplete: function (a, b) {
          this.cachedFonts.h[a] = b;
          this.__assetLoaded(a);
        },
        loadImage_onComplete: function (a, b) {
          this.cachedImages.h[a] = b;
          this.__assetLoaded(a);
        },
        loadText_onComplete: function (a, b) {
          this.cachedText.h[a] = b;
          this.__assetLoaded(a);
        },
        load_onError: function (a, b) {
          if (b != null && b != "") {
            this.promise.error("Error loading asset \"" + a + "\": " + H.string(b));
          } else {
            this.promise.error("Error loading asset \"" + a + "\"");
          }
        },
        load_onProgress: function (a, b, c) {
          if (b > 0) {
            var d = this.sizes.h[a];
            if (c > 0) {
              b /= c;
              if (b > 1) {
                b = 1;
              }
              b = Math.floor(b * d);
            } else if (b > d) {
              b = d;
            }
            if (Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h, a)) {
              d = this.bytesLoadedCache.h[a];
              if (b != d) {
                this.bytesLoaded += b - d;
              }
            } else {
              this.bytesLoaded += b;
            }
            this.bytesLoadedCache.h[a] = b;
            this.promise.progress(this.bytesLoaded, this.bytesTotal);
          }
        },
        __class__: jc
      };
      function Ud() {
        this.assets = [];
        this.libraryArgs = [];
        this.version = 2;
      }
      h["lime.utils.AssetManifest"] = Ud;
      Ud.__name__ = "lime.utils.AssetManifest";
      Ud.fromBytes = function (a, b) {
        if (a != null) {
          return Ud.parse(a.getString(0, a.length), b);
        } else {
          return null;
        }
      };
      Ud.loadFromFile = function (a, b) {
        a = Ud.__resolvePath(a);
        b = Ud.__resolveRootPath(b, a);
        if (a == null) {
          return null;
        } else {
          return Ch.loadFromFile(a).then(function (a) {
            return Cb.withValue(Ud.fromBytes(a, b));
          });
        }
      };
      Ud.parse = function (a, b) {
        if (a == null || a == "") {
          return null;
        }
        a = JSON.parse(a);
        var c = new Ud();
        if (Object.prototype.hasOwnProperty.call(a, "name")) {
          c.name = a.name;
        }
        if (Object.prototype.hasOwnProperty.call(a, "libraryType")) {
          c.libraryType = a.libraryType;
        }
        if (Object.prototype.hasOwnProperty.call(a, "libraryArgs")) {
          c.libraryArgs = a.libraryArgs;
        }
        if (Object.prototype.hasOwnProperty.call(a, "assets")) {
          var d = a.assets;
          if (Object.prototype.hasOwnProperty.call(a, "version") && a.version <= 2) {
            c.assets = de.run(d);
          } else {
            c.assets = d;
          }
        }
        if (Object.prototype.hasOwnProperty.call(a, "rootPath")) {
          c.rootPath = a.rootPath;
        }
        if (b != null && b != "") {
          c.rootPath = c.rootPath == null || c.rootPath == "" ? b : b + "/" + c.rootPath;
        }
        return c;
      };
      Ud.__resolvePath = function (a) {
        if (a == null) {
          return null;
        }
        var b = a.indexOf("?");
        var c = b > -1 ? M.substr(a, 0, b) : a;
        for (c = w.replace(c, "\\", "/"); w.endsWith(c, "/");) {
          c = M.substr(c, 0, c.length - 1);
        }
        if (w.endsWith(c, ".bundle")) {
          if (b > -1) {
            return c + "/library.json" + M.substr(a, b, null);
          } else {
            return c + "/library.json";
          }
        } else {
          return a;
        }
      };
      Ud.__resolveRootPath = function (a, b) {
        if (a != null) {
          return a;
        }
        a = b.indexOf("?");
        a = a > -1 ? M.substr(b, 0, a) : b;
        for (a = w.replace(a, "\\", "/"); w.endsWith(a, "/");) {
          if (a == "/") {
            return a;
          }
          a = M.substr(a, 0, a.length - 1);
        }
        if (w.endsWith(a, ".bundle")) {
          return a;
        } else {
          return Jc.directory(a);
        }
      };
      Ud.prototype = {
        __class__: Ud
      };
      function oa() {}
      h["lime.utils.Assets"] = oa;
      oa.__name__ = "lime.utils.Assets";
      oa.exists = function (a, b) {
        if (b == null) {
          b = "BINARY";
        }
        var c = a.indexOf(":");
        var d = a.substring(0, c);
        a = a.substring(c + 1);
        d = oa.getLibrary(d);
        if (d != null) {
          return d.exists(a, b);
        } else {
          return false;
        }
      };
      oa.getAsset = function (a, b, c) {
        if (c && oa.cache.enabled) {
          switch (b) {
            case "FONT":
              var d = oa.cache.font.h[a];
              if (d != null) {
                return d;
              }
              break;
            case "IMAGE":
              d = oa.cache.image.h[a];
              if (oa.isValidImage(d)) {
                return d;
              }
              break;
            case "MUSIC":
            case "SOUND":
              d = oa.cache.audio.h[a];
              if (oa.isValidAudio(d)) {
                return d;
              }
              break;
            case "TEMPLATE":
              throw K.thrown("Not sure how to get template: " + a);
            case "BINARY":
            case "TEXT":
              c = false;
              break;
            default:
              return null;
          }
        }
        var e = a.indexOf(":");
        d = a.substring(0, e);
        e = a.substring(e + 1);
        var f = oa.getLibrary(d);
        if (f != null) {
          if (f.exists(e, b)) {
            if (f.isLocal(e, b)) {
              d = f.getAsset(e, b);
              if (c && oa.cache.enabled) {
                oa.cache.set(a, b, d);
              }
              return d;
            }
            Ua.error(b + " asset \"" + a + "\" exists, but only asynchronously", {
              fileName: "lime/utils/Assets.hx",
              lineNumber: 133,
              className: "lime.utils.Assets",
              methodName: "getAsset"
            });
          } else {
            Ua.error("There is no " + b + " asset with an ID of \"" + a + "\"", {
              fileName: "lime/utils/Assets.hx",
              lineNumber: 138,
              className: "lime.utils.Assets",
              methodName: "getAsset"
            });
          }
        } else {
          Ua.error(oa.__libraryNotFound(d), {
            fileName: "lime/utils/Assets.hx",
            lineNumber: 143,
            className: "lime.utils.Assets",
            methodName: "getAsset"
          });
        }
        return null;
      };
      oa.getAudioBuffer = function (a, b) {
        if (b == null) {
          b = true;
        }
        return oa.getAsset(a, "SOUND", b);
      };
      oa.getBytes = function (a) {
        return oa.getAsset(a, "BINARY", false);
      };
      oa.getFont = function (a, b) {
        if (b == null) {
          b = true;
        }
        return oa.getAsset(a, "FONT", b);
      };
      oa.getImage = function (a, b) {
        if (b == null) {
          b = true;
        }
        return oa.getAsset(a, "IMAGE", b);
      };
      oa.getLibrary = function (a) {
        if (a == null || a == "") {
          a = "default";
        }
        return oa.libraries.h[a];
      };
      oa.getText = function (a) {
        return oa.getAsset(a, "TEXT", false);
      };
      oa.hasLibrary = function (a) {
        if (a == null || a == "") {
          a = "default";
        }
        return Object.prototype.hasOwnProperty.call(oa.libraries.h, a);
      };
      oa.isLocal = function (a, b, c) {
        if (c == null) {
          c = true;
        }
        if (c && oa.cache.enabled && oa.cache.exists(a, b)) {
          return true;
        }
        var d = a.indexOf(":");
        c = a.substring(0, d);
        a = a.substring(d + 1);
        c = oa.getLibrary(c);
        if (c != null) {
          return c.isLocal(a, b);
        } else {
          return false;
        }
      };
      oa.isValidAudio = function (a) {
        return a != null;
      };
      oa.isValidImage = function (a) {
        if (a != null) {
          return a.buffer != null;
        } else {
          return false;
        }
      };
      oa.list = function (a) {
        var b = [];
        var c = oa.libraries.h;
        var d = Object.keys(c);
        for (var e = d.length, f = 0; f < e;) {
          var k = c[d[f++]].list(a);
          if (k != null) {
            b = b.concat(k);
          }
        }
        return b;
      };
      oa.loadAsset = function (a, b, c) {
        if (c && oa.cache.enabled) {
          switch (b) {
            case "FONT":
              var d = oa.cache.font.h[a];
              if (d != null) {
                return Cb.withValue(d);
              }
              break;
            case "IMAGE":
              d = oa.cache.image.h[a];
              if (oa.isValidImage(d)) {
                return Cb.withValue(d);
              }
              break;
            case "MUSIC":
            case "SOUND":
              d = oa.cache.audio.h[a];
              if (oa.isValidAudio(d)) {
                return Cb.withValue(d);
              }
              break;
            case "TEMPLATE":
              throw K.thrown("Not sure how to get template: " + a);
            case "BINARY":
            case "TEXT":
              c = false;
              break;
            default:
              return null;
          }
        }
        var e = a.indexOf(":");
        d = a.substring(0, e);
        e = a.substring(e + 1);
        var f = oa.getLibrary(d);
        if (f != null) {
          if (f.exists(e, b)) {
            d = f.loadAsset(e, b);
            if (c && oa.cache.enabled) {
              d.onComplete(function (c) {
                oa.cache.set(a, b, c);
              });
            }
            return d;
          }
          return Cb.withError("There is no " + b + " asset with an ID of \"" + a + "\"");
        }
        return Cb.withError(oa.__libraryNotFound(d));
      };
      oa.loadAudioBuffer = function (a, b) {
        if (b == null) {
          b = true;
        }
        return oa.loadAsset(a, "SOUND", b);
      };
      oa.loadLibrary = function (a) {
        var b = new Md();
        var c = oa.getLibrary(a);
        if (c != null) {
          return c.load();
        }
        c = a;
        var d = null;
        if (Object.prototype.hasOwnProperty.call(oa.bundlePaths.h, a)) {
          Nf.loadFromFile(oa.bundlePaths.h[a]).onComplete(function (c) {
            if (c == null) {
              b.error("Cannot load bundle for library \"" + a + "\"");
            } else {
              c = jc.fromBundle(c);
              if (c == null) {
                b.error("Cannot open library \"" + a + "\"");
              } else {
                oa.libraries.h[a] = c;
                c.onChange.add((u = oa.onChange, l(u, u.dispatch)));
                b.completeWith(c.load());
              }
            }
          }).onError(function (c) {
            b.error("There is no asset library with an ID of \"" + a + "\"");
          });
        } else {
          if (Object.prototype.hasOwnProperty.call(oa.libraryPaths.h, a)) {
            c = oa.libraryPaths.h[a];
            d = Jc.directory(c);
          } else {
            if (w.endsWith(c, ".bundle")) {
              d = c;
              c += "/library.json";
            } else {
              d = Jc.directory(c);
            }
            c = oa.__cacheBreak(c);
          }
          Ud.loadFromFile(c, d).onComplete(function (c) {
            if (c == null) {
              b.error("Cannot parse asset manifest for library \"" + a + "\"");
            } else {
              c = jc.fromManifest(c);
              if (c == null) {
                b.error("Cannot open library \"" + a + "\"");
              } else {
                oa.libraries.h[a] = c;
                c.onChange.add((u = oa.onChange, l(u, u.dispatch)));
                b.completeWith(c.load());
              }
            }
          }).onError(function (c) {
            b.error("There is no asset library with an ID of \"" + a + "\"");
          });
        }
        return b.future;
      };
      oa.registerLibrary = function (a, b) {
        if (a == null || a == "") {
          a = "default";
        }
        if (Object.prototype.hasOwnProperty.call(oa.libraries.h, a)) {
          if (oa.libraries.h[a] == b) {
            return;
          }
          oa.unloadLibrary(a);
        }
        if (b != null) {
          b.onChange.add(oa.library_onChange);
        }
        oa.libraries.h[a] = b;
      };
      oa.unloadLibrary = function (a) {
        if (a == null || a == "") {
          a = "default";
        }
        var b = oa.libraries.h[a];
        if (b != null) {
          oa.cache.clear(a + ":");
          b.onChange.remove(oa.library_onChange);
          b.unload();
        }
        b = oa.libraries;
        if (Object.prototype.hasOwnProperty.call(b.h, a)) {
          delete b.h[a];
        }
      };
      oa.__cacheBreak = function (a) {
        if (oa.cache.version > 0) {
          a = a.indexOf("?") > -1 ? a + ("&" + oa.cache.version) : a + ("?" + oa.cache.version);
        }
        return a;
      };
      oa.__libraryNotFound = function (a) {
        if (a == null || a == "") {
          a = "default";
        }
        if (rb.current == null || rb.current.__preloader == null || rb.current.__preloader.complete) {
          return "There is no asset library named \"" + a + "\"";
        } else {
          return "There is no asset library named \"" + a + "\", or it is not yet preloaded";
        }
      };
      oa.library_onChange = function () {
        oa.cache.clear();
        oa.onChange.dispatch();
      };
      function Fo(a, b) {
        this.bytes = a;
        this.offset = b;
      }
      h["lime.utils.BytePointerData"] = Fo;
      Fo.__name__ = "lime.utils.BytePointerData";
      Fo.prototype = {
        __class__: Fo
      };
      var Ch = {
        _new: function (a, b) {
          return new bc(b);
        },
        decompress: function (a, b) {
          switch (b._hx_index) {
            case 0:
              return go.decompress(a);
            case 1:
              return ip.decompress(a);
            case 2:
              return jp.decompress(a);
            case 3:
              return kp.decompress(a);
          }
        },
        fromBytes: function (a) {
          if (a == null) {
            return null;
          } else {
            return Ch._new(a.length, a.b.bufferValue);
          }
        },
        fromFile: function (a) {
          return null;
        },
        loadFromFile: function (a) {
          return new am().load(a);
        },
        ofString: function (a) {
          a = bc.ofString(a);
          return Ch._new(a.length, a.b.bufferValue);
        }
      };
      var cm = x["lime.utils.CompressionAlgorithm"] = {
        __ename__: "lime.utils.CompressionAlgorithm",
        __constructs__: null,
        DEFLATE: {
          _hx_name: "DEFLATE",
          _hx_index: 0,
          __enum__: "lime.utils.CompressionAlgorithm",
          toString: p
        },
        GZIP: {
          _hx_name: "GZIP",
          _hx_index: 1,
          __enum__: "lime.utils.CompressionAlgorithm",
          toString: p
        },
        LZMA: {
          _hx_name: "LZMA",
          _hx_index: 2,
          __enum__: "lime.utils.CompressionAlgorithm",
          toString: p
        },
        ZLIB: {
          _hx_name: "ZLIB",
          _hx_index: 3,
          __enum__: "lime.utils.CompressionAlgorithm",
          toString: p
        }
      };
      cm.__constructs__ = [cm.DEFLATE, cm.GZIP, cm.LZMA, cm.ZLIB];
      var cj = {
        toArrayBufferView: function (a) {
          return a;
        }
      };
      function Ua() {}
      h["lime.utils.Log"] = Ua;
      Ua.__name__ = "lime.utils.Log";
      Ua.debug = function (a, b) {
        if (Ua.level >= 4) {
          console.debug("[" + b.className + "] " + H.string(a));
        }
      };
      Ua.error = function (a, b) {
        if (Ua.level >= 1) {
          a = "[" + b.className + "] ERROR: " + H.string(a);
          if (Ua.throwErrors) {
            throw K.thrown(a);
          }
          console.error(a);
        }
      };
      Ua.info = function (a, b) {
        if (Ua.level >= 3) {
          console.info("[" + b.className + "] " + H.string(a));
        }
      };
      Ua.verbose = function (a, b) {
        if (Ua.level >= 5) {
          a = "[" + b.className + "] " + H.string(a);
          console.log(a);
        }
      };
      Ua.warn = function (a, b) {
        if (Ua.level >= 2) {
          console.warn("[" + b.className + "] WARNING: " + H.string(a));
        }
      };
      function kn() {
        this.bytesTotalCache = new V();
        this.bytesLoadedCache2 = new V();
        this.bytesLoadedCache = new Oa();
        this.onProgress = new Wl();
        this.onComplete = new Uc();
        this.bytesTotal = this.bytesLoaded = 0;
        this.libraries = [];
        this.libraryNames = [];
        this.onProgress.add(l(this, this.update));
      }
      h["lime.utils.Preloader"] = kn;
      kn.__name__ = "lime.utils.Preloader";
      kn.prototype = {
        addLibrary: function (a) {
          this.libraries.push(a);
        },
        addLibraryName: function (a) {
          if (this.libraryNames.indexOf(a) == -1) {
            this.libraryNames.push(a);
          }
        },
        load: function () {
          var a = this;
          for (var b = 0, c = this.libraries; b < c.length;) {
            var d = c[b];
            ++b;
            this.bytesTotal += d.bytesTotal;
          }
          this.loadedLibraries = -1;
          this.preloadStarted = false;
          b = 0;
          for (c = this.libraries; b < c.length;) {
            d = [c[b]];
            ++b;
            Ua.verbose("Preloading asset library", {
              fileName: "lime/utils/Preloader.hx",
              lineNumber: 134,
              className: "lime.utils.Preloader",
              methodName: "load"
            });
            d[0].load().onProgress(function (b) {
              return function (c, d) {
                a.bytesLoaded = a.bytesLoadedCache.h.__keys__[b[0].__id__] == null ? a.bytesLoaded + c : a.bytesLoaded + (c - a.bytesLoadedCache.h[b[0].__id__]);
                a.bytesLoadedCache.set(b[0], c);
                if (!a.simulateProgress) {
                  a.onProgress.dispatch(a.bytesLoaded, a.bytesTotal);
                }
              };
            }(d)).onComplete(function (b) {
              return function (c) {
                a.bytesLoaded = a.bytesLoadedCache.h.__keys__[b[0].__id__] == null ? a.bytesLoaded + b[0].bytesTotal : a.bytesLoaded + ((b[0].bytesTotal | 0) - a.bytesLoadedCache.h[b[0].__id__]);
                a.loadedAssetLibrary();
              };
            }(d)).onError(function () {
              return function (a) {
                Ua.error(a, {
                  fileName: "lime/utils/Preloader.hx",
                  lineNumber: 170,
                  className: "lime.utils.Preloader",
                  methodName: "load"
                });
              };
            }());
          }
          b = 0;
          for (c = this.libraryNames; b < c.length;) {
            ++b;
            this.bytesTotal += 200;
          }
          this.loadedLibraries++;
          this.preloadStarted = true;
          this.updateProgress();
        },
        loadedAssetLibrary: function (a) {
          this.loadedLibraries++;
          var b = this.loadedLibraries;
          if (!this.preloadStarted) {
            ++b;
          }
          var c = this.libraries.length + this.libraryNames.length;
          if (a != null) {
            Ua.verbose("Loaded asset library: " + a + " [" + b + "/" + c + "]", {
              fileName: "lime/utils/Preloader.hx",
              lineNumber: 197,
              className: "lime.utils.Preloader",
              methodName: "loadedAssetLibrary"
            });
          } else {
            Ua.verbose("Loaded asset library [" + b + "/" + c + "]", {
              fileName: "lime/utils/Preloader.hx",
              lineNumber: 201,
              className: "lime.utils.Preloader",
              methodName: "loadedAssetLibrary"
            });
          }
          this.updateProgress();
        },
        start: function () {
          if (!this.complete && !this.simulateProgress && !!this.preloadComplete) {
            this.complete = true;
            this.onComplete.dispatch();
          }
        },
        update: function (a, b) {},
        updateProgress: function () {
          var a = this;
          if (!this.simulateProgress) {
            this.onProgress.dispatch(this.bytesLoaded, this.bytesTotal);
          }
          if (this.loadedLibraries == this.libraries.length && !this.initLibraryNames) {
            this.initLibraryNames = true;
            for (var b = 0, c = this.libraryNames; b < c.length;) {
              var d = [c[b]];
              ++b;
              Ua.verbose("Preloading asset library: " + d[0], {
                fileName: "lime/utils/Preloader.hx",
                lineNumber: 239,
                className: "lime.utils.Preloader",
                methodName: "updateProgress"
              });
              oa.loadLibrary(d[0]).onProgress(function (b) {
                return function (c, d) {
                  if (d > 0) {
                    if (!Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h, b[0])) {
                      a.bytesTotalCache.h[b[0]] = d;
                      a.bytesTotal += d - 200;
                    }
                    if (c > d) {
                      c = d;
                    }
                    if (Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h, b[0])) {
                      a.bytesLoaded += c - a.bytesLoadedCache2.h[b[0]];
                    } else {
                      a.bytesLoaded += c;
                    }
                    a.bytesLoadedCache2.h[b[0]] = c;
                    if (!a.simulateProgress) {
                      a.onProgress.dispatch(a.bytesLoaded, a.bytesTotal);
                    }
                  }
                };
              }(d)).onComplete(function (b) {
                return function (c) {
                  c = 200;
                  if (Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h, b[0])) {
                    c = a.bytesTotalCache.h[b[0]];
                  }
                  if (Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h, b[0])) {
                    a.bytesLoaded += c - a.bytesLoadedCache2.h[b[0]];
                  } else {
                    a.bytesLoaded += c;
                  }
                  a.loadedAssetLibrary(b[0]);
                };
              }(d)).onError(function () {
                return function (a) {
                  Ua.error(a, {
                    fileName: "lime/utils/Preloader.hx",
                    lineNumber: 293,
                    className: "lime.utils.Preloader",
                    methodName: "updateProgress"
                  });
                };
              }());
            }
          }
          if (!this.simulateProgress && this.loadedLibraries == this.libraries.length + this.libraryNames.length) {
            if (!this.preloadComplete) {
              this.preloadComplete = true;
              Ua.verbose("Preload complete", {
                fileName: "lime/utils/Preloader.hx",
                lineNumber: 306,
                className: "lime.utils.Preloader",
                methodName: "updateProgress"
              });
            }
            this.start();
          }
        },
        __class__: kn
      };
      var Of = x["objects.Alignment"] = {
        __ename__: "objects.Alignment",
        __constructs__: null,
        LEFT: {
          _hx_name: "LEFT",
          _hx_index: 0,
          __enum__: "objects.Alignment",
          toString: p
        },
        CENTERED: {
          _hx_name: "CENTERED",
          _hx_index: 1,
          __enum__: "objects.Alignment",
          toString: p
        },
        RIGHT: {
          _hx_name: "RIGHT",
          _hx_index: 2,
          __enum__: "objects.Alignment",
          toString: p
        }
      };
      Of.__constructs__ = [Of.LEFT, Of.CENTERED, Of.RIGHT];
      function Jb(a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (c == null) {
          c = "";
        }
        var e = 0;
        var f = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = fa.pool.get().set(e, f);
        e._inPool = false;
        this.startPosition = e;
        e = 20;
        f = 120;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = fa.pool.get().set(e, f);
        e._inPool = false;
        this.distancePerItem = e;
        this.rows = 0;
        this.scaleX = this.scaleY = 1;
        this.alignment = Of.LEFT;
        this.changeX = this.changeY = true;
        this.targetY = 0;
        this.isMenuItem = false;
        this.letters = [];
        this.bold = false;
        db.call(this, a, b);
        this.startPosition.set_x(a);
        this.startPosition.set_y(b);
        this.bold = d;
        this.set_text(c);
      }
      h["objects.Alphabet"] = Jb;
      Jb.__name__ = "objects.Alphabet";
      Jb.__super__ = db;
      Jb.prototype = q(db.prototype, {
        set_alignment: function (a) {
          this.alignment = a;
          this.updateAlignment();
          return a;
        },
        updateAlignment: function () {
          for (var a = 0, b = this.letters; a < b.length;) {
            var c = b[a];
            ++a;
            switch (this.alignment._hx_index) {
              case 1:
                var d = c.rowWidth / 2;
                break;
              case 2:
                d = c.rowWidth;
                break;
              default:
                d = 0;
            }
            c.offset.set_x(c.offset.x - c.alignOffset);
            c.alignOffset = d * this.scale.x;
            c.offset.set_x(c.offset.x + c.alignOffset);
          }
        },
        set_text: function (a) {
          a = w.replace(a, "\\n", "\n");
          this.clearLetters();
          this.createLetters(a);
          this.updateAlignment();
          return this.text = a;
        },
        clearLetters: function () {
          for (var a = this.letters.length; a > 0;) {
            --a;
            var b = this.letters[a];
            if (b != null) {
              b.kill();
              M.remove(this.letters, b);
              this.remove(b);
            }
          }
          this.letters = [];
          this.rows = 0;
        },
        setScale: function (a, b) {
          var c = this.scale.x;
          var d = this.scale.y;
          if (b == null) {
            b = a;
          }
          this.scaleX = a;
          this.scaleY = b;
          this.scale.set_x(a);
          this.scale.set_y(b);
          this.softReloadLetters(a / c, b / d);
        },
        set_scaleX: function (a) {
          if (a == this.scaleX) {
            return a;
          }
          var b = a / this.scale.x;
          this.scale.set_x(a);
          this.scaleX = a;
          this.softReloadLetters(b, 1);
          return a;
        },
        softReloadLetters: function (a, b) {
          if (a == null) {
            a = 1;
          }
          if (b == null) {
            b = a;
          }
          for (var c = 0, d = this.letters; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              e.setupAlphaCharacter((e.x - this.x) * a + this.x, (e.y - this.y) * b + this.y);
            }
          }
        },
        update: function (a) {
          if (this.isMenuItem) {
            var b = Math.exp(-a * 9.6);
            if (this.changeX) {
              var c = this.targetY * this.distancePerItem.x + this.startPosition.x;
              this.set_x(c + b * (this.x - c));
            }
            if (this.changeY) {
              c = this.targetY * 1.3 * this.distancePerItem.y + this.startPosition.y;
              this.set_y(c + b * (this.y - c));
            }
          }
          db.prototype.update.call(this, a);
        },
        snapToPosition: function () {
          if (this.isMenuItem) {
            if (this.changeX) {
              this.set_x(this.targetY * this.distancePerItem.x + this.startPosition.x);
            }
            if (this.changeY) {
              this.set_y(this.targetY * 1.3 * this.distancePerItem.y + this.startPosition.y);
            }
          }
        },
        createLetters: function (a) {
          var b = 0;
          var c = 0;
          var d = [];
          var e = this.rows = 0;
          for (a = a.split(""); e < a.length;) {
            var f = a[e];
            ++e;
            if (f != "\n") {
              var k = f == " " || this.bold && f == "_";
              if (k) {
                ++b;
              }
              vf.isTypeAlphabet(f.toLowerCase());
              if (!!Object.prototype.hasOwnProperty.call(vf.allLetters.h, f.toLowerCase()) && (!this.bold || !k)) {
                if (b > 0) {
                  c += b * 28 * this.scaleX;
                  d[this.rows] = c;
                  if (!this.bold && c >= g.width * 0.65) {
                    c = 0;
                    this.rows++;
                  }
                }
                b = 0;
                k = true;
                if (k == null) {
                  k = false;
                }
                k = this.group.recycle(vf, null, k, true);
                k.scale.set_x(this.scaleX);
                k.scale.set_y(this.scaleY);
                k.rowWidth = 0;
                k.setupAlphaCharacter(c, this.rows * Jb.Y_PER_ROW * this.scale.y, f, this.bold);
                k.parent = this;
                k.row = this.rows;
                f = 0;
                if (!this.bold) {
                  f = 2;
                }
                c += k.get_width() + (k.letterOffset[0] + f) * this.scale.x;
                d[this.rows] = c;
                this.add(k);
                this.letters.push(k);
              }
            } else {
              c = 0;
              this.rows++;
            }
          }
          e = 0;
          for (a = this.letters; e < a.length;) {
            k = a[e];
            ++e;
            k.rowWidth = d[k.row];
          }
          if (this.letters.length > 0) {
            this.rows++;
          }
        },
        __class__: Jb,
        __properties__: q(db.prototype.__properties__, {
          set_scaleX: "set_scaleX",
          set_alignment: "set_alignment",
          set_text: "set_text"
        })
      });
      function vf() {
        this.curLetter = null;
        this.character = "?";
        this.row = this.rowWidth = 0;
        this.letterOffset = [0, 0];
        this.alignOffset = 0;
        G.call(this, this.x, this.y);
        this.set_image("alphabet");
        this.set_antialiasing(C.data.antialiasing);
      }
      h["objects.AlphaCharacter"] = vf;
      vf.__name__ = "objects.AlphaCharacter";
      vf.isTypeAlphabet = function (a) {
        a = a.charCodeAt(0);
        if (a >= 65 && a <= 90 || a >= 97 && a <= 122 || a >= 192 && a <= 214 || a >= 216 && a <= 246) {
          return true;
        } else if (a >= 248) {
          return a <= 255;
        } else {
          return false;
        }
      };
      vf.__super__ = G;
      vf.prototype = q(G.prototype, {
        setupAlphaCharacter: function (a, b, c, d) {
          this.set_x(a);
          this.set_y(b);
          if (this.parent != null) {
            if (d == null) {
              d = this.parent.bold;
            }
            this.scale.set_x(this.parent.scaleX);
            this.scale.set_y(this.parent.scaleY);
          }
          if (c != null) {
            this.character = c;
            this.curLetter = null;
            a = this.character.toLowerCase();
            if (Object.prototype.hasOwnProperty.call(vf.allLetters.h, a)) {
              this.curLetter = vf.allLetters.h[a];
            } else {
              this.curLetter = vf.allLetters.h["?"];
            }
            d = d ? " bold" : vf.isTypeAlphabet(a) ? a != this.character ? " uppercase" : " lowercase" : " normal";
            if (this.curLetter != null && this.curLetter.anim != null) {
              a = this.curLetter.anim;
            }
            a += d;
            this.animation.addByPrefix(a, a, 24);
            this.animation.play(a, true);
            if (this.animation._curAnim == null) {
              if (d != " bold") {
                d = " normal";
              }
              a = "question" + d;
              this.animation.addByPrefix(a, a, 24);
              this.animation.play(a, true);
            }
          }
          this.updateHitbox();
        },
        set_image: function (a) {
          if (this.frames == null) {
            this.image = a;
            var b = null;
            var c = y.image(a, b, true);
            this.set_frames(fb.fromSparrow(c, y.getPath("images/" + a + ".xml", null, b)));
            return a;
          }
          var d = null;
          if (this.animation != null) {
            d = this.animation.get_name();
          }
          this.image = a;
          b = null;
          c = y.image(a, b, true);
          this.set_frames(fb.fromSparrow(c, y.getPath("images/" + a + ".xml", null, b)));
          this.scale.set_x(this.parent.scaleX);
          this.scale.set_y(this.parent.scaleY);
          this.alignOffset = 0;
          if (d != null) {
            this.animation.addByPrefix(d, d, 24);
            this.animation.play(d, true);
            this.updateHitbox();
          }
          return a;
        },
        updateLetterOffset: function () {
          if (this.animation._curAnim == null) {
            yb.trace(this.character, {
              fileName: "source/objects/Alphabet.hx",
              lineNumber: 449,
              className: "objects.AlphaCharacter",
              methodName: "updateLetterOffset"
            });
          } else {
            var a = 110;
            if (w.endsWith(this.animation._curAnim.name, "bold")) {
              if (this.curLetter != null && this.curLetter.offsetsBold != null) {
                this.letterOffset[0] = this.curLetter.offsetsBold[0];
                this.letterOffset[1] = this.curLetter.offsetsBold[1];
              }
              a = 70;
            } else if (this.curLetter != null && this.curLetter.offsets != null) {
              this.letterOffset[0] = this.curLetter.offsets[0];
              this.letterOffset[1] = this.curLetter.offsets[1];
            }
            a *= this.scale.y;
            this.offset.set_x(this.offset.x + this.letterOffset[0] * this.scale.x);
            this.offset.set_y(this.offset.y + (this.letterOffset[1] * this.scale.y - (a - this.get_height())));
          }
        },
        updateHitbox: function () {
          G.prototype.updateHitbox.call(this);
          this.updateLetterOffset();
        },
        __class__: vf,
        __properties__: q(G.prototype.__properties__, {
          set_image: "set_image"
        })
      });
      function ah(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        this.copyVisible = false;
        this.copyAngle = this.copyAlpha = true;
        this.alphaMult = 1;
        this.xAdd = this.yAdd = this.angleAdd = 0;
        G.call(this);
        if (b != null) {
          var e = y.image(a, c, true);
          this.set_frames(fb.fromSparrow(e, y.getPath("images/" + a + ".xml", null, c)));
          this.animation.addByPrefix("idle", b, 24, d);
          this.animation.play("idle");
        } else if (a != null) {
          this.loadGraphic(y.image(a));
        }
        this.set_antialiasing(C.data.antialiasing);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      h["objects.AttachedSprite"] = ah;
      ah.__name__ = "objects.AttachedSprite";
      ah.__super__ = G;
      ah.prototype = q(G.prototype, {
        update: function (a) {
          G.prototype.update.call(this, a);
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x + this.xAdd, this.sprTracker.y + this.yAdd);
            a = this.scrollFactor;
            var b = this.sprTracker.scrollFactor.x;
            var c = this.sprTracker.scrollFactor.y;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            if (this.copyAngle) {
              this.set_angle(this.sprTracker.angle + this.angleAdd);
            }
            if (this.copyAlpha) {
              this.set_alpha(this.sprTracker.alpha * this.alphaMult);
            }
            if (this.copyVisible) {
              this.set_visible(this.sprTracker.visible);
            }
          }
        },
        __class__: ah
      });
      function xi(a, b, c, d, e) {
        if (e == null) {
          e = 1;
        }
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = "";
        }
        this.copyAlpha = false;
        this.copyVisible = true;
        this.offsetX = this.offsetY = 0;
        Jb.call(this, 0, 0, a, d);
        this.setScale(e);
        this.isMenuItem = false;
        this.offsetX = b;
        this.offsetY = c;
      }
      h["objects.AttachedText"] = xi;
      xi.__name__ = "objects.AttachedText";
      xi.__super__ = Jb;
      xi.prototype = q(Jb.prototype, {
        update: function (a) {
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x + this.offsetX, this.sprTracker.y + this.offsetY);
            if (this.copyVisible) {
              this.set_visible(this.sprTracker.visible);
            }
            if (this.copyAlpha) {
              this.set_alpha(this.sprTracker.alpha);
            }
          }
          Jb.prototype.update.call(this, a);
        },
        __class__: xi
      });
      function Gb(a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (e == null) {
          e = 1;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        G.call(this, b, c);
        if (f != null) {
          b = y.image(a, null, true);
          this.set_frames(fb.fromSparrow(b, y.getPath("images/" + a + ".xml", null, null)));
          a = 0;
          b = f.length;
          while (a < b) {
            c = a++;
            c = f[c];
            this.animation.addByPrefix(c, c, 24, k);
            if (this.idleAnim == null) {
              this.idleAnim = c;
              this.animation.play(c);
            }
          }
        } else {
          if (a != null) {
            this.loadGraphic(y.image(a));
          }
          this.set_active(false);
        }
        f = this.scrollFactor;
        b = d;
        c = e;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        f.set_x(b);
        f.set_y(c);
        this.set_antialiasing(C.data.antialiasing);
      }
      h["objects.BGSprite"] = Gb;
      Gb.__name__ = "objects.BGSprite";
      Gb.__super__ = G;
      Gb.prototype = q(G.prototype, {
        __class__: Gb
      });
      function Dh(a, b, c, d, e, f) {
        if (f == null) {
          f = 1;
        }
        if (e == null) {
          e = 0;
        }
        if (c == null) {
          c = "healthBar";
        }
        this.enabled = true;
        var k = 3;
        var g = 3;
        if (g == null) {
          g = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (g == null) {
          g = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (g == null) {
          g = 0;
        }
        if (k == null) {
          k = 0;
        }
        k = fa.pool.get().set(k, g);
        k._inPool = false;
        this.barOffset = k;
        this.barWidth = this.barHeight = 1;
        this.barCenter = 0;
        this.leftToRight = true;
        this.bounds = {
          min: 0,
          max: 1
        };
        this.percent = 0;
        this.valueFunction = null;
        db.call(this, a, b);
        this.valueFunction = d;
        this.setBounds(e, f);
        this.bg = new G().loadGraphic(y.image(c));
        this.bg.set_antialiasing(C.data.antialiasing);
        this.set_barWidth(this.bg.get_width() - 6 | 0);
        this.set_barHeight(this.bg.get_height() - 6 | 0);
        this.leftBar = new G().makeGraphic(this.bg.get_width() | 0, this.bg.get_height() | 0, -1);
        this.leftBar.set_antialiasing(this.set_antialiasing(C.data.antialiasing));
        this.rightBar = new G().makeGraphic(this.bg.get_width() | 0, this.bg.get_height() | 0, -1);
        this.rightBar.set_color(-16777216);
        this.rightBar.set_antialiasing(C.data.antialiasing);
        this.add(this.leftBar);
        this.add(this.rightBar);
        this.add(this.bg);
        this.regenerateClips();
      }
      h["objects.Bar"] = Dh;
      Dh.__name__ = "objects.Bar";
      Dh.__super__ = db;
      Dh.prototype = q(db.prototype, {
        update: function (a) {
          if (this.enabled) {
            if (this.valueFunction != null) {
              var b = this.valueFunction();
              var c = this.bounds.min;
              var d = this.bounds.max;
              b = c != null && b < c ? c : b;
              d = $b.remapToRange(d != null && b > d ? d : b, this.bounds.min, this.bounds.max, 0, 100);
              this.set_percent(d ?? 0);
            } else {
              this.set_percent(0);
            }
          }
          db.prototype.update.call(this, a);
        },
        setBounds: function (a, b) {
          this.bounds.min = a;
          this.bounds.max = b;
        },
        setColors: function (a, b) {
          if (a != null) {
            this.leftBar.set_color(a);
          }
          if (b != null) {
            this.rightBar.set_color(b);
          }
        },
        updateBar: function () {
          if (this.leftBar != null && this.rightBar != null) {
            this.leftBar.setPosition(this.bg.x, this.bg.y);
            this.rightBar.setPosition(this.bg.x, this.bg.y);
            var a = this.leftToRight ? this.percent / 100 * this.barWidth : (1 - this.percent / 100) * this.barWidth;
            this.leftBar.clipRect.width = a;
            this.leftBar.clipRect.height = this.barHeight;
            this.leftBar.clipRect.x = this.barOffset.x;
            this.leftBar.clipRect.y = this.barOffset.y;
            this.rightBar.clipRect.width = this.barWidth - a;
            this.rightBar.clipRect.height = this.barHeight;
            this.rightBar.clipRect.x = this.barOffset.x + a;
            this.rightBar.clipRect.y = this.barOffset.y;
            this.barCenter = this.leftBar.x + a + this.barOffset.x;
            this.leftBar.set_clipRect(this.leftBar.clipRect);
            this.rightBar.set_clipRect(this.rightBar.clipRect);
          }
        },
        regenerateClips: function () {
          if (this.leftBar != null) {
            this.leftBar.setGraphicSize(this.bg.get_width() | 0, this.bg.get_height() | 0);
            this.leftBar.updateHitbox();
            this.leftBar.set_clipRect(new Ha(0, 0, this.bg.get_width() | 0, this.bg.get_height() | 0));
          }
          if (this.rightBar != null) {
            this.rightBar.setGraphicSize(this.bg.get_width() | 0, this.bg.get_height() | 0);
            this.rightBar.updateHitbox();
            this.rightBar.set_clipRect(new Ha(0, 0, this.bg.get_width() | 0, this.bg.get_height() | 0));
          }
          this.updateBar();
        },
        set_percent: function (a) {
          var b = false;
          if (a != this.percent) {
            b = true;
          }
          this.percent = a;
          if (b) {
            this.updateBar();
          }
          return a;
        },
        set_leftToRight: function (a) {
          this.leftToRight = a;
          this.updateBar();
          return a;
        },
        set_barWidth: function (a) {
          this.barWidth = a;
          this.regenerateClips();
          return a;
        },
        set_barHeight: function (a) {
          this.barHeight = a;
          this.regenerateClips();
          return a;
        },
        __class__: Dh,
        __properties__: q(db.prototype.__properties__, {
          set_barHeight: "set_barHeight",
          set_barWidth: "set_barWidth",
          set_leftToRight: "set_leftToRight",
          set_percent: "set_percent"
        })
      });
      function ad(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = "bf";
        }
        this.isAnimateAtlas = false;
        this.settingCharacterUp = true;
        this.danceEveryNumBeats = 2;
        this.danced = false;
        this.editorIsPlayer = null;
        this.noAntialiasing = this.originalFlipX = false;
        this.jsonScale = 1;
        this.vocalsFile = this.imageFile = "";
        this.hasMissAnimations = false;
        this.healthColorArray = [255, 0, 0];
        this.cameraPosition = [0, 0];
        this.positionArray = [0, 0];
        this.animationsArray = [];
        this.healthIcon = "face";
        this.danceIdle = this.skipDance = false;
        this.idleSuffix = "";
        this.singDuration = 4;
        this.stunned = false;
        this.animationNotes = [];
        this.specialAnim = false;
        this.holdTimer = this.heyTimer = 0;
        this.curCharacter = ad.DEFAULT_CHARACTER;
        this.debugMode = this.isPlayer = false;
        G.call(this, a, b);
        this.animation = new nh(this);
        this.animOffsets = new V();
        this.curCharacter = c;
        this.isPlayer = d;
        a = y.getPath("characters/" + this.curCharacter + ".json", "TEXT", null, true);
        if (!W.exists(a)) {
          a = "characters/" + ad.DEFAULT_CHARACTER + ".json";
          if (a == null) {
            a = "";
          }
          a = "assets/shared/" + a;
          this.set_color(-16777216);
          this.set_alpha(0.6);
        }
        try {
          this.loadCharacterFile(JSON.parse(W.getText(a)));
        } catch (e) {
          Na.lastError = e;
          a = K.caught(e).unwrap();
          yb.trace("Error loading character file of \"" + c + "\": " + H.string(a), {
            fileName: "source/objects/Character.hx",
            lineNumber: 121,
            className: "objects.Character",
            methodName: "new"
          });
        }
        if (Object.prototype.hasOwnProperty.call(this.animOffsets.h, "singLEFTmiss") || Object.prototype.hasOwnProperty.call(this.animOffsets.h, "singDOWNmiss") || Object.prototype.hasOwnProperty.call(this.animOffsets.h, "singUPmiss") || Object.prototype.hasOwnProperty.call(this.animOffsets.h, "singRIGHTmiss")) {
          this.hasMissAnimations = true;
        }
        this.recalculateDanceIdle();
        this.dance();
        if (this.curCharacter == "pico-speaker") {
          this.skipDance = true;
          this.loadMappedAnims();
          this.playAnim("shoot1");
        }
      }
      h["objects.Character"] = ad;
      ad.__name__ = "objects.Character";
      ad.__super__ = G;
      ad.prototype = q(G.prototype, {
        loadCharacterFile: function (a) {
          this.isAnimateAtlas = false;
          var b = y.getPath("images/" + H.string(a.image) + "/Animation.json", "TEXT", null, true);
          if (W.exists(b)) {
            this.isAnimateAtlas = true;
          }
          b = this.scale;
          var c = 1;
          var d = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          this.updateHitbox();
          if (this.isAnimateAtlas) {
            this.atlas = new ii();
            this.atlas.showPivot = false;
            try {
              y.loadAnimateAtlas(this.atlas, a.image);
            } catch (n) {
              Na.lastError = n;
              b = K.caught(n).unwrap();
              g.log.advanced("Could not load atlas " + H.string(a.image) + ": " + H.string(b), Ba.WARNING, true);
              yb.trace(b.stack, {
                fileName: "source/objects/Character.hx",
                lineNumber: 166,
                className: "objects.Character",
                methodName: "loadCharacterFile"
              });
            }
          } else {
            this.set_frames(y.getMultiAtlas(a.image.split(",")));
          }
          this.imageFile = a.image;
          this.jsonScale = a.scale;
          if (a.scale != 1) {
            b = this.scale;
            d = c = this.jsonScale;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
            this.updateHitbox();
          }
          this.positionArray = a.position;
          this.cameraPosition = a.camera_position;
          this.healthIcon = a.healthicon;
          this.singDuration = a.sing_duration;
          this.set_flipX(a.flip_x != this.isPlayer);
          this.healthColorArray = a.healthbar_colors != null && a.healthbar_colors.length > 2 ? a.healthbar_colors : [161, 161, 161];
          this.vocalsFile = a.vocals_file ?? "";
          this.originalFlipX = a.flip_x == 1;
          this.editorIsPlayer = a._editor_isPlayer;
          this.noAntialiasing = a.no_antialiasing == 1;
          this.set_antialiasing(C.data.antialiasing && !this.noAntialiasing);
          this.animationsArray = a.animations;
          if (this.animationsArray != null && this.animationsArray.length > 0) {
            a = 0;
            b = this.animationsArray;
            while (a < b.length) {
              c = b[a];
              ++a;
              d = "" + c.anim;
              var e = "" + c.name;
              var f = c.fps;
              var k = c.loop;
              var r = c.indices;
              if (this.isAnimateAtlas) {
                if (r != null && r.length > 0) {
                  this.atlas.anim.addBySymbolIndices(d, e, r, f, k);
                } else {
                  this.atlas.anim.addBySymbol(d, e, f, k);
                }
              } else if (r != null && r.length > 0) {
                this.animation.addByIndices(d, e, r, "", f, k);
              } else {
                this.animation.addByPrefix(d, e, f, k);
              }
              if (c.offsets != null && c.offsets.length > 1) {
                this.addOffset(c.anim, c.offsets[0], c.offsets[1]);
              } else {
                this.addOffset(c.anim, 0, 0);
              }
            }
          }
          if (this.isAnimateAtlas) {
            this.copyAtlasValues();
          }
        },
        update: function (a) {
          if (this.isAnimateAtlas) {
            this.atlas.update(a);
          }
          if (!this.debugMode && (!!this.isAnimateAtlas || this.animation._curAnim != null) && (!this.isAnimateAtlas || this.atlas.anim.get_curSymbol() != null)) {
            if (this.heyTimer > 0) {
              this.heyTimer -= a * (z.instance != null ? z.instance.playbackRate : 1);
              if (this.heyTimer <= 0) {
                var b = "";
                if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
                  b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
                }
                b = b ?? "";
                if (!!this.specialAnim && (b == "hey" || b == "cheer")) {
                  this.specialAnim = false;
                  this.dance();
                }
                this.heyTimer = 0;
              }
            } else if (this.specialAnim && this.isAnimationFinished()) {
              this.specialAnim = false;
              this.dance();
            } else {
              b = "";
              if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
                b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
              }
              if (w.endsWith(b ?? "", "miss") && this.isAnimationFinished()) {
                this.dance();
                this.finishAnimation();
              }
            }
            if (this.curCharacter == "pico-speaker" && (this.animationNotes.length > 0 && N.songPosition > this.animationNotes[0][0] && (b = 1, this.animationNotes[0][1] > 2 && (b = 3), b += g.random.int(0, 1), this.playAnim("shoot" + b, true), this.animationNotes.shift()), this.isAnimationFinished())) {
              b = "";
              if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
                b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
              }
              this.playAnim(b ?? "", false, false, this.animation._curAnim.frames.length - 3);
            }
            b = "";
            if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
              b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
            }
            if (w.startsWith(b ?? "", "sing")) {
              this.holdTimer += a;
            } else if (this.isPlayer) {
              this.holdTimer = 0;
            }
            if (!this.isPlayer && this.holdTimer >= 0.0011 / (g.sound.music != null ? g.sound.music._pitch : 1) * N.stepCrochet * this.singDuration) {
              this.dance();
              this.holdTimer = 0;
            }
            b = "";
            if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
              b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
            }
            b = b ?? "";
            if (this.isAnimationFinished() && Object.prototype.hasOwnProperty.call(this.animOffsets.h, "" + b + "-loop")) {
              this.playAnim("" + b + "-loop");
            }
          }
          G.prototype.update.call(this, a);
        },
        isAnimationFinished: function () {
          if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() == null : this.animation._curAnim == null) {
            return false;
          } else if (this.isAnimateAtlas) {
            return this.atlas.anim.get_finished();
          } else {
            return this.animation._curAnim.finished;
          }
        },
        finishAnimation: function () {
          if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
            if (this.isAnimateAtlas) {
              this.atlas.anim.set_curFrame(this.atlas.anim.get_length() - 1);
            } else {
              this.animation._curAnim.finish();
            }
          }
        },
        set_animPaused: function (a) {
          if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() == null : this.animation._curAnim == null) {
            return a;
          }
          if (this.isAnimateAtlas) {
            if (a) {
              this.atlas.anim.pause();
            } else {
              this.atlas.anim.resume();
            }
          } else {
            this.animation._curAnim.paused = a;
          }
          return a;
        },
        dance: function () {
          if (!this.debugMode && !this.skipDance && !this.specialAnim) {
            if (this.danceIdle) {
              if (this.danced = !this.danced) {
                this.playAnim("danceRight" + this.idleSuffix);
              } else {
                this.playAnim("danceLeft" + this.idleSuffix);
              }
            } else if (Object.prototype.hasOwnProperty.call(this.animOffsets.h, "idle" + this.idleSuffix)) {
              this.playAnim("idle" + this.idleSuffix);
            }
          }
        },
        playAnim: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          this.specialAnim = false;
          if (this.isAnimateAtlas) {
            this.atlas.anim.play(a, b, c, d);
          } else {
            this.animation.play(a, b, c, d);
          }
          if (Object.prototype.hasOwnProperty.call(this.animOffsets.h, a)) {
            d = this.animOffsets.h[a];
            b = this.offset;
            c = d[0];
            d = d[1];
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
          }
          if (w.startsWith(this.curCharacter, "gf-") || this.curCharacter == "gf") {
            if (a == "singLEFT") {
              this.danced = true;
            } else if (a == "singRIGHT") {
              this.danced = false;
            }
            if (a == "singUP" || a == "singDOWN") {
              this.danced = !this.danced;
            }
          }
        },
        loadMappedAnims: function () {
          try {
            var a = z.SONG.song;
            var b = new sa("[~&\\\\;:<>#]", "");
            var c = new sa("[.,'\"%?!]", "");
            var d = b.split(w.replace(a, " ", "-")).join("-");
            var e = Pd.loadFromJson("picospeaker", c.split(d).join("").toLowerCase()).notes;
            for (a = 0; a < e.length;) {
              var f = e[a];
              ++a;
              b = 0;
              for (var k = f.sectionNotes; b < k.length;) {
                var g = k[b];
                ++b;
                this.animationNotes.push(g);
              }
            }
            Jj.animationNotes = this.animationNotes;
            this.animationNotes.sort(l(this, this.sortAnims));
          } catch (n) {
            Na.lastError = n;
          }
        },
        sortAnims: function (a, b) {
          a = a[0];
          b = b[0];
          var c = 0;
          if (a < b) {
            c = -1;
          } else if (a > b) {
            c = 1;
          }
          return c;
        },
        recalculateDanceIdle: function () {
          var a = this.danceIdle;
          this.danceIdle = Object.prototype.hasOwnProperty.call(this.animOffsets.h, "danceLeft" + this.idleSuffix) && Object.prototype.hasOwnProperty.call(this.animOffsets.h, "danceRight" + this.idleSuffix);
          if (this.settingCharacterUp) {
            this.danceEveryNumBeats = this.danceIdle ? 1 : 2;
          } else if (a != this.danceIdle) {
            a = this.danceEveryNumBeats;
            a = this.danceIdle ? a / 2 : a * 2;
            this.danceEveryNumBeats = Math.round(Math.max(a, 1));
          }
          this.settingCharacterUp = false;
        },
        addOffset: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          this.animOffsets.h[a] = [b, c];
        },
        draw: function () {
          if (this.isAnimateAtlas) {
            this.copyAtlasValues();
            this.atlas.draw();
          } else {
            G.prototype.draw.call(this);
          }
        },
        copyAtlasValues: function () {
          this.atlas.set_cameras(this.get_cameras());
          this.atlas.scrollFactor = this.scrollFactor;
          this.atlas.scale = this.scale;
          this.atlas.offset = this.offset;
          this.atlas.origin = this.origin;
          this.atlas.set_x(this.x);
          this.atlas.set_y(this.y);
          this.atlas.set_angle(this.angle);
          this.atlas.set_alpha(this.alpha);
          this.atlas.set_visible(this.visible);
          this.atlas.set_flipX(this.flipX);
          this.atlas.set_flipY(this.flipY);
          this.atlas.shader = this.shader;
          this.atlas.set_antialiasing(this.antialiasing);
          this.atlas.colorTransform = this.colorTransform;
          this.atlas.set_color(this.color);
        },
        destroy: function () {
          G.prototype.destroy.call(this);
          this.destroyAtlas();
        },
        destroyAtlas: function () {
          if (this.atlas != null) {
            this.atlas = da.destroy(this.atlas);
          }
        },
        __class__: ad,
        __properties__: q(G.prototype.__properties__, {
          set_animPaused: "set_animPaused"
        })
      });
      function Kj(a, b, c) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.offsetX = this.offsetY = 0;
        this.copyAlpha = true;
        G.call(this, a, b);
        a = y.image("checkboxanim", null, true);
        this.set_frames(fb.fromSparrow(a, y.getPath("images/checkboxanim.xml", null, null)));
        this.animation.addByPrefix("unchecked", "checkbox0", 24, false);
        this.animation.addByPrefix("unchecking", "checkbox anim reverse", 24, false);
        this.animation.addByPrefix("checking", "checkbox anim0", 24, false);
        this.animation.addByPrefix("checked", "checkbox finish", 24, false);
        this.set_antialiasing(C.data.antialiasing);
        this.setGraphicSize(this.get_width() * 0.9 | 0);
        this.updateHitbox();
        this.animationFinished(c ? "checking" : "unchecking");
        this.animation.finishCallback = l(this, this.animationFinished);
        this.set_daValue(c);
      }
      h["objects.CheckboxThingie"] = Kj;
      Kj.__name__ = "objects.CheckboxThingie";
      Kj.__super__ = G;
      Kj.prototype = q(G.prototype, {
        update: function (a) {
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x - 130 + this.offsetX, this.sprTracker.y + 30 + this.offsetY);
            if (this.copyAlpha) {
              this.set_alpha(this.sprTracker.alpha);
            }
          }
          G.prototype.update.call(this, a);
        },
        set_daValue: function (a) {
          if (a) {
            if (this.animation._curAnim.name != "checked" && this.animation._curAnim.name != "checking") {
              this.animation.play("checking", true);
              var b = this.offset;
              var c = 34;
              var d = 25;
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              b.set_x(c);
              b.set_y(d);
            }
          } else if (this.animation._curAnim.name != "unchecked" && this.animation._curAnim.name != "unchecking") {
            this.animation.play("unchecking", true);
            b = this.offset;
            c = 25;
            d = 28;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
          }
          return a;
        },
        animationFinished: function (a) {
          switch (a) {
            case "checking":
              this.animation.play("checked", true);
              a = this.offset;
              var b = 3;
              var c = 12;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              a.set_x(b);
              a.set_y(c);
              break;
            case "unchecking":
              this.animation.play("unchecked", true);
              a = this.offset;
              b = 0;
              c = 2;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              a.set_x(b);
              a.set_y(c);
          }
        },
        __class__: Kj,
        __properties__: q(G.prototype.__properties__, {
          set_daValue: "set_daValue"
        })
      });
      function Ue(a, b) {
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = "bf";
        }
        this.curCharacter = this.healthSteps = null;
        G.call(this);
        this.health = 0.5;
        this.isPlayer = b;
        this.setIcon(a);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      h["objects.HealthIcon"] = Ue;
      Ue.__name__ = "objects.HealthIcon";
      Ue.__super__ = G;
      Ue.prototype = q(G.prototype, {
        setIcon: function (a, b, c) {
          if (c == null) {
            c = 150;
          }
          if (b == null) {
            b = 150;
          }
          if (this.curCharacter != a || this.get_width() != b || this.get_height() != c) {
            this.curCharacter = a;
            var d = y.image("icons/" + a);
            this.loadGraphic(d, true, b, c);
            b = this.animation;
            c = [];
            d = 0;
            for (var e = this.frames.frames.length; d < e;) {
              var f = d++;
              c.push(f);
            }
            b.add(a, c, 0, false, this.isPlayer);
            this.set_antialiasing(true);
            this.animation.play(a);
            c = new rc();
            c.h[0] = 1;
            c.h[20] = 0;
            this.healthSteps = c;
            if (this.frames.frames.length >= 3) {
              this.healthSteps.h[80] = 2;
            }
          }
        },
        update: function (a) {
          G.prototype.update.call(this, a);
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x + this.sprTracker.get_width() + 10, this.sprTracker.y - 30);
          }
          if (this.animation._curAnim != null) {
            for (var b = a = -1, c = this.healthSteps, d = c.keys(); d.hasNext();) {
              var e = d.next();
              var f = c.get(e);
              if (e > b && e <= this.health * 100) {
                b = e;
                a = f;
              }
            }
            if (a >= 0) {
              this.animation._curAnim.set_curFrame(a);
            }
          }
        },
        __class__: Ue
      });
      function ve(a, b) {
        if (b == null) {
          b = "bf";
        }
        this.hasConfirmAnimation = false;
        G.call(this, a);
        this.set_antialiasing(C.data.antialiasing);
        this.changeCharacter(b);
      }
      h["objects.MenuCharacter"] = ve;
      ve.__name__ = "objects.MenuCharacter";
      ve.__super__ = G;
      ve.prototype = q(G.prototype, {
        changeCharacter: function (a) {
          if (a == null) {
            a = "bf";
          }
          if (a == null) {
            a = "";
          }
          if (a != this.character) {
            this.character = a;
            this.set_visible(true);
            var b = this.scale;
            var c = 1;
            var d = 1;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
            this.updateHitbox();
            this.hasConfirmAnimation = false;
            if (a == null) {
              a = "images/menucharacters/" + a + ".json";
              if (a == null) {
                a = "";
              }
              a = "assets/shared/" + a;
              if (!W.exists(a)) {
                a = "images/menucharacters/" + ve.DEFAULT_CHARACTER + ".json";
                if (a == null) {
                  a = "";
                }
                a = "assets/shared/" + a;
              }
              a = W.getText(a);
              a = JSON.parse(a);
              b = "menucharacters/" + a.image;
              c = null;
              d = y.image(b, c, true);
              this.set_frames(fb.fromSparrow(d, y.getPath("images/" + b + ".xml", null, c)));
              this.animation.addByPrefix("idle", a.idle_anim, 24);
              b = a.confirm_anim;
              if (b != null && b.length > 0 && b != a.idle_anim) {
                this.animation.addByPrefix("confirm", b, 24, false);
                if (this.animation._animations.h.confirm != null) {
                  this.hasConfirmAnimation = true;
                }
              }
              this.set_flipX(a.flipX == 1);
              if (a.scale != 1) {
                b = this.scale;
                d = c = a.scale;
                if (d == null) {
                  d = 0;
                }
                if (c == null) {
                  c = 0;
                }
                b.set_x(c);
                b.set_y(d);
                this.updateHitbox();
              }
              b = this.offset;
              c = a.position[0];
              d = a.position[1];
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              b.set_x(c);
              b.set_y(d);
              this.animation.play("idle");
            } else if (a == "") {
              this.set_visible(false);
            } else {
              a = "images/menucharacters/" + a + ".json";
              if (a == null) {
                a = "";
              }
              a = "assets/shared/" + a;
              if (!W.exists(a)) {
                a = "images/menucharacters/" + ve.DEFAULT_CHARACTER + ".json";
                if (a == null) {
                  a = "";
                }
                a = "assets/shared/" + a;
              }
              a = W.getText(a);
              a = JSON.parse(a);
              b = "menucharacters/" + a.image;
              c = null;
              d = y.image(b, c, true);
              this.set_frames(fb.fromSparrow(d, y.getPath("images/" + b + ".xml", null, c)));
              this.animation.addByPrefix("idle", a.idle_anim, 24);
              b = a.confirm_anim;
              if (b != null && b.length > 0 && b != a.idle_anim) {
                this.animation.addByPrefix("confirm", b, 24, false);
                if (this.animation._animations.h.confirm != null) {
                  this.hasConfirmAnimation = true;
                }
              }
              this.set_flipX(a.flipX == 1);
              if (a.scale != 1) {
                b = this.scale;
                d = c = a.scale;
                if (d == null) {
                  d = 0;
                }
                if (c == null) {
                  c = 0;
                }
                b.set_x(c);
                b.set_y(d);
                this.updateHitbox();
              }
              b = this.offset;
              c = a.position[0];
              d = a.position[1];
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              b.set_x(c);
              b.set_y(d);
              this.animation.play("idle");
            }
          }
        },
        __class__: ve
      });
      function Lj(a, b, c) {
        if (c == null) {
          c = "";
        }
        this.flashes_ps = 6;
        this._flashColor = -13369345;
        this._flashingElapsed = 0;
        this.isFlashing = false;
        this.targetY = 0;
        G.call(this, a, b);
        this.loadGraphic(y.image("storymenu/" + c));
        this.set_antialiasing(C.data.antialiasing);
      }
      h["objects.MenuItem"] = Lj;
      Lj.__name__ = "objects.MenuItem";
      Lj.__super__ = G;
      Lj.prototype = q(G.prototype, {
        set_isFlashing: function (a) {
          if (a == null) {
            a = true;
          }
          this.isFlashing = a;
          this._flashingElapsed = 0;
          this.set_color(this.isFlashing ? this._flashColor : -1);
          return this.isFlashing;
        },
        update: function (a) {
          G.prototype.update.call(this, a);
          var b = this.targetY * 120 + 480;
          this.set_y(b + Math.exp(-a * 10.2) * (this.y - b));
          if (this.isFlashing) {
            this._flashingElapsed += a;
            this.set_color(Math.floor(this._flashingElapsed * g.updateFramerate * this.flashes_ps) % 2 == 0 ? this._flashColor : -1);
          }
        },
        __class__: Lj,
        __properties__: q(G.prototype.__properties__, {
          set_isFlashing: "set_isFlashing"
        })
      });
      function dm(a) {
        this.playbackRate = 1;
        this.holdPitchTime = 0;
        this.playbackSymbols = [];
        this.playingMusic = false;
        Ra.call(this);
        this.instance = a;
        a = g.width * 0.7;
        this.songBG = new G(a - 6, 0).makeGraphic(1, 100, -16777216);
        this.songBG.set_alpha(0.6);
        this.add(this.songBG);
        this.playbackBG = new G(a - 6, 0).makeGraphic(1, 100, -16777216);
        this.playbackBG.set_alpha(0.6);
        this.add(this.playbackBG);
        this.songTxt = new Q(g.width * 0.7, 5, 0, "", 32);
        this.songTxt.setFormat("assets/fonts/vcr.ttf", 32, -1, "right");
        this.add(this.songTxt);
        this.timeTxt = new Q(a, this.songTxt.y + 60, 0, "", 32);
        this.timeTxt.setFormat("assets/fonts/vcr.ttf", 32, -1, "right");
        this.add(this.timeTxt);
        a = new Q();
        a.setFormat("assets/fonts/vcr.ttf", 32, -1, "center");
        a.set_text("^");
        a.set_visible(false);
        this.playbackSymbols.push(a);
        this.add(a);
        a = new Q();
        a.setFormat("assets/fonts/vcr.ttf", 32, -1, "center");
        a.set_text("^");
        a.set_flipY(true);
        a.set_visible(false);
        this.playbackSymbols.push(a);
        this.add(a);
        this.progressBar = new Mg(this.timeTxt.x, this.timeTxt.y + this.timeTxt.get_height(), Dd.LEFT_TO_RIGHT, this.timeTxt.get_width() | 0, 8, null, "", 0, Infinity);
        this.progressBar.createFilledBar(-1, -16777216);
        this.add(this.progressBar);
        this.playbackTxt = new Q(g.width * 0.6, 20, 0, "", 32);
        this.playbackTxt.setFormat("assets/fonts/vcr.ttf", 32, -1);
        this.add(this.playbackTxt);
        this.switchPlayMusic();
      }
      h["objects.MusicPlayer"] = dm;
      dm.__name__ = "objects.MusicPlayer";
      dm.__super__ = Ra;
      dm.prototype = q(Ra.prototype, {
        update: function (a) {
          Ra.prototype.update.call(this, a);
          if (this.playingMusic) {
            if (this.get_paused() && !this.wasPlaying) {
              this.songTxt.set_text("PLAYING: " + this.instance.songs[Va.curSelected].songName + " (PAUSED)");
            } else {
              this.songTxt.set_text("PLAYING: " + this.instance.songs[Va.curSelected].songName);
            }
            this.positionSong();
            if (this.instance.get_controls().get_UI_LEFT_P()) {
              if (this.get_playing()) {
                this.wasPlaying = true;
              }
              this.pauseOrResume();
              this.curTime = g.sound.music._time - 1000;
              this.instance.holdTime = 0;
              if (this.curTime < 0) {
                this.curTime = 0;
              }
              g.sound.music.set_time(this.curTime);
              if (Va.vocals != null) {
                Va.vocals.set_time(this.curTime);
              }
            }
            if (this.instance.get_controls().get_UI_RIGHT_P()) {
              if (this.get_playing()) {
                this.wasPlaying = true;
              }
              this.pauseOrResume();
              this.curTime = g.sound.music._time + 1000;
              this.instance.holdTime = 0;
              if (this.curTime > g.sound.music._length) {
                this.curTime = g.sound.music._length;
              }
              g.sound.music.set_time(this.curTime);
              if (Va.vocals != null) {
                Va.vocals.set_time(this.curTime);
              }
            }
            this.updateTimeTxt();
            if (this.instance.get_controls().get_UI_LEFT() || this.instance.get_controls().get_UI_RIGHT()) {
              this.instance.holdTime += a;
              if (this.instance.holdTime > 0.5) {
                this.curTime += a * 40000 * (this.instance.get_controls().get_UI_LEFT() ? -1 : 1);
              }
              var b = Math.abs(this.curTime - g.sound.music._time);
              if (this.curTime + b > g.sound.music._length) {
                this.curTime = g.sound.music._length;
              } else if (this.curTime - b < 0) {
                this.curTime = 0;
              }
              g.sound.music.set_time(this.curTime);
              if (Va.vocals != null) {
                Va.vocals.set_time(this.curTime);
              }
              this.updateTimeTxt();
            }
            if (this.instance.get_controls().get_UI_LEFT_R() || this.instance.get_controls().get_UI_RIGHT_R()) {
              g.sound.music.set_time(this.curTime);
              if (Va.vocals != null) {
                Va.vocals.set_time(this.curTime);
              }
              if (this.wasPlaying) {
                this.pauseOrResume(true);
                this.wasPlaying = false;
              }
              this.updateTimeTxt();
            }
            if (this.instance.get_controls().get_UI_UP_P()) {
              this.holdPitchTime = 0;
              this.set_playbackRate(this.playbackRate + 0.05);
              this.setPlaybackRate();
            } else if (this.instance.get_controls().get_UI_DOWN_P()) {
              this.holdPitchTime = 0;
              this.set_playbackRate(this.playbackRate - 0.05);
              this.setPlaybackRate();
            }
            if (this.instance.get_controls().get_UI_DOWN() || this.instance.get_controls().get_UI_UP()) {
              this.holdPitchTime += a;
              if (this.holdPitchTime > 0.6) {
                this.set_playbackRate(this.playbackRate + (this.instance.get_controls().get_UI_UP() ? 1 : -1) * 0.05);
                this.setPlaybackRate();
              }
            }
            if (Va.vocals != null && g.sound.music._time > 5) {
              b = Math.abs(g.sound.music._time - Va.vocals._time);
              if (b >= 5 && !this.get_paused()) {
                this.pauseOrResume();
                Va.vocals.set_time(g.sound.music._time);
                this.pauseOrResume(true);
              }
            }
            this.updatePlaybackTxt();
            if (this.instance.get_controls().get_RESET()) {
              this.set_playbackRate(1);
              this.setPlaybackRate();
              g.sound.music.set_time(0);
              if (Va.vocals != null) {
                Va.vocals.set_time(0);
              }
              this.updateTimeTxt();
            }
          }
        },
        pauseOrResume: function (a) {
          if (a == null) {
            a = false;
          }
          if (a) {
            g.sound.music.resume();
            if (Va.vocals != null) {
              Va.vocals.resume();
            }
          } else {
            g.sound.music.pause();
            if (Va.vocals != null) {
              Va.vocals.pause();
            }
          }
          this.positionSong();
        },
        switchPlayMusic: function () {
          g.autoPause = !this.playingMusic && C.data.autoPause;
          this.set_active(this.set_visible(this.playingMusic));
          this.instance.scoreBG.set_visible(this.instance.diffText.set_visible(this.instance.scoreText.set_visible(!this.playingMusic)));
          this.songTxt.set_visible(this.timeTxt.set_visible(this.songBG.set_visible(this.playbackTxt.set_visible(this.playbackBG.set_visible(this.progressBar.set_visible(this.playingMusic))))));
          for (var a = 0, b = this.playbackSymbols; a < b.length;) {
            var c = b[a];
            ++a;
            c.set_visible(this.playingMusic);
          }
          this.holdPitchTime = 0;
          this.instance.holdTime = 0;
          this.set_playbackRate(1);
          this.updatePlaybackTxt();
          if (this.playingMusic) {
            this.instance.bottomText.set_text("Press SPACE to Pause / Press ESCAPE to Exit / Press R to Reset the Song");
            this.positionSong();
            this.progressBar.setRange(0, g.sound.music._length);
            this.progressBar.setParent(g.sound.music, "time");
            this.progressBar.set_numDivisions(1600);
            this.updateTimeTxt();
          } else {
            this.progressBar.setRange(0, Infinity);
            this.progressBar.setParent(null, "");
            this.progressBar.set_numDivisions(0);
            this.instance.bottomText.set_text(this.instance.bottomString);
            this.instance.positionHighscore();
          }
          this.progressBar.updateBar();
        },
        updatePlaybackTxt: function () {
          var a = this.playbackRate;
          if (typeof a == "number" && (a | 0) === a) {
            a = this.playbackRate + ".00";
          } else {
            a = H.string(this.playbackRate);
            if (a.split(".")[1].length < 2) {
              a += "0";
            }
          }
          this.playbackTxt.set_text(a + "x");
        },
        positionSong: function () {
          var a = this.instance.songs[Va.curSelected].songName.length;
          var b = a < 5;
          this.songTxt.set_x(g.width - this.songTxt.get_width() - 6);
          if (b) {
            var c = this.songTxt;
            c.set_x(c.x - (a * 10 - a));
          }
          this.songBG.scale.set_x(g.width - this.songTxt.x + 12);
          if (b) {
            c = this.songBG;
            c.scale.set_x(c.scale.x + a * 6);
          }
          this.songBG.set_x(g.width - this.songBG.scale.x / 2);
          this.timeTxt.set_x(this.songBG.x + this.songBG.get_width() / 2 | 0);
          c = this.timeTxt;
          c.set_x(c.x - this.timeTxt.get_width() / 2);
          if (b) {
            c = this.timeTxt;
            c.set_x(c.x - (a - 5));
          }
          this.playbackBG.scale.set_x(this.playbackTxt.get_width() + 30);
          this.playbackBG.set_x(this.songBG.x - this.songBG.scale.x / 2);
          c = this.playbackBG;
          c.set_x(c.x - this.playbackBG.scale.x);
          this.playbackTxt.set_x(this.playbackBG.x - this.playbackTxt.get_width() / 2);
          this.playbackTxt.set_y(this.playbackTxt.get_height());
          this.progressBar.setGraphicSize(this.songTxt.get_width() | 0, 5);
          this.progressBar.set_y(this.songTxt.y + this.songTxt.get_height() + 10);
          this.progressBar.set_x(this.songTxt.x + this.songTxt.get_width() / 2 - 15);
          if (b) {
            c = this.progressBar;
            c.scale.set_x(c.scale.x + a / 2);
            c = this.progressBar;
            c.set_x(c.x - (a - 10));
          }
          a = this.playbackSymbols[0];
          a.set_x(this.playbackTxt.x + this.playbackTxt.get_width() / 2 - 10);
          a.set_y(this.playbackTxt.y);
          a.set_y(a.y - this.playbackTxt.get_height());
          a = this.playbackSymbols[1];
          a.set_x(this.playbackTxt.x + this.playbackTxt.get_width() / 2 - 10);
          a.set_y(this.playbackTxt.y);
          a.set_y(a.y + this.playbackTxt.get_height());
        },
        updateTimeTxt: function () {
          var a = Yb.formatTime(g.sound.music._time / 1000, false) + " / " + Yb.formatTime(g.sound.music._length / 1000, false);
          this.timeTxt.set_text("< " + a + " >");
        },
        setPlaybackRate: function () {
          g.sound.music.set_pitch(this.playbackRate);
          if (Va.vocals != null) {
            Va.vocals.set_pitch(this.playbackRate);
          }
        },
        get_playing: function () {
          return g.sound.music._channel != null;
        },
        get_paused: function () {
          return g.sound.music._paused;
        },
        set_playbackRate: function (a) {
          a = $b.roundDecimal(a, 2);
          if (a > 3) {
            a = 3;
          } else if (a <= 0.25) {
            a = 0.25;
          }
          return this.playbackRate = a;
        },
        __class__: dm,
        __properties__: q(Ra.prototype.__properties__, {
          set_playbackRate: "set_playbackRate",
          get_paused: "get_paused",
          get_playing: "get_playing"
        })
      });
      function Pa(a, b, c, d, e, f) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = false;
        }
        this.correctionOffset = 0;
        this.originalHeight = 6;
        this._lastNoteOffX = 0;
        this.hitsound = "hitsound";
        this.hitsoundChartEditor = true;
        this.hitsoundDisabled = false;
        this.distance = 2000;
        this.noAnimation = this.noMissAnimation = this.hitCausesMiss = false;
        this.texture = null;
        this.ratingDisabled = false;
        this.ratingMod = 0;
        this.rating = "unknown";
        this.missHealth = 0.06;
        this.hitHealth = 0.04;
        this.copyX = this.copyY = this.copyAngle = this.copyAlpha = true;
        this.multAlpha = this.multSpeed = 1;
        this.offsetX = this.offsetY = this.offsetAngle = 0;
        var k = z.SONG != null ? z.SONG.disableNoteRGB != 1 : true;
        this.noteSplashData = {
          disabled: false,
          texture: null,
          antialiasing: !z.get_isPixelStage(),
          useGlobalShader: false,
          useRGBShader: k,
          r: -1,
          g: -1,
          b: -1,
          a: C.data.splashAlpha
        };
        this.lowPriority = false;
        this.earlyHitMult = this.lateHitMult = 1;
        this.gfNote = false;
        this.animSuffix = "";
        this.inEditor = false;
        this.eventVal1 = this.eventVal2 = "";
        this.eventLength = 0;
        this.eventName = "";
        this.noteType = null;
        this.isSustainNote = false;
        this.sustainLength = 0;
        this.blockHit = false;
        this.tail = [];
        this.mustPress = this.canBeHit = this.tooLate = this.wasGoodHit = this.missed = this.ignoreNote = this.hitByOpponent = this.spawned = false;
        this.strumTime = this.noteData = 0;
        G.call(this);
        this.animation = new nh(this);
        this.set_antialiasing(C.data.antialiasing);
        if (f == null) {
          f = z.instance;
        }
        if (c == null) {
          c = this;
        }
        this.prevNote = c;
        this.isSustainNote = d;
        this.inEditor = e;
        this.set_moves(false);
        this.set_x(this.x + ((C.data.middleScroll ? z.STRUM_X_MIDDLESCROLL : z.STRUM_X) + 50));
        this.set_y(this.y - 2000);
        this.strumTime = a;
        if (!e) {
          this.strumTime += C.data.noteOffset;
        }
        this.noteData = b;
        if (b > -1) {
          this.set_texture("");
          this.rgbShader = new em(this, Pa.initializeGlobalRGBShader(b));
          this.rgbShader.set_enabled(false);
          this.set_x(this.x + Pa.swagWidth * b);
          if (!this.isSustainNote && b < Pa.colArray.length) {
            this.animation.play(Pa.colArray[b % Pa.colArray.length] + "Scroll");
          }
        }
        if (c != null) {
          c.nextNote = this;
        }
        if (this.isSustainNote && c != null) {
          this.set_alpha(0.6);
          this.multAlpha = 0.6;
          this.hitsoundDisabled = true;
          if (C.data.downScroll) {
            this.set_flipY(true);
          }
          this.offsetX += this.get_width() / 2;
          this.copyAngle = false;
          this.animation.play(Pa.colArray[b % Pa.colArray.length] + "holdend");
          this.updateHitbox();
          this.offsetX -= this.get_width() / 2;
          if (z.get_isPixelStage()) {
            this.offsetX += 30;
          }
          if (c.isSustainNote) {
            c.animation.play(Pa.colArray[c.noteData % Pa.colArray.length] + "hold");
            c.scale.set_y(N.stepCrochet / 100 * c.scale.y * 1.05);
            if (f != null && f.songSpeed != null) {
              c.scale.set_y(c.scale.y * f.songSpeed);
            }
            if (z.get_isPixelStage()) {
              c.scale.set_y(c.scale.y * 1.19);
              c.scale.set_y(c.scale.y * (6 / this.get_height()));
            }
            c.updateHitbox();
          }
          if (z.get_isPixelStage()) {
            this.scale.set_y(this.scale.y * z.daPixelZoom);
            this.updateHitbox();
          }
          this.earlyHitMult = 0;
        } else if (!this.isSustainNote) {
          this.centerOffsets();
          a = this.origin;
          b = this.frameWidth * 0.5;
          c = this.frameHeight * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
        }
        this.set_x(this.x + this.offsetX);
      }
      h["objects.Note"] = Pa;
      Pa.__name__ = "objects.Note";
      Pa.initializeGlobalRGBShader = function (a) {
        if (Pa.globalRgbShaders[a] == null) {
          var b = new fm();
          Pa.globalRgbShaders[a] = b;
          var c = z.get_isPixelStage() ? C.data.arrowRGBPixel[a] : C.data.arrowRGB[a];
          if (a > -1 && a <= c.length) {
            b.set_r(c[0]);
            b.set_g(c[1]);
            b.set_b(c[2]);
          }
        }
        return Pa.globalRgbShaders[a];
      };
      Pa.getNoteSkinPostfix = function () {
        var a = "";
        if (C.data.noteSkin != C.defaultData.noteSkin) {
          a = "-" + w.replace(w.trim(C.data.noteSkin).toLowerCase(), " ", "_");
        }
        return a;
      };
      Pa.__super__ = G;
      Pa.prototype = q(G.prototype, {
        resizeByRatio: function (a) {
          if (this.isSustainNote && this.animation._curAnim != null && !w.endsWith(this.animation._curAnim.name, "end")) {
            this.scale.set_y(this.scale.y * a);
            this.updateHitbox();
          }
        },
        set_texture: function (a) {
          if (this.texture != a) {
            this.reloadNote(a);
          }
          return this.texture = a;
        },
        defaultRGB: function () {
          var a = C.data.arrowRGB[this.noteData];
          if (z.get_isPixelStage()) {
            a = C.data.arrowRGBPixel[this.noteData];
          }
          if (this.noteData > -1 && this.noteData <= a.length) {
            this.rgbShader.set_r(a[0]);
            this.rgbShader.set_g(a[1]);
            this.rgbShader.set_b(a[2]);
          }
        },
        set_noteType: function (a) {
          this.noteSplashData.texture = z.SONG != null ? z.SONG.splashSkin : "noteSplashes";
          this.defaultRGB();
          if (this.noteData > -1 && this.noteType != a) {
            switch (a) {
              case "Alt Animation":
                this.animSuffix = "-alt";
                break;
              case "GF Sing":
                this.gfNote = true;
                break;
              case "Hurt Note":
                this.ignoreNote = this.mustPress;
                this.rgbShader.set_r(-15724528);
                this.rgbShader.set_g(-65536);
                this.rgbShader.set_b(-6750174);
                this.noteSplashData.r = -65536;
                this.noteSplashData.g = -15724528;
                this.noteSplashData.texture = "noteSplashes/noteSplashes-electric";
                this.lowPriority = true;
                this.missHealth = this.isSustainNote ? 0.25 : 0.1;
                this.hitCausesMiss = true;
                this.hitsound = "cancelMenu";
                this.hitsoundChartEditor = false;
                break;
              case "No Animation":
                this.noMissAnimation = this.noAnimation = true;
                break;
              case "player3":
                this.noAnimation = true;
            }
            if (this.hitsound != "hitsound" && C.data.hitsoundVolume > 0) {
              y.sound(this.hitsound);
            }
            this.noteType = a;
          }
          return a;
        },
        reloadNote: function (a, b) {
          if (b == null) {
            b = "";
          }
          if (a == null) {
            a = "";
          }
          if (a == null) {
            a = "";
          }
          if (b == null) {
            b = "";
          }
          var c = a + b;
          if (a.length < 1 && (c = z.SONG != null ? z.SONG.arrowSkin : null, c == null || c.length < 1)) {
            c = Pa.defaultNoteSkin + b;
          }
          a = null;
          if (this.animation._curAnim != null) {
            a = this.animation._curAnim.name;
          }
          var d = c;
          b = this.scale.y;
          var e = Pa.getNoteSkinPostfix();
          var f = c + e;
          var k = z.get_isPixelStage() ? "pixelUI/" : "";
          if (f == Pa._lastValidChecked || y.fileExists("images/" + k + f + ".png", "IMAGE")) {
            c = f;
            Pa._lastValidChecked = f;
          } else {
            e = "";
          }
          if (z.get_isPixelStage()) {
            if (this.isSustainNote) {
              c = y.image("pixelUI/" + d + "ENDS" + e);
              this.loadGraphic(c, true, Math.floor(c.width / 4), Math.floor(c.height / 2));
              this.originalHeight = c.height / 2;
            } else {
              c = y.image("pixelUI/" + d + e);
              this.loadGraphic(c, true, Math.floor(c.width / 4), Math.floor(c.height / 5));
            }
            this.setGraphicSize(this.get_width() * z.daPixelZoom | 0);
            this.loadPixelNoteAnims();
            this.set_antialiasing(false);
            if (this.isSustainNote) {
              this.offsetX += this._lastNoteOffX;
              this._lastNoteOffX = (this.get_width() - 7) * (z.daPixelZoom / 2);
              this.offsetX -= this._lastNoteOffX;
            }
          } else {
            d = y.image(c, null, true);
            this.set_frames(fb.fromSparrow(d, y.getPath("images/" + c + ".xml", null, null)));
            this.loadNoteAnims();
            if (!this.isSustainNote) {
              this.centerOffsets();
              c = this.origin;
              d = this.frameWidth * 0.5;
              e = this.frameHeight * 0.5;
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.set_x(d);
              c.set_y(e);
            }
          }
          if (this.isSustainNote) {
            this.scale.set_y(b);
          }
          this.updateHitbox();
          if (a != null) {
            this.animation.play(a, true);
          }
        },
        loadNoteAnims: function () {
          if (this.isSustainNote) {
            this.attemptToAddAnimationByPrefix("purpleholdend", "pruple end hold", 24, true);
            this.animation.addByPrefix(Pa.colArray[this.noteData] + "holdend", Pa.colArray[this.noteData] + " hold end", 24, true);
            this.animation.addByPrefix(Pa.colArray[this.noteData] + "hold", Pa.colArray[this.noteData] + " hold piece", 24, true);
          } else {
            this.animation.addByPrefix(Pa.colArray[this.noteData] + "Scroll", Pa.colArray[this.noteData] + "0");
          }
          this.setGraphicSize(this.get_width() * 0.7 | 0);
          this.updateHitbox();
        },
        loadPixelNoteAnims: function () {
          if (this.isSustainNote) {
            this.animation.add(Pa.colArray[this.noteData] + "holdend", [this.noteData + 4], 24, true);
            this.animation.add(Pa.colArray[this.noteData] + "hold", [this.noteData], 24, true);
          } else {
            this.animation.add(Pa.colArray[this.noteData] + "Scroll", [this.noteData + 4], 24, true);
          }
        },
        attemptToAddAnimationByPrefix: function (a, b, c, d) {
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = 24;
          }
          var e = [];
          this.animation.findByPrefix(e, b);
          if (!(e.length < 1)) {
            this.animation.addByPrefix(a, b, c, d);
          }
        },
        update: function (a) {
          G.prototype.update.call(this, a);
          if (this.mustPress) {
            this.canBeHit = this.strumTime > N.songPosition - N.safeZoneOffset * this.lateHitMult && this.strumTime < N.songPosition + N.safeZoneOffset * this.earlyHitMult;
            if (this.strumTime < N.songPosition - N.safeZoneOffset && !this.wasGoodHit) {
              this.tooLate = true;
            }
          } else {
            this.canBeHit = false;
            if (this.strumTime < N.songPosition + N.safeZoneOffset * this.earlyHitMult && (this.isSustainNote && this.prevNote.wasGoodHit || this.strumTime <= N.songPosition)) {
              this.wasGoodHit = true;
            }
          }
          if (this.tooLate && !this.inEditor && this.alpha > 0.3) {
            this.set_alpha(0.3);
          }
        },
        destroy: function () {
          G.prototype.destroy.call(this);
          Pa._lastValidChecked = "";
        },
        followStrumNote: function (a, b, c) {
          if (c == null) {
            c = 1;
          }
          b = a.x;
          var d = a.y;
          var e = a.angle;
          var f = a.alpha;
          var k = a.direction;
          this.distance = (N.songPosition - this.strumTime) * 0.45 * c * this.multSpeed;
          if (!a.downScroll) {
            this.distance *= -1;
          }
          c = k * Math.PI / 180;
          if (this.copyAngle) {
            this.set_angle(k - 90 + e + this.offsetAngle);
          }
          if (this.copyAlpha) {
            this.set_alpha(f * this.multAlpha);
          }
          if (this.copyX) {
            this.set_x(b + this.offsetX + Math.cos(c) * this.distance);
          }
          if (this.copyY) {
            this.set_y(d + this.offsetY + this.correctionOffset + Math.sin(c) * this.distance);
            if (a.downScroll && this.isSustainNote) {
              if (z.get_isPixelStage()) {
                this.set_y(this.y - z.daPixelZoom * 9.5);
              }
              this.set_y(this.y - (this.frameHeight * this.scale.y - Pa.swagWidth / 2));
            }
          }
        },
        clipToStrumNote: function (a) {
          var b = a.y + this.offsetY + Pa.swagWidth / 2;
          if (this.isSustainNote && (this.mustPress || !this.ignoreNote) && (!this.mustPress || this.wasGoodHit || this.prevNote.wasGoodHit && !this.canBeHit)) {
            var c = this.clipRect;
            if (c == null) {
              c = new Ha(0, 0, this.frameWidth, this.frameHeight);
            }
            if (a.downScroll) {
              if (this.y - this.offset.y * this.scale.y + this.get_height() >= b) {
                c.width = this.frameWidth;
                c.height = (b - this.y) / this.scale.y;
                c.y = this.frameHeight - c.height;
              }
            } else if (this.y + this.offset.y * this.scale.y <= b) {
              c.y = (b - this.y) / this.scale.y;
              c.width = this.get_width() / this.scale.x;
              c.height = this.get_height() / this.scale.y - c.y;
            }
            this.set_clipRect(c);
          }
        },
        set_clipRect: function (a) {
          this.clipRect = a;
          if (this.frames != null) {
            this.set_frame(this.frames.frames[this.animation.frameIndex]);
          }
          return a;
        },
        __class__: Pa,
        __properties__: q(G.prototype.__properties__, {
          set_texture: "set_texture",
          set_noteType: "set_noteType"
        })
      });
      function gc(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.maxAnims = 2;
        this._textureLoaded = this._configLoaded = null;
        G.call(this, a, b);
        this.animation = new nh(this);
        a = z.SONG.splashSkin != null && z.SONG.splashSkin.length > 0 ? z.SONG.splashSkin : gc.defaultNoteSplash + gc.getSplashSkinPostfix();
        this.rgbShader = new Go();
        this.shader = this.rgbShader.shader;
        gc.precacheConfig(a);
        this._configLoaded = a;
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      h["objects.NoteSplash"] = gc;
      gc.__name__ = "objects.NoteSplash";
      gc.getSplashSkinPostfix = function () {
        var a = "";
        if (C.data.splashSkin != C.defaultData.splashSkin) {
          a = "-" + w.replace(w.trim(C.data.splashSkin).toLowerCase(), " ", "_");
        }
        return a;
      };
      gc.precacheConfig = function (a) {
        if (Object.prototype.hasOwnProperty.call(gc.configs.h, a)) {
          return gc.configs.h[a];
        }
        var b = y.getPath("images/" + a + ".txt", "TEXT", null, true);
        var c = null;
        if (W.exists(b)) {
          c = W.getText(b);
        }
        if (c != null) {
          var d = w.trim(c).split("\n");
          b = 0;
          for (c = d.length; b < c;) {
            var e = b++;
            d[e] = w.trim(d[e]);
          }
        } else {
          d = [];
        }
        if (d.length < 1) {
          return null;
        }
        var f = d[1].split(" ");
        var k = [];
        b = 2;
        for (c = d.length; b < c;) {
          e = b++;
          e = d[e].split(" ");
          k.push([parseFloat(e[0]), parseFloat(e[1])]);
        }
        b = {
          anim: d[0],
          minFps: H.parseInt(f[0]),
          maxFps: H.parseInt(f[1]),
          offsets: k
        };
        return gc.configs.h[a] = b;
      };
      gc.__super__ = G;
      gc.prototype = q(G.prototype, {
        destroy: function () {
          gc.configs.h = Object.create(null);
          G.prototype.destroy.call(this);
        },
        setupNoteSplash: function (a, b, c, d) {
          if (c == null) {
            c = 0;
          }
          this.setPosition(a - Pa.swagWidth * 0.95, b - Pa.swagWidth);
          gc.aliveTime = 0;
          a = d != null && d.noteSplashData.texture != null ? d.noteSplashData.texture : z.SONG.splashSkin != null && z.SONG.splashSkin.length > 0 ? z.SONG.splashSkin : gc.defaultNoteSplash + gc.getSplashSkinPostfix();
          var e = this._textureLoaded != a ? this.loadAnims(a) : gc.precacheConfig(this._configLoaded);
          b = null;
          if ((d == null || !!d.noteSplashData.useRGBShader) && (z.SONG == null || !z.SONG.disableNoteRGB)) {
            if (d == null || d.noteSplashData.useGlobalShader) {
              b = Pa.globalRgbShaders[c];
            } else {
              if (d.noteSplashData.r != -1) {
                d.rgbShader.set_r(d.noteSplashData.r);
              }
              if (d.noteSplashData.g != -1) {
                d.rgbShader.set_g(d.noteSplashData.g);
              }
              if (d.noteSplashData.b != -1) {
                d.rgbShader.set_b(d.noteSplashData.b);
              }
              b = d.rgbShader.parent;
            }
          }
          this.set_alpha(C.data.splashAlpha);
          if (d != null) {
            this.set_alpha(d.noteSplashData.a);
          }
          this.rgbShader.copyValues(b);
          if (d != null) {
            this.set_antialiasing(d.noteSplashData.antialiasing);
          }
          if (!!z.get_isPixelStage() || !C.data.antialiasing) {
            this.set_antialiasing(false);
          }
          this._textureLoaded = a;
          d = this.offset;
          b = a = 10;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          d.set_x(a);
          d.set_y(b);
          d = g.random.int(1, this.maxAnims);
          this.animation.play("note" + c + "-" + d, true);
          a = 22;
          b = 26;
          if (e != null) {
            c = e.offsets[$b.wrap(c + (d - 1) * Pa.colArray.length, 0, e.offsets.length - 1)];
            this.offset.set_x(this.offset.x + c[0]);
            this.offset.set_y(this.offset.y + c[1]);
            a = e.minFps;
            b = e.maxFps;
          } else {
            this.offset.set_x(this.offset.x + -58);
            this.offset.set_y(this.offset.y + -55);
          }
          if (this.animation._curAnim != null) {
            this.animation._curAnim.set_frameRate(g.random.int(a, b));
          }
        },
        loadAnims: function (a, b) {
          this.maxAnims = 0;
          var c = null;
          var d = y.image(a, c, true);
          this.set_frames(fb.fromSparrow(d, y.getPath("images/" + a + ".xml", null, c)));
          if (this.frames == null) {
            a = gc.defaultNoteSplash + gc.getSplashSkinPostfix();
            c = null;
            d = y.image(a, c, true);
            this.set_frames(fb.fromSparrow(d, y.getPath("images/" + a + ".xml", null, c)));
            if (this.frames == null) {
              a = gc.defaultNoteSplash;
              c = null;
              d = y.image(a, c, true);
              this.set_frames(fb.fromSparrow(d, y.getPath("images/" + a + ".xml", null, c)));
            }
          }
          c = gc.precacheConfig(a);
          this._configLoaded = a;
          for (b == null && (b = c != null ? c.anim : "note splash");;) {
            a = this.maxAnims + 1;
            d = 0;
            for (var e = Pa.colArray.length; d < e;) {
              var f = d++;
              if (!this.addAnimAndCheck("note" + f + "-" + a, "" + b + " " + Pa.colArray[f] + " " + a, 24, false)) {
                return c;
              }
            }
            this.maxAnims++;
          }
        },
        addAnimAndCheck: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 24;
          }
          var e = [];
          this.animation.findByPrefix(e, b);
          if (e.length < 1) {
            return false;
          }
          this.animation.addByPrefix(a, b, c, d);
          return true;
        },
        update: function (a) {
          gc.aliveTime += a;
          if (this.animation._curAnim != null && this.animation._curAnim.finished || this.animation._curAnim == null && gc.aliveTime >= gc.buggedKillTime) {
            this.kill();
          }
          G.prototype.update.call(this, a);
        },
        __class__: gc
      });
      function Go() {
        this.shader = new gm();
        this.shader.r.value = [0, 0, 0];
        this.shader.g.value = [0, 0, 0];
        this.shader.b.value = [0, 0, 0];
        this.shader.mult.value = [1];
        var a = 1;
        if (z.get_isPixelStage()) {
          a = z.daPixelZoom;
        }
        this.shader.uBlocksize.value = [a, a];
      }
      h["objects.PixelSplashShaderRef"] = Go;
      Go.__name__ = "objects.PixelSplashShaderRef";
      Go.prototype = {
        copyValues: function (a) {
          var b = false;
          if (a != null) {
            b = true;
          }
          if (b) {
            this.shader.r.value[0] = a.shader.r.value[0];
            this.shader.g.value[0] = a.shader.g.value[0];
            this.shader.b.value[0] = a.shader.b.value[0];
            this.shader.r.value[1] = a.shader.r.value[1];
            this.shader.g.value[1] = a.shader.g.value[1];
            this.shader.b.value[1] = a.shader.b.value[1];
            this.shader.r.value[2] = a.shader.r.value[2];
            this.shader.g.value[2] = a.shader.g.value[2];
            this.shader.b.value[2] = a.shader.b.value[2];
            this.shader.mult.value[0] = a.shader.mult.value[0];
          } else {
            this.shader.mult.value[0] = 0;
          }
        },
        __class__: Go
      };
      function gm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\n\n\t\t#pragma header\n\t\t\n\t\tuniform vec3 r;\n\t\tuniform vec3 g;\n\t\tuniform vec3 b;\n\t\tuniform float mult;\n\t\tuniform vec2 uBlocksize;\n\n\t\tvec4 flixel_texture2DCustom(sampler2D bitmap, vec2 coord) {\n\t\t\tvec2 blocks = openfl_TextureSize / uBlocksize;\n\t\t\tvec4 color = flixel_texture2D(bitmap, floor(coord * blocks) / blocks);\n\t\t\tif (!hasTransform) {\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif(color.a == 0.0 || mult == 0.0) {\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tvec4 newColor = color;\n\t\t\tnewColor.rgb = min(color.r * r + color.g * g + color.b * b, vec3(1.0));\n\t\t\tnewColor.a = color.a;\n\t\t\t\n\t\t\tcolor = mix(color, newColor, mult);\n\t\t\t\n\t\t\tif(color.a > 0.0) {\n\t\t\t\treturn vec4(color.rgb, color.a);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = flixel_texture2DCustom(bitmap, openfl_TextureCoordv);\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\t\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\t\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\t\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        $d.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["objects.PixelSplashShader"] = gm;
      gm.__name__ = "objects.PixelSplashShader";
      gm.__super__ = $d;
      gm.prototype = q($d.prototype, {
        __class__: gm
      });
      function yg(a, b, c, d) {
        this.useRGBShader = true;
        this.texture = null;
        this.sustainReduce = true;
        this.downScroll = false;
        this.direction = 90;
        this.resetAnim = this.noteData = 0;
        this.animation = new nh(this);
        this.rgbShader = new em(this, Pa.initializeGlobalRGBShader(c));
        this.rgbShader.set_enabled(false);
        this.useRGBShader = false;
        var e = C.data.arrowRGB[c];
        if (z.get_isPixelStage()) {
          e = C.data.arrowRGBPixel[c];
        }
        if (c <= e.length) {
          this.rgbShader.set_r(e[0]);
          this.rgbShader.set_g(e[1]);
          this.rgbShader.set_b(e[2]);
        }
        this.player = d;
        this.noteData = c;
        G.call(this, a, b);
        a = z.SONG != null && z.SONG.arrowSkin != null && z.SONG.arrowSkin.length > 1 ? z.SONG.arrowSkin : Pa.defaultNoteSkin;
        b = a + Pa.getNoteSkinPostfix();
        if (y.fileExists("images/" + b + ".png", "IMAGE")) {
          a = b;
        }
        this.set_texture(a);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      h["objects.StrumNote"] = yg;
      yg.__name__ = "objects.StrumNote";
      yg.__super__ = G;
      yg.prototype = q(G.prototype, {
        set_texture: function (a) {
          if (this.texture != a) {
            this.texture = a;
            this.reloadNote();
          }
          return a;
        },
        reloadNote: function () {
          var a = null;
          if (this.animation._curAnim != null) {
            a = this.animation._curAnim.name;
          }
          if (z.get_isPixelStage()) {
            this.loadGraphic(y.image("pixelUI/" + this.texture));
            this.set_width(this.get_width() / 4);
            this.set_height(this.get_height() / 5);
            this.loadGraphic(y.image("pixelUI/" + this.texture), true, Math.floor(this.get_width()), Math.floor(this.get_height()));
            this.set_antialiasing(false);
            this.setGraphicSize(this.get_width() * z.daPixelZoom | 0);
            this.animation.add("green", [6]);
            this.animation.add("red", [7]);
            this.animation.add("blue", [5]);
            this.animation.add("purple", [4]);
            switch (Math.abs(this.noteData) % 4) {
              case 0:
                this.animation.add("static", [0]);
                this.animation.add("pressed", [4, 8], 12, false);
                this.animation.add("confirm", [12, 16], 24, false);
                break;
              case 1:
                this.animation.add("static", [1]);
                this.animation.add("pressed", [5, 9], 12, false);
                this.animation.add("confirm", [13, 17], 24, false);
                break;
              case 2:
                this.animation.add("static", [2]);
                this.animation.add("pressed", [6, 10], 12, false);
                this.animation.add("confirm", [14, 18], 12, false);
                break;
              case 3:
                this.animation.add("static", [3]);
                this.animation.add("pressed", [7, 11], 12, false);
                this.animation.add("confirm", [15, 19], 24, false);
            }
          } else {
            var b = this.texture;
            var c = y.image(b, null, true);
            this.set_frames(fb.fromSparrow(c, y.getPath("images/" + b + ".xml", null, null)));
            this.animation.addByPrefix("green", "arrowUP");
            this.animation.addByPrefix("blue", "arrowDOWN");
            this.animation.addByPrefix("purple", "arrowLEFT");
            this.animation.addByPrefix("red", "arrowRIGHT");
            this.set_antialiasing(C.data.antialiasing);
            this.setGraphicSize(this.get_width() * 0.7 | 0);
            switch (Math.abs(this.noteData) % 4) {
              case 0:
                this.animation.addByPrefix("static", "arrowLEFT");
                this.animation.addByPrefix("pressed", "left press", 24, false);
                this.animation.addByPrefix("confirm", "left confirm", 24, false);
                break;
              case 1:
                this.animation.addByPrefix("static", "arrowDOWN");
                this.animation.addByPrefix("pressed", "down press", 24, false);
                this.animation.addByPrefix("confirm", "down confirm", 24, false);
                break;
              case 2:
                this.animation.addByPrefix("static", "arrowUP");
                this.animation.addByPrefix("pressed", "up press", 24, false);
                this.animation.addByPrefix("confirm", "up confirm", 24, false);
                break;
              case 3:
                this.animation.addByPrefix("static", "arrowRIGHT");
                this.animation.addByPrefix("pressed", "right press", 24, false);
                this.animation.addByPrefix("confirm", "right confirm", 24, false);
            }
          }
          this.updateHitbox();
          if (a != null) {
            this.playAnim(a, true);
          }
        },
        postAddedToGroup: function () {
          this.playAnim("static");
          this.set_x(this.x + Pa.swagWidth * this.noteData);
          this.set_x(this.x + 50);
          this.set_x(this.x + g.width / 2 * this.player);
          this.ID = this.noteData;
        },
        update: function (a) {
          if (this.resetAnim > 0) {
            this.resetAnim -= a;
            if (this.resetAnim <= 0) {
              this.playAnim("static");
              this.resetAnim = 0;
            }
          }
          G.prototype.update.call(this, a);
        },
        playAnim: function (a, b) {
          if (b == null) {
            b = false;
          }
          this.animation.play(a, b);
          if (this.animation._curAnim != null) {
            this.centerOffsets();
            a = this.origin;
            b = this.frameWidth * 0.5;
            var c = this.frameHeight * 0.5;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
          }
          if (this.useRGBShader) {
            this.rgbShader.set_enabled(this.animation._curAnim != null && this.animation._curAnim.name != "static");
          }
        },
        __class__: yg,
        __properties__: q(G.prototype.__properties__, {
          set_texture: "set_texture"
        })
      });
      function Th(a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0.05;
        }
        if (c == null) {
          c = "";
        }
        this._timeToUpdate = 0;
        this._curLetter = -1;
        this.volume = 1;
        this.sound = "dialogue";
        this.delay = 0.05;
        this.finishedText = false;
        this.onFinish = null;
        Jb.call(this, a, b, c, e);
        this.delay = d;
      }
      h["objects.TypedAlphabet"] = Th;
      Th.__name__ = "objects.TypedAlphabet";
      Th.__super__ = Jb;
      Th.prototype = q(Jb.prototype, {
        set_text: function (a) {
          Jb.prototype.set_text.call(this, a);
          this.resetDialogue();
          return a;
        },
        update: function (a) {
          if (!this.finishedText) {
            var b = false;
            for (this._timeToUpdate += a; this._timeToUpdate >= this.delay;) {
              this.showCharacterUpTo(this._curLetter + 1);
              if (!b && this.sound != "" && (this.delay > 0.025 || this._curLetter % 2 == 0)) {
                g.sound.play(y.sound(this.sound), this.volume);
              }
              b = true;
              this._curLetter++;
              if (this._curLetter >= this.letters.length - 1) {
                this.finishedText = true;
                if (this.onFinish != null) {
                  this.onFinish();
                }
                this._timeToUpdate = 0;
                break;
              }
              this._timeToUpdate = 0;
            }
          }
          Jb.prototype.update.call(this, a);
        },
        showCharacterUpTo: function (a) {
          var b = this._curLetter;
          if (b < 0) {
            b = 0;
          }
          for (a += 1; b < a;) {
            var c = b++;
            if (this.letters[c] != null) {
              this.letters[c].set_visible(true);
            }
          }
        },
        resetDialogue: function () {
          this._curLetter = -1;
          this.finishedText = false;
          for (var a = this._timeToUpdate = 0, b = this.letters; a < b.length;) {
            var c = b[a];
            ++a;
            c.set_visible(false);
          }
        },
        finishText: function () {
          if (!this.finishedText) {
            this.showCharacterUpTo(this.letters.length - 1);
            if (this.sound != "") {
              g.sound.play(y.sound(this.sound), this.volume);
            }
            this.finishedText = true;
            if (this.onFinish != null) {
              this.onFinish();
            }
            this._timeToUpdate = 0;
          }
        },
        __class__: Th
      });
      function na() {}
      h["openfl.Lib"] = na;
      na.__name__ = "openfl.Lib";
      na.__properties__ = {
        get_current: "get_current"
      };
      na.getTimer = function () {
        return bd.getTimer();
      };
      na.getURL = function (a, b) {
        na.navigateToURL(a, b);
      };
      na.navigateToURL = function (a, b) {
        if (b == null) {
          b = "_blank";
        }
        var c = a.url;
        if (Db.typeof(a.data) == Mc.TObject) {
          var d = "";
          for (var e = ma.fields(a.data), f = 0; f < e.length;) {
            var k = e[f];
            ++f;
            if (d.length > 0) {
              d += "&";
            }
            var g = encodeURIComponent(k) + "=";
            k = H.string(ma.field(a.data, k));
            d += g + encodeURIComponent(k);
          }
          c = c.indexOf("?") > -1 ? c + ("&" + d) : c + ("?" + d);
        }
        bd.openURL(c, b);
      };
      na.setTimeout = function (a, b, c) {
        var d = ++na.__lastTimerID;
        var e = na.__timers;
        b = kg.delay(function () {
          na.__timers.remove(d);
          a.apply(a, c == null ? [] : c);
        }, b);
        e.h[d] = b;
        return d;
      };
      na.get_current = function () {
        if (zd.current == null) {
          zd.current = new Mj();
        }
        return zd.current;
      };
      function hm(a, b, c) {
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (c == null) {
          c = [];
        }
        this.__array = c;
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      h["openfl._Vector.BoolVector"] = hm;
      hm.__name__ = "openfl._Vector.BoolVector";
      hm.__interfaces__ = [la];
      hm.prototype = {
        toJSON: function () {
          return this.__array;
        },
        set_length: function (a) {
          if (!this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                var c = b++;
                this.__array[c] = false;
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: hm,
        __properties__: {
          set_length: "set_length"
        }
      };
      function im(a, b, c) {
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (c == null) {
          c = [];
        }
        this.__array = c;
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      h["openfl._Vector.FunctionVector"] = im;
      im.__name__ = "openfl._Vector.FunctionVector";
      im.__interfaces__ = [la];
      im.prototype = {
        toJSON: function () {
          return this.__array;
        },
        set_length: function (a) {
          if (!this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                var c = b++;
                this.__array[c] = null;
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: im,
        __properties__: {
          set_length: "set_length"
        }
      };
      function Nh(a, b, c) {
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (c == null) {
          c = [];
        }
        this.__array = c;
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      h["openfl._Vector.IntVector"] = Nh;
      Nh.__name__ = "openfl._Vector.IntVector";
      Nh.__interfaces__ = [la];
      Nh.prototype = {
        get: function (a) {
          return this.__array[a];
        },
        insertAt: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            this.__array.splice(a, 0, b);
          }
        },
        iterator: function () {
          return new Uf(this.__array);
        },
        push: function (a) {
          if (this.fixed) {
            return this.__array.length;
          } else {
            return this.__array.push(a);
          }
        },
        set: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            return this.__array[a] = b;
          } else {
            return b;
          }
        },
        splice: function (a, b) {
          return new Nh(0, false, this.__array.splice(a, b));
        },
        toJSON: function () {
          return this.__array;
        },
        get_length: function () {
          return this.__array.length;
        },
        set_length: function (a) {
          if (!this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                var c = b++;
                this.__array[c] = 0;
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: Nh,
        __properties__: {
          set_length: "set_length",
          get_length: "get_length"
        }
      };
      function Ki() {
        rb.call(this);
        if (zd.application == null) {
          zd.application = this;
        }
        if (zd.current == null) {
          zd.current = new Mj();
        }
        zd.current.__loaderInfo = Pf.create(null);
        zd.current.__loaderInfo.content = zd.current;
      }
      h["openfl.display.Application"] = Ki;
      Ki.__name__ = "openfl.display.Application";
      Ki.__super__ = rb;
      Ki.prototype = q(rb.prototype, {
        createWindow: function (a) {
          var b = new Nj(this, a);
          this.__windows.push(b);
          this.__windowByID.h[b.id] = b;
          var c = this;
          b.onClose.add(function () {
            c.__onWindowClose(b);
          }, false, -10000);
          if (this.__window == null) {
            this.__window = b;
            b.onActivate.add(l(this, this.onWindowActivate));
            b.onRenderContextLost.add(l(this, this.onRenderContextLost));
            b.onRenderContextRestored.add(l(this, this.onRenderContextRestored));
            b.onDeactivate.add(l(this, this.onWindowDeactivate));
            b.onDropFile.add(l(this, this.onWindowDropFile));
            b.onEnter.add(l(this, this.onWindowEnter));
            b.onExpose.add(l(this, this.onWindowExpose));
            b.onFocusIn.add(l(this, this.onWindowFocusIn));
            b.onFocusOut.add(l(this, this.onWindowFocusOut));
            b.onFullscreen.add(l(this, this.onWindowFullscreen));
            b.onKeyDown.add(l(this, this.onKeyDown));
            b.onKeyUp.add(l(this, this.onKeyUp));
            b.onLeave.add(l(this, this.onWindowLeave));
            b.onMinimize.add(l(this, this.onWindowMinimize));
            b.onMouseDown.add(l(this, this.onMouseDown));
            b.onMouseMove.add(l(this, this.onMouseMove));
            b.onMouseMoveRelative.add(l(this, this.onMouseMoveRelative));
            b.onMouseUp.add(l(this, this.onMouseUp));
            b.onMouseWheel.add(l(this, this.onMouseWheel));
            b.onMove.add(l(this, this.onWindowMove));
            b.onRender.add(l(this, this.render));
            b.onResize.add(l(this, this.onWindowResize));
            b.onRestore.add(l(this, this.onWindowRestore));
            b.onTextEdit.add(l(this, this.onTextEdit));
            b.onTextInput.add(l(this, this.onTextInput));
            this.onWindowCreate();
          }
          this.onCreateWindow.dispatch(b);
          return b;
        },
        exec: function () {
          return rb.prototype.exec.call(this);
        },
        __checkForAllWindowsClosed: function () {
          if (!(this.__windows.length > 0)) {
            rb.prototype.__checkForAllWindowsClosed.call(this);
          }
        },
        __onModuleExit: function (a) {
          if (!this.onExit.canceled) {
            if (zd.application == this) {
              zd.application = null;
            }
            rb.prototype.__onModuleExit.call(this, a);
          }
        },
        __class__: Ki
      });
      function Nc(a, b, c) {
        if (c == null) {
          c = false;
        }
        Fa.call(this);
        this.__drawableType = 2;
        this.__bitmapData = a;
        this.pixelSnapping = b;
        this.smoothing = c;
        if (b == null) {
          this.pixelSnapping = 1;
        }
      }
      h["openfl.display.Bitmap"] = Nc;
      Nc.__name__ = "openfl.display.Bitmap";
      Nc.__super__ = Fa;
      Nc.prototype = q(Fa.prototype, {
        __enterFrame: function (a) {
          if (this.__bitmapData != null && this.__bitmapData.image != null && this.__bitmapData.image.version != this.__imageVersion && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
        },
        __getBounds: function (a, b) {
          var c = ea.__pool.get();
          if (this.__bitmapData != null) {
            c.setTo(0, 0, this.__bitmapData.width, this.__bitmapData.height);
          } else {
            c.setTo(0, 0, 0, 0);
          }
          c.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          ea.__pool.release(c);
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || this.__bitmapData == null || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          this.__getRenderTransform();
          var k = this.__renderTransform;
          var g = k.a * k.d - k.b * k.c;
          c = g == 0 ? -k.tx : 1 / g * (k.c * (k.ty - b) + k.d * (a - k.tx));
          k = this.__renderTransform;
          g = k.a * k.d - k.b * k.c;
          a = g == 0 ? -k.ty : 1 / g * (k.a * (b - k.ty) + k.b * (k.tx - a));
          if (c > 0 && a > 0 && c <= this.__bitmapData.width && a <= this.__bitmapData.height) {
            if (this.__scrollRect != null && !this.__scrollRect.contains(c, a)) {
              return false;
            }
            if (d != null && !e) {
              d.push(f);
            }
            return true;
          }
          return false;
        },
        __hitTestMask: function (a, b) {
          if (this.__bitmapData == null) {
            return false;
          }
          this.__getRenderTransform();
          var c = this.__renderTransform;
          var d = c.a * c.d - c.b * c.c;
          var e = d == 0 ? -c.tx : 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx));
          c = this.__renderTransform;
          d = c.a * c.d - c.b * c.c;
          a = d == 0 ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a));
          if (e > 0 && a > 0 && e <= this.__bitmapData.width && a <= this.__bitmapData.height) {
            return true;
          } else {
            return false;
          }
        },
        get_bitmapData: function () {
          return this.__bitmapData;
        },
        set_bitmapData: function (a) {
          this.__bitmapData = a;
          this.smoothing = false;
          if (!this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          this.__imageVersion = -1;
          return this.__bitmapData;
        },
        set_height: function (a) {
          if (this.__bitmapData != null) {
            this.set_scaleY(a / this.__bitmapData.height);
          } else {
            this.set_scaleY(0);
          }
          return a;
        },
        set_width: function (a) {
          if (this.__bitmapData != null) {
            this.set_scaleX(a / this.__bitmapData.width);
          } else {
            this.set_scaleX(0);
          }
          return a;
        },
        __class__: Nc,
        __properties__: q(Fa.prototype.__properties__, {
          set_bitmapData: "set_bitmapData",
          get_bitmapData: "get_bitmapData"
        })
      });
      function ge() {
        ua.call(this);
        this.__allowSmoothing = true;
        this.__pixelRatio = 1;
        this.__tempColorTransform = new Nb();
        this.__worldAlpha = 1;
      }
      h["openfl.display.DisplayObjectRenderer"] = ge;
      ge.__name__ = "openfl.display.DisplayObjectRenderer";
      ge.__super__ = ua;
      ge.prototype = q(ua.prototype, {
        __clear: function () {},
        __getAlpha: function (a) {
          return a * this.__worldAlpha;
        },
        __popMaskObject: function (a, b) {},
        __pushMaskObject: function (a, b) {},
        __render: function (a) {},
        __renderEvent: function (a) {
          if (a.__customRenderEvent != null && a.__renderable) {
            a.__customRenderEvent.allowSmoothing = this.__allowSmoothing;
            a.__customRenderEvent.objectMatrix.copyFrom(a.__renderTransform);
            a.__customRenderEvent.objectColorTransform.__copyFrom(a.__worldColorTransform);
            a.__customRenderEvent.renderer = this;
            switch (this.__type) {
              case "cairo":
                a.__customRenderEvent.type = "renderCairo";
                break;
              case "canvas":
                a.__customRenderEvent.type = "renderCanvas";
                break;
              case "dom":
                a.__customRenderEvent.type = a.stage != null && a.__worldVisible ? "renderDOM" : "clearDOM";
                break;
              case "opengl":
                if (!this.__cleared) {
                  this.__clear();
                }
                this.setShader(a.__worldShader);
                this.__context3D.__flushGL();
                a.__customRenderEvent.type = "renderOpenGL";
                break;
              default:
                return;
            }
            this.__setBlendMode(a.__worldBlendMode);
            this.__pushMaskObject(a);
            a.dispatchEvent(a.__customRenderEvent);
            this.__popMaskObject(a);
            if (this.__type == "opengl") {
              this.setViewport();
            }
          }
        },
        __resize: function (a, b) {},
        __setBlendMode: function (a) {},
        __shouldCacheHardware: function (a, b) {
          if (a == null) {
            return null;
          }
          switch (a.__drawableType) {
            case 4:
            case 5:
              if (b == 1) {
                return true;
              }
              b = this.__shouldCacheHardware_DisplayObject(a, b);
              if (b == 1) {
                return true;
              }
              if (a.__children != null) {
                var c = 0;
                for (a = a.__children; c < a.length;) {
                  var d = a[c];
                  ++c;
                  b = this.__shouldCacheHardware_DisplayObject(d, b);
                  if (b == 1) {
                    return true;
                  }
                }
              }
              return b;
            case 7:
              if (b == 1) {
                return true;
              } else {
                return false;
              }
            case 9:
              return true;
            default:
              return this.__shouldCacheHardware_DisplayObject(a, b);
          }
        },
        __shouldCacheHardware_DisplayObject: function (a, b) {
          if (b == 1 || a.__filters != null) {
            return true;
          } else if (b == 0 || a.__graphics != null && !oc.isCompatible(a.__graphics)) {
            return false;
          } else {
            return null;
          }
        },
        __updateCacheBitmap: function (a, b) {
          if (a == null) {
            return false;
          }
          switch (a.__drawableType) {
            case 2:
              var c = a;
              if (c.__bitmapData == null || c.__filters == null && this.__type == "opengl" && c.__cacheBitmap == null) {
                return false;
              }
              b = c.__bitmapData.image != null && c.__bitmapData.image.version != c.__imageVersion;
              break;
            case 7:
              var d = a;
              if (d.__filters == null && this.__type == "opengl" && d.__cacheBitmap == null && !d.__domRender) {
                return false;
              }
              if (b) {
                d.__renderDirty = true;
              }
              b = b || d.__dirty;
              break;
            case 9:
              if (a.__filters == null && this.__type == "opengl" && a.__cacheBitmap == null) {
                return false;
              }
          }
          if (a.__isCacheBitmapRender) {
            return false;
          }
          d = Nb.__pool.get();
          d.__copyFrom(a.__worldColorTransform);
          if (this.__worldColorTransform != null) {
            d.__combine(this.__worldColorTransform);
          }
          var e = false;
          if (a.get_cacheAsBitmap() || this.__type != "opengl" && !d.__isDefault(true)) {
            e = null;
            var f = (b = a.__cacheBitmap == null || a.__renderDirty && (b || a.__children != null && a.__children.length > 0) || a.opaqueBackground != a.__cacheBitmapBackground) || a.__graphics != null && a.__graphics.__softwareDirty || !a.__cacheBitmapColorTransform.__equals(d, true);
            var k = b || a.__graphics != null && a.__graphics.__hardwareDirty;
            var g = this.__type;
            if (f || k) {
              if (g == "opengl" && this.__shouldCacheHardware(a, null) == 0) {
                g = "canvas";
              }
              if (!!f && (g == "canvas" || g == "cairo")) {
                b = true;
              }
              if (k && g == "opengl") {
                b = true;
              }
            }
            f = b || !a.__cacheBitmap.__worldTransform.equals(a.__worldTransform);
            c = a.__filters != null;
            if (this.__type == "dom" && !c) {
              return false;
            }
            if (c && !b) {
              for (var n = 0, h = a.__filters; n < h.length;) {
                var p = h[n];
                ++n;
                if (p.__renderDirty) {
                  b = true;
                  break;
                }
              }
            }
            if (a.__cacheBitmapMatrix == null) {
              a.__cacheBitmapMatrix = new Aa();
            }
            n = a.__cacheAsBitmapMatrix ?? a.__renderTransform;
            if (!b && (n.a != a.__cacheBitmapMatrix.a || n.b != a.__cacheBitmapMatrix.b || n.c != a.__cacheBitmapMatrix.c || n.d != a.__cacheBitmapMatrix.d)) {
              b = true;
            }
            if (!b && this.__type != "opengl" && a.__cacheBitmapData != null && a.__cacheBitmapData.image != null && a.__cacheBitmapData.image.version < a.__cacheBitmapData.__textureVersion) {
              b = true;
            }
            if (!b) {
              for (k = a; k != null;) {
                if (k.get_scrollRect() != null) {
                  f = true;
                  break;
                }
                k = k.parent;
              }
            }
            a.__cacheBitmapMatrix.copyFrom(n);
            a.__cacheBitmapMatrix.tx = 0;
            var m = k = a.__cacheBitmapMatrix.ty = 0;
            var l = 0;
            var t = 0;
            var q = p = 0;
            h = this.__pixelRatio;
            if (f || b) {
              e = ea.__pool.get();
              a.__getFilterBounds(e, a.__cacheBitmapMatrix);
              l = e.width > 0 ? Math.ceil((e.width + 1) * h) : 0;
              t = e.height > 0 ? Math.ceil((e.height + 1) * h) : 0;
              p = e.x > 0 ? Math.ceil(e.x) : Math.floor(e.x);
              q = e.y > 0 ? Math.ceil(e.y) : Math.floor(e.y);
              if (a.__cacheBitmapData != null) {
                if (l > a.__cacheBitmapData.width || t > a.__cacheBitmapData.height) {
                  k = Math.ceil(Math.max(l * 1.25, a.__cacheBitmapData.width));
                  m = Math.ceil(Math.max(t * 1.25, a.__cacheBitmapData.height));
                  b = true;
                } else {
                  k = a.__cacheBitmapData.width;
                  m = a.__cacheBitmapData.height;
                }
              } else {
                k = l;
                m = t;
              }
            }
            if (b) {
              f = true;
              a.__cacheBitmapBackground = a.opaqueBackground;
              if (l >= 0.5 && t >= 0.5) {
                var u = a.opaqueBackground != null && (k != l || m != t);
                var x = a.opaqueBackground != null ? a.opaqueBackground | -16777216 : 0;
                var L = u ? 0 : x;
                var w = this.__type == "opengl";
                if (a.__cacheBitmapData == null || k > a.__cacheBitmapData.width || m > a.__cacheBitmapData.height) {
                  a.__cacheBitmapData = new T(k, m, true, L);
                  if (a.__cacheBitmap == null) {
                    a.__cacheBitmap = new Nc();
                  }
                  a.__cacheBitmap.__bitmapData = a.__cacheBitmapData;
                  a.__cacheBitmapRenderer = null;
                } else {
                  a.__cacheBitmapData.__fillRect(a.__cacheBitmapData.rect, L, w);
                }
                if (u) {
                  e.setTo(0, 0, l, t);
                  a.__cacheBitmapData.__fillRect(e, x, w);
                }
              } else {
                Nb.__pool.release(d);
                a.__cacheBitmap = null;
                a.__cacheBitmapData = null;
                a.__cacheBitmapData2 = null;
                a.__cacheBitmapData3 = null;
                a.__cacheBitmapRenderer = null;
                if (a.__drawableType == 7) {
                  d = a;
                  if (d.__cacheBitmap != null) {
                    d.__cacheBitmap.__renderTransform.tx -= d.__offsetX * h;
                    d.__cacheBitmap.__renderTransform.ty -= d.__offsetY * h;
                  }
                }
                return true;
              }
            } else {
              a.__cacheBitmapData = a.__cacheBitmap.get_bitmapData();
              a.__cacheBitmapData2 = null;
              a.__cacheBitmapData3 = null;
            }
            if (f || b) {
              a.__cacheBitmap.__worldTransform.copyFrom(a.__worldTransform);
              if (n == a.__renderTransform) {
                a.__cacheBitmap.__renderTransform.identity();
                a.__cacheBitmap.__renderTransform.scale(1 / h, 1 / h);
                a.__cacheBitmap.__renderTransform.tx = a.__renderTransform.tx + p;
                a.__cacheBitmap.__renderTransform.ty = a.__renderTransform.ty + q;
              } else {
                a.__cacheBitmap.__renderTransform.copyFrom(a.__cacheBitmapMatrix);
                a.__cacheBitmap.__renderTransform.invert();
                a.__cacheBitmap.__renderTransform.concat(a.__renderTransform);
                a.__cacheBitmap.__renderTransform.a *= 1 / h;
                a.__cacheBitmap.__renderTransform.d *= 1 / h;
                a.__cacheBitmap.__renderTransform.tx += p;
                a.__cacheBitmap.__renderTransform.ty += q;
              }
            }
            a.__cacheBitmap.smoothing = this.__allowSmoothing;
            a.__cacheBitmap.__renderable = a.__renderable;
            a.__cacheBitmap.__worldAlpha = a.__worldAlpha;
            a.__cacheBitmap.__worldBlendMode = a.__worldBlendMode;
            a.__cacheBitmap.__worldShader = a.__worldShader;
            a.__cacheBitmap.set_mask(a.__mask);
            if (b) {
              if (a.__cacheBitmapRenderer == null || g != a.__cacheBitmapRenderer.__type) {
                if (g == "opengl") {
                  a.__cacheBitmapRenderer = new Ja(ta.__cast(this, Ja).__context3D, a.__cacheBitmapData);
                } else {
                  if (a.__cacheBitmapData.image == null) {
                    a.__cacheBitmapData = new T(k, m, true, a.opaqueBackground != null ? a.opaqueBackground | -16777216 : 0);
                    a.__cacheBitmap.__bitmapData = a.__cacheBitmapData;
                  }
                  Xa.convertToCanvas(a.__cacheBitmapData.image);
                  a.__cacheBitmapRenderer = new pg(a.__cacheBitmapData.image.buffer.__srcContext);
                }
                a.__cacheBitmapRenderer.__worldTransform = new Aa();
                a.__cacheBitmapRenderer.__worldColorTransform = new Nb();
              }
              if (a.__cacheBitmapColorTransform == null) {
                a.__cacheBitmapColorTransform = new Nb();
              }
              a.__cacheBitmapRenderer.__stage = a.stage;
              a.__cacheBitmapRenderer.__allowSmoothing = this.__allowSmoothing;
              a.__cacheBitmapRenderer.__setBlendMode(10);
              a.__cacheBitmapRenderer.__worldAlpha = 1 / a.__worldAlpha;
              a.__cacheBitmapRenderer.__worldTransform.copyFrom(a.__renderTransform);
              a.__cacheBitmapRenderer.__worldTransform.invert();
              a.__cacheBitmapRenderer.__worldTransform.concat(a.__cacheBitmapMatrix);
              a.__cacheBitmapRenderer.__worldTransform.tx -= p;
              a.__cacheBitmapRenderer.__worldTransform.ty -= q;
              a.__cacheBitmapRenderer.__worldTransform.scale(h, h);
              a.__cacheBitmapRenderer.__pixelRatio = h;
              a.__cacheBitmapRenderer.__worldColorTransform.__copyFrom(d);
              a.__cacheBitmapRenderer.__worldColorTransform.__invert();
              a.__isCacheBitmapRender = true;
              if (a.__cacheBitmapRenderer.__type == "opengl") {
                u = a.__cacheBitmapRenderer;
                x = u.__context3D;
                L = x.__state.renderToTexture;
                w = x.__state.renderToTextureDepthStencil;
                var A = x.__state.renderToTextureAntiAlias;
                var y = x.__state.renderToTextureSurfaceSelector;
                var z = this.__blendMode;
                this.__suspendClipAndMask();
                u.__copyShader(this);
                a.__cacheBitmapData.__setUVRect(x, 0, 0, l, t);
                u.__setRenderTarget(a.__cacheBitmapData);
                if (a.__cacheBitmapData.image != null) {
                  a.__cacheBitmapData.__textureVersion = a.__cacheBitmapData.image.version + 1;
                }
                a.__cacheBitmapData.__drawGL(a, u);
                if (c) {
                  var D = false;
                  n = 0;
                  for (h = a.__filters; n < h.length;) {
                    p = h[n];
                    ++n;
                    if (p.__preserveObject) {
                      D = true;
                    }
                  }
                  c = a.__cacheBitmapData;
                  q = null;
                  if (a.__cacheBitmapData2 == null || k > a.__cacheBitmapData2.width || m > a.__cacheBitmapData2.height) {
                    a.__cacheBitmapData2 = new T(k, m, true, 0);
                  } else {
                    a.__cacheBitmapData2.fillRect(a.__cacheBitmapData2.rect, 0);
                    if (a.__cacheBitmapData2.image != null) {
                      a.__cacheBitmapData2.__textureVersion = a.__cacheBitmapData2.image.version + 1;
                    }
                  }
                  a.__cacheBitmapData2.__setUVRect(x, 0, 0, l, t);
                  g = a.__cacheBitmapData2;
                  if (D) {
                    if (a.__cacheBitmapData3 == null || k > a.__cacheBitmapData3.width || m > a.__cacheBitmapData3.height) {
                      a.__cacheBitmapData3 = new T(k, m, true, 0);
                    } else {
                      a.__cacheBitmapData3.fillRect(a.__cacheBitmapData3.rect, 0);
                      if (a.__cacheBitmapData3.image != null) {
                        a.__cacheBitmapData3.__textureVersion = a.__cacheBitmapData3.image.version + 1;
                      }
                    }
                    a.__cacheBitmapData3.__setUVRect(x, 0, 0, l, t);
                    q = a.__cacheBitmapData3;
                  }
                  u.__setBlendMode(10);
                  u.__worldAlpha = 1;
                  u.__worldTransform.identity();
                  u.__worldColorTransform.__identity();
                  n = 0;
                  for (h = a.__filters; n < h.length;) {
                    p = h[n];
                    ++n;
                    if (p.__preserveObject) {
                      u.__setRenderTarget(q);
                      u.__renderFilterPass(c, u.__defaultDisplayShader, p.__smooth);
                    }
                    m = 0;
                    for (l = p.__numShaderPasses; m < l;) {
                      k = m++;
                      k = p.__initShader(u, k, p.__preserveObject ? q : null);
                      u.__setBlendMode(p.__shaderBlendMode);
                      u.__setRenderTarget(g);
                      u.__renderFilterPass(c, k, p.__smooth);
                      k = c;
                      c = g;
                      g = k;
                    }
                    p.__renderDirty = false;
                  }
                  a.__cacheBitmap.__bitmapData = c;
                }
                this.__blendMode = 10;
                this.__setBlendMode(z);
                this.__copyShader(u);
                if (L != null) {
                  x.setRenderToTexture(L, w, A, y);
                } else {
                  x.setRenderToBackBuffer();
                }
                this.__resumeClipAndMask(u);
                this.setViewport();
                a.__cacheBitmapColorTransform.__copyFrom(d);
              } else {
                a.__cacheBitmapData.__drawCanvas(a, a.__cacheBitmapRenderer);
                if (c) {
                  D = l = false;
                  n = 0;
                  for (h = a.__filters; n < h.length;) {
                    p = h[n];
                    ++n;
                    if (p.__needSecondBitmapData) {
                      l = true;
                    }
                    if (p.__preserveObject) {
                      D = true;
                    }
                  }
                  c = a.__cacheBitmapData;
                  q = null;
                  if (l) {
                    if (a.__cacheBitmapData2 == null || a.__cacheBitmapData2.image == null || k > a.__cacheBitmapData2.width || m > a.__cacheBitmapData2.height) {
                      a.__cacheBitmapData2 = new T(k, m, true, 0);
                    } else {
                      a.__cacheBitmapData2.fillRect(a.__cacheBitmapData2.rect, 0);
                    }
                    g = a.__cacheBitmapData2;
                  } else {
                    g = c;
                  }
                  if (D) {
                    if (a.__cacheBitmapData3 == null || a.__cacheBitmapData3.image == null || k > a.__cacheBitmapData3.width || m > a.__cacheBitmapData3.height) {
                      a.__cacheBitmapData3 = new T(k, m, true, 0);
                    } else {
                      a.__cacheBitmapData3.fillRect(a.__cacheBitmapData3.rect, 0);
                    }
                    q = a.__cacheBitmapData3;
                  }
                  if (a.__tempPoint == null) {
                    a.__tempPoint = new kb();
                  }
                  m = a.__tempPoint;
                  n = 0;
                  for (h = a.__filters; n < h.length;) {
                    p = h[n];
                    ++n;
                    if (p.__preserveObject) {
                      q.copyPixels(c, c.rect, m);
                    }
                    k = p.__applyFilter(g, c, c.rect, m);
                    if (p.__preserveObject) {
                      k.draw(q, null, a.__objectTransform != null ? a.__objectTransform.__colorTransform : null);
                    }
                    p.__renderDirty = false;
                    if (l && k == g) {
                      k = c;
                      c = g;
                      g = k;
                    }
                  }
                  if (a.__cacheBitmapData != c) {
                    k = a.__cacheBitmapData;
                    a.__cacheBitmapData = c;
                    a.__cacheBitmapData2 = k;
                    a.__cacheBitmap.__bitmapData = a.__cacheBitmapData;
                    a.__cacheBitmapRenderer = null;
                  }
                  a.__cacheBitmap.__imageVersion = a.__cacheBitmapData.__textureVersion;
                }
                a.__cacheBitmapColorTransform.__copyFrom(d);
                if (!a.__cacheBitmapColorTransform.__isDefault(true)) {
                  a.__cacheBitmapColorTransform.alphaMultiplier = 1;
                  a.__cacheBitmapData.colorTransform(a.__cacheBitmapData.rect, a.__cacheBitmapColorTransform);
                }
              }
              a.__isCacheBitmapRender = false;
            }
            if (f || b) {
              ea.__pool.release(e);
            }
            e = f;
          } else if (a.__cacheBitmap != null) {
            if (this.__type == "dom") {
              this.__renderDrawableClear(a.__cacheBitmap);
            }
            a.__cacheBitmap = null;
            a.__cacheBitmapData = null;
            a.__cacheBitmapData2 = null;
            a.__cacheBitmapData3 = null;
            a.__cacheBitmapColorTransform = null;
            a.__cacheBitmapRenderer = null;
            e = true;
          }
          Nb.__pool.release(d);
          if (e && a.__drawableType == 7) {
            d = a;
            if (d.__cacheBitmap != null) {
              d.__cacheBitmap.__renderTransform.tx -= d.__offsetX;
              d.__cacheBitmap.__renderTransform.ty -= d.__offsetY;
            }
          }
          return e;
        },
        __class__: ge
      });
      function jm(a) {
        ge.call(this);
      }
      h["openfl.display.CairoRenderer"] = jm;
      jm.__name__ = "openfl.display.CairoRenderer";
      jm.__super__ = ge;
      jm.prototype = q(ge.prototype, {
        applyMatrix: function (a, b) {
          if (b == null) {
            b = this.cairo;
          }
          this.__matrix.copyFrom(a);
          if (this.cairo == b && this.__worldTransform != null) {
            this.__matrix.concat(this.__worldTransform);
          }
          this.__matrix3.a = this.__matrix.a;
          this.__matrix3.b = this.__matrix.b;
          this.__matrix3.c = this.__matrix.c;
          this.__matrix3.d = this.__matrix.d;
          if (this.__roundPixels) {
            this.__matrix3.tx = Math.round(this.__matrix.tx);
            this.__matrix3.ty = Math.round(this.__matrix.ty);
          } else {
            this.__matrix3.tx = this.__matrix.tx;
            this.__matrix3.ty = this.__matrix.ty;
          }
          b.set_matrix(this.__matrix3);
        },
        __clear: function () {
          if (this.cairo != null && (this.cairo.identityMatrix(), this.__stage != null && this.__stage.__clearBeforeRender)) {
            var a = this.__blendMode;
            this.__setBlendMode(10);
            this.cairo.setSourceRGB(this.__stage.__colorSplit[0], this.__stage.__colorSplit[1], this.__stage.__colorSplit[2]);
            this.cairo.paint();
            this.__setBlendMode(a);
          }
        },
        __popMask: function () {
          this.cairo.restore();
        },
        __popMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (!a.__isCacheBitmapRender && a.__mask != null) {
            this.__popMask();
          }
          if (b && a.__scrollRect != null) {
            this.__popMaskRect();
          }
        },
        __popMaskRect: function () {
          this.cairo.restore();
        },
        __pushMask: function (a) {
          this.cairo.save();
          this.applyMatrix(a.__renderTransform, this.cairo);
          this.cairo.newPath();
          this.__renderDrawableMask(a);
          this.cairo.clip();
        },
        __pushMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b && a.__scrollRect != null) {
            this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
          }
          if (!a.__isCacheBitmapRender && a.__mask != null) {
            this.__pushMask(a.__mask);
          }
        },
        __pushMaskRect: function (a, b) {
          this.cairo.save();
          this.applyMatrix(b, this.cairo);
          this.cairo.newPath();
          this.cairo.rectangle(a.x, a.y, a.width, a.height);
          this.cairo.clip();
        },
        __render: function (a) {
          if (this.cairo != null) {
            this.__renderDrawable(a);
          }
        },
        __renderDrawable: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 6:
                if (!!a.__renderable && !(a.__worldAlpha <= 0) && a.__currentState != null) {
                  this.__pushMaskObject(a);
                  this.__renderDrawable(a.__currentState);
                  this.__popMaskObject(a);
                  this.__renderEvent(a);
                }
            }
          }
        },
        __renderDrawableMask: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 2:
                this.cairo.rectangle(0, 0, a.get_width(), a.get_height());
                break;
              case 6:
                this.__renderDrawableMask(a.__currentState);
            }
          }
        },
        __setBlendMode: function (a) {
          if (this.__overrideBlendMode != null) {
            a = this.__overrideBlendMode;
          }
          if (this.__blendMode != a) {
            this.__blendMode = a;
            this.__setBlendModeCairo(this.cairo, a);
          }
        },
        __setBlendModeCairo: function (a, b) {
          switch (b) {
            case 0:
              a.setOperator(12);
              break;
            case 2:
              a.setOperator(17);
              break;
            case 3:
              a.setOperator(23);
              break;
            case 5:
              a.setOperator(21);
              break;
            case 7:
              a.setOperator(2);
              break;
            case 8:
              a.setOperator(18);
              break;
            case 9:
              a.setOperator(14);
              break;
            case 11:
              a.setOperator(16);
              break;
            case 12:
              a.setOperator(15);
              break;
            default:
              a.setOperator(2);
          }
        },
        __class__: jm
      });
      function pg(a) {
        ge.call(this);
        this.context = a;
        this.__tempMatrix = new Aa();
        this.__type = "canvas";
      }
      h["openfl.display.CanvasRenderer"] = pg;
      pg.__name__ = "openfl.display.CanvasRenderer";
      pg.__super__ = ge;
      pg.prototype = q(ge.prototype, {
        applySmoothing: function (a, b) {
          a.imageSmoothingEnabled = b;
        },
        setTransform: function (a, b) {
          if (b == null) {
            b = this.context;
          } else if (this.context == b && this.__worldTransform != null) {
            this.__tempMatrix.copyFrom(a);
            this.__tempMatrix.concat(this.__worldTransform);
            a = this.__tempMatrix;
          }
          if (this.__roundPixels) {
            b.setTransform(a.a, a.b, a.c, a.d, a.tx | 0, a.ty | 0);
          } else {
            b.setTransform(a.a, a.b, a.c, a.d, a.tx, a.ty);
          }
        },
        __clear: function () {
          if (this.__stage != null) {
            var a = this.__blendMode;
            this.__blendMode = null;
            this.__setBlendMode(10);
            this.context.setTransform(1, 0, 0, 1, 0, 0);
            this.context.globalAlpha = 1;
            if (!this.__stage.__transparent && this.__stage.__clearBeforeRender) {
              this.context.fillStyle = this.__stage.__colorString;
              this.context.fillRect(0, 0, this.__stage.stageWidth * this.__stage.window.__scale, this.__stage.stageHeight * this.__stage.window.__scale);
            } else if (this.__stage.__transparent && this.__stage.__clearBeforeRender) {
              this.context.clearRect(0, 0, this.__stage.stageWidth * this.__stage.window.__scale, this.__stage.stageHeight * this.__stage.window.__scale);
            }
            this.__setBlendMode(a);
          }
        },
        __popMask: function () {
          this.context.restore();
        },
        __popMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (!a.__isCacheBitmapRender && a.__mask != null) {
            this.__popMask();
          }
          if (b && a.__scrollRect != null) {
            this.__popMaskRect();
          }
        },
        __popMaskRect: function () {
          this.context.restore();
        },
        __pushMask: function (a) {
          this.context.save();
          this.setTransform(a.__renderTransform, this.context);
          this.context.beginPath();
          this.__renderDrawableMask(a);
          this.context.closePath();
          this.context.clip();
        },
        __pushMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b && a.__scrollRect != null) {
            this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
          }
          if (!a.__isCacheBitmapRender && a.__mask != null) {
            this.__pushMask(a.__mask);
          }
        },
        __pushMaskRect: function (a, b) {
          this.context.save();
          this.setTransform(b, this.context);
          this.context.beginPath();
          this.context.rect(a.x, a.y, a.width, a.height);
          this.context.clip();
        },
        __render: function (a) {
          this.__renderDrawable(a);
        },
        __renderDrawable: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 0:
                km.renderDrawable(a, this);
                break;
              case 2:
                Oj.renderDrawable(a, this);
                break;
              case 3:
                Eh.renderDrawable(a, this);
                break;
              case 4:
              case 5:
                lm.renderDrawable(a, this);
                break;
              case 6:
                mm.renderDrawable(a, this);
                break;
              case 7:
                ca.renderDrawable(a, this);
                break;
              case 8:
                Fh.renderDrawable(a, this);
                break;
              case 9:
                zg.renderDrawable(a, this);
            }
          }
        },
        __renderDrawableMask: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 0:
                km.renderDrawableMask(a, this);
                break;
              case 2:
                Oj.renderDrawableMask(a, this);
                break;
              case 3:
                Eh.renderDrawableMask(a, this);
                break;
              case 4:
              case 5:
                lm.renderDrawableMask(a, this);
                break;
              case 6:
                mm.renderDrawableMask(a, this);
                break;
              case 7:
                ca.renderDrawableMask(a, this);
                break;
              case 8:
                Fh.renderDrawableMask(a, this);
                break;
              case 9:
                zg.renderDrawableMask(a, this);
            }
          }
        },
        __setBlendMode: function (a) {
          if (this.__overrideBlendMode != null) {
            a = this.__overrideBlendMode;
          }
          if (this.__blendMode != a) {
            this.__blendMode = a;
            this.__setBlendModeContext(this.context, a);
          }
        },
        __setBlendModeContext: function (a, b) {
          switch (b) {
            case 0:
              a.globalCompositeOperation = "lighter";
              break;
            case 2:
              a.globalCompositeOperation = "darken";
              break;
            case 3:
              a.globalCompositeOperation = "difference";
              break;
            case 5:
              a.globalCompositeOperation = "hard-light";
              break;
            case 8:
              a.globalCompositeOperation = "lighten";
              break;
            case 9:
              a.globalCompositeOperation = "multiply";
              break;
            case 11:
              a.globalCompositeOperation = "overlay";
              break;
            case 12:
              a.globalCompositeOperation = "screen";
              break;
            default:
              a.globalCompositeOperation = "source-over";
          }
        },
        __class__: pg
      });
      var Sp = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "none";
            case 1:
              return "round";
            case 2:
              return "square";
            default:
              return null;
          }
        }
      };
      function nm(a) {
        Fa.call(this);
        this.__drawableType = 10;
        this.__element = a;
      }
      h["openfl.display.DOMElement"] = nm;
      nm.__name__ = "openfl.display.DOMElement";
      nm.__super__ = Fa;
      nm.prototype = q(Fa.prototype, {
        __class__: nm
      });
      function Pj(a) {
        ge.call(this);
        this.element = a;
        Fa.__supportDOM = true;
        a = window.getComputedStyle(document.documentElement, "");
        a = (Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/) || a.OLink === "" && ["", "o"])[1];
        "WebKit|Moz|MS|O".match(new RegExp("(" + a + ")", "i"));
        a[0].toUpperCase();
        a.substr(1);
        this.__vendorPrefix = a;
        this.__transformProperty = a == "webkit" ? "-webkit-transform" : "transform";
        this.__transformOriginProperty = a == "webkit" ? "-webkit-transform-origin" : "transform-origin";
        this.__clipRects = [];
        this.__z = this.__numClipRects = 0;
        this.__type = "dom";
        this.__canvasRenderer = new pg(null);
        this.__canvasRenderer.__isDOM = true;
      }
      h["openfl.display.DOMRenderer"] = Pj;
      Pj.__name__ = "openfl.display.DOMRenderer";
      Pj.__super__ = ge;
      Pj.prototype = q(ge.prototype, {
        __applyStyle: function (a, b, c, d) {
          var e = a.__style;
          if (b && a.__renderTransformChanged) {
            b = a.__renderTransform;
            var f = this.__roundPixels;
            if (f == null) {
              f = false;
            }
            e.setProperty(this.__transformProperty, f ? "matrix3d(" + b.a + ", " + b.b + ", 0, 0, " + b.c + ", " + b.d + ", 0, 0, 0, 0, 1, 0, " + (b.tx | 0) + ", " + (b.ty | 0) + ", 0, 1)" : "matrix3d(" + b.a + ", " + b.b + ", 0, 0, " + b.c + ", " + b.d + ", 0, 0, 0, 0, 1, 0, " + b.tx + ", " + b.ty + ", 0, 1)", null);
          }
          if (a.__worldZ != ++this.__z) {
            a.__worldZ = this.__z;
            e.setProperty("z-index", a.__worldZ == null ? "null" : "" + a.__worldZ, null);
          }
          if (c && a.__worldAlphaChanged) {
            if (a.__worldAlpha < 1) {
              e.setProperty("opacity", a.__worldAlpha == null ? "null" : "" + a.__worldAlpha, null);
            } else {
              e.removeProperty("opacity");
            }
          }
          if (d && a.__worldClipChanged) {
            if (a.__worldClip == null) {
              e.removeProperty("clip");
            } else {
              a = a.__worldClip;
              e.setProperty("clip", "rect(" + a.y + "px, " + a.get_right() + "px, " + a.get_bottom() + "px, " + a.x + "px)", null);
            }
          }
        },
        __initializeElement: function (a, b) {
          var c = a.__style = b.style;
          c.setProperty("position", "absolute", null);
          c.setProperty("top", "0", null);
          c.setProperty("left", "0", null);
          c.setProperty(this.__transformOriginProperty, "0 0 0", null);
          this.element.appendChild(b);
          a.__worldAlphaChanged = true;
          a.__renderTransformChanged = true;
          a.__worldVisibleChanged = true;
          a.__worldClipChanged = true;
          a.__worldClip = null;
          a.__worldZ = -1;
        },
        __popMask: function () {
          this.__popMaskRect();
        },
        __popMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a.__mask != null) {
            this.__popMask();
          }
          if (b && a.__scrollRect != null) {
            this.__popMaskRect();
          }
        },
        __popMaskRect: function () {
          if (this.__numClipRects > 0) {
            this.__numClipRects--;
            this.__currentClipRect = this.__numClipRects > 0 ? this.__clipRects[this.__numClipRects - 1] : null;
          }
        },
        __pushMask: function (a) {
          this.__pushMaskRect(a.getBounds(a), a.__renderTransform);
        },
        __pushMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b && a.__scrollRect != null) {
            this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
          }
          if (a.__mask != null) {
            this.__pushMask(a.__mask);
          }
        },
        __pushMaskRect: function (a, b) {
          if (this.__numClipRects == this.__clipRects.length) {
            this.__clipRects[this.__numClipRects] = new ea();
          }
          var c = this.__clipRects[this.__numClipRects];
          a.__transform(c, b);
          if (this.__numClipRects > 0) {
            a = this.__clipRects[this.__numClipRects - 1];
            c.__contract(a.x, a.y, a.width, a.height);
          }
          if (c.height < 0) {
            c.height = 0;
          }
          if (c.width < 0) {
            c.width = 0;
          }
          this.__currentClipRect = c;
          this.__numClipRects++;
        },
        __render: function (a) {
          this.element.style.background = this.__stage.__transparent ? "none" : this.__stage.__colorString;
          this.__z = 1;
          this.__renderDrawable(a);
        },
        __renderDrawable: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 2:
                xc.renderDrawable(a, this);
                break;
              case 3:
                he.renderDrawable(a, this);
                break;
              case 4:
              case 5:
                om.renderDrawable(a, this);
                break;
              case 6:
                pm.renderDrawable(a, this);
                break;
              case 7:
                bh.renderDrawable(a, this);
                break;
              case 8:
                Ag.renderDrawable(a, this);
                break;
              case 9:
                ch.renderDrawable(a, this);
                break;
              case 10:
                if (a.stage != null && a.__worldVisible && a.__renderable) {
                  if (!a.__active) {
                    this.__initializeElement(a, a.__element);
                    a.__active = true;
                  }
                  this.__updateClip(a);
                  this.__applyStyle(a, true, true, true);
                } else if (a.__active) {
                  this.element.removeChild(a.__element);
                  a.__active = false;
                }
                he.renderDrawable(a, this);
            }
          }
        },
        __renderDrawableClear: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 2:
                xc.renderDrawableClear(a, this);
                break;
              case 3:
                he.renderDrawableClear(a, this);
                break;
              case 4:
              case 5:
                om.renderDrawableClear(a, this);
                break;
              case 6:
                pm.renderDrawableClear(a, this);
                break;
              case 7:
                bh.renderDrawableClear(a, this);
                break;
              case 8:
                Ag.renderDrawableClear(a, this);
                break;
              case 9:
                ch.renderDrawableClear(a, this);
            }
          }
        },
        __setBlendMode: function (a) {
          if (this.__overrideBlendMode != null) {
            a = this.__overrideBlendMode;
          }
          if (this.__blendMode != a) {
            this.__blendMode = a;
          }
        },
        __updateClip: function (a) {
          if (this.__currentClipRect == null) {
            a.__worldClipChanged = a.__worldClip != null;
            a.__worldClip = null;
          } else {
            if (a.__worldClip == null) {
              a.__worldClip = new ea();
            }
            var b = ea.__pool.get();
            var c = Aa.__pool.get();
            c.copyFrom(a.__renderTransform);
            c.invert();
            this.__currentClipRect.__transform(b, c);
            if (b.equals(a.__worldClip)) {
              a.__worldClipChanged = false;
            } else {
              a.__worldClip.copyFrom(b);
              a.__worldClipChanged = true;
            }
            ea.__pool.release(b);
            Aa.__pool.release(c);
          }
        },
        __class__: Pj
      });
      function qm(a) {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}";
        }
        ke.call(this, a);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.display.DisplayObjectShader"] = qm;
      qm.__name__ = "openfl.display.DisplayObjectShader";
      qm.__super__ = ke;
      qm.prototype = q(ke.prototype, {
        __class__: qm
      });
      function Ho(a, b) {
        ua.call(this);
        this.name = a;
        this.frame = b;
      }
      h["openfl.display.FrameLabel"] = Ho;
      Ho.__name__ = "openfl.display.FrameLabel";
      Ho.__super__ = ua;
      Ho.prototype = q(ua.prototype, {
        __class__: Ho
      });
      function je(a) {
        this.__dirty = true;
        this.__owner = a;
        this.__commands = new ie();
        this.__positionY = this.__positionX = this.__strokePadding = 0;
        this.__renderTransform = new Aa();
        this.__usedShaderBuffers = new ab();
        this.__worldTransform = new Aa();
        this.__height = this.__width = 0;
        this.__bitmapScale = 1;
        this.__shaderBufferPool = new vb(function () {
          return new rm();
        });
        this.moveTo(0, 0);
      }
      h["openfl.display.Graphics"] = je;
      je.__name__ = "openfl.display.Graphics";
      je.prototype = {
        beginFill: function (a, b) {
          if (b == null) {
            b = 1;
          }
          if (a == null) {
            a = 0;
          }
          this.__commands.beginFill(a & 16777215, b);
          if (b > 0) {
            this.__visible = true;
          }
        },
        beginGradientFill: function (a, b, c, d, e, f, k, g) {
          if (g == null) {
            g = 0;
          }
          if (k == null) {
            k = 1;
          }
          if (f == null) {
            f = 0;
          }
          if (b != null && b.length != 0) {
            if (c == null) {
              c = [];
              for (var n = 0, r = b.length; n < r;) {
                n++;
                c.push(1);
              }
            }
            if (d == null) {
              d = [];
              n = 0;
              r = b.length;
              while (n < r) {
                var h = n++;
                d.push(Math.ceil(h / (b.length - 1) * 255));
              }
            }
            if (!(c.length < b.length) && !(d.length < b.length)) {
              this.__commands.beginGradientFill(a, b, c, d, e, f, k, g);
              n = 0;
              while (n < c.length) {
                a = c[n];
                ++n;
                if (a > 0) {
                  this.__visible = true;
                  break;
                }
              }
            }
          }
        },
        beginShaderFill: function (a, b) {
          if (a != null) {
            b = this.__shaderBufferPool.get();
            this.__usedShaderBuffers.add(b);
            b.update(a);
            this.__commands.beginShaderFill(b);
          }
        },
        clear: function () {
          for (var a = this.__usedShaderBuffers.h; a != null;) {
            var b = a.item;
            a = a.next;
            this.__shaderBufferPool.release(b);
          }
          this.__usedShaderBuffers.clear();
          this.__commands.clear();
          this.__strokePadding = 0;
          if (this.__bounds != null) {
            this.set___dirty(true);
            this.__transformDirty = true;
            this.__bounds = null;
          }
          this.__visible = false;
          this.__positionY = this.__positionX = 0;
          this.moveTo(0, 0);
        },
        cubicCurveTo: function (a, b, c, d, e, f) {
          var k = this.__findExtrema(this.__positionX, a, c, e);
          var g = this.__findExtrema(this.__positionY, b, d, f);
          this.__inflateBounds(k.min - this.__strokePadding, g.min - this.__strokePadding);
          this.__inflateBounds(k.max + this.__strokePadding, g.max + this.__strokePadding);
          this.__positionX = e;
          this.__positionY = f;
          this.__commands.cubicCurveTo(a, b, c, d, e, f);
          this.set___dirty(true);
        },
        curveTo: function (a, b, c, d) {
          this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
          this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding);
          var e = a < c && a > this.__positionX || a > c && a < this.__positionX ? c : this.__calculateBezierQuadPoint((this.__positionX - a) / (this.__positionX - a * 2 + c), this.__positionX, a, c);
          var f = b < d && b > this.__positionY || b > d && b < this.__positionY ? d : this.__calculateBezierQuadPoint((this.__positionY - b) / (this.__positionY - b * 2 + d), this.__positionY, b, d);
          this.__inflateBounds(e - this.__strokePadding, f - this.__strokePadding);
          this.__inflateBounds(e + this.__strokePadding, f + this.__strokePadding);
          this.__positionX = c;
          this.__positionY = d;
          this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
          this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding);
          this.__commands.curveTo(a, b, c, d);
          this.set___dirty(true);
        },
        drawCircle: function (a, b, c) {
          if (!(c <= 0)) {
            this.__inflateBounds(a - c - this.__strokePadding, b - c - this.__strokePadding);
            this.__inflateBounds(a + c + this.__strokePadding, b + c + this.__strokePadding);
            this.__commands.drawCircle(a, b, c);
            this.set___dirty(true);
          }
        },
        drawPath: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          var d = 0;
          if (c == 1) {
            this.__commands.windingNonZero();
          }
          a = a.iterator();
          a: while (a.hasNext()) {
            switch (a.next()) {
              case 1:
                this.moveTo(b.get(d), b.get(d + 1));
                d += 2;
                break;
              case 2:
                this.lineTo(b.get(d), b.get(d + 1));
                d += 2;
                break;
              case 3:
                this.curveTo(b.get(d), b.get(d + 1), b.get(d + 2), b.get(d + 3));
                d += 4;
                break;
              case 4:
                this.moveTo(b.get(d + 2), b.get(d + 3));
                break a;
              case 5:
                this.lineTo(b.get(d + 2), b.get(d + 3));
                break a;
              case 6:
                this.cubicCurveTo(b.get(d), b.get(d + 1), b.get(d + 2), b.get(d + 3), b.get(d + 4), b.get(d + 5));
                d += 6;
            }
          }
        },
        drawQuads: function (a, b, c) {
          if (a != null) {
            var d = b != null;
            var e = false;
            var f = false;
            var k = d ? b.get_length() : Math.floor(a.get_length() / 4);
            if (k != 0) {
              if (c != null) {
                if (c.get_length() >= k * 6) {
                  f = e = true;
                } else if (c.get_length() >= k * 4) {
                  e = true;
                } else if (c.get_length() >= k * 2) {
                  f = true;
                }
              }
              for (var g = ea.__pool.get(), n = Aa.__pool.get(), h = Infinity, p = Infinity, m = -Infinity, l = -Infinity, t, q = 0; q < k;) {
                var u = q++;
                t = d ? b.get(u) * 4 : u * 4;
                if (!(t < 0)) {
                  g.setTo(0, 0, a.get(t + 2), a.get(t + 3));
                  if (!(g.width <= 0) && !(g.height <= 0)) {
                    if (e && f) {
                      t = u * 6;
                      n.setTo(c.get(t), c.get(t + 1), c.get(t + 2), c.get(t + 3), c.get(t + 4), c.get(t + 5));
                    } else if (e) {
                      t = u * 4;
                      n.setTo(c.get(t), c.get(t + 1), c.get(t + 2), c.get(t + 3), g.x, g.y);
                    } else if (f) {
                      t = u * 2;
                      n.tx = c.get(t);
                      n.ty = c.get(t + 1);
                    } else {
                      n.tx = g.x;
                      n.ty = g.y;
                    }
                    g.__transform(g, n);
                    if (h > g.x) {
                      h = g.x;
                    }
                    if (p > g.y) {
                      p = g.y;
                    }
                    if (m < g.get_right()) {
                      m = g.get_right();
                    }
                    if (l < g.get_bottom()) {
                      l = g.get_bottom();
                    }
                  }
                }
              }
              this.__inflateBounds(h, p);
              this.__inflateBounds(m, l);
              this.__commands.drawQuads(a, b, c);
              this.set___dirty(true);
              this.__visible = true;
              ea.__pool.release(g);
              Aa.__pool.release(n);
            }
          }
        },
        drawRect: function (a, b, c, d) {
          if (c != 0 || d != 0) {
            var e = c < 0 ? -1 : 1;
            var f = d < 0 ? -1 : 1;
            this.__inflateBounds(a - this.__strokePadding * e, b - this.__strokePadding * f);
            this.__inflateBounds(a + c + this.__strokePadding * e, b + d + this.__strokePadding * f);
            this.__commands.drawRect(a, b, c, d);
            this.set___dirty(true);
          }
        },
        drawTriangles: function (a, b, c, d) {
          if (d == null) {
            d = 1;
          }
          if (a != null && a.get_length() != 0) {
            var e = a.get_length() / 2 | 0;
            if (b == null) {
              if (e % 3 != 0) {
                throw new Oh("Not enough vertices to close a triangle.");
              }
              b = qb.toIntVector(null);
              for (var f = 0, k = e; f < k;) {
                var g = f++;
                b.push(g);
              }
            }
            if (d == null) {
              d = 1;
            }
            var n = Infinity;
            var h = Infinity;
            var p = -Infinity;
            var m = -Infinity;
            f = 0;
            for (k = e; f < k;) {
              g = f++;
              e = a.get(g * 2);
              g = a.get(g * 2 + 1);
              if (n > e) {
                n = e;
              }
              if (h > g) {
                h = g;
              }
              if (p < e) {
                p = e;
              }
              if (m < g) {
                m = g;
              }
            }
            this.__inflateBounds(n, h);
            this.__inflateBounds(p, m);
            this.__commands.drawTriangles(a, b, c, d);
            this.set___dirty(true);
            this.__visible = true;
          }
        },
        endFill: function () {
          this.__commands.endFill();
        },
        lineStyle: function (a, b, c, d, e, f, k, g) {
          if (g == null) {
            g = 3;
          }
          if (e == null) {
            e = 2;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 1;
          }
          if (b == null) {
            b = 0;
          }
          if (f == null) {
            f = 1;
          }
          if (k == null) {
            k = 2;
          }
          if (a != null) {
            if (k == 1) {
              if (a > this.__strokePadding) {
                this.__strokePadding = Math.ceil(a);
              }
            } else if (a / 2 > this.__strokePadding) {
              this.__strokePadding = Math.ceil(a / 2);
            }
          }
          this.__commands.lineStyle(a, b, c, d, e, f, k, g);
          if (a != null) {
            this.__visible = true;
          }
        },
        lineTo: function (a, b) {
          if (isFinite(a) && isFinite(b)) {
            this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
            this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding);
            this.__positionX = a;
            this.__positionY = b;
            this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
            this.__inflateBounds(this.__positionX + this.__strokePadding * 2, this.__positionY + this.__strokePadding);
            this.__commands.lineTo(a, b);
            this.set___dirty(true);
          }
        },
        moveTo: function (a, b) {
          this.__positionX = a;
          this.__positionY = b;
          this.__commands.moveTo(a, b);
        },
        overrideBlendMode: function (a) {
          if (a == null) {
            a = 10;
          }
          this.__commands.overrideBlendMode(a);
        },
        __calculateBezierCubicPoint: function (a, b, c, d, e) {
          var f = 1 - a;
          return b * f * f * f + c * 3 * a * f * f + d * 3 * f * a * a + e * a * a * a;
        },
        __calculateBezierQuadPoint: function (a, b, c, d) {
          var e = 1 - a;
          return e * e * b + e * 2 * a * c + a * a * d;
        },
        __cleanup: function () {
          if (this.__bounds != null && this.__canvas != null) {
            this.set___dirty(true);
            this.__transformDirty = true;
          }
          this.__context = this.__canvas = this.__bitmap = null;
        },
        __getBounds: function (a, b) {
          if (this.__bounds != null) {
            var c = ea.__pool.get();
            this.__bounds.__transform(c, b);
            a.__expand(c.x, c.y, c.width, c.height);
            ea.__pool.release(c);
          }
        },
        __hitTest: function (a, b, c, d) {
          if (this.__bounds == null) {
            return false;
          }
          var e = d.a * d.d - d.b * d.c;
          var f = e == 0 ? -d.tx : 1 / e * (d.c * (d.ty - b) + d.d * (a - d.tx));
          e = d.a * d.d - d.b * d.c;
          a = e == 0 ? -d.ty : 1 / e * (d.a * (b - d.ty) + d.b * (d.tx - a));
          if (f > this.__bounds.x && a > this.__bounds.y && this.__bounds.contains(f, a)) {
            if (c) {
              return D.hitTest(this, f, a);
            } else {
              return true;
            }
          } else {
            return false;
          }
        },
        __findExtrema: function (a, b, c, d) {
          var e = [];
          if ((!(b < d) || !(b > a)) && (!(b > d) || !(b < a)) || (!(c < d) || !(c > a)) && (!(c > d) || !(c < a))) {
            var f = -a + b * 3 + d - c * 3;
            var k = a * 2 - b * 4 + c * 2;
            var g = b - a;
            var n = k * k - f * 4 * g;
            if (f == 0) {
              f = -g / k;
              if (f > 0 && f < 1) {
                e.push(this.__calculateBezierCubicPoint(f, a, b, c, d));
              }
            } else if (n >= 0) {
              g = (-k + Math.sqrt(n)) / (f * 2);
              f = (-k - Math.sqrt(n)) / (f * 2);
              if (g > 0 && g < 1) {
                e.push(this.__calculateBezierCubicPoint(g, a, b, c, d));
              }
              if (f > 0 && f < 1) {
                e.push(this.__calculateBezierCubicPoint(f, a, b, c, d));
              }
            }
          }
          b = a;
          e.push(d);
          for (d = 0; d < e.length;) {
            c = e[d];
            ++d;
            if (c < b) {
              b = c;
            }
            if (c > a) {
              a = c;
            }
          }
          return {
            min: b,
            max: a
          };
        },
        __inflateBounds: function (a, b) {
          if (this.__bounds == null) {
            this.__bounds = new ea(a, b, 0, 0);
            this.__transformDirty = true;
          } else {
            if (a < this.__bounds.x) {
              this.__bounds.width += this.__bounds.x - a;
              this.__bounds.x = a;
              this.__transformDirty = true;
            }
            if (b < this.__bounds.y) {
              this.__bounds.height += this.__bounds.y - b;
              this.__bounds.y = b;
              this.__transformDirty = true;
            }
            if (a > this.__bounds.x + this.__bounds.width) {
              this.__bounds.width = a - this.__bounds.x;
            }
            if (b > this.__bounds.y + this.__bounds.height) {
              this.__bounds.height = b - this.__bounds.y;
            }
          }
        },
        __update: function (a, b) {
          if (this.__bounds != null && !(this.__bounds.width <= 0) && !(this.__bounds.height <= 0)) {
            var c = this.__owner.__renderTransform;
            if (c != null) {
              var d = b;
              var e = b;
              if (this.__owner.__worldScale9Grid == null) {
                d = c.b == 0 ? Math.abs(c.a) : Math.sqrt(c.a * c.a + c.b * c.b);
                e = c.c == 0 ? Math.abs(c.d) : Math.sqrt(c.c * c.c + c.d * c.d);
                if (a != null) {
                  d = a.b == 0 ? d * a.a : d * Math.sqrt(a.a * a.a + a.b * a.b);
                  e = a.c == 0 ? e * a.d : e * Math.sqrt(a.c * a.c + a.d * a.d);
                }
              }
              a = this.__bounds.width * d;
              e *= this.__bounds.height;
              if (a < 1 || e < 1) {
                if (this.__width >= 1 || this.__height >= 1) {
                  this.set___dirty(true);
                }
                this.__height = this.__width = 0;
              } else {
                if (je.maxTextureWidth != null && a > je.maxTextureWidth) {
                  a = je.maxTextureWidth;
                }
                if (je.maxTextureWidth != null && e > je.maxTextureHeight) {
                  e = je.maxTextureHeight;
                }
                if (this.__owner.__worldScale9Grid != null) {
                  this.__renderTransform.a = b;
                  this.__renderTransform.d = b;
                  d = 1 / b;
                  var f = 1 / b;
                } else {
                  this.__renderTransform.a = a / this.__bounds.width;
                  this.__renderTransform.d = e / this.__bounds.height;
                  d = 1 / this.__renderTransform.a;
                  f = 1 / this.__renderTransform.d;
                }
                this.__worldTransform.a = d * c.a;
                this.__worldTransform.b = d * c.b;
                this.__worldTransform.c = f * c.c;
                this.__worldTransform.d = f * c.d;
                f = this.__bounds.x;
                var k = this.__bounds.y;
                d = f * c.a + k * c.c + c.tx;
                c = f * c.b + k * c.d + c.ty;
                if (b > 1) {
                  b = 1 / b;
                  this.__worldTransform.tx = Math.round(d / b) * b;
                  this.__worldTransform.ty = Math.round(c / b) * b;
                } else {
                  this.__worldTransform.tx = Math.round(d);
                  this.__worldTransform.ty = Math.round(c);
                }
                b = this.__worldTransform;
                f = b.a * b.d - b.b * b.c;
                this.__renderTransform.tx = f == 0 ? -b.tx : 1 / f * (b.c * (b.ty - c) + b.d * (d - b.tx));
                b = this.__worldTransform;
                f = b.a * b.d - b.b * b.c;
                this.__renderTransform.ty = f == 0 ? -b.ty : 1 / f * (b.a * (c - b.ty) + b.b * (b.tx - d));
                a = Math.ceil(a + 1);
                e = Math.ceil(e + 1);
                if (a != this.__width || e != this.__height) {
                  this.set___dirty(true);
                }
                this.__width = a;
                this.__height = e;
              }
            }
          }
        },
        set___dirty: function (a) {
          if (a && this.__owner != null) {
            var b = this.__owner;
            if (!b.__renderDirty) {
              b.__renderDirty = true;
              b.__setParentRenderDirty();
            }
          }
          if (a) {
            this.__hardwareDirty = this.__softwareDirty = true;
          }
          return this.__dirty = a;
        },
        __class__: je,
        __properties__: {
          set___dirty: "set___dirty"
        }
      };
      function Io() {}
      h["openfl.display.ITileContainer"] = Io;
      Io.__name__ = "openfl.display.ITileContainer";
      Io.__isInterface__ = true;
      var Tp = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "bevel";
            case 1:
              return "miter";
            case 2:
              return "round";
            default:
              return null;
          }
        }
      };
      function Jo() {
        wb.call(this);
        this.__drawableType = 4;
        this.contentLoaderInfo = Pf.create(this);
        this.uncaughtErrorEvents = this.contentLoaderInfo.uncaughtErrorEvents;
        this.__unloaded = true;
      }
      h["openfl.display.Loader"] = Jo;
      Jo.__name__ = "openfl.display.Loader";
      Jo.__super__ = wb;
      Jo.prototype = q(wb.prototype, {
        addChild: function (a) {
          throw new Rb("Error #2069: The Loader class does not implement this method.", 2069);
        },
        addChildAt: function (a, b) {
          throw new Rb("Error #2069: The Loader class does not implement this method.", 2069);
        },
        removeChild: function (a) {
          if (a == this.content) {
            return wb.prototype.removeChild.call(this, this.content);
          }
          throw new Rb("Error #2069: The Loader class does not implement this method.", 2069);
        },
        removeChildAt: function (a) {
          throw new Rb("Error #2069: The Loader class does not implement this method.", 2069);
        },
        __class__: Jo
      });
      function Pf() {
        ua.call(this);
        this.applicationDomain = yi.currentDomain;
        this.bytesTotal = this.bytesLoaded = 0;
        this.childAllowsParent = true;
        this.parameters = {};
      }
      h["openfl.display.LoaderInfo"] = Pf;
      Pf.__name__ = "openfl.display.LoaderInfo";
      Pf.create = function (a) {
        var b = new Pf();
        b.uncaughtErrorEvents = new sm();
        if (a != null) {
          b.loader = a;
        } else {
          b.url = Pf.__rootURL;
        }
        return b;
      };
      Pf.__super__ = ua;
      Pf.prototype = q(ua.prototype, {
        __complete: function () {
          if (!this.__completed) {
            if (this.bytesLoaded < this.bytesTotal) {
              this.bytesLoaded = this.bytesTotal;
            }
            this.__update(this.bytesLoaded, this.bytesTotal);
            this.__completed = true;
            this.dispatchEvent(new Ga("complete"));
          }
        },
        __update: function (a, b) {
          this.bytesLoaded = a;
          this.bytesTotal = b;
          this.dispatchEvent(new zi("progress", false, false, a, b));
        },
        __class__: Pf
      });
      function Mj() {
        $a.call(this);
        this.__enabled = true;
      }
      h["openfl.display.MovieClip"] = Mj;
      Mj.__name__ = "openfl.display.MovieClip";
      Mj.__super__ = $a;
      Mj.prototype = q($a.prototype, {
        __enterFrame: function (a) {
          if (this.__timeline != null) {
            this.__timeline.__enterFrame(a);
          }
          for (var b = 0, c = this.__children; b < c.length;) {
            var d = c[b];
            ++b;
            d.__enterFrame(a);
          }
        },
        __tabTest: function (a) {
          if (this.__enabled) {
            $a.prototype.__tabTest.call(this, a);
          }
        },
        __class__: Mj
      });
      function Ja(a, b) {
        ge.call(this);
        this.__context3D = a;
        this.__context = a.__context;
        this.__gl = this.gl = a.__context.webgl;
        this.__defaultRenderTarget = b;
        this.__flipped = this.__defaultRenderTarget == null;
        if (je.maxTextureWidth == null) {
          je.maxTextureWidth = je.maxTextureHeight = this.__gl.getParameter(this.__gl.MAX_TEXTURE_SIZE);
        }
        this.__matrix = Bb._new();
        this.__values = [];
        this.__softwareRenderer = new pg(null);
        this.__type = "opengl";
        this.__setBlendMode(10);
        this.__context3D.__setGLBlend(true);
        this.__clipRects = [];
        this.__maskObjects = [];
        this.__numClipRects = 0;
        this.__projection = Bb._new();
        this.__projectionFlipped = Bb._new();
        this.__stencilReference = 0;
        this.__tempRect = new ea();
        this.__defaultDisplayShader = new qm();
        this.__defaultGraphicsShader = new rh();
        this.__defaultShader = this.__defaultDisplayShader;
        this.__initShader(this.__defaultShader);
        this.__scrollRectMasks = new vb(function () {
          return new sg();
        });
        this.__maskShader = new Gh();
      }
      h["openfl.display.OpenGLRenderer"] = Ja;
      Ja.__name__ = "openfl.display.OpenGLRenderer";
      Ja.__super__ = ge;
      Ja.prototype = q(ge.prototype, {
        applyAlpha: function (a) {
          Ja.__alphaValue[0] = a * this.__worldAlpha;
          if (this.__currentShaderBuffer != null) {
            this.__currentShaderBuffer.addFloatOverride("openfl_Alpha", Ja.__alphaValue);
          } else if (this.__currentShader != null && this.__currentShader.__alpha != null) {
            this.__currentShader.__alpha.value = Ja.__alphaValue;
          }
        },
        applyBitmapData: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          if (this.__currentShaderBuffer != null) {
            if (a != null) {
              Ja.__textureSizeValue[0] = a.__textureWidth;
              Ja.__textureSizeValue[1] = a.__textureHeight;
              this.__currentShaderBuffer.addFloatOverride("openfl_TextureSize", Ja.__textureSizeValue);
            }
          } else if (this.__currentShader != null) {
            if (this.__currentShader.__bitmap != null) {
              this.__currentShader.__bitmap.input = a;
              this.__currentShader.__bitmap.filter = b && this.__allowSmoothing ? 4 : 5;
              this.__currentShader.__bitmap.mipFilter = 2;
              this.__currentShader.__bitmap.wrap = c ? 2 : 0;
            }
            if (this.__currentShader.__texture != null) {
              this.__currentShader.__texture.input = a;
              this.__currentShader.__texture.filter = b && this.__allowSmoothing ? 4 : 5;
              this.__currentShader.__texture.mipFilter = 2;
              this.__currentShader.__texture.wrap = c ? 2 : 0;
            }
            if (this.__currentShader.__textureSize != null) {
              if (a != null) {
                Ja.__textureSizeValue[0] = a.__textureWidth;
                Ja.__textureSizeValue[1] = a.__textureHeight;
                this.__currentShader.__textureSize.value = Ja.__textureSizeValue;
              } else {
                this.__currentShader.__textureSize.value = null;
              }
            }
          }
        },
        applyColorTransform: function (a) {
          var b = a != null && !a.__isDefault(true);
          this.applyHasColorTransform(b);
          if (b) {
            a.__setArrays(Ja.__colorMultipliersValue, Ja.__colorOffsetsValue);
            if (this.__currentShaderBuffer != null) {
              this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier", Ja.__colorMultipliersValue);
              this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset", Ja.__colorOffsetsValue);
            } else if (this.__currentShader != null) {
              if (this.__currentShader.__colorMultiplier != null) {
                this.__currentShader.__colorMultiplier.value = Ja.__colorMultipliersValue;
              }
              if (this.__currentShader.__colorOffset != null) {
                this.__currentShader.__colorOffset.value = Ja.__colorOffsetsValue;
              }
            }
          } else if (this.__currentShaderBuffer != null) {
            this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier", Ja.__emptyColorValue);
            this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset", Ja.__emptyColorValue);
          } else if (this.__currentShader != null) {
            if (this.__currentShader.__colorMultiplier != null) {
              this.__currentShader.__colorMultiplier.value = Ja.__emptyColorValue;
            }
            if (this.__currentShader.__colorOffset != null) {
              this.__currentShader.__colorOffset.value = Ja.__emptyColorValue;
            }
          }
        },
        applyHasColorTransform: function (a) {
          Ja.__hasColorTransformValue[0] = a;
          if (this.__currentShaderBuffer != null) {
            this.__currentShaderBuffer.addBoolOverride("openfl_HasColorTransform", Ja.__hasColorTransformValue);
          } else if (this.__currentShader != null && this.__currentShader.__hasColorTransform != null) {
            this.__currentShader.__hasColorTransform.value = Ja.__hasColorTransformValue;
          }
        },
        applyMatrix: function (a) {
          if (this.__currentShaderBuffer != null) {
            this.__currentShaderBuffer.addFloatOverride("openfl_Matrix", a);
          } else if (this.__currentShader != null && this.__currentShader.__matrix != null) {
            this.__currentShader.__matrix.value = a;
          }
        },
        setShader: function (a) {
          this.__currentShaderBuffer = null;
          if (this.__currentShader != a) {
            if (a == null) {
              this.__currentShader = null;
              this.__context3D.setProgram(null);
            } else {
              this.__currentShader = a;
              this.__initShader(a);
              this.__context3D.setProgram(a.program);
              this.__context3D.__flushGLProgram();
              this.__currentShader.__enable();
              this.__context3D.__state.shader = a;
            }
          }
        },
        setViewport: function () {
          this.__gl.viewport(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight);
        },
        updateShader: function () {
          if (this.__currentShader != null) {
            if (this.__currentShader.__position != null) {
              this.__currentShader.__position.__useArray = true;
            }
            if (this.__currentShader.__textureCoord != null) {
              this.__currentShader.__textureCoord.__useArray = true;
            }
            this.__context3D.setProgram(this.__currentShader.program);
            this.__context3D.__flushGLProgram();
            this.__context3D.__flushGLTextures();
            this.__currentShader.__update();
          }
        },
        useAlphaArray: function () {
          if (this.__currentShader != null && this.__currentShader.__alpha != null) {
            this.__currentShader.__alpha.__useArray = true;
          }
        },
        useColorTransformArray: function () {
          if (this.__currentShader != null) {
            if (this.__currentShader.__colorMultiplier != null) {
              this.__currentShader.__colorMultiplier.__useArray = true;
            }
            if (this.__currentShader.__colorOffset != null) {
              this.__currentShader.__colorOffset.__useArray = true;
            }
          }
        },
        __clear: function () {
          if (this.__stage == null || this.__stage.__transparent) {
            this.__context3D.clear(0, 0, 0, 0, 0, 0, 1);
          } else {
            this.__context3D.clear(this.__stage.__colorSplit[0], this.__stage.__colorSplit[1], this.__stage.__colorSplit[2], 1, 0, 0, 1);
          }
          this.__cleared = true;
        },
        __clearShader: function () {
          if (this.__currentShader != null) {
            if (this.__currentShaderBuffer == null) {
              if (this.__currentShader.__bitmap != null) {
                this.__currentShader.__bitmap.input = null;
              }
            } else {
              this.__currentShaderBuffer.clearOverride();
            }
            if (this.__currentShader.__texture != null) {
              this.__currentShader.__texture.input = null;
            }
            if (this.__currentShader.__textureSize != null) {
              this.__currentShader.__textureSize.value = null;
            }
            if (this.__currentShader.__hasColorTransform != null) {
              this.__currentShader.__hasColorTransform.value = null;
            }
            if (this.__currentShader.__position != null) {
              this.__currentShader.__position.value = null;
            }
            if (this.__currentShader.__matrix != null) {
              this.__currentShader.__matrix.value = null;
            }
            this.__currentShader.__clearUseArray();
          }
        },
        __copyShader: function (a) {
          this.__currentShader = a.__currentShader;
          this.__currentShaderBuffer = a.__currentShaderBuffer;
          this.__currentDisplayShader = a.__currentDisplayShader;
          this.__currentGraphicsShader = a.__currentGraphicsShader;
        },
        __getMatrix: function (a, b) {
          var c = Aa.__pool.get();
          c.copyFrom(a);
          c.concat(this.__worldTransform);
          if (b == 0 || b == 1 && c.b == 0 && c.c == 0 && c.a < 1.001 && c.a > 0.999 && c.d < 1.001 && c.d > 0.999) {
            c.tx = Math.round(c.tx);
            c.ty = Math.round(c.ty);
          }
          Bb.identity(this.__matrix);
          Bb.set(this.__matrix, 0, c.a);
          Bb.set(this.__matrix, 1, c.b);
          Bb.set(this.__matrix, 4, c.c);
          Bb.set(this.__matrix, 5, c.d);
          Bb.set(this.__matrix, 12, c.tx);
          Bb.set(this.__matrix, 13, c.ty);
          Bb.append(this.__matrix, this.__flipped ? this.__projectionFlipped : this.__projection);
          this.__values[0] = Bb.get(this.__matrix, 0);
          this.__values[1] = Bb.get(this.__matrix, 1);
          this.__values[2] = Bb.get(this.__matrix, 2);
          this.__values[3] = Bb.get(this.__matrix, 3);
          this.__values[4] = Bb.get(this.__matrix, 4);
          this.__values[5] = Bb.get(this.__matrix, 5);
          this.__values[6] = Bb.get(this.__matrix, 6);
          this.__values[7] = Bb.get(this.__matrix, 7);
          this.__values[8] = Bb.get(this.__matrix, 8);
          this.__values[9] = Bb.get(this.__matrix, 9);
          this.__values[10] = Bb.get(this.__matrix, 10);
          this.__values[11] = Bb.get(this.__matrix, 11);
          this.__values[12] = Bb.get(this.__matrix, 12);
          this.__values[13] = Bb.get(this.__matrix, 13);
          this.__values[14] = Bb.get(this.__matrix, 14);
          this.__values[15] = Bb.get(this.__matrix, 15);
          Aa.__pool.release(c);
          return this.__values;
        },
        __initShader: function (a) {
          if (a != null) {
            if (a.__context == null) {
              a.__context = this.__context3D;
              a.__init();
            }
            return a;
          } else {
            return this.__defaultShader;
          }
        },
        __initDisplayShader: function (a) {
          if (a != null) {
            if (a.__context == null) {
              a.__context = this.__context3D;
              a.__init();
            }
            return a;
          } else {
            return this.__defaultDisplayShader;
          }
        },
        __initGraphicsShader: function (a) {
          if (a != null) {
            if (a.__context == null) {
              a.__context = this.__context3D;
              a.__init();
            }
            return a;
          } else {
            return this.__defaultGraphicsShader;
          }
        },
        __initShaderBuffer: function (a) {
          if (a != null) {
            return this.__initGraphicsShader(a.shader);
          } else {
            return this.__defaultGraphicsShader;
          }
        },
        __popMask: function () {
          if (this.__stencilReference != 0) {
            var a = this.__maskObjects.pop();
            if (this.__stencilReference > 1) {
              this.__context3D.setStencilActions(2, 1, 0, 0, 5);
              this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 255);
              this.__context3D.setColorMask(false, false, false, false);
              this.__renderDrawableMask(a);
              this.__stencilReference--;
              this.__context3D.setStencilActions(2, 1, 5, 5, 5);
              this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0);
              this.__context3D.setColorMask(true, true, true, true);
            } else {
              this.__stencilReference = 0;
              this.__context3D.setStencilActions();
              this.__context3D.setStencilReferenceValue(0, 0, 0);
            }
          }
        },
        __popMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a.__mask != null) {
            this.__popMask();
          }
          if (b && a.__scrollRect != null) {
            if (a.__renderTransform.b != 0 || a.__renderTransform.c != 0) {
              this.__scrollRectMasks.release(this.__maskObjects[this.__maskObjects.length - 1]);
              this.__popMask();
            } else {
              this.__popMaskRect();
            }
          }
        },
        __popMaskRect: function () {
          if (this.__numClipRects > 0) {
            this.__numClipRects--;
            if (this.__numClipRects > 0) {
              this.__scissorRect(this.__clipRects[this.__numClipRects - 1]);
            } else {
              this.__scissorRect();
            }
          }
        },
        __pushMask: function (a) {
          if (this.__stencilReference == 0) {
            this.__context3D.clear(0, 0, 0, 0, 0, 0, 4);
            this.__updatedStencil = true;
          }
          this.__context3D.setStencilActions(2, 1, 2, 5, 5);
          this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 255);
          this.__context3D.setColorMask(false, false, false, false);
          this.__renderDrawableMask(a);
          this.__maskObjects.push(a);
          this.__stencilReference++;
          this.__context3D.setStencilActions(2, 1, 5, 5, 5);
          this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0);
          this.__context3D.setColorMask(true, true, true, true);
        },
        __pushMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b && a.__scrollRect != null) {
            if (a.__renderTransform.b != 0 || a.__renderTransform.c != 0) {
              b = this.__scrollRectMasks.get();
              b.get_graphics().clear();
              b.get_graphics().beginFill(65280);
              b.get_graphics().drawRect(a.__scrollRect.x, a.__scrollRect.y, a.__scrollRect.width, a.__scrollRect.height);
              b.__renderTransform.copyFrom(a.__renderTransform);
              this.__pushMask(b);
            } else {
              this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
            }
          }
          if (a.__mask != null) {
            this.__pushMask(a.__mask);
          }
        },
        __pushMaskRect: function (a, b) {
          if (this.__numClipRects == this.__clipRects.length) {
            this.__clipRects[this.__numClipRects] = new ea();
          }
          var c = Aa.__pool.get();
          c.copyFrom(b);
          c.concat(this.__worldTransform);
          b = this.__clipRects[this.__numClipRects];
          a.__transform(b, c);
          if (this.__numClipRects > 0) {
            a = this.__clipRects[this.__numClipRects - 1];
            b.__contract(a.x, a.y, a.width, a.height);
          }
          if (b.height < 0) {
            b.height = 0;
          }
          if (b.width < 0) {
            b.width = 0;
          }
          Aa.__pool.release(c);
          this.__scissorRect(b);
          this.__numClipRects++;
        },
        __render: function (a) {
          this.__context3D.setColorMask(true, true, true, true);
          this.__context3D.setCulling(3);
          this.__context3D.setDepthTest(false, 0);
          this.__context3D.setStencilActions();
          this.__context3D.setStencilReferenceValue(0, 0, 0);
          this.__context3D.setScissorRectangle(null);
          this.__blendMode = null;
          this.__setBlendMode(10);
          if (this.__defaultRenderTarget == null) {
            Ja.__scissorRectangle.setTo(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight);
            this.__context3D.setScissorRectangle(Ja.__scissorRectangle);
            this.__upscaled = this.__worldTransform.a != 1 || this.__worldTransform.d != 1;
            this.__renderDrawable(a);
            if (this.__offsetX > 0 || this.__offsetY > 0) {
              if (this.__offsetX > 0) {
                Ja.__scissorRectangle.setTo(0, 0, this.__offsetX, this.__height);
                this.__context3D.setScissorRectangle(Ja.__scissorRectangle);
                this.__context3D.__flushGL();
                this.__gl.clearColor(0, 0, 0, 1);
                this.__gl.clear(this.__gl.COLOR_BUFFER_BIT);
                Ja.__scissorRectangle.setTo(this.__offsetX + this.__displayWidth, 0, this.__width, this.__height);
                this.__context3D.setScissorRectangle(Ja.__scissorRectangle);
                this.__context3D.__flushGL();
                this.__gl.clearColor(0, 0, 0, 1);
                this.__gl.clear(this.__gl.COLOR_BUFFER_BIT);
              }
              if (this.__offsetY > 0) {
                Ja.__scissorRectangle.setTo(0, 0, this.__width, this.__offsetY);
                this.__context3D.setScissorRectangle(Ja.__scissorRectangle);
                this.__context3D.__flushGL();
                this.__gl.clearColor(0, 0, 0, 1);
                this.__gl.clear(this.__gl.COLOR_BUFFER_BIT);
                Ja.__scissorRectangle.setTo(0, this.__offsetY + this.__displayHeight, this.__width, this.__height);
                this.__context3D.setScissorRectangle(Ja.__scissorRectangle);
                this.__context3D.__flushGL();
                this.__gl.clearColor(0, 0, 0, 1);
                this.__gl.clear(this.__gl.COLOR_BUFFER_BIT);
              }
              this.__context3D.setScissorRectangle(null);
            }
          } else {
            Ja.__scissorRectangle.setTo(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight);
            this.__context3D.setScissorRectangle(Ja.__scissorRectangle);
            var b = a.__mask;
            var c = a.__scrollRect;
            a.__mask = null;
            a.__scrollRect = null;
            this.__renderDrawable(a);
            a.__mask = b;
            a.__scrollRect = c;
          }
          this.__context3D.present();
        },
        __renderDrawable: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 0:
                tm.renderDrawable(a, this);
                break;
              case 2:
                Ve.renderDrawable(a, this);
                break;
              case 3:
                Hh.renderDrawable(a, this);
                break;
              case 4:
              case 5:
                um.renderDrawable(a, this);
                break;
              case 6:
                vm.renderDrawable(a, this);
                break;
              case 7:
                Bg.renderDrawable(a, this);
                break;
              case 8:
                We.renderDrawable(a, this);
                break;
              case 9:
                Z.renderDrawable(a, this);
            }
          }
        },
        __renderDrawableMask: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 0:
                tm.renderDrawableMask(a, this);
                break;
              case 2:
                Ve.renderDrawableMask(a, this);
                break;
              case 3:
                Hh.renderDrawableMask(a, this);
                break;
              case 4:
              case 5:
                um.renderDrawableMask(a, this);
                break;
              case 6:
                vm.renderDrawableMask(a, this);
                break;
              case 7:
                Bg.renderDrawableMask(a, this);
                break;
              case 8:
                We.renderDrawableMask(a, this);
                break;
              case 9:
                Z.renderDrawableMask(a, this);
            }
          }
        },
        __renderFilterPass: function (a, b, c, d) {
          if (d == null) {
            d = true;
          }
          if (a != null && b != null && this.__defaultRenderTarget != null) {
            var e = this.__context3D.__state.renderToTexture;
            var f = this.__context3D.__state.renderToTextureDepthStencil;
            var k = this.__context3D.__state.renderToTextureAntiAlias;
            var g = this.__context3D.__state.renderToTextureSurfaceSelector;
            this.__context3D.setRenderToTexture(this.__defaultRenderTarget.getTexture(this.__context3D), false);
            if (d) {
              this.__context3D.clear(0, 0, 0, 0, 0, 0, 1);
            }
            b = this.__initShader(b);
            this.setShader(b);
            this.applyAlpha(1);
            this.applyBitmapData(a, c);
            this.applyColorTransform(null);
            this.applyMatrix(this.__getMatrix(a.__renderTransform, 1));
            this.updateShader();
            c = a.getVertexBuffer(this.__context3D);
            if (b.__position != null) {
              this.__context3D.setVertexBufferAt(b.__position.index, c, 0, 3);
            }
            if (b.__textureCoord != null) {
              this.__context3D.setVertexBufferAt(b.__textureCoord.index, c, 3, 2);
            }
            a = a.getIndexBuffer(this.__context3D);
            this.__context3D.drawTriangles(a);
            if (e != null) {
              this.__context3D.setRenderToTexture(e, f, k, g);
            } else {
              this.__context3D.setRenderToBackBuffer();
            }
            this.__clearShader();
          }
        },
        __resize: function (a, b) {
          this.__width = a;
          this.__height = b;
          a = this.__defaultRenderTarget == null ? this.__stage.stageWidth : this.__defaultRenderTarget.width;
          b = this.__defaultRenderTarget == null ? this.__stage.stageHeight : this.__defaultRenderTarget.height;
          if (this.__defaultRenderTarget == null) {
            var c = this.__worldTransform;
            c = Math.round(c.a * 0 + c.c * 0 + c.tx);
          } else {
            c = 0;
          }
          this.__offsetX = c;
          if (this.__defaultRenderTarget == null) {
            c = this.__worldTransform;
            c = Math.round(c.b * 0 + c.d * 0 + c.ty);
          } else {
            c = 0;
          }
          this.__offsetY = c;
          if (this.__defaultRenderTarget == null) {
            c = this.__worldTransform;
            c = Math.round(a * c.a + c.c * 0 + c.tx - this.__offsetX);
          } else {
            c = a;
          }
          this.__displayWidth = c;
          if (this.__defaultRenderTarget == null) {
            c = this.__worldTransform;
            c = Math.round(c.b * 0 + b * c.d + c.ty - this.__offsetY);
          } else {
            c = b;
          }
          this.__displayHeight = c;
          Bb.createOrtho(this.__projection, 0, this.__displayWidth + this.__offsetX * 2, 0, this.__displayHeight + this.__offsetY * 2, -1000, 1000);
          Bb.createOrtho(this.__projectionFlipped, 0, this.__displayWidth + this.__offsetX * 2, this.__displayHeight + this.__offsetY * 2, 0, -1000, 1000);
        },
        __resumeClipAndMask: function (a) {
          if (this.__stencilReference > 0) {
            this.__context3D.setStencilActions(2, 1, 5, 5, 5);
            this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0);
          } else {
            this.__context3D.setStencilActions();
            this.__context3D.setStencilReferenceValue(0, 0, 0);
          }
          if (this.__numClipRects > 0) {
            this.__scissorRect(this.__clipRects[this.__numClipRects - 1]);
          } else {
            this.__scissorRect();
          }
        },
        __scissorRect: function (a) {
          if (a != null) {
            var b = Math.floor(a.x);
            var c = Math.floor(a.y);
            var d = a.width > 0 ? Math.ceil(a.get_right()) - b : 0;
            var e = a.height > 0 ? Math.ceil(a.get_bottom()) - c : 0;
            if (this.__context3D.__backBufferWantsBestResolution) {
              b = Math.floor(a.x / this.__pixelRatio);
              c = Math.floor(a.y / this.__pixelRatio);
              d = a.width > 0 ? Math.ceil(a.get_right() / this.__pixelRatio) - b : 0;
              e = a.height > 0 ? Math.ceil(a.get_bottom() / this.__pixelRatio) - c : 0;
            }
            if (d < 0) {
              d = 0;
            }
            if (e < 0) {
              e = 0;
            }
            Ja.__scissorRectangle.setTo(b, c, d, e);
            this.__context3D.setScissorRectangle(Ja.__scissorRectangle);
          } else {
            this.__context3D.setScissorRectangle(null);
          }
        },
        __setBlendMode: function (a) {
          if (this.__overrideBlendMode != null) {
            a = this.__overrideBlendMode;
          }
          if (this.__blendMode != a) {
            this.__blendMode = a;
            switch (a) {
              case 0:
                this.__context3D.setBlendFactors(2, 2);
                break;
              case 9:
                this.__context3D.setBlendFactors(1, 5);
                break;
              case 12:
                this.__context3D.setBlendFactors(2, 6);
                break;
              case 14:
                this.__context3D.setBlendFactors(2, 2);
                this.__context3D.__setGLBlendEquation(this.__gl.FUNC_REVERSE_SUBTRACT);
                break;
              default:
                this.__context3D.setBlendFactors(2, 5);
            }
          }
        },
        __setRenderTarget: function (a) {
          this.__defaultRenderTarget = a;
          this.__flipped = a == null;
          if (a != null) {
            this.__resize(a.width, a.height);
          }
        },
        __setShaderBuffer: function (a) {
          this.setShader(a.shader);
          this.__currentShaderBuffer = a;
        },
        __suspendClipAndMask: function () {
          if (this.__stencilReference > 0) {
            this.__context3D.setStencilActions();
            this.__context3D.setStencilReferenceValue(0, 0, 0);
          }
          if (this.__numClipRects > 0) {
            this.__scissorRect();
          }
        },
        __updateShaderBuffer: function (a) {
          if (this.__currentShader != null && this.__currentShaderBuffer != null) {
            this.__currentShader.__updateFromBuffer(this.__currentShaderBuffer, a);
          }
        },
        __class__: Ja
      });
      function hk(a) {
        this.onComplete = new Uc();
        this.display = a;
        if (a != null) {
          a.addEventListener("unload", l(this, this.display_onUnload));
          na.get_current().addChild(a);
        }
      }
      h["openfl.display.Preloader"] = hk;
      hk.__name__ = "openfl.display.Preloader";
      hk.prototype = {
        start: function () {
          this.ready = true;
          na.get_current().get_loaderInfo().__complete();
          if (this.display != null) {
            var a = new Ga("complete", true, true);
            this.display.dispatchEvent(a);
            if (!a.isDefaultPrevented()) {
              this.display.dispatchEvent(new Ga("unload"));
            }
          } else if (!this.complete) {
            this.complete = true;
            this.onComplete.dispatch();
          }
        },
        update: function (a, b) {
          na.get_current().get_loaderInfo().__update(a, b);
          if (this.display != null) {
            this.display.dispatchEvent(new zi("progress", true, true, a, b));
          }
        },
        display_onUnload: function (a) {
          if (this.display != null) {
            this.display.removeEventListener("unload", l(this, this.display_onUnload));
            if (this.display.parent == na.get_current()) {
              na.get_current().removeChild(this.display);
            }
            na.get_current().stage.set_focus(null);
            this.display = null;
          }
          if (this.ready && !this.complete) {
            this.complete = true;
            this.onComplete.dispatch();
          }
        },
        __class__: hk
      };
      function wm() {
        $a.call(this);
        var a = this.getBackgroundColor();
        var b = 0;
        if ((a >> 16 & 255) * 0.299 + (a >> 8 & 255) * 0.587 + (a & 255) * 0.114 < 70) {
          b = 16777215;
        }
        a = this.getHeight() / 2 - 3.5;
        var c = this.getWidth() - 60;
        this.outline = new sg();
        this.outline.get_graphics().beginFill(b, 0.07);
        this.outline.get_graphics().drawRect(0, 0, c, 7);
        this.outline.set_x(30);
        this.outline.set_y(a);
        this.outline.set_alpha(0);
        this.addChild(this.outline);
        this.progress = new sg();
        this.progress.get_graphics().beginFill(b, 0.35);
        this.progress.get_graphics().drawRect(0, 0, c - 4, 3);
        this.progress.set_x(32);
        this.progress.set_y(a + 2);
        this.progress.set_scaleX(0);
        this.progress.set_alpha(0);
        this.addChild(this.progress);
        this.startAnimation = na.getTimer() + 100;
        this.endAnimation = this.startAnimation + 1000;
        this.addEventListener("addedToStage", l(this, this.this_onAddedToStage));
      }
      h["openfl.display.DefaultPreloader"] = wm;
      wm.__name__ = "openfl.display.DefaultPreloader";
      wm.__super__ = $a;
      wm.prototype = q($a.prototype, {
        getBackgroundColor: function () {
          var a = na.get_current().stage.window.context.attributes;
          if (Object.prototype.hasOwnProperty.call(a, "background") && a.background != null) {
            return a.background;
          } else {
            return 0;
          }
        },
        getHeight: function () {
          var a = na.get_current().stage.window.__height;
          if (a > 0) {
            return a;
          } else {
            return na.get_current().stage.stageHeight;
          }
        },
        getWidth: function () {
          var a = na.get_current().stage.window.__width;
          if (a > 0) {
            return a;
          } else {
            return na.get_current().stage.stageWidth;
          }
        },
        onInit: function () {
          this.addEventListener("enterFrame", l(this, this.this_onEnterFrame));
        },
        onLoaded: function () {
          this.removeEventListener("enterFrame", l(this, this.this_onEnterFrame));
          this.dispatchEvent(new Ga("unload"));
        },
        onUpdate: function (a, b) {
          var c = 0;
          if (b > 0) {
            c = a / b;
            if (c > 1) {
              c = 1;
            }
          }
          this.progress.set_scaleX(c);
        },
        this_onAddedToStage: function (a) {
          this.removeEventListener("addedToStage", l(this, this.this_onAddedToStage));
          this.onInit();
          this.onUpdate(this.get_loaderInfo().bytesLoaded, this.get_loaderInfo().bytesTotal);
          this.addEventListener("progress", l(this, this.this_onProgress));
          this.addEventListener("complete", l(this, this.this_onComplete));
        },
        this_onComplete: function (a) {
          a.preventDefault();
          this.removeEventListener("progress", l(this, this.this_onProgress));
          this.removeEventListener("complete", l(this, this.this_onComplete));
          this.onLoaded();
        },
        this_onEnterFrame: function (a) {
          a = (na.getTimer() - this.startAnimation) / (this.endAnimation - this.startAnimation);
          if (a < 0) {
            a = 0;
          }
          if (a > 1) {
            a = 1;
          }
          this.outline.set_alpha(this.progress.set_alpha(a));
        },
        this_onProgress: function (a) {
          this.onUpdate(a.bytesLoaded | 0, a.bytesTotal | 0);
        },
        __class__: wm
      });
      function bj() {
        this.channels = 0;
        this.filter = 5;
        this.index = this.height = 0;
        this.mipFilter = 2;
        this.wrap = this.width = 0;
      }
      h["openfl.display.ShaderInput"] = bj;
      bj.__name__ = "openfl.display.ShaderInput";
      bj.prototype = {
        __disableGL: function (a, b) {
          if (!(b < 0)) {
            a.setTextureAt(b, null);
          }
        },
        __updateGL: function (a, b, c, d, e, f) {
          c = c ?? this.input;
          d = d ?? this.filter;
          e = e ?? this.mipFilter;
          f = f ?? this.wrap;
          if (c != null) {
            a.setTextureAt(b, c.getTexture(a));
            a.setSamplerStateAt(b, f, d, e);
          } else {
            a.setTextureAt(b, null);
          }
        },
        __class__: bj
      };
      function og() {
        this.index = 0;
      }
      h["openfl.display.ShaderParameter"] = og;
      og.__name__ = "openfl.display.ShaderParameter";
      og.prototype = {
        __disableGL: function (a) {
          if (!(this.index < 0) && !(a = a.gl, this.__isUniform)) {
            for (var b = 0, c = this.__arrayLength; b < c;) {
              var d = b++;
              a.disableVertexAttribArray(this.index + d);
            }
          }
        },
        __updateGL: function (a, b) {
          if (!(this.index < 0)) {
            a = a.gl;
            b = b ?? this.value;
            var c = this.__isBool ? b : null;
            var d = this.__isFloat ? b : null;
            var e = this.__isInt ? b : null;
            if (this.__isUniform) {
              if (b != null && b.length >= this.__length) {
                switch (this.type) {
                  case 0:
                    a.uniform1i(this.index, c[0] ? 1 : 0);
                    break;
                  case 1:
                    a.uniform2i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0);
                    break;
                  case 2:
                    a.uniform3i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0);
                    break;
                  case 3:
                    a.uniform4i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0, c[3] ? 1 : 0);
                    break;
                  case 4:
                    a.uniform1f(this.index, d[0]);
                    break;
                  case 5:
                    a.uniform2f(this.index, d[0], d[1]);
                    break;
                  case 6:
                    a.uniform3f(this.index, d[0], d[1], d[2]);
                    break;
                  case 7:
                    a.uniform4f(this.index, d[0], d[1], d[2], d[3]);
                    break;
                  case 8:
                    a.uniform1i(this.index, e[0]);
                    break;
                  case 9:
                    a.uniform2i(this.index, e[0], e[1]);
                    break;
                  case 10:
                    a.uniform3i(this.index, e[0], e[1], e[2]);
                    break;
                  case 11:
                    a.uniform4i(this.index, e[0], e[1], e[2], e[3]);
                    break;
                  case 12:
                    this.__uniformMatrix[0] = d[0];
                    this.__uniformMatrix[1] = d[1];
                    this.__uniformMatrix[2] = d[2];
                    this.__uniformMatrix[3] = d[3];
                    Yc.uniformMatrix2fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 16:
                    this.__uniformMatrix[0] = d[0];
                    this.__uniformMatrix[1] = d[1];
                    this.__uniformMatrix[2] = d[2];
                    this.__uniformMatrix[3] = d[3];
                    this.__uniformMatrix[4] = d[4];
                    this.__uniformMatrix[5] = d[5];
                    this.__uniformMatrix[6] = d[6];
                    this.__uniformMatrix[7] = d[7];
                    this.__uniformMatrix[8] = d[8];
                    Yc.uniformMatrix3fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 20:
                    this.__uniformMatrix[0] = d[0];
                    this.__uniformMatrix[1] = d[1];
                    this.__uniformMatrix[2] = d[2];
                    this.__uniformMatrix[3] = d[3];
                    this.__uniformMatrix[4] = d[4];
                    this.__uniformMatrix[5] = d[5];
                    this.__uniformMatrix[6] = d[6];
                    this.__uniformMatrix[7] = d[7];
                    this.__uniformMatrix[8] = d[8];
                    this.__uniformMatrix[9] = d[9];
                    this.__uniformMatrix[10] = d[10];
                    this.__uniformMatrix[11] = d[11];
                    this.__uniformMatrix[12] = d[12];
                    this.__uniformMatrix[13] = d[13];
                    this.__uniformMatrix[14] = d[14];
                    this.__uniformMatrix[15] = d[15];
                    Yc.uniformMatrix4fv(a, this.index, false, this.__uniformMatrix);
                }
              } else {
                switch (this.type) {
                  case 4:
                    a.uniform1f(this.index, 0);
                    break;
                  case 5:
                    a.uniform2f(this.index, 0, 0);
                    break;
                  case 6:
                    a.uniform3f(this.index, 0, 0, 0);
                    break;
                  case 7:
                    a.uniform4f(this.index, 0, 0, 0, 0);
                    break;
                  case 0:
                  case 8:
                    a.uniform1i(this.index, 0);
                    break;
                  case 1:
                  case 9:
                    a.uniform2i(this.index, 0, 0);
                    break;
                  case 2:
                  case 10:
                    a.uniform3i(this.index, 0, 0, 0);
                    break;
                  case 3:
                  case 11:
                    a.uniform4i(this.index, 0, 0, 0, 0);
                    break;
                  case 12:
                    this.__uniformMatrix[0] = 0;
                    this.__uniformMatrix[1] = 0;
                    this.__uniformMatrix[2] = 0;
                    this.__uniformMatrix[3] = 0;
                    Yc.uniformMatrix2fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 16:
                    this.__uniformMatrix[0] = 0;
                    this.__uniformMatrix[1] = 0;
                    this.__uniformMatrix[2] = 0;
                    this.__uniformMatrix[3] = 0;
                    this.__uniformMatrix[4] = 0;
                    this.__uniformMatrix[5] = 0;
                    this.__uniformMatrix[6] = 0;
                    this.__uniformMatrix[7] = 0;
                    this.__uniformMatrix[8] = 0;
                    Yc.uniformMatrix3fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 20:
                    this.__uniformMatrix[0] = 0;
                    this.__uniformMatrix[1] = 0;
                    this.__uniformMatrix[2] = 0;
                    this.__uniformMatrix[3] = 0;
                    this.__uniformMatrix[4] = 0;
                    this.__uniformMatrix[5] = 0;
                    this.__uniformMatrix[6] = 0;
                    this.__uniformMatrix[7] = 0;
                    this.__uniformMatrix[8] = 0;
                    this.__uniformMatrix[9] = 0;
                    this.__uniformMatrix[10] = 0;
                    this.__uniformMatrix[11] = 0;
                    this.__uniformMatrix[12] = 0;
                    this.__uniformMatrix[13] = 0;
                    this.__uniformMatrix[14] = 0;
                    this.__uniformMatrix[15] = 0;
                    Yc.uniformMatrix4fv(a, this.index, false, this.__uniformMatrix);
                }
              }
            } else if (this.__useArray || b != null && b.length != this.__length) {
              f = 0;
              k = this.__arrayLength;
              while (f < k) {
                g = f++;
                a.enableVertexAttribArray(this.index + g);
              }
            } else {
              for (var f = 0, k = this.__arrayLength; f < k;) {
                var g = f++;
                a.disableVertexAttribArray(this.index + g);
              }
              if (b != null) {
                switch (this.type) {
                  case 0:
                    a.vertexAttrib1f(this.index, c[0] ? 1 : 0);
                    break;
                  case 1:
                    a.vertexAttrib2f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0);
                    break;
                  case 2:
                    a.vertexAttrib3f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0);
                    break;
                  case 3:
                    a.vertexAttrib4f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0, c[3] ? 1 : 0);
                    break;
                  case 4:
                    a.vertexAttrib1f(this.index, d[0]);
                    break;
                  case 5:
                    a.vertexAttrib2f(this.index, d[0], d[1]);
                    break;
                  case 6:
                    a.vertexAttrib3f(this.index, d[0], d[1], d[2]);
                    break;
                  case 7:
                    a.vertexAttrib4f(this.index, d[0], d[1], d[2], d[3]);
                    break;
                  case 8:
                    a.vertexAttrib1f(this.index, e[0]);
                    break;
                  case 9:
                    a.vertexAttrib2f(this.index, e[0], e[1]);
                    break;
                  case 10:
                    a.vertexAttrib3f(this.index, e[0], e[1], e[2]);
                    break;
                  case 11:
                    a.vertexAttrib4f(this.index, e[0], e[1], e[2], e[3]);
                    break;
                  case 12:
                    a.vertexAttrib2f(this.index + 0, d[0], d[1]);
                    a.vertexAttrib2f(this.index + 1, d[2], d[3]);
                    break;
                  case 16:
                    a.vertexAttrib3f(this.index + 0, d[0], d[1], d[2]);
                    a.vertexAttrib3f(this.index + 1, d[3], d[4], d[5]);
                    a.vertexAttrib3f(this.index + 2, d[6], d[7], d[8]);
                    break;
                  case 20:
                    a.vertexAttrib4f(this.index + 0, d[0], d[1], d[2], d[3]);
                    a.vertexAttrib4f(this.index + 1, d[4], d[5], d[6], d[7]);
                    a.vertexAttrib4f(this.index + 2, d[8], d[9], d[10], d[11]);
                    a.vertexAttrib4f(this.index + 3, d[12], d[13], d[14], d[15]);
                }
              } else {
                switch (this.type) {
                  case 0:
                  case 4:
                  case 8:
                    a.vertexAttrib1f(this.index, 0);
                    break;
                  case 1:
                  case 5:
                  case 9:
                    a.vertexAttrib2f(this.index, 0, 0);
                    break;
                  case 2:
                  case 6:
                  case 10:
                    a.vertexAttrib3f(this.index, 0, 0, 0);
                    break;
                  case 3:
                  case 7:
                  case 11:
                    a.vertexAttrib4f(this.index, 0, 0, 0, 0);
                    break;
                  case 12:
                    a.vertexAttrib2f(this.index + 0, 0, 0);
                    a.vertexAttrib2f(this.index + 1, 0, 0);
                    break;
                  case 16:
                    a.vertexAttrib3f(this.index + 0, 0, 0, 0);
                    a.vertexAttrib3f(this.index + 1, 0, 0, 0);
                    a.vertexAttrib3f(this.index + 2, 0, 0, 0);
                    break;
                  case 20:
                    a.vertexAttrib4f(this.index + 0, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 1, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 2, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 3, 0, 0, 0, 0);
                }
              }
            }
          }
        },
        __updateGLFromBuffer: function (a, b, c, d, e) {
          if (!(this.index < 0)) {
            a = a.gl;
            if (this.__isUniform) {
              if (d >= this.__length) {
                switch (this.type) {
                  case 4:
                    a.uniform1f(this.index, b[c]);
                    break;
                  case 5:
                    a.uniform2f(this.index, b[c], b[c + 1]);
                    break;
                  case 6:
                    a.uniform3f(this.index, b[c], b[c + 1], b[c + 2]);
                    break;
                  case 7:
                    a.uniform4f(this.index, b[c], b[c + 1], b[c + 2], b[c + 3]);
                    break;
                  case 0:
                  case 8:
                    a.uniform1i(this.index, b[c] | 0);
                    break;
                  case 1:
                  case 9:
                    a.uniform2i(this.index, b[c] | 0, b[c + 1] | 0);
                    break;
                  case 2:
                  case 10:
                    a.uniform3i(this.index, b[c] | 0, b[c + 1] | 0, b[c + 2] | 0);
                    break;
                  case 3:
                  case 11:
                    a.uniform4i(this.index, b[c] | 0, b[c + 1] | 0, b[c + 2] | 0, b[c + 3] | 0);
                    break;
                  case 12:
                    this.__uniformMatrix[0] = b[c];
                    this.__uniformMatrix[1] = b[c + 1];
                    this.__uniformMatrix[2] = b[c + 2];
                    this.__uniformMatrix[3] = b[c + 3];
                    Yc.uniformMatrix2fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 16:
                    this.__uniformMatrix[0] = b[c];
                    this.__uniformMatrix[1] = b[c + 1];
                    this.__uniformMatrix[2] = b[c + 2];
                    this.__uniformMatrix[3] = b[c + 3];
                    this.__uniformMatrix[4] = b[c + 4];
                    this.__uniformMatrix[5] = b[c + 5];
                    this.__uniformMatrix[6] = b[c + 6];
                    this.__uniformMatrix[7] = b[c + 7];
                    this.__uniformMatrix[8] = b[c + 8];
                    Yc.uniformMatrix3fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 20:
                    this.__uniformMatrix[0] = b[c];
                    this.__uniformMatrix[1] = b[c + 1];
                    this.__uniformMatrix[2] = b[c + 2];
                    this.__uniformMatrix[3] = b[c + 3];
                    this.__uniformMatrix[4] = b[c + 4];
                    this.__uniformMatrix[5] = b[c + 5];
                    this.__uniformMatrix[6] = b[c + 6];
                    this.__uniformMatrix[7] = b[c + 7];
                    this.__uniformMatrix[8] = b[c + 8];
                    this.__uniformMatrix[9] = b[c + 9];
                    this.__uniformMatrix[10] = b[c + 10];
                    this.__uniformMatrix[11] = b[c + 11];
                    this.__uniformMatrix[12] = b[c + 12];
                    this.__uniformMatrix[13] = b[c + 13];
                    this.__uniformMatrix[14] = b[c + 14];
                    this.__uniformMatrix[15] = b[c + 15];
                    Yc.uniformMatrix4fv(a, this.index, false, this.__uniformMatrix);
                }
              }
            } else if (this.__internal || d != 0 && d != this.__length) {
              b = a.FLOAT;
              if (this.__isBool) {
                b = a.INT;
              } else if (this.__isInt) {
                b = a.INT;
              }
              f = 0;
              for (k = this.__arrayLength; f < k;) {
                g = f++;
                a.enableVertexAttribArray(this.index + g);
              }
              if (d > 0) {
                f = 0;
                k = this.__arrayLength;
                while (f < k) {
                  g = f++;
                  a.vertexAttribPointer(this.index + g, this.__length, b, false, this.__length * 4, (c + e * this.__length + g * this.__arrayLength) * 4);
                }
              }
            } else {
              for (var f = 0, k = this.__arrayLength; f < k;) {
                var g = f++;
                a.disableVertexAttribArray(this.index + g);
              }
              if (d > 0) {
                switch (this.type) {
                  case 0:
                  case 4:
                  case 8:
                    a.vertexAttrib1f(this.index, b[c]);
                    break;
                  case 1:
                  case 5:
                  case 9:
                    a.vertexAttrib2f(this.index, b[c], b[c + 1]);
                    break;
                  case 2:
                  case 6:
                  case 10:
                    a.vertexAttrib3f(this.index, b[c], b[c + 1], b[c + 2]);
                    break;
                  case 3:
                  case 7:
                  case 11:
                    a.vertexAttrib4f(this.index, b[c], b[c + 1], b[c + 2], b[c + 3]);
                    break;
                  case 12:
                    a.vertexAttrib2f(this.index + 0, b[c], b[c + 1]);
                    a.vertexAttrib2f(this.index + 1, b[c + 2], b[c + 2 + 1]);
                    break;
                  case 16:
                    a.vertexAttrib3f(this.index + 0, b[c], b[c + 1], b[c + 2]);
                    a.vertexAttrib3f(this.index + 1, b[c + 3], b[c + 3 + 1], b[c + 3 + 2]);
                    a.vertexAttrib3f(this.index + 2, b[c + 6], b[c + 6 + 1], b[c + 6 + 2]);
                    break;
                  case 20:
                    a.vertexAttrib4f(this.index + 0, b[c], b[c + 1], b[c + 2], b[c + 3]);
                    a.vertexAttrib4f(this.index + 1, b[c + 4], b[c + 4 + 1], b[c + 4 + 2], b[c + 4 + 3]);
                    a.vertexAttrib4f(this.index + 2, b[c + 8], b[c + 8 + 1], b[c + 8 + 2], b[c + 8 + 3]);
                    a.vertexAttrib4f(this.index + 3, b[c + 12], b[c + 12 + 1], b[c + 12 + 2], b[c + 12 + 3]);
                }
              } else {
                switch (this.type) {
                  case 0:
                  case 4:
                  case 8:
                    a.vertexAttrib1f(this.index, 0);
                    break;
                  case 1:
                  case 5:
                  case 9:
                    a.vertexAttrib2f(this.index, 0, 0);
                    break;
                  case 2:
                  case 6:
                  case 10:
                    a.vertexAttrib3f(this.index, 0, 0, 0);
                    break;
                  case 3:
                  case 7:
                  case 11:
                    a.vertexAttrib4f(this.index, 0, 0, 0, 0);
                    break;
                  case 12:
                    a.vertexAttrib2f(this.index + 0, 0, 0);
                    a.vertexAttrib2f(this.index + 1, 0, 0);
                    break;
                  case 16:
                    a.vertexAttrib3f(this.index + 0, 0, 0, 0);
                    a.vertexAttrib3f(this.index + 1, 0, 0, 0);
                    a.vertexAttrib3f(this.index + 2, 0, 0, 0);
                    break;
                  case 20:
                    a.vertexAttrib4f(this.index + 0, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 1, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 2, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 3, 0, 0, 0, 0);
                }
              }
            }
          }
        },
        set_name: function (a) {
          this.__internal = w.startsWith(a, "openfl_");
          return this.name = a;
        },
        __class__: og,
        __properties__: {
          set_name: "set_name"
        }
      };
      function sg() {
        Fa.call(this);
        this.__drawableType = 3;
      }
      h["openfl.display.Shape"] = sg;
      sg.__name__ = "openfl.display.Shape";
      sg.__super__ = Fa;
      sg.prototype = q(Fa.prototype, {
        get_graphics: function () {
          if (this.__graphics == null) {
            this.__graphics = new je(this);
          }
          return this.__graphics;
        },
        __class__: sg,
        __properties__: q(Fa.prototype.__properties__, {
          get_graphics: "get_graphics"
        })
      });
      function Ai(a, b, c, d) {
        tb.call(this);
        this.__drawableType = 6;
        this.enabled = true;
        this.trackAsMenu = false;
        this.useHandCursor = true;
        this.__upState = a ?? new Fa();
        this.__overState = b;
        this.__downState = c;
        this.set_hitTestState(d ?? new Fa());
        this.addEventListener("mouseDown", l(this, this.__this_onMouseDown));
        this.addEventListener("mouseOut", l(this, this.__this_onMouseOut));
        this.addEventListener("mouseOver", l(this, this.__this_onMouseOver));
        this.addEventListener("mouseUp", l(this, this.__this_onMouseUp));
        this.__tabEnabled = true;
        this.set___currentState(this.__upState);
        if (Ai.__constructor != null) {
          a = Ai.__constructor;
          Ai.__constructor = null;
          a(this);
        }
      }
      h["openfl.display.SimpleButton"] = Ai;
      Ai.__name__ = "openfl.display.SimpleButton";
      Ai.__super__ = tb;
      Ai.prototype = q(tb.prototype, {
        __getBounds: function (a, b) {
          tb.prototype.__getBounds.call(this, a, b);
          var c = Aa.__pool.get();
          var d = this.__currentState.__transform;
          c.a = d.a * b.a + d.b * b.c;
          c.b = d.a * b.b + d.b * b.d;
          c.c = d.c * b.a + d.d * b.c;
          c.d = d.c * b.b + d.d * b.d;
          c.tx = d.tx * b.a + d.ty * b.c + b.tx;
          c.ty = d.tx * b.b + d.ty * b.d + b.ty;
          this.__currentState.__getBounds(a, c);
          Aa.__pool.release(c);
        },
        __getRenderBounds: function (a, b) {
          if (this.__scrollRect != null) {
            tb.prototype.__getRenderBounds.call(this, a, b);
          } else {
            tb.prototype.__getBounds.call(this, a, b);
            var c = Aa.__pool.get();
            var d = this.__currentState.__transform;
            c.a = d.a * b.a + d.b * b.c;
            c.b = d.a * b.b + d.b * b.d;
            c.c = d.c * b.a + d.d * b.c;
            c.d = d.c * b.b + d.d * b.d;
            c.tx = d.tx * b.a + d.ty * b.c + b.tx;
            c.ty = d.tx * b.b + d.ty * b.d + b.ty;
            this.__currentState.__getRenderBounds(a, c);
            Aa.__pool.release(c);
          }
        },
        __getCursor: function () {
          if (this.useHandCursor && !this.__ignoreEvent && this.enabled) {
            return "button";
          } else {
            return null;
          }
        },
        __hitTest: function (a, b, c, d, e, f) {
          var k = false;
          if (this.get_hitTestState() != null) {
            if (this.get_hitTestState().__hitTest(a, b, c, d, e, f)) {
              if (d != null) {
                if (d.length == 0) {
                  d[0] = f;
                } else {
                  d[d.length - 1] = f;
                }
              }
              k = !e || this.mouseEnabled;
            }
          } else if (this.__currentState != null) {
            if (!f.get_visible() || this.__isMask || e && !this.mouseEnabled || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
              k = false;
            } else if (this.__currentState.__hitTest(a, b, c, d, e, f)) {
              k = e;
            }
          }
          if (d != null) {
            while (d.length > 1 && d[d.length - 1] == d[d.length - 2]) {
              d.pop();
            }
          }
          return k;
        },
        __hitTestMask: function (a, b) {
          var c = false;
          if (this.__currentState.__hitTestMask(a, b)) {
            c = true;
          }
          return c;
        },
        __setStageReference: function (a) {
          tb.prototype.__setStageReference.call(this, a);
          if (this.__currentState != null) {
            this.__currentState.__setStageReference(a);
          }
          if (this.get_hitTestState() != null && this.get_hitTestState() != this.__currentState) {
            this.get_hitTestState().__setStageReference(a);
          }
        },
        __setTransformDirty: function () {
          tb.prototype.__setTransformDirty.call(this);
          if (this.__currentState != null) {
            this.__currentState.__setTransformDirty();
          }
          if (this.get_hitTestState() != null && this.get_hitTestState() != this.__currentState) {
            this.get_hitTestState().__setTransformDirty();
          }
        },
        __update: function (a, b) {
          tb.prototype.__update.call(this, a, b);
          if (b) {
            if (this.__currentState != null) {
              this.__currentState.__update(a, true);
            }
            if (this.get_hitTestState() != null && this.get_hitTestState() != this.__currentState) {
              this.get_hitTestState().__update(a, true);
            }
          }
        },
        __updateTransforms: function (a) {
          tb.prototype.__updateTransforms.call(this, a);
          if (this.__currentState != null) {
            this.__currentState.__updateTransforms();
          }
          if (this.get_hitTestState() != null && this.get_hitTestState() != this.__currentState) {
            this.get_hitTestState().__updateTransforms();
          }
        },
        get_downState: function () {
          return this.__downState;
        },
        get_hitTestState: function () {
          return this.__hitTestState;
        },
        set_hitTestState: function (a) {
          if (this.__hitTestState != null && this.__hitTestState != a && this.__hitTestState != this.get_downState() && this.__hitTestState != this.get_upState() && this.__hitTestState != this.get_overState()) {
            this.__hitTestState.__renderParent = null;
          }
          if (a != null) {
            a.__renderParent = this;
            if (!a.__renderDirty) {
              a.__renderDirty = true;
              a.__setParentRenderDirty();
            }
          }
          return this.__hitTestState = a;
        },
        get_overState: function () {
          return this.__overState;
        },
        get_upState: function () {
          return this.__upState;
        },
        set___currentState: function (a) {
          if (this.__currentState != null && this.__currentState != this.get_hitTestState()) {
            this.__currentState.__renderParent = null;
          }
          if (a != null && a.parent != null) {
            a.parent.removeChild(a);
          }
          if (Fa.__supportDOM && this.__previousStates == null) {
            this.__previousStates = qb.toObjectVector(null);
          }
          if (a != this.__currentState) {
            if (Fa.__supportDOM) {
              if (this.__currentState != null) {
                this.__currentState.__setStageReference(null);
                this.__previousStates.push(this.__currentState);
              }
              var b = this.__previousStates.indexOf(a, 0);
              if (b > -1) {
                var c = this.__previousStates;
                c.__tempIndex = b;
                b = 0;
                for (var d = []; b < d.length;) {
                  var e = d[b++];
                  c.insertAt(c.__tempIndex, e);
                  c.__tempIndex++;
                }
                c.splice(c.__tempIndex, 1);
              }
            }
            if (a != null) {
              a.__renderParent = this;
              if (!a.__renderDirty) {
                a.__renderDirty = true;
                a.__setParentRenderDirty();
              }
            }
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__currentState = a;
        },
        __this_onMouseDown: function (a) {
          if (this.enabled) {
            this.set___currentState(this.get_downState());
          }
        },
        __this_onMouseOut: function (a) {
          this.__ignoreEvent = false;
          if (this.get_upState() != this.__currentState) {
            this.set___currentState(this.get_upState());
          }
        },
        __this_onMouseOver: function (a) {
          if (a.buttonDown) {
            this.__ignoreEvent = true;
          }
          if (this.get_overState() != this.__currentState && this.get_overState() != null && !this.__ignoreEvent && this.enabled) {
            this.set___currentState(this.get_overState());
          }
        },
        __this_onMouseUp: function (a) {
          this.__ignoreEvent = false;
          if (this.enabled && this.get_overState() != null) {
            this.set___currentState(this.get_overState());
          } else {
            this.set___currentState(this.get_upState());
          }
        },
        __class__: Ai,
        __properties__: q(tb.prototype.__properties__, {
          set___currentState: "set___currentState",
          get_upState: "get_upState",
          get_overState: "get_overState",
          set_hitTestState: "set_hitTestState",
          get_hitTestState: "get_hitTestState",
          get_downState: "get_downState"
        })
      });
      function Bi(a, b) {
        wb.call(this);
        this.__drawableType = 5;
        this.set_name(null);
        this.__color = -1;
        this.__colorSplit = [255, 255, 255];
        this.__colorString = "#FFFFFF";
        this.__contentsScaleFactor = 1;
        this.__deltaTime = this.__currentTabOrderIndex = 0;
        this.__displayState = 2;
        this.__logicalHeight = this.__logicalWidth = this.__lastClickTime = this.__mouseY = this.__mouseX = 0;
        this.__displayMatrix = new Aa();
        this.__displayRect = new ea();
        this.__renderDirty = true;
        this.stage3Ds = qb.toObjectVector(null);
        this.stage3Ds.push(new Ih(this));
        this.stage3Ds.push(new Ih(this));
        this.stage3Ds.push(new Ih(this));
        this.stage3Ds.push(new Ih(this));
        this.stage = this;
        this.align = 6;
        this.allowsFullScreenInteractive = this.allowsFullScreen = true;
        this.__quality = 1;
        this.__scaleMode = 2;
        this.showDefaultContextMenu = true;
        this.softKeyboardRect = new ea();
        this.stageFocusRect = true;
        this.__macKeyboard = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent) || /Mac/.test(navigator.platform);
        this.__clearBeforeRender = true;
        this.__forceRender = false;
        this.__stack = [];
        this.__rollOutStack = [];
        this.__mouseOutStack = [];
        this.__touchData = new rc();
        if (na.get_current().__loaderInfo == null) {
          na.get_current().__loaderInfo = Pf.create(null);
          na.get_current().__loaderInfo.content = na.get_current();
        }
        this.__uncaughtErrorEvents = na.get_current().__loaderInfo.uncaughtErrorEvents;
        this.application = a.application;
        this.window = a;
        this.set_color(b);
        this.__contentsScaleFactor = a.__scale;
        this.__wasFullscreen = a.__fullscreen;
        this.__resize();
        if (na.get_current().stage == null) {
          this.stage.addChild(na.get_current());
        }
      }
      h["openfl.display.Stage"] = Bi;
      Bi.__name__ = "openfl.display.Stage";
      Bi.__interfaces__ = [ha];
      Bi.__super__ = wb;
      Bi.prototype = q(wb.prototype, {
        __broadcastEvent: function (a) {
          if (Object.prototype.hasOwnProperty.call(Fa.__broadcastEvents.h, a.type)) {
            for (var b = Fa.__broadcastEvents.h[a.type], c = 0; c < b.length;) {
              var d = b[c];
              ++c;
              if (d.stage == this || d.stage == null) {
                if (this.__uncaughtErrorEvents.__enabled) {
                  try {
                    d.__dispatch(a);
                  } catch (e) {
                    Na.lastError = e;
                    d = K.caught(e).unwrap();
                    this.__handleError(d);
                  }
                } else {
                  d.__dispatch(a);
                }
              }
            }
          }
        },
        __createRenderer: function () {
          var a = this.window.__width * this.window.__scale | 0;
          var b = this.window.__height * this.window.__scale | 0;
          switch (this.window.context.type) {
            case "canvas":
              this.__renderer = new pg(this.window.context.canvas2D);
              break;
            case "dom":
              this.__renderer = new Pj(this.window.context.dom);
              break;
            case "opengl":
            case "opengles":
            case "webgl":
              this.context3D = new Kb(this);
              this.context3D.configureBackBuffer(this.stageWidth, this.stageHeight, 0, true, true, true);
              this.context3D.present();
              this.__renderer = new Ja(this.context3D);
          }
          if (this.__renderer != null) {
            var c = this.get_quality();
            this.__renderer.__allowSmoothing = c != 2;
            this.__renderer.__pixelRatio = this.window.__scale;
            this.__renderer.__worldTransform = this.__displayMatrix;
            this.__renderer.__stage = this;
            this.__renderer.__resize(a, b);
          }
        },
        __dispatchEvent: function (a) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              var b = wb.prototype.__dispatchEvent.call(this, a);
            } catch (c) {
              Na.lastError = c;
              a = K.caught(c).unwrap();
              this.__handleError(a);
              b = false;
            }
          } else {
            b = wb.prototype.__dispatchEvent.call(this, a);
          }
          return b;
        },
        __dispatchPendingMouseEvent: function () {
          if (this.__pendingMouseEvent) {
            this.__onMouse("mouseMove", this.__pendingMouseX, this.__pendingMouseY, 0);
            this.__pendingMouseEvent = false;
          }
        },
        __dispatchStack: function (a, b) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              var c = b.length;
              if (c == 0) {
                a.eventPhase = 2;
                var d = a.target;
                d.__dispatch(a);
              } else {
                a.eventPhase = 1;
                a.target = b[b.length - 1];
                for (var e = 0, f = c - 1; e < f;) {
                  var k = e++;
                  b[k].__dispatch(a);
                  if (a.__isCanceled) {
                    return;
                  }
                }
                a.eventPhase = 2;
                d = a.target;
                d.__dispatch(a);
                if (!a.__isCanceled && a.bubbles) {
                  a.eventPhase = 3;
                  k = c - 2;
                  while (k >= 0) {
                    b[k].__dispatch(a);
                    if (a.__isCanceled) {
                      break;
                    }
                    --k;
                  }
                }
              }
            } catch (r) {
              Na.lastError = r;
              a = K.caught(r).unwrap();
              this.__handleError(a);
            }
          } else {
            c = b.length;
            if (c == 0) {
              a.eventPhase = 2;
              d = a.target;
              d.__dispatch(a);
            } else {
              a.eventPhase = 1;
              a.target = b[b.length - 1];
              e = 0;
              for (f = c - 1; e < f;) {
                k = e++;
                b[k].__dispatch(a);
                if (a.__isCanceled) {
                  return;
                }
              }
              a.eventPhase = 2;
              d = a.target;
              d.__dispatch(a);
              if (!a.__isCanceled && a.bubbles) {
                a.eventPhase = 3;
                k = c - 2;
                while (k >= 0) {
                  b[k].__dispatch(a);
                  if (a.__isCanceled) {
                    break;
                  }
                  --k;
                }
              }
            }
          }
        },
        __dispatchTarget: function (a, b) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              return a.__dispatchEvent(b);
            } catch (c) {
              Na.lastError = c;
              a = K.caught(c).unwrap();
              this.__handleError(a);
              return false;
            }
          } else {
            return a.__dispatchEvent(b);
          }
        },
        __drag: function (a) {
          var b = this.__dragObject.parent;
          if (b != null) {
            b = b.__getWorldTransform();
            var c = b.a * b.d - b.b * b.c;
            if (c == 0) {
              a.x = -b.tx;
              a.y = -b.ty;
            } else {
              var d = 1 / c * (b.c * (b.ty - a.y) + b.d * (a.x - b.tx));
              a.y = 1 / c * (b.a * (a.y - b.ty) + b.b * (b.tx - a.x));
              a.x = d;
            }
          }
          b = a.x + this.__dragOffsetX;
          a = a.y + this.__dragOffsetY;
          if (this.__dragBounds != null) {
            if (b < this.__dragBounds.x) {
              b = this.__dragBounds.x;
            } else if (b > this.__dragBounds.get_right()) {
              b = this.__dragBounds.get_right();
            }
            if (a < this.__dragBounds.y) {
              a = this.__dragBounds.y;
            } else if (a > this.__dragBounds.get_bottom()) {
              a = this.__dragBounds.get_bottom();
            }
          }
          this.__dragObject.set_x(b);
          this.__dragObject.set_y(a);
        },
        __getInteractive: function (a) {
          if (a != null) {
            a.push(this);
          }
          return true;
        },
        __globalToLocal: function (a, b) {
          if (a != b) {
            b.copyFrom(a);
          }
          return b;
        },
        __handleError: function (a) {
          var b = new xm("uncaughtError", true, true, a);
          try {
            na.get_current().__loaderInfo.uncaughtErrorEvents.dispatchEvent(b);
          } catch (d) {
            Na.lastError = d;
          }
          if (!b.__preventDefault) {
            b = Xg.toString(Xg.exceptionStack());
            console.log(b);
            b = H.string(a);
            console.log(b);
            try {
              if (a != null && Object.prototype.hasOwnProperty.call(a, "stack") && a.stack != null && a.stack != "") {
                console.log(a.stack);
                a.stack = a.stack;
              } else {
                var c = Xg.toString(Xg.callStack());
                console.log(c);
              }
            } catch (d) {
              Na.lastError = d;
            }
            throw a;
          }
        },
        __onKey: function (a, b, c) {
          this.__dispatchPendingMouseEvent();
          Xb.__altKey = Qb.get_altKey(c);
          Xb.__commandKey = Qb.get_metaKey(c);
          Xb.__controlKey = Qb.get_ctrlKey(c) && !Qb.get_metaKey(c);
          Xb.__ctrlKey = Qb.get_ctrlKey(c);
          Xb.__shiftKey = Qb.get_shiftKey(c);
          var d = [];
          if (this.__focus == null) {
            this.__getInteractive(d);
          } else {
            this.__focus.__getInteractive(d);
          }
          if (d.length > 0) {
            switch (b) {
              case 1073741908:
              case 1073741909:
              case 1073741910:
              case 1073741911:
              case 1073741912:
              case 1073741913:
              case 1073741914:
              case 1073741915:
              case 1073741916:
              case 1073741917:
              case 1073741918:
              case 1073741919:
              case 1073741920:
              case 1073741921:
              case 1073741922:
              case 1073741923:
              case 1073742044:
                var e = 3;
                break;
              case 1073742048:
              case 1073742049:
              case 1073742050:
              case 1073742051:
                e = 1;
                break;
              case 1073742052:
              case 1073742053:
              case 1073742054:
              case 1073742055:
                e = 2;
                break;
              default:
                e = 0;
            }
            switch (b) {
              case 8:
                b = 8;
                break;
              case 9:
                b = 9;
                break;
              case 13:
                b = 13;
                break;
              case 27:
                b = 27;
                break;
              case 32:
                b = 32;
                break;
              case 33:
                b = 49;
                break;
              case 34:
                b = 222;
                break;
              case 35:
                b = 51;
                break;
              case 36:
                b = 52;
                break;
              case 37:
                b = 53;
                break;
              case 38:
                b = 55;
                break;
              case 39:
                b = 222;
                break;
              case 40:
                b = 57;
                break;
              case 41:
                b = 48;
                break;
              case 42:
                b = 56;
                break;
              case 44:
                b = 188;
                break;
              case 45:
                b = 189;
                break;
              case 46:
                b = 190;
                break;
              case 47:
                b = 191;
                break;
              case 48:
                b = 48;
                break;
              case 49:
                b = 49;
                break;
              case 50:
                b = 50;
                break;
              case 51:
                b = 51;
                break;
              case 52:
                b = 52;
                break;
              case 53:
                b = 53;
                break;
              case 54:
                b = 54;
                break;
              case 55:
                b = 55;
                break;
              case 56:
                b = 56;
                break;
              case 57:
                b = 57;
                break;
              case 58:
                b = 186;
                break;
              case 59:
                b = 186;
                break;
              case 60:
                b = 60;
                break;
              case 61:
                b = 187;
                break;
              case 62:
                b = 190;
                break;
              case 63:
                b = 191;
                break;
              case 64:
                b = 50;
                break;
              case 91:
                b = 219;
                break;
              case 92:
                b = 220;
                break;
              case 93:
                b = 221;
                break;
              case 94:
                b = 54;
                break;
              case 95:
                b = 189;
                break;
              case 96:
                b = 192;
                break;
              case 97:
                b = 65;
                break;
              case 98:
                b = 66;
                break;
              case 99:
                b = 67;
                break;
              case 100:
                b = 68;
                break;
              case 101:
                b = 69;
                break;
              case 102:
                b = 70;
                break;
              case 103:
                b = 71;
                break;
              case 104:
                b = 72;
                break;
              case 105:
                b = 73;
                break;
              case 106:
                b = 74;
                break;
              case 107:
                b = 75;
                break;
              case 108:
                b = 76;
                break;
              case 109:
                b = 77;
                break;
              case 110:
                b = 78;
                break;
              case 111:
                b = 79;
                break;
              case 112:
                b = 80;
                break;
              case 113:
                b = 81;
                break;
              case 114:
                b = 82;
                break;
              case 115:
                b = 83;
                break;
              case 116:
                b = 84;
                break;
              case 117:
                b = 85;
                break;
              case 118:
                b = 86;
                break;
              case 119:
                b = 87;
                break;
              case 120:
                b = 88;
                break;
              case 121:
                b = 89;
                break;
              case 122:
                b = 90;
                break;
              case 127:
                b = 46;
                break;
              case 1073741881:
                b = 20;
                break;
              case 1073741882:
                b = 112;
                break;
              case 1073741883:
                b = 113;
                break;
              case 1073741884:
                b = 114;
                break;
              case 1073741885:
                b = 115;
                break;
              case 1073741886:
                b = 116;
                break;
              case 1073741887:
                b = 117;
                break;
              case 1073741888:
                b = 118;
                break;
              case 1073741889:
                b = 119;
                break;
              case 1073741890:
                b = 120;
                break;
              case 1073741891:
                b = 121;
                break;
              case 1073741892:
                b = 122;
                break;
              case 1073741893:
                b = 123;
                break;
              case 1073741894:
                b = 301;
                break;
              case 1073741895:
                b = 145;
                break;
              case 1073741896:
                b = 19;
                break;
              case 1073741897:
                b = 45;
                break;
              case 1073741898:
                b = 36;
                break;
              case 1073741899:
                b = 33;
                break;
              case 1073741901:
                b = 35;
                break;
              case 1073741902:
                b = 34;
                break;
              case 1073741903:
                b = 39;
                break;
              case 1073741904:
                b = 37;
                break;
              case 1073741905:
                b = 40;
                break;
              case 1073741906:
                b = 38;
                break;
              case 1073741907:
                b = 144;
                break;
              case 1073741908:
                b = 111;
                break;
              case 1073741909:
                b = 106;
                break;
              case 1073741910:
                b = 109;
                break;
              case 1073741911:
                b = 107;
                break;
              case 1073741912:
                b = 13;
                break;
              case 1073741913:
                b = 97;
                break;
              case 1073741914:
                b = 98;
                break;
              case 1073741915:
                b = 99;
                break;
              case 1073741916:
                b = 100;
                break;
              case 1073741917:
                b = 101;
                break;
              case 1073741918:
                b = 102;
                break;
              case 1073741919:
                b = 103;
                break;
              case 1073741920:
                b = 104;
                break;
              case 1073741921:
                b = 105;
                break;
              case 1073741922:
                b = 96;
                break;
              case 1073741923:
                b = 110;
                break;
              case 1073741925:
                b = 302;
                break;
              case 1073741928:
                b = 124;
                break;
              case 1073741929:
                b = 125;
                break;
              case 1073741930:
                b = 126;
                break;
              case 1073741982:
                b = 13;
                break;
              case 1073742044:
                b = 110;
                break;
              case 1073742048:
                b = 17;
                break;
              case 1073742049:
                b = 16;
                break;
              case 1073742050:
                b = 18;
                break;
              case 1073742051:
                b = 15;
                break;
              case 1073742052:
                b = 17;
                break;
              case 1073742053:
                b = 16;
                break;
              case 1073742054:
                b = 18;
                break;
              case 1073742055:
                b = 15;
            }
            var f = op.__getCharCode(b, Qb.get_shiftKey(c));
            if (a == "keyUp" && (b == 32 || b == 13) && this.__focus instanceof $a) {
              var k = ta.__cast(this.__focus, $a);
              if (k.get_buttonMode() && k.focusRect == 1) {
                var g = kb.__pool.get();
                var n = kb.__pool.get();
                n.x = this.__mouseX;
                n.y = this.__mouseY;
                k = Xb.__create("click", 0, this.__mouseX, this.__mouseY, k.__globalToLocal(n, g), k);
                this.__dispatchStack(k, d);
                if (k.__updateAfterEventFlag) {
                  this.__renderAfterEvent();
                }
                kb.__pool.release(n);
                kb.__pool.release(g);
              }
            }
            e = new ym(a, true, true, f, b, e, this.__macKeyboard ? Qb.get_ctrlKey(c) || Qb.get_metaKey(c) : Qb.get_ctrlKey(c), Qb.get_altKey(c), Qb.get_shiftKey(c), Qb.get_ctrlKey(c), Qb.get_metaKey(c));
            d.reverse();
            this.__dispatchStack(e, d);
            if (e.__preventDefault) {
              if (a == "keyDown") {
                this.window.onKeyDown.cancel();
              } else {
                this.window.onKeyUp.cancel();
              }
            } else if (a == "keyDown" && b == 9) {
              d = [];
              this.__tabTest(d);
              f = -1;
              a = null;
              b = Qb.get_shiftKey(c) ? -1 : 1;
              if (d.length > 1) {
                Zc.sort(d, function (a, b) {
                  return a.get_tabIndex() - b.get_tabIndex();
                });
                if (d[d.length - 1].get_tabIndex() != -1) {
                  for (n = 0; n < d.length;) {
                    if (d[n].get_tabIndex() > -1) {
                      if (n > 0) {
                        d.splice(0, n);
                      }
                      break;
                    }
                    ++n;
                  }
                }
                if (this.get_focus() != null) {
                  n = this.get_focus();
                  for (g = d.indexOf(n); g == -1 && n != null;) {
                    f = n.parent;
                    if (f != null && f.get_tabChildren()) {
                      n = f.getChildIndex(n);
                      if (n == -1) {
                        n = f;
                        continue;
                      }
                      for (n += b; Qb.get_shiftKey(c) ? n >= 0 : n < f.get_numChildren();) {
                        k = f.getChildAt(n);
                        if (k instanceof tb && (g = ta.__cast(k, tb), g = d.indexOf(g), g != -1)) {
                          b = 0;
                          break;
                        }
                        n += b;
                      }
                    } else if (Qb.get_shiftKey(c)) {
                      g = d.indexOf(f);
                      if (g != -1) {
                        b = 0;
                      }
                    }
                    n = f;
                  }
                  f = g < 0 ? 0 : g + b;
                } else {
                  f = this.__currentTabOrderIndex;
                }
              } else if (d.length == 1) {
                a = d[0];
                if (this.get_focus() == a) {
                  a = null;
                }
              }
              g = f >= 0 && f < d.length;
              if (d.length == 1 || d.length == 0 && this.get_focus() != null) {
                f = 0;
              } else if (d.length > 1) {
                if (f < 0) {
                  f += d.length;
                }
                f %= d.length;
                a = d[f];
                if (a == this.get_focus()) {
                  f += b;
                  if (f < 0) {
                    f += d.length;
                  }
                  f %= d.length;
                  a = d[f];
                }
              }
              b = null;
              if (this.get_focus() != null) {
                b = new Jh("keyFocusChange", true, true, a, Qb.get_shiftKey(c), 0);
                d = [];
                this.get_focus().__getInteractive(d);
                d.reverse();
                this.__dispatchStack(b, d);
                if (b.isDefaultPrevented()) {
                  this.window.onKeyDown.cancel();
                }
              }
              if (b == null || !b.isDefaultPrevented()) {
                this.__currentTabOrderIndex = f;
                if (a != null) {
                  this.set_focus(a);
                }
                if (g) {
                  this.window.onKeyDown.cancel();
                }
              }
            }
            if (e.__updateAfterEventFlag) {
              this.__renderAfterEvent();
            }
          }
        },
        __onLimeCreateWindow: function (a) {
          if (this.window == a) {
            var b = this;
            a.onActivate.add(function () {
              b.__onLimeWindowActivate(a);
            });
            var c = this;
            a.onClose.add(function () {
              c.__onLimeWindowClose(a);
            }, false, -9000);
            var d = this;
            a.onDeactivate.add(function () {
              d.__onLimeWindowDeactivate(a);
            });
            var e = this;
            function f(b) {
              e.__onLimeWindowDropFile(a, b);
            }
            a.onDropFile.add(f);
            var k = this;
            a.onEnter.add(function () {
              k.__onLimeWindowEnter(a);
            });
            var g = this;
            a.onExpose.add(function () {
              g.__onLimeWindowExpose(a);
            });
            var n = this;
            a.onFocusIn.add(function () {
              n.__onLimeWindowFocusIn(a);
            });
            var h = this;
            a.onFocusOut.add(function () {
              h.__onLimeWindowFocusOut(a);
            });
            var p = this;
            a.onFullscreen.add(function () {
              p.__onLimeWindowFullscreen(a);
            });
            var m = this;
            f = function (b, c) {
              m.__onLimeKeyDown(a, b, c);
            };
            a.onKeyDown.add(f);
            var t = this;
            f = function (b, c) {
              t.__onLimeKeyUp(a, b, c);
            };
            a.onKeyUp.add(f);
            var q = this;
            a.onLeave.add(function () {
              q.__onLimeWindowLeave(a);
            });
            var u = this;
            a.onMinimize.add(function () {
              u.__onLimeWindowMinimize(a);
            });
            var x = this;
            f = function (b, c, d) {
              x.__onLimeMouseDown(a, b, c, d);
            };
            a.onMouseDown.add(f);
            var w = this;
            f = function (b, c) {
              w.__onLimeMouseMove(a, b, c);
            };
            a.onMouseMove.add(f);
            var L = this;
            f = function (b, c) {
              L.__onLimeMouseMoveRelative(a, b, c);
            };
            a.onMouseMoveRelative.add(f);
            var A = this;
            f = function (b, c, d) {
              A.__onLimeMouseUp(a, b, c, d);
            };
            a.onMouseUp.add(f);
            var y = this;
            f = function (b, c, d) {
              y.__onLimeMouseWheel(a, b, c, d);
            };
            a.onMouseWheel.add(f);
            var z = this;
            f = function (b, c) {
              z.__onLimeWindowMove(a, b, c);
            };
            a.onMove.add(f);
            a.onRender.add(l(this, this.__onLimeRender));
            a.onRenderContextLost.add(l(this, this.__onLimeRenderContextLost));
            a.onRenderContextRestored.add(l(this, this.__onLimeRenderContextRestored));
            var D = this;
            f = function (b, c) {
              D.__onLimeWindowResize(a, b, c);
            };
            a.onResize.add(f);
            var C = this;
            a.onRestore.add(function () {
              C.__onLimeWindowRestore(a);
            });
            var H = this;
            f = function (b, c, d) {
              H.__onLimeTextEdit(a, b, c, d);
            };
            a.onTextEdit.add(f);
            var Ka = this;
            f = function (b) {
              Ka.__onLimeTextInput(a, b);
            };
            a.onTextInput.add(f);
            this.__onLimeWindowCreate(a);
          }
        },
        __onLimeGamepadAxisMove: function (a, b, c) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              nb.__onGamepadAxisMove(a, b, c);
            } catch (d) {
              Na.lastError = d;
              a = K.caught(d).unwrap();
              this.__handleError(a);
            }
          } else {
            nb.__onGamepadAxisMove(a, b, c);
          }
        },
        __onLimeGamepadButtonDown: function (a, b) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              nb.__onGamepadButtonDown(a, b);
            } catch (c) {
              Na.lastError = c;
              a = K.caught(c).unwrap();
              this.__handleError(a);
            }
          } else {
            nb.__onGamepadButtonDown(a, b);
          }
        },
        __onLimeGamepadButtonUp: function (a, b) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              nb.__onGamepadButtonUp(a, b);
            } catch (c) {
              Na.lastError = c;
              a = K.caught(c).unwrap();
              this.__handleError(a);
            }
          } else {
            nb.__onGamepadButtonUp(a, b);
          }
        },
        __onLimeGamepadConnect: function (a) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              nb.__onGamepadConnect(a);
            } catch (k) {
              Na.lastError = k;
              var b = K.caught(k).unwrap();
              this.__handleError(b);
            }
          } else {
            nb.__onGamepadConnect(a);
          }
          var c = this;
          b = function (b, d) {
            c.__onLimeGamepadAxisMove(a, b, d);
          };
          a.onAxisMove.add(b);
          var d = this;
          b = function (b) {
            d.__onLimeGamepadButtonDown(a, b);
          };
          a.onButtonDown.add(b);
          var e = this;
          b = function (b) {
            e.__onLimeGamepadButtonUp(a, b);
          };
          a.onButtonUp.add(b);
          var f = this;
          a.onDisconnect.add(function () {
            f.__onLimeGamepadDisconnect(a);
          });
        },
        __onLimeGamepadDisconnect: function (a) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              nb.__onGamepadDisconnect(a);
            } catch (b) {
              Na.lastError = b;
              a = K.caught(b).unwrap();
              this.__handleError(a);
            }
          } else {
            nb.__onGamepadDisconnect(a);
          }
        },
        __onLimeKeyDown: function (a, b, c) {
          if (this.window != null && this.window == a) {
            this.__onKey("keyDown", b, c);
          }
        },
        __onLimeKeyUp: function (a, b, c) {
          if (this.window != null && this.window == a) {
            this.__onKey("keyUp", b, c);
          }
        },
        __onLimeModuleExit: function (a) {
          if (this.window != null) {
            a = new Ga("deactivate");
            this.__broadcastEvent(a);
          }
        },
        __onLimeMouseDown: function (a, b, c, d) {
          if (this.window != null && this.window == a) {
            this.__dispatchPendingMouseEvent();
            switch (d) {
              case 1:
                var e = "middleMouseDown";
                break;
              case 2:
                e = "rightMouseDown";
                break;
              default:
                e = "mouseDown";
            }
            this.__onMouse(e, b * a.__scale | 0, c * a.__scale | 0, d);
            if (!this.showDefaultContextMenu && d == 2) {
              a.onMouseDown.cancel();
            }
          }
        },
        __onLimeMouseMove: function (a, b, c) {
          if (this.window != null && this.window == a) {
            this.__pendingMouseEvent = true;
            this.__pendingMouseX = b * a.__scale | 0;
            this.__pendingMouseY = c * a.__scale | 0;
          }
        },
        __onLimeMouseMoveRelative: function (a, b, c) {},
        __onLimeMouseUp: function (a, b, c, d) {
          if (this.window != null && this.window == a) {
            this.__dispatchPendingMouseEvent();
            switch (d) {
              case 1:
                var e = "middleMouseUp";
                break;
              case 2:
                e = "rightMouseUp";
                break;
              default:
                e = "mouseUp";
            }
            this.__onMouse(e, b * a.__scale | 0, c * a.__scale | 0, d);
            if (!this.showDefaultContextMenu && d == 2) {
              a.onMouseUp.cancel();
            }
          }
        },
        __onLimeMouseWheel: function (a, b, c, d) {
          if (this.window != null && this.window == a) {
            this.__dispatchPendingMouseEvent();
            if (d == Yg.PIXELS) {
              this.__onMouseWheel(b * a.__scale | 0, c * a.__scale | 0, d);
            } else {
              this.__onMouseWheel(b | 0, c | 0, d);
            }
          }
        },
        __renderAfterEvent: function () {
          this.__render(this.window.context);
        },
        __render: function (a) {
          a = false;
          var b = this.__renderer != null && (this.__renderDirty || this.__forceRender);
          if (this.__invalidated && b) {
            this.__invalidated = false;
            var c = new Ga("render");
            this.__broadcastEvent(c);
          }
          this.__update(false, true);
          if (this.__renderer != null) {
            if (this.context3D != null) {
              for (c = this.stage3Ds.iterator(); c.hasNext();) {
                var d = c.next();
                this.context3D.__renderStage3D(d);
              }
              if (this.context3D.__present) {
                b = true;
              }
            }
            if (b) {
              if (this.context3D == null) {
                this.__renderer.__clear();
              }
              this.__renderer.__render(this);
            } else if (this.context3D == null) {
              a = true;
            }
            if (this.context3D != null) {
              if (this.context3D.__present) {
                if (!this.__renderer.__cleared) {
                  this.__renderer.__clear();
                }
                this.context3D.__present = false;
                this.context3D.__cleared = false;
              } else {
                a = true;
              }
            }
            this.__renderer.__cleared = false;
          }
          return a;
        },
        __onLimeRender: function (a) {
          if (!this.__rendering) {
            this.__rendering = true;
            this.__broadcastEvent(new Ga("enterFrame"));
            this.__broadcastEvent(new Ga("frameConstructed"));
            this.__broadcastEvent(new Ga("exitFrame"));
            this.__renderable = true;
            this.__enterFrame(this.__deltaTime);
            this.__deltaTime = 0;
            if (this.__render(a)) {
              this.window.onRender.cancel();
            }
            this.__rendering = false;
          }
        },
        __onLimeRenderContextLost: function () {
          this.context3D = this.__renderer = null;
          for (var a = this.stage3Ds.iterator(); a.hasNext();) {
            a.next().__lostContext();
          }
        },
        __onLimeRenderContextRestored: function (a) {
          this.__createRenderer();
          for (a = this.stage3Ds.iterator(); a.hasNext();) {
            a.next().__restoreContext();
          }
        },
        __onLimeTextEdit: function (a, b, c, d) {},
        __onLimeTextInput: function (a, b) {
          if (this.window != null && this.window == a) {
            var c = [];
            if (this.__focus == null) {
              this.__getInteractive(c);
            } else {
              this.__focus.__getInteractive(c);
            }
            b = new Xf("textInput", true, true, b);
            if (c.length > 0) {
              c.reverse();
              this.__dispatchStack(b, c);
            } else {
              this.__dispatchEvent(b);
            }
            if (b.isDefaultPrevented()) {
              a.onTextInput.cancel();
            }
          }
        },
        __onLimeTouchCancel: function (a) {
          var b = this.__primaryTouch == a;
          if (b) {
            this.__primaryTouch = null;
          }
          this.__onTouch("touchEnd", a, b);
        },
        __onLimeTouchMove: function (a) {
          this.__onTouch("touchMove", a, this.__primaryTouch == a);
        },
        __onLimeTouchEnd: function (a) {
          var b = this.__primaryTouch == a;
          if (b) {
            this.__primaryTouch = null;
          }
          this.__onTouch("touchEnd", a, b);
        },
        __onLimeTouchStart: function (a) {
          if (this.__primaryTouch == null) {
            this.__primaryTouch = a;
          }
          this.__onTouch("touchBegin", a, this.__primaryTouch == a);
        },
        __onLimeUpdate: function (a) {
          this.__deltaTime = a;
          this.__dispatchPendingMouseEvent();
        },
        __onLimeWindowActivate: function (a) {},
        __onLimeWindowClose: function (a) {
          if (this.window == a) {
            this.window = null;
          }
          this.__primaryTouch = null;
          a = new Ga("deactivate");
          this.__broadcastEvent(a);
        },
        __onLimeWindowCreate: function (a) {
          if (this.window != null && this.window == a && a.context != null) {
            this.__createRenderer();
          }
        },
        __onLimeWindowDeactivate: function (a) {},
        __onLimeWindowDropFile: function (a, b) {},
        __onLimeWindowEnter: function (a) {},
        __onLimeWindowExpose: function (a) {
          if (this.window != null && this.window == a) {
            this.__renderDirty = true;
          }
        },
        __onLimeWindowFocusIn: function (a) {
          if (this.window != null && this.window == a) {
            this.__renderDirty = true;
            a = new Ga("activate");
            this.__broadcastEvent(a);
            this.set_focus(this.__cacheFocus);
          }
        },
        __onLimeWindowFocusOut: function (a) {
          if (this.window != null && this.window == a) {
            this.__primaryTouch = null;
            a = new Ga("deactivate");
            this.__broadcastEvent(a);
            a = this.get_focus();
            this.set_focus(null);
            this.__cacheFocus = a;
            Xb.__altKey = false;
            Xb.__commandKey = false;
            Xb.__ctrlKey = false;
            Xb.__shiftKey = false;
          }
        },
        __onLimeWindowFullscreen: function (a) {
          if (this.window != null && this.window == a) {
            this.__resize();
            if (!this.__wasFullscreen) {
              this.__wasFullscreen = true;
              if (this.__displayState == 2) {
                this.__displayState = 1;
              }
              this.__dispatchEvent(new Cg("fullScreen", false, false, true, true));
            }
          }
        },
        __onLimeWindowLeave: function (a) {
          if (this.window != null && this.window == a && !Xb.__buttonDown) {
            this.__dispatchPendingMouseEvent();
            a = new Ga("mouseLeave");
            this.__dispatchEvent(a);
          }
        },
        __onLimeWindowMinimize: function (a) {},
        __onLimeWindowMove: function (a, b, c) {},
        __onLimeWindowResize: function (a, b, c) {
          if (this.window != null && this.window == a) {
            this.__resize();
            if (this.__wasFullscreen && !a.__fullscreen) {
              this.__wasFullscreen = false;
              this.__displayState = 2;
              this.__dispatchEvent(new Cg("fullScreen", false, false, false, true));
            }
          }
        },
        __onLimeWindowRestore: function (a) {
          if (this.window != null && this.window == a && this.__wasFullscreen && !a.__fullscreen) {
            this.__wasFullscreen = false;
            this.__displayState = 2;
            this.__dispatchEvent(new Cg("fullScreen", false, false, false, true));
          }
        },
        __onMouse: function (a, b, c, d) {
          if (!(d > 2)) {
            var e = kb.__pool.get();
            e.setTo(b, c);
            b = this.__displayMatrix;
            c = b.a * b.d - b.b * b.c;
            if (c == 0) {
              e.x = -b.tx;
              e.y = -b.ty;
            } else {
              var f = 1 / c * (b.c * (b.ty - e.y) + b.d * (e.x - b.tx));
              e.y = 1 / c * (b.a * (e.y - b.ty) + b.b * (b.tx - e.x));
              e.x = f;
            }
            this.__mouseX = e.x;
            this.__mouseY = e.y;
            b = [];
            if (this.__hitTest(this.__mouseX, this.__mouseY, true, b, true, this)) {
              f = b[b.length - 1];
            } else {
              f = this;
              b = [this];
            }
            if (f == null) {
              f = this;
            }
            var k = null;
            switch (a) {
              case "middleMouseDown":
                this.__mouseDownMiddle = f;
                break;
              case "middleMouseUp":
                if (this.__mouseDownMiddle == f) {
                  k = "middleClick";
                }
                this.__mouseDownMiddle = null;
                break;
              case "mouseDown":
                if (this.get_focus() != null) {
                  if (this.get_focus() != f) {
                    c = new Jh("mouseFocusChange", true, true, f, false, 0);
                    this.get_focus().dispatchEvent(c);
                    if (!c.isDefaultPrevented()) {
                      if (f.__allowMouseFocus()) {
                        this.set_focus(f);
                      } else {
                        this.set_focus(null);
                      }
                    }
                  }
                } else if (f.__allowMouseFocus()) {
                  this.set_focus(f);
                } else {
                  this.set_focus(null);
                }
                this.__mouseDownLeft = f;
                Xb.__buttonDown = true;
                break;
              case "mouseUp":
                if (this.__mouseDownLeft != null) {
                  Xb.__buttonDown = false;
                  if (this.__mouseDownLeft == f) {
                    k = "click";
                  } else {
                    var g = Xb.__create("releaseOutside", 1, this.__mouseX, this.__mouseY, new kb(this.__mouseX, this.__mouseY), this);
                    this.__mouseDownLeft.dispatchEvent(g);
                  }
                  this.__mouseDownLeft = null;
                }
                break;
              case "rightMouseDown":
                this.__mouseDownRight = f;
                break;
              case "rightMouseUp":
                if (this.__mouseDownRight == f) {
                  k = "rightClick";
                }
                this.__mouseDownRight = null;
            }
            c = kb.__pool.get();
            g = Xb.__create(a, d, this.__mouseX, this.__mouseY, f.__globalToLocal(e, c), f);
            this.__dispatchStack(g, b);
            if (g.__updateAfterEventFlag) {
              this.__renderAfterEvent();
            }
            if (k != null) {
              g = Xb.__create(k, d, this.__mouseX, this.__mouseY, f.__globalToLocal(e, c), f);
              this.__dispatchStack(g, b);
              if (g.__updateAfterEventFlag) {
                this.__renderAfterEvent();
              }
              if (a == "mouseUp" && f.doubleClickEnabled) {
                a = na.getTimer();
                if (a - this.__lastClickTime < 500 && f == this.__lastClickTarget) {
                  g = Xb.__create("doubleClick", d, this.__mouseX, this.__mouseY, f.__globalToLocal(e, c), f);
                  this.__dispatchStack(g, b);
                  if (g.__updateAfterEventFlag) {
                    this.__renderAfterEvent();
                  }
                  this.__lastClickTime = 0;
                  this.__lastClickTarget = null;
                } else {
                  this.__lastClickTarget = f;
                  this.__lastClickTime = a;
                }
              }
            }
            if (hd.__cursor == "auto" && !hd.__hidden) {
              g = null;
              if (this.__mouseDownLeft != null) {
                g = this.__mouseDownLeft.__getCursor();
              } else {
                for (a = 0; a < b.length;) {
                  g = b[a];
                  ++a;
                  g = g.__getCursor();
                  if (g != null && this.window != null) {
                    this.window.set_cursor(Up.toLimeCursor(g));
                    break;
                  }
                }
              }
              if (g == null && this.window != null) {
                this.window.set_cursor(Tb.ARROW);
              }
            }
            if (f != this.__mouseOverTarget && this.__mouseOverTarget != null) {
              g = Xb.__create("mouseOut", d, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(e, c), this.__mouseOverTarget);
              this.__dispatchStack(g, this.__mouseOutStack);
              if (g.__updateAfterEventFlag) {
                this.__renderAfterEvent();
              }
            }
            for (a = 0; a < this.__rollOutStack.length;) {
              k = this.__rollOutStack[a];
              if (b.indexOf(k) == -1) {
                M.remove(this.__rollOutStack, k);
                g = Xb.__create("rollOut", d, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(e, c), k);
                g.bubbles = false;
                this.__dispatchTarget(k, g);
                if (g.__updateAfterEventFlag) {
                  this.__renderAfterEvent();
                }
              } else {
                ++a;
              }
            }
            for (a = 0; a < b.length;) {
              k = b[a];
              ++a;
              if (this.__rollOutStack.indexOf(k) == -1 && this.__mouseOverTarget != null) {
                if (k.hasEventListener("rollOver")) {
                  g = Xb.__create("rollOver", d, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(e, c), k);
                  g.bubbles = false;
                  this.__dispatchTarget(k, g);
                  if (g.__updateAfterEventFlag) {
                    this.__renderAfterEvent();
                  }
                }
                if (k.hasEventListener("rollOut") || k.hasEventListener("rollOver")) {
                  this.__rollOutStack.push(k);
                }
              }
            }
            if (f != this.__mouseOverTarget) {
              if (f != null) {
                g = Xb.__create("mouseOver", d, this.__mouseX, this.__mouseY, f.__globalToLocal(e, c), f);
                this.__dispatchStack(g, b);
                if (g.__updateAfterEventFlag) {
                  this.__renderAfterEvent();
                }
              }
              this.__mouseOverTarget = f;
              this.__mouseOutStack = b;
            }
            if (this.__dragObject != null) {
              this.__drag(e);
              d = null;
              if (this.__mouseOverTarget == this.__dragObject) {
                f = this.__dragObject.mouseEnabled;
                a = this.__dragObject.mouseChildren;
                this.__dragObject.mouseEnabled = false;
                this.__dragObject.mouseChildren = false;
                b = [];
                if (this.__hitTest(this.__mouseX, this.__mouseY, true, b, true, this)) {
                  d = b[b.length - 1];
                }
                this.__dragObject.mouseEnabled = f;
                this.__dragObject.mouseChildren = a;
              } else if (this.__mouseOverTarget != this) {
                d = this.__mouseOverTarget;
              }
              this.__dragObject.dropTarget = d;
            }
            kb.__pool.release(e);
            kb.__pool.release(c);
          }
        },
        __onMouseWheel: function (a, b, c) {
          var d = this.__mouseX;
          var e = this.__mouseY;
          a = [];
          if (this.__hitTest(this.__mouseX, this.__mouseY, true, a, true, this)) {
            var f = a[a.length - 1];
          } else {
            f = this;
            a = [this];
          }
          if (f == null) {
            f = this;
          }
          c = kb.__pool.get();
          c.setTo(d, e);
          d = this.__displayMatrix;
          e = d.a * d.d - d.b * d.c;
          if (e == 0) {
            c.x = -d.tx;
            c.y = -d.ty;
          } else {
            var k = 1 / e * (d.c * (d.ty - c.y) + d.d * (c.x - d.tx));
            c.y = 1 / e * (d.a * (c.y - d.ty) + d.b * (d.tx - c.x));
            c.x = k;
          }
          b |= 0;
          b = Xb.__create("mouseWheel", 0, this.__mouseX, this.__mouseY, f.__globalToLocal(c, c), f, b);
          b.cancelable = true;
          this.__dispatchStack(b, a);
          if (b.isDefaultPrevented()) {
            this.window.onMouseWheel.cancel();
          }
          if (b.__updateAfterEventFlag) {
            this.__renderAfterEvent();
          }
          kb.__pool.release(c);
        },
        __onTouch: function (a, b, c) {
          var d = kb.__pool.get();
          d.setTo(Math.round(b.x * this.window.__width * this.window.__scale), Math.round(b.y * this.window.__height * this.window.__scale));
          var e = this.__displayMatrix;
          var f = e.a * e.d - e.b * e.c;
          if (f == 0) {
            d.x = -e.tx;
            d.y = -e.ty;
          } else {
            var k = 1 / f * (e.c * (e.ty - d.y) + e.d * (d.x - e.tx));
            d.y = 1 / f * (e.a * (d.y - e.ty) + e.b * (e.tx - d.x));
            d.x = k;
          }
          e = d.x;
          f = d.y;
          k = [];
          if (this.__hitTest(e, f, false, k, true, this)) {
            var g = k[k.length - 1];
          } else {
            g = this;
            k = [this];
          }
          if (g == null) {
            g = this;
          }
          var n = b.id;
          if (this.__touchData.h.hasOwnProperty(n)) {
            var h = this.__touchData.h[n];
          } else {
            h = Kh.__pool.get();
            h.reset();
            h.touch = b;
            this.__touchData.h[n] = h;
          }
          var p = null;
          var m = false;
          switch (a) {
            case "touchBegin":
              h.touchDownTarget = g;
              break;
            case "touchEnd":
              if (h.touchDownTarget == g) {
                p = "touchTap";
              }
              h.touchDownTarget = null;
              m = true;
          }
          var l = kb.__pool.get();
          a = Ze.__create(a, null, e, f, g.__globalToLocal(d, l), g);
          a.touchPointID = n;
          a.isPrimaryTouchPoint = c;
          a.pressure = b.pressure;
          this.__dispatchStack(a, k);
          if (a.__updateAfterEventFlag) {
            this.__renderAfterEvent();
          }
          if (p != null) {
            a = Ze.__create(p, null, e, f, g.__globalToLocal(d, l), g);
            a.touchPointID = n;
            a.isPrimaryTouchPoint = c;
            a.pressure = b.pressure;
            this.__dispatchStack(a, k);
            if (a.__updateAfterEventFlag) {
              this.__renderAfterEvent();
            }
          }
          p = h.touchOverTarget;
          if (g != p && p != null) {
            a = Ze.__create("touchOut", null, e, f, p.__globalToLocal(d, l), p);
            a.touchPointID = n;
            a.isPrimaryTouchPoint = c;
            a.pressure = b.pressure;
            this.__dispatchTarget(p, a);
            if (a.__updateAfterEventFlag) {
              this.__renderAfterEvent();
            }
          }
          for (var t = h.rollOutStack, q, u = 0; u < t.length;) {
            q = t[u];
            if (k.indexOf(q) == -1) {
              M.remove(t, q);
              a = Ze.__create("touchRollOut", null, e, f, p.__globalToLocal(d, l), p);
              a.touchPointID = n;
              a.isPrimaryTouchPoint = c;
              a.bubbles = false;
              a.pressure = b.pressure;
              this.__dispatchTarget(q, a);
              if (a.__updateAfterEventFlag) {
                this.__renderAfterEvent();
              }
            } else {
              ++u;
            }
          }
          for (u = 0; u < k.length;) {
            q = k[u];
            ++u;
            if (t.indexOf(q) == -1) {
              if (q.hasEventListener("touchRollOver")) {
                a = Ze.__create("touchRollOver", null, e, f, p.__globalToLocal(d, l), q);
                a.touchPointID = n;
                a.isPrimaryTouchPoint = c;
                a.bubbles = false;
                a.pressure = b.pressure;
                this.__dispatchTarget(q, a);
                if (a.__updateAfterEventFlag) {
                  this.__renderAfterEvent();
                }
              }
              if (q.hasEventListener("touchRollOut")) {
                t.push(q);
              }
            }
          }
          if (g != p) {
            if (g != null) {
              a = Ze.__create("touchOver", null, e, f, g.__globalToLocal(d, l), g);
              a.touchPointID = n;
              a.isPrimaryTouchPoint = c;
              a.bubbles = true;
              a.pressure = b.pressure;
              this.__dispatchTarget(g, a);
              if (a.__updateAfterEventFlag) {
                this.__renderAfterEvent();
              }
            }
            h.touchOverTarget = g;
          }
          kb.__pool.release(d);
          kb.__pool.release(l);
          if (m) {
            this.__touchData.remove(n);
            h.reset();
            Kh.__pool.release(h);
          }
        },
        __registerLimeModule: function (a) {
          a.onCreateWindow.add(l(this, this.__onLimeCreateWindow));
          a.onUpdate.add(l(this, this.__onLimeUpdate));
          a.onExit.add(l(this, this.__onLimeModuleExit), false, 0);
          for (a = Qc.devices.iterator(); a.hasNext();) {
            var b = a.next();
            this.__onLimeGamepadConnect(b);
          }
          Qc.onConnect.add(l(this, this.__onLimeGamepadConnect));
          Cc.onStart.add(l(this, this.__onLimeTouchStart));
          Cc.onMove.add(l(this, this.__onLimeTouchMove));
          Cc.onEnd.add(l(this, this.__onLimeTouchEnd));
          Cc.onCancel.add(l(this, this.__onLimeTouchCancel));
        },
        __resize: function () {
          var a = this.stageWidth;
          var b = this.stageHeight;
          var c = this.window.__width * this.window.__scale | 0;
          var d = this.window.__height * this.window.__scale | 0;
          this.__displayMatrix.identity();
          if (this.get_fullScreenSourceRect() != null && this.window.__fullscreen) {
            this.stageWidth = this.get_fullScreenSourceRect().width | 0;
            this.stageHeight = this.get_fullScreenSourceRect().height | 0;
            var e = c / this.stageWidth;
            var f = d / this.stageHeight;
            this.__displayMatrix.translate(-this.get_fullScreenSourceRect().x, -this.get_fullScreenSourceRect().y);
            this.__displayMatrix.scale(e, f);
            this.__displayRect.setTo(this.get_fullScreenSourceRect().get_left(), this.get_fullScreenSourceRect().get_right(), this.get_fullScreenSourceRect().get_top(), this.get_fullScreenSourceRect().get_bottom());
          } else if (this.__logicalWidth == 0 || this.__logicalHeight == 0 || this.get_scaleMode() == 2 || c == 0 || d == 0) {
            this.stageWidth = Math.round(c / this.window.__scale);
            this.stageHeight = Math.round(d / this.window.__scale);
            this.__displayMatrix.scale(this.window.__scale, this.window.__scale);
            this.__displayRect.setTo(0, 0, this.stageWidth, this.stageHeight);
          } else {
            this.stageWidth = this.__logicalWidth;
            this.stageHeight = this.__logicalHeight;
            switch (this.get_scaleMode()) {
              case 0:
                e = c / this.stageWidth;
                f = d / this.stageHeight;
                this.__displayMatrix.scale(e, f);
                this.__displayRect.setTo(0, 0, this.stageWidth, this.stageHeight);
                break;
              case 1:
                e = c / this.stageWidth;
                f = d / this.stageHeight;
                e = Math.max(e, f);
                f = this.stageWidth * e;
                var k = this.stageHeight * e;
                f = this.stageWidth - Math.round((f - c) / e);
                k = this.stageHeight - Math.round((k - d) / e);
                var g = Math.round((this.stageWidth - f) / 2);
                var n = Math.round((this.stageHeight - k) / 2);
                this.__displayMatrix.translate(-g, -n);
                this.__displayMatrix.scale(e, e);
                this.__displayRect.setTo(g, n, f, k);
                break;
              default:
                e = c / this.stageWidth;
                f = d / this.stageHeight;
                e = Math.min(e, f);
                f = this.stageWidth * e;
                k = this.stageHeight * e;
                f = this.stageWidth - Math.round((f - c) / e);
                k = this.stageHeight - Math.round((k - d) / e);
                g = Math.round((this.stageWidth - f) / 2);
                n = Math.round((this.stageHeight - k) / 2);
                this.__displayMatrix.translate(-g, -n);
                this.__displayMatrix.scale(e, e);
                this.__displayRect.setTo(g, n, f, k);
            }
          }
          if (this.context3D != null) {
            this.context3D.configureBackBuffer(this.stageWidth, this.stageHeight, 0, true, true, true);
          }
          for (e = this.stage3Ds.iterator(); e.hasNext();) {
            e.next().__resize(c, d);
          }
          if (this.__renderer != null) {
            this.__renderer.__resize(c, d);
          }
          this.__renderDirty = true;
          if (this.stageWidth != a || this.stageHeight != b) {
            this.__setTransformDirty();
            a = new Ga("resize");
            this.__dispatchEvent(a);
          }
        },
        __setLogicalSize: function (a, b) {
          this.__logicalWidth = a;
          this.__logicalHeight = b;
          this.__resize();
        },
        __unregisterLimeModule: function (a) {
          a.onCreateWindow.remove(l(this, this.__onLimeCreateWindow));
          a.onUpdate.remove(l(this, this.__onLimeUpdate));
          a.onExit.remove(l(this, this.__onLimeModuleExit));
          Qc.onConnect.remove(l(this, this.__onLimeGamepadConnect));
          Cc.onStart.remove(l(this, this.__onLimeTouchStart));
          Cc.onMove.remove(l(this, this.__onLimeTouchMove));
          Cc.onEnd.remove(l(this, this.__onLimeTouchEnd));
          Cc.onCancel.remove(l(this, this.__onLimeTouchCancel));
        },
        __update: function (a, b) {
          if (a) {
            if (this.__transformDirty) {
              wb.prototype.__update.call(this, true, b);
              if (b) {
                this.__transformDirty = false;
              }
            }
          } else if (this.__transformDirty || this.__renderDirty) {
            wb.prototype.__update.call(this, false, b);
            if (b && Fa.__supportDOM) {
              this.__wasDirty = true;
            }
          } else if (!this.__renderDirty && this.__wasDirty) {
            wb.prototype.__update.call(this, false, b);
            if (b) {
              this.__wasDirty = false;
            }
          }
        },
        set_color: function (a) {
          if (a == null) {
            this.__transparent = true;
            a = 0;
          } else {
            this.__transparent = false;
          }
          if (this.__color != a) {
            this.__colorSplit[0] = ((a & 16711680) >>> 16) / 255;
            this.__colorSplit[1] = ((a & 65280) >>> 8) / 255;
            this.__colorSplit[2] = (a & 255) / 255;
            this.__colorString = "#" + w.hex(a & 16777215, 6);
            this.__renderDirty = true;
            this.__color = a & 16777215 | -16777216;
          }
          return a;
        },
        get_displayState: function () {
          return this.__displayState;
        },
        set_displayState: function (a) {
          if (this.window != null) {
            if (a == 2) {
              if (this.window.__fullscreen) {
                this.window.set_fullscreen(false);
              }
            } else if (!this.window.__fullscreen) {
              this.window.set_fullscreen(true);
            }
          }
          return this.__displayState = a;
        },
        get_focus: function () {
          return this.__focus;
        },
        set_focus: function (a) {
          if (a != this.__focus) {
            var b = this.__focus;
            this.__cacheFocus = this.__focus = a;
            if (b != null) {
              var c = new Jh("focusOut", true, false, a, false, 0);
              var d = [];
              b.__getInteractive(d);
              d.reverse();
              this.__dispatchStack(c, d);
            }
            if (a != null) {
              c = new Jh("focusIn", true, false, b, false, 0);
              d = [];
              a.__getInteractive(d);
              d.reverse();
              this.__dispatchStack(c, d);
            }
          }
          return a;
        },
        get_frameRate: function () {
          if (this.window != null) {
            return this.window.__backend.getFrameRate();
          } else {
            return 0;
          }
        },
        set_frameRate: function (a) {
          if (this.window != null) {
            return this.window.__backend.setFrameRate(a);
          } else {
            return a;
          }
        },
        get_fullScreenSourceRect: function () {
          if (this.__fullScreenSourceRect == null) {
            return null;
          } else {
            return this.__fullScreenSourceRect.clone();
          }
        },
        set_height: function (a) {
          return this.get_height();
        },
        get_mouseX: function () {
          return this.__mouseX;
        },
        get_mouseY: function () {
          return this.__mouseY;
        },
        get_quality: function () {
          return this.__quality;
        },
        set_rotation: function (a) {
          return 0;
        },
        get_scaleMode: function () {
          return this.__scaleMode;
        },
        set_scaleMode: function (a) {
          if (a != this.__scaleMode) {
            this.__scaleMode = a;
            this.__resize();
          }
          return a;
        },
        set_scaleX: function (a) {
          return 0;
        },
        set_scaleY: function (a) {
          return 0;
        },
        get_tabEnabled: function () {
          return false;
        },
        get_tabIndex: function () {
          return -1;
        },
        set_transform: function (a) {
          return this.get_transform();
        },
        set_width: function (a) {
          return this.get_width();
        },
        set_x: function (a) {
          return 0;
        },
        set_y: function (a) {
          return 0;
        },
        __class__: Bi,
        __properties__: q(wb.prototype.__properties__, {
          set_color: "set_color",
          set_scaleMode: "set_scaleMode",
          get_scaleMode: "get_scaleMode",
          get_quality: "get_quality",
          get_fullScreenSourceRect: "get_fullScreenSourceRect",
          set_frameRate: "set_frameRate",
          get_frameRate: "get_frameRate",
          set_focus: "set_focus",
          get_focus: "get_focus",
          set_displayState: "set_displayState",
          get_displayState: "get_displayState"
        })
      });
      function Ih(a) {
        ua.call(this);
        this.__stage = a;
        this.__height = 0;
        this.__projectionTransform = new Ql();
        this.__renderTransform = new Ql();
        this.__y = this.__x = this.__width = 0;
        this.visible = true;
        if (a.stageWidth > 0 && a.stageHeight > 0) {
          this.__resize(a.stageWidth, a.stageHeight);
        }
      }
      h["openfl.display.Stage3D"] = Ih;
      Ih.__name__ = "openfl.display.Stage3D";
      Ih.__super__ = ua;
      Ih.prototype = q(ua.prototype, {
        __createContext: function () {
          var a = this.__stage;
          var b = a.__renderer;
          if (b.__type == "cairo" || b.__type == "canvas") {
            this.__dispatchError();
          } else if (b.__type == "opengl") {
            this.context3D = new Kb(a, a.context3D.__contextState, this);
            this.__dispatchCreate();
          } else if (b.__type == "dom") {
            if (a.context3D == null) {
              this.__canvas = window.document.createElement("canvas");
              this.__canvas.width = a.stageWidth;
              this.__canvas.height = a.stageHeight;
              var c = a.window.context.attributes;
              var d = Object.prototype.hasOwnProperty.call(c, "background") && c.background == null;
              var e = Object.prototype.hasOwnProperty.call(c, "colorDepth") ? c.colorDepth : 32;
              c = Object.prototype.hasOwnProperty.call(c, "antialiasing") && c.antialiasing > 0;
              this.__webgl = gp.getContextWebGL(this.__canvas, {
                alpha: d || e > 16,
                antialias: c,
                depth: true,
                premultipliedAlpha: true,
                stencil: true,
                preserveDrawingBuffer: false
              });
              if (this.__webgl != null) {
                if (wg.context == null) {
                  wg.context = this.__webgl;
                  wg.type = "webgl";
                  wg.version = 1;
                }
                a.context3D = new Kb(a);
                a.context3D.configureBackBuffer(a.window.__width, a.window.__height, 0, true, true, true);
                a.context3D.present();
                b.element.appendChild(this.__canvas);
                this.__style = this.__canvas.style;
                this.__style.setProperty("position", "absolute", null);
                this.__style.setProperty("top", "0", null);
                this.__style.setProperty("left", "0", null);
                this.__style.setProperty(b.__transformOriginProperty, "0 0 0", null);
                this.__style.setProperty("z-index", "-1", null);
              }
              if (a.context3D != null) {
                this.context3D = new Kb(a, a.context3D.__contextState, this);
              }
              this.__dispatchCreate();
            } else {
              this.__dispatchError();
            }
          }
        },
        __dispatchError: function () {
          this.__contextRequested = false;
          this.dispatchEvent(new Xe("error", false, false, "Context3D not available"));
        },
        __dispatchCreate: function () {
          if (this.__contextRequested) {
            this.__contextRequested = false;
            this.dispatchEvent(new Ga("context3DCreate"));
          }
        },
        __lostContext: function () {
          this.__contextLost = true;
          if (this.context3D != null) {
            this.context3D.__dispose();
            this.__contextRequested = true;
          }
        },
        __resize: function (a, b) {
          if (a != this.__width || b != this.__height) {
            if (this.__canvas != null) {
              this.__canvas.width = a;
              this.__canvas.height = b;
            }
            this.__projectionTransform.copyRawDataFrom(qb.toFloatVector(null, null, null, [2 / (a > 0 ? a : 1), 0, 0, 0, 0, -2 / (b > 0 ? b : 1), 0, 0, 0, 0, -0.001, 0, -1, 1, 0, 1]));
            this.__renderTransform.identity();
            this.__renderTransform.appendTranslation(this.__x, this.__y, 0);
            this.__renderTransform.append(this.__projectionTransform);
            this.__width = a;
            this.__height = b;
          }
        },
        __restoreContext: function () {
          this.__contextLost = false;
          this.__createContext();
        },
        get_x: function () {
          return this.__x;
        },
        get_y: function () {
          return this.__y;
        },
        __class__: Ih,
        __properties__: {
          get_y: "get_y",
          get_x: "get_x"
        }
      });
      var Fp = {
        fromString: function (a) {
          switch (a) {
            case "bottom":
              return 0;
            case "bottomLeft":
              return 1;
            case "bottomRight":
              return 2;
            case "left":
              return 3;
            case "right":
              return 4;
            case "top":
              return 5;
            case "topLeft":
              return 6;
            case "topRight":
              return 7;
            default:
              return null;
          }
        }
      };
      function Qj(a, b, c, d, e, f, k, g) {
        if (g == null) {
          g = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 1;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.__id = a;
        this.__matrix = new Aa();
        if (b != 0) {
          this.set_x(b);
        }
        if (c != 0) {
          this.set_y(c);
        }
        if (d != 1) {
          this.set_scaleX(d);
        }
        if (e != 1) {
          this.set_scaleY(e);
        }
        if (f != 0) {
          this.set_rotation(f);
        }
        this.__dirty = true;
        this.__length = 0;
        this.__originX = k;
        this.__originY = g;
        this.__alpha = 1;
        this.__blendMode = null;
        this.__visible = true;
      }
      h["openfl.display.Tile"] = Qj;
      Qj.__name__ = "openfl.display.Tile";
      Qj.prototype = {
        getBounds: function (a) {
          var b = new ea();
          this.__findTileRect(b);
          var c = Aa.__pool.get();
          if (a != null && a != this) {
            c.copyFrom(this.__getWorldTransform());
            var d = Aa.__pool.get();
            d.copyFrom(a.__getWorldTransform());
            d.invert();
            c.concat(d);
            Aa.__pool.release(d);
          } else {
            c.identity();
          }
          this.__getBounds(b, c);
          Aa.__pool.release(c);
          return b;
        },
        __getBounds: function (a, b) {
          a.__transform(a, b);
        },
        __findTileRect: function (a) {
          if (this.get_tileset() == null) {
            if (this.parent != null) {
              var b = this.parent.__findTileset();
              if (b == null) {
                a.setTo(0, 0, 0, 0);
              } else {
                b = b.getRect(this.get_id());
                if (b == null) {
                  a.setTo(0, 0, 0, 0);
                } else {
                  a.copyFrom(b);
                }
              }
            } else {
              a.setTo(0, 0, 0, 0);
            }
          } else {
            a.copyFrom(this.get_tileset().getRect(this.get_id()));
          }
          a.x = 0;
          a.y = 0;
        },
        __findTileset: function () {
          return this.get_tileset() ?? (this.parent instanceof Rj ? this.parent.get_tileset() : this.parent == null ? null : this.parent.__findTileset());
        },
        __getWorldTransform: function () {
          var a = this.get_matrix().clone();
          if (this.parent != null) {
            a.concat(this.parent.__getWorldTransform());
          }
          return a;
        },
        __setRenderDirty: function () {
          if (!this.__dirty) {
            this.__dirty = true;
            if (this.parent != null) {
              this.parent.__setRenderDirty();
            }
          }
        },
        get_alpha: function () {
          return this.__alpha;
        },
        set_alpha: function (a) {
          if (a != this.__alpha) {
            this.__alpha = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_colorTransform: function () {
          return this.__colorTransform;
        },
        get_height: function () {
          var a = ea.__pool.get();
          this.__findTileRect(a);
          this.__getBounds(a, this.get_matrix());
          var b = a.height;
          ea.__pool.release(a);
          return b;
        },
        set_height: function (a) {
          var b = ea.__pool.get();
          this.__findTileRect(b);
          if (b.height != 0) {
            this.set_scaleY(a / b.height);
          }
          ea.__pool.release(b);
          return a;
        },
        get_id: function () {
          return this.__id;
        },
        get_matrix: function () {
          return this.__matrix;
        },
        get_originX: function () {
          return this.__originX;
        },
        set_originX: function (a) {
          if (a != this.__originX) {
            this.__originX = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_originY: function () {
          return this.__originY;
        },
        set_originY: function (a) {
          if (a != this.__originY) {
            this.__originY = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_rotation: function () {
          if (this.__rotation == null) {
            if (this.__matrix.b == 0 && this.__matrix.c == 0) {
              this.__rotationSine = this.__rotation = 0;
              this.__rotationCosine = 1;
            } else {
              var a = Math.atan2(this.__matrix.d, this.__matrix.c) - Math.PI / 2;
              this.__rotation = 180 / Math.PI * a;
              this.__rotationSine = Math.sin(a);
              this.__rotationCosine = Math.cos(a);
            }
          }
          return this.__rotation;
        },
        set_rotation: function (a) {
          if (a != this.__rotation) {
            this.__rotation = a;
            var b = Math.PI / 180 * a;
            this.__rotationSine = Math.sin(b);
            this.__rotationCosine = Math.cos(b);
            b = this.get_scaleX();
            var c = this.get_scaleY();
            this.__matrix.a = this.__rotationCosine * b;
            this.__matrix.b = this.__rotationSine * b;
            this.__matrix.c = -this.__rotationSine * c;
            this.__matrix.d = this.__rotationCosine * c;
            this.__setRenderDirty();
          }
          return a;
        },
        get_scaleX: function () {
          if (this.__scaleX == null) {
            if (this.get_matrix().b == 0) {
              this.__scaleX = this.__matrix.a;
            } else {
              this.__scaleX = Math.sqrt(this.__matrix.a * this.__matrix.a + this.__matrix.b * this.__matrix.b);
            }
          }
          return this.__scaleX;
        },
        set_scaleX: function (a) {
          if (a != this.__scaleX) {
            this.__scaleX = a;
            if (this.__matrix.b == 0) {
              this.__matrix.a = a;
            } else {
              this.get_rotation();
              var b = this.__rotationSine * a;
              this.__matrix.a = this.__rotationCosine * a;
              this.__matrix.b = b;
            }
            this.__setRenderDirty();
          }
          return a;
        },
        get_scaleY: function () {
          if (this.__scaleY == null) {
            this.__scaleY = this.__matrix.c == 0 ? this.get_matrix().d : Math.sqrt(this.__matrix.c * this.__matrix.c + this.__matrix.d * this.__matrix.d);
          }
          return this.__scaleY;
        },
        set_scaleY: function (a) {
          if (a != this.__scaleY) {
            this.__scaleY = a;
            if (this.__matrix.c == 0) {
              this.__matrix.d = a;
            } else {
              this.get_rotation();
              var b = this.__rotationCosine * a;
              this.__matrix.c = -this.__rotationSine * a;
              this.__matrix.d = b;
            }
            this.__setRenderDirty();
          }
          return a;
        },
        get_shader: function () {
          return this.__shader;
        },
        get_tileset: function () {
          return this.__tileset;
        },
        set_tileset: function (a) {
          if (a != this.__tileset) {
            this.__tileset = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_visible: function () {
          return this.__visible;
        },
        get_width: function () {
          var a = ea.__pool.get();
          this.__findTileRect(a);
          this.__getBounds(a, this.get_matrix());
          var b = a.width;
          ea.__pool.release(a);
          return b;
        },
        set_width: function (a) {
          var b = ea.__pool.get();
          this.__findTileRect(b);
          if (b.width != 0) {
            this.set_scaleX(a / b.width);
          }
          ea.__pool.release(b);
          return a;
        },
        get_x: function () {
          return this.__matrix.tx;
        },
        set_x: function (a) {
          if (a != this.__matrix.tx) {
            this.__matrix.tx = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_y: function () {
          return this.__matrix.ty;
        },
        set_y: function (a) {
          if (a != this.__matrix.ty) {
            this.__matrix.ty = a;
            this.__setRenderDirty();
          }
          return a;
        },
        __class__: Qj,
        __properties__: {
          set_y: "set_y",
          get_y: "get_y",
          set_x: "set_x",
          get_x: "get_x",
          set_width: "set_width",
          get_width: "get_width",
          get_visible: "get_visible",
          set_tileset: "set_tileset",
          get_tileset: "get_tileset",
          get_shader: "get_shader",
          set_scaleY: "set_scaleY",
          get_scaleY: "get_scaleY",
          set_scaleX: "set_scaleX",
          get_scaleX: "get_scaleX",
          set_rotation: "set_rotation",
          get_rotation: "get_rotation",
          set_originY: "set_originY",
          get_originY: "get_originY",
          set_originX: "set_originX",
          get_originX: "get_originX",
          get_matrix: "get_matrix",
          get_id: "get_id",
          set_height: "set_height",
          get_height: "get_height",
          get_colorTransform: "get_colorTransform",
          set_alpha: "set_alpha",
          get_alpha: "get_alpha"
        }
      };
      function Sj(a, b, c, d, e, f, k) {
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        Qj.call(this, -1, a, b, c, d, e, f, k);
        this.__tiles = [];
        this.__length = 0;
      }
      h["openfl.display.TileContainer"] = Sj;
      Sj.__name__ = "openfl.display.TileContainer";
      Sj.__interfaces__ = [Io];
      Sj.__super__ = Qj;
      Sj.prototype = q(Qj.prototype, {
        getBounds: function (a) {
          var b = new ea();
          var c;
          for (var d = 0, e = this.__tiles; d < e.length;) {
            c = e[d];
            ++d;
            c = c.getBounds(a);
            b.__expand(c.x, c.y, c.width, c.height);
          }
          return b;
        },
        get_height: function () {
          var a = ea.__pool.get();
          var b;
          for (var c = 0, d = this.__tiles; c < d.length;) {
            b = d[c];
            ++c;
            b = b.getBounds(this);
            a.__expand(b.x, b.y, b.width, b.height);
          }
          this.__getBounds(a, this.get_matrix());
          c = a.height;
          ea.__pool.release(a);
          return c;
        },
        set_height: function (a) {
          var b = ea.__pool.get();
          var c;
          for (var d = 0, e = this.__tiles; d < e.length;) {
            c = e[d];
            ++d;
            c = c.getBounds(this);
            b.__expand(c.x, c.y, c.width, c.height);
          }
          if (b.height != 0) {
            this.set_scaleY(a / b.height);
          }
          ea.__pool.release(b);
          return a;
        },
        get_width: function () {
          var a = ea.__pool.get();
          var b;
          for (var c = 0, d = this.__tiles; c < d.length;) {
            b = d[c];
            ++c;
            b = b.getBounds(this);
            a.__expand(b.x, b.y, b.width, b.height);
          }
          this.__getBounds(a, this.get_matrix());
          c = a.width;
          ea.__pool.release(a);
          return c;
        },
        set_width: function (a) {
          var b = ea.__pool.get();
          var c;
          for (var d = 0, e = this.__tiles; d < e.length;) {
            c = e[d];
            ++d;
            c = c.getBounds(this);
            b.__expand(c.x, c.y, c.width, c.height);
          }
          if (b.width != 0) {
            this.set_scaleX(a / b.width);
          }
          ea.__pool.release(b);
          return a;
        },
        __class__: Sj
      });
      function Rj(a, b, c, d) {
        if (d == null) {
          d = true;
        }
        Fa.call(this);
        this.__drawableType = 9;
        this.__tileset = c;
        this.smoothing = d;
        this.tileColorTransformEnabled = this.tileBlendModeEnabled = this.tileAlphaEnabled = true;
        this.__group = new Sj();
        this.__group.set_tileset(c);
        this.__width = a;
        this.__height = b;
      }
      h["openfl.display.Tilemap"] = Rj;
      Rj.__name__ = "openfl.display.Tilemap";
      Rj.__interfaces__ = [Io];
      Rj.__super__ = Fa;
      Rj.prototype = q(Fa.prototype, {
        __enterFrame: function (a) {
          if (this.__group.__dirty && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
        },
        __getBounds: function (a, b) {
          var c = ea.__pool.get();
          c.setTo(0, 0, this.__width, this.__height);
          c.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          ea.__pool.release(c);
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          this.__getRenderTransform();
          var k = this.__renderTransform;
          var g = k.a * k.d - k.b * k.c;
          c = g == 0 ? -k.tx : 1 / g * (k.c * (k.ty - b) + k.d * (a - k.tx));
          k = this.__renderTransform;
          g = k.a * k.d - k.b * k.c;
          a = g == 0 ? -k.ty : 1 / g * (k.a * (b - k.ty) + k.b * (k.tx - a));
          if (c > 0 && a > 0 && c <= this.__width && a <= this.__height) {
            if (d != null && !e) {
              d.push(f);
            }
            return true;
          } else {
            return false;
          }
        },
        get_height: function () {
          return this.__height * Math.abs(this.get_scaleY());
        },
        set_height: function (a) {
          this.__height = a | 0;
          return this.__height * Math.abs(this.get_scaleY());
        },
        get_width: function () {
          return this.__width * Math.abs(this.__scaleX);
        },
        set_width: function (a) {
          this.__width = a | 0;
          return this.__width * Math.abs(this.__scaleX);
        },
        __class__: Rj
      });
      function pp(a, b) {
        this.__bitmapData = a;
        this.rectData = qb.toFloatVector(null);
        this.__data = [];
        if (b != null) {
          for (a = 0; a < b.length;) {
            var c = b[a];
            ++a;
            this.addRect(c);
          }
        }
      }
      h["openfl.display.Tileset"] = pp;
      pp.__name__ = "openfl.display.Tileset";
      pp.prototype = {
        addRect: function (a) {
          if (a == null) {
            return -1;
          }
          this.rectData.push(a.x);
          this.rectData.push(a.y);
          this.rectData.push(a.width);
          this.rectData.push(a.height);
          a = new zm(a);
          a.__update(this.__bitmapData);
          this.__data.push(a);
          return this.__data.length - 1;
        },
        getRect: function (a) {
          if (a < this.__data.length && a >= 0) {
            return new ea(this.__data[a].x, this.__data[a].y, this.__data[a].width, this.__data[a].height);
          } else {
            return null;
          }
        },
        __class__: pp
      };
      function zm(a) {
        if (a != null) {
          this.x = a.x | 0;
          this.y = a.y | 0;
          this.width = a.width | 0;
          this.height = a.height | 0;
        }
      }
      h["openfl.display._Tileset.TileData"] = zm;
      zm.__name__ = "openfl.display._Tileset.TileData";
      zm.prototype = {
        __update: function (a) {
          if (a != null) {
            var b = a.width;
            a = a.height;
            this.__uvX = this.x / b;
            this.__uvY = this.y / a;
            this.__uvWidth = (this.x + this.width) / b;
            this.__uvHeight = (this.y + this.height) / a;
          }
        },
        __class__: zm
      };
      function qp() {
        this.__totalFrames = this.__framesLoaded = 1;
        this.__currentLabels = [];
        this.__currentFrame = 1;
        this.__lastFrameUpdate = this.__lastFrameScriptEval = -1;
      }
      h["openfl.display.Timeline"] = qp;
      qp.__name__ = "openfl.display.Timeline";
      qp.prototype = {
        enterFrame: function (a) {},
        __enterFrame: function (a) {
          if (this.__isPlaying) {
            a = this.__getNextFrame(a);
            if (this.__lastFrameScriptEval == a) {
              return;
            }
            if (this.__frameScripts != null) {
              if (a < this.__currentFrame) {
                if (!this.__evaluateFrameScripts(this.__totalFrames)) {
                  return;
                }
                this.__currentFrame = 1;
              }
              if (!this.__evaluateFrameScripts(a)) {
                return;
              }
            } else {
              this.__currentFrame = a;
            }
          }
          this.__updateSymbol(this.__currentFrame);
        },
        __evaluateFrameScripts: function (a) {
          if (this.__frameScripts == null) {
            return true;
          }
          var b = this.__currentFrame;
          for (a += 1; b < a;) {
            var c = b++;
            if (c != this.__lastFrameScriptEval && (this.__currentFrame = this.__lastFrameScriptEval = c, this.__frameScripts.h.hasOwnProperty(c) && (this.__updateSymbol(c), (0, this.__frameScripts.h[c])(this.__scope), this.__currentFrame != c) || !this.__isPlaying)) {
              return false;
            }
          }
          return true;
        },
        __getNextFrame: function (a) {
          if (this.frameRate != null) {
            this.__timeElapsed += a;
            a = this.__currentFrame + Math.floor(this.__timeElapsed / this.__frameTime);
            if (a < 1) {
              a = 1;
            }
            if (a > this.__totalFrames) {
              a = Math.floor((a - 1) % this.__totalFrames) + 1;
            }
            this.__timeElapsed %= this.__frameTime;
          } else {
            a = this.__currentFrame + 1;
            if (a > this.__totalFrames) {
              a = 1;
            }
          }
          return a;
        },
        __updateFrameLabel: function () {
          this.__currentFrameLabel = this.__currentLabel = null;
          for (var a = 0, b = this.__currentLabels; a < b.length;) {
            var c = b[a];
            ++a;
            if (c.frame < this.__currentFrame) {
              this.__currentLabel = c.name;
            } else if (c.frame == this.__currentFrame) {
              this.__currentFrameLabel = this.__currentLabel = c.name;
            } else {
              break;
            }
          }
        },
        __updateSymbol: function (a) {
          if (this.__currentFrame != this.__lastFrameUpdate) {
            this.__updateFrameLabel();
            this.enterFrame(a);
            this.__lastFrameUpdate = this.__currentFrame;
          }
        },
        __class__: qp
      };
      function Nj(a, b) {
        wi.call(this, a, b);
        this.stage = new Bi(this, Object.prototype.hasOwnProperty.call(b.context, "background") ? b.context.background : 16777215);
        if (Object.prototype.hasOwnProperty.call(b, "parameters")) {
          try {
            this.stage.get_loaderInfo().parameters = b.parameters;
          } catch (c) {
            Na.lastError = c;
          }
        }
        this.stage.__setLogicalSize(b.width, b.height);
        if (Object.prototype.hasOwnProperty.call(b, "resizable") && !b.resizable) {
          this.stage.set_scaleMode(3);
        }
        a.addModule(this.stage);
      }
      h["openfl.display.Window"] = Nj;
      Nj.__name__ = "openfl.display.Window";
      Nj.__super__ = wi;
      Nj.prototype = q(wi.prototype, {
        close: function () {
          wi.prototype.close.call(this);
          if (!this.onClose.canceled && this.stage != null) {
            this.application.removeModule(this.stage);
            this.stage = null;
          }
        },
        __class__: Nj
      });
      function Oj() {}
      h["openfl.display._internal.CanvasBitmap"] = Oj;
      Oj.__name__ = "openfl.display._internal.CanvasBitmap";
      Oj.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__bitmapData != null && a.__bitmapData.image != null) {
          a.__imageVersion = a.__bitmapData.image.version;
        }
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(x = b.__getAlpha(a.__worldAlpha), x <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              L = b.context;
              b.setTransform(a.__renderTransform, L);
              var c = a.opaqueBackground;
              L.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")";
              L.fillRect(0, 0, a.get_width(), a.get_height());
              b.__popMaskObject(a);
            }
            if (a.__graphics != null && a.__renderable && (x = b.__getAlpha(a.__worldAlpha), !(x <= 0))) {
              var d = a.__graphics;
              if (d != null) {
                D.render(d, b);
                var e = d.__width;
                var f = d.__height;
                c = d.__canvas;
                if (c != null && d.__visible && e >= 1 && f >= 1) {
                  var k = d.__worldTransform;
                  L = b.context;
                  w = a.__scrollRect;
                  var g = a.__worldScale9Grid;
                  if (w == null || w.width > 0 && w.height > 0) {
                    b.__setBlendMode(a.__worldBlendMode);
                    b.__pushMaskObject(a);
                    L.globalAlpha = x;
                    if (g != null && k.b == 0 && k.c == 0) {
                      var n = b.__pixelRatio;
                      x = Aa.__pool.get();
                      x.translate(k.tx, k.ty);
                      b.setTransform(x, L);
                      Aa.__pool.release(x);
                      x = d.__bounds;
                      var h = d.__renderTransform.a / d.__bitmapScale;
                      var p = d.__renderTransform.d / d.__bitmapScale;
                      var m = h * k.a;
                      var l = p * k.d;
                      k = Math.max(1, Math.round(g.x * h));
                      d = Math.round(g.y * p);
                      w = Math.max(1, Math.round((x.get_right() - g.get_right()) * h));
                      var t = Math.round((x.get_bottom() - g.get_bottom()) * p);
                      h = Math.round(g.width * h);
                      g = Math.round(g.height * p);
                      p = Math.round(k / n);
                      var q = Math.round(d / n);
                      var u = Math.round(w / n);
                      n = Math.round(t / n);
                      m = x.width * m - p - u;
                      x = x.height * l - q - n;
                      b.applySmoothing(L, false);
                      if (h != 0 && g != 0) {
                        L.drawImage(c, 0, 0, k, d, 0, 0, p, q);
                        L.drawImage(c, k, 0, h, d, p, 0, m, q);
                        L.drawImage(c, k + h, 0, w, d, p + m, 0, u, q);
                        L.drawImage(c, 0, d, k, g, 0, q, p, x);
                        L.drawImage(c, k, d, h, g, p, q, m, x);
                        L.drawImage(c, k + h, d, w, g, p + m, q, u, x);
                        L.drawImage(c, 0, d + g, k, t, 0, q + x, p, n);
                        L.drawImage(c, k, d + g, h, t, p, q + x, m, n);
                        L.drawImage(c, k + h, d + g, w, t, p + m, q + x, u, n);
                      } else if (h == 0 && g != 0) {
                        f = p + m + u;
                        L.drawImage(c, 0, 0, e, d, 0, 0, f, q);
                        L.drawImage(c, 0, d, e, g, 0, q, f, x);
                        L.drawImage(c, 0, d + g, e, t, 0, q + x, f, n);
                      } else if (g == 0 && h != 0) {
                        e = q + x + n;
                        L.drawImage(c, 0, 0, k, f, 0, 0, p, e);
                        L.drawImage(c, k, 0, h, f, p, 0, m, e);
                        L.drawImage(c, k + h, 0, w, f, p + m, 0, u, e);
                      }
                    } else {
                      b.setTransform(k, L);
                      L.drawImage(c, 0, 0, e, f);
                    }
                    b.__popMaskObject(a);
                  }
                }
              }
            }
          }
          if (a.__renderable) {
            x = b.__getAlpha(a.__worldAlpha);
            if (x > 0 && a.__bitmapData != null && a.__bitmapData.__isValid && a.__bitmapData.readable) {
              L = b.context;
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a, false);
              Xa.convertToCanvas(a.__bitmapData.image);
              L.globalAlpha = x;
              w = a.__scrollRect;
              b.setTransform(a.__renderTransform, L);
              if (!b.__allowSmoothing || !a.smoothing) {
                L.imageSmoothingEnabled = false;
              }
              if (w == null) {
                L.drawImage(a.__bitmapData.image.get_src(), 0, 0, a.__bitmapData.image.width, a.__bitmapData.image.height);
              } else {
                L.drawImage(a.__bitmapData.image.get_src(), w.x, w.y, w.width, w.height, w.x, w.y, w.width, w.height);
              }
              if (!b.__allowSmoothing || !a.smoothing) {
                L.imageSmoothingEnabled = true;
              }
              b.__popMaskObject(a, false);
            }
          }
        } else {
          c = a.__cacheBitmap;
          if (c.__renderable) {
            var x = b.__getAlpha(c.__worldAlpha);
            if (x > 0 && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
              var L = b.context;
              b.__setBlendMode(c.__worldBlendMode);
              b.__pushMaskObject(c, false);
              Xa.convertToCanvas(c.__bitmapData.image);
              L.globalAlpha = x;
              var w = c.__scrollRect;
              b.setTransform(c.__renderTransform, L);
              if (!b.__allowSmoothing || !c.smoothing) {
                L.imageSmoothingEnabled = false;
              }
              if (w == null) {
                L.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height);
              } else {
                L.drawImage(c.__bitmapData.image.get_src(), w.x, w.y, w.width, w.height, w.x, w.y, w.width, w.height);
              }
              if (!b.__allowSmoothing || !c.smoothing) {
                L.imageSmoothingEnabled = true;
              }
              b.__popMaskObject(c, false);
            }
          }
        }
        b.__renderEvent(a);
      };
      Oj.renderDrawableMask = function (a, b) {
        b.context.rect(0, 0, a.get_width(), a.get_height());
      };
      function km() {}
      h["openfl.display._internal.CanvasBitmapData"] = km;
      km.__name__ = "openfl.display._internal.CanvasBitmapData";
      km.renderDrawable = function (a, b) {
        if (a.readable) {
          var c = a.image;
          if (c.type == Id.DATA) {
            Xa.convertToCanvas(c);
          }
          var d = b.context;
          d.globalAlpha = 1;
          b.setTransform(a.__renderTransform, d);
          d.drawImage(c.get_src(), 0, 0, c.width, c.height);
        }
      };
      km.renderDrawableMask = function (a, b) {};
      function Eh() {}
      h["openfl.display._internal.CanvasDisplayObject"] = Eh;
      Eh.__name__ = "openfl.display._internal.CanvasDisplayObject";
      Eh.renderDrawable = function (a, b) {
        if (a.get_mask() == null || a.get_mask().get_width() > 0 && a.get_mask().get_height() > 0) {
          b.__updateCacheBitmap(a, false);
          if (a.__cacheBitmap != null && !a.__isCacheBitmapRender) {
            var c = a.__cacheBitmap;
            if (c.__renderable) {
              var d = b.__getAlpha(c.__worldAlpha);
              if (d > 0 && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
                var e = b.context;
                b.__setBlendMode(c.__worldBlendMode);
                b.__pushMaskObject(c, false);
                Xa.convertToCanvas(c.__bitmapData.image);
                e.globalAlpha = d;
                var f = c.__scrollRect;
                b.setTransform(c.__renderTransform, e);
                if (!b.__allowSmoothing || !c.smoothing) {
                  e.imageSmoothingEnabled = false;
                }
                if (f == null) {
                  e.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height);
                } else {
                  e.drawImage(c.__bitmapData.image.get_src(), f.x, f.y, f.width, f.height, f.x, f.y, f.width, f.height);
                }
                if (!b.__allowSmoothing || !c.smoothing) {
                  e.imageSmoothingEnabled = true;
                }
                b.__popMaskObject(c, false);
              }
            }
          } else if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(d = b.__getAlpha(a.__worldAlpha), d <= 0 || (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0 && (b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), e = b.context, b.setTransform(a.__renderTransform, e), c = a.opaqueBackground, e.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")", e.fillRect(0, 0, a.get_width(), a.get_height()), b.__popMaskObject(a)), a.__graphics == null || !a.__renderable || (d = b.__getAlpha(a.__worldAlpha), d <= 0)))) {
            var k = a.__graphics;
            if (k != null) {
              D.render(k, b);
              var g = k.__width;
              var n = k.__height;
              c = k.__canvas;
              if (c != null && k.__visible && g >= 1 && n >= 1) {
                var h = k.__worldTransform;
                e = b.context;
                f = a.__scrollRect;
                var p = a.__worldScale9Grid;
                if (f == null || f.width > 0 && f.height > 0) {
                  b.__setBlendMode(a.__worldBlendMode);
                  b.__pushMaskObject(a);
                  e.globalAlpha = d;
                  if (p != null && h.b == 0 && h.c == 0) {
                    var m = b.__pixelRatio;
                    d = Aa.__pool.get();
                    d.translate(h.tx, h.ty);
                    b.setTransform(d, e);
                    Aa.__pool.release(d);
                    d = k.__bounds;
                    var l = k.__renderTransform.a / k.__bitmapScale;
                    var t = k.__renderTransform.d / k.__bitmapScale;
                    var q = l * h.a;
                    var u = t * h.d;
                    h = Math.max(1, Math.round(p.x * l));
                    k = Math.round(p.y * t);
                    f = Math.max(1, Math.round((d.get_right() - p.get_right()) * l));
                    var x = Math.round((d.get_bottom() - p.get_bottom()) * t);
                    l = Math.round(p.width * l);
                    p = Math.round(p.height * t);
                    t = Math.round(h / m);
                    var w = Math.round(k / m);
                    var A = Math.round(f / m);
                    m = Math.round(x / m);
                    q = d.width * q - t - A;
                    d = d.height * u - w - m;
                    b.applySmoothing(e, false);
                    if (l != 0 && p != 0) {
                      e.drawImage(c, 0, 0, h, k, 0, 0, t, w);
                      e.drawImage(c, h, 0, l, k, t, 0, q, w);
                      e.drawImage(c, h + l, 0, f, k, t + q, 0, A, w);
                      e.drawImage(c, 0, k, h, p, 0, w, t, d);
                      e.drawImage(c, h, k, l, p, t, w, q, d);
                      e.drawImage(c, h + l, k, f, p, t + q, w, A, d);
                      e.drawImage(c, 0, k + p, h, x, 0, w + d, t, m);
                      e.drawImage(c, h, k + p, l, x, t, w + d, q, m);
                      e.drawImage(c, h + l, k + p, f, x, t + q, w + d, A, m);
                    } else if (l == 0 && p != 0) {
                      n = t + q + A;
                      e.drawImage(c, 0, 0, g, k, 0, 0, n, w);
                      e.drawImage(c, 0, k, g, p, 0, w, n, d);
                      e.drawImage(c, 0, k + p, g, x, 0, w + d, n, m);
                    } else if (p == 0 && l != 0) {
                      g = w + d + m;
                      e.drawImage(c, 0, 0, h, n, 0, 0, t, g);
                      e.drawImage(c, h, 0, l, n, t, 0, q, g);
                      e.drawImage(c, h + l, 0, f, n, t + q, 0, A, g);
                    }
                  } else {
                    b.setTransform(h, e);
                    e.drawImage(c, 0, 0, g, n);
                  }
                  b.__popMaskObject(a);
                }
              }
            }
          }
        }
        b.__renderEvent(a);
      };
      Eh.renderDrawableMask = function (a, b) {
        if (a.__graphics != null) {
          D.renderMask(a.__graphics, b);
        }
      };
      function lm() {}
      h["openfl.display._internal.CanvasDisplayObjectContainer"] = lm;
      lm.__name__ = "openfl.display._internal.CanvasDisplayObjectContainer";
      lm.renderDrawable = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        if (!!a.__renderable && !(a.__worldAlpha <= 0) && (a.get_mask() == null || !(a.get_mask().get_width() <= 0) && !(a.get_mask().get_height() <= 0)) && (Eh.renderDrawable(a, b), a.__cacheBitmap == null || a.__isCacheBitmapRender)) {
          b.__pushMaskObject(a);
          if (b.__stage != null) {
            c = 0;
            for (d = a.__children; c < d.length;) {
              var e = d[c];
              ++c;
              b.__renderDrawable(e);
              e.__renderDirty = false;
            }
            a.__renderDirty = false;
          } else {
            c = 0;
            d = a.__children;
            while (c < d.length) {
              e = d[c];
              ++c;
              b.__renderDrawable(e);
            }
          }
          b.__popMaskObject(a);
        }
      };
      lm.renderDrawableMask = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        if (a.__graphics != null) {
          D.renderMask(a.__graphics, b);
        }
        c = 0;
        for (a = a.__children; c < a.length;) {
          d = a[c];
          ++c;
          b.__renderDrawableMask(d);
        }
      };
      function ie() {
        if (ie.empty == null) {
          this.types = [];
          this.b = [];
          this.i = [];
          this.f = [];
          this.o = [];
          this.ff = [];
          this.ii = [];
          this.copyOnWrite = true;
        } else {
          this.clear();
        }
      }
      h["openfl.display._internal.DrawCommandBuffer"] = ie;
      ie.__name__ = "openfl.display._internal.DrawCommandBuffer";
      ie.prototype = {
        beginBitmapFill: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(pa.BEGIN_BITMAP_FILL);
          this.o.push(a);
          this.o.push(b);
          this.b.push(c);
          this.b.push(d);
        },
        beginFill: function (a, b) {
          this.prepareWrite();
          this.types.push(pa.BEGIN_FILL);
          this.i.push(a);
          this.f.push(b);
        },
        beginGradientFill: function (a, b, c, d, e, f, k, g) {
          this.prepareWrite();
          this.types.push(pa.BEGIN_GRADIENT_FILL);
          this.o.push(a);
          this.ii.push(b);
          this.ff.push(c);
          this.ii.push(d);
          this.o.push(e);
          this.o.push(f);
          this.o.push(k);
          this.f.push(g);
        },
        beginShaderFill: function (a) {
          this.prepareWrite();
          this.types.push(pa.BEGIN_SHADER_FILL);
          this.o.push(a);
        },
        clear: function () {
          this.types = ie.empty.types;
          this.b = ie.empty.b;
          this.i = ie.empty.i;
          this.f = ie.empty.f;
          this.o = ie.empty.o;
          this.ff = ie.empty.ff;
          this.ii = ie.empty.ii;
          this.copyOnWrite = true;
        },
        cubicCurveTo: function (a, b, c, d, e, f) {
          this.prepareWrite();
          this.types.push(pa.CUBIC_CURVE_TO);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
          this.f.push(e);
          this.f.push(f);
        },
        curveTo: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(pa.CURVE_TO);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
        },
        drawCircle: function (a, b, c) {
          this.prepareWrite();
          this.types.push(pa.DRAW_CIRCLE);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
        },
        drawEllipse: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(pa.DRAW_ELLIPSE);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
        },
        drawQuads: function (a, b, c) {
          this.prepareWrite();
          this.types.push(pa.DRAW_QUADS);
          this.o.push(a);
          this.o.push(b);
          this.o.push(c);
        },
        drawRect: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(pa.DRAW_RECT);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
        },
        drawRoundRect: function (a, b, c, d, e, f) {
          this.prepareWrite();
          this.types.push(pa.DRAW_ROUND_RECT);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
          this.f.push(e);
          this.o.push(f);
        },
        drawTriangles: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(pa.DRAW_TRIANGLES);
          this.o.push(a);
          this.o.push(b);
          this.o.push(c);
          this.o.push(d);
        },
        endFill: function () {
          this.prepareWrite();
          this.types.push(pa.END_FILL);
        },
        lineBitmapStyle: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(pa.LINE_BITMAP_STYLE);
          this.o.push(a);
          this.o.push(b);
          this.b.push(c);
          this.b.push(d);
        },
        lineGradientStyle: function (a, b, c, d, e, f, k, g) {
          this.prepareWrite();
          this.types.push(pa.LINE_GRADIENT_STYLE);
          this.o.push(a);
          this.ii.push(b);
          this.ff.push(c);
          this.ii.push(d);
          this.o.push(e);
          this.o.push(f);
          this.o.push(k);
          this.f.push(g);
        },
        lineStyle: function (a, b, c, d, e, f, k, g) {
          this.prepareWrite();
          this.types.push(pa.LINE_STYLE);
          this.o.push(a);
          this.i.push(b);
          this.f.push(c);
          this.b.push(d);
          this.o.push(e);
          this.o.push(f);
          this.o.push(k);
          this.f.push(g);
        },
        lineTo: function (a, b) {
          this.prepareWrite();
          this.types.push(pa.LINE_TO);
          this.f.push(a);
          this.f.push(b);
        },
        moveTo: function (a, b) {
          this.prepareWrite();
          this.types.push(pa.MOVE_TO);
          this.f.push(a);
          this.f.push(b);
        },
        prepareWrite: function () {
          if (this.copyOnWrite) {
            this.types = this.types.slice();
            this.b = this.b.slice();
            this.i = this.i.slice();
            this.f = this.f.slice();
            this.o = this.o.slice();
            this.ff = this.ff.slice();
            this.ii = this.ii.slice();
            this.copyOnWrite = false;
          }
        },
        overrideBlendMode: function (a) {
          this.prepareWrite();
          this.types.push(pa.OVERRIDE_BLEND_MODE);
          this.o.push(a);
        },
        windingEvenOdd: function () {
          this.prepareWrite();
          this.types.push(pa.WINDING_EVEN_ODD);
        },
        windingNonZero: function () {
          this.prepareWrite();
          this.types.push(pa.WINDING_NON_ZERO);
        },
        get_length: function () {
          return this.types.length;
        },
        __class__: ie,
        __properties__: {
          get_length: "get_length"
        }
      };
      function D() {}
      h["openfl.display._internal.CanvasGraphics"] = D;
      D.__name__ = "openfl.display._internal.CanvasGraphics";
      D.closePath = function (a) {
        if (a == null) {
          a = false;
        }
        if (D.context.strokeStyle != null) {
          if (!a) {
            D.context.closePath();
          }
          D.context.stroke();
          if (a) {
            D.context.closePath();
          }
          D.context.beginPath();
        }
      };
      D.createBitmapFill = function (a, b, c) {
        Xa.convertToCanvas(a.image);
        D.setSmoothing(c);
        return D.context.createPattern(a.image.get_src(), b ? "repeat" : "no-repeat");
      };
      D.createGradientPattern = function (a, b, c, d, e, f, k, g) {
        f = null;
        k = false;
        if (e == null) {
          e = Aa.__pool.get();
          e.identity();
          k = true;
        }
        switch (a) {
          case 0:
            f = D.context.createLinearGradient(-819.2, 0, 819.2, 0);
            D.pendingMatrix = e.clone();
            D.inversePendingMatrix = e.clone();
            D.inversePendingMatrix.invert();
            break;
          case 1:
            if (g > 1) {
              g = 1;
            } else if (g < -1) {
              g = -1;
            }
            f = D.context.createRadialGradient(g * 819.2, 0, 0, 0, 0, 819.2);
            D.pendingMatrix = e.clone();
            D.inversePendingMatrix = e.clone();
            D.inversePendingMatrix.invert();
        }
        var n;
        var r;
        var h;
        for (var m = 0, p = b.length; m < p;) {
          h = m++;
          n = b[h];
          a = c[h];
          g = (n & 16711680) >>> 16;
          r = (n & 65280) >>> 8;
          n &= 255;
          h = d[h] / 255;
          if (h < 0) {
            h = 0;
          }
          if (h > 1) {
            h = 1;
          }
          f.addColorStop(h, "rgba(" + g + ", " + r + ", " + n + ", " + a + ")");
        }
        if (k) {
          Aa.__pool.release(e);
        }
        return f;
      };
      D.createTempPatternCanvas = function (a, b, c, d) {
        var e = window.document.createElement("canvas");
        var f = e.getContext("2d");
        e.width = c;
        e.height = d;
        a = a.image.get_src();
        f.fillStyle = f.createPattern(a, b ? "repeat" : "no-repeat");
        f.beginPath();
        f.moveTo(0, 0);
        f.lineTo(0, d);
        f.lineTo(c, d);
        f.lineTo(c, 0);
        f.lineTo(0, 0);
        f.closePath();
        if (!D.hitTesting) {
          f.fill(D.windingRule);
        }
        return e;
      };
      D.drawRoundRect = function (a, b, c, d, e, f) {
        if (f == null) {
          f = e;
        }
        e *= 0.5;
        f *= 0.5;
        if (e > c / 2) {
          e = c / 2;
        }
        if (f > d / 2) {
          f = d / 2;
        }
        c = a + c;
        d = b + d;
        var k = -e + e * 0.7071067811865476;
        var g = -e + e * 0.41421356237309503;
        var n = -f + f * 0.7071067811865476;
        var h = -f + f * 0.41421356237309503;
        D.context.moveTo(c, d - f);
        D.context.quadraticCurveTo(c, d + h, c + k, d + n);
        D.context.quadraticCurveTo(c + g, d, c - e, d);
        D.context.lineTo(a + e, d);
        D.context.quadraticCurveTo(a - g, d, a - k, d + n);
        D.context.quadraticCurveTo(a, d + h, a, d - f);
        D.context.lineTo(a, b + f);
        D.context.quadraticCurveTo(a, b - h, a - k, b - n);
        D.context.quadraticCurveTo(a - g, b, a + e, b);
        D.context.lineTo(c - e, b);
        D.context.quadraticCurveTo(c + g, b, c + k, b - n);
        D.context.quadraticCurveTo(c, b - h, c, b + f);
        D.context.lineTo(c, d - f);
      };
      D.endFill = function () {
        D.context.beginPath();
        D.playCommands(D.fillCommands, false);
        D.fillCommands.clear();
      };
      D.endStroke = function () {
        D.context.beginPath();
        D.playCommands(D.strokeCommands, true);
        D.context.closePath();
        D.strokeCommands.clear();
      };
      D.hitTest = function (a, b, c) {
        D.bounds = a.__bounds;
        D.graphics = a;
        if (a.__commands.get_length() == 0 || D.bounds == null || D.bounds.width <= 0 || D.bounds.height <= 0) {
          return false;
        }
        D.hitTesting = true;
        var d = a.__renderTransform;
        var e = b * d.b + c * d.d + d.ty;
        b = b * d.a + c * d.c + d.tx - (D.bounds.x * d.a + D.bounds.y * d.c + d.tx);
        c = e - (D.bounds.x * d.b + D.bounds.y * d.d + d.ty);
        e = a.__canvas;
        var f = a.__context;
        a.__canvas = D.hitTestCanvas;
        a.__context = D.hitTestContext;
        D.context = a.__context;
        D.context.setTransform(d.a, d.b, d.c, d.d, d.tx, d.ty);
        D.fillCommands.clear();
        D.strokeCommands.clear();
        D.hasFill = false;
        D.hasStroke = false;
        D.bitmapFill = null;
        D.bitmapRepeat = false;
        D.windingRule = "evenodd";
        d = new cg(a.__commands);
        for (var k = 0, g = a.__commands.types; k < g.length;) {
          var n = g[k];
          ++k;
          switch (n._hx_index) {
            case 0:
            case 1:
            case 2:
            case 3:
              D.endFill();
              if (D.hasFill && D.context.isPointInPath(b, c, D.windingRule)) {
                d.destroy();
                a.__canvas = e;
                a.__context = f;
                return true;
              }
              D.endStroke();
              if (D.hasStroke && D.context.isPointInStroke(b, c)) {
                d.destroy();
                a.__canvas = e;
                a.__context = f;
                return true;
              }
              if (n == pa.BEGIN_BITMAP_FILL) {
                switch (d.prev._hx_index) {
                  case 0:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 1:
                    d.iPos += 1;
                    d.fPos += 1;
                    break;
                  case 2:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 3:
                    d.oPos += 1;
                    break;
                  case 4:
                    d.fPos += 6;
                    break;
                  case 5:
                    d.fPos += 4;
                    break;
                  case 6:
                    d.fPos += 3;
                    break;
                  case 7:
                    d.fPos += 4;
                    break;
                  case 8:
                    d.oPos += 3;
                    break;
                  case 9:
                    d.fPos += 4;
                    break;
                  case 10:
                    d.fPos += 5;
                    d.oPos += 1;
                    break;
                  case 12:
                    d.oPos += 4;
                    break;
                  case 14:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 15:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 16:
                    d.oPos += 4;
                    d.iPos += 1;
                    d.fPos += 2;
                    d.bPos += 1;
                    break;
                  case 17:
                    d.fPos += 2;
                    break;
                  case 18:
                    d.fPos += 2;
                    break;
                  case 19:
                    d.oPos += 1;
                    break;
                  case 20:
                    d.oPos += 1;
                }
                d.prev = pa.BEGIN_BITMAP_FILL;
                n = d;
                D.fillCommands.beginBitmapFill(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.b[n.bPos], n.buffer.b[n.bPos + 1]);
                D.strokeCommands.beginBitmapFill(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.b[n.bPos], n.buffer.b[n.bPos + 1]);
              } else if (n == pa.BEGIN_GRADIENT_FILL) {
                switch (d.prev._hx_index) {
                  case 0:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 1:
                    d.iPos += 1;
                    d.fPos += 1;
                    break;
                  case 2:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 3:
                    d.oPos += 1;
                    break;
                  case 4:
                    d.fPos += 6;
                    break;
                  case 5:
                    d.fPos += 4;
                    break;
                  case 6:
                    d.fPos += 3;
                    break;
                  case 7:
                    d.fPos += 4;
                    break;
                  case 8:
                    d.oPos += 3;
                    break;
                  case 9:
                    d.fPos += 4;
                    break;
                  case 10:
                    d.fPos += 5;
                    d.oPos += 1;
                    break;
                  case 12:
                    d.oPos += 4;
                    break;
                  case 14:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 15:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 16:
                    d.oPos += 4;
                    d.iPos += 1;
                    d.fPos += 2;
                    d.bPos += 1;
                    break;
                  case 17:
                    d.fPos += 2;
                    break;
                  case 18:
                    d.fPos += 2;
                    break;
                  case 19:
                    d.oPos += 1;
                    break;
                  case 20:
                    d.oPos += 1;
                }
                d.prev = pa.BEGIN_GRADIENT_FILL;
                n = d;
                D.fillCommands.beginGradientFill(n.buffer.o[n.oPos], n.buffer.ii[n.iiPos], n.buffer.ff[n.ffPos], n.buffer.ii[n.iiPos + 1], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos]);
                D.strokeCommands.beginGradientFill(n.buffer.o[n.oPos], n.buffer.ii[n.iiPos], n.buffer.ff[n.ffPos], n.buffer.ii[n.iiPos + 1], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos]);
              } else if (n == pa.BEGIN_SHADER_FILL) {
                switch (d.prev._hx_index) {
                  case 0:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 1:
                    d.iPos += 1;
                    d.fPos += 1;
                    break;
                  case 2:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 3:
                    d.oPos += 1;
                    break;
                  case 4:
                    d.fPos += 6;
                    break;
                  case 5:
                    d.fPos += 4;
                    break;
                  case 6:
                    d.fPos += 3;
                    break;
                  case 7:
                    d.fPos += 4;
                    break;
                  case 8:
                    d.oPos += 3;
                    break;
                  case 9:
                    d.fPos += 4;
                    break;
                  case 10:
                    d.fPos += 5;
                    d.oPos += 1;
                    break;
                  case 12:
                    d.oPos += 4;
                    break;
                  case 14:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 15:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 16:
                    d.oPos += 4;
                    d.iPos += 1;
                    d.fPos += 2;
                    d.bPos += 1;
                    break;
                  case 17:
                    d.fPos += 2;
                    break;
                  case 18:
                    d.fPos += 2;
                    break;
                  case 19:
                    d.oPos += 1;
                    break;
                  case 20:
                    d.oPos += 1;
                }
                d.prev = pa.BEGIN_SHADER_FILL;
                n = d;
                D.fillCommands.beginShaderFill(n.buffer.o[n.oPos]);
                D.strokeCommands.beginShaderFill(n.buffer.o[n.oPos]);
              } else {
                switch (d.prev._hx_index) {
                  case 0:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 1:
                    d.iPos += 1;
                    d.fPos += 1;
                    break;
                  case 2:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 3:
                    d.oPos += 1;
                    break;
                  case 4:
                    d.fPos += 6;
                    break;
                  case 5:
                    d.fPos += 4;
                    break;
                  case 6:
                    d.fPos += 3;
                    break;
                  case 7:
                    d.fPos += 4;
                    break;
                  case 8:
                    d.oPos += 3;
                    break;
                  case 9:
                    d.fPos += 4;
                    break;
                  case 10:
                    d.fPos += 5;
                    d.oPos += 1;
                    break;
                  case 12:
                    d.oPos += 4;
                    break;
                  case 14:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 15:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 16:
                    d.oPos += 4;
                    d.iPos += 1;
                    d.fPos += 2;
                    d.bPos += 1;
                    break;
                  case 17:
                    d.fPos += 2;
                    break;
                  case 18:
                    d.fPos += 2;
                    break;
                  case 19:
                    d.oPos += 1;
                    break;
                  case 20:
                    d.oPos += 1;
                }
                d.prev = pa.BEGIN_FILL;
                n = d;
                D.fillCommands.beginFill(n.buffer.i[n.iPos], 1);
                D.strokeCommands.beginFill(n.buffer.i[n.iPos], 1);
              }
              break;
            case 4:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.CUBIC_CURVE_TO;
              n = d;
              D.fillCommands.cubicCurveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.f[n.fPos + 5]);
              D.strokeCommands.cubicCurveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.f[n.fPos + 5]);
              break;
            case 5:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.CURVE_TO;
              n = d;
              D.fillCommands.curveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
              D.strokeCommands.curveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
              break;
            case 6:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.DRAW_CIRCLE;
              n = d;
              D.fillCommands.drawCircle(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2]);
              D.strokeCommands.drawCircle(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2]);
              break;
            case 7:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.DRAW_ELLIPSE;
              n = d;
              D.fillCommands.drawEllipse(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
              D.strokeCommands.drawEllipse(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
              break;
            case 9:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.DRAW_RECT;
              n = d;
              D.fillCommands.drawRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
              D.strokeCommands.drawRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
              break;
            case 10:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.DRAW_ROUND_RECT;
              n = d;
              D.fillCommands.drawRoundRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.o[n.oPos]);
              D.strokeCommands.drawRoundRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.o[n.oPos]);
              break;
            case 13:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.END_FILL;
              D.endFill();
              if (D.hasFill && D.context.isPointInPath(b, c, D.windingRule)) {
                d.destroy();
                a.__canvas = e;
                a.__context = f;
                return true;
              }
              D.endStroke();
              if (D.hasStroke && D.context.isPointInStroke(b, c)) {
                d.destroy();
                a.__canvas = e;
                a.__context = f;
                return true;
              }
              D.hasFill = false;
              D.bitmapFill = null;
              break;
            case 14:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.LINE_BITMAP_STYLE;
              n = d;
              D.strokeCommands.lineBitmapStyle(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.b[n.bPos], n.buffer.b[n.bPos + 1]);
              break;
            case 15:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.LINE_GRADIENT_STYLE;
              n = d;
              D.strokeCommands.lineGradientStyle(n.buffer.o[n.oPos], n.buffer.ii[n.iiPos], n.buffer.ff[n.ffPos], n.buffer.ii[n.iiPos + 1], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos]);
              break;
            case 16:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.LINE_STYLE;
              n = d;
              D.strokeCommands.lineStyle(n.buffer.o[n.oPos], n.buffer.i[n.iPos], 1, n.buffer.b[n.bPos], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos + 1]);
              break;
            case 17:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.LINE_TO;
              n = d;
              D.fillCommands.lineTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
              D.strokeCommands.lineTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
              break;
            case 18:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.MOVE_TO;
              n = d;
              D.fillCommands.moveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
              D.strokeCommands.moveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
              break;
            case 21:
              D.windingRule = "evenodd";
              break;
            case 22:
              D.windingRule = "nonzero";
              break;
            default:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = n;
          }
        }
        k = false;
        if (D.fillCommands.get_length() > 0) {
          D.endFill();
        }
        if (D.hasFill && D.context.isPointInPath(b, c, D.windingRule)) {
          k = true;
        }
        if (D.strokeCommands.get_length() > 0) {
          D.endStroke();
        }
        if (D.hasStroke && D.context.isPointInStroke(b, c)) {
          k = true;
        }
        d.destroy();
        a.__canvas = e;
        a.__context = f;
        return k;
      };
      D.normalizeUVT = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = -Infinity;
        for (var d, e = a.get_length(), f = 1, k = e + 1; f < k;) {
          d = f++;
          if (!b || d % 3 != 0) {
            d = a.get(d - 1);
            if (c < d) {
              c = d;
            }
          }
        }
        if (!b) {
          return {
            max: c,
            uvt: a
          };
        }
        var g = qb.toFloatVector(null);
        f = 1;
        for (k = e + 1; f < k;) {
          d = f++;
          if (!b || d % 3 != 0) {
            g.push(a.get(d - 1));
          }
        }
        return {
          max: c,
          uvt: g
        };
      };
      D.playCommands = function (a, b) {
        if (b == null) {
          b = false;
        }
        D.bounds = D.graphics.__bounds;
        var c = D.bounds.x;
        var d = D.bounds.y;
        var e = 0;
        var f = 0;
        var k = false;
        var g = 0;
        var n = 0;
        var h = false;
        D.windingRule = "evenodd";
        D.setSmoothing(true);
        var p = false;
        var m = new cg(a);
        var l;
        var t;
        var q;
        var u = null;
        var x = null;
        var A = 0;
        var y = a.types;
        a: while (A < y.length) {
          var z = y[A];
          ++A;
          switch (z._hx_index) {
            case 0:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.BEGIN_BITMAP_FILL;
              var C = m;
              D.bitmapFill = C.buffer.o[C.oPos];
              D.context.fillStyle = D.createBitmapFill(C.buffer.o[C.oPos], C.buffer.b[C.bPos], C.buffer.b[C.bPos + 1]);
              D.hasFill = true;
              if (C.buffer.o[C.oPos + 1] != null) {
                D.pendingMatrix = C.buffer.o[C.oPos + 1];
                D.inversePendingMatrix = C.buffer.o[C.oPos + 1].clone();
                D.inversePendingMatrix.invert();
              } else {
                D.pendingMatrix = null;
                D.inversePendingMatrix = null;
              }
              break;
            case 1:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.BEGIN_FILL;
              var H = m;
              if (H.buffer.f[H.fPos] < 0.005) {
                D.hasFill = false;
              } else {
                if (H.buffer.f[H.fPos] == 1) {
                  var Ka = w.hex(H.buffer.i[H.iPos] & 16777215, 6);
                  D.context.fillStyle = "#" + Ka;
                } else {
                  var F = (H.buffer.i[H.iPos] & 16711680) >>> 16;
                  var B = (H.buffer.i[H.iPos] & 65280) >>> 8;
                  var v = H.buffer.i[H.iPos] & 255;
                  D.context.fillStyle = "rgba(" + F + ", " + B + ", " + v + ", " + H.buffer.f[H.fPos] + ")";
                }
                D.bitmapFill = null;
                D.setSmoothing(true);
                D.hasFill = true;
              }
              break;
            case 2:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.BEGIN_GRADIENT_FILL;
              var G = m;
              D.context.fillStyle = D.createGradientPattern(G.buffer.o[G.oPos], G.buffer.ii[G.iiPos], G.buffer.ff[G.ffPos], G.buffer.ii[G.iiPos + 1], G.buffer.o[G.oPos + 1], G.buffer.o[G.oPos + 2], G.buffer.o[G.oPos + 3], G.buffer.f[G.fPos]);
              D.bitmapFill = null;
              D.setSmoothing(true);
              D.hasFill = true;
              break;
            case 3:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.BEGIN_SHADER_FILL;
              var K = m;
              var ha = K.buffer.o[K.oPos];
              if (ha.inputCount > 0) {
                D.bitmapFill = ha.inputs[0];
                D.context.fillStyle = D.createBitmapFill(D.bitmapFill, ha.inputWrap[0] != 0, ha.inputFilter[0] != 5);
                D.hasFill = true;
                D.pendingMatrix = null;
                D.inversePendingMatrix = null;
              }
              break;
            case 4:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.CUBIC_CURVE_TO;
              var la = m;
              p = true;
              D.context.bezierCurveTo(la.buffer.f[la.fPos] - c, la.buffer.f[la.fPos + 1] - d, la.buffer.f[la.fPos + 2] - c, la.buffer.f[la.fPos + 3] - d, la.buffer.f[la.fPos + 4] - c, la.buffer.f[la.fPos + 5] - d);
              break;
            case 5:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.CURVE_TO;
              var ya = m;
              p = true;
              D.context.quadraticCurveTo(ya.buffer.f[ya.fPos] - c, ya.buffer.f[ya.fPos + 1] - d, ya.buffer.f[ya.fPos + 2] - c, ya.buffer.f[ya.fPos + 3] - d);
              break;
            case 6:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.DRAW_CIRCLE;
              var M = m;
              p = true;
              D.context.moveTo(M.buffer.f[M.fPos] - c + M.buffer.f[M.fPos + 2], M.buffer.f[M.fPos + 1] - d);
              D.context.arc(M.buffer.f[M.fPos] - c, M.buffer.f[M.fPos + 1] - d, M.buffer.f[M.fPos + 2], 0, Math.PI * 2, true);
              break;
            case 7:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.DRAW_ELLIPSE;
              var Qa = m;
              p = true;
              var N = Qa.buffer.f[Qa.fPos];
              var ma = Qa.buffer.f[Qa.fPos + 1];
              var rb = Qa.buffer.f[Qa.fPos + 2];
              var I = Qa.buffer.f[Qa.fPos + 3];
              N -= c;
              ma -= d;
              var E = rb / 2 * 0.5522848;
              var R = I / 2 * 0.5522848;
              var U = N + rb;
              var O = ma + I;
              var T = N + rb / 2;
              var Q = ma + I / 2;
              D.context.moveTo(N, Q);
              D.context.bezierCurveTo(N, Q - R, T - E, ma, T, ma);
              D.context.bezierCurveTo(T + E, ma, U, Q - R, U, Q);
              D.context.bezierCurveTo(U, Q + R, T + E, O, T, O);
              D.context.bezierCurveTo(T - E, O, N, Q + R, N, Q);
              break;
            case 8:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.DRAW_QUADS;
              var S = m;
              var tc = S.buffer.o[S.oPos];
              var Y = S.buffer.o[S.oPos + 1];
              var W = S.buffer.o[S.oPos + 2];
              var Z = Y != null;
              var ba = false;
              var ca = false;
              var da = Z ? Y.get_length() : Math.floor(tc.get_length() / 4);
              if (da == 0) {
                return;
              }
              if (W != null) {
                if (W.get_length() >= da * 6) {
                  ca = ba = true;
                } else if (W.get_length() >= da * 4) {
                  ba = true;
                } else if (W.get_length() >= da * 2) {
                  ca = true;
                }
              }
              var V = ea.__pool.get();
              var X = Aa.__pool.get();
              var ua = D.graphics.__renderTransform;
              D.context.save();
              for (var fa = 0, ia = da; fa < ia;) {
                var ja = fa++;
                var ka = Z ? Y.get(ja) * 4 : ja * 4;
                if (!(ka < 0) && !(V.setTo(tc.get(ka), tc.get(ka + 1), tc.get(ka + 2), tc.get(ka + 3)), V.width <= 0 || V.height <= 0)) {
                  if (ba && ca) {
                    var rd = ja * 6;
                    X.setTo(W.get(rd), W.get(rd + 1), W.get(rd + 2), W.get(rd + 3), W.get(rd + 4), W.get(rd + 5));
                  } else if (ba) {
                    rd = ja * 4;
                    X.setTo(W.get(rd), W.get(rd + 1), W.get(rd + 2), W.get(rd + 3), V.x, V.y);
                  } else if (ca) {
                    rd = ja * 2;
                    X.tx = W.get(rd);
                    X.ty = W.get(rd + 1);
                  } else {
                    X.tx = V.x;
                    X.ty = V.y;
                  }
                  X.tx += e - c;
                  X.ty += f - d;
                  X.concat(ua);
                  D.context.setTransform(X.a, X.b, X.c, X.d, X.tx, X.ty);
                  if (D.bitmapFill != null) {
                    D.context.drawImage(D.bitmapFill.image.get_src(), V.x, V.y, V.width, V.height, 0, 0, V.width, V.height);
                  } else {
                    D.context.fillRect(0, 0, V.width, V.height);
                  }
                }
              }
              ea.__pool.release(V);
              Aa.__pool.release(X);
              D.context.restore();
              break;
            case 9:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.DRAW_RECT;
              var P = m;
              var na = false;
              if (D.bitmapFill != null && !D.hitTesting) {
                var vb = q = t = l = 0;
                var xa = true;
                if (D.pendingMatrix != null) {
                  if (D.pendingMatrix.b != 0 || D.pendingMatrix.c != 0) {
                    xa = false;
                  } else {
                    if (u == null) {
                      u = kb.__pool.get();
                    }
                    if (x == null) {
                      x = kb.__pool.get();
                    }
                    u.setTo(P.buffer.f[P.fPos], P.buffer.f[P.fPos + 1]);
                    var Ad = D.inversePendingMatrix;
                    var qa = u.x;
                    var sa = u.y;
                    u.x = qa * Ad.a + sa * Ad.c + Ad.tx;
                    u.y = qa * Ad.b + sa * Ad.d + Ad.ty;
                    x.setTo(P.buffer.f[P.fPos] + P.buffer.f[P.fPos + 2], P.buffer.f[P.fPos + 1] + P.buffer.f[P.fPos + 3]);
                    var oa = D.inversePendingMatrix;
                    var ra = x.x;
                    var Ld = x.y;
                    x.x = ra * oa.a + Ld * oa.c + oa.tx;
                    x.y = ra * oa.b + Ld * oa.d + oa.ty;
                    l = u.y;
                    vb = u.x;
                    q = x.y;
                    t = x.x;
                  }
                } else {
                  l = P.buffer.f[P.fPos + 1];
                  vb = P.buffer.f[P.fPos];
                  q = P.buffer.f[P.fPos + 1] + P.buffer.f[P.fPos + 3];
                  t = P.buffer.f[P.fPos] + P.buffer.f[P.fPos + 2];
                }
                if (xa && l >= 0 && vb >= 0 && t <= D.bitmapFill.width && q <= D.bitmapFill.height) {
                  na = true;
                  if (!D.hitTesting) {
                    D.context.drawImage(D.bitmapFill.image.get_src(), vb, l, t - vb, q - l, P.buffer.f[P.fPos] - c, P.buffer.f[P.fPos + 1] - d, P.buffer.f[P.fPos + 2], P.buffer.f[P.fPos + 3]);
                  }
                }
              }
              if (!na) {
                p = true;
                D.context.rect(P.buffer.f[P.fPos] - c, P.buffer.f[P.fPos + 1] - d, P.buffer.f[P.fPos + 2], P.buffer.f[P.fPos + 3]);
              }
              break;
            case 10:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.DRAW_ROUND_RECT;
              var ab = m;
              p = true;
              D.drawRoundRect(ab.buffer.f[ab.fPos] - c, ab.buffer.f[ab.fPos + 1] - d, ab.buffer.f[ab.fPos + 2], ab.buffer.f[ab.fPos + 3], ab.buffer.f[ab.fPos + 4], ab.buffer.o[ab.oPos]);
              break;
            case 12:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.DRAW_TRIANGLES;
              var ta = m;
              var Oa = ta.buffer.o[ta.oPos];
              var wa = ta.buffer.o[ta.oPos + 1];
              var Fa = ta.buffer.o[ta.oPos + 2];
              var va = null;
              var ib = D.bitmapFill == null;
              if (ib && Fa != null) {
                break a;
              }
              if (!ib) {
                if (Fa == null) {
                  Fa = qb.toFloatVector(null);
                  for (var Ba = 0, Ca = Oa.get_length() / 2 | 0; Ba < Ca;) {
                    var Da = Ba++;
                    Fa.push(Oa.get(Da * 2) - c / D.bitmapFill.width);
                    Fa.push(Oa.get(Da * 2 + 1) - d / D.bitmapFill.height);
                  }
                }
                var Ha = Fa.get_length() != Oa.get_length();
                var Ga = D.normalizeUVT(Fa, Ha);
                var Ia = Ga.max;
                Fa = Ga.uvt;
                va = Ia > 1 ? D.createTempPatternCanvas(D.bitmapFill, D.bitmapRepeat, D.bounds.width | 0, D.bounds.height | 0) : D.createTempPatternCanvas(D.bitmapFill, D.bitmapRepeat, D.bitmapFill.width, D.bitmapFill.height);
              }
              for (var Ea = 0, Ma = wa.get_length(), La, Na, ye, Pa, Ra, Sa, $a, Va, Xa, jb, Ta, Ua, Wa, Ya, Za, cb, eb, wb, hb, bb, Hc, fb, lb, mb, Ub, tb, pb, sb; Ea < Ma;) {
                La = Ea;
                Na = Ea + 1;
                ye = Ea + 2;
                Pa = wa.get(La) * 2;
                Ra = wa.get(La) * 2 + 1;
                Sa = wa.get(Na) * 2;
                $a = wa.get(Na) * 2 + 1;
                Va = wa.get(ye) * 2;
                Xa = wa.get(ye) * 2 + 1;
                jb = Oa.get(Pa) - c;
                Ta = Oa.get(Ra) - d;
                Ua = Oa.get(Sa) - c;
                Wa = Oa.get($a) - d;
                Ya = Oa.get(Va) - c;
                Za = Oa.get(Xa) - d;
                switch (ta.buffer.o[ta.oPos + 3]) {
                  case 0:
                    if ((Ua - jb) * (Za - Ta) - (Wa - Ta) * (Ya - jb) < 0) {
                      Ea += 3;
                      continue;
                    }
                    break;
                  case 2:
                    if (!((Ua - jb) * (Za - Ta) - (Wa - Ta) * (Ya - jb) < 0)) {
                      Ea += 3;
                      continue;
                    }
                }
                if (ib) {
                  D.context.beginPath();
                  D.context.moveTo(jb, Ta);
                  D.context.lineTo(Ua, Wa);
                  D.context.lineTo(Ya, Za);
                  D.context.closePath();
                  if (!D.hitTesting) {
                    D.context.fill(D.windingRule);
                  }
                  Ea += 3;
                } else {
                  cb = Fa.get(Pa) * va.width;
                  wb = Fa.get(Sa) * va.width;
                  bb = Fa.get(Va) * va.width;
                  eb = Fa.get(Ra) * va.height;
                  hb = Fa.get($a) * va.height;
                  Hc = Fa.get(Xa) * va.height;
                  fb = cb * (Hc - hb) - wb * Hc + bb * hb + (wb - bb) * eb;
                  if (fb == 0) {
                    Ea += 3;
                    D.context.restore();
                  } else {
                    D.context.save();
                    D.context.beginPath();
                    D.context.moveTo(jb, Ta);
                    D.context.lineTo(Ua, Wa);
                    D.context.lineTo(Ya, Za);
                    D.context.closePath();
                    D.context.clip();
                    lb = -(eb * (Ya - Ua) - hb * Ya + Hc * Ua + (hb - Hc) * jb) / fb;
                    mb = (hb * Za + eb * (Wa - Za) - Hc * Wa + (Hc - hb) * Ta) / fb;
                    Ub = (cb * (Ya - Ua) - wb * Ya + bb * Ua + (wb - bb) * jb) / fb;
                    tb = -(wb * Za + cb * (Wa - Za) - bb * Wa + (bb - wb) * Ta) / fb;
                    pb = (cb * (Hc * Ua - hb * Ya) + eb * (wb * Ya - bb * Ua) + (bb * hb - wb * Hc) * jb) / fb;
                    sb = (cb * (Hc * Wa - hb * Za) + eb * (wb * Za - bb * Wa) + (bb * hb - wb * Hc) * Ta) / fb;
                    D.context.transform(lb, mb, Ub, tb, pb, sb);
                    D.context.drawImage(va, 0, 0, va.width, va.height);
                    D.context.restore();
                    Ea += 3;
                  }
                }
              }
              break;
            case 14:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.LINE_BITMAP_STYLE;
              var nb = m;
              if (b && D.hasStroke) {
                D.closePath(true);
              }
              D.context.moveTo(e - c, f - d);
              D.context.strokeStyle = D.createBitmapFill(nb.buffer.o[nb.oPos], nb.buffer.b[nb.bPos], nb.buffer.b[nb.bPos + 1]);
              D.hasStroke = true;
              break;
            case 15:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.LINE_GRADIENT_STYLE;
              var db = m;
              if (b && D.hasStroke) {
                D.closePath(true);
              }
              D.context.moveTo(e - c, f - d);
              D.context.strokeStyle = D.createGradientPattern(db.buffer.o[db.oPos], db.buffer.ii[db.iiPos], db.buffer.ff[db.ffPos], db.buffer.ii[db.iiPos + 1], db.buffer.o[db.oPos + 1], db.buffer.o[db.oPos + 2], db.buffer.o[db.oPos + 3], db.buffer.f[db.fPos]);
              D.setSmoothing(true);
              D.hasStroke = true;
              break;
            case 16:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.LINE_STYLE;
              var Ja = m;
              if (b && D.hasStroke) {
                D.closePath(true);
              }
              D.context.moveTo(e - c, f - d);
              if (Ja.buffer.o[Ja.oPos] == null) {
                D.hasStroke = false;
              } else {
                D.context.lineWidth = Ja.buffer.o[Ja.oPos] > 0 ? Ja.buffer.o[Ja.oPos] : 1;
                var ub = Ja.buffer.o[Ja.oPos + 3] == null ? "round" : (Ja.buffer.o[Ja.oPos + 3] == null ? "null" : Tp.toString(Ja.buffer.o[Ja.oPos + 3])).toLowerCase();
                D.context.lineJoin = ub;
                var Db = Ja.buffer.o[Ja.oPos + 2] == null ? "round" : Ja.buffer.o[Ja.oPos + 2] == 0 ? "butt" : (Ja.buffer.o[Ja.oPos + 2] == null ? "null" : Sp.toString(Ja.buffer.o[Ja.oPos + 2])).toLowerCase();
                D.context.lineCap = Db;
                D.context.miterLimit = Ja.buffer.f[Ja.fPos + 1];
                if (Ja.buffer.f[Ja.fPos] == 1) {
                  var Mc = w.hex(Ja.buffer.i[Ja.iPos] & 16777215, 6);
                  D.context.strokeStyle = "#" + Mc;
                } else {
                  F = (Ja.buffer.i[Ja.iPos] & 16711680) >>> 16;
                  B = (Ja.buffer.i[Ja.iPos] & 65280) >>> 8;
                  v = Ja.buffer.i[Ja.iPos] & 255;
                  D.context.strokeStyle = "rgba(" + F + ", " + B + ", " + v + ", " + Ja.buffer.f[Ja.fPos] + ")";
                }
                D.setSmoothing(true);
                D.hasStroke = true;
              }
              break;
            case 17:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.LINE_TO;
              var ob = m;
              p = true;
              D.context.lineTo(ob.buffer.f[ob.fPos] - c, ob.buffer.f[ob.fPos + 1] - d);
              e = ob.buffer.f[ob.fPos];
              f = ob.buffer.f[ob.fPos + 1];
              if (e == g && f == n) {
                k = true;
              }
              break;
            case 18:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.MOVE_TO;
              var gb = m;
              D.context.moveTo(gb.buffer.f[gb.fPos] - c, gb.buffer.f[gb.fPos + 1] - d);
              e = gb.buffer.f[gb.fPos];
              f = gb.buffer.f[gb.fPos + 1];
              if (h && gb.buffer.f[gb.fPos] != g && gb.buffer.f[gb.fPos + 1] != n) {
                k = true;
              }
              g = gb.buffer.f[gb.fPos];
              n = gb.buffer.f[gb.fPos + 1];
              h = true;
              break;
            case 21:
              D.windingRule = "evenodd";
              break;
            case 22:
              D.windingRule = "nonzero";
              break;
            default:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = z;
          }
        }
        if (u != null) {
          kb.__pool.release(u);
        }
        if (x != null) {
          kb.__pool.release(x);
        }
        m.destroy();
        if (p) {
          if (b && D.hasStroke) {
            if (D.hasFill) {
              if (e != g || f != n) {
                D.context.lineTo(g - c, n - d);
                k = true;
              }
              if (k) {
                D.closePath(true);
              }
            } else if (k && e == g && f == n) {
              D.closePath(true);
            }
            if (!D.hitTesting) {
              D.context.stroke();
            }
          }
          if (!b && (!!D.hasFill || D.bitmapFill != null)) {
            D.context.translate(-D.bounds.x, -D.bounds.y);
            if (D.pendingMatrix != null) {
              D.context.transform(D.pendingMatrix.a, D.pendingMatrix.b, D.pendingMatrix.c, D.pendingMatrix.d, D.pendingMatrix.tx, D.pendingMatrix.ty);
              if (!D.hitTesting) {
                D.context.fill(D.windingRule);
              }
              D.context.transform(D.inversePendingMatrix.a, D.inversePendingMatrix.b, D.inversePendingMatrix.c, D.inversePendingMatrix.d, D.inversePendingMatrix.tx, D.inversePendingMatrix.ty);
            } else if (!D.hitTesting) {
              D.context.fill(D.windingRule);
            }
            D.context.translate(D.bounds.x, D.bounds.y);
            D.context.closePath();
          }
        }
      };
      D.render = function (a, b) {
        a.__update(b.__worldTransform, b.__pixelRatio);
        if (a.__softwareDirty) {
          D.hitTesting = false;
          D.graphics = a;
          D.allowSmoothing = b.__allowSmoothing;
          D.worldAlpha = b.__getAlpha(a.__owner.__worldAlpha);
          D.bounds = a.__bounds;
          var c = a.__width;
          var d = a.__height;
          if (!a.__visible || a.__commands.get_length() == 0 || D.bounds == null || c < 1 || d < 1) {
            a.__canvas = null;
            a.__context = null;
            a.__bitmap = null;
          } else {
            if (a.__canvas == null) {
              a.__canvas = window.document.createElement("canvas");
              a.__context = a.__canvas.getContext("2d");
            }
            D.context = a.__context;
            var e = a.__renderTransform;
            var f = a.__canvas;
            var k = b.__pixelRatio;
            var g = c * k | 0;
            var n = d * k | 0;
            b.__setBlendModeContext(D.context, 10);
            if (b.__isDOM) {
              if (f.width == g && f.height == n) {
                D.context.clearRect(0, 0, g, n);
              } else {
                f.width = g;
                f.height = n;
                f.style.width = c + "px";
                f.style.height = d + "px";
              }
              c = a.__renderTransform;
              D.context.setTransform(c.a * k, c.b * k, c.c * k, c.d * k, c.tx * k, c.ty * k);
            } else {
              if (f.width == g && f.height == n) {
                D.context.closePath();
                D.context.setTransform(1, 0, 0, 1, 0, 0);
                D.context.clearRect(0, 0, g, n);
              } else {
                f.width = c;
                f.height = d;
              }
              D.context.setTransform(e.a, e.b, e.c, e.d, e.tx, e.ty);
            }
            D.fillCommands.clear();
            D.strokeCommands.clear();
            D.hasFill = false;
            D.hasStroke = false;
            D.bitmapFill = null;
            k = D.bitmapRepeat = false;
            d = c = 0;
            D.windingRule = "evenodd";
            e = new cg(a.__commands);
            f = 0;
            for (g = a.__commands.types; f < g.length;) {
              n = g[f];
              ++f;
              switch (n._hx_index) {
                case 0:
                case 1:
                case 2:
                case 3:
                  D.endFill();
                  D.endStroke();
                  if (n == pa.BEGIN_BITMAP_FILL) {
                    switch (e.prev._hx_index) {
                      case 0:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 1:
                        e.iPos += 1;
                        e.fPos += 1;
                        break;
                      case 2:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 3:
                        e.oPos += 1;
                        break;
                      case 4:
                        e.fPos += 6;
                        break;
                      case 5:
                        e.fPos += 4;
                        break;
                      case 6:
                        e.fPos += 3;
                        break;
                      case 7:
                        e.fPos += 4;
                        break;
                      case 8:
                        e.oPos += 3;
                        break;
                      case 9:
                        e.fPos += 4;
                        break;
                      case 10:
                        e.fPos += 5;
                        e.oPos += 1;
                        break;
                      case 12:
                        e.oPos += 4;
                        break;
                      case 14:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 15:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 16:
                        e.oPos += 4;
                        e.iPos += 1;
                        e.fPos += 2;
                        e.bPos += 1;
                        break;
                      case 17:
                        e.fPos += 2;
                        break;
                      case 18:
                        e.fPos += 2;
                        break;
                      case 19:
                        e.oPos += 1;
                        break;
                      case 20:
                        e.oPos += 1;
                    }
                    e.prev = pa.BEGIN_BITMAP_FILL;
                    n = e;
                    D.fillCommands.beginBitmapFill(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.b[n.bPos], n.buffer.b[n.bPos + 1]);
                    D.strokeCommands.beginBitmapFill(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.b[n.bPos], n.buffer.b[n.bPos + 1]);
                  } else if (n == pa.BEGIN_GRADIENT_FILL) {
                    switch (e.prev._hx_index) {
                      case 0:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 1:
                        e.iPos += 1;
                        e.fPos += 1;
                        break;
                      case 2:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 3:
                        e.oPos += 1;
                        break;
                      case 4:
                        e.fPos += 6;
                        break;
                      case 5:
                        e.fPos += 4;
                        break;
                      case 6:
                        e.fPos += 3;
                        break;
                      case 7:
                        e.fPos += 4;
                        break;
                      case 8:
                        e.oPos += 3;
                        break;
                      case 9:
                        e.fPos += 4;
                        break;
                      case 10:
                        e.fPos += 5;
                        e.oPos += 1;
                        break;
                      case 12:
                        e.oPos += 4;
                        break;
                      case 14:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 15:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 16:
                        e.oPos += 4;
                        e.iPos += 1;
                        e.fPos += 2;
                        e.bPos += 1;
                        break;
                      case 17:
                        e.fPos += 2;
                        break;
                      case 18:
                        e.fPos += 2;
                        break;
                      case 19:
                        e.oPos += 1;
                        break;
                      case 20:
                        e.oPos += 1;
                    }
                    e.prev = pa.BEGIN_GRADIENT_FILL;
                    n = e;
                    D.fillCommands.beginGradientFill(n.buffer.o[n.oPos], n.buffer.ii[n.iiPos], n.buffer.ff[n.ffPos], n.buffer.ii[n.iiPos + 1], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos]);
                    D.strokeCommands.beginGradientFill(n.buffer.o[n.oPos], n.buffer.ii[n.iiPos], n.buffer.ff[n.ffPos], n.buffer.ii[n.iiPos + 1], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos]);
                  } else if (n == pa.BEGIN_SHADER_FILL) {
                    switch (e.prev._hx_index) {
                      case 0:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 1:
                        e.iPos += 1;
                        e.fPos += 1;
                        break;
                      case 2:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 3:
                        e.oPos += 1;
                        break;
                      case 4:
                        e.fPos += 6;
                        break;
                      case 5:
                        e.fPos += 4;
                        break;
                      case 6:
                        e.fPos += 3;
                        break;
                      case 7:
                        e.fPos += 4;
                        break;
                      case 8:
                        e.oPos += 3;
                        break;
                      case 9:
                        e.fPos += 4;
                        break;
                      case 10:
                        e.fPos += 5;
                        e.oPos += 1;
                        break;
                      case 12:
                        e.oPos += 4;
                        break;
                      case 14:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 15:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 16:
                        e.oPos += 4;
                        e.iPos += 1;
                        e.fPos += 2;
                        e.bPos += 1;
                        break;
                      case 17:
                        e.fPos += 2;
                        break;
                      case 18:
                        e.fPos += 2;
                        break;
                      case 19:
                        e.oPos += 1;
                        break;
                      case 20:
                        e.oPos += 1;
                    }
                    e.prev = pa.BEGIN_SHADER_FILL;
                    n = e;
                    D.fillCommands.beginShaderFill(n.buffer.o[n.oPos]);
                    D.strokeCommands.beginShaderFill(n.buffer.o[n.oPos]);
                  } else {
                    switch (e.prev._hx_index) {
                      case 0:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 1:
                        e.iPos += 1;
                        e.fPos += 1;
                        break;
                      case 2:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 3:
                        e.oPos += 1;
                        break;
                      case 4:
                        e.fPos += 6;
                        break;
                      case 5:
                        e.fPos += 4;
                        break;
                      case 6:
                        e.fPos += 3;
                        break;
                      case 7:
                        e.fPos += 4;
                        break;
                      case 8:
                        e.oPos += 3;
                        break;
                      case 9:
                        e.fPos += 4;
                        break;
                      case 10:
                        e.fPos += 5;
                        e.oPos += 1;
                        break;
                      case 12:
                        e.oPos += 4;
                        break;
                      case 14:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 15:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 16:
                        e.oPos += 4;
                        e.iPos += 1;
                        e.fPos += 2;
                        e.bPos += 1;
                        break;
                      case 17:
                        e.fPos += 2;
                        break;
                      case 18:
                        e.fPos += 2;
                        break;
                      case 19:
                        e.oPos += 1;
                        break;
                      case 20:
                        e.oPos += 1;
                    }
                    e.prev = pa.BEGIN_FILL;
                    n = e;
                    D.fillCommands.beginFill(n.buffer.i[n.iPos], n.buffer.f[n.fPos]);
                    D.strokeCommands.beginFill(n.buffer.i[n.iPos], n.buffer.f[n.fPos]);
                  }
                  break;
                case 4:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.CUBIC_CURVE_TO;
                  n = e;
                  D.fillCommands.cubicCurveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.f[n.fPos + 5]);
                  if (k) {
                    D.strokeCommands.cubicCurveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.f[n.fPos + 5]);
                  } else {
                    c = n.buffer.f[n.fPos + 4];
                    d = n.buffer.f[n.fPos + 5];
                  }
                  break;
                case 5:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.CURVE_TO;
                  n = e;
                  D.fillCommands.curveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
                  if (k) {
                    D.strokeCommands.curveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
                  } else {
                    c = n.buffer.f[n.fPos + 2];
                    d = n.buffer.f[n.fPos + 3];
                  }
                  break;
                case 6:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.DRAW_CIRCLE;
                  n = e;
                  D.fillCommands.drawCircle(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2]);
                  if (k) {
                    D.strokeCommands.drawCircle(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2]);
                  }
                  break;
                case 7:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.DRAW_ELLIPSE;
                  n = e;
                  D.fillCommands.drawEllipse(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
                  if (k) {
                    D.strokeCommands.drawEllipse(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
                  }
                  break;
                case 8:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.DRAW_QUADS;
                  n = e;
                  D.fillCommands.drawQuads(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2]);
                  break;
                case 9:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.DRAW_RECT;
                  n = e;
                  D.fillCommands.drawRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
                  if (k) {
                    D.strokeCommands.drawRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
                  }
                  break;
                case 10:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.DRAW_ROUND_RECT;
                  n = e;
                  D.fillCommands.drawRoundRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.o[n.oPos]);
                  if (k) {
                    D.strokeCommands.drawRoundRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.o[n.oPos]);
                  }
                  break;
                case 12:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.DRAW_TRIANGLES;
                  n = e;
                  D.fillCommands.drawTriangles(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3]);
                  break;
                case 13:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.END_FILL;
                  D.endFill();
                  D.endStroke();
                  k = D.hasFill = false;
                  D.bitmapFill = null;
                  d = c = 0;
                  break;
                case 14:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.LINE_BITMAP_STYLE;
                  n = e;
                  if (!k && (c != 0 || d != 0)) {
                    D.strokeCommands.moveTo(c, d);
                    d = c = 0;
                  }
                  k = true;
                  D.strokeCommands.lineBitmapStyle(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.b[n.bPos], n.buffer.b[n.bPos + 1]);
                  break;
                case 15:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.LINE_GRADIENT_STYLE;
                  n = e;
                  if (!k && (c != 0 || d != 0)) {
                    D.strokeCommands.moveTo(c, d);
                    d = c = 0;
                  }
                  k = true;
                  D.strokeCommands.lineGradientStyle(n.buffer.o[n.oPos], n.buffer.ii[n.iiPos], n.buffer.ff[n.ffPos], n.buffer.ii[n.iiPos + 1], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos]);
                  break;
                case 16:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.LINE_STYLE;
                  n = e;
                  if (!k && n.buffer.o[n.oPos] != null && (c != 0 || d != 0)) {
                    D.strokeCommands.moveTo(c, d);
                    d = c = 0;
                  }
                  k = n.buffer.o[n.oPos] != null;
                  D.strokeCommands.lineStyle(n.buffer.o[n.oPos], n.buffer.i[n.iPos], n.buffer.f[n.fPos], n.buffer.b[n.bPos], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos + 1]);
                  break;
                case 17:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.LINE_TO;
                  n = e;
                  D.fillCommands.lineTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
                  if (k) {
                    D.strokeCommands.lineTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
                  } else {
                    c = n.buffer.f[n.fPos];
                    d = n.buffer.f[n.fPos + 1];
                  }
                  break;
                case 18:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.MOVE_TO;
                  n = e;
                  D.fillCommands.moveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
                  if (k) {
                    D.strokeCommands.moveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
                  } else {
                    c = n.buffer.f[n.fPos];
                    d = n.buffer.f[n.fPos + 1];
                  }
                  break;
                case 19:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.OVERRIDE_BLEND_MODE;
                  n = e;
                  b.__setBlendModeContext(D.context, n.buffer.o[n.oPos]);
                  break;
                case 21:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.WINDING_EVEN_ODD;
                  D.fillCommands.windingEvenOdd();
                  D.windingRule = "evenodd";
                  break;
                case 22:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.WINDING_NON_ZERO;
                  D.fillCommands.windingNonZero();
                  D.windingRule = "nonzero";
                  break;
                default:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = n;
              }
            }
            if (D.fillCommands.get_length() > 0) {
              D.endFill();
            }
            if (D.strokeCommands.get_length() > 0) {
              D.endStroke();
            }
            e.destroy();
            a.__bitmap = T.fromCanvas(a.__canvas);
          }
          a.__softwareDirty = false;
          a.set___dirty(false);
        }
      };
      D.renderMask = function (a, b) {
        if (a.__commands.get_length() != 0) {
          D.context = b.context;
          b = new cg(a.__commands);
          var c = 0;
          for (a = a.__commands.types; c < a.length;) {
            var d = a[c];
            ++c;
            switch (d._hx_index) {
              case 4:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.CUBIC_CURVE_TO;
                d = b;
                D.context.bezierCurveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2] - 0, d.buffer.f[d.fPos + 3] - 0, d.buffer.f[d.fPos + 4] - 0, d.buffer.f[d.fPos + 5] - 0);
                break;
              case 5:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.CURVE_TO;
                d = b;
                D.context.quadraticCurveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2] - 0, d.buffer.f[d.fPos + 3] - 0);
                break;
              case 6:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.DRAW_CIRCLE;
                d = b;
                D.context.arc(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], 0, Math.PI * 2, true);
                break;
              case 7:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.DRAW_ELLIPSE;
                var e = b;
                d = e.buffer.f[e.fPos];
                var f = e.buffer.f[e.fPos + 1];
                var k = e.buffer.f[e.fPos + 2];
                var g = e.buffer.f[e.fPos + 3];
                d -= 0;
                f -= 0;
                e = k / 2 * 0.5522848;
                var n = g / 2 * 0.5522848;
                var h = d + k;
                var p = f + g;
                k = d + k / 2;
                g = f + g / 2;
                D.context.moveTo(d, g);
                D.context.bezierCurveTo(d, g - n, k - e, f, k, f);
                D.context.bezierCurveTo(k + e, f, h, g - n, h, g);
                D.context.bezierCurveTo(h, g + n, k + e, p, k, p);
                D.context.bezierCurveTo(k - e, p, d, g + n, d, g);
                break;
              case 9:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.DRAW_RECT;
                d = b;
                D.context.beginPath();
                D.context.rect(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3]);
                D.context.closePath();
                break;
              case 10:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.DRAW_ROUND_RECT;
                d = b;
                D.drawRoundRect(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3], d.buffer.f[d.fPos + 4], d.buffer.o[d.oPos]);
                break;
              case 17:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.LINE_TO;
                d = b;
                D.context.lineTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0);
                break;
              case 18:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.MOVE_TO;
                d = b;
                D.context.moveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0);
                break;
              default:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = d;
            }
          }
          b.destroy();
        }
      };
      D.setSmoothing = function (a) {
        if (!D.allowSmoothing) {
          a = false;
        }
        if (D.context.imageSmoothingEnabled != a) {
          D.context.imageSmoothingEnabled = a;
        }
      };
      function mm() {}
      h["openfl.display._internal.CanvasSimpleButton"] = mm;
      mm.__name__ = "openfl.display._internal.CanvasSimpleButton";
      mm.renderDrawable = function (a, b) {
        if (!!a.__renderable && !(a.__worldAlpha <= 0) && a.__currentState != null) {
          b.__pushMaskObject(a);
          b.__renderDrawable(a.__currentState);
          b.__popMaskObject(a);
          b.__renderEvent(a);
        }
      };
      mm.renderDrawableMask = function (a, b) {
        b.__renderDrawableMask(a.__currentState);
      };
      function ca() {}
      h["openfl.display._internal.CanvasTextField"] = ca;
      ca.__name__ = "openfl.display._internal.CanvasTextField";
      ca.renderDrawable = function (a, b) {
        if (b.__isDOM && !a.__renderedOnCanvasWhileOnDOM) {
          a.__renderedOnCanvasWhileOnDOM = true;
          if (a.get_type() == 1) {
            a.replaceText(0, a.__text.length, a.__text);
          }
          if (a.__isHTML) {
            a.__updateText(Wa.parse(a.__text, a.get_multiline(), a.__styleSheet, a.__textFormat, a.__textEngine.textFormatRanges));
          }
          a.__dirty = true;
          a.__layoutDirty = true;
          if (!a.__renderDirty) {
            a.__renderDirty = true;
            a.__setParentRenderDirty();
          }
        }
        if (a.get_mask() == null || a.get_mask().get_width() > 0 && a.get_mask().get_height() > 0) {
          b.__updateCacheBitmap(a, a.__dirty);
          if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
            var c = a.__textEngine;
            var d = !c.background && !c.border;
            var e = d ? c.textBounds : c.bounds;
            var f = a.__graphics;
            var k = 0;
            if (a.__dirty) {
              a.__updateLayout();
              if (f.__bounds == null) {
                f.__bounds = new ea();
              }
              if (a.get_text().length == 0) {
                var g = c.bounds.width - 4;
                var n = a.get_defaultTextFormat().align;
                k = n == 3 ? 0 : n == 4 ? g : g / 2;
                switch (n) {
                  case 0:
                    k += a.get_defaultTextFormat().leftMargin / 2;
                    k -= a.get_defaultTextFormat().rightMargin / 2;
                    k += a.get_defaultTextFormat().indent / 2;
                    k += a.get_defaultTextFormat().blockIndent / 2;
                    break;
                  case 2:
                    k += a.get_defaultTextFormat().leftMargin;
                    k += a.get_defaultTextFormat().indent;
                    k += a.get_defaultTextFormat().blockIndent;
                    break;
                  case 3:
                    k += a.get_defaultTextFormat().leftMargin;
                    k += a.get_defaultTextFormat().indent;
                    k += a.get_defaultTextFormat().blockIndent;
                    break;
                  case 4:
                    k -= a.get_defaultTextFormat().rightMargin;
                }
                if (d) {
                  e.y = c.bounds.y;
                  e.x = k;
                }
              }
              f.__bounds.copyFrom(e);
            }
            n = b.__pixelRatio;
            f.__update(b.__worldTransform, n);
            if (a.__dirty || f.__softwareDirty) {
              g = Math.round(f.__width * n);
              var h = Math.round(f.__height * n);
              if ((c.text == null || c.text == "") && !c.background && !c.border && !c.__hasFocus && (c.type != 1 || !c.selectable) || (c.width <= 0 || c.height <= 0) && c.autoSize != 2) {
                a.__graphics.__canvas = null;
                a.__graphics.__context = null;
                a.__graphics.__bitmap = null;
                a.__graphics.__softwareDirty = false;
                a.__graphics.set___dirty(false);
                a.__dirty = false;
              } else {
                if (a.__graphics.__canvas == null) {
                  a.__graphics.__canvas = window.document.createElement("canvas");
                  a.__graphics.__context = a.__graphics.__canvas.getContext("2d");
                }
                ca.context = f.__context;
                f.__canvas.width = g;
                f.__canvas.height = h;
                if (b.__isDOM) {
                  f.__canvas.style.width = Math.round(g / n) + "px";
                  f.__canvas.style.height = Math.round(h / n) + "px";
                }
                var p = Aa.__pool.get();
                p.scale(n, n);
                p.concat(f.__renderTransform);
                ca.context.setTransform(p.a, p.b, p.c, p.d, p.tx, p.ty);
                Aa.__pool.release(p);
                if (ca.clearRect == null) {
                  ca.clearRect = typeof navigator !== "undefined" && typeof navigator.isCocoonJS !== "undefined";
                }
                if (ca.clearRect) {
                  ca.context.clearRect(0, 0, f.__canvas.width, f.__canvas.height);
                }
                if (c.text != null && c.text != "" || c.__hasFocus) {
                  g = c.text;
                  f.__context.imageSmoothingEnabled = !b.__allowSmoothing || c.antiAliasType == 0 && c.sharpness == 400 ? false : true;
                  if (c.border || c.background) {
                    ca.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                    if (c.background) {
                      var m = w.hex(c.backgroundColor & 16777215, 6);
                      ca.context.fillStyle = "#" + m;
                      ca.context.fill();
                    }
                    if (c.border) {
                      ca.context.lineWidth = 1;
                      m = w.hex(c.borderColor & 16777215, 6);
                      ca.context.strokeStyle = "#" + m;
                      ca.context.stroke();
                    }
                  }
                  ca.context.textBaseline = "alphabetic";
                  ca.context.textAlign = "start";
                  h = -a.get_scrollH();
                  var l = d = 0;
                  for (m = a.get_scrollV() - 1; l < m;) {
                    var t = l++;
                    d -= c.lineHeights.get(t);
                  }
                  var q;
                  for (k = c.layoutGroups.iterator(); k.hasNext();) {
                    var u = k.next();
                    if (!(u.lineIndex < a.get_scrollV() - 1)) {
                      if (u.lineIndex > c.get_bottomScrollV() - 1) {
                        break;
                      }
                      p = "#" + w.hex(u.format.color & 16777215, 6);
                      ca.context.font = ic.getFont(u.format);
                      ca.context.fillStyle = p;
                      ca.context.fillText(g.substring(u.startIndex, u.endIndex), u.offsetX + h - e.x, u.offsetY + u.ascent + d - e.y);
                      if (a.__caretIndex > -1 && c.selectable) {
                        if (a.__selectionIndex == a.__caretIndex) {
                          if (a.__showCursor && u.startIndex <= a.__caretIndex && u.endIndex >= a.__caretIndex) {
                            l = q = 0;
                            for (m = a.__caretIndex - u.startIndex; l < m;) {
                              t = l++;
                              if (u.positions.length <= t) {
                                break;
                              }
                              q += u.positions[t];
                            }
                            l = 0;
                            m = a.get_scrollV();
                            for (t = u.lineIndex + 1; m < t;) {
                              var x = m++;
                              l += c.lineHeights.get(x - 1);
                            }
                            ca.context.beginPath();
                            m = w.hex(u.format.color & 16777215, 6);
                            ca.context.strokeStyle = "#" + m;
                            ca.context.moveTo(u.offsetX + q - a.get_scrollH() - e.x, l + 2 - e.y);
                            ca.context.lineWidth = 1;
                            ca.context.lineTo(u.offsetX + q - a.get_scrollH() - e.x, l + ic.getFormatHeight(a.get_defaultTextFormat()) - 1 - e.y);
                            ca.context.stroke();
                            ca.context.closePath();
                          }
                        } else if (u.startIndex <= a.__caretIndex && u.endIndex >= a.__caretIndex || u.startIndex <= a.__selectionIndex && u.endIndex >= a.__selectionIndex || u.startIndex > a.__caretIndex && u.endIndex < a.__selectionIndex || u.startIndex > a.__selectionIndex && u.endIndex < a.__caretIndex) {
                          q = Math.min(a.__selectionIndex, a.__caretIndex) | 0;
                          l = Math.max(a.__selectionIndex, a.__caretIndex) | 0;
                          if (u.startIndex > q) {
                            q = u.startIndex;
                          }
                          if (u.endIndex < l) {
                            l = u.endIndex;
                          }
                          t = a.getCharBoundaries(q);
                          if (l >= u.endIndex) {
                            m = a.getCharBoundaries(u.endIndex - 1);
                            if (m != null) {
                              m.x += m.width + 2;
                            }
                          } else {
                            m = a.getCharBoundaries(l);
                          }
                          if (t != null && m != null) {
                            ca.context.fillStyle = "#000000";
                            ca.context.fillRect(t.x + h - e.x, t.y + d, m.x - t.x, u.height);
                            ca.context.fillStyle = "#FFFFFF";
                            ca.context.fillText(g.substring(q, l), h + t.x - e.x, u.offsetY + u.ascent + d);
                          }
                        }
                      }
                      if (u.format.underline) {
                        ca.context.beginPath();
                        ca.context.strokeStyle = p;
                        ca.context.lineWidth = 1;
                        p = u.offsetX + h - e.x;
                        q = Math.ceil(u.offsetY + d + u.ascent - e.y) + Math.floor(u.ascent * 0.185) + 0.5;
                        ca.context.moveTo(p, q);
                        ca.context.lineTo(p + u.width, q);
                        ca.context.stroke();
                        ca.context.closePath();
                      }
                    }
                  }
                } else {
                  if (c.border || c.background) {
                    if (c.border) {
                      ca.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                    } else {
                      ca.context.rect(0, 0, e.width, e.height);
                    }
                    if (c.background) {
                      m = w.hex(c.backgroundColor & 16777215, 6);
                      ca.context.fillStyle = "#" + m;
                      ca.context.fill();
                    }
                    if (c.border) {
                      ca.context.lineWidth = 1;
                      ca.context.lineCap = "square";
                      m = w.hex(c.borderColor & 16777215, 6);
                      ca.context.strokeStyle = "#" + m;
                      ca.context.stroke();
                    }
                  }
                  if (a.__caretIndex > -1 && c.selectable && a.__showCursor) {
                    h = -a.get_scrollH() + (d ? 0 : k);
                    l = d = 0;
                    for (m = a.get_scrollV() - 1; l < m;) {
                      t = l++;
                      d += c.lineHeights.get(t);
                    }
                    ca.context.beginPath();
                    m = w.hex(a.get_defaultTextFormat().color & 16777215, 6);
                    ca.context.strokeStyle = "#" + m;
                    ca.context.moveTo(h + 2.5, d + 2.5);
                    ca.context.lineWidth = 1;
                    ca.context.lineTo(h + 2.5, d + ic.getFormatHeight(a.get_defaultTextFormat()) - 1);
                    ca.context.stroke();
                    ca.context.closePath();
                  }
                }
                f.__bitmap = T.fromCanvas(a.__graphics.__canvas);
                f.__bitmapScale = n;
                f.__visible = true;
                a.__dirty = false;
                f.__softwareDirty = false;
                f.set___dirty(false);
              }
            }
            d = false;
            if (a.__textEngine.antiAliasType == 0 && a.__textEngine.gridFitType == 1 && (d = b.context.imageSmoothingEnabled)) {
              b.context.imageSmoothingEnabled = false;
            }
            if ((a.opaqueBackground != null || a.__graphics != null) && a.__renderable && (e = b.__getAlpha(a.__worldAlpha), !(e <= 0) && (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0 && (b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), c = b.context, b.setTransform(a.__renderTransform, c), p = a.opaqueBackground, c.fillStyle = "rgb(" + (p >>> 16 & 255) + "," + (p >>> 8 & 255) + "," + (p & 255) + ")", c.fillRect(0, 0, a.get_width(), a.get_height()), b.__popMaskObject(a)), a.__graphics != null && a.__renderable && (e = b.__getAlpha(a.__worldAlpha), !(e <= 0) && (f = a.__graphics, f != null && (D.render(f, b), g = f.__width, h = f.__height, k = f.__canvas, k != null && f.__visible && g >= 1 && h >= 1 && (u = f.__worldTransform, c = b.context, n = a.__scrollRect, x = a.__worldScale9Grid, n == null || n.width > 0 && n.height > 0))))))) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              c.globalAlpha = e;
              if (x != null && u.b == 0 && u.c == 0) {
                n = b.__pixelRatio;
                p = Aa.__pool.get();
                p.translate(u.tx, u.ty);
                b.setTransform(p, c);
                Aa.__pool.release(p);
                e = f.__bounds;
                l = f.__renderTransform.a / f.__bitmapScale;
                var A = f.__renderTransform.d / f.__bitmapScale;
                m = l * u.a;
                t = A * u.d;
                f = Math.max(1, Math.round(x.x * l));
                u = Math.round(x.y * A);
                p = Math.max(1, Math.round((e.get_right() - x.get_right()) * l));
                q = Math.round((e.get_bottom() - x.get_bottom()) * A);
                l = Math.round(x.width * l);
                x = Math.round(x.height * A);
                A = Math.round(f / n);
                var y = Math.round(u / n);
                var z = Math.round(p / n);
                n = Math.round(q / n);
                m = e.width * m - A - z;
                e = e.height * t - y - n;
                b.applySmoothing(c, false);
                if (l != 0 && x != 0) {
                  c.drawImage(k, 0, 0, f, u, 0, 0, A, y);
                  c.drawImage(k, f, 0, l, u, A, 0, m, y);
                  c.drawImage(k, f + l, 0, p, u, A + m, 0, z, y);
                  c.drawImage(k, 0, u, f, x, 0, y, A, e);
                  c.drawImage(k, f, u, l, x, A, y, m, e);
                  c.drawImage(k, f + l, u, p, x, A + m, y, z, e);
                  c.drawImage(k, 0, u + x, f, q, 0, y + e, A, n);
                  c.drawImage(k, f, u + x, l, q, A, y + e, m, n);
                  c.drawImage(k, f + l, u + x, p, q, A + m, y + e, z, n);
                } else if (l == 0 && x != 0) {
                  f = A + m + z;
                  c.drawImage(k, 0, 0, g, u, 0, 0, f, y);
                  c.drawImage(k, 0, u, g, x, 0, y, f, e);
                  c.drawImage(k, 0, u + x, g, q, 0, y + e, f, n);
                } else if (x == 0 && l != 0) {
                  e = y + e + n;
                  c.drawImage(k, 0, 0, f, h, 0, 0, A, e);
                  c.drawImage(k, f, 0, l, h, A, 0, m, e);
                  c.drawImage(k, f + l, 0, p, h, A + m, 0, z, e);
                }
              } else {
                b.setTransform(u, c);
                c.drawImage(k, 0, 0, g, h);
              }
              b.__popMaskObject(a);
            }
            if (d) {
              b.context.imageSmoothingEnabled = true;
            }
          } else {
            a = a.__cacheBitmap;
            if (a.__renderable) {
              e = b.__getAlpha(a.__worldAlpha);
              if (e > 0 && a.__bitmapData != null && a.__bitmapData.__isValid && a.__bitmapData.readable) {
                c = b.context;
                b.__setBlendMode(a.__worldBlendMode);
                b.__pushMaskObject(a, false);
                Xa.convertToCanvas(a.__bitmapData.image);
                c.globalAlpha = e;
                n = a.__scrollRect;
                b.setTransform(a.__renderTransform, c);
                if (!b.__allowSmoothing || !a.smoothing) {
                  c.imageSmoothingEnabled = false;
                }
                if (n == null) {
                  c.drawImage(a.__bitmapData.image.get_src(), 0, 0, a.__bitmapData.image.width, a.__bitmapData.image.height);
                } else {
                  c.drawImage(a.__bitmapData.image.get_src(), n.x, n.y, n.width, n.height, n.x, n.y, n.width, n.height);
                }
                if (!b.__allowSmoothing || !a.smoothing) {
                  c.imageSmoothingEnabled = true;
                }
                b.__popMaskObject(a, false);
              }
            }
          }
        }
      };
      ca.renderDrawableMask = function (a, b) {
        Eh.renderDrawableMask(a, b);
      };
      function zg() {}
      h["openfl.display._internal.CanvasTilemap"] = zg;
      zg.__name__ = "openfl.display._internal.CanvasTilemap";
      zg.renderTileContainer = function (a, b, c, d, e, f, k, g, n, h, p, m) {
        var r = b.context;
        var l = b.__roundPixels;
        var t = Aa.__pool.get();
        var q = a.__tiles;
        var J;
        var u = null;
        var x = 0;
        for (a = a.__length; x < a;) {
          var w = x++;
          var A = q[w];
          t.setTo(1, 0, 0, 1, -A.get_originX(), -A.get_originY());
          t.concat(A.get_matrix());
          t.concat(c);
          if (l) {
            t.tx = Math.round(t.tx);
            t.ty = Math.round(t.ty);
          }
          var y = A.get_tileset() ?? d;
          w = A.get_alpha() * k;
          if ((J = A.get_visible()) && !(w <= 0)) {
            if (!f) {
              w = 1;
            }
            if (g) {
              u = A.__blendMode ?? n;
            }
            if (A.__length > 0) {
              zg.renderTileContainer(A, b, t, y, e, f, w, g, u, h, p, m);
            } else if (y != null) {
              J = A.get_id();
              if (J == -1) {
                A = A.__rect;
                if (A == null || A.width <= 0 || A.height <= 0) {
                  continue;
                }
              } else {
                A = y.__data[J];
                if (A == null) {
                  continue;
                }
                m.setTo(A.x, A.y, A.width, A.height);
                A = m;
              }
              y = y.__bitmapData;
              if (y != null && y.image != null) {
                if (y != h) {
                  if (y.image.buffer.__srcImage == null) {
                    Xa.convertToCanvas(y.image);
                  }
                  p = y.image.get_src();
                  h = y;
                }
                r.globalAlpha = w;
                if (g) {
                  b.__setBlendMode(u);
                }
                b.setTransform(t, r);
                r.drawImage(p, A.x, A.y, A.width, A.height, 0, 0, A.width, A.height);
              }
            }
          }
        }
        Aa.__pool.release(t);
      };
      zg.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(x = b.__getAlpha(a.__worldAlpha), x <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              A = b.context;
              b.setTransform(a.__renderTransform, A);
              var c = a.opaqueBackground;
              A.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")";
              A.fillRect(0, 0, a.get_width(), a.get_height());
              b.__popMaskObject(a);
            }
            if (a.__graphics != null && a.__renderable && (x = b.__getAlpha(a.__worldAlpha), !(x <= 0))) {
              var d = a.__graphics;
              if (d != null) {
                D.render(d, b);
                var e = d.__width;
                var f = d.__height;
                c = d.__canvas;
                if (c != null && d.__visible && e >= 1 && f >= 1) {
                  var k = d.__worldTransform;
                  A = b.context;
                  w = a.__scrollRect;
                  var g = a.__worldScale9Grid;
                  if (w == null || w.width > 0 && w.height > 0) {
                    b.__setBlendMode(a.__worldBlendMode);
                    b.__pushMaskObject(a);
                    A.globalAlpha = x;
                    if (g != null && k.b == 0 && k.c == 0) {
                      var n = b.__pixelRatio;
                      x = Aa.__pool.get();
                      x.translate(k.tx, k.ty);
                      b.setTransform(x, A);
                      Aa.__pool.release(x);
                      x = d.__bounds;
                      var h = d.__renderTransform.a / d.__bitmapScale;
                      var p = d.__renderTransform.d / d.__bitmapScale;
                      var m = h * k.a;
                      var l = p * k.d;
                      k = Math.max(1, Math.round(g.x * h));
                      d = Math.round(g.y * p);
                      w = Math.max(1, Math.round((x.get_right() - g.get_right()) * h));
                      var t = Math.round((x.get_bottom() - g.get_bottom()) * p);
                      h = Math.round(g.width * h);
                      g = Math.round(g.height * p);
                      p = Math.round(k / n);
                      var q = Math.round(d / n);
                      var u = Math.round(w / n);
                      n = Math.round(t / n);
                      m = x.width * m - p - u;
                      x = x.height * l - q - n;
                      b.applySmoothing(A, false);
                      if (h != 0 && g != 0) {
                        A.drawImage(c, 0, 0, k, d, 0, 0, p, q);
                        A.drawImage(c, k, 0, h, d, p, 0, m, q);
                        A.drawImage(c, k + h, 0, w, d, p + m, 0, u, q);
                        A.drawImage(c, 0, d, k, g, 0, q, p, x);
                        A.drawImage(c, k, d, h, g, p, q, m, x);
                        A.drawImage(c, k + h, d, w, g, p + m, q, u, x);
                        A.drawImage(c, 0, d + g, k, t, 0, q + x, p, n);
                        A.drawImage(c, k, d + g, h, t, p, q + x, m, n);
                        A.drawImage(c, k + h, d + g, w, t, p + m, q + x, u, n);
                      } else if (h == 0 && g != 0) {
                        f = p + m + u;
                        A.drawImage(c, 0, 0, e, d, 0, 0, f, q);
                        A.drawImage(c, 0, d, e, g, 0, q, f, x);
                        A.drawImage(c, 0, d + g, e, t, 0, q + x, f, n);
                      } else if (g == 0 && h != 0) {
                        e = q + x + n;
                        A.drawImage(c, 0, 0, k, f, 0, 0, p, e);
                        A.drawImage(c, k, 0, h, f, p, 0, m, e);
                        A.drawImage(c, k + h, 0, w, f, p + m, 0, u, e);
                      }
                    } else {
                      b.setTransform(k, A);
                      A.drawImage(c, 0, 0, e, f);
                    }
                    b.__popMaskObject(a);
                  }
                }
              }
            }
          }
          if (a.__renderable && a.__group.__tiles.length != 0) {
            x = b.__getAlpha(a.__worldAlpha);
            if (!(x <= 0)) {
              A = b.context;
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              c = ea.__pool.get();
              c.setTo(0, 0, a.__width, a.__height);
              b.__pushMaskRect(c, a.__renderTransform);
              if (!b.__allowSmoothing || !a.smoothing) {
                A.imageSmoothingEnabled = false;
              }
              zg.renderTileContainer(a.__group, b, a.__renderTransform, a.__tileset, b.__allowSmoothing && a.smoothing, a.tileAlphaEnabled, x, a.tileBlendModeEnabled, a.__worldBlendMode, null, null, c);
              if (!b.__allowSmoothing || !a.smoothing) {
                A.imageSmoothingEnabled = true;
              }
              b.__popMaskRect();
              b.__popMaskObject(a);
              ea.__pool.release(c);
            }
          }
        } else {
          c = a.__cacheBitmap;
          if (c.__renderable) {
            var x = b.__getAlpha(c.__worldAlpha);
            if (x > 0 && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
              var A = b.context;
              b.__setBlendMode(c.__worldBlendMode);
              b.__pushMaskObject(c, false);
              Xa.convertToCanvas(c.__bitmapData.image);
              A.globalAlpha = x;
              var w = c.__scrollRect;
              b.setTransform(c.__renderTransform, A);
              if (!b.__allowSmoothing || !c.smoothing) {
                A.imageSmoothingEnabled = false;
              }
              if (w == null) {
                A.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height);
              } else {
                A.drawImage(c.__bitmapData.image.get_src(), w.x, w.y, w.width, w.height, w.x, w.y, w.width, w.height);
              }
              if (!b.__allowSmoothing || !c.smoothing) {
                A.imageSmoothingEnabled = true;
              }
              b.__popMaskObject(c, false);
            }
          }
        }
        b.__renderEvent(a);
      };
      zg.renderDrawableMask = function (a, b) {};
      function Fh() {}
      h["openfl.display._internal.CanvasVideo"] = Fh;
      Fh.__name__ = "openfl.display._internal.CanvasVideo";
      Fh.render = function (a, b) {
        if (a.__renderable && a.__stream != null) {
          var c = b.__getAlpha(a.__worldAlpha);
          if (!(c <= 0)) {
            var d = b.context;
            if (a.__stream.__video != null) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              d.globalAlpha = c;
              c = a.__scrollRect;
              var e = a.smoothing;
              b.setTransform(a.__worldTransform, d);
              if (!e) {
                d.imageSmoothingEnabled = false;
              }
              if (c == null) {
                d.drawImage(a.__stream.__video, 0, 0, a.get_width(), a.get_height());
              } else {
                d.drawImage(a.__stream.__video, c.x, c.y, c.width, c.height, c.x, c.y, c.width, c.height);
              }
              if (!e) {
                d.imageSmoothingEnabled = true;
              }
              b.__popMaskObject(a);
            }
          }
        }
      };
      Fh.renderDrawable = function (a, b) {
        Fh.render(a, b);
        b.__renderEvent(a);
      };
      Fh.renderDrawableMask = function (a, b) {};
      function Ve() {}
      h["openfl.display._internal.Context3DBitmap"] = Ve;
      Ve.__name__ = "openfl.display._internal.Context3DBitmap";
      Ve.render = function (a, b) {
        if (a.__renderable && !(a.__worldAlpha <= 0) && a.__bitmapData != null && a.__bitmapData.__isValid) {
          var c = b.__context3D;
          b.__setBlendMode(a.__worldBlendMode);
          b.__pushMaskObject(a);
          var d = b.__initDisplayShader(a.__worldShader);
          b.setShader(d);
          b.applyBitmapData(a.__bitmapData, b.__allowSmoothing && (a.smoothing || b.__upscaled));
          b.applyMatrix(b.__getMatrix(a.__renderTransform, a.pixelSnapping));
          b.applyAlpha(a.__worldAlpha);
          b.applyColorTransform(a.__worldColorTransform);
          b.updateShader();
          var e = a.__bitmapData.getVertexBuffer(c);
          if (d.__position != null) {
            c.setVertexBufferAt(d.__position.index, e, 0, 3);
          }
          if (d.__textureCoord != null) {
            c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
          }
          d = a.__bitmapData.getIndexBuffer(c);
          c.drawTriangles(d);
          b.__clearShader();
          b.__popMaskObject(a);
        }
      };
      Ve.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__bitmapData != null && a.__bitmapData.image != null) {
          a.__imageVersion = a.__bitmapData.image.version;
        }
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(a.__worldAlpha <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              var c = b.__context3D;
              var d = ea.__pool.get();
              d.setTo(0, 0, a.get_width(), a.get_height());
              b.__pushMaskRect(d, a.__renderTransform);
              var e = a.opaqueBackground;
              c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
              b.__popMaskRect();
              b.__popMaskObject(a);
              ea.__pool.release(d);
            }
            if (a.__graphics != null) {
              dg.render(a, b);
            }
          }
          Ve.render(a, b);
        } else {
          Ve.render(a.__cacheBitmap, b);
        }
        b.__renderEvent(a);
      };
      Ve.renderDrawableMask = function (a, b) {
        Ve.renderMask(a, b);
      };
      Ve.renderMask = function (a, b) {
        if (a.__bitmapData != null && a.__bitmapData.__isValid) {
          var c = b.__context3D;
          var d = b.__maskShader;
          b.setShader(d);
          b.applyBitmapData(Gh.opaqueBitmapData, true);
          b.applyMatrix(b.__getMatrix(a.__renderTransform, a.pixelSnapping));
          b.updateShader();
          var e = a.__bitmapData.getVertexBuffer(c);
          if (d.__position != null) {
            c.setVertexBufferAt(d.__position.index, e, 0, 3);
          }
          if (d.__textureCoord != null) {
            c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
          }
          a = a.__bitmapData.getIndexBuffer(c);
          c.drawTriangles(a);
          b.__clearShader();
        }
      };
      function tm() {}
      h["openfl.display._internal.Context3DBitmapData"] = tm;
      tm.__name__ = "openfl.display._internal.Context3DBitmapData";
      tm.renderDrawable = function (a, b) {
        var c = b.__context3D;
        b.__setBlendMode(10);
        var d = b.__defaultDisplayShader;
        b.setShader(d);
        b.applyBitmapData(a, b.__upscaled);
        b.applyMatrix(b.__getMatrix(a.__worldTransform, 1));
        b.applyAlpha(a.__worldAlpha);
        b.applyColorTransform(a.__worldColorTransform);
        b.updateShader();
        var e = a.getVertexBuffer(c);
        if (d.__position != null) {
          c.setVertexBufferAt(d.__position.index, e, 0, 3);
        }
        if (d.__textureCoord != null) {
          c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
        }
        a = a.getIndexBuffer(c);
        c.drawTriangles(a);
        b.__clearShader();
      };
      tm.renderDrawableMask = function (a, b) {
        var c = b.__context3D;
        var d = b.__maskShader;
        b.setShader(d);
        b.applyBitmapData(a, b.__upscaled);
        b.applyMatrix(b.__getMatrix(a.__worldTransform, 1));
        b.updateShader();
        var e = a.getVertexBuffer(c);
        if (d.__position != null) {
          c.setVertexBufferAt(d.__position.index, e, 0, 3);
        }
        if (d.__textureCoord != null) {
          c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
        }
        a = a.getIndexBuffer(c);
        c.drawTriangles(a);
        b.__clearShader();
      };
      function Tj(a, b, c, d) {
        this.context3D = a;
        this.elementType = b;
        this.dataPerVertex = d;
        this.vertexCount = this.indexCount = 0;
        this.resize(c);
      }
      h["openfl.display._internal.Context3DBuffer"] = Tj;
      Tj.__name__ = "openfl.display._internal.Context3DBuffer";
      Tj.prototype = {
        flushVertexBufferData: function () {
          if (this.vertexBufferData.length > this.vertexCount) {
            this.vertexCount = this.vertexBufferData.length;
            this.vertexBuffer = this.context3D.createVertexBuffer(this.vertexCount, this.dataPerVertex, 0);
          }
          this.vertexBuffer.uploadFromTypedArray(cj.toArrayBufferView(this.vertexBufferData));
        },
        resize: function (a, b) {
          if (b == null) {
            b = -1;
          }
          this.elementCount = a;
          if (b == -1) {
            b = this.dataPerVertex;
          }
          if (b != this.dataPerVertex) {
            this.vertexBuffer = null;
            this.vertexCount = 0;
            this.dataPerVertex = b;
          }
          var c = 0;
          switch (this.elementType._hx_index) {
            case 0:
              c = a * 4;
              break;
            case 1:
              c = a * 3;
              break;
            case 2:
              c = a * 3;
          }
          b *= c;
          if (this.vertexBufferData == null) {
            var d = c = null;
            var e = null;
            var f = null;
            var k = null;
            this.vertexBufferData = b = b != null ? new Float32Array(b) : c != null ? new Float32Array(c) : d != null ? new Float32Array(d.__array) : e != null ? new Float32Array(e) : f != null ? k == null ? new Float32Array(f, 0) : new Float32Array(f, 0, k) : null;
          } else if (b > this.vertexBufferData.length) {
            a = this.vertexBufferData;
            k = f = e = d = c = null;
            this.vertexBufferData = b = b != null ? new Float32Array(b) : c != null ? new Float32Array(c) : d != null ? new Float32Array(d.__array) : e != null ? new Float32Array(e) : f != null ? k == null ? new Float32Array(f, 0) : new Float32Array(f, 0, k) : null;
            this.vertexBufferData.set(a);
          }
        },
        __class__: Tj
      };
      var Am = x["openfl.display._internal.Context3DElementType"] = {
        __ename__: "openfl.display._internal.Context3DElementType",
        __constructs__: null,
        QUADS: {
          _hx_name: "QUADS",
          _hx_index: 0,
          __enum__: "openfl.display._internal.Context3DElementType",
          toString: p
        },
        TRIANGLES: {
          _hx_name: "TRIANGLES",
          _hx_index: 1,
          __enum__: "openfl.display._internal.Context3DElementType",
          toString: p
        },
        TRIANGLE_INDICES: {
          _hx_name: "TRIANGLE_INDICES",
          _hx_index: 2,
          __enum__: "openfl.display._internal.Context3DElementType",
          toString: p
        }
      };
      Am.__constructs__ = [Am.QUADS, Am.TRIANGLES, Am.TRIANGLE_INDICES];
      function Hh() {}
      h["openfl.display._internal.Context3DDisplayObject"] = Hh;
      Hh.__name__ = "openfl.display._internal.Context3DDisplayObject";
      Hh.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap != null && !a.__isCacheBitmapRender) {
          Ve.render(a.__cacheBitmap, b);
        } else if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(a.__worldAlpha <= 0)) {
          if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
            b.__setBlendMode(a.__worldBlendMode);
            b.__pushMaskObject(a);
            var c = b.__context3D;
            var d = ea.__pool.get();
            d.setTo(0, 0, a.get_width(), a.get_height());
            b.__pushMaskRect(d, a.__renderTransform);
            var e = a.opaqueBackground;
            c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
            b.__popMaskRect();
            b.__popMaskObject(a);
            ea.__pool.release(d);
          }
          if (a.__graphics != null) {
            dg.render(a, b);
          }
        }
        b.__renderEvent(a);
      };
      Hh.renderDrawableMask = function (a, b) {
        if (a.__graphics != null) {
          dg.renderMask(a, b);
        }
      };
      function um() {}
      h["openfl.display._internal.Context3DDisplayObjectContainer"] = um;
      um.__name__ = "openfl.display._internal.Context3DDisplayObjectContainer";
      um.renderDrawable = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        if (a.__renderable && !(a.__worldAlpha <= 0) && (Hh.renderDrawable(a, b), a.__cacheBitmap == null || a.__isCacheBitmapRender)) {
          if (a.__children.length > 0) {
            b.__pushMaskObject(a);
            if (b.__stage != null) {
              c = 0;
              for (d = a.__children; c < d.length;) {
                var e = d[c];
                ++c;
                b.__renderDrawable(e);
                e.__renderDirty = false;
              }
              a.__renderDirty = false;
            } else {
              c = 0;
              d = a.__children;
              while (c < d.length) {
                e = d[c];
                ++c;
                b.__renderDrawable(e);
              }
            }
          }
          if (a.__children.length > 0) {
            b.__popMaskObject(a);
          }
        }
      };
      um.renderDrawableMask = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        if (a.__graphics != null) {
          dg.renderMask(a, b);
        }
        c = 0;
        for (a = a.__children; c < a.length;) {
          d = a[c];
          ++c;
          b.__renderDrawableMask(d);
        }
      };
      function oc() {}
      h["openfl.display._internal.Context3DGraphics"] = oc;
      oc.__name__ = "openfl.display._internal.Context3DGraphics";
      oc.buildBuffer = function (a, b) {
        var c;
        var d = c = 0;
        var e = 0;
        var f = new cg(a.__commands);
        b = b.__context3D;
        var k = ea.__pool.get();
        var g = Aa.__pool.get();
        var n = null;
        for (var h = 0, p = a.__commands.types; h < p.length;) {
          var m = p[h];
          ++h;
          switch (m._hx_index) {
            case 0:
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = pa.BEGIN_BITMAP_FILL;
              n = f;
              n = n.buffer.o[n.oPos];
              break;
            case 1:
              n = null;
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = m;
              break;
            case 3:
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = pa.BEGIN_SHADER_FILL;
              n = f;
              m = n.buffer.o[n.oPos];
              n = null;
              if (m != null) {
                for (var l = 0, t = m.inputCount; l < t;) {
                  var q = l++;
                  if (m.inputRefs[q].name == "bitmap") {
                    n = m.inputs[q];
                    break;
                  }
                }
              }
              break;
            case 8:
              if (n != null) {
                switch (f.prev._hx_index) {
                  case 0:
                    f.oPos += 2;
                    f.bPos += 2;
                    break;
                  case 1:
                    f.iPos += 1;
                    f.fPos += 1;
                    break;
                  case 2:
                    f.oPos += 4;
                    f.iiPos += 2;
                    f.ffPos += 1;
                    f.fPos += 1;
                    break;
                  case 3:
                    f.oPos += 1;
                    break;
                  case 4:
                    f.fPos += 6;
                    break;
                  case 5:
                    f.fPos += 4;
                    break;
                  case 6:
                    f.fPos += 3;
                    break;
                  case 7:
                    f.fPos += 4;
                    break;
                  case 8:
                    f.oPos += 3;
                    break;
                  case 9:
                    f.fPos += 4;
                    break;
                  case 10:
                    f.fPos += 5;
                    f.oPos += 1;
                    break;
                  case 12:
                    f.oPos += 4;
                    break;
                  case 14:
                    f.oPos += 2;
                    f.bPos += 2;
                    break;
                  case 15:
                    f.oPos += 4;
                    f.iiPos += 2;
                    f.ffPos += 1;
                    f.fPos += 1;
                    break;
                  case 16:
                    f.oPos += 4;
                    f.iPos += 1;
                    f.fPos += 2;
                    f.bPos += 1;
                    break;
                  case 17:
                    f.fPos += 2;
                    break;
                  case 18:
                    f.fPos += 2;
                    break;
                  case 19:
                    f.oPos += 1;
                    break;
                  case 20:
                    f.oPos += 1;
                }
                f.prev = pa.DRAW_QUADS;
                t = f;
                m = t.buffer.o[t.oPos];
                l = t.buffer.o[t.oPos + 1];
                t = t.buffer.o[t.oPos + 2];
                q = l != null;
                var u = false;
                var x = false;
                var A = q ? l.get_length() : Math.floor(m.get_length() / 4);
                if (A == 0) {
                  return;
                }
                if (t != null) {
                  if (t.get_length() >= A * 6) {
                    x = u = true;
                  } else if (t.get_length() >= A * 4) {
                    u = true;
                  } else if (t.get_length() >= A * 2) {
                    x = true;
                  }
                }
                if (a.__quadBuffer == null) {
                  a.__quadBuffer = new Tj(b, Am.QUADS, A, 4);
                } else {
                  a.__quadBuffer.resize(c + A, 4);
                }
                var w;
                for (var y, z, C, H, D, Ka, F, B, G, v, K, ha, la, M = a.__quadBuffer.vertexBufferData, ya = n.width, Qa = n.height, N = 0, ma = A; N < ma;) {
                  C = N++;
                  w = (c + C) * 16;
                  y = q ? l.get(C) * 4 : C * 4;
                  if (!(y < 0)) {
                    k.setTo(m.get(y), m.get(y + 1), m.get(y + 2), m.get(y + 3));
                    y = k.width;
                    z = k.height;
                    if (!(y <= 0) && !(z <= 0)) {
                      if (u && x) {
                        C *= 6;
                        g.setTo(t.get(C), t.get(C + 1), t.get(C + 2), t.get(C + 3), t.get(C + 4), t.get(C + 5));
                      } else if (u) {
                        C *= 4;
                        g.setTo(t.get(C), t.get(C + 1), t.get(C + 2), t.get(C + 3), k.x, k.y);
                      } else if (x) {
                        C *= 2;
                        g.tx = t.get(C);
                        g.ty = t.get(C + 1);
                      } else {
                        g.tx = k.x;
                        g.ty = k.y;
                      }
                      C = k.x / ya;
                      H = k.y / Qa;
                      D = k.get_right() / ya;
                      Ka = k.get_bottom() / Qa;
                      F = g.a * 0 + g.c * 0 + g.tx;
                      B = g.b * 0 + g.d * 0 + g.ty;
                      G = y * g.a + g.c * 0 + g.tx;
                      v = y * g.b + g.d * 0 + g.ty;
                      K = g.a * 0 + z * g.c + g.tx;
                      ha = g.b * 0 + z * g.d + g.ty;
                      la = y * g.a + z * g.c + g.tx;
                      y = y * g.b + z * g.d + g.ty;
                      M[w] = F;
                      M[w + 1] = B;
                      M[w + 2] = C;
                      M[w + 3] = H;
                      M[w + 4] = G;
                      M[w + 4 + 1] = v;
                      M[w + 4 + 2] = D;
                      M[w + 4 + 3] = H;
                      M[w + 8] = K;
                      M[w + 8 + 1] = ha;
                      M[w + 8 + 2] = C;
                      M[w + 8 + 3] = Ka;
                      M[w + 12] = la;
                      M[w + 12 + 1] = y;
                      M[w + 12 + 2] = D;
                      M[w + 12 + 3] = Ka;
                    }
                  }
                }
                c += A;
              }
              break;
            case 12:
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = pa.DRAW_TRIANGLES;
              t = f;
              m = t.buffer.o[t.oPos];
              l = t.buffer.o[t.oPos + 1];
              t = t.buffer.o[t.oPos + 2];
              q = l != null;
              A = Math.floor(m.get_length() / 2);
              u = q ? l.get_length() : A;
              w = (A = (x = t != null) && t.get_length() >= A * 3) ? 4 : 2;
              M = A ? 3 : 2;
              ya = w + 2;
              Qa = A ? e : d;
              oc.resizeVertexBuffer(a, A, Qa + u * ya);
              N = A ? a.__vertexBufferDataUVT : a.__vertexBufferData;
              z = 0;
              for (C = u; z < C;) {
                H = z++;
                ma = Qa + H * ya;
                y = q ? l.get(H) * 2 : H * 2;
                H = q ? l.get(H) * M : H * M;
                if (A) {
                  D = t.get(H + 2);
                  N[ma] = m.get(y) / D;
                  N[ma + 1] = m.get(y + 1) / D;
                  N[ma + 2] = 0;
                  N[ma + 3] = 1 / D;
                } else {
                  N[ma] = m.get(y);
                  N[ma + 1] = m.get(y + 1);
                }
                N[ma + w] = x ? t.get(H) : 0;
                N[ma + w + 1] = x ? t.get(H + 1) : 0;
              }
              if (A) {
                e += u * ya;
              } else {
                d += u * ya;
              }
              break;
            case 13:
              n = null;
              break;
            default:
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = m;
          }
        }
        if (c > 0) {
          a.__quadBuffer.flushVertexBufferData();
        }
        if (d > 0) {
          c = a.__vertexBuffer;
          if (c == null || d > a.__vertexBufferCount) {
            c = b.createVertexBuffer(d, 4, 0);
            a.__vertexBuffer = c;
            a.__vertexBufferCount = d;
          }
          c.uploadFromTypedArray(cj.toArrayBufferView(a.__vertexBufferData));
        }
        if (e > 0) {
          c = a.__vertexBufferUVT;
          if (c == null || e > a.__vertexBufferCountUVT) {
            c = b.createVertexBuffer(e, 6, 0);
            a.__vertexBufferUVT = c;
            a.__vertexBufferCountUVT = e;
          }
          c.uploadFromTypedArray(cj.toArrayBufferView(a.__vertexBufferDataUVT));
        }
        ea.__pool.release(k);
        Aa.__pool.release(g);
      };
      oc.isCompatible = function (a) {
        if (a.__owner.__worldScale9Grid != null) {
          return false;
        }
        var b = new cg(a.__commands);
        var c = false;
        var d = false;
        var e = false;
        var f = 0;
        for (a = a.__commands.types; f < a.length;) {
          var k = a[f];
          ++f;
          switch (k._hx_index) {
            case 0:
              d = true;
              e = c = false;
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 1:
              d = false;
              c = true;
              e = false;
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 3:
              c = d = false;
              e = true;
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 8:
              if (d || e) {
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = k;
              } else {
                b.destroy();
                return false;
              }
              break;
            case 9:
              if (c) {
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = k;
              } else {
                b.destroy();
                return false;
              }
              break;
            case 12:
              if (d || e) {
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = k;
              } else {
                b.destroy();
                return false;
              }
              break;
            case 13:
              e = c = d = false;
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 18:
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 19:
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            default:
              b.destroy();
              return false;
          }
        }
        b.destroy();
        return true;
      };
      oc.render = function (a, b) {
        if (a.__visible && a.__commands.get_length() != 0) {
          if (a.__bitmap != null && !a.__dirty || !oc.isCompatible(a)) {
            b.__softwareRenderer.__pixelRatio = b.__pixelRatio;
            var c = b.__softwareRenderer.__worldTransform;
            b.__softwareRenderer.__worldTransform = a.__owner.__drawableType == 7 ? Aa.__identity : b.__worldTransform;
            D.render(a, b.__softwareRenderer);
            b.__softwareRenderer.__worldTransform = c;
          } else {
            a.__bitmap = null;
            a.__update(b.__worldTransform, b.__pixelRatio);
            var d = a.__width;
            var e = a.__height;
            if (a.__bounds != null && d >= 1 && e >= 1) {
              if (a.__hardwareDirty || a.__quadBuffer == null && a.__vertexBuffer == null && a.__vertexBufferUVT == null) {
                oc.buildBuffer(a, b);
              }
              c = new cg(a.__commands);
              var f = b.__context3D;
              var k = Aa.__pool.get();
              for (var g = null, n = null, h = false, p = false, m = null, l = 0, t = 0, q = 0, u = 0, x = 0, A = a.__commands.types; x < A.length;) {
                d = A[x];
                ++x;
                switch (d._hx_index) {
                  case 0:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = pa.BEGIN_BITMAP_FILL;
                    p = c;
                    n = p.buffer.o[p.oPos];
                    h = p.buffer.b[p.bPos];
                    p = p.buffer.b[p.bPos + 1];
                    m = g = null;
                    break;
                  case 1:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = pa.BEGIN_FILL;
                    n = c;
                    m = (n.buffer.i[n.iPos] | 0) & 16777215 | (n.buffer.f[n.fPos] * 255 | 0) << 24;
                    n = g = null;
                    break;
                  case 3:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = pa.BEGIN_SHADER_FILL;
                    t = c;
                    g = t.buffer.o[t.oPos];
                    t = 0;
                    n = g == null || g.shader == null || g.shader.__bitmap == null ? null : g.shader.__bitmap.input;
                    m = null;
                    break;
                  case 8:
                    if (n != null) {
                      switch (c.prev._hx_index) {
                        case 0:
                          c.oPos += 2;
                          c.bPos += 2;
                          break;
                        case 1:
                          c.iPos += 1;
                          c.fPos += 1;
                          break;
                        case 2:
                          c.oPos += 4;
                          c.iiPos += 2;
                          c.ffPos += 1;
                          c.fPos += 1;
                          break;
                        case 3:
                          c.oPos += 1;
                          break;
                        case 4:
                          c.fPos += 6;
                          break;
                        case 5:
                          c.fPos += 4;
                          break;
                        case 6:
                          c.fPos += 3;
                          break;
                        case 7:
                          c.fPos += 4;
                          break;
                        case 8:
                          c.oPos += 3;
                          break;
                        case 9:
                          c.fPos += 4;
                          break;
                        case 10:
                          c.fPos += 5;
                          c.oPos += 1;
                          break;
                        case 12:
                          c.oPos += 4;
                          break;
                        case 14:
                          c.oPos += 2;
                          c.bPos += 2;
                          break;
                        case 15:
                          c.oPos += 4;
                          c.iiPos += 2;
                          c.ffPos += 1;
                          c.fPos += 1;
                          break;
                        case 16:
                          c.oPos += 4;
                          c.iPos += 1;
                          c.fPos += 2;
                          c.bPos += 1;
                          break;
                        case 17:
                          c.fPos += 2;
                          break;
                        case 18:
                          c.fPos += 2;
                          break;
                        case 19:
                          c.oPos += 1;
                          break;
                        case 20:
                          c.oPos += 1;
                      }
                      c.prev = pa.DRAW_QUADS;
                      var w = c;
                      d = w.buffer.o[w.oPos];
                      w = w.buffer.o[w.oPos + 1];
                      d = w != null ? w.get_length() : Math.floor(d.get_length() / 4);
                      var y = b.__getMatrix(a.__owner.__renderTransform, 1);
                      if (g == null || oc.maskRender) {
                        w = oc.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                        b.setShader(w);
                        b.applyMatrix(y);
                        b.applyBitmapData(n, p, h);
                        b.applyAlpha(a.__owner.__worldAlpha);
                        b.applyColorTransform(a.__owner.__worldColorTransform);
                        b.updateShader();
                      } else {
                        w = b.__initShaderBuffer(g);
                        b.__setShaderBuffer(g);
                        b.applyMatrix(y);
                        b.applyBitmapData(n, false, h);
                        b.applyAlpha(a.__owner.__worldAlpha);
                        b.applyColorTransform(a.__owner.__worldColorTransform);
                      }
                      for (y = l + d; l < y;) {
                        d = Math.min(y - l, f.__quadIndexBufferElements) | 0;
                        if (d <= 0) {
                          break;
                        }
                        if (g != null && !oc.maskRender) {
                          b.__updateShaderBuffer(t);
                        }
                        if (w.__position != null) {
                          f.setVertexBufferAt(w.__position.index, a.__quadBuffer.vertexBuffer, l * 16, 2);
                        }
                        if (w.__textureCoord != null) {
                          f.setVertexBufferAt(w.__textureCoord.index, a.__quadBuffer.vertexBuffer, l * 16 + 2, 2);
                        }
                        f.drawTriangles(f.__quadIndexBuffer, 0, d * 2);
                        t += d * 4;
                        l += d;
                      }
                      b.__clearShader();
                    }
                    break;
                  case 9:
                    if (m != null) {
                      switch (c.prev._hx_index) {
                        case 0:
                          c.oPos += 2;
                          c.bPos += 2;
                          break;
                        case 1:
                          c.iPos += 1;
                          c.fPos += 1;
                          break;
                        case 2:
                          c.oPos += 4;
                          c.iiPos += 2;
                          c.ffPos += 1;
                          c.fPos += 1;
                          break;
                        case 3:
                          c.oPos += 1;
                          break;
                        case 4:
                          c.fPos += 6;
                          break;
                        case 5:
                          c.fPos += 4;
                          break;
                        case 6:
                          c.fPos += 3;
                          break;
                        case 7:
                          c.fPos += 4;
                          break;
                        case 8:
                          c.oPos += 3;
                          break;
                        case 9:
                          c.fPos += 4;
                          break;
                        case 10:
                          c.fPos += 5;
                          c.oPos += 1;
                          break;
                        case 12:
                          c.oPos += 4;
                          break;
                        case 14:
                          c.oPos += 2;
                          c.bPos += 2;
                          break;
                        case 15:
                          c.oPos += 4;
                          c.iiPos += 2;
                          c.ffPos += 1;
                          c.fPos += 1;
                          break;
                        case 16:
                          c.oPos += 4;
                          c.iPos += 1;
                          c.fPos += 2;
                          c.bPos += 1;
                          break;
                        case 17:
                          c.fPos += 2;
                          break;
                        case 18:
                          c.fPos += 2;
                          break;
                        case 19:
                          c.oPos += 1;
                          break;
                        case 20:
                          c.oPos += 1;
                      }
                      c.prev = pa.DRAW_RECT;
                      var z = c;
                      w = z.buffer.f[z.fPos];
                      y = z.buffer.f[z.fPos + 1];
                      d = z.buffer.f[z.fPos + 2];
                      e = z.buffer.f[z.fPos + 3];
                      z = m;
                      oc.tempColorTransform.redOffset = z >>> 16 & 255;
                      oc.tempColorTransform.greenOffset = z >>> 8 & 255;
                      oc.tempColorTransform.blueOffset = z & 255;
                      oc.tempColorTransform.__combine(a.__owner.__worldColorTransform);
                      k.identity();
                      k.scale(d, e);
                      k.tx = w;
                      k.ty = y;
                      k.concat(a.__owner.__renderTransform);
                      d = oc.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                      b.setShader(d);
                      b.applyMatrix(b.__getMatrix(k, 1));
                      b.applyBitmapData(oc.blankBitmapData, true, h);
                      b.applyAlpha((z >>> 24 & 255) / 255 * a.__owner.__worldAlpha);
                      b.applyColorTransform(oc.tempColorTransform);
                      b.updateShader();
                      w = oc.blankBitmapData.getVertexBuffer(f);
                      if (d.__position != null) {
                        f.setVertexBufferAt(d.__position.index, w, 0, 3);
                      }
                      if (d.__textureCoord != null) {
                        f.setVertexBufferAt(d.__textureCoord.index, w, 3, 2);
                      }
                      d = oc.blankBitmapData.getIndexBuffer(f);
                      f.drawTriangles(d);
                      t += 4;
                      b.__clearShader();
                    }
                    break;
                  case 12:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = pa.DRAW_TRIANGLES;
                    e = c;
                    w = e.buffer.o[e.oPos + 1];
                    y = e.buffer.o[e.oPos + 2];
                    d = e.buffer.o[e.oPos + 3];
                    z = w != null;
                    e = Math.floor(e.buffer.o[e.oPos].get_length() / 2);
                    w = z ? w.get_length() : e;
                    z = (y = y != null && y.get_length() >= e * 3) ? 4 : 2;
                    e = z + 2;
                    var C = y ? a.__vertexBufferUVT : a.__vertexBuffer;
                    var H = y ? u : q;
                    var Ka = b.__getMatrix(a.__owner.__renderTransform, 1);
                    if (g == null || oc.maskRender) {
                      var F = oc.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                      b.setShader(F);
                      b.applyMatrix(Ka);
                      b.applyBitmapData(n, p, h);
                      b.applyAlpha(a.__owner.__worldAlpha);
                      b.applyColorTransform(a.__owner.__worldColorTransform);
                      b.updateShader();
                    } else {
                      F = b.__initShaderBuffer(g);
                      b.__setShaderBuffer(g);
                      b.applyMatrix(Ka);
                      b.applyBitmapData(n, false, h);
                      b.applyAlpha(1);
                      b.applyColorTransform(null);
                      b.__updateShaderBuffer(t);
                    }
                    if (F.__position != null) {
                      f.setVertexBufferAt(F.__position.index, C, H, y ? 4 : 2);
                    }
                    if (F.__textureCoord != null) {
                      f.setVertexBufferAt(F.__textureCoord.index, C, H + z, 2);
                    }
                    switch (d) {
                      case 0:
                        f.setCulling(0);
                        break;
                      case 1:
                        f.setCulling(3);
                        break;
                      case 2:
                        f.setCulling(1);
                    }
                    f.__drawTriangles(0, w);
                    t += w;
                    if (y) {
                      u += e * w;
                    } else {
                      q += e * w;
                    }
                    switch (d) {
                      case 1:
                      case 2:
                        f.setCulling(0);
                    }
                    b.__clearShader();
                    break;
                  case 13:
                    g = m = n = null;
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = d;
                    f.setCulling(3);
                    break;
                  case 18:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = pa.MOVE_TO;
                    break;
                  case 19:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = pa.OVERRIDE_BLEND_MODE;
                    d = c;
                    b.__setBlendMode(d.buffer.o[d.oPos]);
                    break;
                  default:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = d;
                }
              }
              Aa.__pool.release(k);
            }
            a.__hardwareDirty = false;
            a.set___dirty(false);
          }
        }
      };
      oc.renderMask = function (a, b) {
        oc.maskRender = true;
        oc.render(a, b);
        oc.maskRender = false;
      };
      oc.resizeVertexBuffer = function (a, b, c) {
        var d = b ? a.__vertexBufferDataUVT : a.__vertexBufferData;
        var e = null;
        if (d == null) {
          var f = e = null;
          var k = null;
          var g = null;
          var n = null;
          e = c = c != null ? new Float32Array(c) : e != null ? new Float32Array(e) : f != null ? new Float32Array(f.__array) : k != null ? new Float32Array(k) : g != null ? n == null ? new Float32Array(g, 0) : new Float32Array(g, 0, n) : null;
        } else if (c > d.length) {
          n = g = k = f = e = null;
          e = c = c != null ? new Float32Array(c) : e != null ? new Float32Array(e) : f != null ? new Float32Array(f.__array) : k != null ? new Float32Array(k) : g != null ? n == null ? new Float32Array(g, 0) : new Float32Array(g, 0, n) : null;
          e.set(d);
        }
        if (e != null) {
          if (b) {
            a.__vertexBufferDataUVT = e;
          } else {
            a.__vertexBufferData = e;
          }
        }
      };
      function Gh() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t\tif (color.a == 0.0) {\n\n\t\t\t\tdiscard;\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = color;\n\n\t\t\t}\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}";
        }
        ke.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.display._internal.Context3DMaskShader"] = Gh;
      Gh.__name__ = "openfl.display._internal.Context3DMaskShader";
      Gh.__super__ = ke;
      Gh.prototype = q(ke.prototype, {
        __class__: Gh
      });
      function dg() {}
      h["openfl.display._internal.Context3DShape"] = dg;
      dg.__name__ = "openfl.display._internal.Context3DShape";
      dg.render = function (a, b) {
        if (a.__renderable && !(a.__worldAlpha <= 0)) {
          var c = a.__graphics;
          if (c != null) {
            b.__setBlendMode(a.__worldBlendMode);
            b.__pushMaskObject(a);
            oc.render(c, b);
            if (c.__bitmap != null && c.__visible) {
              var d = b.__context3D;
              var e = b.__initDisplayShader(a.__worldShader);
              b.setShader(e);
              b.applyBitmapData(c.__bitmap, true);
              var f = Aa.__pool.get();
              f.scale(1 / c.__bitmapScale, 1 / c.__bitmapScale);
              f.concat(c.__worldTransform);
              b.applyMatrix(b.__getMatrix(f, 1));
              Aa.__pool.release(f);
              b.applyAlpha(a.__worldAlpha);
              b.applyColorTransform(a.__worldColorTransform);
              b.updateShader();
              f = c.__bitmap.getVertexBuffer(d);
              if (e.__position != null) {
                d.setVertexBufferAt(e.__position.index, f, 0, 3);
              }
              if (e.__textureCoord != null) {
                d.setVertexBufferAt(e.__textureCoord.index, f, 3, 2);
              }
              c = c.__bitmap.getIndexBuffer(d);
              d.drawTriangles(c);
              b.__clearShader();
            }
            b.__popMaskObject(a);
          }
        }
      };
      dg.renderMask = function (a, b) {
        var c = a.__graphics;
        if (c != null && (oc.renderMask(c, b), c.__bitmap != null)) {
          a = b.__context3D;
          var d = b.__maskShader;
          b.setShader(d);
          b.applyBitmapData(c.__bitmap, true);
          b.applyMatrix(b.__getMatrix(c.__worldTransform, 1));
          b.updateShader();
          var e = c.__bitmap.getVertexBuffer(a);
          if (d.__position != null) {
            a.setVertexBufferAt(d.__position.index, e, 0, 3);
          }
          if (d.__textureCoord != null) {
            a.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
          }
          c = c.__bitmap.getIndexBuffer(a);
          a.drawTriangles(c);
          b.__clearShader();
        }
      };
      function vm() {}
      h["openfl.display._internal.Context3DSimpleButton"] = vm;
      vm.__name__ = "openfl.display._internal.Context3DSimpleButton";
      vm.renderDrawable = function (a, b) {
        if (!!a.__renderable && !(a.__worldAlpha <= 0) && a.__currentState != null) {
          b.__pushMaskObject(a);
          b.__renderDrawable(a.__currentState);
          b.__popMaskObject(a);
          b.__renderEvent(a);
        }
      };
      vm.renderDrawableMask = function (a, b) {
        if (a.__currentState != null) {
          b.__renderDrawableMask(a.__currentState);
        }
      };
      function Bg() {}
      h["openfl.display._internal.Context3DTextField"] = Bg;
      Bg.__name__ = "openfl.display._internal.Context3DTextField";
      Bg.render = function (a, b) {
        b.__softwareRenderer.__pixelRatio = b.__pixelRatio;
        var c = b.__softwareRenderer;
        b = a.__textEngine;
        var d = !b.background && !b.border;
        var e = d ? b.textBounds : b.bounds;
        var f = a.__graphics;
        var k = 0;
        if (a.__dirty) {
          a.__updateLayout();
          if (f.__bounds == null) {
            f.__bounds = new ea();
          }
          if (a.get_text().length == 0) {
            k = b.bounds.width - 4;
            var g = a.get_defaultTextFormat().align;
            k = g == 3 ? 0 : g == 4 ? k : k / 2;
            switch (g) {
              case 0:
                k += a.get_defaultTextFormat().leftMargin / 2;
                k -= a.get_defaultTextFormat().rightMargin / 2;
                k += a.get_defaultTextFormat().indent / 2;
                k += a.get_defaultTextFormat().blockIndent / 2;
                break;
              case 2:
                k += a.get_defaultTextFormat().leftMargin;
                k += a.get_defaultTextFormat().indent;
                k += a.get_defaultTextFormat().blockIndent;
                break;
              case 3:
                k += a.get_defaultTextFormat().leftMargin;
                k += a.get_defaultTextFormat().indent;
                k += a.get_defaultTextFormat().blockIndent;
                break;
              case 4:
                k -= a.get_defaultTextFormat().rightMargin;
            }
            if (d) {
              e.y = b.bounds.y;
              e.x = k;
            }
          }
          f.__bounds.copyFrom(e);
        }
        g = c.__pixelRatio;
        f.__update(c.__worldTransform, g);
        if (a.__dirty || f.__softwareDirty) {
          var n = Math.round(f.__width * g);
          var h = Math.round(f.__height * g);
          if ((b.text == null || b.text == "") && !b.background && !b.border && !b.__hasFocus && (b.type != 1 || !b.selectable) || (b.width <= 0 || b.height <= 0) && b.autoSize != 2) {
            a.__graphics.__canvas = null;
            a.__graphics.__context = null;
            a.__graphics.__bitmap = null;
            a.__graphics.__softwareDirty = false;
            a.__graphics.set___dirty(false);
            a.__dirty = false;
          } else {
            if (a.__graphics.__canvas == null) {
              a.__graphics.__canvas = window.document.createElement("canvas");
              a.__graphics.__context = a.__graphics.__canvas.getContext("2d");
            }
            ca.context = f.__context;
            f.__canvas.width = n;
            f.__canvas.height = h;
            if (c.__isDOM) {
              f.__canvas.style.width = Math.round(n / g) + "px";
              f.__canvas.style.height = Math.round(h / g) + "px";
            }
            n = Aa.__pool.get();
            n.scale(g, g);
            n.concat(f.__renderTransform);
            ca.context.setTransform(n.a, n.b, n.c, n.d, n.tx, n.ty);
            Aa.__pool.release(n);
            if (ca.clearRect == null) {
              ca.clearRect = typeof navigator !== "undefined" && typeof navigator.isCocoonJS !== "undefined";
            }
            if (ca.clearRect) {
              ca.context.clearRect(0, 0, f.__canvas.width, f.__canvas.height);
            }
            if (b.text != null && b.text != "" || b.__hasFocus) {
              d = b.text;
              f.__context.imageSmoothingEnabled = !c.__allowSmoothing || b.antiAliasType == 0 && b.sharpness == 400 ? false : true;
              if (b.border || b.background) {
                ca.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                if (b.background) {
                  var p = w.hex(b.backgroundColor & 16777215, 6);
                  ca.context.fillStyle = "#" + p;
                  ca.context.fill();
                }
                if (b.border) {
                  ca.context.lineWidth = 1;
                  p = w.hex(b.borderColor & 16777215, 6);
                  ca.context.strokeStyle = "#" + p;
                  ca.context.stroke();
                }
              }
              ca.context.textBaseline = "alphabetic";
              ca.context.textAlign = "start";
              c = -a.get_scrollH();
              var m = k = 0;
              for (p = a.get_scrollV() - 1; m < p;) {
                var l = m++;
                k -= b.lineHeights.get(l);
              }
              var t;
              for (n = b.layoutGroups.iterator(); n.hasNext();) {
                h = n.next();
                if (!(h.lineIndex < a.get_scrollV() - 1)) {
                  if (h.lineIndex > b.get_bottomScrollV() - 1) {
                    break;
                  }
                  var q = "#" + w.hex(h.format.color & 16777215, 6);
                  ca.context.font = ic.getFont(h.format);
                  ca.context.fillStyle = q;
                  ca.context.fillText(d.substring(h.startIndex, h.endIndex), h.offsetX + c - e.x, h.offsetY + h.ascent + k - e.y);
                  if (a.__caretIndex > -1 && b.selectable) {
                    if (a.__selectionIndex == a.__caretIndex) {
                      if (a.__showCursor && h.startIndex <= a.__caretIndex && h.endIndex >= a.__caretIndex) {
                        m = t = 0;
                        for (p = a.__caretIndex - h.startIndex; m < p;) {
                          l = m++;
                          if (h.positions.length <= l) {
                            break;
                          }
                          t += h.positions[l];
                        }
                        m = 0;
                        p = a.get_scrollV();
                        for (l = h.lineIndex + 1; p < l;) {
                          var u = p++;
                          m += b.lineHeights.get(u - 1);
                        }
                        ca.context.beginPath();
                        p = w.hex(h.format.color & 16777215, 6);
                        ca.context.strokeStyle = "#" + p;
                        ca.context.moveTo(h.offsetX + t - a.get_scrollH() - e.x, m + 2 - e.y);
                        ca.context.lineWidth = 1;
                        ca.context.lineTo(h.offsetX + t - a.get_scrollH() - e.x, m + ic.getFormatHeight(a.get_defaultTextFormat()) - 1 - e.y);
                        ca.context.stroke();
                        ca.context.closePath();
                      }
                    } else if (h.startIndex <= a.__caretIndex && h.endIndex >= a.__caretIndex || h.startIndex <= a.__selectionIndex && h.endIndex >= a.__selectionIndex || h.startIndex > a.__caretIndex && h.endIndex < a.__selectionIndex || h.startIndex > a.__selectionIndex && h.endIndex < a.__caretIndex) {
                      t = Math.min(a.__selectionIndex, a.__caretIndex) | 0;
                      m = Math.max(a.__selectionIndex, a.__caretIndex) | 0;
                      if (h.startIndex > t) {
                        t = h.startIndex;
                      }
                      if (h.endIndex < m) {
                        m = h.endIndex;
                      }
                      l = a.getCharBoundaries(t);
                      if (m >= h.endIndex) {
                        p = a.getCharBoundaries(h.endIndex - 1);
                        if (p != null) {
                          p.x += p.width + 2;
                        }
                      } else {
                        p = a.getCharBoundaries(m);
                      }
                      if (l != null && p != null) {
                        ca.context.fillStyle = "#000000";
                        ca.context.fillRect(l.x + c - e.x, l.y + k, p.x - l.x, h.height);
                        ca.context.fillStyle = "#FFFFFF";
                        ca.context.fillText(d.substring(t, m), c + l.x - e.x, h.offsetY + h.ascent + k);
                      }
                    }
                  }
                  if (h.format.underline) {
                    ca.context.beginPath();
                    ca.context.strokeStyle = q;
                    ca.context.lineWidth = 1;
                    q = h.offsetX + c - e.x;
                    t = Math.ceil(h.offsetY + k + h.ascent - e.y) + Math.floor(h.ascent * 0.185) + 0.5;
                    ca.context.moveTo(q, t);
                    ca.context.lineTo(q + h.width, t);
                    ca.context.stroke();
                    ca.context.closePath();
                  }
                }
              }
            } else {
              if (b.border || b.background) {
                if (b.border) {
                  ca.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                } else {
                  ca.context.rect(0, 0, e.width, e.height);
                }
                if (b.background) {
                  p = w.hex(b.backgroundColor & 16777215, 6);
                  ca.context.fillStyle = "#" + p;
                  ca.context.fill();
                }
                if (b.border) {
                  ca.context.lineWidth = 1;
                  ca.context.lineCap = "square";
                  p = w.hex(b.borderColor & 16777215, 6);
                  ca.context.strokeStyle = "#" + p;
                  ca.context.stroke();
                }
              }
              if (a.__caretIndex > -1 && b.selectable && a.__showCursor) {
                c = -a.get_scrollH() + (d ? 0 : k);
                m = k = 0;
                for (p = a.get_scrollV() - 1; m < p;) {
                  l = m++;
                  k += b.lineHeights.get(l);
                }
                ca.context.beginPath();
                p = w.hex(a.get_defaultTextFormat().color & 16777215, 6);
                ca.context.strokeStyle = "#" + p;
                ca.context.moveTo(c + 2.5, k + 2.5);
                ca.context.lineWidth = 1;
                ca.context.lineTo(c + 2.5, k + ic.getFormatHeight(a.get_defaultTextFormat()) - 1);
                ca.context.stroke();
                ca.context.closePath();
              }
            }
            f.__bitmap = T.fromCanvas(a.__graphics.__canvas);
            f.__bitmapScale = g;
            f.__visible = true;
            a.__dirty = false;
            f.__softwareDirty = false;
            f.set___dirty(false);
          }
        }
        a.__graphics.__hardwareDirty = false;
      };
      Bg.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          Bg.render(a, b);
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(a.__worldAlpha <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              var c = b.__context3D;
              var d = ea.__pool.get();
              d.setTo(0, 0, a.get_width(), a.get_height());
              b.__pushMaskRect(d, a.__renderTransform);
              var e = a.opaqueBackground;
              c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
              b.__popMaskRect();
              b.__popMaskObject(a);
              ea.__pool.release(d);
            }
            if (a.__graphics != null) {
              dg.render(a, b);
            }
          }
        } else {
          Ve.render(a.__cacheBitmap, b);
        }
        b.__renderEvent(a);
      };
      Bg.renderDrawableMask = function (a, b) {
        Bg.renderMask(a, b);
        Hh.renderDrawableMask(a, b);
      };
      Bg.renderMask = function (a, b) {
        var c = b.__softwareRenderer;
        b = a.__textEngine;
        var d = !b.background && !b.border;
        var e = d ? b.textBounds : b.bounds;
        var f = a.__graphics;
        var k = 0;
        if (a.__dirty) {
          a.__updateLayout();
          if (f.__bounds == null) {
            f.__bounds = new ea();
          }
          if (a.get_text().length == 0) {
            k = b.bounds.width - 4;
            var g = a.get_defaultTextFormat().align;
            k = g == 3 ? 0 : g == 4 ? k : k / 2;
            switch (g) {
              case 0:
                k += a.get_defaultTextFormat().leftMargin / 2;
                k -= a.get_defaultTextFormat().rightMargin / 2;
                k += a.get_defaultTextFormat().indent / 2;
                k += a.get_defaultTextFormat().blockIndent / 2;
                break;
              case 2:
                k += a.get_defaultTextFormat().leftMargin;
                k += a.get_defaultTextFormat().indent;
                k += a.get_defaultTextFormat().blockIndent;
                break;
              case 3:
                k += a.get_defaultTextFormat().leftMargin;
                k += a.get_defaultTextFormat().indent;
                k += a.get_defaultTextFormat().blockIndent;
                break;
              case 4:
                k -= a.get_defaultTextFormat().rightMargin;
            }
            if (d) {
              e.y = b.bounds.y;
              e.x = k;
            }
          }
          f.__bounds.copyFrom(e);
        }
        g = c.__pixelRatio;
        f.__update(c.__worldTransform, g);
        if (a.__dirty || f.__softwareDirty) {
          var n = Math.round(f.__width * g);
          var h = Math.round(f.__height * g);
          if ((b.text == null || b.text == "") && !b.background && !b.border && !b.__hasFocus && (b.type != 1 || !b.selectable) || (b.width <= 0 || b.height <= 0) && b.autoSize != 2) {
            a.__graphics.__canvas = null;
            a.__graphics.__context = null;
            a.__graphics.__bitmap = null;
            a.__graphics.__softwareDirty = false;
            a.__graphics.set___dirty(false);
            a.__dirty = false;
          } else {
            if (a.__graphics.__canvas == null) {
              a.__graphics.__canvas = window.document.createElement("canvas");
              a.__graphics.__context = a.__graphics.__canvas.getContext("2d");
            }
            ca.context = f.__context;
            f.__canvas.width = n;
            f.__canvas.height = h;
            if (c.__isDOM) {
              f.__canvas.style.width = Math.round(n / g) + "px";
              f.__canvas.style.height = Math.round(h / g) + "px";
            }
            n = Aa.__pool.get();
            n.scale(g, g);
            n.concat(f.__renderTransform);
            ca.context.setTransform(n.a, n.b, n.c, n.d, n.tx, n.ty);
            Aa.__pool.release(n);
            if (ca.clearRect == null) {
              ca.clearRect = typeof navigator !== "undefined" && typeof navigator.isCocoonJS !== "undefined";
            }
            if (ca.clearRect) {
              ca.context.clearRect(0, 0, f.__canvas.width, f.__canvas.height);
            }
            if (b.text != null && b.text != "" || b.__hasFocus) {
              d = b.text;
              f.__context.imageSmoothingEnabled = !c.__allowSmoothing || b.antiAliasType == 0 && b.sharpness == 400 ? false : true;
              if (b.border || b.background) {
                ca.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                if (b.background) {
                  var p = w.hex(b.backgroundColor & 16777215, 6);
                  ca.context.fillStyle = "#" + p;
                  ca.context.fill();
                }
                if (b.border) {
                  ca.context.lineWidth = 1;
                  p = w.hex(b.borderColor & 16777215, 6);
                  ca.context.strokeStyle = "#" + p;
                  ca.context.stroke();
                }
              }
              ca.context.textBaseline = "alphabetic";
              ca.context.textAlign = "start";
              c = -a.get_scrollH();
              var m = k = 0;
              for (p = a.get_scrollV() - 1; m < p;) {
                var l = m++;
                k -= b.lineHeights.get(l);
              }
              var t;
              for (n = b.layoutGroups.iterator(); n.hasNext();) {
                h = n.next();
                if (!(h.lineIndex < a.get_scrollV() - 1)) {
                  if (h.lineIndex > b.get_bottomScrollV() - 1) {
                    break;
                  }
                  var q = "#" + w.hex(h.format.color & 16777215, 6);
                  ca.context.font = ic.getFont(h.format);
                  ca.context.fillStyle = q;
                  ca.context.fillText(d.substring(h.startIndex, h.endIndex), h.offsetX + c - e.x, h.offsetY + h.ascent + k - e.y);
                  if (a.__caretIndex > -1 && b.selectable) {
                    if (a.__selectionIndex == a.__caretIndex) {
                      if (a.__showCursor && h.startIndex <= a.__caretIndex && h.endIndex >= a.__caretIndex) {
                        m = t = 0;
                        for (p = a.__caretIndex - h.startIndex; m < p;) {
                          l = m++;
                          if (h.positions.length <= l) {
                            break;
                          }
                          t += h.positions[l];
                        }
                        m = 0;
                        p = a.get_scrollV();
                        for (l = h.lineIndex + 1; p < l;) {
                          var u = p++;
                          m += b.lineHeights.get(u - 1);
                        }
                        ca.context.beginPath();
                        p = w.hex(h.format.color & 16777215, 6);
                        ca.context.strokeStyle = "#" + p;
                        ca.context.moveTo(h.offsetX + t - a.get_scrollH() - e.x, m + 2 - e.y);
                        ca.context.lineWidth = 1;
                        ca.context.lineTo(h.offsetX + t - a.get_scrollH() - e.x, m + ic.getFormatHeight(a.get_defaultTextFormat()) - 1 - e.y);
                        ca.context.stroke();
                        ca.context.closePath();
                      }
                    } else if (h.startIndex <= a.__caretIndex && h.endIndex >= a.__caretIndex || h.startIndex <= a.__selectionIndex && h.endIndex >= a.__selectionIndex || h.startIndex > a.__caretIndex && h.endIndex < a.__selectionIndex || h.startIndex > a.__selectionIndex && h.endIndex < a.__caretIndex) {
                      t = Math.min(a.__selectionIndex, a.__caretIndex) | 0;
                      m = Math.max(a.__selectionIndex, a.__caretIndex) | 0;
                      if (h.startIndex > t) {
                        t = h.startIndex;
                      }
                      if (h.endIndex < m) {
                        m = h.endIndex;
                      }
                      l = a.getCharBoundaries(t);
                      if (m >= h.endIndex) {
                        p = a.getCharBoundaries(h.endIndex - 1);
                        if (p != null) {
                          p.x += p.width + 2;
                        }
                      } else {
                        p = a.getCharBoundaries(m);
                      }
                      if (l != null && p != null) {
                        ca.context.fillStyle = "#000000";
                        ca.context.fillRect(l.x + c - e.x, l.y + k, p.x - l.x, h.height);
                        ca.context.fillStyle = "#FFFFFF";
                        ca.context.fillText(d.substring(t, m), c + l.x - e.x, h.offsetY + h.ascent + k);
                      }
                    }
                  }
                  if (h.format.underline) {
                    ca.context.beginPath();
                    ca.context.strokeStyle = q;
                    ca.context.lineWidth = 1;
                    q = h.offsetX + c - e.x;
                    t = Math.ceil(h.offsetY + k + h.ascent - e.y) + Math.floor(h.ascent * 0.185) + 0.5;
                    ca.context.moveTo(q, t);
                    ca.context.lineTo(q + h.width, t);
                    ca.context.stroke();
                    ca.context.closePath();
                  }
                }
              }
            } else {
              if (b.border || b.background) {
                if (b.border) {
                  ca.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                } else {
                  ca.context.rect(0, 0, e.width, e.height);
                }
                if (b.background) {
                  p = w.hex(b.backgroundColor & 16777215, 6);
                  ca.context.fillStyle = "#" + p;
                  ca.context.fill();
                }
                if (b.border) {
                  ca.context.lineWidth = 1;
                  ca.context.lineCap = "square";
                  p = w.hex(b.borderColor & 16777215, 6);
                  ca.context.strokeStyle = "#" + p;
                  ca.context.stroke();
                }
              }
              if (a.__caretIndex > -1 && b.selectable && a.__showCursor) {
                c = -a.get_scrollH() + (d ? 0 : k);
                m = k = 0;
                for (p = a.get_scrollV() - 1; m < p;) {
                  l = m++;
                  k += b.lineHeights.get(l);
                }
                ca.context.beginPath();
                p = w.hex(a.get_defaultTextFormat().color & 16777215, 6);
                ca.context.strokeStyle = "#" + p;
                ca.context.moveTo(c + 2.5, k + 2.5);
                ca.context.lineWidth = 1;
                ca.context.lineTo(c + 2.5, k + ic.getFormatHeight(a.get_defaultTextFormat()) - 1);
                ca.context.stroke();
                ca.context.closePath();
              }
            }
            f.__bitmap = T.fromCanvas(a.__graphics.__canvas);
            f.__bitmapScale = g;
            f.__visible = true;
            a.__dirty = false;
            f.__softwareDirty = false;
            f.set___dirty(false);
          }
        }
        a.__graphics.__hardwareDirty = false;
      };
      function Z() {}
      h["openfl.display._internal.Context3DTilemap"] = Z;
      Z.__name__ = "openfl.display._internal.Context3DTilemap";
      Z.buildBuffer = function (a, b) {
        if (!a.__renderable || a.__group.__tiles.length == 0 || a.__worldAlpha <= 0) {
          a.__group.__dirty = false;
        } else {
          Z.numTiles = 0;
          Z.vertexBufferData = a.__buffer != null ? a.__buffer.vertexBufferData : null;
          Z.vertexDataPosition = 0;
          var c = ea.__pool.get();
          var d = Aa.__pool.get();
          var e = Aa.__pool.get();
          Z.dataPerVertex = 4;
          if (a.tileAlphaEnabled) {
            Z.dataPerVertex++;
          }
          if (a.tileColorTransformEnabled) {
            Z.dataPerVertex += 8;
          }
          Z.buildBufferTileContainer(a, a.__group, b, e, a.__tileset, a.tileAlphaEnabled, a.__worldAlpha, a.tileColorTransformEnabled, a.__worldColorTransform, null, c, d);
          a.__buffer.flushVertexBufferData();
          ea.__pool.release(c);
          Aa.__pool.release(d);
          Aa.__pool.release(e);
        }
      };
      Z.buildBufferTileContainer = function (a, b, c, d, e, f, k, g, n, h, p, m, l) {
        if (l == null) {
          l = true;
        }
        var r = Aa.__pool.get();
        var t = c.__roundPixels;
        var q = b.__tiles;
        var u = null;
        u = function (a) {
          a = a.__tiles;
          var b = 0;
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            if (d.__length > 0) {
              b += u(d);
            } else {
              ++b;
            }
          }
          return b;
        };
        if (l) {
          Z.resizeBuffer(a, Z.numTiles + u(b));
        }
        l = null;
        var J;
        var x;
        var w;
        var A;
        var y;
        var z;
        var C;
        var H;
        var D;
        var Ka;
        var F = f ? 5 : 4;
        for (var aa = 0; aa < q.length;) {
          var B = q[aa];
          ++aa;
          r.setTo(1, 0, 0, 1, -B.get_originX(), -B.get_originY());
          r.concat(B.get_matrix());
          r.concat(d);
          if (t) {
            r.tx = Math.round(r.tx);
            r.ty = Math.round(r.ty);
          }
          var G = B.get_tileset() ?? e;
          var v = B.get_alpha() * k;
          var za = B.get_visible();
          B.__dirty = false;
          if (za && !(v <= 0)) {
            if (g) {
              if (B.get_colorTransform() != null) {
                if (n == null) {
                  l = B.get_colorTransform();
                } else {
                  if (Z.cacheColorTransform == null) {
                    Z.cacheColorTransform = new Nb();
                  }
                  l = Z.cacheColorTransform;
                  l.redMultiplier = n.redMultiplier * B.get_colorTransform().redMultiplier;
                  l.greenMultiplier = n.greenMultiplier * B.get_colorTransform().greenMultiplier;
                  l.blueMultiplier = n.blueMultiplier * B.get_colorTransform().blueMultiplier;
                  l.alphaMultiplier = n.alphaMultiplier * B.get_colorTransform().alphaMultiplier;
                  l.redOffset = n.redOffset + B.get_colorTransform().redOffset;
                  l.greenOffset = n.greenOffset + B.get_colorTransform().greenOffset;
                  l.blueOffset = n.blueOffset + B.get_colorTransform().blueOffset;
                  l.alphaOffset = n.alphaOffset + B.get_colorTransform().alphaOffset;
                }
              } else {
                l = n;
              }
            }
            if (!f) {
              v = 1;
            }
            if (B.__length > 0) {
              Z.buildBufferTileContainer(a, B, c, r, G, f, v, g, l, h, p, m, false);
            } else if (G != null && (za = B.get_id(), J = G.__bitmapData, J != null)) {
              if (za == -1) {
                x = B.__rect;
                if (x == null || x.width <= 0 || x.height <= 0) {
                  continue;
                }
                B = x.x / J.width;
                G = x.y / J.height;
                za = x.get_right() / J.width;
                A = x.get_bottom() / J.height;
              } else {
                J = G.__data[za];
                if (J == null) {
                  continue;
                }
                p.setTo(J.x, J.y, J.width, J.height);
                x = p;
                B = J.__uvX;
                G = J.__uvY;
                za = J.__uvWidth;
                A = J.__uvHeight;
              }
              J = x.width;
              w = x.height;
              x = r.a * 0 + r.c * 0 + r.tx;
              y = r.b * 0 + r.d * 0 + r.ty;
              z = J * r.a + r.c * 0 + r.tx;
              C = J * r.b + r.d * 0 + r.ty;
              H = r.a * 0 + w * r.c + r.tx;
              D = r.b * 0 + w * r.d + r.ty;
              Ka = J * r.a + w * r.c + r.tx;
              w = J * r.b + w * r.d + r.ty;
              J = Z.vertexDataPosition;
              Z.vertexBufferData[J] = x;
              Z.vertexBufferData[J + 1] = y;
              Z.vertexBufferData[J + 2] = B;
              Z.vertexBufferData[J + 3] = G;
              Z.vertexBufferData[J + Z.dataPerVertex] = z;
              Z.vertexBufferData[J + Z.dataPerVertex + 1] = C;
              Z.vertexBufferData[J + Z.dataPerVertex + 2] = za;
              Z.vertexBufferData[J + Z.dataPerVertex + 3] = G;
              Z.vertexBufferData[J + Z.dataPerVertex * 2] = H;
              Z.vertexBufferData[J + Z.dataPerVertex * 2 + 1] = D;
              Z.vertexBufferData[J + Z.dataPerVertex * 2 + 2] = B;
              Z.vertexBufferData[J + Z.dataPerVertex * 2 + 3] = A;
              Z.vertexBufferData[J + Z.dataPerVertex * 3] = Ka;
              Z.vertexBufferData[J + Z.dataPerVertex * 3 + 1] = w;
              Z.vertexBufferData[J + Z.dataPerVertex * 3 + 2] = za;
              Z.vertexBufferData[J + Z.dataPerVertex * 3 + 3] = A;
              if (f) {
                Z.vertexBufferData[J + Z.dataPerVertex * 0 + 4] = v;
                Z.vertexBufferData[J + Z.dataPerVertex + 4] = v;
                Z.vertexBufferData[J + Z.dataPerVertex * 2 + 4] = v;
                Z.vertexBufferData[J + Z.dataPerVertex * 3 + 4] = v;
              }
              if (g) {
                if (l != null) {
                  for (v = 0; v < 4;) {
                    B = v++;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F] = l.redMultiplier;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F + 1] = l.greenMultiplier;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F + 2] = l.blueMultiplier;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F + 3] = l.alphaMultiplier;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F + 4] = l.redOffset;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F + 5] = l.greenOffset;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F + 6] = l.blueOffset;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F + 7] = l.alphaOffset;
                  }
                } else {
                  for (v = 0; v < 4;) {
                    B = v++;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F] = 1;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F + 1] = 1;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F + 2] = 1;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F + 3] = 1;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F + 4] = 0;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F + 5] = 0;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F + 6] = 0;
                    Z.vertexBufferData[J + Z.dataPerVertex * B + F + 7] = 0;
                  }
                }
              }
              Z.vertexDataPosition += Z.dataPerVertex * 4;
            }
          }
        }
        b.__dirty = false;
        Aa.__pool.release(r);
      };
      Z.flush = function (a, b, c) {
        if (Z.currentShader == null) {
          Z.currentShader = b.__defaultDisplayShader;
        }
        if (Z.bufferPosition > Z.lastFlushedPosition && Z.currentBitmapData != null && Z.currentShader != null) {
          var d = b.__initDisplayShader(Z.currentShader);
          b.setShader(d);
          b.applyBitmapData(Z.currentBitmapData, a.smoothing);
          b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
          if (a.tileAlphaEnabled) {
            b.useAlphaArray();
          } else {
            b.applyAlpha(a.__worldAlpha);
          }
          if (a.tileBlendModeEnabled) {
            b.__setBlendMode(c);
          }
          if (a.tileColorTransformEnabled) {
            b.applyHasColorTransform(true);
            b.useColorTransformArray();
          } else {
            b.applyColorTransform(a.__worldColorTransform);
          }
          b.updateShader();
          c = a.__buffer.vertexBuffer;
          var e = Z.lastFlushedPosition * Z.dataPerVertex * 4;
          var f;
          for (; Z.lastFlushedPosition < Z.bufferPosition;) {
            f = Math.min(Z.bufferPosition - Z.lastFlushedPosition, Z.context.__quadIndexBufferElements) | 0;
            if (f <= 0) {
              break;
            }
            if (d.__position != null) {
              Z.context.setVertexBufferAt(d.__position.index, c, e, 2);
            }
            if (d.__textureCoord != null) {
              Z.context.setVertexBufferAt(d.__textureCoord.index, c, e + 2, 2);
            }
            if (a.tileAlphaEnabled && d.__alpha != null) {
              Z.context.setVertexBufferAt(d.__alpha.index, c, e + 4, 1);
            }
            if (a.tileColorTransformEnabled) {
              var k = a.tileAlphaEnabled ? 5 : 4;
              if (d.__colorMultiplier != null) {
                Z.context.setVertexBufferAt(d.__colorMultiplier.index, c, e + k, 4);
              }
              if (d.__colorOffset != null) {
                Z.context.setVertexBufferAt(d.__colorOffset.index, c, e + k + 4, 4);
              }
            }
            Z.context.drawTriangles(Z.context.__quadIndexBuffer, 0, f * 2);
            Z.lastFlushedPosition += f;
          }
          b.__clearShader();
        }
        Z.lastUsedBitmapData = Z.currentBitmapData;
        Z.lastUsedShader = Z.currentShader;
      };
      Z.render = function (a, b) {
        if (a.__renderable && !(a.__worldAlpha <= 0) && (Z.context = b.__context3D, Z.buildBuffer(a, b), Z.numTiles != 0)) {
          Z.bufferPosition = 0;
          Z.lastFlushedPosition = 0;
          Z.lastUsedBitmapData = null;
          Z.lastUsedShader = null;
          Z.currentBitmapData = null;
          Z.currentShader = null;
          Z.currentBlendMode = a.__worldBlendMode;
          if (!a.tileBlendModeEnabled) {
            b.__setBlendMode(Z.currentBlendMode);
          }
          b.__pushMaskObject(a);
          var c = ea.__pool.get();
          c.setTo(0, 0, a.__width, a.__height);
          b.__pushMaskRect(c, a.__renderTransform);
          Z.renderTileContainer(a, b, a.__group, a.__worldShader, a.__tileset, a.__worldAlpha, a.tileBlendModeEnabled, Z.currentBlendMode, null);
          Z.flush(a, b, Z.currentBlendMode);
          b.__popMaskRect();
          b.__popMaskObject(a);
          ea.__pool.release(c);
        }
      };
      Z.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(a.__worldAlpha <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              var c = b.__context3D;
              var d = ea.__pool.get();
              d.setTo(0, 0, a.get_width(), a.get_height());
              b.__pushMaskRect(d, a.__renderTransform);
              var e = a.opaqueBackground;
              c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
              b.__popMaskRect();
              b.__popMaskObject(a);
              ea.__pool.release(d);
            }
            if (a.__graphics != null) {
              dg.render(a, b);
            }
          }
          Z.render(a, b);
        } else {
          Ve.render(a.__cacheBitmap, b);
        }
        b.__renderEvent(a);
      };
      Z.renderDrawableMask = function (a, b) {
        if (a.opaqueBackground != null || a.__graphics != null) {
          if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0) {
            a.get_height();
          }
          if (a.__graphics != null) {
            dg.renderMask(a, b);
          }
        }
        Z.renderMask(a, b);
      };
      Z.renderTileContainer = function (a, b, c, d, e, f, k, g, n) {
        c = c.__tiles;
        var r;
        var h;
        var m;
        var p;
        var l = null;
        var t;
        for (var q = 0; q < c.length;) {
          r = c[q];
          ++q;
          h = r.get_tileset() ?? e;
          m = r.get_alpha() * f;
          if ((p = r.get_visible()) && !(m <= 0)) {
            p = r.get_shader() ?? d;
            if (k) {
              l = r.__blendMode ?? g;
            }
            if (r.__length > 0) {
              Z.renderTileContainer(a, b, r, p, h, m, k, l, n);
            } else if (h != null && (t = r.get_id(), m = h.__bitmapData, m != null)) {
              if (t == -1) {
                r = r.__rect;
                if (r == null || r.width <= 0 || r.height <= 0) {
                  continue;
                }
              } else {
                r = h.__data[t];
                if (r == null) {
                  continue;
                }
              }
              if (p != Z.currentShader || m != Z.currentBitmapData && Z.currentBitmapData != null || Z.currentBlendMode != l) {
                Z.flush(a, b, Z.currentBlendMode);
              }
              Z.currentBitmapData = m;
              Z.currentShader = p;
              Z.currentBlendMode = l;
              Z.bufferPosition++;
            }
          }
        }
      };
      Z.renderMask = function (a, b) {};
      Z.resizeBuffer = function (a, b) {
        Z.numTiles = b;
        if (a.__buffer == null) {
          a.__buffer = new Tj(Z.context, Am.QUADS, Z.numTiles, Z.dataPerVertex);
        } else {
          a.__buffer.resize(Z.numTiles, Z.dataPerVertex);
        }
        Z.vertexBufferData = a.__buffer.vertexBufferData;
      };
      function We() {}
      h["openfl.display._internal.Context3DVideo"] = We;
      We.__name__ = "openfl.display._internal.Context3DVideo";
      We.render = function (a, b) {
        if (a.__renderable && !(a.__worldAlpha <= 0) && a.__stream != null && a.__stream.__video != null) {
          var c = b.__context3D;
          var d = c.gl;
          if (a.__getTexture(c) != null) {
            b.__setBlendMode(a.__worldBlendMode);
            b.__pushMaskObject(a);
            var e = b.__initDisplayShader(a.__worldShader);
            b.setShader(e);
            b.applyBitmapData(null, true, false);
            b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
            b.applyAlpha(a.__worldAlpha);
            b.applyColorTransform(a.__worldColorTransform);
            if (e.__textureSize != null) {
              We.__textureSizeValue[0] = a.__stream != null ? a.__stream.__video.videoWidth : 0;
              We.__textureSizeValue[1] = a.__stream != null ? a.__stream.__video.videoHeight : 0;
              e.__textureSize.value = We.__textureSizeValue;
            }
            b.updateShader();
            c.setTextureAt(0, a.__getTexture(c));
            c.__flushGLTextures();
            d.uniform1i(e.__texture.index, 0);
            if (a.smoothing) {
              d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, d.LINEAR);
              d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.LINEAR);
            } else {
              d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, d.NEAREST);
              d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.NEAREST);
            }
            d = a.__getVertexBuffer(c);
            if (e.__position != null) {
              c.setVertexBufferAt(e.__position.index, d, 0, 3);
            }
            if (e.__textureCoord != null) {
              c.setVertexBufferAt(e.__textureCoord.index, d, 3, 2);
            }
            e = a.__getIndexBuffer(c);
            c.drawTriangles(e);
            b.__clearShader();
            b.__popMaskObject(a);
          }
        }
      };
      We.renderDrawable = function (a, b) {
        We.render(a, b);
        b.__renderEvent(a);
      };
      We.renderDrawableMask = function (a, b) {
        We.renderMask(a, b);
      };
      We.renderMask = function (a, b) {
        if (a.__stream != null && a.__stream.__video != null) {
          var c = b.__context3D;
          var d = b.__maskShader;
          b.setShader(d);
          b.applyBitmapData(Gh.opaqueBitmapData, true);
          b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
          b.updateShader();
          var e = a.__getVertexBuffer(c);
          if (d.__position != null) {
            c.setVertexBufferAt(d.__position.index, e, 0, 3);
          }
          if (d.__textureCoord != null) {
            c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
          }
          a = a.__getIndexBuffer(c);
          c.drawTriangles(a);
          b.__clearShader();
        }
      };
      function xc() {}
      h["openfl.display._internal.DOMBitmap"] = xc;
      xc.__name__ = "openfl.display._internal.DOMBitmap";
      xc.clear = function (a, b) {
        he.clear(a, b);
        if (a.__image != null) {
          b.element.removeChild(a.__image);
          a.__image = null;
          a.__style = null;
        }
        if (a.__canvas != null) {
          b.element.removeChild(a.__canvas);
          a.__canvas = null;
          a.__style = null;
        }
      };
      xc.renderCanvas = function (a, b) {
        if (a.__image != null) {
          b.element.removeChild(a.__image);
          a.__image = null;
        }
        if (a.__canvas == null) {
          a.__canvas = window.document.createElement("canvas");
          a.__context = a.__canvas.getContext("2d");
          a.__imageVersion = -1;
          if (!b.__allowSmoothing || !a.smoothing) {
            a.__context.imageSmoothingEnabled = false;
          }
          b.__initializeElement(a, a.__canvas);
        }
        if (a.__imageVersion != a.__bitmapData.image.version) {
          Xa.convertToCanvas(a.__bitmapData.image);
          a.__canvas.width = a.__bitmapData.width + 1;
          a.__canvas.width = a.__bitmapData.width;
          a.__canvas.height = a.__bitmapData.height;
          a.__context.drawImage(a.__bitmapData.image.buffer.__srcCanvas, 0, 0);
          a.__imageVersion = a.__bitmapData.image.version;
        }
        b.__updateClip(a);
        b.__applyStyle(a, true, true, true);
      };
      xc.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0) {
            a.get_height();
          }
          var c = a.__graphics;
          if (a.stage != null && a.__worldVisible && a.__renderable && c != null) {
            D.render(c, b.__canvasRenderer);
            if (c.__softwareDirty || a.__worldAlphaChanged || a.__canvas != c.__canvas) {
              if (c.__canvas != null) {
                if (a.__canvas != c.__canvas) {
                  if (a.__canvas != null) {
                    b.element.removeChild(a.__canvas);
                  }
                  a.__canvas = c.__canvas;
                  a.__context = c.__context;
                  b.__initializeElement(a, a.__canvas);
                }
              } else {
                dh.clear(a, b);
              }
            }
            if (a.__canvas != null) {
              b.__pushMaskObject(a);
              var d = a.__renderTransform;
              a.__renderTransform = c.__worldTransform;
              if (c.__transformDirty) {
                c.__transformDirty = false;
                a.__renderTransformChanged = true;
              }
              b.__updateClip(a);
              b.__applyStyle(a, true, true, true);
              a.__renderTransform = d;
              b.__popMaskObject(a);
            }
          } else {
            dh.clear(a, b);
          }
          if (a.stage != null && a.__worldVisible && a.__renderable && a.__bitmapData != null && a.__bitmapData.__isValid && a.__bitmapData.readable) {
            b.__pushMaskObject(a);
            if (a.__bitmapData.image.buffer.__srcImage != null) {
              d = a.__bitmapData.image.buffer.__srcImage.src;
              if (w.startsWith(d, "data:") || w.startsWith(d, "blob:")) {
                xc.renderCanvas(a, b);
              } else {
                xc.renderImage(a, b);
              }
            } else {
              xc.renderCanvas(a, b);
            }
            b.__popMaskObject(a);
          } else {
            xc.clear(a, b);
          }
        } else {
          b.__renderDrawableClear(a);
          a.__cacheBitmap.stage = a.stage;
          c = a.__cacheBitmap;
          if (c.stage != null && c.__worldVisible && c.__renderable && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
            b.__pushMaskObject(c);
            if (c.__bitmapData.image.buffer.__srcImage != null) {
              d = c.__bitmapData.image.buffer.__srcImage.src;
              if (w.startsWith(d, "data:") || w.startsWith(d, "blob:")) {
                xc.renderCanvas(c, b);
              } else {
                xc.renderImage(c, b);
              }
            } else {
              xc.renderCanvas(c, b);
            }
            b.__popMaskObject(c);
          } else {
            xc.clear(c, b);
          }
        }
        b.__renderEvent(a);
      };
      xc.renderDrawableClear = function (a, b) {
        xc.clear(a, b);
      };
      xc.renderImage = function (a, b) {
        if (a.__canvas != null) {
          b.element.removeChild(a.__canvas);
          a.__canvas = null;
        }
        if (a.__image == null) {
          a.__image = window.document.createElement("img");
          a.__image.crossOrigin = "Anonymous";
          a.__image.src = a.__bitmapData.image.buffer.__srcImage.src;
          b.__initializeElement(a, a.__image);
        }
        b.__updateClip(a);
        b.__applyStyle(a, true, true, true);
      };
      function he() {}
      h["openfl.display._internal.DOMDisplayObject"] = he;
      he.__name__ = "openfl.display._internal.DOMDisplayObject";
      he.clear = function (a, b) {
        if (a.__cacheBitmap != null) {
          xc.clear(a.__cacheBitmap, b);
        }
        dh.clear(a, b);
      };
      he.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0) {
            a.get_height();
          }
          var c = a.__graphics;
          if (a.stage != null && a.__worldVisible && a.__renderable && c != null) {
            D.render(c, b.__canvasRenderer);
            if (c.__softwareDirty || a.__worldAlphaChanged || a.__canvas != c.__canvas) {
              if (c.__canvas != null) {
                if (a.__canvas != c.__canvas) {
                  if (a.__canvas != null) {
                    b.element.removeChild(a.__canvas);
                  }
                  a.__canvas = c.__canvas;
                  a.__context = c.__context;
                  b.__initializeElement(a, a.__canvas);
                }
              } else {
                dh.clear(a, b);
              }
            }
            if (a.__canvas != null) {
              b.__pushMaskObject(a);
              var d = a.__renderTransform;
              a.__renderTransform = c.__worldTransform;
              if (c.__transformDirty) {
                c.__transformDirty = false;
                a.__renderTransformChanged = true;
              }
              b.__updateClip(a);
              b.__applyStyle(a, true, true, true);
              a.__renderTransform = d;
              b.__popMaskObject(a);
            }
          } else {
            dh.clear(a, b);
          }
        } else {
          b.__renderDrawableClear(a);
          a.__cacheBitmap.stage = a.stage;
          c = a.__cacheBitmap;
          if (c.stage != null && c.__worldVisible && c.__renderable && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
            b.__pushMaskObject(c);
            if (c.__bitmapData.image.buffer.__srcImage != null) {
              d = c.__bitmapData.image.buffer.__srcImage.src;
              if (w.startsWith(d, "data:") || w.startsWith(d, "blob:")) {
                xc.renderCanvas(c, b);
              } else {
                xc.renderImage(c, b);
              }
            } else {
              xc.renderCanvas(c, b);
            }
            b.__popMaskObject(c);
          } else {
            xc.clear(c, b);
          }
        }
        b.__renderEvent(a);
      };
      he.renderDrawableClear = function (a, b) {
        he.clear(a, b);
      };
      function om() {}
      h["openfl.display._internal.DOMDisplayObjectContainer"] = om;
      om.__name__ = "openfl.display._internal.DOMDisplayObjectContainer";
      om.renderDrawable = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            b.__renderDrawable(d);
          }
        }
        for (c = a.__removedChildren.iterator(); c.hasNext();) {
          d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        he.renderDrawable(a, b);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          b.__pushMaskObject(a);
          if (b.__stage != null) {
            c = 0;
            for (d = a.__children; c < d.length;) {
              e = d[c];
              ++c;
              b.__renderDrawable(e);
              e.__renderDirty = false;
            }
            a.__renderDirty = false;
          } else {
            c = 0;
            d = a.__children;
            while (c < d.length) {
              e = d[c];
              ++c;
              b.__renderDrawable(e);
            }
          }
          b.__popMaskObject(a);
        } else {
          c = 0;
          for (d = a.__children; c < d.length;) {
            var e = d[c];
            ++c;
            b.__renderDrawableClear(e);
          }
          dh.clear(a, b);
          a.__cacheBitmap.stage = a.stage;
        }
      };
      om.renderDrawableClear = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            b.__renderDrawableClear(d);
          }
        }
        for (c = a.__removedChildren.iterator(); c.hasNext();) {
          d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        c = 0;
        for (d = a.__children; c < d.length;) {
          var e = d[c];
          ++c;
          b.__renderDrawableClear(e);
        }
        he.clear(a, b);
      };
      function dh() {}
      h["openfl.display._internal.DOMShape"] = dh;
      dh.__name__ = "openfl.display._internal.DOMShape";
      dh.clear = function (a, b) {
        if (a.__canvas != null) {
          b.element.removeChild(a.__canvas);
          a.__canvas = null;
          a.__style = null;
        }
      };
      function pm() {}
      h["openfl.display._internal.DOMSimpleButton"] = pm;
      pm.__name__ = "openfl.display._internal.DOMSimpleButton";
      pm.renderDrawable = function (a, b) {
        b.__pushMaskObject(a);
        for (var c = a.__previousStates.iterator(); c.hasNext();) {
          var d = c.next();
          b.__renderDrawable(d);
        }
        a.__previousStates.set_length(0);
        if (a.__currentState != null) {
          if (a.__currentState.stage != a.stage) {
            a.__currentState.__setStageReference(a.stage);
          }
          b.__renderDrawable(a.__currentState);
        }
        b.__popMaskObject(a);
        b.__renderEvent(a);
      };
      pm.renderDrawableClear = function (a, b) {
        he.renderDrawableClear(a, b);
      };
      function bh() {}
      h["openfl.display._internal.DOMTextField"] = bh;
      bh.__name__ = "openfl.display._internal.DOMTextField";
      bh.clear = function (a, b) {
        he.clear(a, b);
        if (a.__div != null) {
          b.element.removeChild(a.__div);
          a.__div = null;
          a.__style = null;
        }
      };
      bh.renderDrawable = function (a, b) {
        a.__domRender = true;
        b.__updateCacheBitmap(a, a.__forceCachedBitmapUpdate);
        a.__forceCachedBitmapUpdate = false;
        a.__domRender = false;
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if (a.__renderedOnCanvasWhileOnDOM) {
            a.__renderedOnCanvasWhileOnDOM = false;
            if (a.__isHTML && a.__htmlText != null) {
              a.__updateText(a.__htmlText);
              a.__dirty = true;
              a.__layoutDirty = true;
              if (!a.__renderDirty) {
                a.__renderDirty = true;
                a.__setParentRenderDirty();
              }
            }
          }
          var c = a.__textEngine;
          if (a.stage != null && a.__worldVisible && a.__renderable) {
            if (a.__dirty || a.__renderTransformChanged || a.__div == null) {
              if (c.text != "" || c.background || c.border || c.type == 1) {
                a.__updateLayout();
                if (a.__div == null) {
                  a.__div = window.document.createElement("div");
                  b.__initializeElement(a, a.__div);
                  a.__style.setProperty("outline", "none", null);
                  a.__div.addEventListener("input", function (b) {
                    b.preventDefault();
                    if (a.get_htmlText() != a.__div.innerHTML) {
                      a.set_htmlText(a.__div.innerHTML);
                      a.__dirty = false;
                      a.dispatchEvent(new Xf("textInput", false, false, a.get_htmlText()));
                    }
                  }, true);
                }
                if (c.wordWrap) {
                  a.__style.setProperty("word-wrap", "break-word", null);
                } else {
                  a.__style.setProperty("white-space", "nowrap", null);
                }
                a.__style.setProperty("overflow", "hidden", null);
                if (c.selectable) {
                  a.__style.setProperty("cursor", "text", null);
                  a.__style.setProperty("-webkit-user-select", "text", null);
                  a.__style.setProperty("-moz-user-select", "text", null);
                  a.__style.setProperty("-ms-user-select", "text", null);
                  a.__style.setProperty("-o-user-select", "text", null);
                } else {
                  a.__style.setProperty("cursor", "inherit", null);
                }
                a.__div.contentEditable = c.type == 1;
                var d = a.__style;
                if (c.background) {
                  d.setProperty("background-color", "#" + w.hex(c.backgroundColor & 16777215, 6), null);
                } else {
                  d.removeProperty("background-color");
                }
                var e = c.width;
                var f = c.height;
                var k = "";
                if (a.__isHTML) {
                  a.__updateText(Wa.parse(a.__text, a.get_multiline(), a.__styleSheet, a.__textFormat, a.__textEngine.textFormatRanges));
                }
                var g = -a.get_scrollH();
                for (var n = c.layoutGroups.iterator(); n.hasNext();) {
                  var h = n.next();
                  if (!(h.lineIndex < a.get_scrollV() - 1)) {
                    if (h.lineIndex > c.get_bottomScrollV() - 1) {
                      break;
                    }
                    k += "<div style=\"";
                    if (h.format.font != null) {
                      k += "font: " + ic.getFont(h.format) + "; ";
                    }
                    if (h.format.color != null) {
                      k += "color: #" + w.hex(h.format.color & 16777215, 6) + "; ";
                    }
                    if (h.format.underline == 1) {
                      k += "text-decoration: underline; ";
                    }
                    if (h.format.align != null) {
                      switch (h.format.align) {
                        case 0:
                          k += "text-align: center; ";
                          break;
                        case 2:
                          k += "text-align: justify; ";
                          break;
                        case 4:
                          k += "text-align: right; ";
                          break;
                        default:
                          k += "text-align: left; ";
                      }
                    }
                    if (h.format.leftMargin != null) {
                      k += "padding-left: " + h.format.leftMargin * 1 + "px; ";
                    }
                    if (h.format.rightMargin != null) {
                      k += "padding-right: " + h.format.rightMargin * 1 + "px; ";
                    }
                    if (h.format.indent != null) {
                      k += "text-indent: " + h.format.indent * 1 + "px; ";
                    }
                    k += "left: " + (h.offsetX + g) + "px; top: " + (h.offsetY + 0 + 3) + "px; vertical-align: top; position: absolute;\">";
                    if (h.format.url != null && h.format.url != "") {
                      var p = "text-decoration: underline; ";
                      if (h.format.color != null) {
                        p += "color: #" + w.hex(h.format.color & 16777215, 6) + "; ";
                      }
                      k += "<a style='" + p + "' href='" + h.format.url + "' target='" + h.format.target + "'>";
                    }
                    k = a.__isHTML ? k + w.replace(c.text.substring(h.startIndex, h.endIndex), " ", "&nbsp;") : k + w.replace(w.htmlEscape(c.text.substring(h.startIndex, h.endIndex)), " ", "&nbsp;");
                    if (h.format.url != null && h.format.url != "") {
                      k += "</a>";
                    }
                    k += "</div>";
                  }
                }
                if (c.border) {
                  d.setProperty("border", "solid 1px #" + w.hex(c.borderColor & 16777215, 6), null);
                  a.__renderTransform.translate(-1, -1);
                  a.__renderTransformChanged = true;
                  a.__transformDirty = true;
                } else if (d.border != "") {
                  d.removeProperty("border");
                  a.__renderTransformChanged = true;
                }
                d.setProperty("width", e + "px", null);
                d.setProperty("height", f + "px", null);
                a.__div.innerHTML = k;
                a.__dirty = false;
              } else if (a.__div != null) {
                b.element.removeChild(a.__div);
                a.__div = null;
              }
            }
            if (a.__div != null) {
              c = b.__roundPixels;
              b.__roundPixels = true;
              b.__updateClip(a);
              b.__applyStyle(a, true, true, true);
              b.__roundPixels = c;
            }
          } else {
            bh.clear(a, b);
          }
        } else {
          b.__renderDrawableClear(a);
          a.__cacheBitmap.stage = a.stage;
          c = a.__cacheBitmap;
          if (c.stage != null && c.__worldVisible && c.__renderable && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
            b.__pushMaskObject(c);
            if (c.__bitmapData.image.buffer.__srcImage != null) {
              d = c.__bitmapData.image.buffer.__srcImage.src;
              if (w.startsWith(d, "data:") || w.startsWith(d, "blob:")) {
                xc.renderCanvas(c, b);
              } else {
                xc.renderImage(c, b);
              }
            } else {
              xc.renderCanvas(c, b);
            }
            b.__popMaskObject(c);
          } else {
            xc.clear(c, b);
          }
        }
        b.__renderEvent(a);
      };
      bh.renderDrawableClear = function (a, b) {
        bh.clear(a, b);
      };
      function ch() {}
      h["openfl.display._internal.DOMTilemap"] = ch;
      ch.__name__ = "openfl.display._internal.DOMTilemap";
      ch.clear = function (a, b) {
        he.clear(a, b);
        if (a.__canvas != null) {
          b.element.removeChild(a.__canvas);
          a.__canvas = null;
          a.__style = null;
        }
      };
      ch.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if (a.stage != null && a.__worldVisible && a.__renderable && a.__group.__tiles.length > 0) {
            if (a.__canvas == null) {
              a.__canvas = window.document.createElement("canvas");
              a.__context = a.__canvas.getContext("2d");
              b.__initializeElement(a, a.__canvas);
            }
            a.__canvas.width = a.__width;
            a.__canvas.height = a.__height;
            b.__canvasRenderer.context = a.__context;
            var c = a.__renderTransform;
            a.__renderTransform = Aa.__identity;
            var d = b.__canvasRenderer;
            if ((a.opaqueBackground != null || a.__graphics != null) && a.__renderable) {
              var e = d.__getAlpha(a.__worldAlpha);
              if (!(e <= 0)) {
                if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
                  d.__setBlendMode(a.__worldBlendMode);
                  d.__pushMaskObject(a);
                  var f = d.context;
                  d.setTransform(a.__renderTransform, f);
                  var k = a.opaqueBackground;
                  f.fillStyle = "rgb(" + (k >>> 16 & 255) + "," + (k >>> 8 & 255) + "," + (k & 255) + ")";
                  f.fillRect(0, 0, a.get_width(), a.get_height());
                  d.__popMaskObject(a);
                }
                if (a.__graphics != null && a.__renderable && (e = d.__getAlpha(a.__worldAlpha), !(e <= 0))) {
                  var g = a.__graphics;
                  if (g != null) {
                    D.render(g, d);
                    var n = g.__width;
                    var h = g.__height;
                    k = g.__canvas;
                    if (k != null && g.__visible && n >= 1 && h >= 1) {
                      var p = g.__worldTransform;
                      f = d.context;
                      var m = a.__scrollRect;
                      var l = a.__worldScale9Grid;
                      if (m == null || m.width > 0 && m.height > 0) {
                        d.__setBlendMode(a.__worldBlendMode);
                        d.__pushMaskObject(a);
                        f.globalAlpha = e;
                        if (l != null && p.b == 0 && p.c == 0) {
                          var t = d.__pixelRatio;
                          e = Aa.__pool.get();
                          e.translate(p.tx, p.ty);
                          d.setTransform(e, f);
                          Aa.__pool.release(e);
                          e = g.__bounds;
                          var q = g.__renderTransform.a / g.__bitmapScale;
                          var u = g.__renderTransform.d / g.__bitmapScale;
                          var x = q * p.a;
                          var A = u * p.d;
                          p = Math.max(1, Math.round(l.x * q));
                          g = Math.round(l.y * u);
                          m = Math.max(1, Math.round((e.get_right() - l.get_right()) * q));
                          var y = Math.round((e.get_bottom() - l.get_bottom()) * u);
                          q = Math.round(l.width * q);
                          l = Math.round(l.height * u);
                          u = Math.round(p / t);
                          var z = Math.round(g / t);
                          var C = Math.round(m / t);
                          t = Math.round(y / t);
                          x = e.width * x - u - C;
                          e = e.height * A - z - t;
                          d.applySmoothing(f, false);
                          if (q != 0 && l != 0) {
                            f.drawImage(k, 0, 0, p, g, 0, 0, u, z);
                            f.drawImage(k, p, 0, q, g, u, 0, x, z);
                            f.drawImage(k, p + q, 0, m, g, u + x, 0, C, z);
                            f.drawImage(k, 0, g, p, l, 0, z, u, e);
                            f.drawImage(k, p, g, q, l, u, z, x, e);
                            f.drawImage(k, p + q, g, m, l, u + x, z, C, e);
                            f.drawImage(k, 0, g + l, p, y, 0, z + e, u, t);
                            f.drawImage(k, p, g + l, q, y, u, z + e, x, t);
                            f.drawImage(k, p + q, g + l, m, y, u + x, z + e, C, t);
                          } else if (q == 0 && l != 0) {
                            h = u + x + C;
                            f.drawImage(k, 0, 0, n, g, 0, 0, h, z);
                            f.drawImage(k, 0, g, n, l, 0, z, h, e);
                            f.drawImage(k, 0, g + l, n, y, 0, z + e, h, t);
                          } else if (l == 0 && q != 0) {
                            n = z + e + t;
                            f.drawImage(k, 0, 0, p, h, 0, 0, u, n);
                            f.drawImage(k, p, 0, q, h, u, 0, x, n);
                            f.drawImage(k, p + q, 0, m, h, u + x, 0, C, n);
                          }
                        } else {
                          d.setTransform(p, f);
                          f.drawImage(k, 0, 0, n, h);
                        }
                        d.__popMaskObject(a);
                      }
                    }
                  }
                }
              }
            }
            d = b.__canvasRenderer;
            if (a.__renderable && a.__group.__tiles.length != 0) {
              e = d.__getAlpha(a.__worldAlpha);
              if (!(e <= 0)) {
                f = d.context;
                d.__setBlendMode(a.__worldBlendMode);
                d.__pushMaskObject(a);
                k = ea.__pool.get();
                k.setTo(0, 0, a.__width, a.__height);
                d.__pushMaskRect(k, a.__renderTransform);
                if (!d.__allowSmoothing || !a.smoothing) {
                  f.imageSmoothingEnabled = false;
                }
                zg.renderTileContainer(a.__group, d, a.__renderTransform, a.__tileset, d.__allowSmoothing && a.smoothing, a.tileAlphaEnabled, e, a.tileBlendModeEnabled, a.__worldBlendMode, null, null, k);
                if (!d.__allowSmoothing || !a.smoothing) {
                  f.imageSmoothingEnabled = true;
                }
                d.__popMaskRect();
                d.__popMaskObject(a);
                ea.__pool.release(k);
              }
            }
            a.__renderTransform = c;
            b.__canvasRenderer.context = null;
            b.__updateClip(a);
            b.__applyStyle(a, true, false, true);
          } else {
            ch.clear(a, b);
          }
        } else {
          b.__renderDrawableClear(a);
          a.__cacheBitmap.stage = a.stage;
          c = a.__cacheBitmap;
          if (c.stage != null && c.__worldVisible && c.__renderable && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
            b.__pushMaskObject(c);
            if (c.__bitmapData.image.buffer.__srcImage != null) {
              d = c.__bitmapData.image.buffer.__srcImage.src;
              if (w.startsWith(d, "data:") || w.startsWith(d, "blob:")) {
                xc.renderCanvas(c, b);
              } else {
                xc.renderImage(c, b);
              }
            } else {
              xc.renderCanvas(c, b);
            }
            b.__popMaskObject(c);
          } else {
            xc.clear(c, b);
          }
        }
        b.__renderEvent(a);
      };
      ch.renderDrawableClear = function (a, b) {
        ch.clear(a, b);
      };
      function Ag() {}
      h["openfl.display._internal.DOMVideo"] = Ag;
      Ag.__name__ = "openfl.display._internal.DOMVideo";
      Ag.clear = function (a, b) {
        he.clear(a, b);
        if (a.__active) {
          b.element.removeChild(a.__stream.__video);
          a.__active = false;
        }
      };
      Ag.render = function (a, b) {
        if (a.stage != null && a.__stream != null && a.__worldVisible && a.__renderable) {
          if (!a.__active) {
            b.__initializeElement(a, a.__stream.__video);
            a.__active = true;
            a.__dirty = true;
          }
          if (a.__dirty) {
            a.__stream.__video.width = a.__width | 0;
            a.__stream.__video.height = a.__height | 0;
            a.__dirty = false;
          }
          b.__updateClip(a);
          b.__applyStyle(a, true, true, true);
        } else {
          Ag.clear(a, b);
        }
      };
      Ag.renderDrawable = function (a, b) {
        Ag.render(a, b);
        b.__renderEvent(a);
      };
      Ag.renderDrawableClear = function (a, b) {
        he.renderDrawableClear(a, b);
      };
      function cg(a) {
        this.buffer = a;
        this.bPos = this.iPos = this.fPos = this.oPos = this.ffPos = this.iiPos = this.tsPos = 0;
        this.prev = pa.UNKNOWN;
      }
      h["openfl.display._internal.DrawCommandReader"] = cg;
      cg.__name__ = "openfl.display._internal.DrawCommandReader";
      cg.prototype = {
        destroy: function () {
          this.buffer = null;
          this.reset();
        },
        reset: function () {
          this.bPos = this.iPos = this.fPos = this.oPos = this.ffPos = this.iiPos = this.tsPos = 0;
        },
        __class__: cg
      };
      var pa = x["openfl.display._internal.DrawCommandType"] = {
        __ename__: "openfl.display._internal.DrawCommandType",
        __constructs__: null,
        BEGIN_BITMAP_FILL: {
          _hx_name: "BEGIN_BITMAP_FILL",
          _hx_index: 0,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        BEGIN_FILL: {
          _hx_name: "BEGIN_FILL",
          _hx_index: 1,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        BEGIN_GRADIENT_FILL: {
          _hx_name: "BEGIN_GRADIENT_FILL",
          _hx_index: 2,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        BEGIN_SHADER_FILL: {
          _hx_name: "BEGIN_SHADER_FILL",
          _hx_index: 3,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        CUBIC_CURVE_TO: {
          _hx_name: "CUBIC_CURVE_TO",
          _hx_index: 4,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        CURVE_TO: {
          _hx_name: "CURVE_TO",
          _hx_index: 5,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_CIRCLE: {
          _hx_name: "DRAW_CIRCLE",
          _hx_index: 6,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_ELLIPSE: {
          _hx_name: "DRAW_ELLIPSE",
          _hx_index: 7,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_QUADS: {
          _hx_name: "DRAW_QUADS",
          _hx_index: 8,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_RECT: {
          _hx_name: "DRAW_RECT",
          _hx_index: 9,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_ROUND_RECT: {
          _hx_name: "DRAW_ROUND_RECT",
          _hx_index: 10,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_TILES: {
          _hx_name: "DRAW_TILES",
          _hx_index: 11,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_TRIANGLES: {
          _hx_name: "DRAW_TRIANGLES",
          _hx_index: 12,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        END_FILL: {
          _hx_name: "END_FILL",
          _hx_index: 13,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        LINE_BITMAP_STYLE: {
          _hx_name: "LINE_BITMAP_STYLE",
          _hx_index: 14,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        LINE_GRADIENT_STYLE: {
          _hx_name: "LINE_GRADIENT_STYLE",
          _hx_index: 15,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        LINE_STYLE: {
          _hx_name: "LINE_STYLE",
          _hx_index: 16,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        LINE_TO: {
          _hx_name: "LINE_TO",
          _hx_index: 17,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        MOVE_TO: {
          _hx_name: "MOVE_TO",
          _hx_index: 18,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        OVERRIDE_BLEND_MODE: {
          _hx_name: "OVERRIDE_BLEND_MODE",
          _hx_index: 19,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        OVERRIDE_MATRIX: {
          _hx_name: "OVERRIDE_MATRIX",
          _hx_index: 20,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        WINDING_EVEN_ODD: {
          _hx_name: "WINDING_EVEN_ODD",
          _hx_index: 21,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        WINDING_NON_ZERO: {
          _hx_name: "WINDING_NON_ZERO",
          _hx_index: 22,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        UNKNOWN: {
          _hx_name: "UNKNOWN",
          _hx_index: 23,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        }
      };
      pa.__constructs__ = [pa.BEGIN_BITMAP_FILL, pa.BEGIN_FILL, pa.BEGIN_GRADIENT_FILL, pa.BEGIN_SHADER_FILL, pa.CUBIC_CURVE_TO, pa.CURVE_TO, pa.DRAW_CIRCLE, pa.DRAW_ELLIPSE, pa.DRAW_QUADS, pa.DRAW_RECT, pa.DRAW_ROUND_RECT, pa.DRAW_TILES, pa.DRAW_TRIANGLES, pa.END_FILL, pa.LINE_BITMAP_STYLE, pa.LINE_GRADIENT_STYLE, pa.LINE_STYLE, pa.LINE_TO, pa.MOVE_TO, pa.OVERRIDE_BLEND_MODE, pa.OVERRIDE_MATRIX, pa.WINDING_EVEN_ODD, pa.WINDING_NON_ZERO, pa.UNKNOWN];
      function Lh(a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 2;
        }
        if (b == null) {
          b = 5;
        }
        if (a == null) {
          a = 0;
        }
        this.wrap = a;
        this.filter = b;
        this.mipfilter = c;
        this.lodBias = d;
        this.ignoreSampler = e;
        this.centroid = f;
        this.textureAlpha = k;
      }
      h["openfl.display._internal.SamplerState"] = Lh;
      Lh.__name__ = "openfl.display._internal.SamplerState";
      Lh.prototype = {
        clone: function () {
          var a = new Lh(this.wrap, this.filter, this.mipfilter, this.lodBias, this.ignoreSampler, this.centroid, this.textureAlpha);
          a.mipmapGenerated = this.mipmapGenerated;
          return a;
        },
        copyFrom: function (a) {
          if (a != null && !a.ignoreSampler) {
            this.wrap = a.wrap;
            this.filter = a.filter;
            this.mipfilter = a.mipfilter;
            this.lodBias = a.lodBias;
            this.centroid = a.centroid;
            this.textureAlpha = a.textureAlpha;
          }
        },
        equals: function (a) {
          if (a == null) {
            return false;
          } else if (this.wrap == a.wrap && this.filter == a.filter && this.mipfilter == a.mipfilter && this.lodBias == a.lodBias) {
            return this.textureAlpha == a.textureAlpha;
          } else {
            return false;
          }
        },
        __class__: Lh
      };
      function rm() {
        this.inputRefs = [];
        this.inputFilter = [];
        this.inputMipFilter = [];
        this.inputs = [];
        this.inputWrap = [];
        this.overrideIntNames = [];
        this.overrideIntValues = [];
        this.overrideFloatNames = [];
        this.overrideFloatValues = [];
        this.overrideBoolNames = [];
        this.overrideBoolValues = [];
        this.paramLengths = [];
        this.paramPositions = [];
        this.paramRefs_Bool = [];
        this.paramRefs_Float = [];
        this.paramRefs_Int = [];
        this.paramTypes = [];
      }
      h["openfl.display._internal.ShaderBuffer"] = rm;
      rm.__name__ = "openfl.display._internal.ShaderBuffer";
      rm.prototype = {
        addBoolOverride: function (a, b) {
          this.overrideBoolNames[this.overrideBoolCount] = a;
          this.overrideBoolValues[this.overrideBoolCount] = b;
          this.overrideBoolCount++;
        },
        addFloatOverride: function (a, b) {
          this.overrideFloatNames[this.overrideFloatCount] = a;
          this.overrideFloatValues[this.overrideFloatCount] = b;
          this.overrideFloatCount++;
        },
        clearOverride: function () {
          this.overrideBoolCount = this.overrideFloatCount = this.overrideIntCount = 0;
        },
        update: function (a) {
          this.paramIntCount = this.paramFloatCount = this.paramDataLength = this.paramCount = this.paramBoolCount = this.overrideBoolCount = this.overrideFloatCount = this.overrideIntCount = this.inputCount = 0;
          this.shader = null;
          if (a != null) {
            a.__init();
            this.inputCount = a.__inputBitmapData.length;
            var b;
            for (var c = 0, d = this.inputCount; c < d;) {
              var e = c++;
              b = a.__inputBitmapData[e];
              this.inputs[e] = b.input;
              this.inputFilter[e] = b.filter;
              this.inputMipFilter[e] = b.mipFilter;
              this.inputRefs[e] = b;
              this.inputWrap[e] = b.wrap;
            }
            b = a.__paramBool.length;
            var f = a.__paramFloat.length;
            var k = a.__paramInt.length;
            this.paramCount = b + f + k;
            this.paramBoolCount = b;
            this.paramFloatCount = f;
            this.paramIntCount = k;
            var g = 0;
            c = 0;
            for (d = b; c < d;) {
              e = c++;
              var n = a.__paramBool[e];
              this.paramPositions[g] = this.paramDataLength;
              var h = n.value != null ? n.value.length : 0;
              this.paramLengths[g] = h;
              this.paramDataLength += h;
              this.paramTypes[g] = 0;
              this.paramRefs_Bool[e] = n;
              ++g;
            }
            c = 0;
            for (d = f; c < d;) {
              e = c++;
              n = a.__paramFloat[e];
              this.paramPositions[g] = this.paramDataLength;
              h = n.value != null ? n.value.length : 0;
              this.paramLengths[g] = h;
              this.paramDataLength += h;
              this.paramTypes[g] = 1;
              this.paramRefs_Float[e] = n;
              ++g;
            }
            c = 0;
            for (d = k; c < d;) {
              e = c++;
              n = a.__paramInt[e];
              this.paramPositions[g] = this.paramDataLength;
              h = n.value != null ? n.value.length : 0;
              this.paramLengths[g] = h;
              this.paramDataLength += h;
              this.paramTypes[g] = 2;
              this.paramRefs_Int[e] = n;
              ++g;
            }
            if (this.paramDataLength > 0) {
              if (this.paramData == null) {
                c = this.paramDataLength;
                var p = n = g = k = d = null;
                this.paramData = c = c != null ? new Float32Array(c) : d != null ? new Float32Array(d) : k != null ? new Float32Array(k.__array) : g != null ? new Float32Array(g) : n != null ? p == null ? new Float32Array(n, 0) : new Float32Array(n, 0, p) : null;
              } else if (this.paramDataLength > this.paramData.length) {
                c = this.paramDataLength;
                p = n = g = k = d = null;
                c = c != null ? new Float32Array(c) : d != null ? new Float32Array(d) : k != null ? new Float32Array(k.__array) : g != null ? new Float32Array(g) : n != null ? p == null ? new Float32Array(n, 0) : new Float32Array(n, 0, p) : null;
                c.set(this.paramData);
                this.paramData = c;
              }
            }
            c = p = n = g = k = 0;
            for (d = this.paramCount; c < d;) {
              e = c++;
              h = this.paramLengths[e];
              if (e < b) {
                e = this.paramRefs_Bool[k];
                ++k;
                for (var m = 0; m < h;) {
                  var l = m++;
                  this.paramData[p] = e.value[l] ? 1 : 0;
                  ++p;
                }
              } else if (e < b + f) {
                e = this.paramRefs_Float[g];
                ++g;
                m = 0;
                while (m < h) {
                  l = m++;
                  this.paramData[p] = e.value[l];
                  ++p;
                }
              } else {
                e = this.paramRefs_Int[n];
                ++n;
                m = 0;
                while (m < h) {
                  l = m++;
                  this.paramData[p] = e.value[l];
                  ++p;
                }
              }
            }
            this.shader = a;
          }
        },
        __class__: rm
      };
      function Kb(a, b, c) {
        this.driverInfo = "OpenGL (Direct blitting)";
        this.backBufferHeight = this.backBufferWidth = 0;
        ua.call(this);
        this.__stage = a;
        this.__contextState = b;
        this.__stage3D = c;
        this.__context = a.window.context;
        this.gl = this.__context.webgl;
        if (this.__contextState == null) {
          this.__contextState = new Uj();
        }
        this.__state = new Uj();
        var d;
        this.__vertexConstants = new Float32Array(512);
        this.__fragmentConstants = new Float32Array(512);
        var e = null;
        a = [1, 1, 1, 1];
        var f = d = c = b = null;
        this.__positionScale = a = e != null ? new Float32Array(e) : a != null ? new Float32Array(a) : b != null ? new Float32Array(b.__array) : c != null ? new Float32Array(c) : d != null ? f == null ? new Float32Array(d, 0) : new Float32Array(d, 0, f) : null;
        this.__programs = new V();
        if (Kb.__glMaxViewportDims == -1) {
          Kb.__glMaxViewportDims = this.gl.getParameter(this.gl.MAX_VIEWPORT_DIMS);
        }
        this.maxBackBufferHeight = this.maxBackBufferWidth = Kb.__glMaxViewportDims;
        if (Kb.__glMaxTextureMaxAnisotropy == -1) {
          a = this.gl.getExtension("EXT_texture_filter_anisotropic");
          if (a == null || !Object.prototype.hasOwnProperty.call(a, "MAX_TEXTURE_MAX_ANISOTROPY_EXT")) {
            a = this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic");
          }
          if (a == null || !Object.prototype.hasOwnProperty.call(a, "MAX_TEXTURE_MAX_ANISOTROPY_EXT")) {
            a = this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
          }
          if (a != null) {
            Kb.__glTextureMaxAnisotropy = a.TEXTURE_MAX_ANISOTROPY_EXT;
            Kb.__glMaxTextureMaxAnisotropy = this.gl.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
          } else {
            Kb.__glTextureMaxAnisotropy = 0;
            Kb.__glMaxTextureMaxAnisotropy = 0;
          }
        }
        if (Kb.__glDepthStencil == -1) {
          Kb.__glDepthStencil = this.gl.DEPTH_STENCIL;
        }
        if (Kb.__glMemoryTotalAvailable == -1) {
          a = this.gl.getExtension("NVX_gpu_memory_info");
          if (a != null) {
            Kb.__glMemoryTotalAvailable = a.GPU_MEMORY_INFO_DEDICATED_VIDMEM_NVX;
            Kb.__glMemoryCurrentAvailable = a.GPU_MEMORY_INFO_CURRENT_AVAILABLE_VIDMEM_NVX;
          }
        }
        if (Kb.__driverInfo == null) {
          a = this.gl.getParameter(this.gl.VENDOR);
          b = this.gl.getParameter(this.gl.VERSION);
          c = this.gl.getParameter(this.gl.RENDERER);
          d = this.gl.getParameter(this.gl.SHADING_LANGUAGE_VERSION);
          Kb.__driverInfo = "OpenGL Vendor=" + a + " Version=" + b + " Renderer=" + c + " GLSL=" + d;
        }
        this.driverInfo = Kb.__driverInfo;
        this.__quadIndexBufferElements = 16383;
        e = this.__quadIndexBufferCount = this.__quadIndexBufferElements * 6;
        f = d = c = b = a = null;
        a = e != null ? new Uint16Array(e) : a != null ? new Uint16Array(a) : b != null ? new Uint16Array(b.__array) : c != null ? new Uint16Array(c) : d != null ? f == null ? new Uint16Array(d, 0) : new Uint16Array(d, 0, f) : null;
        d = c = b = 0;
        for (f = this.__quadIndexBufferElements; d < f;) {
          d++;
          a[b] = c;
          a[b + 1] = c + 1;
          a[b + 2] = c + 2;
          a[b + 3] = c + 2;
          a[b + 4] = c + 1;
          a[b + 5] = c + 3;
          b += 6;
          c += 4;
        }
        this.__quadIndexBuffer = this.createIndexBuffer(this.__quadIndexBufferCount);
        this.__quadIndexBuffer.uploadFromTypedArray(a);
      }
      h["openfl.display3D.Context3D"] = Kb;
      Kb.__name__ = "openfl.display3D.Context3D";
      Kb.__super__ = ua;
      Kb.prototype = q(ua.prototype, {
        clear: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = 7;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 1;
          }
          if (d == null) {
            d = 1;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.__flushGLFramebuffer();
          this.__flushGLViewport();
          var g = 0;
          if ((k & 1) != 0) {
            if (this.__state.renderToTexture == null) {
              if (this.__stage.context3D == this && !this.__stage.__renderer.__cleared) {
                this.__stage.__renderer.__cleared = true;
              }
              this.__cleared = true;
            }
            g |= this.gl.COLOR_BUFFER_BIT;
            if (this.__contextState.colorMaskRed != 1 || this.__contextState.colorMaskGreen != 1 || this.__contextState.colorMaskBlue != 1 || this.__contextState.colorMaskAlpha != 1) {
              this.gl.colorMask(true, true, true, true);
              this.__contextState.colorMaskRed = true;
              this.__contextState.colorMaskGreen = true;
              this.__contextState.colorMaskBlue = true;
              this.__contextState.colorMaskAlpha = true;
            }
            this.gl.clearColor(a, b, c, d);
          }
          if ((k & 2) != 0) {
            g |= this.gl.DEPTH_BUFFER_BIT;
            if (this.__contextState.depthMask != 1) {
              this.gl.depthMask(true);
              this.__contextState.depthMask = true;
            }
            this.gl.clearDepth(e);
          }
          if ((k & 4) != 0) {
            g |= this.gl.STENCIL_BUFFER_BIT;
            if (this.__contextState.stencilWriteMask != 255) {
              this.gl.stencilMask(255);
              this.__contextState.stencilWriteMask = 255;
            }
            this.gl.clearStencil(f);
            this.__contextState.stencilWriteMask = 255;
          }
          if (g != 0) {
            this.__setGLScissorTest(false);
            this.gl.clear(g);
          }
        },
        configureBackBuffer: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = true;
          }
          if (e) {
            a = a * this.__stage.window.__scale | 0;
            b = b * this.__stage.window.__scale | 0;
          }
          if (this.__stage3D == null) {
            this.backBufferWidth = a;
            this.backBufferHeight = b;
            this.__backBufferAntiAlias = c;
            this.__state.backBufferEnableDepthAndStencil = d;
            this.__backBufferWantsBestResolution = e;
            this.__backBufferWantsBestResolutionOnBrowserZoom = f;
          } else {
            if (this.__backBufferTexture == null || this.backBufferWidth != a || this.backBufferHeight != b) {
              if (this.__backBufferTexture != null) {
                this.__backBufferTexture.dispose();
              }
              if (this.__frontBufferTexture != null) {
                this.__frontBufferTexture.dispose();
              }
              this.__backBufferTexture = this.createRectangleTexture(a, b, 1, true);
              this.__frontBufferTexture = this.createRectangleTexture(a, b, 1, true);
              if (this.__stage3D.__vertexBuffer == null) {
                this.__stage3D.__vertexBuffer = this.createVertexBuffer(4, 5);
              }
              var g = e ? a : a * this.__stage.window.__scale | 0;
              var h = e ? b : b * this.__stage.window.__scale | 0;
              g = qb.toFloatVector(null, null, null, [g, h, 0, 1, 1, 0, h, 0, 0, 1, g, 0, 0, 1, 0, 0, 0, 0, 0, 0]);
              this.__stage3D.__vertexBuffer.uploadFromVector(g, 0, 20);
              if (this.__stage3D.__indexBuffer == null) {
                this.__stage3D.__indexBuffer = this.createIndexBuffer(6);
                g = qb.toIntVector(null, null, null, [0, 1, 2, 2, 1, 3]);
                this.__stage3D.__indexBuffer.uploadFromVector(g, 0, 6);
              }
            }
            this.backBufferWidth = a;
            this.backBufferHeight = b;
            this.__backBufferAntiAlias = c;
            this.__state.backBufferEnableDepthAndStencil = d;
            this.__backBufferWantsBestResolution = e;
            this.__backBufferWantsBestResolutionOnBrowserZoom = f;
            this.__state.__primaryGLFramebuffer = this.__backBufferTexture.__getGLFramebuffer(d, c, 0);
            this.__frontBufferTexture.__getGLFramebuffer(d, c, 0);
          }
        },
        createIndexBuffer: function (a, b) {
          if (b == null) {
            b = 1;
          }
          return new Ko(this, a, b);
        },
        createProgram: function (a) {
          if (a == null) {
            a = 0;
          }
          return new Lo(this, a);
        },
        createRectangleTexture: function (a, b, c, d) {
          return new Vj(this, a, b, Vp.toString(c), d);
        },
        createVertexBuffer: function (a, b, c) {
          if (c == null) {
            c = 1;
          }
          return new Mo(this, a, b, Cp.toString(c));
        },
        drawTriangles: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = 0;
          }
          if (this.__state.renderToTexture == null) {
            if (this.__stage.context3D != this || this.__stage.__renderer.__cleared) {
              if (!this.__cleared) {
                this.clear(0, 0, 0, 0, 1, 0, 1);
              }
            } else {
              this.__stage.__renderer.__clear();
            }
          }
          this.__flushGL();
          if (this.__state.program != null) {
            this.__state.program.__flush();
          }
          c = c == -1 ? a.__numIndices : c * 3;
          this.__bindGLElementArrayBuffer(a.__id);
          this.gl.drawElements(this.gl.TRIANGLES, c, this.gl.UNSIGNED_SHORT, b * 2);
        },
        present: function () {
          this.setRenderToBackBuffer();
          if (this.__stage3D != null && this.__backBufferTexture != null) {
            if (!this.__cleared) {
              this.clear(0, 0, 0, 0, 1, 0, 1);
            }
            var a = this.__backBufferTexture;
            this.__backBufferTexture = this.__frontBufferTexture;
            this.__frontBufferTexture = a;
            this.__state.__primaryGLFramebuffer = this.__backBufferTexture.__getGLFramebuffer(this.__state.backBufferEnableDepthAndStencil, this.__backBufferAntiAlias, 0);
            this.__cleared = false;
          }
          this.__present = true;
        },
        setBlendFactors: function (a, b) {
          this.setBlendFactorsSeparate(a, b, a, b);
        },
        setBlendFactorsSeparate: function (a, b, c, d) {
          this.__state.blendSourceRGBFactor = a;
          this.__state.blendDestinationRGBFactor = b;
          this.__state.blendSourceAlphaFactor = c;
          this.__state.blendDestinationAlphaFactor = d;
          this.__setGLBlendEquation(this.gl.FUNC_ADD);
        },
        setColorMask: function (a, b, c, d) {
          this.__state.colorMaskRed = a;
          this.__state.colorMaskGreen = b;
          this.__state.colorMaskBlue = c;
          this.__state.colorMaskAlpha = d;
        },
        setCulling: function (a) {
          this.__state.culling = a;
        },
        setDepthTest: function (a, b) {
          this.__state.depthMask = a;
          this.__state.depthCompareMode = b;
        },
        setProgram: function (a) {
          this.__state.program = a;
          this.__state.shader = null;
          if (a != null) {
            for (var b = 0, c = a.__samplerStates.length; b < c;) {
              var d = b++;
              if (this.__state.samplerStates[d] == null) {
                this.__state.samplerStates[d] = a.__samplerStates[d].clone();
              } else {
                this.__state.samplerStates[d].copyFrom(a.__samplerStates[d]);
              }
            }
          }
        },
        setProgramConstantsFromMatrix: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (this.__state.program != null && this.__state.program.__format == 1) {
            this.__flushGLProgram();
            a = new Float32Array(16);
            a[0] = c.rawData.get(0);
            a[1] = c.rawData.get(1);
            a[2] = c.rawData.get(2);
            a[3] = c.rawData.get(3);
            a[4] = c.rawData.get(4);
            a[5] = c.rawData.get(5);
            a[6] = c.rawData.get(6);
            a[7] = c.rawData.get(7);
            a[8] = c.rawData.get(8);
            a[9] = c.rawData.get(9);
            a[10] = c.rawData.get(10);
            a[11] = c.rawData.get(11);
            a[12] = c.rawData.get(12);
            a[13] = c.rawData.get(13);
            a[14] = c.rawData.get(14);
            a[15] = c.rawData.get(15);
            Yc.uniformMatrix4fv(this.gl, b, d, a);
          } else {
            var e = (a = a == 1) ? this.__vertexConstants : this.__fragmentConstants;
            c = c.rawData;
            var f = b * 4;
            if (d) {
              e[f++] = c.get(0);
              e[f++] = c.get(4);
              e[f++] = c.get(8);
              e[f++] = c.get(12);
              e[f++] = c.get(1);
              e[f++] = c.get(5);
              e[f++] = c.get(9);
              e[f++] = c.get(13);
              e[f++] = c.get(2);
              e[f++] = c.get(6);
              e[f++] = c.get(10);
              e[f++] = c.get(14);
              e[f++] = c.get(3);
              e[f++] = c.get(7);
              e[f++] = c.get(11);
            } else {
              e[f++] = c.get(0);
              e[f++] = c.get(1);
              e[f++] = c.get(2);
              e[f++] = c.get(3);
              e[f++] = c.get(4);
              e[f++] = c.get(5);
              e[f++] = c.get(6);
              e[f++] = c.get(7);
              e[f++] = c.get(8);
              e[f++] = c.get(9);
              e[f++] = c.get(10);
              e[f++] = c.get(11);
              e[f++] = c.get(12);
              e[f++] = c.get(13);
              e[f++] = c.get(14);
            }
            e[f++] = c.get(15);
            if (this.__state.program != null) {
              this.__state.program.__markDirty(a, b, 4);
            }
          }
        },
        setRenderToBackBuffer: function () {
          this.__state.renderToTexture = null;
        },
        setRenderToTexture: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          this.__state.renderToTexture = a;
          this.__state.renderToTextureDepthStencil = b;
          this.__state.renderToTextureAntiAlias = c;
          this.__state.renderToTextureSurfaceSelector = d;
        },
        setSamplerStateAt: function (a, b, c, d) {
          if (this.__state.samplerStates[a] == null) {
            this.__state.samplerStates[a] = new Lh();
          }
          a = this.__state.samplerStates[a];
          a.wrap = b;
          a.filter = c;
          a.mipfilter = d;
        },
        setScissorRectangle: function (a) {
          if (a != null) {
            this.__state.scissorEnabled = true;
            this.__state.scissorRectangle.copyFrom(a);
          } else {
            this.__state.scissorEnabled = false;
          }
        },
        setStencilActions: function (a, b, c, d, e) {
          if (e == null) {
            e = 5;
          }
          if (d == null) {
            d = 5;
          }
          if (c == null) {
            c = 5;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 2;
          }
          this.__state.stencilTriangleFace = a;
          this.__state.stencilCompareMode = b;
          this.__state.stencilPass = c;
          this.__state.stencilDepthFail = d;
          this.__state.stencilFail = e;
        },
        setStencilReferenceValue: function (a, b, c) {
          if (c == null) {
            c = 255;
          }
          if (b == null) {
            b = 255;
          }
          this.__state.stencilReferenceValue = a;
          this.__state.stencilReadMask = b;
          this.__state.stencilWriteMask = c;
        },
        setTextureAt: function (a, b) {
          this.__state.textures[a] = b;
        },
        setVertexBufferAt: function (a, b, c, d) {
          if (d == null) {
            d = 4;
          }
          if (c == null) {
            c = 0;
          }
          if (!(a < 0)) {
            if (b == null) {
              this.gl.disableVertexAttribArray(a);
              this.__bindGLArrayBuffer(null);
            } else {
              this.__bindGLArrayBuffer(b.__id);
              this.gl.enableVertexAttribArray(a);
              c *= 4;
              switch (d) {
                case 0:
                  this.gl.vertexAttribPointer(a, 4, this.gl.UNSIGNED_BYTE, true, b.__stride, c);
                  break;
                case 1:
                  this.gl.vertexAttribPointer(a, 1, this.gl.FLOAT, false, b.__stride, c);
                  break;
                case 2:
                  this.gl.vertexAttribPointer(a, 2, this.gl.FLOAT, false, b.__stride, c);
                  break;
                case 3:
                  this.gl.vertexAttribPointer(a, 3, this.gl.FLOAT, false, b.__stride, c);
                  break;
                case 4:
                  this.gl.vertexAttribPointer(a, 4, this.gl.FLOAT, false, b.__stride, c);
                  break;
                default:
                  throw new yd();
              }
            }
          }
        },
        __bindGLArrayBuffer: function (a) {
          if (this.__contextState.__currentGLArrayBuffer != a) {
            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, a);
            this.__contextState.__currentGLArrayBuffer = a;
          }
        },
        __bindGLElementArrayBuffer: function (a) {
          if (this.__contextState.__currentGLElementArrayBuffer != a) {
            this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, a);
            this.__contextState.__currentGLElementArrayBuffer = a;
          }
        },
        __bindGLFramebuffer: function (a) {
          if (this.__contextState.__currentGLFramebuffer != a) {
            this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, a);
            this.__contextState.__currentGLFramebuffer = a;
          }
        },
        __bindGLTexture2D: function (a) {
          this.gl.bindTexture(this.gl.TEXTURE_2D, a);
          this.__contextState.__currentGLTexture2D = a;
        },
        __bindGLTextureCubeMap: function (a) {
          this.gl.bindTexture(this.gl.TEXTURE_CUBE_MAP, a);
          this.__contextState.__currentGLTextureCubeMap = a;
        },
        __dispose: function () {
          this.driverInfo += " (Disposed)";
          if (this.__stage3D != null) {
            this.__stage3D.__indexBuffer = null;
            this.__stage3D.__vertexBuffer = null;
            this.__stage3D = this.__stage3D.context3D = null;
          }
          this.__positionScale = this.__frontBufferTexture = this.__fragmentConstants = this.__renderStage3DProgram = this.__context = this.__backBufferTexture = null;
          this.__present = false;
          this.__vertexConstants = this.__stage = this.__quadIndexBuffer = null;
        },
        __drawTriangles: function (a, b) {
          if (a == null) {
            a = 0;
          }
          if (this.__state.renderToTexture == null) {
            if (this.__stage.context3D != this || this.__stage.__renderer.__cleared) {
              if (!this.__cleared) {
                this.clear(0, 0, 0, 0, 1, 0, 1);
              }
            } else {
              this.__stage.__renderer.__clear();
            }
          }
          this.__flushGL();
          if (this.__state.program != null) {
            this.__state.program.__flush();
          }
          this.gl.drawArrays(this.gl.TRIANGLES, a, b);
        },
        __flushGL: function () {
          this.__flushGLProgram();
          this.__flushGLFramebuffer();
          this.__flushGLViewport();
          this.__flushGLBlend();
          if (this.__contextState.colorMaskRed != this.__state.colorMaskRed || this.__contextState.colorMaskGreen != this.__state.colorMaskGreen || this.__contextState.colorMaskBlue != this.__state.colorMaskBlue || this.__contextState.colorMaskAlpha != this.__state.colorMaskAlpha) {
            this.gl.colorMask(this.__state.colorMaskRed, this.__state.colorMaskGreen, this.__state.colorMaskBlue, this.__state.colorMaskAlpha);
            this.__contextState.colorMaskRed = this.__state.colorMaskRed;
            this.__contextState.colorMaskGreen = this.__state.colorMaskGreen;
            this.__contextState.colorMaskBlue = this.__state.colorMaskBlue;
            this.__contextState.colorMaskAlpha = this.__state.colorMaskAlpha;
          }
          this.__flushGLCulling();
          this.__flushGLDepth();
          this.__flushGLScissor();
          this.__flushGLStencil();
          this.__flushGLTextures();
        },
        __flushGLBlend: function () {
          if (this.__contextState.blendDestinationRGBFactor != this.__state.blendDestinationRGBFactor || this.__contextState.blendSourceRGBFactor != this.__state.blendSourceRGBFactor || this.__contextState.blendDestinationAlphaFactor != this.__state.blendDestinationAlphaFactor || this.__contextState.blendSourceAlphaFactor != this.__state.blendSourceAlphaFactor) {
            this.__setGLBlend(true);
            if (this.__state.blendDestinationRGBFactor == this.__state.blendDestinationAlphaFactor && this.__state.blendSourceRGBFactor == this.__state.blendSourceAlphaFactor) {
              this.gl.blendFunc(this.__getGLBlend(this.__state.blendSourceRGBFactor), this.__getGLBlend(this.__state.blendDestinationRGBFactor));
            } else {
              this.gl.blendFuncSeparate(this.__getGLBlend(this.__state.blendSourceRGBFactor), this.__getGLBlend(this.__state.blendDestinationRGBFactor), this.__getGLBlend(this.__state.blendSourceAlphaFactor), this.__getGLBlend(this.__state.blendDestinationAlphaFactor));
            }
            this.__contextState.blendDestinationRGBFactor = this.__state.blendDestinationRGBFactor;
            this.__contextState.blendSourceRGBFactor = this.__state.blendSourceRGBFactor;
            this.__contextState.blendDestinationAlphaFactor = this.__state.blendDestinationAlphaFactor;
            this.__contextState.blendSourceAlphaFactor = this.__state.blendSourceAlphaFactor;
          }
        },
        __flushGLCulling: function () {
          if (this.__contextState.culling != this.__state.culling) {
            if (this.__state.culling == 3) {
              this.__setGLCullFace(false);
            } else {
              this.__setGLCullFace(true);
              switch (this.__state.culling) {
                case 0:
                  this.gl.cullFace(this.gl.BACK);
                  break;
                case 1:
                  this.gl.cullFace(this.gl.FRONT);
                  break;
                case 2:
                  this.gl.cullFace(this.gl.FRONT_AND_BACK);
                  break;
                case 3:
                  break;
                default:
                  throw new yd();
              }
            }
            this.__contextState.culling = this.__state.culling;
          }
        },
        __flushGLDepth: function () {
          var a = this.__state.depthMask && (this.__state.renderToTexture != null ? this.__state.renderToTextureDepthStencil : this.__state.backBufferEnableDepthAndStencil);
          if (this.__contextState.depthMask != a) {
            this.gl.depthMask(a);
            this.__contextState.depthMask = a;
          }
          if (this.__contextState.depthCompareMode != this.__state.depthCompareMode) {
            switch (this.__state.depthCompareMode) {
              case 0:
                this.gl.depthFunc(this.gl.ALWAYS);
                break;
              case 1:
                this.gl.depthFunc(this.gl.EQUAL);
                break;
              case 2:
                this.gl.depthFunc(this.gl.GREATER);
                break;
              case 3:
                this.gl.depthFunc(this.gl.GEQUAL);
                break;
              case 4:
                this.gl.depthFunc(this.gl.LESS);
                break;
              case 5:
                this.gl.depthFunc(this.gl.LEQUAL);
                break;
              case 6:
                this.gl.depthFunc(this.gl.NEVER);
                break;
              case 7:
                this.gl.depthFunc(this.gl.NOTEQUAL);
                break;
              default:
                throw new yd();
            }
            this.__contextState.depthCompareMode = this.__state.depthCompareMode;
          }
        },
        __flushGLFramebuffer: function () {
          if (this.__state.renderToTexture != null) {
            if (this.__contextState.renderToTexture != this.__state.renderToTexture || this.__contextState.renderToTextureSurfaceSelector != this.__state.renderToTextureSurfaceSelector) {
              var a = this.__state.renderToTexture.__getGLFramebuffer(this.__state.renderToTextureDepthStencil, this.__state.renderToTextureAntiAlias, this.__state.renderToTextureSurfaceSelector);
              this.__bindGLFramebuffer(a);
              this.__contextState.renderToTexture = this.__state.renderToTexture;
              this.__contextState.renderToTextureAntiAlias = this.__state.renderToTextureAntiAlias;
              this.__contextState.renderToTextureDepthStencil = this.__state.renderToTextureDepthStencil;
              this.__contextState.renderToTextureSurfaceSelector = this.__state.renderToTextureSurfaceSelector;
            }
            this.__setGLDepthTest(this.__state.renderToTextureDepthStencil);
            this.__setGLStencilTest(this.__state.renderToTextureDepthStencil);
            this.__setGLFrontFace(true);
          } else {
            if (this.__stage == null && this.backBufferWidth == 0 && this.backBufferHeight == 0) {
              throw new Rb("Context3D backbuffer has not been configured");
            }
            if (this.__contextState.renderToTexture != null || this.__contextState.__currentGLFramebuffer != this.__state.__primaryGLFramebuffer || this.__contextState.backBufferEnableDepthAndStencil != this.__state.backBufferEnableDepthAndStencil) {
              this.__bindGLFramebuffer(this.__state.__primaryGLFramebuffer);
              this.__contextState.renderToTexture = null;
              this.__contextState.backBufferEnableDepthAndStencil = this.__state.backBufferEnableDepthAndStencil;
            }
            this.__setGLDepthTest(this.__state.backBufferEnableDepthAndStencil);
            this.__setGLStencilTest(this.__state.backBufferEnableDepthAndStencil);
            this.__setGLFrontFace(this.__stage.context3D != this);
          }
        },
        __flushGLProgram: function () {
          var a = this.__state.shader;
          var b = this.__state.program;
          if (this.__contextState.shader != a) {
            if (this.__contextState.shader != null) {
              this.__contextState.shader.__disable();
            }
            if (a != null) {
              a.__enable();
            }
            this.__contextState.shader = a;
          }
          if (this.__contextState.program != b) {
            if (this.__contextState.program != null) {
              this.__contextState.program.__disable();
            }
            if (b != null) {
              b.__enable();
            }
            this.__contextState.program = b;
          }
          if (b != null && b.__format == 0) {
            this.__positionScale[1] = this.__stage.context3D == this && this.__state.renderToTexture == null ? 1 : -1;
            b.__setPositionScale(this.__positionScale);
          }
        },
        __flushGLScissor: function () {
          if (this.__state.scissorEnabled) {
            this.__setGLScissorTest(true);
            this.__contextState.scissorEnabled = true;
            var a = this.__state.scissorRectangle.x | 0;
            var b = this.__state.scissorRectangle.y | 0;
            var c = this.__state.scissorRectangle.width | 0;
            var d = this.__state.scissorRectangle.height | 0;
            if (this.__backBufferWantsBestResolution) {
              a = this.__state.scissorRectangle.x * this.__stage.window.__scale | 0;
              b = this.__state.scissorRectangle.y * this.__stage.window.__scale | 0;
              c = this.__state.scissorRectangle.width * this.__stage.window.__scale | 0;
              d = this.__state.scissorRectangle.height * this.__stage.window.__scale | 0;
            }
            if (this.__state.renderToTexture == null && this.__stage3D == null) {
              b = (this.__stage.window.__height * this.__stage.window.__scale | 0) - d - b;
            }
            if (this.__contextState.scissorRectangle.x != a || this.__contextState.scissorRectangle.y != b || this.__contextState.scissorRectangle.width != c || this.__contextState.scissorRectangle.height != d) {
              this.gl.scissor(a, b, c, d);
              this.__contextState.scissorRectangle.setTo(a, b, c, d);
            }
          } else if (this.__contextState.scissorEnabled != this.__state.scissorEnabled) {
            this.__setGLScissorTest(false);
            this.__contextState.scissorEnabled = false;
          }
        },
        __flushGLStencil: function () {
          if (this.__contextState.stencilTriangleFace != this.__state.stencilTriangleFace || this.__contextState.stencilPass != this.__state.stencilPass || this.__contextState.stencilDepthFail != this.__state.stencilDepthFail || this.__contextState.stencilFail != this.__state.stencilFail) {
            this.gl.stencilOpSeparate(this.__getGLTriangleFace(this.__state.stencilTriangleFace), this.__getGLStencilAction(this.__state.stencilFail), this.__getGLStencilAction(this.__state.stencilDepthFail), this.__getGLStencilAction(this.__state.stencilPass));
            this.__contextState.stencilTriangleFace = this.__state.stencilTriangleFace;
            this.__contextState.stencilPass = this.__state.stencilPass;
            this.__contextState.stencilDepthFail = this.__state.stencilDepthFail;
            this.__contextState.stencilFail = this.__state.stencilFail;
          }
          if (this.__contextState.stencilWriteMask != this.__state.stencilWriteMask) {
            this.gl.stencilMask(this.__state.stencilWriteMask);
            this.__contextState.stencilWriteMask = this.__state.stencilWriteMask;
          }
          if (this.__contextState.stencilCompareMode != this.__state.stencilCompareMode || this.__contextState.stencilReferenceValue != this.__state.stencilReferenceValue || this.__contextState.stencilReadMask != this.__state.stencilReadMask) {
            this.gl.stencilFunc(this.__getGLCompareMode(this.__state.stencilCompareMode), this.__state.stencilReferenceValue, this.__state.stencilReadMask);
            this.__contextState.stencilCompareMode = this.__state.stencilCompareMode;
            this.__contextState.stencilReferenceValue = this.__state.stencilReferenceValue;
            this.__contextState.stencilReadMask = this.__state.stencilReadMask;
          }
        },
        __flushGLTextures: function () {
          var a = 0;
          for (var b, c, d = 0, e = this.__state.textures.length; d < e;) {
            var f = d++;
            b = this.__state.textures[f];
            c = this.__state.samplerStates[f];
            if (c == null) {
              this.__state.samplerStates[f] = new Lh();
              c = this.__state.samplerStates[f];
            }
            this.gl.activeTexture(this.gl.TEXTURE0 + a);
            if (b != null) {
              if (b.__textureTarget == this.gl.TEXTURE_2D) {
                this.__bindGLTexture2D(b.__getTexture());
              } else {
                this.__bindGLTextureCubeMap(b.__getTexture());
              }
              this.__contextState.textures[f] = b;
              b.__setSamplerState(c);
            } else {
              this.__bindGLTexture2D(null);
            }
            if (this.__state.program != null && this.__state.program.__format == 0 && c.textureAlpha) {
              this.gl.activeTexture(this.gl.TEXTURE0 + a + 4);
              if (b != null && b.__alphaTexture != null) {
                if (b.__alphaTexture.__textureTarget == this.gl.TEXTURE_2D) {
                  this.__bindGLTexture2D(b.__alphaTexture.__getTexture());
                } else {
                  this.__bindGLTextureCubeMap(b.__alphaTexture.__getTexture());
                }
                b.__alphaTexture.__setSamplerState(c);
                this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[a].location, 1);
              } else {
                this.__bindGLTexture2D(null);
                if (this.__state.program.__agalAlphaSamplerEnabled[a] != null) {
                  this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[a].location, 0);
                }
              }
            }
            ++a;
          }
        },
        __flushGLViewport: function () {
          if (this.__state.renderToTexture == null) {
            if (this.__stage.context3D == this) {
              var a = this.backBufferWidth;
              var b = this.backBufferHeight;
              if (this.__stage3D == null && !this.__backBufferWantsBestResolution) {
                a = this.backBufferWidth * this.__stage.window.__scale | 0;
                b = this.backBufferHeight * this.__stage.window.__scale | 0;
              }
              var c = this.__stage3D == null ? 0 : this.__stage3D.get_x() | 0;
              var d = this.__stage.window.__height * this.__stage.window.__scale - b - (this.__stage3D == null ? 0 : this.__stage3D.get_y()) | 0;
              this.gl.viewport(c, d, a, b);
            } else {
              this.gl.viewport(0, 0, this.backBufferWidth, this.backBufferHeight);
            }
          } else {
            b = a = 0;
            if (this.__state.renderToTexture instanceof Bm) {
              b = this.__state.renderToTexture;
              a = b.__width;
              b = b.__height;
            } else if (this.__state.renderToTexture instanceof Vj) {
              b = this.__state.renderToTexture;
              a = b.__width;
              b = b.__height;
            } else if (this.__state.renderToTexture instanceof Cm) {
              b = this.__state.renderToTexture;
              b = a = b.__size;
            }
            this.gl.viewport(0, 0, a, b);
          }
        },
        __getGLBlend: function (a) {
          switch (a) {
            case 0:
              return this.gl.DST_ALPHA;
            case 1:
              return this.gl.DST_COLOR;
            case 2:
              return this.gl.ONE;
            case 3:
              return this.gl.ONE_MINUS_DST_ALPHA;
            case 4:
              return this.gl.ONE_MINUS_DST_COLOR;
            case 5:
              return this.gl.ONE_MINUS_SRC_ALPHA;
            case 6:
              return this.gl.ONE_MINUS_SRC_COLOR;
            case 7:
              return this.gl.SRC_ALPHA;
            case 8:
              return this.gl.SRC_COLOR;
            case 9:
              return this.gl.ZERO;
            default:
              throw new yd();
          }
        },
        __getGLCompareMode: function (a) {
          switch (a) {
            case 0:
              return this.gl.ALWAYS;
            case 1:
              return this.gl.EQUAL;
            case 2:
              return this.gl.GREATER;
            case 3:
              return this.gl.GEQUAL;
            case 4:
              return this.gl.LESS;
            case 5:
              return this.gl.LEQUAL;
            case 6:
              return this.gl.NEVER;
            case 7:
              return this.gl.NOTEQUAL;
            default:
              return this.gl.EQUAL;
          }
        },
        __getGLStencilAction: function (a) {
          switch (a) {
            case 0:
              return this.gl.DECR;
            case 1:
              return this.gl.DECR_WRAP;
            case 2:
              return this.gl.INCR;
            case 3:
              return this.gl.INCR_WRAP;
            case 4:
              return this.gl.INVERT;
            case 5:
              return this.gl.KEEP;
            case 6:
              return this.gl.REPLACE;
            case 7:
              return this.gl.ZERO;
            default:
              return this.gl.KEEP;
          }
        },
        __getGLTriangleFace: function (a) {
          switch (a) {
            case 0:
              return this.gl.BACK;
            case 1:
              return this.gl.FRONT;
            case 2:
              return this.gl.FRONT_AND_BACK;
            case 3:
              return this.gl.NONE;
            default:
              return this.gl.FRONT_AND_BACK;
          }
        },
        __renderStage3D: function (a) {
          var b = a.context3D;
          if (b != null && b != this && b.__frontBufferTexture != null && a.visible && this.backBufferHeight > 0 && this.backBufferWidth > 0) {
            if (this.__renderStage3DProgram == null) {
              var c = new wa();
              c.assemble(Dp.toString(1), "m44 op, va0, vc0\nmov v0, va1");
              var d = new wa();
              d.assemble(Dp.toString(0), "tex ft1, v0, fs0 <2d,nearest,nomip>\nmov oc, ft1");
              this.__renderStage3DProgram = this.createProgram();
              this.__renderStage3DProgram.upload(c.agalcode, d.agalcode);
            }
            this.setProgram(this.__renderStage3DProgram);
            this.setBlendFactors(2, 9);
            this.setColorMask(true, true, true, true);
            this.setCulling(3);
            this.setDepthTest(false, 0);
            this.setStencilActions();
            this.setStencilReferenceValue(0, 0, 0);
            this.setScissorRectangle(null);
            this.setTextureAt(0, b.__frontBufferTexture);
            this.setVertexBufferAt(0, a.__vertexBuffer, 0, 3);
            this.setVertexBufferAt(1, a.__vertexBuffer, 3, 2);
            this.setProgramConstantsFromMatrix(1, 0, a.__renderTransform, true);
            this.drawTriangles(a.__indexBuffer);
            this.__present = true;
          }
        },
        __setGLBlend: function (a) {
          if (this.__contextState.__enableGLBlend != a) {
            if (a) {
              this.gl.enable(this.gl.BLEND);
            } else {
              this.gl.disable(this.gl.BLEND);
            }
            this.__contextState.__enableGLBlend = a;
          }
        },
        __setGLBlendEquation: function (a) {
          if (this.__contextState.__glBlendEquation != a) {
            this.gl.blendEquation(a);
            this.__contextState.__glBlendEquation = a;
          }
        },
        __setGLCullFace: function (a) {
          if (this.__contextState.__enableGLCullFace != a) {
            if (a) {
              this.gl.enable(this.gl.CULL_FACE);
            } else {
              this.gl.disable(this.gl.CULL_FACE);
            }
            this.__contextState.__enableGLCullFace = a;
          }
        },
        __setGLDepthTest: function (a) {
          if (this.__contextState.__enableGLDepthTest != a) {
            if (a) {
              this.gl.enable(this.gl.DEPTH_TEST);
            } else {
              this.gl.disable(this.gl.DEPTH_TEST);
            }
            this.__contextState.__enableGLDepthTest = a;
          }
        },
        __setGLFrontFace: function (a) {
          if (this.__contextState.__frontFaceGLCCW != a) {
            this.gl.frontFace(a ? this.gl.CCW : this.gl.CW);
            this.__contextState.__frontFaceGLCCW = a;
          }
        },
        __setGLScissorTest: function (a) {
          if (this.__contextState.__enableGLScissorTest != a) {
            if (a) {
              this.gl.enable(this.gl.SCISSOR_TEST);
            } else {
              this.gl.disable(this.gl.SCISSOR_TEST);
            }
            this.__contextState.__enableGLScissorTest = a;
          }
        },
        __setGLStencilTest: function (a) {
          if (this.__contextState.__enableGLStencilTest != a) {
            if (a) {
              this.gl.enable(this.gl.STENCIL_TEST);
            } else {
              this.gl.disable(this.gl.STENCIL_TEST);
            }
            this.__contextState.__enableGLStencilTest = a;
          }
        },
        __class__: Kb
      });
      var Cp = {
        fromString: function (a) {
          switch (a) {
            case "dynamicDraw":
              return 0;
            case "staticDraw":
              return 1;
            default:
              return null;
          }
        },
        toString: function (a) {
          switch (a) {
            case 0:
              return "dynamicDraw";
            case 1:
              return "staticDraw";
            default:
              return null;
          }
        }
      };
      var Dp = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "fragment";
            case 1:
              return "vertex";
            default:
              return null;
          }
        }
      };
      var Vp = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "bgrPacked565";
            case 1:
              return "bgra";
            case 2:
              return "bgraPacked4444";
            case 3:
              return "compressed";
            case 4:
              return "compressedAlpha";
            case 5:
              return "rgbaHalfFloat";
            default:
              return null;
          }
        }
      };
      function Ko(a, b, c) {
        this.__context = a;
        this.__numIndices = b;
        a = this.__context.gl;
        this.__id = a.createBuffer();
        this.__usage = c == 0 ? a.DYNAMIC_DRAW : a.STATIC_DRAW;
      }
      h["openfl.display3D.IndexBuffer3D"] = Ko;
      Ko.__name__ = "openfl.display3D.IndexBuffer3D";
      Ko.prototype = {
        uploadFromTypedArray: function (a, b) {
          if (a != null) {
            b = this.__context.gl;
            this.__context.__bindGLElementArrayBuffer(this.__id);
            Yc.bufferData(b, b.ELEMENT_ARRAY_BUFFER, a, this.__usage);
          }
        },
        uploadFromVector: function (a, b, c) {
          if (a != null) {
            var d = b + c;
            var e = this.__tempUInt16Array;
            if (this.__tempUInt16Array == null || this.__tempUInt16Array.length < c) {
              this.__tempUInt16Array = c != null ? new Uint16Array(c) : null;
              if (e != null) {
                this.__tempUInt16Array.set(e);
              }
            }
            for (c = b; c < d;) {
              e = c++;
              this.__tempUInt16Array[e - b] = a.get(e);
            }
            this.uploadFromTypedArray(this.__tempUInt16Array);
          }
        },
        __class__: Ko
      };
      function Lo(a, b) {
        this.__context = a;
        this.__format = b;
        if (this.__format == 0) {
          this.__agalSamplerUsageMask = 0;
          this.__agalUniforms = new ab();
          this.__agalSamplerUniforms = new ab();
          this.__agalAlphaSamplerUniforms = new ab();
          this.__agalAlphaSamplerEnabled = [];
        } else {
          this.__glslAttribNames = [];
          this.__glslAttribTypes = [];
          this.__glslSamplerNames = [];
          this.__glslUniformLocations = [];
          this.__glslUniformNames = [];
          this.__glslUniformTypes = [];
        }
        this.__samplerStates = [];
      }
      h["openfl.display3D.Program3D"] = Lo;
      Lo.__name__ = "openfl.display3D.Program3D";
      Lo.prototype = {
        upload: function (a, b) {
          if (this.__format == 0) {
            var c = [];
            a = Jd.convertToGLSL(a, null);
            b = Jd.convertToGLSL(b, c);
            if (Ua.level == 5) {
              Ua.info(a, {
                fileName: "openfl/display3D/Program3D.hx",
                lineNumber: 399,
                className: "openfl.display3D.Program3D",
                methodName: "upload"
              });
              Ua.info(b, {
                fileName: "openfl/display3D/Program3D.hx",
                lineNumber: 400,
                className: "openfl.display3D.Program3D",
                methodName: "upload"
              });
            }
            this.__deleteShaders();
            this.__uploadFromGLSL(a, b);
            this.__buildAGALUniformList();
            b = 0;
            for (a = c.length; b < a;) {
              var d = b++;
              this.__samplerStates[d] = c[d];
            }
          }
        },
        __buildAGALUniformList: function () {
          if (this.__format != 1) {
            var a = this.__context.gl;
            this.__agalUniforms.clear();
            this.__agalSamplerUniforms.clear();
            this.__agalAlphaSamplerUniforms.clear();
            this.__agalAlphaSamplerEnabled = [];
            this.__agalSamplerUsageMask = 0;
            var b = a.getProgramParameter(this.__glProgram, a.ACTIVE_UNIFORMS);
            var c = new ab();
            var d = new ab();
            for (var e = 0; e < b;) {
              var f = e++;
              var g = a.getActiveUniform(this.__glProgram, f);
              var h = g.name;
              var n = g.size;
              var p = g.type;
              g = new Dm(this.__context);
              g.name = h;
              g.size = n;
              g.type = p;
              g.location = a.getUniformLocation(this.__glProgram, g.name);
              h = g.name.indexOf("[");
              if (h >= 0) {
                g.name = g.name.substring(0, h);
              }
              switch (g.type) {
                case 35674:
                  g.regCount = 2;
                  break;
                case 35675:
                  g.regCount = 3;
                  break;
                case 35676:
                  g.regCount = 4;
                  break;
                default:
                  g.regCount = 1;
              }
              g.regCount *= g.size;
              this.__agalUniforms.add(g);
              if (g.name == "vcPositionScale") {
                this.__agalPositionScale = g;
              } else if (w.startsWith(g.name, "vc")) {
                g.regIndex = H.parseInt(g.name.substring(2));
                g.regData = this.__context.__vertexConstants;
                c.add(g);
              } else if (w.startsWith(g.name, "fc")) {
                g.regIndex = H.parseInt(g.name.substring(2));
                g.regData = this.__context.__fragmentConstants;
                d.add(g);
              } else if (w.startsWith(g.name, "sampler") && g.name.indexOf("alpha") == -1) {
                g.regIndex = H.parseInt(g.name.substring(7));
                this.__agalSamplerUniforms.add(g);
                h = 0;
                n = g.regCount;
                while (h < n) {
                  p = h++;
                  this.__agalSamplerUsageMask |= 1 << g.regIndex + p;
                }
              } else if (w.startsWith(g.name, "sampler") && w.endsWith(g.name, "_alpha")) {
                h = g.name.indexOf("_") - 7;
                g.regIndex = H.parseInt(g.name.substring(7, 7 + h)) + 4;
                this.__agalAlphaSamplerUniforms.add(g);
              } else if (w.startsWith(g.name, "sampler") && w.endsWith(g.name, "_alphaEnabled")) {
                g.regIndex = H.parseInt(g.name.substring(7));
                this.__agalAlphaSamplerEnabled[g.regIndex] = g;
              }
              if (Ua.level == 5) {
                Ua.verbose("" + f + " name:" + g.name + " type:" + g.type + " size:" + g.size + " location:" + H.string(g.location), {
                  fileName: "openfl/display3D/Program3D.hx",
                  lineNumber: 577,
                  className: "openfl.display3D.Program3D",
                  methodName: "__buildAGALUniformList"
                });
              }
            }
            this.__agalVertexUniformMap = new Wj(lb.array(c));
            this.__agalFragmentUniformMap = new Wj(lb.array(d));
          }
        },
        __deleteShaders: function () {
          var a = this.__context.gl;
          if (this.__glProgram != null) {
            this.__glProgram = null;
          }
          if (this.__glVertexShader != null) {
            a.deleteShader(this.__glVertexShader);
            this.__glVertexShader = null;
          }
          if (this.__glFragmentShader != null) {
            a.deleteShader(this.__glFragmentShader);
            this.__glFragmentShader = null;
          }
        },
        __disable: function () {},
        __enable: function () {
          var a = this.__context.gl;
          a.useProgram(this.__glProgram);
          if (this.__format == 0) {
            this.__agalVertexUniformMap.markAllDirty();
            this.__agalFragmentUniformMap.markAllDirty();
            for (var b = this.__agalSamplerUniforms.h; b != null;) {
              var c = b.item;
              b = b.next;
              if (c.regCount == 1) {
                a.uniform1i(c.location, c.regIndex);
              } else {
                throw new yd("!!! TODO: uniform location on webgl");
              }
            }
            for (b = this.__agalAlphaSamplerUniforms.h; b != null;) {
              c = b.item;
              b = b.next;
              if (c.regCount == 1) {
                a.uniform1i(c.location, c.regIndex);
              } else {
                throw new yd("!!! TODO: uniform location on webgl");
              }
            }
          }
        },
        __flush: function () {
          if (this.__format == 0) {
            this.__agalVertexUniformMap.flush();
            this.__agalFragmentUniformMap.flush();
          }
        },
        __markDirty: function (a, b, c) {
          if (this.__format != 1) {
            if (a) {
              this.__agalVertexUniformMap.markDirty(b, c);
            } else {
              this.__agalFragmentUniformMap.markDirty(b, c);
            }
          }
        },
        __setPositionScale: function (a) {
          if (this.__format != 1 && this.__agalPositionScale != null) {
            this.__context.gl.uniform4fv(this.__agalPositionScale.location, a);
          }
        },
        __uploadFromGLSL: function (a, b) {
          var c = this.__context.gl;
          this.__glVertexSource = a;
          this.__glFragmentSource = b;
          this.__glVertexShader = c.createShader(c.VERTEX_SHADER);
          c.shaderSource(this.__glVertexShader, a);
          c.compileShader(this.__glVertexShader);
          if (c.getShaderParameter(this.__glVertexShader, c.COMPILE_STATUS) == 0) {
            var d = "Error compiling vertex shader\n" + c.getShaderInfoLog(this.__glVertexShader);
            Ua.error(d + ("\n" + a), {
              fileName: "openfl/display3D/Program3D.hx",
              lineNumber: 869,
              className: "openfl.display3D.Program3D",
              methodName: "__uploadFromGLSL"
            });
          }
          this.__glFragmentShader = c.createShader(c.FRAGMENT_SHADER);
          c.shaderSource(this.__glFragmentShader, b);
          c.compileShader(this.__glFragmentShader);
          if (c.getShaderParameter(this.__glFragmentShader, c.COMPILE_STATUS) == 0) {
            d = "Error compiling fragment shader\n" + c.getShaderInfoLog(this.__glFragmentShader);
            Ua.error(d + ("\n" + b), {
              fileName: "openfl/display3D/Program3D.hx",
              lineNumber: 881,
              className: "openfl.display3D.Program3D",
              methodName: "__uploadFromGLSL"
            });
          }
          this.__glProgram = c.createProgram();
          if (this.__format == 0) {
            for (b = 0; b < 16;) {
              var e = b++;
              d = "va" + e;
              if (a.indexOf(" " + d) != -1) {
                c.bindAttribLocation(this.__glProgram, e, d);
              }
            }
          } else {
            b = 0;
            a = this.__glslAttribNames;
            while (b < a.length) {
              d = a[b];
              ++b;
              if (d.indexOf("Position") > -1 && w.startsWith(d, "openfl_")) {
                c.bindAttribLocation(this.__glProgram, 0, d);
                break;
              }
            }
          }
          c.attachShader(this.__glProgram, this.__glVertexShader);
          c.attachShader(this.__glProgram, this.__glFragmentShader);
          c.linkProgram(this.__glProgram);
          if (c.getProgramParameter(this.__glProgram, c.LINK_STATUS) == 0) {
            d = "Unable to initialize the shader program\n" + c.getProgramInfoLog(this.__glProgram);
            Ua.error(d, {
              fileName: "openfl/display3D/Program3D.hx",
              lineNumber: 922,
              className: "openfl.display3D.Program3D",
              methodName: "__uploadFromGLSL"
            });
          }
        },
        __class__: Lo
      };
      function Dm(a) {
        this.context = a;
        this.isDirty = true;
        this.regDataPointer = new Fo(null, 0);
      }
      h["openfl.display3D.Uniform"] = Dm;
      Dm.__name__ = "openfl.display3D.Uniform";
      Dm.prototype = {
        flush: function () {
          var a = this.context.gl;
          var b = this.regIndex * 4;
          switch (this.type) {
            case 35664:
              Rp.uniform2fv(a, this.location, this.regData.subarray(b, b + this.regCount * 2));
              break;
            case 35665:
              var c = this.location;
              b = this.regData.subarray(b, b + this.regCount * 3);
              var d = null;
              if (d != null) {
                a.uniform3fv(c, b, d, null);
              } else {
                a.uniform3fv(c, b);
              }
              break;
            case 35666:
              c = this.location;
              b = this.regData.subarray(b, b + this.regCount * 4);
              d = null;
              if (d != null) {
                a.uniform4fv(c, b, d, null);
              } else {
                a.uniform4fv(c, b);
              }
              break;
            case 35674:
              Yc.uniformMatrix2fv(a, this.location, false, this.regData.subarray(b, b + this.size * 4));
              break;
            case 35675:
              Yc.uniformMatrix3fv(a, this.location, false, this.regData.subarray(b, b + this.size * 9));
              break;
            case 35676:
              Yc.uniformMatrix4fv(a, this.location, false, this.regData.subarray(b, b + this.size * 16));
              break;
            default:
              c = this.location;
              b = this.regData.subarray(b, b + this.regCount * 4);
              d = null;
              if (d != null) {
                a.uniform4fv(c, b, d, null);
              } else {
                a.uniform4fv(c, b);
              }
          }
        },
        __class__: Dm
      };
      function Wj(a) {
        this.__uniforms = a;
        this.__uniforms.sort(function (a, b) {
          return ma.compare(a.regIndex, b.regIndex);
        });
        var b = 0;
        a = 0;
        for (var c = this.__uniforms; a < c.length;) {
          var d = c[a];
          ++a;
          if (d.regIndex + d.regCount > b) {
            b = d.regIndex + d.regCount;
          }
        }
        this.__registerLookup = qb.toObjectVector(null, b);
        a = 0;
        for (c = this.__uniforms; a < c.length;) {
          d = c[a];
          ++a;
          b = 0;
          for (var e = d.regCount; b < e;) {
            var f = b++;
            this.__registerLookup.set(d.regIndex + f, d);
          }
        }
        this.__anyDirty = this.__allDirty = true;
      }
      h["openfl.display3D.UniformMap"] = Wj;
      Wj.__name__ = "openfl.display3D.UniformMap";
      Wj.prototype = {
        flush: function () {
          if (this.__anyDirty) {
            for (var a = 0, b = this.__uniforms; a < b.length;) {
              var c = b[a];
              ++a;
              if (this.__allDirty || c.isDirty) {
                c.flush();
                c.isDirty = false;
              }
            }
            this.__anyDirty = this.__allDirty = false;
          }
        },
        markAllDirty: function () {
          this.__anyDirty = this.__allDirty = true;
        },
        markDirty: function (a, b) {
          if (!this.__allDirty) {
            b = a + b;
            if (b > this.__registerLookup.get_length()) {
              b = this.__registerLookup.get_length();
            }
            while (a < b) {
              var c = this.__registerLookup.get(a);
              if (c != null) {
                this.__anyDirty = c.isDirty = true;
                a = c.regIndex + c.regCount;
              } else {
                ++a;
              }
            }
          }
        },
        __class__: Wj
      };
      function Mo(a, b, c, d) {
        this.__context = a;
        this.__numVertices = b;
        this.__vertexSize = c;
        a = this.__context.gl;
        this.__id = a.createBuffer();
        this.__stride = this.__vertexSize * 4;
        this.__usage = Cp.fromString(d) == 0 ? a.DYNAMIC_DRAW : a.STATIC_DRAW;
      }
      h["openfl.display3D.VertexBuffer3D"] = Mo;
      Mo.__name__ = "openfl.display3D.VertexBuffer3D";
      Mo.prototype = {
        uploadFromTypedArray: function (a, b) {
          if (a != null) {
            b = this.__context.gl;
            this.__context.__bindGLArrayBuffer(this.__id);
            Yc.bufferData(b, b.ARRAY_BUFFER, a, this.__usage);
          }
        },
        uploadFromVector: function (a, b, c) {
          if (a != null) {
            b *= this.__vertexSize;
            var d = c * this.__vertexSize;
            c = b + d;
            var e = this.__tempFloat32Array;
            if (this.__tempFloat32Array == null || this.__tempFloat32Array.length < d) {
              this.__tempFloat32Array = d != null ? new Float32Array(d) : null;
              if (e != null) {
                this.__tempFloat32Array.set(e);
              }
            }
            for (d = b; d < c;) {
              e = d++;
              this.__tempFloat32Array[e - b] = a.get(e);
            }
            this.uploadFromTypedArray(cj.toArrayBufferView(this.__tempFloat32Array));
          }
        },
        __class__: Mo
      };
      function Jd() {}
      h["openfl.display3D._internal.AGALConverter"] = Jd;
      Jd.__name__ = "openfl.display3D._internal.AGALConverter";
      Jd.prefixFromType = function (a, b) {
        switch (a) {
          case 0:
            return "va";
          case 1:
            if (b == eg.VERTEX) {
              return "vc";
            } else {
              return "fc";
            }
          case 2:
            if (b == eg.VERTEX) {
              return "vt";
            } else {
              return "ft";
            }
          case 3:
            return "output_";
          case 4:
            return "v";
          case 5:
            return "sampler";
          default:
            throw new yd("Invalid data!");
        }
      };
      Jd.readUInt64 = function (a) {
        var b = a.readInt();
        a = a.readInt();
        return new Ab(a, b);
      };
      Jd.convertToGLSL = function (a, b) {
        a.position = 0;
        a.__endian = 1;
        var c = a.readByte() & 255;
        if (c == 176) {
          return a.readUTF();
        }
        if (c != 160) {
          throw new yd("Magic value must be 0xA0, may not be AGAL");
        }
        var d = a.readInt();
        if (d != 1) {
          throw new yd("Version must be 1");
        }
        if ((a.readByte() & 255) != 161) {
          throw new yd("Shader type ID must be 0xA1");
        }
        c = (a.readByte() & 255) == 0 ? eg.VERTEX : eg.FRAGMENT;
        var e = new Em();
        var f = "";
        while (true) {
          d = a.position;
          if (!Dc.gt(Re.get_length(a), d)) {
            break;
          }
          var g = a.readInt();
          d = a.readUnsignedInt();
          var h = Jd.readUInt64(a);
          var n = Jd.readUInt64(a);
          d = Ci.parse(d, c);
          h = Mh.parse(h, c, d.mask);
          var p = Mh.parse(n, c, d.mask);
          f += "\t";
          switch (g) {
            case 0:
              f += H.string(d.toGLSL() + " = " + h.toGLSL() + "; // mov");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              break;
            case 1:
              f += H.string(d.toGLSL() + " = " + h.toGLSL() + " + " + p.toGLSL() + "; // add");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 2:
              f += H.string(d.toGLSL() + " = " + h.toGLSL() + " - " + p.toGLSL() + "; // sub");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 3:
              f += H.string(d.toGLSL() + " = " + h.toGLSL() + " * " + p.toGLSL() + "; // mul");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 4:
              f += H.string(d.toGLSL() + " = " + h.toGLSL() + " / " + p.toGLSL() + "; // div");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 5:
              f = h.toGLSL().indexOf(".") > -1 ? f + H.string(d.toGLSL() + " = 1.0 / " + h.toGLSL() + "; // rcp") : f + H.string(d.toGLSL() + " = vec4(1) / " + h.toGLSL() + "; // rcp");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              break;
            case 6:
              f += H.string(d.toGLSL() + " = min(" + h.toGLSL() + ", " + p.toGLSL() + "); // min");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 7:
              f += H.string(d.toGLSL() + " = max(" + h.toGLSL() + ", " + p.toGLSL() + "); // max");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 8:
              f += H.string(d.toGLSL() + " = fract(" + h.toGLSL() + "); // frc");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              break;
            case 9:
              f += H.string(d.toGLSL() + " = sqrt(" + h.toGLSL() + "); // sqrt");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              break;
            case 10:
              f += H.string(d.toGLSL() + " = inversesqrt(" + h.toGLSL() + "); // rsq");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              break;
            case 11:
              f += H.string(d.toGLSL() + " = pow(" + h.toGLSL() + ", " + p.toGLSL() + "); // pow");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 12:
              f += H.string(d.toGLSL() + " = log2(" + h.toGLSL() + "); // log");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              break;
            case 13:
              f += H.string(d.toGLSL() + " = exp2(" + h.toGLSL() + "); // exp");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              break;
            case 14:
              f += H.string(d.toGLSL() + " = normalize(" + h.toGLSL() + "); // normalize");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              break;
            case 15:
              f += H.string(d.toGLSL() + " = sin(" + h.toGLSL() + "); // sin");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              break;
            case 16:
              f += H.string(d.toGLSL() + " = cos(" + h.toGLSL() + "); // cos");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              break;
            case 17:
              h.sourceMask = p.sourceMask = 7;
              f += H.string(d.toGLSL() + " = cross(vec3(" + h.toGLSL() + "), vec3(" + p.toGLSL() + ")); // crs");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 18:
              h.sourceMask = p.sourceMask = 7;
              f += H.string(d.toGLSL() + " = vec4(dot(vec3(" + h.toGLSL() + "), vec3(" + p.toGLSL() + ")))" + d.getWriteMask() + "; // dp3");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 19:
              h.sourceMask = p.sourceMask = 15;
              f += H.string(d.toGLSL() + " = vec4(dot(vec4(" + h.toGLSL() + "), vec4(" + p.toGLSL() + ")))" + d.getWriteMask() + "; // dp4");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 20:
              f += H.string(d.toGLSL() + " = abs(" + h.toGLSL() + "); // abs");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              break;
            case 21:
              f += H.string(d.toGLSL() + " = -" + h.toGLSL() + "; // neg");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              break;
            case 22:
              f += H.string(d.toGLSL() + " = clamp(" + h.toGLSL() + ", 0.0, 1.0); // saturate");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              break;
            case 23:
              g = e.getRegisterUsage(p);
              if (g != qa.VECTOR_4 && g != qa.VECTOR_4_ARRAY) {
                f += H.string(d.toGLSL() + " = " + h.toGLSL() + " * mat3(" + p.toGLSL(false) + "); // m33");
                e.addDR(d, qa.VECTOR_4);
                e.addSR(h, qa.VECTOR_4);
                e.addSR(p, qa.MATRIX_4_4);
              } else {
                h.sourceMask = p.sourceMask = 7;
                f += H.string(d.toGLSL() + " = vec3(dot(" + h.toGLSL(true) + "," + p.toGLSL(true, 0) + "), dot(" + h.toGLSL(true) + "," + p.toGLSL(true, 1) + "),dot(" + h.toGLSL(true) + "," + p.toGLSL(true, 2) + ")); // m33");
                e.addDR(d, qa.VECTOR_4);
                e.addSR(h, qa.VECTOR_4);
                e.addSR(p, qa.VECTOR_4, 0);
                e.addSR(p, qa.VECTOR_4, 1);
                e.addSR(p, qa.VECTOR_4, 2);
              }
              break;
            case 24:
              g = e.getRegisterUsage(p);
              if (g != qa.VECTOR_4 && g != qa.VECTOR_4_ARRAY) {
                f += H.string(d.toGLSL() + " = " + h.toGLSL() + " * " + p.toGLSL(false) + "; // m44");
                e.addDR(d, qa.VECTOR_4);
                e.addSR(h, qa.VECTOR_4);
                e.addSR(p, qa.MATRIX_4_4);
              } else {
                h.sourceMask = p.sourceMask = 15;
                f += H.string(d.toGLSL() + " = vec4(dot(" + h.toGLSL(true) + "," + p.toGLSL(true, 0) + "), dot(" + h.toGLSL(true) + "," + p.toGLSL(true, 1) + "), dot(" + h.toGLSL(true) + "," + p.toGLSL(true, 2) + "), dot(" + h.toGLSL(true) + "," + p.toGLSL(true, 3) + ")); // m44");
                e.addDR(d, qa.VECTOR_4);
                e.addSR(h, qa.VECTOR_4);
                e.addSR(p, qa.VECTOR_4, 0);
                e.addSR(p, qa.VECTOR_4, 1);
                e.addSR(p, qa.VECTOR_4, 2);
                e.addSR(p, qa.VECTOR_4, 3);
              }
              break;
            case 25:
              d.mask &= 7;
              g = e.getRegisterUsage(p);
              if (g != qa.VECTOR_4 && g != qa.VECTOR_4_ARRAY) {
                f += H.string(d.toGLSL() + " = " + h.toGLSL() + " * " + p.toGLSL(false) + "; // m34");
                e.addDR(d, qa.VECTOR_4);
                e.addSR(h, qa.VECTOR_4);
                e.addSR(p, qa.MATRIX_4_4);
              } else {
                h.sourceMask = p.sourceMask = 15;
                f += H.string(d.toGLSL() + " = vec3(dot(" + h.toGLSL(true) + "," + p.toGLSL(true, 0) + "), dot(" + h.toGLSL(true) + "," + p.toGLSL(true, 1) + "),dot(" + h.toGLSL(true) + "," + p.toGLSL(true, 2) + ")); // m34");
                e.addDR(d, qa.VECTOR_4);
                e.addSR(h, qa.VECTOR_4);
                e.addSR(p, qa.VECTOR_4, 0);
                e.addSR(p, qa.VECTOR_4, 1);
                e.addSR(p, qa.VECTOR_4, 2);
              }
              break;
            case 39:
              h.sourceMask = 15;
              f += H.string("if (any(lessThan(" + h.toGLSL() + ", vec4(0)))) discard;");
              e.addSR(h, qa.VECTOR_4);
              break;
            case 40:
              p = Di.parse(n, c);
              switch (p.d) {
                case 0:
                  if (p.t == 2) {
                    h.sourceMask = 3;
                    e.addSaR(p, qa.SAMPLER_2D_ALPHA);
                    f += H.string("if (" + p.toGLSL() + "_alphaEnabled) {\n");
                    f += H.string("\t\t" + d.toGLSL() + " = vec4(texture2D(" + p.toGLSL() + ", " + h.toGLSL() + ").xyz, texture2D(" + p.toGLSL() + "_alpha, " + h.toGLSL() + ").x); // tex + alpha\n");
                    f += "\t} else {\n";
                    f += H.string("\t\t" + d.toGLSL() + " = texture2D(" + p.toGLSL() + ", " + h.toGLSL() + "); // tex\n");
                    f += "\t}";
                  } else {
                    h.sourceMask = 3;
                    e.addSaR(p, qa.SAMPLER_2D);
                    f += H.string(d.toGLSL() + " = texture2D(" + p.toGLSL() + ", " + h.toGLSL() + "); // tex");
                  }
                  break;
                case 1:
                  if (p.t == 2) {
                    h.sourceMask = 7;
                    e.addSaR(p, qa.SAMPLER_CUBE_ALPHA);
                    f += H.string("if (" + p.toGLSL() + "_alphaEnabled) {\n");
                    f += H.string("\t\t" + d.toGLSL() + " = vec4(textureCube(" + p.toGLSL() + ", " + h.toGLSL() + ").xyz, textureCube(" + p.toGLSL() + "_alpha, " + h.toGLSL() + ").x); // tex + alpha\n");
                    f += "\t} else {\n";
                    f += H.string("\t\t" + d.toGLSL() + " = textureCube(" + p.toGLSL() + ", " + h.toGLSL() + "); // tex");
                    f += "\t}";
                  } else {
                    h.sourceMask = 7;
                    f += H.string(d.toGLSL() + " = textureCube(" + p.toGLSL() + ", " + h.toGLSL() + "); // tex");
                    e.addSaR(p, qa.SAMPLER_CUBE);
                  }
              }
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              if (b != null) {
                b[p.n] = p.toSamplerState();
              }
              break;
            case 41:
              h.sourceMask = p.sourceMask = 15;
              f += H.string(d.toGLSL() + " = vec4(greaterThanEqual(" + h.toGLSL() + ", " + p.toGLSL() + "))" + d.getWriteMask() + "; // ste");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 42:
              h.sourceMask = p.sourceMask = 15;
              f += H.string(d.toGLSL() + " = vec4(lessThan(" + h.toGLSL() + ", " + p.toGLSL() + "))" + d.getWriteMask() + "; // slt");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 44:
              h.sourceMask = p.sourceMask = 15;
              f += H.string(d.toGLSL() + " = vec4(equal(" + h.toGLSL() + ", " + p.toGLSL() + "))" + d.getWriteMask() + "; // seq");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 45:
              h.sourceMask = p.sourceMask = 15;
              f += H.string(d.toGLSL() + " = vec4(notEqual(" + h.toGLSL() + ", " + p.toGLSL() + "))" + d.getWriteMask() + "; // sne");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(h, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            default:
              throw new yd("Opcode " + g);
          }
          f += "\n";
        }
        if (Jd.limitedProfile == null) {
          d = wg.context.getParameter(7938);
          Jd.limitedProfile = d.indexOf("OpenGL ES") > -1 || d.indexOf("WebGL") > -1;
        }
        a = "" + H.string("// AGAL " + (c == eg.VERTEX ? "vertex" : "fragment") + " shader\n");
        a = Jd.limitedProfile ? a + "#version 100\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n" : a + "#version 120\n";
        a += H.string(e.toGLSL(false));
        if (c == eg.VERTEX) {
          a += "uniform vec4 vcPositionScale;\n";
        }
        a = a + "void main() {\n" + H.string(e.toGLSL(true));
        a += H.string(f);
        if (c == eg.VERTEX) {
          a += "\tgl_Position *= vcPositionScale;\n";
        }
        return a + "}\n";
      };
      function Ci() {}
      h["openfl.display3D._internal._AGALConverter.DestRegister"] = Ci;
      Ci.__name__ = "openfl.display3D._internal._AGALConverter.DestRegister";
      Ci.parse = function (a, b) {
        var c = new Ci();
        c.programType = b;
        c.type = a >>> 24 & 15;
        c.mask = a >>> 16 & 15;
        c.n = a & 65535;
        return c;
      };
      Ci.prototype = {
        getWriteMask: function () {
          var a = ".";
          if ((this.mask & 1) != 0) {
            a += "x";
          }
          if ((this.mask & 2) != 0) {
            a += "y";
          }
          if ((this.mask & 4) != 0) {
            a += "z";
          }
          if ((this.mask & 8) != 0) {
            a += "w";
          }
          return a;
        },
        toGLSL: function (a) {
          if (a == null) {
            a = true;
          }
          var b = this.type == 3 ? this.programType == eg.VERTEX ? "gl_Position" : "gl_FragColor" : Jd.prefixFromType(this.type, this.programType) + this.n;
          if (a && this.mask != 15) {
            b += this.getWriteMask();
          }
          return b;
        },
        __class__: Ci
      };
      var eg = x["openfl.display3D._internal._AGALConverter.ProgramType"] = {
        __ename__: "openfl.display3D._internal._AGALConverter.ProgramType",
        __constructs__: null,
        VERTEX: {
          _hx_name: "VERTEX",
          _hx_index: 0,
          __enum__: "openfl.display3D._internal._AGALConverter.ProgramType",
          toString: p
        },
        FRAGMENT: {
          _hx_name: "FRAGMENT",
          _hx_index: 1,
          __enum__: "openfl.display3D._internal._AGALConverter.ProgramType",
          toString: p
        }
      };
      eg.__constructs__ = [eg.VERTEX, eg.FRAGMENT];
      function Em() {
        this.mEntries = [];
      }
      h["openfl.display3D._internal.RegisterMap"] = Em;
      Em.__name__ = "openfl.display3D._internal.RegisterMap";
      Em.prototype = {
        add: function (a, b, c, d) {
          for (var e = 0, f = this.mEntries; e < f.length;) {
            var g = f[e];
            ++e;
            if (g.type == a && g.name == b && g.number == c) {
              if (g.usage != d) {
                throw new yd("Cannot use register in multiple ways yet (mat4/vec4)");
              }
              return;
            }
          }
          g = new No();
          g.type = a;
          g.name = b;
          g.number = c;
          g.usage = d;
          this.mEntries.push(g);
        },
        addDR: function (a, b) {
          this.add(a.type, a.toGLSL(false), a.n, b);
        },
        addSaR: function (a, b) {
          this.add(a.type, a.toGLSL(), a.n, b);
        },
        addSR: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (a.d != 0) {
            this.add(a.itype, Jd.prefixFromType(a.itype, a.programType) + a.n, a.n, qa.VECTOR_4);
            this.add(a.type, Jd.prefixFromType(a.type, a.programType) + a.o, a.o, qa.VECTOR_4_ARRAY);
          } else {
            this.add(a.type, a.toGLSL(false, c), a.n + c, b);
          }
        },
        getRegisterUsage: function (a) {
          if (a.d != 0) {
            return qa.VECTOR_4_ARRAY;
          } else {
            return this.getUsage(a.type, a.toGLSL(false), a.n);
          }
        },
        getUsage: function (a, b, c) {
          for (var d = 0, e = this.mEntries; d < e.length;) {
            var f = e[d];
            ++d;
            if (f.type == a && f.name == b && f.number == c) {
              return f.usage;
            }
          }
          return qa.UNUSED;
        },
        toGLSL: function (a) {
          this.mEntries.sort(function (a, b) {
            return a.number - b.number;
          });
          this.mEntries.sort(function (a, b) {
            return ta.__cast(a.type, Vi) - ta.__cast(b.type, Vi);
          });
          for (var b = "", c = 0, d = this.mEntries.length; c < d;) {
            var e = c++;
            e = this.mEntries[e];
            if ((!a || e.type == 2) && (!!a || e.type != 2) && e.type != 3) {
              switch (e.type) {
                case 0:
                  b += "attribute ";
                  break;
                case 1:
                  b += "uniform ";
                  break;
                case 2:
                  b += "\t";
                  break;
                case 3:
                  break;
                case 4:
                  b += "varying ";
                  break;
                case 5:
                  b += "uniform ";
                  break;
                default:
                  throw new yd();
              }
              switch (e.usage._hx_index) {
                case 0:
                  Ua.info("Missing switch patten: RegisterUsage.UNUSED", {
                    fileName: "openfl/display3D/_internal/AGALConverter.hx",
                    lineNumber: 751,
                    className: "openfl.display3D._internal.RegisterMap",
                    methodName: "toGLSL"
                  });
                  break;
                case 1:
                  b += "vec4 ";
                  break;
                case 2:
                  b += "mat4 ";
                  break;
                case 3:
                  b += "sampler2D ";
                  break;
                case 5:
                  b += "samplerCube ";
                  break;
                case 7:
                  b += "vec4 ";
              }
              if (e.usage == qa.SAMPLER_2D_ALPHA) {
                b += "sampler2D ";
                b += H.string(e.name);
                b += ";\n";
                b += "uniform ";
                b += "sampler2D ";
                b += H.string(e.name + "_alpha");
                b += ";\n";
                b += "uniform ";
                b += "bool ";
                b += H.string(e.name + "_alphaEnabled");
              } else if (e.usage == qa.SAMPLER_CUBE_ALPHA) {
                b += "samplerCube ";
                b += H.string(e.name);
                b += ";\n";
                b += "uniform ";
                b += "samplerCube ";
                b += H.string(e.name + "_alpha");
                b += ";\n";
                b += "uniform ";
                b += "bool ";
                b += H.string(e.name + "_alphaEnabled");
              } else {
                b = e.usage == qa.VECTOR_4_ARRAY ? b + H.string(e.name + "[128]") : b + H.string(e.name);
              }
              b += ";\n";
            }
          }
          return b;
        },
        __class__: Em
      };
      function No() {}
      h["openfl.display3D._internal._AGALConverter.RegisterMapEntry"] = No;
      No.__name__ = "openfl.display3D._internal._AGALConverter.RegisterMapEntry";
      No.prototype = {
        __class__: No
      };
      var qa = x["openfl.display3D._internal._AGALConverter.RegisterUsage"] = {
        __ename__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
        __constructs__: null,
        UNUSED: {
          _hx_name: "UNUSED",
          _hx_index: 0,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        VECTOR_4: {
          _hx_name: "VECTOR_4",
          _hx_index: 1,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        MATRIX_4_4: {
          _hx_name: "MATRIX_4_4",
          _hx_index: 2,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        SAMPLER_2D: {
          _hx_name: "SAMPLER_2D",
          _hx_index: 3,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        SAMPLER_2D_ALPHA: {
          _hx_name: "SAMPLER_2D_ALPHA",
          _hx_index: 4,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        SAMPLER_CUBE: {
          _hx_name: "SAMPLER_CUBE",
          _hx_index: 5,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        SAMPLER_CUBE_ALPHA: {
          _hx_name: "SAMPLER_CUBE_ALPHA",
          _hx_index: 6,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        VECTOR_4_ARRAY: {
          _hx_name: "VECTOR_4_ARRAY",
          _hx_index: 7,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        }
      };
      qa.__constructs__ = [qa.UNUSED, qa.VECTOR_4, qa.MATRIX_4_4, qa.SAMPLER_2D, qa.SAMPLER_2D_ALPHA, qa.SAMPLER_CUBE, qa.SAMPLER_CUBE_ALPHA, qa.VECTOR_4_ARRAY];
      function Di() {}
      h["openfl.display3D._internal._AGALConverter.SamplerRegister"] = Di;
      Di.__name__ = "openfl.display3D._internal._AGALConverter.SamplerRegister";
      Di.parse = function (a, b) {
        var c = new Di();
        c.programType = b;
        b = 60;
        b = b == 0 ? new Ab(a.high, a.low) : b < 32 ? new Ab(a.high >> b, a.high << 32 - b | a.low >>> b) : new Ab(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.f = b;
        b = 56;
        b = b == 0 ? new Ab(a.high, a.low) : b < 32 ? new Ab(a.high >> b, a.high << 32 - b | a.low >>> b) : new Ab(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.m = b;
        b = 52;
        b = b == 0 ? new Ab(a.high, a.low) : b < 32 ? new Ab(a.high >> b, a.high << 32 - b | a.low >>> b) : new Ab(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.w = b;
        b = 48;
        b = b == 0 ? new Ab(a.high, a.low) : b < 32 ? new Ab(a.high >> b, a.high << 32 - b | a.low >>> b) : new Ab(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.s = b;
        b = 44;
        b = b == 0 ? new Ab(a.high, a.low) : b < 32 ? new Ab(a.high >> b, a.high << 32 - b | a.low >>> b) : new Ab(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.d = b;
        b = 40;
        b = b == 0 ? new Ab(a.high, a.low) : b < 32 ? new Ab(a.high >> b, a.high << 32 - b | a.low >>> b) : new Ab(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.t = b;
        b = 32;
        b = b == 0 ? new Ab(a.high, a.low) : b < 32 ? new Ab(a.high >> b, a.high << 32 - b | a.low >>> b) : new Ab(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.type = b;
        b = 16;
        b = b == 0 ? new Ab(a.high, a.low) : b < 32 ? new Ab(a.high >> b, a.high << 32 - b | a.low >>> b) : new Ab(a.high >> 31, a.high >> b - 32);
        b = b.low & 255;
        c.b = b;
        b = a.low & 65535;
        c.n = b;
        return c;
      };
      Di.prototype = {
        toGLSL: function () {
          return Jd.prefixFromType(this.type, this.programType) + this.n;
        },
        toSamplerState: function () {
          switch (this.f) {
            case 0:
              var a = 5;
              break;
            case 1:
              a = 4;
              break;
            default:
              throw new yd();
          }
          switch (this.m) {
            case 0:
              var b = 2;
              break;
            case 1:
              b = 1;
              break;
            case 2:
              b = 0;
              break;
            default:
              throw new yd();
          }
          switch (this.w) {
            case 0:
              var c = 0;
              break;
            case 1:
              c = 2;
              break;
            default:
              throw new yd();
          }
          return new Lh(c, a, b, (this.b << 24 >> 24) / 8, (this.s & 4) == 4, (this.s & 1) == 1, this.t == 2);
        },
        __class__: Di
      };
      function Mh() {}
      h["openfl.display3D._internal._AGALConverter.SourceRegister"] = Mh;
      Mh.__name__ = "openfl.display3D._internal._AGALConverter.SourceRegister";
      Mh.parse = function (a, b, c) {
        var d = new Mh();
        d.programType = b;
        b = 63;
        b = b == 0 ? new Ab(a.high, a.low) : b < 32 ? new Ab(a.high >> b, a.high << 32 - b | a.low >>> b) : new Ab(a.high >> 31, a.high >> b - 32);
        b = b.low & 1;
        d.d = b;
        b = 48;
        b = b == 0 ? new Ab(a.high, a.low) : b < 32 ? new Ab(a.high >> b, a.high << 32 - b | a.low >>> b) : new Ab(a.high >> 31, a.high >> b - 32);
        b = b.low & 3;
        d.q = b;
        b = 40;
        b = b == 0 ? new Ab(a.high, a.low) : b < 32 ? new Ab(a.high >> b, a.high << 32 - b | a.low >>> b) : new Ab(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        d.itype = b;
        b = 32;
        b = b == 0 ? new Ab(a.high, a.low) : b < 32 ? new Ab(a.high >> b, a.high << 32 - b | a.low >>> b) : new Ab(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        d.type = b;
        b = 24;
        b = b == 0 ? new Ab(a.high, a.low) : b < 32 ? new Ab(a.high >> b, a.high << 32 - b | a.low >>> b) : new Ab(a.high >> 31, a.high >> b - 32);
        b = b.low & 255;
        d.s = b;
        b = 16;
        b = b == 0 ? new Ab(a.high, a.low) : b < 32 ? new Ab(a.high >> b, a.high << 32 - b | a.low >>> b) : new Ab(a.high >> 31, a.high >> b - 32);
        b = b.low & 255;
        d.o = b;
        b = a.low & 65535;
        d.n = b;
        d.sourceMask = c;
        return d;
      };
      Mh.prototype = {
        toGLSL: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = true;
          }
          if (this.type == 3) {
            if (this.programType == eg.VERTEX) {
              return "gl_Position";
            } else {
              return "gl_FragColor";
            }
          }
          var c = this.s == 228 && this.sourceMask == 15;
          var d = "";
          if (this.type != 5 && !c) {
            if ((this.sourceMask & 1) != 0) {
              switch (this.s & 3) {
                case 0:
                  d += "x";
                  break;
                case 1:
                  d += "y";
                  break;
                case 2:
                  d += "z";
                  break;
                case 3:
                  d += "w";
              }
            }
            if ((this.sourceMask & 2) != 0) {
              switch (this.s >> 2 & 3) {
                case 0:
                  d += "x";
                  break;
                case 1:
                  d += "y";
                  break;
                case 2:
                  d += "z";
                  break;
                case 3:
                  d += "w";
              }
            }
            if ((this.sourceMask & 4) != 0) {
              switch (this.s >> 4 & 3) {
                case 0:
                  d += "x";
                  break;
                case 1:
                  d += "y";
                  break;
                case 2:
                  d += "z";
                  break;
                case 3:
                  d += "w";
              }
            }
            if ((this.sourceMask & 8) != 0) {
              switch (this.s >> 6 & 3) {
                case 0:
                  d += "x";
                  break;
                case 1:
                  d += "y";
                  break;
                case 2:
                  d += "z";
                  break;
                case 3:
                  d += "w";
              }
            }
          }
          c = Jd.prefixFromType(this.type, this.programType);
          if (this.d == 0) {
            c += this.n + b;
          } else {
            c += this.o;
            var e = "";
            switch (this.q) {
              case 0:
                e = "x";
                break;
              case 1:
                e = "y";
                break;
              case 2:
                e = "z";
                break;
              case 3:
                e = "w";
            }
            e = Jd.prefixFromType(this.itype, this.programType) + this.n + "." + e;
            c += "[ int(" + e + ") +" + b + "]";
          }
          if (a && d != "") {
            c += "." + d;
          }
          return c;
        },
        __class__: Mh
      };
      function Uj() {
        this.backBufferEnableDepthAndStencil = false;
        this.blendDestinationAlphaFactor = 9;
        this.blendSourceAlphaFactor = 2;
        this.blendDestinationRGBFactor = 9;
        this.blendSourceRGBFactor = 2;
        this.colorMaskAlpha = this.colorMaskBlue = this.colorMaskGreen = this.colorMaskRed = true;
        this.culling = 3;
        this.depthCompareMode = 4;
        this.depthMask = true;
        this.samplerStates = [];
        this.scissorRectangle = new ea();
        this.stencilCompareMode = 0;
        this.stencilPass = this.stencilFail = this.stencilDepthFail = 5;
        this.stencilReadMask = 255;
        this.stencilReferenceValue = 0;
        this.stencilTriangleFace = 2;
        this.stencilWriteMask = 255;
        this.textures = [];
        this.__frontFaceGLCCW = true;
        this.__glBlendEquation = 32774;
      }
      h["openfl.display3D._internal.Context3DState"] = Uj;
      Uj.__name__ = "openfl.display3D._internal.Context3DState";
      Uj.prototype = {
        __class__: Uj
      };
      function Zb(a) {
        ua.call(this);
        this.__context = a;
        var b = this.__context.gl;
        this.__textureID = b.createTexture();
        this.__textureContext = this.__context.__context;
        if (Zb.__supportsBGRA == null) {
          Zb.__textureInternalFormat = b.RGBA;
          Zb.__supportsBGRA = false;
          Zb.__textureFormat = b.RGBA;
          Zb.__compressedFormats = new rc();
          Zb.__compressedFormatsAlpha = new rc();
          a = b.getExtension("WEBGL_compressed_texture_s3tc");
          var c = b.getExtension("WEBGL_compressed_texture_etc1");
          b = b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
          if (a != null) {
            var d = a.COMPRESSED_RGBA_S3TC_DXT1_EXT;
            Zb.__compressedFormats.h[0] = d;
            d = a.COMPRESSED_RGBA_S3TC_DXT5_EXT;
            Zb.__compressedFormatsAlpha.h[0] = d;
          }
          if (c != null) {
            d = c.COMPRESSED_RGB_ETC1_WEBGL;
            Zb.__compressedFormats.h[2] = d;
            d = c.COMPRESSED_RGB_ETC1_WEBGL;
            Zb.__compressedFormatsAlpha.h[2] = d;
          }
          if (b != null) {
            d = b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
            Zb.__compressedFormats.h[1] = d;
            d = b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
            Zb.__compressedFormatsAlpha.h[1] = d;
          }
        }
        this.__internalFormat = Zb.__textureInternalFormat;
        this.__format = Zb.__textureFormat;
      }
      h["openfl.display3D.textures.TextureBase"] = Zb;
      Zb.__name__ = "openfl.display3D.textures.TextureBase";
      Zb.__super__ = ua;
      Zb.prototype = q(ua.prototype, {
        dispose: function () {
          var a = this.__context.gl;
          if (this.__alphaTexture != null) {
            this.__alphaTexture.dispose();
            this.__alphaTexture = null;
          }
          if (this.__textureID != null) {
            a.deleteTexture(this.__textureID);
            this.__textureID = null;
          }
          if (this.__glFramebuffer != null) {
            a.deleteFramebuffer(this.__glFramebuffer);
            this.__glFramebuffer = null;
          }
          if (this.__glDepthRenderbuffer != null) {
            a.deleteRenderbuffer(this.__glDepthRenderbuffer);
            this.__glDepthRenderbuffer = null;
          }
          if (this.__glStencilRenderbuffer != null) {
            a.deleteRenderbuffer(this.__glStencilRenderbuffer);
            this.__glStencilRenderbuffer = null;
          }
        },
        __getGLFramebuffer: function (a, b, c) {
          b = this.__context.gl;
          if (this.__glFramebuffer == null) {
            this.__glFramebuffer = b.createFramebuffer();
            this.__context.__bindGLFramebuffer(this.__glFramebuffer);
            b.framebufferTexture2D(b.FRAMEBUFFER, b.COLOR_ATTACHMENT0, b.TEXTURE_2D, this.__textureID, 0);
            if (this.__context.__enableErrorChecking) {
              c = b.checkFramebufferStatus(b.FRAMEBUFFER);
              if (c != b.FRAMEBUFFER_COMPLETE) {
                Ua.warn("Error: Context3D.setRenderToTexture status:" + c + " width:" + this.__width + " height:" + this.__height, {
                  fileName: "openfl/display3D/textures/TextureBase.hx",
                  lineNumber: 201,
                  className: "openfl.display3D.textures.TextureBase",
                  methodName: "__getGLFramebuffer"
                });
              }
            }
          }
          if (a && this.__glDepthRenderbuffer == null) {
            this.__context.__bindGLFramebuffer(this.__glFramebuffer);
            if (Kb.__glDepthStencil != 0) {
              this.__glStencilRenderbuffer = this.__glDepthRenderbuffer = b.createRenderbuffer();
              b.bindRenderbuffer(b.RENDERBUFFER, this.__glDepthRenderbuffer);
              b.renderbufferStorage(b.RENDERBUFFER, Kb.__glDepthStencil, this.__width, this.__height);
              b.framebufferRenderbuffer(b.FRAMEBUFFER, b.DEPTH_STENCIL_ATTACHMENT, b.RENDERBUFFER, this.__glDepthRenderbuffer);
            } else {
              this.__glDepthRenderbuffer = b.createRenderbuffer();
              this.__glStencilRenderbuffer = b.createRenderbuffer();
              b.bindRenderbuffer(b.RENDERBUFFER, this.__glDepthRenderbuffer);
              b.renderbufferStorage(b.RENDERBUFFER, b.DEPTH_COMPONENT16, this.__width, this.__height);
              b.bindRenderbuffer(b.RENDERBUFFER, this.__glStencilRenderbuffer);
              b.renderbufferStorage(b.RENDERBUFFER, b.STENCIL_INDEX8, this.__width, this.__height);
              b.framebufferRenderbuffer(b.FRAMEBUFFER, b.DEPTH_ATTACHMENT, b.RENDERBUFFER, this.__glDepthRenderbuffer);
              b.framebufferRenderbuffer(b.FRAMEBUFFER, b.STENCIL_ATTACHMENT, b.RENDERBUFFER, this.__glStencilRenderbuffer);
            }
            if (this.__context.__enableErrorChecking) {
              c = b.checkFramebufferStatus(b.FRAMEBUFFER);
              if (c != b.FRAMEBUFFER_COMPLETE) {
                Ua.warn("Error: Context3D.setRenderToTexture status:" + c + " width:" + this.__width + " height:" + this.__height, {
                  fileName: "openfl/display3D/textures/TextureBase.hx",
                  lineNumber: 239,
                  className: "openfl.display3D.textures.TextureBase",
                  methodName: "__getGLFramebuffer"
                });
              }
            }
            b.bindRenderbuffer(b.RENDERBUFFER, null);
          }
          return this.__glFramebuffer;
        },
        __getImage: function (a) {
          var b = a.image;
          if (!a.__isValid || b == null) {
            return null;
          }
          Xa.sync(b, false);
          a = this.__context.gl;
          if (b.type == Id.DATA || b.get_premultiplied()) {
            if (!b.get_premultiplied() && b.get_transparent()) {
              a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0);
              b = b.clone();
              b.set_premultiplied(true);
            }
          } else {
            a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
          }
          if (b.get_format() != 0) {
            b = b.clone();
            b.set_format(0);
            b.buffer.premultiplied = true;
          }
          return b;
        },
        __getTexture: function () {
          return this.__textureID;
        },
        __setSamplerState: function (a) {
          if (!a.equals(this.__samplerState)) {
            var b = this.__context.gl;
            if (this.__textureTarget == this.__context.gl.TEXTURE_CUBE_MAP) {
              this.__context.__bindGLTextureCubeMap(this.__textureID);
            } else {
              this.__context.__bindGLTexture2D(this.__textureID);
            }
            var c;
            switch (a.wrap) {
              case 0:
                var d = c = b.CLAMP_TO_EDGE;
                break;
              case 1:
                c = b.CLAMP_TO_EDGE;
                d = b.REPEAT;
                break;
              case 2:
                d = c = b.REPEAT;
                break;
              case 3:
                c = b.REPEAT;
                d = b.CLAMP_TO_EDGE;
                break;
              default:
                throw new Rb("wrap bad enum");
            }
            var e = a.filter == 5 ? b.NEAREST : b.LINEAR;
            switch (a.mipfilter) {
              case 0:
                var f = a.filter == 5 ? b.NEAREST_MIPMAP_LINEAR : b.LINEAR_MIPMAP_LINEAR;
                break;
              case 1:
                f = a.filter == 5 ? b.NEAREST_MIPMAP_NEAREST : b.LINEAR_MIPMAP_NEAREST;
                break;
              case 2:
                f = a.filter == 5 ? b.NEAREST : b.LINEAR;
                break;
              default:
                throw new Rb("mipfiter bad enum");
            }
            b.texParameteri(this.__textureTarget, b.TEXTURE_MIN_FILTER, f);
            b.texParameteri(this.__textureTarget, b.TEXTURE_MAG_FILTER, e);
            b.texParameteri(this.__textureTarget, b.TEXTURE_WRAP_S, c);
            b.texParameteri(this.__textureTarget, b.TEXTURE_WRAP_T, d);
            if (this.__samplerState == null) {
              this.__samplerState = a.clone();
            }
            this.__samplerState.copyFrom(a);
            return true;
          }
          return false;
        },
        __uploadFromImage: function (a) {
          var b = this.__context.gl;
          var c;
          if (this.__textureTarget == b.TEXTURE_2D) {
            if (a.buffer.bitsPerPixel == 1) {
              var d = c = b.ALPHA;
            } else {
              c = Zb.__textureInternalFormat;
              d = Zb.__textureFormat;
            }
            this.__context.__bindGLTexture2D(this.__textureID);
            if (a.type == Id.DATA || a.get_premultiplied()) {
              if (!a.get_premultiplied() && a.get_transparent()) {
                b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
              }
            } else {
              b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
            }
            if (a.type == Id.DATA) {
              Yc.texImage2D(b, b.TEXTURE_2D, 0, c, a.buffer.width, a.buffer.height, 0, d, b.UNSIGNED_BYTE, a.get_data());
            } else {
              Yc.texImage2D(b, b.TEXTURE_2D, 0, c, d, b.UNSIGNED_BYTE, a.get_src());
            }
            this.__context.__bindGLTexture2D(null);
          }
        },
        __class__: Zb
      });
      function Cm(a, b, c, d, e) {
        Zb.call(this, a);
        this.__width = this.__height = this.__size = b;
        this.__optimizeForRenderToTexture = d;
        this.__streamingLevels = e;
        this.__textureTarget = this.__context.gl.TEXTURE_CUBE_MAP;
        this.__uploadedSides = 0;
      }
      h["openfl.display3D.textures.CubeTexture"] = Cm;
      Cm.__name__ = "openfl.display3D.textures.CubeTexture";
      Cm.__super__ = Zb;
      Cm.prototype = q(Zb.prototype, {
        __getGLFramebuffer: function (a, b, c) {
          var d = this.__context.gl;
          if (this.__glFramebuffer == null) {
            this.__glFramebuffer = d.createFramebuffer();
            this.__framebufferSurface = -1;
          }
          if (this.__framebufferSurface != c && (this.__framebufferSurface = c, this.__context.__bindGLFramebuffer(this.__glFramebuffer), d.framebufferTexture2D(d.FRAMEBUFFER, d.COLOR_ATTACHMENT0, d.TEXTURE_CUBE_MAP_POSITIVE_X + c, this.__textureID, 0), this.__context.__enableErrorChecking)) {
            var e = d.checkFramebufferStatus(d.FRAMEBUFFER);
            if (e != d.FRAMEBUFFER_COMPLETE) {
              Ua.error("Error: Context3D.setRenderToTexture status:" + e + " width:" + this.__width + " height:" + this.__height, {
                fileName: "openfl/display3D/textures/CubeTexture.hx",
                lineNumber: 279,
                className: "openfl.display3D.textures.CubeTexture",
                methodName: "__getGLFramebuffer"
              });
            }
          }
          return Zb.prototype.__getGLFramebuffer.call(this, a, b, c);
        },
        __setSamplerState: function (a) {
          if (Zb.prototype.__setSamplerState.call(this, a)) {
            var b = this.__context.gl;
            if (a.mipfilter != 2 && !this.__samplerState.mipmapGenerated) {
              b.generateMipmap(b.TEXTURE_CUBE_MAP);
              this.__samplerState.mipmapGenerated = true;
            }
            if (Kb.__glMaxTextureMaxAnisotropy != 0) {
              switch (a.filter) {
                case 0:
                  a = 16;
                  break;
                case 1:
                  a = 2;
                  break;
                case 2:
                  a = 4;
                  break;
                case 3:
                  a = 8;
                  break;
                default:
                  a = 1;
              }
              if (a > Kb.__glMaxTextureMaxAnisotropy) {
                a = Kb.__glMaxTextureMaxAnisotropy;
              }
              b.texParameterf(b.TEXTURE_CUBE_MAP, Kb.__glTextureMaxAnisotropy, a);
            }
            return true;
          }
          return false;
        },
        __class__: Cm
      });
      function Vj(a, b, c, d, e) {
        Zb.call(this, a);
        this.__width = b;
        this.__height = c;
        this.__optimizeForRenderToTexture = e;
        this.__textureTarget = this.__context.gl.TEXTURE_2D;
        this.uploadFromTypedArray(null);
        if (e) {
          this.__getGLFramebuffer(true, 0, 0);
        }
      }
      h["openfl.display3D.textures.RectangleTexture"] = Vj;
      Vj.__name__ = "openfl.display3D.textures.RectangleTexture";
      Vj.__super__ = Zb;
      Vj.prototype = q(Zb.prototype, {
        uploadFromBitmapData: function (a) {
          if (a != null && (a = this.__getImage(a), a != null)) {
            if (a.buffer != null && a.buffer.data == null && a.buffer.get_src() != null) {
              var b = this.__context.gl;
              this.__context.__bindGLTexture2D(this.__textureID);
              Yc.texImage2D(b, this.__textureTarget, 0, this.__internalFormat, this.__format, b.UNSIGNED_BYTE, a.buffer.get_src());
              this.__context.__bindGLTexture2D(null);
            } else {
              this.uploadFromTypedArray(a.get_data());
            }
          }
        },
        uploadFromTypedArray: function (a) {
          var b = this.__context.gl;
          this.__context.__bindGLTexture2D(this.__textureID);
          Yc.texImage2D(b, this.__textureTarget, 0, this.__internalFormat, this.__width, this.__height, 0, this.__format, b.UNSIGNED_BYTE, a);
          this.__context.__bindGLTexture2D(null);
        },
        __setSamplerState: function (a) {
          if (Zb.prototype.__setSamplerState.call(this, a)) {
            var b = this.__context.gl;
            if (Kb.__glMaxTextureMaxAnisotropy != 0) {
              switch (a.filter) {
                case 0:
                  a = 16;
                  break;
                case 1:
                  a = 2;
                  break;
                case 2:
                  a = 4;
                  break;
                case 3:
                  a = 8;
                  break;
                default:
                  a = 1;
              }
              if (a > Kb.__glMaxTextureMaxAnisotropy) {
                a = Kb.__glMaxTextureMaxAnisotropy;
              }
              b.texParameterf(b.TEXTURE_2D, Kb.__glTextureMaxAnisotropy, a);
            }
            return true;
          }
          return false;
        },
        __class__: Vj
      });
      function Bm(a, b, c, d, e, f) {
        Zb.call(this, a);
        this.__width = b;
        this.__height = c;
        this.__optimizeForRenderToTexture = e;
        this.__streamingLevels = f;
        a = this.__context.gl;
        this.__textureTarget = a.TEXTURE_2D;
        this.__context.__bindGLTexture2D(this.__textureID);
        Yc.texImage2D(a, this.__textureTarget, 0, this.__internalFormat, this.__width, this.__height, 0, this.__format, a.UNSIGNED_BYTE, null);
        this.__context.__bindGLTexture2D(null);
        if (e) {
          this.__getGLFramebuffer(true, 0, 0);
        }
      }
      h["openfl.display3D.textures.Texture"] = Bm;
      Bm.__name__ = "openfl.display3D.textures.Texture";
      Bm.__super__ = Zb;
      Bm.prototype = q(Zb.prototype, {
        __setSamplerState: function (a) {
          if (Zb.prototype.__setSamplerState.call(this, a)) {
            var b = this.__context.gl;
            if (a.mipfilter != 2 && !this.__samplerState.mipmapGenerated) {
              b.generateMipmap(b.TEXTURE_2D);
              this.__samplerState.mipmapGenerated = true;
            }
            if (Kb.__glMaxTextureMaxAnisotropy != 0) {
              switch (a.filter) {
                case 0:
                  a = 16;
                  break;
                case 1:
                  a = 2;
                  break;
                case 2:
                  a = 4;
                  break;
                case 3:
                  a = 8;
                  break;
                default:
                  a = 1;
              }
              if (a > Kb.__glMaxTextureMaxAnisotropy) {
                a = Kb.__glMaxTextureMaxAnisotropy;
              }
              b.texParameterf(b.TEXTURE_2D, Kb.__glTextureMaxAnisotropy, a);
            }
            return true;
          }
          return false;
        },
        __class__: Bm
      });
      function Oo(a) {
        Zb.call(this, a);
        this.__textureTarget = this.__context.gl.TEXTURE_2D;
      }
      h["openfl.display3D.textures.VideoTexture"] = Oo;
      Oo.__name__ = "openfl.display3D.textures.VideoTexture";
      Oo.__super__ = Zb;
      Oo.prototype = q(Zb.prototype, {
        dispose: function () {
          if (this.__netStream != null && this.__netStream.__video != null) {
            this.__netStream.__video.removeEventListener("timeupdate", l(this, this.__onTimeUpdate));
          }
          Zb.prototype.dispose.call(this);
        },
        __onTimeUpdate: function (a) {
          if (this.__netStream != null && this.__netStream.__video.currentTime != this.__cacheTime && this.__netStream.__video.readyState >= 2) {
            this.__textureReady();
          }
        },
        __getTexture: function () {
          if (this.__netStream.__video.currentTime != this.__cacheTime && this.__netStream.__video.readyState >= 2) {
            var a = this.__context.gl;
            this.__context.__bindGLTexture2D(this.__textureID);
            Yc.texImage2D(a, a.TEXTURE_2D, 0, a.RGBA, a.RGBA, a.UNSIGNED_BYTE, this.__netStream.__video);
            this.__cacheTime = this.__netStream.__video.currentTime;
          }
          return this.__textureID;
        },
        __textureReady: function () {
          this.videoWidth = this.__netStream.__video.videoWidth;
          this.videoHeight = this.__netStream.__video.videoHeight;
          var a = new Ga("textureReady");
          this.dispatchEvent(a);
        },
        __class__: Oo
      });
      function Rb(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = "";
        }
        K.call(this, a);
        this.errorID = b;
        this.name = "Error";
        this.__skipStack++;
      }
      h["openfl.errors.Error"] = Rb;
      Rb.__name__ = "openfl.errors.Error";
      Rb.__super__ = K;
      Rb.prototype = q(K.prototype, {
        toString: function () {
          return this.get_message() ?? "Error";
        },
        __class__: Rb
      });
      function Oh(a) {
        if (a == null) {
          a = "";
        }
        Rb.call(this, a);
        this.name = "ArgumentError";
        this.__skipStack++;
      }
      h["openfl.errors.ArgumentError"] = Oh;
      Oh.__name__ = "openfl.errors.ArgumentError";
      Oh.__super__ = Rb;
      Oh.prototype = q(Rb.prototype, {
        __class__: Oh
      });
      function Ei(a) {
        if (a == null) {
          a = "";
        }
        Rb.call(this, a);
        this.name = "IOError";
        this.__skipStack++;
      }
      h["openfl.errors.IOError"] = Ei;
      Ei.__name__ = "openfl.errors.IOError";
      Ei.__super__ = Rb;
      Ei.prototype = q(Rb.prototype, {
        __class__: Ei
      });
      function uj(a, b) {
        Ei.call(this, "End of file was encountered");
        this.name = "EOFError";
        this.errorID = 2030;
        this.__skipStack++;
      }
      h["openfl.errors.EOFError"] = uj;
      uj.__name__ = "openfl.errors.EOFError";
      uj.__super__ = Ei;
      uj.prototype = q(Ei.prototype, {
        __class__: uj
      });
      function yd(a) {
        if (a == null) {
          a = "";
        }
        Rb.call(this, a, 0);
        this.name = "IllegalOperationError";
        this.__skipStack++;
      }
      h["openfl.errors.IllegalOperationError"] = yd;
      yd.__name__ = "openfl.errors.IllegalOperationError";
      yd.__super__ = Rb;
      yd.prototype = q(Rb.prototype, {
        __class__: yd
      });
      function Ni(a) {
        if (a == null) {
          a = "";
        }
        Rb.call(this, a, 0);
        this.name = "RangeError";
        this.__skipStack++;
      }
      h["openfl.errors.RangeError"] = Ni;
      Ni.__name__ = "openfl.errors.RangeError";
      Ni.__super__ = Rb;
      Ni.prototype = q(Rb.prototype, {
        __class__: Ni
      });
      function Mi(a) {
        if (a == null) {
          a = "";
        }
        Rb.call(this, a, 0);
        this.name = "TypeError";
        this.__skipStack++;
      }
      h["openfl.errors.TypeError"] = Mi;
      Mi.__name__ = "openfl.errors.TypeError";
      Mi.__super__ = Rb;
      Mi.prototype = q(Rb.prototype, {
        __class__: Mi
      });
      function Ga(a, b, c) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        this.type = a;
        this.bubbles = b;
        this.cancelable = c;
        this.eventPhase = 2;
      }
      h["openfl.events.Event"] = Ga;
      Ga.__name__ = "openfl.events.Event";
      Ga.prototype = {
        isDefaultPrevented: function () {
          return this.__preventDefault;
        },
        preventDefault: function () {
          if (this.cancelable) {
            this.__preventDefault = true;
          }
        },
        stopImmediatePropagation: function () {
          this.__isCanceledNow = this.__isCanceled = true;
        },
        stopPropagation: function () {
          this.__isCanceled = true;
        },
        __class__: Ga
      };
      function Fm(a, b, c, d, e, f, g) {
        if (g == null) {
          g = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.timestamp = d;
        this.accelerationX = e;
        this.accelerationY = f;
        this.accelerationZ = g;
      }
      h["openfl.events.AccelerometerEvent"] = Fm;
      Fm.__name__ = "openfl.events.AccelerometerEvent";
      Fm.__super__ = Ga;
      Fm.prototype = q(Ga.prototype, {
        __class__: Fm
      });
      function Fi(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.activating = d;
      }
      h["openfl.events.ActivityEvent"] = Fi;
      Fi.__name__ = "openfl.events.ActivityEvent";
      Fi.__super__ = Ga;
      Fi.prototype = q(Ga.prototype, {
        __class__: Fi
      });
      function Xf(a, b, c, d) {
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.text = d;
      }
      h["openfl.events.TextEvent"] = Xf;
      Xf.__name__ = "openfl.events.TextEvent";
      Xf.__super__ = Ga;
      Xf.prototype = q(Ga.prototype, {
        __class__: Xf
      });
      function Xe(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Xf.call(this, a, b, c, d);
        this.errorID = e;
      }
      h["openfl.events.ErrorEvent"] = Xe;
      Xe.__name__ = "openfl.events.ErrorEvent";
      Xe.__super__ = Xf;
      Xe.prototype = q(Xf.prototype, {
        __class__: Xe
      });
      function Li(a) {
        this.active = false;
        this.reset(a);
      }
      h["openfl.events._EventDispatcher.DispatchIterator"] = Li;
      Li.__name__ = "openfl.events._EventDispatcher.DispatchIterator";
      Li.prototype = {
        copy: function () {
          if (!this.isCopy) {
            this.list = this.list.slice();
            this.isCopy = true;
          }
        },
        hasNext: function () {
          return this.index < this.list.length;
        },
        next: function () {
          return this.list[this.index++];
        },
        remove: function (a, b) {
          if (this.active) {
            if (this.isCopy) {
              b = this.index;
              for (var c = this.list.length; b < c;) {
                var d = b++;
                if (this.list[d] == a) {
                  this.list.splice(d, 1);
                  break;
                }
              }
            } else if (b < this.index) {
              this.index--;
            }
          }
        },
        reset: function (a) {
          this.list = a;
          this.isCopy = false;
          this.index = 0;
        },
        start: function () {
          this.active = true;
        },
        stop: function () {
          this.active = false;
        },
        __class__: Li
      };
      function jh(a, b, c, d) {
        if (d && jh.supportsWeakReference) {
          this.weakRefCallback = new WeakRef(a);
        } else {
          this.callback = a;
        }
        this.useCapture = b;
        this.priority = c;
        this.useWeakReference = d;
      }
      h["openfl.events._EventDispatcher.Listener"] = jh;
      jh.__name__ = "openfl.events._EventDispatcher.Listener";
      jh.prototype = {
        match: function (a, b) {
          var c = this.callback;
          if (this.weakRefCallback != null && (c = this.weakRefCallback.deref(), c == null)) {
            return false;
          } else if (c == a) {
            return this.useCapture == b;
          } else {
            return false;
          }
        },
        __class__: jh
      };
      function Jh(a, b, c, d, e, f) {
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = false;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.keyCode = f;
        this.shiftKey = e;
        this.relatedObject = d;
      }
      h["openfl.events.FocusEvent"] = Jh;
      Jh.__name__ = "openfl.events.FocusEvent";
      Jh.__super__ = Ga;
      Jh.prototype = q(Ga.prototype, {
        __class__: Jh
      });
      function Cg(a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Fi.call(this, a, b, c);
        this.fullScreen = d;
        this.interactive = e;
      }
      h["openfl.events.FullScreenEvent"] = Cg;
      Cg.__name__ = "openfl.events.FullScreenEvent";
      Cg.__super__ = Fi;
      Cg.prototype = q(Fi.prototype, {
        __class__: Cg
      });
      function bi(a, b, c, d) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        Ga.call(this, a, b, c);
        this.device = d;
      }
      h["openfl.events.GameInputEvent"] = bi;
      bi.__name__ = "openfl.events.GameInputEvent";
      bi.__super__ = Ga;
      bi.prototype = q(Ga.prototype, {
        __class__: bi
      });
      function Xj(a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        this.responseHeaders = [];
        this.status = d;
        this.redirected = e;
        Ga.call(this, a, b, c);
      }
      h["openfl.events.HTTPStatusEvent"] = Xj;
      Xj.__name__ = "openfl.events.HTTPStatusEvent";
      Xj.__super__ = Ga;
      Xj.prototype = q(Ga.prototype, {
        __class__: Xj
      });
      function Yj(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        Xe.call(this, a, b, c, d, e);
      }
      h["openfl.events.IOErrorEvent"] = Yj;
      Yj.__name__ = "openfl.events.IOErrorEvent";
      Yj.__super__ = Xe;
      Yj.prototype = q(Xe.prototype, {
        __class__: Yj
      });
      function ym(a, b, c, d, e, f, g, h, n, p, l) {
        if (l == null) {
          l = false;
        }
        if (p == null) {
          p = false;
        }
        if (n == null) {
          n = false;
        }
        if (h == null) {
          h = false;
        }
        if (g == null) {
          g = false;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.charCode = d;
        this.keyCode = e;
        this.keyLocation = f ?? 0;
        this.ctrlKey = g;
        this.altKey = h;
        this.shiftKey = n;
        this.controlKey = p;
        this.commandKey = l;
        this.__updateAfterEventFlag = false;
      }
      h["openfl.events.KeyboardEvent"] = ym;
      ym.__name__ = "openfl.events.KeyboardEvent";
      ym.__super__ = Ga;
      ym.prototype = q(Ga.prototype, {
        __class__: ym
      });
      function Xb(a, b, c, d, e, f, g, h, n, p, l, m, t, q) {
        if (q == null) {
          q = 0;
        }
        if (t == null) {
          t = false;
        }
        if (m == null) {
          m = false;
        }
        if (l == null) {
          l = 0;
        }
        if (p == null) {
          p = false;
        }
        if (n == null) {
          n = false;
        }
        if (h == null) {
          h = false;
        }
        if (g == null) {
          g = false;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        Ga.call(this, a, b, c);
        this.shiftKey = n;
        this.altKey = h;
        this.ctrlKey = g;
        this.bubbles = b;
        this.relatedObject = f;
        this.delta = l;
        this.localX = d;
        this.localY = e;
        this.buttonDown = p;
        this.commandKey = m;
        this.controlKey = t;
        this.clickCount = q;
        this.isRelatedObjectInaccessible = false;
        this.stageY = this.stageX = NaN;
        this.__updateAfterEventFlag = false;
      }
      h["openfl.events.MouseEvent"] = Xb;
      Xb.__name__ = "openfl.events.MouseEvent";
      Xb.__create = function (a, b, c, d, e, f, g) {
        if (g == null) {
          g = 0;
        }
        a = new Xb(a, true, false, e.x, e.y, null, Xb.__ctrlKey, Xb.__altKey, Xb.__shiftKey, Xb.__buttonDown, g, Xb.__commandKey, Xb.__controlKey);
        a.stageX = c;
        a.stageY = d;
        a.target = f;
        return a;
      };
      Xb.__super__ = Ga;
      Xb.prototype = q(Ga.prototype, {
        __class__: Xb
      });
      function Zj(a, b, c, d) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        this.info = d;
        Ga.call(this, a, b, c);
      }
      h["openfl.events.NetStatusEvent"] = Zj;
      Zj.__name__ = "openfl.events.NetStatusEvent";
      Zj.__super__ = Ga;
      Zj.prototype = q(Ga.prototype, {
        __class__: Zj
      });
      function zi(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.bytesLoaded = d;
        this.bytesTotal = e;
      }
      h["openfl.events.ProgressEvent"] = zi;
      zi.__name__ = "openfl.events.ProgressEvent";
      zi.__super__ = Ga;
      zi.prototype = q(Ga.prototype, {
        __class__: zi
      });
      function lk(a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.objectMatrix = d;
        this.objectColorTransform = e;
        this.allowSmoothing = f;
      }
      h["openfl.events.RenderEvent"] = lk;
      lk.__name__ = "openfl.events.RenderEvent";
      lk.__super__ = Ga;
      lk.prototype = q(Ga.prototype, {
        __class__: lk
      });
      function Gm(a, b, c) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.data = new wd(0);
        this.data.__endian = 1;
        this.position = 0;
      }
      h["openfl.events.SampleDataEvent"] = Gm;
      Gm.__name__ = "openfl.events.SampleDataEvent";
      Gm.__super__ = Ga;
      Gm.prototype = q(Ga.prototype, {
        getBufferSize: function () {
          var a = Dc.toFloat(Re.get_length(this.data)) / Dc.toFloat(4) / 2 | 0;
          if (a > 0) {
            if (a != 0 && (a & a - 1) == 0 && a >= 2048 && a <= 8192) {
              this.tempBuffer = new Float32Array(a * 2);
              return a;
            }
            throw new Rb("To be consistent with flash the listener function registered to SampleDataEvent has to provide 2048, 4096 or 8192 samples if targeting HTML5.");
          }
          return 0;
        },
        getSamples: function (a) {
          this.data.position = 0;
          this.tempBuffer = Qp.fromBytes(Re.toBytes(this.data));
          this.leftChannel = a.outputBuffer.getChannelData(0);
          this.rightChannel = a.outputBuffer.getChannelData(1);
          for (var b = a = 0, c = Dc.toFloat(Re.get_length(this.data)) / Dc.toFloat(2) | 0; b < c;) {
            var d = b++;
            this.leftChannel[d] = this.tempBuffer[a++];
            this.rightChannel[d] = this.tempBuffer[a++];
          }
        },
        __class__: Gm
      });
      function Hm(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Xe.call(this, a, b, c, d, e);
      }
      h["openfl.events.SecurityErrorEvent"] = Hm;
      Hm.__name__ = "openfl.events.SecurityErrorEvent";
      Hm.__super__ = Xe;
      Hm.prototype = q(Xe.prototype, {
        __class__: Hm
      });
      function Ze(a, b, c, d, e, f, g, h, n, p, l, m, t, q, u, x, w, A, y, z) {
        if (x == null) {
          x = false;
        }
        if (u == null) {
          u = false;
        }
        if (q == null) {
          q = false;
        }
        if (t == null) {
          t = false;
        }
        if (m == null) {
          m = false;
        }
        if (p == null) {
          p = 0;
        }
        if (n == null) {
          n = 0;
        }
        if (h == null) {
          h = 0;
        }
        if (g == null) {
          g = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        Ga.call(this, a, b, c);
        this.touchPointID = d;
        this.isPrimaryTouchPoint = e;
        this.localX = f;
        this.localY = g;
        this.sizeX = h;
        this.sizeY = n;
        this.pressure = p;
        this.relatedObject = l;
        this.ctrlKey = m;
        this.altKey = t;
        this.shiftKey = q;
        this.commandKey = u;
        this.controlKey = x;
        this.stageY = this.stageX = NaN;
        this.__updateAfterEventFlag = false;
      }
      h["openfl.events.TouchEvent"] = Ze;
      Ze.__name__ = "openfl.events.TouchEvent";
      Ze.__create = function (a, b, c, d, e, f) {
        a = new Ze(a, true, false, 0, true, e.x, e.y, 1, 1, 1);
        a.stageX = c;
        a.stageY = d;
        a.target = f;
        return a;
      };
      Ze.__super__ = Ga;
      Ze.prototype = q(Ga.prototype, {
        __class__: Ze
      });
      function xm(a, b, c, d) {
        if (c == null) {
          c = true;
        }
        if (b == null) {
          b = true;
        }
        Xe.call(this, a, b, c);
        this.error = d;
      }
      h["openfl.events.UncaughtErrorEvent"] = xm;
      xm.__name__ = "openfl.events.UncaughtErrorEvent";
      xm.__super__ = Xe;
      xm.prototype = q(Xe.prototype, {
        __class__: xm
      });
      function sm() {
        ua.call(this);
      }
      h["openfl.events.UncaughtErrorEvents"] = sm;
      sm.__name__ = "openfl.events.UncaughtErrorEvents";
      sm.__super__ = ua;
      sm.prototype = q(ua.prototype, {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          ua.prototype.addEventListener.call(this, a, b, c, d, e);
          if (Object.prototype.hasOwnProperty.call(this.__eventMap.h, "uncaughtError")) {
            this.__enabled = true;
          }
        },
        removeEventListener: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          ua.prototype.removeEventListener.call(this, a, b, c);
          if (!Object.prototype.hasOwnProperty.call(this.__eventMap.h, "uncaughtError")) {
            this.__enabled = false;
          }
        },
        __class__: sm
      });
      var Pp = {
        fromString: function (a) {
          switch (a) {
            case "full":
              return 0;
            case "inner":
              return 1;
            case "outer":
              return 2;
            default:
              return null;
          }
        }
      };
      function Im() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "uniform sampler2D openfl_Texture;\n\n\t\tvarying vec2 vBlurCoords[7];\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 sum = vec4(0.0);\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[0]) * 0.00443;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[1]) * 0.05399;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[2]) * 0.24197;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[3]) * 0.39894;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[4]) * 0.24197;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[5]) * 0.05399;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[6]) * 0.00443;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tuniform vec2 uRadius;\n\t\tvarying vec2 vBlurCoords[7];\n\t\tuniform vec2 uTextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\tvec2 r = uRadius / uTextureSize;\n\t\t\tvBlurCoords[0] = openfl_TextureCoord - r;\n\t\t\tvBlurCoords[1] = openfl_TextureCoord - r * 0.75;\n\t\t\tvBlurCoords[2] = openfl_TextureCoord - r * 0.5;\n\t\t\tvBlurCoords[3] = openfl_TextureCoord;\n\t\t\tvBlurCoords[4] = openfl_TextureCoord + r * 0.5;\n\t\t\tvBlurCoords[5] = openfl_TextureCoord + r * 0.75;\n\t\t\tvBlurCoords[6] = openfl_TextureCoord + r;\n\n\t\t}";
        }
        nc.call(this);
        this.uRadius.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._BlurFilter.BlurShader"] = Im;
      Im.__name__ = "openfl.filters._BlurFilter.BlurShader";
      Im.__super__ = nc;
      Im.prototype = q(nc.prototype, {
        __update: function () {
          this.uTextureSize.value = [this.__texture.input.width, this.__texture.input.height];
          nc.prototype.__update.call(this);
        },
        __class__: Im
      });
      function If(a, b, c) {
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 4;
        }
        if (a == null) {
          a = 4;
        }
        se.call(this);
        this.set_blurX(a);
        this.set_blurY(b);
        this.set_quality(c);
        this.__needSecondBitmapData = true;
        this.__preserveObject = false;
        this.__renderDirty = true;
      }
      h["openfl.filters.BlurFilter"] = If;
      If.__name__ = "openfl.filters.BlurFilter";
      If.__super__ = se;
      If.prototype = q(se.prototype, {
        clone: function () {
          return new If(this.__blurX, this.__blurY, this.__quality);
        },
        __applyFilter: function (a, b, c, d) {
          new Date().getTime();
          c = Ac.gaussianBlur(a.image, b.image, c.__toLimeRectangle(), d.__toLimeVector2(), this.__blurX, this.__blurY, this.__quality);
          new Date().getTime();
          if (c == a.image) {
            return a;
          } else {
            return b;
          }
        },
        __initShader: function (a, b, c) {
          if (b < this.__horizontalPasses) {
            a = Math.pow(0.5, b >> 1);
            If.__blurShader.uRadius.value[0] = this.get_blurX() * a;
            If.__blurShader.uRadius.value[1] = 0;
          } else {
            a = Math.pow(0.5, b - this.__horizontalPasses >> 1);
            If.__blurShader.uRadius.value[0] = 0;
            If.__blurShader.uRadius.value[1] = this.get_blurY() * a;
          }
          return If.__blurShader;
        },
        get_blurX: function () {
          return this.__blurX;
        },
        set_blurX: function (a) {
          if (a != this.__blurX) {
            this.__blurX = a;
            this.__renderDirty = true;
            this.__rightExtension = this.__leftExtension = a > 0 ? Math.ceil(a) : 0;
          }
          return a;
        },
        get_blurY: function () {
          return this.__blurY;
        },
        set_blurY: function (a) {
          if (a != this.__blurY) {
            this.__blurY = a;
            this.__renderDirty = true;
            this.__bottomExtension = this.__topExtension = a > 0 ? Math.ceil(a) : 0;
          }
          return a;
        },
        set_quality: function (a) {
          this.__horizontalPasses = this.__blurX <= 0 ? 0 : Math.round(a / 4 * this.__blurX) + 1;
          this.__verticalPasses = this.__blurY <= 0 ? 0 : Math.round(a / 4 * this.__blurY) + 1;
          this.__numShaderPasses = this.__horizontalPasses + this.__verticalPasses;
          if (a != this.__quality) {
            this.__renderDirty = true;
          }
          return this.__quality = a;
        },
        __class__: If,
        __properties__: {
          set_quality: "set_quality",
          set_blurY: "set_blurY",
          get_blurY: "get_blurY",
          set_blurX: "set_blurX",
          get_blurX: "get_blurX"
        }
      });
      function ak() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\t\tuniform sampler2D openfl_Texture;\n\n\t\tuniform mat4 uMultipliers;\n\t\tuniform vec4 uOffsets;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t\tif (color.a == 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t} else {\n\n\t\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\t\t\t\tcolor = uOffsets + color * uMultipliers;\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a, color.a);\n\n\t\t\t}\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\n\t\t}";
        }
        nc.call(this);
        this.uMultipliers.value = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
        this.uOffsets.value = [0, 0, 0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._ColorMatrixFilter.ColorMatrixShader"] = ak;
      ak.__name__ = "openfl.filters._ColorMatrixFilter.ColorMatrixShader";
      ak.__super__ = nc;
      ak.prototype = q(nc.prototype, {
        init: function (a) {
          var b = this.uMultipliers.value;
          var c = this.uOffsets.value;
          b[0] = a[0];
          b[1] = a[1];
          b[2] = a[2];
          b[3] = a[3];
          b[4] = a[5];
          b[5] = a[6];
          b[6] = a[7];
          b[7] = a[8];
          b[8] = a[10];
          b[9] = a[11];
          b[10] = a[12];
          b[11] = a[13];
          b[12] = a[15];
          b[13] = a[16];
          b[14] = a[17];
          b[15] = a[18];
          c[0] = a[4] / 255;
          c[1] = a[9] / 255;
          c[2] = a[14] / 255;
          c[3] = a[19] / 255;
        },
        __class__: ak
      });
      function Wg(a) {
        se.call(this);
        this.set_matrix(a);
        this.__numShaderPasses = 1;
        this.__needSecondBitmapData = false;
      }
      h["openfl.filters.ColorMatrixFilter"] = Wg;
      Wg.__name__ = "openfl.filters.ColorMatrixFilter";
      Wg.__super__ = se;
      Wg.prototype = q(se.prototype, {
        clone: function () {
          return new Wg(this.__matrix);
        },
        __applyFilter: function (a, b, c, d) {
          var e = b.image;
          var f = a.image;
          Xa.convertToData(e);
          Xa.convertToData(f);
          var g = e.get_data();
          var h = f.get_data();
          var n = d.x - c.x | 0;
          d = d.y - c.y | 0;
          b = b.width * 4;
          var p = a.width * 4;
          var l = e.buffer.format;
          var m = f.buffer.format;
          e = e.buffer.premultiplied;
          f = f.buffer.premultiplied;
          for (var t = 0, q = 0, u, x, w = c.y | 0, A = c.height | 0; w < A;) {
            var y = w++;
            for (var z = c.x | 0, C = c.width | 0; z < C;) {
              x = z++;
              u = y * b + x * 4;
              x = (y + n) * p + (x + d) * 4;
              var H = l;
              var D = e;
              if (D == null) {
                D = false;
              }
              if (H == null) {
                H = 0;
              }
              switch (H) {
                case 0:
                  t = (g[u] & 255) << 24 | (g[u + 1] & 255) << 16 | (g[u + 2] & 255) << 8 | g[u + 3] & 255;
                  break;
                case 1:
                  t = (g[u + 1] & 255) << 24 | (g[u + 2] & 255) << 16 | (g[u + 3] & 255) << 8 | g[u] & 255;
                  break;
                case 2:
                  t = (g[u + 2] & 255) << 24 | (g[u + 1] & 255) << 16 | (g[u] & 255) << 8 | g[u + 3] & 255;
              }
              if (D && (t & 255) != 0 && (t & 255) != 255) {
                R.unmult = 255 / (t & 255);
                t = (R.__clamp[Math.round((t >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((t >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((t >>> 8 & 255) * R.unmult)] & 255) << 8 | t & 255;
              }
              if ((t & 255) == 0) {
                q = 0;
              } else {
                q = ((Math.max(0, Math.min(this.__matrix[0] * (t >>> 24 & 255) + this.__matrix[1] * (t >>> 16 & 255) + this.__matrix[2] * (t >>> 8 & 255) + this.__matrix[3] * (t & 255) + this.__matrix[4], 255)) | 0) & 255) << 24 | (q >>> 16 & 255) << 16 | (q >>> 8 & 255) << 8 | q & 255;
                q = (q >>> 24 & 255) << 24 | ((Math.max(0, Math.min(this.__matrix[5] * (t >>> 24 & 255) + this.__matrix[6] * (t >>> 16 & 255) + this.__matrix[7] * (t >>> 8 & 255) + this.__matrix[8] * (t & 255) + this.__matrix[9], 255)) | 0) & 255) << 16 | (q >>> 8 & 255) << 8 | q & 255;
                q = (q >>> 24 & 255) << 24 | (q >>> 16 & 255) << 16 | ((Math.max(0, Math.min(this.__matrix[10] * (t >>> 24 & 255) + this.__matrix[11] * (t >>> 16 & 255) + this.__matrix[12] * (t >>> 8 & 255) + this.__matrix[13] * (t & 255) + this.__matrix[14], 255)) | 0) & 255) << 8 | q & 255;
                q = (q >>> 24 & 255) << 24 | (q >>> 16 & 255) << 16 | (q >>> 8 & 255) << 8 | (Math.max(0, Math.min(this.__matrix[15] * (t >>> 24 & 255) + this.__matrix[16] * (t >>> 16 & 255) + this.__matrix[17] * (t >>> 8 & 255) + this.__matrix[18] * (t & 255) + this.__matrix[19], 255)) | 0) & 255;
              }
              u = m;
              H = f;
              if (H == null) {
                H = false;
              }
              if (u == null) {
                u = 0;
              }
              if (H) {
                if ((q & 255) == 0) {
                  if (q != 0) {
                    q = 0;
                  }
                } else if ((q & 255) != 255) {
                  R.a16 = R.__alpha16[q & 255];
                  q = ((q >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((q >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((q >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | q & 255;
                }
              }
              switch (u) {
                case 0:
                  h[x] = q >>> 24 & 255;
                  h[x + 1] = q >>> 16 & 255;
                  h[x + 2] = q >>> 8 & 255;
                  h[x + 3] = q & 255;
                  break;
                case 1:
                  h[x] = q & 255;
                  h[x + 1] = q >>> 24 & 255;
                  h[x + 2] = q >>> 16 & 255;
                  h[x + 3] = q >>> 8 & 255;
                  break;
                case 2:
                  h[x] = q >>> 8 & 255;
                  h[x + 1] = q >>> 16 & 255;
                  h[x + 2] = q >>> 24 & 255;
                  h[x + 3] = q & 255;
              }
            }
          }
          a.image.dirty = true;
          return a;
        },
        __initShader: function (a, b, c) {
          Wg.__colorMatrixShader.init(this.get_matrix());
          return Wg.__colorMatrixShader;
        },
        get_matrix: function () {
          return this.__matrix;
        },
        set_matrix: function (a) {
          if (a == null) {
            a = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0];
          }
          return this.__matrix = a;
        },
        __class__: Wg,
        __properties__: {
          set_matrix: "set_matrix",
          get_matrix: "get_matrix"
        }
      });
      function Jm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec4 uColor;\n\t\tuniform float uStrength;\n\t\tvarying vec2 vTexCoord;\n\t\tvarying vec2 vBlurCoords[6];\n\n\t\tvoid main(void)\n\t\t{\n            vec4 texel = texture2D(openfl_Texture, vTexCoord);\n\n            vec3 contributions = vec3(0.00443, 0.05399, 0.24197);\n            vec3 top = vec3(\n                texture2D(openfl_Texture, vBlurCoords[0]).a,\n                texture2D(openfl_Texture, vBlurCoords[1]).a,\n                texture2D(openfl_Texture, vBlurCoords[2]).a\n            );\n            vec3 bottom = vec3(\n                texture2D(openfl_Texture, vBlurCoords[3]).a,\n                texture2D(openfl_Texture, vBlurCoords[4]).a,\n                texture2D(openfl_Texture, vBlurCoords[5]).a\n            );\n\n            float a = texel.a * 0.39894;\n\t\t\ta += dot(top, contributions.xyz);\n            a += dot(bottom, contributions.zyx);\n\n\t\t\tgl_FragColor = uColor * clamp(a * uStrength, 0.0, 1.0);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tuniform vec2 uRadius;\n\t\tvarying vec2 vTexCoord;\n\t\tvarying vec2 vBlurCoords[6];\n\n\t\tvoid main(void) {\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\tvTexCoord = openfl_TextureCoord;\n\n\t\t\tvec3 offset = vec3(0.5, 0.75, 1.0);\n\t\t\tvec2 r = uRadius / openfl_TextureSize;\n\t\t\tvBlurCoords[0] = openfl_TextureCoord - r * offset.z;\n\t\t\tvBlurCoords[1] = openfl_TextureCoord - r * offset.y;\n\t\t\tvBlurCoords[2] = openfl_TextureCoord - r * offset.x;\n\t\t\tvBlurCoords[3] = openfl_TextureCoord + r * offset.x;\n\t\t\tvBlurCoords[4] = openfl_TextureCoord + r * offset.y;\n\t\t\tvBlurCoords[5] = openfl_TextureCoord + r * offset.z;\n\t\t}\n\t";
        }
        nc.call(this);
        this.uRadius.value = [0, 0];
        this.uColor.value = [0, 0, 0, 0];
        this.uStrength.value = [1];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._GlowFilter.BlurAlphaShader"] = Jm;
      Jm.__name__ = "openfl.filters._GlowFilter.BlurAlphaShader";
      Jm.__super__ = nc;
      Jm.prototype = q(nc.prototype, {
        __class__: Jm
      });
      function Km() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = glow * (1.0 - src.a);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t";
        }
        nc.call(this);
        this.offset.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._GlowFilter.CombineKnockoutShader"] = Km;
      Km.__name__ = "openfl.filters._GlowFilter.CombineKnockoutShader";
      Km.__super__ = nc;
      Km.prototype = q(nc.prototype, {
        __class__: Km
      });
      function Lm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = src + glow * (1.0 - src.a);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t";
        }
        nc.call(this);
        this.offset.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._GlowFilter.CombineShader"] = Lm;
      Lm.__name__ = "openfl.filters._GlowFilter.CombineShader";
      Lm.__super__ = nc;
      Lm.prototype = q(nc.prototype, {
        __class__: Lm
      });
      function Mm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = glow * src.a;\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t";
        }
        nc.call(this);
        this.offset.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._GlowFilter.InnerCombineKnockoutShader"] = Mm;
      Mm.__name__ = "openfl.filters._GlowFilter.InnerCombineKnockoutShader";
      Mm.__super__ = nc;
      Mm.prototype = q(nc.prototype, {
        __class__: Mm
      });
      function Nm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = vec4((src.rgb * (1.0 - glow.a)) + (glow.rgb * src.a), src.a);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t";
        }
        nc.call(this);
        this.offset.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._GlowFilter.InnerCombineShader"] = Nm;
      Nm.__name__ = "openfl.filters._GlowFilter.InnerCombineShader";
      Nm.__super__ = nc;
      Nm.prototype = q(nc.prototype, {
        __class__: Nm
      });
      function Om() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tvarying vec2 vTexCoord;\n\n\t\tvoid main(void) {\n\t\t\tvec4 texel = texture2D(openfl_Texture, vTexCoord);\n\t\t\tgl_FragColor = vec4(texel.rgb, 1.0 - texel.a);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tvarying vec2 vTexCoord;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\tvTexCoord = openfl_TextureCoord;\n\t\t}\n\t";
        }
        nc.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._GlowFilter.InvertAlphaShader"] = Om;
      Om.__name__ = "openfl.filters._GlowFilter.InvertAlphaShader";
      Om.__super__ = nc;
      Om.prototype = q(nc.prototype, {
        __class__: Om
      });
      function Gd(a, b, c, d, e, f, g, h) {
        if (h == null) {
          h = false;
        }
        if (g == null) {
          g = false;
        }
        if (f == null) {
          f = 1;
        }
        if (e == null) {
          e = 2;
        }
        if (d == null) {
          d = 6;
        }
        if (c == null) {
          c = 6;
        }
        if (b == null) {
          b = 1;
        }
        if (a == null) {
          a = 16711680;
        }
        se.call(this);
        this.__color = a;
        this.__alpha = b;
        this.__blurX = c;
        this.__blurY = d;
        this.__strength = e;
        this.__inner = g;
        this.__knockout = h;
        this.__quality = f;
        this.__updateSize();
        this.__renderDirty = this.__preserveObject = this.__needSecondBitmapData = true;
      }
      h["openfl.filters.GlowFilter"] = Gd;
      Gd.__name__ = "openfl.filters.GlowFilter";
      Gd.__super__ = se;
      Gd.prototype = q(se.prototype, {
        clone: function () {
          return new Gd(this.__color, this.__alpha, this.__blurX, this.__blurY, this.__strength, this.__quality, this.__inner, this.__knockout);
        },
        __applyFilter: function (a, b, c, d) {
          var e = this.__color >> 16 & 255;
          var f = this.__color >> 8 & 255;
          var g = this.__color & 255;
          c = Ac.gaussianBlur(a.image, b.image, c.__toLimeRectangle(), d.__toLimeVector2(), this.__blurX, this.__blurY, this.__quality, this.__strength);
          c.colorTransform(c.get_rect(), new Nb(0, 0, 0, this.__alpha, e, f, g, 0).__toLimeColorMatrix());
          if (c == a.image) {
            return a;
          } else {
            return b;
          }
        },
        __initShader: function (a, b, c) {
          if (this.__inner && b == 0) {
            return Gd.__invertAlphaShader;
          }
          a = b - (this.__inner ? 1 : 0);
          b = this.__horizontalPasses + this.__verticalPasses;
          if (a < b) {
            var d = Gd.__blurAlphaShader;
            if (a < this.__horizontalPasses) {
              c = Math.pow(0.5, a >> 1) * 0.5;
              d.uRadius.value[0] = this.get_blurX() * c;
              d.uRadius.value[1] = 0;
            } else {
              c = Math.pow(0.5, a - this.__horizontalPasses >> 1) * 0.5;
              d.uRadius.value[0] = 0;
              d.uRadius.value[1] = this.get_blurY() * c;
            }
            d.uColor.value[0] = (this.get_color() >> 16 & 255) / 255;
            d.uColor.value[1] = (this.get_color() >> 8 & 255) / 255;
            d.uColor.value[2] = (this.get_color() & 255) / 255;
            d.uColor.value[3] = this.get_alpha();
            d.uStrength.value[0] = a == b - 1 ? this.__strength : 1;
            return d;
          }
          if (this.__inner) {
            if (this.__knockout) {
              d = Gd.__innerCombineKnockoutShader;
              d.sourceBitmap.input = c;
              d.offset.value[0] = 0;
              d.offset.value[1] = 0;
              return d;
            }
            d = Gd.__innerCombineShader;
          } else {
            if (this.__knockout) {
              d = Gd.__combineKnockoutShader;
              d.sourceBitmap.input = c;
              d.offset.value[0] = 0;
              d.offset.value[1] = 0;
              return d;
            }
            d = Gd.__combineShader;
          }
          d.sourceBitmap.input = c;
          d.offset.value[0] = 0;
          d.offset.value[1] = 0;
          return d;
        },
        __updateSize: function () {
          this.__rightExtension = this.__leftExtension = this.__blurX > 0 ? Math.ceil(this.__blurX * 1.5) : 0;
          this.__bottomExtension = this.__topExtension = this.__blurY > 0 ? Math.ceil(this.__blurY * 1.5) : 0;
          this.__calculateNumShaderPasses();
        },
        __calculateNumShaderPasses: function () {
          this.__horizontalPasses = this.__blurX <= 0 ? 0 : Math.round(this.__quality / 4 * this.__blurX) + 1;
          this.__verticalPasses = this.__blurY <= 0 ? 0 : Math.round(this.__quality / 4 * this.__blurY) + 1;
          this.__numShaderPasses = this.__horizontalPasses + this.__verticalPasses + (this.__inner ? 2 : 1);
        },
        get_alpha: function () {
          return this.__alpha;
        },
        get_blurX: function () {
          return this.__blurX;
        },
        get_blurY: function () {
          return this.__blurY;
        },
        get_color: function () {
          return this.__color;
        },
        __class__: Gd,
        __properties__: {
          get_color: "get_color",
          get_blurY: "get_blurY",
          get_blurX: "get_blurX",
          get_alpha: "get_alpha"
        }
      });
      function mk(a) {
        this.__colorTransform = new Nb();
        this.concatenatedColorTransform = new Nb();
        this.pixelBounds = new ea();
        this.__displayObject = a;
        this.__hasMatrix = true;
      }
      h["openfl.geom.Transform"] = mk;
      mk.__name__ = "openfl.geom.Transform";
      mk.prototype = {
        get_colorTransform: function () {
          return this.__colorTransform.__clone();
        },
        set_colorTransform: function (a) {
          if (!this.__colorTransform.__equals(a, false)) {
            this.__colorTransform.__copyFrom(a);
            if (a != null) {
              this.__displayObject.set_alpha(a.alphaMultiplier);
            }
            a = this.__displayObject;
            if (!a.__renderDirty) {
              a.__renderDirty = true;
              a.__setParentRenderDirty();
            }
          }
          return this.__colorTransform;
        },
        get_matrix: function () {
          if (this.__hasMatrix) {
            return this.__displayObject.__transform.clone();
          } else {
            return null;
          }
        },
        set_matrix: function (a) {
          if (a == null) {
            this.__hasMatrix = false;
            return null;
          }
          this.__hasMatrix = true;
          this.__hasMatrix3D = false;
          if (this.__displayObject != null) {
            this.__setTransform(a.a, a.b, a.c, a.d, a.tx, a.ty);
          }
          return a;
        },
        __setTransform: function (a, b, c, d, e, f) {
          if (this.__displayObject != null) {
            var g = this.__displayObject.__transform;
            if (g.a != a || g.b != b || g.c != c || g.d != d || g.tx != e || g.ty != f) {
              var h = b == 0 ? a : Math.sqrt(a * a + b * b);
              var n = c == 0 ? d : Math.sqrt(c * c + d * d);
              this.__displayObject.__scaleX = h;
              this.__displayObject.__scaleY = n;
              h = 180 / Math.PI * Math.atan2(d, c) - 90;
              if (h != this.__displayObject.__rotation) {
                this.__displayObject.__rotation = h;
                h *= Math.PI / 180;
                this.__displayObject.__rotationSine = Math.sin(h);
                this.__displayObject.__rotationCosine = Math.cos(h);
              }
              g.a = a;
              g.b = b;
              g.c = c;
              g.d = d;
              g.tx = e;
              g.ty = f;
              this.__displayObject.__setTransformDirty();
            }
          }
        },
        __class__: mk,
        __properties__: {
          set_matrix: "set_matrix",
          get_matrix: "get_matrix",
          set_colorTransform: "set_colorTransform",
          get_colorTransform: "get_colorTransform"
        }
      };
      function Po() {}
      h["openfl.media.ID3Info"] = Po;
      Po.__name__ = "openfl.media.ID3Info";
      Po.prototype = {
        __class__: Po
      };
      function rg(a, b) {
        this.__webAudioContext = null;
        this.__urlLoading = false;
        ua.call(this, this);
        this.bytesTotal = this.bytesLoaded = 0;
        this.isBuffering = false;
        this.url = null;
        if (a != null) {
          this.load(a, b);
        }
        if (a == null && gg.context != null && gg.context.type == "web") {
          this.__webAudioContext = gg.context.web;
        }
      }
      h["openfl.media.Sound"] = rg;
      rg.__name__ = "openfl.media.Sound";
      rg.fromAudioBuffer = function (a) {
        var b = new rg();
        b.__buffer = a;
        return b;
      };
      rg.__super__ = ua;
      rg.prototype = q(ua.prototype, {
        load: function (a, b) {
          var c = this;
          this.url = a.url;
          this.__urlLoading = true;
          a = oa.getLibrary("default");
          if (a != null && Object.prototype.hasOwnProperty.call(a.cachedAudioBuffers.h, this.url)) {
            this.AudioBuffer_onURLLoad(a.cachedAudioBuffers.h[this.url]);
          } else {
            $c.loadFromFile(this.url).onComplete(l(this, this.AudioBuffer_onURLLoad)).onError(function (a) {
              c.AudioBuffer_onURLLoad(null);
            });
          }
        },
        play: function (a, b, c) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (we.__soundChannels.length >= 32) {
            return null;
          }
          c = c == null ? new qg() : c.clone();
          var d = we.__soundTransform.pan + c.pan;
          if (d > 1) {
            d = 1;
          }
          if (d < -1) {
            d = -1;
          }
          var e = we.__soundTransform.volume * c.volume;
          var f = new Co(this.__buffer);
          f.offset = a | 0;
          if (b > 1) {
            f.set_loops(b - 1);
          }
          f.set_gain(e);
          a = f.get_position();
          a.x = d;
          a.z = Math.sqrt(1 - Math.pow(d, 2)) * -1;
          f.set_position(a);
          c = new Pm(this, this.__urlLoading ? null : f, c);
          if (this.__urlLoading) {
            this.__pendingAudioSource = f;
            this.__pendingSoundChannel = c;
          } else if (this.__buffer == null && this.__webAudioContext != null) {
            c.__startSampleData();
          }
          return c;
        },
        get_id3: function () {
          return new Po();
        },
        get_length: function () {
          if (this.__buffer != null) {
            return this.__buffer.get_src().duration() * 1000 | 0;
          } else {
            return 0;
          }
        },
        AudioBuffer_onURLLoad: function (a) {
          this.__urlLoading = false;
          if (a == null) {
            this.dispatchEvent(new Yj("ioError"));
          } else {
            this.__buffer = a;
            this.dispatchEvent(new Ga("complete"));
            if (this.__pendingSoundChannel != null) {
              this.__pendingAudioSource.buffer = this.__buffer;
              this.__pendingAudioSource.init();
              this.__pendingSoundChannel.__initAudioSource(this.__pendingAudioSource);
            }
          }
          this.__pendingAudioSource = this.__pendingSoundChannel = null;
        },
        __class__: rg,
        __properties__: {
          get_length: "get_length",
          get_id3: "get_id3"
        }
      });
      function Pm(a, b, c) {
        this.__firstRun = true;
        ua.call(this, this);
        this.__sound = a;
        this.rightPeak = this.leftPeak = 1;
        this.__soundTransform = c ?? new qg();
        this.__initAudioSource(b);
        we.__registerSoundChannel(this);
      }
      h["openfl.media.SoundChannel"] = Pm;
      Pm.__name__ = "openfl.media.SoundChannel";
      Pm.__super__ = ua;
      Pm.prototype = q(ua.prototype, {
        stop: function () {
          we.__unregisterSoundChannel(this);
          if (this.__isValid) {
            if (this.__processor != null) {
              this.__processor.disconnect();
              this.__processor = this.__processor.onaudioprocess = null;
            }
            this.__audioSource.stop();
            this.__dispose();
          }
        },
        __dispose: function () {
          if (this.__isValid) {
            this.__audioSource.onComplete.remove(l(this, this.audioSource_onComplete));
            this.__audioSource.dispose();
            this.__audioSource = null;
            this.__isValid = false;
          }
        },
        __startSampleData: function () {
          var a = this;
          var b = this.__sound.__webAudioContext;
          if (b != null) {
            this.__sampleDataEvent = new Gm("sampleData");
            this.__sound.dispatchEvent(this.__sampleDataEvent);
            var c = this.__sampleDataEvent.getBufferSize();
            if (c == 0) {
              na.setTimeout(function () {
                a.stop();
                a.dispatchEvent(new Ga("soundComplete"));
              }, 1);
            } else {
              this.__processor = b.createScriptProcessor(c, 0, 2);
              this.__processor.connect(b.destination);
              this.__processor.onaudioprocess = l(this, this.onSample);
              b.resume();
            }
          }
        },
        __updateTransform: function () {
          this.set_soundTransform(this.get_soundTransform());
        },
        __initAudioSource: function (a) {
          this.__audioSource = a;
          if (this.__audioSource != null) {
            this.__audioSource.onComplete.add(l(this, this.audioSource_onComplete));
            this.__isValid = true;
            this.__audioSource.play();
          }
        },
        get_position: function () {
          if (this.__isValid) {
            return this.__audioSource.get_currentTime() + this.__audioSource.offset;
          } else {
            return 0;
          }
        },
        set_position: function (a) {
          if (!this.__isValid) {
            return 0;
          }
          this.__audioSource.set_currentTime((a | 0) - this.__audioSource.offset);
          return a;
        },
        get_soundTransform: function () {
          return this.__soundTransform.clone();
        },
        set_soundTransform: function (a) {
          if (a != null) {
            this.__soundTransform.pan = a.pan;
            this.__soundTransform.volume = a.volume;
            var b = we.__soundTransform.pan + this.__soundTransform.pan;
            if (b < -1) {
              b = -1;
            }
            if (b > 1) {
              b = 1;
            }
            var c = we.__soundTransform.volume * this.__soundTransform.volume;
            if (this.__isValid) {
              this.__audioSource.set_gain(c);
              c = this.__audioSource.get_position();
              c.x = b;
              c.z = Math.sqrt(1 - Math.pow(b, 2)) * -1;
              this.__audioSource.set_position(c);
            }
          }
          return a;
        },
        audioSource_onComplete: function () {
          we.__unregisterSoundChannel(this);
          this.__dispose();
          this.dispatchEvent(new Ga("soundComplete"));
        },
        onSample: function (a) {
          if (this.__firstRun) {
            var b = true;
            this.__firstRun = false;
          } else {
            Re.set_length(this.__sampleDataEvent.data, 0);
            this.__sound.dispatchEvent(this.__sampleDataEvent);
            b = Dc.gt(Re.get_length(this.__sampleDataEvent.data), 0);
          }
          if (b) {
            this.__sampleDataEvent.getSamples(a);
          } else {
            this.stop();
            this.dispatchEvent(new Ga("soundComplete"));
          }
        },
        __class__: Pm,
        __properties__: {
          set_soundTransform: "set_soundTransform",
          get_soundTransform: "get_soundTransform",
          set_position: "set_position",
          get_position: "get_position"
        }
      });
      function Ep() {}
      h["openfl.media.SoundLoaderContext"] = Ep;
      Ep.__name__ = "openfl.media.SoundLoaderContext";
      function qg(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 1;
        }
        this.volume = a;
        this.pan = b;
        this.rightToRight = this.rightToLeft = this.leftToRight = this.leftToLeft = 0;
      }
      h["openfl.media.SoundTransform"] = qg;
      qg.__name__ = "openfl.media.SoundTransform";
      qg.prototype = {
        clone: function () {
          return new qg(this.volume, this.pan);
        },
        __class__: qg
      };
      function we() {}
      h["openfl.media.SoundMixer"] = we;
      we.__name__ = "openfl.media.SoundMixer";
      we.__registerSoundChannel = function (a) {
        we.__soundChannels.push(a);
      };
      we.__unregisterSoundChannel = function (a) {
        M.remove(we.__soundChannels, a);
      };
      function pk(a, b) {
        if (b == null) {
          b = 240;
        }
        if (a == null) {
          a = 320;
        }
        Fa.call(this);
        this.__drawableType = 8;
        this.__width = a;
        this.__height = b;
        this.__textureTime = -1;
        this.smoothing = false;
        this.deblocking = 0;
      }
      h["openfl.media.Video"] = pk;
      pk.__name__ = "openfl.media.Video";
      pk.__super__ = Fa;
      pk.prototype = q(Fa.prototype, {
        attachNetStream: function (a) {
          this.__stream = a;
          if (this.__stream != null && this.__stream.__video != null && !this.__stream.__closed) {
            this.__stream.__video.play();
          }
        },
        __enterFrame: function (a) {
          if (this.__renderable && this.__stream != null && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
        },
        __getBounds: function (a, b) {
          var c = ea.__pool.get();
          c.setTo(0, 0, this.__width, this.__height);
          c.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          ea.__pool.release(c);
        },
        __getIndexBuffer: function (a) {
          if (this.__indexBuffer == null || this.__indexBufferContext != a.__context) {
            this.__indexBufferData = new Uint16Array(6);
            this.__indexBufferData[0] = 0;
            this.__indexBufferData[1] = 1;
            this.__indexBufferData[2] = 2;
            this.__indexBufferData[3] = 2;
            this.__indexBufferData[4] = 1;
            this.__indexBufferData[5] = 3;
            this.__indexBufferContext = a.__context;
            this.__indexBuffer = a.createIndexBuffer(6);
            this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData);
          }
          return this.__indexBuffer;
        },
        __getTexture: function (a) {
          if (this.__stream == null || this.__stream.__video == null) {
            return null;
          }
          var b = a.__context.webgl;
          var c = b.RGBA;
          var d = b.RGBA;
          if (!this.__stream.__closed && this.__stream.__video.currentTime != this.__textureTime) {
            if (this.__texture == null) {
              this.__texture = a.createRectangleTexture(this.__stream.__video.videoWidth, this.__stream.__video.videoHeight, 1, false);
            }
            a.__bindGLTexture2D(this.__texture.__textureID);
            Yc.texImage2D(b, b.TEXTURE_2D, 0, c, d, b.UNSIGNED_BYTE, this.__stream.__video);
            this.__textureTime = this.__stream.__video.currentTime;
          }
          return this.__texture;
        },
        __getVertexBuffer: function (a) {
          if (this.__vertexBuffer == null || this.__vertexBufferContext != a.__context || this.__currentWidth != this.get_width() || this.__currentHeight != this.get_height()) {
            this.__currentWidth = this.get_width();
            this.__currentHeight = this.get_height();
            this.__vertexBufferData = new Float32Array(20);
            this.__vertexBufferData[0] = this.get_width();
            this.__vertexBufferData[1] = this.get_height();
            this.__vertexBufferData[3] = 1;
            this.__vertexBufferData[4] = 1;
            this.__vertexBufferData[6] = this.get_height();
            this.__vertexBufferData[9] = 1;
            this.__vertexBufferData[10] = this.get_width();
            this.__vertexBufferData[13] = 1;
            this.__vertexBufferContext = a.__context;
            this.__vertexBuffer = a.createVertexBuffer(3, 5);
            this.__vertexBuffer.uploadFromTypedArray(cj.toArrayBufferView(this.__vertexBufferData));
          }
          return this.__vertexBuffer;
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          this.__getRenderTransform();
          var g = this.__renderTransform;
          var h = g.a * g.d - g.b * g.c;
          c = h == 0 ? -g.tx : 1 / h * (g.c * (g.ty - b) + g.d * (a - g.tx));
          g = this.__renderTransform;
          h = g.a * g.d - g.b * g.c;
          a = h == 0 ? -g.ty : 1 / h * (g.a * (b - g.ty) + g.b * (g.tx - a));
          if (c > 0 && a > 0 && c <= this.__width && a <= this.__height) {
            if (d != null && !e) {
              d.push(f);
            }
            return true;
          } else {
            return false;
          }
        },
        __hitTestMask: function (a, b) {
          var c = kb.__pool.get();
          c.setTo(a, b);
          this.__globalToLocal(c, c);
          a = c.x > 0 && c.y > 0 && c.x <= this.__width && c.y <= this.__height;
          kb.__pool.release(c);
          return a;
        },
        get_height: function () {
          return this.__height * this.get_scaleY();
        },
        set_height: function (a) {
          if (this.get_scaleY() != 1 || a != this.__height) {
            this.__setTransformDirty();
            this.__dirty = true;
          }
          this.set_scaleY(1);
          return this.__height = a;
        },
        get_width: function () {
          return this.__width * this.__scaleX;
        },
        set_width: function (a) {
          if (this.__scaleX != 1 || this.__width != a) {
            this.__setTransformDirty();
            this.__dirty = true;
          }
          this.set_scaleX(1);
          return this.__width = a;
        },
        __class__: pk
      });
      function Gi(a, b, c) {
        this.description = a;
        this.extension = b;
        this.macType = c;
      }
      h["openfl.net.FileFilter"] = Gi;
      Gi.__name__ = "openfl.net.FileFilter";
      Gi.prototype = {
        __class__: Gi
      };
      function Je() {
        ua.call(this);
        this.__inputControl = window.document.createElement("input");
        this.__inputControl.setAttribute("type", "file");
        this.__inputControl.onclick = function (a) {
          a.cancelBubble = true;
          a.stopPropagation();
        };
      }
      h["openfl.net.FileReference"] = Je;
      Je.__name__ = "openfl.net.FileReference";
      Je.__super__ = ua;
      Je.prototype = q(ua.prototype, {
        browse: function (a) {
          var b = this;
          var c = this.__path = this.__data = null;
          if (a != null) {
            c = [];
            for (var d = 0; d < a.length;) {
              var e = a[d];
              ++d;
              c.push(w.replace(w.replace(e.extension, "*.", "."), ";", ","));
            }
            c = c.join(",");
          }
          if (c != null) {
            this.__inputControl.setAttribute("accept", c);
          } else {
            this.__inputControl.removeAttribute("accept");
          }
          this.__inputControl.onchange = function () {
            if (b.__inputControl.files.length == 0) {
              b.dispatchEvent(new Ga("cancel"));
            } else {
              var a = b.__inputControl.files[0];
              var c = new Date(a.lastModified);
              b.modificationDate = c;
              b.creationDate = b.get_modificationDate();
              b.size = a.size;
              c = Jc.extension(a.name);
              b.type = "." + c;
              b.name = Jc.withoutDirectory(a.name);
              b.__path = a.name;
              b.dispatchEvent(new Ga("select"));
            }
          };
          this.__inputControl.click();
          return true;
        },
        save: function (a, b) {
          this.__path = this.__data = null;
          if (a != null) {
            if (a instanceof wd) {
              this.__data = a;
            } else {
              this.__data = new wd(0);
              this.__data.writeUTFBytes(H.string(a));
            }
            a = new Do();
            a.onCancel.add(l(this, this.saveFileDialog_onCancel));
            a.onSave.add(l(this, this.saveFileDialog_onSave));
            a.save(this.__data, b != null ? Jc.extension(b) : null, b);
          }
        },
        saveFileDialog_onCancel: function () {
          this.dispatchEvent(new Ga("cancel"));
        },
        saveFileDialog_onSave: function (a) {
          var b = this;
          kg.delay(function () {
            b.dispatchEvent(new Ga("complete"));
          }, 1);
        },
        get_modificationDate: function () {
          return this.modificationDate;
        },
        __class__: Je,
        __properties__: {
          get_modificationDate: "get_modificationDate"
        }
      });
      function qk() {
        ua.call(this);
      }
      h["openfl.net.NetConnection"] = qk;
      qk.__name__ = "openfl.net.NetConnection";
      qk.__super__ = ua;
      qk.prototype = q(ua.prototype, {
        connect: function (a, b, c, d, e, f) {
          if (a != null) {
            throw K.thrown("Error: Can only connect in \"HTTP streaming\" mode");
          }
          this.dispatchEvent(new Zj("netStatus", false, true, {
            code: "NetConnection.Connect.Success"
          }));
        },
        __class__: qk
      });
      function rk(a, b) {
        ua.call(this);
        this.__connection = a;
        this.__soundTransform = new qg();
        this.__video = window.document.createElement("video");
        this.__video.setAttribute("playsinline", "");
        this.__video.setAttribute("webkit-playsinline", "");
        this.__video.setAttribute("crossorigin", "anonymous");
        this.__video.addEventListener("error", l(this, this.video_onError), false);
        this.__video.addEventListener("waiting", l(this, this.video_onWaiting), false);
        this.__video.addEventListener("ended", l(this, this.video_onEnd), false);
        this.__video.addEventListener("pause", l(this, this.video_onPause), false);
        this.__video.addEventListener("seeking", l(this, this.video_onSeeking), false);
        this.__video.addEventListener("playing", l(this, this.video_onPlaying), false);
        this.__video.addEventListener("timeupdate", l(this, this.video_onTimeUpdate), false);
        this.__video.addEventListener("loadstart", l(this, this.video_onLoadStart), false);
        this.__video.addEventListener("stalled", l(this, this.video_onStalled), false);
        this.__video.addEventListener("durationchanged", l(this, this.video_onDurationChanged), false);
        this.__video.addEventListener("canplay", l(this, this.video_onCanPlay), false);
        this.__video.addEventListener("canplaythrough", l(this, this.video_onCanPlayThrough), false);
        this.__video.addEventListener("loadedmetadata", l(this, this.video_onLoadMetaData), false);
      }
      h["openfl.net.NetStream"] = rk;
      rk.__name__ = "openfl.net.NetStream";
      rk.__super__ = ua;
      rk.prototype = q(ua.prototype, {
        close: function () {
          if (this.__video != null) {
            this.__closed = true;
            this.__video.pause();
            this.__video.src = "";
            this.time = 0;
          }
        },
        dispose: function () {
          this.close();
          this.__video = null;
        },
        play: function (a, b, c, d, e, f) {
          if (this.__video != null) {
            this.__video.volume = we.__soundTransform.volume * this.__soundTransform.volume;
            if (typeof a == "string") {
              this.__video.src = a;
            } else {
              this.__video.srcObject = a;
            }
            this.__video.play();
          }
        },
        __dispatchStatus: function (a) {
          a = new Zj("netStatus", false, false, {
            code: a
          });
          this.__connection.dispatchEvent(a);
          this.dispatchEvent(a);
        },
        __playStatus: function (a) {
          if (this.__video != null && this.client != null) {
            try {
              var b = this.client.onPlayStatus;
              b({
                code: a,
                duration: this.__video.duration,
                position: this.__video.currentTime,
                speed: this.__video.playbackRate,
                start: this.__video.startTime
              });
            } catch (c) {
              Na.lastError = c;
            }
          }
        },
        video_onCanPlay: function (a) {
          this.__playStatus("NetStream.Play.canplay");
        },
        video_onCanPlayThrough: function (a) {
          this.__playStatus("NetStream.Play.canplaythrough");
        },
        video_onDurationChanged: function (a) {
          this.__playStatus("NetStream.Play.durationchanged");
        },
        video_onEnd: function (a) {
          this.__dispatchStatus("NetStream.Play.Stop");
          this.__dispatchStatus("NetStream.Play.Complete");
          this.__playStatus("NetStream.Play.Complete");
        },
        video_onError: function (a) {
          this.__dispatchStatus("NetStream.Play.Stop");
          this.__playStatus("NetStream.Play.error");
        },
        video_onLoadMetaData: function (a) {
          if (this.__video != null && this.client != null) {
            try {
              var b = this.client.onMetaData;
              b({
                width: this.__video.videoWidth,
                height: this.__video.videoHeight,
                duration: this.__video.duration
              });
            } catch (c) {
              Na.lastError = c;
            }
          }
        },
        video_onLoadStart: function (a) {
          this.__playStatus("NetStream.Play.loadstart");
        },
        video_onPause: function (a) {
          this.__playStatus("NetStream.Play.pause");
        },
        video_onPlaying: function (a) {
          this.__dispatchStatus("NetStream.Play.Start");
          this.__playStatus("NetStream.Play.playing");
        },
        video_onSeeking: function (a) {
          this.__playStatus("NetStream.Play.seeking");
          this.__dispatchStatus("NetStream.Seek.Complete");
        },
        video_onStalled: function (a) {
          this.__playStatus("NetStream.Play.stalled");
        },
        video_onTimeUpdate: function (a) {
          if (this.__video != null) {
            this.time = this.__video.currentTime;
            this.__playStatus("NetStream.Play.timeupdate");
          }
        },
        video_onWaiting: function (a) {
          this.__playStatus("NetStream.Play.waiting");
        },
        __class__: rk
      });
      function Qo(a) {
        ua.call(this);
        this.bytesTotal = this.bytesLoaded = 0;
        this.dataFormat = 1;
        if (a != null) {
          this.load(a);
        }
      }
      h["openfl.net.URLLoader"] = Qo;
      Qo.__name__ = "openfl.net.URLLoader";
      Qo.__super__ = ua;
      Qo.prototype = q(ua.prototype, {
        load: function (a) {
          var b = this;
          var c = new Ga("open");
          this.dispatchEvent(c);
          if (this.dataFormat == 0) {
            c = new bm();
            this.__prepareRequest(c, a);
            c.load().onProgress(l(this, this.httpRequest_onProgress)).onError(l(this, this.httpRequest_onError)).onComplete(function (a) {
              b.__dispatchResponseStatus();
              b.__dispatchStatus();
              b.data = a;
              a = new Ga("complete");
              b.dispatchEvent(a);
            });
          } else {
            c = new vi();
            this.__prepareRequest(c, a);
            c.load().onProgress(l(this, this.httpRequest_onProgress)).onError(l(this, this.httpRequest_onError)).onComplete(function (a) {
              b.__dispatchResponseStatus();
              b.__dispatchStatus();
              b.data = a;
              a = new Ga("complete");
              b.dispatchEvent(a);
            });
          }
        },
        __dispatchResponseStatus: function () {
          var a = new Xj("httpResponseStatus", false, false, this.__httpRequest.responseStatus);
          a.responseURL = this.__httpRequest.uri;
          var b = [];
          if (this.__httpRequest.enableResponseHeaders && this.__httpRequest.responseHeaders != null) {
            for (var c = 0, d = this.__httpRequest.responseHeaders; c < d.length;) {
              var e = d[c];
              ++c;
              b.push(new Ro(e.name, e.value));
            }
          }
          a.responseHeaders = b;
          this.dispatchEvent(a);
        },
        __dispatchStatus: function () {
          var a = new Xj("httpStatus", false, false, this.__httpRequest.responseStatus);
          this.dispatchEvent(a);
        },
        __prepareRequest: function (a, b) {
          this.__httpRequest = a;
          this.__httpRequest.uri = b.url;
          this.__httpRequest.method = b.method;
          if (b.data != null) {
            if (Db.typeof(b.data) == Mc.TObject) {
              var c = ma.fields(b.data);
              for (a = 0; a < c.length;) {
                var d = c[a];
                ++a;
                this.__httpRequest.formData.h[d] = ma.field(b.data, d);
              }
            } else {
              this.__httpRequest.data = b.data instanceof bc ? b.data : bc.ofString(H.string(b.data));
            }
          }
          this.__httpRequest.contentType = b.contentType;
          if (b.requestHeaders != null) {
            a = 0;
            c = b.requestHeaders;
            while (a < c.length) {
              d = c[a];
              ++a;
              this.__httpRequest.headers.push(new Vl(d.name, d.value));
            }
          }
          this.__httpRequest.followRedirects = b.followRedirects;
          this.__httpRequest.timeout = b.idleTimeout | 0;
          this.__httpRequest.manageCookies = b.manageCookies;
          this.__httpRequest.userAgent = b.userAgent;
          this.__httpRequest.enableResponseHeaders = true;
        },
        httpRequest_onError: function (a) {
          this.__dispatchResponseStatus();
          this.__dispatchStatus();
          if (this.__httpRequest instanceof $g) {
            this.data = this.__httpRequest.responseData;
          } else if (this.__httpRequest instanceof vi) {
            this.data = this.__httpRequest.responseData;
          }
          var b = a == 403 ? new Hm("securityError") : new Yj("ioError");
          b.text = H.string(a);
          this.dispatchEvent(b);
        },
        httpRequest_onProgress: function (a, b) {
          var c = new zi("progress");
          c.bytesLoaded = a;
          c.bytesTotal = b;
          this.dispatchEvent(c);
        },
        __class__: Qo
      });
      function Ui(a) {
        if (a != null) {
          this.url = a;
        }
        this.contentType = null;
        this.followRedirects = eh.followRedirects;
        this.idleTimeout = eh.idleTimeout > 0 ? eh.idleTimeout : 30000;
        this.manageCookies = eh.manageCookies;
        this.method = "GET";
        this.requestHeaders = [];
        this.userAgent = eh.userAgent;
      }
      h["openfl.net.URLRequest"] = Ui;
      Ui.__name__ = "openfl.net.URLRequest";
      Ui.prototype = {
        __class__: Ui
      };
      function eh() {}
      h["openfl.net.URLRequestDefaults"] = eh;
      eh.__name__ = "openfl.net.URLRequestDefaults";
      function Ro(a, b) {
        if (b == null) {
          b = "";
        }
        if (a == null) {
          a = "";
        }
        this.name = a;
        this.value = b;
      }
      h["openfl.net.URLRequestHeader"] = Ro;
      Ro.__name__ = "openfl.net.URLRequestHeader";
      Ro.prototype = {
        __class__: Ro
      };
      function mc() {
        ua.call(this);
        mc.initialize();
        this.__interval = 0;
        this.__muted = false;
        this.setRequestedUpdateInterval(mc.defaultInterval);
      }
      h["openfl.sensors.Accelerometer"] = mc;
      mc.__name__ = "openfl.sensors.Accelerometer";
      mc.__properties__ = {
        get_isSupported: "get_isSupported"
      };
      mc.initialize = function () {
        if (!mc.initialized) {
          var a = Le.getSensors(Wo.ACCELEROMETER);
          if (a.length > 0) {
            a[0].onUpdate.add(mc.accelerometer_onUpdate);
            mc.supported = true;
          }
          mc.initialized = true;
        }
      };
      mc.accelerometer_onUpdate = function (a, b, c) {
        mc.currentX = a;
        mc.currentY = b;
        mc.currentZ = c;
      };
      mc.get_isSupported = function () {
        mc.initialize();
        return mc.supported;
      };
      mc.__super__ = ua;
      mc.prototype = q(ua.prototype, {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          ua.prototype.addEventListener.call(this, a, b, c, d, e);
          this.update();
        },
        setRequestedUpdateInterval: function (a) {
          this.__interval = a;
          if (this.__interval < 0) {
            throw new Oh();
          }
          if (this.__interval == 0) {
            this.__interval = mc.defaultInterval;
          }
          if (this.__timer != null) {
            this.__timer.stop();
            this.__timer = null;
          }
          if (mc.supported && !this.get_muted()) {
            this.__timer = new kg(this.__interval);
            this.__timer.run = l(this, this.update);
          }
        },
        update: function () {
          var a = new Fm("update");
          a.timestamp = new Date().getTime() / 1000;
          a.accelerationX = mc.currentX;
          a.accelerationY = mc.currentY;
          a.accelerationZ = mc.currentZ;
          this.dispatchEvent(a);
        },
        get_muted: function () {
          return this.__muted;
        },
        __class__: mc,
        __properties__: {
          get_muted: "get_muted"
        }
      });
      function yi(a) {
        this.parentDomain = a ?? yi.currentDomain;
      }
      h["openfl.system.ApplicationDomain"] = yi;
      yi.__name__ = "openfl.system.ApplicationDomain";
      yi.prototype = {
        __class__: yi
      };
      function Ti() {}
      h["openfl.system.System"] = Ti;
      Ti.__name__ = "openfl.system.System";
      Ti.__properties__ = {
        get_totalMemory: "get_totalMemory"
      };
      Ti.gc = function () {};
      Ti.get_totalMemory = function () {
        if (window.performance && window.performance.memory) {
          return window.performance.memory.usedJSHeapSize;
        } else {
          return 0;
        }
      };
      function So() {
        ua.call(this);
        this.clear();
      }
      h["openfl.text.StyleSheet"] = So;
      So.__name__ = "openfl.text.StyleSheet";
      So.__super__ = ua;
      So.prototype = q(ua.prototype, {
        clear: function () {
          this.__styleNamesDirty = false;
          this.__styleNames = null;
          this.__styles = new V();
        },
        __applyStyle: function (a, b) {
          a = a.toLowerCase();
          if (Object.prototype.hasOwnProperty.call(this.__styles.h, a)) {
            this.__applyStyleObject(this.__styles.h[a], b);
          }
        },
        __applyStyleObject: function (a, b) {
          if (a != null) {
            var c = new sa("[0-9A-Fa-f]+", "");
            var d = new sa("[0-9]+", "");
            var e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "color")) {
              e = pf.__get(a, "color");
              e = c.match(e == null ? null : H.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.color = H.parseInt("0x" + c.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "fontFamily")) {
              e = pf.__get(a, "fontFamily");
              b.font = this.__parseFont(e == null ? null : H.string(e));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "fontSize")) {
              e = pf.__get(a, "fontSize");
              e = d.match(e == null ? null : H.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.size = H.parseInt(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "fontStyle")) {
              switch (pf.__get(a, "fontStyle")) {
                case "italic":
                  b.italic = true;
                  break;
                case "normal":
                  b.italic = false;
              }
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "fontWeight")) {
              switch (pf.__get(a, "fontWeight")) {
                case "bold":
                  b.bold = true;
                  break;
                case "normal":
                  b.bold = false;
              }
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "leading")) {
              e = pf.__get(a, "leading");
              e = d.match(e == null ? null : H.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.leading = H.parseInt(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "letterSpacing")) {
              e = pf.__get(a, "letterSpacing");
              e = d.match(e == null ? null : H.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.letterSpacing = parseFloat(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "marginLeft")) {
              e = pf.__get(a, "marginLeft");
              e = d.match(e == null ? null : H.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.leftMargin = H.parseInt(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "marginRight")) {
              e = pf.__get(a, "marginRight");
              e = d.match(e == null ? null : H.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.rightMargin = H.parseInt(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "textAlign")) {
              switch (pf.__get(a, "textAlign")) {
                case "center":
                  b.align = 0;
                  break;
                case "justify":
                  b.align = 2;
                  break;
                case "left":
                  b.align = 3;
                  break;
                case "right":
                  b.align = 4;
              }
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "textDecoration")) {
              switch (pf.__get(a, "textDecoration")) {
                case "none":
                  b.underline = false;
                  break;
                case "underline":
                  b.underline = true;
              }
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "textIndent")) {
              e = pf.__get(a, "textIndent");
              e = d.match(e == null ? null : H.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.blockIndent = H.parseInt(d.matched(0));
            }
          }
        },
        __parseFont: function (a) {
          if (a == null) {
            return null;
          }
          if (a.indexOf(",") > -1) {
            a = M.substr(a, 0, a.indexOf(","));
          }
          switch (a) {
            case "mono":
              return "_typewriter";
            case "sans-serif":
              return "_sans";
            case "serif":
              return "_serif";
            default:
              return a;
          }
        },
        __class__: So
      });
      function nd(a, b, c, d, e, f, g, h, n, p, l, m, t) {
        this.font = a;
        this.size = b;
        this.color = c;
        this.bold = d;
        this.italic = e;
        this.underline = f;
        this.url = g;
        this.target = h;
        this.align = n;
        this.leftMargin = p;
        this.rightMargin = l;
        this.indent = m;
        this.leading = t;
      }
      h["openfl.text.TextFormat"] = nd;
      nd.__name__ = "openfl.text.TextFormat";
      nd.prototype = {
        clone: function () {
          var a = new nd(this.font, this.size, this.color, this.bold, this.italic, this.underline, this.url, this.target);
          a.align = this.align;
          a.leftMargin = this.leftMargin;
          a.rightMargin = this.rightMargin;
          a.indent = this.indent;
          a.leading = this.leading;
          a.blockIndent = this.blockIndent;
          a.bullet = this.bullet;
          a.kerning = this.kerning;
          a.letterSpacing = this.letterSpacing;
          a.tabStops = this.tabStops;
          a.__ascent = this.__ascent;
          a.__descent = this.__descent;
          a.__cacheKey = this.__toCacheKey();
          return a;
        },
        __merge: function (a) {
          if (a.font != null) {
            this.font = a.font;
          }
          if (a.size != null) {
            this.size = a.size;
          }
          if (a.color != null) {
            this.color = a.color;
          }
          if (a.bold != null) {
            this.bold = a.bold;
          }
          if (a.italic != null) {
            this.italic = a.italic;
          }
          if (a.underline != null) {
            this.underline = a.underline;
          }
          if (a.url != null) {
            this.url = a.url;
          }
          if (a.target != null) {
            this.target = a.target;
          }
          if (a.align != null) {
            this.align = a.align;
          }
          if (a.leftMargin != null) {
            this.leftMargin = a.leftMargin;
          }
          if (a.rightMargin != null) {
            this.rightMargin = a.rightMargin;
          }
          if (a.indent != null) {
            this.indent = a.indent;
          }
          if (a.leading != null) {
            this.leading = a.leading;
          }
          if (a.blockIndent != null) {
            this.blockIndent = a.blockIndent;
          }
          if (a.bullet != null) {
            this.bullet = a.bullet;
          }
          if (a.kerning != null) {
            this.kerning = a.kerning;
          }
          if (a.letterSpacing != null) {
            this.letterSpacing = a.letterSpacing;
          }
          if (a.tabStops != null) {
            this.tabStops = a.tabStops;
          }
          if (a.__ascent != null) {
            this.__ascent = a.__ascent;
          }
          if (a.__descent != null) {
            this.__descent = a.__descent;
          }
          this.__toCacheKey();
        },
        __toCacheKey: function () {
          return this.__cacheKey = "" + this.font + this.size + H.string(this.bold) + H.string(this.italic);
        },
        __class__: nd
      };
      var Wp = {
        fromString: function (a) {
          switch (a) {
            case "center":
              return 0;
            case "end":
              return 1;
            case "justify":
              return 2;
            case "left":
              return 3;
            case "right":
              return 4;
            case "start":
              return 5;
            default:
              return null;
          }
        }
      };
      function bk(a, b) {
        this.__collisions = [];
        this.__wordMap = new rc();
        this.set(a, b);
      }
      h["openfl.text._internal.CacheMeasurement"] = bk;
      bk.__name__ = "openfl.text._internal.CacheMeasurement";
      bk.prototype = {
        set: function (a, b) {
          this.__addCollision(a, b);
        },
        get: function (a) {
          if (this.__collisions.length > 1) {
            return this.__wordMap.h[this.__collisions.indexOf(a)];
          } else {
            return this.__wordMap.h[0];
          }
        },
        __addCollision: function (a, b) {
          if (!this.exists(a)) {
            var c = this.__wordMap;
            a = this.__collisions.push(a) - 1;
            c.h[a] = b;
          }
        },
        exists: function (a) {
          if (this.__collisions.length == 0) {
            return false;
          } else {
            return this.__collisions.indexOf(a) > -1;
          }
        },
        __class__: bk
      };
      function Wa() {}
      h["openfl.text._internal.HTMLParser"] = Wa;
      Wa.__name__ = "openfl.text._internal.HTMLParser";
      Wa.parse = function (a, b, c, d, e) {
        a = b ? a.replace(Wa.__regexBreakTag.r, "\n") : a.replace(Wa.__regexBreakTag.r, "");
        a = a.replace(Wa.__regexEntities[5].r, " ");
        a = Wa.__regexCharEntity.map(a, function (a) {
          var b = a.matched(1);
          var c = a.matched(2);
          if (b != null && (b = H.parseInt(b), b != null)) {
            return String.fromCodePoint(b);
          } else if (c != null && (c = H.parseInt("0" + c), c != null)) {
            return String.fromCodePoint(c);
          } else {
            return a.matched(0);
          }
        });
        var f = a.split("<");
        if (f.length == 1) {
          a = w.htmlUnescape(a.replace(Wa.__regexHTMLTag.r, ""));
          if (e.get_length() > 1) {
            var g = e.get_length() - 1;
            e.__tempIndex = 1;
            for (var h = 0, n = []; h < n.length;) {
              var p = n[h++];
              e.insertAt(e.__tempIndex, p);
              e.__tempIndex++;
            }
            e.splice(e.__tempIndex, g);
          }
          b = e.get(0);
          b.format = d;
          b.start = 0;
          b.end = a.length;
        } else {
          g = e.get_length();
          h = e.__tempIndex = 0;
          for (n = []; h < n.length;) {
            p = n[h++];
            e.insertAt(e.__tempIndex, p);
            e.__tempIndex++;
          }
          e.splice(e.__tempIndex, g);
          a = "";
          g = [d.clone()];
          h = [];
          p = false;
          for (n = 0; n < f.length;) {
            var l = f[n];
            ++n;
            if (l != "") {
              var m = M.substr(l, 0, 1) == "/";
              var t = l.indexOf(">");
              var q = t + 1;
              var u = l.indexOf(" ");
              u = l.substring(m ? 1 : 0, u > -1 && u < t ? u : t).toLowerCase();
              if (m) {
                if (h.length != 0 && u == h[h.length - 1]) {
                  h.pop();
                  g.pop();
                  m = g[g.length - 1].clone();
                  if ((u == "p" || u == "li") && e.get_length() > 0) {
                    if (b) {
                      a += "\n";
                    }
                    p = true;
                  }
                  if (q < l.length) {
                    p = w.htmlUnescape(M.substr(l, q, null));
                    e.push(new Yd(m, a.length, a.length + p.length));
                    a += p;
                    p = false;
                  }
                }
              } else {
                m = g[g.length - 1].clone();
                if (t > -1) {
                  if (c != null) {
                    c.__applyStyle(u, m);
                    if (Wa.__regexClass.match(l)) {
                      c.__applyStyle("." + Wa.__getAttributeMatch(Wa.__regexClass), m);
                      c.__applyStyle(u + "." + Wa.__getAttributeMatch(Wa.__regexClass), m);
                    }
                  }
                  switch (u) {
                    case "a":
                      if (c != null) {
                        c.__applyStyle("a:link", m);
                      }
                      if (Wa.__regexHref.match(l)) {
                        m.url = Wa.__getAttributeMatch(Wa.__regexHref);
                      }
                      break;
                    case "b":
                      m.bold = true;
                      break;
                    case "em":
                    case "i":
                      m.italic = true;
                      break;
                    case "font":
                      if (Wa.__regexFace.match(l)) {
                        m.font = Wa.__getAttributeMatch(Wa.__regexFace);
                      }
                      if (Wa.__regexColor.match(l)) {
                        m.color = H.parseInt("0x" + Wa.__getAttributeMatch(Wa.__regexColor));
                      }
                      if (Wa.__regexSize.match(l)) {
                        t = Wa.__getAttributeMatch(Wa.__regexSize);
                        var x = M.cca(t, 0);
                        m.size = x == 43 || x == 45 ? (g.length >= 2 ? g[g.length - 2] : d).size + H.parseInt(t) : H.parseInt(t);
                      }
                      break;
                    case "li":
                      if (e.get_length() > 0 && !p) {
                        a += "\n";
                      }
                      t = m.clone();
                      t.underline = false;
                      e.push(new Yd(t, a.length, a.length + 2));
                      a += " ";
                      break;
                    case "p":
                      if (e.get_length() > 0 && !p) {
                        a += "\n";
                      }
                      if (Wa.__regexAlign.match(l)) {
                        t = Wa.__getAttributeMatch(Wa.__regexAlign).toLowerCase();
                        m.align = Wp.fromString(t);
                      }
                      break;
                    case "textformat":
                      if (Wa.__regexBlockIndent.match(l)) {
                        m.blockIndent = H.parseInt(Wa.__getAttributeMatch(Wa.__regexBlockIndent));
                      }
                      if (Wa.__regexIndent.match(l)) {
                        m.indent = H.parseInt(Wa.__getAttributeMatch(Wa.__regexIndent));
                      }
                      if (Wa.__regexLeading.match(l)) {
                        m.leading = H.parseInt(Wa.__getAttributeMatch(Wa.__regexLeading));
                      }
                      if (Wa.__regexLeftMargin.match(l)) {
                        m.leftMargin = H.parseInt(Wa.__getAttributeMatch(Wa.__regexLeftMargin));
                      }
                      if (Wa.__regexRightMargin.match(l)) {
                        m.rightMargin = H.parseInt(Wa.__getAttributeMatch(Wa.__regexRightMargin));
                      }
                      if (Wa.__regexTabStops.match(l)) {
                        t = Wa.__getAttributeMatch(Wa.__regexTabStops).split(" ");
                        x = [];
                        for (var A = 0; A < t.length;) {
                          var y = t[A];
                          ++A;
                          x.push(H.parseInt(y));
                        }
                        m.tabStops = x;
                      }
                      break;
                    case "u":
                      m.underline = true;
                  }
                  g.push(m);
                  h.push(u);
                  if (q < l.length) {
                    p = w.htmlUnescape(l.substring(q));
                    e.push(new Yd(m, a.length, a.length + p.length));
                    a += p;
                    p = false;
                  }
                } else {
                  p = w.htmlUnescape(l);
                  e.push(new Yd(m, a.length, a.length + p.length));
                  a += p;
                  p = false;
                }
              }
            }
          }
          if (e.get_length() == 0) {
            e.push(new Yd(g[0], 0, 0));
          }
        }
        return a;
      };
      Wa.__getAttributeMatch = function (a) {
        return a.matched(2) ?? a.matched(3);
      };
      function Hi() {
        this.__shortWordMap = new V();
        this.__longWordMap = new V();
      }
      h["openfl.text._internal.ShapeCache"] = Hi;
      Hi.__name__ = "openfl.text._internal.ShapeCache";
      Hi.hashFunction = function (a) {
        var b = 0;
        var c;
        for (var d = 0, e = a.length; d < e;) {
          c = d++;
          c = M.cca(a, c);
          b = (b << 5) - b + c;
          b |= 0;
        }
        return b;
      };
      Hi.prototype = {
        cache: function (a, b, c) {
          a = a.format.__cacheKey;
          if (c.length > 15) {
            return this.__cacheLongWord(c, a, b);
          } else {
            return this.__cacheShortWord(c, a, b);
          }
        },
        __cacheShortWord: function (a, b, c) {
          if (Object.prototype.hasOwnProperty.call(this.__shortWordMap.h, b)) {
            var d = this.__shortWordMap.h[b];
            if (Object.prototype.hasOwnProperty.call(d.h, a)) {
              return d.h[a];
            }
            var e = c();
            d.h[a] = e;
          } else {
            d = new V();
            e = c();
            d.h[a] = e;
            this.__shortWordMap.h[b] = d;
          }
          return c();
        },
        __cacheLongWord: function (a, b, c) {
          var d = Hi.hashFunction(a);
          if (Object.prototype.hasOwnProperty.call(this.__longWordMap.h, b)) {
            var e = this.__longWordMap.h[b];
            if (e.h.hasOwnProperty(d)) {
              var f = e.h[d];
              if (f.exists(a)) {
                return f.get(a);
              }
              f.set(a, c());
            } else {
              f = new bk(a, c());
              e.h[d] = f;
            }
          } else {
            e = new rc();
            f = new bk(a, c());
            f.hash = d;
            e.h[d] = f;
            this.__longWordMap.h[b] = e;
          }
          return c();
        },
        __class__: Hi
      };
      function ic(a) {
        this.__shapeCache = new Hi();
        this.textField = a;
        this.height = this.width = 100;
        this.set_text("");
        this.bounds = new ea(0, 0, 0, 0);
        this.textBounds = new ea(0, 0, 0, 0);
        this.type = 0;
        this.autoSize = 2;
        this.embedFonts = false;
        this.selectable = true;
        this.borderColor = 0;
        this.border = false;
        this.backgroundColor = 16777215;
        this.background = false;
        this.gridFitType = 1;
        this.maxChars = 0;
        this.multiline = false;
        this.numLines = 1;
        this.scrollH = this.sharpness = 0;
        this.set_scrollV(1);
        this.wordWrap = false;
        this.lineAscents = qb.toFloatVector(null);
        this.lineBreaks = qb.toIntVector(null);
        this.lineDescents = qb.toFloatVector(null);
        this.lineLeadings = qb.toFloatVector(null);
        this.lineHeights = qb.toFloatVector(null);
        this.lineWidths = qb.toFloatVector(null);
        this.layoutGroups = qb.toObjectVector(null);
        this.textFormatRanges = qb.toObjectVector(null);
        if (ic.__context == null) {
          ic.__context = window.document.createElement("canvas").getContext("2d");
        }
      }
      h["openfl.text._internal.TextEngine"] = ic;
      ic.__name__ = "openfl.text._internal.TextEngine";
      ic.findFont = function (a) {
        return t.__fontByName.h[a];
      };
      ic.findFontVariant = function (a) {
        var b = a.font;
        var c = a.bold;
        a = a.italic;
        if (b == null) {
          b = "_serif";
        }
        var d = w.replace(w.replace(b, " Normal", ""), " Regular", "");
        if (c && a && Object.prototype.hasOwnProperty.call(t.__fontByName.h, d + " Bold Italic")) {
          return ic.findFont(d + " Bold Italic");
        } else if (c && Object.prototype.hasOwnProperty.call(t.__fontByName.h, d + " Bold")) {
          return ic.findFont(d + " Bold");
        } else if (a && Object.prototype.hasOwnProperty.call(t.__fontByName.h, d + " Italic")) {
          return ic.findFont(d + " Italic");
        } else {
          return ic.findFont(b);
        }
      };
      ic.getFormatHeight = function (a) {
        var b = ic.getFont(a);
        ic.__context.font = b;
        b = ic.getFontInstance(a);
        if (a.__ascent != null) {
          var c = a.size * a.__ascent;
          b = a.size * a.__descent;
        } else if (b != null && b.unitsPerEM != 0) {
          c = b.ascender / b.unitsPerEM * a.size;
          b = Math.abs(b.descender / b.unitsPerEM * a.size);
        } else {
          c = a.size;
          b = a.size * 0.185;
        }
        return c + b + a.leading;
      };
      ic.getFont = function (a) {
        var b = a.font;
        var c = a.bold;
        var d = a.italic;
        if (b == null) {
          b = "_serif";
        }
        var e = w.replace(w.replace(b, " Normal", ""), " Regular", "");
        if (c && d && Object.prototype.hasOwnProperty.call(t.__fontByName.h, e + " Bold Italic")) {
          b = e + " Bold Italic";
          d = c = false;
        } else if (c && Object.prototype.hasOwnProperty.call(t.__fontByName.h, e + " Bold")) {
          b = e + " Bold";
          c = false;
        } else if (d && Object.prototype.hasOwnProperty.call(t.__fontByName.h, e + " Italic")) {
          b = e + " Italic";
          d = false;
        } else {
          if (c && (b.indexOf(" Bold ") > -1 || w.endsWith(b, " Bold"))) {
            c = false;
          }
          if (d && (b.indexOf(" Italic ") > -1 || w.endsWith(b, " Italic"))) {
            d = false;
          }
        }
        c = (d ? "italic " : "normal ") + "normal " + (c ? "bold " : "normal ");
        c += a.size + "px";
        c += "/" + (a.size + 3) + "px ";
        switch (b) {
          case "_sans":
            a = "sans-serif";
            break;
          case "_serif":
            a = "serif";
            break;
          case "_typewriter":
            a = "monospace";
            break;
          default:
            a = "'" + b.replace(/^[\s'"]+(.*)[\s'"]+$/, "$1") + "'";
        }
        return c += "" + a;
      };
      ic.getFontInstance = function (a) {
        return ic.findFontVariant(a);
      };
      ic.prototype = {
        getBounds: function () {
          var a = this.border ? 1 : 0;
          this.bounds.width = this.width + a;
          this.bounds.height = this.height + a;
          a = this.width;
          var b = this.height;
          var c = this.layoutGroups.get_length() - 1;
          for (var d = 0, e = this.layoutGroups.get_length(); d < e;) {
            var f = d++;
            var g = this.layoutGroups.get(f);
            if (f != c || g.startIndex != g.endIndex || this.type == 1) {
              if (g.offsetX < a) {
                a = g.offsetX;
              }
              if (g.offsetY < b) {
                b = g.offsetY;
              }
            }
          }
          if (a >= this.width) {
            a = 2;
          }
          if (b >= this.height) {
            b = 2;
          }
          this.textBounds.setTo(Math.max(a - 2, 0), Math.max(b - 2, 0), Math.min(this.textWidth + 4, this.bounds.width + 4), Math.min(this.textHeight * 1.185 + 4, this.bounds.height + 4));
        },
        getLineBreaks: function () {
          this.lineBreaks.set_length(0);
          for (var a = -1, b; a < this.text.length;) {
            b = this.text.indexOf("\n", a + 1);
            a = this.text.indexOf("\r", a + 1);
            a = a == -1 ? b : b == -1 ? a : a < b ? a : b;
            if (a > -1) {
              this.lineBreaks.push(a);
            } else {
              break;
            }
          }
        },
        getLineMeasurements: function () {
          this.lineAscents.set_length(0);
          this.lineDescents.set_length(0);
          this.lineLeadings.set_length(0);
          this.lineHeights.set_length(0);
          this.lineWidths.set_length(0);
          var a = 0;
          var b = 0;
          var c = null;
          var d = 0;
          var e = 0;
          this.textHeight = this.textWidth = 0;
          this.numLines = 1;
          this.maxScrollH = 0;
          var f = this.layoutGroups.get_length() - 1;
          for (var g = 0, h = this.layoutGroups.get_length(); g < h;) {
            var n = g++;
            var p = this.layoutGroups.get(n);
            if (n != f || p.startIndex != p.endIndex || this.type == 1) {
              while (p.lineIndex > this.numLines - 1) {
                this.lineAscents.push(a);
                this.lineDescents.push(b);
                this.lineLeadings.push(c ?? 0);
                this.lineHeights.push(d);
                this.lineWidths.push(e);
                b = a = 0;
                c = null;
                e = d = 0;
                this.numLines++;
              }
              a = Math.max(a, p.ascent);
              b = Math.max(b, p.descent);
              c = c == null ? p.leading : Math.max(c, p.leading) | 0;
              d = Math.max(d, p.height);
              e = p.offsetX - 2 + p.width;
              if (e > this.textWidth) {
                this.textWidth = e;
              }
              n = Math.ceil(p.offsetY - 2 + p.ascent + p.descent);
              if (n > this.textHeight) {
                this.textHeight = n;
              }
            }
          }
          if (this.textHeight == 0 && this.textField != null && this.type == 1) {
            a = this.textField.__textFormat;
            b = ic.getFontInstance(a);
            if (a.__ascent != null) {
              f = a.size * a.__ascent;
              g = a.size * a.__descent;
            } else if (b != null && b.unitsPerEM != 0) {
              f = b.ascender / b.unitsPerEM * a.size;
              g = Math.abs(b.descender / b.unitsPerEM * a.size);
            } else {
              f = a.size;
              g = a.size * 0.185;
            }
            c = a.leading;
            a = f;
            b = g;
            this.textHeight = n = Math.ceil(f + g);
          }
          this.lineAscents.push(a);
          this.lineDescents.push(b);
          this.lineLeadings.push(c ?? 0);
          this.lineHeights.push(d);
          this.lineWidths.push(e);
          if (this.numLines == 1 && c > 0) {
            this.textHeight += c;
          }
          if (this.autoSize != 2) {
            switch (this.autoSize) {
              case 0:
              case 1:
              case 3:
                if (!this.wordWrap) {
                  this.width = this.textWidth + 4;
                }
                this.height = this.textHeight + 4;
                this.bottomScrollV = this.numLines;
            }
          }
          this.maxScrollH = this.textWidth > this.width - 4 ? this.textWidth - this.width + 4 | 0 : 0;
          if (this.scrollH > this.maxScrollH) {
            this.scrollH = this.maxScrollH;
          }
        },
        getLayoutGroups: function () {
          var a = this;
          this.layoutGroups.set_length(0);
          if (this.text != null && this.text != "") {
            var b = -1;
            var c = null;
            var d = null;
            var e = Xc.__defaultTextFormat.clone();
            var f = 0;
            var g = 0;
            var h = 0;
            var n = 0;
            var p = 3;
            var l = 0;
            var m = 0;
            var t = 0;
            var q = 0;
            var u = true;
            var x = null;
            var w = null;
            var A = 0;
            var y = 0;
            var z = 0;
            var C = -2;
            var H = -1;
            var D = this.text.indexOf(" ");
            var F = 0;
            var B = F < this.lineBreaks.get_length() ? this.lineBreaks.get(F) : -1;
            var Ka = 0;
            var G = 0;
            var v = 0;
            var K = 0;
            function ha(b, d, f) {
              function g() {
                var c = [];
                if (a.__useIntAdvances == null) {
                  var e = new sa("Trident/7.0", "");
                  a.__useIntAdvances = e.match(I.navigator.userAgent);
                }
                if (a.__useIntAdvances) {
                  var g = 0;
                  e = d;
                  for (var k = f; e < k;) {
                    var m = e++;
                    m = a.measureText(b.substring(d, m + 1));
                    c.push(m - g);
                    g = m;
                  }
                } else {
                  e = d;
                  k = f;
                  while (e < k) {
                    m = e++;
                    if (m < b.length - 1) {
                      g = a.measureText(b.charAt(m + 1));
                      g = a.measureText(M.substr(b, m, 2)) - g;
                    } else {
                      g = ic.__context.measureText(b.charAt(m)).width;
                    }
                    c.push(g);
                  }
                }
                return c;
              }
              if (e.align == 2) {
                return g();
              } else {
                return a.__shapeCache.cache(c, g, b.substring(d, f));
              }
            }
            function la(a) {
              var b = 0;
              for (var c = 0; c < a.length;) {
                var d = a[c];
                ++c;
                b += d;
              }
              return b;
            }
            function ya() {
              return 2 + t + l + (u ? m : 0);
            }
            function N() {
              return a.width - 2 - q - ya();
            }
            function Qa(b, d) {
              if (x == null || x.startIndex != x.endIndex) {
                x = new Qm(c.format, b, d);
                a.layoutGroups.push(x);
              } else {
                x.format = c.format;
                x.startIndex = b;
                x.endIndex = d;
              }
            }
            function ma() {
              if (e.__ascent != null) {
                g = e.size * e.__ascent;
                n = e.size * e.__descent;
              } else if (d != null && d.unitsPerEM != 0) {
                g = d.ascender / d.unitsPerEM * e.size;
                n = Math.abs(d.descender / d.unitsPerEM * e.size);
              } else {
                g = e.size;
                n = e.size * 0.185;
              }
              f = e.leading;
              y = Math.ceil(g + n + f);
              if (y > z) {
                z = y;
              }
              if (g > h) {
                h = g;
              }
            }
            function rb() {
              u = true;
              p = e.align ?? 3;
              l = e.blockIndent ?? 0;
              m = e.indent ?? 0;
              t = e.leftMargin ?? 0;
              q = e.rightMargin ?? 0;
            }
            function E() {
              if (b < a.textFormatRanges.get_length() - 1) {
                b += 1;
                c = a.textFormatRanges.get(b);
                e.__merge(c.format);
                var f = ic.getFont(e);
                ic.__context.font = f;
                d = ic.getFontInstance(e);
                return true;
              }
              return false;
            }
            function R(d, e) {
              if (d >= e) {
                w = [];
                A = 0;
              } else if (e <= c.end) {
                w = ha(a.text, d, e);
                A = la(w);
              } else {
                var f = d;
                d = c.end;
                var g = 0;
                w = [];
                for (A = 0;;) {
                  if (f != d) {
                    f = ha(a.text, f, d);
                    w = w.concat(f);
                  }
                  if (d != e) {
                    if (!E()) {
                      Ua.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                        fileName: "openfl/text/_internal/TextEngine.hx",
                        lineNumber: 1117,
                        className: "openfl.text._internal.TextEngine",
                        methodName: "getLayoutGroups"
                      });
                      break;
                    }
                    f = d;
                    d = e < c.end ? e : c.end;
                    ++g;
                  } else {
                    A = la(w);
                    break;
                  }
                }
                b -= g + 1;
                E();
              }
            }
            function U(b) {
              if (b <= c.end) {
                w = ha(a.text, v, b);
                A = la(w);
                Qa(v, b);
                x.positions = w;
                var d = Ka;
                var e = ya();
                x.offsetX = d + e;
                x.ascent = g;
                x.descent = n;
                x.leading = f;
                x.lineIndex = K;
                x.offsetY = G + 2;
                x.width = A;
                x.height = y;
                Ka += A;
                if (b == c.end) {
                  x = null;
                  E();
                  ma();
                }
              } else {
                while (true) {
                  var k = b < c.end ? b : c.end;
                  if (v != k) {
                    w = ha(a.text, v, k);
                    A = la(w);
                    Qa(v, k);
                    x.positions = w;
                    d = Ka;
                    e = ya();
                    x.offsetX = d + e;
                    x.ascent = g;
                    x.descent = n;
                    x.leading = f;
                    x.lineIndex = K;
                    x.offsetY = G + 2;
                    x.width = A;
                    x.height = y;
                    Ka += A;
                    v = k;
                  }
                  if (k == c.end) {
                    x = null;
                  }
                  if (k == b) {
                    break;
                  }
                  if (!E()) {
                    Ua.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                      fileName: "openfl/text/_internal/TextEngine.hx",
                      lineNumber: 1205,
                      className: "openfl.text._internal.TextEngine",
                      methodName: "getLayoutGroups"
                    });
                    break;
                  }
                  ma();
                }
              }
              v = b;
            }
            function T() {
              ma();
              for (var b = a.layoutGroups.get_length(); --b > -1;) {
                var c = a.layoutGroups.get(b);
                if (c.lineIndex < K) {
                  break;
                }
                if (!(c.lineIndex > K)) {
                  c.ascent = h;
                  c.height = z;
                }
              }
              G += z;
              z = h = 0;
              K += 1;
              Ka = 0;
              u = false;
            }
            function O(b) {
              if (a.width >= 4 && a.wordWrap) {
                var c = w;
                var d = la(c);
                for (var e = c.length - 1; e >= 0;) {
                  var f = M.cca(a.text, v + e);
                  if (f != 32 && f != 9) {
                    break;
                  }
                  d -= c[e];
                  --e;
                }
                while (c.length > 0 && Ka + d > N()) {
                  for (f = e = d = 0; Ka + f < N();) {
                    var g = c[e];
                    if (g == 0) {
                      ++e;
                      ++d;
                    } else {
                      f += g;
                      ++e;
                    }
                  }
                  if (e == d) {
                    e = d + 1;
                  } else {
                    while (e > 1 && Ka + f > N()) {
                      --e;
                      if (e - d > 0) {
                        R(v, v + e - d);
                        f = A;
                      } else {
                        e = 1;
                        d = 0;
                        R(v, v + 1);
                        f = 0;
                      }
                    }
                  }
                  c = v + e - d;
                  U(c);
                  T();
                  R(c, b);
                  c = w;
                  d = A;
                }
              }
              U(b);
            }
            E();
            rb();
            ma();
            for (var Q, W = this.text.length + 1; v < W;) {
              if (B > -1 && (D == -1 || B < D)) {
                if (v <= B) {
                  R(v, B);
                  O(B);
                  x = null;
                } else if (x != null && x.startIndex != x.endIndex) {
                  if (x.endIndex == D) {
                    x.width -= x.positions[x.positions.length - 1];
                  }
                  x = null;
                }
                T();
                if (c.end == B) {
                  E();
                  ma();
                }
                v = B + 1;
                H = B;
                ++F;
                B = F < this.lineBreaks.get_length() ? this.lineBreaks.get(F) : -1;
                rb();
              } else if (D > -1) {
                if (x != null && x.startIndex != x.endIndex) {
                  x = null;
                }
                Q = false;
                while (v < this.text.length) {
                  var S = -1;
                  if (D == -1) {
                    S = B;
                  } else {
                    S = D + 1;
                    if (B > -1 && B < S) {
                      S = B;
                    }
                  }
                  if (S == -1) {
                    S = this.text.length;
                  }
                  R(v, S);
                  if (p == 2) {
                    if (w.length > 0 && v == C) {
                      v += 1;
                      var tc = w.shift();
                      A -= tc;
                      Ka += tc;
                    }
                    if (w.length > 0 && S == D + 1) {
                      --S;
                      tc = w.pop();
                      A -= tc;
                    }
                  }
                  if (this.wordWrap && Ka + A > N()) {
                    Q = true;
                    if (w.length > 0 && S == D + 1 && Ka + A - w[w.length - 1] <= N()) {
                      Q = false;
                    }
                  }
                  if (Q) {
                    if (p != 2 && (x != null || this.layoutGroups.get_length() > 0)) {
                      Q = x;
                      if (Q == null) {
                        Q = this.layoutGroups.get(this.layoutGroups.get_length() - 1);
                      }
                      Q.width -= Q.positions[Q.positions.length - 1];
                      Q.endIndex--;
                    }
                    Q = this.layoutGroups.get_length() - 1;
                    for (tc = 0; Q >= 0;) {
                      x = this.layoutGroups.get(Q);
                      if (Q > 0 && x.startIndex > C) {
                        ++tc;
                      } else {
                        break;
                      }
                      --Q;
                    }
                    if (v == C + 1) {
                      T();
                    }
                    Ka = 0;
                    if (tc > 0) {
                      Q = this.layoutGroups.get(this.layoutGroups.get_length() - tc).offsetX;
                      tc = this.layoutGroups.get_length() - tc;
                      for (var P = this.layoutGroups.get_length(); tc < P;) {
                        var X = tc++;
                        x = this.layoutGroups.get(X);
                        x.offsetX -= Q;
                        x.offsetY = G + 2;
                        x.lineIndex = K;
                        Ka += x.width;
                      }
                    }
                    O(S);
                    Q = false;
                  } else if (x != null && v == D && C != D - 1) {
                    if (p != 2) {
                      x.endIndex = D;
                      x.positions = x.positions.concat(w);
                      x.width += A;
                    }
                    Ka += A;
                    v = S;
                  } else if (x == null || p == 2) {
                    O(S);
                    if (S == this.text.length) {
                      T();
                    }
                  } else {
                    tc = S < c.end ? S : c.end;
                    if (tc < S) {
                      w = ha(this.text, v, tc);
                      A = la(w);
                    }
                    x.endIndex = tc;
                    x.positions = x.positions.concat(w);
                    x.width += A;
                    Ka += A;
                    if (tc == c.end) {
                      x = null;
                      E();
                      ma();
                      v = tc;
                      if (tc != S) {
                        U(S);
                      }
                    }
                    if (B == S) {
                      ++S;
                    }
                    v = S;
                    if (S == this.text.length) {
                      T();
                      if (B != -1) {
                        H = B;
                        ++F;
                        B = F < this.lineBreaks.get_length() ? this.lineBreaks.get(F) : -1;
                      }
                    }
                  }
                  S = this.text.indexOf(" ", v);
                  if (B == C) {
                    x.endIndex = B;
                    if (B - x.startIndex - x.positions.length < 0) {
                      x.positions.push(0);
                    }
                    v = B + 1;
                  }
                  C = D;
                  D = S;
                  if (B > -1 && B <= v && (D > B || D == -1) || v > this.text.length) {
                    break;
                  }
                }
              } else {
                if (v < this.text.length) {
                  R(v, this.text.length);
                  O(this.text.length);
                  T();
                }
                v += 1;
              }
            }
            if (H == v - 2 && H > -1) {
              Qa(v - 1, v - 1);
              x.positions = [];
              x.ascent = g;
              x.descent = n;
              x.leading = f;
              x.lineIndex = K;
              x.offsetX = ya();
              x.offsetY = G + 2;
              x.width = 0;
              x.height = y;
            }
          }
        },
        measureText: function (a) {
          return ic.__context.measureText(a).width;
        },
        restrictText: function (a) {
          if (a == null) {
            return a;
          }
          if (this.__restrictRegexp != null) {
            a = this.__restrictRegexp.split(a).join("");
          }
          return a;
        },
        setTextAlignment: function () {
          var a = -1;
          var b = 0;
          var c;
          var d;
          var e = false;
          for (var f = 0, g = this.layoutGroups.get_length(); f < g;) {
            var h = f++;
            c = this.layoutGroups.get(h);
            if (c.lineIndex != a) {
              a = c.lineIndex;
              b = this.width - 4 - c.format.rightMargin;
              switch (c.format.align) {
                case 0:
                  b = this.lineWidths.get(a) < b ? Math.round((b - this.lineWidths.get(a)) / 2) : 0;
                  break;
                case 2:
                  if (this.lineWidths.get(a) < b) {
                    d = 1;
                    for (var n = h + 1, p = this.layoutGroups.get_length(); n < p;) {
                      var l = n++;
                      if (this.layoutGroups.get(l).lineIndex == a) {
                        if (l == 0 || M.cca(this.text, this.layoutGroups.get(l).startIndex - 1) == 32) {
                          ++d;
                        }
                      } else {
                        break;
                      }
                    }
                    if (d > 1 && (c = this.layoutGroups.get(h + d - 1), n = M.cca(this.text, c.endIndex), c.endIndex < this.text.length && n != 10 && n != 13)) {
                      b = (b - this.lineWidths.get(a)) / (d - 1);
                      e = true;
                      n = 1;
                      do {
                        this.layoutGroups.get(h + n).offsetX += b * n;
                      } while (++n < d);
                    }
                  }
                  b = 0;
                  break;
                case 4:
                  b = this.lineWidths.get(a) < b ? Math.round(b - this.lineWidths.get(a)) : 0;
                  break;
                default:
                  b = 0;
              }
            }
            if (b > 0) {
              c.offsetX += b;
            }
          }
          if (e) {
            this.getLineMeasurements();
          }
        },
        update: function () {
          if (this.text == null || this.textFormatRanges.get_length() == 0) {
            this.lineAscents.set_length(0);
            this.lineBreaks.set_length(0);
            this.lineDescents.set_length(0);
            this.lineLeadings.set_length(0);
            this.lineHeights.set_length(0);
            this.lineWidths.set_length(0);
            this.layoutGroups.set_length(0);
            this.textHeight = this.textWidth = 0;
            this.numLines = 1;
            this.maxScrollH = 0;
            this.bottomScrollV = this.maxScrollV = 1;
          } else {
            this.getLineBreaks();
            this.getLayoutGroups();
            this.getLineMeasurements();
            this.setTextAlignment();
          }
          this.getBounds();
        },
        get_bottomScrollV: function () {
          if (this.numLines == 1 || this.lineHeights == null) {
            return 1;
          }
          var a = this.lineHeights.get_length();
          var b = this.lineLeadings.get_length() == a ? -this.lineLeadings.get(a - 1) : 0;
          for (var c = (this.get_scrollV() > 0 ? this.get_scrollV() : 1) - 1, d = this.lineHeights.get_length(); c < d;) {
            var e = c++;
            var f = this.lineHeights.get(e);
            b += f;
            if (b > this.height - 4) {
              a = e + (b - this.height >= 0 ? 0 : 1);
              break;
            }
          }
          if (a < this.get_scrollV()) {
            return this.get_scrollV();
          } else {
            return a;
          }
        },
        get_maxScrollV: function () {
          if (this.numLines == 1 || this.lineHeights == null) {
            return 1;
          }
          for (var a = this.numLines - 1, b = 0; a >= 0;) {
            b += this.lineHeights.get(a);
            if (b > this.height - 4) {
              a += b - this.height < 0 ? 1 : 2;
              break;
            }
            --a;
          }
          if (a < 1) {
            return 1;
          } else {
            return a;
          }
        },
        get_scrollV: function () {
          if (this.numLines == 1 || this.lineHeights == null) {
            return 1;
          }
          var a = this.get_maxScrollV();
          if (this.scrollV > a) {
            return a;
          } else {
            return this.scrollV;
          }
        },
        set_scrollV: function (a) {
          if (a < 1) {
            a = 1;
          } else if (a > this.get_maxScrollV()) {
            a = this.get_maxScrollV();
          }
          return this.scrollV = a;
        },
        set_text: function (a) {
          return this.text = a;
        },
        __class__: ic,
        __properties__: {
          set_text: "set_text",
          set_scrollV: "set_scrollV",
          get_scrollV: "get_scrollV",
          get_maxScrollV: "get_maxScrollV",
          get_bottomScrollV: "get_bottomScrollV"
        }
      };
      function Yd(a, b, c) {
        this.format = a;
        this.start = b;
        this.end = c;
      }
      h["openfl.text._internal.TextFormatRange"] = Yd;
      Yd.__name__ = "openfl.text._internal.TextFormatRange";
      Yd.prototype = {
        __class__: Yd
      };
      function Qm(a, b, c) {
        this.format = a;
        this.startIndex = b;
        this.endIndex = c;
      }
      h["openfl.text._internal.TextLayoutGroup"] = Qm;
      Qm.__name__ = "openfl.text._internal.TextLayoutGroup";
      Qm.prototype = {
        __class__: Qm
      };
      function Qe(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        ua.call(this);
        this.device = a;
        this.id = b;
        this.minValue = c;
        this.maxValue = d;
        this.value = e;
      }
      h["openfl.ui.GameInputControl"] = Qe;
      Qe.__name__ = "openfl.ui.GameInputControl";
      Qe.__super__ = ua;
      Qe.prototype = q(ua.prototype, {
        __class__: Qe
      });
      function Ln(a, b) {
        this.__controls = [];
        this.__button = new rc();
        this.__axis = new rc();
        this.id = a;
        this.name = b;
        a = new Qe(this, "AXIS_0", -1, 1);
        this.__axis.h[0] = a;
        this.__controls.push(a);
        a = new Qe(this, "AXIS_1", -1, 1);
        this.__axis.h[1] = a;
        this.__controls.push(a);
        a = new Qe(this, "AXIS_2", -1, 1);
        this.__axis.h[2] = a;
        this.__controls.push(a);
        a = new Qe(this, "AXIS_3", -1, 1);
        this.__axis.h[3] = a;
        this.__controls.push(a);
        a = new Qe(this, "AXIS_4", -1, 1);
        this.__axis.h[4] = a;
        this.__controls.push(a);
        a = new Qe(this, "AXIS_5", -1, 1);
        this.__axis.h[5] = a;
        this.__controls.push(a);
        for (b = 0; b < 15;) {
          var c = b++;
          a = new Qe(this, "BUTTON_" + c, 0, 1);
          this.__button.h[c] = a;
          this.__controls.push(a);
        }
      }
      h["openfl.ui.GameInputDevice"] = Ln;
      Ln.__name__ = "openfl.ui.GameInputDevice";
      Ln.prototype = {
        getControlAt: function (a) {
          if (a >= 0 && a < this.__controls.length) {
            return this.__controls[a];
          } else {
            return null;
          }
        },
        get_numControls: function () {
          return this.__controls.length;
        },
        __class__: Ln,
        __properties__: {
          get_numControls: "get_numControls"
        }
      };
      function op() {}
      h["openfl.ui.Keyboard"] = op;
      op.__name__ = "openfl.ui.Keyboard";
      op.__getCharCode = function (a, b) {
        if (b == null) {
          b = false;
        }
        if (b) {
          switch (a) {
            case 48:
              return 41;
            case 49:
              return 33;
            case 50:
              return 64;
            case 51:
              return 35;
            case 52:
              return 36;
            case 53:
              return 37;
            case 54:
              return 94;
            case 55:
              return 38;
            case 56:
              return 42;
            case 57:
              return 40;
            case 186:
              return 58;
            case 187:
              return 43;
            case 188:
              return 60;
            case 189:
              return 95;
            case 190:
              return 62;
            case 191:
              return 63;
            case 192:
              return 126;
            case 219:
              return 123;
            case 220:
              return 124;
            case 221:
              return 125;
            case 222:
              return 34;
          }
          if (a >= 65 && a <= 90) {
            return a - 65 + 65;
          }
        } else {
          switch (a) {
            case 8:
              return 8;
            case 9:
              return 9;
            case 13:
              return 13;
            case 27:
              return 27;
            case 32:
              return 32;
            case 186:
              return 59;
            case 187:
              return 61;
            case 188:
              return 44;
            case 189:
              return 45;
            case 190:
              return 46;
            case 191:
              return 47;
            case 192:
              return 96;
            case 219:
              return 91;
            case 220:
              return 92;
            case 221:
              return 93;
            case 222:
              return 39;
          }
          if (a >= 48 && a <= 57) {
            return a - 48 + 48;
          }
          if (a >= 65 && a <= 90) {
            return a - 65 + 97;
          }
        }
        if (a >= 96 && a <= 105) {
          return a - 96 + 48;
        }
        switch (a) {
          case 8:
            return 8;
          case 13:
            return 13;
          case 46:
            return 127;
          case 106:
            return 42;
          case 107:
            return 43;
          case 108:
            return 44;
          case 110:
            return 45;
          case 111:
            return 46;
        }
        return 0;
      };
      function hd() {}
      h["openfl.ui.Mouse"] = hd;
      hd.__name__ = "openfl.ui.Mouse";
      hd.__properties__ = {
        set_cursor: "set_cursor"
      };
      hd.hide = function () {
        hd.__hidden = true;
        for (var a = 0, b = rb.current.__windows; a < b.length;) {
          var c = b[a];
          ++a;
          c.set_cursor(null);
        }
      };
      hd.show = function () {
        hd.__hidden = false;
        var a = hd.__cursor;
        hd.__cursor = null;
        hd.set_cursor(a);
      };
      hd.set_cursor = function (a) {
        if (a == null) {
          a = "auto";
        }
        var b = null;
        switch (a) {
          case "arrow":
            b = Tb.ARROW;
            break;
          case "button":
            b = Tb.POINTER;
            break;
          case "crosshair":
            b = Tb.CROSSHAIR;
            break;
          case "custom":
            b = Tb.CUSTOM;
            break;
          case "hand":
            b = Tb.MOVE;
            break;
          case "ibeam":
            b = Tb.TEXT;
            break;
          case "resize_nesw":
            b = Tb.RESIZE_NESW;
            break;
          case "resize_ns":
            b = Tb.RESIZE_NS;
            break;
          case "resize_nwse":
            b = Tb.RESIZE_NWSE;
            break;
          case "resize_we":
            b = Tb.RESIZE_WE;
            break;
          case "wait":
            b = Tb.WAIT;
            break;
          case "waitarrow":
            b = Tb.WAIT_ARROW;
        }
        if (b != null && !hd.__hidden) {
          for (var c = 0, d = rb.current.__windows; c < d.length;) {
            var e = d[c];
            ++c;
            e.set_cursor(b);
          }
        }
        return hd.__cursor = a;
      };
      var Up = {
        toLimeCursor: function (a) {
          switch (a) {
            case "arrow":
              return Tb.ARROW;
            case "auto":
              return Tb.DEFAULT;
            case "button":
              return Tb.POINTER;
            case "crosshair":
              return Tb.CROSSHAIR;
            case "custom":
              return Tb.CUSTOM;
            case "hand":
              return Tb.MOVE;
            case "ibeam":
              return Tb.TEXT;
            case "resize_nesw":
              return Tb.RESIZE_NESW;
            case "resize_ns":
              return Tb.RESIZE_NS;
            case "resize_nwse":
              return Tb.RESIZE_NWSE;
            case "resize_we":
              return Tb.RESIZE_WE;
            case "wait":
              return Tb.WAIT;
            case "waitarrow":
              return Tb.WAIT_ARROW;
            default:
              return Tb.DEFAULT;
          }
        }
      };
      function ei() {}
      h["openfl.ui.Multitouch"] = ei;
      ei.__name__ = "openfl.ui.Multitouch";
      function wa(a) {
        if (a == null) {
          a = false;
        }
        this.debugEnabled = a;
        if (!wa.initialized) {
          wa.init();
        }
      }
      h["openfl.utils.AGALMiniAssembler"] = wa;
      wa.__name__ = "openfl.utils.AGALMiniAssembler";
      wa.init = function () {
        wa.initialized = true;
        var a = wa.OPMAP;
        var b = new Hb("mov", 2, 0, 0);
        a.h.mov = b;
        a = wa.OPMAP;
        b = new Hb("add", 3, 1, 0);
        a.h.add = b;
        a = wa.OPMAP;
        b = new Hb("sub", 3, 2, 0);
        a.h.sub = b;
        a = wa.OPMAP;
        b = new Hb("mul", 3, 3, 0);
        a.h.mul = b;
        a = wa.OPMAP;
        b = new Hb("div", 3, 4, 0);
        a.h.div = b;
        a = wa.OPMAP;
        b = new Hb("rcp", 2, 5, 0);
        a.h.rcp = b;
        a = wa.OPMAP;
        b = new Hb("min", 3, 6, 0);
        a.h.min = b;
        a = wa.OPMAP;
        b = new Hb("max", 3, 7, 0);
        a.h.max = b;
        a = wa.OPMAP;
        b = new Hb("frc", 2, 8, 0);
        a.h.frc = b;
        a = wa.OPMAP;
        b = new Hb("sqt", 2, 9, 0);
        a.h.sqt = b;
        a = wa.OPMAP;
        b = new Hb("rsq", 2, 10, 0);
        a.h.rsq = b;
        a = wa.OPMAP;
        b = new Hb("pow", 3, 11, 0);
        a.h.pow = b;
        a = wa.OPMAP;
        b = new Hb("log", 2, 12, 0);
        a.h.log = b;
        a = wa.OPMAP;
        b = new Hb("exp", 2, 13, 0);
        a.h.exp = b;
        a = wa.OPMAP;
        b = new Hb("nrm", 2, 14, 0);
        a.h.nrm = b;
        a = wa.OPMAP;
        b = new Hb("sin", 2, 15, 0);
        a.h.sin = b;
        a = wa.OPMAP;
        b = new Hb("cos", 2, 16, 0);
        a.h.cos = b;
        a = wa.OPMAP;
        b = new Hb("crs", 3, 17, 0);
        a.h.crs = b;
        a = wa.OPMAP;
        b = new Hb("dp3", 3, 18, 0);
        a.h.dp3 = b;
        a = wa.OPMAP;
        b = new Hb("dp4", 3, 19, 0);
        a.h.dp4 = b;
        a = wa.OPMAP;
        b = new Hb("abs", 2, 20, 0);
        a.h.abs = b;
        a = wa.OPMAP;
        b = new Hb("neg", 2, 21, 0);
        a.h.neg = b;
        a = wa.OPMAP;
        b = new Hb("sat", 2, 22, 0);
        a.h.sat = b;
        a = wa.OPMAP;
        b = new Hb("m33", 3, 23, 16);
        a.h.m33 = b;
        a = wa.OPMAP;
        b = new Hb("m44", 3, 24, 16);
        a.h.m44 = b;
        a = wa.OPMAP;
        b = new Hb("m34", 3, 25, 16);
        a.h.m34 = b;
        a = wa.OPMAP;
        b = new Hb("ddx", 2, 26, 288);
        a.h.ddx = b;
        a = wa.OPMAP;
        b = new Hb("ddy", 2, 27, 288);
        a.h.ddy = b;
        a = wa.OPMAP;
        b = new Hb("ife", 2, 28, 897);
        a.h.ife = b;
        a = wa.OPMAP;
        b = new Hb("ine", 2, 29, 897);
        a.h.ine = b;
        a = wa.OPMAP;
        b = new Hb("ifg", 2, 30, 897);
        a.h.ifg = b;
        a = wa.OPMAP;
        b = new Hb("ifl", 2, 31, 897);
        a.h.ifl = b;
        a = wa.OPMAP;
        b = new Hb("els", 0, 32, 1921);
        a.h.els = b;
        a = wa.OPMAP;
        b = new Hb("eif", 0, 33, 1409);
        a.h.eif = b;
        a = wa.OPMAP;
        b = new Hb("kil", 1, 39, 160);
        a.h.kil = b;
        a = wa.OPMAP;
        b = new Hb("tex", 3, 40, 40);
        a.h.tex = b;
        a = wa.OPMAP;
        b = new Hb("sge", 3, 41, 0);
        a.h.sge = b;
        a = wa.OPMAP;
        b = new Hb("slt", 3, 42, 0);
        a.h.slt = b;
        a = wa.OPMAP;
        b = new Hb("sgn", 2, 43, 0);
        a.h.sgn = b;
        a = wa.OPMAP;
        b = new Hb("seq", 3, 44, 0);
        a.h.seq = b;
        a = wa.OPMAP;
        b = new Hb("sne", 3, 45, 0);
        a.h.sne = b;
        a = wa.SAMPLEMAP;
        b = new yc("rgba", 8, 0);
        a.h.rgba = b;
        a = wa.SAMPLEMAP;
        b = new yc("compressed", 8, 1);
        a.h.compressed = b;
        a = wa.SAMPLEMAP;
        b = new yc("compressedalpha", 8, 2);
        a.h.compressedalpha = b;
        a = wa.SAMPLEMAP;
        b = new yc("dxt1", 8, 1);
        a.h.dxt1 = b;
        a = wa.SAMPLEMAP;
        b = new yc("dxt5", 8, 2);
        a.h.dxt5 = b;
        a = wa.SAMPLEMAP;
        b = new yc("video", 8, 3);
        a.h.video = b;
        a = wa.SAMPLEMAP;
        b = new yc("2d", 12, 0);
        a.h["2d"] = b;
        a = wa.SAMPLEMAP;
        b = new yc("3d", 12, 2);
        a.h["3d"] = b;
        a = wa.SAMPLEMAP;
        b = new yc("cube", 12, 1);
        a.h.cube = b;
        a = wa.SAMPLEMAP;
        b = new yc("mipnearest", 24, 1);
        a.h.mipnearest = b;
        a = wa.SAMPLEMAP;
        b = new yc("miplinear", 24, 2);
        a.h.miplinear = b;
        a = wa.SAMPLEMAP;
        b = new yc("mipnone", 24, 0);
        a.h.mipnone = b;
        a = wa.SAMPLEMAP;
        b = new yc("nomip", 24, 0);
        a.h.nomip = b;
        a = wa.SAMPLEMAP;
        b = new yc("nearest", 28, 0);
        a.h.nearest = b;
        a = wa.SAMPLEMAP;
        b = new yc("linear", 28, 1);
        a.h.linear = b;
        a = wa.SAMPLEMAP;
        b = new yc("anisotropic2x", 28, 2);
        a.h.anisotropic2x = b;
        a = wa.SAMPLEMAP;
        b = new yc("anisotropic4x", 28, 3);
        a.h.anisotropic4x = b;
        a = wa.SAMPLEMAP;
        b = new yc("anisotropic8x", 28, 4);
        a.h.anisotropic8x = b;
        a = wa.SAMPLEMAP;
        b = new yc("anisotropic16x", 28, 5);
        a.h.anisotropic16x = b;
        a = wa.SAMPLEMAP;
        b = new yc("centroid", 16, 1);
        a.h.centroid = b;
        a = wa.SAMPLEMAP;
        b = new yc("single", 16, 2);
        a.h.single = b;
        a = wa.SAMPLEMAP;
        b = new yc("ignoresampler", 16, 4);
        a.h.ignoresampler = b;
        a = wa.SAMPLEMAP;
        b = new yc("repeat", 20, 1);
        a.h.repeat = b;
        a = wa.SAMPLEMAP;
        b = new yc("wrap", 20, 1);
        a.h.wrap = b;
        a = wa.SAMPLEMAP;
        b = new yc("clamp", 20, 0);
        a.h.clamp = b;
        a = wa.SAMPLEMAP;
        b = new yc("clamp_u_repeat_v", 20, 2);
        a.h.clamp_u_repeat_v = b;
        a = wa.SAMPLEMAP;
        b = new yc("repeat_u_clamp_v", 20, 3);
        a.h.repeat_u_clamp_v = b;
      };
      wa.prototype = {
        assemble: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 1;
          }
          var e = na.getTimer();
          this.agalcode = new wd(0);
          this.error = "";
          var f = false;
          if (a == "fragment") {
            f = true;
          } else if (a != "vertex") {
            this.error = "ERROR: mode needs to be \"fragment\" or \"vertex\" but is \"" + a + "\".";
          }
          this.agalcode.__endian = 1;
          this.agalcode.writeByte(160);
          this.agalcode.writeUnsignedInt(c);
          this.agalcode.writeByte(161);
          this.agalcode.writeByte(f ? 1 : 0);
          this.initregmap(c, d);
          a = w.replace(b, "\r", "\n").split("\n");
          b = 0;
          d = a.length;
          var g = new sa("<.*>", "g");
          var h = new sa("([\\w\\.\\-\\+]+)", "gi");
          var n = new sa("^\\w{3}", "ig");
          var p = new sa("vc\\[([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw](\\+\\d{1,3})?)?\\](\\.[xyzw]{1,4})?|([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw]{1,4})?", "gi");
          var l = new sa("\\[.*\\]", "ig");
          var m = new sa("^\\b[A-Za-z]{1,3}", "ig");
          var t = new sa("\\d+", "");
          var q = new sa("(\\.[xyzw]{1,4})", "");
          var u = new sa("[A-Za-z]{1,3}", "ig");
          var x = new sa("(\\.[xyzw]{1,1})", "");
          var A = new sa("\\+\\d{1,3}", "ig");
          for (var y = 0; y < d && this.error == "";) {
            var z = w.trim(a[y]);
            var C = z.indexOf("//");
            if (C != -1) {
              z = M.substr(z, 0, C);
            }
            var D = g.match(z) ? g.matchedPos().pos : -1;
            C = null;
            if (D != -1) {
              C = this.match(M.substr(z, D, null), h);
              z = M.substr(z, 0, D);
            }
            var B = null;
            if (n.match(z)) {
              D = n.matched(0);
              B = wa.OPMAP.h[D];
            }
            if (B == null) {
              if (z.length >= 3) {
                Ua.warn("warning: bad line " + y + ": " + a[y], {
                  fileName: "openfl/utils/AGALMiniAssembler.hx",
                  lineNumber: 262,
                  className: "openfl.utils.AGALMiniAssembler",
                  methodName: "assemble"
                });
              }
            } else {
              if (this.debugEnabled) {
                Ua.info(B, {
                  fileName: "openfl/utils/AGALMiniAssembler.hx",
                  lineNumber: 272,
                  className: "openfl.utils.AGALMiniAssembler",
                  methodName: "assemble"
                });
              }
              if (B == null) {
                if (z.length >= 3) {
                  Ua.warn("warning: bad line " + y + ": " + a[y], {
                    fileName: "openfl/utils/AGALMiniAssembler.hx",
                    lineNumber: 279,
                    className: "openfl.utils.AGALMiniAssembler",
                    methodName: "assemble"
                  });
                }
              } else {
                z = M.substr(z, z.indexOf(B.name) + B.name.length, null);
                if ((B.flags & 256) != 0 && c < 2) {
                  this.error = "error: opcode requires version 2.";
                  break;
                }
                if ((B.flags & 64) != 0 && f) {
                  this.error = "error: opcode is only allowed in vertex programs.";
                  break;
                }
                if ((B.flags & 32) != 0 && !f) {
                  this.error = "error: opcode is only allowed in fragment programs.";
                  break;
                }
                if (this.verbose) {
                  Ua.info("emit opcode=" + H.string(B), {
                    fileName: "openfl/utils/AGALMiniAssembler.hx",
                    lineNumber: 308,
                    className: "openfl.utils.AGALMiniAssembler",
                    methodName: "assemble"
                  });
                }
                this.agalcode.writeUnsignedInt(B.emitCode);
                ++b;
                if (b > 4096) {
                  this.error = "error: too many opcodes. maximum is 4096.";
                  break;
                }
                var F = this.match(z, p);
                if (F.length != B.numRegister) {
                  this.error = "error: wrong number of operands. found " + F.length + " but expected " + B.numRegister + ".";
                  break;
                }
                var Ka = false;
                var v = 160;
                z = 0;
                for (D = F.length; z < D;) {
                  var G = z++;
                  var K = false;
                  var ha = this.match(F[G], l);
                  if (ha.length > 0) {
                    F[G] = w.replace(F[G], ha[0], "0");
                    if (this.verbose) {
                      Ua.info("IS REL", {
                        fileName: "openfl/utils/AGALMiniAssembler.hx",
                        lineNumber: 344,
                        className: "openfl.utils.AGALMiniAssembler",
                        methodName: "assemble"
                      });
                    }
                    K = true;
                  }
                  var la = this.match(F[G], m);
                  if (la.length == 0) {
                    this.error = "error: could not parse operand " + G + " (" + F[G] + ").";
                    Ka = true;
                    break;
                  }
                  var ya = wa.REGMAP.h[la[0]];
                  if (this.debugEnabled) {
                    Ua.info(ya, {
                      fileName: "openfl/utils/AGALMiniAssembler.hx",
                      lineNumber: 363,
                      className: "openfl.utils.AGALMiniAssembler",
                      methodName: "assemble"
                    });
                  }
                  if (ya == null) {
                    this.error = "error: could not find register name for operand " + G + " (" + F[G] + ").";
                    Ka = true;
                    break;
                  }
                  if (f) {
                    if ((ya.flags & 32) == 0) {
                      this.error = "error: register operand " + G + " (" + F[G] + ") only allowed in vertex programs.";
                      Ka = true;
                      break;
                    }
                    if (K) {
                      this.error = "error: register operand " + G + " (" + F[G] + ") relative adressing not allowed in fragment programs.";
                      Ka = true;
                      break;
                    }
                  } else if ((ya.flags & 64) == 0) {
                    this.error = "error: register operand " + G + " (" + F[G] + ") only allowed in fragment programs.";
                    Ka = true;
                    break;
                  }
                  F[G] = M.substr(F[G], F[G].indexOf(ya.name) + ya.name.length, null);
                  var N = K ? this.match(ha[0], t) : this.match(F[G], t);
                  la = 0;
                  if (N.length > 0) {
                    la = H.parseInt(N[0]);
                  }
                  if (Dc.gt(la, ya.range)) {
                    z = ya.range + 1;
                    this.error = "error: register operand " + G + " (" + F[G] + ") index exceeds limit of " + (z == null ? "null" : H.string(Dc.toFloat(z))) + ".";
                    Ka = true;
                    break;
                  }
                  var Qa = this.match(F[G], q);
                  var ma = G == 0 && (B.flags & 128) == 0;
                  var rb = G == 2 && (B.flags & 8) != 0;
                  var Q = 0;
                  var E = 0;
                  var S = 0;
                  if (ma && K) {
                    this.error = "error: relative can not be destination";
                    Ka = true;
                    break;
                  }
                  if (Qa.length > 0) {
                    var R = N = 0;
                    for (var I = Qa[0].length, T = 1; T < I;) {
                      R = M.cca(Qa[0], T) - 120;
                      if (Dc.gt(R, 2)) {
                        R = 3;
                      }
                      N = ma ? N | 1 << R : N | R << (T - 1 << 1);
                      ++T;
                    }
                    if (!ma) {
                      while (T <= 4) {
                        N |= R << (T - 1 << 1);
                        ++T;
                      }
                    }
                  } else {
                    N = ma ? 15 : 228;
                  }
                  if (K) {
                    Qa = this.match(ha[0], u);
                    Q = wa.REGMAP.h[Qa[0]];
                    if (Q == null) {
                      this.error = "error: bad index register";
                      Ka = true;
                      break;
                    }
                    Q = Q.emitCode;
                    R = this.match(ha[0], x);
                    if (R.length == 0) {
                      this.error = "error: bad index register select";
                      Ka = true;
                      break;
                    }
                    E = M.cca(R[0], 1) - 120;
                    if (Dc.gt(E, 2)) {
                      E = 3;
                    }
                    ha = this.match(ha[0], A);
                    if (ha.length > 0) {
                      S = H.parseInt(ha[0]);
                    }
                    if (S < 0 || S > 255) {
                      this.error = "error: index offset " + S + " out of bounds. [0..255]";
                      Ka = true;
                      break;
                    }
                    if (this.verbose) {
                      Ua.info("RELATIVE: type=" + Q + "==" + Qa[0] + " sel=" + (E == null ? "null" : H.string(Dc.toFloat(E))) + "==" + R[0] + " idx=" + (la == null ? "null" : H.string(Dc.toFloat(la))) + " offset=" + S, {
                        fileName: "openfl/utils/AGALMiniAssembler.hx",
                        lineNumber: 518,
                        className: "openfl.utils.AGALMiniAssembler",
                        methodName: "assemble"
                      });
                    }
                  }
                  if (this.verbose) {
                    Ua.info("  emit argcode=" + H.string(ya) + "[" + (la == null ? "null" : H.string(Dc.toFloat(la))) + "][" + N + "]", {
                      fileName: "openfl/utils/AGALMiniAssembler.hx",
                      lineNumber: 525,
                      className: "openfl.utils.AGALMiniAssembler",
                      methodName: "assemble"
                    });
                  }
                  if (ma) {
                    this.agalcode.writeShort(la);
                    this.agalcode.writeByte(N);
                    this.agalcode.writeByte(ya.emitCode);
                    v -= 32;
                  } else {
                    if (rb) {
                      if (this.verbose) {
                        Ua.info("  emit sampler", {
                          fileName: "openfl/utils/AGALMiniAssembler.hx",
                          lineNumber: 541,
                          className: "openfl.utils.AGALMiniAssembler",
                          methodName: "assemble"
                        });
                      }
                      G = 5;
                      ha = K = 0;
                      for (ya = C == null ? 0 : C.length; ha < ya;) {
                        N = ha++;
                        if (this.verbose) {
                          Ua.info("    opt: " + C[N], {
                            fileName: "openfl/utils/AGALMiniAssembler.hx",
                            lineNumber: 552,
                            className: "openfl.utils.AGALMiniAssembler",
                            methodName: "assemble"
                          });
                        }
                        ma = wa.SAMPLEMAP.h[C[N]];
                        if (ma == null) {
                          K = parseFloat(C[N]);
                          if (this.verbose) {
                            Ua.info("    bias: " + K, {
                              fileName: "openfl/utils/AGALMiniAssembler.hx",
                              lineNumber: 565,
                              className: "openfl.utils.AGALMiniAssembler",
                              methodName: "assemble"
                            });
                          }
                        } else {
                          if (ma.flag != 16) {
                            G &= ~(15 << ma.flag);
                          }
                          G |= ma.mask << ma.flag;
                        }
                      }
                      this.agalcode.writeShort(la);
                      this.agalcode.writeByte(K * 8 | 0);
                      this.agalcode.writeByte(0);
                      this.agalcode.writeUnsignedInt(G);
                      if (this.verbose) {
                        Ua.info("    bits: " + (G - 5), {
                          fileName: "openfl/utils/AGALMiniAssembler.hx",
                          lineNumber: 586,
                          className: "openfl.utils.AGALMiniAssembler",
                          methodName: "assemble"
                        });
                      }
                    } else {
                      if (G == 0) {
                        this.agalcode.writeUnsignedInt(0);
                        v -= 32;
                      }
                      this.agalcode.writeShort(la);
                      this.agalcode.writeByte(S);
                      this.agalcode.writeByte(N);
                      this.agalcode.writeByte(ya.emitCode);
                      this.agalcode.writeByte(Q);
                      this.agalcode.writeShort(K ? E | 32768 : 0);
                    }
                    v -= 64;
                  }
                }
                for (z = 0; z < v;) {
                  this.agalcode.writeByte(0);
                  z += 8;
                }
                if (Ka) {
                  break;
                }
              }
            }
            ++y;
          }
          if (this.error != "") {
            this.error += "\n  at line " + y + " " + a[y];
            Re.set_length(this.agalcode, 0);
            Ua.info(this.error, {
              fileName: "openfl/utils/AGALMiniAssembler.hx",
              lineNumber: 631,
              className: "openfl.utils.AGALMiniAssembler",
              methodName: "assemble"
            });
          }
          if (this.debugEnabled) {
            c = "generated bytecode:";
            f = Re.get_length(this.agalcode);
            z = 0;
            for (D = f; z < D;) {
              f = z++;
              if (f % 16 == 0) {
                c += "\n";
              }
              if (f % 4 == 0) {
                c += " ";
              }
              f = w.hex(this.agalcode.b[f], 2);
              if (f.length < 2) {
                f = "0" + f;
              }
              c += f;
            }
            Ua.info(c, {
              fileName: "openfl/utils/AGALMiniAssembler.hx",
              lineNumber: 662,
              className: "openfl.utils.AGALMiniAssembler",
              methodName: "assemble"
            });
          }
          if (this.verbose) {
            Ua.info("AGALMiniAssembler.assemble time: " + (na.getTimer() - e) / 1000 + "s", {
              fileName: "openfl/utils/AGALMiniAssembler.hx",
              lineNumber: 667,
              className: "openfl.utils.AGALMiniAssembler",
              methodName: "assemble"
            });
          }
          return this.agalcode;
        },
        initregmap: function (a, b) {
          var c = wa.REGMAP;
          var d = new Ke("va", "vertex attribute", 0, b ? 1024 : a == 1 || a == 2 ? 7 : 15, 66);
          c.h.va = d;
          c = wa.REGMAP;
          d = new Ke("vc", "vertex constant", 1, b ? 1024 : a == 1 ? 127 : 249, 66);
          c.h.vc = d;
          c = wa.REGMAP;
          d = new Ke("vt", "vertex temporary", 2, b ? 1024 : a == 1 ? 7 : 25, 67);
          c.h.vt = d;
          c = wa.REGMAP;
          d = new Ke("vo", "vertex output", 3, b ? 1024 : 0, 65);
          c.h.vo = d;
          c = wa.REGMAP;
          d = new Ke("vi", "varying", 4, b ? 1024 : a == 1 ? 7 : 9, 99);
          c.h.vi = d;
          c = wa.REGMAP;
          d = new Ke("fc", "fragment constant", 1, b ? 1024 : a == 1 ? 27 : a == 2 ? 63 : 199, 34);
          c.h.fc = d;
          c = wa.REGMAP;
          d = new Ke("ft", "fragment temporary", 2, b ? 1024 : a == 1 ? 7 : 25, 35);
          c.h.ft = d;
          c = wa.REGMAP;
          d = new Ke("fs", "texture sampler", 5, b ? 1024 : 7, 34);
          c.h.fs = d;
          c = wa.REGMAP;
          d = new Ke("fo", "fragment output", 3, b ? 1024 : a == 1 ? 0 : 3, 33);
          c.h.fo = d;
          c = wa.REGMAP;
          d = new Ke("fd", "fragment depth output", 6, b ? 1024 : a == 1 ? -1 : 0, 33);
          c.h.fd = d;
          c = wa.REGMAP;
          d = new Ke("iid", "instance id", 7, b ? 1024 : 0, 66);
          c.h.iid = d;
          d = wa.REGMAP.h.vo;
          wa.REGMAP.h.op = d;
          d = wa.REGMAP.h.vi;
          wa.REGMAP.h.i = d;
          d = wa.REGMAP.h.vi;
          wa.REGMAP.h.v = d;
          d = wa.REGMAP.h.fo;
          wa.REGMAP.h.oc = d;
          d = wa.REGMAP.h.fd;
          wa.REGMAP.h.od = d;
          d = wa.REGMAP.h.vi;
          wa.REGMAP.h.fi = d;
        },
        match: function (a, b) {
          var c = [];
          for (var d = 0; b.matchSub(a, d);) {
            d = b.matched(0);
            c.push(d);
            d = b.matchedPos().pos + d.length;
          }
          return c;
        },
        __class__: wa
      };
      function Hb(a, b, c, d) {
        this.name = a;
        this.numRegister = b;
        this.emitCode = c;
        this.flags = d;
      }
      h["openfl.utils._AGALMiniAssembler.OpCode"] = Hb;
      Hb.__name__ = "openfl.utils._AGALMiniAssembler.OpCode";
      Hb.prototype = {
        __class__: Hb
      };
      function Ke(a, b, c, d, e) {
        this.name = a;
        this.longName = b;
        this.emitCode = c;
        this.range = d;
        this.flags = e;
      }
      h["openfl.utils._AGALMiniAssembler.Register"] = Ke;
      Ke.__name__ = "openfl.utils._AGALMiniAssembler.Register";
      Ke.prototype = {
        toString: function () {
          return "[Register name=\"" + this.name + "\", longName=\"" + this.longName + "\", emitCode=" + (this.emitCode == null ? "null" : H.string(Dc.toFloat(this.emitCode))) + ", range=" + (this.range == null ? "null" : H.string(Dc.toFloat(this.range))) + ", flags=" + (this.flags == null ? "null" : H.string(Dc.toFloat(this.flags))) + "]";
        },
        __class__: Ke
      };
      function yc(a, b, c) {
        this.name = a;
        this.flag = b;
        this.mask = c;
      }
      h["openfl.utils._AGALMiniAssembler.Sampler"] = yc;
      yc.__name__ = "openfl.utils._AGALMiniAssembler.Sampler";
      yc.prototype = {
        __class__: yc
      };
      function Rm() {}
      h["openfl.utils.IAssetCache"] = Rm;
      Rm.__name__ = "openfl.utils.IAssetCache";
      Rm.__isInterface__ = true;
      Rm.prototype = {
        __class__: Rm,
        __properties__: {
          get_enabled: "get_enabled"
        }
      };
      function Sm() {
        this.__enabled = true;
        this.bitmapData = new V();
        this.font = new V();
        this.sound = new V();
      }
      h["openfl.utils.AssetCache"] = Sm;
      Sm.__name__ = "openfl.utils.AssetCache";
      Sm.__interfaces__ = [Rm];
      Sm.prototype = {
        getBitmapData: function (a) {
          return this.bitmapData.h[a];
        },
        getFont: function (a) {
          return this.font.h[a];
        },
        getSound: function (a) {
          return this.sound.h[a];
        },
        hasBitmapData: function (a) {
          return Object.prototype.hasOwnProperty.call(this.bitmapData.h, a);
        },
        hasFont: function (a) {
          return Object.prototype.hasOwnProperty.call(this.font.h, a);
        },
        hasSound: function (a) {
          return Object.prototype.hasOwnProperty.call(this.sound.h, a);
        },
        removeBitmapData: function (a) {
          var b = oa.cache.image;
          if (Object.prototype.hasOwnProperty.call(b.h, a)) {
            delete b.h[a];
          }
          b = this.bitmapData;
          if (Object.prototype.hasOwnProperty.call(b.h, a)) {
            delete b.h[a];
            return true;
          } else {
            return false;
          }
        },
        setBitmapData: function (a, b) {
          this.bitmapData.h[a] = b;
        },
        setFont: function (a, b) {
          this.font.h[a] = b;
        },
        setSound: function (a, b) {
          this.sound.h[a] = b;
        },
        get_enabled: function () {
          return this.__enabled;
        },
        __class__: Sm,
        __properties__: {
          get_enabled: "get_enabled"
        }
      };
      function Qf() {
        jc.call(this);
      }
      h["openfl.utils.AssetLibrary"] = Qf;
      Qf.__name__ = "openfl.utils.AssetLibrary";
      Qf.fromBundle = function (a) {
        a = jc.fromBundle(a);
        if (a != null) {
          if (a instanceof Qf) {
            return a;
          }
          var b = new Qf();
          b.__proxy = a;
          return b;
        }
        return null;
      };
      Qf.fromManifest = function (a) {
        a = jc.fromManifest(a);
        if (a != null) {
          if (a instanceof Qf) {
            return a;
          }
          var b = new Qf();
          b.__proxy = a;
          return b;
        }
        return null;
      };
      Qf.__super__ = jc;
      Qf.prototype = q(jc.prototype, {
        bind: function (a, b) {
          return false;
        },
        exists: function (a, b) {
          if (this.__proxy != null) {
            return this.__proxy.exists(a, b);
          } else {
            return jc.prototype.exists.call(this, a, b);
          }
        },
        getAsset: function (a, b) {
          if (this.__proxy != null) {
            return this.__proxy.getAsset(a, b);
          } else {
            return jc.prototype.getAsset.call(this, a, b);
          }
        },
        getAudioBuffer: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getAudioBuffer(a);
          } else {
            return jc.prototype.getAudioBuffer.call(this, a);
          }
        },
        getBytes: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getBytes(a);
          } else {
            return jc.prototype.getBytes.call(this, a);
          }
        },
        getFont: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getFont(a);
          } else {
            return jc.prototype.getFont.call(this, a);
          }
        },
        getImage: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getImage(a);
          } else {
            return jc.prototype.getImage.call(this, a);
          }
        },
        getPath: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getPath(a);
          } else {
            return jc.prototype.getPath.call(this, a);
          }
        },
        getText: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getText(a);
          } else {
            return jc.prototype.getText.call(this, a);
          }
        },
        isLocal: function (a, b) {
          if (this.__proxy != null) {
            return this.__proxy.isLocal(a, b);
          } else {
            return jc.prototype.isLocal.call(this, a, b);
          }
        },
        list: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.list(a);
          } else {
            return jc.prototype.list.call(this, a);
          }
        },
        loadAsset: function (a, b) {
          if (this.__proxy != null) {
            return this.__proxy.loadAsset(a, b);
          } else {
            return jc.prototype.loadAsset.call(this, a, b);
          }
        },
        load: function () {
          if (this.__proxy != null) {
            return this.__proxy.load();
          } else {
            return jc.prototype.load.call(this);
          }
        },
        loadAudioBuffer: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadAudioBuffer(a);
          } else {
            return jc.prototype.loadAudioBuffer.call(this, a);
          }
        },
        loadBytes: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadBytes(a);
          } else {
            return jc.prototype.loadBytes.call(this, a);
          }
        },
        loadFont: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadFont(a);
          } else {
            return jc.prototype.loadFont.call(this, a);
          }
        },
        loadImage: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadImage(a);
          } else {
            return jc.prototype.loadImage.call(this, a);
          }
        },
        loadText: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadText(a);
          } else {
            return jc.prototype.loadText.call(this, a);
          }
        },
        unload: function () {
          if (this.__proxy != null) {
            this.__proxy.unload();
          } else {
            jc.prototype.unload.call(this);
          }
        },
        __class__: Qf
      });
      function W() {}
      h["openfl.utils.Assets"] = W;
      W.__name__ = "openfl.utils.Assets";
      W.addEventListener = function (a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (!oa.onChange.has(W.LimeAssets_onChange)) {
          oa.onChange.add(W.LimeAssets_onChange);
        }
        W.dispatcher.addEventListener(a, b, c, d, e);
      };
      W.dispatchEvent = function (a) {
        return W.dispatcher.dispatchEvent(a);
      };
      W.exists = function (a, b) {
        return oa.exists(a, b);
      };
      W.getBitmapData = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b && W.cache.get_enabled() && W.cache.hasBitmapData(a)) {
          var c = W.cache.getBitmapData(a);
          if (W.isValidBitmapData(c)) {
            return c;
          }
        }
        c = oa.getImage(a, false);
        if (c != null) {
          c = T.fromImage(c);
          if (b && W.cache.get_enabled()) {
            W.cache.setBitmapData(a, c);
          }
          return c;
        } else {
          return null;
        }
      };
      W.getBytes = function (a) {
        return Re.fromLimeBytes(oa.getBytes(a));
      };
      W.getFont = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b && W.cache.get_enabled() && W.cache.hasFont(a)) {
          return W.cache.getFont(a);
        }
        var c = oa.getFont(a, false);
        if (c != null) {
          var d = new t();
          d.__fromLimeFont(c);
          if (b && W.cache.get_enabled()) {
            W.cache.setFont(a, d);
          }
          return d;
        }
        return new t();
      };
      W.getLibrary = function (a) {
        return oa.getLibrary(a);
      };
      W.getSound = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b && W.cache.get_enabled() && W.cache.hasSound(a)) {
          var c = W.cache.getSound(a);
          if (W.isValidSound(c)) {
            return c;
          }
        }
        c = oa.getAudioBuffer(a, false);
        if (c != null) {
          c = rg.fromAudioBuffer(c);
          if (b && W.cache.get_enabled()) {
            W.cache.setSound(a, c);
          }
          return c;
        } else {
          return null;
        }
      };
      W.getText = function (a) {
        return oa.getText(a);
      };
      W.hasLibrary = function (a) {
        return oa.hasLibrary(a);
      };
      W.isValidBitmapData = function (a) {
        return a != null && a.image != null;
      };
      W.isValidSound = function (a) {
        return true;
      };
      W.list = function (a) {
        return oa.list(a);
      };
      W.loadLibrary = function (a) {
        return oa.loadLibrary(a).then(function (b) {
          var c = null;
          if (b != null) {
            if (b instanceof Qf) {
              c = b;
            } else {
              c = oa.libraries;
              if (Object.prototype.hasOwnProperty.call(c.h, a)) {
                delete c.h[a];
              }
              c = new Qf();
              c.__proxy = b;
              oa.registerLibrary(a, c);
            }
          }
          return Cb.withValue(c);
        });
      };
      W.loadSound = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b == null) {
          b = true;
        }
        var c = new Md();
        oa.loadAudioBuffer(a, b).onComplete(function (d) {
          if (d != null) {
            d = rg.fromAudioBuffer(d);
            if (b && W.cache.get_enabled()) {
              W.cache.setSound(a, d);
            }
            c.complete(d);
          } else {
            c.error("[Assets] Could not load Sound \"" + a + "\"");
          }
        }).onError(l(c, c.error)).onProgress(l(c, c.progress));
        return c.future;
      };
      W.LimeAssets_onChange = function () {
        W.dispatchEvent(new Ga("change"));
      };
      var Re = {
        __properties__: {
          set_length: "set_length",
          get_length: "get_length"
        },
        fromBytes: function (a) {
          if (a == null) {
            return null;
          } else if (a instanceof wd) {
            return a;
          } else {
            return wd.fromBytes(a);
          }
        },
        fromLimeBytes: function (a) {
          return Re.fromBytes(a);
        },
        toBytes: function (a) {
          return a;
        },
        get_length: function (a) {
          if (a == null) {
            return 0;
          } else {
            return a.length;
          }
        },
        set_length: function (a, b) {
          if (b >= 0) {
            a.__resize(b);
            if (b < a.position) {
              a.position = b;
            }
          }
          return a.length = b;
        }
      };
      var pf = {
        __get: function (a, b) {
          if (a == null || b == null) {
            return null;
          }
          if (Object.prototype.hasOwnProperty.call(a, b)) {
            return ma.field(a, b);
          }
          if (a instanceof wb) {
            var c = a.getChildByName(b);
            if (c != null) {
              return c;
            }
          }
          return ma.getProperty(a, b);
        },
        __eq: function (a, b) {
          return a == b;
        }
      };
      function Tm() {}
      h["haxe.lang.Iterator"] = Tm;
      Tm.__name__ = "haxe.lang.Iterator";
      Tm.__isInterface__ = true;
      Tm.prototype = {
        __class__: Tm
      };
      function Um() {}
      h["haxe.lang.Iterable"] = Um;
      Um.__name__ = "haxe.lang.Iterable";
      Um.__isInterface__ = true;
      Um.prototype = {
        __class__: Um
      };
      function zd() {}
      h["openfl.utils._internal.Lib"] = zd;
      zd.__name__ = "openfl.utils._internal.Lib";
      function Kh() {
        this.rollOutStack = [];
      }
      h["openfl.utils._internal.TouchData"] = Kh;
      Kh.__name__ = "openfl.utils._internal.TouchData";
      Kh.prototype = {
        reset: function () {
          this.touchOverTarget = this.touchDownTarget = this.touch = null;
          this.rollOutStack.splice(0, this.rollOutStack.length);
        },
        __class__: Kh
      };
      function xe() {
        this.MAX_KEYBIND_WIDTH = 320;
        this.holdingEsc = 0;
        this.bindingKey = false;
        this.holdTime = this.holdValue = 0;
        this.nextAccept = 5;
        this.curSelected = 0;
        this.curOption = null;
        bb.call(this);
        if (this.title == null) {
          this.title = "Options";
        }
        if (this.rpcTitle == null) {
          this.rpcTitle = "Options Menu";
        }
        this.bg = new G().loadGraphic(y.image("menuDesat"));
        this.bg.set_color(-1412611);
        var a = this.bg;
        a.set_x((g.width - a.get_width()) / 2);
        a.set_y((g.height - a.get_height()) / 2);
        this.bg.set_antialiasing(C.data.antialiasing);
        this.add(this.bg);
        this.grpOptions = new Ra();
        this.add(this.grpOptions);
        this.grpTexts = new Ra();
        this.add(this.grpTexts);
        this.checkboxGroup = new Ra();
        this.add(this.checkboxGroup);
        this.descBox = new G().makeGraphic(1, 1, -16777216);
        this.descBox.set_alpha(0.6);
        this.add(this.descBox);
        a = new Jb(75, 45, this.title, true);
        a.setScale(0.6);
        a.set_alpha(0.4);
        this.add(a);
        this.descText = new Q(50, 600, 1180, "", 32);
        this.descText.setFormat("assets/fonts/vcr.ttf", 32, -1, "center", Ta.OUTLINE, -16777216);
        a = this.descText.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        this.descText.set_borderSize(2.4);
        this.add(this.descText);
        a = 0;
        for (var b = this.optionsArray.length; a < b;) {
          var c = a++;
          var d = new Jb(290, 260, this.optionsArray[c].name, false);
          d.isMenuItem = true;
          d.targetY = c;
          this.grpOptions.add(d);
          if (this.optionsArray[c].get_type() == "bool") {
            var e = new Kj(d.x - 105, d.y, H.string(this.optionsArray[c].getValue()) == "true");
            e.sprTracker = d;
            e.ID = c;
            this.checkboxGroup.add(e);
          } else {
            d.set_x(d.x - 80);
            d.startPosition.set_x(d.startPosition.x - 80);
            e = new xi("" + H.string(this.optionsArray[c].getValue()), d.get_width() + 60);
            e.sprTracker = d;
            e.copyAlpha = true;
            e.ID = c;
            this.grpTexts.add(e);
            this.optionsArray[c].child = e;
          }
          this.updateTextFrom(this.optionsArray[c]);
        }
        this.changeSelection();
        this.reloadCheckboxes();
      }
      h["options.BaseOptionsMenu"] = xe;
      xe.__name__ = "options.BaseOptionsMenu";
      xe.__super__ = bb;
      xe.prototype = q(bb.prototype, {
        addOption: function (a) {
          if (this.optionsArray == null || this.optionsArray.length < 1) {
            this.optionsArray = [];
          }
          this.optionsArray.push(a);
          return a;
        },
        update: function (a) {
          bb.prototype.update.call(this, a);
          if (this.bindingKey) {
            this.bindingKeyUpdate(a);
          } else {
            if (Ca.instance.get_UI_UP_P()) {
              this.changeSelection(-1);
            }
            if (Ca.instance.get_UI_DOWN_P()) {
              this.changeSelection(1);
            }
            if (Ca.instance.get_BACK()) {
              this.close();
              g.sound.play(y.sound("cancelMenu"));
            }
            if (this.nextAccept <= 0) {
              if (this.curOption.get_type() == "bool") {
                if (Ca.instance.get_ACCEPT()) {
                  g.sound.play(y.sound("scrollMenu"));
                  this.curOption.setValue(this.curOption.getValue() == 1 ? false : true);
                  this.curOption.change();
                  this.reloadCheckboxes();
                }
              } else if (this.curOption.get_type() == "keybind") {
                if (Ca.instance.get_ACCEPT()) {
                  this.bindingBlack = new G().makeGraphic(1, 1, -1);
                  a = this.bindingBlack.scale;
                  var b = g.width;
                  var c = g.height;
                  if (c == null) {
                    c = 0;
                  }
                  if (b == null) {
                    b = 0;
                  }
                  a.set_x(b);
                  a.set_y(c);
                  this.bindingBlack.updateHitbox();
                  this.bindingBlack.set_alpha(0);
                  ka.tween(this.bindingBlack, {
                    alpha: 0.6
                  }, 0.35, {
                    ease: va.linear
                  });
                  this.add(this.bindingBlack);
                  this.bindingText = new Jb(g.width / 2, 160, "Rebinding " + this.curOption.name, false);
                  this.bindingText.set_alignment(Of.CENTERED);
                  this.add(this.bindingText);
                  this.bindingText2 = new Jb(g.width / 2, 340, "Hold ESC to Cancel\nHold Backspace to Delete", true);
                  this.bindingText2.set_alignment(Of.CENTERED);
                  this.add(this.bindingText2);
                  this.bindingKey = true;
                  this.holdingEsc = 0;
                  C.toggleVolumeKeys(false);
                  g.sound.play(y.sound("scrollMenu"));
                }
              } else if (Ca.instance.get_UI_LEFT() || Ca.instance.get_UI_RIGHT()) {
                b = Ca.instance.get_UI_LEFT_P() || Ca.instance.get_UI_RIGHT_P();
                if (this.holdTime > 0.5 || b) {
                  if (b) {
                    b = null;
                    if (this.curOption.get_type() != "string") {
                      b = Ca.instance.get_UI_LEFT() ? -this.curOption.changeValue : this.curOption.changeValue;
                    }
                    switch (this.curOption.get_type()) {
                      case "float":
                      case "int":
                      case "percent":
                        this.holdValue = this.curOption.getValue() + b;
                        if (this.holdValue < this.curOption.minValue) {
                          this.holdValue = this.curOption.minValue;
                        } else if (this.holdValue > this.curOption.maxValue) {
                          this.holdValue = this.curOption.maxValue;
                        }
                        switch (this.curOption.get_type()) {
                          case "int":
                            this.holdValue = Math.round(this.holdValue);
                            this.curOption.setValue(this.holdValue);
                            break;
                          case "float":
                          case "percent":
                            this.holdValue = $b.roundDecimal(this.holdValue, this.curOption.decimals);
                            this.curOption.setValue(this.holdValue);
                        }
                        break;
                      case "string":
                        b = this.curOption.curOption;
                        if (Ca.instance.get_UI_LEFT_P()) {
                          --b;
                        } else {
                          ++b;
                        }
                        if (b < 0) {
                          b = this.curOption.options.length - 1;
                        } else if (b >= this.curOption.options.length) {
                          b = 0;
                        }
                        this.curOption.curOption = b;
                        this.curOption.setValue(this.curOption.options[b]);
                    }
                    this.updateTextFrom(this.curOption);
                    this.curOption.change();
                    g.sound.play(y.sound("scrollMenu"));
                  } else if (this.curOption.get_type() != "string") {
                    this.holdValue += this.curOption.scrollSpeed * a * (Ca.instance.get_UI_LEFT() ? -1 : 1);
                    if (this.holdValue < this.curOption.minValue) {
                      this.holdValue = this.curOption.minValue;
                    } else if (this.holdValue > this.curOption.maxValue) {
                      this.holdValue = this.curOption.maxValue;
                    }
                    switch (this.curOption.get_type()) {
                      case "int":
                        this.curOption.setValue(Math.round(this.holdValue));
                        break;
                      case "float":
                      case "percent":
                        this.curOption.setValue($b.roundDecimal(this.holdValue, this.curOption.decimals));
                    }
                    this.updateTextFrom(this.curOption);
                    this.curOption.change();
                  }
                }
                if (this.curOption.get_type() != "string") {
                  this.holdTime += a;
                }
              } else if (Ca.instance.get_UI_LEFT_R() || Ca.instance.get_UI_RIGHT_R()) {
                if (this.holdTime > 0.5) {
                  g.sound.play(y.sound("scrollMenu"));
                }
                this.holdTime = 0;
              }
              if (Ca.instance.get_RESET()) {
                a = this.optionsArray[this.curSelected];
                if (a.get_type() != "keybind") {
                  a.setValue(a.defaultValue);
                  if (a.get_type() != "bool") {
                    if (a.get_type() == "string") {
                      a.curOption = a.options.indexOf(a.getValue());
                    }
                    this.updateTextFrom(a);
                  }
                } else {
                  a.setValue(Ca.instance.controllerMode ? a.defaultKeys.gamepad : a.defaultKeys.keyboard);
                  this.updateBind(null, a);
                }
                a.change();
                g.sound.play(y.sound("cancelMenu"));
                this.reloadCheckboxes();
              }
            }
            if (this.nextAccept > 0) {
              --this.nextAccept;
            }
          }
        },
        bindingKeyUpdate: function (a) {
          var b = g.keys.pressed;
          if (b.keyManager.checkStatusUnsafe(27, b.status) || g.gamepads.anyHasState(1, 1)) {
            this.holdingEsc += a;
            if (this.holdingEsc > 0.5) {
              g.sound.play(y.sound("cancelMenu"));
              this.closeBinding();
            }
          } else {
            b = g.keys.pressed;
            if (b.keyManager.checkStatusUnsafe(8, b.status) || g.gamepads.anyHasState(6, 1)) {
              this.holdingEsc += a;
              if (this.holdingEsc > 0.5) {
                if (Ca.instance.controllerMode) {
                  this.curOption.keys.gamepad = ig.toStringMap.h[-1];
                } else {
                  this.curOption.keys.keyboard = ig.toStringMap.h[-1];
                }
                this.updateBind(Ca.instance.controllerMode ? Vd.getGamepadName(-1) : Vd.getKeyName(-1));
                g.sound.play(y.sound("cancelMenu"));
                this.closeBinding();
              }
            } else {
              this.holdingEsc = 0;
              a = false;
              if (!Ca.instance.controllerMode) {
                if (g.keys.justPressed.get_ANY() || g.keys.justReleased.get_ANY()) {
                  var c = ta.__cast(g.keys.firstJustPressed(), Vi);
                  var d = ta.__cast(g.keys.firstJustReleased(), Vi);
                  if (c != -1 && c != 27 && c != 8) {
                    a = true;
                    this.curOption.keys.keyboard = Gg.toStringMap.h[c];
                  } else if (d != -1 && (d == 27 || d == 8)) {
                    a = true;
                    this.curOption.keys.keyboard = Gg.toStringMap.h[d];
                  }
                }
              } else if (g.gamepads.anyHasState(-2, 2) || g.gamepads.anyHasState(17, 2) || g.gamepads.anyHasState(18, 2) || g.gamepads.anyHasState(-2, -1)) {
                d = c = -1;
                if (g.gamepads.anyHasState(17, 2)) {
                  c = 17;
                } else if (g.gamepads.anyHasState(18, 2)) {
                  c = 18;
                } else {
                  b = 0;
                  for (var e = g.gamepads.get_numActiveGamepads(); b < e;) {
                    var f = b++;
                    f = g.gamepads._activeGamepads[f];
                    if (f != null && (c = f.firstJustPressedRawID(), c = c < 0 ? c : f.mapping.getID(c), d = f.firstJustReleasedRawID(), d = d < 0 ? d : f.mapping.getID(d), c != -1 || d != -1)) {
                      break;
                    }
                  }
                }
                if (c != -1 && c != 6 && c != 1) {
                  a = true;
                  this.curOption.keys.gamepad = ig.toStringMap.h[c];
                } else if (d != -1 && (d == 6 || d == 1)) {
                  a = true;
                  this.curOption.keys.gamepad = ig.toStringMap.h[d];
                }
              }
              if (a) {
                if (Ca.instance.controllerMode) {
                  if (this.curOption.keys.gamepad == null) {
                    this.curOption.keys.gamepad = "NONE";
                  }
                  this.curOption.setValue(this.curOption.keys.gamepad);
                  a = this.curOption.keys.gamepad;
                  a = a.toUpperCase();
                  a = Vd.getGamepadName(Object.prototype.hasOwnProperty.call(ig.fromStringMap.h, a) ? ig.fromStringMap.h[a] : -1);
                } else {
                  if (this.curOption.keys.keyboard == null) {
                    this.curOption.keys.keyboard = "NONE";
                  }
                  this.curOption.setValue(this.curOption.keys.keyboard);
                  a = this.curOption.keys.keyboard;
                  a = a.toUpperCase();
                  a = Vd.getKeyName(Object.prototype.hasOwnProperty.call(Gg.fromStringMap.h, a) ? Gg.fromStringMap.h[a] : -1);
                }
                this.updateBind(a);
                g.sound.play(y.sound("confirmMenu"));
                this.closeBinding();
              }
            }
          }
        },
        updateBind: function (a, b) {
          if (b == null) {
            b = this.curOption;
          }
          if (a == null) {
            a = b.getValue();
            if (a == null) {
              a = "NONE";
            }
            if (Ca.instance.controllerMode) {
              var c = a.toUpperCase();
              a = Vd.getGamepadName(Object.prototype.hasOwnProperty.call(ig.fromStringMap.h, c) ? ig.fromStringMap.h[c] : -1);
            } else {
              c = a.toUpperCase();
              a = Vd.getKeyName(Object.prototype.hasOwnProperty.call(Gg.fromStringMap.h, c) ? Gg.fromStringMap.h[c] : -1);
            }
          }
          c = b.child;
          a = new xi(a, c.offsetX);
          a.sprTracker = c.sprTracker;
          a.copyAlpha = true;
          a.ID = c.ID;
          this.playstationCheck(a);
          a.set_scaleX(Math.min(1, this.MAX_KEYBIND_WIDTH / a.get_width()));
          a.set_x(c.x);
          a.set_y(c.y);
          b.child = a;
          this.grpTexts.insert(this.grpTexts.members.indexOf(c), a);
          this.grpTexts.remove(c);
          c.destroy();
        },
        playstationCheck: function (a) {
          if (Ca.instance.controllerMode) {
            var b = g.gamepads.firstActive;
            var c = a.letters[0];
            if ((b != null ? b.detectedModel : uc.UNKNOWN) == uc.PS4) {
              switch (a.text) {
                case "[":
                case "]":
                  c.set_image("alphabet_playstation");
                  c.updateHitbox();
                  c.offset.set_x(c.offset.x + 4);
                  c.offset.set_y(c.offset.y - 5);
              }
            }
          }
        },
        closeBinding: function () {
          this.bindingKey = false;
          this.bindingBlack.destroy();
          this.remove(this.bindingBlack);
          this.bindingText.destroy();
          this.remove(this.bindingText);
          this.bindingText2.destroy();
          this.remove(this.bindingText2);
          C.toggleVolumeKeys(true);
        },
        updateTextFrom: function (a) {
          if (a.get_type() == "keybind") {
            this.updateBind(null, a);
          } else {
            var b = a.displayFormat;
            var c = a.getValue();
            if (a.get_type() == "percent") {
              c *= 100;
            }
            var d = a.defaultValue;
            a.set_text(w.replace(w.replace(b, "%v", c), "%d", d));
          }
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.optionsArray.length - 1;
          } else if (this.curSelected >= this.optionsArray.length) {
            this.curSelected = 0;
          }
          this.descText.set_text(this.optionsArray[this.curSelected].description);
          a = this.descText;
          var b = 16;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          a = this.descText;
          a.set_y(a.y + 270);
          b = a = 0;
          for (var c = this.grpOptions.members; b < c.length;) {
            var d = c[b];
            ++b;
            d.targetY = a - this.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
            }
          }
          for (a = new wc(this.grpTexts.members, null); a.hasNext();) {
            b = a.next();
            b.set_alpha(0.6);
            if (b.ID == this.curSelected) {
              b.set_alpha(1);
            }
          }
          this.descBox.setPosition(this.descText.x - 10, this.descText.y - 10);
          this.descBox.setGraphicSize(this.descText.get_width() + 20 | 0, this.descText.get_height() + 25 | 0);
          this.descBox.updateHitbox();
          this.curOption = this.optionsArray[this.curSelected];
          g.sound.play(y.sound("scrollMenu"));
        },
        reloadCheckboxes: function () {
          for (var a = new wc(this.checkboxGroup.members, null); a.hasNext();) {
            var b = a.next();
            b.set_daValue(H.string(this.optionsArray[b.ID].getValue()) == "true");
          }
        },
        __class__: xe
      });
      function fh() {
        this.timeForMoving = 0.1;
        this.holdingEsc = 0;
        this.binding = false;
        this.lastID = 0;
        this.onKeyboardMode = true;
        this.keyboardColor = -9334019;
        this.gamepadColor = -167532;
        this.options = [[true, "NOTES"], [true, "Left", "note_left", "Note Left"], [true, "Down", "note_down", "Note Down"], [true, "Up", "note_up", "Note Up"], [true, "Right", "note_right", "Note Right"], [true], [true, "UI"], [true, "Left", "ui_left", "UI Left"], [true, "Down", "ui_down", "UI Down"], [true, "Up", "ui_up", "UI Up"], [true, "Right", "ui_right", "UI Right"], [true], [true, "Reset", "reset", "Reset"], [true, "Accept", "accept", "Accept"], [true, "Back", "back", "Back"], [true, "Pause", "pause", "Pause"], [false], [false, "VOLUME"], [false, "Mute", "volume_mute", "Volume Mute"], [false, "Up", "volume_up", "Volume Up"], [false, "Down", "volume_down", "Volume Down"], [false], [false, "DEBUG"], [false, "Key 1", "debug_1", "Debug Key #1"], [false, "Key 2", "debug_2", "Debug Key #2"]];
        this.curAlt = false;
        this.curSelected = 0;
        bb.call(this);
        this.options.push([true]);
        this.options.push([true]);
        this.options.push([true, fh.defaultKey]);
        this.bg = new G().loadGraphic(y.image("menuDesat"));
        this.bg.set_color(this.keyboardColor);
        this.bg.set_antialiasing(C.data.antialiasing);
        var a = this.bg;
        a.set_x((g.width - a.get_width()) / 2);
        a.set_y((g.height - a.get_height()) / 2);
        this.add(this.bg);
        a = new yf(qh.createGrid(80, 80, 160, 160, true, 872415231, 0));
        var b = a.velocity;
        var c = 40;
        var d = 40;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        b.set_x(c);
        b.set_y(d);
        a.set_alpha(0);
        ka.tween(a, {
          alpha: 1
        }, 0.5, {
          ease: va.quadOut
        });
        this.add(a);
        this.grpDisplay = new Ra();
        this.add(this.grpDisplay);
        this.grpOptions = new Ra();
        this.add(this.grpOptions);
        this.grpBlacks = new Ra();
        this.add(this.grpBlacks);
        this.selectSpr = new ah();
        this.selectSpr.makeGraphic(250, 78, -1);
        this.selectSpr.copyAlpha = false;
        this.selectSpr.set_alpha(0.75);
        this.add(this.selectSpr);
        this.grpBinds = new Ra();
        this.add(this.grpBinds);
        this.controllerSpr = new G(50, 40).loadGraphic(y.image("controllertype"), true, 82, 60);
        this.controllerSpr.set_antialiasing(C.data.antialiasing);
        this.controllerSpr.animation.add("keyboard", [0], 1, false);
        this.controllerSpr.animation.add("gamepad", [1], 1, false);
        this.add(this.controllerSpr);
        a = new Jb(60, 90, "CTRL", false);
        a.set_alignment(Of.CENTERED);
        a.setScale(0.4);
        this.add(a);
        this.createTexts();
      }
      h["options.ControlsSubState"] = fh;
      fh.__name__ = "options.ControlsSubState";
      fh.__super__ = bb;
      fh.prototype = q(bb.prototype, {
        createTexts: function () {
          this.curOptions = [];
          this.curOptionsValid = [];
          this.grpDisplay.forEachAlive(function (a) {
            a.destroy();
          });
          this.grpBlacks.forEachAlive(function (a) {
            a.destroy();
          });
          this.grpOptions.forEachAlive(function (a) {
            a.destroy();
          });
          this.grpBinds.forEachAlive(function (a) {
            a.destroy();
          });
          this.grpDisplay.clear();
          this.grpBlacks.clear();
          this.grpOptions.clear();
          this.grpBinds.clear();
          for (var a = 0, b = 0, c = this.options.length; b < c;) {
            var d = b++;
            var e = this.options[d];
            if (e[0] || this.onKeyboardMode) {
              if (e.length > 1) {
                var f = e.length < 3;
                var k = e[1] == fh.defaultKey;
                k = f && !k;
                var h = new Jb(200, 300, e[1], !k);
                h.isMenuItem = true;
                h.changeX = false;
                h.distancePerItem.set_y(60);
                h.targetY = a;
                if (k) {
                  this.grpDisplay.add(h);
                } else {
                  this.grpOptions.add(h);
                  this.curOptions.push(d);
                  this.curOptionsValid.push(a);
                }
                this.lastID = h.ID = a;
                if (f) {
                  this.addCenteredText(h, e, a);
                } else {
                  this.addKeyText(h, e, a);
                }
                h.snapToPosition();
                h.set_y(h.y + g.height * 2);
              }
              ++a;
            }
          }
          this.updateText();
        },
        addCenteredText: function (a, b, c) {
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          a.set_y(a.y - 55);
          a.startPosition.set_y(a.startPosition.y - 55);
        },
        addKeyText: function (a, b, c) {
          for (c = 0; c < 2;) {
            var d = c++;
            var e = 350 + d * 300;
            if (this.onKeyboardMode) {
              var f = C.keyBinds.h[b[2]];
              d = Vd.getKeyName(f[d] ?? -1);
            } else {
              f = C.gamepadBinds.h[b[2]];
              d = Vd.getGamepadName(f[d] ?? -1);
            }
            d = new Jb(e + 210, 248, d, false);
            d.isMenuItem = true;
            d.changeX = false;
            d.distancePerItem.set_y(60);
            d.targetY = a.targetY;
            d.ID = Math.floor(this.grpBinds.length / 2);
            d.snapToPosition();
            d.set_y(d.y + g.height * 2);
            this.grpBinds.add(d);
            this.playstationCheck(d);
            d.set_scaleX(Math.min(1, 230 / d.get_width()));
            d = new ah();
            d.makeGraphic(250, 78, -16777216);
            d.alphaMult = 0.4;
            d.sprTracker = a;
            d.yAdd = -6;
            d.xAdd = e;
            this.grpBlacks.add(d);
          }
        },
        playstationCheck: function (a) {
          if (!this.onKeyboardMode) {
            var b = g.gamepads.firstActive;
            var c = a.letters[0];
            if ((b != null ? b.detectedModel : uc.UNKNOWN) == uc.PS4) {
              switch (a.text) {
                case "[":
                case "]":
                  c.set_image("alphabet_playstation");
                  c.updateHitbox();
                  c.offset.set_x(c.offset.x + 4);
                  c.offset.set_y(c.offset.y - 5);
              }
            }
          }
        },
        updateBind: function (a, b) {
          var c = this.grpBinds.members[a];
          b = new Jb(350 + a % 2 * 300, 248, b, false);
          b.isMenuItem = true;
          b.changeX = false;
          b.distancePerItem.set_y(60);
          b.targetY = c.targetY;
          b.ID = c.ID;
          b.set_x(c.x);
          b.set_y(c.y);
          this.playstationCheck(b);
          b.set_scaleX(Math.min(1, 230 / b.get_width()));
          c.kill();
          this.grpBinds.remove(c);
          this.grpBinds.insert(a, b);
          c.destroy();
        },
        update: function (a) {
          if (this.timeForMoving > 0) {
            this.timeForMoving = Math.max(0, this.timeForMoving - a);
          } else if (this.binding) {
            var b = this.curAlt ? 1 : 0;
            var c = this.options[this.curOptions[this.curSelected]];
            p = g.keys.pressed;
            if (p.keyManager.checkStatusUnsafe(27, p.status) || g.gamepads.anyHasState(1, 1)) {
              this.holdingEsc += a;
              if (this.holdingEsc > 0.5) {
                g.sound.play(y.sound("cancelMenu"));
                this.closeBinding();
              }
            } else {
              p = g.keys.pressed;
              if (p.keyManager.checkStatusUnsafe(8, p.status) || g.gamepads.anyHasState(6, 1)) {
                this.holdingEsc += a;
                if (this.holdingEsc > 0.5) {
                  C.keyBinds.h[c[2]][b] = -1;
                  C.clearInvalidKeys(c[2]);
                  this.updateBind(Math.floor(this.curSelected * 2) + b, this.onKeyboardMode ? Vd.getKeyName(-1) : Vd.getGamepadName(-1));
                  g.sound.play(y.sound("cancelMenu"));
                  this.closeBinding();
                }
              } else {
                this.holdingEsc = 0;
                p = false;
                var d = C.keyBinds.h[c[2]];
                c = C.gamepadBinds.h[c[2]];
                if (this.onKeyboardMode) {
                  if (g.keys.justPressed.get_ANY() || g.keys.justReleased.get_ANY()) {
                    var e = g.keys.firstJustPressed();
                    var f = g.keys.firstJustReleased();
                    if (e > -1 && e != 27 && e != 8) {
                      d[b] = e;
                      p = true;
                    } else if (f > -1 && (f == 27 || f == 8)) {
                      d[b] = f;
                      p = true;
                    }
                  }
                } else if (g.gamepads.anyHasState(-2, 2) || g.gamepads.anyHasState(17, 2) || g.gamepads.anyHasState(18, 2) || g.gamepads.anyHasState(-2, -1)) {
                  f = e = -1;
                  if (g.gamepads.anyHasState(17, 2)) {
                    e = 17;
                  } else if (g.gamepads.anyHasState(18, 2)) {
                    e = 18;
                  } else {
                    for (var k = 0, h = g.gamepads.get_numActiveGamepads(); k < h;) {
                      var n = k++;
                      n = g.gamepads._activeGamepads[n];
                      if (n != null && (e = n.firstJustPressedRawID(), e = e < 0 ? e : n.mapping.getID(e), f = n.firstJustReleasedRawID(), f = f < 0 ? f : n.mapping.getID(f), e == null && (e = -1), f == null && (f = -1), e != -1 || f != -1)) {
                        break;
                      }
                    }
                  }
                  if (e != -1 && e != 6 && e != 1) {
                    c[b] = e;
                    p = true;
                  } else if (f != -1 && (f == 6 || f == 1)) {
                    c[b] = f;
                    p = true;
                  }
                }
                if (p) {
                  if (this.onKeyboardMode) {
                    if (d[b] == d[1 - b]) {
                      d[1 - b] = -1;
                    }
                  } else if (c[b] == c[1 - b]) {
                    c[1 - b] = -1;
                  }
                  b = this.options[this.curOptions[this.curSelected]][2];
                  C.clearInvalidKeys(b);
                  if (this.onKeyboardMode) {
                    p = C.keyBinds.h[b];
                    p = Vd.getKeyName(p[0] ?? -1);
                  } else {
                    p = C.gamepadBinds.h[b];
                    p = Vd.getGamepadName(p[0] ?? -1);
                  }
                  this.updateBind(Math.floor(this.curSelected * 2), p);
                  if (this.onKeyboardMode) {
                    p = C.keyBinds.h[b];
                    p = Vd.getKeyName(p[1] ?? -1);
                  } else {
                    p = C.gamepadBinds.h[b];
                    p = Vd.getGamepadName(p[1] ?? -1);
                  }
                  this.updateBind(Math.floor(this.curSelected * 2) + 1, p);
                  g.sound.play(y.sound("confirmMenu"));
                  this.closeBinding();
                }
              }
            }
          } else {
            var p = g.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(27, p.status) || g.gamepads.anyHasState(1, 2)) {
              this.close();
              return;
            }
            p = g.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(17, p.status) || g.gamepads.anyHasState(4, 2) || g.gamepads.anyHasState(5, 2)) {
              this.swapMode();
            }
            p = g.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(37, p.status)) {
              b = true;
            } else {
              p = g.keys.justPressed;
              b = p.keyManager.checkStatusUnsafe(39, p.status);
            }
            if (b || g.gamepads.anyHasState(13, 2) || g.gamepads.anyHasState(14, 2) || g.gamepads.anyHasState(37, 2) || g.gamepads.anyHasState(35, 2)) {
              this.updateAlt(true);
            }
            p = g.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(38, p.status) || g.gamepads.anyHasState(11, 2) || g.gamepads.anyHasState(34, 2)) {
              this.updateText(-1);
            } else {
              p = g.keys.justPressed;
              if (p.keyManager.checkStatusUnsafe(40, p.status) || g.gamepads.anyHasState(12, 2) || g.gamepads.anyHasState(36, 2)) {
                this.updateText(1);
              }
            }
            p = g.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(13, p.status) || g.gamepads.anyHasState(7, 2) || g.gamepads.anyHasState(0, 2)) {
              if (this.options[this.curOptions[this.curSelected]][1] != fh.defaultKey) {
                this.bindingBlack = new G().makeGraphic(1, 1, -1);
                b = this.bindingBlack.scale;
                p = g.width;
                d = g.height;
                if (d == null) {
                  d = 0;
                }
                if (p == null) {
                  p = 0;
                }
                b.set_x(p);
                b.set_y(d);
                this.bindingBlack.updateHitbox();
                this.bindingBlack.set_alpha(0);
                ka.tween(this.bindingBlack, {
                  alpha: 0.6
                }, 0.35, {
                  ease: va.linear
                });
                this.add(this.bindingBlack);
                this.bindingText = new Jb(g.width / 2, 160, "Rebinding " + this.options[this.curOptions[this.curSelected]][3], false);
                this.bindingText.set_alignment(Of.CENTERED);
                this.add(this.bindingText);
                this.bindingText2 = new Jb(g.width / 2, 340, "Hold ESC to Cancel\nHold Backspace to Delete", true);
                this.bindingText2.set_alignment(Of.CENTERED);
                this.add(this.bindingText2);
                this.binding = true;
                this.holdingEsc = 0;
                C.toggleVolumeKeys(false);
                g.sound.play(y.sound("scrollMenu"));
              } else {
                C.resetKeys(!this.onKeyboardMode);
                C.reloadVolumeKeys();
                b = this.curSelected;
                this.createTexts();
                this.curSelected = b;
                this.updateText();
                g.sound.play(y.sound("cancelMenu"));
              }
            }
          }
          bb.prototype.update.call(this, a);
        },
        closeBinding: function () {
          this.binding = false;
          this.bindingBlack.destroy();
          this.remove(this.bindingBlack);
          this.bindingText.destroy();
          this.remove(this.bindingText);
          this.bindingText2.destroy();
          this.remove(this.bindingText2);
          C.reloadVolumeKeys();
        },
        updateText: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = this;
          if (a != 0) {
            this.curSelected += a;
            if (this.curSelected < 0) {
              this.curSelected = this.curOptions.length - 1;
            } else if (this.curSelected >= this.curOptions.length) {
              this.curSelected = 0;
            }
          }
          var c = this.curOptionsValid[this.curSelected];
          var d = 0;
          if (c < 3) {
            d = 3 - c;
          } else if (c > this.lastID - 4) {
            d = this.lastID - 4 - c;
          }
          this.grpDisplay.forEachAlive(function (a) {
            a.targetY = a.ID - c - d;
          });
          this.grpOptions.forEachAlive(function (a) {
            a.targetY = a.ID - c - d;
            a.set_alpha(a.ID - c == 0 ? 1 : 0.6);
          });
          this.grpBinds.forEachAlive(function (a) {
            var c = b.grpOptions.members[a.ID];
            a.targetY = c.targetY;
            a.set_alpha(c.alpha);
          });
          this.updateAlt();
          g.sound.play(y.sound("scrollMenu"));
        },
        swapMode: function () {
          if (this.colorTween != null) {
            this.colorTween.destroy();
          }
          this.colorTween = ka.color(this.bg, 0.5, this.bg.color, this.onKeyboardMode ? this.gamepadColor : this.keyboardColor, {
            ease: va.linear
          });
          this.onKeyboardMode = !this.onKeyboardMode;
          this.curSelected = 0;
          this.curAlt = false;
          this.controllerSpr.animation.play(this.onKeyboardMode ? "keyboard" : "gamepad");
          this.createTexts();
        },
        updateAlt: function (a) {
          if (a == null) {
            a = false;
          }
          if (a) {
            this.curAlt = !this.curAlt;
            g.sound.play(y.sound("scrollMenu"));
          }
          this.selectSpr.sprTracker = this.grpBlacks.members[Math.floor(this.curSelected * 2) + (this.curAlt ? 1 : 0)];
          this.selectSpr.set_visible(this.selectSpr.sprTracker != null);
        },
        __class__: fh
      });
      function Vm() {
        this.title = "Gameplay Settings";
        this.rpcTitle = "Gameplay Settings Menu";
        var a = new pc("Downscroll", "If checked, notes go Down instead of Up, simple enough.", "downScroll", "bool");
        this.addOption(a);
        a = new pc("Middlescroll", "If checked, your notes get centered.", "middleScroll", "bool");
        this.addOption(a);
        a = new pc("Opponent Notes", "If unchecked, opponent notes get hidden.", "opponentStrums", "bool");
        this.addOption(a);
        a = new pc("Ghost Tapping", "If checked, you won't get misses from pressing keys\nwhile there are no notes able to be hit.", "ghostTapping", "bool");
        this.addOption(a);
        a = new pc("Auto Pause", "If checked, the game automatically pauses if the screen isn't on focus.", "autoPause", "bool");
        this.addOption(a);
        a.onChange = l(this, this.onChangeAutoPause);
        a = new pc("Disable Reset Button", "If checked, pressing Reset won't do anything.", "noReset", "bool");
        this.addOption(a);
        a = new pc("Hitsound Volume", "Funny notes does \"Tick!\" when you hit them.", "hitsoundVolume", "percent");
        this.addOption(a);
        a.scrollSpeed = 1.6;
        a.minValue = 0;
        a.maxValue = 1;
        a.changeValue = 0.1;
        a.decimals = 1;
        a.onChange = l(this, this.onChangeHitsoundVolume);
        a = new pc("Rating Offset", "Changes how late/early you have to hit for a \"Sick!\"\nHigher values mean you have to hit later.", "ratingOffset", "int");
        a.displayFormat = "%vms";
        a.scrollSpeed = 20;
        a.minValue = -30;
        a.maxValue = 30;
        this.addOption(a);
        a = new pc("Sick! Hit Window", "Changes the amount of time you have\nfor hitting a \"Sick!\" in milliseconds.", "sickWindow", "int");
        a.displayFormat = "%vms";
        a.scrollSpeed = 15;
        a.minValue = 15;
        a.maxValue = 45;
        this.addOption(a);
        a = new pc("Good Hit Window", "Changes the amount of time you have\nfor hitting a \"Good\" in milliseconds.", "goodWindow", "int");
        a.displayFormat = "%vms";
        a.scrollSpeed = 30;
        a.minValue = 15;
        a.maxValue = 90;
        this.addOption(a);
        a = new pc("Bad Hit Window", "Changes the amount of time you have\nfor hitting a \"Bad\" in milliseconds.", "badWindow", "int");
        a.displayFormat = "%vms";
        a.scrollSpeed = 60;
        a.minValue = 15;
        a.maxValue = 135;
        this.addOption(a);
        a = new pc("Safe Frames", "Changes how many frames you have for\nhitting a note earlier or late.", "safeFrames", "float");
        a.scrollSpeed = 5;
        a.minValue = 2;
        a.maxValue = 10;
        a.changeValue = 0.1;
        this.addOption(a);
        a = new pc("Sustains as One Note", "If checked, Hold Notes can't be pressed if you miss,\nand count as a single Hit/Miss.\nUncheck this if you prefer the old Input System.", "guitarHeroSustains", "bool");
        this.addOption(a);
        xe.call(this);
      }
      h["options.GameplaySettingsSubState"] = Vm;
      Vm.__name__ = "options.GameplaySettingsSubState";
      Vm.__super__ = xe;
      Vm.prototype = q(xe.prototype, {
        onChangeHitsoundVolume: function () {
          g.sound.play(y.sound("hitsound"), C.data.hitsoundVolume);
        },
        onChangeAutoPause: function () {
          g.autoPause = C.data.autoPause;
        },
        __class__: Vm
      });
      function Wm() {
        this.boyfriend = null;
        var a = this;
        this.title = "Graphics";
        this.rpcTitle = "Graphics Settings Menu";
        this.boyfriend = new ad(840, 170, "bf", true);
        this.boyfriend.setGraphicSize(this.boyfriend.get_width() * 0.75 | 0);
        this.boyfriend.updateHitbox();
        this.boyfriend.dance();
        this.boyfriend.animation.finishCallback = function (b) {
          a.boyfriend.dance();
        };
        this.boyfriend.set_visible(false);
        var b = new pc("Low Quality", "If checked, disables some background details,\ndecreases loading times and improves performance.", "lowQuality", "bool");
        this.addOption(b);
        b = new pc("Anti-Aliasing", "If unchecked, disables anti-aliasing, increases performance\nat the cost of sharper visuals.", "antialiasing", "bool");
        b.onChange = l(this, this.onChangeAntiAliasing);
        this.addOption(b);
        this.antialiasingOption = this.optionsArray.length - 1;
        b = new pc("Shaders", "If unchecked, disables shaders.\nIt's used for some visual effects, and also CPU intensive for weaker PCs.", "shaders", "bool");
        this.addOption(b);
        b = new pc("GPU Caching", "If checked, allows the GPU to be used for caching textures, decreasing RAM usage.\nDon't turn this on if you have a shitty Graphics Card.", "cacheOnGPU", "bool");
        this.addOption(b);
        xe.call(this);
        this.insert(1, this.boyfriend);
      }
      h["options.GraphicsSettingsSubState"] = Wm;
      Wm.__name__ = "options.GraphicsSettingsSubState";
      Wm.__super__ = xe;
      Wm.prototype = q(xe.prototype, {
        onChangeAntiAliasing: function () {
          for (var a = 0, b = this.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c instanceof G && !(c instanceof Q)) {
              c.set_antialiasing(C.data.antialiasing);
            }
          }
        },
        onChangeFramerate: function () {
          if (C.data.framerate > g.drawFramerate) {
            g.set_updateFramerate(C.data.framerate);
            g.set_drawFramerate(C.data.framerate);
          } else {
            g.set_drawFramerate(C.data.framerate);
            g.set_updateFramerate(C.data.framerate);
          }
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          xe.prototype.changeSelection.call(this, a);
          this.boyfriend.set_visible(this.antialiasingOption == this.curSelected);
        },
        __class__: Wm
      });
      function Xm(a, b) {
        this.lastBeatHit = -1;
        var c = 0;
        var d = 0;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        d = fa.pool.get().set(c, d);
        d._inPool = false;
        this.startComboOffset = d;
        d = c = 0;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        d = fa.pool.get().set(c, d);
        d._inPool = false;
        this.startMousePos = d;
        this.holdingObjectType = null;
        this.onComboMenu = true;
        this.holdTime = 0;
        this._lastControllerMode = false;
        this.delayMax = 500;
        this.delayMin = -500;
        this.barPercent = 0;
        this.stageDirectory = "week1";
        U.call(this, a, b);
      }
      h["options.NoteOffsetState"] = Xm;
      Xm.__name__ = "options.NoteOffsetState";
      Xm.__super__ = U;
      Xm.prototype = q(U.prototype, {
        create: function () {
          var a = this;
          this.camGame = this.initPsychCamera();
          this.camHUD = new Vb();
          this.camHUD.bgColor &= 16777215;
          this.camHUD.bgColor |= 0;
          g.cameras.add(this.camHUD, false);
          this.camOther = new Vb();
          this.camOther.bgColor &= 16777215;
          this.camOther.bgColor |= 0;
          g.cameras.add(this.camOther, false);
          var b = g.camera.scroll;
          var c = 120;
          var d = 130;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          this.persistentUpdate = true;
          g.sound.pause();
          y.setCurrentLevel(this.stageDirectory);
          new ck();
          b = this.gf = new ad(400, 130, "gf");
          b.set_x(b.x + this.gf.positionArray[0]);
          b = this.gf;
          b.set_y(b.y + this.gf.positionArray[1]);
          b = this.gf.scrollFactor;
          d = c = 0.95;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.boyfriend = new ad(770, 100, "bf", true);
          b.set_x(b.x + this.boyfriend.positionArray[0]);
          b = this.boyfriend;
          b.set_y(b.y + this.boyfriend.positionArray[1]);
          this.add(this.gf);
          this.add(this.boyfriend);
          b = this.coolText = new Q(0, 0, 0, "", 32);
          b.set_x((g.width - b.get_width()) / 2);
          b.set_y((g.height - b.get_height()) / 2);
          this.coolText.set_x(g.width * 0.35);
          this.rating = new G().loadGraphic(y.image("sick"));
          this.rating.set_cameras([this.camHUD]);
          this.rating.set_antialiasing(C.data.antialiasing);
          this.rating.setGraphicSize(this.rating.get_width() * 0.7 | 0);
          this.rating.updateHitbox();
          this.add(this.rating);
          this.comboNums = new db();
          this.comboNums.set_cameras([this.camHUD]);
          this.add(this.comboNums);
          b = [];
          b.push(g.random.int(0, 9));
          b.push(g.random.int(0, 9));
          b.push(g.random.int(0, 9));
          for (d = c = 0; d < b.length;) {
            var e = b[d];
            ++d;
            e = new G(c * 43).loadGraphic(y.image("num" + e));
            e.set_cameras([this.camHUD]);
            e.set_antialiasing(C.data.antialiasing);
            e.setGraphicSize(e.get_width() * 0.5 | 0);
            e.updateHitbox();
            this.comboNums.add(e);
            ++c;
          }
          this.dumbTexts = new Ra();
          this.dumbTexts.set_cameras([this.camHUD]);
          this.add(this.dumbTexts);
          this.createTexts();
          this.repositionCombo();
          this.beatText = new Jb(0, 0, "Beat Hit!", true);
          this.beatText.setScale(0.6, 0.6);
          b = this.beatText;
          b.set_x(b.x + 260);
          this.beatText.set_alpha(0);
          this.beatText.acceleration.set_y(250);
          this.beatText.set_visible(false);
          this.add(this.beatText);
          this.timeTxt = new Q(0, 600, g.width, "", 32);
          this.timeTxt.setFormat("assets/fonts/vcr.ttf", 32, -1, "center", Ta.OUTLINE, -16777216);
          b = this.timeTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.timeTxt.set_borderSize(2);
          this.timeTxt.set_visible(false);
          this.timeTxt.set_cameras([this.camHUD]);
          this.barPercent = C.data.noteOffset;
          this.updateNoteDelay();
          this.timeBar = new Dh(0, this.timeTxt.y + this.timeTxt.get_height() / 3, "healthBar", function () {
            return a.barPercent;
          }, this.delayMin, this.delayMax);
          b = this.timeBar.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          b = this.timeBar;
          c = 1;
          if (c == null) {
            c = 17;
          }
          if (c == 1 || c == 17) {
            b.set_x((g.width - b.get_width()) / 2);
          }
          if (c == 16 || c == 17) {
            b.set_y((g.height - b.get_height()) / 2);
          }
          this.timeBar.set_visible(false);
          this.timeBar.set_cameras([this.camHUD]);
          this.timeBar.leftBar.set_color(-16711936);
          this.add(this.timeBar);
          this.add(this.timeTxt);
          c = new G().makeGraphic(g.width, 40, -16777216);
          b = c.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          c.set_alpha(0.6);
          c.set_cameras([this.camHUD]);
          this.add(c);
          this.changeModeText = new Q(0, 4, g.width, "", 32);
          this.changeModeText.setFormat("assets/fonts/vcr.ttf", 32, -1, "center");
          b = this.changeModeText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.changeModeText.set_cameras([this.camHUD]);
          this.add(this.changeModeText);
          this.controllerPointer = new Xh(0, 0, 20, {
            thickness: 0
          }, -1);
          b = this.controllerPointer.offset;
          d = c = 20;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.controllerPointer;
          b.set_x((g.width - b.get_width()) / 2);
          b.set_y((g.height - b.get_height()) / 2);
          this.controllerPointer.set_alpha(0.6);
          this.controllerPointer.set_cameras([this.camHUD]);
          this.add(this.controllerPointer);
          this.updateMode();
          this._lastControllerMode = true;
          N.set_bpm(128);
          b = g.sound;
          c = y.returnSound("music", "offsetSong", null);
          b.playMusic(c, 1, true);
          U.prototype.create.call(this);
        },
        update: function (a) {
          var b = 1;
          var c = g.keys.pressed;
          if (c.keyManager.checkStatusUnsafe(16, c.status) || g.gamepads.anyHasState(4, 1)) {
            b = this.onComboMenu ? 10 : 3;
          }
          if (g.gamepads.anyHasState(-2, 2)) {
            this.get_controls().controllerMode = true;
          } else if (g.mouse._leftButton.current == 2) {
            this.get_controls().controllerMode = false;
          }
          if (this.get_controls().controllerMode != this._lastControllerMode) {
            g.mouse.set_visible(!this.get_controls().controllerMode);
            this.controllerPointer.set_visible(this.get_controls().controllerMode);
            if (this.get_controls().controllerMode) {
              c = g.mouse.getScreenPosition(this.camHUD);
              this.controllerPointer.set_x(c.x);
              this.controllerPointer.set_y(c.y);
            }
            this.updateMode();
            this._lastControllerMode = this.get_controls().controllerMode;
          }
          if (this.onComboMenu) {
            if (g.keys.justPressed.get_ANY() || g.gamepads.anyHasState(-2, 2)) {
              if (this.get_controls().controllerMode) {
                var d = [g.gamepads.anyHasState(13, 2), g.gamepads.anyHasState(14, 2), g.gamepads.anyHasState(11, 2), g.gamepads.anyHasState(12, 2), g.gamepads.anyHasState(41, 2), g.gamepads.anyHasState(39, 2), g.gamepads.anyHasState(38, 2), g.gamepads.anyHasState(40, 2)];
              } else {
                c = g.keys.justPressed;
                var e = c.keyManager.checkStatusUnsafe(37, c.status);
                c = g.keys.justPressed;
                d = c.keyManager.checkStatusUnsafe(39, c.status);
                c = g.keys.justPressed;
                var f = c.keyManager.checkStatusUnsafe(38, c.status);
                c = g.keys.justPressed;
                var k = c.keyManager.checkStatusUnsafe(40, c.status);
                c = g.keys.justPressed;
                var h = c.keyManager.checkStatusUnsafe(65, c.status);
                c = g.keys.justPressed;
                var n = c.keyManager.checkStatusUnsafe(68, c.status);
                c = g.keys.justPressed;
                var p = c.keyManager.checkStatusUnsafe(87, c.status);
                c = g.keys.justPressed;
                d = [e, d, f, k, h, n, p, c.keyManager.checkStatusUnsafe(83, c.status)];
              }
              if (d.indexOf(true) != -1) {
                c = 0;
                for (e = d.length; c < e;) {
                  f = c++;
                  if (d[f]) {
                    switch (f) {
                      case 0:
                        C.data.comboOffset[0] -= b;
                        break;
                      case 1:
                        C.data.comboOffset[0] += b;
                        break;
                      case 2:
                        C.data.comboOffset[1] += b;
                        break;
                      case 3:
                        C.data.comboOffset[1] -= b;
                        break;
                      case 4:
                        C.data.comboOffset[2] -= b;
                        break;
                      case 5:
                        C.data.comboOffset[2] += b;
                        break;
                      case 6:
                        C.data.comboOffset[3] += b;
                        break;
                      case 7:
                        C.data.comboOffset[3] -= b;
                    }
                  }
                }
                this.repositionCombo();
              }
            }
            f = b = 0;
            e = c = d = false;
            if (this.get_controls().controllerMode) {
              c = 0;
              for (e = g.gamepads.getActiveGamepads(); c < e.length && !(d = e[c], ++c, b = d.getAnalogXAxisValue(d.mapping.getAnalogStick(19)), f = d.getYAxisRaw(d.mapping.getAnalogStick(19)), d = b != 0 || f != 0););
              this.controllerPointer.set_x(Math.max(0, Math.min(g.width, this.controllerPointer.x + b * 1000 * a)));
              this.controllerPointer.set_y(Math.max(0, Math.min(g.height, this.controllerPointer.y + f * 1000 * a)));
              c = !g.gamepads.anyHasState(7, 2) && this.get_controls().get_ACCEPT();
              e = !g.gamepads.anyHasState(7, -1) && this.get_controls().justReleased("accept");
            }
            if (g.mouse._leftButton.current == 2 || c) {
              this.holdingObjectType = null;
              if (this.get_controls().controllerMode) {
                this.controllerPointer.getScreenPosition(this.startMousePos, this.camHUD);
              } else {
                g.mouse.getScreenPosition(this.camHUD, this.startMousePos);
              }
              if (this.startMousePos.x - this.comboNums.x >= 0 && this.startMousePos.x - this.comboNums.x <= this.comboNums.get_width() && this.startMousePos.y - this.comboNums.y >= 0 && this.startMousePos.y - this.comboNums.y <= this.comboNums.get_height()) {
                this.holdingObjectType = true;
                this.startComboOffset.set_x(C.data.comboOffset[2]);
                this.startComboOffset.set_y(C.data.comboOffset[3]);
              } else if (this.startMousePos.x - this.rating.x >= 0 && this.startMousePos.x - this.rating.x <= this.rating.get_width() && this.startMousePos.y - this.rating.y >= 0 && this.startMousePos.y - this.rating.y <= this.rating.get_height()) {
                this.holdingObjectType = false;
                this.startComboOffset.set_x(C.data.comboOffset[0]);
                this.startComboOffset.set_y(C.data.comboOffset[1]);
              }
            }
            if (g.mouse._leftButton.current == -1 || e) {
              this.holdingObjectType = null;
            }
            if (this.holdingObjectType != null && (c = g.mouse, c._prevX != c.x || c._prevY != c.y || d)) {
              c = this.get_controls().controllerMode ? this.controllerPointer.getScreenPosition(null, this.camHUD) : g.mouse.getScreenPosition(this.camHUD);
              b = this.holdingObjectType ? 2 : 0;
              C.data.comboOffset[b] = Math.round(c.x - this.startMousePos.x + this.startComboOffset.x);
              C.data.comboOffset[b + 1] = -Math.round(c.y - this.startMousePos.y - this.startComboOffset.y);
              this.repositionCombo();
            }
            if (this.get_controls().get_RESET()) {
              c = 0;
              for (e = C.data.comboOffset.length; c < e;) {
                f = c++;
                C.data.comboOffset[f] = 0;
              }
              this.repositionCombo();
            }
          } else {
            if (this.get_controls().get_UI_LEFT_P()) {
              this.barPercent = Math.max(this.delayMin, Math.min(C.data.noteOffset - 1, this.delayMax));
              this.updateNoteDelay();
            } else if (this.get_controls().get_UI_RIGHT_P()) {
              this.barPercent = Math.max(this.delayMin, Math.min(C.data.noteOffset + 1, this.delayMax));
              this.updateNoteDelay();
            }
            c = 1;
            if (this.get_controls().get_UI_LEFT() || this.get_controls().get_UI_RIGHT()) {
              this.holdTime += a;
              if (this.get_controls().get_UI_LEFT()) {
                c = -1;
              }
            }
            if (this.get_controls().get_UI_LEFT_R() || this.get_controls().get_UI_RIGHT_R()) {
              this.holdTime = 0;
            }
            if (this.holdTime > 0.5) {
              this.barPercent += b * 100 * a * c;
              this.barPercent = Math.max(this.delayMin, Math.min(this.barPercent, this.delayMax));
              this.updateNoteDelay();
            }
            if (this.get_controls().get_RESET()) {
              this.barPercent = this.holdTime = 0;
              this.updateNoteDelay();
            }
          }
          if (!this.get_controls().controllerMode && this.get_controls().get_ACCEPT() || this.get_controls().controllerMode && g.gamepads.anyHasState(7, 2)) {
            this.onComboMenu = !this.onComboMenu;
            this.updateMode();
          }
          if (this.get_controls().get_BACK()) {
            if (this.zoomTween != null) {
              this.zoomTween.cancel();
            }
            if (this.beatTween != null) {
              this.beatTween.cancel();
            }
            this.persistentUpdate = false;
            U.switchState(new kd());
            if (kd.onPlayState) {
              if (C.data.pauseMusic != "None") {
                b = g.sound;
                e = C.data.pauseMusic;
                d = new sa("[~&\\\\;:<>#]", "");
                c = new sa("[.,'\"%?!]", "");
                e = d.split(w.replace(e, " ", "-")).join("-");
                c = y.returnSound("music", c.split(e).join("").toLowerCase(), null);
                b.playMusic(c);
              } else {
                g.sound.music.set_volume(0);
              }
            } else {
              b = g.sound;
              c = y.returnSound("music", "freakyMenu", null);
              b.playMusic(c);
            }
            g.mouse.set_visible(false);
          }
          N.songPosition = g.sound.music._time;
          U.prototype.update.call(this, a);
        },
        beatHit: function () {
          var a = this;
          U.prototype.beatHit.call(this);
          if (this.lastBeatHit != this.curBeat) {
            if (this.curBeat % 2 == 0) {
              this.boyfriend.dance();
              this.gf.dance();
            }
            if (this.curBeat % 4 == 2) {
              g.camera.set_zoom(1.15);
              if (this.zoomTween != null) {
                this.zoomTween.cancel();
              }
              this.zoomTween = ka.tween(g.camera, {
                zoom: 1
              }, 1, {
                ease: va.circOut,
                onComplete: function (b) {
                  a.zoomTween = null;
                }
              });
              this.beatText.set_alpha(1);
              this.beatText.set_y(320);
              this.beatText.velocity.set_y(-150);
              if (this.beatTween != null) {
                this.beatTween.cancel();
              }
              this.beatTween = ka.tween(this.beatText, {
                alpha: 0
              }, 1, {
                ease: va.sineIn,
                onComplete: function (b) {
                  a.beatTween = null;
                }
              });
            }
            this.lastBeatHit = this.curBeat;
          }
        },
        repositionCombo: function () {
          var a = this.rating;
          a.set_x((g.width - a.get_width()) / 2);
          a.set_y((g.height - a.get_height()) / 2);
          this.rating.set_x(this.coolText.x - 40 + C.data.comboOffset[0]);
          a = this.rating;
          a.set_y(a.y - (60 + C.data.comboOffset[1]));
          a = this.comboNums;
          a.set_x((g.width - a.get_width()) / 2);
          a.set_y((g.height - a.get_height()) / 2);
          this.comboNums.set_x(this.coolText.x - 90 + C.data.comboOffset[2]);
          a = this.comboNums;
          a.set_y(a.y + (80 - C.data.comboOffset[3]));
          this.reloadTexts();
        },
        createTexts: function () {
          var a = new Q(10, 48, 0, "", 24);
          a.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", Ta.OUTLINE, -16777216);
          var b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_borderSize(2);
          this.dumbTexts.add(a);
          a.set_cameras([this.camHUD]);
          a = new Q(10, 78, 0, "", 24);
          a.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", Ta.OUTLINE, -16777216);
          b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_borderSize(2);
          this.dumbTexts.add(a);
          a.set_cameras([this.camHUD]);
          a = new Q(10, 108, 0, "", 24);
          a.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", Ta.OUTLINE, -16777216);
          b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_borderSize(2);
          this.dumbTexts.add(a);
          a.set_cameras([this.camHUD]);
          a.set_y(a.y + 24);
          a = new Q(10, 138, 0, "", 24);
          a.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", Ta.OUTLINE, -16777216);
          b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_borderSize(2);
          this.dumbTexts.add(a);
          a.set_cameras([this.camHUD]);
          a.set_y(a.y + 24);
        },
        reloadTexts: function () {
          for (var a = 0, b = this.dumbTexts.length; a < b;) {
            var c = a++;
            switch (c) {
              case 0:
                this.dumbTexts.members[c].set_text("Rating Offset:");
                break;
              case 1:
                this.dumbTexts.members[c].set_text("[" + C.data.comboOffset[0] + ", " + C.data.comboOffset[1] + "]");
                break;
              case 2:
                this.dumbTexts.members[c].set_text("Numbers Offset:");
                break;
              case 3:
                this.dumbTexts.members[c].set_text("[" + C.data.comboOffset[2] + ", " + C.data.comboOffset[3] + "]");
            }
          }
        },
        updateNoteDelay: function () {
          C.data.noteOffset = Math.round(this.barPercent);
          this.timeTxt.set_text("Current offset: " + Math.floor(this.barPercent) + " ms");
        },
        updateMode: function () {
          this.rating.set_visible(this.onComboMenu);
          this.comboNums.set_visible(this.onComboMenu);
          this.dumbTexts.set_visible(this.onComboMenu);
          this.timeBar.set_visible(!this.onComboMenu);
          this.timeTxt.set_visible(!this.onComboMenu);
          this.beatText.set_visible(!this.onComboMenu);
          this.controllerPointer.set_visible(false);
          g.mouse.set_visible(false);
          if (this.onComboMenu) {
            g.mouse.set_visible(!this.get_controls().controllerMode);
            this.controllerPointer.set_visible(this.get_controls().controllerMode);
          }
          var a = this.onComboMenu ? "Combo Offset" : "Note/Beat Delay";
          var b = this.get_controls().controllerMode ? "(Press Start to Switch)" : "(Press Accept to Switch)";
          this.changeModeText.set_text("< " + a.toUpperCase() + " " + b.toUpperCase() + " >");
        },
        __class__: Xm
      });
      function Ym() {
        var a = new rc();
        a.h[48] = "0";
        a.h[49] = "1";
        a.h[50] = "2";
        a.h[51] = "3";
        a.h[52] = "4";
        a.h[53] = "5";
        a.h[54] = "6";
        a.h[55] = "7";
        a.h[56] = "8";
        a.h[57] = "9";
        a.h[96] = "0";
        a.h[97] = "1";
        a.h[98] = "2";
        a.h[99] = "3";
        a.h[100] = "4";
        a.h[101] = "5";
        a.h[102] = "6";
        a.h[103] = "7";
        a.h[104] = "8";
        a.h[105] = "9";
        a.h[65] = "A";
        a.h[66] = "B";
        a.h[67] = "C";
        a.h[68] = "D";
        a.h[69] = "E";
        a.h[70] = "F";
        this.allowedTypeKeys = a;
        this._lastControllerMode = this.changingNote = false;
        this.hexTypeVisibleTimer = 0;
        this.hexTypeNum = -1;
        this.onPixel = false;
        this.curSelectedMode = this.curSelectedNote = 0;
        this.onModeColumn = true;
        bb.call(this);
        a = new G().loadGraphic(y.image("menuDesat"));
        a.set_color(-1412611);
        a.set_x((g.width - a.get_width()) / 2);
        a.set_y((g.height - a.get_height()) / 2);
        a.set_antialiasing(C.data.antialiasing);
        this.add(a);
        a = new yf(qh.createGrid(80, 80, 160, 160, true, 872415231, 0));
        var b = a.velocity;
        var c = 40;
        var d = 40;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        b.set_x(c);
        b.set_y(d);
        a.set_alpha(0);
        ka.tween(a, {
          alpha: 1
        }, 0.5, {
          ease: va.quadOut
        });
        this.add(a);
        this.modeBG = new G(215, 85).makeGraphic(315, 115, -16777216);
        this.modeBG.set_visible(false);
        this.modeBG.set_alpha(0.4);
        this.add(this.modeBG);
        this.notesBG = new G(140, 190).makeGraphic(480, 125, -16777216);
        this.notesBG.set_visible(false);
        this.notesBG.set_alpha(0.4);
        this.add(this.notesBG);
        this.modeNotes = new Ra();
        this.add(this.modeNotes);
        this.myNotes = new Ra();
        this.add(this.myNotes);
        a = new G(720).makeGraphic(g.width - 720, g.height, -16777216);
        a.set_alpha(0.25);
        this.add(a);
        a = new G(750, 160).makeGraphic(g.width - 780, 540, -16777216);
        a.set_alpha(0.25);
        this.add(a);
        a = new Jb(50, 86, "CTRL", false);
        a.set_alignment(Of.CENTERED);
        a.setScale(0.4);
        this.add(a);
        this.copyButton = new G(760, 50).loadGraphic(y.image("noteColorMenu/copy"));
        this.copyButton.set_alpha(0.6);
        this.add(this.copyButton);
        this.pasteButton = new G(1180, 50).loadGraphic(y.image("noteColorMenu/paste"));
        this.pasteButton.set_alpha(0.6);
        this.add(this.pasteButton);
        this.colorGradient = td.createGradientFlxSprite(60, 360, [-1, -16777216]);
        this.colorGradient.setPosition(780, 200);
        this.add(this.colorGradient);
        this.colorGradientSelector = new G(770, 200).makeGraphic(80, 10, -1);
        this.colorGradientSelector.offset.set_y(5);
        this.add(this.colorGradientSelector);
        this.colorPalette = new G(820, 580).loadGraphic(y.image("noteColorMenu/palette", null, false));
        b = this.colorPalette.scale;
        d = c = 20;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        b.set_x(c);
        b.set_y(d);
        this.colorPalette.updateHitbox();
        this.colorPalette.set_antialiasing(false);
        this.add(this.colorPalette);
        this.colorWheel = new G(860, 200).loadGraphic(y.image("noteColorMenu/colorWheel"));
        this.colorWheel.setGraphicSize(360, 360);
        this.colorWheel.updateHitbox();
        this.add(this.colorWheel);
        this.colorWheelSelector = new Xh(0, 0, 8, {
          thickness: 0
        }, -1);
        b = this.colorWheelSelector.offset;
        d = c = 8;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        b.set_x(c);
        b.set_y(d);
        this.colorWheelSelector.set_alpha(0.6);
        this.add(this.colorWheelSelector);
        this.alphabetR = this.makeColorAlphabet(880, 90);
        this.add(this.alphabetR);
        this.alphabetG = this.makeColorAlphabet(980, 90);
        this.add(this.alphabetG);
        this.alphabetB = this.makeColorAlphabet(1080, 90);
        this.add(this.alphabetB);
        this.alphabetHex = this.makeColorAlphabet(980, 35);
        this.add(this.alphabetHex);
        this.hexTypeLine = new G(0, 20).makeGraphic(5, 62, -1);
        this.hexTypeLine.set_visible(false);
        this.add(this.hexTypeLine);
        this.spawnNotes();
        this.updateNotes(true);
        g.sound.play(y.sound("scrollMenu"), 0.6);
        a = new Q(20, 660, 0, "Press RELOAD to Reset the selected Note Part.", 16);
        a.setFormat("assets/fonts/vcr.ttf", 16, -1, "left", Ta.OUTLINE, -16777216);
        a.set_borderSize(2);
        this.add(a);
        this.tipTxt = new Q(20, 684, 0, "", 16);
        this.tipTxt.setFormat("assets/fonts/vcr.ttf", 16, -1, "left", Ta.OUTLINE, -16777216);
        this.tipTxt.set_borderSize(2);
        this.add(this.tipTxt);
        this.updateTip();
        this.controllerPointer = new Xh(0, 0, 20, {
          thickness: 0
        }, -1);
        b = this.controllerPointer.offset;
        d = c = 20;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        b.set_x(c);
        b.set_y(d);
        a = this.controllerPointer;
        a.set_x((g.width - a.get_width()) / 2);
        a.set_y((g.height - a.get_height()) / 2);
        this.controllerPointer.set_alpha(0.6);
        this.add(this.controllerPointer);
        g.mouse.set_visible(!Ca.instance.controllerMode);
        this.controllerPointer.set_visible(Ca.instance.controllerMode);
        this._lastControllerMode = Ca.instance.controllerMode;
      }
      h["options.NotesSubState"] = Ym;
      Ym.__name__ = "options.NotesSubState";
      Ym.__super__ = bb;
      Ym.prototype = q(bb.prototype, {
        updateTip: function () {
          this.tipTxt.set_text("Hold " + (Ca.instance.controllerMode ? "Left Shoulder Button" : "Shift") + " + Press RESET key to fully reset the selected Note.");
        },
        update: function (a) {
          var b = this;
          if (Ca.instance.get_BACK()) {
            g.mouse.set_visible(false);
            g.sound.play(y.sound("cancelMenu"));
            this.close();
          } else {
            bb.prototype.update.call(this, a);
            if (g.gamepads.anyHasState(-2, 2)) {
              Ca.instance.controllerMode = true;
            } else {
              if (g.mouse._leftButton.current != 2) {
                var c = g.mouse;
                var d = c.screenX - c._prevScreenX != 0;
              } else {
                d = true;
              }
              if (d) {
                c = true;
              } else {
                c = g.mouse;
                c = c.screenY - c._prevScreenY != 0;
              }
              if (c) {
                Ca.instance.controllerMode = false;
              }
            }
            var e = false;
            if (Ca.instance.controllerMode != this._lastControllerMode) {
              g.mouse.set_visible(!Ca.instance.controllerMode);
              this.controllerPointer.set_visible(Ca.instance.controllerMode);
              if (Ca.instance.controllerMode) {
                this.controllerPointer.set_x(g.mouse.x);
                this.controllerPointer.set_y(g.mouse.y);
                e = true;
              }
              this._lastControllerMode = Ca.instance.controllerMode;
              this.updateTip();
            }
            var f = 0;
            var k = 0;
            d = false;
            if (Ca.instance.controllerMode && (e || g.gamepads.anyInput())) {
              var h = 0;
              for (c = g.gamepads.getActiveGamepads(); h < c.length && !(d = c[h], ++h, f = d.getAnalogXAxisValue(d.mapping.getAnalogStick(19)), k = d.getYAxisRaw(d.mapping.getAnalogStick(19)), d = f != 0 || k != 0););
              this.controllerPointer.set_x(Math.max(0, Math.min(g.width, this.controllerPointer.x + f * 1000 * a)));
              this.controllerPointer.set_y(Math.max(0, Math.min(g.height, this.controllerPointer.y + k * 1000 * a)));
            }
            h = Ca.instance.controllerMode && Ca.instance.get_ACCEPT();
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(17, c.status)) {
              this.onPixel = !this.onPixel;
              this.spawnNotes();
              this.updateNotes(true);
              g.sound.play(y.sound("scrollMenu"), 0.6);
            }
            if (this.hexTypeNum > -1) {
              e = ta.__cast(g.keys.firstJustPressed(), Vi);
              this.hexTypeVisibleTimer += a;
              a = false;
              c = g.keys.justPressed;
              if (a = c.keyManager.checkStatusUnsafe(37, c.status)) {
                this.hexTypeNum--;
              } else {
                c = g.keys.justPressed;
                if (a = c.keyManager.checkStatusUnsafe(39, c.status)) {
                  this.hexTypeNum++;
                } else if (this.allowedTypeKeys.h.hasOwnProperty(e)) {
                  a = this.alphabetHex.text;
                  c = a.substring(0, this.hexTypeNum) + this.allowedTypeKeys.h[e] + a.substring(this.hexTypeNum + 1);
                  a = xb.fromString("#" + c);
                  this.setShaderColor(a);
                  this._storedColor = this.getShaderColor();
                  this.updateColors();
                  this.hexTypeNum++;
                  a = true;
                } else {
                  c = g.keys.justPressed;
                  if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                    this.hexTypeNum = -1;
                  }
                }
              }
              c = false;
              if (a) {
                if (this.hexTypeNum > 5) {
                  this.hexTypeNum = -1;
                  c = true;
                  this.hexTypeLine.set_visible(false);
                } else {
                  if (this.hexTypeNum < 0) {
                    this.hexTypeNum = 0;
                  } else if (this.hexTypeNum > 5) {
                    this.hexTypeNum = 5;
                  }
                  this.centerHexTypeLine();
                  this.hexTypeLine.set_visible(true);
                }
                g.sound.play(y.sound("scrollMenu"), 0.6);
              }
              if (!c) {
                this.hexTypeLine.set_visible(Math.floor(this.hexTypeVisibleTimer * 2) % 2 == 0);
              }
            } else {
              a = 0;
              if (f == 0 && !e) {
                if (Ca.instance.get_UI_LEFT_P()) {
                  a = -1;
                } else if (Ca.instance.get_UI_RIGHT_P()) {
                  a = 1;
                }
              }
              if (k == 0 && !e && (!!Ca.instance.get_UI_UP_P() || !!Ca.instance.get_UI_DOWN_P())) {
                this.onModeColumn = !this.onModeColumn;
                this.modeBG.set_visible(this.onModeColumn);
                this.notesBG.set_visible(!this.onModeColumn);
              }
              if (a != 0) {
                if (this.onModeColumn) {
                  this.changeSelectionMode(a);
                } else {
                  this.changeSelectionNote(a);
                }
              }
              this.hexTypeLine.set_visible(false);
            }
            c = g.mouse;
            d = c._prevX != c.x || c._prevY != c.y || d;
            a = g.mouse._leftButton.current == 2 || h;
            if (d) {
              this.copyButton.set_alpha(0.6);
              this.pasteButton.set_alpha(0.6);
            }
            if (this.pointerOverlaps(this.copyButton)) {
              this.copyButton.set_alpha(1);
              if (a) {
                h = this.getShaderColor();
                e = c = false;
                if (e == null) {
                  e = true;
                }
                if (c == null) {
                  c = true;
                }
                c = c ? w.hex(h >> 24 & 255, 2) : "";
                kc.set_text((e ? "0x" : "") + c + w.hex(h >> 16 & 255, 2) + w.hex(h >> 8 & 255, 2) + w.hex(h & 255, 2));
                g.sound.play(y.sound("scrollMenu"), 0.6);
                yb.trace("copied: " + kc.get_text(), {
                  fileName: "source/options/NotesSubState.hx",
                  lineNumber: 339,
                  className: "options.NotesSubState",
                  methodName: "update"
                });
              }
              this.hexTypeNum = -1;
            } else if (this.pointerOverlaps(this.pasteButton)) {
              this.pasteButton.set_alpha(1);
              if (a) {
                h = w.replace(w.replace(w.trim(kc.get_text()).toUpperCase(), "#", ""), "0x", "");
                c = xb.fromString("#" + h);
                if (c != null && h.length == 6) {
                  this.setShaderColor(c);
                  g.sound.play(y.sound("scrollMenu"), 0.6);
                  this._storedColor = this.getShaderColor();
                  this.updateColors();
                } else {
                  g.sound.play(y.sound("cancelMenu"), 0.6);
                }
              }
              this.hexTypeNum = -1;
            }
            if (a) {
              this.hexTypeNum = -1;
              if (this.pointerOverlaps(this.modeNotes)) {
                this.modeNotes.forEachAlive(function (a) {
                  if (b.curSelectedMode != a.ID && b.pointerOverlaps(a)) {
                    b.modeBG.set_visible(b.notesBG.set_visible(false));
                    b.curSelectedMode = a.ID;
                    b.onModeColumn = true;
                    b.updateNotes();
                    g.sound.play(y.sound("scrollMenu"), 0.6);
                  }
                });
              } else if (this.pointerOverlaps(this.myNotes)) {
                this.myNotes.forEachAlive(function (a) {
                  if (b.curSelectedNote != a.ID && b.pointerOverlaps(a)) {
                    b.modeBG.set_visible(b.notesBG.set_visible(false));
                    b.curSelectedNote = a.ID;
                    b.onModeColumn = false;
                    b.bigNote.rgbShader.parent = Pa.globalRgbShaders[a.ID];
                    b.bigNote.shader = Pa.globalRgbShaders[a.ID].shader;
                    b.updateNotes();
                    g.sound.play(y.sound("scrollMenu"), 0.6);
                  }
                });
              } else if (this.pointerOverlaps(this.colorWheel)) {
                this._storedColor = this.getShaderColor();
                this.holdingOnObj = this.colorWheel;
              } else if (this.pointerOverlaps(this.colorGradient)) {
                this._storedColor = this.getShaderColor();
                this.holdingOnObj = this.colorGradient;
              } else if (this.pointerOverlaps(this.colorPalette)) {
                this.setShaderColor(this.colorPalette.get_pixels().getPixel32((this.pointerX() - this.colorPalette.x) / this.colorPalette.scale.x | 0, (this.pointerY() - this.colorPalette.y) / this.colorPalette.scale.y | 0));
                g.sound.play(y.sound("scrollMenu"), 0.6);
                this.updateColors();
              } else if (this.pointerOverlaps(this.skinNote)) {
                this.onPixel = !this.onPixel;
                this.spawnNotes();
                this.updateNotes(true);
                g.sound.play(y.sound("scrollMenu"), 0.6);
              } else if (this.pointerY() >= this.hexTypeLine.y && this.pointerY() < this.hexTypeLine.y + this.hexTypeLine.get_height() && Math.abs(this.pointerX() - 1000) <= 84) {
                h = this.hexTypeNum = 0;
                for (c = this.alphabetHex.letters; h < c.length;) {
                  e = c[h];
                  ++h;
                  if (e.x - e.offset.x + e.get_width() <= this.pointerX()) {
                    this.hexTypeNum++;
                  } else {
                    break;
                  }
                }
                if (this.hexTypeNum > 5) {
                  this.hexTypeNum = 5;
                }
                this.hexTypeLine.set_visible(true);
                this.centerHexTypeLine();
              } else {
                this.holdingOnObj = null;
              }
            }
            if (this.holdingOnObj != null) {
              if (g.mouse._leftButton.current == -1 || Ca.instance.controllerMode && Ca.instance.justReleased("accept")) {
                this.holdingOnObj = null;
                this._storedColor = this.getShaderColor();
                this.updateColors();
                g.sound.play(y.sound("scrollMenu"), 0.6);
              } else if (d || a) {
                if (this.holdingOnObj == this.colorGradient) {
                  h = (this.pointerY() - this.colorGradient.y) / this.colorGradient.get_height();
                  h = h < 0 ? 0 : h;
                  a = 1 - (h > 1 ? 1 : h);
                  this._storedColor &= 16777215;
                  h = this._storedColor |= 16777216;
                  if (Math.max((h >> 16 & 255) / 255, Math.max((h >> 8 & 255) / 255, (h & 255) / 255)) == 0) {
                    d = xb._new();
                    c = 1;
                    if (c == null) {
                      c = 1;
                    }
                    h = Math.round(a * 255);
                    d = d & -16711681 | (h > 255 ? 255 : h < 0 ? 0 : h) << 16;
                    h = Math.round(a * 255);
                    d = d & -65281 | (h > 255 ? 255 : h < 0 ? 0 : h) << 8;
                    h = Math.round(a * 255);
                    d = d & -256 | (h > 255 ? 255 : h < 0 ? 0 : h);
                    h = Math.round(c * 255);
                    this.setShaderColor(d & 16777215 | (h > 255 ? 255 : h < 0 ? 0 : h) << 24);
                  } else {
                    c = xb.get_hue(this._storedColor);
                    h = this._storedColor;
                    this.setShaderColor(xb.fromHSB(c, (Math.max((h >> 16 & 255) / 255, Math.max((h >> 8 & 255) / 255, (h & 255) / 255)) - Math.min((h >> 16 & 255) / 255, Math.min((h >> 8 & 255) / 255, (h & 255) / 255))) / Math.max((h >> 16 & 255) / 255, Math.max((h >> 8 & 255) / 255, (h & 255) / 255)), a));
                  }
                  this.updateColors(this._storedColor);
                } else if (this.holdingOnObj == this.colorWheel) {
                  d = this.colorWheel.x + this.colorWheel.get_width() / 2;
                  c = this.colorWheel.y + this.colorWheel.get_height() / 2;
                  if (c == null) {
                    c = 0;
                  }
                  if (d == null) {
                    d = 0;
                  }
                  h = c;
                  if (h == null) {
                    h = 0;
                  }
                  if (d == null) {
                    d = 0;
                  }
                  c = h;
                  if (c == null) {
                    c = 0;
                  }
                  if (d == null) {
                    d = 0;
                  }
                  h = fa.pool.get().set(d, c);
                  h._inPool = false;
                  a = this.pointerFlxPoint();
                  d = h.x - a.x;
                  c = h.y - a.y;
                  e = true;
                  if (e == null) {
                    e = false;
                  }
                  d = $b.wrap($b.wrap((e ? 180 / Math.PI * Math.atan2(c, d) : Math.atan2(c, d)) | 0, 0, 360) - 90, 0, 360);
                  e = h.x - a.x;
                  a = h.y - a.y;
                  c = h;
                  if (c._weak) {
                    c.put();
                  }
                  h = Math.sqrt(e * e + a * a) / this.colorWheel.get_width() * 2;
                  h = h < 0 ? 0 : h;
                  a = h > 1 ? 1 : h;
                  if (a != 0) {
                    h = this._storedColor;
                    this.setShaderColor(xb.fromHSB(d, a, Math.max((h >> 16 & 255) / 255, Math.max((h >> 8 & 255) / 255, (h & 255) / 255))));
                  } else {
                    h = this._storedColor;
                    e = Math.max((h >> 16 & 255) / 255, Math.max((h >> 8 & 255) / 255, (h & 255) / 255));
                    h = this._storedColor;
                    a = Math.max((h >> 16 & 255) / 255, Math.max((h >> 8 & 255) / 255, (h & 255) / 255));
                    h = this._storedColor;
                    f = Math.max((h >> 16 & 255) / 255, Math.max((h >> 8 & 255) / 255, (h & 255) / 255));
                    d = xb._new();
                    c = 1;
                    if (c == null) {
                      c = 1;
                    }
                    h = Math.round(e * 255);
                    d = d & -16711681 | (h > 255 ? 255 : h < 0 ? 0 : h) << 16;
                    h = Math.round(a * 255);
                    d = d & -65281 | (h > 255 ? 255 : h < 0 ? 0 : h) << 8;
                    h = Math.round(f * 255);
                    d = d & -256 | (h > 255 ? 255 : h < 0 ? 0 : h);
                    h = Math.round(c * 255);
                    this.setShaderColor(d & 16777215 | (h > 255 ? 255 : h < 0 ? 0 : h) << 24);
                  }
                  this.updateColors();
                }
              }
            } else if (Ca.instance.get_RESET() && this.hexTypeNum < 0) {
              c = g.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(16, c.status) || g.gamepads.anyHasState(4, 2)) {
                h = this.myNotes.members[this.curSelectedNote].rgbShader;
                d = this.onPixel ? C.defaultData.arrowRGBPixel[this.curSelectedNote][0] : C.defaultData.arrowRGB[this.curSelectedNote][0];
                this.getShader().set_r(h.set_r(d));
                this.dataArray[this.curSelectedNote][0] = d;
                h = this.myNotes.members[this.curSelectedNote].rgbShader;
                d = this.onPixel ? C.defaultData.arrowRGBPixel[this.curSelectedNote][1] : C.defaultData.arrowRGB[this.curSelectedNote][1];
                this.getShader().set_g(h.set_g(d));
                this.dataArray[this.curSelectedNote][1] = d;
                h = this.myNotes.members[this.curSelectedNote].rgbShader;
                d = this.onPixel ? C.defaultData.arrowRGBPixel[this.curSelectedNote][2] : C.defaultData.arrowRGB[this.curSelectedNote][2];
                this.getShader().set_b(h.set_b(d));
                this.dataArray[this.curSelectedNote][2] = d;
              }
              this.setShaderColor(this.onPixel ? C.defaultData.arrowRGBPixel[this.curSelectedNote][this.curSelectedMode] : C.defaultData.arrowRGB[this.curSelectedNote][this.curSelectedMode]);
              g.sound.play(y.sound("cancelMenu"), 0.6);
              this.updateColors();
            }
          }
        },
        pointerOverlaps: function (a) {
          if (Ca.instance.controllerMode) {
            return g.overlap(this.controllerPointer, a);
          } else {
            return g.mouse.overlaps(a);
          }
        },
        pointerX: function () {
          if (Ca.instance.controllerMode) {
            return this.controllerPointer.x;
          } else {
            return g.mouse.x;
          }
        },
        pointerY: function () {
          if (Ca.instance.controllerMode) {
            return this.controllerPointer.y;
          } else {
            return g.mouse.y;
          }
        },
        pointerFlxPoint: function () {
          if (Ca.instance.controllerMode) {
            return this.controllerPointer.getScreenPosition();
          } else {
            return g.mouse.getScreenPosition();
          }
        },
        centerHexTypeLine: function () {
          if (this.hexTypeNum > 0) {
            var a = this.alphabetHex.letters[this.hexTypeNum - 1];
            this.hexTypeLine.set_x(a.x - a.offset.x + a.get_width());
          } else {
            a = this.alphabetHex.letters[0];
            this.hexTypeLine.set_x(a.x - a.offset.x);
          }
          a = this.hexTypeLine;
          a.set_x(a.x + this.hexTypeLine.get_width());
          this.hexTypeVisibleTimer = 0;
        },
        changeSelectionMode: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelectedMode += a;
          if (this.curSelectedMode < 0) {
            this.curSelectedMode = 2;
          }
          if (this.curSelectedMode >= 3) {
            this.curSelectedMode = 0;
          }
          this.modeBG.set_visible(true);
          this.notesBG.set_visible(false);
          this.updateNotes();
          g.sound.play(y.sound("scrollMenu"));
        },
        changeSelectionNote: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelectedNote += a;
          if (this.curSelectedNote < 0) {
            this.curSelectedNote = this.dataArray.length - 1;
          }
          if (this.curSelectedNote >= this.dataArray.length) {
            this.curSelectedNote = 0;
          }
          this.modeBG.set_visible(false);
          this.notesBG.set_visible(true);
          this.bigNote.rgbShader.parent = Pa.globalRgbShaders[this.curSelectedNote];
          this.bigNote.shader = Pa.globalRgbShaders[this.curSelectedNote].shader;
          this.updateNotes();
          g.sound.play(y.sound("scrollMenu"));
        },
        makeColorAlphabet: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          a = new Jb(a, b, "", true);
          a.set_alignment(Of.CENTERED);
          a.setScale(0.6);
          this.add(a);
          return a;
        },
        spawnNotes: function () {
          this.dataArray = this.onPixel ? C.data.arrowRGBPixel : C.data.arrowRGB;
          if (this.onPixel) {
            z.stageUI = "pixel";
          }
          this.modeNotes.forEachAlive(function (a) {
            a.kill();
            a.destroy();
          });
          this.myNotes.forEachAlive(function (a) {
            a.kill();
            a.destroy();
          });
          this.modeNotes.clear();
          this.myNotes.clear();
          if (this.skinNote != null) {
            this.remove(this.skinNote);
            this.skinNote.destroy();
          }
          if (this.bigNote != null) {
            this.remove(this.bigNote);
            this.bigNote.destroy();
          }
          var a = this.onPixel ? 160 : 17;
          this.skinNote = new G(48, 24).loadGraphic(y.image("noteColorMenu/" + (this.onPixel ? "note" : "notePixel")), true, a, a);
          this.skinNote.set_antialiasing(C.data.antialiasing);
          this.skinNote.setGraphicSize(68);
          this.skinNote.updateHitbox();
          this.skinNote.animation.add("anim", [0], 24, true);
          this.skinNote.animation.play("anim", true);
          if (!this.onPixel) {
            this.skinNote.set_antialiasing(false);
          }
          this.add(this.skinNote);
          a = this.onPixel ? 17 : 160;
          var b = new G(230, 100).loadGraphic(y.image("noteColorMenu/" + (this.onPixel ? "notePixel" : "note")), true, a, a);
          b.set_antialiasing(C.data.antialiasing);
          b.setGraphicSize(85);
          b.updateHitbox();
          b.animation.add("anim", [0], 24, true);
          b.animation.play("anim", true);
          b.ID = 0;
          if (this.onPixel) {
            b.set_antialiasing(false);
          }
          this.modeNotes.add(b);
          b = new G(330, 100).loadGraphic(y.image("noteColorMenu/" + (this.onPixel ? "notePixel" : "note")), true, a, a);
          b.set_antialiasing(C.data.antialiasing);
          b.setGraphicSize(85);
          b.updateHitbox();
          b.animation.add("anim", [1], 24, true);
          b.animation.play("anim", true);
          b.ID = 1;
          if (this.onPixel) {
            b.set_antialiasing(false);
          }
          this.modeNotes.add(b);
          b = new G(430, 100).loadGraphic(y.image("noteColorMenu/" + (this.onPixel ? "notePixel" : "note")), true, a, a);
          b.set_antialiasing(C.data.antialiasing);
          b.setGraphicSize(85);
          b.updateHitbox();
          b.animation.add("anim", [2], 24, true);
          b.animation.play("anim", true);
          b.ID = 2;
          if (this.onPixel) {
            b.set_antialiasing(false);
          }
          this.modeNotes.add(b);
          Pa.globalRgbShaders = [];
          a = 0;
          for (var c = this.dataArray.length; a < c;) {
            var d = a++;
            Pa.initializeGlobalRGBShader(d);
            b = new yg(150 + 480 / this.dataArray.length * d, 200, d, 0);
            b.useRGBShader = true;
            b.setGraphicSize(102);
            b.updateHitbox();
            b.ID = d;
            this.myNotes.add(b);
          }
          this.bigNote = new Pa(0, 0, null, false, true);
          this.bigNote.setPosition(250, 325);
          this.bigNote.setGraphicSize(250);
          this.bigNote.updateHitbox();
          this.bigNote.rgbShader.parent = Pa.globalRgbShaders[this.curSelectedNote];
          this.bigNote.shader = Pa.globalRgbShaders[this.curSelectedNote].shader;
          a = 0;
          for (c = Pa.colArray.length; a < c;) {
            d = a++;
            if (this.onPixel) {
              this.bigNote.animation.add("note" + d, [d + 4], 24, true);
            } else {
              this.bigNote.animation.addByPrefix("note" + d, Pa.colArray[d] + "0", 24, true);
            }
          }
          this.insert(this.members.indexOf(this.myNotes) + 1, this.bigNote);
          this._storedColor = this.getShaderColor();
          z.stageUI = "normal";
        },
        updateNotes: function (a) {
          if (a == null) {
            a = false;
          }
          for (var b = new wc(this.modeNotes.members, null); b.hasNext();) {
            var c = b.next();
            c.set_alpha(this.curSelectedMode == c.ID ? 1 : 0.6);
          }
          for (b = new wc(this.myNotes.members, null); b.hasNext();) {
            c = b.next();
            var d = this.curSelectedNote == c.ID ? "confirm" : "pressed";
            c.set_alpha(this.curSelectedNote == c.ID ? 1 : 0.6);
            if (c.animation._curAnim == null || c.animation._curAnim.name != d) {
              c.playAnim(d, true);
            }
            if (a) {
              c.animation._curAnim.finish();
            }
          }
          this.bigNote.animation.play("note" + this.curSelectedNote, true);
          this.updateColors();
        },
        updateColors: function (a) {
          var b = this.getShaderColor();
          a = a == null ? this.getShaderColor() : a;
          this.alphabetR.set_text(H.string(b >> 16 & 255));
          this.alphabetG.set_text(H.string(b >> 8 & 255));
          this.alphabetB.set_text(H.string(b & 255));
          var c = this.alphabetHex;
          var d = false;
          var e = false;
          if (e == null) {
            e = true;
          }
          if (d == null) {
            d = true;
          }
          d = d ? w.hex(b >> 24 & 255, 2) : "";
          c.set_text((e ? "0x" : "") + d + w.hex(b >> 16 & 255, 2) + w.hex(b >> 8 & 255, 2) + w.hex(b & 255, 2));
          c = 0;
          for (e = this.alphabetHex.letters; c < e.length;) {
            d = e[c];
            ++c;
            d.set_color(b);
          }
          this.colorWheel.set_color(xb.fromHSB(0, 0, Math.max((b >> 16 & 255) / 255, Math.max((b >> 8 & 255) / 255, (b & 255) / 255))));
          this.colorWheelSelector.setPosition(this.colorWheel.x + this.colorWheel.get_width() / 2, this.colorWheel.y + this.colorWheel.get_height() / 2);
          if (Math.max((a >> 16 & 255) / 255, Math.max((a >> 8 & 255) / 255, (a & 255) / 255)) != 0) {
            c = xb.get_hue(a) * Math.PI / 180;
            e = this.colorWheelSelector;
            e.set_x(e.x + Math.sin(c) * this.colorWheel.get_width() / 2 * ((Math.max((a >> 16 & 255) / 255, Math.max((a >> 8 & 255) / 255, (a & 255) / 255)) - Math.min((a >> 16 & 255) / 255, Math.min((a >> 8 & 255) / 255, (a & 255) / 255))) / Math.max((a >> 16 & 255) / 255, Math.max((a >> 8 & 255) / 255, (a & 255) / 255))));
            e = this.colorWheelSelector;
            e.set_y(e.y - Math.cos(c) * this.colorWheel.get_height() / 2 * ((Math.max((a >> 16 & 255) / 255, Math.max((a >> 8 & 255) / 255, (a & 255) / 255)) - Math.min((a >> 16 & 255) / 255, Math.min((a >> 8 & 255) / 255, (a & 255) / 255))) / Math.max((a >> 16 & 255) / 255, Math.max((a >> 8 & 255) / 255, (a & 255) / 255))));
          }
          this.colorGradientSelector.set_y(this.colorGradient.y + this.colorGradient.get_height() * (1 - Math.max((b >> 16 & 255) / 255, Math.max((b >> 8 & 255) / 255, (b & 255) / 255))));
          a = this.myNotes.members[this.curSelectedNote].rgbShader;
          switch (this.curSelectedMode) {
            case 0:
              this.getShader().set_r(a.set_r(b));
              break;
            case 1:
              this.getShader().set_g(a.set_g(b));
              break;
            case 2:
              this.getShader().set_b(a.set_b(b));
          }
        },
        setShaderColor: function (a) {
          this.dataArray[this.curSelectedNote][this.curSelectedMode] = a;
        },
        getShaderColor: function () {
          return this.dataArray[this.curSelectedNote][this.curSelectedMode];
        },
        getShader: function () {
          return Pa.globalRgbShaders[this.curSelectedNote];
        },
        __class__: Ym
      });
      function pc(a, b, c, d, e) {
        if (d == null) {
          d = "bool";
        }
        if (b == null) {
          b = "";
        }
        this.defaultKeys = this.keys = null;
        this.name = "Unknown";
        this.description = "";
        this.displayFormat = "%v";
        this.decimals = 1;
        this.minValue = this.maxValue = null;
        this.changeValue = 1;
        this.options = null;
        this.curOption = 0;
        this.variable = this.defaultValue = null;
        this.scrollSpeed = 50;
        this.type = "bool";
        this.onChange = null;
        this.name = a;
        this.description = b;
        this.variable = c;
        this.type = d;
        this.options = e;
        if (this.get_type() != "keybind") {
          this.defaultValue = ma.getProperty(C.defaultData, c);
        }
        switch (d) {
          case "bool":
            if (this.defaultValue == null) {
              this.defaultValue = false;
            }
            break;
          case "float":
          case "int":
            if (this.defaultValue == null) {
              this.defaultValue = 0;
            }
            break;
          case "keybind":
            this.defaultValue = "";
            this.defaultKeys = {
              gamepad: "NONE",
              keyboard: "NONE"
            };
            this.keys = {
              gamepad: "NONE",
              keyboard: "NONE"
            };
            break;
          case "percent":
            if (this.defaultValue == null) {
              this.defaultValue = 1;
            }
            this.displayFormat = "%v%";
            this.changeValue = 0.01;
            this.minValue = 0;
            this.maxValue = 1;
            this.scrollSpeed = 0.5;
            this.decimals = 2;
            break;
          case "string":
            if (this.defaultValue == null) {
              this.defaultValue = "";
            }
            if (e.length > 0) {
              this.defaultValue = e[0];
            }
        }
        try {
          if (this.getValue() == null) {
            this.setValue(this.defaultValue);
          }
          if (d == "string") {
            var f = e.indexOf(this.getValue());
            if (f > -1) {
              this.curOption = f;
            }
          }
        } catch (k) {}
      }
      h["options.Option"] = pc;
      pc.__name__ = "options.Option";
      pc.prototype = {
        change: function () {
          if (this.onChange != null) {
            this.onChange();
          }
        },
        getValue: function () {
          var a = ma.getProperty(C.data, this.variable);
          if (this.get_type() == "keybind") {
            if (Ca.instance.controllerMode) {
              return a.gamepad;
            } else {
              return a.keyboard;
            }
          } else {
            return a;
          }
        },
        setValue: function (a) {
          if (this.get_type() == "keybind") {
            var b = ma.getProperty(C.data, this.variable);
            if (Ca.instance.controllerMode) {
              b.gamepad = a;
            } else {
              b.keyboard = a;
            }
          } else {
            ma.setProperty(C.data, this.variable, a);
          }
        },
        set_text: function (a) {
          if (a == null) {
            a = "";
          }
          if (this.child != null) {
            this.child.set_text(a);
          }
          return null;
        },
        get_type: function () {
          var a = "bool";
          switch (w.trim(this.type.toLowerCase())) {
            case "fl":
              a = "float";
              break;
            case "integer":
              a = "int";
              break;
            case "key":
            case "keybind":
              a = "keybind";
              break;
            case "str":
              a = "string";
              break;
            case "float":
            case "int":
            case "percent":
            case "string":
              a = this.type;
          }
          return this.type = a;
        },
        __class__: pc,
        __properties__: {
          set_text: "set_text",
          get_type: "get_type"
        }
      };
      function kd(a, b) {
        this.options = ["Controls", "Adjust Delay and Combo", "Graphics", "Visuals and UI", "Gameplay"];
        U.call(this, a, b);
      }
      h["options.OptionsState"] = kd;
      kd.__name__ = "options.OptionsState";
      kd.__super__ = U;
      kd.prototype = q(U.prototype, {
        openSelectedSubstate: function (a) {
          switch (a) {
            case "Adjust Delay and Combo":
              U.switchState(new Xm());
              break;
            case "Controls":
              this.openSubState(new fh());
              break;
            case "Gameplay":
              this.openSubState(new Vm());
              break;
            case "Graphics":
              this.openSubState(new Wm());
              break;
            case "Note Colors":
              this.openSubState(new Ym());
              break;
            case "Visuals and UI":
              this.openSubState(new Zm());
          }
        },
        create: function () {
          var a = new G().loadGraphic(y.image("menuDesat"));
          a.set_antialiasing(C.data.antialiasing);
          a.set_color(-1412611);
          a.updateHitbox();
          a.set_x((g.width - a.get_width()) / 2);
          a.set_y((g.height - a.get_height()) / 2);
          this.add(a);
          this.grpOptions = new Ra();
          this.add(this.grpOptions);
          a = 0;
          for (var b = this.options.length; a < b;) {
            var c = a++;
            var d = new Jb(0, 0, this.options[c], true);
            d.set_x((g.width - d.get_width()) / 2);
            d.set_y((g.height - d.get_height()) / 2);
            d.set_y(d.y + ((c - this.options.length / 2) * 100 + 50));
            this.grpOptions.add(d);
          }
          this.selectorLeft = new Jb(0, 0, ">", true);
          this.add(this.selectorLeft);
          this.selectorRight = new Jb(0, 0, "<", true);
          this.add(this.selectorRight);
          this.changeSelection();
          C.saveSettings();
          U.prototype.create.call(this);
        },
        closeSubState: function () {
          U.prototype.closeSubState.call(this);
          C.saveSettings();
        },
        update: function (a) {
          U.prototype.update.call(this, a);
          if (this.get_controls().get_UI_UP_P()) {
            this.changeSelection(-1);
          }
          if (this.get_controls().get_UI_DOWN_P()) {
            this.changeSelection(1);
          }
          if (this.get_controls().get_BACK()) {
            g.sound.play(y.sound("cancelMenu"));
            if (kd.onPlayState) {
              Ae.loadDirectory(z.SONG);
              U.switchState(qc.getNextState(new z(), false));
              g.sound.music.set_volume(0);
            } else {
              U.switchState(new Kd());
            }
          } else if (this.get_controls().get_ACCEPT()) {
            this.openSelectedSubstate(this.options[kd.curSelected]);
          }
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          kd.curSelected += a;
          if (kd.curSelected < 0) {
            kd.curSelected = this.options.length - 1;
          }
          if (kd.curSelected >= this.options.length) {
            kd.curSelected = 0;
          }
          for (var b = a = 0, c = this.grpOptions.members; b < c.length;) {
            var d = c[b];
            ++b;
            d.targetY = a - kd.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
              this.selectorLeft.set_x(d.x - 63);
              this.selectorLeft.set_y(d.y);
              this.selectorRight.set_x(d.x + d.get_width() + 15);
              this.selectorRight.set_y(d.y);
            }
          }
          g.sound.play(y.sound("scrollMenu"));
        },
        destroy: function () {
          C.loadPrefs();
          U.prototype.destroy.call(this);
        },
        __class__: kd
      });
      function Zm() {
        this.changedMusic = false;
        this.noteY = 90;
        this.notesTween = [];
        this.noteOptionID = -1;
        this.title = "Visuals and UI";
        this.rpcTitle = "Visuals & UI Settings Menu";
        this.notes = new Ra();
        for (var a = 0, b = Pa.colArray.length; a < b;) {
          var c = a++;
          var d = new yg(370 + 560 / Pa.colArray.length * c, -200, c, 0);
          d.centerOffsets();
          var e = d.origin;
          c = d.frameWidth * 0.5;
          var f = d.frameHeight * 0.5;
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = 0;
          }
          e.set_x(c);
          e.set_y(f);
          d.playAnim("static");
          this.notes.add(d);
        }
        a = null;
        if (a == null) {
          a = "assets/shared/";
        }
        a = w.trim(a);
        if (!w.endsWith(a, "/")) {
          a += "/";
        }
        if (!w.startsWith(a, "assets/")) {
          a = "assets/" + a;
        }
        d = [];
        e = [];
        e.push(a + "images/noteSkins/list.txt");
        a += "images/noteSkins/list.txt";
        if (e.indexOf(a) != -1) {
          M.remove(e, a);
          e.splice(0, 0, a);
        }
        for (a = 0; a < e.length;) {
          b = e[a];
          ++a;
          c = null;
          if (W.exists(b)) {
            c = W.getText(b);
          }
          if (c != null) {
            f = w.trim(c).split("\n");
            b = 0;
            for (var g = f.length; b < g;) {
              c = b++;
              f[c] = w.trim(f[c]);
            }
            b = f;
          } else {
            b = [];
          }
          for (c = 0; c < b.length;) {
            f = b[c];
            ++c;
            if (d.indexOf(f) == -1 && f.length > 0) {
              d.push(f);
            }
          }
        }
        a = d;
        if (a.length > 0) {
          if (a.indexOf(C.data.noteSkin) == -1) {
            C.data.noteSkin = C.defaultData.noteSkin;
          }
          a.splice(0, 0, C.defaultData.noteSkin);
          a = new pc("Note Skins:", "Select your prefered Note skin.", "noteSkin", "string", a);
          this.addOption(a);
          a.onChange = l(this, this.onChangeNoteSkin);
          this.noteOptionID = this.optionsArray.length - 1;
        }
        a = null;
        if (a == null) {
          a = "assets/shared/";
        }
        a = w.trim(a);
        if (!w.endsWith(a, "/")) {
          a += "/";
        }
        if (!w.startsWith(a, "assets/")) {
          a = "assets/" + a;
        }
        d = [];
        e = [];
        e.push(a + "images/noteSplashes/list.txt");
        a += "images/noteSplashes/list.txt";
        if (e.indexOf(a) != -1) {
          M.remove(e, a);
          e.splice(0, 0, a);
        }
        for (a = 0; a < e.length;) {
          b = e[a];
          ++a;
          c = null;
          if (W.exists(b)) {
            c = W.getText(b);
          }
          if (c != null) {
            f = w.trim(c).split("\n");
            b = 0;
            for (g = f.length; b < g;) {
              c = b++;
              f[c] = w.trim(f[c]);
            }
            b = f;
          } else {
            b = [];
          }
          for (c = 0; c < b.length;) {
            f = b[c];
            ++c;
            if (d.indexOf(f) == -1 && f.length > 0) {
              d.push(f);
            }
          }
        }
        a = d;
        if (a.length > 0) {
          if (a.indexOf(C.data.splashSkin) == -1) {
            C.data.splashSkin = C.defaultData.splashSkin;
          }
          a.splice(0, 0, C.defaultData.splashSkin);
          a = new pc("Note Splashes:", "Select your prefered Note Splash variation or turn it off.", "splashSkin", "string", a);
          this.addOption(a);
        }
        a = new pc("Note Splash Opacity", "How much transparent should the Note Splashes be.", "splashAlpha", "percent");
        a.scrollSpeed = 1.6;
        a.minValue = 0;
        a.maxValue = 1;
        a.changeValue = 0.1;
        a.decimals = 1;
        this.addOption(a);
        a = new pc("Hide HUD", "If checked, hides most HUD elements.", "hideHud", "bool");
        this.addOption(a);
        a = new pc("Time Bar:", "What should the Time Bar display?", "timeBarType", "string", ["Time Left", "Time Elapsed", "Song Name", "Disabled"]);
        this.addOption(a);
        a = new pc("Flashing Lights", "Uncheck this if you're sensitive to flashing lights!", "flashing", "bool");
        this.addOption(a);
        a = new pc("Camera Zooms", "If unchecked, the camera won't zoom in on a beat hit.", "camZooms", "bool");
        this.addOption(a);
        a = new pc("Score Text Zoom on Hit", "If unchecked, disables the Score text zooming\neverytime you hit a note.", "scoreZoom", "bool");
        this.addOption(a);
        a = new pc("Health Bar Opacity", "How much transparent should the health bar and icons be.", "healthBarAlpha", "percent");
        a.scrollSpeed = 1.6;
        a.minValue = 0;
        a.maxValue = 1;
        a.changeValue = 0.1;
        a.decimals = 1;
        this.addOption(a);
        a = new pc("FPS Counter", "If unchecked, hides FPS Counter.", "showFPS", "bool");
        this.addOption(a);
        a.onChange = l(this, this.onChangeFPSCounter);
        a = new pc("Pause Screen Song:", "What song do you prefer for the Pause Screen?", "pauseMusic", "string", ["None", "Breakfast", "Tea Time"]);
        this.addOption(a);
        a.onChange = l(this, this.onChangePauseMusic);
        a = new pc("Combo Stacking", "If unchecked, Ratings and Combo won't stack, saving on System Memory and making them easier to read", "comboStacking", "bool");
        this.addOption(a);
        xe.call(this);
        this.add(this.notes);
      }
      h["options.VisualsUISubState"] = Zm;
      Zm.__name__ = "options.VisualsUISubState";
      Zm.__super__ = xe;
      Zm.prototype = q(xe.prototype, {
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          xe.prototype.changeSelection.call(this, a);
          if (!(this.noteOptionID < 0)) {
            a = 0;
            for (var b = Pa.colArray.length; a < b;) {
              var c = a++;
              var d = this.notes.members[c];
              if (this.notesTween[c] != null) {
                this.notesTween[c].cancel();
              }
              this.notesTween[c] = this.curSelected == this.noteOptionID ? ka.tween(d, {
                y: this.noteY
              }, Math.abs(d.y / (200 + this.noteY)) / 3, {
                ease: va.quadInOut
              }) : ka.tween(d, {
                y: -200
              }, Math.abs(d.y / (200 + this.noteY)) / 3, {
                ease: va.quadInOut
              });
            }
          }
        },
        onChangePauseMusic: function () {
          if (C.data.pauseMusic == "None") {
            g.sound.music.set_volume(0);
          } else {
            var a = g.sound;
            var b = C.data.pauseMusic;
            var c = new sa("[~&\\\\;:<>#]", "");
            var d = new sa("[.,'\"%?!]", "");
            b = c.split(w.replace(b, " ", "-")).join("-");
            d = y.returnSound("music", d.split(b).join("").toLowerCase(), null);
            a.playMusic(d);
          }
          this.changedMusic = true;
        },
        onChangeNoteSkin: function () {
          var a = this;
          this.notes.forEachAlive(function (b) {
            a.changeNoteSkin(b);
            b.centerOffsets();
            var c = b.origin;
            var d = b.frameWidth * 0.5;
            b = b.frameHeight * 0.5;
            if (b == null) {
              b = 0;
            }
            if (d == null) {
              d = 0;
            }
            c.set_x(d);
            c.set_y(b);
          });
        },
        changeNoteSkin: function (a) {
          var b = Pa.defaultNoteSkin;
          var c = b + Pa.getNoteSkinPostfix();
          if (y.fileExists("images/" + c + ".png", "IMAGE")) {
            b = c;
          }
          a.set_texture(b);
          a.reloadNote();
          a.playAnim("static");
        },
        destroy: function () {
          if (this.changedMusic && !kd.onPlayState) {
            var a = g.sound;
            var b = y.returnSound("music", "freakyMenu", null);
            a.playMusic(b, 1, true);
          }
          xe.prototype.destroy.call(this);
        },
        onChangeFPSCounter: function () {
          if (Ub.fpsVar != null) {
            Ub.fpsVar.set_visible(C.data.showFPS);
          }
        },
        __class__: Zm
      });
      function Vc(a) {
        Vc.$name = a;
        bb.call(this);
        this.set_cameras([g.cameras.list[g.cameras.list.length - 1]]);
      }
      h["psychlua.CustomSubstate"] = Vc;
      Vc.__name__ = "psychlua.CustomSubstate";
      Vc.openCustomSubstate = function (a, b) {
        if (b == null) {
          b = false;
        }
        if (b) {
          g.camera.set_followLerp(0);
          z.instance.persistentUpdate = false;
          z.instance.persistentDraw = true;
          z.instance.paused = true;
          if (g.sound.music != null) {
            g.sound.music.pause();
            z.instance.vocals.pause();
          }
        }
        z.instance.openSubState(new Vc(a));
        z.instance.setOnHScript("customSubstate", Vc.instance);
        z.instance.setOnHScript("customSubstateName", a);
      };
      Vc.closeCustomSubstate = function () {
        if (Vc.instance != null) {
          z.instance.closeSubState();
          Vc.instance = null;
          return true;
        } else {
          return false;
        }
      };
      Vc.insertToCustomSubstate = function (a, b) {
        if (b == null) {
          b = -1;
        }
        if (Vc.instance != null && (a = ta.__cast(z.instance.variables.h[a], hc), a != null)) {
          if (b < 0) {
            Vc.instance.add(a);
          } else {
            Vc.instance.insert(b, a);
          }
          return true;
        } else {
          return false;
        }
      };
      Vc.__super__ = bb;
      Vc.prototype = q(bb.prototype, {
        create: function () {
          Vc.instance = this;
          z.instance.callOnScripts("onCustomSubstateCreate", [Vc.$name]);
          bb.prototype.create.call(this);
          z.instance.callOnScripts("onCustomSubstateCreatePost", [Vc.$name]);
        },
        update: function (a) {
          z.instance.callOnScripts("onCustomSubstateUpdate", [Vc.$name, a]);
          bb.prototype.update.call(this, a);
          z.instance.callOnScripts("onCustomSubstateUpdatePost", [Vc.$name, a]);
        },
        destroy: function () {
          z.instance.callOnScripts("onCustomSubstateDestroy", [Vc.$name]);
          Vc.$name = "unnamed";
          z.instance.setOnHScript("customSubstate", null);
          z.instance.setOnHScript("customSubstateName", Vc.$name);
          bb.prototype.destroy.call(this);
        },
        __class__: Vc
      });
      function Ib() {}
      h["psychlua.LuaUtils"] = Ib;
      Ib.__name__ = "psychlua.LuaUtils";
      Ib.setVarInArray = function (a, b, c, d) {
        if (d == null) {
          d = false;
        }
        var e = b.split("[");
        if (e.length > 1) {
          b = null;
          if (Object.prototype.hasOwnProperty.call(z.instance.variables.h, e[0])) {
            a = z.instance.variables.h[e[0]];
            if (a != null) {
              b = a;
            }
          } else {
            b = ma.getProperty(a, e[0]);
          }
          a = 1;
          for (d = e.length; a < d;) {
            var f = a++;
            var g = M.substr(e[f], 0, e[f].length - 1);
            if (f >= e.length - 1) {
              b[g] = c;
            } else {
              b = b[g];
            }
          }
          return b;
        }
        if (d && Ib.isMap(a)) {
          a.set(b, c);
          return c;
        }
        if (Object.prototype.hasOwnProperty.call(z.instance.variables.h, b)) {
          return z.instance.variables.h[b] = c;
        }
        ma.setProperty(a, b, c);
        return c;
      };
      Ib.getVarInArray = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        var d = b.split("[");
        if (d.length > 1) {
          b = null;
          if (Object.prototype.hasOwnProperty.call(z.instance.variables.h, d[0])) {
            c = z.instance.variables.h[d[0]];
            if (c != null) {
              b = c;
            }
          } else {
            b = ma.getProperty(a, d[0]);
          }
          a = 1;
          for (c = d.length; a < c;) {
            var e = a++;
            e = M.substr(d[e], 0, d[e].length - 1);
            b = b[e];
          }
          return b;
        }
        if (c && Ib.isMap(a)) {
          return a.get(b);
        } else if (Object.prototype.hasOwnProperty.call(z.instance.variables.h, b) && (c = z.instance.variables.h[b], c != null)) {
          return c;
        } else {
          return ma.getProperty(a, b);
        }
      };
      Ib.isMap = function (a) {
        if (a.exists != null && a.keyValueIterator != null) {
          return true;
        } else {
          return false;
        }
      };
      Ib.getPropertyLoop = function (a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = true;
        }
        if (b == null) {
          b = true;
        }
        b = Ib.getObjectDirectly(a[0], b);
        var e = a.length;
        if (c) {
          e = a.length - 1;
        }
        for (c = 1; c < e;) {
          var f = c++;
          b = Ib.getVarInArray(b, a[f], d);
        }
        return b;
      };
      Ib.getObjectDirectly = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        switch (a) {
          case "game":
          case "instance":
          case "this":
            return z.instance;
          default:
            b = z.instance.getLuaObject(a, b);
            if (b == null) {
              b = Ib.getVarInArray(z.instance.isDead ? Kc.instance : z.instance, a, c);
            }
            return b;
        }
      };
      function rp() {
        this.hue = 0;
        this.shader = new $m();
        this.shader.uTime.value = [0, 0, 0];
        this.shader.awesomeOutline.value = [false];
      }
      h["shaders.ColorSwap"] = rp;
      rp.__name__ = "shaders.ColorSwap";
      rp.prototype = {
        set_hue: function (a) {
          this.hue = a;
          return this.shader.uTime.value[0] = this.hue;
        },
        __class__: rp,
        __properties__: {
          set_hue: "set_hue"
        }
      };
      function $m() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\n\t\tuniform vec3 uTime;\n\t\tuniform bool awesomeOutline;\n\n\t\tconst float offset = 1.0 / 128.0;\n\t\tvec3 normalizeColor(vec3 color)\n\t\t{\n\t\t\treturn vec3(\n\t\t\t\tcolor[0] / 255.0,\n\t\t\t\tcolor[1] / 255.0,\n\t\t\t\tcolor[2] / 255.0\n\t\t\t);\n\t\t}\n\n\t\tvec3 rgb2hsv(vec3 c)\n\t\t{\n\t\t\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\t\t\tvec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n\t\t\tvec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n\t\t\tfloat d = q.x - min(q.w, q.y);\n\t\t\tfloat e = 1.0e-10;\n\t\t\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n\t\t}\n\n\t\tvec3 hsv2rgb(vec3 c)\n\t\t{\n\t\t\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\t\t\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\t\t\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n\t\t}\n\n\t\tvoid main()\n\t\t{\n\t\t\tvec4 color = flixel_texture2D(bitmap, openfl_TextureCoordv);\n\n\t\t\tvec4 swagColor = vec4(rgb2hsv(vec3(color[0], color[1], color[2])), color[3]);\n\n\t\t\t// [0] is the hue???\n\t\t\tswagColor[0] = swagColor[0] + uTime[0];\n\t\t\tswagColor[1] = swagColor[1] + uTime[1];\n\t\t\tswagColor[2] = swagColor[2] * (1.0 + uTime[2]);\n\t\t\t\n\t\t\tif(swagColor[1] < 0.0)\n\t\t\t{\n\t\t\t\tswagColor[1] = 0.0;\n\t\t\t}\n\t\t\telse if(swagColor[1] > 1.0)\n\t\t\t{\n\t\t\t\tswagColor[1] = 1.0;\n\t\t\t}\n\n\t\t\tcolor = vec4(hsv2rgb(vec3(swagColor[0], swagColor[1], swagColor[2])), swagColor[3]);\n\n\t\t\tif (awesomeOutline)\n\t\t\t{\n\t\t\t\t // Outline bullshit?\n\t\t\t\tvec2 size = vec2(3, 3);\n\n\t\t\t\tif (color.a <= 0.5) {\n\t\t\t\t\tfloat w = size.x / openfl_TextureSize.x;\n\t\t\t\t\tfloat h = size.y / openfl_TextureSize.y;\n\t\t\t\t\t\n\t\t\t\t\tif (flixel_texture2D(bitmap, vec2(openfl_TextureCoordv.x + w, openfl_TextureCoordv.y)).a != 0.\n\t\t\t\t\t|| flixel_texture2D(bitmap, vec2(openfl_TextureCoordv.x - w, openfl_TextureCoordv.y)).a != 0.\n\t\t\t\t\t|| flixel_texture2D(bitmap, vec2(openfl_TextureCoordv.x, openfl_TextureCoordv.y + h)).a != 0.\n\t\t\t\t\t|| flixel_texture2D(bitmap, vec2(openfl_TextureCoordv.x, openfl_TextureCoordv.y - h)).a != 0.)\n\t\t\t\t\t\tcolor = vec4(1.0, 1.0, 1.0, 1.0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tgl_FragColor = color;\n\n\t\t\t/* \n\t\t\tif (color.a > 0.5)\n\t\t\t\tgl_FragColor = color;\n\t\t\telse\n\t\t\t{\n\t\t\t\tfloat a = flixel_texture2D(bitmap, vec2(openfl_TextureCoordv + offset, openfl_TextureCoordv.y)).a +\n\t\t\t\t\t\t  flixel_texture2D(bitmap, vec2(openfl_TextureCoordv, openfl_TextureCoordv.y - offset)).a +\n\t\t\t\t\t\t  flixel_texture2D(bitmap, vec2(openfl_TextureCoordv - offset, openfl_TextureCoordv.y)).a +\n\t\t\t\t\t\t  flixel_texture2D(bitmap, vec2(openfl_TextureCoordv, openfl_TextureCoordv.y + offset)).a;\n\t\t\t\tif (color.a < 1.0 && a > 0.0)\n\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 0.8);\n\t\t\t\telse\n\t\t\t\t\tgl_FragColor = color;\n\t\t\t} */\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\t\tif (openfl_HasColorTransform) {\n\t\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\t\t\t}\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        $d.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["shaders.ColorSwapShader"] = $m;
      $m.__name__ = "shaders.ColorSwapShader";
      $m.__super__ = $d;
      $m.prototype = q($d.prototype, {
        __class__: $m
      });
      function fm() {
        this.shader = new an();
        this.set_r(-65536);
        this.set_g(-16711936);
        this.set_b(-16776961);
        this.set_mult(1);
      }
      h["shaders.RGBPalette"] = fm;
      fm.__name__ = "shaders.RGBPalette";
      fm.prototype = {
        set_r: function (a) {
          this.r = a;
          this.shader.r.value = [(a >> 16 & 255) / 255, (a >> 8 & 255) / 255, (a & 255) / 255];
          return a;
        },
        set_g: function (a) {
          this.g = a;
          this.shader.g.value = [(a >> 16 & 255) / 255, (a >> 8 & 255) / 255, (a & 255) / 255];
          return a;
        },
        set_b: function (a) {
          this.b = a;
          this.shader.b.value = [(a >> 16 & 255) / 255, (a >> 8 & 255) / 255, (a & 255) / 255];
          return a;
        },
        set_mult: function (a) {
          a = a < 0 ? 0 : a;
          this.mult = a > 1 ? 1 : a;
          this.shader.mult.value = [this.mult];
          return this.mult;
        },
        __class__: fm,
        __properties__: {
          set_mult: "set_mult",
          set_b: "set_b",
          set_g: "set_g",
          set_r: "set_r"
        }
      };
      function em(a, b) {
        this.enabled = this.allowNew = true;
        this.parent = b;
        this._owner = a;
        this._original = b;
        a.shader = b.shader;
        this.r = this.parent.r;
        this.set_g(this.parent.g);
        this.set_b(this.parent.b);
        this.set_mult(this.parent.mult);
      }
      h["shaders.RGBShaderReference"] = em;
      em.__name__ = "shaders.RGBShaderReference";
      em.prototype = {
        set_r: function (a) {
          if (this.allowNew && a != this._original.r) {
            this.cloneOriginal();
          }
          return this.r = this.parent.set_r(a);
        },
        set_g: function (a) {
          if (this.allowNew && a != this._original.g) {
            this.cloneOriginal();
          }
          return this.g = this.parent.set_g(a);
        },
        set_b: function (a) {
          if (this.allowNew && a != this._original.b) {
            this.cloneOriginal();
          }
          return this.b = this.parent.set_b(a);
        },
        set_mult: function (a) {
          if (this.allowNew && a != this._original.mult) {
            this.cloneOriginal();
          }
          return this.mult = this.parent.set_mult(a);
        },
        set_enabled: function (a) {
          this._owner.shader = a ? this.parent.shader : null;
          return this.enabled = a;
        },
        cloneOriginal: function () {
          if (this.allowNew) {
            this.allowNew = false;
            if (this._original == this.parent) {
              this.parent = new fm();
              this.parent.set_r(this._original.r);
              this.parent.set_g(this._original.g);
              this.parent.set_b(this._original.b);
              this.parent.set_mult(this._original.mult);
              this._owner.shader = this.parent.shader;
            }
          }
        },
        __class__: em,
        __properties__: {
          set_enabled: "set_enabled",
          set_mult: "set_mult",
          set_b: "set_b",
          set_g: "set_g",
          set_r: "set_r"
        }
      };
      function an() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\n\n\t\t#pragma header\n\t\t\n\t\tuniform vec3 r;\n\t\tuniform vec3 g;\n\t\tuniform vec3 b;\n\t\tuniform float mult;\n\n\t\tvec4 flixel_texture2DCustom(sampler2D bitmap, vec2 coord) {\n\t\t\tvec4 color = flixel_texture2D(bitmap, coord);\n\t\t\tif (!hasTransform || color.a == 0.0 || mult == 0.0) {\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tvec4 newColor = color;\n\t\t\tnewColor.rgb = min(color.r * r + color.g * g + color.b * b, vec3(1.0));\n\t\t\tnewColor.a = color.a;\n\t\t\t\n\t\t\tcolor = mix(color, newColor, mult);\n\t\t\t\n\t\t\tif(color.a > 0.0) {\n\t\t\t\treturn vec4(color.rgb, color.a);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = flixel_texture2DCustom(bitmap, openfl_TextureCoordv);\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\t\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\t\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\t\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        $d.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["shaders.RGBPaletteShader"] = an;
      an.__name__ = "shaders.RGBPaletteShader";
      an.__super__ = $d;
      an.prototype = q($d.prototype, {
        __class__: an
      });
      function bn(a, b) {
        this.moveTween = null;
        this.holdTime = 0;
        this.quitting = false;
        this.offsetThing = -75;
        this.creditsStuff = [];
        this.iconArray = [];
        this.curSelected = -1;
        U.call(this, a, b);
      }
      h["states.CreditsState"] = bn;
      bn.__name__ = "states.CreditsState";
      bn.__super__ = U;
      bn.prototype = q(U.prototype, {
        create: function () {
          this.persistentUpdate = true;
          this.bg = new G().loadGraphic(y.image("menuDesat"));
          this.bg.set_antialiasing(C.data.antialiasing);
          this.add(this.bg);
          var a = this.bg;
          a.set_x((g.width - a.get_width()) / 2);
          a.set_y((g.height - a.get_height()) / 2);
          this.grpOptions = new Ra();
          this.add(this.grpOptions);
          a = y.getPath("data/credits.txt", "TEXT", null);
          if (W.exists(a)) {
            var b = W.getText(a).split("\n");
            for (a = 0; a < b.length;) {
              var c = b[a];
              ++a;
              c = w.replace(c, "\\n", "\n").split("::");
              if (c.length >= 5) {
                c.push("");
              }
              this.creditsStuff.push(c);
            }
            this.creditsStuff.push([""]);
          }
          b = [["Psych Engine Team"], ["Shadow Mario", "shadowmario", "Main Programmer and Head of Psych Engine", "https://ko-fi.com/shadowmario", "444444"], ["Riveren", "riveren", "Main Artist/Animator of Psych Engine", "https://twitter.com/riverennn", "14967B"], [""], ["Former Engine Members"], ["bb-panzu", "bb", "Ex-Programmer of Psych Engine", "https://twitter.com/bbsub3", "3E813A"], ["shubs", "", "Ex-Programmer of Psych Engine\nI don't support them.", "", "A1A1A1"], [""], ["Engine Contributors"], ["CrowPlexus", "crowplexus", "Input System v3, Major Help and Other PRs", "https://twitter.com/crowplexus", "A1A1A1"], ["Keoiki", "keoiki", "Note Splash Animations and Latin Alphabet", "https://twitter.com/Keoiki_", "D2D2D2"], ["SqirraRNG", "sqirra", "Crash Handler and Base code for\nChart Editor's Waveform", "https://twitter.com/gedehari", "E1843A"], ["EliteMasterEric", "mastereric", "Runtime Shaders support", "https://twitter.com/EliteMasterEric", "FFBD40"], ["PolybiusProxy", "proxy", ".MP4 Video Loader Library (hxCodec)", "https://twitter.com/polybiusproxy", "DCD294"], ["Tahir", "tahir", "Implementing & Maintaining SScript and Other PRs", "https://twitter.com/tahirk618", "A04397"], ["iFlicky", "flicky", "Composer of Psync and Tea Time\nMade the Dialogue Sounds", "https://twitter.com/flicky_i", "9E29CF"], ["KadeDev", "kade", "Fixed some issues on Chart Editor and Other PRs", "https://twitter.com/kade0912", "64A250"], ["superpowers04", "superpowers04", "LUA JIT Fork", "https://twitter.com/superpowers04", "B957ED"], ["CheemsAndFriends", "face", "Creator of FlxAnimate\n(Icon will be added later, merry christmas!)", "https://twitter.com/CheemsnFriendos", "A1A1A1"], [""], ["Funkin' Crew"], ["ninjamuffin99", "ninjamuffin99", "Programmer of Friday Night Funkin'", "https://twitter.com/ninja_muffin99", "CF2D2D"], ["PhantomArcade", "phantomarcade", "Animator of Friday Night Funkin'", "https://twitter.com/PhantomArcade3K", "FADC45"], ["evilsk8r", "evilsk8r", "Artist of Friday Night Funkin'", "https://twitter.com/evilsk8r", "5ABD4B"], ["kawaisprite", "kawaisprite", "Composer of Friday Night Funkin'", "https://twitter.com/kawaisprite", "378FC7"]];
          for (a = 0; a < b.length;) {
            c = b[a];
            ++a;
            this.creditsStuff.push(c);
          }
          a = 0;
          for (b = this.creditsStuff.length; a < b;) {
            c = a++;
            var d = !this.unselectableCheck(c);
            var e = new Jb(g.width / 2, 300, this.creditsStuff[c][0], !d);
            e.isMenuItem = true;
            e.targetY = c;
            e.changeX = false;
            e.snapToPosition();
            this.grpOptions.add(e);
            if (d) {
              if (this.creditsStuff[c][5] != null) {
                Wd.currentModDirectory = this.creditsStuff[c][5];
              }
              d = "credits/missing_icon";
              if (this.creditsStuff[c][1] != null && this.creditsStuff[c][1].length > 0) {
                var f = "credits/" + this.creditsStuff[c][1];
                if (y.fileExists("images/" + f + ".png", "IMAGE")) {
                  d = f;
                } else if (y.fileExists("images/" + f + "-pixel.png", "IMAGE")) {
                  d = f + "-pixel";
                }
              }
              f = new ah(d);
              if (w.endsWith(d, "-pixel")) {
                f.set_antialiasing(false);
              }
              f.xAdd = e.get_width() + 10;
              f.sprTracker = e;
              this.iconArray.push(f);
              this.add(f);
              Wd.currentModDirectory = "";
              if (this.curSelected == -1) {
                this.curSelected = c;
              }
            } else {
              e.set_alignment(Of.CENTERED);
            }
          }
          this.descBox = new ah();
          this.descBox.makeGraphic(1, 1, -16777216);
          this.descBox.xAdd = -10;
          this.descBox.yAdd = -10;
          this.descBox.alphaMult = 0.6;
          this.descBox.set_alpha(0.6);
          this.add(this.descBox);
          this.descText = new Q(50, g.height + this.offsetThing - 25, 1180, "", 32);
          this.descText.setFormat("assets/fonts/vcr.ttf", 32, -1, "center");
          a = this.descText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.descBox.sprTracker = this.descText;
          this.add(this.descText);
          a = this.bg;
          c = this.creditsStuff[this.curSelected][4];
          b = new sa("[\t\n\r]", "");
          c = w.trim(b.split(c).join(""));
          if (w.startsWith(c, "0x")) {
            c = c.substring(c.length - 6);
          }
          b = xb.fromString(c);
          if (b == null) {
            b = xb.fromString("#" + c);
          }
          a.set_color(b ?? -1);
          this.intendedColor = this.bg.color;
          this.changeSelection();
          U.prototype.create.call(this);
        },
        update: function (a) {
          if (g.sound.music._volume < 0.7) {
            var b = g.sound.music;
            b.set_volume(b._volume + g.elapsed * 0.5);
          }
          if (!this.quitting) {
            if (this.creditsStuff.length > 1) {
              b = 1;
              var c = g.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(16, c.status)) {
                b = 3;
              }
              c = this.get_controls().get_UI_UP_P();
              var d = this.get_controls().get_UI_DOWN_P();
              if (c) {
                this.changeSelection(-b);
                this.holdTime = 0;
              }
              if (d) {
                this.changeSelection(b);
                this.holdTime = 0;
              }
              if (this.get_controls().get_UI_DOWN() || this.get_controls().get_UI_UP()) {
                c = Math.floor((this.holdTime - 0.5) * 10);
                this.holdTime += a;
                d = Math.floor((this.holdTime - 0.5) * 10);
                if (this.holdTime > 0.5 && d - c > 0) {
                  this.changeSelection((d - c) * (this.get_controls().get_UI_UP() ? -b : b));
                }
              }
            }
            if (this.get_controls().get_ACCEPT() && (this.creditsStuff[this.curSelected][3] == null || this.creditsStuff[this.curSelected][3].length > 4)) {
              b = this.creditsStuff[this.curSelected][3];
              if (!new sa("^.\\w+?:/*", "").match(b)) {
                b = "https://" + b;
              }
              na.getURL(new Ui(b), "_blank");
            }
            if (this.get_controls().get_BACK()) {
              if (this.colorTween != null) {
                this.colorTween.cancel();
              }
              g.sound.play(y.sound("cancelMenu"));
              U.switchState(new Kd());
              this.quitting = true;
            }
          }
          b = 0;
          for (c = this.grpOptions.members; b < c.length;) {
            d = c[b];
            ++b;
            if (!d.bold) {
              var e = Math.exp(-a * 12);
              if (d.targetY == 0) {
                var f = d.x;
                var k = 1;
                if (k == null) {
                  k = 17;
                }
                if (k == 1 || k == 17) {
                  d.set_x((g.width - d.get_width()) / 2);
                }
                if (k == 16 || k == 17) {
                  d.set_y((g.height - d.get_height()) / 2);
                }
                k = d.x - 70;
                d.set_x(k + e * (f - k));
              } else {
                f = 200 + Math.abs(d.targetY) * -40;
                d.set_x(f + e * (d.x - f));
              }
            }
          }
          U.prototype.update.call(this, a);
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = this;
          g.sound.play(y.sound("scrollMenu"), 0.4);
          do {
            this.curSelected += a;
            if (this.curSelected < 0) {
              this.curSelected = this.creditsStuff.length - 1;
            }
            if (this.curSelected >= this.creditsStuff.length) {
              this.curSelected = 0;
            }
          } while (this.unselectableCheck(this.curSelected));
          a = this.creditsStuff[this.curSelected][4];
          var c = new sa("[\t\n\r]", "");
          a = w.trim(c.split(a).join(""));
          if (w.startsWith(a, "0x")) {
            a = a.substring(a.length - 6);
          }
          c = xb.fromString(a);
          if (c == null) {
            c = xb.fromString("#" + a);
          }
          a = c ?? -1;
          if (a != this.intendedColor) {
            if (this.colorTween != null) {
              this.colorTween.cancel();
            }
            this.intendedColor = a;
            this.colorTween = ka.color(this.bg, 1, this.bg.color, this.intendedColor, {
              onComplete: function (a) {
                b.colorTween = null;
              }
            });
          }
          c = a = 0;
          for (var d = this.grpOptions.members; c < d.length;) {
            var e = d[c];
            ++c;
            e.targetY = a - this.curSelected;
            if (!this.unselectableCheck(a++)) {
              e.set_alpha(0.6);
              if (e.targetY == 0) {
                e.set_alpha(1);
              }
            }
          }
          this.descText.set_text(this.creditsStuff[this.curSelected][2]);
          this.descText.set_y(g.height - this.descText.get_height() + this.offsetThing - 60);
          if (this.moveTween != null) {
            this.moveTween.cancel();
          }
          this.moveTween = ka.tween(this.descText, {
            y: this.descText.y + 75
          }, 0.25, {
            ease: va.sineOut
          });
          this.descBox.setGraphicSize(this.descText.get_width() + 20 | 0, this.descText.get_height() + 25 | 0);
          this.descBox.updateHitbox();
        },
        unselectableCheck: function (a) {
          return this.creditsStuff[a].length <= 1;
        },
        __class__: bn
      });
      function gh(a, b) {
        U.call(this, a, b);
      }
      h["states.FlashingState"] = gh;
      gh.__name__ = "states.FlashingState";
      gh.__super__ = U;
      gh.prototype = q(U.prototype, {
        create: function () {
          U.prototype.create.call(this);
          var a = new G().makeGraphic(g.width, g.height, -16777216);
          this.add(a);
          this.warnText = new Q(0, 0, g.width, "Hey, watch out!\n\n\t\t\tThis Mod contains some flashing lights!\n\n\t\t\tPress ENTER to disable them now or go to Options Menu.\n\n\t\t\tPress ESCAPE to ignore this message.\n\n\t\t\tYou've been warned!", 32);
          this.warnText.setFormat("VCR OSD Mono", 32, -1, "center");
          a = this.warnText;
          var b = 16;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          this.add(this.warnText);
        },
        update: function (a) {
          if (!gh.leftState) {
            var b = this.get_controls().get_BACK();
            if (this.get_controls().get_ACCEPT() || b) {
              gh.leftState = true;
              Wb.skipNextTransIn = true;
              Wb.skipNextTransOut = true;
              if (b) {
                g.sound.play(y.sound("cancelMenu"));
                ka.tween(this.warnText, {
                  alpha: 0
                }, 1, {
                  onComplete: function (a) {
                    U.switchState(new zc());
                  }
                });
              } else {
                C.data.flashing = false;
                C.saveSettings();
                g.sound.play(y.sound("confirmMenu"));
                id.flicker(this.warnText, 1, 0.1, false, true, function (a) {
                  new Fc().start(0.5, function (a) {
                    U.switchState(new zc());
                  });
                });
              }
            }
          }
          U.prototype.update.call(this, a);
        },
        __class__: gh
      });
      function Va(a, b) {
        this._lastVisibles = [];
        this._drawDistance = 4;
        this.holdTime = 0;
        this.instPlaying = -1;
        this.barY = 0;
        this.iconArray = [];
        this.curPlaying = false;
        this.lerpScore = this.lerpRating = this.intendedScore = this.intendedRating = 0;
        this.curDifficulty = -1;
        this.lerpSelected = 0;
        this.songs = [];
        U.call(this, a, b);
      }
      h["states.FreeplayState"] = Va;
      Va.__name__ = "states.FreeplayState";
      Va.destroyFreeplayVocals = function () {
        if (Va.vocals != null) {
          var a = Va.vocals;
          a.cleanup(a.autoDestroy, true);
          Va.vocals.destroy();
        }
        Va.vocals = null;
      };
      Va.__super__ = U;
      Va.prototype = q(U.prototype, {
        create: function () {
          y.clearStoredMemory();
          y.clearUnusedMemory();
          this.persistentUpdate = true;
          z.isStoryMode = false;
          ob.reloadWeekFiles(false);
          for (var a = 0, b = ob.weeksList.length; a < b;) {
            var c = a++;
            if (!this.weekIsLocked(ob.weeksList[c])) {
              var d = ob.weeksLoaded.h[ob.weeksList[c]];
              var e = [];
              var f = [];
              for (var k = 0, h = d.songs.length; k < h;) {
                var n = k++;
                e.push(d.songs[n][0]);
                f.push(d.songs[n][1]);
              }
              ob.setDirectoryFromWeek(d);
              e = 0;
              for (d = d.songs; e < d.length;) {
                k = d[e];
                ++e;
                var p = k[2];
                if (p == null || p.length < 3) {
                  p = [146, 113, 253];
                }
                f = k[0];
                k = k[1];
                h = p[0];
                n = p[1];
                p = p[2];
                var l = xb._new();
                var m = 255;
                if (m == null) {
                  m = 255;
                }
                l &= -16711681;
                l |= (h > 255 ? 255 : h < 0 ? 0 : h) << 16;
                l &= -65281;
                l |= (n > 255 ? 255 : n < 0 ? 0 : n) << 8;
                l &= -256;
                l |= p > 255 ? 255 : p < 0 ? 0 : p;
                l &= 16777215;
                l |= (m > 255 ? 255 : m < 0 ? 0 : m) << 24;
                this.addSong(f, c, k, l);
              }
            }
          }
          Wd.loadTopMod();
          c = new G().makeGraphic(g.width, g.height, -13087028);
          this.insert(1, c);
          b = new yf(y.image("menus/titlescreen/bigBubbles"), 16, 0, -8.5);
          e = new yf(y.image("menus/titlescreen/smallBubbles"), 16);
          a = new G().loadGraphic(y.image("menus/titlescreen/mickheads"));
          d = 0;
          for (f = [b, e, a]; d < f.length;) {
            k = f[d];
            c = d++;
            h = k.scale;
            p = n = 0.55;
            if (p == null) {
              p = 0;
            }
            if (n == null) {
              n = 0;
            }
            h.set_x(n);
            h.set_y(p);
            k.set_x((g.width - k.get_width()) / 2);
            k.set_y((g.height - k.get_height()) / 2);
            this.insert(c + 2, k);
          }
          b.velocity.set_y(30);
          e.velocity.set_y(70);
          this.mickTween = ka.tween(a, {
            y: a.y + 20
          }, 1.7, {
            ease: va.quadInOut,
            type: 4
          });
          this.menuBars = new Ra();
          this.insert(this.members.indexOf(this.grpSongs) + 10, this.menuBars);
          c = new G(0, this.barY).makeGraphic(g.width, 50, -16777216);
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          c.set_x(c.x + -g.width);
          this.menuBars.add(c);
          this.barY += 670;
          c = new G(0, this.barY).makeGraphic(g.width, 50, -16777216);
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          c.set_x(c.x + g.width);
          this.menuBars.add(c);
          this.barY += 670;
          this.barTween1 = ka.tween(this.menuBars.members[0], {
            x: this.menuBars.members[0].x + g.width
          }, 0.5, {
            ease: va.quartOut
          });
          this.barTween2 = ka.tween(this.menuBars.members[1], {
            x: this.menuBars.members[1].x - g.width
          }, 0.5, {
            ease: va.quartOut
          });
          c = this.gradient = new G().loadGraphic(y.image("menus/freeplay/gradient"));
          c.set_y(c.y + 360);
          this.insert(this.members.indexOf(a) + 1, this.gradient);
          this.grpSongs = new Ra();
          this.add(this.grpSongs);
          a = 0;
          for (b = this.songs.length; a < b;) {
            c = a++;
            e = new Jb(90, 320, this.songs[c].songName, true);
            e.targetY = c;
            this.grpSongs.add(e);
            e.set_scaleX(Math.min(1, 980 / e.get_width()));
            e.snapToPosition();
            Wd.currentModDirectory = this.songs[c].folder;
            c = new Ue(this.songs[c].songCharacter);
            c.sprTracker = e;
            e.set_visible(e.set_active(e.isMenuItem = false));
            c.set_visible(c.set_active(false));
            this.iconArray.push(c);
            this.add(c);
          }
          ob.setDirectoryFromWeek();
          this.scoreText = new Q(g.width * 0.7, 5, 0, "", 32);
          this.scoreText.setFormat("assets/fonts/dokdo.ttf", 32, -1, "right");
          this.scoreBG = new G(this.scoreText.x - 6, 0).makeGraphic(1, 66, -16777216);
          this.scoreBG.set_alpha(0.6);
          this.diffText = new Q(this.scoreText.x, this.scoreText.y + 36, 0, "", 24);
          this.diffText.set_font(this.scoreText._font);
          this.add(this.scoreText);
          this.missingTextBG = new G().makeGraphic(g.width, g.height, -16777216);
          this.missingTextBG.set_alpha(0.6);
          this.missingTextBG.set_visible(false);
          this.add(this.missingTextBG);
          this.missingText = new Q(50, 0, g.width - 100, "", 24);
          this.missingText.setFormat("assets/fonts/dokdo.ttf", 24, -1, "center", Ta.OUTLINE, -16777216);
          h = this.missingText.scrollFactor;
          h.set_x(0);
          h.set_y(0);
          this.missingText.set_visible(false);
          this.add(this.missingText);
          if (Va.curSelected >= this.songs.length) {
            Va.curSelected = 0;
          }
          this.lerpSelected = Va.curSelected;
          this.curDifficulty = Math.round(Math.max(0, mb.defaultList.indexOf(Va.lastDifficultyName)));
          this.bottomBG = new G(0, g.height - 26).makeGraphic(g.width, 26, -16777216);
          this.bottomBG.set_alpha(0.6);
          this.add(this.bottomBG);
          this.bottomString = "Press RESET to Reset your Score and Accuracy.";
          this.bottomText = new Q(this.bottomBG.x, this.bottomBG.y + 4, g.width, "Press RESET to Reset your Score and Accuracy.", 16);
          this.bottomText.setFormat("assets/fonts/dokdo.ttf", 16, -1, "center");
          h = this.bottomText.scrollFactor;
          h.set_x(0);
          h.set_y(0);
          this.add(this.bottomText);
          this.player = new dm(this);
          this.add(this.player);
          this.changeSelection();
          this.updateTexts();
          U.prototype.create.call(this);
        },
        closeSubState: function () {
          this.changeSelection(0, false);
          this.persistentUpdate = true;
          U.prototype.closeSubState.call(this);
        },
        addSong: function (a, b, c, d) {
          this.songs.push(new To(a, b, c, d));
        },
        weekIsLocked: function (a) {
          a = ob.weeksLoaded.h[a];
          if (!a.startUnlocked && a.weekBefore.length > 0) {
            if (Object.prototype.hasOwnProperty.call(Lb.weekCompleted.h, a.weekBefore)) {
              return !Lb.weekCompleted.h[a.weekBefore];
            } else {
              return true;
            }
          } else {
            return false;
          }
        },
        update: function (a) {
          if (g.sound.music._volume < 0.7) {
            var b = g.sound.music;
            b.set_volume(b._volume + g.elapsed * 0.5);
          }
          b = this.intendedScore;
          this.lerpScore = Math.floor(b + Math.exp(-a * 24) * (this.lerpScore - b));
          b = this.intendedRating;
          this.lerpRating = b + Math.exp(-a * 12) * (this.lerpRating - b);
          if (Math.abs(this.lerpScore - this.intendedScore) <= 10) {
            this.lerpScore = this.intendedScore;
          }
          if (Math.abs(this.lerpRating - this.intendedRating) <= 0.01) {
            this.lerpRating = this.intendedRating;
          }
          var c = H.string(Oi.floorDecimal(this.lerpRating * 100, 2)).split(".");
          for (c.length < 2 && c.push(""); c[1].length < 2;) {
            c[1] += "0";
          }
          b = 1;
          var d = g.keys.pressed;
          if (d.keyManager.checkStatusUnsafe(16, d.status)) {
            b = 3;
          }
          if (!this.player.playingMusic) {
            this.scoreText.set_text("PERSONAL BEST: " + this.lerpScore + " (" + c.join(".") + "%)");
            this.positionHighscore();
            if (this.songs.length > 1) {
              d = g.keys.justPressed;
              if (d.keyManager.checkStatusUnsafe(36, d.status)) {
                Va.curSelected = 0;
                this.changeSelection();
                this.holdTime = 0;
              } else {
                d = g.keys.justPressed;
                if (d.keyManager.checkStatusUnsafe(35, d.status)) {
                  Va.curSelected = this.songs.length - 1;
                  this.changeSelection();
                  this.holdTime = 0;
                }
              }
              if (this.get_controls().get_UI_UP_P()) {
                this.changeSelection(-b);
                this.holdTime = 0;
              }
              if (this.get_controls().get_UI_DOWN_P()) {
                this.changeSelection(b);
                this.holdTime = 0;
              }
              if (this.get_controls().get_UI_DOWN() || this.get_controls().get_UI_UP()) {
                d = Math.floor((this.holdTime - 0.5) * 10);
                this.holdTime += a;
                c = Math.floor((this.holdTime - 0.5) * 10);
                if (this.holdTime > 0.5 && c - d > 0) {
                  this.changeSelection((c - d) * (this.get_controls().get_UI_UP() ? -b : b));
                }
              }
              if (g.mouse.wheel != 0) {
                g.sound.play(y.sound("scrollMenu"), 0.2);
                this.changeSelection(-b * g.mouse.wheel, false);
              }
            }
            if (this.get_controls().get_UI_LEFT_P()) {
              this.changeDiff(-1);
              b = this.curDifficulty;
              this.songs[Va.curSelected].lastDifficulty = mb.list[b == null ? z.storyDifficulty : b];
            } else if (this.get_controls().get_UI_RIGHT_P()) {
              this.changeDiff(1);
              b = this.curDifficulty;
              this.songs[Va.curSelected].lastDifficulty = mb.list[b == null ? z.storyDifficulty : b];
            }
          }
          if (this.get_controls().get_BACK()) {
            if (this.player.playingMusic) {
              d = g.sound.music;
              d.cleanup(d.autoDestroy, true);
              Va.destroyFreeplayVocals();
              g.sound.music.set_volume(0);
              this.instPlaying = -1;
              this.player.playingMusic = false;
              this.player.switchPlayMusic();
              b = g.sound;
              d = y.returnSound("music", "freakyMenu", null);
              b.playMusic(d, 0);
              ka.tween(g.sound.music, {
                volume: 1
              }, 1);
            } else {
              this.persistentUpdate = false;
              if (this.colorTween != null) {
                this.colorTween.cancel();
              }
              g.sound.play(y.sound("cancelMenu"));
              U.switchState(new Kd());
            }
          }
          if (this.get_controls().get_ACCEPT() && !this.player.playingMusic) {
            this.persistentUpdate = false;
            d = this.songs[Va.curSelected].songName;
            c = new sa("[~&\\\\;:<>#]", "");
            b = new sa("[.,'\"%?!]", "");
            d = c.split(w.replace(d, " ", "-")).join("-");
            b = b.split(d).join("").toLowerCase();
            d = Za.formatSong(b, this.curDifficulty);
            yb.trace(d, {
              fileName: "source/states/FreeplayState.hx",
              lineNumber: 446,
              className: "states.FreeplayState",
              methodName: "update"
            });
            try {
              z.SONG = Pd.loadFromJson(d, b);
              z.isStoryMode = false;
              z.storyDifficulty = this.curDifficulty;
              yb.trace("CURRENT WEEK: " + ob.getWeekFileName(), {
                fileName: "source/states/FreeplayState.hx",
                lineNumber: 454,
                className: "states.FreeplayState",
                methodName: "update"
              });
              if (this.colorTween != null) {
                this.colorTween.cancel();
              }
            } catch (e) {
              Na.lastError = e;
              b = K.caught(e).unwrap();
              yb.trace("ERROR! " + H.string(b), {
                fileName: "source/states/FreeplayState.hx",
                lineNumber: 462,
                className: "states.FreeplayState",
                methodName: "update"
              });
              b = b.toString();
              if (w.startsWith(b, "[file_contents,assets/data/")) {
                b = "Missing file: " + b.substring(34, b.length - 1);
              }
              this.missingText.set_text("ERROR WHILE LOADING CHART:\n" + b);
              d = this.missingText;
              b = 16;
              if (b == null) {
                b = 17;
              }
              if (b == 1 || b == 17) {
                d.set_x((g.width - d.get_width()) / 2);
              }
              if (b == 16 || b == 17) {
                d.set_y((g.height - d.get_height()) / 2);
              }
              this.missingText.set_visible(true);
              this.missingTextBG.set_visible(true);
              g.sound.play(y.sound("cancelMenu"));
              this.updateTexts(a);
              U.prototype.update.call(this, a);
              return;
            }
            U.switchState(qc.getNextState(new z(), false));
            g.sound.music.set_volume(0);
            Va.destroyFreeplayVocals();
          } else if (this.get_controls().get_RESET() && !this.player.playingMusic) {
            this.persistentUpdate = false;
            this.openSubState(new dk(this.songs[Va.curSelected].songName, this.curDifficulty, this.songs[Va.curSelected].songCharacter));
            g.sound.play(y.sound("scrollMenu"));
          }
          this.updateTexts(a);
          U.prototype.update.call(this, a);
        },
        changeDiff: function (a) {
          if (a == null) {
            a = 0;
          }
          if (!this.player.playingMusic) {
            this.curDifficulty += a;
            if (this.curDifficulty < 0) {
              this.curDifficulty = mb.list.length - 1;
            }
            if (this.curDifficulty >= mb.list.length) {
              this.curDifficulty = 0;
            }
            this.intendedScore = Za.getScore(this.songs[Va.curSelected].songName, this.curDifficulty);
            this.intendedRating = Za.getRating(this.songs[Va.curSelected].songName, this.curDifficulty);
            a = this.curDifficulty;
            Va.lastDifficultyName = mb.list[a == null ? z.storyDifficulty : a];
            if (mb.list.length > 1) {
              this.diffText.set_text("< " + Va.lastDifficultyName.toUpperCase() + " >");
            } else {
              this.diffText.set_text(Va.lastDifficultyName.toUpperCase());
            }
            this.positionHighscore();
            this.missingText.set_visible(false);
            this.missingTextBG.set_visible(false);
          }
        },
        changeSelection: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a == null) {
            a = 0;
          }
          if (!this.player.playingMusic) {
            var c = this.curDifficulty;
            this.songs[Va.curSelected].lastDifficulty = mb.list[c == null ? z.storyDifficulty : c];
            if (b) {
              g.sound.play(y.sound("scrollMenu"), 0.4);
            }
            b = mb.list;
            Va.curSelected += a;
            if (Va.curSelected < 0) {
              Va.curSelected = this.songs.length - 1;
            }
            if (Va.curSelected >= this.songs.length) {
              Va.curSelected = 0;
            }
            c = a = 0;
            for (var d = this.iconArray.length; c < d;) {
              var e = c++;
              this.iconArray[e].set_alpha(0.6);
            }
            this.iconArray[Va.curSelected].set_alpha(1);
            c = 0;
            for (d = this.grpSongs.members; c < d.length;) {
              e = d[c];
              ++c;
              ++a;
              e.set_alpha(0.6);
              if (e.targetY == Va.curSelected) {
                e.set_alpha(1);
              }
            }
            Wd.currentModDirectory = this.songs[Va.curSelected].folder;
            z.storyWeek = this.songs[Va.curSelected].week;
            a = null;
            if (a == null) {
              a = ob.getCurrentWeek();
            }
            a = a.difficulties;
            if (a != null && a.length > 0) {
              a = w.trim(a).split(",");
              for (e = a.length - 1; e > 0;) {
                if (a[e] != null) {
                  a[e] = w.trim(a[e]);
                  if (a[e].length < 1) {
                    M.remove(a, a[e]);
                  }
                }
                --e;
              }
              if (a.length > 0 && a[0].length > 0) {
                mb.list = a;
              }
            } else {
              mb.list = mb.defaultList.slice();
            }
            a = this.songs[Va.curSelected].lastDifficulty;
            c = mb.list.indexOf(Va.lastDifficultyName);
            if (a != null && b.indexOf(a) == -1 && mb.list.indexOf(a) != -1) {
              this.curDifficulty = Math.round(Math.max(0, mb.list.indexOf(a)));
            } else if (c > -1) {
              this.curDifficulty = c;
            } else if (mb.list.indexOf(mb.defaultDifficulty) != -1) {
              this.curDifficulty = Math.round(Math.max(0, mb.defaultList.indexOf(mb.defaultDifficulty)));
            } else {
              this.curDifficulty = 0;
            }
            this.changeDiff();
            c = this.curDifficulty;
            this.songs[Va.curSelected].lastDifficulty = mb.list[c == null ? z.storyDifficulty : c];
          }
        },
        _updateSongLastDifficulty: function () {
          var a = this.curDifficulty;
          this.songs[Va.curSelected].lastDifficulty = mb.list[a == null ? z.storyDifficulty : a];
        },
        positionHighscore: function () {
          this.scoreText.set_x(g.width - this.scoreText.get_width() - 6);
          this.scoreBG.scale.set_x(g.width - this.scoreText.x + 6);
          this.scoreBG.set_x(g.width - this.scoreBG.scale.x / 2);
          this.diffText.set_x(this.scoreBG.x + this.scoreBG.get_width() / 2 | 0);
          var a = this.diffText;
          a.set_x(a.x - this.diffText.get_width() / 2);
        },
        updateTexts: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = Va.curSelected;
          this.lerpSelected = b + Math.exp(-a * 9.6) * (this.lerpSelected - b);
          a = 0;
          for (b = this._lastVisibles; a < b.length;) {
            var c = b[a];
            ++a;
            this.grpSongs.members[c].set_visible(this.grpSongs.members[c].set_active(false));
            this.iconArray[c].set_visible(this.iconArray[c].set_active(false));
          }
          this._lastVisibles = [];
          b = Math.round(Math.max(0, Math.min(this.songs.length, this.lerpSelected + this._drawDistance)));
          for (a = Math.round(Math.max(0, Math.min(this.songs.length, this.lerpSelected - this._drawDistance))); a < b;) {
            c = a++;
            var d = this.grpSongs.members[c];
            d.set_visible(d.set_active(true));
            d.set_x((d.targetY - this.lerpSelected) * d.distancePerItem.x + d.startPosition.x);
            d.set_y((d.targetY - this.lerpSelected) * 1.3 * d.distancePerItem.y + d.startPosition.y);
            d = this.iconArray[c];
            d.set_visible(d.set_active(true));
            this._lastVisibles.push(c);
          }
        },
        destroy: function () {
          U.prototype.destroy.call(this);
          g.autoPause = C.data.autoPause;
          if (g.sound.music._channel == null) {
            var a = g.sound;
            var b = y.returnSound("music", "freakyMenu", null);
            a.playMusic(b);
          }
        },
        __class__: Va
      });
      function To(a, b, c, d) {
        this.lastDifficulty = null;
        this.folder = "";
        this.color = -7179779;
        this.songName = a;
        this.week = b;
        this.songCharacter = c;
        this.color = d;
        this.folder = Wd.currentModDirectory;
        if (this.folder == null) {
          this.folder = "";
        }
      }
      h["states.SongMetadata"] = To;
      To.__name__ = "states.SongMetadata";
      To.prototype = {
        __class__: To
      };
      function qc(a, b, c) {
        this.targetShit = 0;
        this.stopMusic = false;
        U.call(this);
        this.target = a;
        this.stopMusic = b;
        this.directory = c;
      }
      h["states.LoadingState"] = qc;
      qc.__name__ = "states.LoadingState";
      qc.getSongPath = function () {
        return "songs:assets/songs/" + w.replace(z.SONG.song.toLowerCase(), " ", "-") + "/Inst.mp3";
      };
      qc.getVocalPath = function () {
        return "songs:assets/songs/" + w.replace(z.SONG.song.toLowerCase(), " ", "-") + "/Voices.mp3";
      };
      qc.loadAndSwitchState = function (a, b) {
        if (b == null) {
          b = false;
        }
        U.switchState(qc.getNextState(a, b));
      };
      qc.getNextState = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = "shared";
        var d = Ae.forceNextDirectory;
        Ae.forceNextDirectory = null;
        if (d != null && d.length > 0 && d != "") {
          c = d;
        }
        y.setCurrentLevel(c);
        yb.trace("Setting asset folder to " + c, {
          fileName: "source/states/LoadingState.hx",
          lineNumber: 162,
          className: "states.LoadingState",
          methodName: "getNextState"
        });
        d = false;
        if (z.SONG != null) {
          d = qc.isSoundLoaded(qc.getSongPath()) && (!z.SONG.needsVoices || qc.isSoundLoaded(qc.getVocalPath())) && qc.isLibraryLoaded("shared") && qc.isLibraryLoaded(c);
        }
        if (!d) {
          return new qc(a, b, c);
        }
        if (b && g.sound.music != null) {
          b = g.sound.music;
          b.cleanup(b.autoDestroy, true);
        }
        return a;
      };
      qc.isSoundLoaded = function (a) {
        return W.cache.hasSound(a);
      };
      qc.isLibraryLoaded = function (a) {
        return W.getLibrary(a) != null;
      };
      qc.initSongsManifest = function () {
        var a = new Md();
        var b = oa.getLibrary("songs");
        if (b != null) {
          return Cb.withValue(b);
        }
        b = "songs";
        var c = null;
        c = oa.libraryPaths;
        if (Object.prototype.hasOwnProperty.call(c.h, "songs")) {
          b = c.h.songs;
          c = Jc.directory(b);
        } else {
          if (w.endsWith(b, ".bundle")) {
            c = b;
            b += "/library.json";
          } else {
            c = Jc.directory(b);
          }
          b = oa.__cacheBreak(b);
        }
        Ud.loadFromFile(b, c).onComplete(function (b) {
          if (b == null) {
            a.error("Cannot parse asset manifest for library \"songs\"");
          } else {
            b = jc.fromManifest(b);
            if (b == null) {
              a.error("Cannot open library \"songs\"");
            } else {
              oa.libraries.h.songs = b;
              b.onChange.add((u = oa.onChange, l(u, u.dispatch)));
              a.completeWith(Cb.withValue(b));
            }
          }
        }).onError(function (b) {
          a.error("There is no asset library with an ID of \"songs\"");
        });
        return a.future;
      };
      qc.__super__ = U;
      qc.prototype = q(U.prototype, {
        create: function () {
          var a = this;
          var b = new G(0, 0).makeGraphic(g.width, g.height, -3473587);
          b.set_antialiasing(C.data.antialiasing);
          this.add(b);
          this.funkay = new G(0, 0).loadGraphic(y.getPath("images/funkay.png", "IMAGE"));
          this.funkay.setGraphicSize(0, g.height);
          this.funkay.updateHitbox();
          this.add(this.funkay);
          this.funkay.set_antialiasing(C.data.antialiasing);
          b = this.funkay.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          b = this.funkay;
          b.set_x((g.width - b.get_width()) / 2);
          b.set_y((g.height - b.get_height()) / 2);
          b = this.loadBar = new G(0, g.height - 20).makeGraphic(g.width, 10, -59694);
          var c = 1;
          if (c == null) {
            c = 17;
          }
          if (c == 1 || c == 17) {
            b.set_x((g.width - b.get_width()) / 2);
          }
          if (c == 16 || c == 17) {
            b.set_y((g.height - b.get_height()) / 2);
          }
          this.add(this.loadBar);
          qc.initSongsManifest().onComplete(function (b) {
            a.callbacks = new Uo(l(a, a.onLoad));
            var c = a.callbacks.add("introComplete");
            if (z.SONG != null) {
              a.checkLoadSong(qc.getSongPath());
              if (z.SONG.needsVoices) {
                a.checkLoadSong(qc.getVocalPath());
              }
            }
            if (a.directory != null && a.directory.length > 0 && a.directory != "shared") {
              a.checkLibrary(a.directory);
            }
            g.camera.fade(g.camera.bgColor, 0.5, true);
            new Fc().start(1.5, function (a) {
              c();
            });
          });
        },
        checkLoadSong: function (a) {
          if (!W.cache.hasSound(a)) {
            W.getLibrary("songs");
            a.split(":").pop();
            var b = this.callbacks.add("song:" + a);
            W.loadSound(a).onComplete(function (a) {
              b();
            });
          }
        },
        checkLibrary: function (a) {
          yb.trace(W.hasLibrary(a), {
            fileName: "source/states/LoadingState.hx",
            lineNumber: 96,
            className: "states.LoadingState",
            methodName: "checkLibrary"
          });
          if (W.getLibrary(a) == null) {
            if (!Object.prototype.hasOwnProperty.call(oa.libraryPaths.h, a)) {
              throw new K("Missing library: " + a);
            }
            var b = this.callbacks.add("library:" + a);
            W.loadLibrary(a).onComplete(function (a) {
              b();
            });
          }
        },
        update: function (a) {
          U.prototype.update.call(this, a);
          this.funkay.setGraphicSize(g.width * 0.88 + (this.funkay.get_width() - g.width * 0.88) * 0.9 | 0);
          this.funkay.updateHitbox();
          if (this.get_controls().get_ACCEPT()) {
            this.funkay.setGraphicSize(this.funkay.get_width() + 60 | 0);
            this.funkay.updateHitbox();
          }
          if (this.callbacks != null) {
            this.targetShit = $b.remapToRange(this.callbacks.numRemaining / this.callbacks.length, 1, 0, 0, 1);
            a = this.loadBar;
            a.scale.set_x(a.scale.x + (this.targetShit - this.loadBar.scale.x) * 0.5);
          }
        },
        onLoad: function () {
          if (this.stopMusic && g.sound.music != null) {
            var a = g.sound.music;
            a.cleanup(a.autoDestroy, true);
          }
          U.switchState(this.target);
        },
        destroy: function () {
          U.prototype.destroy.call(this);
          this.callbacks = null;
        },
        __class__: qc
      });
function Uo(_0x1dfccd, _0x506a52) {
    this.fired = [];
    this.unfired = new V();
    this.length = this.numRemaining = 0;
    this.logId = null;
    this.callback = _0x1dfccd;
    this.logId = _0x506a52;
  }
  h["states.MultiCallback"] = Uo;
  Uo.__name__ = "states.MultiCallback";
  Uo.prototype = {
    add: function (_0x5ce26b) {
      if (_0x5ce26b == null) {
        _0x5ce26b = "untitled";
      }
      var _0x28eeb1 = this;
      _0x5ce26b = "" + this.length + ":" + _0x5ce26b;
      this.length++;
      this.numRemaining++;
      var _0x1d5a40 = null;
      _0x1d5a40 = function () {
        if (Object.prototype.hasOwnProperty.call(_0x28eeb1.unfired.h, _0x5ce26b)) {
          var _0x180f10 = _0x28eeb1.unfired;
          if (Object.prototype.hasOwnProperty.call(_0x180f10.h, _0x5ce26b)) {
            delete _0x180f10.h[_0x5ce26b];
          }
          _0x28eeb1.fired.push(_0x5ce26b);
          _0x28eeb1.numRemaining--;
          if (_0x28eeb1.logId != null && _0x28eeb1.logId != null) {
            yb.trace("" + _0x28eeb1.logId + ": fired " + (_0x5ce26b + ", " + _0x28eeb1.numRemaining + " remaining"), {
              fileName: "source/states/LoadingState.hx",
              lineNumber: 316,
              className: "states.MultiCallback",
              methodName: "log"
            });
          }
          if (_0x28eeb1.numRemaining == 0) {
            if (_0x28eeb1.logId != null && _0x28eeb1.logId != null) {
              yb.trace("" + _0x28eeb1.logId + ": all callbacks fired", {
                fileName: "source/states/LoadingState.hx",
                lineNumber: 316,
                className: "states.MultiCallback",
                methodName: "log"
              });
            }
            _0x28eeb1.callback();
          }
        } else if (_0x28eeb1.logId != null) {
          yb.trace("" + _0x28eeb1.logId + ": already fired " + _0x5ce26b, {
            fileName: "source/states/LoadingState.hx",
            lineNumber: 316,
            className: "states.MultiCallback",
            methodName: "log"
          });
        }
      };
      return this.unfired.h[_0x5ce26b] = _0x1d5a40;
    },
    __class__: Uo
  };
 function Kd(_0x2fc1ec, _0x32eb2e) {
    this.canSelect = this.selectedSomethin = !1;
    this.selectY = 146;
    this.menuY = this.barY = 0;
    this.optionShit = ["story_mode", "freeplay", "credits", "options"];
    U.call(this, _0x2fc1ec, _0x32eb2e);
  }
  h["states.MainMenuState"] = Kd;
  Kd.__name__ = "states.MainMenuState";
  Kd.__super__ = U;
  Kd.prototype = q(U.prototype, {
    create: function () {
      var _0x5ed5e7 = this;
      this.transIn = Wb.defaultTransIn;
      this.transOut = Wb.defaultTransOut;
      this.persistentUpdate = this.persistentDraw = !0;
      var _0x376132 = new G().makeGraphic(g.width, g.height, -13087028);
      this.add(_0x376132);
      var _0x5cfbdc = new yf(y.image("menus/titlescreen/bigBubbles"), 16, 0, -8.5);
      _0x376132 = _0x5cfbdc.scale;
      var _0x579f8e = 0.55;
      var _0x1cc350 = 0.55;
      if (_0x1cc350 == null) {
        _0x1cc350 = 0;
      }
      if (_0x579f8e == null) {
        _0x579f8e = 0;
      }
      _0x376132.set_x(_0x579f8e);
      _0x376132.set_y(_0x1cc350);
      _0x5cfbdc.set_x((g.width - _0x5cfbdc.get_width()) / 2);
      _0x5cfbdc.set_y((g.height - _0x5cfbdc.get_height()) / 2);
      this.add(_0x5cfbdc);
      var _0x5ce973 = new yf(y.image("menus/titlescreen/smallBubbles"), 16);
      _0x376132 = _0x5ce973.scale;
      _0x1cc350 = _0x579f8e = 0.55;
      if (_0x1cc350 == null) {
        _0x1cc350 = 0;
      }
      if (_0x579f8e == null) {
        _0x579f8e = 0;
      }
      _0x376132.set_x(_0x579f8e);
      _0x376132.set_y(_0x1cc350);
      _0x5ce973.set_x((g.width - _0x5ce973.get_width()) / 2);
      _0x5ce973.set_y((g.height - _0x5ce973.get_height()) / 2);
      this.add(_0x5ce973);
      _0x5cfbdc.velocity.set_y(30);
      _0x5ce973.velocity.set_y(70);
      this.render = new G().loadGraphic(y.image("menus/mainmenu/Render"));
      _0x376132 = this.render.scale;
      _0x1cc350 = _0x579f8e = 0.25;
      if (_0x1cc350 == null) {
        _0x1cc350 = 0;
      }
      if (_0x579f8e == null) {
        _0x579f8e = 0;
      }
      _0x376132.set_x(_0x579f8e);
      _0x376132.set_y(_0x1cc350);
      this.render.setPosition(-g.width, -800);
      this.render.set_antialiasing(!0);
      this.render.set_alpha(0);
      var _0x35e1d1 = {
        x: -880,
        alpha: 1
      };
      var _0x3ff94a = {
        ease: va.quartOut
      };
      this.guyTween = ka.tween(this.render, _0x35e1d1, 1, _0x3ff94a);
      this.add(this.render);
      this.menuBar = new G(1120, this.selectY).loadGraphic(y.image("menus/mainmenu/Bar"));
      this.add(this.menuBar);
      _0x376132 = this.menuBar.scrollFactor;
      _0x376132.set_x(0);
      _0x376132.set_y(0);
      this.menuBar.set_antialiasing(!0);
      _0x376132 = this.menuBar.scale;
      _0x1cc350 = _0x579f8e = 0.5;
      if (_0x1cc350 == null) {
        _0x1cc350 = 0;
      }
      if (_0x579f8e == null) {
        _0x579f8e = 0;
      }
      _0x376132.set_x(_0x579f8e);
      _0x376132.set_y(_0x1cc350);
      var _0x5d6fe2 = {
        ease: va.quartOut
      };
      this.menuBarTween = ka.tween(this.menuBar, {
        x: this.menuBar.x - 500
      }, 1, _0x5d6fe2);
      this.menuItems = new Ra();
      this.add(this.menuItems);
      _0x5cfbdc = 0;
      for (_0x5ce973 = this.optionShit; _0x5cfbdc < _0x5ce973.length;) {
        _0x376132 = _0x5ce973[_0x5cfbdc];
        var _0x38deaa = _0x5cfbdc++;
        var _0x251de5 = new G(0, 880 / this.optionShit.length + _0x38deaa * 100).loadGraphic(y.image("menus/mainmenu/" + _0x376132));
        _0x251de5.ID = _0x38deaa;
        _0x376132 = 1;
        if (_0x376132 == null) {
          _0x376132 = 17;
        }
        if (_0x376132 == 1 || _0x376132 == 17) {
          _0x251de5.set_x((g.width - _0x251de5.get_width()) / 2);
        }
        if (_0x376132 == 16 || _0x376132 == 17) {
          _0x251de5.set_y((g.height - _0x251de5.get_height()) / 2);
        }
        _0x251de5.set_x(_0x251de5.x + 350);
        this.menuItems.add(_0x251de5);
        _0x376132 = _0x251de5.scrollFactor;
        _0x376132.set_x(0);
        _0x376132.set_y(0);
        _0x251de5.set_antialiasing(!0);
        _0x376132 = _0x251de5.scale;
        _0x1cc350 = _0x579f8e = 0.5;
        if (_0x1cc350 == null) {
          _0x1cc350 = 0;
        }
        if (_0x579f8e == null) {
          _0x579f8e = 0;
        }
        _0x376132.set_x(_0x579f8e);
        _0x376132.set_y(_0x1cc350);
        this.menuY += 90;
        _0x251de5.set_x(_0x251de5.x + 500);
        var _0x17120a = {
          ease: va.quartOut
        };
        this.menuTween = ka.tween(_0x251de5, {
          x: _0x251de5.x - 500
        }, 1 + _0x38deaa / 9, _0x17120a);
      }
      this.logo = new G(720, -230).loadGraphic(y.image("menus/mainmenu/Logo"));
      _0x376132 = this.logo.scrollFactor;
      _0x376132.set_x(0);
      _0x376132.set_y(0);
      this.logo.set_antialiasing(!0);
      this.add(this.logo);
      this.logoTween = ka.tween(this.logo, {
        y: this.logo.y + 300
      }, 1, {
        ease: va.quartOut,
        onComplete: function (_0x2fcc77) {
          _0x5ed5e7.canSelect = !0;
        }
      });
      this.menuBars = new Ra();
      this.add(this.menuBars);
      _0x579f8e = new G(0, this.barY).makeGraphic(g.width, 50, -16777216);
      _0x376132 = 1;
      if (_0x376132 == null) {
        _0x376132 = 17;
      }
      if (_0x376132 == 1 || _0x376132 == 17) {
        _0x579f8e.set_x((g.width - _0x579f8e.get_width()) / 2);
      }
      if (_0x376132 == 16 || _0x376132 == 17) {
        _0x579f8e.set_y((g.height - _0x579f8e.get_height()) / 2);
      }
      _0x579f8e.set_x(_0x579f8e.x + -g.width);
      this.menuBars.add(_0x579f8e);
      this.barY += 670;
      _0x579f8e = new G(0, this.barY).makeGraphic(g.width, 50, -16777216);
      _0x376132 = 1;
      if (_0x376132 == null) {
        _0x376132 = 17;
      }
      if (_0x376132 == 1 || _0x376132 == 17) {
        _0x579f8e.set_x((g.width - _0x579f8e.get_width()) / 2);
      }
      if (_0x376132 == 16 || _0x376132 == 17) {
        _0x579f8e.set_y((g.height - _0x579f8e.get_height()) / 2);
      }
      _0x579f8e.set_x(_0x579f8e.x + g.width);
      this.menuBars.add(_0x579f8e);
      this.barY += 670;
      var _0x58b0c7 = {
        ease: va.quartOut
      };
      this.barTween1 = ka.tween(this.menuBars.members[0], {
        x: this.menuBars.members[0].x + g.width
      }, 0.5, _0x58b0c7);
      var _0x3e81c0 = {
        ease: va.quartOut
      };
      this.barTween2 = ka.tween(this.menuBars.members[1], {
        x: this.menuBars.members[1].x - g.width
      }, 0.5, _0x3e81c0);
      _0x5cfbdc = new G(5, g.height - 80).loadGraphic(y.image("snokido"));
      _0x376132 = _0x5cfbdc.scrollFactor;
      _0x1cc350 = _0x579f8e = 0;
      if (_0x1cc350 == null) {
        _0x1cc350 = 0;
      }
      if (_0x579f8e == null) {
        _0x579f8e = 0;
      }
      _0x376132.set_x(_0x579f8e);
      _0x376132.set_y(_0x1cc350);
      _0x5cfbdc.setGraphicSize(_0x5cfbdc.get_width() * 0.7 | 0);
      _0x5cfbdc.updateHitbox();
      _0x5cfbdc.set_antialiasing(C.data.antialiasing);
      
      _0x579f8e = new Q(12, g.height - 44, 0, "Friday Night Funkin'", 12);
      _0x376132 = _0x579f8e.scrollFactor;
      _0x376132.set_x(0);
      _0x376132.set_y(0);
      _0x579f8e.setFormat("VCR OSD Mono", 16, -1, "left", Ta.OUTLINE, -16777216);
      this.add(_0x579f8e);
      _0x579f8e = new Q(12, g.height - 24, 0, "patched by c1tcher", 12);
      _0x376132 = _0x579f8e.scrollFactor;
      _0x376132.set_x(0);
      _0x376132.set_y(0);
      _0x579f8e.setFormat("VCR OSD Mono", 16, -1, "left", Ta.OUTLINE, -16777216);
      this.add(_0x579f8e);
      this.changeItem();
      U.prototype.create.call(this);
    },
    update: function (_0x553585) {
      if (g.sound.music._volume < 0.8) {
        var _0x93c18d = g.sound.music;
        _0x93c18d.set_volume(_0x93c18d._volume + _0x553585 * 0.5);
        if (Va.vocals != null) {
          _0x93c18d = Va.vocals;
          _0x93c18d.set_volume(_0x93c18d._volume + _0x553585 * 0.5);
        }
      }
      if (!this.selectedSomethin) {
        if (this.get_controls().get_UI_UP_P()) {
          this.changeItem(-1);
        }
        if (this.get_controls().get_UI_DOWN_P()) {
          this.changeItem(1);
        }
        if (this.get_controls().get_BACK()) {
          this.selectedSomethin = true;
          g.sound.play(y.sound("cancelMenu"));
          U.switchState(new zc());
        }
        if (this.get_controls().get_ACCEPT()) {
          g.sound.play(y.sound("confirmMenu"));
          this.selectedSomethin = true;
          this.selectItem();
        }
        _0x93c18d = this.menuBar.y;
        this.menuBar.set_y(_0x93c18d + _0x553585 * 40 * (this.selectY - _0x93c18d));
      }
      U.prototype.update.call(this, _0x553585);
    },
    selectItem: function () {
      var _0x3c1aa9 = this;
      this.canSelect = !1;
      var _0x1d5034 = {
        ease: va.circOut
      };
      ka.tween(this.menuBar, {
        y: g.height / 2 - this.menuBar.get_height() / 2
      }, 0.6, _0x1d5034);
      var _0x1369d6 = {
        ease: va.circOut
      };
      ka.tween(this.menuBar.scale, {
        x: 0.6,
        y: 0.6
      }, 0.6, _0x1369d6);
      if (this.guyTween != null) {
        this.guyTween.cancel();
      }
      var _0x806f4d = {
        x: -g.width,
        alpha: 0
      };
      var _0x1da316 = {
        ease: va.quartOut
      };
      ka.tween(this.render, _0x806f4d, 1, _0x1da316);
      new Fc().start(0.5, function (_0x165c3d) {
        g.camera.fade(-16777216, 0.4, !1, null);
      });
      this.menuItems.forEach(function (_0x288d0d) {
        var _0xeab0e = {
          ease: va.circOut
        };
        var _0x4f4782 = {
          ease: va.circOut
        };
        var _0x26c436 = {
          ease: va.cubeOut
        };
        if (_0x288d0d.ID == Kd.curSelected) {
          id.flicker(_0x288d0d, 1, 0.15, false, false, function (_0x540849) {
            switch (_0x3c1aa9.optionShit[Kd.curSelected]) {
              case "credits":
                U.switchState(new bn());
                break;
              case "freeplay":
                U.switchState(new Va());
                break;
              case "options":
                U.switchState(new kd());
                kd.onPlayState = false;
                if (z.SONG != null) {
                  z.SONG.arrowSkin = null;
                  z.SONG.splashSkin = null;
                  z.stageUI = "normal";
                }
                break;
              case "story_mode":
                U.switchState(new Lb());
            }
          });
          ka.tween(_0x288d0d, {
            y: g.height / 2 - _0x288d0d.get_height() / 2
          }, 0.6, _0xeab0e);
          ka.tween(_0x288d0d.scale, {
            x: 0.6,
            y: 0.6
          }, 0.6, _0x4f4782);
        } else {
          ka.tween(_0x288d0d, {
            alpha: 0
          }, 0.3, _0x26c436);
        }
      });
    },
    changeItem: function (_0x62b1bf) {
      if (_0x62b1bf == null) {
        _0x62b1bf = 0;
      }
      var _0x456d57 = this;
      if (Kd.curSelected != Kd.curSelected + _0x62b1bf) {
        g.sound.play(y.sound("scrollMenu"));
      }
      Kd.curSelected = $b.wrap(Kd.curSelected + _0x62b1bf, 0, this.menuItems.length - 1);
      this.menuItems.forEach(function (_0x2b7193) {
        if (_0x2b7193.ID == Kd.curSelected) {
          _0x2b7193 = _0x2b7193.getGraphicMidpoint().y;
          _0x456d57.selectY = _0x2b7193 - 100;
        }
      });
    },
    boolToInt: function (_0x5dfc48) {
      if (_0x5dfc48 == 0) {
        return 0;
      } else {
        return 1;
      }
    },
    __class__: Kd
  });
      function z(a, b) {
        this.ratingName = "?";
        this.lastStepHit = this.lastBeatHit = -1;
        this.strumsBlocked = [];
        this.showComboNum = this.showRating = true;
        this.showCombo = false;
        this.totalPlayed = this.totalNotesHit = 0;
        this.isDead = this.transitioning = false;
        this.allowDebugKeys = this.iconsAnimations = true;
        this.freezeCamera = false;
        this.canPause = true;
        this.startedCountdown = false;
        this.canReset = true;
        this.skipArrowStartTween = this.paused = false;
        this.eventsPushed = [];
        this.noteTypes = [];
        this.debugNum = 0;
        this.finishTimer = null;
        this.dialogueCount = 0;
        this.multiplier = 0.2;
        this.bfPos = [];
        this.dadPos = [];
        this.marthaPos = [];
        this.camPos = [900, 330];
        this.camSnap = false;
        this.camMove = true;
        this.danceLeft = false;
        this.shadows = [];
        this.bounceStrength = 1;
        this.bounceHeight = 0;
        this.shouldBounce = false;
        this.ofs = 50;
        this.yy2 = 550;
        this.xx2 = 850;
        this.yy = 500;
        this.xx = 420;
        this.useDirectionalCamera = this.mustHit = this.followChars = false;
        this.defaultOpponentStrumY = [];
        this.defaultOpponentStrumX = [];
        this.defaultPlayerStrumY = [];
        this.defaultPlayerStrumX = [];
        this.startCallback = this.endCallback = null;
        this.introSoundsSuffix = "";
        this.boyfriendIdled = false;
        this.boyfriendIdleTime = 0;
        this.keysPressed = [];
        this.boyfriendCameraOffset = this.opponentCameraOffset = this.girlfriendCameraOffset = null;
        this.songLength = 0;
        this.inCutscene = this.skipCountdown = false;
        this.singAnimations = ["singLEFT", "singDOWN", "singUP", "singRIGHT"];
        this.defaultCamZoom = 1.05;
        this.songScore = this.songHits = this.songMisses = 0;
        this.cameraSpeed = 1;
        this.botplaySine = 0;
        this.guitarHeroSustains = this.instakillOnMiss = this.cpuControlled = this.practiceMode = false;
        this.healthGain = this.healthLoss = 1;
        this.updateTime = true;
        this.generatedMusic = this.endingSong = this.startingSong = false;
        this.ratingsData = jg.loadDefault();
        this.combo = this.songPercent = 0;
        this.gfSpeed = this.health = 1;
        this.curSong = "";
        this.camZoomingMult = this.camZoomingDecay = 1;
        this.camZooming = false;
        this.eventNotes = [];
        this.unspawnNotes = [];
        this.martha = this.dad = this.gf = this.boyfriend = null;
        this.spawnTime = 2000;
        this.playbackRate = 1;
        this.noteKillOffset = 350;
        this.songSpeedType = "multiplicative";
        this.songSpeed = 1;
        this.GF_Y = 130;
        this.GF_X = 400;
        this.BF_Y = this.DAD_X = this.DAD_Y = 100;
        this.BF_X = 770;
        this.variables = new V();
        this.gfMap = new V();
        this.dadMap = new V();
        this.boyfriendMap = new V();
        this.isCameraOnForcedPos = false;
        U.call(this, a, b);
      }
      h["states.PlayState"] = z;
      z.__name__ = "states.PlayState";
      z.__properties__ = {
        get_isPixelStage: "get_isPixelStage"
      };
      z.get_isPixelStage = function () {
        if (z.stageUI != "pixel") {
          return w.endsWith(z.stageUI, "-pixel");
        } else {
          return true;
        }
      };
      z.sortByTime = function (a, b) {
        a = a.strumTime;
        b = b.strumTime;
        var c = 0;
        if (a < b) {
          c = -1;
        } else if (a > b) {
          c = 1;
        }
        return c;
      };
      z.sortHitNotes = function (a, b) {
        if (a.lowPriority && !b.lowPriority) {
          return 1;
        }
        if (!a.lowPriority && b.lowPriority) {
          return -1;
        }
        a = a.strumTime;
        b = b.strumTime;
        var c = 0;
        if (a < b) {
          c = -1;
        } else if (a > b) {
          c = 1;
        }
        return c;
      };
      z.getKeyFromEvent = function (a, b) {
        if (b != -1) {
          for (var c = 0, d = a.length; c < d;) {
            var e = c++;
            for (var f = Ca.instance.keyboardBinds.h[a[e]], g = 0; g < f.length;) {
              var h = f[g];
              ++g;
              if (b == h) {
                return e;
              }
            }
          }
        }
        return -1;
      };
      z.__super__ = U;
      z.prototype = q(U.prototype, {
        create: function () {
          var a = this;
          y.clearStoredMemory();
          this.startCallback = l(this, this.startCountdown);
          this.endCallback = l(this, this.endSong);
          z.instance = this;
          var b = Ye.songName = null;
          b = C.defaultData.gameplaySettings.h.songspeed;
          this.set_playbackRate(Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "songspeed") ? C.data.gameplaySettings.h.songspeed : b);
          this.keysArray = ["note_left", "note_down", "note_up", "note_right"];
          if (g.sound.music != null) {
            b = g.sound.music;
            b.cleanup(b.autoDestroy, true);
          }
          b = null;
          b = C.defaultData.gameplaySettings.h.healthgain;
          this.healthGain = Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "healthgain") ? C.data.gameplaySettings.h.healthgain : b;
          b = null;
          b = C.defaultData.gameplaySettings.h.healthloss;
          this.healthLoss = Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "healthloss") ? C.data.gameplaySettings.h.healthloss : b;
          b = null;
          b = C.defaultData.gameplaySettings.h.instakill;
          this.instakillOnMiss = Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "instakill") ? C.data.gameplaySettings.h.instakill : b;
          b = null;
          b = C.defaultData.gameplaySettings.h.practice;
          this.practiceMode = Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "practice") ? C.data.gameplaySettings.h.practice : b;
          b = null;
          b = C.defaultData.gameplaySettings.h.botplay;
          this.cpuControlled = Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "botplay") ? C.data.gameplaySettings.h.botplay : b;
          this.guitarHeroSustains = C.data.guitarHeroSustains;
          this.camGame = this.initPsychCamera();
          this.camOv = new Vb();
          this.camHUD = new Vb();
          this.camOther = new Vb();
          this.camOv.bgColor &= 16777215;
          this.camOv.bgColor |= 0;
          this.camHUD.bgColor &= 16777215;
          this.camHUD.bgColor |= 0;
          this.camOther.bgColor &= 16777215;
          this.camOther.bgColor |= 0;
          this.camOv.set_alpha(1);
          this.camGame.set_alpha(1);
          this.camHUD.set_alpha(1);
          this.camOther.set_alpha(1);
          g.cameras.add(this.camOv, false);
          g.cameras.add(this.camHUD, false);
          g.cameras.add(this.camOther, false);
          this.grpNoteSplashes = new Ra();
          this.persistentDraw = this.persistentUpdate = true;
          if (z.SONG == null) {
            z.SONG = Pd.loadFromJson("tutorial");
          }
          N.mapBPMChanges(z.SONG);
          N.set_bpm(z.SONG.bpm);
          Kc.resetVariables();
          var c = z.SONG.song;
          var d = new sa("[~&\\\\;:<>#]", "");
          b = new sa("[.,'\"%?!]", "");
          c = d.split(w.replace(c, " ", "-")).join("-");
          this.curSong = this.songName = b.split(c).join("").toLowerCase();
          if (z.SONG.stage == null || z.SONG.stage.length < 1) {
            z.SONG.stage = Ae.vanillaSongStage(this.songName);
          }
          z.curStage = z.SONG.stage;
          var e = Ae.getStageFile(z.curStage);
          if (e == null) {
            e = Ae.dummy();
          }
          this.defaultCamZoom = e.defaultZoom;
          z.stageUI = "normal";
          if (e.stageUI != null && w.trim(e.stageUI).length > 0) {
            z.stageUI = e.stageUI;
          } else if (e.isPixelStage) {
            z.stageUI = "pixel";
          }
          this.BF_X = e.boyfriend[0];
          this.BF_Y = e.boyfriend[1];
          this.GF_X = e.girlfriend[0];
          this.GF_Y = e.girlfriend[1];
          this.DAD_X = e.opponent[0];
          this.DAD_Y = e.opponent[1];
          if (e.camera_speed != null) {
            this.cameraSpeed = e.camera_speed;
          }
          this.boyfriendCameraOffset = e.camera_boyfriend;
          if (this.boyfriendCameraOffset == null) {
            this.boyfriendCameraOffset = [0, 0];
          }
          this.opponentCameraOffset = e.camera_opponent;
          if (this.opponentCameraOffset == null) {
            this.opponentCameraOffset = [0, 0];
          }
          this.girlfriendCameraOffset = e.camera_girlfriend;
          if (this.girlfriendCameraOffset == null) {
            this.girlfriendCameraOffset = [0, 0];
          }
          this.boyfriendGroup = new db(this.BF_X, this.BF_Y);
          this.dadGroup = new db(this.DAD_X, this.DAD_Y);
          this.gfGroup = new db(this.GF_X, this.GF_Y);
          switch (z.curStage) {
            case "clubhouse":
              var f = new Gb("stages/disk-1/sky", -200, 0, 0.1, 0.1);
              b = f.scale;
              c = d = 3;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(f);
              f = new Gb("stages/disk-1/mountains", -472, -991, 0.4, 0.4);
              b = f.scale;
              c = d = 2;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(f);
              f = new Gb("stages/disk-1/Cloud", 94, -600, 0.2, 0.2);
              b = f.scale;
              c = d = 3.5;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(f);
              b = new Gb("stages/disk-1/trees", -1360, -960, 0.7, 0.7);
              this.add(b);
              var k = new Gb("stages/disk-1/background", 135, -737, 0.7, 0.7);
              b = k.scale;
              c = d = 3.5;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(k);
              k = new Gb("stages/disk-1/clubhouse", 94, -737);
              b = k.scale;
              c = d = 3.5;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(k);
              d = this.minnie = new G(546, 20);
              b = null;
              c = y.image("stages/disk-1/Minnie_assets", b, true);
              d.set_frames(fb.fromSparrow(c, y.getPath("images/stages/disk-1/Minnie_assets.xml", null, b)));
              this.minnie.set_antialiasing(C.data.antialiasing);
              this.minnie.animation.addByPrefix("danceLeft", "Minnie_left_Dance0", 24, false);
              this.minnie.animation.addByPrefix("danceRight", "Minnie_right_Dance0", 24, false);
              this.minnie.animation.play("danceLeft");
              b = this.minnie.scale;
              c = d = 0.85;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.minnie.updateHitbox();
              this.add(this.minnie);
              d = this.donald = new G(-599, 261);
              b = null;
              c = y.image("stages/disk-1/Donald_assets", b, true);
              d.set_frames(fb.fromSparrow(c, y.getPath("images/stages/disk-1/Donald_assets.xml", null, b)));
              this.donald.set_antialiasing(C.data.antialiasing);
              this.donald.animation.addByPrefix("bop", "Donald_idle", 24, false);
              this.donald.animation.play("bop");
              b = this.donald.scale;
              c = d = 1.2;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.donald.updateHitbox();
              this.add(this.donald);
              d = this.goofy = new G(1858, 67);
              b = null;
              c = y.image("stages/disk-1/Goofy_assets", b, true);
              d.set_frames(fb.fromSparrow(c, y.getPath("images/stages/disk-1/Goofy_assets.xml", null, b)));
              this.goofy.set_antialiasing(C.data.antialiasing);
              this.goofy.animation.addByPrefix("bop", "Goofy_idle", 24, false);
              this.goofy.animation.play("bop");
              b = this.goofy.scale;
              c = d = 1.4;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.goofy.updateHitbox();
              this.add(this.goofy);
              k = new Gb("stages/disk-1/sign", 1885.5, 573);
              b = k.scale;
              c = d = 0.4;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(k);
              ka.tween(f, {
                x: 170
              }, 5, {
                ease: va.quadInOut,
                type: 4
              });
              break;
            case "clubhouse-night":
              f = new Gb("stages/disk-1/night/sky", -200, 0, 0.1, 0.1);
              b = f.scale;
              c = d = 3;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(f);
              f = new Gb("stages/disk-1/night/stars", -200, 0, 0.12, 0.12);
              b = f.scale;
              c = d = 3;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(f);
              f = new Gb("stages/disk-1/night/moon", -200, 0, 0.14, 0.14);
              b = f.scale;
              c = d = 3;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(f);
              f = new Gb("stages/disk-1/mountains", -472, -991, 0.4, 0.4);
              b = f.scale;
              c = d = 2;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(f);
              f = new Gb("stages/disk-1/night/clouds", 94, -600, 0.2, 0.2);
              b = f.scale;
              c = d = 3.5;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(f);
              b = new Gb("stages/disk-1/trees", -1360, -960, 0.7, 0.7);
              this.add(b);
              k = new Gb("stages/disk-1/night/background", 135, -737, 0.7, 0.7);
              b = k.scale;
              c = d = 3.5;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(k);
              k = new Gb("stages/disk-1/night/clubhouse", 94, -737);
              b = k.scale;
              c = d = 3.5;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(k);
              k = new G(-750, -110);
              b = null;
              c = y.image("stages/disk-1/toodlesWorried", b, true);
              k.set_frames(fb.fromSparrow(c, y.getPath("images/stages/disk-1/toodlesWorried.xml", null, b)));
              k.set_antialiasing(C.data.antialiasing);
              k.animation.addByPrefix("idle", "Toodle-flying instance 1", 24, true);
              k.animation.play("idle");
              b = k.scale;
              c = d = 0.85;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              k.updateHitbox();
              this.add(k);
              this.sign = new Gb("stages/disk-1/sign", 1885.5, 573);
              b = this.sign.scale;
              c = d = 0.4;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.sign.set_color(6710886);
              this.add(this.sign);
              this.lights = new Gb("stages/disk-1/night/lights", 94, -737);
              b = this.lights.scale;
              c = d = 3.5;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.lights.set_blend(0);
              this.lights.set_alpha(0.6);
              this.add(this.lights);
              ka.tween(f, {
                x: 170
              }, 5, {
                ease: va.quadInOut,
                type: 4
              });
              break;
            case "clubhouse-sunset":
              f = new Gb("stages/disk-1/sunset/sky", -200, 0, 0.1, 0.1);
              b = f.scale;
              c = d = 3;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(f);
              f = new Gb("stages/disk-1/mountains", -472, -991, 0.4, 0.4);
              b = f.scale;
              c = d = 2;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(f);
              f = new Gb("stages/disk-1/sunset/clouds", 94, -600, 0.2, 0.2);
              b = f.scale;
              c = d = 3.5;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(f);
              b = new Gb("stages/disk-1/trees", -1360, -960, 0.7, 0.7);
              this.add(b);
              k = new Gb("stages/disk-1/background", 135, -737, 0.7, 0.7);
              b = k.scale;
              c = d = 3.5;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(k);
              k = new Gb("stages/disk-1/clubhouse", 94, -737);
              b = k.scale;
              c = d = 3.5;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(k);
              k = new G(-520, -30);
              b = null;
              c = y.image("stages/disk-1/toodlesWorried", b, true);
              k.set_frames(fb.fromSparrow(c, y.getPath("images/stages/disk-1/toodlesWorried.xml", null, b)));
              k.set_antialiasing(C.data.antialiasing);
              k.animation.addByPrefix("idle", "Toodle-flying instance 1", 24, true);
              k.animation.play("idle");
              b = k.scale;
              c = d = 0.85;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              k.updateHitbox();
              this.add(k);
              this.sign = new Gb("stages/disk-1/sign", 1885.5, 573);
              b = this.sign.scale;
              c = d = 0.4;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(this.sign);
              this.lights = new Gb("stages/disk-1/sunset/lights", 94, -737);
              b = this.lights.scale;
              c = d = 3.5;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.add(this.lights);
              ka.tween(f, {
                x: 170
              }, 5, {
                ease: va.quadInOut,
                type: 4
              });
              this.redBG = new G().makeGraphic(8000, 4000, -65536);
              b = this.redBG.scrollFactor;
              c = d = 0;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              b = this.redBG;
              b.set_x((g.width - b.get_width()) / 2);
              b.set_y((g.height - b.get_height()) / 2);
              this.redBG.set_visible(false);
              this.add(this.redBG);
              break;
            case "stage":
              new ck();
          }
          if (z.get_isPixelStage()) {
            this.introSoundsSuffix = "-pixel";
          }
          this.add(this.gfGroup);
          this.add(this.dadGroup);
          this.add(this.boyfriendGroup);
          if (!e.hide_girlfriend) {
            if (z.SONG.gfVersion == null || z.SONG.gfVersion.length < 1) {
              z.SONG.gfVersion = "gf";
            }
            this.gf = new ad(0, 0, z.SONG.gfVersion);
            this.startCharacterPos(this.gf);
            b = this.gf.scrollFactor;
            c = d = 0.95;
            if (c == null) {
              c = 0;
            }
            if (d == null) {
              d = 0;
            }
            b.set_x(d);
            b.set_y(c);
            this.gfGroup.add(this.gf);
          }
          this.dad = new ad(0, 0, z.SONG.player2);
          this.startCharacterPos(this.dad, true);
          this.dadGroup.add(this.dad);
          this.boyfriend = new ad(0, 0, z.SONG.player1, true);
          this.startCharacterPos(this.boyfriend);
          this.boyfriendGroup.add(this.boyfriend);
          d = this.girlfriendCameraOffset[0];
          c = this.girlfriendCameraOffset[1];
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          b = d;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          e = fa.pool.get().set(b, c);
          e._inPool = false;
          if (this.gf != null) {
            e.set_x(e.x + (this.gf.getGraphicMidpoint().x + this.gf.cameraPosition[0]));
            e.set_y(e.y + (this.gf.getGraphicMidpoint().y + this.gf.cameraPosition[1]));
          }
          if (w.startsWith(this.dad.curCharacter, "gf")) {
            this.dad.setPosition(this.GF_X, this.GF_Y);
            if (this.gf != null) {
              this.gf.set_visible(false);
            }
          }
          switch (z.curStage) {
            case "clubhouse":
              b = this.gf.scrollFactor;
              c = d = 1;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.overlay = new Gb("stages/disk-1/foregrounds");
              b = this.overlay.scale;
              c = d = 1.5;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              b = this.overlay.scrollFactor;
              c = d = 0;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              b = this.overlay;
              b.set_x((g.width - b.get_width()) / 2);
              b.set_y((g.height - b.get_height()) / 2);
              this.add(this.overlay);
              break;
            case "clubhouse-night":
              b = this.gf.scrollFactor;
              c = d = 1;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.martha = new ad(0, 0, "martha");
              this.startCharacterPos(this.martha, true);
              this.add(this.martha);
              this.overlay = new Gb("stages/disk-1/foregrounds");
              b = this.overlay.scale;
              c = d = 1.5;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              b = this.overlay.scrollFactor;
              c = d = 0;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              b = this.overlay;
              b.set_x((g.width - b.get_width()) / 2);
              b.set_y((g.height - b.get_height()) / 2);
              this.overlay.set_color(6710886);
              this.add(this.overlay);
              this.blu = new G().makeGraphic(8000, 4000, -16776961);
              b = this.blu.scrollFactor;
              c = d = 0;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.blu.set_blend(9);
              this.blu.set_alpha(0.25);
              b = this.blu;
              b.set_x((g.width - b.get_width()) / 2);
              b.set_y((g.height - b.get_height()) / 2);
              this.add(this.blu);
              break;
            case "clubhouse-sunset":
              b = this.gf.scrollFactor;
              c = d = 1;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              this.overlay = new Gb("stages/disk-1/foregrounds");
              b = this.overlay.scale;
              c = d = 1.5;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              b = this.overlay.scrollFactor;
              c = d = 0;
              if (c == null) {
                c = 0;
              }
              if (d == null) {
                d = 0;
              }
              b.set_x(d);
              b.set_y(c);
              b = this.overlay;
              b.set_x((g.width - b.get_width()) / 2);
              b.set_y((g.height - b.get_height()) / 2);
              this.add(this.overlay);
          }
          this.stagesFunc(function (a) {
            a.createPost();
          });
          switch (this.curSong) {
            case "maniacal":
              this.camPos = [800, 400];
              this.defaultCamZoom = 0.8;
              this.camHUD.fade(-16777216, 0, false, null);
              this.marthaPos = [this.martha.x, this.martha.y];
              this.dadPos = [this.dad.x, this.dad.y];
              this.bfPos = [this.boyfriend.x, this.boyfriend.y];
              break;
            case "repentance":
              this.tweenCameraZoom(0.8, 0);
              this.camHUD.set_alpha(0.00001);
              this.camGame.fade(-16777216, 0, false, null);
              break;
            case "unsettled":
              this.camPos = [950, 330];
              this.defaultCamZoom = 0.8;
              ka.tween(this.camGame, {
                zoom: 0.8
              }, 0.001);
              this.camHUD.set_alpha(0.00001);
              this.camGame.fade(-16777216, 0, false, null);
              break;
            case "welcome":
              this.camMove = false;
              this.camPos = [1050, -1000];
              this.defaultCamZoom = 0.5;
              ka.tween(this.camGame, {
                zoom: 0.35
              }, 0.001);
              this.camHUD.set_alpha(0.00001);
              this.camGame.fade(-16777216, 0, false, null);
          }
          this.comboGroup = new db();
          this.add(this.comboGroup);
          this.noteGroup = new Ra();
          this.add(this.noteGroup);
          this.uiGroup = new db();
          this.add(this.uiGroup);
          N.songPosition = -5000 / N.songPosition;
          c = C.data.timeBarType != "Disabled";
          this.timeTxt = new Q(z.STRUM_X + g.width / 2 - 248, 19, 400, "", 32);
          this.timeTxt.setFormat("assets/fonts/vcr.ttf", 32, -1, "center", Ta.OUTLINE, -16777216);
          b = this.timeTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.timeTxt.set_alpha(0);
          this.timeTxt.set_borderSize(2);
          this.timeTxt.set_visible(this.updateTime = c);
          if (C.data.downScroll) {
            this.timeTxt.set_y(g.height - 44);
          }
          if (C.data.timeBarType == "Song Name") {
            this.timeTxt.set_text(z.SONG.song);
          }
          this.timeBar = new Dh(0, this.timeTxt.y + this.timeTxt.get_height() / 4, "timeBar", function () {
            return a.songPercent;
          }, 0, 1);
          b = this.timeBar.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          b = this.timeBar;
          d = 1;
          if (d == null) {
            d = 17;
          }
          if (d == 1 || d == 17) {
            b.set_x((g.width - b.get_width()) / 2);
          }
          if (d == 16 || d == 17) {
            b.set_y((g.height - b.get_height()) / 2);
          }
          this.timeBar.set_alpha(0);
          this.timeBar.set_visible(c);
          this.strumLineNotes = new Ra();
          this.noteGroup.add(this.strumLineNotes);
          if (C.data.timeBarType == "Song Name") {
            this.timeTxt.set_size(24);
            b = this.timeTxt;
            b.set_y(b.y + 3);
          }
          b = new gc(100, 100);
          this.grpNoteSplashes.add(b);
          b.set_alpha(0.000001);
          this.opponentStrums = new Ra();
          this.playerStrums = new Ra();
          this.generateSong(z.SONG.song);
          this.noteGroup.add(this.grpNoteSplashes);
          this.camFollow = new hc(0, 0, 1, 1);
          this.camFollow.setPosition(e.x, e.y);
          e.put();
          if (z.prevCamFollow != null) {
            this.camFollow = z.prevCamFollow;
            z.prevCamFollow = null;
          }
          this.add(this.camFollow);
          g.camera.follow(this.camFollow, xf.LOCKON, 0);
          g.camera.set_zoom(this.defaultCamZoom);
          g.camera.snapToTarget();
          b = g.worldBounds;
          d = c = 0;
          e = g.width;
          f = g.height;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.x = c;
          b.y = d;
          b.width = e;
          b.height = f;
          this.moveCameraSection();
          b = this.healthBar = new Dh(0, g.height * (C.data.downScroll ? 0.11 : 0.89), "healthBar", function () {
            return a.health;
          }, 0, 2);
          d = 1;
          if (d == null) {
            d = 17;
          }
          if (d == 1 || d == 17) {
            b.set_x((g.width - b.get_width()) / 2);
          }
          if (d == 16 || d == 17) {
            b.set_y((g.height - b.get_height()) / 2);
          }
          this.healthBar.set_leftToRight(false);
          b = this.healthBar.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.healthBar.set_visible(!C.data.hideHud);
          this.healthBar.set_alpha(C.data.healthBarAlpha);
          this.reloadHealthBarColors();
          this.iconP1 = new Ue(this.boyfriend.healthIcon, true);
          this.iconP1.set_y(this.healthBar.y - 75);
          this.iconP1.set_visible(!C.data.hideHud);
          this.iconP1.set_alpha(C.data.healthBarAlpha);
          this.iconP2 = new Ue(this.dad.healthIcon, false);
          this.iconP2.set_y(this.healthBar.y - 75);
          this.iconP2.set_visible(!C.data.hideHud);
          this.iconP2.set_alpha(C.data.healthBarAlpha);
          this.scoreTxt = new Q(0, g.height - 25, g.width, "", 20);
          this.scoreTxt.setFormat("assets/fonts/vcr.ttf", 20, -1, "center", Ta.OUTLINE, -16777216);
          b = this.scoreTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.scoreTxt.set_borderSize(1.25);
          this.scoreTxt.set_visible(!C.data.hideHud);
          this.updateScore(false);
          this.uiGroup.add(this.scoreTxt);
          if (C.data.downScroll) {
            this.scoreTxt.set_y(7);
          }
          this.botplayTxt = new Q(400, this.timeBar.y + 55, g.width - 800, "BOTPLAY", 32);
          this.botplayTxt.setFormat("assets/fonts/vcr.ttf", 32, -1, "center", Ta.OUTLINE, -16777216);
          b = this.botplayTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.botplayTxt.set_borderSize(1.25);
          this.botplayTxt.set_visible(this.cpuControlled);
          this.uiGroup.add(this.botplayTxt);
          if (C.data.downScroll) {
            this.botplayTxt.set_y(this.timeBar.y - 78);
          }
          this.uiGroup.set_cameras([this.camHUD]);
          this.noteGroup.set_cameras([this.camHUD]);
          this.comboGroup.set_cameras([this.camHUD]);
          this.startingSong = true;
          this.eventsPushed = this.noteTypes = null;
          if (this.eventNotes.length > 1) {
            f = 0;
            for (b = this.eventNotes; f < b.length;) {
              c = b[f];
              ++f;
              c.strumTime -= this.eventEarlyTrigger(c);
            }
            this.eventNotes.sort(z.sortByTime);
          }
          this.startCallback();
          this.RecalculateRating();
          na.get_current().stage.addEventListener("keyDown", l(this, this.onKeyPress));
          na.get_current().stage.addEventListener("keyUp", l(this, this.onKeyRelease));
          if (C.data.hitsoundVolume > 0) {
            y.sound("hitsound");
          }
          y.sound("missnote1");
          y.sound("missnote2");
          y.sound("missnote3");
          y.image("alphabet");
          if (Ye.songName != null) {
            y.returnSound("music", Ye.songName, null);
          } else {
            c = C.data.pauseMusic;
            d = new sa("[~&\\\\;:<>#]", "");
            b = new sa("[.,'\"%?!]", "");
            c = d.split(w.replace(c, " ", "-")).join("-");
            if (b.split(c).join("").toLowerCase() != "none") {
              c = C.data.pauseMusic;
              d = new sa("[~&\\\\;:<>#]", "");
              b = new sa("[.,'\"%?!]", "");
              c = d.split(w.replace(c, " ", "-")).join("-");
              y.returnSound("music", b.split(c).join("").toLowerCase(), null);
            }
          }
          this.callOnScripts("onCreatePost");
          z.healthDots = new db(10);
          this.add(z.healthDots);
          z.healthDots.set_cameras([this.camHUD]);
          z.hBars = new db(2);
          this.add(z.hBars);
          z.hBars.set_cameras([this.camHUD]);
          f = 0;
          for (k = [z.hBarP1, z.hBarP2]; f < k.length;) {
            b = k[f];
            e = c = f++;
            var h = new G(e > 0 ? 20 : 975, C.data.downScroll ? 30 : 535).loadGraphic(y.image("hBar"));
            b = h.scale;
            c = d = 1;
            if (c == null) {
              c = 0;
            }
            if (d == null) {
              d = 0;
            }
            b.set_x(d);
            b.set_y(c);
            h.set_antialiasing(true);
            h.set_flipX(e > 0);
            z.hBars.add(h);
          }
          for (f = 0; f < 10;) {
            e = f++;
            k = new G(z.dotPos[e > 4 ? e - 5 : e][0] * 0.19, z.dotPos[e > 4 ? e - 5 : e][1] * 0.19).loadGraphic(y.image("healthdot"));
            b = k.scale;
            c = d = 1;
            if (c == null) {
              c = 0;
            }
            if (d == null) {
              d = 0;
            }
            b.set_x(d);
            b.set_y(c);
            k.set_antialiasing(true);
            k.updateHitbox();
            d = k.origin;
            c = b = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            d.set_x(b);
            d.set_y(c);
            k.ID = e;
            if (e > 4) {
              k.set_x(k.x * -1);
            }
            k.set_x(k.x + (e > 4 ? 262 : 966));
            k.set_y(k.y + (C.data.downScroll ? 29 : 534));
            z.healthDots.add(k);
          }
          z.iP1 = new Ue(this.boyfriend.healthIcon, true);
          z.iP2 = new Ue(this.dad.healthIcon, false);
          f = 0;
          for (k = [z.iP1, z.iP2]; f < k.length;) {
            b = k[f];
            e = c = f++;
            h = b;
            this.add(h);
            h.setPosition(e > 0 ? 5 : 1110, C.data.downScroll ? 15 : 520);
            b = h.scale;
            c = d = 0.8;
            if (c == null) {
              c = 0;
            }
            if (d == null) {
              d = 0;
            }
            b.set_x(d);
            b.set_y(c);
            h.set_cameras([this.camHUD]);
          }
          z.upBar = new G(0, -g.height + z.barHeight).makeGraphic(g.width, g.height | 0, -16777216);
          z.upBar.set_cameras([this.camOv]);
          this.add(z.upBar);
          z.lowBar = new G(0, g.height - z.barHeight).makeGraphic(g.width, g.height | 0, -16777216);
          z.lowBar.set_cameras([this.camOv]);
          this.add(z.lowBar);
          e = this.scoreTxt;
          e.setFormat("assets/fonts/dokdo.ttf", 20);
          e.set_y(e.y - (e._defaultFormat.size | 0) / 10);
          z.bfHealth = z.oppHealth = 1;
          this.cacheCountdown();
          this.cachePopUpScore();
          U.prototype.create.call(this);
          y.clearUnusedMemory();
          if (this.eventNotes.length < 1) {
            this.checkEventNote();
          }
        },
        set_songSpeed: function (a) {
          if (this.generatedMusic) {
            var b = a / this.songSpeed;
            if (b != 1) {
              for (var c = 0, d = this.notes.members; c < d.length;) {
                var e = d[c];
                ++c;
                e.resizeByRatio(b);
              }
              c = 0;
              for (d = this.unspawnNotes; c < d.length;) {
                e = d[c];
                ++c;
                e.resizeByRatio(b);
              }
            }
          }
          this.songSpeed = a;
          this.noteKillOffset = Math.max(N.stepCrochet, 350 / this.songSpeed * this.playbackRate);
          return a;
        },
        set_playbackRate: function (a) {
          if (this.generatedMusic) {
            this.vocals.set_pitch(a);
            this.opponentVocals.set_pitch(a);
            g.sound.music.set_pitch(a);
            var b = this.playbackRate / a;
            if (b != 1) {
              for (var c = 0, d = this.notes.members; c < d.length;) {
                var e = d[c];
                ++c;
                e.resizeByRatio(b);
              }
              c = 0;
              for (d = this.unspawnNotes; c < d.length;) {
                e = d[c];
                ++c;
                e.resizeByRatio(b);
              }
            }
          }
          this.playbackRate = a;
          g.animationTimeScale = a;
          N.safeZoneOffset = C.data.safeFrames / 60 * 1000 * a;
          this.setOnScripts("playbackRate", this.playbackRate);
          return this.playbackRate;
        },
        reloadHealthBarColors: function () {
          var a = this.healthBar;
          var b = this.dad.healthColorArray[0];
          var c = this.dad.healthColorArray[1];
          var d = this.dad.healthColorArray[2];
          var e = xb._new();
          var f = 255;
          if (f == null) {
            f = 255;
          }
          e = (e & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16) & -65281 | (c > 255 ? 255 : c < 0 ? 0 : c) << 8;
          e &= -256;
          e |= d > 255 ? 255 : d < 0 ? 0 : d;
          e &= 16777215;
          e |= (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
          b = this.boyfriend.healthColorArray[0];
          c = this.boyfriend.healthColorArray[1];
          d = this.boyfriend.healthColorArray[2];
          var g = xb._new();
          f = 255;
          if (f == null) {
            f = 255;
          }
          g = (g & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16) & -65281 | (c > 255 ? 255 : c < 0 ? 0 : c) << 8;
          g &= -256;
          g |= d > 255 ? 255 : d < 0 ? 0 : d;
          g &= 16777215;
          g |= (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
          a.setColors(e, g);
        },
        addCharacterToList: function (a, b) {
          switch (b) {
            case 0:
              if (!Object.prototype.hasOwnProperty.call(this.boyfriendMap.h, a)) {
                b = new ad(0, 0, a, true);
                this.boyfriendMap.h[a] = b;
                this.boyfriendGroup.add(b);
                this.startCharacterPos(b);
                b.set_alpha(0.00001);
              }
              break;
            case 1:
              if (!Object.prototype.hasOwnProperty.call(this.dadMap.h, a)) {
                b = new ad(0, 0, a);
                this.dadMap.h[a] = b;
                this.dadGroup.add(b);
                this.startCharacterPos(b, true);
                b.set_alpha(0.00001);
              }
              break;
            case 2:
              if (this.gf != null && !Object.prototype.hasOwnProperty.call(this.gfMap.h, a)) {
                b = new ad(0, 0, a);
                var c = b.scrollFactor;
                var d = 0.95;
                var e = 0.95;
                if (e == null) {
                  e = 0;
                }
                if (d == null) {
                  d = 0;
                }
                c.set_x(d);
                c.set_y(e);
                this.gfMap.h[a] = b;
                this.gfGroup.add(b);
                this.startCharacterPos(b);
                b.set_alpha(0.00001);
              }
          }
        },
        getLuaObject: function (a, b) {
          return null;
        },
        startCharacterPos: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (b && w.startsWith(a.curCharacter, "gf")) {
            a.setPosition(this.GF_X, this.GF_Y);
            b = a.scrollFactor;
            var c = 0.95;
            var d = 0.95;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
            a.danceEveryNumBeats = 2;
          }
          a.set_x(a.x + a.positionArray[0]);
          a.set_y(a.y + a.positionArray[1]);
        },
        startVideo: function (a) {
          var b = this;
          this.inCutscene = true;
          var c = y.video(a);
          if (W.exists(c)) {
            this.videoCurrentlyPlaying = new sc(c);
            this.isVideoCurrentlyPlaying = true;
            this.videoCurrentlyPlaying.finishCallback = function () {
              b.inCutscene = false;
              b.startAndEnd();
            };
          } else {
            g.log.advanced("Couldnt find video file: " + a, Ba.WARNING, true);
            this.startAndEnd();
          }
        },
        startAndEnd: function () {
          if (this.endingSong) {
            this.endSong();
          } else {
            this.startCountdown();
          }
        },
        startDialogue: function (a, b) {
          var c = this;
          if (this.psychDialogue == null) {
            if (a.dialogue.length > 0) {
              this.inCutscene = true;
              this.psychDialogue = new dc(a, b);
              a = this.psychDialogue.scrollFactor;
              a.set_x(0);
              a.set_y(0);
              this.psychDialogue.finishThing = this.endingSong ? function () {
                c.psychDialogue = null;
                c.endSong();
              } : function () {
                c.psychDialogue = null;
                c.startCountdown();
              };
              this.psychDialogue.nextDialogueThing = l(this, this.startNextDialogue);
              this.psychDialogue.skipDialogueThing = l(this, this.skipDialogue);
              this.psychDialogue.set_cameras([this.camHUD]);
              this.add(this.psychDialogue);
            } else {
              g.log.advanced("Your dialogue file is badly formatted!", Ba.WARNING, true);
              this.startAndEnd();
            }
          }
        },
        cacheCountdown: function () {
          var a = Object.create(null);
          switch (z.stageUI) {
            case "normal":
              var b = ["ready", "set", "go"];
              break;
            case "pixel":
              b = ["" + z.stageUI + "UI/ready-pixel", "" + z.stageUI + "UI/set-pixel", "" + z.stageUI + "UI/date-pixel"];
              break;
            default:
              b = ["" + z.stageUI + "UI/ready", "" + z.stageUI + "UI/set", "" + z.stageUI + "UI/go"];
          }
          a[z.stageUI] = b;
          a = a[z.stageUI];
          for (b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            y.image(c);
          }
          y.sound("intro3" + this.introSoundsSuffix);
          y.sound("intro2" + this.introSoundsSuffix);
          y.sound("intro1" + this.introSoundsSuffix);
          y.sound("introGo" + this.introSoundsSuffix);
        },
        startCountdown: function () {
          var a = this;
          if (this.startedCountdown) {
            this.callOnScripts("onStartCountdown");
            return false;
          }
          z.seenCutscene = true;
          this.inCutscene = false;
          if (this.callOnScripts("onStartCountdown", null, true) != Ib.Function_Stop) {
            if (this.skipCountdown || z.startOnTime > 0) {
              this.skipArrowStartTween = true;
            }
            this.generateStaticArrows(0);
            this.generateStaticArrows(1);
            for (var b = 0, c = this.playerStrums.length; b < c;) {
              var d = b++;
              this.defaultPlayerStrumX[d] = this.playerStrums.members[d].x;
              this.defaultPlayerStrumY[d] = this.playerStrums.members[d].y;
            }
            b = 0;
            for (c = this.opponentStrums.length; b < c;) {
              d = b++;
              this.defaultOpponentStrumX[d] = this.opponentStrums.members[d].x;
              this.defaultOpponentStrumY[d] = this.opponentStrums.members[d].y;
            }
            this.startedCountdown = true;
            N.songPosition = -N.crochet * 5;
            this.setOnScripts("startedCountdown", true);
            this.callOnScripts("onCountdownStarted", null);
            var e = 0;
            if (z.startOnTime > 0) {
              this.clearNotesBefore(z.startOnTime);
              this.setSongTime(z.startOnTime - 350);
              return true;
            }
            if (this.skipCountdown) {
              this.setSongTime(0);
              return true;
            }
            this.moveCameraSection();
            this.startTimer = new Fc().start(N.crochet / 1000 / this.playbackRate, function (b) {
              a.characterBopper(b.loops - b._loopsCounter);
              b = Object.create(null);
              switch (z.stageUI) {
                case "normal":
                  var c = ["ready", "set", "go"];
                  break;
                case "pixel":
                  c = ["" + z.stageUI + "UI/ready-pixel", "" + z.stageUI + "UI/set-pixel", "" + z.stageUI + "UI/date-pixel"];
                  break;
                default:
                  c = ["" + z.stageUI + "UI/ready", "" + z.stageUI + "UI/set", "" + z.stageUI + "UI/go"];
              }
              b[z.stageUI] = c;
              c = b[z.stageUI];
              b = C.data.antialiasing && !z.get_isPixelStage();
              var d = Wf.THREE;
              switch (e) {
                case 0:
                  g.sound.play(y.sound("intro3" + a.introSoundsSuffix), 0.6);
                  d = Wf.THREE;
                  break;
                case 1:
                  var f = new G().loadGraphic(y.image(c[0]));
                  f.set_cameras([a.camOther]);
                  c = f.scrollFactor;
                  c.set_x(0);
                  c.set_y(0);
                  f.updateHitbox();
                  if (z.get_isPixelStage()) {
                    f.setGraphicSize(f.get_width() * z.daPixelZoom | 0);
                  }
                  f.set_x((g.width - f.get_width()) / 2);
                  f.set_y((g.height - f.get_height()) / 2);
                  f.set_antialiasing(b);
                  a.insert(a.members.indexOf(a.noteGroup), f);
                  ka.tween(f, {
                    alpha: 0
                  }, N.crochet / 1000, {
                    ease: va.cubeInOut,
                    onComplete: function (b) {
                      a.remove(f);
                      f.destroy();
                    }
                  });
                  a.countdownReady = f;
                  g.sound.play(y.sound("intro2" + a.introSoundsSuffix), 0.6);
                  d = Wf.TWO;
                  break;
                case 2:
                  var h = new G().loadGraphic(y.image(c[1]));
                  h.set_cameras([a.camOther]);
                  c = h.scrollFactor;
                  c.set_x(0);
                  c.set_y(0);
                  h.updateHitbox();
                  if (z.get_isPixelStage()) {
                    h.setGraphicSize(h.get_width() * z.daPixelZoom | 0);
                  }
                  h.set_x((g.width - h.get_width()) / 2);
                  h.set_y((g.height - h.get_height()) / 2);
                  h.set_antialiasing(b);
                  a.insert(a.members.indexOf(a.noteGroup), h);
                  ka.tween(h, {
                    alpha: 0
                  }, N.crochet / 1000, {
                    ease: va.cubeInOut,
                    onComplete: function (b) {
                      a.remove(h);
                      h.destroy();
                    }
                  });
                  a.countdownSet = h;
                  g.sound.play(y.sound("intro1" + a.introSoundsSuffix), 0.6);
                  d = Wf.ONE;
                  break;
                case 3:
                  var p = new G().loadGraphic(y.image(c[2]));
                  p.set_cameras([a.camOther]);
                  c = p.scrollFactor;
                  c.set_x(0);
                  c.set_y(0);
                  p.updateHitbox();
                  if (z.get_isPixelStage()) {
                    p.setGraphicSize(p.get_width() * z.daPixelZoom | 0);
                  }
                  p.set_x((g.width - p.get_width()) / 2);
                  p.set_y((g.height - p.get_height()) / 2);
                  p.set_antialiasing(b);
                  a.insert(a.members.indexOf(a.noteGroup), p);
                  ka.tween(p, {
                    alpha: 0
                  }, N.crochet / 1000, {
                    ease: va.cubeInOut,
                    onComplete: function (b) {
                      a.remove(p);
                      p.destroy();
                    }
                  });
                  a.countdownGo = p;
                  g.sound.play(y.sound("introGo" + a.introSoundsSuffix), 0.6);
                  d = Wf.GO;
                  break;
                case 4:
                  d = Wf.START;
              }
              a.notes.forEachAlive(function (a) {
                if (C.data.opponentStrums || a.mustPress) {
                  a.copyAlpha = false;
                  a.set_alpha(a.multAlpha);
                  if (C.data.middleScroll && !a.mustPress) {
                    a.set_alpha(a.alpha * 0.35);
                  }
                }
              });
              a.stagesFunc(function (a) {
                a.countdownTick(d, e);
              });
              a.callOnLuas("onCountdownTick", [e]);
              a.callOnHScript("onCountdownTick", [d, e]);
              e += 1;
            }, 5);
          }
          return true;
        },
        createCountdownSprite: function (a, b) {
          var c = this;
          var d = new G().loadGraphic(y.image(a));
          d.set_cameras([this.camOther]);
          a = d.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          d.updateHitbox();
          if (z.get_isPixelStage()) {
            d.setGraphicSize(d.get_width() * z.daPixelZoom | 0);
          }
          d.set_x((g.width - d.get_width()) / 2);
          d.set_y((g.height - d.get_height()) / 2);
          d.set_antialiasing(b);
          this.insert(this.members.indexOf(this.noteGroup), d);
          ka.tween(d, {
            alpha: 0
          }, N.crochet / 1000, {
            ease: va.cubeInOut,
            onComplete: function (a) {
              c.remove(d);
              d.destroy();
            }
          });
          return d;
        },
        addBehindGF: function (a) {
          this.insert(this.members.indexOf(this.gfGroup), a);
        },
        addBehindBF: function (a) {
          this.insert(this.members.indexOf(this.boyfriendGroup), a);
        },
        addBehindDad: function (a) {
          this.insert(this.members.indexOf(this.dadGroup), a);
        },
        clearNotesBefore: function (a) {
          for (var b = this.unspawnNotes.length - 1; b >= 0;) {
            var c = this.unspawnNotes[b];
            if (c.strumTime - 350 < a) {
              c.set_active(false);
              c.set_visible(false);
              c.ignoreNote = true;
              c.kill();
              M.remove(this.unspawnNotes, c);
              c.destroy();
            }
            --b;
          }
          for (b = this.notes.length - 1; b >= 0;) {
            c = this.notes.members[b];
            if (c.strumTime - 350 < a) {
              c.set_active(false);
              c.set_visible(false);
              c.ignoreNote = true;
              this.invalidateNote(c);
            }
            --b;
          }
        },
        updateScore: function (a) {
          if (a == null) {
            a = false;
          }
          if (this.callOnScripts("preUpdateScore", [a], true) != Ib.Function_Stop) {
            var b = this.ratingName;
            if (this.totalPlayed != 0) {
              var c = Oi.floorDecimal(this.ratingPercent * 100, 2);
              b += " (" + c + "%) - " + this.ratingFC;
            }
            this.scoreTxt.set_text("Score: " + this.songScore + (this.instakillOnMiss ? "" : " | Misses: " + this.songMisses) + (" | Rating: " + b) + "\n");
            if (!a && !this.cpuControlled) {
              this.doScoreBop();
            }
            this.callOnScripts("onUpdateScore", [a]);
          }
        },
        fullComboFunction: function () {
          var a = this.ratingsData[0].hits;
          var b = this.ratingsData[1].hits;
          var c = this.ratingsData[2].hits;
          var d = this.ratingsData[3].hits;
          this.ratingFC = "";
          if (this.songMisses == 0) {
            if (c > 0 || d > 0) {
              this.ratingFC = "FC";
            } else if (b > 0) {
              this.ratingFC = "GFC";
            } else if (a > 0) {
              this.ratingFC = "SFC";
            }
          } else {
            this.ratingFC = this.songMisses < 10 ? "SDCB" : "Clear";
          }
        },
        doScoreBop: function () {
          var a = this;
          if (C.data.scoreZoom) {
            if (this.scoreTxtTween != null) {
              this.scoreTxtTween.cancel();
            }
            this.scoreTxt.scale.set_x(1.075);
            this.scoreTxt.scale.set_y(1.075);
            this.scoreTxtTween = ka.tween(this.scoreTxt.scale, {
              x: 1,
              y: 1
            }, 0.2, {
              onComplete: function (b) {
                a.scoreTxtTween = null;
              }
            });
          }
        },
        setSongTime: function (a) {
          if (a < 0) {
            a = 0;
          }
          g.sound.music.pause();
          this.vocals.pause();
          this.opponentVocals.pause();
          g.sound.music.set_time(a);
          g.sound.music.set_pitch(this.playbackRate);
          g.sound.music.play();
          if (N.songPosition <= this.vocals._length) {
            this.vocals.set_time(a);
            this.opponentVocals.set_time(a);
            this.vocals.set_pitch(this.playbackRate);
            this.opponentVocals.set_pitch(this.playbackRate);
          }
          this.vocals.play();
          this.opponentVocals.play();
          N.songPosition = a;
        },
        startNextDialogue: function () {
          this.dialogueCount++;
          this.callOnScripts("onNextDialogue", [this.dialogueCount]);
        },
        skipDialogue: function () {
          this.callOnScripts("onSkipDialogue", [this.dialogueCount]);
        },
        startSong: function () {
          this.startingSong = false;
          g.sound.playMusic(this.inst._sound, 1, false);
          g.sound.music.set_pitch(this.playbackRate);
          var a = this;
          g.sound.music.onComplete = function () {
            a.finishSong();
          };
          this.vocals.play();
          this.opponentVocals.play();
          if (z.startOnTime > 0) {
            this.setSongTime(z.startOnTime - 500);
          }
          z.startOnTime = 0;
          if (this.paused) {
            g.sound.music.pause();
            this.vocals.pause();
            this.opponentVocals.pause();
          }
          this.songLength = g.sound.music._length;
          ka.tween(this.timeBar, {
            alpha: 1
          }, 0.5, {
            ease: va.circOut
          });
          ka.tween(this.timeTxt, {
            alpha: 1
          }, 0.5, {
            ease: va.circOut
          });
          switch (this.curSong) {
            case "maniacal":
              this.camHUD.fade(-16777216, 6, true, null);
              ka.tween(this.camGame, {
                zoom: 0.52
              }, 6, {
                ease: va.cubeInOut
              });
              break;
            case "repentance":
              this.camGame.fade(-16777216, 7, true, null);
              this.tweenCameraZoom(0.6, 9);
              break;
            case "unsettled":
              this.camGame.fade(-16777216, 7, true, null);
              ka.tween(this.camGame, {
                zoom: 0.52
              }, 9, {
                ease: va.cubeInOut
              });
              break;
            case "welcome":
              this.camGame.fade(-16777216, 3, true, null);
          }
          this.setOnScripts("songLength", this.songLength);
          this.callOnScripts("onSongStart");
        },
        generateSong: function (a) {
          this.set_songSpeed(z.SONG.speed);
          a = C.defaultData.gameplaySettings.h.scrolltype;
          this.songSpeedType = Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "scrolltype") ? C.data.gameplaySettings.h.scrolltype : a;
          switch (this.songSpeedType) {
            case "constant":
              a = C.defaultData.gameplaySettings.h.scrollspeed;
              this.set_songSpeed(Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "scrollspeed") ? C.data.gameplaySettings.h.scrollspeed : a);
              break;
            case "multiplicative":
              a = C.defaultData.gameplaySettings.h.scrollspeed;
              this.set_songSpeed(z.SONG.speed * (Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "scrollspeed") ? C.data.gameplaySettings.h.scrollspeed : a));
          }
          a = z.SONG;
          N.set_bpm(a.bpm);
          this.vocals = new ce();
          this.opponentVocals = new ce();
          try {
            if (a.needsVoices) {
              var b = "songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3";
              this.vocals.loadEmbedded(b ?? "songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3");
              var c = "songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3";
              if (c != null) {
                this.opponentVocals.loadEmbedded(c);
              }
            }
          } catch (sp) {
            Na.lastError = sp;
          }
          this.vocals.set_pitch(this.playbackRate);
          this.opponentVocals.set_pitch(this.playbackRate);
          g.sound.list.add(this.vocals);
          g.sound.list.add(this.opponentVocals);
          this.inst = new ce();
          try {
            this.inst.loadEmbedded("songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Inst.mp3");
          } catch (sp) {
            Na.lastError = sp;
          }
          g.sound.list.add(this.inst);
          this.notes = new Ra();
          this.noteGroup.add(this.notes);
          b = a.notes;
          c = y.getPath("data/" + (this.songName + "/events.json"), "TEXT", null);
          if (W.exists(c)) {
            var d = Pd.loadFromJson("events", this.songName).events;
            for (c = 0; c < d.length;) {
              var e = d[c];
              ++c;
              for (var f = 0, k = e[1].length; f < k;) {
                var h = f++;
                this.makeEvent(e, h);
              }
            }
          }
          for (c = 0; c < b.length;) {
            e = b[c];
            ++c;
            f = 0;
            k = e.sectionNotes;
            while (f < k.length) {
              h = k[f];
              ++f;
              var n = h[0];
              var p = h[1] % 4 | 0;
              var l = e.mustHitSection;
              if (h[1] > 3) {
                l = !e.mustHitSection;
              }
              var m = this.unspawnNotes.length > 0 ? this.unspawnNotes[this.unspawnNotes.length - 1 | 0] : null;
              var t = new Pa(n, p, m);
              t.mustPress = l;
              t.sustainLength = h[2];
              t.gfNote = e.gfSection && h[1] < 4;
              t.set_noteType(h[3]);
              if (typeof h[3] != "string") {
                t.set_noteType(ia.noteTypeList[h[3]]);
              }
              d = t.scrollFactor;
              d.set_x(0);
              d.set_y(0);
              this.unspawnNotes.push(t);
              m = Math.floor(t.sustainLength / N.stepCrochet);
              if (m > 0) {
                d = 0;
                for (var q = m + 1; d < q;) {
                  var u = d++;
                  m = this.unspawnNotes[this.unspawnNotes.length - 1 | 0];
                  u = new Pa(n + N.stepCrochet * u, p, m, true);
                  u.mustPress = l;
                  u.gfNote = e.gfSection && h[1] < 4;
                  u.set_noteType(t.noteType);
                  var x = u.scrollFactor;
                  x.set_x(0);
                  x.set_y(0);
                  u.parent = t;
                  this.unspawnNotes.push(u);
                  t.tail.push(u);
                  u.correctionOffset = t.get_height() / 2;
                  if (z.get_isPixelStage()) {
                    if (m.isSustainNote) {
                      m.scale.set_y(m.scale.y / this.playbackRate);
                      m.updateHitbox();
                    }
                  } else {
                    if (m.isSustainNote) {
                      m.scale.set_y(Pa.SUSTAIN_SIZE / m.frameHeight * m.scale.y);
                      m.scale.set_y(m.scale.y / this.playbackRate);
                      m.updateHitbox();
                    }
                    if (C.data.downScroll) {
                      u.correctionOffset = 0;
                    }
                  }
                  if (u.mustPress) {
                    u.set_x(u.x + g.width / 2);
                  } else if (C.data.middleScroll) {
                    u.set_x(u.x + 310);
                    if (p > 1) {
                      u.set_x(u.x + (g.width / 2 + 25));
                    }
                  }
                }
              }
              if (t.mustPress) {
                t.set_x(t.x + g.width / 2);
              } else if (C.data.middleScroll) {
                t.set_x(t.x + 310);
                if (p > 1) {
                  t.set_x(t.x + (g.width / 2 + 25));
                }
              }
              if (this.noteTypes.indexOf(t.noteType) == -1) {
                this.noteTypes.push(t.noteType);
              }
            }
          }
          c = 0;
          for (f = a.events; c < f.length;) {
            e = f[c];
            ++c;
            k = 0;
            d = e[1].length;
            while (k < d) {
              h = k++;
              this.makeEvent(e, h);
            }
          }
          this.unspawnNotes.sort(z.sortByTime);
          this.generatedMusic = true;
        },
        eventPushed: function (a) {
          this.eventPushedUnique(a);
          if (this.eventsPushed.indexOf(a.event) == -1) {
            this.stagesFunc(function (b) {
              b.eventPushed(a);
            });
            this.eventsPushed.push(a.event);
          }
        },
        eventPushedUnique: function (a) {
          switch (a.event) {
            case "Change Character":
              var b = 0;
              switch (a.value1.toLowerCase()) {
                case "0":
                case "dad":
                case "opponent":
                  b = 1;
                  break;
                case "1":
                case "gf":
                case "girlfriend":
                  b = 2;
                  break;
                default:
                  b = 0;
              }
              this.addCharacterToList(a.value2, b);
              break;
            case "Play Sound":
              y.sound(a.value1);
          }
          this.stagesFunc(function (b) {
            b.eventPushedUnique(a);
          });
        },
        eventEarlyTrigger: function (a) {
          var b = this.callOnScripts("eventEarlyTrigger", [a.event, a.value1, a.value2, a.strumTime], true, [], [0]);
          if (b != null && b != 0 && b != Ib.Function_Continue) {
            return b;
          } else if (a.event == "Kill Henchmen") {
            return 280;
          } else {
            return 0;
          }
        },
        makeEvent: function (a, b) {
          a = {
            strumTime: a[0] + C.data.noteOffset,
            event: a[1][b][0],
            value1: a[1][b][1],
            value2: a[1][b][2]
          };
          this.eventNotes.push(a);
          this.eventPushed(a);
          this.callOnScripts("onEventPushed", [a.event, a.value1 ?? "", a.value2 ?? "", a.strumTime]);
        },
        generateStaticArrows: function (a) {
          var b = C.data.middleScroll ? z.STRUM_X_MIDDLESCROLL : z.STRUM_X;
          var c = C.data.downScroll ? g.height - 150 : 50;
          for (var d = 0; d < 4;) {
            var e = d++;
            var f = 1;
            if (a < 1) {
              if (C.data.opponentStrums) {
                if (C.data.middleScroll) {
                  f = 0.35;
                }
              } else {
                f = 0;
              }
            }
            var k = new yg(b, c, e, a);
            k.downScroll = C.data.downScroll;
            if (z.isStoryMode || this.skipArrowStartTween) {
              k.set_alpha(f);
            } else {
              k.set_alpha(0);
              ka.tween(k, {
                alpha: f
              }, 1, {
                ease: va.circOut,
                startDelay: 0.5 + e * 0.2
              });
            }
            if (a == 1) {
              this.playerStrums.add(k);
            } else {
              if (C.data.middleScroll) {
                k.set_x(k.x + 310);
                if (e > 1) {
                  k.set_x(k.x + (g.width / 2 + 25));
                }
              }
              this.opponentStrums.add(k);
            }
            this.strumLineNotes.add(k);
            k.postAddedToGroup();
          }
        },
        openSubState: function (a) {
          this.stagesFunc(function (b) {
            b.openSubState(a);
          });
          if (this.paused) {
            if (g.sound.music != null) {
              g.sound.music.pause();
              this.vocals.pause();
              this.opponentVocals.pause();
            }
            Fc.globalManager.forEach(function (a) {
              if (!a.finished) {
                a.active = false;
              }
            });
            ka.globalManager.forEach(function (a) {
              if (!a.finished) {
                a.set_active(false);
              }
            });
          }
          U.prototype.openSubState.call(this, a);
        },
        closeSubState: function () {
          U.prototype.closeSubState.call(this);
          this.stagesFunc(function (a) {
            a.closeSubState();
          });
          if (this.paused) {
            if (g.sound.music != null && !this.startingSong) {
              this.resyncVocals();
            }
            Fc.globalManager.forEach(function (a) {
              if (!a.finished) {
                a.active = true;
              }
            });
            ka.globalManager.forEach(function (a) {
              if (!a.finished) {
                a.set_active(true);
              }
            });
            this.paused = false;
            this.callOnScripts("onResume");
          }
        },
        resyncVocals: function () {
          if (this.finishTimer == null) {
            this.vocals.pause();
            g.sound.music.play();
            N.songPosition = g.sound.music._time;
            if (N.songPosition <= this.vocals._length) {
              this.vocals.set_time(N.songPosition);
            }
            this.vocals.play();
          }
        },
        update: function (a) {
          var b = this;
          if (this.inCutscene || this.paused || this.freezeCamera) {
            g.camera.set_followLerp(0);
          } else {
            g.camera.set_followLerp(this.cameraSpeed * 2.4 * this.playbackRate);
            if (this.startingSong || this.endingSong) {
              var c = false;
            } else {
              c = this.boyfriend;
              var d = "";
              if (c.isAnimateAtlas ? c.atlas.anim.get_curSymbol() != null : c.animation._curAnim != null) {
                d = c.isAnimateAtlas ? c.atlas.anim.lastPlayedAnim : c.animation._curAnim.name;
              }
              c = w.startsWith(d ?? "", "idle");
            }
            if (c) {
              this.boyfriendIdleTime += a;
              if (this.boyfriendIdleTime >= 0.15) {
                this.boyfriendIdled = true;
              }
            } else {
              this.boyfriendIdleTime = 0;
            }
          }
          this.callOnScripts("onUpdate", [a]);
          U.prototype.update.call(this, a);
          this.setOnScripts("curDecStep", this.curDecStep);
          this.setOnScripts("curDecBeat", this.curDecBeat);
          if (this.botplayTxt != null && this.botplayTxt.visible) {
            this.botplaySine += a * 180;
            this.botplayTxt.set_alpha(1 - Math.sin(Math.PI * this.botplaySine / 180));
          }
          if (this.get_controls().get_PAUSE() && this.startedCountdown && this.canPause && this.callOnScripts("onPause", null, true) != Ib.Function_Stop) {
            this.openPauseMenu();
          }
          if (!this.endingSong && !this.inCutscene && !!this.allowDebugKeys) {
            if (this.get_controls().justPressed("debug_1")) {
              this.openChartEditor();
            }
          }
          if (this.healthBar.bounds.max != null && this.health > this.healthBar.bounds.max) {
            this.set_health(this.healthBar.bounds.max);
          }
          this.updateIconsScale(a);
          this.updateIconsPosition();
          if (this.startedCountdown && !this.paused) {
            N.songPosition += g.elapsed * 1000 * this.playbackRate;
          }
          if (this.startingSong) {
            if (this.startedCountdown && N.songPosition >= 0) {
              this.startSong();
            } else if (!this.startedCountdown) {
              N.songPosition = -N.crochet * 5;
            }
          } else if (!this.paused && this.updateTime) {
            c = Math.max(0, N.songPosition - C.data.noteOffset);
            this.songPercent = c / this.songLength;
            d = this.songLength - c;
            if (C.data.timeBarType == "Time Elapsed") {
              d = c;
            }
            c = Math.floor(d / 1000);
            if (c < 0) {
              c = 0;
            }
            if (C.data.timeBarType != "Song Name") {
              this.timeTxt.set_text(Yb.formatTime(c, false));
            }
          }
          if (this.camZooming) {
            c = this.defaultCamZoom;
            g.camera.set_zoom(c + Math.exp(-a * 3.125 * this.camZoomingDecay * this.playbackRate) * (g.camera.zoom - c));
            this.camHUD.set_zoom(1 + Math.exp(-a * 3.125 * this.camZoomingDecay * this.playbackRate) * (this.camHUD.zoom - 1));
          }
          if (!C.data.noReset && this.get_controls().get_RESET() && this.canReset && !this.inCutscene && this.startedCountdown && !this.endingSong) {
            this.set_health(0);
            yb.trace("RESET = True", {
              fileName: "source/states/PlayState.hx",
              lineNumber: 2004,
              className: "states.PlayState",
              methodName: "update"
            });
          }
          this.doDeathCheck();
          if (this.unspawnNotes[0] != null) {
            c = this.spawnTime * this.playbackRate;
            if (this.songSpeed < 1) {
              c /= this.songSpeed;
            }
            if (this.unspawnNotes[0].multSpeed < 1) {
              c /= this.unspawnNotes[0].multSpeed;
            }
            while (this.unspawnNotes.length > 0 && this.unspawnNotes[0].strumTime - N.songPosition < c) {
              d = this.unspawnNotes[0];
              this.notes.insert(0, d);
              d.spawned = true;
              this.callOnLuas("onSpawnNote", [this.notes.members.indexOf(d), d.noteData, d.noteType, d.isSustainNote, d.strumTime]);
              this.callOnHScript("onSpawnNote", [d]);
              d = this.unspawnNotes.indexOf(d);
              this.unspawnNotes.splice(d, 1);
            }
          }
          if (this.generatedMusic) {
            if (!this.inCutscene && (this.cpuControlled ? this.playerDance() : this.keysCheck(), this.notes.length > 0)) {
              if (this.startedCountdown) {
                var e = 60 / z.SONG.bpm * 1000;
                this.notes.forEachAlive(function (a) {
                  var c = b.playerStrums;
                  if (!a.mustPress) {
                    c = b.opponentStrums;
                  }
                  c = c.members[a.noteData];
                  a.followStrumNote(c, e, b.songSpeed / b.playbackRate);
                  if (a.mustPress) {
                    if (b.cpuControlled && !a.blockHit && a.canBeHit && (a.isSustainNote || a.strumTime <= N.songPosition)) {
                      b.goodNoteHit(a);
                    }
                  } else if (!!a.wasGoodHit && !a.hitByOpponent && !a.ignoreNote) {
                    b.opponentNoteHit(a);
                  }
                  if (a.isSustainNote && c.sustainReduce) {
                    a.clipToStrumNote(c);
                  }
                  if (N.songPosition - a.strumTime > b.noteKillOffset) {
                    if (!!a.mustPress && !b.cpuControlled && !a.ignoreNote && !b.endingSong && (!!a.tooLate || !a.wasGoodHit)) {
                      b.noteMiss(a);
                    }
                    a.set_active(a.set_visible(false));
                    b.invalidateNote(a);
                  }
                });
              } else {
                this.notes.forEachAlive(function (a) {
                  a.canBeHit = false;
                  a.wasGoodHit = false;
                });
              }
            }
            this.checkEventNote();
          }
          if (this.isVideoCurrentlyPlaying) {
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(13, c.status)) {
              c = true;
            } else {
              c = g.keys.justPressed;
              c = c.keyManager.checkStatusUnsafe(32, c.status);
            }
            if (c) {
              c = true;
            } else {
              c = g.keys.justPressed;
              c = c.keyManager.checkStatusUnsafe(27, c.status);
            }
            if (c) {
              this.videoCurrentlyPlaying.skipVideo();
              this.isVideoCurrentlyPlaying = false;
            }
          }
          if (this.followChars) {
            if (this.mustHit) {
              switch (this.boyfriend.animation._curAnim.name) {
                case "singDOWN":
                case "singDOWN-alt":
                  this.camFollow.setPosition(this.xx2, this.yy2 + this.ofs);
                  break;
                case "singLEFT":
                case "singLEFT-alt":
                  this.camFollow.setPosition(this.xx2 - this.ofs, this.yy2);
                  break;
                case "singRIGHT":
                case "singRIGHT-alt":
                  this.camFollow.setPosition(this.xx2 + this.ofs, this.yy2);
                  break;
                case "singUP":
                case "singUP-alt":
                  this.camFollow.setPosition(this.xx2, this.yy2 - this.ofs);
                  break;
                default:
                  this.camFollow.setPosition(this.xx2, this.yy2);
              }
            } else {
              switch (this.dad.animation._curAnim.name) {
                case "singDOWN":
                case "singDOWN-alt":
                  this.camFollow.setPosition(this.xx, this.yy + this.ofs);
                  break;
                case "singLEFT":
                case "singLEFT-alt":
                  this.camFollow.setPosition(this.xx - this.ofs, this.yy);
                  break;
                case "singRIGHT":
                case "singRIGHT-alt":
                  this.camFollow.setPosition(this.xx + this.ofs, this.yy);
                  break;
                case "singUP":
                case "singUP-alt":
                  this.camFollow.setPosition(this.xx, this.yy - this.ofs);
                  break;
                default:
                  this.camFollow.setPosition(this.xx, this.yy);
              }
            }
          }
          this.camOv.set_zoom(this.camHUD.zoom);
          z.iP1.health = z.bfHealth * 0.4;
          z.iP2.health = z.oppHealth * 0.35;
          z.healthDots.group.forEach(function (a) {
            if (a.ID > 4) {
              if (a.ID >= Math.abs(z.oppHealth - 1) * 5 + 5) {
                a.colorTransform.greenOffset = null;
                a.colorTransform.redOffset = null;
                a.colorTransform.blueOffset = null;
              } else {
                a.colorTransform.greenOffset = -130;
                a.colorTransform.redOffset = -130;
                a.colorTransform.blueOffset = -130;
              }
            } else if (a.ID < 4 - z.bfHealth * 4) {
              a.colorTransform.greenOffset = -130;
              a.colorTransform.redOffset = -130;
              a.colorTransform.blueOffset = -130;
            } else {
              a.colorTransform.greenOffset = null;
              a.colorTransform.redOffset = null;
              a.colorTransform.blueOffset = null;
            }
          }, false);
          c = z.oppHealth;
          c = c < 0 ? 0 : c;
          z.oppHealth = c > 1 ? 1 : c;
          c = z.bfHealth;
          c = c < 0 ? 0 : c;
          z.bfHealth = c > 1 ? 1 : c;
          this.overlay.set_alpha(this.camHUD.alpha * 0.7);
          if (!this.camMove) {
            this.camFollow.setPosition(this.camPos[0], this.camPos[1]);
          }
          if (this.camSnap) {
            g.camera.snapToTarget();
          }
          this.setOnScripts("cameraX", this.camFollow.x);
          this.setOnScripts("cameraY", this.camFollow.y);
          this.setOnScripts("botPlay", this.cpuControlled);
          this.callOnScripts("onUpdatePost", [a]);
        },
        updateIconsScale: function (a) {
          var b = 1 + Math.exp(-a * 9 * this.playbackRate) * (this.iconP1.scale.x - 1);
          var c = this.iconP1.scale;
          var d = b;
          if (b == null) {
            b = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(b);
          this.iconP1.updateHitbox();
          b = 1 + Math.exp(-a * 9 * this.playbackRate) * (this.iconP2.scale.x - 1);
          c = this.iconP2.scale;
          d = b;
          if (b == null) {
            b = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(b);
          this.iconP2.updateHitbox();
        },
        updateIconsPosition: function () {
          this.iconP1.set_x(this.healthBar.barCenter + (this.iconP1.scale.x * 150 - 150) / 2 - 26);
          this.iconP2.set_x(this.healthBar.barCenter - this.iconP2.scale.x * 150 / 2 - 52);
        },
        set_health: function (a) {
          if (!this.iconsAnimations || this.healthBar == null || !this.healthBar.enabled || this.healthBar.valueFunction == null) {
            return this.health = a;
          }
          this.health = a;
          var b = this.healthBar.valueFunction();
          var c = this.healthBar.bounds.min;
          a = this.healthBar.bounds.max;
          b = c != null && b < c ? c : b;
          a = $b.remapToRange(a != null && b > a ? a : b, this.healthBar.bounds.min, this.healthBar.bounds.max, 0, 100);
          this.healthBar.set_percent(a ?? 0);
          this.iconP1.animation._curAnim.set_curFrame(this.healthBar.percent < 20 ? 1 : 0);
          this.iconP2.animation._curAnim.set_curFrame(this.healthBar.percent > 80 ? 1 : 0);
          return this.health;
        },
        openPauseMenu: function () {
          g.camera.set_followLerp(0);
          this.persistentUpdate = false;
          this.paused = this.persistentDraw = true;
          if (g.sound.music != null) {
            g.sound.music.pause();
            this.vocals.pause();
            this.opponentVocals.pause();
          }
          if (!this.cpuControlled) {
            for (var a = new wc(this.playerStrums.members, null); a.hasNext();) {
              var b = a.next();
              if (b.animation._curAnim != null && b.animation._curAnim.name != "static") {
                b.playAnim("static");
                b.resetAnim = 0;
              }
            }
          }
          this.openSubState(new Ye());
        },
        openChartEditor: function () {
          g.camera.set_followLerp(0);
          this.persistentUpdate = false;
          this.paused = true;
          if (g.sound.music != null) {
            var a = g.sound.music;
            a.cleanup(a.autoDestroy, true);
          }
          z.chartingMode = true;
          U.switchState(new ia());
        },
        doDeathCheck: function (a) {
          if (z.bfHealth <= 0 && !this.practiceMode && !this.isDead && this.callOnScripts("onGameOver", null, true) != Ib.Function_Stop) {
            g.animationTimeScale = 1;
            this.boyfriend.stunned = true;
            z.deathCounter++;
            this.paused = true;
            a = this.vocals;
            a.cleanup(a.autoDestroy, true);
            a = this.opponentVocals;
            a.cleanup(a.autoDestroy, true);
            a = g.sound.music;
            a.cleanup(a.autoDestroy, true);
            this.persistentDraw = this.persistentUpdate = false;
            ze.clearArray(Fc.globalManager._timers);
            ka.globalManager.clear();
            this.openSubState(new Kc());
            return this.isDead = true;
          } else {
            return false;
          }
        },
        checkEventNote: function () {
          while (this.eventNotes.length > 0) {
            var a = this.eventNotes[0].strumTime;
            if (N.songPosition < a) {
              break;
            }
            var b = "";
            if (this.eventNotes[0].value1 != null) {
              b = this.eventNotes[0].value1;
            }
            var c = "";
            if (this.eventNotes[0].value2 != null) {
              c = this.eventNotes[0].value2;
            }
            this.triggerEvent(this.eventNotes[0].event, b, c, a);
            this.eventNotes.shift();
          }
        },
        triggerEvent: function (a, b, c, d) {
          var e = this;
          var f = parseFloat(b);
          var k = parseFloat(c);
          if (isNaN(f)) {
            f = null;
          }
          if (isNaN(k)) {
            k = null;
          }
          switch (a) {
            case "Add Camera Zoom":
              if (C.data.camZooms && g.camera.zoom < 1.35) {
                if (f == null) {
                  f = 0.015;
                }
                if (k == null) {
                  k = 0.03;
                }
                var h = g.camera;
                h.set_zoom(h.zoom + f);
                h = this.camHUD;
                h.set_zoom(h.zoom + k);
              }
              break;
            case "Alt Idle Animation":
              h = this.dad;
              switch (w.trim(b.toLowerCase())) {
                case "bf":
                case "boyfriend":
                  h = this.boyfriend;
                  break;
                case "gf":
                case "girlfriend":
                  h = this.gf;
                  break;
                default:
                  var n = H.parseInt(b);
                  if (isNaN(n)) {
                    n = 0;
                  }
                  switch (n) {
                    case 1:
                      h = this.boyfriend;
                      break;
                    case 2:
                      h = this.gf;
                  }
              }
              if (h != null) {
                h.idleSuffix = c;
                h.recalculateDanceIdle();
              }
              break;
            case "Camera Follow Pos":
              if (this.camFollow != null && (this.camMove = true, f != null || k != null)) {
                this.camMove = false;
                if (f == null) {
                  f = 0;
                }
                if (k == null) {
                  k = 0;
                }
                this.camFollow.set_x(f);
                this.camFollow.set_y(k);
              }
              break;
            case "Change Character":
              h = 0;
              switch (w.trim(b.toLowerCase())) {
                case "gf":
                case "girlfriend":
                  h = 2;
                  break;
                case "dad":
                case "opponent":
                  h = 1;
                  break;
                default:
                  h = 0;
              }
              switch (h) {
                case 0:
                  if (this.boyfriend.curCharacter != c) {
                    if (!Object.prototype.hasOwnProperty.call(this.boyfriendMap.h, c)) {
                      this.addCharacterToList(c, h);
                    }
                    h = this.boyfriend.alpha;
                    this.boyfriend.set_alpha(0.00001);
                    this.boyfriend = this.boyfriendMap.h[c];
                    this.boyfriend.set_alpha(h);
                  }
                  this.setOnScripts("boyfriendName", this.boyfriend.curCharacter);
                  break;
                case 1:
                  if (this.dad.curCharacter != c) {
                    if (!Object.prototype.hasOwnProperty.call(this.dadMap.h, c)) {
                      this.addCharacterToList(c, h);
                    }
                    n = w.startsWith(this.dad.curCharacter, "gf-") || this.dad.curCharacter == "gf";
                    h = this.dad.alpha;
                    this.dad.set_alpha(0.00001);
                    this.dad = this.dadMap.h[c];
                    if (w.startsWith(this.dad.curCharacter, "gf-") || this.dad.curCharacter == "gf") {
                      if (this.gf != null) {
                        this.gf.set_visible(false);
                      }
                    } else if (n && this.gf != null) {
                      this.gf.set_visible(true);
                    }
                    this.dad.set_alpha(h);
                  }
                  this.setOnScripts("dadName", this.dad.curCharacter);
                  break;
                case 2:
                  if (this.gf != null) {
                    if (this.gf.curCharacter != c) {
                      if (!Object.prototype.hasOwnProperty.call(this.gfMap.h, c)) {
                        this.addCharacterToList(c, h);
                      }
                      h = this.gf.alpha;
                      this.gf.set_alpha(0.00001);
                      this.gf = this.gfMap.h[c];
                      this.gf.set_alpha(h);
                    }
                    this.setOnScripts("gfName", this.gf.curCharacter);
                  }
              }
              this.reloadHealthBarColors();
              break;
            case "Change Scroll Speed":
              if (this.songSpeedType != "constant") {
                if (f == null) {
                  f = 1;
                }
                if (k == null) {
                  k = 0;
                }
                h = null;
                h = C.defaultData.gameplaySettings.h.scrollspeed;
                h = z.SONG.speed * (Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "scrollspeed") ? C.data.gameplaySettings.h.scrollspeed : h) * f;
                if (k <= 0) {
                  this.set_songSpeed(h);
                } else {
                  this.songSpeedTween = ka.tween(this, {
                    songSpeed: h
                  }, k / this.playbackRate, {
                    ease: va.linear,
                    onComplete: function (a) {
                      e.songSpeedTween = null;
                    }
                  });
                }
              }
              break;
            case "Cinematics":
              h = b.split(",");
              n = parseFloat(h[0]);
              h = parseFloat(h[1]);
              ka.tween(z.upBar, {
                y: -g.height + n
              }, h, {
                ease: va.quadOut
              });
              ka.tween(z.lowBar, {
                y: g.height - n
              }, h, {
                ease: va.quadOut
              });
              n = z.hBars;
              this.barTween = ka.tween(n, {
                alpha: c == "true" ? 0 : 1
              }, h, {
                ease: va.quadInOut
              });
              n = z.iP1;
              this.barTween = ka.tween(n, {
                alpha: c == "true" ? 0 : 1
              }, h, {
                ease: va.quadInOut
              });
              n = z.iP2;
              this.barTween = ka.tween(n, {
                alpha: c == "true" ? 0 : 1
              }, h, {
                ease: va.quadInOut
              });
              n = z.healthDots;
              this.barTween = ka.tween(n, {
                alpha: c == "true" ? 0 : 1
              }, h, {
                ease: va.quadInOut
              });
              n = this.scoreTxt;
              this.barTween = ka.tween(n, {
                alpha: c == "true" ? 0 : 1
              }, h, {
                ease: va.quadInOut
              });
              break;
            case "HUD Bounce":
              h = b.split(",");
              n = h[0];
              this.bounceHeight = parseFloat(h[1]);
              this.bounceStrength = parseFloat(c);
              this.shouldBounce = n == "true" ? true : false;
              break;
            case "Hey!":
              h = 2;
              switch (w.trim(b.toLowerCase())) {
                case "0":
                case "bf":
                case "boyfriend":
                  h = 0;
                  break;
                case "1":
                case "gf":
                case "girlfriend":
                  h = 1;
              }
              if (k == null || k <= 0) {
                k = 0.6;
              }
              if (h != 0) {
                if (w.startsWith(this.dad.curCharacter, "gf")) {
                  this.dad.playAnim("cheer", true);
                  this.dad.specialAnim = true;
                  this.dad.heyTimer = k;
                } else if (this.gf != null) {
                  this.gf.playAnim("cheer", true);
                  this.gf.specialAnim = true;
                  this.gf.heyTimer = k;
                }
              }
              if (h != 1) {
                this.boyfriend.playAnim("hey", true);
                this.boyfriend.specialAnim = true;
                this.boyfriend.heyTimer = k;
              }
              break;
            case "Play Animation":
              h = this.dad;
              switch (w.trim(c.toLowerCase())) {
                case "bf":
                case "boyfriend":
                  h = this.boyfriend;
                  break;
                case "gf":
                case "girlfriend":
                  h = this.gf;
                  break;
                default:
                  if (k == null) {
                    k = 0;
                  }
                  switch (Math.round(k)) {
                    case 1:
                      h = this.boyfriend;
                      break;
                    case 2:
                      h = this.gf;
                  }
              }
              if (h != null) {
                h.playAnim(b, true);
                h.specialAnim = true;
              }
              break;
            case "Play Sound":
              if (k == null) {
                k = 1;
              }
              g.sound.play(y.sound(b), k);
              break;
            case "Screen Shake":
              n = [b, c];
              var p = [this.camGame, this.camHUD];
              for (var l = 0, m = p.length; l < m;) {
                var t = l++;
                h = n[t].split(",");
                var q = 0;
                var u = 0;
                if (h[0] != null) {
                  q = parseFloat(w.trim(h[0]));
                }
                if (h[1] != null) {
                  u = parseFloat(w.trim(h[1]));
                }
                if (isNaN(q)) {
                  q = 0;
                }
                if (isNaN(u)) {
                  u = 0;
                }
                if (q > 0 && u != 0) {
                  p[t].shake(u, q);
                }
              }
              break;
            case "Set Cam Zoom":
              this.defaultCamZoom = parseFloat(b);
              break;
            case "Set GF Speed":
              if (f == null || f < 1) {
                f = 1;
              }
              this.gfSpeed = Math.round(f);
              break;
            case "Set Property":
              try {
                h = b.split(".");
                if (h.length > 1) {
                  Ib.setVarInArray(Ib.getPropertyLoop(h), h[h.length - 1], c);
                } else {
                  Ib.setVarInArray(this, b, c);
                }
              } catch (yp) {
                Na.lastError = yp;
                h = K.caught(yp).unwrap();
                n = h.message.indexOf("\n") + 1;
                if (n <= 0) {
                  n = h.message.length;
                }
                g.log.advanced("ERROR (\"Set Property\" Event) - " + H.string(h.message.substr(0, n)), Ba.WARNING, true);
              }
          }
          this.stagesFunc(function (e) {
            e.eventCalled(a, b, c, f, k, d);
          });
          this.callOnScripts("onEvent", [a, b, c, d]);
        },
        moveCameraSection: function (a) {
          if (a == null) {
            a = this.curSection;
          }
          if (a < 0) {
            a = 0;
          }
          if (z.SONG.notes[a] != null) {
            if (this.gf != null && z.SONG.notes[a].gfSection) {
              this.camFollow.setPosition(this.gf.getMidpoint().x, this.gf.getMidpoint().y);
              a = this.camFollow;
              a.set_x(a.x + (this.gf.cameraPosition[0] + this.girlfriendCameraOffset[0]));
              a = this.camFollow;
              a.set_y(a.y + (this.gf.cameraPosition[1] + this.girlfriendCameraOffset[1]));
              this.tweenCamIn();
              this.callOnScripts("onMoveCamera", ["gf"]);
            } else {
              a = z.SONG.notes[a].mustHitSection != 1;
              this.moveCamera(a);
              this.callOnScripts("onMoveCamera", [a ? "dad" : "boyfriend"]);
            }
          }
        },
        moveCamera: function (a) {
          var b = this;
          if (a) {
            this.camFollow.setPosition(this.dad.getMidpoint().x + 150, this.dad.getMidpoint().y - 100);
            a = this.camFollow;
            a.set_x(a.x + (this.dad.cameraPosition[0] + this.opponentCameraOffset[0]));
            a = this.camFollow;
            a.set_y(a.y + (this.dad.cameraPosition[1] + this.opponentCameraOffset[1]));
            this.tweenCamIn();
          } else {
            this.camFollow.setPosition(this.boyfriend.getMidpoint().x - 100, this.boyfriend.getMidpoint().y - 100);
            a = this.camFollow;
            a.set_x(a.x - (this.boyfriend.cameraPosition[0] - this.boyfriendCameraOffset[0]));
            a = this.camFollow;
            a.set_y(a.y + (this.boyfriend.cameraPosition[1] + this.boyfriendCameraOffset[1]));
            if (this.songName == "tutorial" && this.cameraTwn == null && g.camera.zoom != 1) {
              this.cameraTwn = ka.tween(g.camera, {
                zoom: 1
              }, N.stepCrochet * 4 / 1000, {
                ease: va.elasticInOut,
                onComplete: function (a) {
                  b.cameraTwn = null;
                }
              });
            }
          }
        },
        tweenCamIn: function () {
          var a = this;
          if (this.songName == "tutorial" && this.cameraTwn == null && g.camera.zoom != 1.3) {
            this.cameraTwn = ka.tween(g.camera, {
              zoom: 1.3
            }, N.stepCrochet * 4 / 1000, {
              ease: va.elasticInOut,
              onComplete: function (b) {
                a.cameraTwn = null;
              }
            });
          }
        },
        finishSong: function (a) {
          if (a == null) {
            a = false;
          }
          var b = this;
          this.updateTime = false;
          g.sound.music.set_volume(0);
          this.vocals.set_volume(0);
          this.vocals.pause();
          this.opponentVocals.set_volume(0);
          this.opponentVocals.pause();
          if (C.data.noteOffset <= 0 || a) {
            this.endCallback();
          } else {
            this.finishTimer = new Fc().start(C.data.noteOffset / 1000, function (a) {
              b.endCallback();
            });
          }
        },
        endSong: function () {
          var a = this;
          if (!this.startingSong) {
            this.notes.forEach(function (b) {
              if (b.strumTime < a.songLength - N.safeZoneOffset) {
                a.set_health(a.health - a.healthLoss * 0.05);
              }
            });
            for (var b = 0, c = this.unspawnNotes; b < c.length;) {
              var d = c[b];
              ++b;
              if (d.strumTime < this.songLength - N.safeZoneOffset) {
                this.set_health(this.health - this.healthLoss * 0.05);
              }
            }
            if (this.doDeathCheck()) {
              return false;
            }
          }
          this.timeBar.set_visible(false);
          this.timeTxt.set_visible(false);
          this.canPause = false;
          this.endingSong = true;
          this.updateTime = this.inCutscene = this.camZooming = false;
          z.deathCounter = 0;
          z.seenCutscene = false;
          if (this.callOnScripts("onEndSong", null, true) != Ib.Function_Stop && !this.transitioning) {
            b = this.ratingPercent;
            if (isNaN(b)) {
              b = 0;
            }
            Za.saveScore(z.SONG.song, this.songScore, z.storyDifficulty, b);
            this.set_playbackRate(1);
            if (z.chartingMode) {
              this.openChartEditor();
              return false;
            }
            if (z.isStoryMode) {
              z.campaignScore += this.songScore;
              z.campaignMisses += this.songMisses;
              M.remove(z.storyPlaylist, z.storyPlaylist[0]);
              if (z.storyPlaylist.length <= 0) {
                Wd.loadTopMod();
                b = g.sound;
                c = y.returnSound("music", "freakyMenu", null);
                b.playMusic(c);
                U.switchState(new Lb());
                b = null;
                b = C.defaultData.gameplaySettings.h.practice;
                if (Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "practice") ? C.data.gameplaySettings.h.practice : b) {
                  b = false;
                } else {
                  b = null;
                  b = C.defaultData.gameplaySettings.h.botplay;
                  b = !(Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "botplay") ? C.data.gameplaySettings.h.botplay : b);
                }
                if (b) {
                  Lb.weekCompleted.h[ob.weeksList[z.storyWeek]] = true;
                  Za.saveWeekScore(ob.getWeekFileName(), z.campaignScore, z.storyDifficulty);
                  g.save.data.weekCompleted = Lb.weekCompleted;
                  g.save.flush();
                }
                z.changedDifficulty = false;
              } else {
                b = null;
                if (b == null) {
                  b = z.storyDifficulty;
                }
                d = mb.list[b];
                d = d != mb.defaultDifficulty ? "-" + d : "";
                c = new sa("[~&\\\\;:<>#]", "");
                b = new sa("[.,'\"%?!]", "");
                var e = c.split(w.replace(d, " ", "-")).join("-");
                d = b.split(e).join("").toLowerCase();
                yb.trace("LOADING NEXT SONG", {
                  fileName: "source/states/PlayState.hx",
                  lineNumber: 2990,
                  className: "states.PlayState",
                  methodName: "endSong"
                });
                e = z.storyPlaylist[0];
                c = new sa("[~&\\\\;:<>#]", "");
                b = new sa("[.,'\"%?!]", "");
                c = c.split(w.replace(e, " ", "-")).join("-");
                yb.trace(b.split(c).join("").toLowerCase() + d, {
                  fileName: "source/states/PlayState.hx",
                  lineNumber: 2991,
                  className: "states.PlayState",
                  methodName: "endSong"
                });
                Wb.skipNextTransIn = true;
                Wb.skipNextTransOut = true;
                z.prevCamFollow = this.camFollow;
                z.SONG = Pd.loadFromJson(z.storyPlaylist[0] + d, z.storyPlaylist[0]);
                b = g.sound.music;
                b.cleanup(b.autoDestroy, true);
                U.switchState(qc.getNextState(new z(), false));
              }
            } else {
              yb.trace("WENT BACK TO FREEPLAY??", {
                fileName: "source/states/PlayState.hx",
                lineNumber: 3005,
                className: "states.PlayState",
                methodName: "endSong"
              });
              Wd.loadTopMod();
              U.switchState(new Va());
              b = g.sound;
              c = y.returnSound("music", "freakyMenu", null);
              b.playMusic(c);
              z.changedDifficulty = false;
            }
            this.transitioning = true;
          }
          return true;
        },
        KillNotes: function () {
          while (this.notes.length > 0) {
            var a = this.notes.members[0];
            a.set_active(false);
            a.set_visible(false);
            this.invalidateNote(a);
          }
          this.unspawnNotes = [];
          this.eventNotes = [];
        },
        cachePopUpScore: function () {
          var a = "";
          var b = "";
          if (z.stageUI != "normal") {
            a = "" + z.stageUI + "UI/";
            if (z.get_isPixelStage()) {
              b = "-pixel";
            }
          }
          for (var c = 0, d = this.ratingsData; c < d.length;) {
            var e = d[c];
            ++c;
            y.image(a + e.image + b);
          }
          y.image(a + "num0" + b);
          y.image(a + "num1" + b);
          y.image(a + "num2" + b);
          y.image(a + "num3" + b);
          y.image(a + "num4" + b);
          y.image(a + "num5" + b);
          y.image(a + "num6" + b);
          y.image(a + "num7" + b);
          y.image(a + "num8" + b);
          y.image(a + "num9" + b);
        },
        popUpScore: function (a) {
          var b = Math.abs(a.strumTime - N.songPosition + C.data.ratingOffset);
          this.vocals.set_volume(1);
          if (!C.data.comboStacking && this.comboGroup.group.members.length > 0) {
            for (var c = new wc(this.comboGroup.group.members, null); c.hasNext();) {
              var d = c.next();
              d.destroy();
              this.comboGroup.remove(d);
            }
          }
          c = g.width * 0.4;
          var e = new G();
          d = 350;
          var f = N.judgeNote(this.ratingsData, b / this.playbackRate);
          this.totalNotesHit += f.ratingMod;
          a.ratingMod = f.ratingMod;
          if (!a.ratingDisabled) {
            f.hits++;
          }
          a.rating = f.name;
          d = f.score;
          if (f.noteSplash && !a.noteSplashData.disabled) {
            this.spawnNoteSplashOnNote(a);
          }
          if (!this.practiceMode && !this.cpuControlled) {
            this.songScore += d;
            if (!a.ratingDisabled) {
              this.songHits++;
              this.totalPlayed++;
              this.RecalculateRating(false);
            }
          }
          b = a = "";
          d = C.data.antialiasing;
          if (z.stageUI != "normal") {
            a = "" + z.stageUI + "UI/";
            if (z.get_isPixelStage()) {
              b = "-pixel";
            }
            d = !z.get_isPixelStage();
          }
          e.loadGraphic(y.image(a + f.image + b));
          e.set_x((g.width - e.get_width()) / 2);
          e.set_y((g.height - e.get_height()) / 2);
          e.set_x(c - 40);
          e.set_y(e.y - 60);
          e.acceleration.set_y(this.playbackRate * 550 * this.playbackRate);
          e.velocity.set_y(e.velocity.y - g.random.int(140, 175) * this.playbackRate);
          e.velocity.set_x(e.velocity.x - g.random.int(0, 10) * this.playbackRate);
          e.set_visible(!C.data.hideHud && this.showRating);
          e.set_x(e.x + C.data.comboOffset[0]);
          e.set_y(e.y - C.data.comboOffset[1]);
          e.set_antialiasing(d);
          var k = new G().loadGraphic(y.image(a + "combo" + b));
          k.set_x((g.width - k.get_width()) / 2);
          k.set_y((g.height - k.get_height()) / 2);
          k.set_x(c);
          k.acceleration.set_y(g.random.int(200, 300) * this.playbackRate * this.playbackRate);
          k.velocity.set_y(k.velocity.y - g.random.int(140, 160) * this.playbackRate);
          k.set_visible(!C.data.hideHud && this.showCombo);
          k.set_x(k.x + C.data.comboOffset[0]);
          k.set_y(k.y - C.data.comboOffset[1]);
          k.set_antialiasing(d);
          k.set_y(k.y + 60);
          k.velocity.set_x(k.velocity.x + g.random.int(1, 10) * this.playbackRate);
          this.comboGroup.add(e);
          if (z.get_isPixelStage()) {
            e.setGraphicSize(e.get_width() * z.daPixelZoom * 0.85 | 0);
            k.setGraphicSize(k.get_width() * z.daPixelZoom * 0.85 | 0);
          } else {
            e.setGraphicSize(e.get_width() * 0.5 | 0);
            k.setGraphicSize(k.get_width() * 0.5 | 0);
          }
          k.updateHitbox();
          e.updateHitbox();
          f = [];
          if (this.combo >= 1000) {
            f.push(Math.floor(this.combo / 1000) % 10);
          }
          f.push(Math.floor(this.combo / 100) % 10);
          f.push(Math.floor(this.combo / 10) % 10);
          f.push(this.combo % 10);
          var h = 0;
          var n = 0;
          if (this.showCombo) {
            this.comboGroup.add(k);
          }
          for (var p = 0; p < f.length;) {
            var l = f[p];
            ++p;
            l = [new G().loadGraphic(y.image(a + "num" + (l | 0) + b))];
            l[0].set_x((g.width - l[0].get_width()) / 2);
            l[0].set_y((g.height - l[0].get_height()) / 2);
            l[0].set_x(c + h * 26 - 40 + C.data.comboOffset[2]);
            l[0].set_y(l[0].y + (30 - C.data.comboOffset[3]));
            if (z.get_isPixelStage()) {
              l[0].setGraphicSize(l[0].get_width() * z.daPixelZoom | 0);
            } else {
              l[0].setGraphicSize(l[0].get_width() * 0.35 | 0);
            }
            l[0].updateHitbox();
            l[0].acceleration.set_y(g.random.int(200, 300) * this.playbackRate * this.playbackRate);
            l[0].velocity.set_y(l[0].velocity.y - g.random.int(140, 160) * this.playbackRate);
            l[0].velocity.set_x(g.random.float(-5, 5) * this.playbackRate);
            l[0].set_visible(!C.data.hideHud);
            l[0].set_antialiasing(d);
            if (this.showComboNum) {
              this.comboGroup.add(l[0]);
            }
            var m = N.crochet * 0.002;
            ka.tween(l[0], {
              alpha: 0
            }, 0.2 / this.playbackRate, {
              onComplete: function (a) {
                return function (b) {
                  a[0].destroy();
                };
              }(l),
              startDelay: m / this.playbackRate
            });
            ++h;
            if (l[0].x > n) {
              n = l[0].x;
            }
          }
          k.set_x(n + 50);
          ka.tween(e, {
            alpha: 0
          }, 0.2 / this.playbackRate, {
            startDelay: N.crochet * 0.001 / this.playbackRate
          });
          ka.tween(k, {
            alpha: 0
          }, 0.2 / this.playbackRate, {
            onComplete: function (a) {
              k.destroy();
              e.destroy();
            },
            startDelay: N.crochet * 0.002 / this.playbackRate
          });
        },
        onKeyPress: function (a) {
          a = a.keyCode;
          var b = z.getKeyFromEvent(this.keysArray, a);
          if (!this.get_controls().controllerMode) {
            if (g.keys.checkStatus(a, 2)) {
              this.keyPressed(b);
            }
          }
        },
        keyPressed: function (a) {
          if (!this.cpuControlled && !this.paused && !this.inCutscene && !(a < 0) && !(a >= this.playerStrums.length) && !!this.generatedMusic && !this.endingSong && !this.boyfriend.stunned && this.callOnScripts("onKeyPressPre", [a]) != Ib.Function_Stop) {
            var b = N.songPosition;
            if (N.songPosition >= 0) {
              N.songPosition = g.sound.music._time;
            }
            var c = [];
            for (var d = 0, e = this.notes.members; d < e.length;) {
              var f = e[d];
              ++d;
              var k = !this.strumsBlocked[f.noteData] && f.canBeHit && f.mustPress && !f.tooLate && !f.wasGoodHit && !f.blockHit;
              if (f != null && k && !f.isSustainNote && f.noteData == a) {
                c.push(f);
              }
            }
            c.sort(z.sortHitNotes);
            d = !C.data.ghostTapping;
            if (c.length != 0) {
              d = c[0];
              if (c.length > 1) {
                c = c[1];
                if (c.noteData == d.noteData) {
                  if (Math.abs(c.strumTime - d.strumTime) < 1) {
                    this.invalidateNote(c);
                  } else if (c.strumTime < d.strumTime) {
                    d = c;
                  }
                }
              }
              this.goodNoteHit(d);
            } else if (d) {
              this.callOnScripts("onGhostTap", [a]);
              this.noteMissPress(a);
            }
            if (this.keysPressed.indexOf(a) == -1) {
              this.keysPressed.push(a);
            }
            N.songPosition = b;
            b = this.playerStrums.members[a];
            if (this.strumsBlocked[a] != 1 && b != null && b.animation._curAnim.name != "confirm") {
              b.playAnim("pressed");
              b.resetAnim = 0;
            }
            this.callOnScripts("onKeyPress", [a]);
          }
        },
        onKeyRelease: function (a) {
          a = z.getKeyFromEvent(this.keysArray, a.keyCode);
          if (!this.get_controls().controllerMode && a > -1) {
            this.keyReleased(a);
          }
        },
        keyReleased: function (a) {
          if (!this.cpuControlled && !!this.startedCountdown && !this.paused && !(a < 0) && !(a >= this.playerStrums.length) && this.callOnScripts("onKeyReleasePre", [a]) != Ib.Function_Stop) {
            var b = this.playerStrums.members[a];
            if (b != null) {
              b.playAnim("static");
              b.resetAnim = 0;
            }
            this.callOnScripts("onKeyRelease", [a]);
          }
        },
        keysCheck: function () {
          var a = [];
          var b = [];
          var c = [];
          for (var d = 0, e = this.keysArray; d < e.length;) {
            var f = e[d];
            ++d;
            a.push(this.get_controls().pressed(f));
            if (this.get_controls().controllerMode) {
              b.push(this.get_controls().justPressed(f));
              c.push(this.get_controls().justReleased(f));
            }
          }
          if (this.get_controls().controllerMode && b.indexOf(true) != -1) {
            d = 0;
            e = b.length;
            while (d < e) {
              f = d++;
              if (b[f] && this.strumsBlocked[f] != 1) {
                this.keyPressed(f);
              }
            }
          }
          if (this.startedCountdown && !this.inCutscene && !this.boyfriend.stunned && this.generatedMusic) {
            if (this.notes.length > 0) {
              for (b = new wc(this.notes.members, null); b.hasNext();) {
                d = b.next();
                e = d != null && !this.strumsBlocked[d.noteData] && d.canBeHit && d.mustPress && !d.tooLate && !d.wasGoodHit && !d.blockHit;
                if (this.guitarHeroSustains) {
                  e = e && d.parent != null && d.parent.wasGoodHit;
                }
                if (e && d.isSustainNote && a[d.noteData]) {
                  this.goodNoteHit(d);
                }
              }
            }
            if (a.indexOf(true) == -1 || this.endingSong) {
              this.playerDance();
            }
          }
          if ((this.get_controls().controllerMode || this.strumsBlocked.indexOf(true) != -1) && c.indexOf(true) != -1) {
            d = 0;
            e = c.length;
            while (d < e) {
              f = d++;
              if (c[f] || this.strumsBlocked[f] == 1) {
                this.keyReleased(f);
              }
            }
          }
        },
        noteMiss: function (a) {
          var b = this;
          this.notes.forEachAlive(function (c) {
            if (a != c && a.mustPress && a.noteData == c.noteData && a.isSustainNote == c.isSustainNote && Math.abs(a.strumTime - c.strumTime) < 1) {
              b.invalidateNote(c);
            }
          });
          this.noteMissCommon(a.noteData, a);
          var c = this.callOnLuas("noteMiss", [this.notes.members.indexOf(a), a.noteData, a.noteType, a.isSustainNote]);
          if (c != Ib.Function_Stop && c != Ib.Function_StopHScript && c != Ib.Function_StopAll) {
            this.callOnHScript("noteMiss", [a]);
          }
        },
        noteMissPress: function (a) {
          if (a == null) {
            a = 1;
          }
          if (!C.data.ghostTapping) {
            this.noteMissCommon(a);
            g.sound.play(y.sound("missnote" + g.random.int(1, 3), null), g.random.float(0.1, 0.2));
            this.callOnScripts("noteMissPress", [a]);
          }
        },
        noteMissCommon: function (a, b) {
          var c = 0.05;
          if (b != null) {
            c = b.missHealth;
          }
          if (b != null && this.guitarHeroSustains && b.parent == null) {
            if (b.tail.length > 0) {
              b.set_alpha(0.35);
              for (var d = 0, e = b.tail; d < e.length;) {
                var f = e[d];
                ++d;
                f.set_alpha(b.alpha);
                f.missed = true;
                f.canBeHit = false;
                f.ignoreNote = true;
                f.tooLate = true;
              }
              b.missed = true;
              b.canBeHit = false;
              c *= b.tail.length + 1;
            }
            if (b.missed) {
              return;
            }
          }
          if (b != null && this.guitarHeroSustains && b.parent != null && b.isSustainNote) {
            if (b.missed) {
              return;
            }
            e = b.parent;
            if (e.wasGoodHit && e.tail.length > 0) {
              d = 0;
              e = e.tail;
              while (d < e.length) {
                f = e[d];
                ++d;
                if (f != b) {
                  f.missed = true;
                  f.canBeHit = false;
                  f.ignoreNote = true;
                  f.tooLate = true;
                }
              }
            }
          }
          if (this.instakillOnMiss) {
            this.vocals.set_volume(0);
            this.opponentVocals.set_volume(0);
            this.doDeathCheck(true);
          }
          d = this.combo;
          this.combo = 0;
          z.bfHealth -= 0.06;
          this.set_health(this.health - c * this.healthLoss);
          if (!this.practiceMode) {
            this.songScore -= 10;
          }
          if (!this.endingSong) {
            this.songMisses++;
          }
          this.totalPlayed++;
          this.RecalculateRating(true);
          c = this.boyfriend;
          if (b != null && b.gfNote || z.SONG.notes[this.curSection] != null && z.SONG.notes[this.curSection].gfSection) {
            c = this.gf;
          }
          if (c != null && (b == null || !b.noMissAnimation) && !!c.hasMissAnimations) {
            e = "";
            if (b != null) {
              e = b.animSuffix;
            }
            c.playAnim(this.singAnimations[Math.abs(Math.min(this.singAnimations.length - 1, a)) | 0] + "miss" + e, true);
            if (c != this.gf && d > 5 && this.gf != null && Object.prototype.hasOwnProperty.call(this.gf.animOffsets.h, "sad")) {
              this.gf.playAnim("sad");
              this.gf.specialAnim = true;
            }
          }
          this.vocals.set_volume(0);
        },
        opponentNoteHit: function (a) {
          var b = this.callOnLuas("opponentNoteHitPre", [this.notes.members.indexOf(a), Math.abs(a.noteData), a.noteType, a.isSustainNote]);
          if (b != Ib.Function_Stop && b != Ib.Function_StopHScript && b != Ib.Function_StopAll) {
            this.callOnHScript("opponentNoteHitPre", [a]);
          }
          if (this.songName != "tutorial") {
            this.camZooming = true;
          }
          if (a.noteType == "Hey!" && Object.prototype.hasOwnProperty.call(this.dad.animOffsets.h, "hey")) {
            this.dad.playAnim("hey", true);
            this.dad.specialAnim = true;
            this.dad.heyTimer = 0.6;
          } else if (!a.noAnimation) {
            var c = a.animSuffix;
            if (z.SONG.notes[this.curSection] != null && z.SONG.notes[this.curSection].altAnim && !z.SONG.notes[this.curSection].gfSection) {
              c = "-alt";
            }
            b = this.dad;
            c = this.singAnimations[Math.abs(Math.min(this.singAnimations.length - 1, a.noteData)) | 0] + c;
            if (a.gfNote) {
              b = this.gf;
            }
            if (b != null) {
              b.playAnim(c, true);
              b.holdTimer = 0;
            }
          }
          this.vocals.set_volume(1);
          this.strumPlayAnim(true, Math.abs(a.noteData) | 0, N.stepCrochet * 1.25 / 1000 / this.playbackRate);
          a.hitByOpponent = true;
          if (a.noteType == "player3") {
            c = this.singAnimations[Math.abs(Math.min(this.singAnimations.length - 1, a.noteData)) | 0];
            this.martha.playAnim(c, true);
          }
          b = this.callOnLuas("opponentNoteHit", [this.notes.members.indexOf(a), Math.abs(a.noteData), a.noteType, a.isSustainNote]);
          if (b != Ib.Function_Stop && b != Ib.Function_StopHScript && b != Ib.Function_StopAll) {
            this.callOnHScript("opponentNoteHit", [a]);
          }
          if (!a.isSustainNote) {
            this.invalidateNote(a);
          }
        },
        goodNoteHit: function (a) {
          if (!a.wasGoodHit && (!this.cpuControlled || !a.ignoreNote)) {
            var b = a.isSustainNote;
            var c = Math.round(Math.abs(a.noteData));
            var d = a.noteType;
            var e = this.callOnLuas("goodNoteHitPre", [this.notes.members.indexOf(a), c, d, b]);
            if (e != Ib.Function_Stop && e != Ib.Function_StopHScript && e != Ib.Function_StopAll) {
              this.callOnHScript("goodNoteHitPre", [a]);
            }
            a.wasGoodHit = true;
            if (C.data.hitsoundVolume > 0 && !a.hitsoundDisabled) {
              g.sound.play(y.sound(a.hitsound), C.data.hitsoundVolume);
            }
            if (a.hitCausesMiss) {
              if (!a.noMissAnimation && a.noteType == "Hurt Note" && Object.prototype.hasOwnProperty.call(this.boyfriend.animOffsets.h, "hurt")) {
                this.boyfriend.playAnim("hurt", true);
                this.boyfriend.specialAnim = true;
              }
              this.noteMiss(a);
              if (!a.noteSplashData.disabled && !a.isSustainNote) {
                this.spawnNoteSplashOnNote(a);
              }
            } else {
              if (!a.noAnimation) {
                e = this.singAnimations[Math.abs(Math.min(this.singAnimations.length - 1, a.noteData)) | 0];
                var f = this.boyfriend;
                var k = "hey";
                if (a.gfNote) {
                  f = this.gf;
                  k = "cheer";
                }
                if (f != null) {
                  f.playAnim(e + a.animSuffix, true);
                  f.holdTimer = 0;
                  if (a.noteType == "Hey!" && Object.prototype.hasOwnProperty.call(f.animOffsets.h, k)) {
                    f.playAnim(k, true);
                    f.specialAnim = true;
                    f.heyTimer = 0.6;
                  }
                }
              }
              if (this.cpuControlled) {
                this.strumPlayAnim(false, Math.abs(a.noteData) | 0, N.stepCrochet * 1.25 / 1000 / this.playbackRate);
              } else {
                e = this.playerStrums.members[a.noteData];
                if (e != null) {
                  e.playAnim("confirm", true);
                }
              }
              this.vocals.set_volume(1);
              if (!a.isSustainNote) {
                this.combo++;
                if (this.combo > 9999) {
                  this.combo = 9999;
                }
                this.popUpScore(a);
              }
              e = true;
              if (this.guitarHeroSustains && a.isSustainNote) {
                e = false;
              }
              if (e) {
                this.set_health(this.health + a.hitHealth * this.healthGain);
              }
              z.bfHealth += 0.04;
              z.oppHealth -= 0.04;
              e = this.callOnLuas("goodNoteHit", [this.notes.members.indexOf(a), c, d, b]);
              if (e != Ib.Function_Stop && e != Ib.Function_StopHScript && e != Ib.Function_StopAll) {
                this.callOnHScript("goodNoteHit", [a]);
              }
            }
            if (!a.isSustainNote) {
              this.invalidateNote(a);
            }
          }
        },
        invalidateNote: function (a) {
          a.kill();
          this.notes.remove(a, true);
          a.destroy();
        },
        spawnNoteSplashOnNote: function (a) {
          if (a != null) {
            var b = this.playerStrums.members[a.noteData];
            if (b != null) {
              this.spawnNoteSplash(b.x, b.y, a.noteData, a);
            }
          }
        },
        spawnNoteSplash: function (a, b, c, d) {
          var e = this.grpNoteSplashes.recycle(gc);
          e.setupNoteSplash(a, b, c, d);
          this.grpNoteSplashes.add(e);
        },
        destroy: function () {
          na.get_current().stage.removeEventListener("keyDown", l(this, this.onKeyPress));
          na.get_current().stage.removeEventListener("keyUp", l(this, this.onKeyRelease));
          g.animationTimeScale = 1;
          g.sound.music.set_pitch(1);
          Pa.globalRgbShaders = [];
          Si.clearNoteTypesData();
          z.instance = null;
          U.prototype.destroy.call(this);
        },
        stepHit: function () {
          var a = this;
          U.prototype.stepHit.call(this);
          if (Math.abs(g.sound.music._time - (N.songPosition - N.offset)) > 20 || z.SONG.needsVoices && Math.abs(this.vocals._time - (N.songPosition - N.offset)) > 20) {
            this.resyncVocals();
          }
          if (this.curStep != this.lastStepHit) {
            switch (this.curSong) {
              case "repentance":
                if (this.shouldBounce) {
                  if (this.curStep % 4 == 0) {
                    ka.tween(this.camHUD, {
                      y: -this.bounceHeight * this.bounceStrength
                    }, N.stepCrochet * 0.002, {
                      ease: va.circOut
                    });
                  }
                  if (this.curStep % 4 == 2) {
                    ka.tween(this.camHUD, {
                      y: 0
                    }, N.stepCrochet * 0.002, {
                      ease: va.sineIn
                    });
                  }
                } else {
                  ka.tween(this.camHUD, {
                    y: 0
                  }, N.stepCrochet * 0.002, {
                    ease: va.sineOut
                  });
                }
                switch (this.curStep) {
                  case 128:
                    this.camGame.fade(-1, 1.25, true, null);
                    this.tweenCameraPos((this.dad.getMidpoint().x + this.boyfriend.getMidpoint().x) / 2, this.camFollow.y, 0.1);
                    this.tweenCameraZoom(0.45, 0.2);
                    break;
                  case 140:
                    this.tweenCameraZoom(0.4, 12);
                    break;
                  case 240:
                    ka.tween(this.camHUD, {
                      alpha: 1
                    }, 2, {
                      ease: va.cubeOut
                    });
                    break;
                  case 247:
                  case 496:
                    this.tweenCameraZoom(0.9, 1.5);
                    break;
                  case 640:
                    this.tweenCameraZoom(0.39, 0.4);
                    break;
                  case 256:
                  case 512:
                  case 644:
                    this.camMove = true;
                    this.camSnap = false;
                    this.camGame.fade(-1, 1.25, true, null);
                    this.tweenCameraZoom(0.52, 0.4);
                    break;
                  case 768:
                    this.camGame.fade(-1, 1.25, true, null);
                    this.tweenCameraZoom(0.95, 0.4);
                    break;
                  case 770:
                    this.tweenCameraZoom(0.52, 24);
                    break;
                  case 1280:
                    this.camMove = true;
                    this.camSnap = false;
                    this.tweenCameraZoom(0.52, 1);
                    break;
                  case 1536:
                    this.overlay.set_visible(false);
                    this.redBG.set_visible(true);
                    var b = this.boyfriend;
                    b.set_color(-16777216);
                    if (b == this.gf) {
                      b.set_alpha(0.75);
                    }
                    b = this.gf;
                    b.set_color(-16777216);
                    if (b == this.gf) {
                      b.set_alpha(0.75);
                    }
                    b = this.dad;
                    b.set_color(-16777216);
                    if (b == this.gf) {
                      b.set_alpha(0.75);
                    }
                    this.tweenCameraPos((this.dad.getMidpoint().x + this.boyfriend.getMidpoint().x) / 2, this.camFollow.y, 1);
                    this.tweenCameraZoom(0.5, 1);
                    break;
                  case 1664:
                    this.tweenCameraZoom(1, 16);
                    break;
                  case 1755:
                    this.camSnap = false;
                    this.tweenCameraPos(this.camFollow.x, -1100, 3);
                    this.tweenCameraZoom(0.35, 3);
                    break;
                  case 1792:
                    this.tweenCameraZoom(0.52, 0.0001);
                    this.camSnap = false;
                    this.camMove = true;
                    this.camGame.fade(-65536, 0.4, true, null);
                    this.remove(this.redBG);
                    this.redBG.set_alpha(0.25);
                    this.redBG.set_blend(9);
                    this.overlay.set_visible(true);
                    this.insert(this.members.indexOf(this.overlay) + 1, this.redBG);
                    b = this.boyfriend;
                    b.set_color(-1);
                    b.set_alpha(1);
                    b = this.gf;
                    b.set_color(-1);
                    b.set_alpha(1);
                    b = this.dad;
                    b.set_color(-1);
                    b.set_alpha(1);
                    break;
                  case 1056:
                  case 2080:
                    this.camSnap = true;
                    break;
                  case 1024:
                  case 1120:
                  case 1152:
                  case 2048:
                  case 2144:
                  case 2176:
                    if (this.curStep == 512 || this.curStep == 1024 || this.curStep == 2048) {
                      this.camSnap = false;
                    }
                    this.tweenCameraZoom(0.7, 1);
                    break;
                  case 2306:
                    this.tweenCameraPos(1050, -1100, 3);
                    this.tweenCameraZoom(0.35, 3);
                    ka.tween(this.camHUD, {
                      alpha: 0
                    }, 8, {
                      ease: va.cubeOut
                    });
                }
                break;
              case "unsettled":
                switch (this.curStep) {
                  case 128:
                    ka.tween(this.camHUD, {
                      alpha: 1
                    }, 0.5, {
                      ease: va.cubeOut
                    });
                    break;
                  case 632:
                    ka.tween(this.camGame, {
                      zoom: 0.9
                    }, 1.1, {
                      ease: va.cubeIn
                    });
                    break;
                  case 960:
                    ka.tween(this.camGame, {
                      zoom: 0.85
                    }, 5, {
                      ease: va.cubeInOut
                    });
                    break;
                  case 1024:
                    this.camGame.set_zoom(1);
                    break;
                  case 1280:
                  case 1376:
                    this.camMove = false;
                    break;
                  case 1312:
                  case 1400:
                    this.camMove = true;
                    break;
                  case 1408:
                    this.camGame.set_zoom(1.5);
                    this.camGame.shake(0.01, 1.75);
                }
                break;
              case "welcome":
                switch (this.curStep) {
                  case 14:
                    ka.num(-1000, 330, 6, {
                      ease: va.cubeInOut
                    }, function (b) {
                      a.camPos[1] = b;
                    });
                    break;
                  case 64:
                    this.camMove = true;
                    ka.tween(this.camHUD, {
                      alpha: 1
                    }, 0.5, {
                      ease: va.cubeOut
                    });
                    ka.tween(this.camGame, {
                      zoom: 0.52
                    }, 0.8, {
                      ease: va.cubeOut
                    });
                    break;
                  case 352:
                    this.camMove = false;
                    break;
                  case 376:
                    this.camMove = true;
                    break;
                  case 384:
                    this.camGame.fade(-1, 2, false, null);
                    ka.tween(this.camGame, {
                      zoom: 0.8
                    }, 2.5, {
                      ease: va.cubeInOut
                    });
                    break;
                  case 400:
                    this.camGame.fade(-1, 0.5, true, null);
                    ka.cancelTweensOf(this.camGame);
                    this.camGame.set_zoom(0.9);
                    break;
                  case 532:
                    this.camSnap = true;
                    this.defaultCamZoom = 0.8;
                    ka.tween(this.camGame, {
                      zoom: 0.8
                    }, 0.001);
                    break;
                  case 537:
                    this.camSnap = false;
                    break;
                  case 728:
                    this.camMove = false;
                    ka.tween(this.camHUD, {
                      alpha: 0
                    }, 3, {
                      ease: va.quadOut
                    });
                    this.defaultCamZoom = 0.45;
                    ka.tween(this.camGame, {
                      zoom: 0.45
                    }, 3, {
                      ease: va.cubeInOut
                    });
                    ka.num(this.camFollow.x, 950, 3, {
                      ease: va.cubeInOut
                    }, function (b) {
                      a.camPos[0] = b;
                    });
                    ka.num(this.camFollow.y, 330, 3, {
                      ease: va.cubeInOut
                    }, function (b) {
                      a.camPos[1] = b;
                    });
                }
            }
            this.lastStepHit = this.curStep;
            this.setOnScripts("curStep", this.curStep);
            this.callOnScripts("onStepHit");
          }
        },
        beatHit: function () {
          var a = this;
          if (!(this.lastBeatHit >= this.curBeat)) {
            if (this.generatedMusic) {
              var b = C.data.downScroll ? -1 : 1;
              if (b == null) {
                b = -1;
              }
              var c = bo.byY;
              var d = b;
              this.notes.members.sort(function (a, b) {
                return c(d, a, b);
              });
            }
            b = this.iconP1.scale;
            var e = 1.2;
            var f = 1.2;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            b.set_x(e);
            b.set_y(f);
            b = this.iconP2.scale;
            f = e = 1.2;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            b.set_x(e);
            b.set_y(f);
            this.iconP1.updateHitbox();
            this.iconP2.updateHitbox();
            this.characterBopper(this.curBeat);
            switch (z.curStage) {
              case "clubhouse":
                if (this.curBeat % 2 == 1) {
                  this.goofy.animation.play("bop");
                  this.donald.animation.play("bop");
                  if (this.danceLeft = !this.danceLeft) {
                    this.minnie.animation.play("danceRight");
                    this.minnie.offset.set_x(-5);
                    this.minnie.offset.set_y(-3);
                  } else {
                    this.minnie.animation.play("danceLeft");
                    this.minnie.offset.set_x(0);
                    this.minnie.offset.set_y(0);
                  }
                }
                break;
              case "clubhouse-night":
                switch (this.curBeat) {
                  case 112:
                    this.camMove = false;
                    break;
                  case 119:
                    this.camMove = true;
                    break;
                  case 128:
                    this.camMove = true;
                    break;
                  case 248:
                    this.camMove = false;
                    ka.num(800, 1050, 3, {
                      ease: va.cubeInOut
                    }, function (b) {
                      a.camPos[0] = b;
                    });
                    ka.num(400, -1100, 3, {
                      ease: va.cubeInOut
                    }, function (b) {
                      a.camPos[1] = b;
                    });
                    ka.tween(this.camGame, {
                      zoom: 0.35
                    }, 3, {
                      ease: va.cubeInOut
                    });
                    this.defaultCamZoom = 0.35;
                    break;
                  case 256:
                    this.thingie(this.dad, 0.9, 100, -20, false);
                    break;
                  case 264:
                    this.thingie(this.martha, 0.88, 240, -20, false);
                    break;
                  case 272:
                    this.thingie(this.boyfriend, 0.77, -420, -30, false);
                    break;
                  case 284:
                    f = this.dad;
                    this.thingie(f, 0, 0, 0, true);
                    f = this.martha;
                    this.thingie(f, 0, 0, 0, true);
                    f = this.boyfriend;
                    this.thingie(f, 0, 0, 0, true);
                    ka.tween(this.camGame, {
                      zoom: 1.6
                    }, 1.2, {
                      ease: va.cubeIn
                    });
                    this.defaultCamZoom = 1.6;
                    this.camHUD.fade(-16777216, 1, false, null);
                    break;
                  case 288:
                    this.camHUD.fade(-16777216, 3, true, null);
                    this.defaultCamZoom = 0.5;
                    this.camMove = this.camSnap = true;
                    f = this.dad;
                    f.set_visible(true);
                    f.set_alpha(1);
                    b = f.scale;
                    f = e = f.jsonScale;
                    if (f == null) {
                      f = 0;
                    }
                    if (e == null) {
                      e = 0;
                    }
                    b.set_x(e);
                    b.set_y(f);
                    f = this.martha;
                    f.set_visible(true);
                    f.set_alpha(1);
                    b = f.scale;
                    f = e = f.jsonScale;
                    if (f == null) {
                      f = 0;
                    }
                    if (e == null) {
                      e = 0;
                    }
                    b.set_x(e);
                    b.set_y(f);
                    f = this.boyfriend;
                    f.set_visible(true);
                    f.set_alpha(1);
                    b = f.scale;
                    f = e = f.jsonScale;
                    if (f == null) {
                      f = 0;
                    }
                    if (e == null) {
                      e = 0;
                    }
                    b.set_x(e);
                    b.set_y(f);
                    this.martha.setPosition(this.marthaPos[0], this.marthaPos[1]);
                    this.dad.setPosition(this.dadPos[0], this.dadPos[1]);
                    this.boyfriend.setPosition(this.bfPos[0], this.bfPos[1]);
                    this.blu.set_alpha(0.4);
                    break;
                  case 289:
                    this.camSnap = false;
                    break;
                  case 576:
                    this.camGame.fade(-16777216, 1, false, null);
                }
            }
            U.prototype.beatHit.call(this);
            this.lastBeatHit = this.curBeat;
            this.setOnScripts("curBeat", this.curBeat);
            this.callOnScripts("onBeatHit");
          }
        },
        characterBopper: function (a) {
          if (this.gf != null && a % Math.round(this.gfSpeed * this.gf.danceEveryNumBeats) == 0) {
            var b = this.gf;
            var c = "";
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              c = b.isAnimateAtlas ? b.atlas.anim.lastPlayedAnim : b.animation._curAnim.name;
            }
            b = !w.startsWith(c ?? "", "sing");
          } else {
            b = false;
          }
          if (b && !this.gf.stunned) {
            this.gf.dance();
          }
          if (this.boyfriend != null && a % this.boyfriend.danceEveryNumBeats == 0) {
            b = this.boyfriend;
            c = "";
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              c = b.isAnimateAtlas ? b.atlas.anim.lastPlayedAnim : b.animation._curAnim.name;
            }
            b = !w.startsWith(c ?? "", "sing");
          } else {
            b = false;
          }
          if (b && !this.boyfriend.stunned) {
            this.boyfriend.dance();
          }
          if (this.dad != null && a % this.dad.danceEveryNumBeats == 0) {
            b = this.dad;
            c = "";
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              c = b.isAnimateAtlas ? b.atlas.anim.lastPlayedAnim : b.animation._curAnim.name;
            }
            b = !w.startsWith(c ?? "", "sing");
          } else {
            b = false;
          }
          if (b && !this.dad.stunned) {
            this.dad.dance();
          }
          if (this.martha != null) {
            b = this.martha;
            c = "";
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              c = b.isAnimateAtlas ? b.atlas.anim.lastPlayedAnim : b.animation._curAnim.name;
            }
            b = !w.startsWith(c ?? "", "sing");
          } else {
            b = false;
          }
          if (b) {
            this.martha.dance();
          }
        },
        playerDance: function () {
          var a = this.boyfriend;
          var b = "";
          if (a.isAnimateAtlas ? a.atlas.anim.get_curSymbol() != null : a.animation._curAnim != null) {
            b = a.isAnimateAtlas ? a.atlas.anim.lastPlayedAnim : a.animation._curAnim.name;
          }
          a = b ?? "";
          if (this.boyfriend.holdTimer > 0.0011 / g.sound.music._pitch * N.stepCrochet * this.boyfriend.singDuration && w.startsWith(a, "sing") && !w.endsWith(a, "miss")) {
            this.boyfriend.dance();
          }
        },
        sectionHit: function () {
          if (z.SONG.notes[this.curSection] != null) {
            if (this.generatedMusic && !this.endingSong && this.camMove) {
              this.moveCameraSection();
            }
            if (this.camZooming && g.camera.zoom < 1.35 && C.data.camZooms) {
              var a = g.camera;
              a.set_zoom(a.zoom + this.camZoomingMult * 0.015);
              a = this.camHUD;
              a.set_zoom(a.zoom + this.camZoomingMult * 0.03);
            }
            if (z.SONG.notes[this.curSection].changeBPM) {
              N.set_bpm(z.SONG.notes[this.curSection].bpm);
              this.setOnScripts("curBpm", N.bpm);
              this.setOnScripts("crochet", N.crochet);
              this.setOnScripts("stepCrochet", N.stepCrochet);
            }
            this.mustHit = z.SONG.notes[this.curSection].mustHitSection;
            this.setOnScripts("mustHitSection", z.SONG.notes[this.curSection].mustHitSection);
            this.setOnScripts("altAnim", z.SONG.notes[this.curSection].altAnim);
            this.setOnScripts("gfSection", z.SONG.notes[this.curSection].gfSection);
          }
          U.prototype.sectionHit.call(this);
          this.setOnScripts("curSection", this.curSection);
          this.callOnScripts("onSectionHit");
        },
        callOnScripts: function (a, b, c, d, e) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = [];
          }
          if (d == null) {
            d = [];
          }
          if (e == null) {
            e = [Ib.Function_Continue];
          }
          var f = this.callOnLuas(a, b, c, d, e);
          if (f == null || e.indexOf(f) != -1) {
            f = this.callOnHScript(a, b, c, d, e);
          }
          return f;
        },
        callOnLuas: function (a, b, c, d, e) {
          return Ib.Function_Continue;
        },
        callOnHScript: function (a, b, c, d, e) {
          return Ib.Function_Continue;
        },
        setOnScripts: function (a, b, c) {
          if (c == null) {
            c = [];
          }
          this.setOnLuas(a, b, c);
          this.setOnHScript(a, b, c);
        },
        setOnLuas: function (a, b, c) {},
        setOnHScript: function (a, b, c) {},
        strumPlayAnim: function (a, b, c) {
          a = a ? this.opponentStrums.members[b] : this.playerStrums.members[b];
          if (a != null) {
            a.playAnim("confirm", true);
            a.resetAnim = c;
          }
        },
        RecalculateRating: function (a) {
          if (a == null) {
            a = false;
          }
          this.setOnScripts("score", this.songScore);
          this.setOnScripts("misses", this.songMisses);
          this.setOnScripts("hits", this.songHits);
          this.setOnScripts("combo", this.combo);
          if (this.callOnScripts("onRecalculateRating", null, true) != Ib.Function_Stop) {
            this.ratingName = "?";
            if (this.totalPlayed != 0 && (this.ratingPercent = Math.min(1, Math.max(0, this.totalNotesHit / this.totalPlayed)), this.ratingName = z.ratingStuff[z.ratingStuff.length - 1][0], this.ratingPercent < 1)) {
              for (var b = 0, c = z.ratingStuff.length - 1; b < c;) {
                var d = b++;
                if (this.ratingPercent < z.ratingStuff[d][1]) {
                  this.ratingName = z.ratingStuff[d][0];
                  break;
                }
              }
            }
            this.fullComboFunction();
          }
          this.updateScore(a);
          this.setOnScripts("rating", this.ratingPercent);
          this.setOnScripts("ratingName", this.ratingName);
          this.setOnScripts("ratingFC", this.ratingFC);
        },
        tweenCameraZoom: function (a, b) {
          ka.cancelTweensOf(this.camGame);
          this.defaultCamZoom = a;
          ka.tween(this.camGame, {
            zoom: this.defaultCamZoom
          }, b, {
            ease: va.cubeInOut
          });
        },
        tweenCameraPos: function (a, b, c) {
          var d = this;
          ka.cancelTweensOf(this.camFollow);
          this.camMove = false;
          ka.num(this.camFollow.x, a, c, {
            ease: va.cubeInOut
          }, function (a) {
            d.camPos[0] = a;
          });
          ka.num(this.camFollow.y, b, c, {
            ease: va.cubeInOut
          }, function (a) {
            d.camPos[1] = a;
          });
        },
        thingie: function (a, b, c, d, e) {
          var f = this;
          if (!e) {
            a.set_cameras([this.camOv]);
            var g = a.scale;
            var h = b;
            if (b == null) {
              b = 0;
            }
            if (h == null) {
              h = 0;
            }
            g.set_x(h);
            g.set_y(b);
            a.setPosition(a.x + c, a.y + d);
            a.set_alpha(0);
          }
          ka.tween(a, {
            alpha: e ? 0 : 0.8
          }, 0.7, {
            ease: va.quadInOut,
            onComplete: function (b) {
              if (e) {
                a.set_cameras([f.camGame]);
                b = a.scale;
                var c = a.jsonScale;
                var d = a.jsonScale;
                if (d == null) {
                  d = 0;
                }
                if (c == null) {
                  c = 0;
                }
                b.set_x(c);
                b.set_y(d);
                a.setPosition(a.positionArray[0], a.positionArray[1]);
              }
            }
          });
        },
        __class__: z,
        __properties__: q(U.prototype.__properties__, {
          set_health: "set_health",
          set_playbackRate: "set_playbackRate",
          set_songSpeed: "set_songSpeed"
        })
      });
      function Lb(a, b) {
        this.lerpScore = this.intendedScore = 0;
        this.movedBack = this.selectedWeek = this.stopspamming = false;
        this.loadedWeeks = [];
        this.curDifficulty = 1;
        U.call(this, a, b);
      }
      h["states.StoryMenuState"] = Lb;
      Lb.__name__ = "states.StoryMenuState";
      Lb.__super__ = U;
      Lb.prototype = q(U.prototype, {
        create: function () {
          y.clearStoredMemory();
          y.clearUnusedMemory();
          z.isStoryMode = true;
          ob.reloadWeekFiles(true);
          if (Lb.curWeek >= ob.weeksList.length) {
            Lb.curWeek = 0;
          }
          this.persistentUpdate = this.persistentDraw = true;
          this.scoreText = new Q(10, 10, 0, "SCORE: 49324858", 36);
          this.scoreText.setFormat("VCR OSD Mono", 32);
          this.txtWeekTitle = new Q(g.width * 0.7, 10, 0, "", 32);
          this.txtWeekTitle.setFormat("VCR OSD Mono", 32, -1, "right");
          this.txtWeekTitle.set_alpha(0.7);
          var a = new Q(0, 10);
          a.set_text("RANK: GREAT");
          a.setFormat("assets/fonts/vcr.ttf", 32);
          a.set_size(this.scoreText._defaultFormat.size | 0);
          var b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          var c = y.image("campaign_menu_UI_assets", null, true);
          c = fb.fromSparrow(c, y.getPath("images/campaign_menu_UI_assets.xml", null, null));
          var d = new G(0, 56).makeGraphic(g.width, 386, -405679);
          this.bgSprite = new G(0, 56);
          this.grpWeekText = new Ra();
          this.add(this.grpWeekText);
          var e = new G().makeGraphic(g.width, 56, -16777216);
          this.add(e);
          this.grpWeekCharacters = new Ra();
          this.grpLocks = new Ra();
          this.add(this.grpLocks);
          for (var f = e = 0, k = ob.weeksList.length; f < k;) {
            var h = f++;
            b = ob.weeksLoaded.h[ob.weeksList[h]];
            var n = this.weekIsLocked(ob.weeksList[h]);
            if (!n || !b.hiddenUntilUnlocked) {
              this.loadedWeeks.push(b);
              ob.setDirectoryFromWeek(b);
              var p = new Lj(0, this.bgSprite.y + 396, ob.weeksList[h]);
              p.set_y(p.y + (p.get_height() + 20) * e);
              p.targetY = e;
              this.grpWeekText.add(p);
              b = 1;
              if (b == null) {
                b = 17;
              }
              if (b == 1 || b == 17) {
                p.set_x((g.width - p.get_width()) / 2);
              }
              if (b == 16 || b == 17) {
                p.set_y((g.height - p.get_height()) / 2);
              }
              if (n) {
                n = new G(p.get_width() + 10 + p.x);
                n.set_antialiasing(C.data.antialiasing);
                n.set_frames(c);
                n.animation.addByPrefix("lock", "lock");
                n.animation.play("lock");
                n.ID = h;
                this.grpLocks.add(n);
              }
              ++e;
            }
          }
          ob.setDirectoryFromWeek(this.loadedWeeks[0]);
          e = this.loadedWeeks[0].weekCharacters;
          f = new ve(g.width * 0.25 - 150, e[0]);
          f.set_y(f.y + 70);
          this.grpWeekCharacters.add(f);
          f = new ve(g.width * 0.5 - 150, e[1]);
          f.set_y(f.y + 70);
          this.grpWeekCharacters.add(f);
          f = new ve(g.width * 0.75 - 150, e[2]);
          f.set_y(f.y + 70);
          this.grpWeekCharacters.add(f);
          this.difficultySelectors = new Ra();
          this.add(this.difficultySelectors);
          this.leftArrow = new G(this.grpWeekText.members[0].x + this.grpWeekText.members[0].get_width() + 10, this.grpWeekText.members[0].y + 10);
          this.leftArrow.set_antialiasing(C.data.antialiasing);
          this.leftArrow.set_frames(c);
          this.leftArrow.animation.addByPrefix("idle", "arrow left");
          this.leftArrow.animation.addByPrefix("press", "arrow push left");
          this.leftArrow.animation.play("idle");
          this.difficultySelectors.add(this.leftArrow);
          mb.list = mb.defaultList.slice();
          if (Lb.lastDifficultyName == "") {
            Lb.lastDifficultyName = mb.defaultDifficulty;
          }
          this.curDifficulty = Math.round(Math.max(0, mb.defaultList.indexOf(Lb.lastDifficultyName)));
          this.sprDifficulty = new G(0, this.leftArrow.y);
          this.sprDifficulty.set_antialiasing(C.data.antialiasing);
          this.difficultySelectors.add(this.sprDifficulty);
          this.rightArrow = new G(this.leftArrow.x + 376, this.leftArrow.y);
          this.rightArrow.set_antialiasing(C.data.antialiasing);
          this.rightArrow.set_frames(c);
          this.rightArrow.animation.addByPrefix("idle", "arrow right");
          this.rightArrow.animation.addByPrefix("press", "arrow push right", 24, false);
          this.rightArrow.animation.play("idle");
          this.difficultySelectors.add(this.rightArrow);
          this.add(d);
          this.add(this.bgSprite);
          this.add(this.grpWeekCharacters);
          c = new G(g.width * 0.07, this.bgSprite.y + 425).loadGraphic(y.image("Menu_Tracks"));
          c.set_antialiasing(C.data.antialiasing);
          this.add(c);
          this.txtTracklist = new Q(g.width * 0.05, c.y + 60, 0, "", 32);
          this.txtTracklist.set_alignment("center");
          this.txtTracklist.set_font(a._font);
          this.txtTracklist.set_color(-1747081);
          this.add(this.txtTracklist);
          this.add(this.scoreText);
          this.add(this.txtWeekTitle);
          this.changeWeek();
          this.changeDifficulty();
          U.prototype.create.call(this);
        },
        closeSubState: function () {
          this.persistentUpdate = true;
          this.changeWeek();
          U.prototype.closeSubState.call(this);
        },
        update: function (a) {
          var b = this;
          var c = this.intendedScore;
          this.lerpScore = Math.floor(c + Math.exp(-a * 30) * (this.lerpScore - c));
          if (Math.abs(this.intendedScore - this.lerpScore) < 10) {
            this.lerpScore = this.intendedScore;
          }
          this.scoreText.set_text("WEEK SCORE:" + this.lerpScore);
          if (!this.movedBack && !this.selectedWeek) {
            c = this.get_controls().get_UI_UP_P();
            var d = this.get_controls().get_UI_DOWN_P();
            if (c) {
              this.changeWeek(-1);
              g.sound.play(y.sound("scrollMenu"));
            }
            if (d) {
              this.changeWeek(1);
              g.sound.play(y.sound("scrollMenu"));
            }
            if (g.mouse.wheel != 0) {
              g.sound.play(y.sound("scrollMenu"), 0.4);
              this.changeWeek(-g.mouse.wheel);
              this.changeDifficulty();
            }
            if (this.get_controls().get_UI_RIGHT()) {
              this.rightArrow.animation.play("press");
            } else {
              this.rightArrow.animation.play("idle");
            }
            if (this.get_controls().get_UI_LEFT()) {
              this.leftArrow.animation.play("press");
            } else {
              this.leftArrow.animation.play("idle");
            }
            if (this.get_controls().get_UI_RIGHT_P()) {
              this.changeDifficulty(1);
            } else if (this.get_controls().get_UI_LEFT_P()) {
              this.changeDifficulty(-1);
            } else if (c || d) {
              this.changeDifficulty();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(17, c.status)) {
              this.persistentUpdate = false;
              this.openSubState(new cn());
            } else if (this.get_controls().get_RESET()) {
              this.persistentUpdate = false;
              this.openSubState(new dk("", this.curDifficulty, "", Lb.curWeek));
            } else if (this.get_controls().get_ACCEPT()) {
              this.selectWeek();
            }
          }
          if (!!this.get_controls().get_BACK() && !this.movedBack && !this.selectedWeek) {
            g.sound.play(y.sound("cancelMenu"));
            this.movedBack = true;
            U.switchState(new Kd());
          }
          U.prototype.update.call(this, a);
          this.grpLocks.forEach(function (a) {
            a.set_y(b.grpWeekText.members[a.ID].y);
            a.set_visible(a.y > g.height / 2);
          });
        },
        selectWeek: function () {
          if (this.weekIsLocked(this.loadedWeeks[Lb.curWeek].fileName)) {
            g.sound.play(y.sound("cancelMenu"));
          } else {
            var a = [];
            var b = this.loadedWeeks[Lb.curWeek].songs;
            for (var c = 0, d = b.length; c < d;) {
              var e = c++;
              a.push(b[e][0]);
            }
            try {
              z.storyPlaylist = a;
              this.selectedWeek = z.isStoryMode = true;
              var f = this.curDifficulty;
              if (f == null) {
                f = z.storyDifficulty;
              }
              var k = mb.list[f];
              k = k != mb.defaultDifficulty ? "-" + k : "";
              var h = new sa("[~&\\\\;:<>#]", "");
              var n = new sa("[.,'\"%?!]", "");
              var p = h.split(w.replace(k, " ", "-")).join("-");
              var l = n.split(p).join("").toLowerCase();
              if (l == null) {
                l = "";
              }
              z.storyDifficulty = this.curDifficulty;
              z.SONG = Pd.loadFromJson(z.storyPlaylist[0].toLowerCase() + l, z.storyPlaylist[0].toLowerCase());
              z.campaignScore = 0;
              z.campaignMisses = 0;
            } catch (m) {
              Na.lastError = m;
              c = K.caught(m).unwrap();
              yb.trace("ERROR! " + H.string(c), {
                fileName: "source/states/StoryMenuState.hx",
                lineNumber: 303,
                className: "states.StoryMenuState",
                methodName: "selectWeek"
              });
              return;
            }
            if (this.stopspamming == 0) {
              g.sound.play(y.sound("confirmMenu"));
              this.grpWeekText.members[Lb.curWeek].set_isFlashing(true);
              c = 0;
              for (d = this.grpWeekCharacters.members; c < d.length;) {
                a = d[c];
                ++c;
                if (a.character != "" && a.hasConfirmAnimation) {
                  a.animation.play("confirm");
                }
              }
              this.stopspamming = true;
            }
            new Fc().start(1, function (a) {
              a = new z();
              var b = true;
              if (b == null) {
                b = false;
              }
              U.switchState(qc.getNextState(a, b));
              Va.destroyFreeplayVocals();
            });
          }
        },
        changeDifficulty: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = this;
          this.curDifficulty += a;
          if (this.curDifficulty < 0) {
            this.curDifficulty = mb.list.length - 1;
          }
          if (this.curDifficulty >= mb.list.length) {
            this.curDifficulty = 0;
          }
          ob.setDirectoryFromWeek(this.loadedWeeks[Lb.curWeek]);
          a = this.curDifficulty;
          a = mb.list[a == null ? z.storyDifficulty : a];
          var c = new sa("[~&\\\\;:<>#]", "");
          var d = new sa("[.,'\"%?!]", "");
          c = c.split(w.replace(a, " ", "-")).join("-");
          d = y.image("menudifficulties/" + d.split(c).join("").toLowerCase());
          if (this.sprDifficulty.graphic != d) {
            this.sprDifficulty.loadGraphic(d);
            this.sprDifficulty.set_x(this.leftArrow.x + 60);
            d = this.sprDifficulty;
            d.set_x(d.x + (308 - this.sprDifficulty.get_width()) / 3);
            this.sprDifficulty.set_alpha(0);
            this.sprDifficulty.set_y(this.leftArrow.y - 15);
            if (this.tweenDifficulty != null) {
              this.tweenDifficulty.cancel();
            }
            this.tweenDifficulty = ka.tween(this.sprDifficulty, {
              y: this.leftArrow.y + 15,
              alpha: 1
            }, 0.07, {
              onComplete: function (a) {
                b.tweenDifficulty = null;
              }
            });
          }
          Lb.lastDifficultyName = a;
          this.intendedScore = Za.getWeekScore(this.loadedWeeks[Lb.curWeek].fileName, this.curDifficulty);
        },
        changeWeek: function (a) {
          if (a == null) {
            a = 0;
          }
          Lb.curWeek += a;
          if (Lb.curWeek >= this.loadedWeeks.length) {
            Lb.curWeek = 0;
          }
          if (Lb.curWeek < 0) {
            Lb.curWeek = this.loadedWeeks.length - 1;
          }
          var b = this.loadedWeeks[Lb.curWeek];
          ob.setDirectoryFromWeek(b);
          this.txtWeekTitle.set_text(b.storyName.toUpperCase());
          this.txtWeekTitle.set_x(g.width - (this.txtWeekTitle.get_width() + 10));
          var c = 0;
          a = !this.weekIsLocked(b.fileName);
          for (var d = 0, e = this.grpWeekText.members; d < e.length;) {
            var f = e[d];
            ++d;
            f.targetY = c - Lb.curWeek;
            if (f.targetY == 0 && a) {
              f.set_alpha(1);
            } else {
              f.set_alpha(0.6);
            }
            ++c;
          }
          this.bgSprite.set_visible(true);
          b = b.weekBackground;
          if (b == null || b.length < 1) {
            this.bgSprite.set_visible(false);
          } else {
            this.bgSprite.loadGraphic(y.image("menubackgrounds/menu_" + b));
          }
          z.storyWeek = Lb.curWeek;
          b = null;
          if (b == null) {
            b = ob.getCurrentWeek();
          }
          b = b.difficulties;
          if (b != null && b.length > 0) {
            b = w.trim(b).split(",");
            for (c = b.length - 1; c > 0;) {
              if (b[c] != null) {
                b[c] = w.trim(b[c]);
                if (b[c].length < 1) {
                  M.remove(b, b[c]);
                }
              }
              --c;
            }
            if (b.length > 0 && b[0].length > 0) {
              mb.list = b;
            }
          } else {
            mb.list = mb.defaultList.slice();
          }
          this.difficultySelectors.set_visible(a);
          if (mb.list.indexOf(mb.defaultDifficulty) != -1) {
            this.curDifficulty = Math.round(Math.max(0, mb.defaultList.indexOf(mb.defaultDifficulty)));
          } else {
            this.curDifficulty = 0;
          }
          a = mb.list.indexOf(Lb.lastDifficultyName);
          if (a > -1) {
            this.curDifficulty = a;
          }
          this.updateText();
        },
        weekIsLocked: function (a) {
          a = ob.weeksLoaded.h[a];
          if (!a.startUnlocked && a.weekBefore.length > 0) {
            if (Object.prototype.hasOwnProperty.call(Lb.weekCompleted.h, a.weekBefore)) {
              return !Lb.weekCompleted.h[a.weekBefore];
            } else {
              return true;
            }
          } else {
            return false;
          }
        },
        updateText: function () {
          var a = this.loadedWeeks[Lb.curWeek].weekCharacters;
          for (var b = 0, c = this.grpWeekCharacters.length; b < c;) {
            var d = b++;
            this.grpWeekCharacters.members[d].changeCharacter(a[d]);
          }
          var e = this.loadedWeeks[Lb.curWeek];
          a = [];
          b = 0;
          for (c = e.songs.length; b < c;) {
            d = b++;
            a.push(e.songs[d][0]);
          }
          this.txtTracklist.set_text("");
          b = 0;
          for (c = a.length; b < c;) {
            d = b++;
            e = this.txtTracklist;
            e.set_text(e.text + (a[d] + "\n"));
          }
          this.txtTracklist.set_text(this.txtTracklist.text.toUpperCase());
          b = this.txtTracklist;
          c = 1;
          if (c == null) {
            c = 17;
          }
          if (c == 1 || c == 17) {
            b.set_x((g.width - b.get_width()) / 2);
          }
          if (c == 16 || c == 17) {
            b.set_y((g.height - b.get_height()) / 2);
          }
          e = this.txtTracklist;
          e.set_x(e.x - g.width * 0.35);
          this.intendedScore = Za.getWeekScore(this.loadedWeeks[Lb.curWeek].fileName, this.curDifficulty);
        },
        __class__: Lb
      });
      function zc(a, b) {
        this.skippedIntro = this.increaseVolume = false;
        this.titleTimer = this.sickBeats = 0;
        this.transitioning = this.newTitle = false;
        this.swagShader = null;
        this.mustUpdate = this.danceLeft = false;
        this.curWacky = [];
        this.titleTextAlphas = [1, 0.64];
        this.titleTextColors = [-13369345, -13421620];
        U.call(this, a, b);
      }
      h["states.TitleState"] = zc;
      zc.__name__ = "states.TitleState";
      zc.__super__ = U;
      zc.prototype = q(U.prototype, {
        create: function () {
          var a = this;
          y.clearStoredMemory();
          Wd.loadTopMod();
          g.fixedTimestep = false;
          g.game.focusLostFramerate = 60;
          g.keys.preventDefaultKeys = [9];
          this.curWacky = g.random.getObject_Array_String(this.getIntroTextShit());
          U.prototype.create.call(this);
          var b = g.save;
          var c = na.get_current().stage.application.meta.h.company;
          b.bind("MouseRookie", "" + c + "/" + Nd.validate(na.get_current().stage.application.meta.h.file));
          C.loadPrefs();
          Za.load();
          this.titleJSON = Rh.parse(y.getTextFromFile("images/gfDanceTitle.json"));
          if (!zc.initialized) {
            if (g.save.data != null && g.save.data.fullscreen) {
              g.set_fullscreen(g.save.data.fullscreen);
            }
            this.persistentDraw = this.persistentUpdate = true;
          }
          if (g.save.data.weekCompleted != null) {
            Lb.weekCompleted = g.save.data.weekCompleted;
          }
          g.mouse.set_visible(false);
          if (g.save.data.flashing != null || gh.leftState) {
            if (zc.initialized) {
              this.startIntro();
            } else {
              new Fc().start(1, function (b) {
                a.startIntro();
              });
            }
          } else {
            Wb.skipNextTransIn = true;
            Wb.skipNextTransOut = true;
            U.switchState(new gh());
          }
        },
        startIntro: function () {
          if (!zc.initialized && g.sound.music == null) {
            var a = g.sound;
            var b = y.returnSound("music", "freakyMenu", null);
            a.playMusic(b, 0);
          }
          N.set_bpm(this.titleJSON.bpm);
          this.persistentUpdate = true;
          this.bgBlue = new G().makeGraphic(g.width, g.height, -13087028);
          this.insert(1, this.bgBlue);
          this.bubbBig = new yf(y.image("menus/titlescreen/bigBubbles"), 16, 0, -8.5);
          this.bubbSmall = new yf(y.image("menus/titlescreen/smallBubbles"), 16);
          this.mickheads = new G().loadGraphic(y.image("menus/titlescreen/mickheads"));
          this.logo = new G().loadGraphic(y.image("menus/titlescreen/logoo"));
          this.start = new G().loadGraphic(y.image("menus/titlescreen/start"));
          this.borders = new G().loadGraphic(y.image("menus/titlescreen/borders"));
          a = 0;
          for (b = [this.bubbBig, this.bubbSmall, this.mickheads, this.logo, this.start, this.borders]; a < b.length;) {
            var c = b[a];
            var d = a++;
            var e = c.scale;
            var f = 0.55;
            var k = 0.55;
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            e.set_x(f);
            e.set_y(k);
            c.set_x((g.width - c.get_width()) / 2);
            c.set_y((g.height - c.get_height()) / 2);
            this.insert(d + 2, c);
          }
          this.bubbBig.velocity.set_y(30);
          this.bubbSmall.velocity.set_y(70);
          a = this.start;
          a.set_x(a.x - 11);
          a = this.start;
          a.set_y(a.y + 30);
          this.mickTween = ka.tween(this.mickheads, {
            y: this.mickheads.y + 20
          }, 1.7, {
            ease: va.quadInOut,
            type: 4
          });
          this.credGroup = new Ra();
          this.add(this.credGroup);
          this.textGroup = new Ra();
          this.blackScreen = new G().makeGraphic(g.width, g.height, -16777216);
          this.credGroup.add(this.blackScreen);
          a = this.credTextShit = new Jb(0, 0, "", true);
          a.set_x((g.width - a.get_width()) / 2);
          a.set_y((g.height - a.get_height()) / 2);
          this.credTextShit.set_visible(false);
          this.ngSpr = new G(0, g.height * 0.52).loadGraphic(y.image("newgrounds_logo"));
          this.add(this.ngSpr);
          this.ngSpr.set_visible(false);
          this.ngSpr.setGraphicSize(this.ngSpr.get_width() * 0.8 | 0);
          this.ngSpr.updateHitbox();
          a = this.ngSpr;
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          this.ngSpr.set_antialiasing(C.data.antialiasing);
          if (zc.initialized) {
            this.skipIntro();
          } else {
            zc.initialized = true;
          }
          y.clearUnusedMemory();
        },
        getIntroTextShit: function () {
          for (var a = W.getText(y.getPath("data/introText.txt", "TEXT", null)).split("\n"), b = [], c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            b.push(d.split("--"));
          }
          return b;
        },
        update: function (a) {
          if (g.sound.music != null) {
            N.songPosition = g.sound.music._time;
          }
          var b = g.keys.justPressed;
          var c = b.keyManager.checkStatusUnsafe(13, b.status) || this.get_controls().get_ACCEPT();
          var d = g.gamepads.lastActive;
          if (d != null) {
            b = d.justPressed;
            d = b.gamepad;
            b = b.status;
            var e = d.mapping.getRawID(7);
            d = d.buttons[e];
            if (d != null && d.hasState(b)) {
              c = true;
            }
          }
          if (this.newTitle) {
            d = a < 0 ? 0 : a;
            this.titleTimer += d > 1 ? 1 : d;
            if (this.titleTimer > 2) {
              this.titleTimer -= 2;
            }
          }
          if (zc.initialized && !this.transitioning && this.skippedIntro) {
            if (this.newTitle && !c) {
              d = this.titleTimer;
              if (d >= 1) {
                d = -d + 2;
              }
              d = d <= 0.5 ? d * d * 2 : 1 - --d * d * 2;
            }
            if (c) {
              d = this.mickTween;
              if (d != null) {
                d.cancel();
              }
              d = this.mouseTween;
              if (d != null) {
                d.cancel();
              }
              d = this.borderTween;
              if (d != null) {
                d.cancel();
              }
              d = this.logTween;
              if (d != null) {
                d.cancel();
              }
              d = this.startTween;
              if (d != null) {
                d.cancel();
              }
              b = this.mickheads;
              b.set_x((g.width - b.get_width()) / 2);
              b.set_y((g.height - b.get_height()) / 2);
              id.flicker(this.start, 2, 0.06);
              g.camera.flash(-1, 1, null, true);
              this.borderTween = ka.tween(this.borders.scale, {
                x: 0.8,
                y: 0.8
              }, 1.7, {
                ease: va.quartOut
              });
              this.logTween = ka.tween(this.logo, {
                y: this.logo.y - 700
              }, 1.2, {
                ease: va.quartIn
              });
              this.startTween = ka.tween(this.start, {
                y: this.start.y - 700
              }, 1.2, {
                ease: va.quartIn
              });
              this.mouseTween = ka.tween(this.mickheads, {
                y: this.mickheads.y - 700
              }, 1.2, {
                ease: va.quartIn
              });
              this.mickTween = null;
              g.sound.play(y.sound("confirmMenu"), 0.7);
              this.transitioning = true;
              new Fc().start(1, function (a) {
                U.switchState(new Kd());
                zc.closedState = true;
              });
            }
          }
          if (zc.initialized && c && !this.skippedIntro) {
            this.skipIntro();
          }
          if (this.swagShader != null) {
            if (this.get_controls().get_UI_LEFT()) {
              c = this.swagShader;
              c.set_hue(c.hue - a * 0.1);
            }
            if (this.get_controls().get_UI_RIGHT()) {
              c = this.swagShader;
              c.set_hue(c.hue + a * 0.1);
            }
          }
          U.prototype.update.call(this, a);
        },
        createCoolText: function (a, b) {
          if (b == null) {
            b = 0;
          }
          for (var c = 0, d = a.length; c < d;) {
            var e = c++;
            var f = new Jb(0, 0, a[e], true);
            var k = 1;
            if (k == null) {
              k = 17;
            }
            if (k == 1 || k == 17) {
              f.set_x((g.width - f.get_width()) / 2);
            }
            if (k == 16 || k == 17) {
              f.set_y((g.height - f.get_height()) / 2);
            }
            f.set_y(f.y + (e * 60 + 200 + b));
            if (this.credGroup != null && this.textGroup != null) {
              this.credGroup.add(f);
              this.textGroup.add(f);
            }
          }
        },
        addMoreText: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (this.textGroup != null && this.credGroup != null) {
            a = new Jb(0, 0, a, true);
            var c = 1;
            if (c == null) {
              c = 17;
            }
            if (c == 1 || c == 17) {
              a.set_x((g.width - a.get_width()) / 2);
            }
            if (c == 16 || c == 17) {
              a.set_y((g.height - a.get_height()) / 2);
            }
            a.set_y(a.y + (this.textGroup.length * 60 + 200 + b));
            this.credGroup.add(a);
            this.textGroup.add(a);
          }
        },
        deleteCoolText: function () {
          while (this.textGroup.members.length > 0) {
            this.credGroup.remove(this.textGroup.members[0], true);
            this.textGroup.remove(this.textGroup.members[0], true);
          }
        },
        beatHit: function () {
          U.prototype.beatHit.call(this);
          if (this.logoBl != null) {
            this.logoBl.animation.play("bump", true);
          }
          if (this.gfDance != null) {
            if (this.danceLeft = !this.danceLeft) {
              this.gfDance.animation.play("danceRight");
            } else {
              this.gfDance.animation.play("danceLeft");
            }
          }
          if (!zc.closedState) {
            this.sickBeats++;
            switch (this.sickBeats) {
              case 1:
                var a = g.sound;
                var b = y.returnSound("music", "freakyMenu", null);
                a.playMusic(b, 0);
                a = g.sound.music;
                b = 4;
                var c = 0;
                var d = 0.7;
                if (d == null) {
                  d = 1;
                }
                if (c == null) {
                  c = 0;
                }
                if (b == null) {
                  b = 1;
                }
                if (a._channel == null) {
                  a.play();
                }
                if (a.fadeTween != null) {
                  a.fadeTween.cancel();
                }
                a.fadeTween = ka.num(c, d, b, {
                  onComplete: null
                }, l(a, a.volumeTween));
                break;
              case 2:
                this.createCoolText(["ninjamuffin99", "phantomArcade", "kawaisprite", "evilsk8er"]);
                break;
              case 4:
                this.addMoreText("present");
                break;
              case 5:
                this.deleteCoolText();
                break;
              case 6:
                this.createCoolText(["In association", "with"], -40);
                break;
              case 8:
                this.addMoreText("newgrounds", -40);
                this.ngSpr.set_visible(true);
                break;
              case 9:
                this.deleteCoolText();
                this.ngSpr.set_visible(false);
                break;
              case 10:
                this.createCoolText([this.curWacky[0]]);
                break;
              case 12:
                this.addMoreText(this.curWacky[1]);
                break;
              case 13:
                this.deleteCoolText();
                break;
              case 14:
                this.addMoreText("Friday");
                break;
              case 15:
                this.addMoreText("Night");
                break;
              case 16:
                this.addMoreText("Funkin");
                break;
              case 17:
                this.skipIntro();
            }
          }
        },
        skipIntro: function () {
          if (!this.skippedIntro) {
            this.remove(this.ngSpr);
            this.remove(this.credGroup);
            g.camera.flash(-1, 4);
            this.skippedIntro = true;
          }
        },
        __class__: zc
      });
      function dn(a, b) {
        if (b == null) {
          b = true;
        }
        this.characterList = [];
        this.assetFolder = "week1";
        this.undoOffsets = null;
        this.holdingArrowsTime = this.holdingArrowsElapsed = this.holdingFrameTime = this.holdingFrameElapsed = 0;
        this.ghostAlpha = 0.6;
        this.curAnim = 0;
        this.anims = null;
        this._goToPlayState = true;
        this._char = null;
        this.copiedOffset = [0, 0];
        var c = 0;
        var d = 0;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        d = fa.pool.get().set(c, d);
        d._inPool = false;
        d._weak = true;
        this.bfPosition = d;
        d = c = 0;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        d = fa.pool.get().set(c, d);
        d._inPool = false;
        d._weak = true;
        this.dadPosition = d;
        this.isAnimateSprite = false;
        this._char = a;
        this._goToPlayState = b;
        if (this._char == null) {
          this._char = ad.DEFAULT_CHARACTER;
        }
        U.call(this);
      }
      h["states.editors.CharacterEditorState"] = dn;
      dn.__name__ = "states.editors.CharacterEditorState";
      dn.__super__ = U;
      dn.prototype = q(U.prototype, {
        create: function () {
          if (C.data.cacheOnGPU) {
            y.clearStoredMemory();
          }
          var a = g.sound.music;
          a.cleanup(a.autoDestroy, true);
          this.camEditor = this.initPsychCamera();
          this.camHUD = new Vb();
          this.camHUD.bgColor &= 16777215;
          this.camHUD.bgColor |= 0;
          g.cameras.add(this.camHUD, false);
          var b = y.currentLevel;
          y.currentLevel = this.assetFolder;
          a = new Gb("stageback", -600, -200, 0.9, 0.9);
          this.add(a);
          a = new Gb("stagefront", -650, 600, 0.9, 0.9);
          a.setGraphicSize(a.get_width() * 1.1 | 0);
          a.updateHitbox();
          this.add(a);
          a = this.dadPosition;
          var c = 100;
          var d = 100;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          a = this.bfPosition;
          c = 770;
          d = 100;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          y.currentLevel = b;
          this.animsTxtGroup = new Ra();
          this.silhouettes = new db();
          this.add(this.silhouettes);
          b = new G(this.dadPosition.x, this.dadPosition.y).loadGraphic(y.image("editors/silhouetteDad"));
          b.set_antialiasing(C.data.antialiasing);
          b.set_active(false);
          a = b.offset;
          c = -4;
          d = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          this.silhouettes.add(b);
          b = new G(this.bfPosition.x, this.bfPosition.y + 350).loadGraphic(y.image("editors/silhouetteBF"));
          b.set_antialiasing(C.data.antialiasing);
          b.set_active(false);
          a = b.offset;
          c = -6;
          d = 2;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          this.silhouettes.add(b);
          this.silhouettes.set_alpha(0.25);
          this.ghost = new G();
          this.ghost.set_visible(false);
          this.ghost.set_alpha(this.ghostAlpha);
          this.add(this.ghost);
          this.addCharacter();
          this.cameraFollowPointer = new G().loadGraphic(cc.fromClass(hi));
          this.cameraFollowPointer.setGraphicSize(40, 40);
          this.cameraFollowPointer.updateHitbox();
          this.add(this.cameraFollowPointer);
          this.healthBar = new Dh(30, g.height - 75);
          a = this.healthBar.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.healthBar);
          this.healthBar.set_cameras([this.camHUD]);
          this.healthIcon = new Ue(this.character.healthIcon);
          this.healthIcon.set_y(g.height - 150);
          this.add(this.healthIcon);
          this.healthIcon.set_cameras([this.camHUD]);
          this.animsTxtGroup.set_cameras([this.camHUD]);
          this.add(this.animsTxtGroup);
          b = new Q(g.width - 300, g.height - 24, 300, "Press F1 for Help", 16);
          b.set_cameras([this.camHUD]);
          b.setFormat(null, 16, -1, "right", Ta.OUTLINE_FAST, -16777216);
          b.set_borderColor(-16777216);
          a = b.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          b.set_borderSize(1);
          b.set_active(false);
          this.add(b);
          this.cameraZoomText = new Q(0, 50, 200, "Zoom: 1x");
          this.cameraZoomText.setFormat(null, 16, -1, "center", Ta.OUTLINE_FAST, -16777216);
          a = this.cameraZoomText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.cameraZoomText.set_borderSize(1);
          a = this.cameraZoomText;
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          this.cameraZoomText.set_cameras([this.camHUD]);
          this.add(this.cameraZoomText);
          this.frameAdvanceText = new Q(0, 75, 350, "");
          this.frameAdvanceText.setFormat(null, 16, -1, "center", Ta.OUTLINE_FAST, -16777216);
          a = this.frameAdvanceText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.frameAdvanceText.set_borderSize(1);
          a = this.frameAdvanceText;
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          this.frameAdvanceText.set_cameras([this.camHUD]);
          this.add(this.frameAdvanceText);
          this.addHelpScreen();
          g.mouse.set_visible(true);
          g.camera.set_zoom(1);
          this.makeUIMenu();
          a = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
          b = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
          this.cameraFollowPointer.setPosition(a, b);
          g.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - g.width / 2);
          g.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - g.height / 2);
          this.character.finishAnimation();
          if (C.data.cacheOnGPU) {
            y.clearUnusedMemory();
          }
          U.prototype.create.call(this);
        },
        addHelpScreen: function () {
          this.helpBg = new G().makeGraphic(1, 1, -16777216);
          var a = this.helpBg.scale;
          var b = g.width;
          var c = g.height;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this.helpBg.updateHitbox();
          this.helpBg.set_alpha(0.6);
          this.helpBg.set_cameras([this.camHUD]);
          this.helpBg.set_active(this.helpBg.set_visible(false));
          this.add(this.helpBg);
          b = "CAMERA;\t\t;E/Q - Camera Zoom In/Out;\t\t;J/K/L/I - Move Camera;\t\t;R - Reset Camera Zoom;\t\t;;\t\t;CHARACTER;\t\t;Ctrl + R - Reset Current Offset;\t\t;Ctrl + C - Copy Current Offset;\t\t;Ctrl + V - Paste Copied Offset on Current Animation;\t\t;Ctrl + Z - Undo Last Paste or Reset;\t\t;W/S - Previous/Next Animation;\t\t;Space - Replay Animation;\t\t;Arrow Keys/Mouse & Right Click - Move Offset;\t\t;A/D - Frame Advance (Back/Forward);\t\t;;\t\t;OTHER;\t\t;F12 - Toggle Silhouettes;\t\t;Hold Shift - Move Offsets 10x faster and Camera 4x faster;\t\t;Hold Control - Move camera 4x slower".split(";");
          this.helpTexts = new db();
          this.helpTexts.set_cameras([this.camHUD]);
          c = 0;
          for (var d = b.length; c < d;) {
            var e = c++;
            if (!(b[e].length < 2)) {
              var f = new Q(0, 0, 600, b[e], 16);
              f.setFormat(null, 16, -1, "center", Ta.OUTLINE_FAST, -16777216);
              f.set_borderColor(-16777216);
              a = f.scrollFactor;
              a.set_x(0);
              a.set_y(0);
              f.set_borderSize(1);
              f.set_x((g.width - f.get_width()) / 2);
              f.set_y((g.height - f.get_height()) / 2);
              this.add(f);
              f.set_y(f.y + (e - b.length / 2) * 16);
              f.set_active(false);
              this.helpTexts.add(f);
            }
          }
          this.helpTexts.set_active(this.helpTexts.set_visible(false));
          this.add(this.helpTexts);
        },
        addCharacter: function (a) {
          if (a == null) {
            a = false;
          }
          var b = -1;
          if (this.character != null) {
            b = this.members.indexOf(this.character);
            this.remove(this.character);
            this.character.destroy();
          }
          if (a) {
            var c = this.character.isPlayer;
          } else {
            c = this._char;
            c = (c == "bf" || !!w.startsWith(c, "bf-") || !!w.endsWith(c, "-player") || !!w.endsWith(c, "-dead")) && !w.endsWith(c, "-opponent") && !w.startsWith(c, "gf-") && !w.endsWith(c, "-gf") && c != "gf";
          }
          this.character = new ad(0, 0, this._char, c);
          if (!a && this.character.editorIsPlayer != null && c != this.character.editorIsPlayer) {
            this.character.isPlayer = !this.character.isPlayer;
            this.character.set_flipX(this.character.originalFlipX != this.character.isPlayer);
            if (this.check_player != null) {
              this.check_player.set_checked(this.character.isPlayer);
            }
          }
          this.character.debugMode = true;
          if (b > -1) {
            this.insert(b, this.character);
          } else {
            this.add(this.character);
          }
          if (this.character == null || this.character.isPlayer) {
            if (this.character == null) {
              c = this._char;
              a = c != "bf" && !w.startsWith(c, "bf-") && !w.endsWith(c, "-player") && !w.endsWith(c, "-dead") || w.endsWith(c, "-opponent") || w.startsWith(c, "gf-") || w.endsWith(c, "-gf") || c == "gf";
            } else {
              a = false;
            }
          } else {
            a = true;
          }
          if (a) {
            this.character.setPosition(this.dadPosition.x, this.dadPosition.y);
          } else {
            this.character.setPosition(this.bfPosition.x, this.bfPosition.y);
          }
          a = this.character;
          a.set_x(a.x + this.character.positionArray[0]);
          a = this.character;
          a.set_y(a.y + this.character.positionArray[1]);
          this.anims = this.character.animationsArray;
          if (this.anims.length > 0) {
            this.character.playAnim(this.anims[0].anim, true);
          }
          this.curAnim = 0;
          for (a = new wc(this.animsTxtGroup.members, null); a.hasNext();) {
            c = a.next();
            c.kill();
          }
          c = b = 0;
          for (var d = this.anims; c < d.length;) {
            var e = d[c];
            ++c;
            a = this.animsTxtGroup.recycle(Q);
            a.set_x(10);
            a.set_y(32 + b * 20);
            a.set_fieldWidth(400);
            a.set_fieldHeight(20);
            a.set_text(e.anim + ": " + H.string(e.offsets));
            a.setFormat(null, 16, -1, "left", Ta.OUTLINE_FAST, -16777216);
            e = a.scrollFactor;
            e.set_x(0);
            e.set_y(0);
            a.set_borderSize(1);
            this.animsTxtGroup.add(a);
            ++b;
          }
          b = 0;
          for (a = new wc(this.animsTxtGroup.members, null); a.hasNext();) {
            c = a.next();
            c.set_color(-1);
            if (b == this.curAnim) {
              c.set_color(-16711936);
            }
            ++b;
          }
          if (this.animationDropDown != null) {
            this.reloadAnimationDropDown();
          }
        },
        makeUIMenu: function () {
          var a = [{
            name: "Ghost",
            label: "Ghost"
          }, {
            name: "Settings",
            label: "Settings"
          }];
          this.UI_box = new ne(null, null, a, null, true);
          this.UI_box.set_cameras([this.camHUD]);
          this.UI_box.resize(250, 120);
          this.UI_box.set_x(g.width - 275);
          this.UI_box.set_y(25);
          a = this.UI_box.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          a = [{
            name: "Character",
            label: "Character"
          }, {
            name: "Animations",
            label: "Animations"
          }];
          this.UI_characterbox = new ne(null, null, a, null, true);
          this.UI_characterbox.set_cameras([this.camHUD]);
          this.UI_characterbox.resize(350, 280);
          this.UI_characterbox.set_x(this.UI_box.x - 100);
          this.UI_characterbox.set_y(this.UI_box.y + this.UI_box.get_height());
          a = this.UI_characterbox.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.UI_characterbox);
          this.add(this.UI_box);
          this.addGhostUI();
          this.addSettingsUI();
          this.addAnimationsUI();
          this.addCharacterUI();
          this.UI_box.set_selected_tab_id("Settings");
          this.UI_characterbox.set_selected_tab_id("Character");
        },
        addGhostUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Ghost";
          var c = new ub(25, 15, "Make Ghost", function () {
            var b = a.character;
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              b = a.anims[a.curAnim];
              if (a.character.isAnimateAtlas) {
                if (b != null) {
                  if (a.animateGhost == null) {
                    a.animateGhost = new ii(a.ghost.x, a.ghost.y);
                    a.animateGhost.showPivot = false;
                    a.insert(a.members.indexOf(a.ghost), a.animateGhost);
                    a.animateGhost.set_active(false);
                  }
                  if (a.animateGhost == null || a.animateGhostImage != a.character.imageFile) {
                    y.loadAnimateAtlas(a.animateGhost, a.character.imageFile);
                  }
                  if (b.indices != null && b.indices.length > 0) {
                    a.animateGhost.anim.addBySymbolIndices("anim", b.name, b.indices, 0, false);
                  } else {
                    a.animateGhost.anim.addBySymbol("anim", b.name, 0, false);
                  }
                  a.animateGhost.anim.play("anim", true, false, a.character.atlas.anim.get_curFrame());
                  a.animateGhost.anim.pause();
                  a.animateGhostImage = a.character.imageFile;
                }
              } else {
                a.ghost.loadGraphic(a.character.graphic);
                a.ghost.frames.frames = a.character.frames.frames;
                a.ghost.animation.copyFrom(a.character.animation);
                a.ghost.animation.play(a.character.animation._curAnim.name, true, false, a.character.animation._curAnim.curFrame);
                b = a.ghost.animation;
                if (b._curAnim != null) {
                  b._curAnim.pause();
                }
              }
              b = a.character.isAnimateAtlas ? a.animateGhost : a.ghost;
              if (b != null) {
                b.setPosition(a.character.x, a.character.y);
                b.set_antialiasing(a.character.antialiasing);
                b.set_flipX(a.character.flipX);
                b.set_alpha(a.ghostAlpha);
                var c = b.scale;
                var d = a.character.scale.x;
                var e = a.character.scale.y;
                if (e == null) {
                  e = 0;
                }
                if (d == null) {
                  d = 0;
                }
                c.set_x(d);
                c.set_y(e);
                b.updateHitbox();
                c = b.offset;
                d = a.character.offset.x;
                e = a.character.offset.y;
                if (e == null) {
                  e = 0;
                }
                if (d == null) {
                  d = 0;
                }
                c.set_x(d);
                c.set_y(e);
                b.set_visible(true);
                b = b == a.animateGhost ? a.ghost : a.animateGhost;
                if (b != null) {
                  b.set_visible(false);
                }
              }
              yb.trace("created ghost image", {
                fileName: "source/states/editors/CharacterEditorState.hx",
                lineNumber: 349,
                className: "states.editors.CharacterEditorState",
                methodName: "addGhostUI"
              });
            }
          });
          var d = new zb(20 + c.x + c.get_width(), c.y, null, null, "Highlight Ghost", 100);
          d.callback = function () {
            var b = d.checked ? 125 : 0;
            a.ghost.colorTransform.redOffset = b;
            a.ghost.colorTransform.greenOffset = b;
            a.ghost.colorTransform.blueOffset = b;
            if (a.animateGhost != null) {
              a.animateGhost.colorTransform.redOffset = b;
              a.animateGhost.colorTransform.greenOffset = b;
              a.animateGhost.colorTransform.blueOffset = b;
            }
          };
          var e = new vh(this, "ghostAlpha", 10, c.y + 25, 0, 1, 210, null, 5, -1, -16777216);
          e.nameLabel.set_text("Opacity:");
          e.decimals = 2;
          e.callback = function (b) {
            a.ghost.set_alpha(a.ghostAlpha);
            if (a.animateGhost != null) {
              a.animateGhost.set_alpha(a.ghostAlpha);
            }
          };
          e.value = this.ghostAlpha;
          b.add(c);
          b.add(d);
          b.add(e);
          this.UI_box.addGroup(b);
        },
        addSettingsUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Settings";
          this.check_player = new zb(10, 60, null, null, "Playable Character", 100);
          this.check_player.set_checked(this.character.isPlayer);
          this.check_player.callback = function () {
            a.character.isPlayer = !a.character.isPlayer;
            a.character.set_flipX(!a.character.flipX);
            if (a.character == null || a.character.isPlayer) {
              if (a.character == null) {
                var b = a._char;
                b = b != "bf" && !w.startsWith(b, "bf-") && !w.endsWith(b, "-player") && !w.endsWith(b, "-dead") || w.endsWith(b, "-opponent") || w.startsWith(b, "gf-") || w.endsWith(b, "-gf") || b == "gf";
              } else {
                b = false;
              }
            } else {
              b = true;
            }
            if (b) {
              a.character.setPosition(a.dadPosition.x, a.dadPosition.y);
            } else {
              a.character.setPosition(a.bfPosition.x, a.bfPosition.y);
            }
            b = a.character;
            b.set_x(b.x + a.character.positionArray[0]);
            b = a.character;
            b.set_y(b.y + a.character.positionArray[1]);
            b = false;
            if (b == null) {
              b = true;
            }
            var c = a.character.isPlayer ? a.character.getMidpoint().x - 100 - a.character.cameraPosition[0] : a.character.getMidpoint().x + 150 + a.character.cameraPosition[0];
            var d = a.character.getMidpoint().y - 100 + a.character.cameraPosition[1];
            a.cameraFollowPointer.setPosition(c, d);
            if (b) {
              g.camera.scroll.set_x(a.cameraFollowPointer.getMidpoint().x - g.width / 2);
              g.camera.scroll.set_y(a.cameraFollowPointer.getMidpoint().y - g.height / 2);
            }
          };
          var c = new ub(140, 20, "Reload Char", function () {
            a.addCharacter(true);
            var b = a.character.isPlayer ? a.character.getMidpoint().x - 100 - a.character.cameraPosition[0] : a.character.getMidpoint().x + 150 + a.character.cameraPosition[0];
            var c = a.character.getMidpoint().y - 100 + a.character.cameraPosition[1];
            a.cameraFollowPointer.setPosition(b, c);
            g.camera.scroll.set_x(a.cameraFollowPointer.getMidpoint().x - g.width / 2);
            g.camera.scroll.set_y(a.cameraFollowPointer.getMidpoint().y - g.height / 2);
            a.reloadCharacterOptions();
            a.reloadCharacterDropDown();
          });
          var d = new ub(140, 50, "Load Template", function () {
            a.character.loadCharacterFile({
              animations: [{
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "idle",
                indices: [],
                name: "BF idle dance"
              }, {
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "singLEFT",
                indices: [],
                name: "BF NOTE LEFT0"
              }, {
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "singDOWN",
                indices: [],
                name: "BF NOTE DOWN0"
              }, {
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "singUP",
                indices: [],
                name: "BF NOTE UP0"
              }, {
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "singRIGHT",
                indices: [],
                name: "BF NOTE RIGHT0"
              }],
              no_antialiasing: false,
              flip_x: false,
              healthicon: "face",
              image: "characters/BOYFRIEND",
              sing_duration: 4,
              scale: 1,
              healthbar_colors: [161, 161, 161],
              camera_position: [0, 0],
              position: [0, 0],
              vocals_file: null
            });
            a.character.set_color(-1);
            a.character.set_alpha(1);
            a.anims = a.character.animationsArray;
            if (a.anims.length > 0) {
              a.character.playAnim(a.anims[0].anim, true);
            }
            a.curAnim = 0;
            for (var b = new wc(a.animsTxtGroup.members, null); b.hasNext();) {
              var c = b.next();
              c.kill();
            }
            var d = 0;
            c = 0;
            for (var h = a.anims; c < h.length;) {
              var n = h[c];
              ++c;
              b = a.animsTxtGroup.recycle(Q);
              b.set_x(10);
              b.set_y(32 + d * 20);
              b.set_fieldWidth(400);
              b.set_fieldHeight(20);
              b.set_text(n.anim + ": " + H.string(n.offsets));
              b.setFormat(null, 16, -1, "left", Ta.OUTLINE_FAST, -16777216);
              n = b.scrollFactor;
              n.set_x(0);
              n.set_y(0);
              b.set_borderSize(1);
              a.animsTxtGroup.add(b);
              ++d;
            }
            d = 0;
            for (b = new wc(a.animsTxtGroup.members, null); b.hasNext();) {
              c = b.next();
              c.set_color(-1);
              if (d == a.curAnim) {
                c.set_color(-16711936);
              }
              ++d;
            }
            if (a.animationDropDown != null) {
              a.reloadAnimationDropDown();
            }
            a.reloadCharacterOptions();
            if (a.character == null || a.character.isPlayer) {
              if (a.character == null) {
                b = a._char;
                b = b != "bf" && !w.startsWith(b, "bf-") && !w.endsWith(b, "-player") && !w.endsWith(b, "-dead") || w.endsWith(b, "-opponent") || w.startsWith(b, "gf-") || w.endsWith(b, "-gf") || b == "gf";
              } else {
                b = false;
              }
            } else {
              b = true;
            }
            if (b) {
              a.character.setPosition(a.dadPosition.x, a.dadPosition.y);
            } else {
              a.character.setPosition(a.bfPosition.x, a.bfPosition.y);
            }
            b = a.character;
            b.set_x(b.x + a.character.positionArray[0]);
            b = a.character;
            b.set_y(b.y + a.character.positionArray[1]);
            b = a.character.isPlayer ? a.character.getMidpoint().x - 100 - a.character.cameraPosition[0] : a.character.getMidpoint().x + 150 + a.character.cameraPosition[0];
            d = a.character.getMidpoint().y - 100 + a.character.cameraPosition[1];
            a.cameraFollowPointer.setPosition(b, d);
            g.camera.scroll.set_x(a.cameraFollowPointer.getMidpoint().x - g.width / 2);
            g.camera.scroll.set_y(a.cameraFollowPointer.getMidpoint().y - g.height / 2);
            a.reloadCharacterDropDown();
          });
          d.set_color(-65536);
          d.label.set_color(-1);
          this.charDropDown = new vc(10, 30, vc.makeStrIdLabelArray([""], true), function (b) {
            b = a.characterList[H.parseInt(b)];
            if (b != null && !(b.length < 1)) {
              var c = y.getPath("characters/" + b + ".json", "TEXT", null, true);
              if (W.exists(c)) {
                a._char = b;
                a.check_player.set_checked(a.character.isPlayer);
                a.addCharacter();
                a.reloadCharacterOptions();
                a.reloadCharacterDropDown();
                b = a.character.isPlayer ? a.character.getMidpoint().x - 100 - a.character.cameraPosition[0] : a.character.getMidpoint().x + 150 + a.character.cameraPosition[0];
                c = a.character.getMidpoint().y - 100 + a.character.cameraPosition[1];
                a.cameraFollowPointer.setPosition(b, c);
                g.camera.scroll.set_x(a.cameraFollowPointer.getMidpoint().x - g.width / 2);
                g.camera.scroll.set_y(a.cameraFollowPointer.getMidpoint().y - g.height / 2);
              } else {
                a.reloadCharacterDropDown();
                g.sound.play(y.sound("cancelMenu"));
              }
            }
          });
          this.reloadCharacterDropDown();
          this.charDropDown.set_selectedLabel(this._char);
          b.add(new Q(this.charDropDown.x, this.charDropDown.y - 18, 0, "Character:"));
          b.add(this.check_player);
          b.add(c);
          b.add(d);
          b.add(this.charDropDown);
          this.UI_box.addGroup(b);
        },
        addAnimationsUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Animations";
          this.animationInputText = new gb(15, 85, 80, "", 8);
          this.animationNameInputText = new gb(this.animationInputText.x, this.animationInputText.y + 35, 150, "", 8);
          this.animationIndicesInputText = new gb(this.animationNameInputText.x, this.animationNameInputText.y + 40, 250, "", 8);
          this.animationFramerate = new Sb(this.animationInputText.x + 170, this.animationInputText.y, 1, 24, 0, 240, 0);
          this.animationLoopCheckBox = new zb(this.animationNameInputText.x + 170, this.animationNameInputText.y - 1, null, null, "Should it Loop?", 100);
          this.animationDropDown = new vc(15, this.animationInputText.y - 55, vc.makeStrIdLabelArray([""], true), function (b) {
            b = H.parseInt(b);
            b = a.character.animationsArray[b];
            a.animationInputText.set_text(b.anim);
            a.animationNameInputText.set_text(b.name);
            a.animationLoopCheckBox.set_checked(b.loop);
            a.animationFramerate.set_value(b.fps);
            b = b.indices.toString();
            a.animationIndicesInputText.set_text(M.substr(b, 1, b.length - 2));
          });
          var c = new ub(70, this.animationIndicesInputText.y + 60, "Add/Update", function () {
            var b = [];
            var c = w.trim(a.animationIndicesInputText.text).split(",");
            if (c.length > 1) {
              for (var d = 0, e = c.length; d < e;) {
                var f = d++;
                var g = H.parseInt(c[f]);
                if (c[f] != null && c[f] != "" && !isNaN(g) && g > -1) {
                  b.push(g);
                }
              }
            }
            g = [0, 0];
            d = 0;
            for (e = a.character.animationsArray; d < e.length;) {
              c = e[d];
              ++d;
              if (a.animationInputText.text == c.anim) {
                g = c.offsets;
                if (Object.prototype.hasOwnProperty.call(a.character.animOffsets.h, a.animationInputText.text)) {
                  if (a.character.isAnimateAtlas) {
                    f = a.animationInputText.text;
                    var k = a.character.atlas.anim.animsMap;
                    if (Object.prototype.hasOwnProperty.call(k.h, f)) {
                      delete k.h[f];
                    }
                  } else {
                    a.character.animation.remove(a.animationInputText.text);
                  }
                }
                M.remove(a.character.animationsArray, c);
              }
            }
            f = {
              offsets: [0, 0],
              loop: false,
              fps: 24,
              anim: a.animationInputText.text,
              indices: [],
              name: a.animationNameInputText.text
            };
            f.fps = Math.round(a.animationFramerate.value);
            f.loop = a.animationLoopCheckBox.checked;
            f.indices = b;
            f.offsets = g;
            a.addAnimation(f.anim, f.name, f.fps, f.loop, f.indices);
            a.character.animationsArray.push(f);
            a.anims = a.character.animationsArray;
            if (a.anims.length > 0) {
              a.character.playAnim(a.anims[0].anim, true);
            }
            a.curAnim = 0;
            for (b = new wc(a.animsTxtGroup.members, null); b.hasNext();) {
              d = b.next();
              d.kill();
            }
            d = g = 0;
            for (e = a.anims; d < e.length;) {
              c = e[d];
              ++d;
              b = a.animsTxtGroup.recycle(Q);
              b.set_x(10);
              b.set_y(32 + g * 20);
              b.set_fieldWidth(400);
              b.set_fieldHeight(20);
              b.set_text(c.anim + ": " + H.string(c.offsets));
              b.setFormat(null, 16, -1, "left", Ta.OUTLINE_FAST, -16777216);
              c = b.scrollFactor;
              c.set_x(0);
              c.set_y(0);
              b.set_borderSize(1);
              a.animsTxtGroup.add(b);
              ++g;
            }
            g = 0;
            for (b = new wc(a.animsTxtGroup.members, null); b.hasNext();) {
              d = b.next();
              d.set_color(-1);
              if (g == a.curAnim) {
                d.set_color(-16711936);
              }
              ++g;
            }
            if (a.animationDropDown != null) {
              a.reloadAnimationDropDown();
            }
            a.curAnim = Math.max(0, a.character.animationsArray.indexOf(f)) | 0;
            a.character.playAnim(f.anim, true);
            yb.trace("Added/Updated animation: " + a.animationInputText.text, {
              fileName: "source/states/editors/CharacterEditorState.hx",
              lineNumber: 568,
              className: "states.editors.CharacterEditorState",
              methodName: "addAnimationsUI"
            });
          });
          var d = new ub(180, this.animationIndicesInputText.y + 60, "Remove", function () {
            for (var b = 0, c = a.character.animationsArray; b < c.length;) {
              var d = c[b];
              ++b;
              if (a.animationInputText.text == d.anim) {
                b = false;
                c = d.anim;
                var e = a.character;
                var f = "";
                if (e.isAnimateAtlas ? e.atlas.anim.get_curSymbol() != null : e.animation._curAnim != null) {
                  f = e.isAnimateAtlas ? e.atlas.anim.lastPlayedAnim : e.animation._curAnim.name;
                }
                if (c == (f ?? "")) {
                  b = true;
                }
                if (Object.prototype.hasOwnProperty.call(a.character.animOffsets.h, d.anim)) {
                  if (a.character.isAnimateAtlas) {
                    c = d.anim;
                    e = a.character.atlas.anim.animsMap;
                    if (Object.prototype.hasOwnProperty.call(e.h, c)) {
                      delete e.h[c];
                    }
                  } else {
                    a.character.animation.remove(d.anim);
                  }
                  c = d.anim;
                  e = a.character.animOffsets;
                  if (Object.prototype.hasOwnProperty.call(e.h, c)) {
                    delete e.h[c];
                  }
                  M.remove(a.character.animationsArray, d);
                }
                if (b && a.character.animationsArray.length > 0) {
                  a.curAnim = $b.wrap(a.curAnim, 0, a.anims.length - 1);
                  a.character.playAnim(a.anims[a.curAnim].anim, true);
                  d = 0;
                  b = new wc(a.animsTxtGroup.members, null);
                  while (b.hasNext()) {
                    c = b.next();
                    c.set_color(-1);
                    if (d == a.curAnim) {
                      c.set_color(-16711936);
                    }
                    ++d;
                  }
                }
                a.anims = a.character.animationsArray;
                if (a.anims.length > 0) {
                  a.character.playAnim(a.anims[0].anim, true);
                }
                a.curAnim = 0;
                for (d = new wc(a.animsTxtGroup.members, null); d.hasNext();) {
                  d.next().kill();
                }
                b = d = 0;
                for (c = a.anims; b < c.length;) {
                  f = c[b];
                  ++b;
                  e = a.animsTxtGroup.recycle(Q);
                  e.set_x(10);
                  e.set_y(32 + d * 20);
                  e.set_fieldWidth(400);
                  e.set_fieldHeight(20);
                  e.set_text(f.anim + ": " + H.string(f.offsets));
                  e.setFormat(null, 16, -1, "left", Ta.OUTLINE_FAST, -16777216);
                  f = e.scrollFactor;
                  f.set_x(0);
                  f.set_y(0);
                  e.set_borderSize(1);
                  a.animsTxtGroup.add(e);
                  ++d;
                }
                d = 0;
                for (b = new wc(a.animsTxtGroup.members, null); b.hasNext();) {
                  c = b.next();
                  c.set_color(-1);
                  if (d == a.curAnim) {
                    c.set_color(-16711936);
                  }
                  ++d;
                }
                if (a.animationDropDown != null) {
                  a.reloadAnimationDropDown();
                }
                yb.trace("Removed animation: " + a.animationInputText.text, {
                  fileName: "source/states/editors/CharacterEditorState.hx",
                  lineNumber: 596,
                  className: "states.editors.CharacterEditorState",
                  methodName: "addAnimationsUI"
                });
                break;
              }
            }
          });
          this.anims = this.character.animationsArray;
          if (this.anims.length > 0) {
            this.character.playAnim(this.anims[0].anim, true);
          }
          this.curAnim = 0;
          for (var e = new wc(this.animsTxtGroup.members, null); e.hasNext();) {
            var f = e.next();
            f.kill();
          }
          var g = 0;
          f = 0;
          for (var h = this.anims; f < h.length;) {
            var n = h[f];
            ++f;
            e = this.animsTxtGroup.recycle(Q);
            e.set_x(10);
            e.set_y(32 + g * 20);
            e.set_fieldWidth(400);
            e.set_fieldHeight(20);
            e.set_text(n.anim + ": " + H.string(n.offsets));
            e.setFormat(null, 16, -1, "left", Ta.OUTLINE_FAST, -16777216);
            n = e.scrollFactor;
            n.set_x(0);
            n.set_y(0);
            e.set_borderSize(1);
            this.animsTxtGroup.add(e);
            ++g;
          }
          g = 0;
          for (e = new wc(this.animsTxtGroup.members, null); e.hasNext();) {
            f = e.next();
            f.set_color(-1);
            if (g == this.curAnim) {
              f.set_color(-16711936);
            }
            ++g;
          }
          if (this.animationDropDown != null) {
            this.reloadAnimationDropDown();
          }
          this.animationDropDown.set_selectedLabel(this.anims[0] != null ? this.anims[0].anim : "");
          b.add(new Q(this.animationDropDown.x, this.animationDropDown.y - 18, 0, "Animations:"));
          b.add(new Q(this.animationInputText.x, this.animationInputText.y - 18, 0, "Animation name:"));
          b.add(new Q(this.animationFramerate.x, this.animationFramerate.y - 18, 0, "Framerate:"));
          b.add(new Q(this.animationNameInputText.x, this.animationNameInputText.y - 18, 0, "Animation Symbol Name/Tag:"));
          b.add(new Q(this.animationIndicesInputText.x, this.animationIndicesInputText.y - 18, 0, "ADVANCED - Animation Indices:"));
          b.add(this.animationInputText);
          b.add(this.animationNameInputText);
          b.add(this.animationIndicesInputText);
          b.add(this.animationFramerate);
          b.add(this.animationLoopCheckBox);
          b.add(c);
          b.add(d);
          b.add(this.animationDropDown);
          this.UI_characterbox.addGroup(b);
        },
        addCharacterUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Character";
          this.imageInputText = new gb(15, 30, 200, this.character.imageFile, 8);
          var c = new ub(this.imageInputText.x + 210, this.imageInputText.y - 3, "Reload Image", function () {
            var b = a.character;
            var c = "";
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              c = b.isAnimateAtlas ? b.atlas.anim.lastPlayedAnim : b.animation._curAnim.name;
            }
            c = c ?? "";
            a.character.imageFile = a.imageInputText.text;
            a.reloadCharacterImage();
            b = a.character;
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              a.character.playAnim(c, true);
            }
          });
          var d = new ub(c.x, c.y + 30, "Get Icon Color", function () {
            var b = a.healthIcon;
            var c = new rc();
            for (var d = 0, e = b.frameWidth; d < e;) {
              var g = d++;
              for (var h = 0, m = b.frameHeight; h < m;) {
                var p = h++;
                p = b.get_pixels().getPixel32(g, p);
                if (p != 0) {
                  if (c.h.hasOwnProperty(p)) {
                    c.h[p] += 1;
                  } else if (c.h[p] != -13520687) {
                    c.h[p] = 1;
                  }
                }
              }
            }
            d = b = 0;
            c.h[-16777216] = 0;
            for (e = c.keys(); e.hasNext();) {
              g = e.next();
              if (c.h[g] >= b) {
                b = c.h[g];
                d = g;
              }
            }
            new rc();
            c = xb._new(d);
            a.character.healthColorArray[0] = c >> 16 & 255;
            a.character.healthColorArray[1] = c >> 8 & 255;
            a.character.healthColorArray[2] = c & 255;
          });
          this.noAntialiasingCheckBox = new zb(this.flipXCheckBox.x, this.flipXCheckBox.y + 40, null, null, "No Antialiasing", 80);
          this.noAntialiasingCheckBox.set_checked(this.character.noAntialiasing);
          this.noAntialiasingCheckBox.callback = function () {
            a.character.set_antialiasing(false);
            if (!a.noAntialiasingCheckBox.checked && C.data.antialiasing) {
              a.character.set_antialiasing(true);
            }
            a.character.noAntialiasing = a.noAntialiasingCheckBox.checked;
          };
          this.positionXStepper = new Sb(this.flipXCheckBox.x + 110, this.flipXCheckBox.y, 10, this.character.positionArray[0], -9000, 9000, 0);
          this.positionYStepper = new Sb(this.positionXStepper.x + 60, this.positionXStepper.y, 10, this.character.positionArray[1], -9000, 9000, 0);
          this.positionCameraXStepper = new Sb(this.positionXStepper.x, this.positionXStepper.y + 40, 10, this.character.cameraPosition[0], -9000, 9000, 0);
          this.positionCameraYStepper = new Sb(this.positionYStepper.x, this.positionYStepper.y + 40, 10, this.character.cameraPosition[1], -9000, 9000, 0);
          var e = new ub(c.x, this.noAntialiasingCheckBox.y + 40, "Save Character", function () {
            a.saveCharacter();
          });
          this.healthColorStepperR = new Sb(this.singDurationStepper.x, e.y, 20, this.character.healthColorArray[0], 0, 255, 0);
          this.healthColorStepperG = new Sb(this.singDurationStepper.x + 65, e.y, 20, this.character.healthColorArray[1], 0, 255, 0);
          this.healthColorStepperB = new Sb(this.singDurationStepper.x + 130, e.y, 20, this.character.healthColorArray[2], 0, 255, 0);
          b.add(new Q(15, this.imageInputText.y - 18, 0, "Image file name:"));
          b.add(new Q(15, this.healthIconInputText.y - 18, 0, "Health icon name:"));
          b.add(new Q(15, this.vocalsInputText.y - 18, 0, "Vocals File Postfix:"));
          b.add(new Q(15, this.singDurationStepper.y - 18, 0, "Sing Animation length:"));
          b.add(new Q(15, this.scaleStepper.y - 18, 0, "Scale:"));
          b.add(new Q(this.positionXStepper.x, this.positionXStepper.y - 18, 0, "Character X/Y:"));
          b.add(new Q(this.positionCameraXStepper.x, this.positionCameraXStepper.y - 18, 0, "Camera X/Y:"));
          b.add(new Q(this.healthColorStepperR.x, this.healthColorStepperR.y - 18, 0, "Health bar R/G/B:"));
          b.add(this.imageInputText);
          b.add(c);
          b.add(d);
          b.add(this.healthIconInputText);
          b.add(this.vocalsInputText);
          b.add(this.singDurationStepper);
          b.add(this.scaleStepper);
          b.add(this.flipXCheckBox);
          b.add(this.noAntialiasingCheckBox);
          b.add(this.positionXStepper);
          b.add(this.positionYStepper);
          b.add(this.positionCameraXStepper);
          b.add(this.positionCameraYStepper);
          b.add(this.healthColorStepperR);
          b.add(this.healthColorStepperG);
          b.add(this.healthColorStepperB);
          b.add(e);
          this.UI_characterbox.addGroup(b);
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" || a == "change_numeric_stepper") {
            if (b instanceof gb) {
              if (b != this.healthIconInputText) {
                if (b == this.vocalsInputText) {
                  this.character.vocalsFile = this.vocalsInputText.text;
                } else if (b == this.imageInputText) {
                  this.character.imageFile = this.imageInputText.text;
                }
              }
            } else if (b instanceof Sb) {
              if (b == this.scaleStepper) {
                this.reloadCharacterImage();
                this.character.jsonScale = b.value;
                a = this.character.scale;
                c = b = this.character.jsonScale;
                if (c == null) {
                  c = 0;
                }
                if (b == null) {
                  b = 0;
                }
                a.set_x(b);
                a.set_y(c);
                this.character.updateHitbox();
                a = false;
                if (a == null) {
                  a = true;
                }
                b = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
                c = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
                this.cameraFollowPointer.setPosition(b, c);
                if (a) {
                  g.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - g.width / 2);
                  g.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - g.height / 2);
                }
              } else if (b == this.positionXStepper) {
                this.character.positionArray[0] = this.positionXStepper.value;
                if (this.character == null || this.character.isPlayer) {
                  if (this.character == null) {
                    a = this._char;
                    a = a != "bf" && !w.startsWith(a, "bf-") && !w.endsWith(a, "-player") && !w.endsWith(a, "-dead") || w.endsWith(a, "-opponent") || w.startsWith(a, "gf-") || w.endsWith(a, "-gf") || a == "gf";
                  } else {
                    a = false;
                  }
                } else {
                  a = true;
                }
                if (a) {
                  this.character.setPosition(this.dadPosition.x, this.dadPosition.y);
                } else {
                  this.character.setPosition(this.bfPosition.x, this.bfPosition.y);
                }
                a = this.character;
                a.set_x(a.x + this.character.positionArray[0]);
                a = this.character;
                a.set_y(a.y + this.character.positionArray[1]);
              } else if (b == this.positionYStepper) {
                this.character.positionArray[1] = this.positionYStepper.value;
                if (this.character == null || this.character.isPlayer) {
                  if (this.character == null) {
                    a = this._char;
                    a = a != "bf" && !w.startsWith(a, "bf-") && !w.endsWith(a, "-player") && !w.endsWith(a, "-dead") || w.endsWith(a, "-opponent") || w.startsWith(a, "gf-") || w.endsWith(a, "-gf") || a == "gf";
                  } else {
                    a = false;
                  }
                } else {
                  a = true;
                }
                if (a) {
                  this.character.setPosition(this.dadPosition.x, this.dadPosition.y);
                } else {
                  this.character.setPosition(this.bfPosition.x, this.bfPosition.y);
                }
                a = this.character;
                a.set_x(a.x + this.character.positionArray[0]);
                a = this.character;
                a.set_y(a.y + this.character.positionArray[1]);
              } else if (b == this.singDurationStepper) {
                this.character.singDuration = this.singDurationStepper.value;
              } else if (b == this.positionCameraXStepper) {
                this.character.cameraPosition[0] = this.positionCameraXStepper.value;
                b = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
                c = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
                this.cameraFollowPointer.setPosition(b, c);
                g.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - g.width / 2);
                g.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - g.height / 2);
              } else if (b == this.positionCameraYStepper) {
                this.character.cameraPosition[1] = this.positionCameraYStepper.value;
                b = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
                c = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
                this.cameraFollowPointer.setPosition(b, c);
                g.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - g.width / 2);
                g.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - g.height / 2);
              } else if (b == this.healthColorStepperR) {
                this.character.healthColorArray[0] = Math.round(this.healthColorStepperR.value);
              } else if (b == this.healthColorStepperG) {
                this.character.healthColorArray[1] = Math.round(this.healthColorStepperG.value);
              } else if (b == this.healthColorStepperB) {
                this.character.healthColorArray[2] = Math.round(this.healthColorStepperB.value);
              }
            }
          }
        },
        reloadCharacterImage: function () {
          var a = this.character;
          var b = "";
          if (a.isAnimateAtlas ? a.atlas.anim.get_curSymbol() != null : a.animation._curAnim != null) {
            b = a.isAnimateAtlas ? a.atlas.anim.lastPlayedAnim : a.animation._curAnim.name;
          }
          a = b ?? "";
          b = this.character.animationsArray.slice();
          this.character.destroyAtlas();
          this.character.isAnimateAtlas = false;
          this.character.set_color(-1);
          this.character.set_alpha(1);
          if (y.fileExists("images/" + this.character.imageFile + "/Animation.json", "TEXT")) {
            this.character.atlas = new ii();
            this.character.atlas.showPivot = false;
            try {
              y.loadAnimateAtlas(this.character.atlas, this.character.imageFile);
            } catch (k) {
              Na.lastError = k;
              var c = K.caught(k).unwrap();
              g.log.advanced("Could not load atlas " + this.character.imageFile + ": " + H.string(c), Ba.WARNING, true);
            }
            this.character.isAnimateAtlas = true;
          } else if (y.fileExists("images/" + this.character.imageFile + ".txt", "TEXT")) {
            c = this.character;
            var d = this.character.imageFile;
            var e = null;
            var f = y.image(d, e, true);
            c.set_frames(fb.fromSpriteSheetPacker(f, y.getPath("images/" + d + ".txt", null, e)));
          } else if (y.fileExists("images/" + this.character.imageFile + ".json", "TEXT")) {
            c = this.character;
            d = this.character.imageFile;
            e = null;
            f = y.image(d, e, true);
            c.set_frames(fb.fromTexturePackerJson(f, y.getPath("images/" + d + ".json", null, e)));
          } else {
            c = this.character;
            d = this.character.imageFile;
            e = null;
            f = y.image(d, e, true);
            c.set_frames(fb.fromSparrow(f, y.getPath("images/" + d + ".xml", null, e)));
          }
          for (c = 0; c < b.length;) {
            d = b[c];
            ++c;
            this.addAnimation("" + d.anim, "" + d.name, d.fps, d.loop, d.indices);
          }
          if (b.length > 0) {
            if (a != "") {
              this.character.playAnim(a, true);
            } else {
              this.character.dance();
            }
          }
        },
        reloadCharacterOptions: function () {
          if (this.UI_characterbox != null) {
            this.check_player.set_checked(this.character.isPlayer);
            this.imageInputText.set_text(this.character.imageFile);
            this.healthIconInputText.set_text(this.character.healthIcon);
            this.vocalsInputText.set_text(this.character.vocalsFile ?? "");
            this.singDurationStepper.set_value(this.character.singDuration);
            this.scaleStepper.set_value(this.character.jsonScale);
            this.flipXCheckBox.set_checked(this.character.originalFlipX);
            this.noAntialiasingCheckBox.set_checked(this.character.noAntialiasing);
            this.positionXStepper.set_value(this.character.positionArray[0]);
            this.positionYStepper.set_value(this.character.positionArray[1]);
            this.positionCameraXStepper.set_value(this.character.cameraPosition[0]);
            this.positionCameraYStepper.set_value(this.character.cameraPosition[1]);
            this.reloadAnimationDropDown();
          }
        },
        update: function (a) {
          U.prototype.update.call(this, a);
          if (this.animationInputText.hasFocus || this.animationNameInputText.hasFocus || this.animationIndicesInputText.hasFocus || this.imageInputText.hasFocus || this.healthIconInputText.hasFocus || this.vocalsInputText.hasFocus) {
            C.toggleVolumeKeys(false);
          } else {
            C.toggleVolumeKeys(true);
            var b = 1;
            var c = 1;
            var d = 1;
            var e = g.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(16, e.status)) {
              b = 4;
              d = 10;
            }
            e = g.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(17, e.status)) {
              c = 0.25;
            }
            e = g.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(74, e.status)) {
              var f = g.camera;
              f.scroll.set_x(f.scroll.x - a * 500 * b * c);
            }
            e = g.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(75, e.status)) {
              f = g.camera;
              f.scroll.set_y(f.scroll.y + a * 500 * b * c);
            }
            e = g.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(76, e.status)) {
              f = g.camera;
              f.scroll.set_x(f.scroll.x + a * 500 * b * c);
            }
            e = g.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(73, e.status)) {
              f = g.camera;
              f.scroll.set_y(f.scroll.y - a * 500 * b * c);
            }
            var k = g.camera.zoom;
            e = g.keys.justPressed;
            if (e.keyManager.checkStatusUnsafe(82, e.status)) {
              e = g.keys.pressed;
              var h = !e.keyManager.checkStatusUnsafe(17, e.status);
            } else {
              h = false;
            }
            if (h) {
              g.camera.set_zoom(1);
            } else {
              e = g.keys.pressed;
              if (e.keyManager.checkStatusUnsafe(69, e.status) && g.camera.zoom < 3) {
                f = g.camera;
                f.set_zoom(f.zoom + a * g.camera.zoom * b * c);
                if (g.camera.zoom > 3) {
                  g.camera.set_zoom(3);
                }
              } else {
                e = g.keys.pressed;
                if (e.keyManager.checkStatusUnsafe(81, e.status) && g.camera.zoom > 0.1) {
                  f = g.camera;
                  f.set_zoom(f.zoom - a * g.camera.zoom * b * c);
                  if (g.camera.zoom < 0.1) {
                    g.camera.set_zoom(0.1);
                  }
                }
              }
            }
            if (k != g.camera.zoom) {
              this.cameraZoomText.set_text("Zoom: " + $b.roundDecimal(g.camera.zoom, 2) + "x");
            }
            f = false;
            if (this.anims.length > 1 && (e = g.keys.justPressed, h = e.keyManager.checkStatusUnsafe(87, e.status) ? f = true : false, h ? this.curAnim-- : (e = g.keys.justPressed, h = e.keyManager.checkStatusUnsafe(83, e.status) ? f = true : false, h && this.curAnim++), f)) {
              this.undoOffsets = null;
              this.curAnim = $b.wrap(this.curAnim, 0, this.anims.length - 1);
              this.character.playAnim(this.anims[this.curAnim].anim, true);
              e = 0;
              f = new wc(this.animsTxtGroup.members, null);
              while (f.hasNext()) {
                h = f.next();
                h.set_color(-1);
                if (e == this.curAnim) {
                  h.set_color(-16711936);
                }
                ++e;
              }
            }
            f = false;
            e = g.keys.justPressed;
            h = e.keyManager.checkStatusUnsafe(37, e.status);
            e = g.keys.justPressed;
            c = e.keyManager.checkStatusUnsafe(39, e.status);
            e = g.keys.justPressed;
            k = e.keyManager.checkStatusUnsafe(38, e.status);
            e = g.keys.justPressed;
            h = [h, c, k, e.keyManager.checkStatusUnsafe(40, e.status)];
            e = g.keys.pressed;
            c = e.keyManager.checkStatusUnsafe(37, e.status);
            e = g.keys.pressed;
            k = e.keyManager.checkStatusUnsafe(39, e.status);
            e = g.keys.pressed;
            var n = e.keyManager.checkStatusUnsafe(38, e.status);
            e = g.keys.pressed;
            e = [c, k, n, e.keyManager.checkStatusUnsafe(40, e.status)];
            if (h.indexOf(true) != -1) {
              f = this.character;
              f.offset.set_x(f.offset.x + ((h[0] ? 1 : 0) - (h[1] ? 1 : 0)) * d);
              f = this.character;
              f.offset.set_y(f.offset.y + ((h[2] ? 1 : 0) - (h[3] ? 1 : 0)) * d);
              f = true;
            }
            if (e.indexOf(true) != -1) {
              this.holdingArrowsTime += a;
              if (this.holdingArrowsTime > 0.6) {
                for (this.holdingArrowsElapsed += a; this.holdingArrowsElapsed > 0.016666666666666666;) {
                  f = this.character;
                  f.offset.set_x(f.offset.x + ((e[0] ? 1 : 0) - (e[1] ? 1 : 0)) * d);
                  f = this.character;
                  f.offset.set_y(f.offset.y + ((e[2] ? 1 : 0) - (e[3] ? 1 : 0)) * d);
                  this.holdingArrowsElapsed -= 0.016666666666666666;
                  f = true;
                }
              }
            } else {
              this.holdingArrowsTime = 0;
            }
            e = g.mouse._rightButton;
            if (e.current == 1 || e.current == 2) {
              e = g.mouse;
              if (e.screenX - e._prevScreenX == 0) {
                e = g.mouse;
                h = e.screenY - e._prevScreenY != 0;
              } else {
                h = true;
              }
            } else {
              h = false;
            }
            if (h) {
              f = this.character;
              e = g.mouse;
              f.offset.set_x(f.offset.x - (e.screenX - e._prevScreenX));
              f = this.character;
              e = g.mouse;
              f.offset.set_y(f.offset.y - (e.screenY - e._prevScreenY));
              f = true;
            }
            e = g.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(17, e.status)) {
              e = g.keys.justPressed;
              if (e.keyManager.checkStatusUnsafe(67, e.status)) {
                this.copiedOffset[0] = this.character.offset.x;
                this.copiedOffset[1] = this.character.offset.y;
                f = true;
              } else {
                e = g.keys.justPressed;
                if (e.keyManager.checkStatusUnsafe(86, e.status)) {
                  this.undoOffsets = [this.character.offset.x, this.character.offset.y];
                  this.character.offset.set_x(this.copiedOffset[0]);
                  this.character.offset.set_y(this.copiedOffset[1]);
                  f = true;
                } else {
                  e = g.keys.justPressed;
                  if (e.keyManager.checkStatusUnsafe(82, e.status)) {
                    this.undoOffsets = [this.character.offset.x, this.character.offset.y];
                    e = this.character.offset;
                    f = d = 0;
                    if (f == null) {
                      f = 0;
                    }
                    if (d == null) {
                      d = 0;
                    }
                    e.set_x(d);
                    e.set_y(f);
                    f = true;
                  } else {
                    e = g.keys.justPressed;
                    if (e.keyManager.checkStatusUnsafe(90, e.status) && this.undoOffsets != null) {
                      this.character.offset.set_x(this.undoOffsets[0]);
                      this.character.offset.set_y(this.undoOffsets[1]);
                      f = true;
                    }
                  }
                }
              }
            }
            e = this.anims[this.curAnim];
            if (f && e != null && e.offsets != null) {
              e.offsets[0] = this.character.offset.x | 0;
              e.offsets[1] = this.character.offset.y | 0;
              this.animsTxtGroup.members[this.curAnim].set_text(e.anim + ": " + H.string(e.offsets));
              this.character.addOffset(e.anim, this.character.offset.x, this.character.offset.y);
            }
            d = "ERROR: No Animation Found";
            f = -65536;
            e = this.character;
            if (e.isAnimateAtlas ? e.atlas.anim.get_curSymbol() != null : e.animation._curAnim != null) {
              e = g.keys.pressed;
              if (e.keyManager.checkStatusUnsafe(65, e.status)) {
                h = true;
              } else {
                e = g.keys.pressed;
                h = e.keyManager.checkStatusUnsafe(68, e.status);
              }
              if (h) {
                this.holdingFrameTime += a;
                if (this.holdingFrameTime > 0.5) {
                  this.holdingFrameElapsed += a;
                }
              } else {
                this.holdingFrameTime = 0;
              }
              e = g.keys.justPressed;
              if (e.keyManager.checkStatusUnsafe(32, e.status)) {
                e = h = this.character;
                a = "";
                if (e.isAnimateAtlas ? e.atlas.anim.get_curSymbol() != null : e.animation._curAnim != null) {
                  a = e.isAnimateAtlas ? e.atlas.anim.lastPlayedAnim : e.animation._curAnim.name;
                }
                h.playAnim(a ?? "", true);
              }
              if (this.character.isAnimateAtlas) {
                a = this.character.atlas.anim.get_curFrame();
                d = this.character.atlas.anim.get_length();
              } else {
                a = this.character.animation._curAnim.curFrame;
                d = this.character.animation._curAnim.frames.length;
              }
              e = g.keys.justPressed;
              if (e.keyManager.checkStatusUnsafe(65, e.status)) {
                h = true;
              } else {
                e = g.keys.justPressed;
                h = e.keyManager.checkStatusUnsafe(68, e.status);
              }
              if (h || this.holdingFrameTime > 0.5) {
                f = false;
                if (this.holdingFrameTime > 0.5) {
                  e = g.keys.pressed;
                  e = e.keyManager.checkStatusUnsafe(65, e.status);
                } else {
                  e = false;
                }
                if (e) {
                  h = true;
                } else {
                  e = g.keys.justPressed;
                  h = e.keyManager.checkStatusUnsafe(65, e.status);
                }
                if (h) {
                  f = true;
                }
                this.character.set_animPaused(true);
                if (this.holdingFrameTime <= 0.5 || this.holdingFrameElapsed > 0.1) {
                  a = $b.wrap(a + ((f ? -b : b) | 0), 0, d - 1);
                  if (this.character.isAnimateAtlas) {
                    this.character.atlas.anim.set_curFrame(a);
                  } else {
                    this.character.animation._curAnim.set_curFrame(a);
                  }
                  this.holdingFrameElapsed -= 0.1;
                }
              }
              d = "Frames: ( " + a + " / " + (d - 1) + " )";
              f = -1;
            }
            if (d != this.frameAdvanceText.text) {
              this.frameAdvanceText.set_text(d);
            }
            this.frameAdvanceText.set_color(f);
            e = g.keys.justPressed;
            if (e.keyManager.checkStatusUnsafe(123, e.status)) {
              this.silhouettes.set_visible(!this.silhouettes.visible);
            }
            e = g.keys.justPressed;
            if (e.keyManager.checkStatusUnsafe(112, e.status)) {
              h = true;
            } else if (this.helpBg.visible) {
              e = g.keys.justPressed;
              h = e.keyManager.checkStatusUnsafe(27, e.status);
            } else {
              h = false;
            }
            if (h) {
              this.helpBg.set_visible(!this.helpBg.visible);
              this.helpTexts.set_visible(this.helpBg.visible);
            } else {
              e = g.keys.justPressed;
              if (e.keyManager.checkStatusUnsafe(27, e.status)) {
                g.mouse.set_visible(false);
                if (this._goToPlayState) {
                  U.switchState(new z());
                } else {
                  U.switchState(new Rf());
                  h = g.sound;
                  b = y.returnSound("music", "freakyMenu", null);
                  h.playMusic(b);
                }
              }
            }
          }
        },
        loadBG: function () {
          var a = y.currentLevel;
          y.currentLevel = this.assetFolder;
          var b = new Gb("stageback", -600, -200, 0.9, 0.9);
          this.add(b);
          b = new Gb("stagefront", -650, 600, 0.9, 0.9);
          b.setGraphicSize(b.get_width() * 1.1 | 0);
          b.updateHitbox();
          this.add(b);
          b = this.dadPosition;
          var c = 100;
          var d = 100;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.bfPosition;
          c = 770;
          d = 100;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          y.currentLevel = a;
        },
        updatePointerPos: function (a) {
          if (a == null) {
            a = true;
          }
          var b = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
          var c = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
          this.cameraFollowPointer.setPosition(b, c);
          if (a) {
            g.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - g.width / 2);
            g.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - g.height / 2);
          }
        },
        updateHealthBar: function () {},
        updatePresence: function () {},
        reloadAnimList: function () {
          this.anims = this.character.animationsArray;
          if (this.anims.length > 0) {
            this.character.playAnim(this.anims[0].anim, true);
          }
          this.curAnim = 0;
          for (var a = new wc(this.animsTxtGroup.members, null); a.hasNext();) {
            var b = a.next();
            b.kill();
          }
          var c = 0;
          b = 0;
          for (var d = this.anims; b < d.length;) {
            var e = d[b];
            ++b;
            a = this.animsTxtGroup.recycle(Q);
            a.set_x(10);
            a.set_y(32 + c * 20);
            a.set_fieldWidth(400);
            a.set_fieldHeight(20);
            a.set_text(e.anim + ": " + H.string(e.offsets));
            a.setFormat(null, 16, -1, "left", Ta.OUTLINE_FAST, -16777216);
            e = a.scrollFactor;
            e.set_x(0);
            e.set_y(0);
            a.set_borderSize(1);
            this.animsTxtGroup.add(a);
            ++c;
          }
          c = 0;
          for (a = new wc(this.animsTxtGroup.members, null); a.hasNext();) {
            b = a.next();
            b.set_color(-1);
            if (c == this.curAnim) {
              b.set_color(-16711936);
            }
            ++c;
          }
          if (this.animationDropDown != null) {
            this.reloadAnimationDropDown();
          }
        },
        updateTextColors: function () {
          var a = 0;
          for (var b = new wc(this.animsTxtGroup.members, null); b.hasNext();) {
            var c = b.next();
            c.set_color(-1);
            if (a == this.curAnim) {
              c.set_color(-16711936);
            }
            ++a;
          }
        },
        updateCharacterPositions: function () {
          if (this.character == null || this.character.isPlayer) {
            if (this.character == null) {
              var a = this._char;
              a = a != "bf" && !w.startsWith(a, "bf-") && !w.endsWith(a, "-player") && !w.endsWith(a, "-dead") || w.endsWith(a, "-opponent") || w.startsWith(a, "gf-") || w.endsWith(a, "-gf") || a == "gf";
            } else {
              a = false;
            }
          } else {
            a = true;
          }
          if (a) {
            this.character.setPosition(this.dadPosition.x, this.dadPosition.y);
          } else {
            this.character.setPosition(this.bfPosition.x, this.bfPosition.y);
          }
          a = this.character;
          a.set_x(a.x + this.character.positionArray[0]);
          a = this.character;
          a.set_y(a.y + this.character.positionArray[1]);
        },
        predictCharacterIsNotPlayer: function (a) {
          if (a != "bf" && !w.startsWith(a, "bf-") && !w.endsWith(a, "-player") && !w.endsWith(a, "-dead") || w.endsWith(a, "-opponent") || w.startsWith(a, "gf-") || w.endsWith(a, "-gf")) {
            return true;
          } else {
            return a == "gf";
          }
        },
        addAnimation: function (a, b, c, d, e) {
          if (this.character.isAnimateAtlas) {
            if (e != null && e.length > 0) {
              this.character.atlas.anim.addBySymbolIndices(a, b, e, c, d);
            } else {
              this.character.atlas.anim.addBySymbol(a, b, c, d);
            }
          } else if (e != null && e.length > 0) {
            this.character.animation.addByIndices(a, b, e, "", c, d);
          } else {
            this.character.animation.addByPrefix(a, b, c, d);
          }
          if (!Object.prototype.hasOwnProperty.call(this.character.animOffsets.h, a)) {
            this.character.addOffset(a, 0, 0);
          }
        },
        newAnim: function (a, b) {
          return {
            offsets: [0, 0],
            loop: false,
            fps: 24,
            anim: a,
            indices: [],
            name: b
          };
        },
        reloadCharacterDropDown: function () {
          Object.create(null);
          var a = y.getPath("data/characterList.txt", "TEXT", null);
          var b = null;
          if (W.exists(a)) {
            b = W.getText(a);
          }
          if (b != null) {
            a = w.trim(b).split("\n");
            b = 0;
            for (var c = a.length; b < c;) {
              var d = b++;
              a[d] = w.trim(a[d]);
            }
          } else {
            a = [];
          }
          this.characterList = a;
          this.charDropDown.setData(vc.makeStrIdLabelArray(this.characterList, true));
          this.charDropDown.set_selectedLabel(this._char);
        },
        reloadAnimationDropDown: function () {
          var a = [];
          for (var b = 0, c = this.anims; b < c.length;) {
            var d = c[b];
            ++b;
            a.push(d.anim);
          }
          if (a.length < 1) {
            a.push("NO ANIMATIONS");
          }
          this.animationDropDown.setData(vc.makeStrIdLabelArray(a, true));
        },
        onSaveComplete: function (a) {
          if (this._file != null) {
            this._file.removeEventListener("complete", l(this, this.onSaveComplete));
            this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
            this._file.removeEventListener("ioError", l(this, this.onSaveError));
            this._file = null;
            g.log.advanced("Successfully saved file.", Ba.NOTICE);
          }
        },
        onSaveCancel: function (a) {
          if (this._file != null) {
            this._file.removeEventListener("complete", l(this, this.onSaveComplete));
            this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
            this._file.removeEventListener("ioError", l(this, this.onSaveError));
            this._file = null;
          }
        },
        onSaveError: function (a) {
          if (this._file != null) {
            this._file.removeEventListener("complete", l(this, this.onSaveComplete));
            this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
            this._file.removeEventListener("ioError", l(this, this.onSaveError));
            this._file = null;
            g.log.advanced("Problem saving file", Ba.ERROR, true);
          }
        },
        saveCharacter: function () {
          if (this._file == null) {
            var a = JSON.stringify({
              animations: this.character.animationsArray,
              image: this.character.imageFile,
              scale: this.character.jsonScale,
              sing_duration: this.character.singDuration,
              healthicon: this.character.healthIcon,
              position: this.character.positionArray,
              camera_position: this.character.cameraPosition,
              flip_x: this.character.originalFlipX,
              no_antialiasing: this.character.noAntialiasing,
              healthbar_colors: this.character.healthColorArray,
              vocals_file: this.character.vocalsFile,
              _editor_isPlayer: this.character.isPlayer
            }, null, "\t");
            if (a.length > 0) {
              this._file = new Je();
              this._file.addEventListener("complete", l(this, this.onSaveComplete));
              this._file.addEventListener("cancel", l(this, this.onSaveCancel));
              this._file.addEventListener("ioError", l(this, this.onSaveError));
              this._file.save(a, "" + this._char + ".json");
            }
          }
        },
        __class__: dn
      });
      function ia(a, b) {
        this.characterFailed = false;
        this.characterData = {
          iconP1: null,
          iconP2: null,
          vocalsP1: null,
          vocalsP2: null
        };
        this.lastWaveformHeight = 0;
        this.wavData = [[[0], [0]], [[0], [0]]];
        this.waveformPrinted = true;
        this.columns = 9;
        this.colorSine = this.lastSecBeats = this.lastSecBeatsNext = 0;
        this.updatedSection = false;
        this.playtestingOnComplete = null;
        this.playtestingTime = 0;
        this.playtesting = false;
        this.sectionToCopy = this.currentType = 0;
        this.check_mute_inst = this.check_mute_vocals = this.check_mute_vocals_opponent = this.check_vortex = this.check_warnings = this.playSoundBf = this.playSoundDad = null;
        this.mouseQuant = false;
        this.text = "";
        this.quantizations = [4, 8, 12, 16, 20, 24, 32, 48, 64, 96, 192];
        this.blockPressWhileScrolling = [];
        this.blockPressWhileTypingOnStepper = [];
        this.blockPressWhileTypingOn = [];
        this.curZoom = 2;
        this.zoomList = [0.25, 0.5, 1, 2, 3, 4, 6, 8, 12, 16, 24];
        this.vocals = this.opponentVocals = null;
        this.playbackSpeed = 1;
        this.curSelectedNote = null;
        this.daquantspot = this.curEventSelected = this.curUndoIndex = this.curRedoIndex = 0;
        this.CAM_OFFSET = 360;
        this.amountSteps = 0;
        this.curSong = "Test";
        this.eventStuff = [["", "Nothing. Yep, that's right."], ["Dadbattle Spotlight", "Used in Dad Battle,\nValue 1: 0/1 = ON/OFF,\n2 = Target Dad\n3 = Target BF"], ["Hey!", "Plays the \"Hey!\" animation from Bopeebo,\nValue 1: BF = Only Boyfriend, GF = Only Girlfriend,\nSomething else = Both.\nValue 2: Custom animation duration,\nleave it blank for 0.6s"], ["Set GF Speed", "Sets GF head bopping speed,\nValue 1: 1 = Normal speed,\n2 = 1/2 speed, 4 = 1/4 speed etc.\nUsed on Fresh during the beatbox parts.\n\nWarning: Value must be integer!"], ["Philly Glow", "Exclusive to Week 3\nValue 1: 0/1/2 = OFF/ON/Reset Gradient\n \nNo, i won't add it to other weeks."], ["Kill Henchmen", "For Mom's songs, don't use this please, i love them :("], ["Add Camera Zoom", "Used on MILF on that one \"hard\" part\nValue 1: Camera zoom add (Default: 0.015)\nValue 2: UI zoom add (Default: 0.03)\nLeave the values blank if you want to use Default."], ["BG Freaks Expression", "Should be used only in \"school\" Stage!"], ["Trigger BG Ghouls", "Should be used only in \"schoolEvil\" Stage!"], ["Play Animation", "Plays an animation on a Character,\nonce the animation is completed,\nthe animation changes to Idle\n\nValue 1: Animation to play.\nValue 2: Character (Dad, BF, GF)"], ["Camera Follow Pos", "Value 1: X\nValue 2: Y\n\nThe camera won't change the follow point\nafter using this, for getting it back\nto normal, leave both values blank."], ["Alt Idle Animation", "Sets a specified suffix after the idle animation name.\nYou can use this to trigger 'idle-alt' if you set\nValue 2 to -alt\n\nValue 1: Character to set (Dad, BF or GF)\nValue 2: New suffix (Leave it blank to disable)"], ["Screen Shake", "Value 1: Camera shake\nValue 2: HUD shake\n\nEvery value works as the following example: \"1, 0.05\".\nThe first number (1) is the duration.\nThe second number (0.05) is the intensity."], ["Change Character", "Value 1: Character to change (Dad, BF, GF)\nValue 2: New character's name"], ["Change Scroll Speed", "Value 1: Scroll Speed Multiplier (1 is default)\nValue 2: Time it takes to change fully in seconds."], ["Set Property", "Value 1: Variable name\nValue 2: New value"], ["Play Sound", "Value 1: Sound file name\nValue 2: Volume (Default: 1), ranges from 0 to 1"]];
        this.redos = [];
        this.undos = [];
        this.curNoteTypes = [];
        this.ignoreWarnings = false;
        U.call(this, a, b);
      }
      h["states.editors.ChartingState"] = ia;
      ia.__name__ = "states.editors.ChartingState";
      ia.__super__ = U;
      ia.prototype = q(U.prototype, {
        create: function () {
          if (z.SONG != null) {
            this._song = z.SONG;
          } else {
            mb.list = mb.defaultList.slice();
            this._song = {
              song: "Test",
              notes: [],
              events: [],
              bpm: 150,
              needsVoices: true,
              player1: "bf",
              player2: "dad",
              gfVersion: "gf",
              speed: 1,
              stage: "stage"
            };
            this.addSection();
            z.SONG = this._song;
          }
          ia.vortex = g.save.data.chart_vortex;
          this.ignoreWarnings = g.save.data.ignoreWarnings;
          var a = new G().loadGraphic(y.image("menuDesat"));
          a.set_antialiasing(C.data.antialiasing);
          var b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_color(-14540254);
          this.add(a);
          this.gridLayer = new Ra();
          this.add(this.gridLayer);
          this.waveformSprite = new G(ia.GRID_SIZE, 0).makeGraphic(1, 1, 16777215);
          this.add(this.waveformSprite);
          a = new G(-ia.GRID_SIZE - 5, -90).loadGraphic(y.image("eventArrow"));
          a.set_antialiasing(C.data.antialiasing);
          this.leftIcon = new Ue("bf");
          this.rightIcon = new Ue("dad");
          b = a.scrollFactor;
          var c = 1;
          var d = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.leftIcon.scrollFactor;
          d = c = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.rightIcon.scrollFactor;
          d = c = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          a.setGraphicSize(30, 30);
          this.leftIcon.setGraphicSize(0, 45);
          this.rightIcon.setGraphicSize(0, 45);
          this.add(a);
          this.add(this.leftIcon);
          this.add(this.rightIcon);
          this.leftIcon.setPosition(ia.GRID_SIZE + 10, -100);
          this.rightIcon.setPosition(ia.GRID_SIZE * 5.2, -100);
          this.curRenderedSustains = new Ra();
          this.curRenderedNotes = new Ra();
          this.curRenderedNoteType = new Ra();
          this.nextRenderedSustains = new Ra();
          this.nextRenderedNotes = new Ra();
          g.mouse.set_visible(true);
          this.updateJsonData();
          a = this._song.song;
          c = new sa("[~&\\\\;:<>#]", "");
          b = new sa("[.,'\"%?!]", "");
          a = c.split(w.replace(a, " ", "-")).join("-");
          this.currentSongName = b.split(a).join("").toLowerCase();
          this.loadSong();
          this.reloadGridLayer();
          N.set_bpm(this._song.bpm);
          N.mapBPMChanges(this._song);
          if (ia.curSec >= this._song.notes.length) {
            ia.curSec = this._song.notes.length - 1;
          }
          this.bpmTxt = new Q(1000, 50, 0, "", 16);
          b = this.bpmTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.bpmTxt);
          this.strumLine = new G(0, 50).makeGraphic(ia.GRID_SIZE * 9 | 0, 4);
          this.add(this.strumLine);
          this.quant = new ah("chart_quant", "chart_quant");
          this.quant.animation.addByPrefix("q", "chart_quant", 0, false);
          this.quant.animation.play("q", true, false, 0);
          this.quant.sprTracker = this.strumLine;
          this.quant.xAdd = -32;
          this.quant.yAdd = 8;
          this.add(this.quant);
          this.strumLineNotes = new Ra();
          for (a = 0; a < 8;) {
            b = a++;
            b = new yg(ia.GRID_SIZE * (b + 1), this.strumLine.y, b % 4, 0);
            b.setGraphicSize(ia.GRID_SIZE, ia.GRID_SIZE);
            b.updateHitbox();
            b.playAnim("static", true);
            this.strumLineNotes.add(b);
            b = b.scrollFactor;
            d = c = 1;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
          }
          this.add(this.strumLineNotes);
          this.camPos = new hc(0, 0, 1, 1);
          this.camPos.setPosition(this.strumLine.x + this.CAM_OFFSET, this.strumLine.y);
          this.dummyArrow = new G().makeGraphic(ia.GRID_SIZE, ia.GRID_SIZE);
          this.dummyArrow.set_antialiasing(C.data.antialiasing);
          this.add(this.dummyArrow);
          this.UI_box = new ne(null, null, [{
            name: "Song",
            label: "Song"
          }, {
            name: "Section",
            label: "Section"
          }, {
            name: "Note",
            label: "Note"
          }, {
            name: "Events",
            label: "Events"
          }, {
            name: "Charting",
            label: "Charting"
          }, {
            name: "Data",
            label: "Data"
          }], null, true);
          this.UI_box.resize(300, 400);
          this.UI_box.set_x(640 + ia.GRID_SIZE / 2);
          this.UI_box.set_y(25);
          b = this.UI_box.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.text = "W/S or Mouse Wheel - Change Conductor's strum time\n\t\t\nA/D - Go to the previous/next section\n\t\t\nLeft/Right - Change Snap\n\t\t\nUp/Down - Change Conductor's Strum Time with Snapping\nLeft Bracket / Right Bracket - Change Song Playback Rate (SHIFT to go Faster)\n\t\t\nALT + Left Bracket / Right Bracket - Reset Song Playback Rate\nHold Shift to move 4x faster\n\t\t\nHold Control and click on an arrow to select it\n\t\t\nZ/X - Zoom in/out\n\t\t\n\n\t\t\nEsc - Test your chart inside Chart Editor\n\t\t\nEnter - Play your chart\n\t\t\nQ/E - Decrease/Increase Note Sustain Length\n\t\t\nSpace - Stop/Resume song";
          c = this.text.split("\n");
          a = 0;
          for (d = c.length; a < d;) {
            b = a++;
            var e = new Q(this.UI_box.x, this.UI_box.y + this.UI_box.get_height() + 8, 0, c[b], 16);
            e.set_y(e.y + b * 12);
            e.setFormat("assets/fonts/vcr.ttf", 14, -1, "left");
            b = e.scrollFactor;
            b.set_x(0);
            b.set_y(0);
            this.add(e);
          }
          this.add(this.UI_box);
          this.addSongUI();
          this.addSectionUI();
          this.addNoteUI();
          this.addEventsUI();
          this.addChartingUI();
          this.addDataUI();
          this.updateHeads();
          this.updateWaveform();
          this.add(this.curRenderedSustains);
          this.add(this.curRenderedNotes);
          this.add(this.curRenderedNoteType);
          this.add(this.nextRenderedSustains);
          this.add(this.nextRenderedNotes);
          if (ia.lastSong != this.currentSongName) {
            this.changeSection();
          }
          ia.lastSong = this.currentSongName;
          this.zoomTxt = new Q(10, 10, 0, "Zoom: 1 / 1", 16);
          b = this.zoomTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.zoomTxt);
          this.updateGrid();
          U.prototype.create.call(this);
        },
        addSongUI: function () {
          var a = this;
          this.UI_songTitle = new gb(10, 10, 70, this._song.song, 8);
          this.blockPressWhileTypingOn.push(this.UI_songTitle);
          var b = new zb(10, 25, null, null, "Has voice track", 100);
          b.set_checked(this._song.needsVoices);
          b.callback = function () {
            a._song.needsVoices = b.checked;
          };
          var c = new ub(110, 8, "Save", function () {
            a.saveLevel();
          });
          var d = new ub(c.x + 90, c.y, "Reload Audio", function () {
            var b = a.UI_songTitle.text;
            var c = new sa("[~&\\\\;:<>#]", "");
            var d = new sa("[.,'\"%?!]", "");
            b = c.split(w.replace(b, " ", "-")).join("-");
            d = d.split(b).join("").toLowerCase();
            a.currentSongName = d;
            a.updateJsonData();
            a.loadSong();
            a.updateWaveform();
          });
          var e = new ub(d.x, c.y + 30, "Reload JSON", function () {
            a.openSubState(new Ii("This action will clear current progress.\n\nProceed?", 0, function () {
              a.loadJson(a._song.song.toLowerCase());
            }, null, a.ignoreWarnings));
          });
          var f = new ub(e.x, e.y + 30, "Load Autosave", function () {
            z.SONG = Pd.parseJSONshit(g.save.data.autosave);
            U.resetState();
          });
          var k = new ub(f.x, f.y + 30, "Load Events", function () {
            var b = a._song.song;
            var c = new sa("[~&\\\\;:<>#]", "");
            var d = new sa("[.,'\"%?!]", "");
            b = c.split(w.replace(b, " ", "-")).join("-");
            d = d.split(b).join("").toLowerCase();
            b = y.getPath("data/" + (d + "/events.json"), "TEXT", null);
            if (W.exists(b)) {
              a.clearEvents();
              d = Pd.loadFromJson("events", d);
              a._song.events = d.events;
              a.changeSection(ia.curSec);
            }
          });
          var h = new ub(110, e.y, "Save Events", function () {
            a.saveEvents();
          });
          var n = new ub(320, 310, "Clear events", function () {
            a.openSubState(new Ii("This action will clear current progress.\n\nProceed?", 0, l(a, a.clearEvents), null, a.ignoreWarnings));
          });
          n.set_color(-65536);
          n.label.set_color(-1);
          var p = new ub(320, n.y + 30, "Clear notes", function () {
            a.openSubState(new Ii("This action will clear current progress.\n\nProceed?", 0, function () {
              for (var b = 0, c = a._song.notes.length; b < c;) {
                var d = b++;
                a._song.notes[d].sectionNotes = [];
              }
              a.updateGrid();
            }, null, a.ignoreWarnings));
          });
          p.set_color(-65536);
          p.label.set_color(-1);
          var t = new Sb(10, 70, 1, 1, 1, 400, 3);
          t.set_value(N.bpm);
          t.name = "song_bpm";
          this.blockPressWhileTypingOnStepper.push(t);
          var m = new Sb(10, t.y + 35, 0.1, 1, 0.1, 10, 2);
          m.set_value(this._song.speed);
          m.name = "song_speed";
          this.blockPressWhileTypingOnStepper.push(m);
          var q = "characters/";
          if (q == null) {
            q = "";
          }
          var u = [];
          var x = "assets/shared/";
          if (x == null) {
            x = "assets/shared/";
          }
          x = w.trim(x);
          if (!w.endsWith(x, "/")) {
            x += "/";
          }
          if (!w.startsWith(x, "assets/")) {
            x = "assets/" + x;
          }
          var A = [];
          var C = [];
          C.push(x + "data/characterList.txt");
          x += "data/characterList.txt";
          if (C.indexOf(x) != -1) {
            M.remove(C, x);
            C.splice(0, 0, x);
          }
          for (x = 0; x < C.length;) {
            q = C[x];
            ++x;
            var D = null;
            if (W.exists(q)) {
              D = W.getText(q);
            }
            if (D != null) {
              q = [];
              q = w.trim(D).split("\n");
              D = 0;
              for (var B = q.length; D < B;) {
                var F = D++;
                q[F] = w.trim(q[F]);
              }
            } else {
              q = [];
            }
            for (D = 0; D < q.length;) {
              B = q[D];
              ++D;
              if (A.indexOf(B) == -1 && B.length > 0) {
                A.push(B);
              }
            }
          }
          var Ka = A;
          for (x = 0; x < Ka.length;) {
            var v = Ka[x];
            ++x;
            if (w.trim(v).length > 0) {
              u.push(v);
            }
          }
          u = [];
          v = new vc(10, m.y + 45, vc.makeStrIdLabelArray(Ka, true), function (b) {
            a._song.player1 = Ka[H.parseInt(b)];
            a.updateJsonData();
            a.updateHeads();
          });
          v.set_selectedLabel(this._song.player1);
          this.blockPressWhileScrolling.push(v);
          var G = new vc(v.x, v.y + 40, vc.makeStrIdLabelArray(Ka, true), function (b) {
            a._song.gfVersion = Ka[H.parseInt(b)];
            a.updateJsonData();
            a.updateHeads();
          });
          G.set_selectedLabel(this._song.gfVersion);
          this.blockPressWhileScrolling.push(G);
          var K = new vc(v.x, G.y + 40, vc.makeStrIdLabelArray(Ka, true), function (b) {
            a._song.player2 = Ka[H.parseInt(b)];
            a.updateJsonData();
            a.updateHeads();
          });
          K.set_selectedLabel(this._song.player2);
          this.blockPressWhileScrolling.push(K);
          q = "stages/";
          if (q == null) {
            q = "";
          }
          x = "assets/shared/";
          if (x == null) {
            x = "assets/shared/";
          }
          x = w.trim(x);
          if (!w.endsWith(x, "/")) {
            x += "/";
          }
          if (!w.startsWith(x, "assets/")) {
            x = "assets/" + x;
          }
          A = [];
          C = [];
          C.push(x + "data/stageList.txt");
          x += "data/stageList.txt";
          if (C.indexOf(x) != -1) {
            M.remove(C, x);
            C.splice(0, 0, x);
          }
          for (x = 0; x < C.length;) {
            q = C[x];
            ++x;
            D = null;
            if (W.exists(q)) {
              D = W.getText(q);
            }
            if (D != null) {
              q = [];
              q = w.trim(D).split("\n");
              D = 0;
              B = q.length;
              while (D < B) {
                F = D++;
                q[F] = w.trim(q[F]);
              }
            } else {
              q = [];
            }
            for (D = 0; D < q.length;) {
              B = q[D];
              ++D;
              if (A.indexOf(B) == -1 && B.length > 0) {
                A.push(B);
              }
            }
          }
          var ha = [];
          for (x = 0; x < A.length;) {
            C = A[x];
            ++x;
            if (w.trim(C).length > 0) {
              ha.push(C);
            }
            u.push(C);
          }
          if (ha.length < 1) {
            ha.push("stage");
          }
          this.stageDropDown = new vc(v.x + 140, v.y, vc.makeStrIdLabelArray(ha, true), function (b) {
            a._song.stage = ha[H.parseInt(b)];
          });
          this.stageDropDown.set_selectedLabel(this._song.stage);
          this.blockPressWhileScrolling.push(this.stageDropDown);
          u = new Ma(null, this.UI_box);
          u.name = "Song";
          u.add(this.UI_songTitle);
          u.add(b);
          u.add(n);
          u.add(p);
          u.add(c);
          u.add(h);
          u.add(d);
          u.add(e);
          u.add(f);
          u.add(k);
          u.add(t);
          u.add(m);
          u.add(new Q(t.x, t.y - 15, 0, "Song BPM:"));
          u.add(new Q(t.x + 100, t.y - 15, 0, "Song Offset:"));
          u.add(new Q(m.x, m.y - 15, 0, "Song Speed:"));
          u.add(new Q(K.x, K.y - 15, 0, "Opponent:"));
          u.add(new Q(G.x, G.y - 15, 0, "Girlfriend:"));
          u.add(new Q(v.x, v.y - 15, 0, "Boyfriend:"));
          u.add(new Q(this.stageDropDown.x, this.stageDropDown.y - 15, 0, "Stage:"));
          u.add(K);
          u.add(G);
          u.add(v);
          u.add(this.stageDropDown);
          this.UI_box.addGroup(u);
          this.initPsychCamera().follow(this.camPos, xf.LOCKON, 999);
        },
        addSectionUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Section";
          this.check_mustHitSection = new zb(10, 15, null, null, "Must hit section", 100);
          this.check_mustHitSection.name = "check_mustHit";
          this.check_mustHitSection.set_checked(this._song.notes[ia.curSec].mustHitSection);
          this.check_gfSection = new zb(10, this.check_mustHitSection.y + 22, null, null, "GF section", 100);
          this.check_gfSection.name = "check_gf";
          this.check_gfSection.set_checked(this._song.notes[ia.curSec].gfSection);
          this.check_altAnim = new zb(this.check_gfSection.x + 120, this.check_gfSection.y, null, null, "Alt Animation", 100);
          this.check_altAnim.set_checked(this._song.notes[ia.curSec].altAnim);
          this.stepperBeats = new Sb(10, 100, 1, 4, 1, 7, 2);
          this.stepperBeats.set_value(this.getSectionBeats());
          this.stepperBeats.name = "section_beats";
          this.blockPressWhileTypingOnStepper.push(this.stepperBeats);
          this.check_altAnim.name = "check_altAnim";
          this.check_changeBPM = new zb(10, this.stepperBeats.y + 30, null, null, "Change BPM", 100);
          this.check_changeBPM.set_checked(this._song.notes[ia.curSec].changeBPM);
          this.check_changeBPM.name = "check_changeBPM";
          this.stepperSectionBPM = new Sb(10, this.check_changeBPM.y + 20, 1, N.bpm, 0, 999, 1);
          if (this.check_changeBPM.checked) {
            this.stepperSectionBPM.set_value(this._song.notes[ia.curSec].bpm);
          } else {
            this.stepperSectionBPM.set_value(N.bpm);
          }
          this.stepperSectionBPM.name = "section_bpm";
          this.blockPressWhileTypingOnStepper.push(this.stepperSectionBPM);
          var c = null;
          var d = null;
          var e = new ub(10, 190, "Copy Section", function () {
            a.notesCopied = [];
            a.sectionToCopy = ia.curSec;
            for (var b = 0, c = a._song.notes[ia.curSec].sectionNotes.length; b < c;) {
              var d = b++;
              a.notesCopied.push(a._song.notes[ia.curSec].sectionNotes[d]);
            }
            var e = a.sectionStartTime();
            var f = a.sectionStartTime(1);
            b = 0;
            for (c = a._song.events; b < c.length;) {
              var g = c[b];
              ++b;
              var k = g[0];
              if (f > g[0] && g[0] >= e) {
                var h = [];
                for (var m = 0, n = g[1].length; m < n;) {
                  d = m++;
                  d = g[1][d];
                  h.push([d[0], d[1], d[2]]);
                }
                a.notesCopied.push([k, -1, h]);
              }
            }
          });
          var f = new ub(e.x + 100, e.y, "Paste Section", function () {
            if (a.notesCopied != null && !(a.notesCopied.length < 1)) {
              var b = N.stepCrochet * 4 * a.getSectionBeats() * (ia.curSec - a.sectionToCopy);
              for (var e = 0, f = a.notesCopied; e < f.length;) {
                var g = f[e];
                ++e;
                var k = g[0] + b;
                if (g[1] < 0) {
                  if (c.checked) {
                    var h = [];
                    for (var m = 0, n = g[2].length; m < n;) {
                      var p = m++;
                      p = g[2][p];
                      h.push([p[0], p[1], p[2]]);
                    }
                    a._song.events.push([k, h]);
                  }
                } else if (d.checked) {
                  g = g[4] != null ? [k, g[1], g[2], g[3], g[4]] : [k, g[1], g[2], g[3]];
                  a._song.notes[ia.curSec].sectionNotes.push(g);
                }
              }
              a.updateGrid();
            }
          });
          var g = new ub(f.x + 100, f.y, "Clear", function () {
            if (d.checked) {
              a._song.notes[ia.curSec].sectionNotes = [];
            }
            if (c.checked) {
              for (var b = a._song.events.length - 1, e = a.sectionStartTime(), f = a.sectionStartTime(1); b > -1;) {
                var g = a._song.events[b];
                if (g != null && f > g[0] && g[0] >= e) {
                  M.remove(a._song.events, g);
                }
                --b;
              }
            }
            a.updateGrid();
            a.updateNoteUI();
          });
          g.set_color(-65536);
          g.label.set_color(-1);
          d = new zb(10, g.y + 25, null, null, "Notes", 100);
          d.set_checked(true);
          c = new zb(d.x + 100, d.y, null, null, "Events", 100);
          c.set_checked(true);
          var h = new ub(10, d.y + 40, "Swap section", function () {
            for (var b = 0, c = a._song.notes[ia.curSec].sectionNotes.length; b < c;) {
              var d = b++;
              var e = a._song.notes[ia.curSec].sectionNotes[d];
              e[1] = (e[1] + 4) % 8;
              a._song.notes[ia.curSec].sectionNotes[d] = e;
            }
            a.updateGrid();
          });
          var n = null;
          var p = new ub(10, h.y + 30, "Copy last section", function () {
            var b = n.value | 0;
            if (b != 0) {
              var c = ia.curSec;
              c = c > b ? c : b;
              for (var d = 0, e = a._song.notes[c - b].sectionNotes; d < e.length;) {
                var f = e[d];
                ++d;
                f = [f[0] + N.stepCrochet * 4 * a.getSectionBeats(c) * b, f[1], f[2], f[3]];
                a._song.notes[c].sectionNotes.push(f);
              }
              f = a.sectionStartTime(-b);
              var g = a.sectionStartTime(-b + 1);
              d = 0;
              for (e = a._song.events; d < e.length;) {
                var k = e[d];
                ++d;
                var h = k[0];
                if (g > k[0] && k[0] >= f) {
                  h += N.stepCrochet * 4 * a.getSectionBeats(c) * b;
                  var m = [];
                  for (var p = 0, l = k[1].length; p < l;) {
                    var t = p++;
                    t = k[1][t];
                    m.push([t[0], t[1], t[2]]);
                  }
                  a._song.events.push([h, m]);
                }
              }
              a.updateGrid();
            }
          });
          p.setGraphicSize(80, 30);
          p.updateHitbox();
          n = new Sb(p.x + 100, p.y, 1, 1, -999, 999, 0);
          this.blockPressWhileTypingOnStepper.push(n);
          var l = new ub(10, p.y + 45, "Duet Notes", function () {
            var b = [];
            for (var c = 0, d = a._song.notes[ia.curSec].sectionNotes; c < d.length;) {
              var e = d[c];
              ++c;
              var f = e[1];
              f = f > 3 ? f - 4 : f + 4;
              b.push([e[0], f, e[2], e[3]]);
            }
            for (c = 0; c < b.length;) {
              d = b[c];
              ++c;
              a._song.notes[ia.curSec].sectionNotes.push(d);
            }
            a.updateGrid();
          });
          var m = new ub(l.x + 100, l.y, "Mirror Notes", function () {
            var b = [];
            for (var c = 0, d = a._song.notes[ia.curSec].sectionNotes; c < d.length;) {
              var e = d[c];
              ++c;
              var f = e[1] % 4;
              f = 3 - f;
              if (e[1] > 3) {
                f += 4;
              }
              e[1] = f;
            }
            for (c = 0; c < b.length;) {
              ++c;
            }
            a.updateGrid();
          });
          b.add(new Q(this.stepperBeats.x, this.stepperBeats.y - 15, 0, "Beats per Section:"));
          b.add(this.stepperBeats);
          b.add(this.stepperSectionBPM);
          b.add(this.check_mustHitSection);
          b.add(this.check_gfSection);
          b.add(this.check_altAnim);
          b.add(this.check_changeBPM);
          b.add(e);
          b.add(f);
          b.add(g);
          b.add(d);
          b.add(c);
          b.add(h);
          b.add(n);
          b.add(p);
          b.add(l);
          b.add(m);
          this.UI_box.addGroup(b);
        },
        addNoteUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Note";
          this.stepperSusLength = new Sb(10, 25, N.stepCrochet / 2, 0, 0, N.stepCrochet * 64);
          this.stepperSusLength.set_value(0);
          this.stepperSusLength.name = "note_susLength";
          this.blockPressWhileTypingOnStepper.push(this.stepperSusLength);
          this.strumTimeInputText = new gb(10, 65, 180, "0");
          b.add(this.strumTimeInputText);
          this.blockPressWhileTypingOn.push(this.strumTimeInputText);
          for (var c = 0; c < ia.noteTypeList.length;) {
            this.curNoteTypes.push(ia.noteTypeList[c]);
            ++c;
          }
          c = this.curNoteTypes.slice();
          for (var d = 1, e = c.length; d < e;) {
            var f = d++;
            c[f] = f + ". " + c[f];
          }
          this.noteTypeDropDown = new vc(10, 105, vc.makeStrIdLabelArray(c, true), function (b) {
            a.currentType = H.parseInt(b);
            if (a.curSelectedNote != null && a.curSelectedNote[1] > -1) {
              a.curSelectedNote[3] = a.curNoteTypes[a.currentType];
              a.updateGrid();
            }
          });
          this.blockPressWhileScrolling.push(this.noteTypeDropDown);
          b.add(new Q(10, 10, 0, "Sustain length:"));
          b.add(new Q(10, 50, 0, "Strum time (in miliseconds):"));
          b.add(new Q(10, 90, 0, "Note type:"));
          b.add(this.stepperSusLength);
          b.add(this.strumTimeInputText);
          b.add(this.noteTypeDropDown);
          this.UI_box.addGroup(b);
        },
        addEventsUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Events";
          this.descText = new Q(20, 200, 0, this.eventStuff[0][0]);
          var c = [];
          for (var d = 0, e = this.eventStuff.length; d < e;) {
            var f = d++;
            c.push(this.eventStuff[f][0]);
          }
          d = new Q(20, 30, 0, "Event:");
          b.add(d);
          this.eventDropDown = new vc(20, 50, vc.makeStrIdLabelArray(c, true), function (b) {
            b = H.parseInt(b);
            a.descText.set_text(a.eventStuff[b][1]);
            if (a.curSelectedNote != null && a.eventStuff != null) {
              if (a.curSelectedNote != null && a.curSelectedNote[2] == null) {
                a.curSelectedNote[1][a.curEventSelected][0] = a.eventStuff[b][0];
              }
              a.updateGrid();
            }
          });
          this.blockPressWhileScrolling.push(this.eventDropDown);
          d = new Q(20, 90, 0, "Value 1:");
          b.add(d);
          this.value1InputText = new gb(20, 110, 100, "");
          this.blockPressWhileTypingOn.push(this.value1InputText);
          d = new Q(20, 130, 0, "Value 2:");
          b.add(d);
          this.value2InputText = new gb(20, 150, 100, "");
          this.blockPressWhileTypingOn.push(this.value2InputText);
          d = new ub(this.eventDropDown.x + this.eventDropDown.get_width() + 10, this.eventDropDown.y, "-", function () {
            if (a.curSelectedNote != null && a.curSelectedNote[2] == null) {
              if (a.curSelectedNote[1].length < 2) {
                M.remove(a._song.events, a.curSelectedNote);
                a.curSelectedNote = null;
              } else {
                a.curSelectedNote[1].remove(a.curSelectedNote[1][a.curEventSelected]);
              }
              --a.curEventSelected;
              if (a.curEventSelected < 0) {
                a.curEventSelected = 0;
              } else {
                if (a.curSelectedNote != null) {
                  var b = a.curSelectedNote[1];
                  var c = a.curEventSelected >= b.length;
                } else {
                  c = false;
                }
                if (c) {
                  a.curEventSelected = b.length - 1;
                }
              }
              a.changeEventSelected();
              a.updateGrid();
            }
          });
          d.setGraphicSize(d.get_height() | 0, d.get_height() | 0);
          d.updateHitbox();
          d.set_color(-65536);
          d.label.set_color(-1);
          d.label.set_size(12);
          this.setAllLabelsOffset(d, -30, 0);
          b.add(d);
          c = new ub(d.x + d.get_width() + 10, d.y, "+", function () {
            if (a.curSelectedNote != null && a.curSelectedNote[2] == null) {
              a.curSelectedNote[1].push(["", "", ""]);
              a.changeEventSelected(1);
              a.updateGrid();
            }
          });
          c.setGraphicSize(d.get_width() | 0, d.get_height() | 0);
          c.updateHitbox();
          c.set_color(-16744448);
          c.label.set_color(-1);
          c.label.set_size(12);
          this.setAllLabelsOffset(c, -30, 0);
          b.add(c);
          d = new ub(c.x + c.get_width() + 20, c.y, "<", function () {
            a.changeEventSelected(-1);
          });
          d.setGraphicSize(c.get_width() | 0, c.get_height() | 0);
          d.updateHitbox();
          d.label.set_size(12);
          this.setAllLabelsOffset(d, -30, 0);
          b.add(d);
          e = new ub(d.x + d.get_width() + 10, d.y, ">", function () {
            a.changeEventSelected(1);
          });
          e.setGraphicSize(d.get_width() | 0, d.get_height() | 0);
          e.updateHitbox();
          e.label.set_size(12);
          this.setAllLabelsOffset(e, -30, 0);
          b.add(e);
          this.selectedEventText = new Q(c.x - 100, c.y + c.get_height() + 6, e.x - c.x + 186, "Selected Event: None");
          this.selectedEventText.set_alignment("center");
          b.add(this.selectedEventText);
          b.add(this.descText);
          b.add(this.value1InputText);
          b.add(this.value2InputText);
          b.add(this.eventDropDown);
          this.UI_box.addGroup(b);
        },
        changeEventSelected: function (a) {
          if (a == null) {
            a = 0;
          }
          if (this.curSelectedNote != null && this.curSelectedNote[2] == null) {
            this.curEventSelected += a;
            if (this.curEventSelected < 0) {
              this.curEventSelected = (this.curSelectedNote[1].length | 0) - 1;
            } else if (this.curEventSelected >= this.curSelectedNote[1].length) {
              this.curEventSelected = 0;
            }
            this.selectedEventText.set_text("Selected Event: " + (this.curEventSelected + 1) + " / " + H.string(this.curSelectedNote[1].length));
          } else {
            this.curEventSelected = 0;
            this.selectedEventText.set_text("Selected Event: None");
          }
          this.updateNoteUI();
        },
        setAllLabelsOffset: function (a, b, c) {
          var d = 0;
          for (a = a.labelOffsets; d < a.length;) {
            var e = a[d];
            ++d;
            var f = b;
            var g = c;
            if (g == null) {
              g = 0;
            }
            if (f == null) {
              f = 0;
            }
            e.set_x(f);
            e.set_y(g);
          }
        },
        addChartingUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Charting";
          this.check_mute_inst = new zb(10, 280, null, null, "Mute Instrumental (in editor)", 100);
          this.check_mute_inst.set_checked(false);
          this.check_mute_inst.callback = function () {
            var b = a.instVolume.value;
            if (a.check_mute_inst.checked) {
              b = 0;
            }
            g.sound.music.set_volume(b);
          };
          this.mouseScrollingQuant = new zb(10, 190, null, null, "Mouse Scrolling Quantization", 100);
          if (g.save.data.mouseScrollingQuant == null) {
            g.save.data.mouseScrollingQuant = false;
          }
          this.mouseScrollingQuant.set_checked(g.save.data.mouseScrollingQuant);
          this.mouseScrollingQuant.callback = function () {
            g.save.data.mouseScrollingQuant = a.mouseScrollingQuant.checked;
            a.mouseQuant = g.save.data.mouseScrollingQuant;
          };
          this.check_vortex = new zb(10, 160, null, null, "Vortex Editor (BETA)", 100);
          if (g.save.data.chart_vortex == null) {
            g.save.data.chart_vortex = false;
          }
          this.check_vortex.set_checked(g.save.data.chart_vortex);
          this.check_vortex.callback = function () {
            g.save.data.chart_vortex = a.check_vortex.checked;
            ia.vortex = g.save.data.chart_vortex;
            a.reloadGridLayer();
          };
          this.check_warnings = new zb(10, 120, null, null, "Ignore Progress Warnings", 100);
          if (g.save.data.ignoreWarnings == null) {
            g.save.data.ignoreWarnings = false;
          }
          this.check_warnings.set_checked(g.save.data.ignoreWarnings);
          this.check_warnings.callback = function () {
            g.save.data.ignoreWarnings = a.check_warnings.checked;
            a.ignoreWarnings = g.save.data.ignoreWarnings;
          };
          this.check_mute_vocals = new zb(this.check_mute_inst.x, this.check_mute_inst.y + 30, null, null, "Mute Main Vocals (in editor)", 100);
          this.check_mute_vocals.set_checked(false);
          this.check_mute_vocals.callback = function () {
            var b = a.voicesVolume.value;
            if (a.check_mute_vocals.checked) {
              b = 0;
            }
            if (a.vocals != null) {
              a.vocals.set_volume(b);
            }
          };
          this.check_mute_vocals_opponent = new zb(this.check_mute_vocals.x + 120, this.check_mute_vocals.y, null, null, "Mute Opp. Vocals (in editor)", 100);
          this.check_mute_vocals_opponent.set_checked(false);
          this.check_mute_vocals_opponent.callback = function () {
            var b = a.voicesOppVolume.value;
            if (a.check_mute_vocals_opponent.checked) {
              b = 0;
            }
            if (a.opponentVocals != null) {
              a.opponentVocals.set_volume(b);
            }
          };
          this.playSoundBf = new zb(this.check_mute_inst.x, this.check_mute_vocals.y + 30, null, null, "Play Sound (Boyfriend notes)", 100, null, function () {
            g.save.data.chart_playSoundBf = a.playSoundBf.checked;
          });
          if (g.save.data.chart_playSoundBf == null) {
            g.save.data.chart_playSoundBf = false;
          }
          this.playSoundBf.set_checked(g.save.data.chart_playSoundBf);
          this.playSoundDad = new zb(this.check_mute_inst.x + 120, this.playSoundBf.y, null, null, "Play Sound (Opponent notes)", 100, null, function () {
            g.save.data.chart_playSoundDad = a.playSoundDad.checked;
          });
          if (g.save.data.chart_playSoundDad == null) {
            g.save.data.chart_playSoundDad = false;
          }
          this.playSoundDad.set_checked(g.save.data.chart_playSoundDad);
          this.metronome = new zb(10, 15, null, null, "Metronome Enabled", 100, null, function () {
            g.save.data.chart_metronome = a.metronome.checked;
          });
          if (g.save.data.chart_metronome == null) {
            g.save.data.chart_metronome = false;
          }
          this.metronome.set_checked(g.save.data.chart_metronome);
          this.metronomeStepper = new Sb(15, 55, 5, this._song.bpm, 1, 1500, 1);
          this.metronomeOffsetStepper = new Sb(this.metronomeStepper.x + 100, this.metronomeStepper.y, 25, 0, 0, 1000, 1);
          this.blockPressWhileTypingOnStepper.push(this.metronomeStepper);
          this.blockPressWhileTypingOnStepper.push(this.metronomeOffsetStepper);
          this.disableAutoScrolling = new zb(this.metronome.x + 120, this.metronome.y, null, null, "Disable Autoscroll (Not Recommended)", 120, null, function () {
            g.save.data.chart_noAutoScroll = a.disableAutoScrolling.checked;
          });
          if (g.save.data.chart_noAutoScroll == null) {
            g.save.data.chart_noAutoScroll = false;
          }
          this.disableAutoScrolling.set_checked(g.save.data.chart_noAutoScroll);
          this.instVolume = new Sb(this.metronomeStepper.x, 250, 0.1, 1, 0, 1, 1);
          this.instVolume.set_value(g.sound.music._volume);
          this.instVolume.name = "inst_volume";
          this.blockPressWhileTypingOnStepper.push(this.instVolume);
          this.voicesVolume = new Sb(this.instVolume.x + 100, this.instVolume.y, 0.1, 1, 0, 1, 1);
          this.voicesVolume.set_value(this.vocals._volume);
          this.voicesVolume.name = "voices_volume";
          this.blockPressWhileTypingOnStepper.push(this.voicesVolume);
          this.voicesOppVolume = new Sb(this.instVolume.x + 200, this.instVolume.y, 0.1, 1, 0, 1, 1);
          this.voicesOppVolume.set_value(this.vocals._volume);
          this.voicesOppVolume.name = "voices_opp_volume";
          this.blockPressWhileTypingOnStepper.push(this.voicesOppVolume);
          this.sliderRate = new vh(this, "playbackSpeed", 120, 120, 0.5, 3, 150, null, 5, -1, -16777216);
          this.sliderRate.nameLabel.set_text("Playback Rate");
          b.add(this.sliderRate);
          b.add(new Q(this.metronomeStepper.x, this.metronomeStepper.y - 15, 0, "BPM:"));
          b.add(new Q(this.metronomeOffsetStepper.x, this.metronomeOffsetStepper.y - 15, 0, "Offset (ms):"));
          b.add(new Q(this.instVolume.x, this.instVolume.y - 15, 0, "Inst Volume"));
          b.add(new Q(this.voicesVolume.x, this.voicesVolume.y - 15, 0, "Main Vocals"));
          b.add(new Q(this.voicesOppVolume.x, this.voicesOppVolume.y - 15, 0, "Opp. Vocals"));
          b.add(this.metronome);
          b.add(this.disableAutoScrolling);
          b.add(this.metronomeStepper);
          b.add(this.metronomeOffsetStepper);
          b.add(this.instVolume);
          b.add(this.voicesVolume);
          b.add(this.voicesOppVolume);
          b.add(this.check_mute_inst);
          b.add(this.check_mute_vocals);
          b.add(this.check_mute_vocals_opponent);
          b.add(this.check_vortex);
          b.add(this.mouseScrollingQuant);
          b.add(this.check_warnings);
          b.add(this.playSoundBf);
          b.add(this.playSoundDad);
          this.UI_box.addGroup(b);
        },
        addDataUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Data";
          this.gameOverCharacterInputText = new gb(10, 25, 150, this._song.gameOverChar ?? "", 8);
          this.blockPressWhileTypingOn.push(this.gameOverCharacterInputText);
          this.gameOverSoundInputText = new gb(10, this.gameOverCharacterInputText.y + 35, 150, this._song.gameOverSound ?? "", 8);
          this.blockPressWhileTypingOn.push(this.gameOverSoundInputText);
          this.gameOverLoopInputText = new gb(10, this.gameOverSoundInputText.y + 35, 150, this._song.gameOverLoop ?? "", 8);
          this.blockPressWhileTypingOn.push(this.gameOverLoopInputText);
          this.gameOverEndInputText = new gb(10, this.gameOverLoopInputText.y + 35, 150, this._song.gameOverEnd ?? "", 8);
          this.blockPressWhileTypingOn.push(this.gameOverEndInputText);
          var c = new zb(10, 170, null, null, "Disable Note RGB", 100);
          c.set_checked(this._song.disableNoteRGB == 1);
          c.callback = function () {
            a._song.disableNoteRGB = c.checked;
            a.updateGrid();
          };
          this.noteSkinInputText = new gb(10, 280, 150, this._song.arrowSkin ?? "", 8);
          this.blockPressWhileTypingOn.push(this.noteSkinInputText);
          this.noteSplashesInputText = new gb(this.noteSkinInputText.x, this.noteSkinInputText.y + 35, 150, this._song.splashSkin ?? "", 8);
          this.blockPressWhileTypingOn.push(this.noteSplashesInputText);
          var d = new ub(this.noteSplashesInputText.x + 5, this.noteSplashesInputText.y + 20, "Change Notes", function () {
            a._song.arrowSkin = a.noteSkinInputText.text;
            a.updateGrid();
          });
          b.add(this.gameOverCharacterInputText);
          b.add(this.gameOverSoundInputText);
          b.add(this.gameOverLoopInputText);
          b.add(this.gameOverEndInputText);
          b.add(c);
          b.add(d);
          b.add(this.noteSkinInputText);
          b.add(this.noteSplashesInputText);
          b.add(new Q(this.gameOverCharacterInputText.x, this.gameOverCharacterInputText.y - 15, 0, "Game Over Character Name:"));
          b.add(new Q(this.gameOverSoundInputText.x, this.gameOverSoundInputText.y - 15, 0, "Game Over Death Sound (sounds/):"));
          b.add(new Q(this.gameOverLoopInputText.x, this.gameOverLoopInputText.y - 15, 0, "Game Over Loop Music (music/):"));
          b.add(new Q(this.gameOverEndInputText.x, this.gameOverEndInputText.y - 15, 0, "Game Over Retry Music (music/):"));
          b.add(new Q(this.noteSkinInputText.x, this.noteSkinInputText.y - 15, 0, "Note Texture:"));
          b.add(new Q(this.noteSplashesInputText.x, this.noteSplashesInputText.y - 15, 0, "Note Splashes Texture:"));
          this.UI_box.addGroup(b);
        },
        loadSong: function () {
          if (g.sound.music != null) {
            var a = g.sound.music;
            a.cleanup(a.autoDestroy, true);
          }
          if (this.vocals != null) {
            a = this.vocals;
            a.cleanup(a.autoDestroy, true);
            this.vocals.destroy();
          }
          if (this.opponentVocals != null) {
            a = this.opponentVocals;
            a.cleanup(a.autoDestroy, true);
            this.opponentVocals.destroy();
          }
          this.vocals = new ce();
          this.opponentVocals = new ce();
          a = "songs:assets/songs/" + w.replace(this.currentSongName.toLowerCase(), " ", "-") + "/Voices.mp3";
          this.vocals.loadEmbedded(a ?? "songs:assets/songs/" + w.replace(this.currentSongName.toLowerCase(), " ", "-") + "/Voices.mp3");
          this.vocals.autoDestroy = false;
          g.sound.list.add(this.vocals);
          this.opponentVocals = new ce();
          a = "songs:assets/songs/" + w.replace(this.currentSongName.toLowerCase(), " ", "-") + "/Voices.mp3";
          if (a != null) {
            this.opponentVocals.loadEmbedded(a);
          }
          this.opponentVocals.autoDestroy = false;
          g.sound.list.add(this.opponentVocals);
          this.generateSong();
          g.sound.music.pause();
          N.songPosition = this.sectionStartTime();
          g.sound.music.set_time(N.songPosition);
          a = 0;
          if (this._song.notes.length <= 1) {
            for (yb.trace("first load ever!!", {
              fileName: "source/states/editors/ChartingState.hx",
              lineNumber: 1533,
              className: "states.editors.ChartingState",
              methodName: "loadSong"
            }); a < g.sound.music._length;) {
              this.addSection();
              a += 60 / this._song.bpm * 4000;
            }
          }
        },
        closeSubState: function () {
          if (this.playtesting) {
            g.sound.music.pause();
            g.sound.music.set_time(this.playtestingTime);
            g.sound.music.onComplete = this.playtestingOnComplete;
            if (this.instVolume != null) {
              g.sound.music.set_volume(this.instVolume.value);
            }
            if (this.check_mute_inst != null && this.check_mute_inst.checked) {
              g.sound.music.set_volume(0);
            }
            if (this.vocals != null) {
              this.vocals.pause();
              this.vocals.set_time(this.playtestingTime);
              if (this.voicesVolume != null) {
                this.vocals.set_volume(this.voicesVolume.value);
              }
              if (this.check_mute_vocals != null && this.check_mute_vocals.checked) {
                this.vocals.set_volume(0);
              }
            }
            if (this.opponentVocals != null) {
              this.opponentVocals.pause();
              this.opponentVocals.set_time(this.playtestingTime);
              if (this.voicesOppVolume != null) {
                this.opponentVocals.set_volume(this.voicesOppVolume.value);
              }
              if (this.check_mute_vocals_opponent != null && this.check_mute_vocals_opponent.checked) {
                this.opponentVocals.set_volume(0);
              }
            }
          }
          U.prototype.closeSubState.call(this);
        },
        generateSong: function () {
          var a = this;
          g.sound.playMusic("songs:assets/songs/" + w.replace(this.currentSongName.toLowerCase(), " ", "-") + "/Inst.mp3", 0.6);
          g.sound.music.autoDestroy = false;
          if (this.instVolume != null) {
            g.sound.music.set_volume(this.instVolume.value);
          }
          if (this.check_mute_inst != null && this.check_mute_inst.checked) {
            g.sound.music.set_volume(0);
          }
          g.sound.music.onComplete = function () {
            g.sound.music.pause();
            N.songPosition = 0;
            if (a.vocals != null) {
              a.vocals.pause();
              a.vocals.set_time(0);
            }
            if (a.opponentVocals != null) {
              a.opponentVocals.pause();
              a.opponentVocals.set_time(0);
            }
            a.changeSection();
            ia.curSec = 0;
            a.updateGrid();
            a.updateSectionUI();
            if (a.vocals != null) {
              a.vocals.play();
            }
            if (a.opponentVocals != null) {
              a.opponentVocals.play();
            }
          };
        },
        generateUI: function () {
          while (this.bullshitUI.members.length > 0) {
            this.bullshitUI.remove(this.bullshitUI.members[0], true);
          }
          var a = new Q(this.UI_box.x + 20, this.UI_box.y + 20, 0);
          this.bullshitUI.add(a);
        },
        getEvent: function (a, b, c, d) {
          if (a == "click_check_box") {
            switch (b.getLabel().text) {
              case "Alt Animation":
                this._song.notes[ia.curSec].altAnim = b.checked;
                break;
              case "Change BPM":
                this._song.notes[ia.curSec].changeBPM = b.checked;
                g.log.advanced("changed bpm shit", Ba.NORMAL);
                break;
              case "GF section":
                this._song.notes[ia.curSec].gfSection = b.checked;
                this.updateGrid();
                this.updateHeads();
                break;
              case "Must hit section":
                this._song.notes[ia.curSec].mustHitSection = b.checked;
                this.updateGrid();
                this.updateHeads();
            }
          } else if (a == "change_numeric_stepper" && b instanceof Sb) {
            switch (b.name) {
              case "inst_volume":
                g.sound.music.set_volume(b.value);
                if (this.check_mute_inst.checked) {
                  g.sound.music.set_volume(0);
                }
                break;
              case "note_susLength":
                if (this.curSelectedNote != null && this.curSelectedNote[2] != null) {
                  this.curSelectedNote[2] = b.value;
                  this.updateGrid();
                }
                break;
              case "section_beats":
                this._song.notes[ia.curSec].sectionBeats = b.value;
                this.reloadGridLayer();
                break;
              case "section_bpm":
                this._song.notes[ia.curSec].bpm = b.value;
                this.updateGrid();
                break;
              case "song_bpm":
                this._song.bpm = b.value;
                N.mapBPMChanges(this._song);
                N.set_bpm(b.value);
                this.stepperSusLength.stepSize = Math.ceil(N.stepCrochet / 2);
                this.updateGrid();
                break;
              case "song_speed":
                this._song.speed = b.value;
                break;
              case "voices_opp_volume":
                this.opponentVocals.set_volume(b.value);
                if (this.check_mute_vocals_opponent.checked) {
                  this.opponentVocals.set_volume(0);
                }
                break;
              case "voices_volume":
                this.vocals.set_volume(b.value);
                if (this.check_mute_vocals.checked) {
                  this.vocals.set_volume(0);
                }
            }
          } else if (a == "change_input_text" && b instanceof gb) {
            if (b == this.noteSplashesInputText) {
              this._song.splashSkin = this.noteSplashesInputText.text;
            } else if (b == this.noteSkinInputText) {
              this._song.arrowSkin = this.noteSkinInputText.text;
            } else if (b == this.gameOverCharacterInputText) {
              this._song.gameOverChar = this.gameOverCharacterInputText.text;
            } else if (b == this.gameOverSoundInputText) {
              this._song.gameOverSound = this.gameOverSoundInputText.text;
            } else if (b == this.gameOverLoopInputText) {
              this._song.gameOverLoop = this.gameOverLoopInputText.text;
            } else if (b == this.gameOverEndInputText) {
              this._song.gameOverEnd = this.gameOverEndInputText.text;
            } else if (this.curSelectedNote != null) {
              if (b == this.value1InputText) {
                if (this.curSelectedNote[1][this.curEventSelected] != null) {
                  this.curSelectedNote[1][this.curEventSelected][1] = this.value1InputText.text;
                  this.updateGrid();
                }
              } else if (b == this.value2InputText) {
                if (this.curSelectedNote[1][this.curEventSelected] != null) {
                  this.curSelectedNote[1][this.curEventSelected][2] = this.value2InputText.text;
                  this.updateGrid();
                }
              } else if (b == this.strumTimeInputText) {
                a = parseFloat(this.strumTimeInputText.text);
                if (isNaN(a)) {
                  a = 0;
                }
                this.curSelectedNote[0] = a;
                this.updateGrid();
              }
            }
          } else if (a == "change_slider" && b instanceof vh && b == "playbackSpeed") {
            this.playbackSpeed = this.sliderRate.value | 0;
          }
        },
        sectionStartTime: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = this._song.bpm;
          var c = 0;
          var d = 0;
          for (a = ia.curSec + a; d < a;) {
            var e = d++;
            if (this._song.notes[e] != null) {
              if (this._song.notes[e].changeBPM) {
                b = this._song.notes[e].bpm;
              }
              c += this.getSectionBeats(e) * (60000 / b);
            }
          }
          return c;
        },
        update: function (a) {
          var b = this;
          this.curStep = this.recalculateSteps();
          if (g.sound.music._time < 0) {
            g.sound.music.pause();
            g.sound.music.set_time(0);
          } else if (g.sound.music._time > g.sound.music._length) {
            g.sound.music.pause();
            g.sound.music.set_time(0);
            this.changeSection();
          }
          N.songPosition = g.sound.music._time;
          this._song.song = this.UI_songTitle.text;
          this.strumLineUpdateY();
          this.strumLineNotes.members[0].set_y(this.strumLine.y);
          this.strumLineNotes.members[1].set_y(this.strumLine.y);
          this.strumLineNotes.members[2].set_y(this.strumLine.y);
          this.strumLineNotes.members[3].set_y(this.strumLine.y);
          this.strumLineNotes.members[4].set_y(this.strumLine.y);
          this.strumLineNotes.members[5].set_y(this.strumLine.y);
          this.strumLineNotes.members[6].set_y(this.strumLine.y);
          this.strumLineNotes.members[7].set_y(this.strumLine.y);
          g.mouse.set_visible(true);
          this.camPos.set_y(this.strumLine.y);
          if (!this.disableAutoScrolling.checked) {
            if (Math.ceil(this.strumLine.y) >= this.gridBG.get_height()) {
              if (this._song.notes[ia.curSec + 1] == null) {
                this.addSection();
              }
              this.changeSection(ia.curSec + 1, false);
            } else if (this.strumLine.y < -10) {
              this.changeSection(ia.curSec - 1, false);
            }
          }
          if (g.mouse.x > this.gridBG.x && g.mouse.x < this.gridBG.x + this.gridBG.get_width() && g.mouse.y > this.gridBG.y && g.mouse.y < this.gridBG.y + ia.GRID_SIZE * this.getSectionBeats() * 4 * this.zoomList[this.curZoom]) {
            this.dummyArrow.set_visible(true);
            this.dummyArrow.set_x(Math.floor(g.mouse.x / ia.GRID_SIZE) * ia.GRID_SIZE);
            var c = g.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(16, c.status)) {
              this.dummyArrow.set_y(g.mouse.y);
            } else {
              c = ia.GRID_SIZE / (ia.quantization / 16);
              this.dummyArrow.set_y(Math.floor(g.mouse.y / c) * c);
            }
          } else {
            this.dummyArrow.set_visible(false);
          }
          if (g.mouse._leftButton.current == 2) {
            if (g.mouse.overlaps(this.curRenderedNotes)) {
              this.curRenderedNotes.forEachAlive(function (a) {
                if (g.mouse.overlaps(a)) {
                  var c = g.keys.pressed;
                  if (c.keyManager.checkStatusUnsafe(17, c.status)) {
                    b.selectNote(a);
                  } else {
                    c = g.keys.pressed;
                    if (c.keyManager.checkStatusUnsafe(18, c.status)) {
                      b.selectNote(a);
                      b.curSelectedNote[3] = b.curNoteTypes[b.currentType];
                      b.updateGrid();
                    } else {
                      b.deleteNote(a);
                    }
                  }
                }
              });
            } else if (g.mouse.x > this.gridBG.x && g.mouse.x < this.gridBG.x + this.gridBG.get_width() && g.mouse.y > this.gridBG.y && g.mouse.y < this.gridBG.y + ia.GRID_SIZE * this.getSectionBeats() * 4 * this.zoomList[this.curZoom]) {
              g.log.advanced("added note", Ba.NORMAL);
              this.addNote();
            }
          }
          var d = false;
          c = 0;
          for (var e = this.blockPressWhileTypingOn; c < e.length;) {
            var f = e[c];
            ++c;
            if (f.hasFocus) {
              C.toggleVolumeKeys(false);
              d = true;
              break;
            }
          }
          if (!d) {
            c = 0;
            e = this.blockPressWhileTypingOnStepper;
            while (c < e.length) {
              f = e[c];
              ++c;
              if (ta.__cast(f.text_field, gb).hasFocus) {
                C.toggleVolumeKeys(false);
                d = true;
                break;
              }
            }
          }
          if (!d) {
            C.toggleVolumeKeys(true);
            c = 0;
            e = this.blockPressWhileScrolling;
            while (c < e.length) {
              f = e[c];
              ++c;
              if (f.dropPanel.visible) {
                d = true;
                break;
              }
            }
          }
          if (d) {
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(13, c.status)) {
              c = 0;
              e = this.blockPressWhileTypingOn.length;
              while (c < e) {
                t = c++;
                if (this.blockPressWhileTypingOn[t].hasFocus) {
                  this.blockPressWhileTypingOn[t].set_hasFocus(false);
                }
              }
            }
          } else {
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(27, c.status)) {
              if (g.sound.music != null) {
                c = g.sound.music;
                c.cleanup(c.autoDestroy, true);
              }
              if (this.vocals != null) {
                this.vocals.pause();
                this.vocals.set_volume(0);
              }
              if (this.opponentVocals != null) {
                this.opponentVocals.pause();
                this.opponentVocals.set_volume(0);
              }
              this.autosaveSong();
              this.playtesting = true;
              this.playtestingTime = N.songPosition;
              this.playtestingOnComplete = g.sound.music.onComplete;
              this.openSubState(new en(this.playbackSpeed));
            } else {
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                this.autosaveSong();
                g.mouse.set_visible(false);
                z.SONG = this._song;
                c = g.sound.music;
                c.cleanup(c.autoDestroy, true);
                if (this.vocals != null) {
                  c = this.vocals;
                  c.cleanup(c.autoDestroy, true);
                }
                if (this.opponentVocals != null) {
                  c = this.opponentVocals;
                  c.cleanup(c.autoDestroy, true);
                }
                Ae.loadDirectory(this._song);
                U.switchState(qc.getNextState(new z(), false));
              }
            }
            if (this.curSelectedNote != null && this.curSelectedNote[1] > -1) {
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(69, c.status)) {
                this.changeNoteSustain(N.stepCrochet);
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(81, c.status)) {
                this.changeNoteSustain(-N.stepCrochet);
              }
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(8, c.status)) {
              this.autosaveSong();
              z.chartingMode = false;
              U.switchState(new Rf());
              c = g.sound;
              d = y.returnSound("music", "freakyMenu", null);
              c.playMusic(d);
              g.mouse.set_visible(false);
              return;
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(90, c.status)) {
              c = g.keys.pressed;
              c = c.keyManager.checkStatusUnsafe(17, c.status);
            } else {
              c = false;
            }
            if (c) {
              this.undo();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(90, c.status) && this.curZoom > 0) {
              c = g.keys.pressed;
              c = !c.keyManager.checkStatusUnsafe(17, c.status);
            } else {
              c = false;
            }
            if (c) {
              --this.curZoom;
              this.updateZoom();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(88, c.status) && this.curZoom < this.zoomList.length - 1) {
              this.curZoom++;
              this.updateZoom();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(9, c.status)) {
              c = g.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(16, c.status)) {
                f = this.UI_box;
                f.set_selected_tab(f.get_selected_tab() - 1);
                if (this.UI_box.get_selected_tab() < 0) {
                  this.UI_box.set_selected_tab(2);
                }
              } else {
                f = this.UI_box;
                f.set_selected_tab(f.get_selected_tab() + 1);
                if (this.UI_box.get_selected_tab() >= 3) {
                  this.UI_box.set_selected_tab(0);
                }
              }
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(32, c.status)) {
              if (this.vocals != null) {
                this.vocals.play();
              }
              if (this.opponentVocals != null) {
                this.opponentVocals.play();
              }
              this.pauseAndSetVocalsTime();
              if (g.sound.music._channel == null) {
                g.sound.music.play();
                if (this.vocals != null) {
                  this.vocals.play();
                }
                if (this.opponentVocals != null) {
                  this.opponentVocals.play();
                }
              } else {
                g.sound.music.pause();
              }
            }
            c = g.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(18, c.status)) {
              c = false;
            } else {
              c = g.keys.justPressed;
              c = c.keyManager.checkStatusUnsafe(82, c.status);
            }
            if (c) {
              c = g.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(16, c.status)) {
                this.resetSection(true);
              } else {
                this.resetSection();
              }
            }
            if (g.mouse.wheel != 0) {
              g.sound.music.pause();
              if (this.mouseQuant) {
                e = this.curDecBeat;
                f = ia.quantization / 4;
                var k = 1 / f;
                if (g.mouse.wheel > 0) {
                  c = Math.round(e * f);
                  g.sound.music.set_time(N.beatToSeconds(c / f - k));
                } else {
                  c = Math.round(e * f);
                  g.sound.music.set_time(N.beatToSeconds(c / f + k));
                }
              } else {
                f = g.sound.music;
                f.set_time(f._time - g.mouse.wheel * N.stepCrochet * 0.8);
              }
              this.pauseAndSetVocalsTime();
            }
            c = g.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(87, c.status)) {
              c = true;
            } else {
              c = g.keys.pressed;
              c = c.keyManager.checkStatusUnsafe(83, c.status);
            }
            if (c) {
              g.sound.music.pause();
              f = 1;
              c = g.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(17, c.status)) {
                f = 0.25;
              } else {
                c = g.keys.pressed;
                if (c.keyManager.checkStatusUnsafe(16, c.status)) {
                  f = 4;
                }
              }
              k = g.elapsed * 700 * f;
              f = g.sound.music;
              c = g.keys.pressed;
              f.set_time(f._time + k * (c.keyManager.checkStatusUnsafe(87, c.status) ? -1 : 1));
              this.pauseAndSetVocalsTime();
            }
            if (!ia.vortex) {
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(38, c.status)) {
                c = true;
              } else {
                c = g.keys.justPressed;
                c = c.keyManager.checkStatusUnsafe(40, c.status);
              }
              if (c) {
                g.sound.music.pause();
                this.updateCurStep();
                e = this.curDecBeat;
                f = ia.quantization / 4;
                k = 1 / f;
                c = g.keys.pressed;
                if (c.keyManager.checkStatusUnsafe(38, c.status)) {
                  c = Math.round(e * f);
                  g.sound.music.set_time(N.beatToSeconds(c / f - k));
                } else {
                  c = Math.round(e * f);
                  g.sound.music.set_time(N.beatToSeconds(c / f + k));
                }
              }
            }
            f = this.currentType;
            c = g.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(16, c.status)) {
              f = 3;
            }
            k = N.songPosition;
            if (!d) {
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(39, c.status)) {
                ia.curQuant++;
                if (ia.curQuant > this.quantizations.length - 1) {
                  ia.curQuant = 0;
                }
                ia.quantization = this.quantizations[ia.curQuant];
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(37, c.status)) {
                ia.curQuant--;
                if (ia.curQuant < 0) {
                  ia.curQuant = this.quantizations.length - 1;
                }
                ia.quantization = this.quantizations[ia.curQuant];
              }
              this.quant.animation.play("q", true, false, ia.curQuant);
            }
            if (ia.vortex && !d) {
              c = g.keys.justPressed;
              e = c.keyManager.checkStatusUnsafe(49, c.status);
              c = g.keys.justPressed;
              var h = c.keyManager.checkStatusUnsafe(50, c.status);
              c = g.keys.justPressed;
              t = c.keyManager.checkStatusUnsafe(51, c.status);
              c = g.keys.justPressed;
              var n = c.keyManager.checkStatusUnsafe(52, c.status);
              c = g.keys.justPressed;
              var p = c.keyManager.checkStatusUnsafe(53, c.status);
              c = g.keys.justPressed;
              var l = c.keyManager.checkStatusUnsafe(54, c.status);
              c = g.keys.justPressed;
              var m = c.keyManager.checkStatusUnsafe(55, c.status);
              c = g.keys.justPressed;
              h = [e, h, t, n, p, l, m, c.keyManager.checkStatusUnsafe(56, c.status)];
              if (h.indexOf(true) != -1) {
                c = 0;
                e = h.length;
                while (c < e) {
                  var t = c++;
                  if (h[t]) {
                    this.doANoteThing(k, t, f);
                  }
                }
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(38, c.status)) {
                c = true;
              } else {
                c = g.keys.justPressed;
                c = c.keyManager.checkStatusUnsafe(40, c.status);
              }
              if (c && (g.sound.music.pause(), this.updateCurStep(), e = this.curDecBeat, f = ia.quantization / 4, k = 1 / f, c = g.keys.pressed, c.keyManager.checkStatusUnsafe(38, c.status) ? (c = Math.round(e * f), c = N.beatToSeconds(c / f - k)) : (c = Math.round(e * f), c = N.beatToSeconds(c / f + k)), ka.tween(g.sound.music, {
                time: c
              }, 0.1, {
                ease: va.circOut
              }), this.pauseAndSetVocalsTime(), d = 0, this.curSelectedNote != null && (d = this.curSelectedNote[0]), f = this.sectionStartTime(), d = c - f - (d - f), this.curSelectedNote != null && (c = g.keys.pressed, e = c.keyManager.checkStatusUnsafe(49, c.status), c = g.keys.pressed, h = c.keyManager.checkStatusUnsafe(50, c.status), c = g.keys.pressed, t = c.keyManager.checkStatusUnsafe(51, c.status), c = g.keys.pressed, n = c.keyManager.checkStatusUnsafe(52, c.status), c = g.keys.pressed, p = c.keyManager.checkStatusUnsafe(53, c.status), c = g.keys.pressed, l = c.keyManager.checkStatusUnsafe(54, c.status), c = g.keys.pressed, m = c.keyManager.checkStatusUnsafe(55, c.status), c = g.keys.pressed, h = [e, h, t, n, p, l, m, c.keyManager.checkStatusUnsafe(56, c.status)], h.indexOf(true) != -1))) {
                c = 0;
                for (e = h.length; c < e;) {
                  t = c++;
                  if (h[t] && this.curSelectedNote[1] == t) {
                    this.curSelectedNote[2] += d - this.curSelectedNote[2] - N.stepCrochet;
                  }
                }
                this.updateGrid();
                this.updateNoteUI();
              }
            }
            d = 1;
            c = g.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(16, c.status)) {
              d = 4;
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(68, c.status)) {
              this.changeSection(ia.curSec + d);
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(65, c.status)) {
              if (ia.curSec <= 0) {
                this.changeSection(this._song.notes.length - 1);
              } else {
                this.changeSection(ia.curSec - d);
              }
            }
          }
          this.strumLineNotes.set_visible(this.quant.set_visible(ia.vortex));
          if (g.sound.music._time < 0) {
            g.sound.music.pause();
            g.sound.music.set_time(0);
          } else if (g.sound.music._time > g.sound.music._length) {
            g.sound.music.pause();
            g.sound.music.set_time(0);
            this.changeSection();
          }
          N.songPosition = g.sound.music._time;
          this.strumLineUpdateY();
          this.camPos.set_y(this.strumLine.y);
          this.strumLineNotes.members[0].set_y(this.strumLine.y);
          this.strumLineNotes.members[0].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[1].set_y(this.strumLine.y);
          this.strumLineNotes.members[1].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[2].set_y(this.strumLine.y);
          this.strumLineNotes.members[2].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[3].set_y(this.strumLine.y);
          this.strumLineNotes.members[3].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[4].set_y(this.strumLine.y);
          this.strumLineNotes.members[4].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[5].set_y(this.strumLine.y);
          this.strumLineNotes.members[5].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[6].set_y(this.strumLine.y);
          this.strumLineNotes.members[6].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[7].set_y(this.strumLine.y);
          this.strumLineNotes.members[7].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          c = g.keys.pressed;
          f = c.keyManager.checkStatusUnsafe(16, c.status);
          c = g.keys.pressed;
          d = c.keyManager.checkStatusUnsafe(219, c.status);
          c = g.keys.pressed;
          k = c.keyManager.checkStatusUnsafe(221, c.status);
          c = g.keys.justPressed;
          e = c.keyManager.checkStatusUnsafe(219, c.status);
          c = g.keys.justPressed;
          h = c.keyManager.checkStatusUnsafe(221, c.status);
          if (!f && e || f && d) {
            this.playbackSpeed -= 0.01;
          }
          if (!f && h || f && k) {
            this.playbackSpeed += 0.01;
          }
          c = g.keys.pressed;
          if (c.keyManager.checkStatusUnsafe(18, c.status) && (e || h || d || k)) {
            this.playbackSpeed = 1;
          }
          if (this.playbackSpeed <= 0.5) {
            this.playbackSpeed = 0.5;
          }
          if (this.playbackSpeed >= 3) {
            this.playbackSpeed = 3;
          }
          g.sound.music.set_pitch(this.playbackSpeed);
          this.vocals.set_pitch(this.playbackSpeed);
          this.opponentVocals.set_pitch(this.playbackSpeed);
          this.bpmTxt.set_text(H.string($b.roundDecimal(N.songPosition / 1000, 2)) + " / " + H.string($b.roundDecimal(g.sound.music._length / 1000, 2)) + "\nSection: " + ia.curSec + "\n\nBeat: " + H.string(this.curDecBeat).substring(0, 4) + "\n\nStep: " + this.curStep + "\n\nBeat Snap: " + ia.quantization + "th");
          var q = [false, false, false, false];
          this.curRenderedNotes.forEachAlive(function (c) {
            c.set_alpha(1);
            if (b.curSelectedNote != null) {
              var d = c.noteData;
              if (d > -1 && c.mustPress != b._song.notes[ia.curSec].mustHitSection) {
                d += 4;
              }
              if (b.curSelectedNote[0] == c.strumTime && (b.curSelectedNote[2] == null && d < 0 || b.curSelectedNote[2] != null && b.curSelectedNote[1] == d)) {
                b.colorSine += a;
                var e = 0.7 + Math.sin(Math.PI * b.colorSine) * 0.3;
                var f = 0.999;
                if (f == null) {
                  f = 1;
                }
                d = xb._new();
                if (f == null) {
                  f = 1;
                }
                var k = Math.round(e * 255);
                d = d & -16711681 | (k > 255 ? 255 : k < 0 ? 0 : k) << 16;
                k = Math.round(e * 255);
                d = d & -65281 | (k > 255 ? 255 : k < 0 ? 0 : k) << 8;
                k = Math.round(e * 255);
                d = d & -256 | (k > 255 ? 255 : k < 0 ? 0 : k);
                k = Math.round(f * 255);
                c.set_color(d & 16777215 | (k > 255 ? 255 : k < 0 ? 0 : k) << 24);
              }
            }
            if (c.strumTime <= N.songPosition) {
              c.set_alpha(0.4);
              if (c.strumTime > b.lastConductorPos && g.sound.music._channel != null && c.noteData > -1) {
                e = c.noteData % 4;
                d = c.noteData;
                if (d > -1 && c.mustPress != b._song.notes[ia.curSec].mustHitSection) {
                  d += 4;
                }
                b.strumLineNotes.members[d].playAnim("confirm", true);
                b.strumLineNotes.members[d].resetAnim = (c.sustainLength / 1000 + 0.15) / b.playbackSpeed;
                if (!q[e] && c.hitsoundChartEditor && (b.playSoundBf.checked && c.mustPress || b.playSoundDad.checked && !c.mustPress)) {
                  d = c.hitsound;
                  if (b._song.player1 == "gf") {
                    d = "GF_" + H.string(e + 1);
                  }
                  d = g.sound.play(y.sound(d));
                  d._transform.pan = c.noteData < 4 ? -0.3 : 0.3;
                  d.updateTransform();
                  q[e] = true;
                }
              }
            }
          });
          if (this.metronome.checked && this.lastConductorPos != N.songPosition) {
            c = 60 / this.metronomeStepper.value;
            if (Math.floor((N.songPosition + this.metronomeOffsetStepper.value) / c / 1000) != Math.floor((this.lastConductorPos + this.metronomeOffsetStepper.value) / c / 1000)) {
              g.sound.play(y.sound("Metronome_Tick"));
            }
          }
          this.lastConductorPos = N.songPosition;
          U.prototype.update.call(this, a);
        },
        pauseAndSetVocalsTime: function () {
          if (this.vocals != null) {
            this.vocals.pause();
            this.vocals.set_time(g.sound.music._time);
          }
          if (this.opponentVocals != null) {
            this.opponentVocals.pause();
            this.opponentVocals.set_time(g.sound.music._time);
          }
        },
        updateZoom: function () {
          var a = this.zoomList[this.curZoom];
          var b = "1 / " + a;
          if (a < 1) {
            b = Math.round(1 / a) + " / 1";
          }
          this.zoomTxt.set_text("Zoom: " + b);
          this.reloadGridLayer();
        },
        destroy: function () {
          Pa.globalRgbShaders = [];
          Si.clearNoteTypesData();
          U.prototype.destroy.call(this);
        },
        reloadGridLayer: function () {
          this.gridLayer.clear();
          this.gridBG = qh.create(1, 1, this.columns, this.getSectionBeats() * 4 * this.zoomList[this.curZoom] | 0);
          this.gridBG.set_antialiasing(false);
          var a = this.gridBG.scale;
          var b = ia.GRID_SIZE;
          var c = ia.GRID_SIZE;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this.gridBG.updateHitbox();
          a = this.gridBG.get_height() | 0;
          b = false;
          if (this.sectionStartTime(1) <= g.sound.music._length) {
            this.nextGridBG = qh.create(1, 1, this.columns, this.getSectionBeats(ia.curSec + 1) * 4 * this.zoomList[this.curZoom] | 0);
            this.nextGridBG.set_antialiasing(false);
            a = this.nextGridBG.scale;
            c = b = ia.GRID_SIZE;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            this.nextGridBG.updateHitbox();
            a = this.gridBG.get_height() + this.nextGridBG.get_height() | 0;
            b = true;
          } else {
            this.nextGridBG = new G().makeGraphic(1, 1, 0);
          }
          this.nextGridBG.set_y(this.gridBG.get_height());
          this.gridLayer.add(this.nextGridBG);
          this.gridLayer.add(this.gridBG);
          if (b) {
            b = new G(0, this.gridBG.get_height()).makeGraphic(1, 1, -16777216);
            b.setGraphicSize(ia.GRID_SIZE * 9 | 0, this.nextGridBG.get_height() | 0);
            b.updateHitbox();
            b.set_antialiasing(false);
            b.set_alpha(0.4);
            this.gridLayer.add(b);
          }
          b = new G(this.gridBG.x + this.gridBG.get_width() - ia.GRID_SIZE * 4).makeGraphic(1, 1, -16777216);
          b.setGraphicSize(2, a);
          b.updateHitbox();
          b.set_antialiasing(false);
          this.gridLayer.add(b);
          b = 1;
          for (c = this.getSectionBeats() | 0; b < c;) {
            var d = b++;
            d = new G(this.gridBG.x, ia.GRID_SIZE * 4 * this.zoomList[this.curZoom] * d).makeGraphic(1, 1, 1157562368);
            d.scale.set_x(this.gridBG.get_width());
            d.updateHitbox();
            if (ia.vortex) {
              this.gridLayer.add(d);
            }
          }
          b = new G(this.gridBG.x + ia.GRID_SIZE).makeGraphic(1, 1, -16777216);
          b.setGraphicSize(2, a);
          b.updateHitbox();
          b.set_antialiasing(false);
          this.gridLayer.add(b);
          this.updateGrid();
          this.lastSecBeats = this.getSectionBeats();
          if (this.sectionStartTime(1) > g.sound.music._length) {
            this.lastSecBeatsNext = 0;
          } else {
            this.getSectionBeats(ia.curSec + 1);
          }
        },
        strumLineUpdateY: function () {
          this.strumLine.set_y(this.getYfromStrum((N.songPosition - this.sectionStartTime()) / (this.zoomList[this.curZoom] % (N.stepCrochet * 16))) / (this.getSectionBeats() / 4));
        },
        updateWaveform: function () {},
        waveformData: function (a, b, c, d, e, f, g) {
          return [[[0], [0]], [[0], [0]]];
        },
        changeNoteSustain: function (a) {
          if (this.curSelectedNote != null && this.curSelectedNote[2] != null) {
            this.curSelectedNote[2] += Math.ceil(a);
            this.curSelectedNote[2] = Math.max(this.curSelectedNote[2], 0);
          }
          this.updateNoteUI();
          this.updateGrid();
        },
        recalculateSteps: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = {
            stepTime: 0,
            songTime: 0,
            bpm: 0
          };
          for (var c = 0, d = N.bpmChangeMap.length; c < d;) {
            var e = c++;
            if (g.sound.music._time > N.bpmChangeMap[e].songTime) {
              b = N.bpmChangeMap[e];
            }
          }
          this.curStep = b.stepTime + Math.floor((g.sound.music._time - b.songTime + a) / N.stepCrochet);
          this.updateBeat();
          return this.curStep;
        },
        resetSection: function (a) {
          if (a == null) {
            a = false;
          }
          this.updateGrid();
          g.sound.music.pause();
          g.sound.music.set_time(this.sectionStartTime());
          if (a) {
            g.sound.music.set_time(0);
            ia.curSec = 0;
          }
          this.pauseAndSetVocalsTime();
          this.updateCurStep();
          this.updateGrid();
          this.updateSectionUI();
          this.updateWaveform();
        },
        changeSection: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a == null) {
            a = 0;
          }
          var c = false;
          if (this._song.notes[a] != null) {
            ia.curSec = a;
            if (b) {
              g.sound.music.pause();
              g.sound.music.set_time(this.sectionStartTime());
              this.pauseAndSetVocalsTime();
              this.updateCurStep();
            }
            a = this.getSectionBeats();
            b = this.getSectionBeats(ia.curSec + 1);
            if (this.sectionStartTime(1) > g.sound.music._length) {
              b = 0;
            }
            if (a != this.lastSecBeats || b != this.lastSecBeatsNext) {
              this.reloadGridLayer();
              c = true;
            } else {
              this.updateGrid();
            }
            this.updateSectionUI();
          } else {
            this.changeSection();
          }
          N.songPosition = g.sound.music._time;
          if (!c) {
            this.updateWaveform();
          }
        },
        updateSectionUI: function () {
          var a = this._song.notes[ia.curSec];
          this.stepperBeats.set_value(this.getSectionBeats());
          this.check_mustHitSection.set_checked(a.mustHitSection);
          this.check_gfSection.set_checked(a.gfSection);
          this.check_altAnim.set_checked(a.altAnim);
          this.check_changeBPM.set_checked(a.changeBPM);
          this.stepperSectionBPM.set_value(a.bpm);
          this.updateHeads();
        },
        updateJsonData: function () {
          var a = this.loadCharacterFile(ma.field(this._song, "player1"));
          this.characterData.iconP1 = this.characterFailed ? "face" : a.healthicon;
          this.characterData.vocalsP1 = a.vocals_file ?? "";
          a = this.loadCharacterFile(ma.field(this._song, "player2"));
          this.characterData.iconP2 = this.characterFailed ? "face" : a.healthicon;
          this.characterData.vocalsP2 = a.vocals_file ?? "";
        },
        updateHeads: function () {},
        loadCharacterFile: function (a) {
          this.characterFailed = false;
          a = "characters/" + a + ".json";
          if (a == null) {
            a = "";
          }
          a = "assets/shared/" + a;
          if (!W.exists(a)) {
            a = "characters/" + ad.DEFAULT_CHARACTER + ".json";
            if (a == null) {
              a = "";
            }
            a = "assets/shared/" + a;
            this.characterFailed = true;
          }
          a = W.getText(a);
          return JSON.parse(a);
        },
        updateNoteUI: function () {
          if (this.curSelectedNote != null) {
            if (this.curSelectedNote[2] != null) {
              this.stepperSusLength.set_value(this.curSelectedNote[2]);
              if (this.curSelectedNote[3] != null) {
                this.currentType = this.curNoteTypes.indexOf(this.curSelectedNote[3]);
                if (this.currentType <= 0) {
                  this.noteTypeDropDown.set_selectedLabel("");
                } else {
                  this.noteTypeDropDown.set_selectedLabel(this.currentType + ". " + H.string(this.curSelectedNote[3]));
                }
              }
            } else {
              this.eventDropDown.set_selectedLabel(this.curSelectedNote[1][this.curEventSelected][0]);
              var a = H.parseInt(this.eventDropDown.get_selectedId());
              if (a > 0 && a < this.eventStuff.length) {
                this.descText.set_text(this.eventStuff[a][1]);
              }
              this.value1InputText.set_text(this.curSelectedNote[1][this.curEventSelected][1]);
              this.value2InputText.set_text(this.curSelectedNote[1][this.curEventSelected][2]);
            }
            this.strumTimeInputText.set_text("" + H.string(this.curSelectedNote[0]));
          }
        },
        updateGrid: function () {
          this.curRenderedNotes.forEachAlive(function (a) {
            a.destroy();
          });
          this.curRenderedNotes.clear();
          this.curRenderedSustains.forEachAlive(function (a) {
            a.destroy();
          });
          this.curRenderedSustains.clear();
          this.curRenderedNoteType.forEachAlive(function (a) {
            a.destroy();
          });
          this.curRenderedNoteType.clear();
          this.nextRenderedNotes.forEachAlive(function (a) {
            a.destroy();
          });
          this.nextRenderedNotes.clear();
          this.nextRenderedSustains.forEachAlive(function (a) {
            a.destroy();
          });
          this.nextRenderedSustains.clear();
          if (this._song.notes[ia.curSec].changeBPM && this._song.notes[ia.curSec].bpm > 0) {
            N.set_bpm(this._song.notes[ia.curSec].bpm);
          } else {
            var a = this._song.bpm;
            for (var b = 0, c = ia.curSec; b < c;) {
              var d = b++;
              if (this._song.notes[d].changeBPM) {
                a = this._song.notes[d].bpm;
              }
            }
            N.set_bpm(a);
          }
          var e = this.getSectionBeats();
          b = 0;
          for (c = this._song.notes[ia.curSec].sectionNotes; b < c.length;) {
            d = c[b];
            ++b;
            a = this.setupNoteData(d, false);
            this.curRenderedNotes.add(a);
            if (a.sustainLength > 0) {
              this.curRenderedSustains.add(this.setupSusNote(a, e));
            }
            if (d[3] != null && a.noteType != null && a.noteType.length > 0) {
              var f = this.curNoteTypes.indexOf(d[3]);
              var g = "" + f;
              if (f < 0) {
                g = "?";
              }
              f = new ek(0, 0, 100, g, 24);
              f.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", Ta.OUTLINE_FAST, -16777216);
              f.xAdd = -32;
              f.yAdd = 6;
              f.set_borderSize(1);
              this.curRenderedNoteType.add(f);
              f.sprTracker = a;
            }
            a.mustPress = this._song.notes[ia.curSec].mustHitSection;
            if (d[1] > 3) {
              a.mustPress = !a.mustPress;
            }
          }
          e = this.sectionStartTime();
          g = this.sectionStartTime(1);
          b = 0;
          for (c = this._song.events; b < c.length;) {
            d = c[b];
            ++b;
            if (g > d[0] && d[0] >= e) {
              a = this.setupNoteData(d, false);
              this.curRenderedNotes.add(a);
              d = "Event: " + a.eventName + " (" + Math.floor(a.strumTime) + " ms)\nValue 1: " + a.eventVal1 + "\nValue 2: " + a.eventVal2;
              if (a.eventLength > 1) {
                d = a.eventLength + " Events:\n" + a.eventName;
              }
              f = new ek(0, 0, 400, d, 12);
              f.setFormat("assets/fonts/vcr.ttf", 12, -1, "right", Ta.OUTLINE_FAST, -16777216);
              f.xAdd = -410;
              f.set_borderSize(1);
              if (a.eventLength > 1) {
                f.yAdd += 8;
              }
              this.curRenderedNoteType.add(f);
              f.sprTracker = a;
            }
          }
          e = this.getSectionBeats(1);
          if (ia.curSec < this._song.notes.length - 1) {
            b = 0;
            c = this._song.notes[ia.curSec + 1].sectionNotes;
            while (b < c.length) {
              d = c[b];
              ++b;
              a = this.setupNoteData(d, true);
              a.set_alpha(0.6);
              this.nextRenderedNotes.add(a);
              if (a.sustainLength > 0) {
                this.nextRenderedSustains.add(this.setupSusNote(a, e));
              }
            }
          }
          e = this.sectionStartTime(1);
          g = this.sectionStartTime(2);
          b = 0;
          for (c = this._song.events; b < c.length;) {
            d = c[b];
            ++b;
            if (g > d[0] && d[0] >= e) {
              a = this.setupNoteData(d, true);
              a.set_alpha(0.6);
              this.nextRenderedNotes.add(a);
            }
          }
        },
        setupNoteData: function (a, b) {
          var c = a[1];
          var d = a[0];
          var e = a[2];
          var f = new Pa(d, c % 4, null, null, true);
          if (e != null) {
            if (typeof a[3] != "string") {
              a[3] = this.curNoteTypes[a[3]];
            }
            if (a.length > 3 && (a[3] == null || a[3].length < 1)) {
              M.remove(a, a[3]);
            }
            f.sustainLength = e;
            f.set_noteType(a[3]);
          } else {
            f.loadGraphic(y.image("eventArrow"));
            f.eventName = this.getEventName(a[1]);
            f.eventLength = a[1].length;
            if (a[1].length < 2) {
              f.eventVal1 = a[1][0][1];
              f.eventVal2 = a[1][0][2];
            }
            c = f.noteData = -1;
          }
          f.setGraphicSize(ia.GRID_SIZE, ia.GRID_SIZE);
          f.updateHitbox();
          f.set_x(Math.floor(c * ia.GRID_SIZE) + ia.GRID_SIZE);
          if (b && this._song.notes[ia.curSec].mustHitSection != this._song.notes[ia.curSec + 1].mustHitSection) {
            if (c > 3) {
              f.set_x(f.x - ia.GRID_SIZE * 4);
            } else if (e != null) {
              f.set_x(f.x + ia.GRID_SIZE * 4);
            }
          }
          a = this.getSectionBeats(b ? 1 : 0);
          f.set_y(this.getYfromStrumNotes(d - this.sectionStartTime(), a));
          if (f.y < -150) {
            f.set_y(-150);
          }
          return f;
        },
        getEventName: function (a) {
          var b = "";
          var c = false;
          for (var d = 0, e = a.length; d < e;) {
            var f = d++;
            if (c) {
              b += ", ";
            }
            b += a[f][0];
            c = true;
          }
          return b;
        },
        setupSusNote: function (a, b) {
          b = Math.floor($b.remapToRange(a.sustainLength, 0, N.stepCrochet * 16, 0, ia.GRID_SIZE * 16 * this.zoomList[this.curZoom]) + ia.GRID_SIZE * this.zoomList[this.curZoom] - ia.GRID_SIZE / 2);
          var c = ia.GRID_SIZE * this.zoomList[this.curZoom] / 2 + ia.GRID_SIZE / 2 | 0;
          if (b < c) {
            b = c;
          }
          if (b < 1) {
            b = 1;
          }
          return new G(a.x + ia.GRID_SIZE * 0.5 - 4, a.y + ia.GRID_SIZE / 2).makeGraphic(8, b);
        },
        addSection: function (a) {
          if (a == null) {
            a = 4;
          }
          this._song.notes.push({
            sectionBeats: a,
            bpm: this._song.bpm,
            changeBPM: false,
            mustHitSection: true,
            gfSection: false,
            sectionNotes: [],
            altAnim: false
          });
        },
        selectNote: function (a) {
          var b = a.noteData;
          if (b > -1) {
            if (a.mustPress != this._song.notes[ia.curSec].mustHitSection) {
              b += 4;
            }
            for (var c = 0, d = this._song.notes[ia.curSec].sectionNotes; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != this.curSelectedNote && e.length > 2 && e[0] == a.strumTime && e[1] == b) {
                this.curSelectedNote = e;
                break;
              }
            }
          } else {
            c = 0;
            d = this._song.events;
            while (c < d.length) {
              e = d[c];
              ++c;
              if (e != this.curSelectedNote && e[0] == a.strumTime) {
                this.curSelectedNote = e;
                this.curEventSelected = (this.curSelectedNote[1].length | 0) - 1;
                break;
              }
            }
          }
          this.changeEventSelected();
          this.updateGrid();
          this.updateNoteUI();
        },
        deleteNote: function (a) {
          var b = a.noteData;
          if (b > -1 && a.mustPress != this._song.notes[ia.curSec].mustHitSection) {
            b += 4;
          }
          if (a.noteData > -1) {
            for (var c = 0, d = this._song.notes[ia.curSec].sectionNotes; c < d.length;) {
              var e = d[c];
              ++c;
              if (e[0] == a.strumTime && e[1] == b) {
                if (e == this.curSelectedNote) {
                  this.curSelectedNote = null;
                }
                M.remove(this._song.notes[ia.curSec].sectionNotes, e);
                break;
              }
            }
          } else {
            c = 0;
            d = this._song.events;
            while (c < d.length) {
              e = d[c];
              ++c;
              if (e[0] == a.strumTime) {
                if (e == this.curSelectedNote) {
                  this.curSelectedNote = null;
                  this.changeEventSelected();
                }
                M.remove(this._song.events, e);
                break;
              }
            }
          }
          this.updateGrid();
        },
        doANoteThing: function (a, b, c) {
          var d = this;
          var e = false;
          if (this.strumLineNotes.members[b].overlaps(this.curRenderedNotes)) {
            this.curRenderedNotes.forEachAlive(function (a) {
              var c = d.strumLineNotes.members[b].x + 1;
              var f = d.strumLine.y + 1;
              if (f == null) {
                f = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (c == null) {
                c = 0;
              }
              c = fa.pool.get().set(c, f);
              c._inPool = false;
              if (a.overlapsPoint(c) && a.noteData == b % 4) {
                if (!e) {
                  d.deleteNote(a);
                }
                e = true;
              }
            });
          }
          if (!e) {
            this.addNote(a, b, c);
          }
        },
        clearSong: function () {
          for (var a = 0, b = this._song.notes.length; a < b;) {
            var c = a++;
            this._song.notes[c].sectionNotes = [];
          }
          this.updateGrid();
        },
        addNote: function (a, b, c) {
          var d = this.getStrumTime(this.dummyArrow.y * (this.getSectionBeats() / 4), false) + this.sectionStartTime();
          var e = Math.floor((g.mouse.x - ia.GRID_SIZE) / ia.GRID_SIZE);
          var f = this.currentType;
          if (a != null) {
            d = a;
          }
          if (b != null) {
            e = b;
          }
          if (c != null) {
            f = c;
          }
          if (e > -1) {
            this._song.notes[ia.curSec].sectionNotes.push([d, e, 0, this.curNoteTypes[f]]);
            this.curSelectedNote = this._song.notes[ia.curSec].sectionNotes[this._song.notes[ia.curSec].sectionNotes.length - 1];
          } else {
            a = this.eventStuff[H.parseInt(this.eventDropDown.get_selectedId())][0];
            this._song.events.push([d, [[a, this.value1InputText.text, this.value2InputText.text]]]);
            this.curSelectedNote = this._song.events[this._song.events.length - 1];
            this.curEventSelected = 0;
          }
          this.changeEventSelected();
          a = g.keys.pressed;
          if (a.keyManager.checkStatusUnsafe(17, a.status) && e > -1) {
            this._song.notes[ia.curSec].sectionNotes.push([d, (e + 4) % 8, 0, this.curNoteTypes[f]]);
          }
          this.strumTimeInputText.set_text("" + H.string(this.curSelectedNote[0]));
          this.updateGrid();
          this.updateNoteUI();
        },
        redo: function () {},
        undo: function () {
          this.undos.pop();
        },
        getStrumTime: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this.zoomList[this.curZoom];
          if (!b) {
            c = 1;
          }
          return $b.remapToRange(a, this.gridBG.y, this.gridBG.y + this.gridBG.get_height() * c, 0, N.stepCrochet * 16);
        },
        getYfromStrum: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this.zoomList[this.curZoom];
          if (!b) {
            c = 1;
          }
          return $b.remapToRange(a, 0, N.stepCrochet * 16, this.gridBG.y, this.gridBG.y + this.gridBG.get_height() * c);
        },
        getYfromStrumNotes: function (a, b) {
          return a / (b * 4 * N.stepCrochet) * b * 4 * this.zoomList[this.curZoom] * ia.GRID_SIZE + this.gridBG.y;
        },
        getNotes: function () {
          var a = [];
          for (var b = 0, c = this._song.notes; b < c.length;) {
            var d = c[b];
            ++b;
            a.push(d.sectionNotes);
          }
          return a;
        },
        loadJson: function (a) {
          var b = this;
          try {
            var c = null;
            if (mb.list[c == null ? z.storyDifficulty : c] != mb.defaultDifficulty) {
              c = null;
              if (mb.list[c == null ? z.storyDifficulty : c] == null) {
                z.SONG = Pd.loadFromJson(a.toLowerCase(), a.toLowerCase());
              } else {
                c = null;
                z.SONG = Pd.loadFromJson(a.toLowerCase() + "-" + mb.list[c == null ? z.storyDifficulty : c], a.toLowerCase());
              }
            } else {
              z.SONG = Pd.loadFromJson(a.toLowerCase(), a.toLowerCase());
            }
            U.resetState();
          } catch (d) {
            a = K.caught(d);
            yb.trace("ERROR! " + H.string(a), {
              fileName: "source/states/editors/ChartingState.hx",
              lineNumber: 3385,
              className: "states.editors.ChartingState",
              methodName: "loadJson"
            });
            a = a.toString();
            if (w.startsWith(a, "[file_contents,assets/data/")) {
              a = "Missing file: " + a.substring(27, a.length - 1);
            }
            if (this.missingText == null) {
              this.missingText = new Q(50, 0, g.width - 100, "", 24);
              this.missingText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", Ta.OUTLINE, -16777216);
              c = this.missingText.scrollFactor;
              c.set_x(0);
              c.set_y(0);
              this.add(this.missingText);
            } else {
              this.missingTextTimer.cancel();
            }
            this.missingText.set_text("ERROR WHILE LOADING CHART:\n" + a);
            a = this.missingText;
            c = 16;
            if (c == null) {
              c = 17;
            }
            if (c == 1 || c == 17) {
              a.set_x((g.width - a.get_width()) / 2);
            }
            if (c == 16 || c == 17) {
              a.set_y((g.height - a.get_height()) / 2);
            }
            this.missingTextTimer = new Fc().start(5, function (a) {
              b.remove(b.missingText);
              b.missingText.destroy();
            });
            g.sound.play(y.sound("cancelMenu"));
          }
        },
        autosaveSong: function () {
          g.save.data.autosave = JSON.stringify({
            song: this._song
          });
          g.save.flush();
        },
        clearEvents: function () {
          this._song.events = [];
          this.updateGrid();
        },
        saveLevel: function () {
          if (this._song.events != null && this._song.events.length > 1) {
            this._song.events.sort(l(this, this.sortByTime));
          }
          var a = JSON.stringify({
            song: this._song
          }, null, "\t");
          if (a != null && a.length > 0) {
            this._file = new Je();
            this._file.addEventListener("complete", l(this, this.onSaveComplete));
            this._file.addEventListener("cancel", l(this, this.onSaveCancel));
            this._file.addEventListener("ioError", l(this, this.onSaveError));
            var b = this._file;
            a = w.trim(a);
            var c = this._song.song;
            var d = new sa("[~&\\\\;:<>#]", "");
            var e = new sa("[.,'\"%?!]", "");
            c = d.split(w.replace(c, " ", "-")).join("-");
            b.save(a, e.split(c).join("").toLowerCase() + ".json");
          }
        },
        sortByTime: function (a, b) {
          a = a[0];
          b = b[0];
          var c = 0;
          if (a < b) {
            c = -1;
          } else if (a > b) {
            c = 1;
          }
          return c;
        },
        saveEvents: function () {
          if (this._song.events != null && this._song.events.length > 1) {
            this._song.events.sort(l(this, this.sortByTime));
          }
          var a = JSON.stringify({
            song: {
              events: this._song.events
            }
          }, null, "\t");
          if (a != null && a.length > 0) {
            this._file = new Je();
            this._file.addEventListener("complete", l(this, this.onSaveComplete));
            this._file.addEventListener("cancel", l(this, this.onSaveCancel));
            this._file.addEventListener("ioError", l(this, this.onSaveError));
            this._file.save(w.trim(a), "events.json");
          }
        },
        onSaveComplete: function (a) {
          this._file.removeEventListener("complete", l(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", l(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Successfully saved LEVEL DATA.", Ba.NOTICE);
        },
        onSaveCancel: function (a) {
          this._file.removeEventListener("complete", l(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", l(this, this.onSaveError));
          this._file = null;
        },
        onSaveError: function (a) {
          this._file.removeEventListener("complete", l(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", l(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Problem saving Level data", Ba.ERROR, true);
        },
        getSectionBeats: function (a) {
          if (a == null) {
            a = ia.curSec;
          }
          var b = null;
          if (this._song.notes[a] != null) {
            b = this._song.notes[a].sectionBeats;
          }
          return b ?? 4;
        },
        __class__: ia
      });
      function ek(a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 8;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.xAdd = this.yAdd = 0;
        Q.call(this, a, b, c, d, e, f);
      }
      h["states.editors.AttachedFlxText"] = ek;
      ek.__name__ = "states.editors.AttachedFlxText";
      ek.__super__ = Q;
      ek.prototype = q(Q.prototype, {
        update: function (a) {
          Q.prototype.update.call(this, a);
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x + this.xAdd, this.sprTracker.y + this.yAdd);
            this.set_angle(this.sprTracker.angle);
            this.set_alpha(this.sprTracker.alpha);
          }
        },
        __class__: ek
      });
      function Sf(a, b) {
        this._file = null;
        this.transitioning = false;
        this.lastTab = "Character";
        this.currentGhosts = 0;
        this.blockPressWhileTypingOn = [];
        this.animationArray = [];
        this.curAnim = 0;
        this.daText = null;
        U.call(this, a, b);
      }
      h["states.editors.DialogueCharacterEditorState"] = Sf;
      Sf.__name__ = "states.editors.DialogueCharacterEditorState";
      Sf.__super__ = U;
      Sf.prototype = q(U.prototype, {
        create: function () {
          this.persistentUpdate = this.persistentDraw = true;
          this.camGame = this.initPsychCamera();
          var a = xb._new();
          var b = 0;
          var c = b * 0 + 0.5;
          var d = 1;
          if (d == null) {
            d = 1;
          }
          b = Math.round((b + 0.5) * 255);
          a = a & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16;
          b = Math.round(c * 255);
          a = a & -65281 | (b > 255 ? 255 : b < 0 ? 0 : b) << 8;
          b = 128;
          a = a & -256 | (b > 255 ? 255 : b < 0 ? 0 : b);
          b = Math.round(d * 255);
          this.camGame.bgColor = a & 16777215 | (b > 255 ? 255 : b < 0 ? 0 : b) << 24;
          this.camHUD = new Vb();
          this.camHUD.bgColor &= 16777215;
          this.camHUD.bgColor |= 0;
          g.cameras.add(this.camHUD, false);
          this.mainGroup = new db();
          this.mainGroup.set_cameras([this.camGame]);
          this.hudGroup = new db();
          this.hudGroup.set_cameras([this.camGame]);
          this.add(this.mainGroup);
          this.add(this.hudGroup);
          this.character = new md();
          a = this.character.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.mainGroup.add(this.character);
          this.ghostLoop = new md();
          this.ghostLoop.set_alpha(0);
          this.ghostLoop.set_color(-65536);
          this.ghostLoop.isGhost = true;
          this.ghostLoop.jsonFile = this.character.jsonFile;
          this.ghostLoop.set_cameras([this.camGame]);
          this.add(this.ghostLoop);
          this.ghostIdle = new md();
          this.ghostIdle.set_alpha(0);
          this.ghostIdle.set_color(-16776961);
          this.ghostIdle.isGhost = true;
          this.ghostIdle.jsonFile = this.character.jsonFile;
          this.ghostIdle.set_cameras([this.camGame]);
          this.add(this.ghostIdle);
          this.box = new G(70, 370);
          this.box.set_antialiasing(C.data.antialiasing);
          a = this.box;
          c = y.image("speech_bubble", null, true);
          a.set_frames(fb.fromSparrow(c, y.getPath("images/speech_bubble.xml", null, null)));
          a = this.box.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.box.animation.addByPrefix("normal", "speech bubble normal", 24);
          this.box.animation.addByPrefix("center", "speech bubble middle", 24);
          this.box.animation.play("normal", true);
          this.box.setGraphicSize(this.box.get_width() * 0.9 | 0);
          this.box.updateHitbox();
          this.hudGroup.add(this.box);
          this.tipText = new Q(10, 10, g.width - 20, Sf.TIP_TEXT_MAIN, 8);
          this.tipText.setFormat("assets/fonts/vcr.ttf", 16, -1, "right", Ta.OUTLINE, -16777216);
          this.tipText.set_cameras([this.camHUD]);
          a = this.tipText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.tipText);
          this.offsetLoopText = new Q(10, 10, 0, "", 32);
          this.offsetLoopText.setFormat("assets/fonts/vcr.ttf", 32, -1, "left", Ta.OUTLINE, -16777216);
          this.offsetLoopText.set_cameras([this.camHUD]);
          a = this.offsetLoopText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.offsetLoopText);
          this.offsetLoopText.set_visible(false);
          this.offsetIdleText = new Q(10, 46, 0, "", 32);
          this.offsetIdleText.setFormat("assets/fonts/vcr.ttf", 32, -1, "left", Ta.OUTLINE, -16777216);
          this.offsetIdleText.set_cameras([this.camHUD]);
          a = this.offsetIdleText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.offsetIdleText);
          this.offsetIdleText.set_visible(false);
          this.animText = new Q(10, 22, g.width - 20, "", 8);
          this.animText.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", Ta.OUTLINE, -16777216);
          a = this.animText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.animText.set_cameras([this.camHUD]);
          this.add(this.animText);
          this.reloadCharacter();
          this.updateTextBox();
          this.daText = new Th(dc.DEFAULT_TEXT_X, dc.DEFAULT_TEXT_Y, "", 0.05, false);
          this.daText.setScale(0.7);
          this.daText.set_text(Sf.DEFAULT_TEXT);
          this.hudGroup.add(this.daText);
          this.addEditorBox();
          g.mouse.set_visible(true);
          this.updateCharTypeBox();
          U.prototype.create.call(this);
        },
        addEditorBox: function () {
          var a = [{
            name: "Character Type",
            label: "Character Type"
          }];
          this.UI_typebox = new ne(null, null, a, null, true);
          this.UI_typebox.resize(120, 180);
          this.UI_typebox.set_x(900);
          this.UI_typebox.set_y(g.height - this.UI_typebox.get_height() - 50);
          a = this.UI_typebox.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.UI_typebox.set_camera(this.camHUD);
          this.addTypeUI();
          this.add(this.UI_typebox);
          a = [{
            name: "Animations",
            label: "Animations"
          }, {
            name: "Character",
            label: "Character"
          }];
          this.UI_mainbox = new ne(null, null, a, null, true);
          this.UI_mainbox.resize(200, 250);
          this.UI_mainbox.set_x(this.UI_typebox.x + this.UI_typebox.get_width());
          this.UI_mainbox.set_y(g.height - this.UI_mainbox.get_height() - 50);
          a = this.UI_mainbox.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.UI_mainbox.set_camera(this.camHUD);
          this.addAnimationsUI();
          this.addCharacterUI();
          this.add(this.UI_mainbox);
          this.UI_mainbox.set_selected_tab_id("Character");
          this.lastTab = this.UI_mainbox.get_selected_tab_id();
        },
        addTypeUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_typebox);
          b.name = "Character Type";
          this.leftCheckbox = new zb(10, 20, null, null, "Left", 100);
          this.leftCheckbox.callback = function () {
            a.character.jsonFile.dialogue_pos = "left";
            a.updateCharTypeBox();
          };
          this.centerCheckbox = new zb(this.leftCheckbox.x, this.leftCheckbox.y + 40, null, null, "Center", 100);
          this.centerCheckbox.callback = function () {
            a.character.jsonFile.dialogue_pos = "center";
            a.updateCharTypeBox();
          };
          this.rightCheckbox = new zb(this.centerCheckbox.x, this.centerCheckbox.y + 40, null, null, "Right", 100);
          this.rightCheckbox.callback = function () {
            a.character.jsonFile.dialogue_pos = "right";
            a.updateCharTypeBox();
          };
          b.add(this.leftCheckbox);
          b.add(this.centerCheckbox);
          b.add(this.rightCheckbox);
          this.UI_typebox.addGroup(b);
        },
        addAnimationsUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_mainbox);
          b.name = "Animations";
          this.animationDropDown = new vc(10, 30, vc.makeStrIdLabelArray([""], true), function (b) {
            b = a.animationArray[H.parseInt(b)];
            if (Object.prototype.hasOwnProperty.call(a.character.dialogueAnimations.h, b)) {
              a.ghostLoop.playAnim(b);
              a.ghostIdle.playAnim(b, true);
              a.curSelectedAnim = b;
              b = a.character.dialogueAnimations.h[a.curSelectedAnim];
              a.offsetLoopText.set_text("Loop: " + H.string(b.loop_offsets));
              a.offsetIdleText.set_text("Idle: " + H.string(b.idle_offsets));
              a.animationInputText.set_text(b.anim);
              a.loopInputText.set_text(b.loop_name);
              a.idleInputText.set_text(b.idle_name);
            }
          });
          this.animationInputText = new gb(15, 85, 80, "", 8);
          this.blockPressWhileTypingOn.push(this.animationInputText);
          this.loopInputText = new gb(this.animationInputText.x, this.animationInputText.y + 35, 150, "", 8);
          this.blockPressWhileTypingOn.push(this.loopInputText);
          this.idleInputText = new gb(this.loopInputText.x, this.loopInputText.y + 40, 150, "", 8);
          this.blockPressWhileTypingOn.push(this.idleInputText);
          var c = new ub(10, this.idleInputText.y + 30, "Add/Update", function () {
            var b = w.trim(a.animationInputText.text);
            if (Object.prototype.hasOwnProperty.call(a.character.dialogueAnimations.h, b)) {
              for (var c = 0, d = a.character.jsonFile.animations.length; c < d;) {
                var g = c++;
                g = a.character.jsonFile.animations[g];
                if (w.trim(g.anim) == b) {
                  g.loop_name = a.loopInputText.text;
                  g.idle_name = a.idleInputText.text;
                  break;
                }
              }
              a.character.reloadAnimations();
              a.ghostLoop.reloadAnimations();
              a.ghostIdle.reloadAnimations();
              if (a.curSelectedAnim == b) {
                a.ghostLoop.playAnim(b);
                a.ghostIdle.playAnim(b, true);
              }
            } else {
              a.character.jsonFile.animations.push({
                anim: b,
                loop_name: a.loopInputText.text,
                loop_offsets: [0, 0],
                idle_name: a.idleInputText.text,
                idle_offsets: [0, 0]
              });
              b = a.animationDropDown.get_selectedLabel();
              a.character.reloadAnimations();
              a.ghostLoop.reloadAnimations();
              a.ghostIdle.reloadAnimations();
              a.reloadAnimationsDropDown();
              a.animationDropDown.set_selectedLabel(b);
            }
          });
          var d = new ub(100, c.y, "Remove", function () {
            for (var b = 0, c = a.character.jsonFile.animations.length; b < c;) {
              var d = b++;
              d = a.character.jsonFile.animations[d];
              if (d != null && w.trim(d.anim) == w.trim(a.animationInputText.text)) {
                b = a.animationDropDown.get_selectedLabel();
                M.remove(a.character.jsonFile.animations, d);
                a.character.reloadAnimations();
                a.ghostLoop.reloadAnimations();
                a.ghostIdle.reloadAnimations();
                a.reloadAnimationsDropDown();
                if (a.character.jsonFile.animations.length > 0 && b == w.trim(d.anim)) {
                  c = a.character.jsonFile.animations[0].anim;
                  a.ghostLoop.playAnim(c);
                  a.ghostIdle.playAnim(c, true);
                }
                a.animationDropDown.set_selectedLabel(b);
                a.animationInputText.set_text("");
                a.loopInputText.set_text("");
                a.idleInputText.set_text("");
                break;
              }
            }
          });
          b.add(new Q(this.animationDropDown.x, this.animationDropDown.y - 18, 0, "Animations:"));
          b.add(new Q(this.animationInputText.x, this.animationInputText.y - 18, 0, "Animation name:"));
          b.add(new Q(this.loopInputText.x, this.loopInputText.y - 18, 0, "Loop name on .XML file:"));
          b.add(new Q(this.idleInputText.x, this.idleInputText.y - 18, 0, "Idle/Finished name on .XML file:"));
          b.add(this.animationInputText);
          b.add(this.loopInputText);
          b.add(this.idleInputText);
          b.add(c);
          b.add(d);
          b.add(this.animationDropDown);
          this.UI_mainbox.addGroup(b);
          this.reloadAnimationsDropDown();
        },
        reloadAnimationsDropDown: function () {
          this.animationArray = [];
          for (var a = 0, b = this.character.jsonFile.animations; a < b.length;) {
            var c = b[a];
            ++a;
            this.animationArray.push(c.anim);
          }
          if (this.animationArray.length < 1) {
            this.animationArray = [""];
          }
          this.animationDropDown.setData(vc.makeStrIdLabelArray(this.animationArray, true));
        },
        addCharacterUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_mainbox);
          b.name = "Character";
          this.imageInputText = new gb(10, 30, 80, this.character.jsonFile.image, 8);
          this.blockPressWhileTypingOn.push(this.imageInputText);
          this.xStepper = new Sb(this.imageInputText.x, this.imageInputText.y + 50, 10, this.character.jsonFile.position[0], -2000, 2000, 0);
          this.yStepper = new Sb(this.imageInputText.x + 80, this.xStepper.y, 10, this.character.jsonFile.position[1], -2000, 2000, 0);
          this.scaleStepper = new Sb(this.imageInputText.x, this.xStepper.y + 50, 0.05, this.character.jsonFile.scale, 0.1, 10, 2);
          var c = new zb(this.scaleStepper.x + 80, this.scaleStepper.y, null, null, "No Antialiasing", 100);
          c.set_checked(this.character.jsonFile.no_antialiasing == 1);
          c.callback = function () {
            a.character.jsonFile.no_antialiasing = c.checked;
            a.character.set_antialiasing(!a.character.jsonFile.no_antialiasing);
          };
          b.add(new Q(10, this.imageInputText.y - 18, 0, "Image file name:"));
          b.add(new Q(10, this.xStepper.y - 18, 0, "Position Offset:"));
          b.add(new Q(10, this.scaleStepper.y - 18, 0, "Scale:"));
          b.add(this.imageInputText);
          b.add(this.xStepper);
          b.add(this.yStepper);
          b.add(this.scaleStepper);
          b.add(c);
          var d = new ub(10, this.scaleStepper.y + 60, "Reload Image", function () {
            a.reloadCharacter();
          });
          var e = new ub(d.x + 100, d.y, "Load Character", function () {
            a.loadCharacter();
          });
          var f = new ub(e.x, d.y - 25, "Save Character", function () {
            a.saveCharacter();
          });
          b.add(d);
          b.add(e);
          b.add(f);
          this.UI_mainbox.addGroup(b);
        },
        updateCharTypeBox: function () {
          this.leftCheckbox.set_checked(false);
          this.centerCheckbox.set_checked(false);
          this.rightCheckbox.set_checked(false);
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              this.centerCheckbox.set_checked(true);
              break;
            case "left":
              this.leftCheckbox.set_checked(true);
              break;
            case "right":
              this.rightCheckbox.set_checked(true);
          }
          this.reloadCharacter();
          this.updateTextBox();
        },
        reloadCharacter: function () {
          for (var a = [this.character, this.ghostLoop, this.ghostIdle], b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            var d = "dialogue/" + this.character.jsonFile.image;
            var e = y.image(d, null, true);
            c.set_frames(fb.fromSparrow(e, y.getPath("images/" + d + ".xml", null, null)));
            c.jsonFile = this.character.jsonFile;
            c.reloadAnimations();
            c.setGraphicSize(c.get_width() * md.DEFAULT_SCALE * this.character.jsonFile.scale | 0);
            c.updateHitbox();
          }
          this.character.set_x(dc.LEFT_CHAR_X);
          this.character.set_y(dc.DEFAULT_CHAR_Y);
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              this.character.set_x(g.width / 2);
              a = this.character;
              a.set_x(a.x - this.character.get_width() / 2);
              break;
            case "right":
              this.character.set_x(g.width - this.character.get_width() + dc.RIGHT_CHAR_X);
          }
          a = this.character;
          a.set_x(a.x + (this.character.jsonFile.position[0] + this.mainGroup.x));
          a = this.character;
          a.set_y(a.y + (this.character.jsonFile.position[1] + this.mainGroup.y));
          this.character.playAnim(this.character.jsonFile.animations[0].anim);
          if (this.character.jsonFile.animations.length > 0) {
            this.curSelectedAnim = this.character.jsonFile.animations[0].anim;
            a = this.character.dialogueAnimations.h[this.curSelectedAnim];
            this.ghostLoop.playAnim(a.anim);
            this.ghostIdle.playAnim(a.anim, true);
            this.offsetLoopText.set_text("Loop: " + H.string(a.loop_offsets));
            this.offsetIdleText.set_text("Idle: " + H.string(a.idle_offsets));
          }
          this.curAnim = 0;
          this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
        },
        updateTextBox: function () {
          this.box.set_flipX(false);
          var a = "normal";
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              a = "center";
              break;
            case "left":
              this.box.set_flipX(true);
          }
          this.box.animation.play(a, true);
          dc.updateBoxOffsets(this.box);
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b == this.imageInputText) {
            this.character.jsonFile.image = this.imageInputText.text;
          } else if (a == "change_numeric_stepper" && b instanceof Sb) {
            if (b == this.scaleStepper) {
              this.character.jsonFile.scale = this.scaleStepper.value;
              this.reloadCharacter();
            } else if (b == this.xStepper) {
              this.character.jsonFile.position[0] = this.xStepper.value;
              this.reloadCharacter();
            } else if (b == this.yStepper) {
              this.character.jsonFile.position[1] = this.yStepper.value;
              this.reloadCharacter();
            }
          }
        },
        update: function (a) {
          if (!this.transitioning) {
            if (this.character.animation._curAnim != null) {
              if (this.daText.finishedText) {
                if (this.character.animationIsLoop()) {
                  this.character.playAnim(this.character.animation._curAnim.name, true);
                }
              } else if (this.character.animation._curAnim.finished) {
                this.character.animation._curAnim.restart();
              }
            }
            var b = false;
            for (var c = 0, d = this.blockPressWhileTypingOn; c < d.length;) {
              var e = d[c];
              ++c;
              if (e.hasFocus) {
                C.toggleVolumeKeys(false);
                b = true;
                c = g.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                  e.set_hasFocus(false);
                }
                break;
              }
            }
            if (!b && !this.animationDropDown.dropPanel.visible) {
              C.toggleVolumeKeys(true);
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(32, c.status) && this.UI_mainbox.get_selected_tab_id() == "Character") {
                this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim);
                this.daText.resetDialogue();
                this.updateTextBox();
              }
              e = 1;
              var f = 300;
              c = g.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(16, c.status)) {
                f = 1200;
                e = 10;
              }
              b = [1, 1, -1, -1];
              c = g.keys.pressed;
              d = c.keyManager.checkStatusUnsafe(74, c.status);
              c = g.keys.pressed;
              var k = c.keyManager.checkStatusUnsafe(73, c.status);
              c = g.keys.pressed;
              var h = c.keyManager.checkStatusUnsafe(76, c.status);
              c = g.keys.pressed;
              k = [d, k, h, c.keyManager.checkStatusUnsafe(75, c.status)];
              c = 0;
              for (d = k.length; c < d;) {
                h = c++;
                if (k[h]) {
                  if (h % 2 == 1) {
                    var n = this.mainGroup;
                    n.set_y(n.y + f * a * b[h]);
                  } else {
                    n = this.mainGroup;
                    n.set_x(n.x + f * a * b[h]);
                  }
                }
              }
              if (this.UI_mainbox.get_selected_tab_id() == "Animations" && this.curSelectedAnim != null && Object.prototype.hasOwnProperty.call(this.character.dialogueAnimations.h, this.curSelectedAnim)) {
                k = false;
                f = this.character.dialogueAnimations.h[this.curSelectedAnim];
                c = g.keys.justPressed;
                d = c.keyManager.checkStatusUnsafe(65, c.status);
                c = g.keys.justPressed;
                h = c.keyManager.checkStatusUnsafe(87, c.status);
                c = g.keys.justPressed;
                n = c.keyManager.checkStatusUnsafe(68, c.status);
                c = g.keys.justPressed;
                n = [d, h, n, c.keyManager.checkStatusUnsafe(83, c.status)];
                c = g.keys.justPressed;
                d = c.keyManager.checkStatusUnsafe(37, c.status);
                c = g.keys.justPressed;
                h = c.keyManager.checkStatusUnsafe(38, c.status);
                c = g.keys.justPressed;
                var p = c.keyManager.checkStatusUnsafe(39, c.status);
                c = g.keys.justPressed;
                p = [d, h, p, c.keyManager.checkStatusUnsafe(40, c.status)];
                c = 0;
                for (d = n.length; c < d;) {
                  h = c++;
                  if (n[h]) {
                    if (h % 2 == 1) {
                      f.loop_offsets[1] += e * b[h];
                    } else {
                      f.loop_offsets[0] += e * b[h];
                    }
                    k = true;
                  }
                }
                c = 0;
                for (d = p.length; c < d;) {
                  h = c++;
                  if (p[h]) {
                    if (h % 2 == 1) {
                      f.idle_offsets[1] += e * b[h];
                    } else {
                      f.idle_offsets[0] += e * b[h];
                    }
                    k = true;
                  }
                }
                if (k) {
                  this.offsetLoopText.set_text("Loop: " + H.string(f.loop_offsets));
                  this.offsetIdleText.set_text("Idle: " + H.string(f.idle_offsets));
                  b = this.ghostLoop.offset;
                  e = f.loop_offsets[0];
                  c = f.loop_offsets[1];
                  if (c == null) {
                    c = 0;
                  }
                  if (e == null) {
                    e = 0;
                  }
                  b.set_x(e);
                  b.set_y(c);
                  b = this.ghostIdle.offset;
                  e = f.idle_offsets[0];
                  c = f.idle_offsets[1];
                  if (c == null) {
                    c = 0;
                  }
                  if (e == null) {
                    e = 0;
                  }
                  b.set_x(e);
                  b.set_y(c);
                }
              }
              c = g.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(81, c.status) && this.camGame.zoom > 0.1) {
                n = this.camGame;
                n.set_zoom(n.zoom - a * this.camGame.zoom);
                if (this.camGame.zoom < 0.1) {
                  this.camGame.set_zoom(0.1);
                }
              }
              c = g.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(69, c.status) && this.camGame.zoom < 1) {
                n = this.camGame;
                n.set_zoom(n.zoom + a * this.camGame.zoom);
                if (this.camGame.zoom > 1) {
                  this.camGame.set_zoom(1);
                }
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(72, c.status)) {
                if (this.UI_mainbox.get_selected_tab_id() == "Animations") {
                  this.currentGhosts++;
                  if (this.currentGhosts > 2) {
                    this.currentGhosts = 0;
                  }
                  this.ghostLoop.set_visible(this.currentGhosts != 1);
                  this.ghostIdle.set_visible(this.currentGhosts != 2);
                  this.ghostLoop.set_alpha(this.currentGhosts == 2 ? 1 : 0.6);
                  this.ghostIdle.set_alpha(this.currentGhosts == 1 ? 1 : 0.6);
                } else {
                  this.hudGroup.set_visible(!this.hudGroup.visible);
                }
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(82, c.status)) {
                this.camGame.set_zoom(1);
                this.mainGroup.setPosition(0, 0);
                this.hudGroup.set_visible(true);
              }
              if (this.UI_mainbox.get_selected_tab_id() != this.lastTab) {
                if (this.UI_mainbox.get_selected_tab_id() == "Animations") {
                  this.hudGroup.set_alpha(0);
                  this.mainGroup.set_alpha(0);
                  this.ghostLoop.set_alpha(0.6);
                  this.ghostIdle.set_alpha(0.6);
                  this.tipText.set_text(Sf.TIP_TEXT_OFFSET);
                  this.offsetLoopText.set_visible(true);
                  this.offsetIdleText.set_visible(true);
                  this.animText.set_visible(false);
                  this.currentGhosts = 0;
                } else {
                  this.hudGroup.set_alpha(1);
                  this.mainGroup.set_alpha(1);
                  this.ghostLoop.set_alpha(0);
                  this.ghostIdle.set_alpha(0);
                  this.tipText.set_text(Sf.TIP_TEXT_MAIN);
                  this.offsetLoopText.set_visible(false);
                  this.offsetIdleText.set_visible(false);
                  this.animText.set_visible(true);
                  this.updateTextBox();
                  this.daText.resetDialogue();
                  if (this.curAnim < 0) {
                    this.curAnim = this.character.jsonFile.animations.length - 1;
                  } else if (this.curAnim >= this.character.jsonFile.animations.length) {
                    this.curAnim = 0;
                  }
                  this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim);
                  this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
                }
                this.lastTab = this.UI_mainbox.get_selected_tab_id();
                this.currentGhosts = 0;
              }
              if (this.UI_mainbox.get_selected_tab_id() == "Character" && (b = [1, -1], c = g.keys.justPressed, e = c.keyManager.checkStatusUnsafe(87, c.status), c = g.keys.justPressed, e = [e, c.keyManager.checkStatusUnsafe(83, c.status)], e.indexOf(true) != -1)) {
                c = 0;
                for (d = e.length; c < d;) {
                  h = c++;
                  if (e[h] && this.character.jsonFile.animations.length > 0) {
                    this.curAnim -= b[h];
                    if (this.curAnim < 0) {
                      this.curAnim = this.character.jsonFile.animations.length - 1;
                    } else if (this.curAnim >= this.character.jsonFile.animations.length) {
                      this.curAnim = 0;
                    }
                    f = this.character.jsonFile.animations[this.curAnim].anim;
                    if (Object.prototype.hasOwnProperty.call(this.character.dialogueAnimations.h, f)) {
                      this.character.playAnim(f, this.daText.finishedText);
                    }
                  }
                }
                this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(27, c.status)) {
                U.switchState(new Rf());
                b = g.sound;
                e = y.returnSound("music", "freakyMenu", null);
                b.playMusic(e, 1);
                this.transitioning = true;
              }
              this.ghostLoop.setPosition(this.character.x, this.character.y);
              this.ghostIdle.setPosition(this.character.x, this.character.y);
              this.hudGroup.set_x(this.mainGroup.x);
              this.hudGroup.set_y(this.mainGroup.y);
            }
          }
          U.prototype.update.call(this, a);
        },
        loadCharacter: function () {
          var a = new Gi("JSON", "json");
          this._file = new Je();
          this._file.addEventListener("complete", l(this, this.onLoadComplete));
          this._file.addEventListener("cancel", l(this, this.onLoadCancel));
          this._file.addEventListener("ioError", l(this, this.onLoadError));
          this._file.browse([a]);
        },
        onLoadComplete: function (a) {
          this._file.removeEventListener("complete", l(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", l(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", l(this, this.onLoadError));
          yb.trace("File couldn't be loaded! You aren't on Desktop, are you?", {
            fileName: "source/states/editors/DialogueCharacterEditorState.hx",
            lineNumber: 709,
            className: "states.editors.DialogueCharacterEditorState",
            methodName: "onLoadComplete"
          });
        },
        onLoadCancel: function (a) {
          this._file.removeEventListener("complete", l(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", l(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", l(this, this.onLoadError));
          this._file = null;
          yb.trace("Cancelled file loading.", {
            fileName: "source/states/editors/DialogueCharacterEditorState.hx",
            lineNumber: 722,
            className: "states.editors.DialogueCharacterEditorState",
            methodName: "onLoadCancel"
          });
        },
        onLoadError: function (a) {
          this._file.removeEventListener("complete", l(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", l(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", l(this, this.onLoadError));
          this._file = null;
          yb.trace("Problem loading file", {
            fileName: "source/states/editors/DialogueCharacterEditorState.hx",
            lineNumber: 734,
            className: "states.editors.DialogueCharacterEditorState",
            methodName: "onLoadError"
          });
        },
        saveCharacter: function () {
          var a = JSON.stringify(this.character.jsonFile, null, "\t");
          if (a.length > 0) {
            var b = w.trim(this.imageInputText.text).split("_");
            b = w.replace(b[0].toLowerCase(), " ", "");
            this._file = new Je();
            this._file.addEventListener("complete", l(this, this.onSaveComplete));
            this._file.addEventListener("cancel", l(this, this.onSaveCancel));
            this._file.addEventListener("ioError", l(this, this.onSaveError));
            this._file.save(a, b + ".json");
          }
        },
        onSaveComplete: function (a) {
          this._file.removeEventListener("complete", l(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", l(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Successfully saved file.", Ba.NOTICE);
        },
        onSaveCancel: function (a) {
          this._file.removeEventListener("complete", l(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", l(this, this.onSaveError));
          this._file = null;
        },
        onSaveError: function (a) {
          this._file.removeEventListener("complete", l(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", l(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Problem saving file", Ba.ERROR, true);
        },
        ClipboardAdd: function (a) {
          if (a == null) {
            a = "";
          }
          if (w.endsWith(a.toLowerCase(), "v")) {
            a = a.substring(0, a.length - 1);
          }
          return a + w.replace(kc.get_text(), "\n", "");
        },
        __class__: Sf
      });
      function Tf(a, b) {
        this._file = null;
        this.transitioning = false;
        this.blockPressWhileTypingOn = [];
        this.curSelected = this.curAnim = 0;
        this.dialogueFile = null;
        U.call(this, a, b);
      }
      h["states.editors.DialogueEditorState"] = Tf;
      Tf.__name__ = "states.editors.DialogueEditorState";
      Tf.__super__ = U;
      Tf.prototype = q(U.prototype, {
        create: function () {
          this.persistentUpdate = this.persistentDraw = true;
          var a = xb._new();
          var b = 0;
          var c = b * 0 + 0.5;
          var d = 1;
          if (d == null) {
            d = 1;
          }
          b = Math.round((b + 0.5) * 255);
          a = a & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16;
          b = Math.round(c * 255);
          a = a & -65281 | (b > 255 ? 255 : b < 0 ? 0 : b) << 8;
          b = 128;
          a = a & -256 | (b > 255 ? 255 : b < 0 ? 0 : b);
          b = Math.round(d * 255);
          g.camera.bgColor = a & 16777215 | (b > 255 ? 255 : b < 0 ? 0 : b) << 24;
          this.defaultLine = {
            portrait: md.DEFAULT_CHARACTER,
            expression: "talk",
            text: Tf.DEFAULT_TEXT,
            boxState: Tf.DEFAULT_BUBBLETYPE,
            speed: 0.05,
            sound: ""
          };
          this.dialogueFile = {
            dialogue: [this.copyDefaultLine()]
          };
          this.character = new md();
          a = this.character.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.character);
          this.box = new G(70, 370);
          this.box.set_antialiasing(C.data.antialiasing);
          a = this.box;
          c = y.image("speech_bubble", null, true);
          a.set_frames(fb.fromSparrow(c, y.getPath("images/speech_bubble.xml", null, null)));
          a = this.box.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.box.animation.addByPrefix("normal", "speech bubble normal", 24);
          this.box.animation.addByPrefix("angry", "AHH speech bubble", 24);
          this.box.animation.addByPrefix("center", "speech bubble middle", 24);
          this.box.animation.addByPrefix("center-angry", "AHH Speech Bubble middle", 24);
          this.box.animation.play("normal", true);
          this.box.setGraphicSize(this.box.get_width() * 0.9 | 0);
          this.box.updateHitbox();
          this.add(this.box);
          this.addEditorBox();
          g.mouse.set_visible(true);
          c = new Q(10, 10, g.width - 20, "Press O to remove the current dialogue line, Press P to add another line after the current one.", 8);
          c.setFormat("assets/fonts/vcr.ttf", 16, -1, "left", Ta.OUTLINE, -16777216);
          a = c.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(c);
          this.selectedText = new Q(10, 32, g.width - 20, "", 8);
          this.selectedText.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", Ta.OUTLINE, -16777216);
          a = this.selectedText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.selectedText);
          this.animText = new Q(10, 62, g.width - 20, "", 8);
          this.animText.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", Ta.OUTLINE, -16777216);
          a = this.animText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.animText);
          this.daText = new Th(dc.DEFAULT_TEXT_X, dc.DEFAULT_TEXT_Y, Tf.DEFAULT_TEXT);
          this.daText.setScale(0.7);
          this.add(this.daText);
          this.changeText();
          U.prototype.create.call(this);
        },
        addEditorBox: function () {
          this.UI_box = new ne(null, null, [{
            name: "Dialogue Line",
            label: "Dialogue Line"
          }], null, true);
          this.UI_box.resize(250, 210);
          this.UI_box.set_x(g.width - this.UI_box.get_width() - 10);
          this.UI_box.set_y(10);
          var a = this.UI_box.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.UI_box.set_alpha(0.8);
          this.addDialogueLineUI();
          this.add(this.UI_box);
        },
        addDialogueLineUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Dialogue Line";
          this.characterInputText = new gb(10, 20, 80, md.DEFAULT_CHARACTER, 8);
          this.blockPressWhileTypingOn.push(this.characterInputText);
          this.speedStepper = new Sb(10, this.characterInputText.y + 40, 0.005, 0.05, 0, 0.5, 3);
          this.angryCheckbox = new zb(this.speedStepper.x + 120, this.speedStepper.y, null, null, "Angry Textbox", 200);
          this.angryCheckbox.callback = function () {
            a.updateTextBox();
            a.dialogueFile.dialogue[a.curSelected].boxState = a.angryCheckbox.checked ? "angry" : "normal";
          };
          this.soundInputText = new gb(10, this.speedStepper.y + 40, 150, "", 8);
          this.blockPressWhileTypingOn.push(this.soundInputText);
          this.lineInputText = new gb(10, this.soundInputText.y + 35, 200, Tf.DEFAULT_TEXT, 8);
          this.blockPressWhileTypingOn.push(this.lineInputText);
          var c = new ub(20, this.lineInputText.y + 25, "Load Dialogue", function () {
            a.loadDialogue();
          });
          var d = new ub(c.x + 120, c.y, "Save Dialogue", function () {
            a.saveDialogue();
          });
          b.add(new Q(10, this.speedStepper.y - 18, 0, "Interval/Speed (ms):"));
          b.add(new Q(10, this.characterInputText.y - 18, 0, "Character:"));
          b.add(new Q(10, this.soundInputText.y - 18, 0, "Sound file name:"));
          b.add(new Q(10, this.lineInputText.y - 18, 0, "Text:"));
          b.add(this.characterInputText);
          b.add(this.angryCheckbox);
          b.add(this.speedStepper);
          b.add(this.soundInputText);
          b.add(this.lineInputText);
          b.add(c);
          b.add(d);
          this.UI_box.addGroup(b);
        },
        copyDefaultLine: function () {
          return {
            portrait: this.defaultLine.portrait,
            expression: this.defaultLine.expression,
            text: this.defaultLine.text,
            boxState: this.defaultLine.boxState,
            speed: this.defaultLine.speed,
            sound: ""
          };
        },
        updateTextBox: function () {
          this.box.set_flipX(false);
          var a = this.angryCheckbox.checked;
          var b = a ? "angry" : "normal";
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              b = a ? "center-angry" : "center";
              break;
            case "left":
              this.box.set_flipX(true);
          }
          this.box.animation.play(b, true);
          dc.updateBoxOffsets(this.box);
        },
        reloadCharacter: function () {
          var a = this.character;
          var b = "dialogue/" + this.character.jsonFile.image;
          var c = y.image(b, null, true);
          a.set_frames(fb.fromSparrow(c, y.getPath("images/" + b + ".xml", null, null)));
          this.character.jsonFile = this.character.jsonFile;
          this.character.reloadAnimations();
          this.character.setGraphicSize(this.character.get_width() * md.DEFAULT_SCALE * this.character.jsonFile.scale | 0);
          this.character.updateHitbox();
          this.character.set_x(dc.LEFT_CHAR_X);
          this.character.set_y(dc.DEFAULT_CHAR_Y);
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              this.character.set_x(g.width / 2);
              a = this.character;
              a.set_x(a.x - this.character.get_width() / 2);
              break;
            case "right":
              this.character.set_x(g.width - this.character.get_width() + dc.RIGHT_CHAR_X);
          }
          a = this.character;
          a.set_x(a.x + this.character.jsonFile.position[0]);
          a = this.character;
          a.set_y(a.y + this.character.jsonFile.position[1]);
          this.character.playAnim();
          this.characterAnimSpeed();
          if (this.character.animation._curAnim != null && this.character.jsonFile.animations != null) {
            this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
          } else {
            this.animText.set_text("ERROR! NO ANIMATIONS FOUND");
          }
        },
        reloadText: function (a) {
          var b = this.lineInputText.text;
          if (b == null || b.length < 1) {
            b = " ";
          }
          this.daText.set_text(b);
          if (a) {
            this.daText.finishText();
          } else if (this.daText.delay > 0) {
            if (this.character.jsonFile.animations.length > this.curAnim && this.character.jsonFile.animations[this.curAnim] != null) {
              this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim);
            }
            this.characterAnimSpeed();
          }
          this.daText.set_y(dc.DEFAULT_TEXT_Y);
          if (this.daText.rows > 2) {
            a = this.daText;
            a.set_y(a.y - dc.LONG_TEXT_ADD);
          }
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b instanceof gb) {
            if (b == this.characterInputText) {
              this.character.reloadCharacterJson(this.characterInputText.text);
              this.reloadCharacter();
              if (this.character.jsonFile.animations.length > 0) {
                this.curAnim = 0;
                if (this.character.jsonFile.animations.length > this.curAnim && this.character.jsonFile.animations[this.curAnim] != null) {
                  this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim, this.daText.finishedText);
                  this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
                } else {
                  this.animText.set_text("ERROR! NO ANIMATIONS FOUND");
                }
                this.characterAnimSpeed();
              }
              this.dialogueFile.dialogue[this.curSelected].portrait = this.characterInputText.text;
              this.reloadText(false);
              this.updateTextBox();
            } else if (b == this.lineInputText) {
              this.dialogueFile.dialogue[this.curSelected].text = this.lineInputText.text;
              this.daText.set_text(this.lineInputText.text);
              if (this.daText.text == null) {
                this.daText.set_text("");
              }
              this.reloadText(true);
            } else if (b == this.soundInputText) {
              this.daText.finishText();
              this.dialogueFile.dialogue[this.curSelected].sound = this.soundInputText.text;
              this.daText.sound = this.soundInputText.text;
              if (this.daText.sound == null) {
                this.daText.sound = "";
              }
            }
          } else if (a == "change_numeric_stepper" && b == this.speedStepper) {
            this.dialogueFile.dialogue[this.curSelected].speed = this.speedStepper.value;
            if (isNaN(this.dialogueFile.dialogue[this.curSelected].speed) || this.dialogueFile.dialogue[this.curSelected].speed == null || this.dialogueFile.dialogue[this.curSelected].speed < 0.001) {
              this.dialogueFile.dialogue[this.curSelected].speed = 0;
            }
            this.daText.delay = this.dialogueFile.dialogue[this.curSelected].speed;
            this.reloadText(false);
          }
        },
        update: function (a) {
          if (!this.transitioning) {
            if (this.character.animation._curAnim != null) {
              if (this.daText.finishedText) {
                if (this.character.animationIsLoop() && this.character.animation._curAnim.finished) {
                  this.character.playAnim(this.character.animation._curAnim.name, true);
                }
              } else if (this.character.animation._curAnim.finished) {
                this.character.animation._curAnim.restart();
              }
            }
            var b = false;
            for (var c = 0, d = this.blockPressWhileTypingOn; c < d.length;) {
              var e = d[c];
              ++c;
              if (e.hasFocus) {
                C.toggleVolumeKeys(false);
                b = true;
                c = g.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                  if (e == this.lineInputText) {
                    e.set_text(e.text + "\\n");
                    e.set_caretIndex(e.caretIndex + 2);
                  } else {
                    e.set_hasFocus(false);
                  }
                }
                break;
              }
            }
            if (!b) {
              C.toggleVolumeKeys(true);
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(32, c.status)) {
                this.reloadText(false);
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(27, c.status)) {
                U.switchState(new Rf());
                b = g.sound;
                c = y.returnSound("music", "freakyMenu", null);
                b.playMusic(c, 1);
                this.transitioning = true;
              }
              b = [1, -1];
              c = g.keys.justPressed;
              d = c.keyManager.checkStatusUnsafe(87, c.status);
              c = g.keys.justPressed;
              e = [d, c.keyManager.checkStatusUnsafe(83, c.status)];
              c = g.keys.justPressed;
              d = c.keyManager.checkStatusUnsafe(68, c.status);
              c = g.keys.justPressed;
              var f = [d, c.keyManager.checkStatusUnsafe(65, c.status)];
              c = 0;
              for (d = e.length; c < d;) {
                var k = c++;
                if (e[k] && this.character.jsonFile.animations.length > 0) {
                  this.curAnim -= b[k];
                  if (this.curAnim < 0) {
                    this.curAnim = this.character.jsonFile.animations.length - 1;
                  } else if (this.curAnim >= this.character.jsonFile.animations.length) {
                    this.curAnim = 0;
                  }
                  var h = this.character.jsonFile.animations[this.curAnim].anim;
                  if (Object.prototype.hasOwnProperty.call(this.character.dialogueAnimations.h, h)) {
                    this.character.playAnim(h, this.daText.finishedText);
                    this.dialogueFile.dialogue[this.curSelected].expression = h;
                  }
                  this.animText.set_text("Animation: " + h + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
                }
                if (f[k]) {
                  this.changeText(b[k]);
                }
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(79, c.status)) {
                M.remove(this.dialogueFile.dialogue, this.dialogueFile.dialogue[this.curSelected]);
                if (this.dialogueFile.dialogue.length < 1) {
                  b = this.copyDefaultLine();
                  this.dialogueFile.dialogue = [b];
                }
                this.changeText();
              } else {
                c = g.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(80, c.status)) {
                  c = this.dialogueFile.dialogue;
                  b = this.curSelected + 1;
                  d = this.copyDefaultLine();
                  c.splice(b, 0, d);
                  this.changeText(1);
                }
              }
            }
          }
          U.prototype.update.call(this, a);
        },
        changeText: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.dialogueFile.dialogue.length - 1;
          } else if (this.curSelected >= this.dialogueFile.dialogue.length) {
            this.curSelected = 0;
          }
          a = this.dialogueFile.dialogue[this.curSelected];
          this.characterInputText.set_text(a.portrait);
          this.lineInputText.set_text(a.text);
          this.angryCheckbox.set_checked(a.boxState == "angry");
          this.speedStepper.set_value(a.speed);
          if (a.sound == null) {
            a.sound = "";
          }
          this.soundInputText.set_text(a.sound);
          this.daText.delay = this.speedStepper.value;
          this.daText.sound = this.soundInputText.text;
          if (this.daText.sound != null && w.trim(this.daText.sound) == "") {
            this.daText.sound = "dialogue";
          }
          this.curAnim = 0;
          this.character.reloadCharacterJson(this.characterInputText.text);
          this.reloadCharacter();
          this.reloadText(false);
          this.updateTextBox();
          var b = this.character.jsonFile.animations.length;
          if (b > 0) {
            for (var c = 0; c < b;) {
              var d = c++;
              var e = this.character.jsonFile.animations[d];
              if (e != null && e.anim == a.expression) {
                this.curAnim = d;
                break;
              }
            }
            this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim, this.daText.finishedText);
            this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + b + ") - Press W or S to scroll");
          } else {
            this.animText.set_text("ERROR! NO ANIMATIONS FOUND");
          }
          this.characterAnimSpeed();
          this.selectedText.set_text("Line: (" + (this.curSelected + 1) + " / " + this.dialogueFile.dialogue.length + ") - Press A or D to scroll");
        },
        characterAnimSpeed: function () {
          if (this.character.animation._curAnim != null) {
            var a = 24 - (this.speedStepper.value - 0.05) / 5 * 480;
            if (a < 12) {
              a = 12;
            } else if (a > 48) {
              a = 48;
            }
            this.character.animation._curAnim.set_frameRate(a);
          }
        },
        loadDialogue: function () {
          var a = new Gi("JSON", "json");
          this._file = new Je();
          this._file.addEventListener("complete", l(this, this.onLoadComplete));
          this._file.addEventListener("cancel", l(this, this.onLoadCancel));
          this._file.addEventListener("ioError", l(this, this.onLoadError));
          this._file.browse([a]);
        },
        onLoadComplete: function (a) {
          this._file.removeEventListener("complete", l(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", l(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", l(this, this.onLoadError));
          yb.trace("File couldn't be loaded! You aren't on Desktop, are you?", {
            fileName: "source/states/editors/DialogueEditorState.hx",
            lineNumber: 469,
            className: "states.editors.DialogueEditorState",
            methodName: "onLoadComplete"
          });
        },
        onLoadCancel: function (a) {
          this._file.removeEventListener("complete", l(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", l(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", l(this, this.onLoadError));
          this._file = null;
          yb.trace("Cancelled file loading.", {
            fileName: "source/states/editors/DialogueEditorState.hx",
            lineNumber: 482,
            className: "states.editors.DialogueEditorState",
            methodName: "onLoadCancel"
          });
        },
        onLoadError: function (a) {
          this._file.removeEventListener("complete", l(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", l(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", l(this, this.onLoadError));
          this._file = null;
          yb.trace("Problem loading file", {
            fileName: "source/states/editors/DialogueEditorState.hx",
            lineNumber: 494,
            className: "states.editors.DialogueEditorState",
            methodName: "onLoadError"
          });
        },
        saveDialogue: function () {
          var a = JSON.stringify(this.dialogueFile, null, "\t");
          if (a.length > 0) {
            this._file = new Je();
            this._file.addEventListener("complete", l(this, this.onSaveComplete));
            this._file.addEventListener("cancel", l(this, this.onSaveCancel));
            this._file.addEventListener("ioError", l(this, this.onSaveError));
            this._file.save(a, "dialogue.json");
          }
        },
        onSaveComplete: function (a) {
          this._file.removeEventListener("complete", l(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", l(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Successfully saved file.", Ba.NOTICE);
        },
        onSaveCancel: function (a) {
          this._file.removeEventListener("complete", l(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", l(this, this.onSaveError));
          this._file = null;
        },
        onSaveError: function (a) {
          this._file.removeEventListener("complete", l(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", l(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Problem saving file", Ba.ERROR, true);
        },
        __class__: Tf
      });
      function en(a) {
        this.lastStepHit = this.lastBeatHit = -1;
        this.guitarHeroSustains = false;
        this.startOffset = this.startPos = this.timerToStart = 0;
        this.showComboNum = this.showRating = true;
        this.showCombo = false;
        this.totalPlayed = this.totalNotesHit = 0;
        this.songSpeed = 1;
        this.songHits = this.songMisses = this.songLength = 0;
        this.keysArray = ["note_left", "note_down", "note_up", "note_right"];
        this.lastScore = [];
        this.combo = 0;
        this.ratingsData = jg.loadDefault();
        this.unspawnNotes = [];
        this.playbackRate = 1;
        this.startingSong = true;
        this.spawnTime = 2000;
        this.noteKillOffset = 350;
        this.finishTimer = null;
        bb.call(this);
        this.playbackRate = a;
        this.startPos = N.songPosition;
        N.safeZoneOffset = C.data.safeFrames / 60 * 1000 * a;
        N.songPosition -= this.startOffset;
        this.timerToStart = this.startOffset = N.crochet;
        if (g.sound.music != null) {
          a = g.sound.music;
          a.cleanup(a.autoDestroy, true);
        }
        this.cachePopUpScore();
        this.guitarHeroSustains = C.data.guitarHeroSustains;
        if (C.data.hitsoundVolume > 0) {
          y.sound("hitsound");
        }
        var b = new G().loadGraphic(y.image("menuDesat"));
        b.set_antialiasing(C.data.antialiasing);
        a = b.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        b.set_color(-15724528);
        b.set_alpha(0.9);
        this.add(b);
        this.strumLineNotes = new Ra();
        this.add(this.strumLineNotes);
        this.grpNoteSplashes = new Ra();
        this.add(this.grpNoteSplashes);
        a = new gc(100, 100);
        this.grpNoteSplashes.add(a);
        a.set_alpha(0.000001);
        this.opponentStrums = new Ra();
        this.playerStrums = new Ra();
        this.generateStaticArrows(0);
        this.generateStaticArrows(1);
        this.scoreTxt = new Q(10, g.height - 50, g.width - 20, "", 20);
        this.scoreTxt.setFormat("assets/fonts/vcr.ttf", 20, -1, "center", Ta.OUTLINE, -16777216);
        a = this.scoreTxt.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        this.scoreTxt.set_borderSize(1.25);
        this.scoreTxt.set_visible(!C.data.hideHud);
        this.add(this.scoreTxt);
        this.dataTxt = new Q(10, 580, g.width - 20, "Section: 0", 20);
        this.dataTxt.setFormat("assets/fonts/vcr.ttf", 20, -1, "center", Ta.OUTLINE, -16777216);
        a = this.dataTxt.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        this.dataTxt.set_borderSize(1.25);
        this.add(this.dataTxt);
        b = new Q(10, g.height - 24, 0, "Press ESC to Go Back to Chart Editor", 16);
        b.setFormat("assets/fonts/vcr.ttf", 16, -1, "left", Ta.OUTLINE, -16777216);
        b.set_borderSize(2);
        a = b.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        this.add(b);
        g.mouse.set_visible(false);
        this.generateSong(z.SONG.song);
        na.get_current().stage.addEventListener("keyDown", l(this, this.onKeyPress));
        na.get_current().stage.addEventListener("keyUp", l(this, this.onKeyRelease));
        this.RecalculateRating();
      }
      h["states.editors.EditorPlayState"] = en;
      en.__name__ = "states.editors.EditorPlayState";
      en.__super__ = bb;
      en.prototype = q(bb.prototype, {
        update: function (a) {
          var b = this;
          if (Ca.instance.get_BACK()) {
            var c = true;
          } else {
            c = g.keys.justPressed;
            c = c.keyManager.checkStatusUnsafe(27, c.status);
          }
          if (c) {
            this.endSong();
          } else {
            if (this.startingSong) {
              this.timerToStart -= a * 1000;
              N.songPosition = this.startPos - this.timerToStart;
              if (this.timerToStart < 0) {
                this.startSong();
              }
            } else {
              N.songPosition += a * 1000 * this.playbackRate;
            }
            if (this.unspawnNotes[0] != null) {
              c = this.spawnTime * this.playbackRate;
              if (this.songSpeed < 1) {
                c /= this.songSpeed;
              }
              if (this.unspawnNotes[0].multSpeed < 1) {
                c /= this.unspawnNotes[0].multSpeed;
              }
              while (this.unspawnNotes.length > 0 && this.unspawnNotes[0].strumTime - N.songPosition < c) {
                var d = this.unspawnNotes[0];
                this.notes.insert(0, d);
                d.spawned = true;
                d = this.unspawnNotes.indexOf(d);
                this.unspawnNotes.splice(d, 1);
              }
            }
            this.keysCheck();
            if (this.notes.length > 0) {
              var e = 60 / z.SONG.bpm * 1000;
              this.notes.forEachAlive(function (a) {
                var c = b.playerStrums;
                if (!a.mustPress) {
                  c = b.opponentStrums;
                }
                c = c.members[a.noteData];
                a.followStrumNote(c, e, b.songSpeed / b.playbackRate);
                if (!a.mustPress && !!a.wasGoodHit && !a.hitByOpponent && !a.ignoreNote) {
                  b.opponentNoteHit(a);
                }
                if (a.isSustainNote && c.sustainReduce) {
                  a.clipToStrumNote(c);
                }
                if (N.songPosition - a.strumTime > b.noteKillOffset) {
                  if (!!a.mustPress && !a.ignoreNote && (!!a.tooLate || !a.wasGoodHit)) {
                    b.noteMiss(a);
                  }
                  a.set_active(a.set_visible(false));
                  b.invalidateNote(a);
                }
              });
            }
            c = Oi.floorDecimal((N.songPosition - C.data.noteOffset) / 1000, 1);
            this.dataTxt.set_text("Time: " + c + " / " + this.songLength / 1000 + "\n\t\t\t\t\t\t\nSection: " + this.curSection + "\n\t\t\t\t\t\t\nBeat: " + this.curBeat + "\n\t\t\t\t\t\t\nStep: " + this.curStep);
          }
          bb.prototype.update.call(this, a);
        },
        stepHit: function () {
          if (z.SONG.needsVoices && g.sound.music._time >= -C.data.noteOffset) {
            var a = N.songPosition - N.offset;
            var b = this.playbackRate * 20;
            if (Math.abs(g.sound.music._time - a) > b || this.vocals._length > 0 && Math.abs(this.vocals._time - a) > b || this.opponentVocals._length > 0 && Math.abs(this.opponentVocals._time - a) > b) {
              this.resyncVocals();
            }
          }
          bb.prototype.stepHit.call(this);
          if (this.curStep != this.lastStepHit) {
            this.lastStepHit = this.curStep;
          }
        },
        beatHit: function () {
          if (!(this.lastBeatHit >= this.curBeat)) {
            var a = C.data.downScroll ? -1 : 1;
            if (a == null) {
              a = -1;
            }
            var b = bo.byY;
            var c = a;
            this.notes.members.sort(function (a, e) {
              return b(c, a, e);
            });
            bb.prototype.beatHit.call(this);
            this.lastBeatHit = this.curBeat;
          }
        },
        sectionHit: function () {
          if (z.SONG.notes[this.curSection] != null && z.SONG.notes[this.curSection].changeBPM) {
            N.set_bpm(z.SONG.notes[this.curSection].bpm);
          }
          bb.prototype.sectionHit.call(this);
        },
        destroy: function () {
          na.get_current().stage.removeEventListener("keyDown", l(this, this.onKeyPress));
          na.get_current().stage.removeEventListener("keyUp", l(this, this.onKeyRelease));
          g.mouse.set_visible(true);
          bb.prototype.destroy.call(this);
        },
        startSong: function () {
          this.startingSong = false;
          g.sound.playMusic(this.inst._sound, 1, false);
          g.sound.music.set_time(this.startPos);
          g.sound.music.set_pitch(this.playbackRate);
          g.sound.music.onComplete = l(this, this.finishSong);
          this.vocals.set_volume(1);
          this.vocals.set_time(this.startPos);
          this.vocals.play();
          this.opponentVocals.set_volume(1);
          this.opponentVocals.set_time(this.startPos);
          this.opponentVocals.play();
          this.songLength = g.sound.music._length;
        },
        generateSong: function (a) {
          this.songSpeed = z.SONG.speed;
          a = C.defaultData.gameplaySettings.h.scrolltype;
          switch (Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "scrolltype") ? C.data.gameplaySettings.h.scrolltype : a) {
            case "constant":
              a = C.defaultData.gameplaySettings.h.scrollspeed;
              this.songSpeed = Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "scrollspeed") ? C.data.gameplaySettings.h.scrollspeed : a;
              break;
            case "multiplicative":
              a = C.defaultData.gameplaySettings.h.scrollspeed;
              this.songSpeed = z.SONG.speed * (Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "scrollspeed") ? C.data.gameplaySettings.h.scrollspeed : a);
          }
          this.noteKillOffset = Math.max(N.stepCrochet, 350 / this.songSpeed * this.playbackRate);
          a = z.SONG;
          N.set_bpm(a.bpm);
          this.loadCharacterFile(z.SONG.player1);
          this.loadCharacterFile(z.SONG.player2);
          this.vocals = new ce();
          this.opponentVocals = new ce();
          try {
            if (a.needsVoices) {
              var b = "songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3";
              this.vocals.loadEmbedded(b ?? "songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3");
              var c = "songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3";
              if (c != null) {
                this.opponentVocals.loadEmbedded(c);
              }
            }
          } catch (Gp) {
            Na.lastError = Gp;
          }
          this.vocals.set_volume(0);
          this.opponentVocals.set_volume(0);
          this.vocals.set_pitch(this.playbackRate);
          this.opponentVocals.set_pitch(this.playbackRate);
          g.sound.list.add(this.vocals);
          g.sound.list.add(this.opponentVocals);
          this.inst = new ce().loadEmbedded("songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Inst.mp3");
          g.sound.list.add(this.inst);
          g.sound.music.set_volume(0);
          this.notes = new Ra();
          this.add(this.notes);
          b = a.notes;
          for (c = 0; c < b.length;) {
            a = b[c];
            ++c;
            for (var d = 0, e = a.sectionNotes; d < e.length;) {
              var f = e[d];
              ++d;
              var k = f[0];
              if (!(k < this.startPos)) {
                var h = f[1] % 4 | 0;
                var n = a.mustHitSection;
                if (f[1] > 3) {
                  n = !a.mustHitSection;
                }
                var p = this.unspawnNotes.length > 0 ? this.unspawnNotes[this.unspawnNotes.length - 1 | 0] : null;
                var l = new Pa(k, h, p, null, null, this);
                l.mustPress = n;
                l.sustainLength = f[2];
                l.set_noteType(f[3]);
                if (typeof f[3] != "string") {
                  l.set_noteType(ia.noteTypeList[f[3]]);
                }
                p = l.scrollFactor;
                p.set_x(0);
                p.set_y(0);
                this.unspawnNotes.push(l);
                p = Math.floor(l.sustainLength / N.stepCrochet);
                if (p > 0) {
                  f = 0;
                  for (var m = p + 1; f < m;) {
                    var t = f++;
                    p = this.unspawnNotes[this.unspawnNotes.length - 1 | 0];
                    t = new Pa(k + N.stepCrochet * t, h, p, true, null, this);
                    t.mustPress = n;
                    t.set_noteType(l.noteType);
                    var q = t.scrollFactor;
                    q.set_x(0);
                    q.set_y(0);
                    t.parent = l;
                    this.unspawnNotes.push(t);
                    l.tail.push(t);
                    t.correctionOffset = l.get_height() / 2;
                    if (z.get_isPixelStage()) {
                      if (p.isSustainNote) {
                        p.scale.set_y(p.scale.y / this.playbackRate);
                        p.updateHitbox();
                      }
                    } else {
                      if (p.isSustainNote) {
                        p.scale.set_y(Pa.SUSTAIN_SIZE / p.frameHeight * p.scale.y);
                        p.scale.set_y(p.scale.y / this.playbackRate);
                        p.updateHitbox();
                      }
                      if (C.data.downScroll) {
                        t.correctionOffset = 0;
                      }
                    }
                    if (t.mustPress) {
                      t.set_x(t.x + g.width / 2);
                    } else if (C.data.middleScroll) {
                      t.set_x(t.x + 310);
                      if (h > 1) {
                        t.set_x(t.x + (g.width / 2 + 25));
                      }
                    }
                  }
                }
                if (l.mustPress) {
                  l.set_x(l.x + g.width / 2);
                } else if (C.data.middleScroll) {
                  l.set_x(l.x + 310);
                  if (h > 1) {
                    l.set_x(l.x + (g.width / 2 + 25));
                  }
                }
              }
            }
          }
          this.unspawnNotes.sort(z.sortByTime);
        },
        generateStaticArrows: function (a) {
          var b = C.data.middleScroll ? z.STRUM_X_MIDDLESCROLL : z.STRUM_X;
          var c = C.data.downScroll ? g.height - 150 : 50;
          for (var d = 0; d < 4;) {
            var e = d++;
            var f = 1;
            if (a < 1) {
              if (C.data.opponentStrums) {
                if (C.data.middleScroll) {
                  f = 0.35;
                }
              } else {
                f = 0;
              }
            }
            var k = new yg(b, c, e, a);
            k.downScroll = C.data.downScroll;
            k.set_alpha(f);
            if (a == 1) {
              this.playerStrums.add(k);
            } else {
              if (C.data.middleScroll) {
                k.set_x(k.x + 310);
                if (e > 1) {
                  k.set_x(k.x + (g.width / 2 + 25));
                }
              }
              this.opponentStrums.add(k);
            }
            this.strumLineNotes.add(k);
            k.postAddedToGroup();
          }
        },
        finishSong: function () {
          var a = this;
          if (C.data.noteOffset <= 0) {
            this.endSong();
          } else {
            this.finishTimer = new Fc().start(C.data.noteOffset / 1000, function (b) {
              a.endSong();
            });
          }
        },
        endSong: function () {
          this.vocals.pause();
          this.vocals.destroy();
          this.opponentVocals.pause();
          this.opponentVocals.destroy();
          if (this.finishTimer != null) {
            this.finishTimer.cancel();
            this.finishTimer.destroy();
          }
          this.close();
        },
        cachePopUpScore: function () {
          for (var a = 0, b = this.ratingsData; a < b.length;) {
            var c = b[a];
            ++a;
            y.image(c.image);
          }
          y.image("num0");
          y.image("num1");
          y.image("num2");
          y.image("num3");
          y.image("num4");
          y.image("num5");
          y.image("num6");
          y.image("num7");
          y.image("num8");
          y.image("num9");
        },
        popUpScore: function (a) {
          var b = Math.abs(a.strumTime - N.songPosition + C.data.ratingOffset);
          this.vocals.set_volume(1);
          var c = H.string(this.combo);
          var d = new Q(0, 0, 0, c, 32);
          d.set_x((g.width - d.get_width()) / 2);
          d.set_y((g.height - d.get_height()) / 2);
          d.set_x(g.width * 0.35);
          var e = new G();
          b = N.judgeNote(this.ratingsData, b / this.playbackRate);
          this.totalNotesHit += b.ratingMod;
          a.ratingMod = b.ratingMod;
          if (!a.ratingDisabled) {
            b.hits++;
          }
          a.rating = b.name;
          if (b.noteSplash && !a.noteSplashData.disabled) {
            this.spawnNoteSplashOnNote(a);
          }
          if (!a.ratingDisabled) {
            this.songHits++;
            this.totalPlayed++;
            this.RecalculateRating(false);
          }
          e.loadGraphic(y.image("" + b.image));
          e.set_x((g.width - e.get_width()) / 2);
          e.set_y((g.height - e.get_height()) / 2);
          e.set_x(d.x - 40);
          e.set_y(e.y - 60);
          e.acceleration.set_y(this.playbackRate * 550 * this.playbackRate);
          e.velocity.set_y(e.velocity.y - g.random.int(140, 175) * this.playbackRate);
          e.velocity.set_x(e.velocity.x - g.random.int(0, 10) * this.playbackRate);
          e.set_visible(!C.data.hideHud && this.showRating);
          e.set_x(e.x + C.data.comboOffset[0]);
          e.set_y(e.y - C.data.comboOffset[1]);
          var f = new G().loadGraphic(y.image("combo"));
          f.set_x((g.width - f.get_width()) / 2);
          f.set_y((g.height - f.get_height()) / 2);
          f.set_x(d.x);
          f.acceleration.set_y(g.random.int(200, 300) * this.playbackRate * this.playbackRate);
          f.velocity.set_y(f.velocity.y - g.random.int(140, 160) * this.playbackRate);
          f.set_visible(!C.data.hideHud && this.showCombo);
          f.set_x(f.x + C.data.comboOffset[0]);
          f.set_y(f.y - C.data.comboOffset[1]);
          f.set_y(f.y + 60);
          f.velocity.set_x(f.velocity.x + g.random.int(1, 10) * this.playbackRate);
          this.insert(this.members.indexOf(this.strumLineNotes), e);
          if (!C.data.comboStacking) {
            if (this.lastRating != null) {
              this.lastRating.kill();
            }
            this.lastRating = e;
          }
          e.setGraphicSize(e.get_width() * 0.7 | 0);
          e.updateHitbox();
          f.setGraphicSize(f.get_width() * 0.7 | 0);
          f.updateHitbox();
          a = [];
          if (this.combo >= 1000) {
            a.push(Math.floor(this.combo / 1000) % 10);
          }
          a.push(Math.floor(this.combo / 100) % 10);
          a.push(Math.floor(this.combo / 10) % 10);
          a.push(this.combo % 10);
          c = b = 0;
          if (this.showCombo) {
            this.insert(this.members.indexOf(this.strumLineNotes), f);
          }
          if (!C.data.comboStacking) {
            if (this.lastCombo != null) {
              this.lastCombo.kill();
            }
            this.lastCombo = f;
          }
          if (this.lastScore != null) {
            while (this.lastScore.length > 0) {
              this.lastScore[0].kill();
              M.remove(this.lastScore, this.lastScore[0]);
            }
          }
          for (var k = 0; k < a.length;) {
            var h = a[k];
            ++k;
            h = [new G().loadGraphic(y.image("num" + (h | 0)))];
            h[0].set_x((g.width - h[0].get_width()) / 2);
            h[0].set_y((g.height - h[0].get_height()) / 2);
            h[0].set_x(d.x + b * 43 - 90 + C.data.comboOffset[2]);
            h[0].set_y(h[0].y + (80 - C.data.comboOffset[3]));
            if (!C.data.comboStacking) {
              this.lastScore.push(h[0]);
            }
            h[0].setGraphicSize(h[0].get_width() * 0.5 | 0);
            h[0].updateHitbox();
            h[0].acceleration.set_y(g.random.int(200, 300) * this.playbackRate * this.playbackRate);
            h[0].velocity.set_y(h[0].velocity.y - g.random.int(140, 160) * this.playbackRate);
            h[0].velocity.set_x(g.random.float(-5, 5) * this.playbackRate);
            h[0].set_visible(!C.data.hideHud);
            if (this.showComboNum) {
              this.insert(this.members.indexOf(this.strumLineNotes), h[0]);
            }
            var n = N.crochet * 0.002;
            ka.tween(h[0], {
              alpha: 0
            }, 0.2 / this.playbackRate, {
              onComplete: function (a) {
                return function (b) {
                  a[0].destroy();
                };
              }(h),
              startDelay: n / this.playbackRate
            });
            ++b;
            if (h[0].x > c) {
              c = h[0].x;
            }
          }
          f.set_x(c + 50);
          d.set_text(H.string(a));
          ka.tween(e, {
            alpha: 0
          }, 0.2 / this.playbackRate, {
            startDelay: N.crochet * 0.001 / this.playbackRate
          });
          ka.tween(f, {
            alpha: 0
          }, 0.2 / this.playbackRate, {
            onComplete: function (a) {
              d.destroy();
              f.destroy();
              e.destroy();
            },
            startDelay: N.crochet * 0.002 / this.playbackRate
          });
        },
        onKeyPress: function (a) {
          a = a.keyCode;
          var b = z.getKeyFromEvent(this.keysArray, a);
          if (!Ca.instance.controllerMode) {
            if (g.keys.checkStatus(a, 2)) {
              this.keyPressed(b);
            }
          }
        },
        keyPressed: function (a) {
          if (!(a < 0)) {
            var b = N.songPosition;
            if (N.songPosition >= 0) {
              N.songPosition = g.sound.music._time;
            }
            var c = [];
            for (var d = 0, e = this.notes.members; d < e.length;) {
              var f = e[d];
              ++d;
              if (f != null && !!f.canBeHit && !!f.mustPress && !f.tooLate && !f.wasGoodHit && !f.blockHit && !f.isSustainNote && f.noteData == a) {
                c.push(f);
              }
            }
            c.sort(z.sortHitNotes);
            if (c.length != 0) {
              d = c[0];
              if (c.length > 1) {
                c = c[1];
                if (c.noteData == d.noteData) {
                  if (Math.abs(c.strumTime - d.strumTime) < 1) {
                    this.invalidateNote(c);
                  } else if (c.strumTime < d.strumTime) {
                    d = c;
                  }
                }
              }
              this.goodNoteHit(d);
            }
            N.songPosition = b;
            a = this.playerStrums.members[a];
            if (a != null && a.animation._curAnim.name != "confirm") {
              a.playAnim("pressed");
              a.resetAnim = 0;
            }
          }
        },
        onKeyRelease: function (a) {
          a = z.getKeyFromEvent(this.keysArray, a.keyCode);
          if (!Ca.instance.controllerMode && a > -1) {
            this.keyReleased(a);
          }
        },
        keyReleased: function (a) {
          a = this.playerStrums.members[a];
          if (a != null) {
            a.playAnim("static");
            a.resetAnim = 0;
          }
        },
        keysCheck: function () {
          var a = [];
          var b = [];
          var c = [];
          for (var d = 0, e = this.keysArray; d < e.length;) {
            var f = e[d];
            ++d;
            a.push(Ca.instance.pressed(f));
            if (Ca.instance.controllerMode) {
              b.push(Ca.instance.justPressed(f));
              c.push(Ca.instance.justReleased(f));
            }
          }
          if (Ca.instance.controllerMode && b.indexOf(true) != -1) {
            d = 0;
            e = b.length;
            while (d < e) {
              f = d++;
              if (b[f]) {
                this.keyPressed(f);
              }
            }
          }
          if (this.notes.length > 0) {
            for (b = new wc(this.notes.members, null); b.hasNext();) {
              d = b.next();
              e = d != null && d.canBeHit && d.mustPress && !d.tooLate && !d.wasGoodHit && !d.blockHit;
              if (this.guitarHeroSustains) {
                e = e && d.parent != null && d.parent.wasGoodHit;
              }
              if (e && d.isSustainNote && a[d.noteData]) {
                this.goodNoteHit(d);
              }
            }
          }
          if (Ca.instance.controllerMode && c.indexOf(true) != -1) {
            d = 0;
            e = c.length;
            while (d < e) {
              f = d++;
              if (c[f]) {
                this.keyReleased(f);
              }
            }
          }
        },
        opponentNoteHit: function (a) {
          if (z.SONG.needsVoices && this.opponentVocals._length <= 0) {
            this.vocals.set_volume(1);
          }
          var b = this.opponentStrums.members[Math.abs(a.noteData) | 0];
          if (b != null) {
            b.playAnim("confirm", true);
            b.resetAnim = N.stepCrochet * 1.25 / 1000 / this.playbackRate;
          }
          a.hitByOpponent = true;
          if (!a.isSustainNote) {
            this.invalidateNote(a);
          }
        },
        goodNoteHit: function (a) {
          if (!a.wasGoodHit) {
            a.wasGoodHit = true;
            if (C.data.hitsoundVolume > 0 && !a.hitsoundDisabled) {
              g.sound.play(y.sound("hitsound"), C.data.hitsoundVolume);
            }
            if (a.hitCausesMiss) {
              this.noteMiss(a);
              if (!a.noteSplashData.disabled && !a.isSustainNote) {
                this.spawnNoteSplashOnNote(a);
              }
            } else {
              if (!a.isSustainNote) {
                this.combo++;
                if (this.combo > 9999) {
                  this.combo = 9999;
                }
                this.popUpScore(a);
              }
              var b = this.playerStrums.members[a.noteData];
              if (b != null) {
                b.playAnim("confirm", true);
              }
              this.vocals.set_volume(1);
            }
            if (!a.isSustainNote) {
              this.invalidateNote(a);
            }
          }
        },
        noteMiss: function (a) {
          var b = this;
          this.notes.forEachAlive(function (c) {
            if (a != c && a.mustPress && a.noteData == c.noteData && a.isSustainNote == c.isSustainNote && Math.abs(a.strumTime - c.strumTime) < 1) {
              b.invalidateNote(a);
            }
          });
          if (a != null && this.guitarHeroSustains && a.parent == null) {
            if (a.tail.length > 0) {
              a.set_alpha(0.35);
              for (var c = 0, d = a.tail; c < d.length;) {
                var e = d[c];
                ++c;
                e.set_alpha(a.alpha);
                e.missed = true;
                e.canBeHit = false;
                e.ignoreNote = true;
                e.tooLate = true;
              }
              a.missed = true;
              a.canBeHit = false;
            }
            if (a.missed) {
              return;
            }
          }
          if (a != null && this.guitarHeroSustains && a.parent != null && a.isSustainNote) {
            if (a.missed) {
              return;
            }
            d = a.parent;
            if (d.wasGoodHit && d.tail.length > 0) {
              c = 0;
              d = d.tail;
              while (c < d.length) {
                e = d[c];
                ++c;
                if (e != a) {
                  e.missed = true;
                  e.canBeHit = false;
                  e.ignoreNote = true;
                  e.tooLate = true;
                }
              }
            }
          }
          this.songMisses++;
          this.totalPlayed++;
          this.RecalculateRating(true);
          this.vocals.set_volume(0);
          this.combo = 0;
        },
        invalidateNote: function (a) {
          a.kill();
          this.notes.remove(a, true);
          a.destroy();
        },
        spawnNoteSplashOnNote: function (a) {
          if (a != null) {
            var b = this.playerStrums.members[a.noteData];
            if (b != null) {
              this.spawnNoteSplash(b.x, b.y, a.noteData, a);
            }
          }
        },
        spawnNoteSplash: function (a, b, c, d) {
          var e = this.grpNoteSplashes.recycle(gc);
          e.setupNoteSplash(a, b, c, d);
          this.grpNoteSplashes.add(e);
        },
        resyncVocals: function () {
          if (this.finishTimer == null) {
            g.sound.music.play();
            g.sound.music.set_pitch(this.playbackRate);
            N.songPosition = g.sound.music._time;
            if (N.songPosition <= this.vocals._length) {
              this.vocals.set_time(N.songPosition);
              this.vocals.set_pitch(this.playbackRate);
            }
            if (N.songPosition <= this.opponentVocals._length) {
              this.opponentVocals.set_time(N.songPosition);
              this.opponentVocals.set_pitch(this.playbackRate);
            }
            this.vocals.play();
            this.opponentVocals.play();
          }
        },
        RecalculateRating: function (a) {
          if (a == null) {
            a = false;
          }
          if (this.totalPlayed != 0) {
            this.ratingPercent = Math.min(1, Math.max(0, this.totalNotesHit / this.totalPlayed));
          }
          this.fullComboUpdate();
          this.updateScore(a);
        },
        updateScore: function (a) {
          a = "?";
          if (this.totalPlayed != 0) {
            a = "" + Oi.floorDecimal(this.ratingPercent * 100, 2) + "% - " + this.ratingFC;
          }
          this.scoreTxt.set_text("Hits: " + this.songHits + " | Misses: " + this.songMisses + " | Rating: " + a);
        },
        fullComboUpdate: function () {
          var a = this.ratingsData[0].hits;
          var b = this.ratingsData[1].hits;
          var c = this.ratingsData[2].hits;
          var d = this.ratingsData[3].hits;
          this.ratingFC = "Clear";
          if (this.songMisses < 1) {
            if (c > 0 || d > 0) {
              this.ratingFC = "FC";
            } else if (b > 0) {
              this.ratingFC = "GFC";
            } else if (a > 0) {
              this.ratingFC = "SFC";
            }
          } else if (this.songMisses < 10) {
            this.ratingFC = "SDCB";
          }
        },
        loadCharacterFile: function (a) {
          a = "characters/" + a + ".json";
          if (a == null) {
            a = "";
          }
          a = "assets/shared/" + a;
          if (!W.exists(a)) {
            a = "characters/" + ad.DEFAULT_CHARACTER + ".json";
            if (a == null) {
              a = "";
            }
            a = "assets/shared/" + a;
          }
          a = W.getText(a);
          return JSON.parse(a);
        },
        __class__: en
      });
      function Rf(a, b) {
        this.curSelected = this.curDirectory = 0;
        this.directories = [null];
        this.options = "Chart Editor;Character Editor;Week Editor;Menu Character Editor;Dialogue Editor;Dialogue Portrait Editor;Note Splash Debug".split(";");
        U.call(this, a, b);
      }
      h["states.editors.MasterEditorMenu"] = Rf;
      Rf.__name__ = "states.editors.MasterEditorMenu";
      Rf.__super__ = U;
      Rf.prototype = q(U.prototype, {
        create: function () {
          g.camera.bgColor = -16777216;
          var a = new G().loadGraphic(y.image("menuDesat"));
          var b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_color(-13290187);
          this.add(a);
          this.grpTexts = new Ra();
          this.add(this.grpTexts);
          a = 0;
          for (b = this.options.length; a < b;) {
            var c = a++;
            var d = new Jb(90, 320, this.options[c], true);
            d.isMenuItem = true;
            d.targetY = c;
            this.grpTexts.add(d);
            d.snapToPosition();
          }
          this.changeSelection();
          g.mouse.set_visible(false);
          U.prototype.create.call(this);
        },
        update: function (a) {
          if (this.get_controls().get_UI_UP_P()) {
            this.changeSelection(-1);
          }
          if (this.get_controls().get_UI_DOWN_P()) {
            this.changeSelection(1);
          }
          if (this.get_controls().get_BACK()) {
            U.switchState(new Kd());
          }
          if (this.get_controls().get_ACCEPT()) {
            switch (this.options[this.curSelected]) {
              case "Character Editor":
                U.switchState(qc.getNextState(new dn(ad.DEFAULT_CHARACTER, false), false));
                break;
              case "Chart Editor":
                var b = new ia();
                var c = false;
                if (c == null) {
                  c = false;
                }
                U.switchState(qc.getNextState(b, c));
                break;
              case "Dialogue Editor":
                b = new Tf();
                c = false;
                if (c == null) {
                  c = false;
                }
                U.switchState(qc.getNextState(b, c));
                break;
              case "Dialogue Portrait Editor":
                b = new Sf();
                c = false;
                if (c == null) {
                  c = false;
                }
                U.switchState(qc.getNextState(b, c));
                break;
              case "Menu Character Editor":
                U.switchState(new fn());
                break;
              case "Note Splash Debug":
                U.switchState(new hh());
                break;
              case "Week Editor":
                U.switchState(new Ia());
            }
            g.sound.music.set_volume(0);
            Va.destroyFreeplayVocals();
          }
          c = b = 0;
          for (var d = this.grpTexts.members; c < d.length;) {
            var e = d[c];
            ++c;
            e.targetY = b - this.curSelected;
            ++b;
            e.set_alpha(0.6);
            if (e.targetY == 0) {
              e.set_alpha(1);
            }
          }
          U.prototype.update.call(this, a);
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          g.sound.play(y.sound("scrollMenu"), 0.4);
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.options.length - 1;
          }
          if (this.curSelected >= this.options.length) {
            this.curSelected = 0;
          }
        },
        __class__: Rf
      });
      function fn(a, b) {
        this._file = null;
        this.curTypeSelected = 0;
        this.blockPressWhileTypingOn = [];
        this.defaultCharacters = ["dad", "bf", "gf"];
        this.characterFile = null;
        U.call(this, a, b);
      }
      h["states.editors.MenuCharacterEditorState"] = fn;
      fn.__name__ = "states.editors.MenuCharacterEditorState";
      fn.__super__ = U;
      fn.prototype = q(U.prototype, {
        create: function () {
          this.characterFile = {
            image: "Menu_Dad",
            scale: 1,
            position: [0, 0],
            idle_anim: "M Dad Idle",
            confirm_anim: "M Dad Idle",
            flipX: false
          };
          this.grpWeekCharacters = new Ra();
          var a = new ve(g.width * 0.25 - 150, this.defaultCharacters[0]);
          a.set_y(a.y + 70);
          a.set_alpha(0.2);
          this.grpWeekCharacters.add(a);
          a = new ve(g.width * 0.5 - 150, this.defaultCharacters[1]);
          a.set_y(a.y + 70);
          a.set_alpha(0.2);
          this.grpWeekCharacters.add(a);
          a = new ve(g.width * 0.75 - 150, this.defaultCharacters[2]);
          a.set_y(a.y + 70);
          a.set_alpha(0.2);
          this.grpWeekCharacters.add(a);
          this.add(new G(0, 56).makeGraphic(g.width, 386, -405679));
          this.add(this.grpWeekCharacters);
          this.txtOffsets = new Q(20, 10, 0, "[0, 0]", 32);
          this.txtOffsets.setFormat("VCR OSD Mono", 32, -1, "center");
          this.txtOffsets.set_alpha(0.7);
          this.add(this.txtOffsets);
          a = new Q(0, 540, g.width, "Arrow Keys - Change Offset (Hold shift for 10x speed)\n\t\t\t\nSpace - Play \"Start Press\" animation (Boyfriend Character Type)", 16);
          a.setFormat("assets/fonts/vcr.ttf", 16, -1, "center");
          var b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(a);
          this.addEditorBox();
          g.mouse.set_visible(true);
          this.updateCharTypeBox();
          U.prototype.create.call(this);
        },
        addEditorBox: function () {
          var a = this;
          var b = [{
            name: "Character Type",
            label: "Character Type"
          }];
          this.UI_typebox = new ne(null, null, b, null, true);
          this.UI_typebox.resize(120, 180);
          this.UI_typebox.set_x(100);
          this.UI_typebox.set_y(g.height - this.UI_typebox.get_height() - 50);
          b = this.UI_typebox.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.addTypeUI();
          this.add(this.UI_typebox);
          b = [{
            name: "Character",
            label: "Character"
          }];
          this.UI_mainbox = new ne(null, null, b, null, true);
          this.UI_mainbox.resize(240, 180);
          this.UI_mainbox.set_x(g.width - this.UI_mainbox.get_width() - 100);
          this.UI_mainbox.set_y(g.height - this.UI_mainbox.get_height() - 50);
          b = this.UI_mainbox.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.addCharacterUI();
          this.add(this.UI_mainbox);
          var c = new ub(0, 480, "Load Character", function () {
            a.loadCharacter();
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          c.set_x(c.x - 60);
          this.add(c);
          c = new ub(0, 480, "Save Character", function () {
            a.saveCharacter();
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          c.set_x(c.x + 60);
          this.add(c);
        },
        addTypeUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_typebox);
          b.name = "Character Type";
          this.opponentCheckbox = new zb(10, 20, null, null, "Opponent", 100);
          this.opponentCheckbox.callback = function () {
            a.curTypeSelected = 0;
            a.updateCharTypeBox();
          };
          this.boyfriendCheckbox = new zb(this.opponentCheckbox.x, this.opponentCheckbox.y + 40, null, null, "Boyfriend", 100);
          this.boyfriendCheckbox.callback = function () {
            a.curTypeSelected = 1;
            a.updateCharTypeBox();
          };
          this.girlfriendCheckbox = new zb(this.boyfriendCheckbox.x, this.boyfriendCheckbox.y + 40, null, null, "Girlfriend", 100);
          this.girlfriendCheckbox.callback = function () {
            a.curTypeSelected = 2;
            a.updateCharTypeBox();
          };
          b.add(this.opponentCheckbox);
          b.add(this.boyfriendCheckbox);
          b.add(this.girlfriendCheckbox);
          this.UI_typebox.addGroup(b);
        },
        addCharacterUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_mainbox);
          b.name = "Character";
          this.imageInputText = new gb(10, 20, 80, this.characterFile.image, 8);
          this.blockPressWhileTypingOn.push(this.imageInputText);
          this.idleInputText = new gb(10, this.imageInputText.y + 35, 100, this.characterFile.idle_anim, 8);
          this.blockPressWhileTypingOn.push(this.idleInputText);
          this.confirmInputText = new gb(10, this.idleInputText.y + 35, 100, this.characterFile.confirm_anim, 8);
          this.blockPressWhileTypingOn.push(this.confirmInputText);
          this.flipXCheckbox = new zb(10, this.confirmInputText.y + 30, null, null, "Flip X", 100);
          this.flipXCheckbox.callback = function () {
            a.grpWeekCharacters.members[a.curTypeSelected].set_flipX(a.flipXCheckbox.checked);
            a.characterFile.flipX = a.flipXCheckbox.checked;
          };
          var c = new ub(140, this.confirmInputText.y + 30, "Reload Char", function () {
            a.reloadSelectedCharacter();
          });
          this.scaleStepper = new Sb(140, this.imageInputText.y, 0.05, 1, 0.1, 30, 2);
          var d = new Q(10, this.confirmInputText.y - 18, 0, "Start Press animation on the .XML:");
          b.add(new Q(10, this.imageInputText.y - 18, 0, "Image file name:"));
          b.add(new Q(10, this.idleInputText.y - 18, 0, "Idle animation on the .XML:"));
          b.add(new Q(this.scaleStepper.x, this.scaleStepper.y - 18, 0, "Scale:"));
          b.add(this.flipXCheckbox);
          b.add(c);
          b.add(d);
          b.add(this.imageInputText);
          b.add(this.idleInputText);
          b.add(this.confirmInputText);
          b.add(this.scaleStepper);
          this.UI_mainbox.addGroup(b);
        },
        updateCharTypeBox: function () {
          this.opponentCheckbox.set_checked(false);
          this.boyfriendCheckbox.set_checked(false);
          this.girlfriendCheckbox.set_checked(false);
          switch (this.curTypeSelected) {
            case 0:
              this.opponentCheckbox.set_checked(true);
              break;
            case 1:
              this.boyfriendCheckbox.set_checked(true);
              break;
            case 2:
              this.girlfriendCheckbox.set_checked(true);
          }
          this.updateCharacters();
        },
        updateCharacters: function () {
          var a = this.grpWeekCharacters.members[0];
          a.set_alpha(0.2);
          a.character = "";
          a.changeCharacter(this.defaultCharacters[0]);
          a = this.grpWeekCharacters.members[1];
          a.set_alpha(0.2);
          a.character = "";
          a.changeCharacter(this.defaultCharacters[1]);
          a = this.grpWeekCharacters.members[2];
          a.set_alpha(0.2);
          a.character = "";
          a.changeCharacter(this.defaultCharacters[2]);
          this.reloadSelectedCharacter();
        },
        reloadSelectedCharacter: function () {
          var a = this.grpWeekCharacters.members[this.curTypeSelected];
          a.set_alpha(1);
          var b = "menucharacters/" + this.characterFile.image;
          var c = y.image(b, null, true);
          a.set_frames(fb.fromSparrow(c, y.getPath("images/" + b + ".xml", null, null)));
          a.animation.addByPrefix("idle", this.characterFile.idle_anim, 24);
          if (this.curTypeSelected == 1) {
            a.animation.addByPrefix("confirm", this.characterFile.confirm_anim, 24, false);
          }
          a.set_flipX(this.characterFile.flipX == 1);
          b = a.scale;
          var d = c = this.characterFile.scale;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          a.updateHitbox();
          a.animation.play("idle");
          this.updateOffset();
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b instanceof gb) {
            if (b == this.imageInputText) {
              this.characterFile.image = this.imageInputText.text;
            } else if (b == this.idleInputText) {
              this.characterFile.idle_anim = this.idleInputText.text;
            } else if (b == this.confirmInputText) {
              this.characterFile.confirm_anim = this.confirmInputText.text;
            }
          } else if (a == "change_numeric_stepper" && b instanceof Sb && b == this.scaleStepper) {
            this.characterFile.scale = this.scaleStepper.value;
            this.reloadSelectedCharacter();
          }
        },
        update: function (a) {
          var b = false;
          for (var c = 0, d = this.blockPressWhileTypingOn; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.hasFocus) {
              C.toggleVolumeKeys(false);
              b = true;
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                e.set_hasFocus(false);
              }
              break;
            }
          }
          if (!b) {
            C.toggleVolumeKeys(true);
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(27, c.status)) {
              U.switchState(new Rf());
              b = g.sound;
              e = y.returnSound("music", "freakyMenu", null);
              b.playMusic(e);
            }
            b = 1;
            c = g.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(16, c.status)) {
              b = 10;
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(37, c.status)) {
              this.characterFile.position[0] += b;
              this.updateOffset();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(39, c.status)) {
              this.characterFile.position[0] -= b;
              this.updateOffset();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(38, c.status)) {
              this.characterFile.position[1] += b;
              this.updateOffset();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(40, c.status)) {
              this.characterFile.position[1] -= b;
              this.updateOffset();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(32, c.status) && this.curTypeSelected == 1) {
              this.grpWeekCharacters.members[this.curTypeSelected].animation.play("confirm", true);
            }
          }
          b = this.grpWeekCharacters.members[1];
          if (b.animation._curAnim != null && b.animation._curAnim.name == "confirm" && b.animation._curAnim.finished) {
            b.animation.play("idle", true);
          }
          U.prototype.update.call(this, a);
        },
        updateOffset: function () {
          var a = this.grpWeekCharacters.members[this.curTypeSelected].offset;
          var b = this.characterFile.position[0];
          var c = this.characterFile.position[1];
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this.txtOffsets.set_text("" + H.string(this.characterFile.position));
        },
        loadCharacter: function () {
          var a = new Gi("JSON", "json");
          this._file = new Je();
          this._file.addEventListener("complete", l(this, this.onLoadComplete));
          this._file.addEventListener("cancel", l(this, this.onLoadCancel));
          this._file.addEventListener("ioError", l(this, this.onLoadError));
          this._file.browse([a]);
        },
        onLoadComplete: function (a) {
          this._file.removeEventListener("complete", l(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", l(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", l(this, this.onLoadError));
          yb.trace("File couldn't be loaded! You aren't on Desktop, are you?", {
            fileName: "source/states/editors/MenuCharacterEditorState.hx",
            lineNumber: 353,
            className: "states.editors.MenuCharacterEditorState",
            methodName: "onLoadComplete"
          });
        },
        onLoadCancel: function (a) {
          this._file.removeEventListener("complete", l(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", l(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", l(this, this.onLoadError));
          this._file = null;
          yb.trace("Cancelled file loading.", {
            fileName: "source/states/editors/MenuCharacterEditorState.hx",
            lineNumber: 366,
            className: "states.editors.MenuCharacterEditorState",
            methodName: "onLoadCancel"
          });
        },
        onLoadError: function (a) {
          this._file.removeEventListener("complete", l(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", l(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", l(this, this.onLoadError));
          this._file = null;
          yb.trace("Problem loading file", {
            fileName: "source/states/editors/MenuCharacterEditorState.hx",
            lineNumber: 378,
            className: "states.editors.MenuCharacterEditorState",
            methodName: "onLoadError"
          });
        },
        saveCharacter: function () {
          var a = JSON.stringify(this.characterFile, null, "\t");
          if (a.length > 0) {
            var b = w.trim(this.imageInputText.text).split("_");
            b = w.replace(b[b.length - 1].toLowerCase(), " ", "");
            this._file = new Je();
            this._file.addEventListener("complete", l(this, this.onSaveComplete));
            this._file.addEventListener("cancel", l(this, this.onSaveCancel));
            this._file.addEventListener("ioError", l(this, this.onSaveError));
            this._file.save(a, b + ".json");
          }
        },
        onSaveComplete: function (a) {
          this._file.removeEventListener("complete", l(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", l(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Successfully saved file.", Ba.NOTICE);
        },
        onSaveCancel: function (a) {
          this._file.removeEventListener("complete", l(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", l(this, this.onSaveError));
          this._file = null;
        },
        onSaveError: function (a) {
          this._file.removeEventListener("complete", l(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", l(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", l(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Problem saving file", Ba.ERROR, true);
        },
        __class__: fn
      });
      function hh(a, b) {
        this.maxAnims = this.maxFrame = 0;
        this.copiedArray = null;
        this.texturePath = "";
        this.textureName = hh.defaultTexture;
        this.visibleTime = this.pressEnterToSave = 0;
        this.curAnim = 1;
        this.selecArr = null;
        this.maxNotes = 4;
        this.curSelected = 0;
        this.forceFrame = -1;
        U.call(this, a, b);
      }
      h["states.editors.NoteSplashDebugState"] = hh;
      hh.__name__ = "states.editors.NoteSplashDebugState";
      hh.__super__ = U;
      hh.prototype = q(U.prototype, {
        create: function () {
          var a = this;
          var b = xb._new();
          var c = 0;
          var d = c * 0 + 0.5;
          var e = 1;
          if (e == null) {
            e = 1;
          }
          c = Math.round((c + 0.5) * 255);
          b = b & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16;
          c = Math.round(d * 255);
          b = b & -65281 | (c > 255 ? 255 : c < 0 ? 0 : c) << 8;
          c = 128;
          b = b & -256 | (c > 255 ? 255 : c < 0 ? 0 : c);
          c = Math.round(e * 255);
          g.camera.bgColor = b & 16777215 | (c > 255 ? 255 : c < 0 ? 0 : c) << 24;
          this.selection = new G(0, 270).makeGraphic(150, 150, -16777216);
          this.selection.set_alpha(0.4);
          this.add(this.selection);
          this.notes = new Ra();
          this.add(this.notes);
          this.splashes = new Ra();
          this.add(this.splashes);
          b = 0;
          for (d = this.maxNotes; b < d;) {
            c = b++;
            e = c * 220 + 240;
            c = new yg(e, 290, c, 0);
            c.set_alpha(0.75);
            c.playAnim("static");
            this.notes.add(c);
            e = new G(e, 290);
            e.setPosition(e.x - Pa.swagWidth * 0.95, e.y - Pa.swagWidth);
            e.shader = c.rgbShader.parent.shader;
            e.set_antialiasing(C.data.antialiasing);
            this.splashes.add(e);
          }
          b = new Q(60, 520, null, "Image Name:", 16);
          this.add(b);
          this.imageInputText = new ef(60, 540, 360, hh.defaultTexture, 16);
          this.imageInputText.callback = function (b, c) {
            if (c == "enter") {
              a.imageInputText.set_hasFocus(false);
              a.textureName = b;
              try {
                a.loadFrames();
              } catch (r) {
                Na.lastError = r;
                c = K.caught(r).unwrap();
                yb.trace("ERROR! " + H.string(c), {
                  fileName: "source/states/editors/NoteSplashDebugState.hx",
                  lineNumber: 83,
                  className: "states.editors.NoteSplashDebugState",
                  methodName: "create"
                });
                a.textureName = hh.defaultTexture;
                a.loadFrames();
                a.missingText.set_text("ERROR WHILE LOADING IMAGE:\n" + b);
                b = a.missingText;
                c = 16;
                if (c == null) {
                  c = 17;
                }
                if (c == 1 || c == 17) {
                  b.set_x((g.width - b.get_width()) / 2);
                }
                if (c == 16 || c == 17) {
                  b.set_y((g.height - b.get_height()) / 2);
                }
                a.missingText.set_visible(true);
                a.missingTextBG.set_visible(true);
                g.sound.play(y.sound("cancelMenu"));
                new Fc().start(2.5, function (b) {
                  a.missingText.set_visible(false);
                  a.missingTextBG.set_visible(false);
                });
              }
            } else {
              yb.trace("changed image to " + b, {
                fileName: "source/states/editors/NoteSplashDebugState.hx",
                lineNumber: 101,
                className: "states.editors.NoteSplashDebugState",
                methodName: "create"
              });
            }
          };
          this.add(this.imageInputText);
          b = new Q(60, 640, null, "Animation Name:", 16);
          this.add(b);
          this.nameInputText = new ef(60, 660, 360, "", 16);
          this.nameInputText.callback = function (b, c) {
            if (c == "enter") {
              a.nameInputText.set_hasFocus(false);
            } else {
              yb.trace("changed anim name to " + b, {
                fileName: "source/states/editors/NoteSplashDebugState.hx",
                lineNumber: 119,
                className: "states.editors.NoteSplashDebugState",
                methodName: "create"
              });
              a.config.anim = b;
              a.curAnim = 1;
              a.reloadAnims();
            }
          };
          this.add(this.nameInputText);
          this.add(new Q(60, 590, 0, "Min/Max Framerate:", 16));
          this.stepperMinFps = new Sb(60, 610, 1, 22, 1, 60, 0);
          this.stepperMinFps.name = "min_fps";
          this.add(this.stepperMinFps);
          this.stepperMaxFps = new Sb(120, 610, 1, 26, 1, 60, 0);
          this.stepperMaxFps.name = "max_fps";
          this.add(this.stepperMaxFps);
          this.offsetsText = new Q(300, 150, 680, "", 16);
          this.offsetsText.setFormat("assets/fonts/vcr.ttf", 16, -1, "center", Ta.OUTLINE, -16777216);
          b = this.offsetsText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.offsetsText);
          this.curFrameText = new Q(300, 100, 680, "", 16);
          this.curFrameText.setFormat("assets/fonts/vcr.ttf", 16, -1, "center", Ta.OUTLINE, -16777216);
          b = this.curFrameText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.curFrameText);
          this.curAnimText = new Q(300, 50, 680, "", 16);
          this.curAnimText.setFormat("assets/fonts/vcr.ttf", 16, -1, "center", Ta.OUTLINE, -16777216);
          b = this.curAnimText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.curAnimText);
          d = new Q(0, 520, g.width, "Press SPACE to Reset animation\n\n\t\t\tPress ENTER twice to save to the loaded Note Splash PNG's folder\n\n\t\t\tA/D change selected note - Arrow Keys to change offset (Hold shift for 10x)\n\n\t\t\tCtrl + C/V - Copy & Paste", 16);
          d.setFormat("assets/fonts/vcr.ttf", 16, -1, "center", Ta.OUTLINE, -16777216);
          b = d.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(d);
          this.savedText = new Q(0, 340, g.width, "", 24);
          this.savedText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", Ta.OUTLINE, -16777216);
          b = this.savedText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.savedText);
          this.missingTextBG = new G().makeGraphic(g.width, g.height, -16777216);
          this.missingTextBG.set_alpha(0.6);
          this.missingTextBG.set_visible(false);
          this.add(this.missingTextBG);
          this.missingText = new Q(50, 0, g.width - 100, "", 24);
          this.missingText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", Ta.OUTLINE, -16777216);
          b = this.missingText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.missingText.set_visible(false);
          this.add(this.missingText);
          this.loadFrames();
          this.changeSelection();
          U.prototype.create.call(this);
          g.mouse.set_visible(true);
        },
        update: function (a) {
          var b = this;
          ta.__cast(this.stepperMinFps.text_field, ef).set_hasFocus(ta.__cast(this.stepperMaxFps.text_field, ef).set_hasFocus(false));
          var c = !this.nameInputText.hasFocus && !this.imageInputText.hasFocus;
          if (this.get_controls().get_BACK() && c) {
            U.switchState(new Rf());
            var d = g.sound;
            var e = y.returnSound("music", "freakyMenu", null);
            d.playMusic(e);
            g.mouse.set_visible(false);
          }
          U.prototype.update.call(this, a);
          if (!!c && !(c = g.keys.justPressed, c.keyManager.checkStatusUnsafe(65, c.status) ? this.changeSelection(-1) : (c = g.keys.justPressed, c.keyManager.checkStatusUnsafe(68, c.status) && this.changeSelection(1)), this.maxAnims < 1)) {
            if (this.selecArr != null && (e = d = 0, c = g.keys.justPressed, c.keyManager.checkStatusUnsafe(37, c.status) ? d = -1 : (c = g.keys.justPressed, c.keyManager.checkStatusUnsafe(39, c.status) && (d = 1)), c = g.keys.justPressed, c.keyManager.checkStatusUnsafe(38, c.status) ? e = 1 : (c = g.keys.justPressed, c.keyManager.checkStatusUnsafe(40, c.status) && (e = -1)), c = g.keys.pressed, c.keyManager.checkStatusUnsafe(16, c.status) && (d *= 10, e *= 10), d != 0 || e != 0)) {
              this.selecArr[0] -= d;
              this.selecArr[1] += e;
              this.updateOffsetText();
              c = this.splashes.members[this.curSelected].offset;
              d = 10 + this.selecArr[0];
              e = 10 + this.selecArr[1];
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.set_x(d);
              c.set_y(e);
            }
            c = g.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(17, c.status)) {
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(67, c.status)) {
                c = this.selectedArray();
                if (this.copiedArray == null) {
                  this.copiedArray = [0, 0];
                }
                this.copiedArray[0] = c[0];
                this.copiedArray[1] = c[1];
              } else {
                c = g.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(86, c.status) && this.copiedArray != null) {
                  e = this.selectedArray();
                  e[0] = this.copiedArray[0];
                  e[1] = this.copiedArray[1];
                  c = this.splashes.members[this.curSelected].offset;
                  d = 10 + e[0];
                  e = 10 + e[1];
                  if (e == null) {
                    e = 0;
                  }
                  if (d == null) {
                    d = 0;
                  }
                  c.set_x(d);
                  c.set_y(e);
                  this.updateOffsetText();
                }
              }
            }
            this.pressEnterToSave -= a;
            if (this.visibleTime >= 0) {
              this.visibleTime -= a;
              if (this.visibleTime <= 0) {
                this.savedText.set_visible(false);
              }
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(13, c.status)) {
              this.savedText.set_text("Press ENTER again to save.");
              if (this.pressEnterToSave > 0) {
                this.saveFile();
                g.sound.play(y.sound("confirmMenu"), 0.4);
                this.pressEnterToSave = 0;
                this.visibleTime = 3;
              } else {
                this.visibleTime = this.pressEnterToSave = 0.5;
              }
              this.savedText.set_visible(true);
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(32, c.status)) {
              this.changeAnim();
            } else {
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(83, c.status)) {
                this.changeAnim(-1);
              } else {
                c = g.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(87, c.status)) {
                  this.changeAnim(1);
                }
              }
            }
            a = false;
            c = g.keys.justPressed;
            if (a = c.keyManager.checkStatusUnsafe(81, c.status)) {
              this.forceFrame--;
            } else {
              c = g.keys.justPressed;
              if (a = c.keyManager.checkStatusUnsafe(69, c.status)) {
                this.forceFrame++;
              }
            }
            if (a) {
              if (this.forceFrame < 0) {
                this.forceFrame = 0;
              } else if (this.forceFrame >= this.maxFrame) {
                this.forceFrame = this.maxFrame - 1;
              }
              this.curFrameText.set_text("Force Frame: " + (this.forceFrame + 1) + " / " + this.maxFrame + "\n(Press Q/E to change)");
              this.splashes.forEachAlive(function (a) {
                a.animation._curAnim.paused = true;
                a.animation._curAnim.set_curFrame(b.forceFrame);
              });
            }
          }
        },
        updateOffsetText: function () {
          this.selecArr = this.selectedArray();
          this.offsetsText.set_text(this.selecArr.toString());
        },
        loadFrames: function () {
          var a = this;
          this.texturePath = "noteSplashes/" + this.textureName;
          this.splashes.forEachAlive(function (b) {
            var c = a.texturePath;
            var d = y.image(c, null, true);
            b.set_frames(fb.fromSparrow(d, y.getPath("images/" + c + ".xml", null, null)));
          });
          gc.configs.h = Object.create(null);
          this.config = gc.precacheConfig(this.texturePath);
          if (this.config == null) {
            this.config = gc.precacheConfig(gc.defaultNoteSplash);
          }
          this.nameInputText.set_text(this.config.anim);
          this.stepperMinFps.set_value(this.config.minFps);
          this.stepperMaxFps.set_value(this.config.maxFps);
          this.reloadAnims();
        },
        saveFile: function () {
          this.savedText.set_text("Can't save on this platform, too bad.");
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_numeric_stepper" && b instanceof Sb) {
            switch (b.name) {
              case "max_fps":
                if (b.value < this.stepperMinFps.value) {
                  this.stepperMinFps.set_value(b.value);
                }
                break;
              case "min_fps":
                if (b.value > this.stepperMaxFps.value) {
                  this.stepperMaxFps.set_value(b.value);
                }
            }
            this.config.minFps = this.stepperMinFps.value | 0;
            this.config.maxFps = this.stepperMaxFps.value | 0;
          }
        },
        reloadAnims: function () {
          var a = this;
          var b = true;
          this.splashes.forEachAlive(function (a) {
            a.animation.destroyAnimations();
          });
          for (this.maxAnims = 0; b;) {
            this.splashes.forEachAlive(function (c) {
              return function (d) {
                for (var e = 0, f = Pa.colArray.length; e < f;) {
                  var g = e++;
                  var h = "note" + g + "-" + c[0];
                  if (!a.addAnimAndCheck(d, h, "" + a.config.anim + " " + Pa.colArray[g] + " " + c[0], 24, false)) {
                    b = false;
                    break;
                  }
                  d.animation.play(h, true);
                }
              };
            }([this.maxAnims + 1]));
            if (b) {
              this.maxAnims++;
            }
          }
          yb.trace("maxAnims: " + this.maxAnims, {
            fileName: "source/states/editors/NoteSplashDebugState.hx",
            lineNumber: 405,
            className: "states.editors.NoteSplashDebugState",
            methodName: "reloadAnims"
          });
          this.changeAnim();
        },
        changeAnim: function (a) {
          if (a == null) {
            a = 0;
          }
          this.maxFrame = 0;
          this.forceFrame = -1;
          if (this.maxAnims > 0) {
            this.curAnim += a;
            if (this.curAnim > this.maxAnims) {
              this.curAnim = 1;
            } else if (this.curAnim < 1) {
              this.curAnim = this.maxAnims;
            }
            this.curAnimText.set_text("Current Animation: " + this.curAnim + " / " + this.maxAnims + "\n(Press W/S to change)");
            this.curFrameText.set_text("Force Frame Disabled\n(Press Q/E to change)");
            a = 0;
            for (var b = this.maxNotes; a < b;) {
              var c = a++;
              var d = this.splashes.members[c];
              d.animation.play("note" + c + "-" + this.curAnim, true);
              if (this.maxFrame < d.animation._curAnim.frames.length) {
                this.maxFrame = d.animation._curAnim.frames.length;
              }
              d.animation._curAnim.set_frameRate(g.random.int(this.config.minFps, this.config.maxFps));
              c = this.selectedArray(c);
              d = d.offset;
              var e = 10 + c[0];
              c = 10 + c[1];
              if (c == null) {
                c = 0;
              }
              if (e == null) {
                e = 0;
              }
              d.set_x(e);
              d.set_y(c);
            }
          } else {
            this.curAnimText.set_text("INVALID ANIMATION NAME");
            this.curFrameText.set_text("");
          }
          this.updateOffsetText();
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = Pa.colArray.length;
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = b - 1;
          } else if (this.curSelected >= b) {
            this.curSelected = 0;
          }
          this.selection.set_x(this.curSelected * 220 + 220);
          this.updateOffsetText();
        },
        selectedArray: function (a) {
          if (a == null) {
            a = -1;
          }
          if (a < 0) {
            a = this.curSelected;
          }
          a += (this.curAnim - 1) * Pa.colArray.length;
          if (this.config.offsets[a] == null) {
            while (this.config.offsets[a] == null) {
              this.config.offsets.push(this.config.offsets[$b.wrap(a, 0, this.config.offsets.length - 1)].slice());
            }
          }
          return this.config.offsets[$b.wrap(a, 0, this.config.offsets.length - 1)];
        },
        addAnimAndCheck: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 24;
          }
          a.animation.addByPrefix(b, c, d, e);
          return a.animation._animations.h[b] != null;
        },
        destroy: function () {
          U.prototype.destroy.call(this);
        },
        __class__: hh
      });
      function Ia(a) {
        this.blockPressWhileTypingOn = [];
        this.weekFile = null;
        U.call(this);
        this.weekFile = ob.createWeekFile();
        if (a != null) {
          this.weekFile = a;
        } else {
          Ia.weekFileName = "week1";
        }
      }
      h["states.editors.WeekEditorState"] = Ia;
      Ia.__name__ = "states.editors.WeekEditorState";
      Ia.loadWeek = function () {
        var a = new Gi("JSON", "json");
        Ia._file = new Je();
        Ia._file.addEventListener("complete", Ia.onLoadComplete);
        Ia._file.addEventListener("cancel", Ia.onLoadCancel);
        Ia._file.addEventListener("ioError", Ia.onLoadError);
        Ia._file.browse([a]);
      };
      Ia.onLoadComplete = function (a) {
        Ia._file.removeEventListener("complete", Ia.onLoadComplete);
        Ia._file.removeEventListener("cancel", Ia.onLoadCancel);
        Ia._file.removeEventListener("ioError", Ia.onLoadError);
        yb.trace("File couldn't be loaded! You aren't on Desktop, are you?", {
          fileName: "source/states/editors/WeekEditorState.hx",
          lineNumber: 548,
          className: "states.editors.WeekEditorState",
          methodName: "onLoadComplete"
        });
      };
      Ia.onLoadCancel = function (a) {
        Ia._file.removeEventListener("complete", Ia.onLoadComplete);
        Ia._file.removeEventListener("cancel", Ia.onLoadCancel);
        Ia._file.removeEventListener("ioError", Ia.onLoadError);
        Ia._file = null;
        yb.trace("Cancelled file loading.", {
          fileName: "source/states/editors/WeekEditorState.hx",
          lineNumber: 561,
          className: "states.editors.WeekEditorState",
          methodName: "onLoadCancel"
        });
      };
      Ia.onLoadError = function (a) {
        Ia._file.removeEventListener("complete", Ia.onLoadComplete);
        Ia._file.removeEventListener("cancel", Ia.onLoadCancel);
        Ia._file.removeEventListener("ioError", Ia.onLoadError);
        Ia._file = null;
        yb.trace("Problem loading file", {
          fileName: "source/states/editors/WeekEditorState.hx",
          lineNumber: 573,
          className: "states.editors.WeekEditorState",
          methodName: "onLoadError"
        });
      };
      Ia.saveWeek = function (a) {
        a = JSON.stringify(a, null, "\t");
        if (a.length > 0) {
          Ia._file = new Je();
          Ia._file.addEventListener("complete", Ia.onSaveComplete);
          Ia._file.addEventListener("cancel", Ia.onSaveCancel);
          Ia._file.addEventListener("ioError", Ia.onSaveError);
          Ia._file.save(a, Ia.weekFileName + ".json");
        }
      };
      Ia.onSaveComplete = function (a) {
        Ia._file.removeEventListener("complete", Ia.onSaveComplete);
        Ia._file.removeEventListener("cancel", Ia.onSaveCancel);
        Ia._file.removeEventListener("ioError", Ia.onSaveError);
        Ia._file = null;
        g.log.advanced("Successfully saved file.", Ba.NOTICE);
      };
      Ia.onSaveCancel = function (a) {
        Ia._file.removeEventListener("complete", Ia.onSaveComplete);
        Ia._file.removeEventListener("cancel", Ia.onSaveCancel);
        Ia._file.removeEventListener("ioError", Ia.onSaveError);
        Ia._file = null;
      };
      Ia.onSaveError = function (a) {
        Ia._file.removeEventListener("complete", Ia.onSaveComplete);
        Ia._file.removeEventListener("cancel", Ia.onSaveCancel);
        Ia._file.removeEventListener("ioError", Ia.onSaveError);
        Ia._file = null;
        g.log.advanced("Problem saving file", Ba.ERROR, true);
      };
      Ia.__super__ = U;
      Ia.prototype = q(U.prototype, {
        create: function () {
          this.txtWeekTitle = new Q(g.width * 0.7, 10, 0, "", 32);
          this.txtWeekTitle.setFormat("VCR OSD Mono", 32, -1, "right");
          this.txtWeekTitle.set_alpha(0.7);
          var a = y.image("campaign_menu_UI_assets", null, true);
          var b = fb.fromSparrow(a, y.getPath("images/campaign_menu_UI_assets.xml", null, null));
          a = new G(0, 56).makeGraphic(g.width, 386, -405679);
          this.bgSprite = new G(0, 56);
          this.bgSprite.set_antialiasing(C.data.antialiasing);
          var c = this.weekThing = new Lj(0, this.bgSprite.y + 396, Ia.weekFileName);
          c.set_y(c.y + (this.weekThing.get_height() + 20));
          this.weekThing.set_antialiasing(C.data.antialiasing);
          this.add(this.weekThing);
          c = new G().makeGraphic(g.width, 56, -16777216);
          this.add(c);
          this.grpWeekCharacters = new Ra();
          this.lock = new G();
          this.lock.set_frames(b);
          this.lock.animation.addByPrefix("lock", "lock");
          this.lock.animation.play("lock");
          this.lock.set_antialiasing(C.data.antialiasing);
          this.add(this.lock);
          this.missingFileText = new Q(0, 0, g.width, "");
          this.missingFileText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", Ta.OUTLINE, -16777216);
          this.missingFileText.set_borderSize(2);
          this.missingFileText.set_visible(false);
          this.add(this.missingFileText);
          b = this.weekFile.weekCharacters;
          c = new ve(g.width * 0.25 - 150, b[0]);
          c.set_y(c.y + 70);
          this.grpWeekCharacters.add(c);
          c = new ve(g.width * 0.5 - 150, b[1]);
          c.set_y(c.y + 70);
          this.grpWeekCharacters.add(c);
          c = new ve(g.width * 0.75 - 150, b[2]);
          c.set_y(c.y + 70);
          this.grpWeekCharacters.add(c);
          this.add(a);
          this.add(this.bgSprite);
          this.add(this.grpWeekCharacters);
          a = new G(g.width * 0.07, this.bgSprite.y + 435).loadGraphic(y.image("Menu_Tracks"));
          a.set_antialiasing(C.data.antialiasing);
          this.add(a);
          this.txtTracklist = new Q(g.width * 0.05, a.y + 60, 0, "", 32);
          this.txtTracklist.set_alignment("center");
          this.txtTracklist.set_font("assets/fonts/vcr.ttf");
          this.txtTracklist.set_color(-1747081);
          this.add(this.txtTracklist);
          this.add(this.txtWeekTitle);
          this.addEditorBox();
          this.reloadAllShit();
          g.mouse.set_visible(true);
          U.prototype.create.call(this);
        },
        addEditorBox: function () {
          var a = this;
          this.UI_box = new ne(null, null, [{
            name: "Week",
            label: "Week"
          }, {
            name: "Other",
            label: "Other"
          }], null, true);
          this.UI_box.resize(250, 375);
          this.UI_box.set_x(g.width - this.UI_box.get_width());
          this.UI_box.set_y(g.height - this.UI_box.get_height());
          var b = this.UI_box.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.addWeekUI();
          this.addOtherUI();
          this.UI_box.set_selected_tab_id("Week");
          this.add(this.UI_box);
          var c = new ub(0, 650, "Load Week", function () {
            Ia.loadWeek();
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          c.set_x(c.x - 120);
          this.add(c);
          c = new ub(0, 650, "Freeplay", function () {
            U.switchState(new fk(a.weekFile));
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          this.add(c);
          c = new ub(0, 650, "Save Week", function () {
            Ia.saveWeek(a.weekFile);
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          c.set_x(c.x + 120);
          this.add(c);
        },
        addWeekUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Week";
          this.songsInputText = new gb(10, 30, 200, "", 8);
          this.blockPressWhileTypingOn.push(this.songsInputText);
          this.opponentInputText = new gb(10, this.songsInputText.y + 40, 70, "", 8);
          this.blockPressWhileTypingOn.push(this.opponentInputText);
          this.boyfriendInputText = new gb(this.opponentInputText.x + 75, this.opponentInputText.y, 70, "", 8);
          this.blockPressWhileTypingOn.push(this.boyfriendInputText);
          this.girlfriendInputText = new gb(this.boyfriendInputText.x + 75, this.opponentInputText.y, 70, "", 8);
          this.blockPressWhileTypingOn.push(this.girlfriendInputText);
          this.backgroundInputText = new gb(10, this.opponentInputText.y + 40, 120, "", 8);
          this.blockPressWhileTypingOn.push(this.backgroundInputText);
          this.displayNameInputText = new gb(10, this.backgroundInputText.y + 60, 200, "", 8);
          this.blockPressWhileTypingOn.push(this.backgroundInputText);
          this.weekNameInputText = new gb(10, this.displayNameInputText.y + 60, 150, "", 8);
          this.blockPressWhileTypingOn.push(this.weekNameInputText);
          this.weekFileInputText = new gb(10, this.weekNameInputText.y + 40, 100, "", 8);
          this.blockPressWhileTypingOn.push(this.weekFileInputText);
          this.reloadWeekThing();
          this.hideCheckbox = new zb(10, this.weekFileInputText.y + 40, null, null, "Hide Week from Story Mode?", 100);
          this.hideCheckbox.callback = function () {
            a.weekFile.hideStoryMode = a.hideCheckbox.checked;
          };
          b.add(new Q(this.songsInputText.x, this.songsInputText.y - 18, 0, "Songs:"));
          b.add(new Q(this.opponentInputText.x, this.opponentInputText.y - 18, 0, "Characters:"));
          b.add(new Q(this.backgroundInputText.x, this.backgroundInputText.y - 18, 0, "Background Asset:"));
          b.add(new Q(this.displayNameInputText.x, this.displayNameInputText.y - 18, 0, "Display Name:"));
          b.add(new Q(this.weekNameInputText.x, this.weekNameInputText.y - 18, 0, "Week Name (for Reset Score Menu):"));
          b.add(new Q(this.weekFileInputText.x, this.weekFileInputText.y - 18, 0, "Week File:"));
          b.add(this.songsInputText);
          b.add(this.opponentInputText);
          b.add(this.boyfriendInputText);
          b.add(this.girlfriendInputText);
          b.add(this.backgroundInputText);
          b.add(this.displayNameInputText);
          b.add(this.weekNameInputText);
          b.add(this.weekFileInputText);
          b.add(this.hideCheckbox);
          this.UI_box.addGroup(b);
        },
        addOtherUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Other";
          this.lockedCheckbox = new zb(10, 30, null, null, "Week starts Locked", 100);
          this.lockedCheckbox.callback = function () {
            a.weekFile.startUnlocked = !a.lockedCheckbox.checked;
            a.lock.set_visible(a.lockedCheckbox.checked);
            a.hiddenUntilUnlockCheckbox.set_alpha(0.4 + (a.lockedCheckbox.checked ? 1 : 0) * 0.6);
          };
          this.hiddenUntilUnlockCheckbox = new zb(10, this.lockedCheckbox.y + 25, null, null, "Hidden until Unlocked", 110);
          this.hiddenUntilUnlockCheckbox.callback = function () {
            a.weekFile.hiddenUntilUnlocked = a.hiddenUntilUnlockCheckbox.checked;
          };
          this.hiddenUntilUnlockCheckbox.set_alpha(0.4);
          this.weekBeforeInputText = new gb(10, this.hiddenUntilUnlockCheckbox.y + 55, 100, "", 8);
          this.blockPressWhileTypingOn.push(this.weekBeforeInputText);
          this.difficultiesInputText = new gb(10, this.weekBeforeInputText.y + 60, 200, "", 8);
          this.blockPressWhileTypingOn.push(this.difficultiesInputText);
          b.add(new Q(this.weekBeforeInputText.x, this.weekBeforeInputText.y - 28, 0, "Week File name of the Week you have\nto finish for Unlocking:"));
          b.add(new Q(this.difficultiesInputText.x, this.difficultiesInputText.y - 20, 0, "Difficulties:"));
          b.add(new Q(this.difficultiesInputText.x, this.difficultiesInputText.y + 20, 0, "Default difficulties are \"Easy, Normal, Hard\"\nwithout quotes."));
          b.add(this.weekBeforeInputText);
          b.add(this.difficultiesInputText);
          b.add(this.hiddenUntilUnlockCheckbox);
          b.add(this.lockedCheckbox);
          this.UI_box.addGroup(b);
        },
        reloadAllShit: function () {
          var a = this.weekFile.songs[0][0];
          for (var b = 1, c = this.weekFile.songs.length; b < c;) {
            var d = b++;
            a += ", " + this.weekFile.songs[d][0];
          }
          this.songsInputText.set_text(a);
          this.backgroundInputText.set_text(this.weekFile.weekBackground);
          this.displayNameInputText.set_text(this.weekFile.storyName);
          this.weekNameInputText.set_text(this.weekFile.weekName);
          this.weekFileInputText.set_text(Ia.weekFileName);
          this.opponentInputText.set_text(this.weekFile.weekCharacters[0]);
          this.boyfriendInputText.set_text(this.weekFile.weekCharacters[1]);
          this.girlfriendInputText.set_text(this.weekFile.weekCharacters[2]);
          this.hideCheckbox.set_checked(this.weekFile.hideStoryMode);
          this.weekBeforeInputText.set_text(this.weekFile.weekBefore);
          this.difficultiesInputText.set_text("");
          if (this.weekFile.difficulties != null) {
            this.difficultiesInputText.set_text(this.weekFile.difficulties);
          }
          this.lockedCheckbox.set_checked(!this.weekFile.startUnlocked);
          this.lock.set_visible(this.lockedCheckbox.checked);
          this.hiddenUntilUnlockCheckbox.set_checked(this.weekFile.hiddenUntilUnlocked);
          this.hiddenUntilUnlockCheckbox.set_alpha(0.4 + (this.lockedCheckbox.checked ? 1 : 0) * 0.6);
          this.reloadBG();
          this.reloadWeekThing();
          this.updateText();
        },
        updateText: function () {
          for (var a = 0, b = this.grpWeekCharacters.length; a < b;) {
            var c = a++;
            this.grpWeekCharacters.members[c].changeCharacter(this.weekFile.weekCharacters[c]);
          }
          var d = [];
          a = 0;
          for (b = this.weekFile.songs.length; a < b;) {
            c = a++;
            d.push(this.weekFile.songs[c][0]);
          }
          this.txtTracklist.set_text("");
          a = 0;
          for (b = d.length; a < b;) {
            c = a++;
            var e = this.txtTracklist;
            e.set_text(e.text + (d[c] + "\n"));
          }
          this.txtTracklist.set_text(this.txtTracklist.text.toUpperCase());
          a = this.txtTracklist;
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          e = this.txtTracklist;
          e.set_x(e.x - g.width * 0.35);
          this.txtWeekTitle.set_text(this.weekFile.storyName.toUpperCase());
          this.txtWeekTitle.set_x(g.width - (this.txtWeekTitle.get_width() + 10));
        },
        reloadBG: function () {
          this.bgSprite.set_visible(true);
          var a = this.weekFile.weekBackground;
          var b = true;
          if (a != null && a.length > 0 && W.exists(y.getPath("images/menubackgrounds/menu_" + a + ".png", "IMAGE"), "IMAGE")) {
            this.bgSprite.loadGraphic(y.image("menubackgrounds/menu_" + a));
            b = false;
          }
          if (b) {
            this.bgSprite.set_visible(false);
          }
        },
        reloadWeekThing: function () {
          this.weekThing.set_visible(true);
          this.missingFileText.set_visible(false);
          var a = w.trim(this.weekFileInputText.text);
          var b = true;
          if (a != null && a.length > 0 && W.exists(y.getPath("images/storymenu/" + a + ".png", "IMAGE"), "IMAGE")) {
            this.weekThing.loadGraphic(y.image("storymenu/" + a));
            b = false;
          }
          if (b) {
            this.weekThing.set_visible(false);
            this.missingFileText.set_visible(true);
            this.missingFileText.set_text("MISSING FILE: images/storymenu/" + a + ".png");
          }
          this.recalculateStuffPosition();
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b instanceof gb) {
            if (b == this.weekFileInputText) {
              Ia.weekFileName = w.trim(this.weekFileInputText.text);
              this.reloadWeekThing();
            } else if (b == this.opponentInputText || b == this.boyfriendInputText || b == this.girlfriendInputText) {
              this.weekFile.weekCharacters[0] = w.trim(this.opponentInputText.text);
              this.weekFile.weekCharacters[1] = w.trim(this.boyfriendInputText.text);
              this.weekFile.weekCharacters[2] = w.trim(this.girlfriendInputText.text);
              this.updateText();
            } else if (b == this.backgroundInputText) {
              this.weekFile.weekBackground = w.trim(this.backgroundInputText.text);
              this.reloadBG();
            } else if (b == this.displayNameInputText) {
              this.weekFile.storyName = w.trim(this.displayNameInputText.text);
              this.updateText();
            } else if (b == this.weekNameInputText) {
              this.weekFile.weekName = w.trim(this.weekNameInputText.text);
            } else if (b == this.songsInputText) {
              a = w.trim(this.songsInputText.text).split(",");
              b = 0;
              for (c = a.length; b < c;) {
                d = b++;
                a[d] = w.trim(a[d]);
              }
              while (a.length < this.weekFile.songs.length) {
                this.weekFile.songs.pop();
              }
              b = 0;
              for (c = a.length; b < c;) {
                d = b++;
                if (d >= this.weekFile.songs.length) {
                  this.weekFile.songs.push([a[d], "dad", [146, 113, 253]]);
                } else {
                  this.weekFile.songs[d][0] = a[d];
                  if (this.weekFile.songs[d][1] == null || this.weekFile.songs[d][1]) {
                    this.weekFile.songs[d][1] = "dad";
                    this.weekFile.songs[d][2] = [146, 113, 253];
                  }
                }
              }
              this.updateText();
            } else if (b == this.weekBeforeInputText) {
              this.weekFile.weekBefore = w.trim(this.weekBeforeInputText.text);
            } else if (b == this.difficultiesInputText) {
              this.weekFile.difficulties = w.trim(this.difficultiesInputText.text);
            }
          }
        },
        update: function (a) {
          if (Ia.loadedWeek != null) {
            this.weekFile = Ia.loadedWeek;
            Ia.loadedWeek = null;
            this.reloadAllShit();
          }
          var b = false;
          for (var c = 0, d = this.blockPressWhileTypingOn; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.hasFocus) {
              C.toggleVolumeKeys(false);
              b = true;
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                e.set_hasFocus(false);
              }
              break;
            }
          }
          if (!b) {
            C.toggleVolumeKeys(true);
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(27, c.status)) {
              U.switchState(new Rf());
              b = g.sound;
              e = y.returnSound("music", "freakyMenu", null);
              b.playMusic(e);
            }
          }
          U.prototype.update.call(this, a);
          this.lock.set_y(this.weekThing.y);
          this.missingFileText.set_y(this.weekThing.y + 36);
        },
        recalculateStuffPosition: function () {
          var a = this.weekThing;
          var b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          this.lock.set_x(this.weekThing.get_width() + 10 + this.weekThing.x);
        },
        __class__: Ia
      });
      function fk(a) {
        this.blockPressWhileTypingOn = [];
        this.curSelected = 0;
        this.iconArray = [];
        this.weekFile = null;
        U.call(this);
        this.weekFile = ob.createWeekFile();
        if (a != null) {
          this.weekFile = a;
        }
      }
      h["states.editors.WeekEditorFreeplayState"] = fk;
      fk.__name__ = "states.editors.WeekEditorFreeplayState";
      fk.__super__ = U;
      fk.prototype = q(U.prototype, {
        create: function () {
          this.bg = new G().loadGraphic(y.image("menuDesat"));
          this.bg.set_antialiasing(C.data.antialiasing);
          this.bg.set_color(-1);
          this.add(this.bg);
          this.grpSongs = new Ra();
          this.add(this.grpSongs);
          for (var a = 0, b = this.weekFile.songs.length; a < b;) {
            var c = a++;
            var d = new Jb(90, 320, this.weekFile.songs[c][0], true);
            d.isMenuItem = true;
            d.targetY = c;
            this.grpSongs.add(d);
            d.set_scaleX(Math.min(1, 980 / d.get_width()));
            d.snapToPosition();
            c = new Ue(this.weekFile.songs[c][1]);
            c.sprTracker = d;
            this.iconArray.push(c);
            this.add(c);
          }
          this.addEditorBox();
          this.changeSelection();
          U.prototype.create.call(this);
        },
        addEditorBox: function () {
          var a = this;
          this.UI_box = new ne(null, null, [{
            name: "Freeplay",
            label: "Freeplay"
          }], null, true);
          this.UI_box.resize(250, 200);
          this.UI_box.set_x(g.width - this.UI_box.get_width() - 100);
          this.UI_box.set_y(g.height - this.UI_box.get_height() - 60);
          var b = this.UI_box.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.UI_box.set_selected_tab_id("Week");
          this.addFreeplayUI();
          this.add(this.UI_box);
          b = new G(0, 670).makeGraphic(g.width, 50, -16777216);
          b.set_alpha(0.6);
          this.add(b);
          var c = new ub(0, 685, "Load Week", function () {
            Ia.loadWeek();
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          c.set_x(c.x - 120);
          this.add(c);
          c = new ub(0, 685, "Story Mode", function () {
            U.switchState(new Ia(a.weekFile));
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          this.add(c);
          c = new ub(0, 685, "Save Week", function () {
            Ia.saveWeek(a.weekFile);
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          c.set_x(c.x + 120);
          this.add(c);
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b instanceof gb) {
            this.weekFile.songs[this.curSelected][1] = this.iconInputText.text;
          } else if (a == "change_numeric_stepper" && b instanceof Sb && (b == this.bgColorStepperR || b == this.bgColorStepperG || b == this.bgColorStepperB)) {
            this.updateBG();
          }
        },
        addFreeplayUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Freeplay";
          this.bgColorStepperR = new Sb(10, 40, 20, 255, 0, 255, 0);
          this.bgColorStepperG = new Sb(80, 40, 20, 255, 0, 255, 0);
          this.bgColorStepperB = new Sb(150, 40, 20, 255, 0, 255, 0);
          var c = new ub(10, this.bgColorStepperR.y + 25, "Copy Color", function () {
            kc.set_text((a.bg.color >> 16 & 255) + "," + (a.bg.color >> 8 & 255) + "," + (a.bg.color & 255));
          });
          var d = new ub(140, c.y, "Paste Color", function () {
            if (kc.get_text() != null) {
              var b = [];
              var c = w.trim(kc.get_text()).split(",");
              for (var d = 0, e = c.length; d < e;) {
                var g = d++;
                g = H.parseInt(c[g]);
                if (!isNaN(g)) {
                  if (g > 255) {
                    g = 255;
                  } else if (g < 0) {
                    g *= -1;
                  }
                  b.push(g);
                }
              }
              if (b.length > 2) {
                a.bgColorStepperR.set_value(b[0]);
                a.bgColorStepperG.set_value(b[1]);
                a.bgColorStepperB.set_value(b[2]);
                a.updateBG();
              }
            }
          });
          this.iconInputText = new gb(10, this.bgColorStepperR.y + 70, 100, "", 8);
          var e = new zb(10, this.iconInputText.y + 30, null, null, "Hide Week from Freeplay?", 100);
          e.set_checked(this.weekFile.hideFreeplay);
          e.callback = function () {
            a.weekFile.hideFreeplay = e.checked;
          };
          b.add(new Q(10, this.bgColorStepperR.y - 18, 0, "Selected background Color R/G/B:"));
          b.add(new Q(10, this.iconInputText.y - 18, 0, "Selected icon:"));
          b.add(this.bgColorStepperR);
          b.add(this.bgColorStepperG);
          b.add(this.bgColorStepperB);
          b.add(c);
          b.add(d);
          b.add(this.iconInputText);
          b.add(e);
          this.UI_box.addGroup(b);
        },
        updateBG: function () {
          this.weekFile.songs[this.curSelected][2][0] = Math.round(this.bgColorStepperR.value);
          this.weekFile.songs[this.curSelected][2][1] = Math.round(this.bgColorStepperG.value);
          this.weekFile.songs[this.curSelected][2][2] = Math.round(this.bgColorStepperB.value);
          var a = this.bg;
          var b = this.weekFile.songs[this.curSelected][2][0];
          var c = this.weekFile.songs[this.curSelected][2][1];
          var d = this.weekFile.songs[this.curSelected][2][2];
          var e = xb._new();
          var f = 255;
          if (f == null) {
            f = 255;
          }
          e = (e & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16) & -65281 | (c > 255 ? 255 : c < 0 ? 0 : c) << 8;
          e &= -256;
          e |= d > 255 ? 255 : d < 0 ? 0 : d;
          e &= 16777215;
          e |= (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
          a.set_color(e);
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          g.sound.play(y.sound("scrollMenu"), 0.4);
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.weekFile.songs.length - 1;
          }
          if (this.curSelected >= this.weekFile.songs.length) {
            this.curSelected = 0;
          }
          for (var b = a = 0, c = this.iconArray.length; b < c;) {
            var d = b++;
            this.iconArray[d].set_alpha(0.6);
          }
          this.iconArray[this.curSelected].set_alpha(1);
          b = 0;
          for (c = this.grpSongs.members; b < c.length;) {
            d = c[b];
            ++b;
            d.targetY = a - this.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
            }
          }
          yb.trace(this.weekFile.songs[this.curSelected], {
            fileName: "source/states/editors/WeekEditorState.hx",
            lineNumber: 845,
            className: "states.editors.WeekEditorFreeplayState",
            methodName: "changeSelection"
          });
          this.iconInputText.set_text(this.weekFile.songs[this.curSelected][1]);
          this.bgColorStepperR.set_value(Math.round(this.weekFile.songs[this.curSelected][2][0]));
          this.bgColorStepperG.set_value(Math.round(this.weekFile.songs[this.curSelected][2][1]));
          this.bgColorStepperB.set_value(Math.round(this.weekFile.songs[this.curSelected][2][2]));
          this.updateBG();
        },
        update: function (a) {
          if (Ia.loadedWeek != null) {
            U.prototype.update.call(this, a);
            Wb.skipNextTransIn = true;
            Wb.skipNextTransOut = true;
            U.switchState(new fk(Ia.loadedWeek));
            Ia.loadedWeek = null;
          } else {
            if (this.iconInputText.hasFocus) {
              C.toggleVolumeKeys(false);
              var b = g.keys.justPressed;
              if (b.keyManager.checkStatusUnsafe(13, b.status)) {
                this.iconInputText.set_hasFocus(false);
              }
            } else {
              C.toggleVolumeKeys(true);
              b = g.keys.justPressed;
              if (b.keyManager.checkStatusUnsafe(27, b.status)) {
                U.switchState(new Rf());
                b = g.sound;
                var c = y.returnSound("music", "freakyMenu", null);
                b.playMusic(c);
              }
              if (this.get_controls().get_UI_UP_P()) {
                this.changeSelection(-1);
              }
              if (this.get_controls().get_UI_DOWN_P()) {
                this.changeSelection(1);
              }
            }
            U.prototype.update.call(this, a);
          }
        },
        __class__: fk
      });
      function ck() {
        Ph.call(this);
      }
      h["states.stages.StageWeek1"] = ck;
      ck.__name__ = "states.stages.StageWeek1";
      ck.__super__ = Ph;
      ck.prototype = q(Ph.prototype, {
        create: function () {
          var a = new Gb("stageback", -600, -200, 0.9, 0.9);
          this.add(a);
          a = new Gb("stagefront", -650, 600, 0.9, 0.9);
          a.setGraphicSize(a.get_width() * 1.1 | 0);
          a.updateHitbox();
          this.add(a);
          if (!C.data.lowQuality) {
            a = new Gb("stage_light", -125, -100, 0.9, 0.9);
            a.setGraphicSize(a.get_width() * 1.1 | 0);
            a.updateHitbox();
            this.add(a);
            a = new Gb("stage_light", 1225, -100, 0.9, 0.9);
            a.setGraphicSize(a.get_width() * 1.1 | 0);
            a.updateHitbox();
            a.set_flipX(true);
            this.add(a);
            a = new Gb("stagecurtains", -500, -300, 1.3, 1.3);
            a.setGraphicSize(a.get_width() * 0.9 | 0);
            a.updateHitbox();
            this.add(a);
          }
        },
        eventPushed: function (a) {
          if (a.event == "Dadbattle Spotlight") {
            this.dadbattleBlack = new Gb(null, -800, -400, 0, 0);
            this.dadbattleBlack.makeGraphic(g.width * 2 | 0, g.height * 2 | 0, -16777216);
            this.dadbattleBlack.set_alpha(0.25);
            this.dadbattleBlack.set_visible(false);
            this.add(this.dadbattleBlack);
            this.dadbattleLight = new Gb("spotlight", 400, -400);
            this.dadbattleLight.set_alpha(0.375);
            this.dadbattleLight.set_blend(0);
            this.dadbattleLight.set_visible(false);
            this.add(this.dadbattleLight);
            this.dadbattleFog = new gn();
            this.dadbattleFog.set_visible(false);
            this.add(this.dadbattleFog);
          }
        },
        eventCalled: function (a, b, c, d, e, f) {
          var g = this;
          if (a == "Dadbattle Spotlight") {
            if (d == null) {
              d = 0;
            }
            a = Math.round(d);
            switch (a) {
              case 1:
              case 2:
              case 3:
                if (a == 1) {
                  this.dadbattleBlack.set_visible(true);
                  this.dadbattleLight.set_visible(true);
                  this.dadbattleFog.set_visible(true);
                  this.game.defaultCamZoom += 0.12;
                }
                b = this.game.dad;
                if (a > 2) {
                  b = this.game.boyfriend;
                }
                this.dadbattleLight.set_alpha(0);
                new Fc().start(0.12, function (a) {
                  g.dadbattleLight.set_alpha(0.375);
                });
                this.dadbattleLight.setPosition(b.getGraphicMidpoint().x - this.dadbattleLight.get_width() / 2, b.y + b.get_height() - this.dadbattleLight.get_height() + 50);
                ka.tween(this.dadbattleFog, {
                  alpha: 0.7
                }, 1.5, {
                  ease: va.quadInOut
                });
                break;
              default:
                this.dadbattleBlack.set_visible(false);
                this.dadbattleLight.set_visible(false);
                this.game.defaultCamZoom -= 0.12;
                ka.tween(this.dadbattleFog, {
                  alpha: 0
                }, 0.7, {
                  onComplete: function (a) {
                    g.dadbattleFog.set_visible(false);
                  }
                });
            }
          }
        },
        __class__: ck
      });
      function gn() {
        db.call(this);
        this.set_alpha(0);
        this.set_blend(0);
        var a = new Gb("smoke", -1350, 660 + g.random.float(-20, 20), 1.2, 1.05);
        a.setGraphicSize(a.get_width() * g.random.float(1.1, 1.22) | 0);
        a.updateHitbox();
        a.velocity.set_x(g.random.float(15, 22));
        a.set_active(true);
        a.set_antialiasing(C.data.antialiasing);
        this.add(a);
        a = new Gb("smoke", 1750, 660 + g.random.float(-20, 20), 1.2, 1.05);
        a.setGraphicSize(a.get_width() * g.random.float(1.1, 1.22) | 0);
        a.updateHitbox();
        a.velocity.set_x(g.random.float(-15, -22));
        a.set_active(true);
        a.set_flipX(true);
        a.set_antialiasing(C.data.antialiasing);
        this.add(a);
      }
      h["states.stages.objects.DadBattleFog"] = gn;
      gn.__name__ = "states.stages.objects.DadBattleFog";
      gn.__super__ = db;
      gn.prototype = q(db.prototype, {
        __class__: gn
      });
      function Jj(a, b, c) {
        this.tankSpeed = 0.7;
        this.strumTime = 0;
        this.goingRight = c;
        G.call(this, a, b);
        a = y.image("tankmanKilled1", null, true);
        this.set_frames(fb.fromSparrow(a, y.getPath("images/tankmanKilled1.xml", null, null)));
        this.animation.addByPrefix("run", "tankman running", 24, true);
        this.animation.addByPrefix("shot", "John Shot " + g.random.int(1, 2), 24, false);
        this.animation.play("run");
        this.animation._curAnim.set_curFrame(g.random.int(0, this.animation._curAnim.frames.length - 1));
        this.set_antialiasing(C.data.antialiasing);
        c = this.scale;
        b = a = 0.8;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        c.set_x(a);
        c.set_y(b);
        this.updateHitbox();
      }
      h["states.stages.objects.TankmenBG"] = Jj;
      Jj.__name__ = "states.stages.objects.TankmenBG";
      Jj.__super__ = G;
      Jj.prototype = q(G.prototype, {
        update: function (a) {
          G.prototype.update.call(this, a);
          this.set_visible(this.x > g.width * -0.5 && this.x < g.width * 1.2);
          if (this.animation._curAnim.name == "run") {
            a = (N.songPosition - this.strumTime) * this.tankSpeed;
            if (this.goingRight) {
              this.set_x(g.width * 0.02 - this.endingOffset + a);
            } else {
              this.set_x(g.width * 0.74 + this.endingOffset - a);
            }
          } else if (this.animation._curAnim.finished) {
            this.kill();
          }
          if (N.songPosition > this.strumTime) {
            this.animation.play("shot");
            if (this.goingRight) {
              this.offset.set_x(300);
              this.offset.set_y(200);
            }
          }
        },
        __class__: Jj
      });
      function Kc() {
        this.startedDeath = this.isEnding = false;
        this.charX = this.charY = 0;
        this.stageSuffix = "";
        this.moveCamera = this.playingDeathSound = false;
        bb.call(this);
      }
      h["substates.GameOverSubstate"] = Kc;
      Kc.__name__ = "substates.GameOverSubstate";
      Kc.resetVariables = function () {
        Kc.characterName = "bf-rook-death";
        Kc.deathSoundName = "fnf_loss_sfx";
        Kc.loopSoundName = "gameOver";
        Kc.endSoundName = "gameOverEnd";
        var a = z.SONG;
        if (a != null) {
          if (a.gameOverChar != null && w.trim(a.gameOverChar).length > 0) {
            Kc.characterName = a.gameOverChar;
          }
          if (a.gameOverSound != null && w.trim(a.gameOverSound).length > 0) {
            Kc.deathSoundName = a.gameOverSound;
          }
          if (a.gameOverLoop != null && w.trim(a.gameOverLoop).length > 0) {
            Kc.loopSoundName = a.gameOverLoop;
          }
          if (a.gameOverEnd != null && w.trim(a.gameOverEnd).length > 0) {
            Kc.endSoundName = a.gameOverEnd;
          }
        }
      };
      Kc.__super__ = bb;
      Kc.prototype = q(bb.prototype, {
        create: function () {
          Kc.instance = this;
          N.songPosition = 0;
          var a = this.boyfriend = new ad(z.instance.boyfriend.getScreenPosition().x, z.instance.boyfriend.getScreenPosition().y, Kc.characterName, true);
          a.set_x(a.x + (this.boyfriend.positionArray[0] - z.instance.boyfriend.positionArray[0]));
          a = this.boyfriend;
          a.set_y(a.y + (this.boyfriend.positionArray[1] - z.instance.boyfriend.positionArray[1]));
          this.add(this.boyfriend);
          g.sound.play(y.sound(Kc.deathSoundName));
          var b = g.camera.scroll;
          b.set_x(0);
          b.set_y(0);
          g.camera.target = null;
          this.boyfriend.playAnim("firstDeath");
          this.camFollow = new hc(0, 0, 1, 1);
          this.camFollow.setPosition(this.boyfriend.getGraphicMidpoint().x + this.boyfriend.cameraPosition[0], this.boyfriend.getGraphicMidpoint().y + this.boyfriend.cameraPosition[1]);
          a = g.camera;
          var c = g.camera.scroll.x + g.camera.width / 2;
          var d = g.camera.scroll.y + g.camera.height / 2;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          var e = fa.pool.get().set(c, d);
          e._inPool = false;
          b = a.scroll;
          c = e.x - a.width * 0.5;
          d = e.y - a.height * 0.5;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          a = e;
          if (a._weak) {
            a.put();
          }
          this.add(this.camFollow);
          z.instance.setOnScripts("inGameOver", true);
          z.instance.callOnScripts("onGameOverStart", []);
          bb.prototype.create.call(this);
        },
        update: function (a) {
          var b = this;
          bb.prototype.update.call(this, a);
          z.instance.callOnScripts("onUpdate", [a]);
          if (Ca.instance.get_ACCEPT()) {
            this.endBullshit();
          }
          if (Ca.instance.get_BACK()) {
            var c = g.sound.music;
            c.cleanup(c.autoDestroy, true);
            z.deathCounter = 0;
            z.seenCutscene = false;
            z.chartingMode = false;
            Wd.loadTopMod();
            if (z.isStoryMode) {
              U.switchState(new Lb());
            } else {
              U.switchState(new Va());
            }
            c = g.sound;
            var d = y.returnSound("music", "freakyMenu", null);
            c.playMusic(d);
            z.instance.callOnScripts("onGameOverConfirm", [false]);
          }
          if (this.boyfriend.animation._curAnim != null) {
            if (this.boyfriend.animation._curAnim.name == "firstDeath" && this.boyfriend.animation._curAnim.finished && this.startedDeath) {
              this.boyfriend.playAnim("deathLoop");
            }
            if (this.boyfriend.animation._curAnim.name == "firstDeath") {
              if (this.boyfriend.animation._curAnim.curFrame >= 12 && !this.moveCamera) {
                g.camera.follow(this.camFollow, xf.LOCKON, 0.6);
                this.moveCamera = true;
              }
              if (this.boyfriend.animation._curAnim.finished && !this.playingDeathSound) {
                this.startedDeath = true;
                if (z.SONG.stage == "tank") {
                  this.playingDeathSound = true;
                  this.coolStartDeath(0.2);
                  g.sound.play(y.sound("jeffGameover/jeffGameover-" + g.random.int(1, 25, [])), 1, false, null, true, function () {
                    if (!b.isEnding) {
                      var a = g.sound.music;
                      var c = 0.2;
                      var d = 1;
                      var h = 4;
                      if (h == null) {
                        h = 1;
                      }
                      if (d == null) {
                        d = 0;
                      }
                      if (c == null) {
                        c = 1;
                      }
                      if (a._channel == null) {
                        a.play();
                      }
                      if (a.fadeTween != null) {
                        a.fadeTween.cancel();
                      }
                      a.fadeTween = ka.num(d, h, c, {
                        onComplete: null
                      }, l(a, a.volumeTween));
                    }
                  });
                } else {
                  this.coolStartDeath();
                }
              }
            }
          }
          if (g.sound.music._channel != null) {
            N.songPosition = g.sound.music._time;
          }
          z.instance.callOnScripts("onUpdatePost", [a]);
        },
        coolStartDeath: function (a) {
          if (a == null) {
            a = 1;
          }
          var b = g.sound;
          var c = y.returnSound("music", Kc.loopSoundName, null);
          b.playMusic(c, a);
        },
        endBullshit: function () {
          if (!this.isEnding) {
            this.isEnding = true;
            this.boyfriend.playAnim("deathConfirm", true);
            var a = g.sound.music;
            a.cleanup(a.autoDestroy, true);
            a = g.sound;
            var b = y.returnSound("music", Kc.endSoundName, null);
            a.play(b);
            new Fc().start(0.7, function (a) {
              g.camera.fade(-16777216, 2, false, function () {
                U.resetState();
              });
            });
            z.instance.callOnScripts("onGameOverConfirm", [true]);
          }
        },
        destroy: function () {
          Kc.instance = null;
          bb.prototype.destroy.call(this);
        },
        __class__: Kc
      });
      function cn() {
        this.holdTime = this.holdValue = 0;
        this.nextAccept = 5;
        this.optionsArray = [];
        this.curSelected = 0;
        this.curOption = null;
        bb.call(this);
        var a = new G().makeGraphic(g.width, g.height, -16777216);
        a.set_alpha(0.6);
        this.add(a);
        this.grpOptions = new Ra();
        this.add(this.grpOptions);
        this.grpTexts = new Ra();
        this.add(this.grpTexts);
        this.checkboxGroup = new Ra();
        this.add(this.checkboxGroup);
        this.getOptions();
        a = 0;
        for (var b = this.optionsArray.length; a < b;) {
          var c = a++;
          var d = new Jb(200, 360, this.optionsArray[c].name, true);
          d.isMenuItem = true;
          d.setScale(0.8);
          d.targetY = c;
          this.grpOptions.add(d);
          if (this.optionsArray[c].type == "bool") {
            d.set_x(d.x + 90);
            d.startPosition.set_x(d.startPosition.x + 90);
            d.snapToPosition();
            var e = new Kj(d.x - 105, d.y, this.optionsArray[c].getValue() == 1);
            e.sprTracker = d;
            e.offsetX -= 20;
            e.offsetY = -52;
            e.ID = c;
            this.checkboxGroup.add(e);
          } else {
            d.snapToPosition();
            e = new xi(H.string(this.optionsArray[c].getValue()), d.get_width() + 40, 0, true, 0.8);
            e.sprTracker = d;
            e.copyAlpha = true;
            e.ID = c;
            this.grpTexts.add(e);
            this.optionsArray[c].setChild(e);
          }
          this.updateTextFrom(this.optionsArray[c]);
        }
        this.changeSelection();
        this.reloadCheckboxes();
      }
      h["substates.GameplayChangersSubstate"] = cn;
      cn.__name__ = "substates.GameplayChangersSubstate";
      cn.__super__ = bb;
      cn.prototype = q(bb.prototype, {
        getOptions: function () {
          var a = new fg("Scroll Type", "scrolltype", "string", "multiplicative", ["multiplicative", "constant"]);
          this.optionsArray.push(a);
          var b = new fg("Scroll Speed", "scrollspeed", "float", 1);
          b.scrollSpeed = 2;
          b.minValue = 0.35;
          b.changeValue = 0.05;
          b.decimals = 2;
          if (a.getValue() != "constant") {
            b.displayFormat = "%vX";
            b.maxValue = 3;
          } else {
            b.displayFormat = "%v";
            b.maxValue = 6;
          }
          this.optionsArray.push(b);
          b = new fg("Playback Rate", "songspeed", "float", 1);
          b.scrollSpeed = 1;
          b.minValue = 0.5;
          b.maxValue = 3;
          b.changeValue = 0.05;
          b.displayFormat = "%vX";
          b.decimals = 2;
          this.optionsArray.push(b);
          b = new fg("Health Gain Multiplier", "healthgain", "float", 1);
          b.scrollSpeed = 2.5;
          b.minValue = 0;
          b.maxValue = 5;
          b.changeValue = 0.1;
          b.displayFormat = "%vX";
          this.optionsArray.push(b);
          b = new fg("Health Loss Multiplier", "healthloss", "float", 1);
          b.scrollSpeed = 2.5;
          b.minValue = 0.5;
          b.maxValue = 5;
          b.changeValue = 0.1;
          b.displayFormat = "%vX";
          this.optionsArray.push(b);
          this.optionsArray.push(new fg("Instakill on Miss", "instakill", "bool", false));
          this.optionsArray.push(new fg("Practice Mode", "practice", "bool", false));
          this.optionsArray.push(new fg("Botplay", "botplay", "bool", false));
        },
        getOptionByName: function (a) {
          for (var b = 0, c = this.optionsArray; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.name == a) {
              return d;
            }
          }
          return null;
        },
        update: function (a) {
          if (Ca.instance.get_UI_UP_P()) {
            this.changeSelection(-1);
          }
          if (Ca.instance.get_UI_DOWN_P()) {
            this.changeSelection(1);
          }
          if (Ca.instance.get_BACK()) {
            this.close();
            C.saveSettings();
            g.sound.play(y.sound("cancelMenu"));
          }
          if (this.nextAccept <= 0) {
            var b = true;
            if (this.curOption.get_type() != "bool") {
              b = false;
            }
            if (b) {
              if (Ca.instance.get_ACCEPT()) {
                g.sound.play(y.sound("scrollMenu"));
                this.curOption.setValue(this.curOption.getValue() == 1 ? false : true);
                this.curOption.change();
                this.reloadCheckboxes();
              }
            } else if (Ca.instance.get_UI_LEFT() || Ca.instance.get_UI_RIGHT()) {
              b = Ca.instance.get_UI_LEFT_P() || Ca.instance.get_UI_RIGHT_P();
              if (this.holdTime > 0.5 || b) {
                if (b) {
                  b = null;
                  if (this.curOption.get_type() != "string") {
                    b = Ca.instance.get_UI_LEFT() ? -this.curOption.changeValue : this.curOption.changeValue;
                  }
                  switch (this.curOption.get_type()) {
                    case "float":
                    case "int":
                    case "percent":
                      this.holdValue = this.curOption.getValue() + b;
                      if (this.holdValue < this.curOption.minValue) {
                        this.holdValue = this.curOption.minValue;
                      } else if (this.holdValue > this.curOption.maxValue) {
                        this.holdValue = this.curOption.maxValue;
                      }
                      switch (this.curOption.get_type()) {
                        case "int":
                          this.holdValue = Math.round(this.holdValue);
                          this.curOption.setValue(this.holdValue);
                          break;
                        case "float":
                        case "percent":
                          this.holdValue = $b.roundDecimal(this.holdValue, this.curOption.decimals);
                          this.curOption.setValue(this.holdValue);
                      }
                      break;
                    case "string":
                      b = this.curOption.curOption;
                      if (Ca.instance.get_UI_LEFT_P()) {
                        --b;
                      } else {
                        ++b;
                      }
                      if (b < 0) {
                        b = this.curOption.options.length - 1;
                      } else if (b >= this.curOption.options.length) {
                        b = 0;
                      }
                      this.curOption.curOption = b;
                      this.curOption.setValue(this.curOption.options[b]);
                      if (this.curOption.name == "Scroll Type") {
                        b = this.getOptionByName("Scroll Speed");
                        if (b != null) {
                          if (this.curOption.getValue() == "constant") {
                            b.displayFormat = "%v";
                            b.maxValue = 6;
                          } else {
                            b.displayFormat = "%vX";
                            b.maxValue = 3;
                            if (b.getValue() > 3) {
                              b.setValue(3);
                            }
                          }
                          this.updateTextFrom(b);
                        }
                      }
                  }
                  this.updateTextFrom(this.curOption);
                  this.curOption.change();
                  g.sound.play(y.sound("scrollMenu"));
                } else if (this.curOption.get_type() != "string") {
                  this.holdValue = Math.max(this.curOption.minValue, Math.min(this.curOption.maxValue, this.holdValue + this.curOption.scrollSpeed * a * (Ca.instance.get_UI_LEFT() ? -1 : 1)));
                  switch (this.curOption.get_type()) {
                    case "int":
                      this.curOption.setValue(Math.round(this.holdValue));
                      break;
                    case "float":
                    case "percent":
                      this.curOption.setValue($b.roundDecimal(Math.max(this.curOption.minValue, Math.min(this.curOption.maxValue, this.holdValue + this.curOption.changeValue - this.holdValue % this.curOption.changeValue)), this.curOption.decimals));
                  }
                  this.updateTextFrom(this.curOption);
                  this.curOption.change();
                }
              }
              if (this.curOption.get_type() != "string") {
                this.holdTime += a;
              }
            } else if (Ca.instance.get_UI_LEFT_R() || Ca.instance.get_UI_RIGHT_R()) {
              this.clearHold();
            }
            if (Ca.instance.get_RESET()) {
              b = 0;
              for (var c = this.optionsArray.length; b < c;) {
                var d = b++;
                d = this.optionsArray[d];
                d.setValue(d.defaultValue);
                if (d.get_type() != "bool") {
                  if (d.get_type() == "string") {
                    d.curOption = d.options.indexOf(d.getValue());
                  }
                  this.updateTextFrom(d);
                }
                if (d.name == "Scroll Speed") {
                  d.displayFormat = "%vX";
                  d.maxValue = 3;
                  if (d.getValue() > 3) {
                    d.setValue(3);
                  }
                  this.updateTextFrom(d);
                }
                d.change();
              }
              g.sound.play(y.sound("cancelMenu"));
              this.reloadCheckboxes();
            }
          }
          if (this.nextAccept > 0) {
            --this.nextAccept;
          }
          bb.prototype.update.call(this, a);
        },
        updateTextFrom: function (a) {
          var b = a.displayFormat;
          var c = a.getValue();
          if (a.get_type() == "percent") {
            c *= 100;
          }
          var d = a.defaultValue;
          a.set_text(w.replace(w.replace(b, "%v", c), "%d", d));
        },
        clearHold: function () {
          if (this.holdTime > 0.5) {
            g.sound.play(y.sound("scrollMenu"));
          }
          this.holdTime = 0;
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.optionsArray.length - 1;
          }
          if (this.curSelected >= this.optionsArray.length) {
            this.curSelected = 0;
          }
          for (var b = a = 0, c = this.grpOptions.members; b < c.length;) {
            var d = c[b];
            ++b;
            d.targetY = a - this.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
            }
          }
          for (a = new wc(this.grpTexts.members, null); a.hasNext();) {
            b = a.next();
            b.set_alpha(0.6);
            if (b.ID == this.curSelected) {
              b.set_alpha(1);
            }
          }
          this.curOption = this.optionsArray[this.curSelected];
          g.sound.play(y.sound("scrollMenu"));
        },
        reloadCheckboxes: function () {
          for (var a = new wc(this.checkboxGroup.members, null); a.hasNext();) {
            var b = a.next();
            b.set_daValue(this.optionsArray[b.ID].getValue() == 1);
          }
        },
        __class__: cn
      });
      function fg(a, b, c, d, e) {
        if (d == null) {
          d = "null variable value";
        }
        if (c == null) {
          c = "bool";
        }
        this.name = "Unknown";
        this.displayFormat = "%v";
        this.decimals = 1;
        this.minValue = this.maxValue = null;
        this.changeValue = 1;
        this.options = null;
        this.curOption = 0;
        this.variable = this.defaultValue = null;
        this.scrollSpeed = 50;
        this.type = "bool";
        this.onChange = null;
        this.name = a;
        this.variable = b;
        this.type = c;
        this.defaultValue = d;
        this.options = e;
        if (d == "null variable value") {
          switch (c) {
            case "bool":
              d = false;
              break;
            case "float":
            case "int":
              d = 0;
              break;
            case "percent":
              d = 1;
              break;
            case "string":
              d = "";
              if (e.length > 0) {
                d = e[0];
              }
          }
        }
        if (this.getValue() == null) {
          this.setValue(d);
        }
        switch (c) {
          case "percent":
            this.displayFormat = "%v%";
            this.changeValue = 0.01;
            this.minValue = 0;
            this.maxValue = 1;
            this.scrollSpeed = 0.5;
            this.decimals = 2;
            break;
          case "string":
            a = e.indexOf(this.getValue());
            if (a > -1) {
              this.curOption = a;
            }
        }
      }
      h["substates.GameplayOption"] = fg;
      fg.__name__ = "substates.GameplayOption";
      fg.prototype = {
        change: function () {
          if (this.onChange != null) {
            this.onChange();
          }
        },
        getValue: function () {
          return C.data.gameplaySettings.h[this.variable];
        },
        setValue: function (a) {
          C.data.gameplaySettings.h[this.variable] = a;
        },
        set_text: function (a) {
          if (a == null) {
            a = "";
          }
          if (this.child != null) {
            this.child.set_text(a);
          }
          return null;
        },
        get_type: function () {
          var a = "bool";
          switch (w.trim(this.type.toLowerCase())) {
            case "fl":
              a = "float";
              break;
            case "integer":
              a = "int";
              break;
            case "str":
              a = "string";
              break;
            case "float":
            case "int":
            case "percent":
            case "string":
              a = this.type;
          }
          return this.type = a;
        },
        __class__: fg,
        __properties__: {
          set_text: "set_text",
          get_type: "get_type"
        }
      };
      function Ye() {
        this.cantUnpause = 0.1;
        this.holdTime = 0;
        this.curTime = Math.max(0, N.songPosition);
        this.curSelected = 0;
        this.difficultyChoices = [];
        this.menuItemsOG = "Resume;Restart Song;Change Difficulty;Options;botplay;Exit to menu".split(";");
        this.menuItems = [];
        bb.call(this);
      }
      h["substates.PauseSubState"] = Ye;
      Ye.__name__ = "substates.PauseSubState";
      Ye.restartSong = function (a) {
        if (a == null) {
          a = false;
        }
        z.instance.paused = true;
        g.sound.music.set_volume(0);
        z.instance.vocals.set_volume(0);
        if (a) {
          Wb.skipNextTransIn = true;
          Wb.skipNextTransOut = true;
        }
        U.resetState();
      };
      Ye.__super__ = bb;
      Ye.prototype = q(bb.prototype, {
        create: function () {
          if (mb.list.length < 2) {
            M.remove(this.menuItemsOG, "Change Difficulty");
          }
          if (z.chartingMode) {
            this.menuItemsOG.splice(2, 0, "Leave Charting Mode");
            var a = 0;
            if (!z.instance.startingSong) {
              a = 1;
              this.menuItemsOG.splice(3, 0, "Skip Time");
            }
            this.menuItemsOG.splice(3 + a, 0, "End Song");
            this.menuItemsOG.splice(4 + a, 0, "Toggle Practice Mode");
            this.menuItemsOG.splice(5 + a, 0, "Toggle Botplay");
          }
          this.menuItems = this.menuItemsOG;
          a = 0;
          for (var b = mb.list.length; a < b;) {
            var c = a++;
            this.difficultyChoices.push(mb.list[c == null ? z.storyDifficulty : c]);
          }
          this.difficultyChoices.push("BACK");
          this.pauseMusic = new ce();
          try {
            var d = this.getPauseSong();
            if (d != null) {
              var e = this.pauseMusic;
              var f = y.returnSound("music", d, null);
              e.loadEmbedded(f, true, true);
            }
          } catch (k) {
            Na.lastError = k;
          }
          this.pauseMusic.set_volume(0);
          this.pauseMusic.play(false, g.random.int(0, this.pauseMusic._length / 2 | 0));
          g.sound.list.add(this.pauseMusic);
          d = new G().makeGraphic(1, 1, -16777216);
          e = d.scale;
          f = g.width;
          a = g.height;
          if (a == null) {
            a = 0;
          }
          if (f == null) {
            f = 0;
          }
          e.set_x(f);
          e.set_y(a);
          d.updateHitbox();
          d.set_alpha(0);
          e = d.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          this.add(d);
          f = new Q(20, 15, 0, z.SONG.song, 32);
          e = f.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          f.setFormat("assets/fonts/vcr.ttf", 32);
          f.updateHitbox();
          this.add(f);
          a = null;
          a = new Q(20, 47, 0, mb.list[a == null ? z.storyDifficulty : a].toUpperCase(), 32);
          e = a.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          a.setFormat("assets/fonts/vcr.ttf", 32);
          a.updateHitbox();
          this.add(a);
          b = new Q(20, 79, 0, "Blueballed: " + z.deathCounter, 32);
          e = b.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          b.setFormat("assets/fonts/vcr.ttf", 32);
          b.updateHitbox();
          this.add(b);
          this.practiceText = new Q(20, 116, 0, "PRACTICE MODE", 32);
          e = this.practiceText.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          this.practiceText.setFormat("assets/fonts/vcr.ttf", 32);
          this.practiceText.set_x(g.width - (this.practiceText.get_width() + 20));
          this.practiceText.updateHitbox();
          this.practiceText.set_visible(z.instance.practiceMode);
          this.add(this.practiceText);
          c = new Q(20, 116, 0, "CHARTING MODE", 32);
          e = c.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          c.setFormat("assets/fonts/vcr.ttf", 32);
          c.set_x(g.width - (c.get_width() + 20));
          c.set_y(g.height - (c.get_height() + 20));
          c.updateHitbox();
          c.set_visible(z.chartingMode);
          this.add(c);
          b.set_alpha(0);
          a.set_alpha(0);
          f.set_alpha(0);
          f.set_x(g.width - (f.get_width() + 20));
          a.set_x(g.width - (a.get_width() + 20));
          b.set_x(g.width - (b.get_width() + 20));
          ka.tween(d, {
            alpha: 0.6
          }, 0.4, {
            ease: va.quartInOut
          });
          ka.tween(f, {
            alpha: 1,
            y: 20
          }, 0.4, {
            ease: va.quartInOut,
            startDelay: 0.3
          });
          ka.tween(a, {
            alpha: 1,
            y: a.y + 5
          }, 0.4, {
            ease: va.quartInOut,
            startDelay: 0.5
          });
          ka.tween(b, {
            alpha: 1,
            y: b.y + 5
          }, 0.4, {
            ease: va.quartInOut,
            startDelay: 0.7
          });
          this.grpMenuShit = new Ra();
          this.add(this.grpMenuShit);
          this.missingTextBG = new G().makeGraphic(1, 1, -16777216);
          e = this.missingTextBG.scale;
          f = g.width;
          a = g.height;
          if (a == null) {
            a = 0;
          }
          if (f == null) {
            f = 0;
          }
          e.set_x(f);
          e.set_y(a);
          this.missingTextBG.updateHitbox();
          this.missingTextBG.set_alpha(0.6);
          this.missingTextBG.set_visible(false);
          this.add(this.missingTextBG);
          this.missingText = new Q(50, 0, g.width - 100, "", 24);
          this.missingText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", Ta.OUTLINE, -16777216);
          e = this.missingText.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          this.missingText.set_visible(false);
          this.add(this.missingText);
          this.regenMenu();
          this.set_cameras([g.cameras.list[g.cameras.list.length - 1]]);
          bb.prototype.create.call(this);
        },
        getPauseSong: function () {
          if (Ye.songName != null) {
            var a = Ye.songName;
            var b = new sa("[~&\\\\;:<>#]", "");
            var c = new sa("[.,'\"%?!]", "");
            a = b.split(w.replace(a, " ", "-")).join("-");
            var d = c.split(a).join("").toLowerCase();
          } else {
            d = "";
          }
          a = C.data.pauseMusic;
          b = new sa("[~&\\\\;:<>#]", "");
          c = new sa("[.,'\"%?!]", "");
          a = b.split(w.replace(a, " ", "-")).join("-");
          c = c.split(a).join("").toLowerCase();
          if (d == "none" || d != "none" && c == "none") {
            return null;
          } else if (d != "") {
            return d;
          } else {
            return c;
          }
        },
        update: function (a) {
          this.cantUnpause -= a;
          if (this.pauseMusic._volume < 0.5) {
            var b = this.pauseMusic;
            b.set_volume(b._volume + a * 0.01);
          }
          bb.prototype.update.call(this, a);
          if (Ca.instance.get_BACK()) {
            this.close();
          } else {
            this.updateSkipTextStuff();
            if (Ca.instance.get_UI_UP_P()) {
              this.changeSelection(-1);
            }
            if (Ca.instance.get_UI_DOWN_P()) {
              this.changeSelection(1);
            }
            b = this.menuItems[this.curSelected];
            if (b == "Skip Time" && (Ca.instance.get_UI_LEFT_P() && (g.sound.play(y.sound("scrollMenu"), 0.4), this.curTime -= 1000, this.holdTime = 0), Ca.instance.get_UI_RIGHT_P() && (g.sound.play(y.sound("scrollMenu"), 0.4), this.curTime += 1000, this.holdTime = 0), Ca.instance.get_UI_LEFT() || Ca.instance.get_UI_RIGHT())) {
              this.holdTime += a;
              if (this.holdTime > 0.5) {
                this.curTime += a * 45000 * (Ca.instance.get_UI_LEFT() ? -1 : 1);
              }
              if (this.curTime >= g.sound.music._length) {
                this.curTime -= g.sound.music._length;
              } else if (this.curTime < 0) {
                this.curTime += g.sound.music._length;
              }
              this.updateSkipTimeText();
            }
            if (Ca.instance.get_ACCEPT() && (this.cantUnpause <= 0 || !Ca.instance.controllerMode)) {
              if (this.menuItems == this.difficultyChoices) {
                try {
                  if (this.menuItems.length - 1 != this.curSelected && this.difficultyChoices.indexOf(b) != -1) {
                    var c = z.SONG.song;
                    var d = Za.formatSong(c, this.curSelected);
                    z.SONG = Pd.loadFromJson(d, c);
                    z.storyDifficulty = this.curSelected;
                    U.resetState();
                    g.sound.music.set_volume(0);
                    z.changedDifficulty = true;
                    z.chartingMode = false;
                    return;
                  }
                } catch (e) {
                  Na.lastError = e;
                  c = K.caught(e).unwrap();
                  yb.trace("ERROR! " + H.string(c), {
                    fileName: "source/substates/PauseSubState.hx",
                    lineNumber: 250,
                    className: "substates.PauseSubState",
                    methodName: "update"
                  });
                  c = c.toString();
                  if (w.startsWith(c, "[file_contents,assets/data/")) {
                    c = "Missing file: " + c.substring(27, c.length - 1);
                  }
                  this.missingText.set_text("ERROR WHILE LOADING CHART:\n" + c);
                  c = this.missingText;
                  d = 16;
                  if (d == null) {
                    d = 17;
                  }
                  if (d == 1 || d == 17) {
                    c.set_x((g.width - c.get_width()) / 2);
                  }
                  if (d == 16 || d == 17) {
                    c.set_y((g.height - c.get_height()) / 2);
                  }
                  this.missingText.set_visible(true);
                  this.missingTextBG.set_visible(true);
                  g.sound.play(y.sound("cancelMenu"));
                  bb.prototype.update.call(this, a);
                  return;
                }
                this.menuItems = this.menuItemsOG;
                this.regenMenu();
              }
              switch (b) {
                case "Change Difficulty":
                  this.menuItems = this.difficultyChoices;
                  this.deleteSkipTimeText();
                  this.regenMenu();
                  break;
                case "End Song":
                  this.close();
                  z.instance.notes.clear();
                  z.instance.unspawnNotes = [];
                  z.instance.finishSong(true);
                  break;
                case "Exit to menu":
                  z.deathCounter = 0;
                  z.seenCutscene = false;
                  Wd.loadTopMod();
                  if (z.isStoryMode) {
                    U.switchState(new Lb());
                  } else {
                    U.switchState(new Va());
                  }
                  a = g.sound;
                  c = y.returnSound("music", "freakyMenu", null);
                  a.playMusic(c);
                  z.changedDifficulty = false;
                  z.chartingMode = false;
                  g.camera.set_followLerp(0);
                  break;
                case "Leave Charting Mode":
                  Ye.restartSong();
                  z.chartingMode = false;
                  break;
                case "Options":
                  z.instance.paused = true;
                  z.instance.vocals.set_volume(0);
                  U.switchState(new kd());
                  if (C.data.pauseMusic != "None") {
                    a = g.sound;
                    d = C.data.pauseMusic;
                    b = new sa("[~&\\\\;:<>#]", "");
                    c = new sa("[.,'\"%?!]", "");
                    d = b.split(w.replace(d, " ", "-")).join("-");
                    c = y.returnSound("music", c.split(d).join("").toLowerCase(), null);
                    a.playMusic(c, this.pauseMusic._volume);
                    g.sound.music.set_time(this.pauseMusic._time);
                  }
                  kd.onPlayState = true;
                  break;
                case "Restart Song":
                  Ye.restartSong();
                  break;
                case "Resume":
                  this.close();
                  break;
                case "Skip Time":
                  if (this.curTime < N.songPosition) {
                    z.startOnTime = this.curTime;
                    Ye.restartSong(true);
                  } else {
                    if (this.curTime != N.songPosition) {
                      z.instance.clearNotesBefore(this.curTime);
                      z.instance.setSongTime(this.curTime);
                    }
                    this.close();
                  }
                  break;
                case "Toggle Practice Mode":
                  z.instance.practiceMode = !z.instance.practiceMode;
                  z.changedDifficulty = true;
                  this.practiceText.set_visible(z.instance.practiceMode);
                  break;
                case "botplay":
                  z.instance.cpuControlled = !z.instance.cpuControlled;
                  z.changedDifficulty = true;
                  z.instance.botplayTxt.set_visible(z.instance.cpuControlled);
                  z.instance.botplayTxt.set_alpha(1);
                  z.instance.botplaySine = 0;
              }
            }
          }
        },
        deleteSkipTimeText: function () {
          if (this.skipTimeText != null) {
            this.skipTimeText.kill();
            this.remove(this.skipTimeText);
            this.skipTimeText.destroy();
          }
          this.skipTimeTracker = this.skipTimeText = null;
        },
        destroy: function () {
          this.pauseMusic.destroy();
          bb.prototype.destroy.call(this);
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelected += a;
          g.sound.play(y.sound("scrollMenu"), 0.4);
          if (this.curSelected < 0) {
            this.curSelected = this.menuItems.length - 1;
          }
          if (this.curSelected >= this.menuItems.length) {
            this.curSelected = 0;
          }
          for (var b = a = 0, c = this.grpMenuShit.members; b < c.length;) {
            var d = c[b];
            ++b;
            d.targetY = a - this.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
              if (d == this.skipTimeTracker) {
                this.curTime = Math.max(0, N.songPosition);
                this.updateSkipTimeText();
              }
            }
          }
          this.missingText.set_visible(false);
          this.missingTextBG.set_visible(false);
        },
        regenMenu: function () {
          for (var a = 0, b = this.grpMenuShit.members.length; a < b;) {
            a++;
            var c = this.grpMenuShit.members[0];
            c.kill();
            this.grpMenuShit.remove(c, true);
            c.destroy();
          }
          a = 0;
          for (b = this.menuItems.length; a < b;) {
            var d = a++;
            c = new Jb(90, 320, this.menuItems[d], true);
            c.isMenuItem = true;
            c.targetY = d;
            this.grpMenuShit.add(c);
            if (this.menuItems[d] == "Skip Time") {
              this.skipTimeText = new Q(0, 0, 0, "", 64);
              this.skipTimeText.setFormat("assets/fonts/vcr.ttf", 64, -1, "center", Ta.OUTLINE, -16777216);
              d = this.skipTimeText.scrollFactor;
              d.set_x(0);
              d.set_y(0);
              this.skipTimeText.set_borderSize(2);
              this.skipTimeTracker = c;
              this.add(this.skipTimeText);
              this.updateSkipTextStuff();
              this.updateSkipTimeText();
            }
          }
          this.curSelected = 0;
          this.changeSelection();
        },
        updateSkipTextStuff: function () {
          if (this.skipTimeText != null && this.skipTimeTracker != null) {
            this.skipTimeText.set_x(this.skipTimeTracker.x + this.skipTimeTracker.get_width() + 60);
            this.skipTimeText.set_y(this.skipTimeTracker.y);
            this.skipTimeText.set_visible(this.skipTimeTracker.alpha >= 1);
          }
        },
        updateSkipTimeText: function () {
          this.skipTimeText.set_text(Yb.formatTime(Math.max(0, Math.floor(this.curTime / 1000)), false) + " / " + Yb.formatTime(Math.max(0, Math.floor(g.sound.music._length / 1000)), false));
        },
        __class__: Ye
      });
      function Ii(a, b, c, d, e, f, g) {
        if (e == null) {
          e = false;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = "";
        }
        this.cornerSize = 10;
        this.goAnyway = false;
        this.theText = "";
        this.buttons = new G(473.3, 450);
        this.selected = 0;
        var k = this;
        this.selected = b;
        this.okc = c;
        this.cancelc = d;
        this.theText = a;
        this.goAnyway = e;
        a = "OK";
        b = "CANCEL";
        if (f != null) {
          a = f;
        }
        if (g != null) {
          b = g;
        }
        this.buttonAccept = new ub(473.3, 450, a, function () {
          if (k.okc != null) {
            k.okc();
          }
          k.close();
        });
        this.buttonNo = new ub(633.3, 450, b, function () {
          if (k.cancelc != null) {
            k.cancelc();
          }
          k.close();
        });
        bb.call(this);
      }
      h["substates.Prompt"] = Ii;
      Ii.__name__ = "substates.Prompt";
      Ii.__super__ = bb;
      Ii.prototype = q(bb.prototype, {
        create: function () {
          bb.prototype.create.call(this);
          if (this.goAnyway) {
            if (this.okc != null) {
              this.okc();
            }
            this.close();
          } else {
            this.panel = new G(0, 0);
            this.panelbg = new G(0, 0);
            this.makeSelectorGraphic(this.panel, 300, 150, -6710887);
            this.makeSelectorGraphic(this.panelbg, 304, 154, -16777216);
            var a = this.panel.scrollFactor;
            a.set_x(0);
            a.set_y(0);
            var b = this.panel;
            b.set_x((g.width - b.get_width()) / 2);
            b.set_y((g.height - b.get_height()) / 2);
            a = this.panelbg.scrollFactor;
            a.set_x(0);
            a.set_y(0);
            b = this.panelbg;
            b.set_x((g.width - b.get_width()) / 2);
            b.set_y((g.height - b.get_height()) / 2);
            this.add(this.panelbg);
            this.add(this.panel);
            this.add(this.buttonAccept);
            this.add(this.buttonNo);
            a = new Q(this.buttonNo.get_width() * 2, this.panel.y, 300, this.theText, 16);
            a.set_alignment("center");
            this.add(a);
            a.set_x((g.width - a.get_width()) / 2);
            a.set_y((g.height - a.get_height()) / 2);
            b = this.buttonAccept;
            b.set_x((g.width - b.get_width()) / 2);
            b.set_y((g.height - b.get_height()) / 2);
            b = this.buttonNo;
            b.set_x((g.width - b.get_width()) / 2);
            b.set_y((g.height - b.get_height()) / 2);
            b = this.buttonAccept;
            b.set_x(b.x - this.buttonNo.get_width() / 1.5);
            this.buttonAccept.set_y(this.panel.y + this.panel.get_height() - 30);
            b = this.buttonNo;
            b.set_x(b.x + this.buttonNo.get_width() / 1.5);
            this.buttonNo.set_y(this.panel.y + this.panel.get_height() - 30);
            a = a.scrollFactor;
            a.set_x(0);
            a.set_y(0);
          }
        },
        makeSelectorGraphic: function (a, b, c, d) {
          a.makeGraphic(b, c, d);
          a.get_pixels().fillRect(new ea(0, 190, a.get_width(), 5), 0);
          a.get_pixels().fillRect(new ea(0, 0, this.cornerSize, this.cornerSize), 0);
          this.drawCircleCornerOnSelector(a, false, false, d);
          a.get_pixels().fillRect(new ea(a.get_width() - this.cornerSize, 0, this.cornerSize, this.cornerSize), 0);
          this.drawCircleCornerOnSelector(a, true, false, d);
          a.get_pixels().fillRect(new ea(0, a.get_height() - this.cornerSize, this.cornerSize, this.cornerSize), 0);
          this.drawCircleCornerOnSelector(a, false, true, d);
          a.get_pixels().fillRect(new ea(a.get_width() - this.cornerSize, a.get_height() - this.cornerSize, this.cornerSize, this.cornerSize), 0);
          this.drawCircleCornerOnSelector(a, true, true, d);
        },
        drawCircleCornerOnSelector: function (a, b, c, d) {
          var e = a.get_width() - this.cornerSize;
          var f = c ? a.get_height() - 1 : 0;
          if (c) {
            f -= 2;
          }
          a.get_pixels().fillRect(new ea(b ? e : 1, Math.abs(f - 8) | 0, 10, 3), d);
          if (c) {
            ++f;
          }
          a.get_pixels().fillRect(new ea(b ? e : 2, Math.abs(f - 6) | 0, 9, 2), d);
          if (c) {
            ++f;
          }
          a.get_pixels().fillRect(new ea(b ? e : 3, Math.abs(f - 5) | 0, 8, 1), d);
          a.get_pixels().fillRect(new ea(b ? e : 4, Math.abs(f - 4) | 0, 7, 1), d);
          a.get_pixels().fillRect(new ea(b ? e : 5, Math.abs(f - 3) | 0, 6, 1), d);
          a.get_pixels().fillRect(new ea(b ? e : 6, Math.abs(f - 2) | 0, 5, 1), d);
          a.get_pixels().fillRect(new ea(b ? e : 8, Math.abs(f - 1) | 0, 3, 1), d);
        },
        __class__: Ii
      });
      function dk(a, b, c, d) {
        if (d == null) {
          d = -1;
        }
        this.onYes = false;
        this.alphabetArray = [];
        this.song = a;
        this.difficulty = b;
        this.week = d;
        bb.call(this);
        if (d > -1) {
          a = ob.weeksLoaded.h[ob.weeksList[d]].weekName;
        }
        a += " (" + mb.list[b == null ? z.storyDifficulty : b] + ")?";
        this.bg = new G().makeGraphic(g.width, g.height, -16777216);
        this.bg.set_alpha(0);
        b = this.bg.scrollFactor;
        b.set_x(0);
        b.set_y(0);
        this.add(this.bg);
        var e = a.length > 18 ? 0.8 : 1;
        var f = new Jb(0, 180, "Reset the score of", true);
        b = 1;
        if (b == null) {
          b = 17;
        }
        if (b == 1 || b == 17) {
          f.set_x((g.width - f.get_width()) / 2);
        }
        if (b == 16 || b == 17) {
          f.set_y((g.height - f.get_height()) / 2);
        }
        this.alphabetArray.push(f);
        f.set_alpha(0);
        this.add(f);
        a = new Jb(0, f.y + 90, a, true);
        a.set_scaleX(e);
        b = 1;
        if (b == null) {
          b = 17;
        }
        if (b == 1 || b == 17) {
          a.set_x((g.width - a.get_width()) / 2);
        }
        if (b == 16 || b == 17) {
          a.set_y((g.height - a.get_height()) / 2);
        }
        if (d == -1) {
          a.set_x(a.x + e * 60);
        }
        this.alphabetArray.push(a);
        a.set_alpha(0);
        this.add(a);
        if (d == -1) {
          this.icon = new Ue(c);
          this.icon.setGraphicSize(this.icon.get_width() * e | 0);
          this.icon.updateHitbox();
          this.icon.setPosition(a.x - this.icon.get_width() + e * 10, a.y - 30);
          this.icon.set_alpha(0);
          this.add(this.icon);
        }
        c = this.yesText = new Jb(0, a.y + 150, "Yes", true);
        b = 1;
        if (b == null) {
          b = 17;
        }
        if (b == 1 || b == 17) {
          c.set_x((g.width - c.get_width()) / 2);
        }
        if (b == 16 || b == 17) {
          c.set_y((g.height - c.get_height()) / 2);
        }
        c = this.yesText;
        c.set_x(c.x - 200);
        this.add(this.yesText);
        c = this.noText = new Jb(0, a.y + 150, "No", true);
        b = 1;
        if (b == null) {
          b = 17;
        }
        if (b == 1 || b == 17) {
          c.set_x((g.width - c.get_width()) / 2);
        }
        if (b == 16 || b == 17) {
          c.set_y((g.height - c.get_height()) / 2);
        }
        c = this.noText;
        c.set_x(c.x + 200);
        this.add(this.noText);
        this.updateOptions();
      }
      h["substates.ResetScoreSubState"] = dk;
      dk.__name__ = "substates.ResetScoreSubState";
      dk.__super__ = bb;
      dk.prototype = q(bb.prototype, {
        update: function (a) {
          var b = this.bg;
          b.set_alpha(b.alpha + a * 1.5);
          if (this.bg.alpha > 0.6) {
            this.bg.set_alpha(0.6);
          }
          b = 0;
          for (var c = this.alphabetArray.length; b < c;) {
            var d = b++;
            d = this.alphabetArray[d];
            d.set_alpha(d.alpha + a * 2.5);
          }
          if (this.week == -1) {
            b = this.icon;
            b.set_alpha(b.alpha + a * 2.5);
          }
          if (Ca.instance.get_UI_LEFT_P() || Ca.instance.get_UI_RIGHT_P()) {
            g.sound.play(y.sound("scrollMenu"), 1);
            this.onYes = !this.onYes;
            this.updateOptions();
          }
          if (Ca.instance.get_BACK()) {
            g.sound.play(y.sound("cancelMenu"), 1);
            this.close();
          } else if (Ca.instance.get_ACCEPT()) {
            if (this.onYes) {
              if (this.week == -1) {
                Za.resetSong(this.song, this.difficulty);
              } else {
                Za.resetWeek(ob.weeksList[this.week], this.difficulty);
              }
            }
            g.sound.play(y.sound("cancelMenu"), 1);
            this.close();
          }
          bb.prototype.update.call(this, a);
        },
        updateOptions: function () {
          var a = [0.75, 1];
          var b = [0.6, 1.25];
          var c = this.onYes ? 1 : 0;
          this.yesText.set_alpha(b[c]);
          var d = this.yesText.scale;
          var e = a[c];
          var f = a[c];
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          d.set_x(e);
          d.set_y(f);
          this.noText.set_alpha(b[1 - c]);
          d = this.noText.scale;
          e = a[1 - c];
          f = a[1 - c];
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          d.set_x(e);
          d.set_y(f);
          if (this.week == -1) {
            this.icon.animation._curAnim.set_curFrame(c);
          }
        },
        __class__: dk
      });
      function Rh() {}
      h["tjson.TJSON"] = Rh;
      Rh.__name__ = "tjson.TJSON";
      Rh.parse = function (a, b, c) {
        if (b == null) {
          b = "JSON Data";
        }
        return new Vo(a, b, c).doParse();
      };
      function Vo(a, b, c) {
        if (b == null) {
          b = "JSON Data";
        }
        this.json = a;
        this.fileName = b;
        this.currentLine = 1;
        this.lastSymbolQuoted = false;
        this.pos = 0;
        this.floatRegex = new sa("^-?[0-9]*\\.[0-9]+$", "");
        this.intRegex = new sa("^-?[0-9]+$", "");
        this.strProcessor = c == null ? l(this, this.defaultStringProcessor) : c;
        this.cache = [];
      }
      h["tjson.TJSONParser"] = Vo;
      Vo.__name__ = "tjson.TJSONParser";
      Vo.prototype = {
        doParse: function () {
          try {
            var a = this.getNextSymbol();
            switch (a) {
              case "[":
                return this.doArray();
              case "{":
                return this.doObject();
              default:
                return this.convertSymbolToProperType(a);
            }
          } catch (b) {
            Na.lastError = b;
            a = K.caught(b).unwrap();
            if (typeof a == "string") {
              throw K.thrown(this.fileName + " on line " + this.currentLine + ": " + a);
            }
            throw b;
          }
        },
        doObject: function () {
          var a = {};
          var b = false;
          for (this.cache.push(a); this.pos < this.json.length;) {
            var c = this.getNextSymbol();
            if (c != "," || this.lastSymbolQuoted) {
              if (c == "}" && !this.lastSymbolQuoted) {
                if (b && a.TJ_unserialize != null) {
                  a.TJ_unserialize();
                }
                return a;
              }
              var d = this.getNextSymbol();
              if (d != ":") {
                throw K.thrown("Expected ':' but got '" + d + "' instead.");
              }
              d = this.getNextSymbol();
              if (c == "_hxcls") {
                a = h[d];
                if (a == null) {
                  throw K.thrown("Invalid class name - " + d);
                }
                a = Object.create(a.prototype);
                this.cache.pop();
                this.cache.push(a);
                b = true;
              } else {
                d = d != "{" || this.lastSymbolQuoted ? d != "[" || this.lastSymbolQuoted ? this.convertSymbolToProperType(d) : this.doArray() : this.doObject();
                a[c] = d;
              }
            }
          }
          throw K.thrown("Unexpected end of file. Expected '}'");
        },
        doArray: function () {
          var a = [];
          var b;
          for (; this.pos < this.json.length;) {
            b = this.getNextSymbol();
            if (b != "," || this.lastSymbolQuoted) {
              if (b != "]" || this.lastSymbolQuoted) {
                b = b != "{" || this.lastSymbolQuoted ? b != "[" || this.lastSymbolQuoted ? this.convertSymbolToProperType(b) : this.doArray() : this.doObject();
              } else {
                return a;
              }
              a.push(b);
            }
          }
          throw K.thrown("Unexpected end of file. Expected ']'");
        },
        convertSymbolToProperType: function (a) {
          if (this.lastSymbolQuoted) {
            if (w.startsWith(a, Rh.OBJECT_REFERENCE_PREFIX)) {
              a = H.parseInt(M.substr(a, Rh.OBJECT_REFERENCE_PREFIX.length, null));
              return this.cache[a];
            } else {
              return a;
            }
          } else if (this.looksLikeFloat(a)) {
            return parseFloat(a);
          } else if (this.looksLikeInt(a)) {
            return H.parseInt(a);
          } else if (a.toLowerCase() == "true") {
            return true;
          } else if (a.toLowerCase() == "false") {
            return false;
          } else if (a.toLowerCase() == "null") {
            return null;
          } else {
            return a;
          }
        },
        looksLikeFloat: function (a) {
          if (this.floatRegex.match(a)) {
            return true;
          } else if (this.intRegex.match(a)) {
            a = this.intRegex.matched(0);
            if (M.cca(a, 0) == 45) {
              return a > "-2147483648";
            } else {
              return a > "2147483647";
            }
          } else {
            return false;
          }
        },
        looksLikeInt: function (a) {
          return this.intRegex.match(a);
        },
        getNextSymbol: function () {
          this.lastSymbolQuoted = false;
          for (var a, b = false, c = "", d = "", e = false, f = false, g = false, h = false; this.pos < this.json.length;) {
            a = this.json.charAt(this.pos++);
            if (a == "\n" && !f) {
              this.currentLine++;
            }
            if (g) {
              if (a == "\n" || a == "\r") {
                g = false;
                this.pos++;
              }
            } else if (h) {
              if (a == "*" && this.json.charAt(this.pos) == "/") {
                h = false;
                this.pos++;
              }
            } else if (b) {
              if (e) {
                e = false;
                if (a == "'" || a == "\"") {
                  d += a;
                  continue;
                }
                if (a == "t") {
                  d += "\t";
                  continue;
                }
                if (a == "n") {
                  d += "\n";
                  continue;
                }
                if (a == "\\") {
                  d += "\\";
                  continue;
                }
                if (a == "r") {
                  d += "\r";
                  continue;
                }
                if (a == "/") {
                  d += "/";
                  continue;
                }
                if (a == "u") {
                  for (var n = a = 0; n < 4;) {
                    n++;
                    if (this.pos >= this.json.length) {
                      throw K.thrown("Unfinished UTF8 character");
                    }
                    var p = M.cca(this.json, this.pos++);
                    a <<= 4;
                    if (p >= 48 && p <= 57) {
                      a += p - 48;
                    } else if (p >= 65 && p <= 70) {
                      a += 10 + p - 65;
                    } else if (p >= 97 && p <= 102) {
                      a += 10 + p - 95;
                    } else {
                      throw K.thrown("Not a hex digit");
                    }
                  }
                  n = new ho();
                  n.__b += String.fromCodePoint(a);
                  d += n.__b;
                  continue;
                }
                throw K.thrown("Invalid escape sequence '\\" + a + "'");
              }
              if (a == "\\") {
                e = true;
              } else {
                if (a == c) {
                  return d;
                }
                d += a;
              }
            } else {
              if (a == "/") {
                n = this.json.charAt(this.pos);
                if (n == "/") {
                  g = true;
                  this.pos++;
                  continue;
                } else if (n == "*") {
                  h = true;
                  this.pos++;
                  continue;
                }
              }
              if (f) {
                if (a == " " || a == "\n" || a == "\r" || a == "\t" || a == "," || a == ":" || a == "}" || a == "]") {
                  this.pos--;
                  return d;
                }
                d += a;
              } else if (a != " " && a != "\t" && a != "\n" && a != "\r") {
                if (a == "{" || a == "}" || a == "[" || a == "]" || a == "," || a == ":") {
                  return a;
                }
                if (a == "'" || a == "\"") {
                  b = true;
                  c = a;
                  this.lastSymbolQuoted = true;
                } else {
                  f = true;
                  d = a;
                }
              }
            }
          }
          if (b) {
            throw K.thrown("Unexpected end of data. Expected ( " + c + " )");
          }
          return d;
        },
        defaultStringProcessor: function (a) {
          return a;
        },
        __class__: Vo
      };
      I.$haxeUID |= 0;
      if (typeof performance != "undefined" && typeof performance.now == "function") {
        M.now = performance.now.bind(performance);
      }
      h.Math = Math;
      if (String.fromCodePoint == null) {
        String.fromCodePoint = function (a) {
          if (a < 65536) {
            return String.fromCharCode(a);
          } else {
            return String.fromCharCode((a >> 10) + 55232) + String.fromCharCode((a & 1023) + 56320);
          }
        };
      }
      Object.defineProperty(String.prototype, "__class__", {
        value: h.String = String,
        enumerable: false,
        writable: true
      });
      String.__name__ = "String";
      h.Array = Array;
      Array.__name__ = "Array";
      Date.prototype.__class__ = h.Date = Date;
      Date.__name__ = "Date";
      var Vi = {};
      var Ip = {};
      var tp = Number;
      var Hp = Boolean;
      var Xi = {};
      var zp = {};
      ta.__toStr = {}.toString;
      cf.content = [{
        name: "__ASSET__:bitmap_flixel_system_GraphicLogo",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUdRQUFBQmtDQU1BQUFCSFBHVm1BQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQkRsQk1WRVVBQUFBN1FQODVRZjhEemZzRXp2c0V6UHYzSkUwQXpQKzNTME1EelB3RHpmb0R6Zm9FemZzQXp2ODdRUDg2UVA4elJQLy93akU2UXY4NlFQOER5K2c2UVA4N1FQLy93REgvd0RMMEprNzFKMDcveFRIL3dUTC96RFAxSms3L0lrVC93VEQvd0RIMUprMzFKazczSVVyMEprNEF6di90d0REMEowMy93REgvd3pFRHpQdkFSa1VzWDhmSXZ5Ny93VEQwSmt6L3dESTdRUC8vd2pEL3dUTC93REVMb2tzV2pIUTNTUEU3UWY4RHNTOGticXd2VjlVT20xa0R5KzBDeGFrQ3c0NGhkWjR6VU9NQXZFb0V6ZnNCdjJVQndIUDFKMDRBdVNMbE1Fdi93VExIUWtWYmdqTFB2eThQdVNPWlhUMmZ2aXlQdlNzdG5TcGZ2Q2p2d0RFUHJ5U3Z2aTBlcGlkNmNEZ3Z1aVhLcmR2WEFBQUFOblJTVGxNQXZ6L3ZQNzgvRDc5Zm45OS9IKytmRHo4ZmY3L2ZYKytmWDk4ZmZ3L1BEMS9mbjM4Zjd5L2Z2Nzh2cjkrLzMyOHZyNDlQajgvNUdwWGFBQUFDa1VsRVFWUjQyclhXQlpJYk1SaEU0VjVtWm1ZTTgwSTRzMkE3ekxuL1FVTDBLb285Y2VlWDN3Vys2cG9hU2FvMmJIWkJWaXZyWncwQytidVp4U1dEMk5nNk14RVlnM0FSbU5WbWpMbjVNMm9lb2JWVmc3QVJtTEV5b252NWpIeUU5bUJTWXZlTWJDUmw5dXNSVnlFY3hQbHROdmt4NGdpTVIvZ0l2dzAvUm40RUJpSS93dDg1QjVFWG9jc1h6OHg4NU5uemR6VVg4WTN6YzVUY0NJYXR5RGQ4UmI3eG94ZXRRdDVqb0dSR1hpSjRpbnpEVitRYnZpTGY4Qlg1aHEvSU4zeEZ2dUVyMm5PTnRJOU5JR08ya2ZiMDM0aG1YY05YcEtVWnovQ1ZlVWxYU28xWDUwbStNaWRKYXlYR20zT3lGWVpJWTRiaEtReVJyaG1HcFRCRVdwZ3hERXRoaUxRWU1GQXFaVU9rcFRYWElIcU5VbWVJZE1Nd0xHVlpvajNEY0pSdWlmWU53MUIyOVVjM2N4Z29EQ0dPTUl5b3doQmFEUnNvREVtNzlaTjQreWxpb0RCRU5JYVJTV0VJeldMRStsQmpDUEh0TVNLOXF6RWtiUkVqckRBa2JRY2pyREFrNmRMUmVUYWxWL1ZyUDd5YlRYa3lxZnExSGFKRWpmdEZaNE1oaHloaG8raHFOT1JyeDVtTWdpbkpFSlN3d1pSa0NFcllZRW82QkNWdU1DVWRnaEkzbUpJT1FZa2JUR0ZJRnVVRWd5a01TWHIwWDhacFFVeGhTTnFkcU1FVWhzUVZETHFRRElrb0dHbER5WkNBZ3BIV0w0WVlpbUV3aFNFUkJTT2R3aEJETVF5bU1JVG9Yc1JnQ2tPSURtNEhES1l3eEZjd1NxY3d4RmN3eW1PSW9aaEd3UkJETVkyQ0lZWmlHZ1ZERE1VMENoMDIxK01qei9BUkhuMmVBUkpRSGhZdTRpc1BpdHdJQ2tadUJBVWpONEtDa1IxQndjaU4wREZHZmdRRkl6K0NncEVmUWNGb0dUSXlQdFRmWXFTdFhaSzJ1enpFSjc3WENaTVhtWm9XT1l4c2d2b0dNaVBERXlLWFVaUEVxTWhnRE9RNmhOSjZCanNpQ0QrR3lHQU1wQTNDWUN5RUg2Tzg4a1BnQzUyOVN2ZFRmSXFLQUFBQUFFbEZUa1N1UW1DQw"
      }, {
        name: "__ASSET__:bitmap_flixel_system_GraphicVirtualInput",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQVk4QUFBQzNDQVlBQUFEcXhOS1RBQUFBQ1hCSVdYTUFBQTdEQUFBT3d3SEhiNmhrQUFCeVcwbEVRVlI0MnVTWkJXaGNTeGlGYjZSSzhXZDFiNWU2dTd1N1M5emQzVDNWNSs1ZWQxMnBLeG9QUmV2dUVpWG56UStYTU56bHhvRFo2YjZGcnhJN1h5WW4vd3gzRk8wTGdFTTlHZDhNWkl3U2pJRjMwT2pabDY4RWtGTnpuTStkT3pmdzdObXpvMFRDTWx1OHhqZHUzQmpJR0NXWS8xVW5Ndkl4TUNNUG80U1NEKzBhMjYydkREUlYxaEdwWDBVaTVjdEhTUG9VU05qSjJDRUd5a3I2REpUTkhIekpoWmR2MURmOUs0QklFNE9hMTJ4ZkZTY1ZaNUZ3dVk3V3Z2ck9aODZjaWJSWUxJOHNGak1zRnBOZ3pLQnM1dERrTlM0dkw0OWtQQ29ySzBWcGFZbFFLSk95R1hiZGlkUWNSS1prNHhIN0d5blpqQ3d4VUJabHF0bmFOVzdVTnpNZklESkV3R1h4dm5iVENVN1dDU2xmN0VKNERqRE5FeGl3RWpDc0VBdGx6dklHSXBrRHVaQ1RLcS9ybS9ZbDRKY05iRWdHMWllSmhUSURtR3Y2bDQzNmNpVm94V2l0MGtZa1hDNDVPRnY3V2p1em9iM0xaRHFGWGJ0MjRiZmZmc092di80cUZNcmNzMmMzVEtiVElKZkcxcGdON1YxRlJRVzRjT0Vjak1iVE9IMWFMSlI1OGVJRkZCY1hnbHpzc1JNcDJkaVZrQTZzY1FWbUx3Rm1MUllMWmE3M0FCSXpBSExobmZWOHM3Y0NrUW1BWHlqZ0d5SVd5b3hpMmVSQUxuYlFDWTF3NnBkdWlNb0RocTZoUVc1VHlJRmN5SWtYdC9LbGpXTnpDckF1MGFhUUE3azA1S3YrSU5vdzJzNlpNNmRudjM3OUpvbW1kKy9lRXhjdFd0U05ITWlGbkxURjBHd2NibWJ6YWZ6eHgrODB5RzBLT1pBTE9mSE9tbzNEallhMnlXU2lRVzVUeUVIZFFMUytqdTl6SjlKeTRaYVVBU3hZU1lQY3RwQkRVaVpBVHJ5ejFqZHJLeEFZQWZnRTJ4WnlvQTJFbk43M09hRnd3cTJSOEdrQkZ2Z0QvWmZMd2VJQUlQSFRTK1JHamp6MXZrRzVOTHpsSUNSUHo5ZFpmVnZiamgwN0xuTjJkcjVHU3ovem8yNVkzcm1QVUtaKzJBV1V6Und1ZE8zYWRTNDVjYjZPMms1WUxKYUNmZnYyMHZDV2d2Mzc5NEU1NlhhaXRMUzA0UExsaXpTOHBlREtsVXRnVHJ3dlB5Q3NPakZreUJDTUd6ZE9LSU1HRFdwV0o5akdVYkRaQjVpNVdBN2MvSUhrRE9oMmdueGprbWg0eTBGY0N1L2IrSnpvMkdrU3VuV2ZKNVNQTzQ1cnRCUDBod1BEaWFpcHFSNmczSDJxU1BPNi8wSjVWMWs1Z2p6SmovTjFydmQ5K1k2K1J6bDRYYUhuNjhRdWZsdTNhOWZ1aS92Mzd4LzRZZXk4TVpWUld4V1RkNFN5M3lXUUVTQUV5anJyRTYxUTlvNWgweWZkdm4zN1pJY09IZkxJazNOVitFNVVWMWNQZVBldVFwcEtWRlpXS2hVVkZicWRxSzJ0SFZCUlVTbVJieFZEN1lRR3ZoT0JnWUZqVHB3NG9YejY2VTRsSnlkTEtKOS8vcGxDMlI0ZUhrM3FSRTF0ellBblQrVDV0WHY2bEsxejFUdmRUcER2MnpmeStMNTl5L3ZxejRtSlUzZU1pWXA3cVhqNW5sVmNQSTRwTHU1aW9Dd2YvNHNLWlk4ZWw2N2ZDZlVFMUpZSjV5TnFHMkNnVS84eU9SaTJCaStDczhERXN3QzA0NTdIdGF2M1haY0FySldFVGNrTitYNU95MTJ3TWdBSXMvV2RrZzhRbmtzdUlDZlZ0eTExUWRzSm85RklKMzVwK09PUFAzRHc0RUhkVHBTVWxOQ0pYeHJNWmpPdVhyMnE5VzNMZCtLcnI3NkMwVWgzU3YvYStFN3BGTGswMm9uWUZHQVduZm9YeVFFOXVncUxmYUhiQ2ZLbEU3OTNrQndFaE9uNGNwMVl0K2tTNGxQcXNNYkZobmRLN2tCOGFoMjVXSGRDTFVWcjlveHJOUHRuTFNLMlNMTnhFSFR2OFNZb0UrUTJjdVRJd2JTNHhJQUJBOGJVKzY2Tmw0ZU5TY3czeThxM2YvLys0Mm1wODRaT0FTSWt1bE9LekNNbjNyZTF0aE0wQU9YYVBIN0hvVU9IZER0UlhGd3MxZVpCOXg3WHIxL25mZHN5MnJOSFJSTWNIQnpnNHVJQzJlNlV5S21oVHNRa0F6TVd5c1A4RlVCWXpHdVEyN2h4NDRab08wRyszb0h5NEI5S200ZTFyOEZnb0RtQlVXTVNrWkJhSjgyZEVybVFrN1lUanNTdFc3ZDgvdVB1S29EYlNOcnNFOWxPekE1ekZrTExFRmhHZTVtWm1abjNtSm1aK1c2WjZjZmsrRzZaR1V3Ym94ekxkc1R5VE04L3IxeXRxUzdKa2tmcWJOcDVWVjlOelV5ci9VcnBmUFM2YlFBaDJBS21JV3c3SUxmUFAvLzhMbG5tOWZiMjNoSUlCTXprNnhUeWRiL2YrMTIrdVBId1k0SFBlNEhNSk9BNHU5Zkk0Y3Z0dU9xZ0xTQkhOMk8vMDJ0UmVHdkM0VmhOU0NhVE5GU0xZREE0N1pyUXlYZHljcEtHYWhFS2hRcjRkbloyM2djQVo1NTVKc2JIZDhJMllDMlR3OFJFSEIwZEhTWFhoQkF3RG80VEF2LzlQLzc0NHp2bGQ5elQwNVBuNjhBa0s4NjN1N3Y3ZmdBNGJPT3QyRDRRUURhMyszbVN3OEJRQUFjZWZLMjZKbVQveXUxcmQ0QVFkdFUvcm5NeWdiY3pZM243SkR0UjFYeEJZY3RlOTNHeVA1ak5adHNsMzJxZGFHZmM1VGs2a0xkUHhxTlZ6UmQwUkFGZjF3RWRDd0N0emMzQWdFR2EwdEFZRnJTMFNVZDVJcm1DOE5ZRWREbmprWkVSOVBmM1kyQmdRRXNBS2I0bTlQRk5KQklZSFIybHlRQ2lrMi9Bc2l5dUNUUzdhOEkwVGFtdHJmU2E4QnM4VW9rdnNIUDg3YnhsTS8zRmYzYTZ0L3k0WW5BQTRRUkF1T3NndnlZeW1VeDdKWHpIeDc3QVNQVHR2Q1dUeFhrazRyMGx4cFdoclBKVi9FUmoweUxzR0RWSVV4b0RtbHVXcW10Q0JnOGh4SElRZHZVaE9uRG5aZGpuaVQvSVcrdHZQNGkwc0N1ZjB4YXl2YmFZWEdtTzQzaDhxMFRnNHBPeHorOCtrcmZXZTY5RzJyWlFNV3hINGV0R2F1NmdXQWdBSVdiTTJVbHpWb1ZsSVFBSGhCQmlFU1RrbXREa2pCazA2SVJiVzF2UjB0SUNWd3hFNVpDY0N0ZUVMcjVqWTJQWXVYTW4zQjR2RGJGWVRDdGZkK3R1UkFpeFVGWlJ0bTNERk1nS3FOU2FFTUpmVG5YL1BhdnhsMys4VDk1T1BuNENRbGpLR050SzQ3eXowdDY0UDlrWFo1KzVaSVkvUXdrUWNrMVV6UGZHNjFialYzNStuN3h0T25RQ3RxM3l0U2JUT09IWXREZnVGL2JGeVNkV3pwZCtJcjhtQW1Fd1h6RUZkSWR3Z2dWcklpZ3JheDNPT0dwbnNmS21TOUYyNUdGNVczYkptWWd0YmtIRkVIbG5FSmFMUXVGYlJaVVF6U1N4OHFMVDBYYklmbmxiZHZyeGlEWFhWVGluSUNlRjczUFBQVmNQSUtqd05RVU9DdmpDUTBpSE0rN3I2Mk4yQlhlN0grcnE2dUFLZ2xpK2ZMa1daNnl1Q1QxOEdUaFlhU3hZc0FDUlNBUTFOVFdZUDMrK1RyN0JwNTkrZWk2djhwMVpjTWlwNUpyd204bS84VllkTmg3ZWxyZUg3bHVMY0dpN01xYTVzUXNQMzc4K1AyYjkyaGI4Myt2QkdUS1duTlExVVNuZmp6K3R3MEVIdHVYdDVodlh3ckZWdmpXUkx0eDYwL3I4bUgzM2JzR0hIODJRcjFQSTk1bG5ubW1RYTBJNE11Q1pZOEpSK1VLU3pjT3VybTJWT1drVHdrME5VQUhrVHQ1YzBYeGtUVTZFSkt5VjcyRnJFVzZvTCtSNytMcks1eTNrRzRTRWljMWlJY283dmlvQ2g5dnF3TUtGQzVteE1NdW1NK2E5TG1jYzBNbFhCZzVXUjVKdk9CeG1hMGt6WDI5Tm1LY3BsZWNraEwvL0VoOThCRHo3b29CRVkyTVlGNTVqUTFocHZzZGtMb2I3N2xvQVF1SjMvakNBaEkvdHRlUlVmRTM0ZDhSZmZBWDhhSnVBUkVOOUdDZWZZTFBhbUpJTE16RmNlNVhLOXgvK05ZQmt5b2N6VnZsUy93ak9LamRSR0R3cVoyMDVEa0x0VzFBTTh5ODZEV25IaGkrVTRWUnRtODBTQXFITkJ4VG4yM0VNMHBaVlZadE5JcFZLaFJTK2htbEtzTFVIRHlWd0xGNjhtRTZZb2pFemVTeGF0SWpQTlRnM3ZYeGw0R0JyalpzYkpHY0dFc3V5dFBLVmE4SlVUYWtjcDBvRTZIOStMSWhFd29IRWJUZnZpNmFtTHI3RGhyV0RPUEg0aFpENG4vKzM4VCt2Ky93WlFsK3dvNzN5V2hDcGxNZjNxaXYyUlUyNGkrK3djdWtnampyQzQvdmUremJlLzhEWC9PUlVkRTJZcUNrNXhUbnBxenhHNnNOc1VVSEMzdm82SkJyM1g0T0JSVTBWekN2SUNRcDA4UTBKdDBWMUFpVHNOei8yK0s1WmpZSEdTR1dWa2lqRDF6aE55ZFlkUE9qRVpPQlFkaHk1cDJiWndqSXNlQ2lCUTluUlJlR1l6M1VIRHduVE5TVVYxZVdZaVNUdzIzK29GZ1dzTnBMeFQvRGd2U3U5Y1FtQnYvamJVQVZTbzk0Y001a0cvdUZmVkw3WFhiTUFzZGdudVBGNmoyOHlKZkRrY3lGLzg1Y0pFR1pyU2g2Q2VqSjUyWnJ5RVByMXYxZnU2NjQ5VjBzbUwxR3Q1cEhidUVIbCs4K3ZxSHpQUHI2U2VjdndOVWxUa3F2WTBSbzhaT0JZdW5RcENHYnh0YlcxV0xac0dVK0djemVQQm9lcGp5OERCNFBEdkhuekpGOVdTTHhub0dQd2tITnE1MlMycHFUTHVVbGpSUUc4LzZHQXhFbHV0Zkd6ajdaaTNkcEdTUHpUWTBFTURsWFFreGY2K2I3N0FmRDVsd0lTckRadXY3a1YrK3p0OFgzWnJWQkdkdWpqYTZLbWhGMVplYVFkQzNQYWo0UkU3ck5Pb0g4WW1SLzlIeVRhVGowT2NlRi9wMUg1eXNNLzByYkw5NGlEUEw1ZDI0SG9HREt2ZitqeFBXWWo0bFlPWlZHR2s3bWFVdm52bHhBK1Z2TFEwQkFEQnlzTU9pQ3BjYkJWeGJLY3dVT0h3eVFuTFh3bkppWVlPRmhoa0pQVU9KaTlLeFdTZnI3bWEwcWxJR3hVQ0ZZZlFjUVRBaExubnJVTUV1OS9hTHZhQ0h5aERLZXFUeUQ4d3o4SFdWMUE0cFIyaisvblg5ajQwZGJLNWhWaWRtbEtqbE11ZUZnQ2xTQzJwQTBMVHpzZUVvRVh0b0dvMmZZMkpPYXNXSUxSdGN2MWFoNVdaU2tGZDFNdFBIYXp4L2MvM3VGejFMejdtY2QzOFFLTUxtbjFQNy9sUUlIeG1wSSt6VU8ycXFSbXdDc3plUGJnR1R4NEw0VGcxWWhNbm9GRHRxb2twNmFtSmdZT21qYStlNHltcEVIUUhSb0dubnN4aUdMNDg3OEo2UkYwTldnMDBrWkdnUjl2Szg3M2lXZERsYzFiaHE5dG9LWms3NkxLbzZCbEZkbjZKcDhqdU8xMTlma0Y3UlhzdGhLNk0vbUNsbFhrbmMrbStMNzFxZnI4cE0yYUt5VWpOU1Z0em0zbHlwWHk5SGNlN2wvVjQ0RTdPbURPSlIyeENjR0QyM0VWUHJMdHhncEpNMThqTkNVTjBMRkRIbi83anpIRTQ2cU85TktyZy9qeXE3UWNvNzliN0ZSdVR6MGJReUtwOHYzUjFrRjBkNlYzeVQ0VllaYW01S050NWNDWFVheGw1dXUxckw0QitvYW4zazhrZWErMHJxSldUcCtnV3dsZnk4TDhVNC8xK0hadUI0WmpVKzhUYWQ0cnJhdG9KcVdScjVHYWtyYmd3ZllQZSs3UzRmTEs3TDY3dTV0WHprVmpObStFTTI1c2JLUWVvL0MxYlJ2RHc4TzhTcjRHYUI0YU5DVkRLZy9Ic2JCaGJSL1lXaUU4L1dNQm1odS9ybkRTWFZkNVVIaGVzYXdQRGZVcTM2T081RG1nci9WWEh1WnJTdnEyNmtZWHQ3cVo3MXBJZEQzOUNuNllHcEhHZTZWMWxXbmZEQi9RbmxKRW0ydlJ1R1l2ais5clcvSEQ0UjVwdlBmNExsbUl6TVlOUGlvbFVYcFZtS2dwQ1gyVlJ6d2VCdy9VMFpteEF1Rm5lYzlUMmowOVBmSWt0VEZ0S3pwYnRxblk3cEY4ZVUvaE9ScU5xa0hPQUw3K05TVWp6bmtvRmdsdWQwOWtyeWtTeU1QNHhaOWRqc2xzdExKTmptTFg4SFhFZGpkekwrVExZSEx2bmN1UlNVWDFheDZHYVVyU1RlaHZXMTF3a2pMRitsKzZINmYydnltTjkyb3JpRTVRWnh2SWJ3ZzljWlBLOTU3cmNlci9QU2VOOXlyZkxRZjZtYjhNWDhNMEpWbDVhQkxNMlRJWkh4OW5PNGhPamM0dFg1SE1uVHVYRllqTTZLdHdiTm9FYU82a29oN0RRNEFVeWlWZldaR3dBdEVSUU1ocDltdEtHbmFjVzFZY0Y1NXZ1MVhUSERtVjBxZmZkSGdiTm04Y2duQXMvNW04WmpkQnkrWGk2RGpKZG9Oem5xOXk5dVBnZzlxd1laM0wxN2I4WmZIbDNZUlptdEpNTlE4L2lBc0xDeTgrRTM2dzRMVGpFTFZ6MVlTOHl2bGFPVHBoZjN5UDI0eG9OcVYvdDVVSm1wTG1RNEowV215YmNQc3JkL3pJQ29UUFdZSFUxOWV6QXFuU0lUdmtwSXN2SFRJMUdRWVFWaUNTcjc0S3BBd256bTJXcGlRNTZXOWJyVmoyTGU2NFpWOUlEQTRKM0hDSHl2ZFhmMkUvaElQZC9qazcrdm5PYi8wVzExemw4UjNaSWZCenY2THlmZWorL1dEYlB2azY1UTgxbXFRcGlSbTFyU3gvOVIwelhXYThmaEJ1YWtUaTVJMHpyMGZKU1VYbGZKZTJzUlhsajI5RFBSSWIxL3M1dWw0NmZKdWxLV2tNSHFwRGpzVmlyRUFVVFlIMzFFVFlmakZFUTVDNkRCMHdBd1lyRU1tWEFZVVZGSU5oTlZ4cHMweFQwdCsyeXFaNzNmYVA2aXQrNi9lRDdscmdZVHgxbStrTjE5VEF5c1Y4emE5YjgwZ2tlbkhURFFwZjF5bFBuZWw0L2lVQmlZYUdNQzQ4cndiWmJNeGZwZVFZcnlrcGNIUUw1cUVMT3FEZzdMdUFmYzhvdEJQVVZsRERoYWZCRW80UDU2YW5IZzJkdEFVSzd2OGQ0THg3QysyV1gxYjV0aDhGUzlnYXRuM1lCbXBLK2pRUG1mbnl5cFlRVHozVDRUR0F5T2NNSUlRQm1ieWNoMWM2WDJvMmJGa3hnRWkrRENBNk12bFpxQ25wYzhhMlNMc09OZ3UycFNUKysvOXN2UGZoMVB0blhsVDc5RmRmc1FvYjF2WHBGS0I5RWVacDdJNFRzMkJiU3VLZDkyeDgvc1hVK3g5dVZjOStYSGorS3F4YzFxY3QyTm1HYVVvMDI5RW9tTFAxdE9UU015Rmg5UTBCbjNlaEdKZ3BaNzBNR1d3ZGpkUkhOQWptUHZobTAxaHk1b2tlMytFZFFIZi9OSU5qeUhaKzYvRTliZ3RHSWhvMm5KdXBLV2x0VzNHODdMMHpnRkFEb1lPajVzSG50RFZyMXBoUWVaQ0x3cHZPbC9vQkt4QVo4R2pjMmZRZDhUVkFVOUpmZWJRMGRya25zL2VHQkFQRm4vNWxLUDgrRVlkN3I3cWlYL21GTmNpa092VlZIczdNclM3U2hhdXY5UGdta3dLUFBSbVM3OTE3NExFblZMNFAzcjhHOFoyZCtrN0VtNllwbGEwOGZLeUsybE9PQWx0UUVzNXpQeTQ1UHZoanRUOWZmK294MyttcXFEM3lFTGFnUEw3YjNpdzVQdmpteHlyZkl3K3JmbFhZd2tCTlNXaXRQS1JKaDB5SEp5c1FiaWZsVGlGcUNmcWRzUjYrREhqTThKbk5rek1QRWRKUjYrZHJ1S2FrU2ZOZ0crWGhCMVlyYlpSbm5nOVMyRlh3L1I4QlgzOGpJTEhNZFlBMzM5RHFvN3JUeEZkWXVQWG0xV0E3U29LVkJ0dFZIbGc1QVQyOUFoS0xYVkg5c292MTh6VkdVOUlwbURjSHc4Q2YvRnZlSXR3Qk5EMzRYaG5mbE1ob0VLQjk4STNVQUU5OFAyK1IvM2diSmNEM3l2aW1uSTJ5Y01yek5VdFQwbFI1bFBrOE5SRHVYR0pXVCtlM1k4Y09ZMzlYbEd4aE1jT1hCKzc0aDZIMDh6VldVOUlhUEJnMHVycnJYVjBEZWZ2SGYwVlIvT2J2QlpWeDRYRGJkMzdDZkc1REdIMkQ5WGp1SlNoV2JPemYvR05RR1JPcGJkUFRack1ENW1sSzVLVHRuQWNyaVQ5NXpET0t1Q1hBOThwNGZyNDg5R1h5YjN3RVBQbDl6Nkl4bEFUZmUrUDVlVDF0TnVNMEpVZFg4R0FXTEUzNXRlYXlQMDlSbWxrOTcwMnJQSVFROHJOS0M0dW1JU0ROUWsxSmp6T09KL2kzTGxTYmJ1eFhuUVZqdjNQTkk1VUVubjlSdGVuRzl2WVdqdFdsZVppbUtkaysybGJtV1BsVllaQ0pBcjZ6V1ZPU2pzUTBrTk9lejljVVRjbjgvM2FPb0pYaGF4aUVtUDJhVW1IbEVRekFHQVJtSXBnSHpGbklnVUJwdnNJMlVGT3laNVR0bW9LWmNER0lMcm5zVVpvU0lSekQzRVNBbkVyekpSekhEQXVBMTltaUtjMHdlT1FtSjRFNU5lWTQ0OXBJeVQvRWszTUVFQW5BR01LaEFDeW5YTEF6VFZNU1pVOWhoOE1obUlKUUtNZzFVWkp2S0dRUzN4RDU3aUdha3Z5T1U2aXRnekdvclFXc0VwdEVMQ3VGU0FUR0lCd0c3Qko4aFdPV3B1VFF5bTNWSFVzbmdjWHpnSERJakc5NDBUeU1wSktZRG1NQk1jVTFGRFNBYnhDb0NXTWtZRVBCN05XVTVOa0NackpHVkIva1FDNXMxVXdIaXR2Y0hXVUlYNTVhSjk4OVJsTWkwcWsrTEZ3SUJFTzdQMlVMaFlINTg0RlVvbnY2WUpmcmM5ZU5nMUJvOXllWVlaZEQ3UnhXak4yelMxTXFGenkrR292QzdvMytoTHF6MEcxY2ljTHdWd2lVN0N3ejd6N0w1VGZzTTF3VXd6SnpLY3hKTWN4WlEzem5sTG5DVVRyU1Z3ajluNndqMDhuWThQQVdYQTdCWkFDQ2ZyMUk1cFVRUEx5Qm0xMG4xaWh4MG9nSEJyanpTVENuUVFqNHdEZXVGOGswWjhDWXh2MmVJRGJ1SHI1bmhIZHVlMHJiOTQybzF4dVk1b3lzdUdVQ25heXd0Q0taOGkwaXd6Q28xUnJJbFdWUEdvVkNnVmFyemVUa2hHeEVkbGF1V3BITVFNQ1BPSWhMUHA4L1VoUG50VWNEVUMwOW83aHNjZjh1WEF4Qk1BQUJ2MTRrODFJSTd0MUd1VGhVSzY4NGFYUmF6NGdtNURiRFlCZ2VmcitIejZjWHlaUnNVemxFWXE1eU91QXJSOHg3TlRHRXE0a3paNWgzSFp2NThpcE9zZ2hYRFhoeUd4NHJIbWxDc29UTEJwWnltQ3V2MExJdFRocmRVWmlmOEhEZXo4UEFnU3NtWEEzSmJ5MUlscmppV0ZqS1lVNjV0RVk5OWcyWkwrQ3lNd1pEMTFNU3B6TW5wcVhUYVVxbENzR2dIOU0wdHBuUmhMRTlhVzljT1pURVJhNGVlNlp2b3lGSElPTk1UVTBxcGpRemljODNqbXgwVTZuVUVkOUFJT0RLQ3ZxODlwUnN1MFpwL1QreStSOWN2Z3dQNzhQOWUzcVJ6SXVYSVpQdnNySDZGN1pWUHFYVldLUFQvSSs1Ull1eHNSR3VYZ0U1Y3JweVJRODdXYU1xZTM2aHAxeit3blVPK0VyZHVFTzdtaGc1dWVmaHFZTHBBRFE4bDQxK2h6Y2JlZEtmRjZsOWlkS2NpOU9jMTROa1ZiOUdTSDlaNU0xNm5wSnk2Yk5qalFVTXR0bnl0UzAyZlBER0dDRzlFS1gyN0JQTjU0b1huN1VnV1ZYMU83MFVReHhLUHVpN3puNWY3K2VmZjI1di84MFB5eHE2bnBKdEgvUUYyRjhUc3VKck5CcUV3MkZGbEV3bVN6NWZVQlExVVpDSmJ5bzdKZzdpb3B6dEUydEN6dnZMYWFMRnhVVmlzUVRGNGpLcnE2dGFLUlNLa2kwTzRvdGxXUWVXOFI5Ly9ORld5OWNDNUxsaDZ5bko4ajIxSmx5M1E2K1RZS1V3eS9mdmIxbFlLaEtKcnVsRVplYVpVOW5pME91bThBYldrWnJZOFhXY0RyYVZvRldiNWN2WGQ3ejVzTUs3RHh1OC82Z0h5WHI3dnNoWGxkMnN6eXFYRkFQM1lFMzgrdXV2LzdQM0hlQlJWVnZiNzVUMFFpZ0NTZ2dsRUZLNXRDQk54UUpZNzdYM2d0U2Y4bDNGTGxld2dkMFA2OFZlTDFjQnFYWTZBdEpGTUhRcGdVQWdRRG9wWkdiV3Y5Ynp6WWtuTTVra3d5Um5Ub2J6UHMvN0RDbk9lbWU3c3RiZWE1MjlkNUhpRXhXc1YxYzlwV0RwS1pXNyt3UVJoWEpaSUFNQVRRNXRRejlGZE5FVkh3MDVYNFFTMTQ3WEUxR1VrTXNSR1R6UU5EbWhGLzEwNGJXNjRxUHgzYXJvM2JKbFM0eWlkMGU3aTRrRzMwK1VjRFZSeHlIK1pjSTFSRU9HMCthMi9kVjZRMTE4UXB5YXhvOGZyeXNPR2pUSW8wL2NkZGRkTkhYcVZGM3g1cHR2RnIzRUdrVnY5S1pObTVxSVhnQTBaY29VbWpQbkcvcjg4OC9wczg4Kzh5dEZ3OXk1MzlEa3laTnI5SW1XNTk5TjdUdS9xQ3UyYUgyckpEZmkwbXFsVDdEZTdhSzNmZnpkOUxkZUwrcUtjUjJxNnYzdHQ5OWlGTDA5K215a080WVNYVFNZcU4vbC91WEZRNGp1SEViMHQ5NHIzWHpDekNSZVJxOEc0Nk16SjFCS0R1Z0ZaMEQ0cXVJVUdGTHpYcVhNS0hqQTF4QVJQanEwRTZWMm0zNzBPdXo0NnNpZlZmUjI2OWF0Z3ZXdUZyMGpqbStEN2RBSklGNEhQYVg0QzZTL2hZZE83SUNBTmE1UXp6SVZuMWl6Wm8weUU5VUY1TWtsRHI0ZWZlS25uMzVTWnZxNmdJemRpaFVybERFV3ZZNmVQWHRXOFBqS3YvSHBwNTl5SHlkZlZ6MmxtVE5uMXVnVGVTZC9oTU9obnpFbXFrQkI3bklRa1h5T1gxUStJV09NN0N4ZDZXVXRGVGllWFZWdjkrN2RLeFM5ZTNlTTRkVnJ1ZlJ6L041VGltc0RYdjFYNE1DZUo5eDlnb2lDMnJWck40UWJmWWNCVUI5TEpNMEo3K3ozRmNmTThFN1UyeEpCb2ttMGRlclU2UXJKZU1MNCtQZ3JLL1UyYlVWemVsM3A5eFhIekI2RHFYZE15K3IwaGlVa0pBems3K1VBb0VlajI5T1p6bGNUWFR1SzZJWnhSSDhmUTNTZFJoUmIxNDhsc1YzVytTcWFFQjFYcVRjNU9ibTMrRUoxUHRHaFF3Y2FOV3FVMzFjY3c0Y1BwL2J0MjlmcUUwbEpTVFJwMGlTL3J6Z21UcHhJWGJwMHFkVExtL2NHaVQrSVhyVlBEQmt5aEQ3ODhFT2FQMzh1ZmZ2dFFscTRjQUZ6dmtZVVd3dlo5aHg2Ly8zM1pWVlhKNThJajBpaXVQaW4vYjdpYU52eEtRcUxTS3pXSnpwMjdGanBFOUV4U1pUYS9XbS9yemhTdWoxRjBVMnExUnZHL2xIcEUrZkhqcVYrbDVYU3ZTT0pSb3dodW4rMHRodytodGkyZy9wZVdrU3RZMGRYNnhNZ0lpdi9RVjdJdTFSSDh6SXFId0ExTjFucHZ1QVc5SHBvSEwwZDFrNVR2aHJhbHNSMkU1T0ZuSFhXUWo0RWJqai9zZlVpb21BaEQzaWZLbnFEUSttKzJDNzBlbkkvZWp2MUlrMzVhbEpmRXR0OGRwWkh2ZjM3OTQ5bnZXUDVaeVVBS0RVb2toYTI3RVpaY1FQcGVMdkxOT1VodGltMjQ2MWhWZlFPR0RBZ1RuekJrMDl3UTQvNjlPbEROOTEwRTkxNjY2MmE4b1liYmlDeHpiTzBPdnNFejZKSkFxRWt2YkZqeDJyS0VTTkdpRzBacytyMGhqQ0QwdFBUTzZwOWdrL3VKVW1RcjczMkdrMmJOazFUdnZMS0t5UzIrV2dUcjN6Q1lvMm1wczBIa3dTWEMrTEdhMG0yT1lyRXRzVlNkWXc1V1ZmNkJFOG9xdmhFVUhBMHRXNHptRG9sanFhRTVQR2FNcjdMS0JMYlZxdG52WDM3OXEwU0o4SjRFdDBsZFFiMTdMZUhlZzNJMUpROSt1NFMyMXhXYStmUkowQkU1dllNZHQ1QnZFUDFWcTVwclFGQWVpQXZxVFA0ZnViN1JCc0hoMWdpc2dnYm1WN3JEei84RU5LMmJkdUxaUEQ1ZC9icVRTL2ZVRGVBUzBGQjRndUdUelNjM3BTVWxMYmlENFpQR0Q0UkNIRUNSR1RpNVdvUUgyL1FsMy9oQ2hZL21QLzlJTSthUHVhbTNrcjVFRnFTYlM1bjJ4K0lCdEVpbWtUYjh1WExyU0phMk1qMENpMERCdzZNNFo5ZHh2NDhoSS81ZmtRdmV2bE83SUZYWFhWVnRHaGttZ3lmMEVTdnlmQUp3eWNhZFp4UW5FTEl5NmVvbUppWWkvbEMvU3ZrZzBsV2xQOUlQb1NhbkNucmxhN3ZMemJGdG1nUUxhS0paMnlSaXM1R3FsZG9sc0huMzd0UUwzclpJZEp2dWVVVzBXcFdkQm8rMGVCNnpZWlBHRDRSQ0hFQ2FzZGcwU0djYmJyeXhyYkwrUHJOeStWREtwUTNhVWlxYllsdDBjQW5oZlpraEN2NkdydGVaWGFSbUpqWW5KdVBIV0pqWTd1S2t3aDVhZDJuSWFuWVladHBZanN0TGEycDZIRjFDTU1uREo4d2ZLS3VOSHpDelRsNHVkU0VNMk03L3FDcC9FSFR1Zm1vQ2NVVzIwd1IyNkpCSlRhUTlDbzBxMmpSaUdxYkpoZTloazlvb0RjQVlQaUVFU2NNR0RCZ3dJQ0JlcDVWQ0czYm4wMWg5dEtZaVdvTmdheFhEL1RXSjFhdVhKbkNtOTU2YVVtMmVkWmp2R2ZQbmhSbUw0MFpBRDZoNnhqVmxObWJlUnR6QW5NS2N4cnpBeWVuT2I4M3dmazdmZVMvUVlQRFNCcG1XOGJraDIwWmszSnN1LzVGOWwxUGFrcmJ6bitSMkdZTm85WExwanJwM2YwczJmYzhweW5GcHJkNlhaYWdWbzFwRWRhbGpxbld6RStGUEx4czJiS2NaY3VXMHJKbFN6VG1VaExicktIT1k3eHIxNjZIbVRrN2QrNmdIVHUyYTBxeEtiYVpBZUFUdW9oTnZaZ1BNZWN4TStuc2tTbnY0WHl2WHZBZEJ0Uk5HbnZHcEptT1B4OG1PbkE5Y3lEekVvMHBObThpMFNCYVZFNXQ4cWczY3lyUnlVbEVlWTh6SDlPV1l2UEVKSEljbkZvWHZVcGdDR0lHT3htaU1SVzdvc0hxcnRkZE13ZnRtVXVXL0V4OGJJVmZ6bUFTbTdObno2SWxTeGFSYUtsdGpEbG96L3pqajYyMGF0VktXcng0RVMxYXBDM0Y1dXJWcXlnall4dUpsa0R4Q1kxajBvM01yNWhaNUFJKytKSTJiOTVNOHhjc29BOC8rcGhlZmUxMWVuN0tWSHB5NGxQMHhKTVQ2WmxubjZPWFhuNlpwazkvajc3NTVodGF2MzQ5NWVYbFVUWElFaHRpQ3o3Q1NCemJueDdxMlBzSTBZSExpZlpmNGxlS0JzZmVSMGswcVozWlRlK0JLVVI1VHhMbFB1WlhpZ2JSVXBOZVpoQXpoQms2ZVBEZ0RyemplSURXNUYyMy9hKzk5dG80MGFEc2RsYnJyU1p4REYyNmRCRjkrZVVYZmorNFR6U0lGdEdrMXV5U09JWkswRjZ5WklrRWNuOVNOQ2dKeEZXdnViSDVoRWF4cUNmejM4eHRwTUtPSFR2cDA4OCtwd2tQUDBwL3YrRVc2dDMzSXEvNXR4N3BkUEhBeStqK1ljUHA3YmZmcG0zYnRwRUx0b2x0WTBYaUJWUk9IR3pQbUxpVjl0MUd0TzhTZlhEL0hSeU0vN1ZHdElsR2hWWDBIcHRNZFBKUlhWQzBlTkJyZFg0dmxPK1l2dDVxdGE0SFFGZjJQSTl1dmVoOFRYbDV0K1lrdGxuREtuNldlNGhvVXVrMXUvb0VsNHUyeXFtdkVyejF3TGx6NXhCcjh1Z1RmR3o3MWw5L1hTM0JXeGRjdTNZTnNTYVZYblhTY1BlSnJsMjd5bEVzbWpJMU5iVkduOUFnQmcxa3ppTVZ0bS9mVHErK1BvMnUvY2VOM2lRSkw1SkpiN3F3VDE5Ni9QSEhpVSsrSmhlSWxvR29FUWJNVEJQVElxeXcyWktCa3dDUlB1aklRMmxwZVErblRvdEtyN1ZTcjdrY0lPaUQ1Z3BQZWkzYytBM21zNW5lNXZzZTVzMTRvbWZ2c28wUDRic1pJL0hWaC9kcHlwKy9HZzJ4UFgxODF3Rjg2OTVQL0FqaFM2SlRwUlZxbitBVGFwTkxTa3FoRThnZDNYTEhpRWVmc0xGUGxKYVc2VWh2dVdoVzlGYWgyaWZHalJ2WCs4Y2ZmOFFiYjB6REN5OU0wWlJ2dmZVbXhQYXdZY004KzBUREpJMExtZDhDV002OHZxU2tCUCtaOFYvY2VmZDlHRHA4TkdiTm5vUGp4M05BUlBWT3VXWFNBUXVXclZ5RHUrOGJoa3N2dTV6SC9nMjVEd2FpUlRTSk50R0k2bUhBT1FNS1pTZCsyWjd4R05IZVM1Z1g2NE4vWGtHNTZ4NGdkdVlwUkJTbXF0R0dWZXJOZVVRL1BQNVlUWHJmQWtDN1o5eEE5ajhmOG10UHliSC9Sckx2ZlZpMEVBQkZieWd6eU5VbkZpOWVySk5WaDFLNitwTG16NS92MFNka3hxcVhWWWR3NmRLbHRHN2RPbGU5b1dxZmVQZmRkN2xQSWoybHIvM2NVL3BadExqN1JEM0R1YXI1bUp3b0tDeWtEejc4bUFaZGVRMmw5eG5nTjhwcUpDVzFLejMvL1BQU1Z5RVZSR3N3RExqL2orUzZaem9BbXozakVhSTlGK3VIZTYrZ29nMy9RNktOZDJTbUVWR1lVSTRGcnRSNy9HSDk4TmlqVkxUeEFUZTlmRVJDWHdEMHh2OUxsYUN0bDU0U2EzbEVOS24xQnJ2NmhBUkFmU1dQTDJqQmdnVWVmWUp2NzlOVjhwQyt4NFlORzlSNlE1bmhYQ3JxSjVjQjNYdnZ2YVMzbnBKb1V2dEVQY2ViVzVnN21NU3JXdnJzaXkvcHNpdXVsT0N0RzZaMTYwa0pDWWx5d2pIeHRjWWtjR3ErR1FZcVlSYnlCZjJqQUZnQUFraGZETElRUk52T25UdkhLNldLek16TVVmeUg1OVFMUFpIMXdrMHZqKzhFMW91aE42ZkRiTTRDSERaLzZ4UU5yT1VJN3Z4N040aEduckdQVTBvVWFwOGdJdmdLS1FVSTZ3bXMyK3pSSjRpb1hpNXdFdFlYNU1JbFY3MTh0L21EWUZ4enpUWEl6eStFM2U2QXZ5RWFDZ3FLd01mSnUvaEUvVUJtOEFCbU1aUFdyOStBTzdnODllNi8zMGRSY1RIMGhORFFNRFJwMWdMVDMvOElmRHlIY3BsWEVuTzI4ek1vTUhvZVBBTVlCQUU1bUtnejkyV1c0ZWRWZWJYeTE5OEs1WGRoczNrZjdNMXdLTFh1aTVVYU44OEdydmhMTDlXWit3NndudVVIYXVXdkc0N0k3OEpXWWZjNjJabE41S2FYQTlGRllFUTJid3BkOVpRb0R6SG5OVk1DNXFXaWxRbTFUeENSejRuajZOR2pPSExrQ0U2Y09JRjZnd2VmSUNLZkU4ZXBVNmVFS0M0dWJpaTlKdTdOaUUrQXp6dUMzbnBLelpxNStvVFBTU09XK1NPQVlleFhlUDMxYWZqbmd3L2pVT1loZ0VpdjVIRm9qdWdtelhISG5YZmh3UWNmQlBzWUdNUGtzekJqQVJqSncrRndPQWZDQVcvUXRPTklEQm4rUjYxTUcvUTFxUGxRL0xaTGFrMEViMkJ5YWlLaTF2S2xrSWdVdlY0bG9xWnQvbzRodDgrcGxXa0RYZ0JGRE1adkdZV2NRTHl6NGFxWFoyOVdJbW9KK2NKc1ZsWWRPcUdOOVJJRTdBT3RvRUR4aVhvSXh0d01CcC9wQXo3VFJ3S3lKSkg2bU1GNjhBbmY5ZWJtNW9Mci9VSVVGaGFDOXdmVXUxNStkRGVJeDdlbHNvcXkyKzNRQzlRcklQR0pldmpzaVFCV002L2taanhHakI2THI3a1I3aUFDQWJvbnpHYkV4blhBbkxuendSY2g0Y0NCQTVEUHdsd2puKzFjVHg0Q2k5TjF2Qm5aT2lPcWVTSTY5UmlMcEVzK3hONURGaTl0VkRxelZRa1VWZlZTWFZsM3ZVMDdvRlBhYlVpNjhDbnNQVkRteGZzTDdWWDB6cGt6SitLdmNWWldTdEFQM2NkWGdhVStnakdmemluM05NdmR4K0RIUUdYMmhxeXNMRjhEa2dlZjhGMHYzK1FtVCtLQUx3OEMzNnduczI5SklQV3AxenhyMXF4d2VYWFZxdytRKy9qNjhEUVZnTTNNZGl0Vy9vTDdobzNFenAyNzBCalIrb0pZNUJlZVJvOGVQZkQ5OTkrREVjZmNMSi94SEU4ZUNoeUFnK3BPWXNLN0pCSVRQOEVyRzZKSm9EaXhiM3JoRlNTSnhMUzkxVmU5eWhnclpUYWQwVkZyNFBNRmZDdWFCR09aWWN0TVZyNkdsQzU4U0NCcVRhYjYxaXRsSk43dm9PaVZWWlBQQ1lTSVBQcUVubnBLOWFtSmlBWUFXTWNNbjc5Z0laNllPQWxGUmNWb3pJaHAyZ3l0MjhUaCt1dXZCeitoQmtZNGM1M3pzeHJKNDJ4WEhrVTVtNER0RjdsejN6RFlUKytGZ3ZQYVhlYUZEZkpVU3ZOZDc2a2R3T0VKN2p6Mkd1eGxXWC9wYmRQYlM3MU1GZmpaZFFzcW9iK2VFa0FOR2tna1VmRDlBREtUbDhheEJHWHc1VEkrSlJBaWFqQzkzSXVRaEZHcGxadndVbkx6S1lFUWVmQUpuZmFVaUtnK0VzY3FKajcvNGorWSt1SXJNcTRnb2tiUGlJaElKQ1ozeFdPUFA4bTltOWZoeENyNXpPZDI4aUFIRTk1UkRhcUdwWHVSdCtkL29jQWFIT1dsRGZmazRkTk1YZzBpZDU3SlF0N0JyMVI2SStwdkprLzY2eW1KcG9aT0hsS3E0bDNVRXBDaFFFa2dFdlQwbGp3a1VValRXSktIQWxVQzBWNnY5ajBsWDNzYzN6UHg4U2VmNGUxM3B5dnZGekFJNFJKc3E5WVg0SkZISHNGTEw3MEVKNzRub2lTamJIVVdaU0NIQThqTnEzQmo1cEV5NUJRMmh3SmI2Vkh2eTBBZUlYcFJkN3JxelMxelkrYmhJdVRraGYybHQreWtkelpRWS9MUVUwOUprN0lWRVNtN3dzRTNsU0VrSkVSbTh4RHdOWmRuazBBYVhLOGtDVWw0ZlB1YnJKZ1V2ZksxSkJkSklQV2lTZmM5SmUvL3U3WUFsakNqdi8zdWU3ejN3VWNJVkFTekgzZEpTc1hFaVJNeFk4WU1NS0taaTJVTXpzbmtZZktoWVc2MlJtSmZicEliU3lOdlJrS2Z4NkhBV3ZDVFZ6WkVreWVZZkdpWW15MWgySGU4aFJ0TGcvc2hvZWY5ZitrdDNlaWxEVHM4dzY2dm5sS3RlaUYxLy9vSVJKSThwRndqSmF6S0hnZ1JRVllra2tDT0hUdUd1a0kwTmJSZVpjVWtzM3JwZ1NoNlpVVWlDYVNnb01CM3ZicnVLWGwvUmg2QXo1aHRsaTVianVlbnZnVFJRMFFCeTRqSUtNUjNUc1I5OTkySGhRc1hndEdHK2JtWDU0RVpQWStvRm9sSS84ZW5ia3pzL3ppc0lWRVFITjgxQTBYN1B2VFNSc1AwUEtLYWRVRDZrQ2x1VEV3ZkRpbFZRZlR1K3dGRldRdnJUeS9wcmFmVTRHVXJtYlZMRUpGWFNSNVNvNWNadkh5dDlCU1VFcFl1WnZKcXZaSThoSHlWcVBLenloS1dKQkRmb2YrZWtoZjRtSG5adnYzNzhkeVVGNVhIandNZTBVMWljSDZidHVCZCtlQkhzTUc0Vk1iaUhFMGU1QjI5UUZCVUFuWm10NEhONW9VZENOWFE3dW13b0lnNDdNd01rODJDdnBmWnRPc3A2U3A1S0VHWGlDQ3ZzdkdPYjlwejJ6RWVGeGVuaStUaHFsZFdUSzVsTmZtK1BNYnJ2VjU5OTVSOFNJQzNBeGdxNWNrbm5weWtiSzQ4WjlDeTFmbmNCd25IVFRmZEJQRVhHUXNpdXVQY1NoNCtsSzNzWjRxQW9pMXVsT0Ntb0ZtYmRQUzQ3bE5rNTRaNFlhUG1NdERaQ3JaWG5CWnQ3aXpQK2t0djYxVDBHUHc4c2s4NnZMQlJzMTc5OVpUc0RabzgxS1VMbWEzTEppdDVWV2J4OGlvMWV5a0g2U0VZSzFxRk1ucytmdnk0dkZiUkszMmJxS2dvNy9YcXRhZmt1NllubVhqanJYY2dLdzhpT3VkNFFXd2MrT2g5U0JQZGlTZFFOeGhQVzVYazdRYjJqSGZuanFIQXdhbFFJQ1VzYW5hMXJ6TmozL1htWndKWmI3bnowTXZBOGY5VWVkcUtvaTcwd2daNXIxZjducEttWlN1QkJPQ0RCdzlDZG03TFJqd2lncXc0Sk5qSjEwVkZSYnBaZVNoSkx5Y25SeHJSVXJaUzlFcDVTTDZXWUsyMVhnMTZTdDVySXFJUEFIVGR0SGt6Wm44ekYrY3F4TS9iZGVpRTZkT25ZODJhTlpBeGtiRkI3VENldGdMVjhIc252a2RCOWtZb2FCbzcwT2N5a085bHF4cCtMMzhkQ25LMi82WDMvRjVldkg4TmVzbXUvNTVTQXpTZ0pYSElpaU04UEx4eWhTSEJUWUtjbEgvNCtHc3B2ZFR4L1JxMEFhMThabGx4cUZjWW9sY2E1N0tKVVBvMlhoMmNTRVFCMDFOeStiMTBBQ05sSmZuYTYyL0sxemlYMGF4NUM3UTRyeFg0YmhhbEp6YXl0cHNKamJLVkFxcWVSM0xPd0d5TmdnS0wyVlJIRzdXV2dYenJ6eEJWeXlQSGl1VnBMTFhlK25uYWluVFlVeUpIZzVldFpNVVJFUkVoSzR6S29DYUJXWjRNa3NkZXBld2kzNjhieUlkZzdQV0tRM1FwS3c1SkhGTFBsMERzUWEvM21zU2VibnBLM210Nm1va1ovLzBhdTlrbUVaM3psT1N4ZGV0V3ZQUE9PM0RpR2RRTTQya3JteDNZdUwzWWpiL3c3dWU4NENHSU9pOFJDb0lyL3ZUejAxYWlsN0R4anh3My9yTHhLUExRRFZITk8vNmwxNTd0KzQ1NFhmYVVHcnpuSWVVUzZXbklDa1BkTTVDdjVSQkNkU0RXdzB4ZWtwbXNpQ1JSS0hwbHhTR0pSQUt6MHEveFJxc3dVSHBLNnQrNUdzQTFzbXI4aURjREdxaTZnZkNaWjU2QitMZU1rWXdWUE1ONDJrcktLdkdEUG5KaitwMC9JM1hRVktoaHpabFZ4L2V1NzdKVjFVZDE0L3RQZG1QNjllOGo5WklIcStyTlgrRjdtVTMvUGFVR0t3TkpvaUFpSlhGSUlKUGQwRkw2VWI0dnI3cVp5VXZpSUNJbGNVanBTbm95eWhFYjNvNkxhQXFZbnBJS1k1VGpSNHJsdllrTU9ubGV5OWFRZlVCOG1aUjZySXlHdVpvQ2RkQnFGdHZialdIUmJWQUZmMDRCeXJMOTNqQ1hSbml6QzlMY0dCYlZFbFZ3NUF2Z3pLbjYwNnV2bmxLREo0L09uVHRMZ0JOS3owTUNtZlE0SkhGSVVGV1hYSFN4OHBBbmxFU0xrdWhreFNGOUJBbk9hcDNhNjlXcXB5U2t1cHlXZTIxQlFTRyttVHNmQkJoVTBXSzFTZ0tSNXJteW1mUmFHVE9qYktWaVZKZ0ZkWVpzWk52MU9KRHpmVDBlM09kZ1VwMFpGV0ZGblNHSEl4NTZEOGhiNiswVmZWQkQzejBsTkhqWlNub0g4c1NQUEVhcXJEZ2trS2xYSEFyMUVJd2w0TW9tUU5FcXMzaVpzVXVpMDZ0ZWpYdEtDa1l5TVhmZVBBOHJHZ1BOV3Z4ZjB2N29vNC9VWTJZa0Q0VkJwMzRFTXNiVnp2V0RnTi92QlU3OUFoRDh0c004cUdnRHNIOWE3ZHp4RUxCM0tsQ3d0WDcxa3M1NlNocVVyVTZlUENuQlMyYnY4Z1NUOURnOHY2Y09nckZjQUtWc3ZKTS9maWxWYWE5WDF6MGxNNERoUklRRkM3L3pVTG94R0JvU2l2Q0lTSHo0NFlmS2VNcVltUVA0YkN2dlp2SW9Qd29VYks2ZHRpSmZMdHVHSjVpODdkR1Vud1NLZDlkT1c4bFpPNDBKQkk4Z1hmV1VGRFpvOHBCWnNNeE9wZG1zMU9IVng1M0xxMEs5bElFazBhbExWY3IzWlphdi9jcERWejBsd2MxTWJOcTBHUWNPWm9JQUR6UW85My9zM3IwYnYvNzZxMnJzakpXSGRuUk5IbzFaTDlsMTJGUHlvbXlsRXhDUm9kYy9QU1hCVFV3c1dyTEVXR0hVd2laTllpQ1lPWE9tZXV3Q09YbVlkQlNJM1lPeHJ2V1N5VjJ2N250S3RaZXRKUERvQkhYU29pTzVvaVZRZWtwS3llcFdJc0t5NWIvVTRsb0dyVUhCQ0FrTkExOUZyWXlwakowNUlKT0hvNndjc0lUb1ovUk53WERZS3VBSjlnb0hZSUorWmh1eTI5ZnVmYzlEdTU2Uzl6MFBtY0ZhclJib0JSYUxXZm9RTmVxMVdQU2sxeUo2QTZXbjFJdUpuVHQzMXZIV1FnTlJVZEdRbXg0ek1qTFVZeGg0eWFNc0p4K0lQQTh3bWYyZk9Vd1dJS0lGVGgvSmd5ZVVGd0FVekdTOTVHL0ZvaUhJaE5PbkNKNmh0NTZTdzBuUGtINkZ6Rzcxc1BvUURhSkZ5akkxTmJ6bGlTbWQ2SldkNmFJM1VIcEtBNWhZOCt2YU9rNm9ESWFIUjBDd2VQRmk5UmdHWHZMSTM3SVBkQ1liRkJrSHNqWURtY05BcGhCdEtUYkZkbFJiVUVVMlRtNDlDRS9JTzJnQ1NuWUF3ZUVnU3lUSUZNeTBha3V4YVlrQ1FzS0IwZ3ljT0VDdTE1cVN5OHBEWjZ3NWVjaWRFUG41QlZ5L2paTEFMWnZtSkRocFNyRXBUeFRKbm91OHZJSWFUNGs5ZlBnd0I5TmloSWVIU1JKUkFxbW1GSnNoSWNFUURhTGwwS0ZEN2o3Uk9IczBBNWpZOWtkR0hkM0xZQ2ozb1FTcXBubi9nRXdldHFKU25GeXpDMlE3QkVRM1pjWUJVZTJZY1JxeEhjU21LVG9HVko2Sms2dDI4T3FpRko1Z0t6UGh4QjRMcUhRalRNRmxRR2dVczRuR2pHVGJwK0VvM29nVHV5d29MNEVhc2xmQURnV2t0NTZTcWRia0lmWHovZnYzYzVuaUZDY1BPYllqMnNrb2pSZ3RTWU9Ec1ZWS0phSkZUcEN0Vlc5QmdheEFySWlJQ0dkR2FNeHdYbkZZSVVsMzM3NTlybnJsaVNnN0VUWEdubEpQSm5idjNpUENEZGFCd2R6M2tBbkZ4bzBiQTdKc1Jld3dwOEU0VlFLVVpwMUM5bmViVWZUN3J6aHpmQ3NxY2pPWTJ6VmlCczRjK3gyRnY2L0YwVzgzby9SSUxrNVhRTUVaVloxRjlDSzMrQXhLYzgwNCtsc1FDdi9rL3o1bkRXd25WMnRKSHFOZjJmWk9aRzhKUW1tZUdhZkw3V3E5ZE9XVlZ4WTcvdzFiT2IrWTlkVlRzdG1xNm1WQzVSTVMrR1NYck54VndOekZPNWtQOGt6Nk1ETkxJeDZXVFhCc2U3ZG9FQzNTMS9Eb0UxTDdsektSMUpoMzc5N0xLNmNqeU03TzFwU0hEMmVKYmRFZ2VxVVBvZFpMMTExM1hUR1ByL3hiZnFhM25wTHIrSkl6eWNVQWlKT3k0TkhzWTE2NG1jR1FrRkJaZlNxN3plTmtMQkVJSUtKUUxndGtBS0FQL2dIS2ZFUmZuSFkxU0xSeDdYZzlFVVVKdVJ5UndYOTg5UDdJcm5Ud25jdDF4Zis5TjZXSzNpMWJ0c1FvZXZkL25FaU9EVGNTL2RLWGFHVnYvL0tYZnVUWWVCTnQvM2RudGQ1UVY1KzQrdXFyYWZ6NDhicmlvRUdEUFByRVhYZmRSVk9uVHRVVmI3NzVadEZMckZIMFJtL2F0S21KNkFWQVU2Wk1vVGx6dnFIUFAvK2NQdnZzTTc5U05NeWQrdzFObmp5NU9wL293NlNOR3pkUlNscDNMMmlRcjZvbEFMUisvWHB5b25mQXJEeDRHYjBhakJkV1FtYjZ1a0daRFhoN0hRUlM4MTZsekRLNTlyNkdpUERpL0wweTA5ZVAzZ29IM3ZuNVFCVzkzYnAxcTJDOXEwWHYvYThkaEwzd0NDaTByZjk3U21HeGNMQ1dmMDdQZ29BMXJsQ3ZQQlNma0l0dFpDYXFGOGlUU3h4OFBmckVUei85cE16MGRRRVp1eFVyVmloakxIb2RQWHYyck9EeGxYL2owMDgvNVQ1T3ZwNTZTc3ErQkZlZjZNREVvY09Iak5XRWw3UmFneUNRODhlVXNReVU1T0hnalVYenVDNlhkVEFmZU9BN29LZ2Nmb2VVME1Zc0JQYm5BcUtOeituNUNZQmR5RHRxLzAvdmlWSTgrRmtHaWtwdDhEZWtoRGIyNHordy8zaUpxMTRIWDhiek5YL3Z4TXFkWlhodStoN1lDdzRBd1UyQThMYk1PSG5WaUdJckZoUWN6U1hDZlpqMDlpNHMvYU1Vb3JkdDI3WnpSQ3NUYXArUXBmYWlSWXQwRVpDbGhDYkpRYzVyOHVRVHNzOWgxcXhaa01kWC9RMHBvWDMxMVZlUXgybEZHOS95OTdQaUU3dzNZNmI0aFBSRVpzK2VyWXVla3R4ajh2WFhYOHV1Nk9wOG9qV1RkWjZFQWU4Z0J5VUtwS1RweEFXQlVyYXl0bS9mL2tJT0ZxTjUyWjhQZ0ZwSGdoNFpBUHJtRHRCMzkyakxtYmRCYkZQemNKQ3o5bDdJUVdKNFFrSkNMeUlLRm5icTFLbFBGYjB4SWZUSWRmRTBlMEpQK3ZheDNwcHk1Z005eERZMWl3ejJxTGQvLy83eHJIY3MvNndFQUhWckYweUxuNG1sbksrU0tYZDJxcVk4TmlOSmJGUEMrVUZWOUE0WU1DQk9mTUdUVDNBam1QcjA2VU44eVQvZGV1dXRtdktHRzI0UTI4U3o0enI3QkFkRUtXL1JxRkdqYU96WXNacHl4SWdSWWx2R3JEcTlJY3lnOVBUMGptcWY0Tk44cFNSSGZJdzNUWnMyVFZPKzhzb3JZcHM0QWRma0UxT1k5TkxMcjFCeWFqY3ZhTERWK1cwSUFFMmFOSW1jZUQ1UWtvZTVQWU9kZHhEdlVyMlY2NXhyOUxMaTR5VjFCcy9XN2hOdEhCeGlpY2dpYkdSNnJULzg4RU1JeitJdWtqOUkvcDI5ZXRQTHQ4d040RkpRa1BpQzRSTU5wemNsSmFXdCtFTWo5WW0zbVBUVXBNbVVsTnJOQ3hwc2ZVRXNBYUFISG5pQW5IZ3pVSktINmYzMzN3L2lvdzM2c3ROY3dRNDltUC85SU0rYVB1YW0za3B4YkMzSk5wZXo3UTlFZzJnUlRhSnQrZkxsVm5Ga1lTUFRLN1FNSERnd2huOTJHY2U0SVh6azl5TjYwY3NsdFlGWFhYVlZ0R2hrbWd5ZjBFU3ZxUkg2eEhRbVBmN0VrNVNVOGpjdmFMQzFjK1V4WnN3WWNtSjZ3Q1FQWVpjdVhhSmlZbUl1NXN2enJ4Qm5sNW1TT0pJNHRwbzgyNnRYdXI2LzJCVGJva0cwaUNhZXNVVXFPaHVwWHFGWi9pRDU5eTdVaTE0T0V1bTMzSEtMYURVck9nMmZhSEM5NXNib0UwcnllT3p4SnlpUkE2TEJ1ck5sNndzQ00zbW9nd1U3Y2dqUFFMcnl4cmJMK0NyT3k4WHhGWXBqTlNUVnRzUzJhT0JUUW5zeXdoVjlqVjJ2c2dwSlRFeHMzcTVkdXc2eHNiRmRKWEFJdWR6U3B5R3AyR0diYVdJN0xTMnRxZWdSS3ZvTW4vQkV3eWVVc3RXVEUvOUZpY2xkdmFEQkZ1ZTEwcUJzcFpNa3drdm9KanhiYXNmT244ck9uODdOUjAwb3R0aG1pdGdXRFlxZUFOT3IwS3lpUlNPYUZhcTFHRDZoZ2Q1R0RxVmhQblhxQzlRbHVhc1hOTmkwV1FzTkd1WUdEQmd3b00va01ZRko3Nzc3YitxU2xPWUZEVVpGTnlFQThtUWJPVEVoVUozRXBQQzVMRXBoOXRLWWlXb05nYWhYVC9UV0oxYXVYSm5DbTk1NmFVbTJlZFpqdkdmUG5oUm1MNDBaY0Q1QlJIY3dpZmZRR0FuQlM0YUdoaEVBNGowLzVNUWRnWm8wekU4ZnBvY25INmFjSjQ4UVBYWlVXNHBOc2MwYVJxdkxLM1hSKzJ3MjBiUEhpSjdSaU04S3M3M1g2MUtxc21wTWk5Qmp2OE9EWm41UzZPRmx5NWJsTEZ1MmxKWXRXNkl4bDVMWVpnMTFIdU5kdTNZOXpNelp1WE1IN2RpeFhWT0tUYkhOREJpZlVJNG5XYmR1SFNVa3BYbEJnN3poTXZDT0oxR2didHhOT2t3enh4d2pTajVCRk0yTTFKaGk4Mjg1UkdOWmcyaFJPYlhKazk1bmNvbEdseFBkYVNlNlEyT0t6VEZsUktLaERucVZ3QkRFREhZeVJHTXFka1dEMVYydnUyWU8yak9YTFBtWitOZ0t2NXpCSkRabno1NUZTNVlzSXRGUzJ4aHowSjc1eHg5YmFkV3FsYlI0OFNKYXRFaGJpczNWcTFkUlJzWTJFaTJCNEJORUZNTWtQblNTT3NRblVFSmlhaDFvVU1ZS2dGREdqcHlJQ2J6RWtVVkR4eDBqYWlHQlBNZS9GQTNqV1l0b1VqdXpxOTZuVHhMZFl5TzYzYzhVRGFLbEpyM01JR1lJTTNUdzRNRWRlTWZ4QUswWkh4L2YvOXBycjQwVERjcHVaN1hlYWhMSDBLVkxGOUdYWDM3aDk0UDdSSU5vRVUxcXpTNkpZNmdFN1NWTGxrZ2c5eWRGZzVKQVhQV2FHNXRQQ0lnb2swbTlldmVoem9tcGRhREI4OXUwSlFERW15N0ppY3hBT3BMZDVLU2x3b0VKbTB4QW1RTUErWmVpNFRmV1luTmdwR2h6YWpRTDFYcFBoZ0g4Q3ZpWm9pRTN6S05lb1VYSXo5TmZ4VHVnVjNKdzJaL2ZKRzdWNlF0U05HVmhkTnZWMzMzM1hTWnJXTXdPUFZEUnBmSURxSDFDbW52NStZV3cyeDN3TjBSRFFVRVJpTWlqVHpnY2pnbHliRGkvd3M4UURYTExuN3lxOVNxMFZPY1RjbmdpYjliVGxIenNTMTE4UXJDWmlhVEVMZ0JSSFdpd3RLUUVBajZPQms1c0NyVGtZUkdlc1ZVazd3ZUQ5TUhEQUVyTFNub293VmVsMTZyb0xiVG9SMitSMmFOZUN6ZCtnL21QOUcwK0hHMWU3OGtmOVg1NGR4bnVuNzhZZC94M3JxWWMvdDF5aU8xdUQwMGJ3TGZ1L2NTUGxiN2tFb0JSeFNmT25Fa3VLU21GVGlBSEhzb0JpUjU5d21hekpaZVdsdWxJYjdsb1Z2UldvZG9ueG8wYjEvdkhIMy9FRzI5TXd3c3ZUTkdVYjczMUpzVDJzR0hEYXZJSndXb21ldmJvWHNjL0NZTWxKY1VROU92WEQwNnNRYURBdVVRTlpTZCtlVUltVVdRMlVZUk8yT29ZMGRpTWZHSm5ua0pFWWFvYWJaaWk5L1l5b3R0MHdydExhOVQ3RmdDNmFlNDJHbjJNS01uUFBTWHBhNGtXQUlyZVVHYVFxMC93M2N2cTBwRU9TbGRmMHZ6NTh6MzZ4UGJ0MjZWa3BCc3VYYnBVbXN5dWVrUFZQdkh1dSs5eW4wUjZTbC83dWFmMHMyaXAxaWNFMHVobDB1Ky8vMDd0TzNhbVRnbkpCbXVnakpHU1I3WnUzUnFRemZKZ3JudW1BN0Q5TTVNbzRxaCsySkw1LzNZVWsyampYYnBwUkJRbVRFNU83cTNvdmExVVA3eXJoR2pNVG5lOWZHeEdYd0RVOVg5ZW9ySFordWtwaVJiUnBOSWI3T29URWdEMWxUeStvQVVMRm5qMENiNjlUMWZKUS9vZUd6WnNVT3NOWllhbnBxYjJrOHVyN3IzM1h0SmJUMGswdWZxRXdOa0RJUzdEVVZyWGJrYUNxSVV0em10TnlvbkpNbVpPbUJFZ01BdjVpc1JSQUN6MmVpaFpVVjR1SEFmM1ZaSk81QUFWdHJON0x3QjJpeFdpYmVmT25lT1ZVa1ZtWnVZby9zT3JGNzFuY25OUnZHOWZKY3R5Y2tCbnFWZm9xRVl2ais4RTFvc2VkNDNBSnJOK2VrcGJXRXZhemZkQU5QS01mWnhTb2xEN0JCSHB6Mm5OWm84K29VZTljdUdTcTE2K3grTkJNSzY1NWhyb3JhZkV4OGxYNXhQZzhSV1JzOFNYTDc5c1lDMHVackM0dUJDQ0cyKzhFVEptenJGekJGVFBnK3ZhNGkydys1STBEbWZDdm1vcEJtVHZ3OFJJcXVRMStVY1F1V0VsSExzeXppcUoyR0ZXYXQwWEt6WHU4dkx5S3hTOWRKWThuWm1KWTh1WG9pMG51SnVzVk1uVVkwZFF2SG9sOHJkbndNRjZ2WHBmRDNyNU5ybUx3SWh1RVlNRGV1b3BNV05hdFlDQU5WNHFXcGxRK3dRUlFhOXc5WWxHcE5mRXZSbnhDZkFaV05CYlQ0bWI2SzQrb2NZOEp2aHFYWndwTHpPYTRoNG9ZMU5XV2dMQmJiZmRCaWZtTWhGUXlZT1hWTEZnMkpnZzd5bUpZYXkxRk1kdXVBUS9YNTZPcDlJNlZYTFd4ZDF4N09iTDhYNzdwb2pjdWtHdWcvTXllVlF1bVZ1TFZpRVIrYVMzZ0JQREVGc3B2aHQwQ2Q3c2w0Nzd1M1NxNUpUZTNmSDlWWmZqZ1paTlViWnBBK3dsdnVubDJadVZpRnBDdnJCYVVPclFqNDlYQUhDWVRNcVRRYTJnUVBFSm5RWmpJdkxvRTQxQkx6KzZHOFRqMjFKWlJkbnRkdWdFNmhXUXEwOG9tS1UwZ0Z1MWJHR3NNRHl3c0NBZkFpNVpneStEZ3hPekF5MTVDQ3hNMk01aWxLUTBKWW5oMVo2SmFCSnNoU2ZjMDdFTjFsL1dIYkg3ZDNqei9xSkpnVlVKRkdxOTVDV0w5dS9EQTYyYVlueHFJaUtEUE91OUtxNE5QdWpUSFNHN2Q5VDV2UjNWNkowelowNkVqTE42cFFTZDBPRVFUVzdqcThDaTkyQ3M5b2xHcE5mTVIzeUV5NnMrOVZKMTR3dVgwdFhIL0lyYmI3c1ZkcHZOV0dtNFVNYWtJRDhYZ3BFalJ5b2xLeGt6UjhBbER3VjJKaHhla0dmbEU2TUk5OFMzZ1JyL0tRWmV5QWZlTFFReWJhaEV1OGd3ek9xVkFEcDZwTTQyN0NxL1pjSVh2ZmJUcGJqRlNwREVvTWFLQ21CMk9mRDlHZUNFQTVWb0hSNkdaMUlUVUpybGcxN1ZHTnRJWHowbFJaTm4xRTl3azN2UXQyM2JCdTVMeUV5N1BvT3hxU0gwU3VtR2V6NlErOUN0Vm12OTYxVjhRdi9KemhNK1pHTDQ4T0VBMlZFVkJwVEV3U2NyZzY4ay92L3NuUVZNSmNrYWhUOWtmRmdGeHJMdTd1N3VSSjYvZFhkM2QzZDNkM2QzOTJYZERSYVhLOWpsK3V1VGwwcW5jNWViRHJlSExhQlA4cTlNMjZrYStFLy9kYXFxUFgwMjVzUmp1TWx0b2E0V1RsbGxTUXdhVWpuV2I0RUR1a0RpY1h3RVZtZ0NpWW5CeWd0VXNjdkVsTDlFbVMrUzNFemxrZk1mMDl0YjJITTVsMjlISnNleHZYQnRQenlVZ0RzRzRLQWVlQ09GQVV2Tlc4WEcrWlRmWnhUd0hSZ1lxRUN3MUZQS3pXWHg2T3JxSWhLSnNQamlpK05NVGVYbm4zL1dtMWhBeVMxNHZuMTlmVnJZaC9OUkpKd3Y3TkhTMGlMRE8xQysrcGtZcGVKaHFvOFBnV2VVSFAvN24zL0pHMEZYaElINmdsaTBHOEg1K0pNOExkUlg2ak5jaE9KeGNNMWtCSU1EdXN2NU1sbDQzZ0dkMERDWXdXRG5oYXI5ZXdoNXZDaUI3MDVWWHI3WEpjcjVQVk40bnNTa1BlWHkzWHBtTUh5ejFucEtjMGM4T2pvNnRLQVBaNnFpRXJGK2tXVEdTa0NzRkErSlJpcVZRaHhWY1RqZjVxQ3FxZ3BuRVo4cUppdjRXaUFlQnRjREhIUE1NZVN5YWRBMVlaaXFRei9yNmh0UFg0MXQ4UURJK1l4MGhwMW1MNERCVzdFRWJ3OE1mZjUxZlpXOG5RQkYyYlFxMzgvSk1EUXkrSzg2Y3FrTUc5YTZmTC9zVGZCMWF1anpuMDlYOGswYUZKWFRxL3c5cHdoZnV6Mmw0TVdqdmIyZFpESkpiVzJ0NTE2cVBtcHFhbkNtcWhJWUF1Q3JMVTMwMXFoZmVnTkJvdWQ4NUltMnRqWlhRRUx4VVBYeEhQQ2NoUGJRUXc2aXY2K1g4UTcxUVU4OGluRFNTU2VaV1d2UHFxOXdFVlllOHd6MElnL0RRTUpSN1B4clk3QmRzNGtTazlzdytFN3M2MlhtTkpmdk42bmk1eitUZ05QamJnUXp6R2FYcCtRT3N4WGZuMms0RlljU3NmT0pVeVZjaFJLUy9xMmt3NlJKazR5QURDZDVpbE9RZkZWeGFNYVR4cWc5Zk1WVjRlejVWSXFBaU5Pbzg1Ujg0anlBSTQ0NGdubm5tYWJyeG5WMHRMY2dMTFhVVWppZm5QWDAwZmlvUFBMK1l1VXAzcmZndDNzemdROGc1dk0rS28rOHYxaHNrcGZ2VjRsTXNCV3JENzYyZVVwQlZ4Nm00dERRajRURGVCdEt2Z3N0dEJET1oxa1JsT0JNQmZMYmI3LzlwVy95cWpneW1Rd1NEc05YSG9lNE9WdDBHTDRTdkJJRVpIUjZTajZxajNlQjI5VTNOOTU0STlGSUYrTVZrZTVPMHllb0w5UW42aHZuLzk4YjQrSXhqRGZqUEY2WWF3T093dVJtTmQvaW5vZUZubEl1d09TbWlrUENNV3ZXTE14YnU3d0RDWWtTdEpLeEJNUWNtelp0R3RYVjFmejY2Ni82LzVFV0QxVWM0dVhoSk9HUWtLZ1NjWGE0RldkelRQOXZCRVRuQmNEWEFrK3BkQndJZkwvWlpwdXg4My8vYlladHhoWFVab1V4eWRVWDZoUDlMNFVJS3cvS0svQWdtWVE4Z1VjMm9NcWp6TXVYck1OMzVDc1BDejJsZ0NvUERaM0k0MUFpTThNMFJqZ2tLSG83MWt3bUpWL2pLK2c4bWRKNnk5ZVF5d2dtWTAzSDFkQ2FrcTJ1TVJXR2hFT0NvdmJvSFBGVG1IdExRTVJmaVRzQXZuWjRTaVZ3a3FnbWdiTUFMcm5rRW1iT3FORk9zdU5tcUVwdE5WV0hzNzhhRjE5OE1ZTDZSSDFESVVMUG8yZkNWQXlFUlhMRnhTUGYzRUR1cTQ5TmpMam5NVGpKeTdjNlhaenZ3QjhOUk9zL05oRU1YeXp5bEl6WUJaQklsSVRORzdEeE5pUWNtdTZxUkJ5TlJoSDYrL3MxVENRQlVaSTJIb2lTc3hLeTdqRVN5VmpuS1BFYVExTWN4RVVWaUNvT2NUUlRhaFhpcHlySlZFY2FrdEQvcTIzQjhMWEFVeXFCazU1NVAzQ0hoT3V4eHg0am1lZ25PWmhnckVOdDdHaHJ3Y3l1Y2hZRW14ZU5POVVuL0RsQzhmZ3lnUWNiVGkrSHpOQyt4MEh6WkhoaHd5WCtINXN1RjR6bjRiOGk0TmNVSHF3d3Biem8zbFU3VE1wdzJlcExvTGg4bmVYOHJUREh2OWpaNENrcGdqRE1UYkl5U1ZoREtCSU9KV2hWSEJpNEFxSXBzTVpuVUVoUTlOYnNJN0dWYkVETGc5RXZ1MmRvVGNLaGhLeUt3NFVySU9KbUJNUUludG9adkhqWTZTbjV3TjdBYTlxTzQ2Njc3cUtyczgySTY1aUUydGJXMm9UeHlOVG1aWmRkRnVCMVlDK0dSamhzcFhpNmF4Q0R1a1ZxcUJwaW1taXU4UmNPV1hZMkc4OWFBRVc4ck5KL2NzT0xVdmkrSDNQNWJqeTdodHhQZjg2My8vZGYrUHNTczFsdHhnSW9FdVVCOGJYU295azVrVWdFNUhPWU4zUUpoNFo4VE1VaERDa2dTbkJLZmdzdXVLQXFBVCtwcmVSa0xJNTZsa1JQdzFCR09NU3BFSjRLUktLalpDSHVpcEtUc1lUUU5rL0pQNmVDYlV2MkFKcnI2dXB3dG5oSFBrQTZuUnB6UTFWcWsxblBvWDUxdm9lQzJxeTJBN3VyTDhhVmVBeG5yNmhua3BNeDBCcUVHMWVaU2JiK1BYTHR6ZVJpRVhMZEhXUy9yZWVrNmp5TFZFM0JRTmY1ZlVhUWl3US95YnQ4cHp0OGoxbDZKcEdQMzJPd3RabFVORUt5czRQNFYvWDhhM3FlV2U2MFhsMFgvS0pHU3p5bElEd1BWUmRLdmhJTmhieU5XQ3hHTVVoQXRIcGJDWHpSUlJmVlc3enVNeUp2OHFvdWpGRXU0WlBRRlFwSG9ZQjBkblpLNkpTc2xiUjFIMTljRmFQZlUvSWxJSDhBV3dJOU8rKzhNeWVkZUR3dFRRMW9oOW14QXJWRmJlcnJqU09jZDk1NXFLMXFNN0NWK29EaUNCY0pLdTdwaHJmNzhoalVMVnJMQjl1dXhNNWxVVGJzL29VZEU4MDh1T1ljVGxselNReStITWpwdWhGZkpLaDR0UmUrVHJoOE4xNm9sbHMyWG9rTlUxRVdhL21GbFdQTm5MSENIUFplMmVYN2F6S242NEpmSkdpTnB4Uk1JbEdWOGZ2dnYydVl4Q1JWWDVDQWFHeGVNNWlFa1hxVGwxaG81YmhDczY3OFFnTFMzTnlzZmErQ1grZGh2NmZrUjBDK0IzWUFPT0dFRTdqb29vdG9iMnNtTWREUGFJZmFZSWFxMUs4eXg5VkdRVzEyL3V3Ny9DSGNua1R4cjkvTGFFamxNVmlsdW9xYk4xdVJsK3JXNHFGdFZxTnVzVm9NNHRrOC8yNG9MLzNOdUFTKzUzZVYwZUhlbEtVV3FPTGs5VmZrbXEzWDRvSk5WME9DWXRDZnkzTkJWL0I4cmZLVUROL1J2d0o2OVBPMXhGTXluRW9Ra0hlQWpRQ09QZlpZYnJ2dE5xS1JUdUx4NktnZHF0SVFYR2RIcTZuNDFDYXovWWl3a2RxTXdiaXRQSHpEQ0FLczkyTVpiL2RSRkRxdTh4cFMrRWFlNEJZSm11akx3aEV0Wlh3OVNGSG91TTVyVC91L2Q4NlA1MkdacDVRTnhjTk92aFo0U2dFSXlQcEFZbzg5OXNENTdqejViSnBZcE12Y2YxUkFYTVhaYkhZb0VWWmIxQ1lnQWF4bmhHUDhpa2NKdTc3R003RHR6N0RlRDNCdW00VENqV3M2ZFV3QkRVbUMyL1cxQkw3OVdUaTVGWTVvaHZ1akVnbzNudXJSTVFWMHBJUGxhNk9uRkZZZWx2SzF3Rk1LUUVEZUIxWUhHdlc1M2M4Ly81eGxsbG1LcHNaZkdlanZ3M2FJbzdqMjlzWVIxbHh6VGVycjYxRmIxQ2ExelduakIvaEJPTnVxZUh3NUFPZTF3clkvdVhGOGs2YVpsbURvNGtXUWZIOUx3Z05ST0xuRmpWdTc1SXNNODU0VTU1dTEwRlBLRW9xSDdYd3Q4SlJLOVVBMkFsNVliTEhGZU9lZGR6amtrRU9JZEhkb094UFNHZnUyY3hjbmNldnVhamR0RUdkeDF6WXdBQytxVFdvYkhvU1ZoMVVoVGw1WXpoY3ZyUFdVd3NyREowSytBUWhJb3hQYkFiZXBFcnI2NnF0NTlkVlhtVFd6bHJibVJ1TFJicktadjM1YmQzRVFGM0hTYkNxenllRnJyNzBtem9pNzJ1QzBaVnUxQ1JlRTRnR1VXNVNJeTRvblk3S1lKR2hIbFBrUkR5czhKZitjek82eWxzQVhGNHZvaXN2b0YrZmcvdTcyQnY1dDlzTDYrdXV2TlJ1TE1uSzBOamNTaTNhUlRxVVlhZWlaOGpURW9iY25acndOemFZU1J6YmRkRk9BNzhSZGJhQVFoTU5XZ3ltbWxkc2pIcFBMSVp2T01oVHl5UlFWWlhaMVpxNlE3NmoxbE13MDBjcktDbXhCUlVXNXBxY1c0K3VjWXhQZkN2RU54Y01Wa0FlQlZZSGI1Y05vTnBiV29KeDk5dGxNbWppQjlyWW0ybHViNk8ySms4MW1tRnZRdmZVTVBVdlBOSldHSmhhSWl6NURyTmxVNGlpdXdHcml6aEFJeGFNdHh1d3BVR2xCUXA1UUJyTW5RN3FwYytoek9tTmt5cURDQXFHckJISmxNS0cxMDc5NFdPQXBpUlBGZDU3Vkttd2JxZyt6czIxUnMxaXpqUFFMYnd0ZnpYUVMzMUE4dkpzcE9yRVhzRDd3bkdhVG5YTEtLUklScnJqaUNwWmRkaG5pc1c1VkFrcnVxZ3EweHFLazdVNTByZTZoZSttZXVyZWVvZFhpd2tvcnJjVGxsMTh1RHVKaUZsbytCNnducnVKTWlJSWZsS2ttbFV3NzQzL3NuUVdRRkZlNGhkZmRkOUYxeFozRjRaSEYzZDA5bnVDOG9CRXNIdHlKR3c1eDNOMGQ0dklraXR2S2VlZWthcXFhZmp2RW9LYzNOWmM2TlhkdXkvL1Y4Ty85KzByZnV4TVJoM09RZVFwSU9nd1VPZ0JFV3l6WlRLWnRNVVFjelVYUTJBMWlBLy96cm9CRkVwL205QjFsbnQrQnlDTTU2UG9sMFBOem9PTjVvUDA1YXlXYnNpMkdTUEtXbkxMK050N2h3NGNuTzNoakR3SkJObExFSWFENDdsdEczaUN6VDVBZml4Y3Z4dXJWSy9IdXUrL2l6VGZmeEJ0dnZHR3BaUE85OTk3RHFsV3JJQlp1dE9QVUo3aXlLejcrK0dQczNMa0RXN1pzQWZ2V3NXSERCa3NsbTF1M2JvRVl4TUsza0ozNkJOZEVBcGZ5c0l2STh4cjREb1BaSis1MUhWU2ZXZzFET25Ub0VJWU9IUXBPVVJZTEhQTDA4b0tmbno4Q2c0SVJFaHFHc1BCSWhFZEVJU0l5R3BMeUt0TXhuYU56ZFkydU5VdjNsZzNaTXFYVll2TDQ4OGtkUElLR3JVZnd5MGNRZGlnYk5jNENkVThEdFU4QnRTeVNiTWxtalROQTJJR2JDSDdwTUFJZld1MjBvcWd3NlRPa0x6ak1nSmVOTmw4QUE3NmlxUDRXeVdHckpXMUhIcnlKOVBtSFVIYk1xdHQ0SjA2Y21PRGdMWG9BQ0tHQ2JDRXhBMFYyM1RsNGNKWUp4bzRkaTRVTEYwSUJaTjI2dFZpN2RnMjEyaUxKMWxyYVhvRUZDeFpBTElNSEQzYnFFNU1uVDhiczJiUHgwVWNmWWRldUhkaXpaemQyNzdaV3NpbmJIMzc0SVdiTm1vWHg0OGZmeHNzdFNoUDRzaC9FeTNXUkpMc0VEd2JyMXkwUEhvNEVvQW8xaHpwR1FZbHY1ME9WK3dzdnZJQjI3ZG9oSVNGQmJIOUx1bGIzMEFPRzdxbDdHNUpzeW5iVlAwL3NEaDZCY2hKbEF4OVlyZ0NDb0hIYkVQem1sd2paOEJ0Q3RseTBWdXQvbFcwRVBiRlZMQWdjL0k3RGtYOEZFQ2F4b3JqQzd5Z3pjcGtDQ01wTTM0cjRaVjhpWnZOdmlONTIwVklWMnZTcmJLUHMxQzFpUWVsaGJ4dDV3MW1aUkpIM3BuaGp0dDlBRVQzMTc3ZUhpaDBDWXJaY00vSUdtbjFpd0lBQkNpQjZRdE1UTkdiTW1LRUswVkxKcG14enUxT3hvRisvZms1OWdoV3pBZ2c0RUl1bFM1ZGkrZkxsNERMaGxtclpzbVd5amVuVHA0c0ZvMGVQZHVvVENzcHZ2ZldtYllMSDIyKy9DZTZFWi9ZSnl4T0E5dFQ3eUNkeDJqSUQ5QjYxaE1HdUpyQ2JTYTFSUFZSSXlxdE14M1NPenRVMWNKTGVsNjIvUitrT0hnRjgzZjZFc3Y2dEo2bkN0cFg4bW82RzJOaDN2QmRBcU1RKzdSTjBiQ1IxbWFnSzIxWkthRGZxTmw2K1ZCVGg0QTEvNHpRcUhWZXJ5dldCSTV3TVZjU3k4S0NSTjhEc0U4MmJOMWVGYlNzMWF0VElxVTl3a1RwVjJMWlN4NDRkeFFzeWlqZnN3SUVENGVKVjJUUFBQSU1WSzViYm9mVWhCZ2EvNVpnd1lZTEpKMXhhUDNsUjFhaGgxQ3JxRy96OXBHdDFqeEZVZGQzN245RzVnNGMvbHp5WXA2eG5SSEVFUGJMV1BzSGowUS9nRlJrUHNYSHEzUE1BZ2lYbTU2dk1QNm80eWoyeHhqYUJvOXpZZGZDUGljdVBWNzh2dkV2WFFzU3ViR1FldDhHWUVoa2lkdWZBcDF4OThZSkxXVXlYTDVoOWdnT0hHREpraUcwQ3gvMzMzdyt1aHV2VUp6aGJCdXdxdEUzZ21EUnBFcmdzdXBFM2hBcmk3ejFYWmFtcHFWaTBhSkd0eHBTNEo0ZlpKK3hXWjBWU05hZ3UxRkRxR2VvVmFvR2t2TXAwVE9mb1hGMXo5MG5jd2NNM01UR3hDZnRndjlOWDc5U2FHbWR3ZWVCUUY1cDNTbldJU1d4cGFXa05BUVJJL0lOcjZ1QU5LMUZUNHd3dUR4enFRZ3ZMeUpjM01DTWpvejdMZnRReHY4NmpFTGJqRm1xY0FPcWVCR3J6czVaRmtpM1pyS0VXeDdZYjhPc3dEQTVlYnFGWlRiNlFuMC93eldCMUI3ZzhjS2dMalV0dC9LRlBsQ3BWU3VNTUxnOGM2a0p6Vk1SaTR3dG5qZVFQNGpYNlJKTW1UZXd3cHFUdUtyWHE4dkdKL0pNN3VZT0hELzhncS9QcGFBaWIvUmRVNUJrU0E5L2EvUkRRNVNVRTlKaGpyVHEvQU5uMkRBeDM5THRlNGo3TkEvakhWaFdBbjhSS280YVIxemNzQmtXeitpS3QvNHZJR0R6YlVxWDJmUjZ5N1JQc25MZDI3ZHFwNUgyUXg2N3BISytrY2dpY3ZBN0JLMzlBOExvZnJkV0s3eURiWHNWU2IrT3RVNmRPZ256Qm1VK3dKWUlhTldxZ1E0Y082Tnk1czZYU0lLZHNjMVhZUCtzVGVzcUhLa0lGdlFjZmZOQlNEUnc0VUxiMW0rWEg2MC81Wm1abXBoaDlnc3V0SzBCcU1GZDk5WlpLNDBPeXpVVVVuZnJFWFU2ZWxCZmxTd1ZRUVZTb1NTclRNWjJqYzNXTk85a3BBYXpMbU9pOGpXSmpZenV6bjNPbml1MGdEaXFlNEdZM2ZjVEd5aUVPZ0xkVXdIaDlPUFBIbjl1RTF0VWZKTTg1YnpkZXprS3B3MzU0WC9tQzJ5ZnVIVytaTW1YaTVROEYwU2Z1VXNEd29ZS29DQ3FKNmtTTnBaWlF5NmhQSmVWVnBtTTZSK2ZxR2wycmU5Z25rTGlEaHllYnE3NWNycmttbmFZaEhib3g4NC96cVdreEIvVzJ5ckd0RkcxdXB1MEZZaENMbU1TMmVmTm1Iem15Vk1CNEpXOHVjUkRCWTFtczQ1cXd6MzZFWFhpNVNtdjlaczJhaFltUjhuVDdoQ1c4bmdYSkorNUNDOE9maXFBcVU5T293N1NaeHk2OW0xbFpXZGU3ZHUxNnZVK2Z2dGM1dG5hTnJiYnJYYnAwdmRxcVZhdkxiSjFkWVJDN3hza2J1YnFHMHJXNmgrN2xiNE1XaVR0NFNQeVBET1dibnZVNDROaFF6cTRuSlRtU0hOc29QdTNkVlpudkw1dXlMUWF4aUlsUGJDRU96Z0xLSzNucEQ1TG5WYmNMTHl1SnpFNmRPb1U0S2pUSjdSUDNuTmVyd1BuRTMwdU9vQkZGOWFRMk1VRG10R25UOXNia3lWTnlYM3Y5OWJ6Rmk1ZGczcng1bk5MOEhDY1dQSWtubjN3U28wYU54c2lSbzZFWlgvLzV4RmlNR3pjQkdyL3EzcjNIbFVxVksxL2duaWEzZEMvZFUvYzJCQkZYSm5jQW9TTnJsazE1YnFTZnhWazJEZVQ0RHNteDdxV010bVJiREhTVUtreEJEcjZDenV0b2haUXNXVEthQTlMSmNYRng1VlZ4U094dXFYRXY1YkJEbStWa204c3hSSXJIV1NYaDlnbko3Uk4vczdYaFM0VlJQYW5ObkNpUVBXN2MrSnZ2djc4TWVnRng4cFNwSEdONUJKMDZkMEdEQm8xUXQyNDlaRmFyZ1hMbEs2RlNwY3BVRlZTdWtvbDY5ZXFqY2VNbWFObXlqWUlISjB3TVFyLytBL0t5c2hwY1pDRFNlMGhicUY2eUpadnVWb2dOZ2dqL1k4TDV0SlJJNXk5TDU4L2s0S01sa2kzYUxDUGJZbkR3L010NEhmSXl5TnNLR1cwYVdkdytZVDN2djNpdHZBQXFqbnFONHprNWJFSGNXcjU4QldiT25JV2hRNGVoWmF2V3FGQ2hNcEpUMGxDc2VEd2lvd3FqU05GWUNWSFJSVkcwV0p5a3ZNcVVSK0Vpc1VqUEtJbXFtZFdSbGRVSWJkdTI1OFNOVHNqTXJQWXpsMG0vSmx1eUtkdnVWb2c3dVpNN3VWUEJTdDVVRU5XZHM3Vll3YmU5c1dMRkNuWkx6V2NyNDFHOWJJcVUxQXdVS2x3TW5IV0c2SmlpaUNsVURKd096TExpVkN6S2xpMnJRQ0VwcnpJZDB6azZWMUs1QWdtcTE2aU4xcTFiczlWU1A3dHdrU0xhWEJ4VUR6R0loWEluVjdVK3BLMWJ0NWJoNG5KVnJSUnRsalF5L0JYZWMrZk9sYUdxV3F5L3dXc2YvVldmZUJxdnBqK0ZwVld0bEd5YW1mOXR2SGJTM3d3Y29kUTR0cnh5dVRUSXJiZmZmZ2ZqeGs5RWl4YXRrRkdpTkFOQ2NiVWlVRHcyQVlVWUhPTGlreEdma0l3aXhlS1JrSmhDcGZKNGdqNU4rUlNkbzNOMWphNUZiRnlpeWhtRVNxRmE5VnBVVFpiRi83ZFd2aFdEV0Z3VFFOeEJ3NHV6UW9aejk2d2ZOMjNhaUUyYk5sZ3EyWlJ0TWd3eDliMDY1VDF6NXN4dzZzZlRwMC9oMUttVGxrbzJaWnY2czd6bXJpb2ZpK1d3NjdSdjI4dzhPMjlsOE1TOHhTOU95RnQwWVV6MkxJeTQrYktsa2szWkpzTTBzWmlZNzhnN01Ycyt4dCtjYTZsazA4eGJZSDNpendlT3lleW15MzNsbFJtM0ZpMWF6UGRkSGtLVktwbXM4QlBWUGFVV0JDdjRKQVVCUjJCQVlwSzZyaEwxS1RHd0pDSXBPVjFTWG1YR2N4eEJSZmZRdmRpdEZZZmtsSFNPbFZSazY2UWNpaFl0Zm9FQjVDcFpwcmdEaUVYSk9IREhTdnU5RFJzKzFYSUZMbGx2UnphWExYc2ZHelo4QnJFWW5Ob3pQMTVXMnU4ZFAzNFUyN2R2eGZyMW4rR3p6NnlWYk83WXNSMG5UaHlEV083RWE2Z1lmQ2svaWZLM1dBNjd2bUl4OCtiSFBDNTN3U2U5TDQ1RjlGZi9BYy96bGVGeHZwS2xrczBZMnU1emFSekk4dUhHdkFOK1ptWXo3OGlMTDZETmx3K2h3Ym4reUxKWXNpbmJvOGpnNEMzNFB1RjBqQ09ZR3M5cHZqbXpaczNPMWx2cTNicjFRTWxTWmNGSkFBb2FxdVJSdm54NUJRRUdoU1JVcmx4WmxUK1ZERTRtME9lZnpQOStyZTZoZSttZURDYnhLZ2VuOVNxUUlDUWsvRGVPbTE4Vms5aXNHd054QjQ2K0d6ZCtwbVdaYmJFMHRGakVaSFJtVStEb3EwcGJleWlvSW5laHhPQUlJRVplODFPbEwrVlBCVFJ1M0RpWmZiOTFyQmFYOGFqZHNtWExCREdJUlV4R1hyTlBqTTlaOE1DZ1N4UGhmejRUSHVjcXVWUmlFSXVZak14bTN0R1hYa0xqYzROdzM5bitMcFVZeHBERk9XL0I4WWw4a3NvRHFINTg4ei8zdWVlZXoyYXJnNHRBZGtGR3lkSW9IcGVBd2d3YThZbkpiRFdrOG5zeWtsaTVKNmRtSURZK1JaLy9LSzk3Nlo2NmQwSlNDc3VUa0Y2aUpHSnBOemc0VkR1eTNSU2JHTjJ6c081Uk1qaXhIN3VMam1xRlQ3c3NENzF5NVFxUWFhZll4R2lTMzZsVHA0NXEzd1JWM25iUTd0MDdRU1lqcjdHQ1VGa0FONkJweTVlZTl1cW4xNU9UbHQyd1VocHdsRzB5Yk9mOC9pWmlNdklhZk1KSDVhTnZ6VDVlNnRzMjhEaGJ5UmFxOEYxSGpMazFaNC9aSjR5ODNiNGRnZnZPOUxPRmVuNDM2bzY4WnArSXF4S0hqS1lsTEpWczN0a244azIrVkNLN2lmUnV4dlVaTTJhcXhZRzBkRmJnc1FtSWkxZnJRTjFRREJncEdmeWVncFRVRWhMenFYY3BuNko3eTRaYUkveE1SVnBhQ1VSRkYwRlFjSWpXRFFPVkpGYktuZTUyY2xURVZPQW5uM3lTclZVMjdiTzN3RnZhVU9lNm5OblVyUFlYNzdGang3STNidHhnbStDeGVmTW1iVExqNEhXdzZ0T2ZMYWdRYnFHNlVEKzU5aHZRRG5NdUdsT1NiY2VHU2xwLzZXVURyN2ZSSjhRODlPckx1UUhuMk9vNFU5RVdpdnk4RGg2NzhFSytQdUhnYlh4MklPNDczYzhXYW5IK2dUdnl5aWNDd3Z6UitmMWVlT1MzS1hqb3loUU11ZnlVcFpKTjJlNzRWbmVJeGV3VFRycXJ3cW5YbXpadGVrMHYrdlh2UHdpbFNwZFhWNVhHSlZTWm8yTEZpcXJzRVorUXBxNG5mZDZUdkd6SVZteGNDcituZ0M5a01vQVVocmUzenpkaUZLdTcrK29lcmFwTEJiRHBPWDM5K3ZXMkNSeVNBdG5xMWF2QmVmUFBLRmhRL3BMeTRqMTU4cVJkQW9lazdVZTE4WXlaTjRBUzd3ejkzTnJsYnYxNmpTbTk2K0l4cFUvRkFqR0oxMUZabUh4aXh1UFhYNExINllxMlVjaTVtbmpnZjZjNjh3bnhvdjZwdnJaUms3T0RuZkk2ZktML2djZlErWmVoSEZPcUI4L1BPYWIwZVNWTEpac3h0TjNsbDJIb3QvZFJlUGw2bTMzQzNGM2xUL1hoUW9xMzJGV1ZOMnpZQ0wza3A0RnN0allTMkFKSVU0dUEzMU9SbWxaU1FrSmkycjNNeTVac1V1a2FXTmVzTGdhUVF0bmt2Q2hXTWJ1N3IrNSs4UEJqdjJjbXN6bXFBTzBWUEY3SG1qVnJJRFkrWlpRREVDaHBxV2lWblRoeHdsYkJRK01lKy9idE0vSUdVRUhzS3FxbDVuM3YzcjFoc3pFbE1SbDUvUncrb1ZWcWxYM2sydlB3T0ZYUk5nbytXd05EZm53R1pwL2cwaVExSGJ6MVQvYTFqUnFmR1VqZXlVNTVHenpkR0QxL0hRbi96ek0xT2NDVkVnTlpSb25KN0JQbTJWVlIxRGJ1clhMOXFhZWVRYVBHVFpHWXJCYUd4aDZTa2F4dUpWWHVTZWxJVFM4bFdaS1hUZG1PSTRlNnNvb1VpMFZBWU5EM1loV3p1L1Z4ZDVPWDlPMjMzdzZXVXdDd0g2QVhFY2wyK3ZUcGgvVlYrVysrK1dZd0syTmI4bktodWYvSCs4VVhYenl1d2hZdFduaGN1SERKSXpjM3orV2NZcmg0OGJJSGx3Ny9uWmV0dUljTVQyYnlpYUhLNU9UbHF1ZllWc3JsUC9OdkxGNzZoQzE1OHp5ZDh5WjNxK1N4Ny9KcGo1dDVPUzduRk1QaHErYzhFdHVYTmZ1RU1mbFFyUklULzQrOXM0Q09HMG0zOEZlUzJwall6c1RKUWpJdlRwYUhsNW1abVprWkR6MW1abVpZWm1iZVlUejdocFloTVROMHUxbFNWVDM5NXowNWVoNTNwNjJPMi9KczN6bjNxRHF0bEs0OW5icXEvMWExamozdzJMR3h2bFBqcDFoZFdjS3ZCeGhyT1hSd0dLMk5NR29QRVlaYTJKRjJmTjNSYzRZUUxRcUhRNk1IanlpbHpnT2UyczArenI1NUtOLzNIdzlnclNXcnFOVnFqd0Jjd0tuWDY0L2JRM3BWR0lZUEJ4Z2VIcVpTcVdaSkk5RVNTd1JCRUR3NmNXZW1vdGNQUzJVZU16NU0xayt6WkJxZksrOG5HZHFXcmhGaWJ2T1o4SDMvb2JGZWEyM0xyTTRVcVV5dWJ6QXMrUTNQbGZlVE5LRnA2UnFodmEzZUlBZ2VEcUFPOWpQaEw0QzFtZUJNZlFsM2RIQ3J6NFJBQWYzQXF4LytpRWNHeFdLUjhWUGpMQ3l0MHR2VGczQ3RVSW1PT1hweUhpdHJKVGwydEMzWEZnMDV6Nk92dDVlYXI0bG1IeHA0aldnL3k2V3JybmtZWTQ1bWREQ09OY254am9BU1J1MDlvemRhdXBzenhoeU9aMUZhYTdLQzVBd28wbmlIdUgzVlZWZEpvQ3V2MFNiYzF1RHpyckZYOEZ1amI5emdKV3RqVzUrYkQrWDkweno2WmtaeSs4L1l2NDBvbXBLLzQrZ08yUU1TZW1tWkx4cDdPcTg2OUt3Tm5ydDJjR3ZEeXRlVDUvR2FvODlsZjI2d3BXdHNwVGRxSHdiUUN1bzZ5TXdzS1RBYXJXenlNNUdFQzl3OWVqenRRNkt2U2grWW5aMWpZV0VSYThGeFhmbDhvNVRLREwxY2pwenJNVGk0N3hEd0FPRDQyZDA0MkRVUGdadnh3VmpneGVheGgvUTZILy80eHdma21FMjlkcXZmTDlFenRRY0JOODNNSTk5ZjVyZnY5ODROL3RXRnZ3cjUyL2J4cU5vbHlmTjQxQzg5aUh4WWJPa2FvaW1wT2ZvT3BVMTZiY3VzOVFlOCtYNHYzK0M3TDNvdFliNTJtL1BPcXg4amVkNERqbDFDS1N5M2RBMjl0VjRIUUdlc3pHYTMwTXRwOUFEUGp6TEhpdEdobXA2ZW9WU3VjR0I0RUdQbDcxa09IdGhIcUEzQ2MwWUdkNk10R2tSTFJNT0JBL3RSeWxHZTU2MEFMd1o2T0t2b21nZmJHZHlXbDVlSmdtRnV2UEZHVmxkWGFSVlI3Witycjc2YW4vM3NaMmtHWTRVZ2hkNVNxWVJjYzN4OG5FcWxRcXRZWEZ3ayt1NHFGaFlXMnRIcklNaTQyU1hSMDlNVGF5Y3dJUmhhNW50WFBzOTRiWllZajdyekEzbFVjQWtrejZzYWZ1dGVieU9KZDgvL2VZdlhzSVNpS2ZFNzlqd3ZxUmRyYUpsZldibUN1ZG9TTWU1LzU0czVMemhCOGh4ZDFieituaThtaWIrZiswaEwvUnNqbW5URHo0UzJHY3lVckc2MEtiQUhlT3l4c2JGY3ZyQk92cERIY1JURnNrOU95a2M5THZuMWF0UjJoYnZhRmkyZTUxS3FCUFQyOXREZlB6QUFQQTdvMmFYU1ZkYzhaRUNkbTVzamVtZ01Vc09Qd212a3o4NkVLQ3lrV3EwU1RYZXAxK3RNVDArbkd0eTJxMWZxc210cmEwVGZ1OFBBd0FDaVZmN3NUSmlkblVWMFJzc1JwZllyZmFUUksyYmw3alh6MEZxcnVCMm1DSEpmUGYyYkpQSE9xSlJGeld5OFA3WnlDREdWR085ZCtodzNWWDdjY3YraUtZa3dERGZwdGR2aUgwLzlPMG04NlBoVE1iWFQvUnhZNmVQK1J5NG14bGVXTHVkbmxZa1cremVpcWVGbklqUW1lNW1TTVkzTVl5UXk2b3ZQT2VkZy84cnFHdVZTR1NXbEtxRnlnSWhLQVVxNHkyM1I1RWc1TGFKSGIxL2ZDSEFoTU5JMWoxMHlEeG1BeFRpaXpVMUVtNG1JdnJOZkJ0cW1CaEx0dXNaMVhUbFg3bXBsUUJiajZZaDU5UGIyaW5ISWRVV3pYRmRtUzAwTlpHWm1CcW5mam95TXlGMnQvQjM1dVR1aU53UG1JU2J2SWtoUkJoSmVXcnlCU3dzM0VPTlp4eDhmR2Nhb3ZDY2Q4bHZIMzB3U3Y3UDR6eTMzYlkyVndhM3hZSnlpREhSVDhZZmNXUGdCTVI1ei9LRWNXTzBIQ3phMHZQYkU4MG5pdlF1ZjNWYi9vcWtSdE5IdFpVcXJMV1pLUjFyTGxJUm1hL053Z1FlTWpvNld3MUNyV3FWRXRWN0hHc1hJL2o2MHRzSk10ckVLY0Z6SGNVckFBN3U1eHk2WlIyd1lTaW5FRUdSUWpwNUdKZ2F5WlhrbjJvdEJMcGREQm5ENU96SW9SNEVid3ZSb1hXOXNHUEcxUll1WWdoakkrdm82bXpFMU5ZWDhYTkVtcVkzZ0xkck1KZnlGTVE5Qk96TVA0YnRuLzR3a2Z1dkVXNkJtR0ZucTQxWDNmQjR4M3J2OE9jYnJzOXNjak1PbWVxMjEyK2JmejM2WUpGNTcvUG5vV2todXlmRE1lejZSR0Y5WnZweTUrbExyZlJ1TGJxQTNkYVowMzNmR2JKWXBKYzVyUFZPeWpjM09CYzRiSGg3UmdlK3pzbFpFb1pBeVVha2NJQ3VkY3A3TGVzbVhZeWJhb3FrbzdlZ29ONEZpSHNCNVhmUFlBZk13eG5BbUtLV1FBVGg2NWpISkFWbGV6OC9QSTR3UnJTcVJRVmVXZzI2WWpkekJ5OHlqUllpbVZPOGx6NUVQVHF3aDFpR3ZwUlJWS0JTSUlhVTBtYW5FeGlZL203d1c4NUYrMHV2TmVxYlVHRUZLODVBeTFIc1hQMGNNTVl5eHhWSGVPZnBTWXVTREl1K2Uvck50OWgxbkhtZFg3MC9MRTN4NThYSmlQUE5lVDJSa3NZL25IVHB0SE1XZ3pOOU5mV2liQVRRRXRyRmV2Vk9aMGowM1pVb0xyV1pLaUtaRzVqRVcvWHMydFhvZDM2K2pIQVZLU2RrcVVURlMyV3FMdHY4ZHB5SzZBTWU2NXJHTGdibnYrNGhoU1BuS2NSeGtNSmJYMFJlOHNiUzBoTXhDSk9NUTQ0aWU1NHhTU2did3VPUVYzL0YzN0U1ZXNndlJtSno5eEFZaVd2TDV2R2lXV1pRWVIyd3dHeVV2Q2RuVFkrOW1Tb0pRcDkrODlqc0wvNHdZUkl5L3V2QlhlTmRGcnliR1h5OThNTDRiVGp2emFLRFhwdUo3NXorREdFU005MFFycjE1MjBYT0k4WW1GcjhZcnJMYkZVT3ZHZWxNRTVxK2UyWlFwSGR1VUtTMXZ5cFNXdDVNcFdkSFVhS3pZQjRSMStmZnZ5cWtLNGY3QkhNWWd6R1FiRkJZbFk5UUJZSDkzcC9udW1VZGNaNWFTa0F4eVlneENNWXZZUU9ROW1XSEV4aUxsTG5sUEJtb1p2RHRwSG5FZGY2TjhKcHJpa3B1OGx0bUh2Q2VEZFd3c29sL2VLNWZMY3AzMGVyT1RLYVZBdk5yS3B1SjRkWWEvbnY4QU1aNTE0Z21NOUE0aHlBZnIvRTFrSHR2dDAwWU1qRzZxVjg1Snc3bnFJcCtZLytycDdPUEVROW5mdXkrZWRjaDdLZm8xQkdjcVcyRzN4VXRMRFRJbExPZ3RNcVdsZjk1Vy83cng3M2NmS00rRUlaVmFnT2M2Q010Vm5lbTI2emdSRmNiWUFqREk3cUpySHZGS0pyazdUODVBeEVEdWRyZTd5Wjl0RE5JeUNNcnJsWldWcEhGMFBFTVFJNGdOUkhRSVJiK1UzSkovRmh1SC9IeHlqZmIwWmlCVDZuem1FVE15aUE4bFp4K0pXY2VIMHN3NmhLSnBwL1RLN0NJNSs5ZzA2NmlrNmZQTW1ZZGgyM3ozM0taTTZmaGJvR29ZV2R3aVU2ck5icXZ2MEJnYVFldlFCS0hHV0ZDTytqODYyVzhyQUt2SUJycm1JWkN5and4eU1xdVFvekRlYVNwSHVaT1d3VkJtSTdGeDdKWjV4SHMrUkVmQ0xHSzl5WXhEWmlQU2Z3ZjBkanBUU3BGNXRJRzhMdkx1cVQ4bGlmSEtETDh6ODAra3hJNWtIakZMUVlXL20vZ2dTY3lWRi9tdnFVK24zSFJIODVsSE81blNVZ3VaMHN5ZmJWdHZhQnZxTGRkcTlTQUlBL3B5Q21zam9oam9WUmdyekdiYkFzWW9ITmNaQnNwMEh0M0F2Sm1CQ09JNzV1UXFwV2hwbjVSY1VocEhTd0YwS2dNUnlLcXJUWnZqR0JvYVNtMGNqVFZsUGxOcVByZ1oyeFpsYVdzUzd4My9kQnY5bVIxWmJaWGtseGN2STRrdmpIK3JuZjVhV0txYk1sT2EzNVFwWFJCbFNoY21NcVhGZEptUzNscXZBWXExV3RVSmd4QmZnK01vWEtXb0JkSFJFV2F6N2FBQVF4Q0VhMEFSTU93K3VqT1BwSUZvcldXQWswRlk3dDVsWUV0cEhESHNqaTE5RlFNeHhzaGRlNXpKU0ttblZlTklwVW11bDdGTVNUU2xLRnVsWUJJMlBlT2xwQjNWMjZabTBiUVQ1anhlaXpLbGhSU1pVanB6MXNCRXFWUTBzaUREVlM0cXNicEoyaXFqYll2QldvUFJvUU5NQUpyc29Hc2U4WUFzd2ZUWTJKanNrNUFTUzNyajZNQytDY2xBZk4rWEdaTU14akx3dG0wYzZmVm1MMU1TQkRwN2c3Rm9hcTdYdHMwRTJ1ekxFT3IwK3p4U1owcUxqVE9sbERNUERYeS9YQzU3MVZvTjE5Rlk2MkJ4NlBVTWx1eTJ0WUZRRzR3eGc4QVBNbWdlWGZNUWlIbkk4bExacXlCM3l6RTZjQ2VmV3ErWW5CaEhPclN1S2Z1WlV2Wm5Ia0p0ZDdac0pkd3N0NjJ5VlZPOU9sT1prcVZoWUs2QjY0TWdPRkFwbDNTdGJsSEs0a1FNdEJjZEVXYXU3WWN1VmdjUlF4TmhBTGd1bytiUk5ZK083WURlKzNvemtDbTFZaDQ2ZzJVZ3ZXZjAyaGIwdHAwcExaN05UTWsyMG11QnZMWDIxdVdsNVJVLzhEZCtUSlJRWlpMR2FvSXdwRnFyRm9GYmdUeGc2YUpySG50ZmIzWXpKVUZvZHFBTTVKSzZIMnVOYU9yb1RFazVLbjAvdDUrTXhnSSs4TzF5dVZnSy9USUtCMnNWbmdvQVIwak95VlpibVRxQkgxQ3JWbXZBTndHL2F4NWQ4OWo3ZWpPZUtTVjNRTGZMUy9NM2JIRENXV2h2Y0xQbURIcHQyN3d4LzRNTkxqbjV0dnJTdHZscXE2eVZCVTFqcy9PQmo5ZnJ0Y09CZHF3eEFRcUR0ajF5eEZFV1RhOGNNOUcySnFUcVc4TFF0MkVZREFNZkFYeTY2SnJIM3RlYjdVeEpvRTNJMmNDamIzNzFCdDg3LzlrMmM2V3dxVjVyYVp0dnZmRjNOdmlsdVV2YjZNdUtwc3lWMlZKOFBZbEFBejhCdnJ1ZVg1MDAybUJOUkpLcm5MSkRvMFA4ZW8xeXVWZ0FyZ1ZPZGZPT3JubDA5WjRWZEM3elNNOFVtVWVHWU0rZ1NWdWR1YVhRMnBwbVAwNFYrSzlpTWI4LzFCcHRRWmtxRmplaWcyTnJvRnpocnJhMXNkVDlBTDlXb2xxcEtPQS9SZnNPbHF5NjVpR09uUkcwcENWRGNtTXR0eXZ6MEViam9ESmpITW9xMFhRR3ZZQzFtYUN5b0p1YlhZWXlwYWFCZVl3UStJTFcrdnVGdFpWNUhmaG9lc0NFS0F5NEEzTGMxYloxK2dtRE90VktpV0twdkdLdHZRWDRFaEN3TStpYVJ4QUVlSjVMVnVDNkRtRVkwZ2lpMTNXenBOY1Z2YmN2ODZqNjdIUDZNbU1lQTA0UE9tanlPNjZGZUk2YkdiMDlyb2NObXB0ZDFqSWwwZFFFQmlnRC81SFByL2I3UVYySFlZQzJCaXYvc2ZzcnIwSWRVcTJXSTFaTXRWTHVFNjJpdVR2cjJFSHpLQmFMc2xrdUU3TVAwUkJ2M0d1eUFrbFdIbVZGcit6MEZyMjNLL093QzBYdU1uaVVITzZ1MzhYM3Fod25CbzVnWjlacEJHK2hUdTlnSHk3dWJzc2xweno2K3Z2d1ptck55MVpuQVkrKzVkVXg0NitEU1EzVFhKTUZBdUN6MXRyUHo4L05UTllyQlVKdE1CWnNVRUk1cmhEQ2NzZmJvcUZhWEpFTndCVHlxNnZBcDBVckVIVE5Zd2ZOUTU0QmtjOFhHQjdlTHdPM0JMSnlOOTFSeGwvRElkOHh0YlpXa0VmQzBnankxTDlpc2NUQVFMK1lTTHlCcnFPVWE4b0Q5a1dEYUptY25OejhmRzI3MTh6RDkzMGJ0NzJiRnZoKzhTUVBHRG1mdS9TZnl3RnZpQ0Z2WDBkNVRtNll1dzZjeS8xR3p1UFcwa25jVzVZYS9vNkhieXh6ZWVtL3VmUElZWTcwSDJaL2JvQkJyNitqSE1vTmNuVGdEdHh4NUJEZkxuK1hmYmRVR3VyVnhtUXVVeEpOWjRBQktzQ3YrZlg2OFh4aGZjcXZWUWw5SDd4K3JORmdEVTdQUGpsMnJHMTBnRHdldDF6MUtSYnk2MkVZam9wRzBRb1lkZzVkODZqWDY1dzhlWktscFpYSVBHUXZ3WkJRektSREhCTFRvTGZYa3gzVG9rVldGOUVJc2Q1Q1FXWWdIb09EQXhFSE84d0JjamxQVEZlZTVDZDZOejlEWFZ0cjkxS21KRCtYM2ppbjZOTno5U3pYNTIvbER2M0RrWW1jeHdPSHorOG83emQ4VHc3MURuUDl5czMwWERtTkt2Z2tJTXVXTi9UbVNvYlJhOHA4dHZBZGF2MTF6aDIrSTJNalJ6aldJY3Examd3ZnB0Ulg0WE9yMytIUVZXVnk2N3FoWG0wemxpbTFQaHNLZ1NYZzVmbTExY1BGOVh5K1hxOFJCZ0ZHbTQyK1ZJZitzMGJMWGc3VzF3dXNGL0tsU3FYY0Q3eENOQUloTzRLdWVWaWxWRGxlQmxvb0ZPVGhRaEYveEtsVDQweE9Ua1djN2hDbkdCOGZqNjc5WTlFZ1dpVFhTSzR4TjRtYXEweE5wVXdrejdUZ3h6LytLZFBUTS9JVXZvNXlhbXBhcmkwYVJLL2N0U2YxMnFjLy9la2xwWlMwNWIzTVpVcWJmcjhXNERuUGVjNkdabHUxZURNbEJyNDh6bzNYWGNXM2YzNDVsMDVjMlZGKzUyZVhjOVAxVjRrR3ZOa3lOckFrTlQvcFNVOHFTUnRBVnpVRE15Rkh2MUxpMmhzdTU2TW5QOCtISno3UFJ6cEV1ZGJIZi80RmJyamhTa1REd0d5SWFhTFhxOW1NWlVxOUtQLy82d1dhYlJyOERQQUhpd3R6WHJGWVdLc1VWd21Od2FBSTYwV1U2MGIwMEw2MHZSMW91eGdzcGNJeVVzYU9US3hTS2haeXdPOEJuKzV1Q3R6WnNrV2Y1M25maytiL3RHOFdzSTFqUVJnT3VYWWNMamZVcEl4cHlzemN3NFgybUpsUnNDZzRabVkrMFRJek0zWjF6TXl3ekx4ek16NWJjcGJSY2FRODZWZGluSy9XN3pkdjNrdDdlbnJnemp2dlZKWGEyOXVCMkJpR1dRMEFGaEpPVVgyT25SdGNjY1VWOE1namo2aEtnd2NQRm5pUmtYaXQvZjM5TnVLbGZROC8vRENNSHo4T1B2amdBM2ovL2ZmREttS1lNR0VjakJ3NVV2NThPZkxFbURGanpKSW5URjBNMkcvblZDVytsUW54eE5LbFN4MlNKNXpkaVpCMWgwOVZTbTZMRCtIOTZLT1A3Qkt2KzhNZ0JOZGVCTXlDQUdqbTU0VlY3TUlnbFBZUEFNOWJSYUdlT0g3VG95eW9SMUE3RTVLUzE2ZG41a0JCb0FSS0srcWh2S29lS3FvYm9MSzJoVDdQNG5kVVRUTVVsMVZEZGw0aE9OMCtNRnVzTktqY2czcFVaRHJYSTdWbzVjR3k3RExhV0w1OHVUZ1NWVWVqWHk1aDUwdGZhUjFrcVZSNWNCeTNIQUEwczJiTkVrZjY2bWowN0JZdFdpUjhSMGFCdDdTMGREOCtYL3F1ZWUrOTkzQWRaNHVxMXBSR2p4NHQ4Ukk0aU0vNmtPU0ozU3NQYUVBOWx0REFBZXdkMWgwSThRUjJ4QWNsVDZ4ZnNSbEgrb2RVeEF1YVRmMWJRM2lEd2VCKzVGMUd2RnVmL0VuenpmWmZOUlUyRmF3cFdmTndmZXNuemRhWGZ3bjF4UEhiUVhGTjRYSFVZK3YvK2R1eVlmMC8vKzdZdnAxK0trcy9tY1ZwTER3RmdLYXh6cHJvbm50Mzc5TGdQeXRxdG16YXFObTg4Wjh0Tzdadm80cmpZZUlnSnBIdEhMWm81Y0drcHFaMjR1THZiN1RwOS92aDVwdHZEbnZGY2NNTk40RFA1d05pSXJhTWpJdzJBT0JJNmVucFhSSnZibTR1akJneEl1d1Z4OUNoUXlFN094c2szc3pNekhZQU1CSnZWbFpXRSs3N2w0NTFkbmJDVzIrOUJaTW1UWUNwVTZmQWxDbVRVWk1VRXNXYWdySEh3eHR2dkNGVmRRSnZYbDVlQlhsQjlFU014K001WDJKbWZEcXczUmoraXNOMkhZdG0xUjNORTBiMHlnVVNyOW5QUThaTjNyQlhIT25YZThDVWFqd3FyOXdUaVplNmdadFhCRFhyK3FEam8rdWgvYVByRkZkVmZ4L3djNHNnc2RkMVZFK2NSTk9qZU5TVktLeTgyVjlUVXB5UWtaMFBCY0Z5Q0FRQ1dDazBDWlVERHFpZ3FxNlZkSXJmVzZDNHVCaUNaVFdRazE4RVRxY1RZdU1URCtnTmhvMWlrcnVLR0tJVmgzTEp3NEF2WG1WOGZQd3RXRVp2b1YyNFlBcFZWVlV3YU5BZzZPdnJVMVFEQmd3UVl1TW9EY1QxbUcySmlZazM0TXRXUnAwYUNWL0NLamt2anFLcEl4U1MzdTIzMzY2b2JyenhSb3BOeit4b3ZDeUtLUzh2VDBQZTIvRVlqWWJJOUVLQ2ZQcnBwK0c1NTU1VFZFOCsrYVFRT3lFaElZUzNycTdPUzE2UWUwTE9yRE5wZ2FzMGdIbEFERmg2bFpYNTRoZ2h0dGFvUGI0blpMd0dreDdpS3gzZ0daZ00zajZub3ZJTVNCWmk2NDM2WS9MVzF0YW15M241TkJNNEg4bUd1TEdGNEppb3JPTEhGQXF4V1NkM1ZFK2M0a3dHaDNLalBxQ2ZXMWh0dHZVZXIxOUlJbmtGUVFpV1ZrSjVkWU13blZWWjB3alY5YTMwZVp6dnFOcG1LQzJ2Z1VDd0RMTHpBdUJKOVVOOFFoTDFFWnVwT0taWVlreE9aSWcyaFpLSHpvY05PN1IybDh2Vnh6RE1jdHF0QnVFMHkrZEpTVW5YRUJ0MkRtNEEwSk1pZ1RjL1A5OURMeDVweG93WkxJN2s2K21GeEhPK1V4dXYxK3V0dytsQmhyd2dla0tmazVNalBHT0pXZVdlTUVRU2J5UjY0aFNhRnNXZ3JHSWxzQWlUMFdhejFmcTMwKzA5NVBXbFExWk9JZVJpSWluRVpGQmNWb09xaGhKTURtVlZEY0luN1N1cHFJT2k0Z29vQ0pSaWxSRUVYMW9tcExnOG1EU1NEM0ZHNHphODV3NjZOOFVRWXpGaWJBVmJOSGxvY1FxRGlZMk5yVWJUdEtHaE8vRDd2VGlTZmdmbmtoZVRzWlVVeGx5SXNkOGtCbUloSm1KYnVIQ2hnWXhNaWpCZUxVcmYxTlJreDJNdG1QYzZIUTdIZzJyaFRVNU9idXJ1N3JZU0k3SEtQWUdjdGZUM1NNeHE5MFFrOFVhVUowNS9QWlZGeFlwVFdRdFF1eGdtNWkrc1J2WWxwYmdQdWp3K3FzSXhNV1JCV2tZdTRQUTVwR2ZtZ2o4akczQmdDQzZQSC9BOFFDN2dUWmF0aHYrbnAvYUs5N3BTdkRjYnhtb2ptanhJT0Y5dnNkdnREWEZ4Y1cxa2Rob3BrWkhJMkhMaDZPbXM2dkQ3VTB5S1RRekVRa3c0aWpkTG5CSEdxNU14NitpRnhQTXExY0tMblVSNWIyK3ZXYzRwOXdSZWI4Vy9wMG45bm9nczNvanp4T2szclN5SjJGRWw0c0w2UjZqOXVLNnlHZGNyL21FNWJnTm41RGZ5dkhrRGFqUExHVGZGc094NlBMYUpwdERFLzlQNFNMeVc3bUdYa29aS3FvMW9Ba0Vqc3pnQ0Naak41aGFiemRaS3hwZUV4anFua3NlaTJNVEE4M3dwTmw3aWkzUmVsRTZjRW9yRFVaYmY3WFlIcU9NZzRVaXI2bHhLaW9NeEN5bDJZV0doZzNoSW9ieWh6TlRwNFpwU3VZcWZzUUs4VVUrY2hhWkZHVkE4eW83eW9YcFJ3MUh2b2NhaDVwREU3KytKeDNyRmMrM2l0UVlWSjR4b0VzRVMyb2FqcFZRMGZ3R2F2eHhmUmtWRXNUQm1Qc1VtQm9rbjhua2ozeFBZR1RvaXlST1J4aXRLSjVOZUljbGphaFh5c0ZTUk1DZ094YU1zaDRrWGp6SHFyRENpN1QvU0FqQ1QvckszaHdBQUFBQkpSVTVFcmtKZ2dnPT0"
      }, {
        name: "__ASSET__:file_flixel_system_VirtualInputData",
        data: "YmFzZSA9IDI2NiA0NiA4NCA4NAp0aHVtYiA9IDI2NiAxMzEgNTIgNTIKYSA9IDAgMCAxMzIgNDUKYiA9IDAgNDYgMTMyIDQ1CmMgPSAwIDkyIDEzMiA0NQpkb3duID0gMCAxMzggMTMyIDQ1CmxlZnQgPSAxMzMgMCAxMzIgNDUKcmlnaHQgPSAxMzMgNDYgMTMyIDQ1CnVwID0gMTMzIDkyIDEzMiA0NQp4ID0gMjY2IDAgMTMyIDQ1CnkgPSAxMzMgMTM4IDEzMiA0NQo"
      }, {
        name: "__ASSET__:bitmap_flixel_addons_transition__FlxTransitionSprite_RawGraphicTransTileDiamond",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQWlBQUFBQWdDQVlBQUFBckZzTTFBQUFBQVhOU1IwSUFyczRjNlFBQUFzNUpSRUZVZUp6dDJORnFIRUVNUk5GeC92K2ZOeS9KUzRpaHJWR051cGx6d1dCc2RXbFlyN2VMKy9YNWZDNEFPSXgvUDdpK2h2YitTK281ZnZwQjNmVWNkeStJNm5OMFgweXJ6NUcrRUw5N2pxY3Y0ci9QTVZvQWZrMHVCM0EwbjJ2bUEreC9PNTk0anBVZGllZW9aSFk4eDFURzFHczQ5UjdhNVgvb2NSUVFBQlUrMzN6LzVONmYvQzY1OTg1c01tdnE3SjJzcWIvaDFIdDRzZ2lNbHhBRkJEZ1hCcUkyazlqYmNXYVhEQVlpei9qbHZ3TUtDSEFtREVUUGJES0xnVmpQWmlCZWlBSUMxR0VnYWpPSnZSMW5kc2xnSVBLOC92TGZBUVVFcU1GQTlNd21zeGlJOVd3R0FvK2pnT0JrR0lqYVRHSnZ4NWxkTWhpSVBDNS9LQ0E0RmdhaVp6YVp4VUNzWnpNUWVCMEtDTzdBUU5SbUVuczd6dXlTd1VEa2NmbGpIQVVFVlJpSW50bGtGZ094bnMxQUFBK2pnSndOQTFHYlNlenRPTE5MQmdPUngrV1AxNk9BbkFzRDBUT2J6R0lnMXJNWkNPQmxLQ0QzWUNCcU00bTlIV2QyeVdBZzhyajhnV0VVa0RvTVJNOXNNb3VCV005bUlBQTh5dWtGaElHb3pTVDJkcHpaSllPQnlPUHlCMTdPNlFVRUFBQWN5T2tGNU92UDE4VGVsWjg5c2JjeWs5amJjV2FYaktuWGNPbzl0TXYvRUlBWGNYb0JtZVRybSsrZjNQdVQzeVgzM3BsTlprMmR2Wk0xOVRlY2VnOVBGaEVsQ0JoRUFia0hBMU9iU2V6dE9MTkxCZ09UUi9rQWhsRkF6b1dCNlpsTlpqRXc2OWtNRFBBeUZKQ3pZV0JxTTRtOUhXZDJ5V0JnOGlnZmVEMEtDS293TUQyenlTd0daajJiZ1FFZVJnSEJIUmlZMmt4aWI4ZVpYVElZbUR6S0I4WlJRSEFxREV6UGJES0xnVm5QWm1Ed09oUVFuQXdEVTV0SjdPMDRzMHNHQTVOSCtZQUNBaFJoWUhwbWsxa016SG8yQTRQSFVVQ0FPZ3hNYlNheHQrUE1MaGtNVEI3bFl3TVVFT0JNR0ppZTJXUVdBN09lemNDOEVBVUVPQmNHcGphVDJOdHhacGNNQmliUDY4dkhkU2tnQUdvd01EMnp5U3dHWmoyYmdSbEFBUUZRaFlHcHpTVDJkcHpaSllPQnlUTmVQcTdydW40RDVOWDdQSTd2WFpFQUFBQUFTVVZPUks1Q1lJST0"
      }, {
        name: "__ASSET__:bitmap_flixel_system__FlxPreloader_GraphicLogoCorners",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUVBQUFBQkFDQVFBQUFBQVlMbFZBQUFFT1VsRVFWUjQybHlOaFJFRFFSRERGR2JxdjVzVTlNenNjVGluMFI2dlo5elprSk1SbTBpcmxKSktOTFIwOUdZd0krSTlnM3hYbUNIRkhHbVdMT1NLdFRLMkhNV0ZHMWQ1MW5yTG5ucXA1WXFlaGlVNHBIblR5dDZNY25pRnY4SDFQWjd4UE9NWHIvZlA4Nlc3RFY1dEZIMlFSK281T1NrSk1aRUlST2hWVENweUNsSEs2a245cHJILzFMaUs4a2xCVGtaSy9Nd0l2VXJKM0xtY1V6a21JeUdXa1d2NmZGQlJ5cWs0TStCdEdvYUNjSG1VdHF3dytQLy9jMXFsTm9oMy9YU2NMSVZLRzR2eHlZNmJacm52bloxVTBtS1liS3hiOXlqZkJPZ2lDR04wbC9TWnUxMUxGeWlGRmdoOWtaRGdINHh2V0Q3UW9qRVFUa1BaZ1pEaVZKb0J1djZXQUd6dnIxRnFIYTBXWmxIT0l6SnhEaXEwWlFleXZSWmtzQTFmeFRxR3RyTitXZFlBZzVLRUVkb3RHWlREdVkrdk5uZkZObkpubExURFI2MmNEd3hKWEx3cEJjSVNBeUM5c05zeHg1WXh0MlpFek5hMURzRmlnQ0QxVVFCKzBPQng0QktXYU1YeWIyMThTK1FlTnlrcCtCRXZieEFIMzNwb2Fac0hvbzE1TEJyWkUzYVVQUURZVS8yQ09YcGc5cWl0LzdWenVBNElGd0hrT1Y5YytYQzc5N1lSd3hETDhHQUMwSks5NngvSi83WDVIaXdvQU5lOG9NclB1K3k1MlAzalduTHdRb0FnQVVEOVh2MnRXaks0a1lJRWdPTjNBdHZZcTZuSUFhRTBUZjFiSmdBRUdZQWdsVjg5Vzhmdm93Q01JQlVIb3RsOEVad0FBRXNBbG0wVEdDR01nQ28vclBCTkFURENUUUMzSU15eEgzL2NLK1pveXgyd3RnaVYzM3BmTUNPRGFDV0J6ZDhEeUFBY0J1c1pDSXNSS2dzd0J5SUpnRkEyanYwc0NFb3ZEWFBOY1RSRXpZN2ZSKys3OG9tTTI5bXZMVVQyZ05rbXRDUXVnTW5OMXA0cGdmL1hQaldBaHZtMk9aWW5ibk9CU0NDYTFYRFRzUXd3ZVFHd2w1S0FUMjFySFpjeUFCTkVtNGRRQWtCekYwRXFSdHRiOCt5bHo3dlNFSWpOSDBJdkFQYnFPa2dnVExRSHdRQWxUZHFHU0w1N0FMNzBSTk5QMFZiVnAzN0tsbk5oejRwc1oyL3pJQ1NCUFJsTWVoZ2R2eVRuTDdVNzZERHNCR21qN2VjTmlMbThCWERVQnhZaUs3WFJHN0JjdnhHcTdROFNBTWkwSHhXNlo1THJUd0pIU2RPa0VPSkI0MTVlRjIzdFRMbisvQjlKcXQxcDk3VzdQZ0F3N2dXampMdDR0Y1Y2L2IxdmV5cDM4dFgyVDkyQk9CZ0IrWS9mcmZLWTJsMTlkNVYrRklBUmtnTVl5Y0tqdTJlZXh5eld5TWEyZHZRblNVY1NPTGVlV2lBY3ZCaCtSVEdtZSthNXI3QnlEZmV3ZFV2V2xQeEU0WVY5NnhzbjcyUUhiMHJFYmQ2a3ZZVzVLOGVhY2dWQ0FnYVFqT0RuSWhnY0h5dVc3dDV3eEk3NTJRamVBekwvVG0rZCtjTExnVUI1Z3c2T2ZLamNaWDRIZ1FST1F1QzBCSUtUR0NDWUlRd3NtNDdDbWpVWFFGeVVnczRkZVJQS2p2b053QVZHUUVaWVU2N0lYTmJzZG05emwrakZQZ0Z3dnA5OGJ2M2MvYmpyZVZnTVFJekM2Tm1hK01aVlo0dkw0MGQ3ZEc4OU80Zjk3cVgzN09YUGY3YUxoNlkvK2YvZVM2djBhZVdmR2ZwKy9PUmU0ODh1NmptL05Fdjd2ZDdudDk4YlN4R0tIQlprUkFBQUFBQkpSVTVFcmtKZ2dnPT0"
      }, {
        name: "__ASSET__:bitmap_flixel_input_mouse__FlxMouse_GraphicCursor",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQWdDQVlBQUFBSVhyZzRBQUFCcFVsRVFWUjQyclRSQTVLRFFSQUY0QnhnYmR1MjdUM0RvckMyelR1dGJkdTJiYU5qZFp4TVh0VXJ6WFIvUHlqYUpzYU5GQ1dHRGdCNUJBSGtFUVJvR1JzaGhEQ2dZV2lJRVNVQVJvemxDQ0VJcEJlVVFtQkVCRUVFQWNXMXpUQzlzQW8rSWNFRUVRVDBUU3pCNmZrNWVBVUdFa0lRMERvd0F5ZVh0M0J5ZWdydS9uNWtFQXdNejZ3QlBmc0hCK0RpNDQwUUFnQzlkdy9QREdSbmR4Y2NQVDBRUWdDWVdka0JkamEzdDhETzNVMStCQVBzdnJ4OUFEdHJHeHRnNCtLTUVjV0E1YTFENE0zaThoSllPanBnUkg2Z1kzZ092cjUvK0pDNWhRWFpFUXp3ZHZ2Z0RIQW1wcWZBMk1ZYUkvSUIzV01MOFB2M0J6aGpFeFBTSXhqQVBUcS9CbUVaR0I0Q1Ewc0xqTWdPREU2dmdLaDA5L1pLUUNRQXlSbDU0T1lmQkNFeHNSQ1ZtQ2kwN0orT0VZbEFhbVlCcU9ycU1hcHBhSWlXU0d5aldDQ3pxSkt4V0UxUEQ3U01qR1JiamhFTUZGUTFNSmFyNnh1d0wvYlI2aTFucVdORHNhQzBvUTA5U0xZRE1TZFY2Z05iVncrZ3dWTElsZjlHa0F1b1ZhTUJzUVJ5K0swR0dVN2xoaGVtNGJTd1lDa1FNOU9xNlRnZlpqZ3RMSmhKeThidlpBWWFBZ0JJUDV2ZHJxV1ZzQUFBQUFCSlJVNUVya0pnZ2c9PQ"
      }, {
        name: "__ASSET__:bitmap_flixel_addons_transition__TransitionFade_RawGraphicDiagonalGradient",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQVQ0QUFBQ0FDQVlBQUFDU2p3V0JBQUFLT21sRFExQlFhRzkwYjNOb2IzQWdTVU5ESUhCeWIyWnBiR1VBQUVpSm5aWjNWRlRYRm9mUHZYZDZvYzB3RkNsRDc3ME5JTDAzcWRKRVlaZ1pZQ2dERGpNMHNTR2lBaEZGUkFRVlFZSWlCb3lHSXJFaWlvV0FZTUVla0NDZ3hHQVVVVkY1TTdKV2RPWGx2WmVYM3g5bmZXdWZ2ZmM5Wis5OTFyb0FrTHo5dWJ4MFdBcUFOSjZBSCtMbFNvK01pcVpqK3dFTThBQUR6QUJnc2pJekFrSTl3NEJJUGg1dTlFeVJFL2dpQ0lBM2Q4UXJBRGVOdklQb2RQRC9TWnFWd1JlSTBnU0oySUxOeVdTSnVGREVxZG1DRExGOVJzVFUrQlF4d3lneDgwVUhGTEc4bUJNWDJmQ3p6eUk3aTVtZHhtT0xXSHptREhZYVc4dzlJdDZhSmVTSUdQRVhjVkVXbDVNdDRsc2kxa3dWcG5GRi9GWWNtOFpoWmdLQUlvbnRBZzRyU2NTbUlpYnh3MExjUkx3VUFCd3A4U3VPLzRvRm5CeUIrRkp1NlJtNWZHNWlrb0N1eTlLam05bmFNdWplbk94VWprQmdGTVJrcFRENWJMcGJlbG9HazVjTHdPS2RQMHRHWEZ1NnFNaldacmJXMWtibXhtWmZGZXEvYnY1TmlYdTdTSytDUC9jTW92VjlzZjJWWDNvOUFJeFpVVzEyZkxIRjd3V2dZek1BOHZlLzJEUVBBaUFwNmx2N3dGZjNvWW5uSlVrZ3lMQXpNY25PempibWNsakc0b0wrb2YvcDhEZjAxZmVNeGVuK0tBL2RuWlBBRktZSzZPSzZzZEpUMDRWOGVtWUdrOFdoRy8xNWlQOXg0Ritmd3pDRWs4RGhjM2lpaUhEUmxIRjVpYUoyODloY0FUZWRSK2Z5L2xNVC8ySFluN1E0MXlKUkdqNEJhcXd4a0JxZ0F1VFhQb0NpRUFFU2MwQzBBLzNSTjM5OE9CQy92QWpWaWNXNS95em8zN1BDWmVJbGs1djRPYzR0Skl6T0V2S3pGdmZFenhLZ0FRRklBaXBRQUNwQUErZ0NJMkFPYklBOWNBWWV3QmNFZ2pBUUJWWUJGa2dDYVlBUHNrRSsyQWlLUUFuWUFYYURhbEFMR2tBVGFBRW5RQWM0RFM2QXkrQTZ1QUZ1Z3dkZ0JJeUQ1MkFHdkFIekVBUmhJVEpFZ1JRZ1ZVZ0xNb0RNSVFia0NIbEEvbEFJRkFYRlFZa1FEeEpDK2RBbXFBUXFoNnFoT3FnSitoNDZCVjJBcmtLRDBEMW9GSnFDZm9mZXd3aE1ncW13TXF3Tm04QU0yQVgyZzhQZ2xYQWl2QnJPZ3d2aDdYQVZYQThmZzl2aEMvQjErRFk4QWorSFp4R0FFQkVhb29ZWUlRekVEUWxFb3BFRWhJK3NRNHFSU3FRZWFVRzZrRjdrSmpLQ1RDUHZVQmdVQlVWSEdhSHNVZDZvNVNnV2FqVnFIYW9VVlkwNmdtcEg5YUJ1b2taUk02aFBhREphQ1cyQXRrUDdvQ1BSaWVoc2RCRzZFdDJJYmtOZlF0OUdqNlBmWURBWUdrWUhZNFB4eGtSaGtqRnJNS1dZL1poV3pIbk1JR1lNTTR2RlloV3dCbGdIYkNDV2lSVmdpN0I3c2NldzU3QkQySEhzV3h3UnA0b3p4M25pb25FOFhBR3VFbmNVZHhZM2hKdkF6ZU9sOEZwNE8zd2dubzNQeFpmaEcvQmQrQUg4T0g2ZUlFM1FJVGdRd2dqSmhJMkVLa0lMNFJMaEllRVZrVWhVSjlvU2c0bGM0Z1ppRmZFNDhRcHhsUGlPSkVQU0o3bVJZa2hDMG5iU1lkSjUwajNTS3pLWnJFMTJKa2VUQmVUdDVDYnlSZkpqOGxzSmlvU3hoSThFVzJLOVJJMUV1OFNReEF0SnZLU1dwSXZrS3NrOHlVckprNUlEa3ROU2VDbHRLVGNwcHRRNnFScXBVMUxEVXJQU0ZHa3o2VURwTk9sUzZhUFNWNlVuWmJBeTJqSWVNbXlaUXBsRE1oZGx4aWdJUllQaVJtRlJObEVhS0pjbzQxUU1WWWZxUTAybWxsQy9vL1pUWjJSbFpDMWx3MlZ6Wkd0a3o4aU8wQkNhTnMySGxrb3JvNTJnM2FHOWwxT1djNUhqeUcyVGE1RWJrcHVUWHlMdkxNK1JMNVp2bGI4dC8xNkJydUNoa0tLd1U2RkQ0WkVpU2xGZk1WZ3hXL0dBNGlYRjZTWFVKZlpMV0V1S2w1eFljbDhKVnRKWENsRmFvM1JJcVU5cFZsbEYyVXM1UTNtdjhrWGxhUldhaXJOS3NrcUZ5bG1WS1ZXS3FxTXFWN1ZDOVp6cU03b3MzWVdlU3EraTk5Qm4xSlRVdk5XRWFuVnEvV3J6NmpycXk5VUwxRnZWSDJrUU5CZ2FDUm9WR3QwYU01cXFtZ0dhK1pyTm12ZTE4Rm9NclNTdFBWcTlXblBhT3RvUjJsdTBPN1FuZGVSMWZIVHlkSnAxSHVxU2RaMTBWK3ZXNjk3U3crZ3g5RkwwOXV2ZDBJZjFyZlNUOUd2MEJ3eGdBMnNEcnNGK2cwRkR0S0d0SWMrdzNuRFlpR1RrWXBSbDFHdzBha3d6OWpjdU1PNHdmbUdpYVJKdHN0T2sxK1NUcVpWcHFtbUQ2UU16R1ROZnN3S3pMclBmemZYTldlWTE1cmNzeUJhZUZ1c3RPaTFlV2hwWWNpd1BXTjYxb2xnRldHMng2cmI2YUcxanpiZHVzWjZ5MGJTSnM5bG5NOHlnTW9JWXBZd3J0bWhiVjl2MXRxZHQzOWxaMnduc1R0ajlabTlrbjJKLzFINXlxYzVTenRLR3BXTU82ZzVNaHpxSEVVZTZZNXpqUWNjUkp6VW5wbE85MHhObkRXZTJjNlB6aEl1ZVM3TExNWmNYcnFhdWZOYzIxemszTzdlMWJ1ZmRFWGN2OTJMM2ZnOFpqK1VlMVI2UFBkVTlFejJiUFdlOHJMeldlSjMzUm52N2VlLzBIdlpSOW1INU5Qbk0rTnI0cnZYdDhTUDVoZnBWK3ozeDEvZm4rM2NGd0FHK0Fic0NIaTdUV3NaYjFoRUlBbjBDZHdVK0N0SUpXaDMwWXpBbU9DaTRKdmhwaUZsSWZraHZLQ1UwTnZSbzZKc3cxN0N5c0FmTGRaY0xsM2VIUzRiSGhEZUZ6MFc0UjVSSGpFU2FSSzZOdkI2bEdNV042b3pHUm9kSE4wYlBydkJZc1h2RmVJeFZURkhNblpVNkszTldYbDJsdUNwMTFabFl5VmhtN01rNGRGeEUzTkc0RDh4QVpqMXpOdDRuZmwvOERNdU50WWYxbk8zTXJtQlBjUnc0NVp5SkJJZUU4b1RKUklmRVhZbFRTVTVKbFVuVFhEZHVOZmRsc25keWJmSmNTbURLNFpTRjFJalUxalJjV2x6YUtaNE1MNFhYazY2U25wTSttR0dRVVpReHN0cHU5ZTdWTTN3L2ZtTW1sTGt5czFOQUZmMU05UWwxaFp1Rm8xbU9XVFZaYjdQRHMwL21TT2Z3Y3ZweTlYTzM1VTdrZWVaOXV3YTFocldtTzE4dGYyUCs2RnFYdFhYcm9IWHg2N3JYYTZ3dlhEKyt3V3ZEa1kyRWpTa2JmeW93TFNndmVMMHBZbE5Yb1hMaGhzS3h6VjZibTRza2l2aEZ3MXZzdDlSdVJXM2xidTNmWnJGdDc3WlB4ZXppYXlXbUpaVWxIMHBacGRlK01mdW02cHVGN1FuYis4dXN5dzdzd096ZzdiaXowMm5ua1hMcDhyenlzVjBCdTlvcjZCWEZGYTkzeCs2K1dtbFpXYnVIc0VlNFo2VEt2NnB6citiZUhYcy9WQ2RWMzY1eHJXbmRwN1J2Mjc2NS9lejlRd2VjRDdUVUt0ZVcxTDQveUQxNHQ4NnJycjFldTc3eUVPWlExcUduRGVFTnZkOHl2bTFxVkd3c2FmeDRtSGQ0NUVqSWtaNG1tNmFtbzBwSHk1cmhabUh6MUxHWVl6ZStjLyt1czhXb3BhNlYxbHB5SEJ3WEhuLzJmZHozZDA3NG5lZyt5VGpaOG9QV0QvdmFLRzNGN1ZCN2J2dE1SMUxIU0dkVTUrQXAzMVBkWGZaZGJUOGEvM2o0dE5ycG1qT3laOHJPRXM0V25sMDRsM2R1OW56Rytla0xpUmZHdW1PN0gxeU12SGlySjdpbi81TGZwU3VYUFM5ZjdIWHBQWGZGNGNycHEzWlhUMTFqWE91NGJuMjl2YytxciswbnE1L2ErcTM3Mndkc0JqcHYyTjdvR2x3NmVIYklhZWpDVGZlYmwyLzUzTHArZTludHdUdkw3OXdkamhrZXVjdStPM2t2OWQ3TCsxbjM1eDlzZUloK1dQeEk2bEhsWTZYSDlUL3IvZHc2WWoxeVp0Ujl0TzlKNkpNSFk2eXg1NzlrL3ZKaHZQQXArV25saE9wRTA2VDU1T2twejZrYnoxWThHMytlOFh4K3V1aFg2Vi8zdmRCOThjTnZ6ci8xelVUT2pML2t2MXo0dmZTVndxdkRyeTFmZDg4R3pUNStrL1ptZnE3NHJjTGJJKzhZNzNyZlI3eWZtTS8rZ1AxUTlWSHZZOWNudjA4UEY5SVdGdjRGQTVqei9DVjNGblVBQUFSbFNVUkJWSGljN2RSSGtoVkJBRU5Cd2YyUERERXM4RERtbSs1V21jd0lYVUNMOStubDVlVWx3STYrN0xyUFI3d0hUS2NlbitLK0NoL3NweDJlYXZTU1JQaGdMKzN3MUtPWENCL3NwQjJlSWFLWENCL3NvaDJlWWFLWENCL3NvQjJlb2FLWENCK3NyaDJlNGFLWENCK3NyQjJlSWFPWENCK3NxaDJlWWFPWENCK3NxQjJlb2FPWENCK3NwaDJlNGFPWENCK3NwQjJlS2FLWENCK3NvaDJlYWFLWENCK3NvQjJlcWFLWENCL01yaDJlNmFLWENCL01yQjJlS2FPWENCL01xaDJlYWFPWENCL01xQjJlcWFPWENCL01waDJlNmFPWENCL01wQjJlSmFLWENCL01vaDJlWmFLWENCL01vQjJlcGFLWENCK01yaDJlNWFLWENCK01yQjJlSmFPWENCK01xaDJlWmFPWENCK01xQjJlcGFPWENCK01waDJlNWFPWENCK01wQjJlTGFLWENCK01vaDJlYmFLWENCK01vQjJlcmFLWENCKzB0Y096WGZRUzRZT21kbmkyakY0aWZORFNEcysyMFV1RUR4cmE0ZGs2ZW9ud3dkWGE0ZGsrZW9ud3daWGE0Ukc5SDRRUHJ0RU9qK2o5UWZqZ2ZPM3dpTjQvaEEvTzFRNlA2TDFDK09BODdmQ0kzaHVFRDg3UkRvL292VVA0NEhqdDhJamVCNFFQanRVT2oramRRUGpnT08zd2lONk5oQStPMFE2UDZOMUIrT0I1N2ZDSTNwMkVENTdURG8vb1BVRDQ0SEh0OElqZWc0UVBIdE1PaitnOVFmamdmdTN3aU42VGhBL3UwdzZQNkIxQStPQjI3ZkNJM2tHRUQyN1REby9vSFVqNDRHUHQ4SWpld1lRUDN0Y09qK2lkUVBqZ2JlM3dpTjVKaEE5ZTF3NlA2SjFJK09CLzdmQ0kzc21FRC83V0RvL29YVUQ0NExkMmVFVHZJc0lIMzdYREkzb1hFajdvaDBmMExpWjg3SzRkSHRFckVENTIxZzZQNkpVSUg3dHFoMGYwaW9TUEhiWERJM3Bsd3NkdTJ1RVJ2UUVJSHp0cGgwZjBCaUY4N0tJZEh0RWJpUEN4ZzNaNFJHOHd3c2ZxMnVFUnZRRUpIeXRyaDBmMEJpVjhyS29kSHRFYm1QQ3hvblo0Ukc5d3dzZHEydUVSdlFrSUh5dHBoMGYwSmlGOHJLSWRIdEdiaVBDeGduWjRSRzh5d3NmczJ1RVJ2UWtKSHpOcmgwZjBKaVY4ektvZEh0R2JtUEF4bzNaNFJHOXl3c2RzMnVFUnZRVUlIek5waDBmMEZpRjh6S0lkSHRGYmlQQXhnM1o0Ukc4eHdzZm8ydUVSdlFVSkh5TnJoMGYwRmlWOGpLb2RIdEZibVBBeG9uWjRSRzl4d3NkbzJ1RVJ2UTBJSHlOcGgwZjBOaUY4aktJZEh0SGJpUEF4Z25aNFJHOHp3a2RiT3p5aXR5SGhvNmtkSHRIYmxQRFIwZzZQNkcxTStHaG9oMGYwTmlkOFhLMGRIdEZEK0xoVU96eWlSeExoNHpydDhJZ2V2d2dmVjJpSFIvVDRpL0J4dG5aNFJJLy9DQjluYW9kSDlIaVY4SEdXZG5oRWp6Y0pIMmRvaDBmMGVKZndjYlIyZUVTUER3a2ZSMnFIUi9TNGlmQnhsSFo0UkkrYkNSOUhhSWRIOUxpTDhQR3NkbmhFajdzSkg4OW9oMGYwZUlqdzhhaDJlRVNQaHdrZmoyaUhSL1I0aXZCeHIzWjRSSStuQ1IvM2FJZEg5RGlFOEhHcmRuaEVqOE1JSDdkb2gwZjBPSlR3OFpGMmVFU1B3d2tmNzJtSFIvUTRoZkR4bG5aNFJJL1RDQit2YVlkSDlEaVY4UEd2ZG5oRWo5TUpIMzlxaDBmMHVJVHc4Vk03UEtMSFpZU1BwQjhlMGVOU3drYzdQS0xINWI0Qjl1U0dVREtrdjBzQUFBQUFTVVZPUks1Q1lJST0"
      }, {
        name: "__ASSET__:bitmap_flixel_system__FlxPreloader_GraphicLogoLight",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUVBQUFBQkFDQVlBQUFDcWFYSGVBQUFGT1VsRVFWUjQycjJhQ1E3VE1CUkUyN0t2MStFY1hJUTdjVVQyblVKUXFoZmxFVDBVbVZnYTJXM2NaZWJQLzNiY25rNnZYdjlQbkFmaDlMOXc1L1RpNVdsd093TmZDL1RyeHJaeEFvejc4cnltQkI0bndIamlaOEc0OExwd2crZnhPY2NMME1ROU52bTRybXZ4UFk0Vm9DSnVzaDd2aUhvNFlaOFFsMzNrVFR5aWVkbUxFRWxDREhaQTI5dEVsNFQ5WElnaWdoNURNdVlOZDBDN3dZVHYwQWNhWitHSUdqREMzcERRT0MzZmhIbGN3b1FBSFdIMW01WTIyWGFDaGFBUHEwZHgzaWxBVjJFVHBsL2hMZ0FsaGdTTzZDYngvUUxRdC8waHZTSi9iOVV6SjkzUUtWQk9TQUdhUEdqaWtBYkx4NzRHZUsrb0NVbE84d1lKd0pleTVTRmprdmNuTUxZQUFQSnlna2xkUTRpc0FYdklROXJrSVF3ZWJEeG1MdVNWQ3JrYUlFU21jd2pnSmNWd1ZYZkVJUW9FQ2JHcUQ1VUcxeUI5N1hxQUFDYmZCYy81YnVJUEo2ekdqM2lNR0U0SE84QmtUSm8rVXFFRU1DQU9uT2VRZy9DeXR4Q2toK3VBOHorSVI1TVlFa0RSajJydmZEZkp4Mzk2OEhnRzgrd0Mxd0RhV2RGbVROL2lXSUIvTFh4cGU1Tjlzc0JqUk5sMmdlOEJIUFVBNUVPQWlMNWQ4SGNCSUE5RVhDTGdBdFVCV1g4bjhXc1dRUk1IVWZnZ2I5c3Z5VCs5allFRm1LSG95KzdnSjMxRjMwS2tBQnQzYzhwOWs1OEFlWTBoLzlnMUFQSWlBRmtERVl4T2dkN3hiVGlBM01mMml2Nk1aMHN4bUwrS3Z2SmV4SDhBa1pjUVVRdk9rd0RLZnhjKzUvNEV5TnNCRUljMFFBQ1JWOVVYZVVTUUVFNkoyaGhkZXJPQUtMMGZjRXJNd0FuZytlUUtRV2t5d1VzbGdubkR4TGk1eVFFbUNyUUV4dExuM0ljWXI1MEo4Umx6VTZTL0E3QzZiaGZRcmlBZFlQVktHSW1qZXdIdERCOXJvd1NZN3p2SXUzVjJrTDlVV1lCdXZVemFKYkZiaENRaU1VOEhLVDVtaTVQa0lDOEJpaXpOdVdZM1dBd0xzeHdEdlVhRWhTQ3UxZ0wwSFZYOVdoT25PZkViZ1FSdVZHc0IyaTVSVkRUV2tpUjRxWXZYTWgvNDJuZ0hNSTR2NHpXYjhSTGZKbFJsMS91QUl0K2NFTURSVmlRMWhtZ3NWOTlXK1BJYlgvLzA0UE9FMnpXQVNFdXhZZ2NvQjVZSWx4M0svVFJNSENJUW5mdVA4L2pUTko3eGFRSnp3RTJNY0VuZUVlNVlCU0t2SFhrVEo3cWZWb1EvTFBDUkhpQUlvaWgxdEIyMkNCS2k5Z0ZiQ3NwcTI1WW42cEQvc01MNzMzaTN3SHVBR0N0WGtCcHlnQUJ4OFpJRFBDbWl6bmpUOGxoOFJmcHRBRkZTQ0p3ZzRsa280WGZwQXdSWGVWdWZJaWNCSFBFbDRUZEw4RHh1VUgyQVBFNndJMDVaQVB0SWpER0lQei9nS2gxaFNUQ0pwUnBCand0d3c1WVRuQmFPZmd2UXY3M2ZFTC9nWGlObEpBQUFkZ0hrNVFaRXVBbzZYb3RUNFNEdDIyZWF5R3VsQUo4aHR5VHJxQk41Uk5DS0VJVXdmaG1pMzNLRWdBaXN0Ym9uMTJyaHpSQWtQem5xTTVqck9nRDQzTjRmK0xmQkZvS3hYK09WQTZoZ1NvUVZSSDdMOWhIOUxvSW1aL3ZIZFgvQTBnVVVxRzg0WUlKRjJINk05WHRIYU9oWHBSU2dDNkd2bTd5M3lpMkNpWU52MitSQjdBUnArZitBYUtxcWtFY0U3eHVvQS9UZklHblNRZDdSNzUxZ0M5QVJ0eEFBOG1EN2J0RkVJUThnN2pVZlJPRUxCMlNoTS9td0d1UWxnb1FnTlJocnh3ZjVKajd3WDJMZCtzNFJRRWhpUUJUaUNLZEtIOGZnNnZjSTRQRlZ6OGR4RmNBTkVLWFhXRERodUEwZWVTanE1L2hDa0lzemdvVHpIbFRPbHpQVEFmdWRZQmZFM1NTQUZHTmZkOVQ3SHlMai95NnZQcHVKNjFoTks0Y2pISWlEbkVFQ0JHbDlhTGtCT0s5WHlLVXRIRGxFZ053dGRoUnMyU0FjeFMxRnA0MFhvTVhaSm0xU29BWGNFZlhSQXZRL3Nxc2lCNEdJYkZ3N1FJRGNGc2NYMjduczlwempCV2czZERPUmN4TnY4a2NMME9UN1dwUHJhOGNMTUlEc2JqR09GMkM4TUNaNmNQc0ZMZ2kyUWU0OEVWTUFBQUFBU1VWT1JLNUNZSUk9"
      }, {
        name: "__ASSET__:bitmap_flixel_addons_transition__FlxTransitionSprite_RawGraphicTransTileCircle",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQWlBQUFBQWdDQVlBQUFBckZzTTFBQUFBQVhOU1IwSUFyczRjNlFBQUF2SkpSRUZVZUp6dDNORnUyekFNQmRCNi8vL1Azc01RTEREcU9MSXRVclRPQVlvTmJXS3lXU1BkVVVhWGRWMS9BSW80V3JDV2hKcDdydlp5MStMYzJrZXZUZUdvajZqTjZMYytvamZDOXg2eU51RWxzZmEvQmdRUW9JRUEwSzVLQU9oWis2Z0hBV0JDQWdod1pMWUFjR2Z0MWg2eUFrQkU3YjBlQklCSkNTQlF6OTZiOXU3cGd3Qnd2eEVEUUdUdGJRODJvSWtKSUZCRDZ4dDFsT25EUzBzLzdrR0k3Y0VFZ2hRQ0NMU0xta0I4cXZXdEVhWVBMeVBmZ3hCUmU2OEhBWUFwL2NsdUFBcFpmejR2MkVkZlAxTXYraG85TjZTamEwZHNobnMxSWpkaW16NzhtSUJRVStRRTRsTzlJMWY2eVRnQ2NRUVIzNE1GbUdtWmdGQko5QVRpZGMzbzUvYllsR3gwd0ZBRUVNNWFOeDhSOVhvOHR2ZDFxbXo4bVVjUUdhL1J1dmt6UTVXZkRlaENBS0hWWHVEb0dVVE9YTGZxNHA1NUR3WkFHQUdrdHFqcHczdTlPeDV6ZDgzUm50dnpXZ0NQSUlEVXRBMGVFVUVrNHdpRUdJNUFnSEFDeURYUkU0aFh6VE5mcXlqckhveXNtMEJIdTVjR29Cc0I1THp0Qk9MSlJ0bkVBWGlJNmdFa1l3THhxdnZONXlMcW5ua01BS1NxSGtBQWdJS3FCNURscDk5dnZ6eXErODNuSXVxZWVRd0FwS29lUURJdE8zOS9valBmMzlOZkV3QXVFRUN1eVpqQWZLcjN0RTMvanU5bmxQRDB0SDhiZ0VzRWtKcTJ3U2NpQ0xWYzMyWjdUdFl4WHVZeFp1YlBpcDlUU0NTQTFCWTlnY200QitYSzliS2UyL05hQUk4Z2dOQnFML1QwREVPakhLTkU2TmwzMWRjRWVDQUJoTE9XelVkRXZSNlA3WDJkS3B0KzVpVE5FUkJNU0FDaGtxT3cweU1NWlJ6anVBa1dlTHhsWGYzaVRQalN0MitXdXpiN3U5NmNMZjMwWGhBKzlSSzFHUDNXUS9SQytONUQxaUs4Sk5ZR0V4Qm9FRDJCeVRnQ3lyd0hKZk1vYjdTYnVlSHhURUNnaHRZMzZ0Vk43dTZGWVlRcHpGRVBKakR4UGRpQUppYUFRRDE3YjlxNy8yZWRjUVIwZCszV0hoeEJ4ZlpnQTVxWUFBSWNPYnRJakRLRkVZRCtHekVBbWNCTVNnQUJXaHd0R0QzdWI1Z3RBR1VkUWZXc2ZkU0RJNmdKQ1NCQUpRSlF1eW9CYU1ZanFJemE3ejJrQm9DL0tSRFdBS1A2d3BFQUFBQUFTVVZPUks1Q1lJST0"
      }, {
        name: "__ASSET__:bitmap_flixel_addons_transition_RawGraphicTransTileSquare",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQWlBQUFBQWdDQVlBQUFBckZzTTFBQUFBQVhOU1IwSUFyczRjNlFBQUFUbEpSRUZVZUp6dDNUa1N3akFRUlVHZ3VQK1ZUWVFEQThieU5qTlc5d1drN0w4cUJib1B3M0FEQUxvVEdnRFB5TU1Cb0hOUkVYQVBPbmNrUUFEbzNka1JFRDcrR1FnUUFESTRLd0tNZnhJQ0JJQzNveVBBK0RNU0lBQzVIQlVCeHA5VUJBakFwNzBqd1BqRGhBQUJzdG9yQW93L0pDUkFnRGxiSThENEExOEpFTWh2YlFRWWZ5QXRBUUxMdEVhQThRZVlJVUNvWkdrRUdIK0E1QVFJcmY1RmdQRUg0QzhCVXRPdkNERCtBSlFnUU5hYlJvRHhCNENGSHRFWDJHaTRCWDhuREFDMHF4NGdBRUJCMVo5Z1BIc0FRRUhWQXlTUytBR0FsUVJJVGVJSGdOSUVDSzNFRHdDYkNSQXFFVDhBRnlGQVlCbnhBN0FqQVFMNWlSL2djZ1FJTUVmOEFJY1FJRUJXNGdjdVRJQUFmQkkvY0RBQkFwQ0wrS0VMQWdTQU4vSERhUVFJQUJtSW44NElFQUI2SjM0Q0NCQUFpTk50L0x3QXc0NFVnME5GRTVnQUFBQUFTVVZPUks1Q1lJST0"
      }];
      if (ArrayBuffer.prototype.slice == null) {
        ArrayBuffer.prototype.slice = hp.sliceImpl;
      }
      R.__alpha16 = new Uint32Array(256);
      for (var Ji = 0; Ji < 256;) {
        var gk = Ji++;
        R.__alpha16[gk] = Math.ceil(gk * 257.00392156862745);
      }
      R.__clamp = new Uint8Array(511);
      for (Ji = 0; Ji < 255;) {
        gk = Ji++;
        R.__clamp[gk] = gk;
      }
      for (Ji = 255; Ji < 511;) {
        gk = Ji++;
        R.__clamp[gk] = 255;
      }
      Ua.level = 3;
      if (typeof console == "undefined") {
        console = {};
      }
      if (console.log == null) {
        console.log = function () {};
      }
      D.hitTestCanvas = ug.get_supported() ? window.document.createElement("canvas") : null;
      D.hitTestContext = ug.get_supported() ? D.hitTestCanvas.getContext("2d") : null;
      ei.maxTouchPoints = 2;
      ei.supportedGestures = null;
      ei.supportsGestureEvents = false;
      ei.inputMode = 2;
      qb.__meta__ = {
        statics: {
          toNullVector: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      la.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      ib.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Fa.__meta__ = {
        fields: {
          __cairo: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          addEventListener: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          removeEventListener: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Fa.__broadcastEvents = new V();
      Fa.__instanceCount = 0;
      Fa.__tempStack = new vb(function () {
        return qb.toObjectVector(null);
      }, function (a) {
        a.set_length(0);
      });
      Ea.idEnumerator = 0;
      t.__fontByName = new V();
      t.__registeredFonts = [];
      X.Element = 0;
      X.PCData = 1;
      X.CData = 2;
      X.Comment = 3;
      X.DocType = 4;
      X.ProcessingInstruction = 5;
      X.Document = 6;
      C.data = new sk(null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null);
      C.defaultData = new sk(null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null);
      C.keyBinds = function (a) {
        a = new V();
        a.h.note_up = [87, 38];
        a.h.note_left = [65, 37];
        a.h.note_down = [83, 40];
        a.h.note_right = [68, 39];
        a.h.ui_up = [87, 38];
        a.h.ui_left = [65, 37];
        a.h.ui_down = [83, 40];
        a.h.ui_right = [68, 39];
        a.h.accept = [32, 13];
        a.h.back = [8, 27];
        a.h.pause = [13, 27];
        a.h.reset = [82];
        a.h.volume_mute = [48];
        a.h.volume_up = [107, 187];
        a.h.volume_down = [109, 189];
        a.h.debug_1 = [55];
        a.h.debug_2 = [56];
        return a;
      }(this);
      C.gamepadBinds = function (a) {
        a = new V();
        a.h.note_up = [11, 3];
        a.h.note_left = [13, 2];
        a.h.note_down = [12, 0];
        a.h.note_right = [14, 1];
        a.h.ui_up = [11, 34];
        a.h.ui_left = [13, 37];
        a.h.ui_down = [12, 36];
        a.h.ui_right = [14, 35];
        a.h.accept = [0, 7];
        a.h.back = [1];
        a.h.pause = [7];
        a.h.reset = [6];
        return a;
      }(this);
      N.bpm = 100;
      N.crochet = 60 / N.bpm * 1000;
      N.stepCrochet = N.crochet / 4;
      N.songPosition = 0;
      N.offset = 0;
      N.safeZoneOffset = 0;
      N.bpmChangeMap = [];
      mb.defaultList = ["Easy", "Normal", "Hard"];
      mb.list = [];
      mb.defaultDifficulty = "Normal";
      Za.weekScores = new V();
      Za.songScores = new V();
      Za.songRating = new V();
      Wd.currentModDirectory = "";
      Wb.skipNextTransIn = false;
      Wb.skipNextTransOut = false;
      U.timePassedOnState = 0;
      Si.noteTypesData = new V();
      y.dumpExclusions = ["assets/shared/music/freakyMenu.mp3"];
      y.localTrackedAssets = [];
      y.currentTrackedAssets = new V();
      y.currentTrackedSounds = new V();
      Vf.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      fa.pool = function (a) {
        return new lh(function () {
          return new fa(0, 0);
        });
      }(this);
      Ha._pool = function (a) {
        return new lh(function () {
          return new Ha(0, 0, 0, 0);
        });
      }(this);
      Aa.__meta__ = {
        fields: {
          equals: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      Aa.__identity = new Aa();
      Aa.__pool = new vb(function () {
        return new Aa();
      }, function (a) {
        a.identity();
      });
      Nb.__pool = new vb(function () {
        return new Nb();
      }, function (a) {
        a.__identity();
      });
      Vb.defaultZoom = 1;
      ob.weeksLoaded = new V();
      ob.weeksList = [];
      hc.defaultPixelPerfectPosition = false;
      hc.defaultMoves = true;
      G.defaultAntialiasing = false;
      dc.DEFAULT_TEXT_X = 175;
      dc.DEFAULT_TEXT_Y = 460;
      dc.LONG_TEXT_ADD = 24;
      dc.LEFT_CHAR_X = -60;
      dc.RIGHT_CHAR_X = -100;
      dc.DEFAULT_CHAR_Y = 60;
      md.IDLE_SUFFIX = "-IDLE";
      md.DEFAULT_CHARACTER = "bf";
      md.DEFAULT_SCALE = 0.7;
      Wi.sha = "";
      g.autoPause = true;
      g.fixedTimestep = true;
      g.timeScale = 1;
      g.animationTimeScale = 1;
      g.worldDivisions = 6;
      g.VERSION = new Wi(5, 8, 0);
      g.elapsed = 0;
      g.maxElapsed = 0.1;
      g.scaleMode = new Bk();
      g.worldBounds = function (a) {
        a = Ha._pool.get();
        var b = 0;
        var c = 0;
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.x = b;
        a.y = c;
        a.width = d;
        a.height = e;
        a._inPool = false;
        return a;
      }(this);
      g.save = new Nd();
      g.random = new Yi();
      g.swipes = [];
      g.inputs = new rn();
      g.log = new sn();
      g.debugger = new qn();
      g.bitmap = new on();
      g.cameras = new pn();
      g.initialWidth = 0;
      g.initialHeight = 0;
      g.signals = new vn();
      ng.muted = true;
      ke.__meta__ = {
        fields: {
          glProgram: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      le.BASE_VERTEX_HEADER = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;";
      le.BASE_VERTEX_BODY = "openfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform)\n\t\t{\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;";
      le.BASE_VERTEX_SOURCE = "#pragma header\n\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\n\t\tvoid main(void)\n\t\t{\n\t\t\t#pragma body\n\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
      le.BASE_FRAGMENT_HEADER = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}";
      le.BASE_FRAGMENT_BODY = "vec4 color = texture2D(bitmap, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0)\n\t\t{\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\telse if (openfl_HasColorTransform)\n\t\t{\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\t\t}";
      le.BASE_FRAGMENT_SOURCE = "#pragma header\n\n\t\tvoid main(void)\n\t\t{\n\t\t\tgl_FragColor = flixel_texture2D(bitmap, openfl_TextureCoordv);\n\t\t}";
      T.__meta__ = {
        fields: {
          image: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __framebufferContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __indexBufferContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __surface: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __textureContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __vertexBufferContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __fromImage: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      T.__tempVector = new Yh();
      Be.resourceType = "image/png";
      Be.resourceName = "__ASSET__:bitmap_flixel_addons_transition__FlxTransitionSprite_RawGraphicTransTileCircle";
      Ce.resourceType = "image/png";
      Ce.resourceName = "__ASSET__:bitmap_flixel_addons_transition__FlxTransitionSprite_RawGraphicTransTileDiamond";
      De.resourceType = "image/png";
      De.resourceName = "__ASSET__:bitmap_flixel_addons_transition_RawGraphicTransTileSquare";
      Ee.resourceType = "image/png";
      Ee.resourceName = "__ASSET__:bitmap_flixel_addons_transition__TransitionFade_RawGraphicDiagonalGradient";
      kb.__pool = new vb(function () {
        return new kb();
      }, function (a) {
        a.setTo(0, 0);
      });
      ea.__pool = new vb(function () {
        return new ea();
      }, function (a) {
        a.setTo(0, 0, 0, 0);
      });
      ba.bitmapsCreated = 0;
      ba.useSectionCache = true;
      ba._staticPoint = new kb();
      ba._staticRect = new ea();
      ba._staticRect2 = new ea();
      ba._staticPointZero = new kb(0, 0);
      ba._staticMatrix = new Aa();
      ba._staticFlxRect = function (a) {
        a = Ha._pool.get();
        var b = 0;
        var c = 0;
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.x = b;
        a.y = c;
        a.width = d;
        a.height = e;
        a._inPool = false;
        return a;
      }(this);
      ba._staticFlxRect2 = function (a) {
        a = Ha._pool.get();
        var b = 0;
        var c = 0;
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.x = b;
        a.y = c;
        a.width = d;
        a.height = e;
        a._inPool = false;
        return a;
      }(this);
      gd._cachedPoint = function (a) {
        var b = 0;
        a = 0;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = fa.pool.get().set(b, a);
        a._inPool = false;
        return a;
      }(this);
      mj.CLICK_EVENT = "click_popup";
      od.EXTENSIONS = [".ttf", ".otf"];
      id._pool = new lh(function () {
        return new id();
      });
      id._boundObjects = new Oa();
      cc.defaultPersist = false;
      pb._point = new kb();
      pb._rect = new ea();
      pb._matrix = new Sc();
      Od.drawCalls = 0;
      ig.fromStringMap = function (a) {
        a = new V();
        a.h.ANY = -2;
        a.h.A = 0;
        a.h.B = 1;
        a.h.X = 2;
        a.h.Y = 3;
        a.h.LEFT_SHOULDER = 4;
        a.h.RIGHT_SHOULDER = 5;
        a.h.BACK = 6;
        a.h.START = 7;
        a.h.LEFT_STICK_CLICK = 8;
        a.h.RIGHT_STICK_CLICK = 9;
        a.h.GUIDE = 10;
        a.h.DPAD_UP = 11;
        a.h.DPAD_DOWN = 12;
        a.h.DPAD_LEFT = 13;
        a.h.DPAD_RIGHT = 14;
        a.h.LEFT_TRIGGER_BUTTON = 15;
        a.h.RIGHT_TRIGGER_BUTTON = 16;
        a.h.LEFT_TRIGGER = 17;
        a.h.RIGHT_TRIGGER = 18;
        a.h.LEFT_ANALOG_STICK = 19;
        a.h.RIGHT_ANALOG_STICK = 20;
        a.h.DPAD = 21;
        a.h.TILT_PITCH = 26;
        a.h.TILT_ROLL = 27;
        a.h.POINTER_X = 28;
        a.h.POINTER_Y = 29;
        a.h.EXTRA_0 = 30;
        a.h.EXTRA_1 = 31;
        a.h.EXTRA_2 = 32;
        a.h.EXTRA_3 = 33;
        a.h.LEFT_STICK_DIGITAL_UP = 34;
        a.h.LEFT_STICK_DIGITAL_RIGHT = 35;
        a.h.LEFT_STICK_DIGITAL_DOWN = 36;
        a.h.LEFT_STICK_DIGITAL_LEFT = 37;
        a.h.RIGHT_STICK_DIGITAL_UP = 38;
        a.h.RIGHT_STICK_DIGITAL_RIGHT = 39;
        a.h.RIGHT_STICK_DIGITAL_DOWN = 40;
        a.h.RIGHT_STICK_DIGITAL_LEFT = 41;
        return a;
      }(this);
      ig.toStringMap = function (a) {
        a = new rc();
        a.h[-2] = "ANY";
        a.h[0] = "A";
        a.h[1] = "B";
        a.h[2] = "X";
        a.h[3] = "Y";
        a.h[4] = "LEFT_SHOULDER";
        a.h[5] = "RIGHT_SHOULDER";
        a.h[6] = "BACK";
        a.h[7] = "START";
        a.h[8] = "LEFT_STICK_CLICK";
        a.h[9] = "RIGHT_STICK_CLICK";
        a.h[10] = "GUIDE";
        a.h[11] = "DPAD_UP";
        a.h[12] = "DPAD_DOWN";
        a.h[13] = "DPAD_LEFT";
        a.h[14] = "DPAD_RIGHT";
        a.h[15] = "LEFT_TRIGGER_BUTTON";
        a.h[16] = "RIGHT_TRIGGER_BUTTON";
        a.h[17] = "LEFT_TRIGGER";
        a.h[18] = "RIGHT_TRIGGER";
        a.h[19] = "LEFT_ANALOG_STICK";
        a.h[20] = "RIGHT_ANALOG_STICK";
        a.h[21] = "DPAD";
        a.h[26] = "TILT_PITCH";
        a.h[27] = "TILT_ROLL";
        a.h[28] = "POINTER_X";
        a.h[29] = "POINTER_Y";
        a.h[30] = "EXTRA_0";
        a.h[31] = "EXTRA_1";
        a.h[32] = "EXTRA_2";
        a.h[33] = "EXTRA_3";
        a.h[34] = "LEFT_STICK_DIGITAL_UP";
        a.h[35] = "LEFT_STICK_DIGITAL_RIGHT";
        a.h[36] = "LEFT_STICK_DIGITAL_DOWN";
        a.h[37] = "LEFT_STICK_DIGITAL_LEFT";
        a.h[38] = "RIGHT_STICK_DIGITAL_UP";
        a.h[39] = "RIGHT_STICK_DIGITAL_RIGHT";
        a.h[40] = "RIGHT_STICK_DIGITAL_DOWN";
        a.h[41] = "RIGHT_STICK_DIGITAL_LEFT";
        return a;
      }(this);
      nb.__meta__ = {
        fields: {
          addEventListener: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      nb.numDevices = 0;
      nb.__deviceList = [];
      nb.__instances = [];
      nb.__devices = new Oa();
      mg._gameInput = new nb();
      jf.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 24,
        down: 25,
        left: 26,
        right: 27
      });
      jf.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 28,
        down: 29,
        left: 30,
        right: 31
      });
      kf.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 21,
        down: 22,
        left: 23,
        right: 24
      });
      kf.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 25,
        down: 26,
        left: 27,
        right: 28
      });
      Ed.REMOTE_DPAD = new Oc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25,
        threshold: 0.5,
        mode: Qg.ONLY_DIGITAL
      });
      Ed.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 26,
        down: 27,
        left: 28,
        right: 29
      });
      Ed.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 26,
        down: 27,
        left: 28,
        right: 29
      });
      lf.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 23,
        down: 24,
        left: 25,
        right: 26
      });
      lf.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 27,
        down: 28,
        left: 29,
        right: 30
      });
      mf.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25
      });
      mf.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 26,
        down: 27,
        left: 28,
        right: 29
      });
      Ge.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 21,
        down: 22,
        left: 23,
        right: 24
      });
      Ge.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 25,
        down: 26,
        left: 27,
        right: 28
      });
      ci.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25
      });
      di.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25
      });
      nf.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25
      });
      nf.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 26,
        down: 27,
        left: 28,
        right: 29
      });
      Fd.REMOTE_DPAD = new Oc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25,
        threshold: 0.5,
        mode: Qg.ONLY_DIGITAL
      });
      Fd.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 28,
        down: 29,
        left: 30,
        right: 31
      });
      Fd.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 32,
        down: 33,
        left: 34,
        right: 35
      });
      of.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 21,
        down: 22,
        left: 23,
        right: 24
      });
      of.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 25,
        down: 26,
        left: 27,
        right: 28
      });
      Gg.fromStringMap = function (a) {
        a = new V();
        a.h.ANY = -2;
        a.h.A = 65;
        a.h.B = 66;
        a.h.C = 67;
        a.h.D = 68;
        a.h.E = 69;
        a.h.F = 70;
        a.h.G = 71;
        a.h.H = 72;
        a.h.I = 73;
        a.h.J = 74;
        a.h.K = 75;
        a.h.L = 76;
        a.h.M = 77;
        a.h.N = 78;
        a.h.O = 79;
        a.h.P = 80;
        a.h.Q = 81;
        a.h.R = 82;
        a.h.S = 83;
        a.h.T = 84;
        a.h.U = 85;
        a.h.V = 86;
        a.h.W = 87;
        a.h.X = 88;
        a.h.Y = 89;
        a.h.Z = 90;
        a.h.ZERO = 48;
        a.h.ONE = 49;
        a.h.TWO = 50;
        a.h.THREE = 51;
        a.h.FOUR = 52;
        a.h.FIVE = 53;
        a.h.SIX = 54;
        a.h.SEVEN = 55;
        a.h.EIGHT = 56;
        a.h.NINE = 57;
        a.h.PAGEUP = 33;
        a.h.PAGEDOWN = 34;
        a.h.HOME = 36;
        a.h.END = 35;
        a.h.INSERT = 45;
        a.h.ESCAPE = 27;
        a.h.MINUS = 189;
        a.h.PLUS = 187;
        a.h.DELETE = 46;
        a.h.BACKSPACE = 8;
        a.h.LBRACKET = 219;
        a.h.RBRACKET = 221;
        a.h.BACKSLASH = 220;
        a.h.CAPSLOCK = 20;
        a.h.SCROLL_LOCK = 145;
        a.h.NUMLOCK = 144;
        a.h.SEMICOLON = 186;
        a.h.QUOTE = 222;
        a.h.ENTER = 13;
        a.h.SHIFT = 16;
        a.h.COMMA = 188;
        a.h.PERIOD = 190;
        a.h.SLASH = 191;
        a.h.GRAVEACCENT = 192;
        a.h.CONTROL = 17;
        a.h.ALT = 18;
        a.h.SPACE = 32;
        a.h.UP = 38;
        a.h.DOWN = 40;
        a.h.LEFT = 37;
        a.h.RIGHT = 39;
        a.h.TAB = 9;
        a.h.WINDOWS = 15;
        a.h.MENU = 302;
        a.h.PRINTSCREEN = 301;
        a.h.BREAK = 19;
        a.h.F1 = 112;
        a.h.F2 = 113;
        a.h.F3 = 114;
        a.h.F4 = 115;
        a.h.F5 = 116;
        a.h.F6 = 117;
        a.h.F7 = 118;
        a.h.F8 = 119;
        a.h.F9 = 120;
        a.h.F10 = 121;
        a.h.F11 = 122;
        a.h.F12 = 123;
        a.h.NUMPADZERO = 96;
        a.h.NUMPADONE = 97;
        a.h.NUMPADTWO = 98;
        a.h.NUMPADTHREE = 99;
        a.h.NUMPADFOUR = 100;
        a.h.NUMPADFIVE = 101;
        a.h.NUMPADSIX = 102;
        a.h.NUMPADSEVEN = 103;
        a.h.NUMPADEIGHT = 104;
        a.h.NUMPADNINE = 105;
        a.h.NUMPADMINUS = 109;
        a.h.NUMPADPLUS = 107;
        a.h.NUMPADPERIOD = 110;
        a.h.NUMPADMULTIPLY = 106;
        a.h.NUMPADSLASH = 111;
        return a;
      }(this);
      Gg.toStringMap = function (a) {
        a = new rc();
        a.h[-2] = "ANY";
        a.h[65] = "A";
        a.h[66] = "B";
        a.h[67] = "C";
        a.h[68] = "D";
        a.h[69] = "E";
        a.h[70] = "F";
        a.h[71] = "G";
        a.h[72] = "H";
        a.h[73] = "I";
        a.h[74] = "J";
        a.h[75] = "K";
        a.h[76] = "L";
        a.h[77] = "M";
        a.h[78] = "N";
        a.h[79] = "O";
        a.h[80] = "P";
        a.h[81] = "Q";
        a.h[82] = "R";
        a.h[83] = "S";
        a.h[84] = "T";
        a.h[85] = "U";
        a.h[86] = "V";
        a.h[87] = "W";
        a.h[88] = "X";
        a.h[89] = "Y";
        a.h[90] = "Z";
        a.h[48] = "ZERO";
        a.h[49] = "ONE";
        a.h[50] = "TWO";
        a.h[51] = "THREE";
        a.h[52] = "FOUR";
        a.h[53] = "FIVE";
        a.h[54] = "SIX";
        a.h[55] = "SEVEN";
        a.h[56] = "EIGHT";
        a.h[57] = "NINE";
        a.h[33] = "PAGEUP";
        a.h[34] = "PAGEDOWN";
        a.h[36] = "HOME";
        a.h[35] = "END";
        a.h[45] = "INSERT";
        a.h[27] = "ESCAPE";
        a.h[189] = "MINUS";
        a.h[187] = "PLUS";
        a.h[46] = "DELETE";
        a.h[8] = "BACKSPACE";
        a.h[219] = "LBRACKET";
        a.h[221] = "RBRACKET";
        a.h[220] = "BACKSLASH";
        a.h[20] = "CAPSLOCK";
        a.h[145] = "SCROLL_LOCK";
        a.h[144] = "NUMLOCK";
        a.h[186] = "SEMICOLON";
        a.h[222] = "QUOTE";
        a.h[13] = "ENTER";
        a.h[16] = "SHIFT";
        a.h[188] = "COMMA";
        a.h[190] = "PERIOD";
        a.h[191] = "SLASH";
        a.h[192] = "GRAVEACCENT";
        a.h[17] = "CONTROL";
        a.h[18] = "ALT";
        a.h[32] = "SPACE";
        a.h[38] = "UP";
        a.h[40] = "DOWN";
        a.h[37] = "LEFT";
        a.h[39] = "RIGHT";
        a.h[9] = "TAB";
        a.h[15] = "WINDOWS";
        a.h[302] = "MENU";
        a.h[301] = "PRINTSCREEN";
        a.h[19] = "BREAK";
        a.h[112] = "F1";
        a.h[113] = "F2";
        a.h[114] = "F3";
        a.h[115] = "F4";
        a.h[116] = "F5";
        a.h[117] = "F6";
        a.h[118] = "F7";
        a.h[119] = "F8";
        a.h[120] = "F9";
        a.h[121] = "F10";
        a.h[122] = "F11";
        a.h[123] = "F12";
        a.h[96] = "NUMPADZERO";
        a.h[97] = "NUMPADONE";
        a.h[98] = "NUMPADTWO";
        a.h[99] = "NUMPADTHREE";
        a.h[100] = "NUMPADFOUR";
        a.h[101] = "NUMPADFIVE";
        a.h[102] = "NUMPADSIX";
        a.h[103] = "NUMPADSEVEN";
        a.h[104] = "NUMPADEIGHT";
        a.h[105] = "NUMPADNINE";
        a.h[109] = "NUMPADMINUS";
        a.h[107] = "NUMPADPLUS";
        a.h[110] = "NUMPADPERIOD";
        a.h[106] = "NUMPADMULTIPLY";
        a.h[111] = "NUMPADSLASH";
        return a;
      }(this);
      Pe.resourceType = "image/png";
      Pe.resourceName = "__ASSET__:bitmap_flixel_input_mouse__FlxMouse_GraphicCursor";
      Uh.maxTouchPoints = 0;
      be._point = function (a) {
        var b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = fa.pool.get().set(a, b);
        a._inPool = false;
        return a;
      }(this);
      Df.resourceType = "image/png";
      Df.resourceName = "__ASSET__:bitmap_flixel_system_GraphicLogo";
      Ef.resourceType = "image/png";
      Ef.resourceName = "__ASSET__:bitmap_flixel_system_GraphicVirtualInput";
      wd.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      wd.defaultObjectEncoding = 10;
      Qd.defaultSoundExtension = "ogg";
      Qd.FONT_DEFAULT = "Nokia Cellphone FC Small";
      Qd.FONT_DEBUGGER = "Monsterrat";
      pd._NUM_CACHED_FLX_LIST = 0;
      qf.resourceType = "image/png";
      qf.resourceName = "__ASSET__:bitmap_flixel_system__FlxPreloader_GraphicLogoLight";
      rf.resourceType = "image/png";
      rf.resourceName = "__ASSET__:bitmap_flixel_system__FlxPreloader_GraphicLogoCorners";
      S._NUM_CACHED_QUAD_TREES = 0;
      fi._tooltips = [];
      Se.windowAmount = 0;
      Ba.NORMAL = new Ba();
      Ba.WARNING = new Ba("[WARNING] ", "D9F85C", 12, false, false, false, "flixel/sounds/beep", true);
      Ba.ERROR = new Ba("[ERROR] ", "FF8888", 12, false, false, false, "flixel/sounds/beep", true);
      Ba.NOTICE = new Ba("[NOTICE] ", "5CF878", 12, false);
      va.PI2 = Math.PI / 2;
      va.ELASTIC_PERIOD = 0.4;
      xb.colorLookup = function (a) {
        a = new V();
        a.h.TRANSPARENT = 0;
        a.h.WHITE = -1;
        a.h.GRAY = -8355712;
        a.h.BLACK = -16777216;
        a.h.GREEN = -16744448;
        a.h.LIME = -16711936;
        a.h.YELLOW = -256;
        a.h.ORANGE = -23296;
        a.h.RED = -65536;
        a.h.PURPLE = -8388480;
        a.h.BLUE = -16776961;
        a.h.BROWN = -7650029;
        a.h.PINK = -16181;
        a.h.MAGENTA = -65281;
        a.h.CYAN = -16711681;
        return a;
      }(this);
      xb.COLOR_REGEX = new sa("^(0x|#)(([A-F0-9]{2}){3,4})$", "i");
      ag.defaultObjectEncoding = 10;
      Gc.flashGfxSprite = new $a();
      Gc.flashGfx = Gc.flashGfxSprite.get_graphics();
      Wc._pool = new lh(function () {
        return new Wc();
      });
      Hf.__fullCombineShader = new Ol();
      Hf.__innerCombineShader = new Pl();
      Hf.__combineShader = new Nl();
      Cj.s_arrayOfDeltaIndex = [0, 0.01, 0.02, 0.04, 0.05, 0.06, 0.07, 0.08, 0.1, 0.11, 0.12, 0.14, 0.15, 0.16, 0.17, 0.18, 0.2, 0.21, 0.22, 0.24, 0.25, 0.27, 0.28, 0.3, 0.32, 0.34, 0.36, 0.38, 0.4, 0.42, 0.44, 0.46, 0.48, 0.5, 0.53, 0.56, 0.59, 0.62, 0.65, 0.68, 0.71, 0.74, 0.77, 0.8, 0.83, 0.86, 0.89, 0.92, 0.95, 0.98, 1, 1.06, 1.12, 1.18, 1.24, 1.3, 1.36, 1.42, 1.48, 1.54, 1.6, 1.66, 1.72, 1.78, 1.84, 1.9, 1.96, 2, 2.12, 2.25, 2.37, 2.5, 2.62, 2.75, 2.87, 3, 3.2, 3.4, 3.6, 3.8, 4, 4.3, 4.7, 4.9, 5, 5.5, 6, 6.5, 6.8, 7, 7.3, 7.5, 7.8, 8, 8.4, 8.7, 9, 9.4, 9.6, 9.8, 10];
      Jf.MATRIX_ORDER_APPEND = 1;
      Ie.lumR = 0.3086;
      Ie.lumG = 0.6094;
      Ie.lumB = 0.082;
      qe.USE_CACHE = false;
      qe.USE_ENUM_INDEX = false;
      qe.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
      de.DEFAULT_RESOLVER = new Rl();
      de.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
      li.CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
      li.BYTES = bc.ofString(li.CHARS);
      Dg.escapes = function (a) {
        a = new V();
        a.h.lt = "<";
        a.h.gt = ">";
        a.h.amp = "&";
        a.h.quot = "\"";
        a.h.apos = "'";
        return a;
      }(this);
      Hd.LEN_EXTRA_BITS_TBL = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, -1, -1];
      Hd.LEN_BASE_VAL_TBL = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258];
      Hd.DIST_EXTRA_BITS_TBL = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, -1, -1];
      Hd.DIST_BASE_VAL_TBL = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577];
      Hd.CODE_LENGTHS_POS = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
      Sa.activeRequests = 0;
      Sa.requestLimit = 17;
      Sa.requestQueue = new ab();
      Ya.dummyCharacter = "";
      Ya.windowID = 0;
      bg.DICTIONARY = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");
      bg.EXTENDED_DICTIONARY = function (a) {
        a = [];
        for (var b = 0, c = bg.DICTIONARY; b < c.length;) {
          var d = c[b];
          ++b;
          for (var e = 0, f = bg.DICTIONARY; e < f.length;) {
            var g = f[e];
            ++e;
            a.push(d + g);
          }
        }
        return a;
      }(this);
      ue.MUL_TABLE = [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265, 497, 469, 443, 421, 25, 191, 365, 349, 335, 161, 155, 149, 9, 278, 269, 261, 505, 245, 475, 231, 449, 437, 213, 415, 405, 395, 193, 377, 369, 361, 353, 345, 169, 331, 325, 319, 313, 307, 301, 37, 145, 285, 281, 69, 271, 267, 263, 259, 509, 501, 493, 243, 479, 118, 465, 459, 113, 446, 55, 435, 429, 423, 209, 413, 51, 403, 199, 393, 97, 3, 379, 375, 371, 367, 363, 359, 355, 351, 347, 43, 85, 337, 333, 165, 327, 323, 5, 317, 157, 311, 77, 305, 303, 75, 297, 294, 73, 289, 287, 71, 141, 279, 277, 275, 68, 135, 67, 133, 33, 262, 260, 129, 511, 507, 503, 499, 495, 491, 61, 121, 481, 477, 237, 235, 467, 232, 115, 457, 227, 451, 7, 445, 221, 439, 218, 433, 215, 427, 425, 211, 419, 417, 207, 411, 409, 203, 202, 401, 399, 396, 197, 49, 389, 387, 385, 383, 95, 189, 47, 187, 93, 185, 23, 183, 91, 181, 45, 179, 89, 177, 11, 175, 87, 173, 345, 343, 341, 339, 337, 21, 167, 83, 331, 329, 327, 163, 81, 323, 321, 319, 159, 79, 315, 313, 39, 155, 309, 307, 153, 305, 303, 151, 75, 299, 149, 37, 295, 147, 73, 291, 145, 289, 287, 143, 285, 71, 141, 281, 35, 279, 139, 69, 275, 137, 273, 17, 271, 135, 269, 267, 133, 265, 33, 263, 131, 261, 130, 259, 129, 257, 1];
      ue.SHG_TABLE = [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13, 14, 14, 14, 14, 10, 13, 14, 14, 14, 13, 13, 13, 9, 14, 14, 14, 15, 14, 15, 14, 15, 15, 14, 15, 15, 15, 14, 15, 15, 15, 15, 15, 14, 15, 15, 15, 15, 15, 15, 12, 14, 15, 15, 13, 15, 15, 15, 15, 16, 16, 16, 15, 16, 14, 16, 16, 14, 16, 13, 16, 16, 16, 15, 16, 13, 16, 15, 16, 14, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 13, 14, 16, 16, 15, 16, 16, 10, 16, 15, 16, 14, 16, 16, 14, 16, 16, 14, 16, 16, 14, 15, 16, 16, 16, 14, 15, 14, 15, 13, 16, 16, 15, 17, 17, 17, 17, 17, 17, 14, 15, 17, 17, 16, 16, 17, 16, 15, 17, 16, 17, 11, 17, 16, 17, 16, 17, 16, 17, 17, 16, 17, 17, 16, 17, 17, 16, 16, 17, 17, 17, 16, 14, 17, 17, 17, 17, 15, 16, 14, 16, 15, 16, 13, 16, 15, 16, 14, 16, 15, 16, 12, 16, 15, 16, 17, 17, 17, 17, 17, 13, 16, 15, 17, 17, 17, 16, 15, 17, 17, 17, 16, 15, 17, 17, 14, 16, 17, 17, 16, 17, 17, 16, 15, 17, 16, 14, 17, 16, 15, 17, 16, 17, 17, 16, 17, 15, 16, 17, 14, 17, 16, 15, 17, 16, 17, 13, 17, 16, 17, 17, 16, 17, 14, 17, 16, 17, 16, 17, 16, 17, 9];
      Bb.__identity = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
      kc.onUpdate = new Uc();
      kc.__updated = false;
      Le.sensorByID = new rc();
      Le.sensors = [];
      Qc.devices = new rc();
      Qc.onConnect = new yo();
      Lc.devices = new rc();
      Lc.onConnect = new zo();
      Cc.onCancel = new ui();
      Cc.onEnd = new ui();
      Cc.onMove = new ui();
      Cc.onStart = new ui();
      oa.cache = new Eo();
      oa.onChange = new Uc();
      oa.bundlePaths = new V();
      oa.libraries = new V();
      oa.libraryPaths = new V();
      Ua.throwErrors = true;
      Jb.Y_PER_ROW = 85;
      vf.allLetters = function (a) {
        a = new V();
        a.h.a = null;
        a.h.b = null;
        a.h.c = null;
        a.h.d = null;
        a.h.e = null;
        a.h.f = null;
        a.h.g = null;
        a.h.h = null;
        a.h.i = null;
        a.h.j = null;
        a.h.k = null;
        a.h.l = null;
        a.h.m = null;
        a.h.n = null;
        a.h.o = null;
        a.h.p = null;
        a.h.q = null;
        a.h.r = null;
        a.h.s = null;
        a.h.t = null;
        a.h.u = null;
        a.h.v = null;
        a.h.w = null;
        a.h.x = null;
        a.h.y = null;
        a.h.z = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = {
          offsetsBold: [0, -11]
        };
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h["0"] = null;
        a.h["1"] = null;
        a.h["2"] = null;
        a.h["3"] = null;
        a.h["4"] = null;
        a.h["5"] = null;
        a.h["6"] = null;
        a.h["7"] = null;
        a.h["8"] = null;
        a.h["9"] = null;
        a.h["&"] = {
          offsetsBold: [0, 2]
        };
        a.h["("] = {
          offsetsBold: [0, 0]
        };
        a.h[")"] = {
          offsetsBold: [0, 0]
        };
        a.h["["] = null;
        a.h["]"] = {
          offsets: [0, -1]
        };
        a.h["*"] = {
          offsets: [0, 28],
          offsetsBold: [0, 40]
        };
        a.h["+"] = {
          offsets: [0, 7],
          offsetsBold: [0, 12]
        };
        a.h["-"] = {
          offsets: [0, 16],
          offsetsBold: [0, 16]
        };
        a.h["<"] = {
          offsetsBold: [0, -2]
        };
        a.h[">"] = {
          offsetsBold: [0, -2]
        };
        a.h["'"] = {
          anim: "apostrophe",
          offsets: [0, 32],
          offsetsBold: [0, 40]
        };
        a.h["\""] = {
          anim: "quote",
          offsets: [0, 32],
          offsetsBold: [0, 40]
        };
        a.h["!"] = {
          anim: "exclamation"
        };
        a.h["?"] = {
          anim: "question"
        };
        a.h["."] = {
          anim: "period"
        };
        a.h[""] = {
          anim: "start quote",
          offsets: [0, 24],
          offsetsBold: [0, 40]
        };
        a.h[""] = {
          anim: "end quote",
          offsets: [0, 24],
          offsetsBold: [0, 40]
        };
        a.h._ = null;
        a.h["#"] = null;
        a.h.$ = null;
        a.h["%"] = null;
        a.h[":"] = {
          offsets: [0, 2],
          offsetsBold: [0, 8]
        };
        a.h[";"] = {
          offsets: [0, -2],
          offsetsBold: [0, 4]
        };
        a.h["@"] = null;
        a.h["^"] = {
          offsets: [0, 28],
          offsetsBold: [0, 38]
        };
        a.h[","] = {
          anim: "comma",
          offsets: [0, -6],
          offsetsBold: [0, -4]
        };
        a.h["\\"] = {
          anim: "back slash",
          offsets: [0, 0]
        };
        a.h["/"] = {
          anim: "forward slash",
          offsets: [0, 0]
        };
        a.h["|"] = null;
        a.h["~"] = {
          offsets: [0, 16],
          offsetsBold: [0, 20]
        };
        a.h[""] = {
          anim: "inverted exclamation",
          offsets: [0, -20],
          offsetsBold: [0, -20]
        };
        a.h[""] = {
          anim: "inverted question",
          offsets: [0, -20],
          offsetsBold: [0, -20]
        };
        a.h["{"] = null;
        a.h["}"] = null;
        a.h[""] = {
          anim: "bullet",
          offsets: [0, 18],
          offsetsBold: [0, 20]
        };
        return a;
      }(this);
      ad.DEFAULT_CHARACTER = "bf";
      ve.DEFAULT_CHARACTER = "bf";
      Pa.globalRgbShaders = [];
      Pa.SUSTAIN_SIZE = 44;
      Pa.swagWidth = 112;
      Pa.colArray = ["purple", "blue", "green", "red"];
      Pa.defaultNoteSkin = "noteSkins/NOTE_assets";
      gc.defaultNoteSplash = "noteSplashes/noteSplashes";
      gc.configs = new V();
      gc.aliveTime = 0;
      gc.buggedKillTime = 0.5;
      na.__lastTimerID = 0;
      na.__timers = new rc();
      hm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      im.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Nh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Ki.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      ge.__meta__ = {
        fields: {
          __context: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __type: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      jm.__meta__ = {
        fields: {
          cairo: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __matrix3: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          applyMatrix: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __setBlendModeCairo: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      pg.__meta__ = {
        fields: {
          context: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          applySmoothing: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          setTransform: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __setBlendModeContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      nm.__meta__ = {
        fields: {
          __element: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Pj.__meta__ = {
        fields: {
          element: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      je.__meta__ = {
        fields: {
          overrideBlendMode: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      Pf.__meta__ = {
        statics: {
          create: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        },
        fields: {
          parameters: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Pf.__rootURL = ug.get_supported() ? window.document.URL : "";
      Ja.__meta__ = {
        fields: {
          gl: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __gl: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __matrix: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __projection: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __projectionFlipped: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Ja.__alphaValue = [1];
      Ja.__colorMultipliersValue = [0, 0, 0, 0];
      Ja.__colorOffsetsValue = [0, 0, 0, 0];
      Ja.__emptyColorValue = [0, 0, 0, 0];
      Ja.__hasColorTransformValue = [false];
      Ja.__scissorRectangle = new ea();
      Ja.__textureSizeValue = [0, 0];
      hk.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          onComplete: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      wm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      bj.__meta__ = {
        fields: {
          index: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          name: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      og.__meta__ = {
        fields: {
          index: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          name: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      Bi.__meta__ = {
        fields: {
          __broadcastEvent: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __dispatchEvent: {
            SuppressWarnings: [["checkstyle:Dynamic", "checkstyle:LeftCurly"]]
          },
          __dispatchStack: {
            SuppressWarnings: [["checkstyle:Dynamic", "checkstyle:LeftCurly"]]
          },
          __dispatchTarget: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __handleError: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      zm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Nj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Oj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Eh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      ie.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          o: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      ie.empty = new ie();
      D.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        statics: {
          windingRule: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          createBitmapFill: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          createGradientPattern: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      D.fillCommands = new ie();
      D.strokeCommands = new ie();
      ca.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      zg.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        statics: {
          renderTileContainer: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Fh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Ve.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Tj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Hh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      oc.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      oc.blankBitmapData = new T(1, 1, false, 0);
      oc.tempColorTransform = new Nb(1, 1, 1, 1, 0, 0, 0, 0);
      Gh.opaqueBitmapData = new T(1, 1, false, 0);
      dg.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Bg.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Z.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      We.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      We.__textureSizeValue = [0, 0];
      xc.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      he.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      dh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      bh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      ch.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Ag.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      cg.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Lh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      rm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          overrideIntValues: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Kb.__glDepthStencil = -1;
      Kb.__glMaxTextureMaxAnisotropy = -1;
      Kb.__glMaxViewportDims = -1;
      Kb.__glMemoryCurrentAvailable = -1;
      Kb.__glMemoryTotalAvailable = -1;
      Kb.__glTextureMaxAnisotropy = -1;
      Dm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Wj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Jd.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Jd.limitedProfile = true;
      Ci.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Em.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Di.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Mh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Uj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Zb.__meta__ = {
        fields: {
          __textureContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __getGLFramebuffer: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Li.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      jh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      jh.supportsWeakReference = Object.prototype.hasOwnProperty.call(I, "WeakRef");
      If.__blurShader = new Im();
      ak.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Wg.__colorMatrixShader = new ak();
      Gd.__invertAlphaShader = new Om();
      Gd.__blurAlphaShader = new Jm();
      Gd.__combineShader = new Lm();
      Gd.__innerCombineShader = new Nm();
      Gd.__combineKnockoutShader = new Km();
      Gd.__innerCombineKnockoutShader = new Mm();
      qg.__meta__ = {
        fields: {
          clone: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      we.__soundChannels = [];
      we.__soundTransform = new qg();
      eh.followRedirects = true;
      eh.idleTimeout = 0;
      eh.manageCookies = true;
      mc.currentX = 0;
      mc.currentY = 1;
      mc.currentZ = 0;
      mc.defaultInterval = 34;
      mc.initialized = false;
      mc.supported = false;
      yi.currentDomain = new yi(null);
      nd.__meta__ = {
        fields: {
          clone: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      bk.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Wa.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Wa.__regexAlign = new sa("align\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexBreakTag = new sa("<br\\s*/?>", "gi");
      Wa.__regexBlockIndent = new sa("blockindent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexClass = new sa("class\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexColor = new sa("color\\s?=\\s?(\"#([^\"]+)\"|'#([^']+)')", "i");
      Wa.__regexEntities = [new sa("&quot;", "g"), new sa("&apos;", "g"), new sa("&amp;", "g"), new sa("&lt;", "g"), new sa("&gt;", "g"), new sa("&nbsp;", "g")];
      Wa.__regexCharEntity = new sa("&#(?:([0-9]+)|(x[0-9a-fA-F]+));", "g");
      Wa.__regexFace = new sa("face\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexHTMLTag = new sa("<.*?>", "g");
      Wa.__regexHref = new sa("href\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexIndent = new sa(" indent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexLeading = new sa("leading\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexLeftMargin = new sa("leftmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexRightMargin = new sa("rightmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexSize = new sa("size\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexTabStops = new sa("tabstops\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Hi.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      ic.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Qm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      hd.__cursor = "auto";
      wa.__meta__ = {
        obj: {
          SuppressWarnings: [["checkstyle:ConstantName", "checkstyle:FieldDocComment"]]
        }
      };
      wa.OPMAP = new V();
      wa.REGMAP = new V();
      wa.SAMPLEMAP = new V();
      wa.initialized = false;
      Hb.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Ke.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      yc.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      W.cache = new Sm();
      W.dispatcher = new ua();
      pf.__meta__ = {
        statics: {
          __get: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      Tm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Um.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      zd.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Kh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          touch: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Kh.__pool = new vb(function () {
        return new Kh();
      }, function (a) {
        a.reset();
      });
      fh.defaultKey = "Reset to Default Keys";
      kd.curSelected = 0;
      kd.onPlayState = false;
      Vc.$name = "unnamed";
      Ib.Function_Stop = "##PSYCHLUA_FUNCTIONSTOP";
      Ib.Function_Continue = "##PSYCHLUA_FUNCTIONCONTINUE";
      Ib.Function_StopHScript = "##PSYCHLUA_FUNCTIONSTOPHSCRIPT";
      Ib.Function_StopAll = "##PSYCHLUA_FUNCTIONSTOPALL";
      gh.leftState = false;
      Va.curSelected = 0;
      Va.lastDifficultyName = mb.defaultDifficulty;
      qc.MIN_TIME = 1;
      Kd.psychEngineVersion = "0.7.3";
      Kd.curSelected = 0;
      z.STRUM_X = 42;
      z.STRUM_X_MIDDLESCROLL = -278;
      z.ratingStuff = [["You Suck!", 0.2], ["Shit", 0.4], ["Bad", 0.5], ["Bruh", 0.6], ["Meh", 0.69], ["Nice", 0.7], ["Good", 0.8], ["Great", 0.9], ["Sick!", 1], ["Perfect!!", 1]];
      z.curStage = "";
      z.stageUI = "normal";
      z.isStoryMode = false;
      z.storyWeek = 0;
      z.storyPlaylist = [];
      z.storyDifficulty = 1;
      z.changedDifficulty = false;
      z.chartingMode = false;
      z.campaignScore = 0;
      z.campaignMisses = 0;
      z.seenCutscene = false;
      z.deathCounter = 0;
      z.daPixelZoom = 6;
      z.barHeight = 30;
      z.dotPos = [[274, 409], [372, 508], [452, 394], [541, 515], [625, 401]];
      z.startOnTime = 0;
      Lb.weekCompleted = new V();
      Lb.lastDifficultyName = "";
      Lb.curWeek = 0;
      zc.muteKeys = [48];
      zc.volumeDownKeys = [109, 189];
      zc.volumeUpKeys = [107, 187];
      zc.initialized = false;
      zc.updateVersion = "";
      zc.playJingle = false;
      zc.closedState = false;
      ia.noteTypeList = ";Alt Animation;Hey!;Hurt Note;GF Sing;No Animation".split(";");
      ia.goToPlayState = false;
      ia.curSec = 0;
      ia.lastSection = 0;
      ia.lastSong = "";
      ia.GRID_SIZE = 40;
      ia.quantization = 16;
      ia.curQuant = 3;
      ia.vortex = false;
      Sf.TIP_TEXT_MAIN = "JKLI - Move camera (Hold Shift to move 4x faster)\n\t\nQ/E - Zoom out/in\n\t\nR - Reset Camera\n\t\nH - Toggle Speech Bubble\n\t\nSpace - Reset text";
      Sf.TIP_TEXT_OFFSET = "JKLI - Move camera (Hold Shift to move 4x faster)\n\t\nQ/E - Zoom out/in\n\t\nR - Reset Camera\n\t\nH - Toggle Ghosts\n\t\nWASD - Move Looping animation offset (Red)\n\t\nArrow Keys - Move Idle/Finished animation offset (Blue)\n\t\nHold Shift to move offsets 10x faster";
      Sf.DEFAULT_TEXT = "Lorem ipsum dolor sit amet";
      Tf.DEFAULT_TEXT = "coolswag";
      Tf.DEFAULT_SPEED = 0.05;
      Tf.DEFAULT_BUBBLETYPE = "normal";
      hh.defaultTexture = "noteSplashes";
      Ia.weekFileName = "week1";
      Ia.loadError = false;
      Jj.animationNotes = [];
      Kc.characterName = "bf-rook-death";
      Kc.deathSoundName = "fnf_loss_sfx";
      Kc.loopSoundName = "gameOver";
      Kc.endSoundName = "gameOverEnd";
      Rh.OBJECT_REFERENCE_PREFIX = "@~obRef#";
      E.main();
    })(typeof v != "undefined" ? v : typeof window != "undefined" ? window : typeof self != "undefined" ? self : this, typeof window != "undefined" ? window : typeof E != "undefined" ? E : typeof self != "undefined" ? self : this);
  };
  ra.lime.embed = function (I) {
    var E = {};
    var O = ra.lime.$scripts[I];
    if (!O) {
      throw Error("Cannot find project name \"" + I + "\"");
    }
    O(E, v);
    for (var P in E) {
      ra[P] = ra[P] || E[P];
    }
    if ((O = E.lime || window.lime) && O.embed && this != O.embed) {
      O.embed.apply(O, arguments);
    }
    return E;
  };
  if (typeof define == "function" && define.amd) {
    define([], function () {
      return ra.lime;
    });
    define.__amd = define.amd;
    define.amd = null;
  }
})(typeof exports != "undefined" ? exports : typeof define == "function" && define.amd ? {} : typeof window != "undefined" ? window : typeof self != "undefined" ? self : this, typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
(function () {
  function ra() {
    this.init();
  }
  ra.prototype = {
    init: function () {
      var h = this || v;
      h._counter = 1000;
      h._html5AudioPool = [];
      h.html5PoolSize = 10;
      h._codecs = {};
      h._howls = [];
      h._muted = false;
      h._volume = 1;
      h._canPlayEvent = "canplaythrough";
      h._navigator = typeof window != "undefined" && window.navigator ? window.navigator : null;
      h.masterGain = null;
      h.noAudio = false;
      h.usingWebAudio = true;
      h.autoSuspend = true;
      h.ctx = null;
      h.autoUnlock = true;
      h._setup();
      return h;
    },
    volume: function (p) {
      var l = this || v;
      p = parseFloat(p);
      if (!l.ctx) {
        h();
      }
      if (p !== undefined && p >= 0 && p <= 1) {
        l._volume = p;
        if (l._muted) {
          return l;
        }
        if (l.usingWebAudio) {
          l.masterGain.gain.setValueAtTime(p, v.ctx.currentTime);
        }
        for (var q = 0; q < l._howls.length; q++) {
          if (!l._howls[q]._webAudio) {
            for (var ha = l._howls[q]._getSoundIds(), Qa = 0; Qa < ha.length; Qa++) {
              var ya = l._howls[q]._soundById(ha[Qa]);
              if (ya && ya._node) {
                ya._node.volume = ya._volume * p;
              }
            }
          }
        }
        return l;
      }
      return l._volume;
    },
    mute: function (p) {
      var l = this || v;
      if (!l.ctx) {
        h();
      }
      l._muted = p;
      if (l.usingWebAudio) {
        l.masterGain.gain.setValueAtTime(p ? 0 : l._volume, v.ctx.currentTime);
      }
      for (var q = 0; q < l._howls.length; q++) {
        if (!l._howls[q]._webAudio) {
          for (var ha = l._howls[q]._getSoundIds(), Qa = 0; Qa < ha.length; Qa++) {
            var ya = l._howls[q]._soundById(ha[Qa]);
            if (ya && ya._node) {
              ya._node.muted = !!p || ya._muted;
            }
          }
        }
      }
      return l;
    },
    stop: function () {
      for (var h = this || v, l = 0; l < h._howls.length; l++) {
        h._howls[l].stop();
      }
      return h;
    },
    unload: function () {
      var p = this || v;
      for (var l = p._howls.length - 1; l >= 0; l--) {
        p._howls[l].unload();
      }
      if (p.usingWebAudio && p.ctx && p.ctx.close !== undefined) {
        p.ctx.close();
        p.ctx = null;
        h();
      }
      return p;
    },
    codecs: function (h) {
      return (this || v)._codecs[h.replace(/^x-/, "")];
    },
    _setup: function () {
      var h = this || v;
      h.state = h.ctx ? h.ctx.state || "suspended" : "suspended";
      h._autoSuspend();
      if (!h.usingWebAudio) {
        if (typeof Audio != "undefined") {
          try {
            var l = new Audio();
            if (l.oncanplaythrough === undefined) {
              h._canPlayEvent = "canplay";
            }
          } catch (u) {
            h.noAudio = true;
          }
        } else {
          h.noAudio = true;
        }
      }
      try {
        l = new Audio();
        if (l.muted) {
          h.noAudio = true;
        }
      } catch (u) {}
      if (!h.noAudio) {
        h._setupCodecs();
      }
      return h;
    },
    _setupCodecs: function () {
      var h = this || v;
      var l = null;
      try {
        l = typeof Audio != "undefined" ? new Audio() : null;
      } catch (rb) {
        return h;
      }
      if (!l || typeof l.canPlayType != "function") {
        return h;
      }
      var q = l.canPlayType("audio/mpeg;").replace(/^no$/, "");
      var ha = h._navigator ? h._navigator.userAgent : "";
      var Qa = ha.match(/OPR\/(\d+)/g);
      Qa = Qa && parseInt(Qa[0].split("/")[1], 10) < 33;
      var ya = ha.indexOf("Safari") !== -1 && ha.indexOf("Chrome") === -1;
      ha = ha.match(/Version\/(.*?) /);
      ha = ya && ha && parseInt(ha[1], 10) < 15;
      h._codecs = {
        mp3: !Qa && (!!q || !!l.canPlayType("audio/mp3;").replace(/^no$/, "")),
        mpeg: !!q,
        opus: !!l.canPlayType("audio/ogg; codecs=\"opus\"").replace(/^no$/, ""),
        ogg: !!l.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/, ""),
        oga: !!l.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/, ""),
        wav: !!(l.canPlayType("audio/wav; codecs=\"1\"") || l.canPlayType("audio/wav")).replace(/^no$/, ""),
        aac: !!l.canPlayType("audio/aac;").replace(/^no$/, ""),
        caf: !!l.canPlayType("audio/x-caf;").replace(/^no$/, ""),
        m4a: !!(l.canPlayType("audio/x-m4a;") || l.canPlayType("audio/m4a;") || l.canPlayType("audio/aac;")).replace(/^no$/, ""),
        m4b: !!(l.canPlayType("audio/x-m4b;") || l.canPlayType("audio/m4b;") || l.canPlayType("audio/aac;")).replace(/^no$/, ""),
        mp4: !!(l.canPlayType("audio/x-mp4;") || l.canPlayType("audio/mp4;") || l.canPlayType("audio/aac;")).replace(/^no$/, ""),
        weba: !ha && !!l.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/, ""),
        webm: !ha && !!l.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/, ""),
        dolby: !!l.canPlayType("audio/mp4; codecs=\"ec-3\"").replace(/^no$/, ""),
        flac: !!(l.canPlayType("audio/x-flac;") || l.canPlayType("audio/flac;")).replace(/^no$/, "")
      };
      return h;
    },
    _unlockAudio: function () {
      var h = this || v;
      if (!h._audioUnlocked && h.ctx) {
        h._audioUnlocked = false;
        h.autoUnlock = false;
        if (!h._mobileUnloaded && h.ctx.sampleRate !== 44100) {
          h._mobileUnloaded = true;
          h.unload();
        }
        h._scratchBuffer = h.ctx.createBuffer(1, 1, 22050);
        function l(p) {
          while (h._html5AudioPool.length < h.html5PoolSize) {
            try {
              var q = new Audio();
              q._unlocked = true;
              h._releaseHtml5Audio(q);
            } catch (Ld) {
              h.noAudio = true;
              break;
            }
          }
          for (p = 0; p < h._howls.length; p++) {
            if (!h._howls[p]._webAudio) {
              q = h._howls[p]._getSoundIds();
              for (var u = 0; u < q.length; u++) {
                var x = h._howls[p]._soundById(q[u]);
                if (x && x._node && !x._node._unlocked) {
                  x._node._unlocked = true;
                  x._node.load();
                }
              }
            }
          }
          h._autoResume();
          var v = h.ctx.createBufferSource();
          v.buffer = h._scratchBuffer;
          v.connect(h.ctx.destination);
          if (v.start === undefined) {
            v.noteOn(0);
          } else {
            v.start(0);
          }
          if (typeof h.ctx.resume == "function") {
            h.ctx.resume();
          }
          v.onended = function () {
            v.disconnect(0);
            h._audioUnlocked = true;
            document.removeEventListener("touchstart", l, true);
            document.removeEventListener("touchend", l, true);
            document.removeEventListener("click", l, true);
            document.removeEventListener("keydown", l, true);
            for (var p = 0; p < h._howls.length; p++) {
              h._howls[p]._emit("unlock");
            }
          };
        }
        document.addEventListener("touchstart", l, true);
        document.addEventListener("touchend", l, true);
        document.addEventListener("click", l, true);
        document.addEventListener("keydown", l, true);
        return h;
      }
    },
    _obtainHtml5Audio: function () {
      var h = this || v;
      if (h._html5AudioPool.length) {
        return h._html5AudioPool.pop();
      }
      h = new Audio().play();
      if (h && typeof Promise != "undefined" && (h instanceof Promise || typeof h.then == "function")) {
        h.catch(function () {
          console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.");
        });
      }
      return new Audio();
    },
    _releaseHtml5Audio: function (h) {
      var p = this || v;
      if (h._unlocked) {
        p._html5AudioPool.push(h);
      }
      return p;
    },
    _autoSuspend: function () {
      var h = this;
      if (h.autoSuspend && h.ctx && h.ctx.suspend !== undefined && v.usingWebAudio) {
        for (var l = 0; l < h._howls.length; l++) {
          if (h._howls[l]._webAudio) {
            for (var q = 0; q < h._howls[l]._sounds.length; q++) {
              if (!h._howls[l]._sounds[q]._paused) {
                return h;
              }
            }
          }
        }
        if (h._suspendTimer) {
          clearTimeout(h._suspendTimer);
        }
        h._suspendTimer = setTimeout(function () {
          if (h.autoSuspend) {
            h._suspendTimer = null;
            h.state = "suspending";
            function p() {
              h.state = "suspended";
              if (h._resumeAfterSuspend) {
                delete h._resumeAfterSuspend;
                h._autoResume();
              }
            }
            h.ctx.suspend().then(p, p);
          }
        }, 30000);
        return h;
      }
    },
    _autoResume: function () {
      var h = this;
      if (h.ctx && h.ctx.resume !== undefined && v.usingWebAudio) {
        if (h.state === "running" && h.ctx.state !== "interrupted" && h._suspendTimer) {
          clearTimeout(h._suspendTimer);
          h._suspendTimer = null;
        } else if (h.state === "suspended" || h.state === "running" && h.ctx.state === "interrupted") {
          h.ctx.resume().then(function () {
            h.state = "running";
            for (var p = 0; p < h._howls.length; p++) {
              h._howls[p]._emit("resume");
            }
          });
          if (h._suspendTimer) {
            clearTimeout(h._suspendTimer);
            h._suspendTimer = null;
          }
        } else if (h.state === "suspending") {
          h._resumeAfterSuspend = true;
        }
        return h;
      }
    }
  };
  var v = new ra();
  function I(h) {
    if (!h.src || h.src.length === 0) {
      console.error("An array of source files must be passed with any new Howl.");
      return;
    }
    this.init(h);
  }
  I.prototype = {
    init: function (p) {
      var l = this;
      if (!v.ctx) {
        h();
      }
      l._autoplay = p.autoplay || false;
      l._format = typeof p.format != "string" ? p.format : [p.format];
      l._html5 = p.html5 || false;
      l._muted = p.mute || false;
      l._loop = p.loop || false;
      l._pool = p.pool || 5;
      l._preload = typeof p.preload != "boolean" && p.preload !== "metadata" || p.preload;
      l._rate = p.rate || 1;
      l._sprite = p.sprite || {};
      l._src = typeof p.src != "string" ? p.src : [p.src];
      l._volume = p.volume !== undefined ? p.volume : 1;
      l._xhr = {
        method: p.xhr && p.xhr.method ? p.xhr.method : "GET",
        headers: p.xhr && p.xhr.headers ? p.xhr.headers : null,
        withCredentials: !!p.xhr && !!p.xhr.withCredentials && p.xhr.withCredentials
      };
      l._duration = 0;
      l._state = "unloaded";
      l._sounds = [];
      l._endTimers = {};
      l._queue = [];
      l._playLock = false;
      l._onend = p.onend ? [{
        fn: p.onend
      }] : [];
      l._onfade = p.onfade ? [{
        fn: p.onfade
      }] : [];
      l._onload = p.onload ? [{
        fn: p.onload
      }] : [];
      l._onloaderror = p.onloaderror ? [{
        fn: p.onloaderror
      }] : [];
      l._onplayerror = p.onplayerror ? [{
        fn: p.onplayerror
      }] : [];
      l._onpause = p.onpause ? [{
        fn: p.onpause
      }] : [];
      l._onplay = p.onplay ? [{
        fn: p.onplay
      }] : [];
      l._onstop = p.onstop ? [{
        fn: p.onstop
      }] : [];
      l._onmute = p.onmute ? [{
        fn: p.onmute
      }] : [];
      l._onvolume = p.onvolume ? [{
        fn: p.onvolume
      }] : [];
      l._onrate = p.onrate ? [{
        fn: p.onrate
      }] : [];
      l._onseek = p.onseek ? [{
        fn: p.onseek
      }] : [];
      l._onunlock = p.onunlock ? [{
        fn: p.onunlock
      }] : [];
      l._onresume = [];
      l._webAudio = v.usingWebAudio && !l._html5;
      if (v.ctx !== undefined && v.ctx && v.autoUnlock) {
        v._unlockAudio();
      }
      v._howls.push(l);
      if (l._autoplay) {
        l._queue.push({
          event: "play",
          action: function () {
            l.play();
          }
        });
      }
      if (l._preload && l._preload !== "none") {
        l.load();
      }
      return l;
    },
    load: function () {
      var h = null;
      if (v.noAudio) {
        this._emit("loaderror", null, "No audio support.");
        return;
      }
      if (typeof this._src == "string") {
        this._src = [this._src];
      }
      for (var l = 0; l < this._src.length; l++) {
        var q;
        if (this._format && this._format[l]) {
          var ha = this._format[l];
        } else {
          if (typeof (q = this._src[l]) != "string") {
            this._emit("loaderror", null, "Non-string found in selected audio sources - ignoring.");
            continue;
          }
          if (!(ha = /^data:audio\/([^;,]+);/i.exec(q))) {
            ha = /\.([^.]+)$/.exec(q.split("?", 1)[0]);
          }
          ha &&= ha[1].toLowerCase();
        }
        if (!ha) {
          console.warn("No file extension was found. Consider using the \"format\" property or specify an extension.");
        }
        if (ha && v.codecs(ha)) {
          h = this._src[l];
          break;
        }
      }
      if (h) {
        this._src = h;
        this._state = "loading";
        if (window.location.protocol === "https:" && h.slice(0, 5) === "http:") {
          this._html5 = true;
          this._webAudio = false;
        }
        new E(this);
        if (this._webAudio) {
          P(this);
        }
        return this;
      } else {
        this._emit("loaderror", null, "No codec support for selected audio sources.");
        return;
      }
    },
    play: function (h, l) {
      var p = this;
      var q = null;
      if (typeof h == "number") {
        q = h;
        h = null;
      } else {
        if (typeof h == "string" && p._state === "loaded" && !p._sprite[h]) {
          return null;
        }
        if (h === undefined && (h = "__default", !p._playLock)) {
          var x = 0;
          for (var ya = 0; ya < p._sounds.length; ya++) {
            if (p._sounds[ya]._paused && !p._sounds[ya]._ended) {
              x++;
              q = p._sounds[ya]._id;
            }
          }
          if (x === 1) {
            h = null;
          } else {
            q = null;
          }
        }
      }
      var E = q ? p._soundById(q) : p._inactiveSound();
      if (!E) {
        return null;
      }
      if (q && !h) {
        h = E._sprite || "__default";
      }
      if (p._state !== "loaded") {
        E._sprite = h;
        E._ended = false;
        var I = E._id;
        p._queue.push({
          event: "play",
          action: function () {
            p.play(I);
          }
        });
        return I;
      }
      if (q && !E._paused) {
        if (!l) {
          p._loadQueue("play");
        }
        return E._id;
      }
      if (p._webAudio) {
        v._autoResume();
      }
      var O = Math.max(0, E._seek > 0 ? E._seek : p._sprite[h][0] / 1000);
      var P = Math.max(0, (p._sprite[h][0] + p._sprite[h][1]) / 1000 - O);
      var xa = P * 1000 / Math.abs(E._rate);
      var ra = p._sprite[h][0] / 1000;
      var V = (p._sprite[h][0] + p._sprite[h][1]) / 1000;
      E._sprite = h;
      E._ended = false;
      function qb() {
        E._paused = false;
        E._seek = O;
        E._start = ra;
        E._stop = V;
        E._loop = !!E._loop || !!p._sprite[h][2];
      }
      if (O >= V) {
        p._ended(E);
        return;
      }
      var la = E._node;
      if (p._webAudio) {
        q = function () {
          p._playLock = false;
          qb();
          p._refreshBuffer(E);
          la.gain.setValueAtTime(E._muted || p._muted ? 0 : E._volume, v.ctx.currentTime);
          E._playStart = v.ctx.currentTime;
          if (la.bufferSource.start === undefined) {
            if (E._loop) {
              la.bufferSource.noteGrainOn(0, O, 86400);
            } else {
              la.bufferSource.noteGrainOn(0, O, P);
            }
          } else if (E._loop) {
            la.bufferSource.start(0, O, 86400);
          } else {
            la.bufferSource.start(0, O, P);
          }
          if (xa !== Infinity) {
            p._endTimers[E._id] = setTimeout(p._ended.bind(p, E), xa);
          }
          if (!l) {
            setTimeout(function () {
              p._emit("play", E._id);
              p._loadQueue();
            }, 0);
          }
        };
        if (v.state === "running" && v.ctx.state !== "interrupted") {
          q();
        } else {
          p._playLock = true;
          p.once("resume", q);
          p._clearTimer(E._id);
        }
      } else {
        function ib() {
          la.currentTime = O;
          la.muted = E._muted || p._muted || v._muted || la.muted;
          la.volume = E._volume * v.volume();
          la.playbackRate = E._rate;
          try {
            var q = la.play();
            if (q && typeof Promise != "undefined" && (q instanceof Promise || typeof q.then == "function")) {
              p._playLock = true;
              qb();
              q.then(function () {
                p._playLock = false;
                la._unlocked = true;
                if (l) {
                  p._loadQueue();
                } else {
                  p._emit("play", E._id);
                }
              }).catch(function () {
                p._playLock = false;
                p._emit("playerror", E._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                E._ended = true;
                E._paused = true;
              });
            } else if (!l) {
              p._playLock = false;
              qb();
              p._emit("play", E._id);
            }
            la.playbackRate = E._rate;
            if (la.paused) {
              p._emit("playerror", E._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
              return;
            }
            if (h !== "__default" || E._loop) {
              p._endTimers[E._id] = setTimeout(p._ended.bind(p, E), xa);
            } else {
              p._endTimers[E._id] = function () {
                p._ended(E);
                la.removeEventListener("ended", p._endTimers[E._id], false);
              };
              la.addEventListener("ended", p._endTimers[E._id], false);
            }
          } catch (ab) {
            p._emit("playerror", E._id, ab);
          }
        }
        if (la.src === "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA") {
          la.src = p._src;
          la.load();
        }
        q = window && window.ejecta || !la.readyState && v._navigator.isCocoonJS;
        if (la.readyState >= 3 || q) {
          ib();
        } else {
          p._playLock = true;
          p._state = "loading";
          function vb() {
            p._state = "loaded";
            ib();
            la.removeEventListener(v._canPlayEvent, vb, false);
          }
          la.addEventListener(v._canPlayEvent, vb, false);
          p._clearTimer(E._id);
        }
      }
      return E._id;
    },
    pause: function (h, l) {
      var p = this;
      if (p._state !== "loaded" || p._playLock) {
        p._queue.push({
          event: "pause",
          action: function () {
            p.pause(h);
          }
        });
        return p;
      }
      for (var q = p._getSoundIds(h), x = 0; x < q.length; x++) {
        p._clearTimer(q[x]);
        var v = p._soundById(q[x]);
        if (v && !v._paused && (v._seek = p.seek(q[x]), v._rateSeek = 0, v._paused = true, p._stopFade(q[x]), v._node)) {
          if (p._webAudio) {
            if (!v._node.bufferSource) {
              continue;
            }
            if (v._node.bufferSource.stop === undefined) {
              v._node.bufferSource.noteOff(0);
            } else {
              v._node.bufferSource.stop(0);
            }
            p._cleanBuffer(v._node);
          } else if (!isNaN(v._node.duration) || v._node.duration === Infinity) {
            v._node.pause();
          }
        }
        if (!l) {
          p._emit("pause", v ? v._id : null);
        }
      }
      return p;
    },
    stop: function (h, l) {
      var p = this;
      if (p._state !== "loaded" || p._playLock) {
        p._queue.push({
          event: "stop",
          action: function () {
            p.stop(h);
          }
        });
        return p;
      }
      for (var q = p._getSoundIds(h), x = 0; x < q.length; x++) {
        p._clearTimer(q[x]);
        var v = p._soundById(q[x]);
        if (v) {
          v._seek = v._start || 0;
          v._rateSeek = 0;
          v._paused = true;
          v._ended = true;
          p._stopFade(q[x]);
          if (v._node) {
            if (p._webAudio) {
              if (v._node.bufferSource) {
                if (v._node.bufferSource.stop === undefined) {
                  v._node.bufferSource.noteOff(0);
                } else {
                  v._node.bufferSource.stop(0);
                }
                p._cleanBuffer(v._node);
              }
            } else if (!isNaN(v._node.duration) || v._node.duration === Infinity) {
              v._node.currentTime = v._start || 0;
              v._node.pause();
              if (v._node.duration === Infinity) {
                p._clearSound(v._node);
              }
            }
          }
          if (!l) {
            p._emit("stop", v._id);
          }
        }
      }
      return p;
    },
    mute: function (h, l) {
      var p = this;
      if (p._state !== "loaded" || p._playLock) {
        p._queue.push({
          event: "mute",
          action: function () {
            p.mute(h, l);
          }
        });
        return p;
      }
      if (l === undefined) {
        if (typeof h != "boolean") {
          return p._muted;
        }
        p._muted = h;
      }
      for (var q = p._getSoundIds(l), x = 0; x < q.length; x++) {
        var E = p._soundById(q[x]);
        if (E) {
          E._muted = h;
          if (E._interval) {
            p._stopFade(E._id);
          }
          if (p._webAudio && E._node) {
            E._node.gain.setValueAtTime(h ? 0 : E._volume, v.ctx.currentTime);
          } else if (E._node) {
            E._node.muted = !!v._muted || h;
          }
          p._emit("mute", E._id);
        }
      }
      return p;
    },
    volume: function () {
      var h;
      var l;
      var q = this;
      var E = arguments;
      if (E.length === 0) {
        return q._volume;
      }
      if (E.length === 1 || E.length === 2 && E[1] === undefined) {
        if (q._getSoundIds().indexOf(E[0]) >= 0) {
          l = parseInt(E[0], 10);
        } else {
          h = parseFloat(E[0]);
        }
      } else if (E.length >= 2) {
        h = parseFloat(E[0]);
        l = parseInt(E[1], 10);
      }
      var Qa;
      if (h === undefined || !(h >= 0) || !(h <= 1)) {
        Qa = l ? q._soundById(l) : q._sounds[0];
        if (Qa) {
          return Qa._volume;
        } else {
          return 0;
        }
      }
      if (q._state !== "loaded" || q._playLock) {
        q._queue.push({
          event: "volume",
          action: function () {
            q.volume.apply(q, E);
          }
        });
        return q;
      }
      if (l === undefined) {
        q._volume = h;
      }
      l = q._getSoundIds(l);
      for (var ya = 0; ya < l.length; ya++) {
        if (Qa = q._soundById(l[ya])) {
          Qa._volume = h;
          if (!E[2]) {
            q._stopFade(l[ya]);
          }
          if (q._webAudio && Qa._node && !Qa._muted) {
            Qa._node.gain.setValueAtTime(h, v.ctx.currentTime);
          } else if (Qa._node && !Qa._muted) {
            Qa._node.volume = h * v.volume();
          }
          q._emit("volume", Qa._id);
        }
      }
      return q;
    },
    fade: function (h, l, q, E) {
      var p = this;
      if (p._state !== "loaded" || p._playLock) {
        p._queue.push({
          event: "fade",
          action: function () {
            p.fade(h, l, q, E);
          }
        });
        return p;
      }
      h = Math.min(Math.max(0, parseFloat(h)), 1);
      l = Math.min(Math.max(0, parseFloat(l)), 1);
      q = parseFloat(q);
      p.volume(h, E);
      for (var u = p._getSoundIds(E), x = 0; x < u.length; x++) {
        var ha = p._soundById(u[x]);
        if (ha) {
          if (!E) {
            p._stopFade(u[x]);
          }
          if (p._webAudio && !ha._muted) {
            var I = v.ctx.currentTime;
            var O = I + q / 1000;
            ha._volume = h;
            ha._node.gain.setValueAtTime(h, I);
            ha._node.gain.linearRampToValueAtTime(l, O);
          }
          p._startFadeInterval(ha, h, l, q, u[x], E === undefined);
        }
      }
      return p;
    },
    _startFadeInterval: function (h, l, q, v, E, I) {
      var p = this;
      var u = l;
      var x = q - l;
      E = Math.abs(x / 0.01);
      E = Math.max(4, E > 0 ? v / E : v);
      var ha = Date.now();
      h._fadeTo = q;
      h._interval = setInterval(function () {
        var E = (Date.now() - ha) / v;
        ha = Date.now();
        u += x * E;
        u = Math.round(u * 100) / 100;
        u = x < 0 ? Math.max(q, u) : Math.min(q, u);
        if (p._webAudio) {
          h._volume = u;
        } else {
          p.volume(u, h._id, true);
        }
        if (I) {
          p._volume = u;
        }
        if (q < l && u <= q || q > l && u >= q) {
          clearInterval(h._interval);
          h._interval = null;
          h._fadeTo = null;
          p.volume(q, h._id);
          p._emit("fade", h._id);
        }
      }, E);
    },
    _stopFade: function (h) {
      var p = this._soundById(h);
      if (p && p._interval) {
        if (this._webAudio) {
          p._node.gain.cancelScheduledValues(v.ctx.currentTime);
        }
        clearInterval(p._interval);
        p._interval = null;
        this.volume(p._fadeTo, h);
        p._fadeTo = null;
        this._emit("fade", h);
      }
      return this;
    },
    loop: function () {
      var h;
      var l;
      var q;
      var v = arguments;
      if (v.length === 0) {
        return this._loop;
      }
      if (v.length === 1) {
        if (typeof v[0] != "boolean") {
          return !!(q = this._soundById(parseInt(v[0], 10))) && q._loop;
        }
        this._loop = h = v[0];
      } else if (v.length === 2) {
        h = v[0];
        l = parseInt(v[1], 10);
      }
      l = this._getSoundIds(l);
      for (v = 0; v < l.length; v++) {
        if (q = this._soundById(l[v])) {
          q._loop = h;
          if (this._webAudio && q._node && q._node.bufferSource) {
            q._node.bufferSource.loop = h;
            if (h) {
              q._node.bufferSource.loopStart = q._start || 0;
              q._node.bufferSource.loopEnd = q._stop;
              if (this.playing(l[v])) {
                this.pause(l[v], true);
                this.play(l[v], true);
              }
            }
          }
        }
      }
      return this;
    },
    rate: function () {
      var h;
      var l;
      var q = this;
      var E = arguments;
      if (E.length === 0) {
        l = q._sounds[0]._id;
      } else if (E.length === 1) {
        if (q._getSoundIds().indexOf(E[0]) >= 0) {
          l = parseInt(E[0], 10);
        } else {
          h = parseFloat(E[0]);
        }
      } else if (E.length === 2) {
        h = parseFloat(E[0]);
        l = parseInt(E[1], 10);
      }
      var I;
      if (typeof h != "number") {
        I = q._soundById(l);
        if (I) {
          return I._rate;
        } else {
          return q._rate;
        }
      }
      if (q._state !== "loaded" || q._playLock) {
        q._queue.push({
          event: "rate",
          action: function () {
            q.rate.apply(q, E);
          }
        });
        return q;
      }
      if (l === undefined) {
        q._rate = h;
      }
      l = q._getSoundIds(l);
      for (var O = 0; O < l.length; O++) {
        if (I = q._soundById(l[O])) {
          if (q.playing(l[O])) {
            I._rateSeek = q.seek(l[O]);
            I._playStart = q._webAudio ? v.ctx.currentTime : I._playStart;
          }
          I._rate = h;
          if (q._webAudio && I._node && I._node.bufferSource) {
            I._node.bufferSource.playbackRate.setValueAtTime(h, v.ctx.currentTime);
          } else if (I._node) {
            I._node.playbackRate = h;
          }
          var P = q.seek(l[O]);
          P = ((q._sprite[I._sprite][0] + q._sprite[I._sprite][1]) / 1000 - P) * 1000 / Math.abs(I._rate);
          if (!!q._endTimers[l[O]] || !I._paused) {
            q._clearTimer(l[O]);
            q._endTimers[l[O]] = setTimeout(q._ended.bind(q, I), P);
          }
          q._emit("rate", I._id);
        }
      }
      return q;
    },
    seek: function () {
      var h;
      var l;
      var q = this;
      var E = arguments;
      if (E.length === 0) {
        if (q._sounds.length) {
          l = q._sounds[0]._id;
        }
      } else if (E.length === 1) {
        if (q._getSoundIds().indexOf(E[0]) >= 0) {
          l = parseInt(E[0], 10);
        } else if (q._sounds.length) {
          l = q._sounds[0]._id;
          h = parseFloat(E[0]);
        }
      } else if (E.length === 2) {
        h = parseFloat(E[0]);
        l = parseInt(E[1], 10);
      }
      if (l === undefined) {
        return 0;
      }
      if (typeof h == "number" && (q._state !== "loaded" || q._playLock)) {
        q._queue.push({
          event: "seek",
          action: function () {
            q.seek.apply(q, E);
          }
        });
        return q;
      }
      var I = q._soundById(l);
      if (I) {
        if (typeof h != "number" || !(h >= 0)) {
          if (q._webAudio) {
            h = q.playing(l) ? v.ctx.currentTime - I._playStart : 0;
            return I._seek + ((I._rateSeek ? I._rateSeek - I._seek : 0) + h * Math.abs(I._rate));
          } else {
            return I._node.currentTime;
          }
        }
        var O = q.playing(l);
        if (O) {
          q.pause(l, true);
        }
        I._seek = h;
        I._ended = false;
        q._clearTimer(l);
        if (!q._webAudio && !!I._node && !isNaN(I._node.duration)) {
          I._node.currentTime = h;
        }
        function P() {
          if (O) {
            q.play(l, true);
          }
          q._emit("seek", l);
        }
        if (O && !q._webAudio) {
          function xa() {
            if (q._playLock) {
              setTimeout(xa, 0);
            } else {
              P();
            }
          }
          setTimeout(xa, 0);
        } else {
          P();
        }
      }
      return q;
    },
    playing: function (h) {
      if (typeof h == "number") {
        h = this._soundById(h);
        return !!h && !h._paused;
      }
      for (h = 0; h < this._sounds.length; h++) {
        if (!this._sounds[h]._paused) {
          return true;
        }
      }
      return false;
    },
    duration: function (h) {
      var p = this._duration;
      h = this._soundById(h);
      if (h) {
        p = this._sprite[h._sprite][1] / 1000;
      }
      return p;
    },
    state: function () {
      return this._state;
    },
    unload: function () {
      for (var h = this._sounds, l = 0; l < h.length; l++) {
        if (!h[l]._paused) {
          this.stop(h[l]._id);
        }
        if (!this._webAudio) {
          this._clearSound(h[l]._node);
          h[l]._node.removeEventListener("error", h[l]._errorFn, false);
          h[l]._node.removeEventListener(v._canPlayEvent, h[l]._loadFn, false);
          h[l]._node.removeEventListener("ended", h[l]._endFn, false);
          v._releaseHtml5Audio(h[l]._node);
        }
        delete h[l]._node;
        this._clearTimer(h[l]._id);
      }
      l = v._howls.indexOf(this);
      if (l >= 0) {
        v._howls.splice(l, 1);
      }
      h = true;
      for (l = 0; l < v._howls.length; l++) {
        if (v._howls[l]._src === this._src || this._src.indexOf(v._howls[l]._src) >= 0) {
          h = false;
          break;
        }
      }
      if (O && h) {
        delete O[this._src];
      }
      v.noAudio = false;
      this._state = "unloaded";
      this._sounds = [];
      return null;
    },
    on: function (h, l, q, v) {
      h = this["_on" + h];
      if (typeof l == "function") {
        h.push(v ? {
          id: q,
          fn: l,
          once: v
        } : {
          id: q,
          fn: l
        });
      }
      return this;
    },
    off: function (h, l, q) {
      var p = this["_on" + h];
      if (typeof l == "number") {
        q = l;
        l = null;
      }
      if (l || q) {
        for (h = 0; h < p.length; h++) {
          var u = q === p[h].id;
          if (l === p[h].fn && u || !l && u) {
            p.splice(h, 1);
            break;
          }
        }
      } else if (h) {
        this["_on" + h] = [];
      } else {
        l = Object.keys(this);
        h = 0;
        for (; h < l.length; h++) {
          if (l[h].indexOf("_on") === 0 && Array.isArray(this[l[h]])) {
            this[l[h]] = [];
          }
        }
      }
      return this;
    },
    once: function (h, l, q) {
      this.on(h, l, q, 1);
      return this;
    },
    _emit: function (h, l, q) {
      var p = this["_on" + h];
      for (var u = p.length - 1; u >= 0; u--) {
        if (!p[u].id || p[u].id === l || h === "load") {
          setTimeout(function (h) {
            h.call(this, l, q);
          }.bind(this, p[u].fn), 0);
          if (p[u].once) {
            this.off(h, p[u].fn, p[u].id);
          }
        }
      }
      this._loadQueue(h);
      return this;
    },
    _loadQueue: function (h) {
      if (this._queue.length > 0) {
        var p = this._queue[0];
        if (p.event === h) {
          this._queue.shift();
          this._loadQueue();
        }
        if (!h) {
          p.action();
        }
      }
      return this;
    },
    _ended: function (h) {
      var l = h._sprite;
      if (!this._webAudio && h._node && !h._node.paused && !h._node.ended && h._node.currentTime < h._stop) {
        setTimeout(this._ended.bind(this, h), 100);
        return this;
      }
      l = !!h._loop || !!this._sprite[l][2];
      this._emit("end", h._id);
      if (!this._webAudio && l) {
        this.stop(h._id, true).play(h._id);
      }
      if (this._webAudio && l) {
        this._emit("play", h._id);
        h._seek = h._start || 0;
        h._rateSeek = 0;
        h._playStart = v.ctx.currentTime;
        var p = (h._stop - h._start) * 1000 / Math.abs(h._rate);
        this._endTimers[h._id] = setTimeout(this._ended.bind(this, h), p);
      }
      if (this._webAudio && !l) {
        h._paused = true;
        h._ended = true;
        h._seek = h._start || 0;
        h._rateSeek = 0;
        this._clearTimer(h._id);
        this._cleanBuffer(h._node);
        v._autoSuspend();
      }
      if (!this._webAudio && !l) {
        this.stop(h._id, true);
      }
      return this;
    },
    _clearTimer: function (h) {
      if (this._endTimers[h]) {
        if (typeof this._endTimers[h] != "function") {
          clearTimeout(this._endTimers[h]);
        } else {
          var l = this._soundById(h);
          if (l && l._node) {
            l._node.removeEventListener("ended", this._endTimers[h], false);
          }
        }
        delete this._endTimers[h];
      }
      return this;
    },
    _soundById: function (h) {
      for (var l = 0; l < this._sounds.length; l++) {
        if (h === this._sounds[l]._id) {
          return this._sounds[l];
        }
      }
      return null;
    },
    _inactiveSound: function () {
      this._drain();
      for (var h = 0; h < this._sounds.length; h++) {
        if (this._sounds[h]._ended) {
          return this._sounds[h].reset();
        }
      }
      return new E(this);
    },
    _drain: function () {
      var h = this._pool;
      var l = 0;
      var q;
      if (!(this._sounds.length < h)) {
        for (q = 0; q < this._sounds.length; q++) {
          if (this._sounds[q]._ended) {
            l++;
          }
        }
        for (q = this._sounds.length - 1; q >= 0 && !(l <= h); q--) {
          if (this._sounds[q]._ended) {
            if (this._webAudio && this._sounds[q]._node) {
              this._sounds[q]._node.disconnect(0);
            }
            this._sounds.splice(q, 1);
            l--;
          }
        }
      }
    },
    _getSoundIds: function (h) {
      if (h === undefined) {
        h = [];
        for (var l = 0; l < this._sounds.length; l++) {
          h.push(this._sounds[l]._id);
        }
        return h;
      }
      return [h];
    },
    _refreshBuffer: function (h) {
      h._node.bufferSource = v.ctx.createBufferSource();
      h._node.bufferSource.buffer = O[this._src];
      if (h._panner) {
        h._node.bufferSource.connect(h._panner);
      } else {
        h._node.bufferSource.connect(h._node);
      }
      h._node.bufferSource.loop = h._loop;
      if (h._loop) {
        h._node.bufferSource.loopStart = h._start || 0;
        h._node.bufferSource.loopEnd = h._stop || 0;
      }
      h._node.bufferSource.playbackRate.setValueAtTime(h._rate, v.ctx.currentTime);
      return this;
    },
    _cleanBuffer: function (h) {
      var l = v._navigator && v._navigator.vendor.indexOf("Apple") >= 0;
      if (!h.bufferSource) {
        return this;
      }
      if (v._scratchBuffer && h.bufferSource && (h.bufferSource.onended = null, h.bufferSource.disconnect(0), l)) {
        try {
          h.bufferSource.buffer = v._scratchBuffer;
        } catch (u) {}
      }
      h.bufferSource = null;
      return this;
    },
    _clearSound: function (h) {
      if (!/MSIE |Trident\//.test(v._navigator && v._navigator.userAgent)) {
        h.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA";
      }
    }
  };
  function E(h) {
    this._parent = h;
    this.init();
  }
  E.prototype = {
    init: function () {
      var h = this._parent;
      this._muted = h._muted;
      this._loop = h._loop;
      this._volume = h._volume;
      this._rate = h._rate;
      this._seek = 0;
      this._paused = true;
      this._ended = true;
      this._sprite = "__default";
      this._id = ++v._counter;
      h._sounds.push(this);
      this.create();
      return this;
    },
    create: function () {
      var h = this._parent;
      var l = v._muted || this._muted || this._parent._muted ? 0 : this._volume;
      if (h._webAudio) {
        this._node = v.ctx.createGain === undefined ? v.ctx.createGainNode() : v.ctx.createGain();
        this._node.gain.setValueAtTime(l, v.ctx.currentTime);
        this._node.paused = true;
        this._node.connect(v.masterGain);
      } else if (!v.noAudio) {
        this._node = v._obtainHtml5Audio();
        this._errorFn = this._errorListener.bind(this);
        this._node.addEventListener("error", this._errorFn, false);
        this._loadFn = this._loadListener.bind(this);
        this._node.addEventListener(v._canPlayEvent, this._loadFn, false);
        this._endFn = this._endListener.bind(this);
        this._node.addEventListener("ended", this._endFn, false);
        this._node.src = h._src;
        this._node.preload = h._preload === true ? "auto" : h._preload;
        this._node.volume = l * v.volume();
        this._node.load();
      }
      return this;
    },
    reset: function () {
      var h = this._parent;
      this._muted = h._muted;
      this._loop = h._loop;
      this._volume = h._volume;
      this._rate = h._rate;
      this._seek = 0;
      this._rateSeek = 0;
      this._paused = true;
      this._ended = true;
      this._sprite = "__default";
      this._id = ++v._counter;
      return this;
    },
    _errorListener: function () {
      this._parent._emit("loaderror", this._id, this._node.error ? this._node.error.code : 0);
      this._node.removeEventListener("error", this._errorFn, false);
    },
    _loadListener: function () {
      var h = this._parent;
      h._duration = Math.ceil(this._node.duration * 10) / 10;
      if (Object.keys(h._sprite).length === 0) {
        h._sprite = {
          __default: [0, h._duration * 1000]
        };
      }
      if (h._state !== "loaded") {
        h._state = "loaded";
        h._emit("load");
        h._loadQueue();
      }
      this._node.removeEventListener(v._canPlayEvent, this._loadFn, false);
    },
    _endListener: function () {
      var h = this._parent;
      if (h._duration === Infinity) {
        h._duration = Math.ceil(this._node.duration * 10) / 10;
        if (h._sprite.__default[1] === Infinity) {
          h._sprite.__default[1] = h._duration * 1000;
        }
        h._ended(this);
      }
      this._node.removeEventListener("ended", this._endFn, false);
    }
  };
  var O = {};
  function P(h) {
    var p = h._src;
    if (O[p]) {
      h._duration = O[p].duration;
      l(h);
      return;
    }
    if (/^data:[^;]+;base64,/.test(p)) {
      for (var u = atob(p.split(",")[1]), v = new Uint8Array(u.length), E = 0; E < u.length; ++E) {
        v[E] = u.charCodeAt(E);
      }
      xa(v.buffer, h);
    } else {
      var I = new XMLHttpRequest();
      I.open(h._xhr.method, p, true);
      I.withCredentials = h._xhr.withCredentials;
      I.responseType = "arraybuffer";
      if (h._xhr.headers) {
        Object.keys(h._xhr.headers).forEach(function (l) {
          I.setRequestHeader(l, h._xhr.headers[l]);
        });
      }
      I.onload = function () {
        var l = (I.status + "")[0];
        if (l !== "0" && l !== "2" && l !== "3") {
          h._emit("loaderror", null, "Failed loading audio file with status: " + I.status + ".");
          return;
        }
        xa(I.response, h);
      };
      I.onerror = function () {
        if (h._webAudio) {
          h._html5 = true;
          h._webAudio = false;
          h._sounds = [];
          delete O[p];
          h.load();
        }
      };
      q(I);
    }
  }
  function q(h) {
    try {
      h.send();
    } catch (x) {
      h.onerror();
    }
  }
  function xa(h, q) {
    function p() {
      q._emit("loaderror", null, "Decoding audio data failed.");
    }
    function x(h) {
      if (h && q._sounds.length > 0) {
        O[q._src] = h;
        l(q, h);
      } else {
        p();
      }
    }
    if (typeof Promise != "undefined" && v.ctx.decodeAudioData.length === 1) {
      v.ctx.decodeAudioData(h).then(x).catch(p);
    } else {
      v.ctx.decodeAudioData(h, x, p);
    }
  }
  function l(h, l) {
    if (l && !h._duration) {
      h._duration = l.duration;
    }
    if (Object.keys(h._sprite).length === 0) {
      h._sprite = {
        __default: [0, h._duration * 1000]
      };
    }
    if (h._state !== "loaded") {
      h._state = "loaded";
      h._emit("load");
      h._loadQueue();
    }
  }
  function h() {
    if (v.usingWebAudio) {
      try {
        if (typeof AudioContext != "undefined") {
          v.ctx = new AudioContext();
        } else if (typeof webkitAudioContext != "undefined") {
          v.ctx = new webkitAudioContext();
        } else {
          v.usingWebAudio = false;
        }
      } catch (u) {
        v.usingWebAudio = false;
      }
      if (!v.ctx) {
        v.usingWebAudio = false;
      }
      var h = /iP(hone|od|ad)/.test(v._navigator && v._navigator.platform);
      var l = v._navigator && v._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
      l = l ? parseInt(l[1], 10) : null;
      if (h && l && l < 9) {
        h = /safari/.test(v._navigator && v._navigator.userAgent.toLowerCase());
        if (v._navigator && !h) {
          v.usingWebAudio = false;
        }
      }
      if (v.usingWebAudio) {
        v.masterGain = v.ctx.createGain === undefined ? v.ctx.createGainNode() : v.ctx.createGain();
        v.masterGain.gain.setValueAtTime(v._muted ? 0 : v._volume, v.ctx.currentTime);
        v.masterGain.connect(v.ctx.destination);
      }
      v._setup();
    }
  }
  if (typeof define == "function" && define.amd) {
    define([], function () {
      return {
        Howler: v,
        Howl: I
      };
    });
  }
  if (typeof exports != "undefined") {
    exports.Howler = v;
    exports.Howl = I;
  }
  if (typeof global != "undefined") {
    global.HowlerGlobal = ra;
    global.Howler = v;
    global.Howl = I;
    global.Sound = E;
  } else if (typeof window != "undefined") {
    window.HowlerGlobal = ra;
    window.Howler = v;
    window.Howl = I;
    window.Sound = E;
  }
})();
(function () {
  HowlerGlobal.prototype._pos = [0, 0, 0];
  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];
  HowlerGlobal.prototype.stereo = function (v) {
    if (!this.ctx || !this.ctx.listener) {
      return this;
    }
    for (var I = this._howls.length - 1; I >= 0; I--) {
      this._howls[I].stereo(v);
    }
    return this;
  };
  HowlerGlobal.prototype.pos = function (v, I, E) {
    if (this.ctx && this.ctx.listener) {
      I = typeof I != "number" ? this._pos[1] : I;
      E = typeof E != "number" ? this._pos[2] : E;
      if (typeof v != "number") {
        return this._pos;
      } else {
        this._pos = [v, I, E];
        if (this.ctx.listener.positionX !== undefined) {
          this.ctx.listener.positionX.setTargetAtTime(this._pos[0], Howler.ctx.currentTime, 0.1);
          this.ctx.listener.positionY.setTargetAtTime(this._pos[1], Howler.ctx.currentTime, 0.1);
          this.ctx.listener.positionZ.setTargetAtTime(this._pos[2], Howler.ctx.currentTime, 0.1);
        } else {
          this.ctx.listener.setPosition(this._pos[0], this._pos[1], this._pos[2]);
        }
        return this;
      }
    } else {
      return this;
    }
  };
  HowlerGlobal.prototype.orientation = function (v, I, E, O, P, q) {
    if (!this.ctx || !this.ctx.listener) {
      return this;
    }
    var xa = this._orientation;
    I = typeof I != "number" ? xa[1] : I;
    E = typeof E != "number" ? xa[2] : E;
    O = typeof O != "number" ? xa[3] : O;
    P = typeof P != "number" ? xa[4] : P;
    q = typeof q != "number" ? xa[5] : q;
    if (typeof v != "number") {
      return xa;
    } else {
      this._orientation = [v, I, E, O, P, q];
      if (this.ctx.listener.forwardX !== undefined) {
        this.ctx.listener.forwardX.setTargetAtTime(v, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.forwardY.setTargetAtTime(I, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.forwardZ.setTargetAtTime(E, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.upX.setTargetAtTime(O, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.upY.setTargetAtTime(P, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.upZ.setTargetAtTime(q, Howler.ctx.currentTime, 0.1);
      } else {
        this.ctx.listener.setOrientation(v, I, E, O, P, q);
      }
      return this;
    }
  };
  Howl.prototype.init = function (v) {
    return function (I) {
      this._orientation = I.orientation || [1, 0, 0];
      this._stereo = I.stereo || null;
      this._pos = I.pos || null;
      this._pannerAttr = {
        coneInnerAngle: I.coneInnerAngle !== undefined ? I.coneInnerAngle : 360,
        coneOuterAngle: I.coneOuterAngle !== undefined ? I.coneOuterAngle : 360,
        coneOuterGain: I.coneOuterGain !== undefined ? I.coneOuterGain : 0,
        distanceModel: I.distanceModel !== undefined ? I.distanceModel : "inverse",
        maxDistance: I.maxDistance !== undefined ? I.maxDistance : 10000,
        panningModel: I.panningModel !== undefined ? I.panningModel : "HRTF",
        refDistance: I.refDistance !== undefined ? I.refDistance : 1,
        rolloffFactor: I.rolloffFactor !== undefined ? I.rolloffFactor : 1
      };
      this._onstereo = I.onstereo ? [{
        fn: I.onstereo
      }] : [];
      this._onpos = I.onpos ? [{
        fn: I.onpos
      }] : [];
      this._onorientation = I.onorientation ? [{
        fn: I.onorientation
      }] : [];
      return v.call(this, I);
    };
  }(Howl.prototype.init);
  Howl.prototype.stereo = function (v, I) {
    var E = this;
    if (!E._webAudio) {
      return E;
    }
    if (E._state !== "loaded") {
      E._queue.push({
        event: "stereo",
        action: function () {
          E.stereo(v, I);
        }
      });
      return E;
    }
    var O = Howler.ctx.createStereoPanner === undefined ? "spatial" : "stereo";
    if (I === undefined) {
      if (typeof v != "number") {
        return E._stereo;
      }
      E._stereo = v;
      E._pos = [v, 0, 0];
    }
    for (var P = E._getSoundIds(I), q = 0; q < P.length; q++) {
      var xa = E._soundById(P[q]);
      if (xa) {
        if (typeof v != "number") {
          return xa._stereo;
        }
        xa._stereo = v;
        xa._pos = [v, 0, 0];
        if (xa._node) {
          xa._pannerAttr.panningModel = "equalpower";
          if (!xa._panner || !xa._panner.pan) {
            ra(xa, O);
          }
          if (O === "spatial") {
            if (xa._panner.positionX !== undefined) {
              xa._panner.positionX.setValueAtTime(v, Howler.ctx.currentTime);
              xa._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);
              xa._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);
            } else {
              xa._panner.setPosition(v, 0, 0);
            }
          } else {
            xa._panner.pan.setValueAtTime(v, Howler.ctx.currentTime);
          }
        }
        E._emit("stereo", xa._id);
      }
    }
    return E;
  };
  Howl.prototype.pos = function (v, I, E, O) {
    var P = this;
    if (!P._webAudio) {
      return P;
    }
    if (P._state !== "loaded") {
      P._queue.push({
        event: "pos",
        action: function () {
          P.pos(v, I, E, O);
        }
      });
      return P;
    }
    I = typeof I != "number" ? 0 : I;
    E = typeof E != "number" ? -0.5 : E;
    if (O === undefined) {
      if (typeof v != "number") {
        return P._pos;
      }
      P._pos = [v, I, E];
    }
    for (var q = P._getSoundIds(O), xa = 0; xa < q.length; xa++) {
      var l = P._soundById(q[xa]);
      if (l) {
        if (typeof v != "number") {
          return l._pos;
        }
        l._pos = [v, I, E];
        if (l._node) {
          if (!l._panner || !!l._panner.pan) {
            ra(l, "spatial");
          }
          if (l._panner.positionX !== undefined) {
            l._panner.positionX.setValueAtTime(v, Howler.ctx.currentTime);
            l._panner.positionY.setValueAtTime(I, Howler.ctx.currentTime);
            l._panner.positionZ.setValueAtTime(E, Howler.ctx.currentTime);
          } else {
            l._panner.setPosition(v, I, E);
          }
        }
        P._emit("pos", l._id);
      }
    }
    return P;
  };
  Howl.prototype.orientation = function (v, I, E, O) {
    var P = this;
    if (!P._webAudio) {
      return P;
    }
    if (P._state !== "loaded") {
      P._queue.push({
        event: "orientation",
        action: function () {
          P.orientation(v, I, E, O);
        }
      });
      return P;
    }
    I = typeof I != "number" ? P._orientation[1] : I;
    E = typeof E != "number" ? P._orientation[2] : E;
    if (O === undefined) {
      if (typeof v != "number") {
        return P._orientation;
      }
      P._orientation = [v, I, E];
    }
    for (var q = P._getSoundIds(O), xa = 0; xa < q.length; xa++) {
      var l = P._soundById(q[xa]);
      if (l) {
        if (typeof v != "number") {
          return l._orientation;
        }
        l._orientation = [v, I, E];
        if (l._node) {
          if (!l._panner) {
            l._pos ||= P._pos || [0, 0, -0.5];
            ra(l, "spatial");
          }
          if (l._panner.orientationX !== undefined) {
            l._panner.orientationX.setValueAtTime(v, Howler.ctx.currentTime);
            l._panner.orientationY.setValueAtTime(I, Howler.ctx.currentTime);
            l._panner.orientationZ.setValueAtTime(E, Howler.ctx.currentTime);
          } else {
            l._panner.setOrientation(v, I, E);
          }
        }
        P._emit("orientation", l._id);
      }
    }
    return P;
  };
  Howl.prototype.pannerAttr = function () {
    var v;
    var I;
    var E = arguments;
    if (!this._webAudio) {
      return this;
    }
    if (E.length === 0) {
      return this._pannerAttr;
    }
    if (E.length === 1) {
      if (typeof E[0] != "object") {
        I = this._soundById(parseInt(E[0], 10));
        if (I) {
          return I._pannerAttr;
        } else {
          return this._pannerAttr;
        }
      }
      var O = E[0];
      if (v === undefined) {
        O.pannerAttr ||= {
          coneInnerAngle: O.coneInnerAngle,
          coneOuterAngle: O.coneOuterAngle,
          coneOuterGain: O.coneOuterGain,
          distanceModel: O.distanceModel,
          maxDistance: O.maxDistance,
          refDistance: O.refDistance,
          rolloffFactor: O.rolloffFactor,
          panningModel: O.panningModel
        };
        this._pannerAttr = {
          coneInnerAngle: O.pannerAttr.coneInnerAngle !== undefined ? O.pannerAttr.coneInnerAngle : this._coneInnerAngle,
          coneOuterAngle: O.pannerAttr.coneOuterAngle !== undefined ? O.pannerAttr.coneOuterAngle : this._coneOuterAngle,
          coneOuterGain: O.pannerAttr.coneOuterGain !== undefined ? O.pannerAttr.coneOuterGain : this._coneOuterGain,
          distanceModel: O.pannerAttr.distanceModel !== undefined ? O.pannerAttr.distanceModel : this._distanceModel,
          maxDistance: O.pannerAttr.maxDistance !== undefined ? O.pannerAttr.maxDistance : this._maxDistance,
          refDistance: O.pannerAttr.refDistance !== undefined ? O.pannerAttr.refDistance : this._refDistance,
          rolloffFactor: O.pannerAttr.rolloffFactor !== undefined ? O.pannerAttr.rolloffFactor : this._rolloffFactor,
          panningModel: O.pannerAttr.panningModel !== undefined ? O.pannerAttr.panningModel : this._panningModel
        };
      }
    } else if (E.length === 2) {
      O = E[0];
      v = parseInt(E[1], 10);
    }
    v = this._getSoundIds(v);
    for (E = 0; E < v.length; E++) {
      if (I = this._soundById(v[E])) {
        var P = I._pannerAttr;
        P = {
          coneInnerAngle: O.coneInnerAngle !== undefined ? O.coneInnerAngle : P.coneInnerAngle,
          coneOuterAngle: O.coneOuterAngle !== undefined ? O.coneOuterAngle : P.coneOuterAngle,
          coneOuterGain: O.coneOuterGain !== undefined ? O.coneOuterGain : P.coneOuterGain,
          distanceModel: O.distanceModel !== undefined ? O.distanceModel : P.distanceModel,
          maxDistance: O.maxDistance !== undefined ? O.maxDistance : P.maxDistance,
          refDistance: O.refDistance !== undefined ? O.refDistance : P.refDistance,
          rolloffFactor: O.rolloffFactor !== undefined ? O.rolloffFactor : P.rolloffFactor,
          panningModel: O.panningModel !== undefined ? O.panningModel : P.panningModel
        };
        var q = I._panner;
        if (!q) {
          I._pos ||= this._pos || [0, 0, -0.5];
          ra(I, "spatial");
          q = I._panner;
        }
        q.coneInnerAngle = P.coneInnerAngle;
        q.coneOuterAngle = P.coneOuterAngle;
        q.coneOuterGain = P.coneOuterGain;
        q.distanceModel = P.distanceModel;
        q.maxDistance = P.maxDistance;
        q.refDistance = P.refDistance;
        q.rolloffFactor = P.rolloffFactor;
        q.panningModel = P.panningModel;
      }
    }
    return this;
  };
  Sound.prototype.init = function (v) {
    return function () {
      var I = this._parent;
      this._orientation = I._orientation;
      this._stereo = I._stereo;
      this._pos = I._pos;
      this._pannerAttr = I._pannerAttr;
      v.call(this);
      if (this._stereo) {
        I.stereo(this._stereo);
      } else if (this._pos) {
        I.pos(this._pos[0], this._pos[1], this._pos[2], this._id);
      }
    };
  }(Sound.prototype.init);
  Sound.prototype.reset = function (v) {
    return function () {
      var I = this._parent;
      this._orientation = I._orientation;
      this._stereo = I._stereo;
      this._pos = I._pos;
      this._pannerAttr = I._pannerAttr;
      if (this._stereo) {
        I.stereo(this._stereo);
      } else if (this._pos) {
        I.pos(this._pos[0], this._pos[1], this._pos[2], this._id);
      } else if (this._panner) {
        this._panner.disconnect(0);
        this._panner = undefined;
        I._refreshBuffer(this);
      }
      return v.call(this);
    };
  }(Sound.prototype.reset);
  function ra(v, I) {
    if ((I || "spatial") === "spatial") {
      v._panner = Howler.ctx.createPanner();
      v._panner.coneInnerAngle = v._pannerAttr.coneInnerAngle;
      v._panner.coneOuterAngle = v._pannerAttr.coneOuterAngle;
      v._panner.coneOuterGain = v._pannerAttr.coneOuterGain;
      v._panner.distanceModel = v._pannerAttr.distanceModel;
      v._panner.maxDistance = v._pannerAttr.maxDistance;
      v._panner.refDistance = v._pannerAttr.refDistance;
      v._panner.rolloffFactor = v._pannerAttr.rolloffFactor;
      v._panner.panningModel = v._pannerAttr.panningModel;
      if (v._panner.positionX !== undefined) {
        v._panner.positionX.setValueAtTime(v._pos[0], Howler.ctx.currentTime);
        v._panner.positionY.setValueAtTime(v._pos[1], Howler.ctx.currentTime);
        v._panner.positionZ.setValueAtTime(v._pos[2], Howler.ctx.currentTime);
      } else {
        v._panner.setPosition(v._pos[0], v._pos[1], v._pos[2]);
      }
      if (v._panner.orientationX !== undefined) {
        v._panner.orientationX.setValueAtTime(v._orientation[0], Howler.ctx.currentTime);
        v._panner.orientationY.setValueAtTime(v._orientation[1], Howler.ctx.currentTime);
        v._panner.orientationZ.setValueAtTime(v._orientation[2], Howler.ctx.currentTime);
      } else {
        v._panner.setOrientation(v._orientation[0], v._orientation[1], v._orientation[2]);
      }
    } else {
      v._panner = Howler.ctx.createStereoPanner();
      v._panner.pan.setValueAtTime(v._stereo, Howler.ctx.currentTime);
    }
    v._panner.connect(v._node);
    if (!v._paused) {
      v._parent.pause(v._id, true).play(v._id, true);
    }
  }
})();
(function (ra) {
  if (typeof exports == "object" && typeof module != "undefined") {
    module.exports = ra();
  } else if (typeof define == "function" && define.amd) {
    define([], ra);
  } else {
    (typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this).pako = ra();
  }
})(function () {
  return function O(v, I, E) {
    function P(l, h) {
      if (!I[l]) {
        if (!v[l]) {
          var p = typeof require == "function" && require;
          if (!h && p) {
            return p(l, true);
          }
          if (q) {
            return q(l, true);
          }
          h = Error("Cannot find module '" + l + "'");
          h.code = "MODULE_NOT_FOUND";
          throw h;
        }
        h = I[l] = {
          exports: {}
        };
        v[l][0].call(h.exports, function (h) {
          var p = v[l][1][h];
          return P(p ? p : h);
        }, h, h.exports, O, v, I, E);
      }
      return I[l].exports;
    }
    var q = typeof require == "function" && require;
    for (var xa = 0; xa < E.length; xa++) {
      P(E[xa]);
    }
    return P;
  }({
    1: [function (v, I, E) {
      function O(v) {
        if (!(this instanceof O)) {
          return new O(v);
        }
        v = this.options = xa.assign({
          level: ha,
          method: ya,
          chunkSize: 16384,
          windowBits: 15,
          memLevel: 8,
          strategy: Qa,
          to: ""
        }, v || {});
        if (v.raw && v.windowBits > 0) {
          v.windowBits = -v.windowBits;
        } else if (v.gzip && v.windowBits > 0 && v.windowBits < 16) {
          v.windowBits += 16;
        }
        this.err = 0;
        this.msg = "";
        this.ended = false;
        this.chunks = [];
        this.strm = new p();
        this.strm.avail_out = 0;
        var E = q.deflateInit2(this.strm, v.level, v.method, v.windowBits, v.memLevel, v.strategy);
        if (E !== u) {
          throw Error(h[E]);
        }
        if (v.header) {
          q.deflateSetHeader(this.strm, v.header);
        }
        if (v.dictionary) {
          var I;
          I = typeof v.dictionary == "string" ? l.string2buf(v.dictionary) : x.call(v.dictionary) === "[object ArrayBuffer]" ? new Uint8Array(v.dictionary) : v.dictionary;
          E = q.deflateSetDictionary(this.strm, I);
          if (E !== u) {
            throw Error(h[E]);
          }
          this._dict_set = true;
        }
      }
      function P(h, l) {
        l = new O(l);
        l.push(h, true);
        if (l.err) {
          throw l.msg;
        }
        return l.result;
      }
      var q = v("./zlib/deflate");
      var xa = v("./utils/common");
      var l = v("./utils/strings");
      var h = v("./zlib/messages");
      var p = v("./zlib/zstream");
      var x = Object.prototype.toString;
      var u = 0;
      var ha = -1;
      var Qa = 0;
      var ya = 8;
      O.prototype.push = function (h, p) {
        var v;
        var E = this.strm;
        var I = this.options.chunkSize;
        if (this.ended) {
          return false;
        }
        p = p === ~~p ? p : p === true ? 4 : 0;
        if (typeof h == "string") {
          E.input = l.string2buf(h);
        } else if (x.call(h) === "[object ArrayBuffer]") {
          E.input = new Uint8Array(h);
        } else {
          E.input = h;
        }
        E.next_in = 0;
        E.avail_in = E.input.length;
        do {
          if (E.avail_out === 0) {
            E.output = new xa.Buf8(I);
            E.next_out = 0;
            E.avail_out = I;
          }
          v = q.deflate(E, p);
          if (v !== 1 && v !== u) {
            this.onEnd(v);
            this.ended = true;
            return false;
          }
          if (E.avail_out === 0 || E.avail_in === 0 && (p === 4 || p === 2)) {
            if (this.options.to === "string") {
              this.onData(l.buf2binstring(xa.shrinkBuf(E.output, E.next_out)));
            } else {
              this.onData(xa.shrinkBuf(E.output, E.next_out));
            }
          }
        } while ((E.avail_in > 0 || E.avail_out === 0) && v !== 1);
        if (p === 4) {
          v = q.deflateEnd(this.strm);
          this.onEnd(v);
          this.ended = true;
          return v === u;
        } else {
          return p !== 2 || (this.onEnd(u), E.avail_out = 0, true);
        }
      };
      O.prototype.onData = function (h) {
        this.chunks.push(h);
      };
      O.prototype.onEnd = function (h) {
        if (h === u) {
          if (this.options.to === "string") {
            this.result = this.chunks.join("");
          } else {
            this.result = xa.flattenChunks(this.chunks);
          }
        }
        this.chunks = [];
        this.err = h;
        this.msg = this.strm.msg;
      };
      E.Deflate = O;
      E.deflate = P;
      E.deflateRaw = function (h, l) {
        l = l || {};
        l.raw = true;
        return P(h, l);
      };
      E.gzip = function (h, l) {
        l = l || {};
        l.gzip = true;
        return P(h, l);
      };
    }, {
      "./utils/common": 3,
      "./utils/strings": 4,
      "./zlib/deflate": 8,
      "./zlib/messages": 13,
      "./zlib/zstream": 15
    }],
    2: [function (v, I, E) {
      function O(l) {
        if (!(this instanceof O)) {
          return new O(l);
        }
        var v = this.options = xa.assign({
          chunkSize: 16384,
          windowBits: 0,
          to: ""
        }, l || {});
        if (v.raw && v.windowBits >= 0 && v.windowBits < 16) {
          v.windowBits = -v.windowBits;
          if (v.windowBits === 0) {
            v.windowBits = -15;
          }
        }
        if (!!(v.windowBits >= 0) && !!(v.windowBits < 16) && (!l || !l.windowBits)) {
          v.windowBits += 32;
        }
        if (v.windowBits > 15 && v.windowBits < 48 && (v.windowBits & 15) === 0) {
          v.windowBits |= 15;
        }
        this.err = 0;
        this.msg = "";
        this.ended = false;
        this.chunks = [];
        this.strm = new x();
        this.strm.avail_out = 0;
        l = q.inflateInit2(this.strm, v.windowBits);
        if (l !== h.Z_OK) {
          throw Error(p[l]);
        }
        this.header = new u();
        q.inflateGetHeader(this.strm, this.header);
      }
      function P(h, l) {
        l = new O(l);
        l.push(h, true);
        if (l.err) {
          throw l.msg;
        }
        return l.result;
      }
      var q = v("./zlib/inflate");
      var xa = v("./utils/common");
      var l = v("./utils/strings");
      var h = v("./zlib/constants");
      var p = v("./zlib/messages");
      var x = v("./zlib/zstream");
      var u = v("./zlib/gzheader");
      var ha = Object.prototype.toString;
      O.prototype.push = function (p, u) {
        var x;
        var v;
        var E;
        var I;
        var O;
        var P = this.strm;
        var V = this.options.chunkSize;
        var ya = this.options.dictionary;
        var la = false;
        if (this.ended) {
          return false;
        }
        u = u === ~~u ? u : u === true ? h.Z_FINISH : h.Z_NO_FLUSH;
        if (typeof p == "string") {
          P.input = l.binstring2buf(p);
        } else if (ha.call(p) === "[object ArrayBuffer]") {
          P.input = new Uint8Array(p);
        } else {
          P.input = p;
        }
        P.next_in = 0;
        P.avail_in = P.input.length;
        do {
          if (P.avail_out === 0) {
            P.output = new xa.Buf8(V);
            P.next_out = 0;
            P.avail_out = V;
          }
          x = q.inflate(P, h.Z_NO_FLUSH);
          if (x === h.Z_NEED_DICT && ya) {
            O = typeof ya == "string" ? l.string2buf(ya) : ha.call(ya) === "[object ArrayBuffer]" ? new Uint8Array(ya) : ya;
            x = q.inflateSetDictionary(this.strm, O);
          }
          if (x === h.Z_BUF_ERROR && la === true) {
            x = h.Z_OK;
            la = false;
          }
          if (x !== h.Z_STREAM_END && x !== h.Z_OK) {
            this.onEnd(x);
            this.ended = true;
            return false;
          }
          if (P.next_out) {
            if (P.avail_out === 0 || x === h.Z_STREAM_END || P.avail_in === 0 && (u === h.Z_FINISH || u === h.Z_SYNC_FLUSH)) {
              if (this.options.to === "string") {
                v = l.utf8border(P.output, P.next_out);
                E = P.next_out - v;
                I = l.buf2string(P.output, v);
                P.next_out = E;
                P.avail_out = V - E;
                if (E) {
                  xa.arraySet(P.output, P.output, v, E, 0);
                }
                this.onData(I);
              } else {
                this.onData(xa.shrinkBuf(P.output, P.next_out));
              }
            }
          }
          if (P.avail_in === 0 && P.avail_out === 0) {
            la = true;
          }
        } while ((P.avail_in > 0 || P.avail_out === 0) && x !== h.Z_STREAM_END);
        if (x === h.Z_STREAM_END) {
          u = h.Z_FINISH;
        }
        if (u === h.Z_FINISH) {
          x = q.inflateEnd(this.strm);
          this.onEnd(x);
          this.ended = true;
          return x === h.Z_OK;
        } else {
          return u !== h.Z_SYNC_FLUSH || (this.onEnd(h.Z_OK), P.avail_out = 0, true);
        }
      };
      O.prototype.onData = function (h) {
        this.chunks.push(h);
      };
      O.prototype.onEnd = function (l) {
        if (l === h.Z_OK) {
          if (this.options.to === "string") {
            this.result = this.chunks.join("");
          } else {
            this.result = xa.flattenChunks(this.chunks);
          }
        }
        this.chunks = [];
        this.err = l;
        this.msg = this.strm.msg;
      };
      E.Inflate = O;
      E.inflate = P;
      E.inflateRaw = function (h, l) {
        l = l || {};
        l.raw = true;
        return P(h, l);
      };
      E.ungzip = P;
    }, {
      "./utils/common": 3,
      "./utils/strings": 4,
      "./zlib/constants": 6,
      "./zlib/gzheader": 9,
      "./zlib/inflate": 11,
      "./zlib/messages": 13,
      "./zlib/zstream": 15
    }],
    3: [function (v, I, E) {
      v = typeof Uint8Array != "undefined" && typeof Uint16Array != "undefined" && typeof Int32Array != "undefined";
      E.assign = function (q) {
        for (var v = Array.prototype.slice.call(arguments, 1); v.length;) {
          var l = v.shift();
          if (l) {
            if (typeof l != "object") {
              throw new TypeError(l + "must be non-object");
            }
            for (var h in l) {
              if (l.hasOwnProperty(h)) {
                q[h] = l[h];
              }
            }
          }
        }
        return q;
      };
      E.shrinkBuf = function (q, v) {
        if (q.length === v) {
          return q;
        } else if (q.subarray) {
          return q.subarray(0, v);
        } else {
          q.length = v;
          return q;
        }
      };
      var O = {
        arraySet: function (q, v, l, h, p) {
          if (v.subarray && q.subarray) {
            q.set(v.subarray(l, l + h), p);
            return;
          }
          for (var x = 0; x < h; x++) {
            q[p + x] = v[l + x];
          }
        },
        flattenChunks: function (q) {
          var v;
          var l;
          var h = l = 0;
          for (v = q.length; h < v; h++) {
            l += q[h].length;
          }
          var p = new Uint8Array(l);
          h = l = 0;
          for (v = q.length; h < v; h++) {
            var x = q[h];
            p.set(x, l);
            l += x.length;
          }
          return p;
        }
      };
      var P = {
        arraySet: function (q, v, l, h, p) {
          for (var x = 0; x < h; x++) {
            q[p + x] = v[l + x];
          }
        },
        flattenChunks: function (q) {
          return [].concat.apply([], q);
        }
      };
      E.setTyped = function (q) {
        if (q) {
          E.Buf8 = Uint8Array;
          E.Buf16 = Uint16Array;
          E.Buf32 = Int32Array;
          E.assign(E, O);
        } else {
          E.Buf8 = Array;
          E.Buf16 = Array;
          E.Buf32 = Array;
          E.assign(E, P);
        }
      };
      E.setTyped(v);
    }, {}],
    4: [function (v, I, E) {
      function O(h, l) {
        if (l < 65537 && (h.subarray && xa || !h.subarray && q)) {
          return String.fromCharCode.apply(null, P.shrinkBuf(h, l));
        }
        var p = "";
        for (var u = 0; u < l; u++) {
          p += String.fromCharCode(h[u]);
        }
        return p;
      }
      var P = v("./common");
      var q = true;
      var xa = true;
      try {
        String.fromCharCode.apply(null, [0]);
      } catch (h) {
        q = false;
      }
      try {
        String.fromCharCode.apply(null, new Uint8Array(1));
      } catch (h) {
        xa = false;
      }
      var l = new P.Buf8(256);
      for (v = 0; v < 256; v++) {
        l[v] = v >= 252 ? 6 : v >= 248 ? 5 : v >= 240 ? 4 : v >= 224 ? 3 : v >= 192 ? 2 : 1;
      }
      l[254] = l[254] = 1;
      E.string2buf = function (h) {
        var l;
        var q;
        var u;
        var v = h.length;
        var E = 0;
        for (q = 0; q < v; q++) {
          var I = h.charCodeAt(q);
          if ((I & 64512) === 55296 && q + 1 < v) {
            l = h.charCodeAt(q + 1);
            if ((l & 64512) === 56320) {
              I = 65536 + (I - 55296 << 10) + (l - 56320);
              q++;
            }
          }
          E += I < 128 ? 1 : I < 2048 ? 2 : I < 65536 ? 3 : 4;
        }
        var O = new P.Buf8(E);
        for (q = u = 0; u < E; q++) {
          I = h.charCodeAt(q);
          if ((I & 64512) === 55296 && q + 1 < v) {
            l = h.charCodeAt(q + 1);
            if ((l & 64512) === 56320) {
              I = 65536 + (I - 55296 << 10) + (l - 56320);
              q++;
            }
          }
          if (I < 128) {
            O[u++] = I;
          } else if (I < 2048) {
            O[u++] = I >>> 6 | 192;
            O[u++] = I & 63 | 128;
          } else if (I < 65536) {
            O[u++] = I >>> 12 | 224;
            O[u++] = I >>> 6 & 63 | 128;
            O[u++] = I & 63 | 128;
          } else {
            O[u++] = I >>> 18 | 240;
            O[u++] = I >>> 12 & 63 | 128;
            O[u++] = I >>> 6 & 63 | 128;
            O[u++] = I & 63 | 128;
          }
        }
        return O;
      };
      E.buf2binstring = function (h) {
        return O(h, h.length);
      };
      E.binstring2buf = function (h) {
        var l = new P.Buf8(h.length);
        for (var q = 0, u = l.length; q < u; q++) {
          l[q] = h.charCodeAt(q);
        }
        return l;
      };
      E.buf2string = function (h, p) {
        var q;
        var u;
        var v;
        var E = p || h.length;
        var I = Array(E * 2);
        for (p = q = 0; p < E;) {
          u = h[p++];
          if (u < 128) {
            I[q++] = u;
          } else {
            v = l[u];
            if (v > 4) {
              I[q++] = 65533;
              p += v - 1;
            } else {
              for (u &= v === 2 ? 31 : v === 3 ? 15 : 7; v > 1 && p < E;) {
                u = u << 6 | h[p++] & 63;
                v--;
              }
              if (v > 1) {
                I[q++] = 65533;
              } else if (u < 65536) {
                I[q++] = u;
              } else {
                u -= 65536;
                I[q++] = u >> 10 & 1023 | 55296;
                I[q++] = u & 1023 | 56320;
              }
            }
          }
        }
        return O(I, q);
      };
      E.utf8border = function (h, p) {
        var q;
        p = p || h.length;
        if (p > h.length) {
          p = h.length;
        }
        for (q = p - 1; q >= 0 && (h[q] & 192) === 128;) {
          q--;
        }
        if (q < 0) {
          return p;
        } else if (q === 0) {
          return p;
        } else if (q + l[h[q]] > p) {
          return q;
        } else {
          return p;
        }
      };
    }, {
      "./common": 3
    }],
    5: [function (v, I, E) {
      I.exports = function (v, E, q, I) {
        var l = v & 65535 | 0;
        v = v >>> 16 & 65535 | 0;
        var h;
        while (q !== 0) {
          h = q > 2000 ? 2000 : q;
          q -= h;
          do {
            l = l + E[I++] | 0;
            v = v + l | 0;
          } while (--h);
          l %= 65521;
          v %= 65521;
        }
        return l | v << 16 | 0;
      };
    }, {}],
    6: [function (v, I, E) {
      I.exports = {
        Z_NO_FLUSH: 0,
        Z_PARTIAL_FLUSH: 1,
        Z_SYNC_FLUSH: 2,
        Z_FULL_FLUSH: 3,
        Z_FINISH: 4,
        Z_BLOCK: 5,
        Z_TREES: 6,
        Z_OK: 0,
        Z_STREAM_END: 1,
        Z_NEED_DICT: 2,
        Z_ERRNO: -1,
        Z_STREAM_ERROR: -2,
        Z_DATA_ERROR: -3,
        Z_BUF_ERROR: -5,
        Z_NO_COMPRESSION: 0,
        Z_BEST_SPEED: 1,
        Z_BEST_COMPRESSION: 9,
        Z_DEFAULT_COMPRESSION: -1,
        Z_FILTERED: 1,
        Z_HUFFMAN_ONLY: 2,
        Z_RLE: 3,
        Z_FIXED: 4,
        Z_DEFAULT_STRATEGY: 0,
        Z_BINARY: 0,
        Z_TEXT: 1,
        Z_UNKNOWN: 2,
        Z_DEFLATED: 8
      };
    }, {}],
    7: [function (v, I, E) {
      var O = function () {
        var v;
        var q = [];
        for (var E = 0; E < 256; E++) {
          v = E;
          for (var l = 0; l < 8; l++) {
            v = v & 1 ? v >>> 1 ^ -306674912 : v >>> 1;
          }
          q[E] = v;
        }
        return q;
      }();
      I.exports = function (v, q, E, l) {
        E = l + E;
        for (v ^= -1; l < E; l++) {
          v = v >>> 8 ^ O[(v ^ q[l]) & 255];
        }
        return v ^ -1;
      };
    }, {}],
    8: [function (v, I, E) {
      function O(h, l) {
        h.msg = qb[l];
        return l;
      }
      function P(h) {
        for (var l = h.length; --l >= 0;) {
          h[l] = 0;
        }
      }
      function q(h) {
        var l = h.state;
        var p = l.pending;
        if (p > h.avail_out) {
          p = h.avail_out;
        }
        if (p !== 0) {
          ua.arraySet(h.output, l.pending_buf, l.pending_out, p, h.next_out);
          h.next_out += p;
          l.pending_out += p;
          h.total_out += p;
          h.avail_out -= p;
          l.pending -= p;
          if (l.pending === 0) {
            l.pending_out = 0;
          }
        }
      }
      function xa(h, l) {
        Rc._tr_flush_block(h, h.block_start >= 0 ? h.block_start : -1, h.strstart - h.block_start, l);
        h.block_start = h.strstart;
        q(h.strm);
      }
      function l(h, l) {
        h.pending_buf[h.pending++] = l;
      }
      function h(h, l) {
        h.pending_buf[h.pending++] = l >>> 8 & 255;
        h.pending_buf[h.pending++] = l & 255;
      }
      function p(h, l) {
        var p;
        var q;
        var t = h.max_chain_length;
        var u = h.strstart;
        var v = h.prev_length;
        var x = h.nice_match;
        var B = h.strstart > h.w_size - lb ? h.strstart - (h.w_size - lb) : 0;
        var E = h.window;
        var w = h.w_mask;
        var I = h.prev;
        var la = h.strstart + sb;
        var M = E[u + v - 1];
        var O = E[u + v];
        if (h.prev_length >= h.good_match) {
          t >>= 2;
        }
        if (x > h.lookahead) {
          x = h.lookahead;
        }
        do {
          p = l;
          if (E[p + v] === O && E[p + v - 1] === M && E[p] === E[u] && E[++p] === E[u + 1]) {
            u += 2;
            for (p++; E[++u] === E[++p] && E[++u] === E[++p] && E[++u] === E[++p] && E[++u] === E[++p] && E[++u] === E[++p] && E[++u] === E[++p] && E[++u] === E[++p] && E[++u] === E[++p] && u < la;);
            q = sb - (la - u);
            u = la - sb;
            if (q > v) {
              h.match_start = l;
              v = q;
              if (q >= x) {
                break;
              }
              M = E[u + v - 1];
              O = E[u + v];
            }
          }
        } while ((l = I[l & w]) > B && --t !== 0);
        if (v <= h.lookahead) {
          return v;
        } else {
          return h.lookahead;
        }
      }
      function x(h) {
        var l;
        var p;
        var q = h.w_size;
        do {
          p = h.window_size - h.lookahead - h.strstart;
          if (h.strstart >= q + (q - lb)) {
            ua.arraySet(h.window, h.window, q, q, 0);
            h.match_start -= q;
            h.strstart -= q;
            h.block_start -= q;
            var t = l = h.hash_size;
            do {
              var u = h.head[--t];
              h.head[t] = u >= q ? u - q : 0;
            } while (--l);
            t = l = q;
            do {
              u = h.prev[--t];
              h.prev[t] = u >= q ? u - q : 0;
            } while (--l);
            p += q;
          }
          if (h.strm.avail_in === 0) {
            break;
          }
          t = h.strm;
          u = h.window;
          var v = h.strstart + h.lookahead;
          var x = t.avail_in;
          if (x > p) {
            x = p;
          }
          l = x === 0 ? 0 : (t.avail_in -= x, ua.arraySet(u, t.input, t.next_in, x, v), t.state.wrap === 1 ? t.adler = jb(t.adler, u, x, v) : t.state.wrap === 2 && (t.adler = V(t.adler, u, x, v)), t.next_in += x, t.total_in += x, x);
          h.lookahead += l;
          if (h.lookahead + h.insert >= M) {
            p = h.strstart - h.insert;
            h.ins_h = h.window[p];
            h.ins_h = (h.ins_h << h.hash_shift ^ h.window[p + 1]) & h.hash_mask;
            while (h.insert && (h.ins_h = (h.ins_h << h.hash_shift ^ h.window[p + M - 1]) & h.hash_mask, h.prev[p & h.w_mask] = h.head[h.ins_h], h.head[h.ins_h] = p, p++, h.insert--, !(h.lookahead + h.insert < M)));
          }
        } while (h.lookahead < lb && h.strm.avail_in !== 0);
      }
      function u(h, l) {
        var q;
        var t;
        while (true) {
          if (h.lookahead < lb) {
            x(h);
            if (h.lookahead < lb && l === la) {
              return ja;
            }
            if (h.lookahead === 0) {
              break;
            }
          }
          q = 0;
          if (h.lookahead >= M) {
            h.ins_h = (h.ins_h << h.hash_shift ^ h.window[h.strstart + M - 1]) & h.hash_mask;
            q = h.prev[h.strstart & h.w_mask] = h.head[h.ins_h];
            h.head[h.ins_h] = h.strstart;
          }
          if (q !== 0 && h.strstart - q <= h.w_size - lb) {
            h.match_length = p(h, q);
          }
          if (h.match_length >= M) {
            t = Rc._tr_tally(h, h.strstart - h.match_start, h.match_length - M);
            h.lookahead -= h.match_length;
            if (h.match_length <= h.max_lazy_match && h.lookahead >= M) {
              h.match_length--;
              do {
                h.strstart++;
                h.ins_h = (h.ins_h << h.hash_shift ^ h.window[h.strstart + M - 1]) & h.hash_mask;
                q = h.prev[h.strstart & h.w_mask] = h.head[h.ins_h];
                h.head[h.ins_h] = h.strstart;
              } while (--h.match_length !== 0);
              h.strstart++;
            } else {
              h.strstart += h.match_length;
              h.match_length = 0;
              h.ins_h = h.window[h.strstart];
              h.ins_h = (h.ins_h << h.hash_shift ^ h.window[h.strstart + 1]) & h.hash_mask;
            }
          } else {
            t = Rc._tr_tally(h, 0, h.window[h.strstart]);
            h.lookahead--;
            h.strstart++;
          }
          if (t && (xa(h, false), h.strm.avail_out === 0)) {
            return ja;
          }
        }
        h.insert = h.strstart < M - 1 ? h.strstart : M - 1;
        if (l === ib) {
          xa(h, true);
          if (h.strm.avail_out === 0) {
            return Ob;
          } else {
            return Ec;
          }
        } else if (h.last_lit && (xa(h, false), h.strm.avail_out === 0)) {
          return ja;
        } else {
          return Bd;
        }
      }
      function ha(h, l) {
        var q;
        var t;
        var u;
        while (true) {
          if (h.lookahead < lb) {
            x(h);
            if (h.lookahead < lb && l === la) {
              return ja;
            }
            if (h.lookahead === 0) {
              break;
            }
          }
          q = 0;
          if (h.lookahead >= M) {
            h.ins_h = (h.ins_h << h.hash_shift ^ h.window[h.strstart + M - 1]) & h.hash_mask;
            q = h.prev[h.strstart & h.w_mask] = h.head[h.ins_h];
            h.head[h.ins_h] = h.strstart;
          }
          h.prev_length = h.match_length;
          h.prev_match = h.match_start;
          h.match_length = M - 1;
          if (q !== 0 && h.prev_length < h.max_lazy_match && h.strstart - q <= h.w_size - lb) {
            h.match_length = p(h, q);
            if (h.match_length <= 5 && (h.strategy === Fa || h.match_length === M && h.strstart - h.match_start > 4096)) {
              h.match_length = M - 1;
            }
          }
          if (h.prev_length >= M && h.match_length <= h.prev_length) {
            u = h.strstart + h.lookahead - M;
            t = Rc._tr_tally(h, h.strstart - 1 - h.prev_match, h.prev_length - M);
            h.lookahead -= h.prev_length - 1;
            h.prev_length -= 2;
            do {
              if (++h.strstart <= u) {
                h.ins_h = (h.ins_h << h.hash_shift ^ h.window[h.strstart + M - 1]) & h.hash_mask;
                q = h.prev[h.strstart & h.w_mask] = h.head[h.ins_h];
                h.head[h.ins_h] = h.strstart;
              }
            } while (--h.prev_length !== 0);
            h.match_available = 0;
            h.match_length = M - 1;
            h.strstart++;
            if (t && (xa(h, false), h.strm.avail_out === 0)) {
              return ja;
            }
          } else if (h.match_available) {
            t = Rc._tr_tally(h, 0, h.window[h.strstart - 1]);
            if (t) {
              xa(h, false);
            }
            h.strstart++;
            h.lookahead--;
            if (h.strm.avail_out === 0) {
              return ja;
            }
          } else {
            h.match_available = 1;
            h.strstart++;
            h.lookahead--;
          }
        }
        if (h.match_available) {
          Rc._tr_tally(h, 0, h.window[h.strstart - 1]);
          h.match_available = 0;
        }
        h.insert = h.strstart < M - 1 ? h.strstart : M - 1;
        if (l === ib) {
          xa(h, true);
          if (h.strm.avail_out === 0) {
            return Ob;
          } else {
            return Ec;
          }
        } else if (h.last_lit && (xa(h, false), h.strm.avail_out === 0)) {
          return ja;
        } else {
          return Bd;
        }
      }
      function Qa(h, l, p, q, u) {
        this.good_length = h;
        this.max_lazy = l;
        this.nice_length = p;
        this.max_chain = q;
        this.func = u;
      }
      function ya() {
        this.strm = null;
        this.status = 0;
        this.pending_buf = null;
        this.wrap = this.pending = this.pending_out = this.pending_buf_size = 0;
        this.gzhead = null;
        this.gzindex = 0;
        this.method = $a;
        this.last_flush = -1;
        this.w_mask = this.w_bits = this.w_size = 0;
        this.window = null;
        this.window_size = 0;
        this.head = this.prev = null;
        this.nice_match = this.good_match = this.strategy = this.level = this.max_lazy_match = this.max_chain_length = this.prev_length = this.lookahead = this.match_start = this.strstart = this.match_available = this.prev_match = this.match_length = this.block_start = this.hash_shift = this.hash_mask = this.hash_bits = this.hash_size = this.ins_h = 0;
        this.dyn_ltree = new ua.Buf16(Ea * 2);
        this.dyn_dtree = new ua.Buf16((sa * 2 + 1) * 2);
        this.bl_tree = new ua.Buf16((B * 2 + 1) * 2);
        P(this.dyn_ltree);
        P(this.dyn_dtree);
        P(this.bl_tree);
        this.bl_desc = this.d_desc = this.l_desc = null;
        this.bl_count = new ua.Buf16(sc + 1);
        this.heap = new ua.Buf16(ld * 2 + 1);
        P(this.heap);
        this.heap_max = this.heap_len = 0;
        this.depth = new ua.Buf16(ld * 2 + 1);
        P(this.depth);
        this.bi_valid = this.bi_buf = this.insert = this.matches = this.static_len = this.opt_len = this.d_buf = this.last_lit = this.lit_bufsize = this.l_buf = 0;
      }
      function rb(h) {
        var l;
        if (h && h.state) {
          h.total_in = h.total_out = 0;
          h.data_type = wb;
          l = h.state;
          l.pending = 0;
          l.pending_out = 0;
          if (l.wrap < 0) {
            l.wrap = -l.wrap;
          }
          l.status = l.wrap ? Da : Y;
          h.adler = l.wrap === 2 ? 0 : 1;
          l.last_flush = la;
          Rc._tr_init(l);
          return vb;
        } else {
          return O(h, Oa);
        }
      }
      function Ld(h) {
        var l = rb(h);
        if (l === vb) {
          h = h.state;
          h.window_size = h.w_size * 2;
          P(h.head);
          h.max_lazy_match = Pb[h.level].max_lazy;
          h.good_match = Pb[h.level].good_length;
          h.nice_match = Pb[h.level].nice_length;
          h.max_chain_length = Pb[h.level].max_chain;
          h.strstart = 0;
          h.block_start = 0;
          h.lookahead = 0;
          h.insert = 0;
          h.match_length = h.prev_length = M - 1;
          h.match_available = 0;
          h.ins_h = 0;
        }
        return l;
      }
      function Hc(h, l, p, q, u, v) {
        if (!h) {
          return Oa;
        }
        var t = 1;
        if (l === ab) {
          l = 6;
        }
        if (q < 0) {
          t = 0;
          q = -q;
        } else if (q > 15) {
          t = 2;
          q -= 16;
        }
        if (u < 1 || u > Ub || p !== $a || q < 8 || q > 15 || l < 0 || l > 9 || v < 0 || v > tb) {
          return O(h, Oa);
        }
        if (q === 8) {
          q = 9;
        }
        var A = new ya();
        h.state = A;
        A.strm = h;
        A.wrap = t;
        A.gzhead = null;
        A.w_bits = q;
        A.w_size = 1 << A.w_bits;
        A.w_mask = A.w_size - 1;
        A.hash_bits = u + 7;
        A.hash_size = 1 << A.hash_bits;
        A.hash_mask = A.hash_size - 1;
        A.hash_shift = ~~((A.hash_bits + M - 1) / M);
        A.window = new ua.Buf8(A.w_size * 2);
        A.head = new ua.Buf16(A.hash_size);
        A.prev = new ua.Buf16(A.w_size);
        A.lit_bufsize = 1 << u + 6;
        A.pending_buf_size = A.lit_bufsize * 4;
        A.pending_buf = new ua.Buf8(A.pending_buf_size);
        A.d_buf = A.lit_bufsize * 1;
        A.l_buf = A.lit_bufsize * 3;
        A.level = l;
        A.strategy = v;
        A.method = p;
        return Ld(h);
      }
      var ua = v("../utils/common");
      var Rc = v("./trees");
      var jb = v("./adler32");
      var V = v("./crc32");
      var qb = v("./messages");
      var la = 0;
      var ib = 4;
      var vb = 0;
      var Oa = -2;
      var ab = -1;
      var Fa = 1;
      var tb = 4;
      var wb = 2;
      var $a = 8;
      var Ub = 9;
      var ld = 286;
      var sa = 30;
      var B = 19;
      var Ea = ld * 2 + 1;
      var sc = 15;
      var M = 3;
      var sb = 258;
      var lb = sb + M + 1;
      var Da = 42;
      var Y = 113;
      var ja = 1;
      var Bd = 2;
      var Ob = 3;
      var Ec = 4;
      var Pb = [new Qa(0, 0, 0, 0, function (h, l) {
        var p = 65535;
        for (p > h.pending_buf_size - 5 && (p = h.pending_buf_size - 5);;) {
          if (h.lookahead <= 1) {
            x(h);
            if (h.lookahead === 0 && l === la) {
              return ja;
            }
            if (h.lookahead === 0) {
              break;
            }
          }
          h.strstart += h.lookahead;
          h.lookahead = 0;
          var q = h.block_start + p;
          if ((h.strstart === 0 || h.strstart >= q) && (h.lookahead = h.strstart - q, h.strstart = q, xa(h, false), h.strm.avail_out === 0) || h.strstart - h.block_start >= h.w_size - lb && (xa(h, false), h.strm.avail_out === 0)) {
            return ja;
          }
        }
        h.insert = 0;
        if (l === ib) {
          xa(h, true);
          if (h.strm.avail_out === 0) {
            return Ob;
          } else {
            return Ec;
          }
        } else {
          if (h.strstart > h.block_start) {
            xa(h, false);
          }
          return ja;
        }
      }), new Qa(4, 4, 8, 4, u), new Qa(4, 5, 16, 8, u), new Qa(4, 6, 32, 32, u), new Qa(4, 4, 16, 16, ha), new Qa(8, 16, 32, 32, ha), new Qa(8, 16, 128, 128, ha), new Qa(8, 32, 128, 256, ha), new Qa(32, 128, 258, 1024, ha), new Qa(32, 258, 258, 4096, ha)];
      E.deflateInit = function (h, l) {
        return Hc(h, l, $a, 15, 8, 0);
      };
      E.deflateInit2 = Hc;
      E.deflateReset = Ld;
      E.deflateResetKeep = rb;
      E.deflateSetHeader = function (h, l) {
        if (h && h.state) {
          if (h.state.wrap !== 2) {
            return Oa;
          } else {
            h.state.gzhead = l;
            return vb;
          }
        } else {
          return Oa;
        }
      };
      E.deflate = function (p, u) {
        var t;
        var A;
        if (!p || !p.state || u > 5 || u < 0) {
          if (p) {
            return O(p, Oa);
          } else {
            return Oa;
          }
        }
        A = p.state;
        if (!p.output || !p.input && p.avail_in !== 0 || A.status === 666 && u !== ib) {
          return O(p, p.avail_out === 0 ? -5 : Oa);
        }
        A.strm = p;
        t = A.last_flush;
        A.last_flush = u;
        if (A.status === Da) {
          if (A.wrap === 2) {
            p.adler = 0;
            l(A, 31);
            l(A, 139);
            l(A, 8);
            if (A.gzhead) {
              l(A, (A.gzhead.text ? 1 : 0) + (A.gzhead.hcrc ? 2 : 0) + (A.gzhead.extra ? 4 : 0) + (A.gzhead.name ? 8 : 0) + (A.gzhead.comment ? 16 : 0));
              l(A, A.gzhead.time & 255);
              l(A, A.gzhead.time >> 8 & 255);
              l(A, A.gzhead.time >> 16 & 255);
              l(A, A.gzhead.time >> 24 & 255);
              l(A, A.level === 9 ? 2 : A.strategy >= 2 || A.level < 2 ? 4 : 0);
              l(A, A.gzhead.os & 255);
              if (A.gzhead.extra && A.gzhead.extra.length) {
                l(A, A.gzhead.extra.length & 255);
                l(A, A.gzhead.extra.length >> 8 & 255);
              }
              if (A.gzhead.hcrc) {
                p.adler = V(p.adler, A.pending_buf, A.pending, 0);
              }
              A.gzindex = 0;
              A.status = 69;
            } else {
              l(A, 0);
              l(A, 0);
              l(A, 0);
              l(A, 0);
              l(A, 0);
              l(A, A.level === 9 ? 2 : A.strategy >= 2 || A.level < 2 ? 4 : 0);
              l(A, 3);
              A.status = Y;
            }
          } else {
            var v = $a + (A.w_bits - 8 << 4) << 8;
            v |= (A.strategy >= 2 || A.level < 2 ? 0 : A.level < 6 ? 1 : A.level === 6 ? 2 : 3) << 6;
            if (A.strstart !== 0) {
              v |= 32;
            }
            A.status = Y;
            h(A, v + (31 - v % 31));
            if (A.strstart !== 0) {
              h(A, p.adler >>> 16);
              h(A, p.adler & 65535);
            }
            p.adler = 1;
          }
        }
        if (A.status === 69) {
          if (A.gzhead.extra) {
            for (v = A.pending; A.gzindex < (A.gzhead.extra.length & 65535) && (A.pending !== A.pending_buf_size || (A.gzhead.hcrc && A.pending > v && (p.adler = V(p.adler, A.pending_buf, A.pending - v, v)), q(p), v = A.pending, A.pending !== A.pending_buf_size));) {
              l(A, A.gzhead.extra[A.gzindex] & 255);
              A.gzindex++;
            }
            if (A.gzhead.hcrc && A.pending > v) {
              p.adler = V(p.adler, A.pending_buf, A.pending - v, v);
            }
            if (A.gzindex === A.gzhead.extra.length) {
              A.gzindex = 0;
              A.status = 73;
            }
          } else {
            A.status = 73;
          }
        }
        if (A.status === 73) {
          if (A.gzhead.name) {
            v = A.pending;
            do {
              if (A.pending === A.pending_buf_size && (A.gzhead.hcrc && A.pending > v && (p.adler = V(p.adler, A.pending_buf, A.pending - v, v)), q(p), v = A.pending, A.pending === A.pending_buf_size)) {
                var B = 1;
                break;
              }
              B = A.gzindex < A.gzhead.name.length ? A.gzhead.name.charCodeAt(A.gzindex++) & 255 : 0;
              l(A, B);
            } while (B !== 0);
            if (A.gzhead.hcrc && A.pending > v) {
              p.adler = V(p.adler, A.pending_buf, A.pending - v, v);
            }
            if (B === 0) {
              A.gzindex = 0;
              A.status = 91;
            }
          } else {
            A.status = 91;
          }
        }
        if (A.status === 91) {
          if (A.gzhead.comment) {
            v = A.pending;
            do {
              if (A.pending === A.pending_buf_size && (A.gzhead.hcrc && A.pending > v && (p.adler = V(p.adler, A.pending_buf, A.pending - v, v)), q(p), v = A.pending, A.pending === A.pending_buf_size)) {
                B = 1;
                break;
              }
              B = A.gzindex < A.gzhead.comment.length ? A.gzhead.comment.charCodeAt(A.gzindex++) & 255 : 0;
              l(A, B);
            } while (B !== 0);
            if (A.gzhead.hcrc && A.pending > v) {
              p.adler = V(p.adler, A.pending_buf, A.pending - v, v);
            }
            if (B === 0) {
              A.status = 103;
            }
          } else {
            A.status = 103;
          }
        }
        if (A.status === 103) {
          if (A.gzhead.hcrc) {
            if (A.pending + 2 > A.pending_buf_size) {
              q(p);
            }
            if (A.pending + 2 <= A.pending_buf_size) {
              l(A, p.adler & 255);
              l(A, p.adler >> 8 & 255);
              p.adler = 0;
              A.status = Y;
            }
          } else {
            A.status = Y;
          }
        }
        if (A.pending !== 0) {
          q(p);
          if (p.avail_out === 0) {
            A.last_flush = -1;
            return vb;
          }
        } else if (p.avail_in === 0 && (u << 1) - (u > 4 ? 9 : 0) <= (t << 1) - (t > 4 ? 9 : 0) && u !== ib) {
          return O(p, -5);
        }
        if (A.status === 666 && p.avail_in !== 0) {
          return O(p, -5);
        }
        if (p.avail_in !== 0 || A.lookahead !== 0 || u !== la && A.status !== 666) {
          if (A.strategy === 2) {
            a: {
              var E;
              while (true) {
                if (A.lookahead === 0 && (x(A), A.lookahead === 0)) {
                  if (u === la) {
                    var H = ja;
                    break a;
                  }
                  break;
                }
                A.match_length = 0;
                E = Rc._tr_tally(A, 0, A.window[A.strstart]);
                A.lookahead--;
                A.strstart++;
                if (E && (xa(A, false), A.strm.avail_out === 0)) {
                  H = ja;
                  break a;
                }
              }
              A.insert = 0;
              H = u === ib ? (xa(A, true), A.strm.avail_out === 0 ? Ob : Ec) : A.last_lit && (xa(A, false), A.strm.avail_out === 0) ? ja : Bd;
            }
          } else if (A.strategy === 3) {
            a: {
              var I;
              var ha;
              for (E = A.window;;) {
                if (A.lookahead <= sb) {
                  x(A);
                  if (A.lookahead <= sb && u === la) {
                    H = ja;
                    break a;
                  }
                  if (A.lookahead === 0) {
                    break;
                  }
                }
                A.match_length = 0;
                if (A.lookahead >= M && A.strstart > 0 && (ha = A.strstart - 1, I = E[ha], I === E[++ha] && I === E[++ha] && I === E[++ha])) {
                  for (t = A.strstart + sb; I === E[++ha] && I === E[++ha] && I === E[++ha] && I === E[++ha] && I === E[++ha] && I === E[++ha] && I === E[++ha] && I === E[++ha] && ha < t;);
                  A.match_length = sb - (t - ha);
                  if (A.match_length > A.lookahead) {
                    A.match_length = A.lookahead;
                  }
                }
                if (A.match_length >= M) {
                  H = Rc._tr_tally(A, 1, A.match_length - M);
                  A.lookahead -= A.match_length;
                  A.strstart += A.match_length;
                  A.match_length = 0;
                } else {
                  H = Rc._tr_tally(A, 0, A.window[A.strstart]);
                  A.lookahead--;
                  A.strstart++;
                }
                if (H && (xa(A, false), A.strm.avail_out === 0)) {
                  H = ja;
                  break a;
                }
              }
              A.insert = 0;
              H = u === ib ? (xa(A, true), A.strm.avail_out === 0 ? Ob : Ec) : A.last_lit && (xa(A, false), A.strm.avail_out === 0) ? ja : Bd;
            }
          } else {
            H = Pb[A.level].func(A, u);
          }
          if (H === Ob || H === Ec) {
            A.status = 666;
          }
          if (H === ja || H === Ob) {
            if (p.avail_out === 0) {
              A.last_flush = -1;
            }
            return vb;
          }
          if (H === Bd && (u === 1 ? Rc._tr_align(A) : u !== 5 && (Rc._tr_stored_block(A, 0, 0, false), u === 3 && (P(A.head), A.lookahead === 0 && (A.strstart = 0, A.block_start = 0, A.insert = 0))), q(p), p.avail_out === 0)) {
            A.last_flush = -1;
            return vb;
          }
        }
        if (u !== ib) {
          return vb;
        } else if (A.wrap <= 0) {
          return 1;
        } else {
          if (A.wrap === 2) {
            l(A, p.adler & 255);
            l(A, p.adler >> 8 & 255);
            l(A, p.adler >> 16 & 255);
            l(A, p.adler >> 24 & 255);
            l(A, p.total_in & 255);
            l(A, p.total_in >> 8 & 255);
            l(A, p.total_in >> 16 & 255);
            l(A, p.total_in >> 24 & 255);
          } else {
            h(A, p.adler >>> 16);
            h(A, p.adler & 65535);
          }
          q(p);
          if (A.wrap > 0) {
            A.wrap = -A.wrap;
          }
          if (A.pending !== 0) {
            return vb;
          } else {
            return 1;
          }
        }
      };
      E.deflateEnd = function (h) {
        var l;
        if (h && h.state) {
          l = h.state.status;
          if (l !== Da && l !== 69 && l !== 73 && l !== 91 && l !== 103 && l !== Y && l !== 666) {
            return O(h, Oa);
          } else {
            h.state = null;
            if (l === Y) {
              return O(h, -3);
            } else {
              return vb;
            }
          }
        } else {
          return Oa;
        }
      };
      E.deflateSetDictionary = function (h, l) {
        var p;
        var q;
        var t;
        var u = l.length;
        if (!h || !h.state || (p = h.state, q = p.wrap, q === 2 || q === 1 && p.status !== Da || p.lookahead)) {
          return Oa;
        }
        if (q === 1) {
          h.adler = jb(h.adler, l, u, 0);
        }
        p.wrap = 0;
        if (u >= p.w_size) {
          if (q === 0) {
            P(p.head);
            p.strstart = 0;
            p.block_start = 0;
            p.insert = 0;
          }
          t = new ua.Buf8(p.w_size);
          ua.arraySet(t, l, u - p.w_size, p.w_size, 0);
          l = t;
          u = p.w_size;
        }
        t = h.avail_in;
        var v = h.next_in;
        var B = h.input;
        h.avail_in = u;
        h.next_in = 0;
        h.input = l;
        for (x(p); p.lookahead >= M;) {
          l = p.strstart;
          u = p.lookahead - (M - 1);
          do {
            p.ins_h = (p.ins_h << p.hash_shift ^ p.window[l + M - 1]) & p.hash_mask;
            p.prev[l & p.w_mask] = p.head[p.ins_h];
            p.head[p.ins_h] = l;
            l++;
          } while (--u);
          p.strstart = l;
          p.lookahead = M - 1;
          x(p);
        }
        p.strstart += p.lookahead;
        p.block_start = p.strstart;
        p.insert = p.lookahead;
        p.lookahead = 0;
        p.match_length = p.prev_length = M - 1;
        p.match_available = 0;
        h.next_in = v;
        h.input = B;
        h.avail_in = t;
        p.wrap = q;
        return vb;
      };
      E.deflateInfo = "pako deflate (from Nodeca project)";
    }, {
      "../utils/common": 3,
      "./adler32": 5,
      "./crc32": 7,
      "./messages": 13,
      "./trees": 14
    }],
    9: [function (v, I, E) {
      I.exports = function () {
        this.os = this.xflags = this.time = this.text = 0;
        this.extra = null;
        this.extra_len = 0;
        this.comment = this.name = "";
        this.hcrc = 0;
        this.done = false;
      };
    }, {}],
    10: [function (v, I, E) {
      I.exports = function (v, E) {
        var q;
        var I;
        var l;
        var h = v.state;
        var p = v.next_in;
        var x = v.input;
        var u = p + (v.avail_in - 5);
        var O = v.next_out;
        var P = v.output;
        E = O - (E - v.avail_out);
        var ya = O + (v.avail_out - 257);
        var rb = h.dmax;
        var Ld = h.wsize;
        var Hc = h.whave;
        var ua = h.wnext;
        var Rc = h.window;
        var jb = h.hold;
        var V = h.bits;
        var qb = h.lencode;
        var la = h.distcode;
        var ib = (1 << h.lenbits) - 1;
        var vb = (1 << h.distbits) - 1;
        a: do {
          if (V < 15) {
            jb += x[p++] << V;
            V += 8;
            jb += x[p++] << V;
            V += 8;
          }
          var Oa = qb[jb & ib];
          b: while (true) {
            q = Oa >>> 24;
            jb >>>= q;
            V -= q;
            q = Oa >>> 16 & 255;
            if (q === 0) {
              P[O++] = Oa & 65535;
            } else {
              if (!(q & 16)) {
                if ((q & 64) === 0) {
                  Oa = qb[(Oa & 65535) + (jb & (1 << q) - 1)];
                  continue b;
                }
                if (q & 32) {
                  h.mode = 12;
                  break a;
                }
                v.msg = "invalid literal/length code";
                h.mode = 30;
                break a;
              }
              var ab = Oa & 65535;
              if (q &= 15) {
                if (V < q) {
                  jb += x[p++] << V;
                  V += 8;
                }
                ab += jb & (1 << q) - 1;
                jb >>>= q;
                V -= q;
              }
              if (V < 15) {
                jb += x[p++] << V;
                V += 8;
                jb += x[p++] << V;
                V += 8;
              }
              Oa = la[jb & vb];
              c: while (true) {
                q = Oa >>> 24;
                jb >>>= q;
                V -= q;
                q = Oa >>> 16 & 255;
                if (!(q & 16)) {
                  if ((q & 64) === 0) {
                    Oa = la[(Oa & 65535) + (jb & (1 << q) - 1)];
                    continue c;
                  }
                  v.msg = "invalid distance code";
                  h.mode = 30;
                  break a;
                }
                I = Oa & 65535;
                q &= 15;
                if (V < q) {
                  jb += x[p++] << V;
                  V += 8;
                  if (V < q) {
                    jb += x[p++] << V;
                    V += 8;
                  }
                }
                I += jb & (1 << q) - 1;
                if (I > rb) {
                  v.msg = "invalid distance too far back";
                  h.mode = 30;
                  break a;
                }
                jb >>>= q;
                V -= q;
                q = O - E;
                if (I > q) {
                  q = I - q;
                  if (q > Hc && h.sane) {
                    v.msg = "invalid distance too far back";
                    h.mode = 30;
                    break a;
                  }
                  Oa = 0;
                  l = Rc;
                  if (ua === 0) {
                    Oa += Ld - q;
                    if (q < ab) {
                      ab -= q;
                      do {
                        P[O++] = Rc[Oa++];
                      } while (--q);
                      Oa = O - I;
                      l = P;
                    }
                  } else if (ua < q) {
                    Oa += Ld + ua - q;
                    q -= ua;
                    if (q < ab) {
                      ab -= q;
                      do {
                        P[O++] = Rc[Oa++];
                      } while (--q);
                      Oa = 0;
                      if (ua < ab) {
                        q = ua;
                        ab -= q;
                        do {
                          P[O++] = Rc[Oa++];
                        } while (--q);
                        Oa = O - I;
                        l = P;
                      }
                    }
                  } else {
                    Oa += ua - q;
                    if (q < ab) {
                      ab -= q;
                      do {
                        P[O++] = Rc[Oa++];
                      } while (--q);
                      Oa = O - I;
                      l = P;
                    }
                  }
                  while (ab > 2) {
                    P[O++] = l[Oa++];
                    P[O++] = l[Oa++];
                    P[O++] = l[Oa++];
                    ab -= 3;
                  }
                  if (ab) {
                    P[O++] = l[Oa++];
                    if (ab > 1) {
                      P[O++] = l[Oa++];
                    }
                  }
                } else {
                  Oa = O - I;
                  do {
                    P[O++] = P[Oa++];
                    P[O++] = P[Oa++];
                    P[O++] = P[Oa++];
                    ab -= 3;
                  } while (ab > 2);
                  if (ab) {
                    P[O++] = P[Oa++];
                    if (ab > 1) {
                      P[O++] = P[Oa++];
                    }
                  }
                }
                break;
              }
            }
            break;
          }
        } while (p < u && O < ya);
        ab = V >> 3;
        p -= ab;
        V -= ab << 3;
        v.next_in = p;
        v.next_out = O;
        v.avail_in = p < u ? 5 + (u - p) : 5 - (p - u);
        v.avail_out = O < ya ? 257 + (ya - O) : 257 - (O - ya);
        h.hold = jb & (1 << V) - 1;
        h.bits = V;
      };
    }, {}],
    11: [function (v, I, E) {
      function O(h) {
        return (h >>> 24 & 255) + (h >>> 8 & 65280) + ((h & 65280) << 8) + ((h & 255) << 24);
      }
      function P() {
        this.mode = 0;
        this.last = false;
        this.wrap = 0;
        this.havedict = false;
        this.total = this.check = this.dmax = this.flags = 0;
        this.head = null;
        this.wnext = this.whave = this.wsize = this.wbits = 0;
        this.window = null;
        this.extra = this.offset = this.length = this.bits = this.hold = 0;
        this.distcode = this.lencode = null;
        this.have = this.ndist = this.nlen = this.ncode = this.distbits = this.lenbits = 0;
        this.next = null;
        this.lens = new ha.Buf16(320);
        this.work = new ha.Buf16(288);
        this.distdyn = this.lendyn = null;
        this.was = this.back = this.sane = 0;
      }
      function q(h) {
        var l;
        if (h && h.state) {
          l = h.state;
          h.total_in = h.total_out = l.total = 0;
          h.msg = "";
          if (l.wrap) {
            h.adler = l.wrap & 1;
          }
          l.mode = Rc;
          l.last = 0;
          l.havedict = 0;
          l.dmax = 32768;
          l.head = null;
          l.hold = 0;
          l.bits = 0;
          l.lencode = l.lendyn = new ha.Buf32(jb);
          l.distcode = l.distdyn = new ha.Buf32(V);
          l.sane = 1;
          l.back = -1;
          return Hc;
        } else {
          return ua;
        }
      }
      function xa(h) {
        var l;
        if (h && h.state) {
          l = h.state;
          l.wsize = 0;
          l.whave = 0;
          l.wnext = 0;
          return q(h);
        } else {
          return ua;
        }
      }
      function l(h, l) {
        var p;
        var q;
        if (h && h.state) {
          q = h.state;
          if (l < 0) {
            p = 0;
            l = -l;
          } else {
            p = (l >> 4) + 1;
            if (l < 48) {
              l &= 15;
            }
          }
          if (l && (l < 8 || l > 15)) {
            return ua;
          } else {
            if (q.window !== null && q.wbits !== l) {
              q.window = null;
            }
            q.wrap = p;
            q.wbits = l;
            return xa(h);
          }
        } else {
          return ua;
        }
      }
      function h(h, p) {
        var q;
        var u;
        if (h) {
          u = new P();
          h.state = u;
          u.window = null;
          q = l(h, p);
          if (q !== Hc) {
            h.state = null;
          }
          return q;
        } else {
          return ua;
        }
      }
      function p(h, l, p, q) {
        var u;
        h = h.state;
        if (h.window === null) {
          h.wsize = 1 << h.wbits;
          h.wnext = 0;
          h.whave = 0;
          h.window = new ha.Buf8(h.wsize);
        }
        if (q >= h.wsize) {
          ha.arraySet(h.window, l, p - h.wsize, h.wsize, 0);
          h.wnext = 0;
          h.whave = h.wsize;
        } else {
          u = h.wsize - h.wnext;
          if (u > q) {
            u = q;
          }
          ha.arraySet(h.window, l, p - q, u, h.wnext);
          q -= u;
          if (q) {
            ha.arraySet(h.window, l, p - q, q, 0);
            h.wnext = q;
            h.whave = h.wsize;
          } else {
            h.wnext += u;
            if (h.wnext === h.wsize) {
              h.wnext = 0;
            }
            if (h.whave < h.wsize) {
              h.whave += u;
            }
          }
        }
        return 0;
      }
      var x;
      var u;
      var ha = v("../utils/common");
      var Qa = v("./adler32");
      var ya = v("./crc32");
      var rb = v("./inffast");
      var Ld = v("./inftrees");
      var Hc = 0;
      var ua = -2;
      var Rc = 1;
      var jb = 852;
      var V = 592;
      var qb = true;
      E.inflateReset = xa;
      E.inflateReset2 = l;
      E.inflateResetKeep = q;
      E.inflateInit = function (l) {
        return h(l, 15);
      };
      E.inflateInit2 = h;
      E.inflate = function (h, l) {
        var q;
        var v;
        var E;
        var I;
        var P;
        var V;
        var la;
        var xa = 0;
        var ib = new ha.Buf8(4);
        var sa = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
        if (!h || !h.state || !h.output || !h.input && h.avail_in !== 0) {
          return ua;
        }
        var B = h.state;
        if (B.mode === 12) {
          B.mode = 13;
        }
        var Ea = h.next_out;
        var jb = h.output;
        var M = h.avail_out;
        var sb = h.next_in;
        var lb = h.input;
        var Da = h.avail_in;
        var Y = B.hold;
        var ja = B.bits;
        var Bd = Da;
        var Ob = M;
        var Ec = Hc;
        a: while (true) {
          switch (B.mode) {
            case Rc:
              if (B.wrap === 0) {
                B.mode = 13;
                break;
              }
              while (ja < 16) {
                if (Da === 0) {
                  break a;
                }
                Da--;
                Y += lb[sb++] << ja;
                ja += 8;
              }
              if (B.wrap & 2 && Y === 35615) {
                B.check = 0;
                ib[0] = Y & 255;
                ib[1] = Y >>> 8 & 255;
                B.check = ya(B.check, ib, 2, 0);
                ja = Y = 0;
                B.mode = 2;
                break;
              }
              B.flags = 0;
              if (B.head) {
                B.head.done = false;
              }
              if (!(B.wrap & 1) || (((Y & 255) << 8) + (Y >> 8)) % 31) {
                h.msg = "incorrect header check";
                B.mode = 30;
                break;
              }
              if ((Y & 15) !== 8) {
                h.msg = "unknown compression method";
                B.mode = 30;
                break;
              }
              Y >>>= 4;
              ja -= 4;
              V = (Y & 15) + 8;
              if (B.wbits === 0) {
                B.wbits = V;
              } else if (V > B.wbits) {
                h.msg = "invalid window size";
                B.mode = 30;
                break;
              }
              B.dmax = 1 << V;
              h.adler = B.check = 1;
              B.mode = Y & 512 ? 10 : 12;
              ja = Y = 0;
              break;
            case 2:
              while (ja < 16) {
                if (Da === 0) {
                  break a;
                }
                Da--;
                Y += lb[sb++] << ja;
                ja += 8;
              }
              B.flags = Y;
              if ((B.flags & 255) !== 8) {
                h.msg = "unknown compression method";
                B.mode = 30;
                break;
              }
              if (B.flags & 57344) {
                h.msg = "unknown header flags set";
                B.mode = 30;
                break;
              }
              if (B.head) {
                B.head.text = Y >> 8 & 1;
              }
              if (B.flags & 512) {
                ib[0] = Y & 255;
                ib[1] = Y >>> 8 & 255;
                B.check = ya(B.check, ib, 2, 0);
              }
              ja = Y = 0;
              B.mode = 3;
            case 3:
              while (ja < 32) {
                if (Da === 0) {
                  break a;
                }
                Da--;
                Y += lb[sb++] << ja;
                ja += 8;
              }
              if (B.head) {
                B.head.time = Y;
              }
              if (B.flags & 512) {
                ib[0] = Y & 255;
                ib[1] = Y >>> 8 & 255;
                ib[2] = Y >>> 16 & 255;
                ib[3] = Y >>> 24 & 255;
                B.check = ya(B.check, ib, 4, 0);
              }
              ja = Y = 0;
              B.mode = 4;
            case 4:
              while (ja < 16) {
                if (Da === 0) {
                  break a;
                }
                Da--;
                Y += lb[sb++] << ja;
                ja += 8;
              }
              if (B.head) {
                B.head.xflags = Y & 255;
                B.head.os = Y >> 8;
              }
              if (B.flags & 512) {
                ib[0] = Y & 255;
                ib[1] = Y >>> 8 & 255;
                B.check = ya(B.check, ib, 2, 0);
              }
              ja = Y = 0;
              B.mode = 5;
            case 5:
              if (B.flags & 1024) {
                while (ja < 16) {
                  if (Da === 0) {
                    break a;
                  }
                  Da--;
                  Y += lb[sb++] << ja;
                  ja += 8;
                }
                B.length = Y;
                if (B.head) {
                  B.head.extra_len = Y;
                }
                if (B.flags & 512) {
                  ib[0] = Y & 255;
                  ib[1] = Y >>> 8 & 255;
                  B.check = ya(B.check, ib, 2, 0);
                }
                ja = Y = 0;
              } else if (B.head) {
                B.head.extra = null;
              }
              B.mode = 6;
            case 6:
              if (B.flags & 1024 && (q = B.length, q > Da && (q = Da), q && (B.head && (V = B.head.extra_len - B.length, B.head.extra ||= Array(B.head.extra_len), ha.arraySet(B.head.extra, lb, sb, q, V)), B.flags & 512 && (B.check = ya(B.check, lb, q, sb)), Da -= q, sb += q, B.length -= q), B.length)) {
                break a;
              }
              B.length = 0;
              B.mode = 7;
            case 7:
              if (B.flags & 2048) {
                if (Da === 0) {
                  break a;
                }
                q = 0;
                do {
                  V = lb[sb + q++];
                  if (B.head && V && B.length < 65536) {
                    B.head.name += String.fromCharCode(V);
                  }
                } while (V && q < Da);
                if (B.flags & 512) {
                  B.check = ya(B.check, lb, q, sb);
                }
                Da -= q;
                sb += q;
                if (V) {
                  break a;
                }
              } else if (B.head) {
                B.head.name = null;
              }
              B.length = 0;
              B.mode = 8;
            case 8:
              if (B.flags & 4096) {
                if (Da === 0) {
                  break a;
                }
                q = 0;
                do {
                  V = lb[sb + q++];
                  if (B.head && V && B.length < 65536) {
                    B.head.comment += String.fromCharCode(V);
                  }
                } while (V && q < Da);
                if (B.flags & 512) {
                  B.check = ya(B.check, lb, q, sb);
                }
                Da -= q;
                sb += q;
                if (V) {
                  break a;
                }
              } else if (B.head) {
                B.head.comment = null;
              }
              B.mode = 9;
            case 9:
              if (B.flags & 512) {
                while (ja < 16) {
                  if (Da === 0) {
                    break a;
                  }
                  Da--;
                  Y += lb[sb++] << ja;
                  ja += 8;
                }
                if (Y !== (B.check & 65535)) {
                  h.msg = "header crc mismatch";
                  B.mode = 30;
                  break;
                }
                ja = Y = 0;
              }
              if (B.head) {
                B.head.hcrc = B.flags >> 9 & 1;
                B.head.done = true;
              }
              h.adler = B.check = 0;
              B.mode = 12;
              break;
            case 10:
              while (ja < 32) {
                if (Da === 0) {
                  break a;
                }
                Da--;
                Y += lb[sb++] << ja;
                ja += 8;
              }
              h.adler = B.check = O(Y);
              ja = Y = 0;
              B.mode = 11;
            case 11:
              if (B.havedict === 0) {
                h.next_out = Ea;
                h.avail_out = M;
                h.next_in = sb;
                h.avail_in = Da;
                B.hold = Y;
                B.bits = ja;
                return 2;
              }
              h.adler = B.check = 1;
              B.mode = 12;
            case 12:
              if (l === 5 || l === 6) {
                break a;
              }
            case 13:
              if (B.last) {
                Y >>>= ja & 7;
                ja -= ja & 7;
                B.mode = 27;
                break;
              }
              while (ja < 3) {
                if (Da === 0) {
                  break a;
                }
                Da--;
                Y += lb[sb++] << ja;
                ja += 8;
              }
              B.last = Y & 1;
              Y >>>= 1;
              --ja;
              switch (Y & 3) {
                case 0:
                  B.mode = 14;
                  break;
                case 1:
                  var Pb = B;
                  if (qb) {
                    x = new ha.Buf32(512);
                    u = new ha.Buf32(32);
                    for (E = 0; E < 144;) {
                      Pb.lens[E++] = 8;
                    }
                    while (E < 256) {
                      Pb.lens[E++] = 9;
                    }
                    while (E < 280) {
                      Pb.lens[E++] = 7;
                    }
                    while (E < 288) {
                      Pb.lens[E++] = 8;
                    }
                    Ld(1, Pb.lens, 0, 288, x, 0, Pb.work, {
                      bits: 9
                    });
                    for (E = 0; E < 32;) {
                      Pb.lens[E++] = 5;
                    }
                    Ld(2, Pb.lens, 0, 32, u, 0, Pb.work, {
                      bits: 5
                    });
                    qb = false;
                  }
                  Pb.lencode = x;
                  Pb.lenbits = 9;
                  Pb.distcode = u;
                  Pb.distbits = 5;
                  B.mode = 20;
                  if (l === 6) {
                    Y >>>= 2;
                    ja -= 2;
                    break a;
                  }
                  break;
                case 2:
                  B.mode = 17;
                  break;
                case 3:
                  h.msg = "invalid block type";
                  B.mode = 30;
              }
              Y >>>= 2;
              ja -= 2;
              break;
            case 14:
              Y >>>= ja & 7;
              for (ja -= ja & 7; ja < 32;) {
                if (Da === 0) {
                  break a;
                }
                Da--;
                Y += lb[sb++] << ja;
                ja += 8;
              }
              if ((Y & 65535) !== (Y >>> 16 ^ 65535)) {
                h.msg = "invalid stored block lengths";
                B.mode = 30;
                break;
              }
              B.length = Y & 65535;
              Y = 0;
              ja = 0;
              B.mode = 15;
              if (l === 6) {
                break a;
              }
            case 15:
              B.mode = 16;
            case 16:
              if (q = B.length) {
                if (q > Da) {
                  q = Da;
                }
                if (q > M) {
                  q = M;
                }
                if (q === 0) {
                  break a;
                }
                ha.arraySet(jb, lb, sb, q, Ea);
                Da -= q;
                sb += q;
                M -= q;
                Ea += q;
                B.length -= q;
                break;
              }
              B.mode = 12;
              break;
            case 17:
              while (ja < 14) {
                if (Da === 0) {
                  break a;
                }
                Da--;
                Y += lb[sb++] << ja;
                ja += 8;
              }
              B.nlen = (Y & 31) + 257;
              Y >>>= 5;
              ja -= 5;
              B.ndist = (Y & 31) + 1;
              Y >>>= 5;
              ja -= 5;
              B.ncode = (Y & 15) + 4;
              Y >>>= 4;
              ja -= 4;
              if (B.nlen > 286 || B.ndist > 30) {
                h.msg = "too many length or distance symbols";
                B.mode = 30;
                break;
              }
              B.have = 0;
              B.mode = 18;
            case 18:
              while (B.have < B.ncode) {
                while (ja < 3) {
                  if (Da === 0) {
                    break a;
                  }
                  Da--;
                  Y += lb[sb++] << ja;
                  ja += 8;
                }
                B.lens[sa[B.have++]] = Y & 7;
                Y >>>= 3;
                ja -= 3;
              }
              while (B.have < 19) {
                B.lens[sa[B.have++]] = 0;
              }
              B.lencode = B.lendyn;
              B.lenbits = 7;
              la = {
                bits: B.lenbits
              };
              Ec = Ld(0, B.lens, 0, 19, B.lencode, 0, B.work, la);
              B.lenbits = la.bits;
              if (Ec) {
                h.msg = "invalid code lengths set";
                B.mode = 30;
                break;
              }
              B.have = 0;
              B.mode = 19;
            case 19:
              while (B.have < B.nlen + B.ndist) {
                while (xa = B.lencode[Y & (1 << B.lenbits) - 1], I = xa >>> 24, Pb = xa & 65535, !(I <= ja)) {
                  if (Da === 0) {
                    break a;
                  }
                  Da--;
                  Y += lb[sb++] << ja;
                  ja += 8;
                }
                if (Pb < 16) {
                  Y >>>= I;
                  ja -= I;
                  B.lens[B.have++] = Pb;
                } else {
                  if (Pb === 16) {
                    for (E = I + 2; ja < E;) {
                      if (Da === 0) {
                        break a;
                      }
                      Da--;
                      Y += lb[sb++] << ja;
                      ja += 8;
                    }
                    Y >>>= I;
                    ja -= I;
                    if (B.have === 0) {
                      h.msg = "invalid bit length repeat";
                      B.mode = 30;
                      break;
                    }
                    V = B.lens[B.have - 1];
                    q = 3 + (Y & 3);
                    Y >>>= 2;
                    ja -= 2;
                  } else if (Pb === 17) {
                    for (E = I + 3; ja < E;) {
                      if (Da === 0) {
                        break a;
                      }
                      Da--;
                      Y += lb[sb++] << ja;
                      ja += 8;
                    }
                    Y >>>= I;
                    ja -= I;
                    V = 0;
                    q = 3 + (Y & 7);
                    Y >>>= 3;
                    ja -= 3;
                  } else {
                    for (E = I + 7; ja < E;) {
                      if (Da === 0) {
                        break a;
                      }
                      Da--;
                      Y += lb[sb++] << ja;
                      ja += 8;
                    }
                    Y >>>= I;
                    ja -= I;
                    V = 0;
                    q = 11 + (Y & 127);
                    Y >>>= 7;
                    ja -= 7;
                  }
                  if (B.have + q > B.nlen + B.ndist) {
                    h.msg = "invalid bit length repeat";
                    B.mode = 30;
                    break;
                  }
                  while (q--) {
                    B.lens[B.have++] = V;
                  }
                }
              }
              if (B.mode === 30) {
                break;
              }
              if (B.lens[256] === 0) {
                h.msg = "invalid code -- missing end-of-block";
                B.mode = 30;
                break;
              }
              B.lenbits = 9;
              la = {
                bits: B.lenbits
              };
              Ec = Ld(1, B.lens, 0, B.nlen, B.lencode, 0, B.work, la);
              B.lenbits = la.bits;
              if (Ec) {
                h.msg = "invalid literal/lengths set";
                B.mode = 30;
                break;
              }
              B.distbits = 6;
              B.distcode = B.distdyn;
              la = {
                bits: B.distbits
              };
              Ec = Ld(2, B.lens, B.nlen, B.ndist, B.distcode, 0, B.work, la);
              B.distbits = la.bits;
              if (Ec) {
                h.msg = "invalid distances set";
                B.mode = 30;
                break;
              }
              B.mode = 20;
              if (l === 6) {
                break a;
              }
            case 20:
              B.mode = 21;
            case 21:
              if (Da >= 6 && M >= 258) {
                h.next_out = Ea;
                h.avail_out = M;
                h.next_in = sb;
                h.avail_in = Da;
                B.hold = Y;
                B.bits = ja;
                rb(h, Ob);
                Ea = h.next_out;
                jb = h.output;
                M = h.avail_out;
                sb = h.next_in;
                lb = h.input;
                Da = h.avail_in;
                Y = B.hold;
                ja = B.bits;
                if (B.mode === 12) {
                  B.back = -1;
                }
                break;
              }
              for (B.back = 0; xa = B.lencode[Y & (1 << B.lenbits) - 1], I = xa >>> 24, E = xa >>> 16 & 255, Pb = xa & 65535, !(I <= ja);) {
                if (Da === 0) {
                  break a;
                }
                Da--;
                Y += lb[sb++] << ja;
                ja += 8;
              }
              if (E && (E & 240) === 0) {
                var t = I;
                var Ad = E;
                for (P = Pb; xa = B.lencode[P + ((Y & (1 << t + Ad) - 1) >> t)], I = xa >>> 24, E = xa >>> 16 & 255, Pb = xa & 65535, !(t + I <= ja);) {
                  if (Da === 0) {
                    break a;
                  }
                  Da--;
                  Y += lb[sb++] << ja;
                  ja += 8;
                }
                Y >>>= t;
                ja -= t;
                B.back += t;
              }
              Y >>>= I;
              ja -= I;
              B.back += I;
              B.length = Pb;
              if (E === 0) {
                B.mode = 26;
                break;
              }
              if (E & 32) {
                B.back = -1;
                B.mode = 12;
                break;
              }
              if (E & 64) {
                h.msg = "invalid literal/length code";
                B.mode = 30;
                break;
              }
              B.extra = E & 15;
              B.mode = 22;
            case 22:
              if (B.extra) {
                for (E = B.extra; ja < E;) {
                  if (Da === 0) {
                    break a;
                  }
                  Da--;
                  Y += lb[sb++] << ja;
                  ja += 8;
                }
                B.length += Y & (1 << B.extra) - 1;
                Y >>>= B.extra;
                ja -= B.extra;
                B.back += B.extra;
              }
              B.was = B.length;
              B.mode = 23;
            case 23:
              while (xa = B.distcode[Y & (1 << B.distbits) - 1], I = xa >>> 24, E = xa >>> 16 & 255, Pb = xa & 65535, !(I <= ja)) {
                if (Da === 0) {
                  break a;
                }
                Da--;
                Y += lb[sb++] << ja;
                ja += 8;
              }
              if ((E & 240) === 0) {
                t = I;
                Ad = E;
                for (P = Pb; xa = B.distcode[P + ((Y & (1 << t + Ad) - 1) >> t)], I = xa >>> 24, E = xa >>> 16 & 255, Pb = xa & 65535, !(t + I <= ja);) {
                  if (Da === 0) {
                    break a;
                  }
                  Da--;
                  Y += lb[sb++] << ja;
                  ja += 8;
                }
                Y >>>= t;
                ja -= t;
                B.back += t;
              }
              Y >>>= I;
              ja -= I;
              B.back += I;
              if (E & 64) {
                h.msg = "invalid distance code";
                B.mode = 30;
                break;
              }
              B.offset = Pb;
              B.extra = E & 15;
              B.mode = 24;
            case 24:
              if (B.extra) {
                for (E = B.extra; ja < E;) {
                  if (Da === 0) {
                    break a;
                  }
                  Da--;
                  Y += lb[sb++] << ja;
                  ja += 8;
                }
                B.offset += Y & (1 << B.extra) - 1;
                Y >>>= B.extra;
                ja -= B.extra;
                B.back += B.extra;
              }
              if (B.offset > B.dmax) {
                h.msg = "invalid distance too far back";
                B.mode = 30;
                break;
              }
              B.mode = 25;
            case 25:
              if (M === 0) {
                break a;
              }
              q = Ob - M;
              if (B.offset > q) {
                q = B.offset - q;
                if (q > B.whave && B.sane) {
                  h.msg = "invalid distance too far back";
                  B.mode = 30;
                  break;
                }
                if (q > B.wnext) {
                  q -= B.wnext;
                  v = B.wsize - q;
                } else {
                  v = B.wnext - q;
                }
                if (q > B.length) {
                  q = B.length;
                }
                E = B.window;
              } else {
                E = jb;
                v = Ea - B.offset;
                q = B.length;
              }
              if (q > M) {
                q = M;
              }
              M -= q;
              B.length -= q;
              do {
                jb[Ea++] = E[v++];
              } while (--q);
              if (B.length === 0) {
                B.mode = 21;
              }
              break;
            case 26:
              if (M === 0) {
                break a;
              }
              jb[Ea++] = B.length;
              M--;
              B.mode = 21;
              break;
            case 27:
              if (B.wrap) {
                while (ja < 32) {
                  if (Da === 0) {
                    break a;
                  }
                  Da--;
                  Y |= lb[sb++] << ja;
                  ja += 8;
                }
                Ob -= M;
                h.total_out += Ob;
                B.total += Ob;
                if (Ob) {
                  h.adler = B.check = B.flags ? ya(B.check, jb, Ob, Ea - Ob) : Qa(B.check, jb, Ob, Ea - Ob);
                }
                Ob = M;
                if ((B.flags ? Y : O(Y)) !== B.check) {
                  h.msg = "incorrect data check";
                  B.mode = 30;
                  break;
                }
                ja = Y = 0;
              }
              B.mode = 28;
            case 28:
              if (B.wrap && B.flags) {
                while (ja < 32) {
                  if (Da === 0) {
                    break a;
                  }
                  Da--;
                  Y += lb[sb++] << ja;
                  ja += 8;
                }
                if (Y !== (B.total & -1)) {
                  h.msg = "incorrect length check";
                  B.mode = 30;
                  break;
                }
                ja = Y = 0;
              }
              B.mode = 29;
            case 29:
              Ec = 1;
              break a;
            case 30:
              Ec = -3;
              break a;
            case 31:
              return -4;
            default:
              return ua;
          }
        }
        h.next_out = Ea;
        h.avail_out = M;
        h.next_in = sb;
        h.avail_in = Da;
        B.hold = Y;
        B.bits = ja;
        if ((B.wsize || Ob !== h.avail_out && B.mode < 30 && (B.mode < 27 || l !== 4)) && p(h, h.output, h.next_out, Ob - h.avail_out)) {
          B.mode = 31;
          return -4;
        } else {
          Bd -= h.avail_in;
          Ob -= h.avail_out;
          h.total_in += Bd;
          h.total_out += Ob;
          B.total += Ob;
          if (B.wrap && Ob) {
            h.adler = B.check = B.flags ? ya(B.check, jb, Ob, h.next_out - Ob) : Qa(B.check, jb, Ob, h.next_out - Ob);
          }
          h.data_type = B.bits + (B.last ? 64 : 0) + (B.mode === 12 ? 128 : 0) + (B.mode === 20 || B.mode === 15 ? 256 : 0);
          if ((Bd === 0 && Ob === 0 || l === 4) && Ec === Hc) {
            Ec = -5;
          }
          return Ec;
        }
      };
      E.inflateEnd = function (h) {
        if (!h || !h.state) {
          return ua;
        }
        var l = h.state;
        l.window &&= null;
        h.state = null;
        return Hc;
      };
      E.inflateGetHeader = function (h, l) {
        var p;
        if (h && h.state) {
          p = h.state;
          if ((p.wrap & 2) === 0) {
            return ua;
          } else {
            p.head = l;
            l.done = false;
            return Hc;
          }
        } else {
          return ua;
        }
      };
      E.inflateSetDictionary = function (h, l) {
        var q;
        var u;
        var v = l.length;
        if (h && h.state) {
          q = h.state;
          if (q.wrap !== 0 && q.mode !== 11) {
            return ua;
          } else if (q.mode === 11 && (u = 1, u = Qa(u, l, v, 0), u !== q.check)) {
            return -3;
          } else if (p(h, l, v, v)) {
            q.mode = 31;
            return -4;
          } else {
            q.havedict = 1;
            return Hc;
          }
        } else {
          return ua;
        }
      };
      E.inflateInfo = "pako inflate (from Nodeca project)";
    }, {
      "../utils/common": 3,
      "./adler32": 5,
      "./crc32": 7,
      "./inffast": 10,
      "./inftrees": 12
    }],
    12: [function (v, I, E) {
      var O = v("../utils/common");
      var P = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0];
      var q = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78];
      var xa = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0];
      var l = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
      I.exports = function (h, p, v, u, E, I, ya, rb) {
        var x;
        var ha;
        var ua;
        var Qa;
        var jb;
        var V;
        var qb = rb.bits;
        var la;
        var ib;
        var vb;
        var Oa;
        var ab;
        var Fa = 0;
        var tb;
        var wb = null;
        var $a = 0;
        var Ub = new O.Buf16(16);
        var ld = new O.Buf16(16);
        var sa = null;
        var B = 0;
        for (la = 0; la <= 15; la++) {
          Ub[la] = 0;
        }
        for (ib = 0; ib < u; ib++) {
          Ub[p[v + ib]]++;
        }
        var Ea = qb;
        for (vb = 15; vb >= 1 && Ub[vb] === 0; vb--);
        if (Ea > vb) {
          Ea = vb;
        }
        if (vb === 0) {
          E[I++] = 20971520;
          E[I++] = 20971520;
          rb.bits = 1;
          return 0;
        }
        for (qb = 1; qb < vb && Ub[qb] === 0; qb++);
        if (Ea < qb) {
          Ea = qb;
        }
        for (la = x = 1; la <= 15; la++) {
          x <<= 1;
          x -= Ub[la];
          if (x < 0) {
            return -1;
          }
        }
        if (x > 0 && (h === 0 || vb !== 1)) {
          return -1;
        }
        ld[1] = 0;
        for (la = 1; la < 15; la++) {
          ld[la + 1] = ld[la] + Ub[la];
        }
        for (ib = 0; ib < u; ib++) {
          if (p[v + ib] !== 0) {
            ya[ld[p[v + ib]]++] = ib;
          }
        }
        if (h === 0) {
          wb = sa = ya;
          Qa = 19;
        } else if (h === 1) {
          wb = P;
          $a -= 257;
          sa = q;
          B -= 257;
          Qa = 256;
        } else {
          wb = xa;
          sa = l;
          Qa = -1;
        }
        tb = 0;
        ib = 0;
        la = qb;
        ld = I;
        Oa = Ea;
        ab = 0;
        ua = -1;
        Fa = 1 << Ea;
        u = Fa - 1;
        if (h === 1 && Fa > 852 || h === 2 && Fa > 592) {
          return 1;
        }
        var sc = 0;
        while (true) {
          sc++;
          var M = la - ab;
          if (ya[ib] < Qa) {
            jb = 0;
            V = ya[ib];
          } else if (ya[ib] > Qa) {
            jb = sa[B + ya[ib]];
            V = wb[$a + ya[ib]];
          } else {
            jb = 96;
            V = 0;
          }
          x = 1 << la - ab;
          qb = ha = 1 << Oa;
          do {
            ha -= x;
            E[ld + (tb >> ab) + ha] = M << 24 | jb << 16 | V | 0;
          } while (ha !== 0);
          for (x = 1 << la - 1; tb & x;) {
            x >>= 1;
          }
          if (x !== 0) {
            tb &= x - 1;
            tb += x;
          } else {
            tb = 0;
          }
          ib++;
          if (--Ub[la] === 0) {
            if (la === vb) {
              break;
            }
            la = p[v + ya[ib]];
          }
          if (la > Ea && (tb & u) !== ua) {
            if (ab === 0) {
              ab = Ea;
            }
            ld += qb;
            Oa = la - ab;
            for (x = 1 << Oa; Oa + ab < vb && (x -= Ub[Oa + ab], !(x <= 0));) {
              Oa++;
              x <<= 1;
            }
            Fa += 1 << Oa;
            if (h === 1 && Fa > 852 || h === 2 && Fa > 592) {
              return 1;
            }
            ua = tb & u;
            E[ua] = Ea << 24 | Oa << 16 | ld - I | 0;
          }
        }
        if (tb !== 0) {
          E[ld + tb] = la - ab << 24 | 4194304;
        }
        rb.bits = Ea;
        return 0;
      };
    }, {
      "../utils/common": 3
    }],
    13: [function (v, I, E) {
      I.exports = {
        2: "need dictionary",
        1: "stream end",
        0: "",
        "-1": "file error",
        "-2": "stream error",
        "-3": "data error",
        "-4": "insufficient memory",
        "-5": "buffer error",
        "-6": "incompatible version"
      };
    }, {}],
    14: [function (v, I, E) {
      function O(h) {
        for (var l = h.length; --l >= 0;) {
          h[l] = 0;
        }
      }
      function P(h, l, p, q, t) {
        this.static_tree = h;
        this.extra_bits = l;
        this.extra_base = p;
        this.elems = q;
        this.max_length = t;
        this.has_stree = h && h.length;
      }
      function q(h, l) {
        this.dyn_tree = h;
        this.max_code = 0;
        this.stat_desc = l;
      }
      function xa(h, l) {
        h.pending_buf[h.pending++] = l & 255;
        h.pending_buf[h.pending++] = l >>> 8 & 255;
      }
      function l(h, l, p) {
        if (h.bi_valid > $a - p) {
          h.bi_buf |= l << h.bi_valid & 65535;
          xa(h, h.bi_buf);
          h.bi_buf = l >> $a - h.bi_valid;
          h.bi_valid += p - $a;
        } else {
          h.bi_buf |= l << h.bi_valid & 65535;
          h.bi_valid += p;
        }
      }
      function h(h, p, q) {
        l(h, q[p * 2], q[p * 2 + 1]);
      }
      function p(h, l) {
        var p = 0;
        do {
          p |= h & 1;
          h >>>= 1;
          p <<= 1;
        } while (--l > 0);
        return p >>> 1;
      }
      function x(h, l, q) {
        var t;
        var u = Array(wb + 1);
        var v = 0;
        for (t = 1; t <= wb; t++) {
          u[t] = v = v + q[t - 1] << 1;
        }
        for (q = 0; q <= l; q++) {
          t = h[q * 2 + 1];
          if (t !== 0) {
            h[q * 2] = p(u[t]++, t);
          }
        }
      }
      function u(h) {
        var l;
        for (l = 0; l < Oa; l++) {
          h.dyn_ltree[l * 2] = 0;
        }
        for (l = 0; l < ab; l++) {
          h.dyn_dtree[l * 2] = 0;
        }
        for (l = 0; l < Fa; l++) {
          h.bl_tree[l * 2] = 0;
        }
        h.dyn_ltree[Ub * 2] = 1;
        h.opt_len = h.static_len = 0;
        h.last_lit = h.matches = 0;
      }
      function ha(h) {
        if (h.bi_valid > 8) {
          xa(h, h.bi_buf);
        } else if (h.bi_valid > 0) {
          h.pending_buf[h.pending++] = h.bi_buf;
        }
        h.bi_buf = 0;
        h.bi_valid = 0;
      }
      function Qa(h, l, p, q) {
        var t = l * 2;
        var u = p * 2;
        return h[t] < h[u] || h[t] === h[u] && q[l] <= q[p];
      }
      function ya(h, l, p) {
        for (var q = h.heap[p], t = p << 1; t <= h.heap_len && (t < h.heap_len && Qa(l, h.heap[t + 1], h.heap[t], h.depth) && t++, !Qa(l, q, h.heap[t], h.depth));) {
          h.heap[p] = h.heap[t];
          p = t;
          t <<= 1;
        }
        h.heap[p] = q;
      }
      function rb(p, q, t) {
        var u;
        var v;
        var A = 0;
        if (p.last_lit !== 0) {
          do {
            var x = p.pending_buf[p.d_buf + A * 2] << 8 | p.pending_buf[p.d_buf + A * 2 + 1];
            var B = p.pending_buf[p.l_buf + A];
            A++;
            if (x === 0) {
              h(p, B, q);
            } else {
              u = ja[B];
              h(p, u + vb + 1, q);
              v = Ea[u];
              if (v !== 0) {
                B -= Bd[u];
                l(p, B, v);
              }
              x--;
              u = x < 256 ? Y[x] : Y[256 + (x >>> 7)];
              h(p, u, t);
              v = sc[u];
              if (v !== 0) {
                x -= Ob[u];
                l(p, x, v);
              }
            }
          } while (A < p.last_lit);
        }
        h(p, Ub, q);
      }
      function Ld(h, l) {
        var p;
        var q = l.dyn_tree;
        var t = l.stat_desc.static_tree;
        var u = l.stat_desc.has_stree;
        var v = l.stat_desc.elems;
        var A = -1;
        h.heap_len = 0;
        h.heap_max = tb;
        for (p = 0; p < v; p++) {
          if (q[p * 2] !== 0) {
            h.heap[++h.heap_len] = A = p;
            h.depth[p] = 0;
          } else {
            q[p * 2 + 1] = 0;
          }
        }
        while (h.heap_len < 2) {
          var w = h.heap[++h.heap_len] = A < 2 ? ++A : 0;
          q[w * 2] = 1;
          h.depth[w] = 0;
          h.opt_len--;
          if (u) {
            h.static_len -= t[w * 2 + 1];
          }
        }
        l.max_code = A;
        for (p = h.heap_len >> 1; p >= 1; p--) {
          ya(h, q, p);
        }
        w = v;
        do {
          p = h.heap[1];
          h.heap[1] = h.heap[h.heap_len--];
          ya(h, q, 1);
          t = h.heap[1];
          h.heap[--h.heap_max] = p;
          h.heap[--h.heap_max] = t;
          q[w * 2] = q[p * 2] + q[t * 2];
          h.depth[w] = (h.depth[p] >= h.depth[t] ? h.depth[p] : h.depth[t]) + 1;
          q[p * 2 + 1] = q[t * 2 + 1] = w;
          h.heap[1] = w++;
          ya(h, q, 1);
        } while (h.heap_len >= 2);
        h.heap[--h.heap_max] = h.heap[1];
        var B;
        var E;
        p = l.dyn_tree;
        w = l.max_code;
        v = l.stat_desc.static_tree;
        var I = l.stat_desc.has_stree;
        var M = l.stat_desc.extra_bits;
        var O = l.stat_desc.extra_base;
        var P = l.stat_desc.max_length;
        var Ka = 0;
        for (u = 0; u <= wb; u++) {
          h.bl_count[u] = 0;
        }
        p[h.heap[h.heap_max] * 2 + 1] = 0;
        for (l = h.heap_max + 1; l < tb; l++) {
          t = h.heap[l];
          u = p[p[t * 2 + 1] * 2 + 1] + 1;
          if (u > P) {
            u = P;
            Ka++;
          }
          p[t * 2 + 1] = u;
          if (!(t > w)) {
            h.bl_count[u]++;
            B = 0;
            if (t >= O) {
              B = M[t - O];
            }
            E = p[t * 2];
            h.opt_len += E * (u + B);
            if (I) {
              h.static_len += E * (v[t * 2 + 1] + B);
            }
          }
        }
        if (Ka !== 0) {
          do {
            for (u = P - 1; h.bl_count[u] === 0;) {
              u--;
            }
            h.bl_count[u]--;
            h.bl_count[u + 1] += 2;
            h.bl_count[P]--;
            Ka -= 2;
          } while (Ka > 0);
          for (u = P; u !== 0; u--) {
            for (t = h.bl_count[u]; t !== 0;) {
              B = h.heap[--l];
              if (!(B > w)) {
                if (p[B * 2 + 1] !== u) {
                  h.opt_len += (u - p[B * 2 + 1]) * p[B * 2];
                  p[B * 2 + 1] = u;
                }
                t--;
              }
            }
          }
        }
        x(q, A, h.bl_count);
      }
      function Hc(h, l, p) {
        var q;
        var t = -1;
        var u = l[1];
        var v = 0;
        var x = 7;
        var w = 4;
        if (u === 0) {
          x = 138;
          w = 3;
        }
        l[(p + 1) * 2 + 1] = 65535;
        for (q = 0; q <= p; q++) {
          var A = u;
          u = l[(q + 1) * 2 + 1];
          if (!(++v < x) || A !== u) {
            if (v < w) {
              h.bl_tree[A * 2] += v;
            } else if (A !== 0) {
              if (A !== t) {
                h.bl_tree[A * 2]++;
              }
              h.bl_tree[ld * 2]++;
            } else if (v <= 10) {
              h.bl_tree[sa * 2]++;
            } else {
              h.bl_tree[B * 2]++;
            }
            v = 0;
            t = A;
            if (u === 0) {
              x = 138;
              w = 3;
            } else if (A === u) {
              x = 6;
              w = 3;
            } else {
              x = 7;
              w = 4;
            }
          }
        }
      }
      function ua(p, q, t) {
        var u;
        var v;
        var x = -1;
        var A = q[1];
        var E = 0;
        var w = 7;
        var I = 4;
        if (A === 0) {
          w = 138;
          I = 3;
        }
        for (u = 0; u <= t; u++) {
          v = A;
          A = q[(u + 1) * 2 + 1];
          if (!(++E < w) || v !== A) {
            if (E < I) {
              do {
                h(p, v, p.bl_tree);
              } while (--E !== 0);
            } else if (v !== 0) {
              if (v !== x) {
                h(p, v, p.bl_tree);
                E--;
              }
              h(p, ld, p.bl_tree);
              l(p, E - 3, 2);
            } else if (E <= 10) {
              h(p, sa, p.bl_tree);
              l(p, E - 3, 3);
            } else {
              h(p, B, p.bl_tree);
              l(p, E - 11, 7);
            }
            E = 0;
            x = v;
            if (A === 0) {
              w = 138;
              I = 3;
            } else if (v === A) {
              w = 6;
              I = 3;
            } else {
              w = 7;
              I = 4;
            }
          }
        }
      }
      function Rc(h) {
        var l;
        var p = 4093624447;
        for (l = 0; l <= 31; l++, p >>>= 1) {
          if (p & 1 && h.dyn_ltree[l * 2] !== 0) {
            return qb;
          }
        }
        if (h.dyn_ltree[18] !== 0 || h.dyn_ltree[20] !== 0 || h.dyn_ltree[26] !== 0) {
          return la;
        }
        for (l = 32; l < vb; l++) {
          if (h.dyn_ltree[l * 2] !== 0) {
            return la;
          }
        }
        return qb;
      }
      function jb(h, p, q, t) {
        l(h, (ib << 1) + (t ? 1 : 0), 3);
        ha(h);
        xa(h, q);
        xa(h, ~q);
        V.arraySet(h.pending_buf, h.window, p, q, h.pending);
        h.pending += q;
      }
      var V = v("../utils/common");
      var qb = 0;
      var la = 1;
      var ib = 0;
      var vb = 256;
      var Oa = vb + 1 + 29;
      var ab = 30;
      var Fa = 19;
      var tb = Oa * 2 + 1;
      var wb = 15;
      var $a = 16;
      var Ub = 256;
      var ld = 16;
      var sa = 17;
      var B = 18;
      var Ea = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0];
      var sc = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];
      var M = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7];
      var sb = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
      var lb = Array((Oa + 2) * 2);
      O(lb);
      var Da = Array(ab * 2);
      O(Da);
      var Y = Array(512);
      O(Y);
      var ja = Array(256);
      O(ja);
      var Bd = Array(29);
      O(Bd);
      var Ob = Array(ab);
      O(Ob);
      var Ec;
      var Pb;
      var t;
      var Ad = false;
      E._tr_init = function (h) {
        if (!Ad) {
          var l;
          var v;
          var B;
          var E = Array(wb + 1);
          for (B = v = 0; B < 28; B++) {
            Bd[B] = v;
            l = 0;
            for (; l < 1 << Ea[B]; l++) {
              ja[v++] = B;
            }
          }
          ja[v - 1] = B;
          for (B = v = 0; B < 16; B++) {
            Ob[B] = v;
            l = 0;
            for (; l < 1 << sc[B]; l++) {
              Y[v++] = B;
            }
          }
          for (v >>= 7; B < ab; B++) {
            Ob[B] = v << 7;
            l = 0;
            for (; l < 1 << sc[B] - 7; l++) {
              Y[256 + v++] = B;
            }
          }
          for (l = 0; l <= wb; l++) {
            E[l] = 0;
          }
          for (l = 0; l <= 143;) {
            lb[l * 2 + 1] = 8;
            l++;
            E[8]++;
          }
          while (l <= 255) {
            lb[l * 2 + 1] = 9;
            l++;
            E[9]++;
          }
          while (l <= 279) {
            lb[l * 2 + 1] = 7;
            l++;
            E[7]++;
          }
          while (l <= 287) {
            lb[l * 2 + 1] = 8;
            l++;
            E[8]++;
          }
          x(lb, Oa + 1, E);
          for (l = 0; l < ab; l++) {
            Da[l * 2 + 1] = 5;
            Da[l * 2] = p(l, 5);
          }
          Ec = new P(lb, Ea, vb + 1, Oa, wb);
          Pb = new P(Da, sc, 0, ab, wb);
          t = new P([], M, 0, Fa, 7);
          Ad = true;
        }
        h.l_desc = new q(h.dyn_ltree, Ec);
        h.d_desc = new q(h.dyn_dtree, Pb);
        h.bl_desc = new q(h.bl_tree, t);
        h.bi_buf = 0;
        h.bi_valid = 0;
        u(h);
      };
      E._tr_stored_block = jb;
      E._tr_flush_block = function (h, p, q, t) {
        var v = 0;
        if (h.level > 0) {
          if (h.strm.data_type === 2) {
            h.strm.data_type = Rc(h);
          }
          Ld(h, h.l_desc);
          Ld(h, h.d_desc);
          Hc(h, h.dyn_ltree, h.l_desc.max_code);
          Hc(h, h.dyn_dtree, h.d_desc.max_code);
          Ld(h, h.bl_desc);
          for (v = Fa - 1; v >= 3 && h.bl_tree[sb[v] * 2 + 1] === 0; v--);
          h.opt_len += (v + 1) * 3 + 14;
          v = v;
          var x = h.opt_len + 3 + 7 >>> 3;
          var A = h.static_len + 3 + 7 >>> 3;
          if (A <= x) {
            x = A;
          }
        } else {
          x = A = q + 5;
        }
        if (q + 4 <= x && p !== -1) {
          jb(h, p, q, t);
        } else if (h.strategy === 4 || A === x) {
          l(h, 2 + (t ? 1 : 0), 3);
          rb(h, lb, Da);
        } else {
          l(h, 4 + (t ? 1 : 0), 3);
          p = h.l_desc.max_code + 1;
          q = h.d_desc.max_code + 1;
          v += 1;
          l(h, p - 257, 5);
          l(h, q - 1, 5);
          l(h, v - 4, 4);
          for (x = 0; x < v; x++) {
            l(h, h.bl_tree[sb[x] * 2 + 1], 3);
          }
          ua(h, h.dyn_ltree, p - 1);
          ua(h, h.dyn_dtree, q - 1);
          rb(h, h.dyn_ltree, h.dyn_dtree);
        }
        u(h);
        if (t) {
          ha(h);
        }
      };
      E._tr_tally = function (h, l, p) {
        h.pending_buf[h.d_buf + h.last_lit * 2] = l >>> 8 & 255;
        h.pending_buf[h.d_buf + h.last_lit * 2 + 1] = l & 255;
        h.pending_buf[h.l_buf + h.last_lit] = p & 255;
        h.last_lit++;
        if (l === 0) {
          h.dyn_ltree[p * 2]++;
        } else {
          h.matches++;
          l--;
          h.dyn_ltree[(ja[p] + vb + 1) * 2]++;
          h.dyn_dtree[(l < 256 ? Y[l] : Y[256 + (l >>> 7)]) * 2]++;
        }
        return h.last_lit === h.lit_bufsize - 1;
      };
      E._tr_align = function (p) {
        l(p, 2, 3);
        h(p, Ub, lb);
        if (p.bi_valid === 16) {
          xa(p, p.bi_buf);
          p.bi_buf = 0;
          p.bi_valid = 0;
        } else if (p.bi_valid >= 8) {
          p.pending_buf[p.pending++] = p.bi_buf & 255;
          p.bi_buf >>= 8;
          p.bi_valid -= 8;
        }
      };
    }, {
      "../utils/common": 3
    }],
    15: [function (v, I, E) {
      I.exports = function () {
        this.input = null;
        this.total_in = this.avail_in = this.next_in = 0;
        this.output = null;
        this.total_out = this.avail_out = this.next_out = 0;
        this.msg = "";
        this.state = null;
        this.data_type = 2;
        this.adler = 0;
      };
    }, {}],
    "/": [function (v, I, E) {
      E = v("./lib/utils/common").assign;
      var O = v("./lib/deflate");
      var P = v("./lib/inflate");
      v = v("./lib/zlib/constants");
      var q = {};
      E(q, O, P, v);
      I.exports = q;
    }, {
      "./lib/deflate": 1,
      "./lib/inflate": 2,
      "./lib/utils/common": 3,
      "./lib/zlib/constants": 6
    }]
  }, {}, [])("/");
});
var saveAs = saveAs || function (ra) {
  if (typeof ra !== "undefined" && (typeof navigator === "undefined" || !/MSIE [1-9]\./.test(navigator.userAgent))) {
    var v = ra.document.createElementNS("http://www.w3.org/1999/xhtml", "a");
    var I = "download" in v;
    var E = /constructor/i.test(ra.HTMLElement) || ra.safari;
    var O = /CriOS\/[\d]+/.test(navigator.userAgent);
    function P(h) {
      (ra.setImmediate || ra.setTimeout)(function () {
        throw h;
      }, 0);
    }
    function q(h) {
      setTimeout(function () {
        if (typeof h === "string") {
          (ra.URL || ra.webkitURL || ra).revokeObjectURL(h);
        } else {
          h.remove();
        }
      }, 40000);
    }
    function xa(h) {
      if (/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)) {
        return new Blob([String.fromCharCode(65279), h], {
          type: h.type
        });
      } else {
        return h;
      }
    }
    function l(h, l, u) {
      if (!u) {
        h = xa(h);
      }
      var p = this;
      var x = h.type === "application/octet-stream";
      function ya() {
        var h = ["writestart", "progress", "write", "writeend"];
        h = [].concat(h);
        for (var l = h.length; l--;) {
          var q = p["on" + h[l]];
          if (typeof q === "function") {
            try {
              q.call(p, p);
            } catch (Rc) {
              P(Rc);
            }
          }
        }
      }
      p.readyState = p.INIT;
      if (I) {
        var rb = (ra.URL || ra.webkitURL || ra).createObjectURL(h);
        setTimeout(function () {
          v.href = rb;
          v.download = l;
          var h = new MouseEvent("click");
          v.dispatchEvent(h);
          ya();
          q(rb);
          p.readyState = p.DONE;
        });
      } else {
        (function () {
          if ((O || x && E) && ra.FileReader) {
            var l = new FileReader();
            l.onloadend = function () {
              var h = O ? l.result : l.result.replace(/^data:[^;]*;/, "data:attachment/file;");
              if (!ra.open(h, "_blank")) {
                ra.location.href = h;
              }
              p.readyState = p.DONE;
              ya();
            };
            l.readAsDataURL(h);
            p.readyState = p.INIT;
          } else {
            rb ||= (ra.URL || ra.webkitURL || ra).createObjectURL(h);
            if (x) {
              ra.location.href = rb;
            } else if (!ra.open(rb, "_blank")) {
              ra.location.href = rb;
            }
            p.readyState = p.DONE;
            ya();
            q(rb);
          }
        })();
      }
    }
    var h = l.prototype;
    if (typeof navigator !== "undefined" && navigator.msSaveOrOpenBlob) {
      return function (h, l, q) {
        l = l || h.name || "download";
        if (!q) {
          h = xa(h);
        }
        return navigator.msSaveOrOpenBlob(h, l);
      };
    }
    h.abort = function () {};
    h.readyState = h.INIT = 0;
    h.WRITING = 1;
    h.DONE = 2;
    h.error = h.onwritestart = h.onprogress = h.onwrite = h.onabort = h.onerror = h.onwriteend = null;
    return function (h, q, u) {
      return new l(h, q || h.name || "download", u);
    };
  }
}(typeof self !== "undefined" && self || typeof window !== "undefined" && window || this.content);
if (typeof module !== "undefined" && module.exports) {
  module.exports.saveAs = saveAs;
} else if (typeof define !== "undefined" && define !== null && define.amd !== null) {
  define("FileSaver.js", function () {
    return saveAs;
  });
}
if (typeof define == "function" && define.__amd) {
  define.amd = define.__amd;
  delete define.__amd;
}