/*
 howler.js v2.2.4 | (c) 2013-2020, James Simpson of GoldFire Studios | MIT License | howlerjs.com  Spatial Plugin  @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var $jscomp = $jscomp || {};
$jscomp.scope = {};
$jscomp.arrayIteratorImpl = function (na) {
  var x = 0;
  return function () {
    if (x < na.length) {
      return {
        done: false,
        value: na[x++]
      };
    } else {
      return {
        done: true
      };
    }
  };
};
$jscomp.arrayIterator = function (na) {
  return {
    next: $jscomp.arrayIteratorImpl(na)
  };
};
$jscomp.ASSUME_ES5 = false;
$jscomp.ASSUME_NO_NATIVE_MAP = false;
$jscomp.ASSUME_NO_NATIVE_SET = false;
$jscomp.SIMPLE_FROUND_POLYFILL = false;
$jscomp.defineProperty = $jscomp.ASSUME_ES5 || typeof Object.defineProperties == "function" ? Object.defineProperty : function (na, x, E) {
  if (na != Array.prototype && na != Object.prototype) {
    na[x] = E.value;
  }
};
$jscomp.getGlobal = function (na) {
  na = [typeof window == "object" && window, typeof self == "object" && self, typeof global == "object" && global, na];
  for (var x = 0; x < na.length; ++x) {
    var E = na[x];
    if (E && E.Math == Math) {
      return E;
    }
  }
  throw Error("Cannot find global object");
};
$jscomp.global = $jscomp.getGlobal(this);
$jscomp.SYMBOL_PREFIX = "jscomp_symbol_";
$jscomp.initSymbol = function () {
  $jscomp.initSymbol = function () {};
  $jscomp.global.Symbol ||= $jscomp.Symbol;
};
$jscomp.SymbolClass = function (na, x) {
  this.$jscomp$symbol$id_ = na;
  $jscomp.defineProperty(this, "description", {
    configurable: true,
    writable: true,
    value: x
  });
};
$jscomp.SymbolClass.prototype.toString = function () {
  return this.$jscomp$symbol$id_;
};
$jscomp.Symbol = function () {
  function na(E) {
    if (this instanceof na) {
      throw new TypeError("Symbol is not a constructor");
    }
    return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX + (E || "") + "_" + x++, E);
  }
  var x = 0;
  return na;
}();
$jscomp.initSymbolIterator = function () {
  $jscomp.initSymbol();
  var na = $jscomp.global.Symbol.iterator;
  na ||= $jscomp.global.Symbol.iterator = $jscomp.global.Symbol("Symbol.iterator");
  if (typeof Array.prototype[na] != "function") {
    $jscomp.defineProperty(Array.prototype, na, {
      configurable: true,
      writable: true,
      value: function () {
        return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this));
      }
    });
  }
  $jscomp.initSymbolIterator = function () {};
};
$jscomp.initSymbolAsyncIterator = function () {
  $jscomp.initSymbol();
  var na = $jscomp.global.Symbol.asyncIterator;
  na ||= $jscomp.global.Symbol.asyncIterator = $jscomp.global.Symbol("Symbol.asyncIterator");
  $jscomp.initSymbolAsyncIterator = function () {};
};
$jscomp.iteratorPrototype = function (na) {
  $jscomp.initSymbolIterator();
  na = {
    next: na
  };
  na[$jscomp.global.Symbol.iterator] = function () {
    return this;
  };
  return na;
};
$jscomp.iteratorFromArray = function (na, x) {
  $jscomp.initSymbolIterator();
  if (na instanceof String) {
    na += "";
  }
  var E = 0;
  var I = {
    next: function () {
      if (E < na.length) {
        var M = E++;
        return {
          value: x(M, na[M]),
          done: false
        };
      }
      I.next = function () {
        return {
          done: true,
          value: undefined
        };
      };
      return I.next();
    }
  };
  I[Symbol.iterator] = function () {
    return I;
  };
  return I;
};
$jscomp.polyfill = function (na, x, E, I) {
  if (x) {
    E = $jscomp.global;
    na = na.split(".");
    for (I = 0; I < na.length - 1; I++) {
      var M = na[I];
      if (!(M in E)) {
        E[M] = {};
      }
      E = E[M];
    }
    na = na[na.length - 1];
    I = E[na];
    x = x(I);
    if (x != I && x != null) {
      $jscomp.defineProperty(E, na, {
        configurable: true,
        writable: true,
        value: x
      });
    }
  }
};
$jscomp.polyfill("Array.prototype.keys", function (na) {
  if (na) {
    return na;
  } else {
    return function () {
      return $jscomp.iteratorFromArray(this, function (x) {
        return x;
      });
    };
  }
}, "es6", "es3");
$jscomp.checkStringArgs = function (na, x, E) {
  if (na == null) {
    throw new TypeError("The 'this' value for String.prototype." + E + " must not be null or undefined");
  }
  if (x instanceof RegExp) {
    throw new TypeError("First argument to String.prototype." + E + " must not be a regular expression");
  }
  return na + "";
};
$jscomp.polyfill("String.prototype.endsWith", function (na) {
  if (na) {
    return na;
  } else {
    return function (x, E) {
      var I = $jscomp.checkStringArgs(this, x, "endsWith");
      x += "";
      if (E === undefined) {
        E = I.length;
      }
      E = Math.max(0, Math.min(E | 0, I.length));
      for (var M = x.length; M > 0 && E > 0;) {
        if (I[--E] != x[--M]) {
          return false;
        }
      }
      return M <= 0;
    };
  }
}, "es6", "es3");
$jscomp.polyfill("String.fromCodePoint", function (na) {
  if (na) {
    return na;
  } else {
    return function (x) {
      var E = "";
      for (var I = 0; I < arguments.length; I++) {
        var M = Number(arguments[I]);
        if (M < 0 || M > 1114111 || M !== Math.floor(M)) {
          throw new RangeError("invalid_code_point " + M);
        }
        if (M <= 65535) {
          E += String.fromCharCode(M);
        } else {
          M -= 65536;
          E += String.fromCharCode(M >>> 10 & 1023 | 55296);
          E += String.fromCharCode(M & 1023 | 56320);
        }
      }
      return E;
    };
  }
}, "es6", "es3");
$jscomp.polyfill("Array.prototype.fill", function (na) {
  if (na) {
    return na;
  } else {
    return function (x, E, I) {
      var M = this.length || 0;
      if (E < 0) {
        E = Math.max(0, M + E);
      }
      if (I == null || I > M) {
        I = M;
      }
      I = Number(I);
      if (I < 0) {
        I = Math.max(0, M + I);
      }
      for (E = Number(E || 0); E < I; E++) {
        this[E] = x;
      }
      return this;
    };
  }
}, "es6", "es3");
$jscomp.polyfill("String.prototype.startsWith", function (na) {
  if (na) {
    return na;
  } else {
    return function (x, E) {
      var I = $jscomp.checkStringArgs(this, x, "startsWith");
      x += "";
      var M = I.length;
      var X = x.length;
      E = Math.max(0, Math.min(E | 0, I.length));
      for (var q = 0; q < X && E < M;) {
        if (I[E++] != x[q++]) {
          return false;
        }
      }
      return q >= X;
    };
  }
}, "es6", "es3");
(function (na, x) {
  na.lime = na.lime || {};
  na.lime.$scripts = na.lime.$scripts || {};
  na.lime.$scripts.PsychEngine = function (x, I) {
    (function (x, E) {
      function q(a, b) {
        a = Object.create(a);
        for (var c in b) {
          a[c] = b[c];
        }
        if (b.toString !== Object.prototype.toString) {
          a.toString = b.toString;
        }
        return a;
      }
      function M(a) {
        if (a instanceof Array) {
          return new Qf(a);
        } else {
          return a.iterator();
        }
      }
      function m(a, b) {
        if (b == null) {
          return null;
        }
        if (b.__id__ == null) {
          b.__id__ = E.$haxeUID++;
        }
        var c;
        if (a.hx__closures__ == null) {
          a.hx__closures__ = {};
        } else {
          c = a.hx__closures__[b.__id__];
        }
        if (c == null) {
          c = b.bind(a);
          a.hx__closures__[b.__id__] = c;
        }
        return c;
      }
      x.lime = x.lime || {};
      var g = {};
      function p() {
        return va.__string_rec(this, "");
      }
      var z = z || {};
      var u;
      function H() {}
      g["lime.app.IModule"] = H;
      H.__name__ = "lime.app.IModule";
      H.__isInterface__ = true;
      H.prototype = {
        __class__: H
      };
      function ha() {
        this.onExit = new fh();
      }
      g["lime.app.Module"] = ha;
      ha.__name__ = "lime.app.Module";
      ha.__interfaces__ = [H];
      ha.prototype = {
        __registerLimeModule: function (a) {},
        __unregisterLimeModule: function (a) {},
        __class__: ha
      };
      function N(a) {
        this.gameDeviceCache = new wc();
        this.parent = a;
        this.nextUpdate = this.lastUpdate = this.currentUpdate = 0;
        this.framePeriod = -1;
        cg.init();
        this.accelerometer = He.registerSensor(Vo.ACCELEROMETER, 0);
      }
      g["lime._internal.backend.html5.HTML5Application"] = N;
      N.__name__ = "lime._internal.backend.html5.HTML5Application";
      N.prototype = {
        convertKeyCode: function (a) {
          if (a >= 65 && a <= 90) {
            return a + 32;
          }
          switch (a) {
            case 12:
              return 1073741980;
            case 16:
              return 1073742049;
            case 17:
              return 1073742048;
            case 18:
              return 1073742050;
            case 19:
              return 1073741896;
            case 20:
              return 1073741881;
            case 33:
              return 1073741899;
            case 34:
              return 1073741902;
            case 35:
              return 1073741901;
            case 36:
              return 1073741898;
            case 37:
              return 1073741904;
            case 38:
              return 1073741906;
            case 39:
              return 1073741903;
            case 40:
              return 1073741905;
            case 41:
              return 1073741943;
            case 43:
              return 1073741940;
            case 44:
              return 1073741894;
            case 45:
              return 1073741897;
            case 46:
              return 127;
            case 91:
              return 1073742051;
            case 92:
              return 1073742055;
            case 93:
              return 1073742055;
            case 95:
              return 1073742106;
            case 96:
              return 1073741922;
            case 97:
              return 1073741913;
            case 98:
              return 1073741914;
            case 99:
              return 1073741915;
            case 100:
              return 1073741916;
            case 101:
              return 1073741917;
            case 102:
              return 1073741918;
            case 103:
              return 1073741919;
            case 104:
              return 1073741920;
            case 105:
              return 1073741921;
            case 106:
              return 1073741909;
            case 107:
              return 1073741911;
            case 108:
              return 1073741923;
            case 109:
              return 1073741910;
            case 110:
              return 1073741923;
            case 111:
              return 1073741908;
            case 112:
              return 1073741882;
            case 113:
              return 1073741883;
            case 114:
              return 1073741884;
            case 115:
              return 1073741885;
            case 116:
              return 1073741886;
            case 117:
              return 1073741887;
            case 118:
              return 1073741888;
            case 119:
              return 1073741889;
            case 120:
              return 1073741890;
            case 121:
              return 1073741891;
            case 122:
              return 1073741892;
            case 123:
              return 1073741893;
            case 124:
              return 1073741928;
            case 125:
              return 1073741929;
            case 126:
              return 1073741930;
            case 127:
              return 1073741931;
            case 128:
              return 1073741932;
            case 129:
              return 1073741933;
            case 130:
              return 1073741934;
            case 131:
              return 1073741935;
            case 132:
              return 1073741936;
            case 133:
              return 1073741937;
            case 134:
              return 1073741938;
            case 135:
              return 1073741939;
            case 144:
              return 1073741907;
            case 145:
              return 1073741895;
            case 160:
              return 94;
            case 161:
              return 33;
            case 163:
              return 35;
            case 164:
              return 36;
            case 166:
              return 1073742094;
            case 167:
              return 1073742095;
            case 168:
              return 1073742097;
            case 169:
              return 41;
            case 170:
              return 42;
            case 171:
              return 96;
            case 172:
              return 1073741898;
            case 173:
              return 45;
            case 174:
              return 1073741953;
            case 175:
              return 1073741952;
            case 176:
              return 1073742082;
            case 177:
              return 1073742083;
            case 178:
              return 1073742084;
            case 179:
              return 1073742085;
            case 180:
              return 1073742089;
            case 181:
              return 1073742086;
            case 182:
              return 1073741953;
            case 183:
              return 1073741952;
            case 186:
              return 59;
            case 187:
              return 61;
            case 188:
              return 44;
            case 189:
              return 45;
            case 190:
              return 46;
            case 191:
              return 47;
            case 192:
              return 96;
            case 193:
              return 63;
            case 194:
              return 1073741923;
            case 219:
              return 91;
            case 220:
              return 92;
            case 221:
              return 93;
            case 222:
              return 39;
            case 223:
              return 96;
            case 224:
              return 1073742051;
            case 226:
              return 92;
          }
          return a;
        },
        exec: function () {
          window.addEventListener("keydown", m(this, this.handleKeyEvent), false);
          window.addEventListener("keyup", m(this, this.handleKeyEvent), false);
          window.addEventListener("focus", m(this, this.handleWindowEvent), false);
          window.addEventListener("blur", m(this, this.handleWindowEvent), false);
          window.addEventListener("resize", m(this, this.handleWindowEvent), false);
          window.addEventListener("beforeunload", m(this, this.handleWindowEvent), false);
          if (Object.prototype.hasOwnProperty.call(window, "Accelerometer")) {
            window.addEventListener("devicemotion", m(this, this.handleSensorEvent), false);
          }
          CanvasRenderingContext2D.prototype.isPointInStroke ||= function (a, b, c) {
            return false;
          };
          CanvasRenderingContext2D.prototype.isPointInPath ||= function (a, b, c) {
            return false;
          };
          if ("performance" in window == 0) {
            window.performance = {};
          }
          if ("now" in window.performance == 0) {
            var a = Date.now();
            if (performance.timing && performance.timing.navigationStart) {
              a = performance.timing.navigationStart;
            }
            window.performance.now = function () {
              return Date.now() - a;
            };
          }
          var b = 0;
          for (var c = ["ms", "moz", "webkit", "o"], d = 0; d < c.length && !window.requestAnimationFrame; ++d) {
            window.requestAnimationFrame = window[c[d] + "RequestAnimationFrame"];
            window.cancelAnimationFrame = window[c[d] + "CancelAnimationFrame"] || window[c[d] + "CancelRequestAnimationFrame"];
          }
          window.requestAnimationFrame ||= function (a, c) {
            var d = window.performance.now();
            var e = Math.max(0, 16 - (d - b));
            c = window.setTimeout(function () {
              a(d + e);
            }, e);
            b = d + e;
            return c;
          };
          window.cancelAnimationFrame ||= function (a) {
            clearTimeout(a);
          };
          window.requestAnimFrame = window.requestAnimationFrame;
          this.lastUpdate = window.performance.now();
          this.handleApplicationEvent();
          return 0;
        },
        exit: function () {},
        handleApplicationEvent: function (a) {
          a = 0;
          for (var b = this.parent.__windows; a < b.length;) {
            var c = b[a];
            ++a;
            c.__backend.updateSize();
          }
          this.updateGameDevices();
          this.currentUpdate = window.performance.now();
          if (this.currentUpdate >= this.nextUpdate) {
            this.deltaTime = this.currentUpdate - this.lastUpdate;
            a = 0;
            for (b = this.parent.__windows; a < b.length;) {
              c = b[a];
              ++a;
              this.parent.onUpdate.dispatch(this.deltaTime | 0);
              if (c.context != null) {
                c.onRender.dispatch(c.context);
              }
            }
            this.nextUpdate = this.framePeriod < 0 ? this.currentUpdate : this.currentUpdate - this.currentUpdate % this.framePeriod + this.framePeriod;
            this.lastUpdate = this.currentUpdate;
          }
          window.requestAnimationFrame(m(this, this.handleApplicationEvent));
        },
        handleKeyEvent: function (a) {
          if (this.parent.__window != null) {
            var b = this.convertKeyCode(a.keyCode ?? a.which);
            var c = (a.shiftKey ? 3 : 0) | (a.ctrlKey ? 192 : 0) | (a.altKey ? 768 : 0) | (a.metaKey ? 3072 : 0);
            if (a.type == "keydown") {
              this.parent.__window.onKeyDown.dispatch(b, c);
              if (this.parent.__window.onKeyDown.canceled && a.cancelable) {
                a.preventDefault();
              }
            } else {
              this.parent.__window.onKeyUp.dispatch(b, c);
              if (this.parent.__window.onKeyUp.canceled && a.cancelable) {
                a.preventDefault();
              }
            }
          }
        },
        handleSensorEvent: function (a) {
          this.accelerometer.onUpdate.dispatch(a.accelerationIncludingGravity.x, a.accelerationIncludingGravity.y, a.accelerationIncludingGravity.z);
        },
        handleWindowEvent: function (a) {
          if (this.parent.__window != null) {
            switch (a.type) {
              case "blur":
                if (!this.hidden) {
                  this.parent.__window.onFocusOut.dispatch();
                  this.parent.__window.onDeactivate.dispatch();
                  this.hidden = true;
                }
                break;
              case "focus":
                if (this.hidden) {
                  this.parent.__window.onFocusIn.dispatch();
                  this.parent.__window.onActivate.dispatch();
                  this.hidden = false;
                }
                break;
              case "resize":
                this.parent.__window.__backend.handleResizeEvent(a);
                break;
              case "visibilitychange":
                if (window.document.hidden) {
                  if (!this.hidden) {
                    this.parent.__window.onFocusOut.dispatch();
                    this.parent.__window.onDeactivate.dispatch();
                    this.hidden = true;
                  }
                } else if (this.hidden) {
                  this.parent.__window.onFocusIn.dispatch();
                  this.parent.__window.onActivate.dispatch();
                  this.hidden = false;
                }
            }
          }
        },
        updateGameDevices: function () {
          var a = Mc.__getDeviceData();
          if (a != null) {
            for (var b, c, d, e, f, k = 0, t = a.length; k < t;) {
              b = k++;
              e = a[b];
              if (e != null) {
                if (!this.gameDeviceCache.h.hasOwnProperty(b)) {
                  f = new gn();
                  f.id = b;
                  f.connected = e.connected;
                  c = 0;
                  for (d = e.buttons.length; c < d;) {
                    var n = c++;
                    f.buttons.push(e.buttons[n].value);
                  }
                  c = 0;
                  for (d = e.axes.length; c < d;) {
                    n = c++;
                    f.axes.push(e.axes[n]);
                  }
                  if (e.mapping == "standard") {
                    f.isGamepad = true;
                  }
                  this.gameDeviceCache.h[b] = f;
                  if (e.connected) {
                    Mc.__connect(b);
                    if (f.isGamepad) {
                      Qc.__connect(b);
                    }
                  }
                }
                f = this.gameDeviceCache.h[b];
                d = Mc.devices.h[b];
                c = Qc.devices.h[b];
                if (e.connected) {
                  for (var h = 0, ya = e.buttons.length; h < ya;) {
                    var l = h++;
                    n = e.buttons[l].value;
                    if (n != f.buttons[l]) {
                      if (l == 6) {
                        d.onAxisMove.dispatch(e.axes.length, n);
                        if (c != null) {
                          c.onAxisMove.dispatch(4, n);
                        }
                      } else if (l == 7) {
                        d.onAxisMove.dispatch(e.axes.length + 1, n);
                        if (c != null) {
                          c.onAxisMove.dispatch(5, n);
                        }
                      } else {
                        if (n > 0) {
                          d.onButtonDown.dispatch(l);
                        } else {
                          d.onButtonUp.dispatch(l);
                        }
                        if (c != null) {
                          switch (l) {
                            case 0:
                              b = 0;
                              break;
                            case 1:
                              b = 1;
                              break;
                            case 2:
                              b = 2;
                              break;
                            case 3:
                              b = 3;
                              break;
                            case 4:
                              b = 9;
                              break;
                            case 5:
                              b = 10;
                              break;
                            case 8:
                              b = 4;
                              break;
                            case 9:
                              b = 6;
                              break;
                            case 10:
                              b = 7;
                              break;
                            case 11:
                              b = 8;
                              break;
                            case 12:
                              b = 11;
                              break;
                            case 13:
                              b = 12;
                              break;
                            case 14:
                              b = 13;
                              break;
                            case 15:
                              b = 14;
                              break;
                            case 16:
                              b = 5;
                              break;
                            default:
                              continue;
                          }
                          if (n > 0) {
                            c.onButtonDown.dispatch(b);
                          } else {
                            c.onButtonUp.dispatch(b);
                          }
                        }
                      }
                      f.buttons[l] = n;
                    }
                  }
                  b = 0;
                  for (n = e.axes.length; b < n;) {
                    h = b++;
                    if (e.axes[h] != f.axes[h]) {
                      d.onAxisMove.dispatch(h, e.axes[h]);
                      if (c != null) {
                        c.onAxisMove.dispatch(h, e.axes[h]);
                      }
                      f.axes[h] = e.axes[h];
                    }
                  }
                } else if (f.connected) {
                  f.connected = false;
                  Mc.__disconnect(b);
                  Qc.__disconnect(b);
                }
              }
            }
          }
        },
        __class__: N
      };
      function ia() {
        this.onCreateWindow = new hn();
        this.onUpdate = new fh();
        this.onExit = new fh();
        if (ia.current == null) {
          ia.current = this;
        }
        this.meta = new ua();
        this.modules = [];
        this.__windowByID = new wc();
        this.__windows = [];
        this.__backend = new N(this);
        this.__registerLimeModule(this);
        this.__preloader = new jn();
        this.__preloader.onProgress.add(m(this, this.onPreloadProgress));
        this.__preloader.onComplete.add(m(this, this.onPreloadComplete));
      }
      g["lime.app.Application"] = ia;
      ia.__name__ = "lime.app.Application";
      ia.__super__ = ha;
      ia.prototype = q(ha.prototype, {
        addModule: function (a) {
          a.__registerLimeModule(this);
          this.modules.push(a);
        },
        exec: function () {
          ia.current = this;
          return this.__backend.exec();
        },
        onGamepadAxisMove: function (a, b, c) {},
        onGamepadButtonDown: function (a, b) {},
        onGamepadButtonUp: function (a, b) {},
        onGamepadConnect: function (a) {},
        onGamepadDisconnect: function (a) {},
        onJoystickAxisMove: function (a, b, c) {},
        onJoystickButtonDown: function (a, b) {},
        onJoystickButtonUp: function (a, b) {},
        onJoystickConnect: function (a) {},
        onJoystickDisconnect: function (a) {},
        onJoystickHatMove: function (a, b, c) {},
        onJoystickTrackballMove: function (a, b, c, d) {},
        onKeyDown: function (a, b) {},
        onKeyUp: function (a, b) {},
        onModuleExit: function (a) {},
        onMouseDown: function (a, b, c) {},
        onMouseMove: function (a, b) {},
        onMouseMoveRelative: function (a, b) {},
        onMouseUp: function (a, b, c) {},
        onMouseWheel: function (a, b, c) {},
        onPreloadComplete: function () {},
        onPreloadProgress: function (a, b) {},
        onRenderContextLost: function () {},
        onRenderContextRestored: function (a) {},
        onTextEdit: function (a, b, c) {},
        onTextInput: function (a) {},
        onTouchCancel: function (a) {},
        onTouchEnd: function (a) {},
        onTouchMove: function (a) {},
        onTouchStart: function (a) {},
        onWindowActivate: function () {},
        onWindowClose: function () {},
        onWindowCreate: function () {},
        onWindowDeactivate: function () {},
        onWindowDropFile: function (a) {},
        onWindowEnter: function () {},
        onWindowExpose: function () {},
        onWindowFocusIn: function () {},
        onWindowFocusOut: function () {},
        onWindowFullscreen: function () {},
        onWindowLeave: function () {},
        onWindowMove: function (a, b) {},
        onWindowMinimize: function () {},
        onWindowResize: function (a, b) {},
        onWindowRestore: function () {},
        removeModule: function (a) {
          if (a != null) {
            a.__unregisterLimeModule(this);
            r.remove(this.modules, a);
          }
        },
        render: function (a) {},
        update: function (a) {},
        __registerLimeModule: function (a) {
          a.onUpdate.add(m(this, this.update));
          a.onExit.add(m(this, this.onModuleExit), false, 0);
          a.onExit.add(m(this, this.__onModuleExit), false, -1000);
          for (a = Qc.devices.iterator(); a.hasNext();) {
            var b = a.next();
            this.__onGamepadConnect(b);
          }
          Qc.onConnect.add(m(this, this.__onGamepadConnect));
          for (a = Mc.devices.iterator(); a.hasNext();) {
            b = a.next();
            this.__onJoystickConnect(b);
          }
          Mc.onConnect.add(m(this, this.__onJoystickConnect));
          Dc.onCancel.add(m(this, this.onTouchCancel));
          Dc.onStart.add(m(this, this.onTouchStart));
          Dc.onMove.add(m(this, this.onTouchMove));
          Dc.onEnd.add(m(this, this.onTouchEnd));
        },
        __removeWindow: function (a) {
          if (a != null && this.__windowByID.h.hasOwnProperty(a.id)) {
            if (this.__window == a) {
              this.__window = null;
            }
            r.remove(this.__windows, a);
            this.__windowByID.remove(a.id);
            a.close();
            this.__checkForAllWindowsClosed();
          }
        },
        __checkForAllWindowsClosed: function () {
          if (this.__windows.length == 0) {
            $c.exit(0);
          }
        },
        __onGamepadConnect: function (a) {
          this.onGamepadConnect(a);
          var b = this;
          function c(c, d) {
            b.onGamepadAxisMove(a, c, d);
          }
          a.onAxisMove.add(c);
          var d = this;
          c = function (b) {
            d.onGamepadButtonDown(a, b);
          };
          a.onButtonDown.add(c);
          var e = this;
          c = function (b) {
            e.onGamepadButtonUp(a, b);
          };
          a.onButtonUp.add(c);
          var f = this;
          a.onDisconnect.add(function () {
            f.onGamepadDisconnect(a);
          });
        },
        __onJoystickConnect: function (a) {
          this.onJoystickConnect(a);
          var b = this;
          function c(c, d) {
            b.onJoystickAxisMove(a, c, d);
          }
          a.onAxisMove.add(c);
          var d = this;
          c = function (b) {
            d.onJoystickButtonDown(a, b);
          };
          a.onButtonDown.add(c);
          var e = this;
          c = function (b) {
            e.onJoystickButtonUp(a, b);
          };
          a.onButtonUp.add(c);
          var f = this;
          a.onDisconnect.add(function () {
            f.onJoystickDisconnect(a);
          });
          var k = this;
          c = function (b, c) {
            k.onJoystickHatMove(a, b, c);
          };
          a.onHatMove.add(c);
          var t = this;
          c = function (b, c, d) {
            t.onJoystickTrackballMove(a, b, c, d);
          };
          a.onTrackballMove.add(c);
        },
        __onModuleExit: function (a) {
          if (!this.onExit.canceled) {
            this.__unregisterLimeModule(this);
            this.__backend.exit();
            if (ia.current == this) {
              ia.current = null;
            }
          }
        },
        __onWindowClose: function (a) {
          if (this.__window == a) {
            this.onWindowClose();
          }
          this.__removeWindow(a);
        },
        __unregisterLimeModule: function (a) {
          a.onUpdate.remove(m(this, this.update));
          a.onExit.remove(m(this, this.__onModuleExit));
          a.onExit.remove(m(this, this.onModuleExit));
          Qc.onConnect.remove(m(this, this.__onGamepadConnect));
          Mc.onConnect.remove(m(this, this.__onJoystickConnect));
          Dc.onCancel.remove(m(this, this.onTouchCancel));
          Dc.onStart.remove(m(this, this.onTouchStart));
          Dc.onMove.remove(m(this, this.onTouchMove));
          Dc.onEnd.remove(m(this, this.onTouchEnd));
        },
        __class__: ia
      });
      function I() {}
      g.ApplicationMain = I;
      I.__name__ = "ApplicationMain";
      I.main = function () {
        $c.__registerEntryPoint("PsychEngine", I.create);
      };
      I.create = function (a) {
        var b = new Ji();
        Ra.init(a);
        b.meta.h.build = "1";
        b.meta.h.company = "ShadowMario";
        b.meta.h.file = "PsychEngine";
        b.meta.h.name = "Friday Night Funkin': Psych Engine";
        b.meta.h.packageName = "com.shadowmario.psychengine";
        b.meta.h.version = "0.2.8";
        var c = {
          allowHighDPI: true,
          alwaysOnTop: false,
          borderless: false,
          element: null,
          frameRate: 60,
          height: 720,
          hidden: false,
          maximized: false,
          minimized: false,
          parameters: {},
          resizable: true,
          title: "Friday Night Funkin': Psych Engine",
          width: 1280,
          x: null,
          y: null,
          context: {
            antialiasing: 0,
            background: 0,
            colorDepth: 32,
            depth: true,
            hardware: true,
            stencil: true,
            type: null,
            vsync: false
          }
        };
        if (b.__window == null && a != null) {
          for (var d = 0, e = ja.fields(a); d < e.length;) {
            var f = e[d];
            ++d;
            if (Object.prototype.hasOwnProperty.call(c, f)) {
              c[f] = ja.field(a, f);
            } else if (Object.prototype.hasOwnProperty.call(c.context, f)) {
              c.context[f] = ja.field(a, f);
            }
          }
        }
        b.createWindow(c);
        var k = new hk(new ik());
        b.__preloader.onProgress.add(function (a, b) {
          k.update(a, b);
        });
        b.__preloader.onComplete.add(function () {
          k.start();
        });
        var t = b.__window.stage;
        k.onComplete.add(function () {
          I.start(t);
        });
        d = 0;
        for (e = Ra.preloadLibraries; d < e.length;) {
          a = e[d];
          ++d;
          b.__preloader.addLibrary(a);
        }
        d = 0;
        for (e = Ra.preloadLibraryNames; d < e.length;) {
          a = e[d];
          ++d;
          b.__preloader.addLibraryName(a);
        }
        b.__preloader.load();
        b.exec();
      };
      I.start = function (a) {
        if (a.__uncaughtErrorEvents.__enabled) {
          try {
            Wb.main();
            a.dispatchEvent(new Ga("resize", false, false));
            if (a.window.__fullscreen) {
              a.dispatchEvent(new zg("fullScreen", false, false, true, true));
            }
          } catch (c) {
            Pa.lastError = c;
            var b = G.caught(c).unwrap();
            a.__handleError(b);
          }
        } else {
          Wb.main();
          a.dispatchEvent(new Ga("resize", false, false));
          if (a.window.__fullscreen) {
            a.dispatchEvent(new zg("fullScreen", false, false, true, true));
          }
        }
      };
      function X() {}
      g["openfl.events.IEventDispatcher"] = X;
      X.__name__ = "openfl.events.IEventDispatcher";
      X.__isInterface__ = true;
      X.prototype = {
        __class__: X
      };
      function pa(a) {
        if (a != null) {
          this.__targetDispatcher = a;
        }
      }
      g["openfl.events.EventDispatcher"] = pa;
      pa.__name__ = "openfl.events.EventDispatcher";
      pa.__interfaces__ = [X];
      pa.prototype = {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (b != null) {
            if (this.__eventMap == null) {
              this.__eventMap = new ua();
              this.__iterators = new ua();
            }
            if (Object.prototype.hasOwnProperty.call(this.__eventMap.h, a)) {
              n = this.__eventMap.h[a];
              for (var f = 0, k = n.length; f < k;) {
                var t = f++;
                if (n[t].match(b, c)) {
                  return;
                }
              }
              a = this.__iterators.h[a];
              for (f = 0; f < a.length;) {
                k = a[f];
                ++f;
                if (k.active) {
                  k.copy();
                }
              }
              this.__addListenerByPriority(n, new gh(b, c, d, e));
            } else {
              var n = [];
              n.push(new gh(b, c, d, e));
              k = new Ki(n);
              this.__eventMap.h[a] = n;
              this.__iterators.h[a] = [k];
            }
          }
        },
        dispatchEvent: function (a) {
          a.target = this.__targetDispatcher ?? this;
          return this.__dispatchEvent(a);
        },
        hasEventListener: function (a) {
          if (this.__eventMap == null) {
            return false;
          } else {
            return Object.prototype.hasOwnProperty.call(this.__eventMap.h, a);
          }
        },
        removeEventListener: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          if (this.__eventMap != null && b != null) {
            var d = this.__eventMap.h[a];
            if (d != null) {
              var e = this.__iterators.h[a];
              for (var f = 0, k = d.length; f < k;) {
                var t = f++;
                if (d[t].match(b, c)) {
                  for (b = 0; b < e.length;) {
                    c = e[b];
                    ++b;
                    c.remove(d[t], t);
                  }
                  d.splice(t, 1);
                  break;
                }
              }
              if (d.length == 0) {
                d = this.__eventMap;
                e = a;
                if (Object.prototype.hasOwnProperty.call(d.h, e)) {
                  delete d.h[e];
                }
                d = this.__iterators;
                e = a;
                if (Object.prototype.hasOwnProperty.call(d.h, e)) {
                  delete d.h[e];
                }
              }
              if (Object.keys(this.__eventMap.h).length <= 0) {
                this.__iterators = this.__eventMap = null;
              }
            }
          }
        },
        __dispatchEvent: function (a) {
          if (this.__eventMap == null || a == null) {
            return true;
          }
          var b = a.type;
          var c = this.__eventMap.h[b];
          if (c == null) {
            return true;
          }
          if (a.target == null) {
            a.target = this.__targetDispatcher ?? this;
          }
          a.currentTarget = this;
          var d = a.eventPhase == 1;
          b = this.__iterators.h[b];
          var e = b[0];
          if (e.active) {
            e = new Ki(c);
            b.push(e);
          }
          e.start();
          for (var f = e; f.hasNext();) {
            var k = f.next();
            if (k != null && k.useCapture == d) {
              if (k.useWeakReference && k.weakRefCallback != null) {
                var t = k.weakRefCallback.deref();
                if (t == null) {
                  t = e.index - 1;
                  c.splice(t, 1);
                  e.remove(k, t);
                } else {
                  t(a);
                }
              } else {
                k.callback(a);
              }
              if (a.__isCanceledNow) {
                break;
              }
            }
          }
          e.stop();
          if (e != b[0]) {
            r.remove(b, e);
          } else {
            e.reset(c);
          }
          return !a.isDefaultPrevented();
        },
        __addListenerByPriority: function (a, b) {
          for (var c = a.length, d = c, e = 0; e < c;) {
            var f = e++;
            if (a[f].priority < b.priority) {
              d = f;
              break;
            }
          }
          a.splice(d, 0, b);
        },
        __class__: pa
      };
      function na() {}
      g["openfl.display.IBitmapDrawable"] = na;
      na.__name__ = "openfl.display.IBitmapDrawable";
      na.__isInterface__ = true;
      na.prototype = {
        __class__: na
      };
      var ab = {
        toIntVector: function (a, b, c, d) {
          return new Lh(b, c, d);
        },
        toFloatVector: function (a, b, c, d) {
          return new Rf(b, c, d, true);
        },
        toObjectVector: function (a, b, c, d) {
          return new hh(b, c, d, true);
        },
        toNullVector: function (a, b, c, d) {
          return new hh(b, c, d, true);
        }
      };
      function bb(a, b, c) {
        this.__pool = new la();
        this.inactiveObjects = this.activeObjects = 0;
        this.__inactiveObject1 = this.__inactiveObject0 = null;
        this.__inactiveObjectList = new jb();
        if (a != null) {
          this.create = a;
        }
        if (b != null) {
          this.clean = b;
        }
        if (c != null) {
          this.set_size(c);
        }
      }
      g["lime.utils.ObjectPool"] = bb;
      bb.__name__ = "lime.utils.ObjectPool";
      bb.prototype = {
        clean: function (a) {},
        create: function () {
          return null;
        },
        get: function () {
          var a = null;
          if (this.inactiveObjects > 0) {
            if (this.__inactiveObject0 != null) {
              a = this.__inactiveObject0;
              this.__inactiveObject0 = null;
            } else if (this.__inactiveObject1 != null) {
              a = this.__inactiveObject1;
              this.__inactiveObject1 = null;
            } else {
              a = this.__inactiveObjectList.pop();
              if (this.__inactiveObjectList.length > 0) {
                this.__inactiveObject0 = this.__inactiveObjectList.pop();
              }
              if (this.__inactiveObjectList.length > 0) {
                this.__inactiveObject1 = this.__inactiveObjectList.pop();
              }
            }
            this.inactiveObjects--;
            this.activeObjects++;
          } else if (this.__size == null || this.activeObjects < this.__size) {
            a = this.create();
            if (a != null) {
              this.__pool.set(a, true);
              this.activeObjects++;
            }
          }
          return a;
        },
        release: function (a) {
          this.activeObjects--;
          if (this.__size == null || this.activeObjects + this.inactiveObjects < this.__size) {
            this.clean(a);
            if (this.__inactiveObject0 == null) {
              this.__inactiveObject0 = a;
            } else if (this.__inactiveObject1 == null) {
              this.__inactiveObject1 = a;
            } else {
              this.__inactiveObjectList.add(a);
            }
            this.inactiveObjects++;
          } else {
            this.__pool.remove(a);
          }
        },
        __removeInactive: function (a) {
          if (!(a <= 0) && this.inactiveObjects != 0 && (this.__inactiveObject0 != null && (this.__pool.remove(this.__inactiveObject0), this.__inactiveObject0 = null, this.inactiveObjects--, --a), a != 0 && this.inactiveObjects != 0 && (this.__inactiveObject1 != null && (this.__pool.remove(this.__inactiveObject1), this.__inactiveObject1 = null, this.inactiveObjects--, --a), a != 0 && this.inactiveObjects != 0))) {
            for (var b = this.__inactiveObjectList.h; b != null;) {
              var c = b.item;
              b = b.next;
              this.__pool.remove(c);
              this.__inactiveObjectList.remove(c);
              this.inactiveObjects--;
              --a;
              if (a == 0 || this.inactiveObjects == 0) {
                break;
              }
            }
          }
        },
        set_size: function (a) {
          if (a == null) {
            this.__size = null;
          } else {
            var b = this.inactiveObjects + this.activeObjects;
            this.__size = a;
            if (b > a) {
              this.__removeInactive(b - a);
            } else if (a > b) {
              for (var c = 0, d = a - b; c < d;) {
                c++;
                b = this.create();
                if (b != null) {
                  this.__pool.set(b, false);
                  this.__inactiveObjectList.add(b);
                  this.inactiveObjects++;
                } else {
                  break;
                }
              }
            }
          }
          return a;
        },
        __class__: bb,
        __properties__: {
          set_size: "set_size"
        }
      };
      function gc() {}
      g["haxe.IMap"] = gc;
      gc.__name__ = "haxe.IMap";
      gc.__isInterface__ = true;
      gc.prototype = {
        __class__: gc
      };
      function la() {
        this.h = {
          __keys__: {}
        };
      }
      g["haxe.ds.ObjectMap"] = la;
      la.__name__ = "haxe.ds.ObjectMap";
      la.__interfaces__ = [gc];
      la.prototype = {
        set: function (a, b) {
          var c = a.__id__;
          if (c == null) {
            c = a.__id__ = E.$haxeUID++;
          }
          this.h[c] = b;
          this.h.__keys__[c] = a;
        },
        get: function (a) {
          return this.h[a.__id__];
        },
        remove: function (a) {
          a = a.__id__;
          if (this.h.__keys__[a] == null) {
            return false;
          }
          delete this.h[a];
          delete this.h.__keys__[a];
          return true;
        },
        keys: function () {
          var a = [];
          var b;
          for (b in this.h.__keys__) {
            if (this.h.hasOwnProperty(b)) {
              a.push(this.h.__keys__[b]);
            }
          }
          return new Qf(a);
        },
        __class__: la
      };
      function jb() {
        this.length = 0;
      }
      g["haxe.ds.List"] = jb;
      jb.__name__ = "haxe.ds.List";
      jb.prototype = {
        add: function (a) {
          a = new jk(a, null);
          if (this.h == null) {
            this.h = a;
          } else {
            this.q.next = a;
          }
          this.q = a;
          this.length++;
        },
        push: function (a) {
          this.h = a = new jk(a, this.h);
          if (this.q == null) {
            this.q = a;
          }
          this.length++;
        },
        pop: function () {
          if (this.h == null) {
            return null;
          }
          var a = this.h.item;
          this.h = this.h.next;
          if (this.h == null) {
            this.q = null;
          }
          this.length--;
          return a;
        },
        clear: function () {
          this.q = this.h = null;
          this.length = 0;
        },
        remove: function (a) {
          var b = null;
          for (var c = this.h; c != null;) {
            if (c.item == a) {
              if (b == null) {
                this.h = c.next;
              } else {
                b.next = c.next;
              }
              if (this.q == c) {
                this.q = b;
              }
              this.length--;
              return true;
            }
            b = c;
            c = c.next;
          }
          return false;
        },
        iterator: function () {
          return new kn(this.h);
        },
        __class__: jb
      };
      function wa() {
        pa.call(this);
        this.__alpha = this.__drawableType = 1;
        this.__blendMode = 10;
        this.__cacheAsBitmap = false;
        this.__transform = new za();
        this.__visible = true;
        this.__rotationSine = this.__rotation = 0;
        this.__worldAlpha = this.__scaleY = this.__scaleX = this.__rotationCosine = 1;
        this.__worldBlendMode = 10;
        this.__worldTransform = new za();
        this.__worldColorTransform = new Lb();
        this.__renderTransform = new za();
        this.__worldVisible = true;
        this.set_name("instance" + ++wa.__instanceCount);
        if (wa.__initStage != null) {
          this.stage = wa.__initStage;
          wa.__initStage = null;
          this.stage.addChild(this);
        }
      }
      g["openfl.display.DisplayObject"] = wa;
      wa.__name__ = "openfl.display.DisplayObject";
      wa.__interfaces__ = [na];
      wa.__super__ = pa;
      wa.prototype = q(pa.prototype, {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          switch (a) {
            case "activate":
            case "deactivate":
            case "enterFrame":
            case "exitFrame":
            case "frameConstructed":
            case "render":
              if (!Object.prototype.hasOwnProperty.call(wa.__broadcastEvents.h, a)) {
                wa.__broadcastEvents.h[a] = [];
              }
              var f = wa.__broadcastEvents.h[a];
              if (f.indexOf(this) == -1) {
                f.push(this);
              }
              break;
            case "clearDOM":
            case "renderCairo":
            case "renderCanvas":
            case "renderDOM":
            case "renderOpenGL":
              if (this.__customRenderEvent == null) {
                this.__customRenderEvent = new kk(null);
                this.__customRenderEvent.objectColorTransform = new Lb();
                this.__customRenderEvent.objectMatrix = new za();
                this.__customRenderClear = true;
              }
          }
          pa.prototype.addEventListener.call(this, a, b, c, d, e);
        },
        dispatchEvent: function (a) {
          if (a instanceof Sb) {
            var b = this.__getRenderTransform();
            a.stageX = a.localX * b.a + a.localY * b.c + b.tx;
            b = this.__getRenderTransform();
            a.stageY = a.localX * b.b + a.localY * b.d + b.ty;
          } else if (a instanceof Ue) {
            b = this.__getRenderTransform();
            a.stageX = a.localX * b.a + a.localY * b.c + b.tx;
            b = this.__getRenderTransform();
            a.stageY = a.localX * b.b + a.localY * b.d + b.ty;
          }
          a.target = this;
          return this.__dispatchWithCapture(a);
        },
        getBounds: function (a) {
          var b = za.__pool.get();
          if (a != null && a != this) {
            b.copyFrom(this.__getWorldTransform());
            var c = za.__pool.get();
            c.copyFrom(a.__getWorldTransform());
            c.invert();
            b.concat(c);
            za.__pool.release(c);
          } else {
            b.identity();
          }
          a = new da();
          this.__getBounds(a, b);
          za.__pool.release(b);
          return a;
        },
        globalToLocal: function (a) {
          return this.__globalToLocal(a, new lb());
        },
        removeEventListener: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          pa.prototype.removeEventListener.call(this, a, b, c);
          switch (a) {
            case "activate":
            case "deactivate":
            case "enterFrame":
            case "exitFrame":
            case "frameConstructed":
            case "render":
              if (!this.hasEventListener(a)) {
                if (Object.prototype.hasOwnProperty.call(wa.__broadcastEvents.h, a)) {
                  r.remove(wa.__broadcastEvents.h[a], this);
                }
              }
              break;
            case "clearDOM":
            case "renderCairo":
            case "renderCanvas":
            case "renderDOM":
            case "renderOpenGL":
              if (!this.hasEventListener("clearDOM") && !this.hasEventListener("renderCairo") && !this.hasEventListener("renderCanvas") && !this.hasEventListener("renderDOM") && !this.hasEventListener("renderOpenGL")) {
                this.__customRenderEvent = null;
              }
          }
        },
        __cleanup: function () {
          this.__context = this.__canvas = this.__cairo = null;
          if (this.__graphics != null) {
            this.__graphics.__cleanup();
          }
          if (this.__cacheBitmap != null) {
            this.__cacheBitmap.__cleanup();
            this.__cacheBitmap = null;
          }
          if (this.__cacheBitmapData != null) {
            this.__cacheBitmapData.dispose();
            this.__cacheBitmapData = null;
          }
        },
        __dispatch: function (a) {
          if (this.__eventMap != null && this.hasEventListener(a.type)) {
            var b = pa.prototype.__dispatchEvent.call(this, a);
            if (a.__isCanceled) {
              return true;
            } else {
              return b;
            }
          }
          return true;
        },
        __dispatchChildren: function (a) {},
        __dispatchEvent: function (a) {
          var b = a.bubbles ? this.parent : null;
          var c = pa.prototype.__dispatchEvent.call(this, a);
          if (a.__isCanceled) {
            return true;
          }
          if (b != null && b != this) {
            a.eventPhase = 3;
            if (a.target == null) {
              a.target = this;
            }
            b.__dispatchEvent(a);
          }
          return c;
        },
        __dispatchWithCapture: function (a) {
          if (a.target == null) {
            a.target = this;
          }
          if (this.parent != null) {
            a.eventPhase = 1;
            if (this.parent == this.stage) {
              this.parent.__dispatch(a);
            } else {
              var b = wa.__tempStack.get();
              for (var c = this.parent, d = 0; c != null;) {
                b.set(d, c);
                c = c.parent;
                ++d;
              }
              c = 0;
              for (var e = d; c < e;) {
                var f = c++;
                b.get(d - f - 1).__dispatch(a);
              }
              wa.__tempStack.release(b);
            }
          }
          a.eventPhase = 2;
          return this.__dispatchEvent(a);
        },
        __enterFrame: function (a) {},
        __getBounds: function (a, b) {
          if (this.__graphics != null) {
            this.__graphics.__getBounds(a, b);
          }
        },
        __getCursor: function () {
          return null;
        },
        __getFilterBounds: function (a, b) {
          this.__getRenderBounds(a, b);
          if (this.__filters != null) {
            b = da.__pool.get();
            for (var c = 0, d = this.__filters; c < d.length;) {
              var e = d[c];
              ++c;
              b.__expand(-e.__leftExtension, -e.__topExtension, e.__leftExtension + e.__rightExtension, e.__topExtension + e.__bottomExtension);
            }
            a.width += b.width;
            a.height += b.height;
            a.x += b.x;
            a.y += b.y;
            da.__pool.release(b);
          }
        },
        __getInteractive: function (a) {
          return false;
        },
        __getLocalBounds: function (a) {
          this.__getBounds(a, this.__transform);
          a.x -= this.__transform.tx;
          a.y -= this.__transform.ty;
        },
        __getRenderBounds: function (a, b) {
          if (this.__scrollRect == null) {
            this.__getBounds(a, b);
          } else {
            var c = da.__pool.get();
            c.copyFrom(this.__scrollRect);
            c.__transform(c, b);
            a.__expand(c.x, c.y, c.width, c.height);
            da.__pool.release(c);
          }
        },
        __getRenderTransform: function () {
          this.__getWorldTransform();
          return this.__renderTransform;
        },
        __getWorldTransform: function () {
          if (this.__transformDirty || this.__worldTransformInvalid) {
            var a = [];
            var b = this;
            if (this.parent == null) {
              this.__update(true, false);
            } else {
              while (b != this.stage && (a.push(b), b = b.parent, b != null));
            }
            for (var c = a.length; --c >= 0;) {
              b = a[c];
              b.__update(true, false);
            }
          }
          return this.__worldTransform;
        },
        __globalToLocal: function (a, b) {
          this.__getRenderTransform();
          if (a == b) {
            var c = this.__renderTransform;
            var d = c.a * c.d - c.b * c.c;
            if (d == 0) {
              a.x = -c.tx;
              a.y = -c.ty;
            } else {
              var e = 1 / d * (c.c * (c.ty - a.y) + c.d * (a.x - c.tx));
              a.y = 1 / d * (c.a * (a.y - c.ty) + c.b * (c.tx - a.x));
              a.x = e;
            }
          } else {
            c = this.__renderTransform;
            d = c.a * c.d - c.b * c.c;
            b.x = d == 0 ? -c.tx : 1 / d * (c.c * (c.ty - a.y) + c.d * (a.x - c.tx));
            c = this.__renderTransform;
            d = c.a * c.d - c.b * c.c;
            b.y = d == 0 ? -c.ty : 1 / d * (c.a * (a.y - c.ty) + c.b * (c.tx - a.x));
          }
          return b;
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (this.__graphics != null) {
            if (!f.__visible || this.__isMask || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
              return false;
            }
            if (this.__graphics.__hitTest(a, b, c, this.__getRenderTransform())) {
              if (d != null && !e) {
                d.push(f);
              }
              return true;
            }
          }
          return false;
        },
        __hitTestMask: function (a, b) {
          if (this.__graphics != null && this.__graphics.__hitTest(a, b, true, this.__getRenderTransform())) {
            return true;
          } else {
            return false;
          }
        },
        __setParentRenderDirty: function () {
          var a = this.__renderParent ?? this.parent;
          if (a != null && !a.__renderDirty) {
            a.__renderDirty = true;
            a.__setParentRenderDirty();
          }
        },
        __setStageReference: function (a) {
          this.stage = a;
        },
        __setTransformDirty: function () {
          if (!this.__transformDirty) {
            this.__transformDirty = true;
            this.__setWorldTransformInvalid();
            this.__setParentRenderDirty();
          }
        },
        __setWorldTransformInvalid: function () {
          this.__worldTransformInvalid = true;
        },
        __update: function (a, b) {
          var c = this.__renderParent ?? this.parent;
          if (this.__isMask && c == null) {
            c = this.__maskTarget;
          }
          this.__renderable = this.__visible && this.__scaleX != 0 && this.__scaleY != 0 && !this.__isMask && (c == null || !c.__isMask);
          this.__updateTransforms();
          this.__worldTransformInvalid = this.__transformDirty = false;
          if (!a) {
            if (wa.__supportDOM) {
              this.__renderTransformChanged = !this.__renderTransform.equals(this.__renderTransformCache);
              if (this.__renderTransformCache == null) {
                this.__renderTransformCache = this.__renderTransform.clone();
              } else {
                this.__renderTransformCache.copyFrom(this.__renderTransform);
              }
            }
            if (c != null) {
              if (wa.__supportDOM) {
                var d = c.__worldVisible && this.__visible;
                this.__worldVisibleChanged = this.__worldVisible != d;
                this.__worldVisible = d;
                d = this.get_alpha() * c.__worldAlpha;
                this.__worldAlphaChanged = this.__worldAlpha != d;
                this.__worldAlpha = d;
              } else {
                this.__worldAlpha = this.get_alpha() * c.__worldAlpha;
              }
              if (this.__objectTransform != null) {
                this.__worldColorTransform.__copyFrom(this.__objectTransform.__colorTransform);
                this.__worldColorTransform.__combine(c.__worldColorTransform);
              } else {
                this.__worldColorTransform.__copyFrom(c.__worldColorTransform);
              }
              this.__worldBlendMode = this.__blendMode == null || this.__blendMode == 10 ? c.__worldBlendMode : this.__blendMode;
              this.__worldShader = this.__shader == null ? c.__shader : this.__shader;
              this.__worldScale9Grid = this.__scale9Grid == null ? c.__scale9Grid : this.__scale9Grid;
            } else {
              this.__worldAlpha = this.get_alpha();
              if (wa.__supportDOM) {
                this.__worldVisibleChanged = this.__worldVisible != this.__visible;
                this.__worldVisible = this.__visible;
                this.__worldAlphaChanged = this.__worldAlpha != this.get_alpha();
              }
              if (this.__objectTransform != null) {
                this.__worldColorTransform.__copyFrom(this.__objectTransform.__colorTransform);
              } else {
                this.__worldColorTransform.__identity();
              }
              this.__worldBlendMode = this.__blendMode;
              this.__worldShader = this.__shader;
              this.__worldScale9Grid = this.__scale9Grid;
            }
          }
          if (b && this.get_mask() != null) {
            this.get_mask().__update(a, true);
          }
        },
        __updateTransforms: function (a) {
          var b = a != null;
          a = b ? a : this.__transform;
          if (this.__worldTransform == null) {
            this.__worldTransform = new za();
          }
          if (this.__renderTransform == null) {
            this.__renderTransform = new za();
          }
          var c = this.__renderParent ?? this.parent;
          if (b || this.parent == null) {
            this.__worldTransform.copyFrom(a);
          } else {
            var d = this.parent.__worldTransform;
            var e = this.__worldTransform;
            e.a = a.a * d.a + a.b * d.c;
            e.b = a.a * d.b + a.b * d.d;
            e.c = a.c * d.a + a.d * d.c;
            e.d = a.c * d.b + a.d * d.d;
            e.tx = a.tx * d.a + a.ty * d.c + d.tx;
            e.ty = a.tx * d.b + a.ty * d.d + d.ty;
          }
          if (b || c == null) {
            this.__renderTransform.copyFrom(a);
          } else {
            d = c.__renderTransform;
            e = this.__renderTransform;
            e.a = a.a * d.a + a.b * d.c;
            e.b = a.a * d.b + a.b * d.d;
            e.c = a.c * d.a + a.d * d.c;
            e.d = a.c * d.b + a.d * d.d;
            e.tx = a.tx * d.a + a.ty * d.c + d.tx;
            e.ty = a.tx * d.b + a.ty * d.d + d.ty;
          }
          if (this.__scrollRect != null) {
            b = this.__renderTransform;
            a = -this.__scrollRect.x;
            c = -this.__scrollRect.y;
            b.tx = a * b.a + c * b.c + b.tx;
            b.ty = a * b.b + c * b.d + b.ty;
          }
        },
        get_alpha: function () {
          return this.__alpha;
        },
        set_alpha: function (a) {
          if (a > 1) {
            a = 1;
          }
          if (a < 0) {
            a = 0;
          }
          if (a != this.__alpha && !this.get_cacheAsBitmap() && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return this.__alpha = a;
        },
        set_blendMode: function (a) {
          if (a == null) {
            a = 10;
          }
          if (a != this.__blendMode && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return this.__blendMode = a;
        },
        get_cacheAsBitmap: function () {
          if (this.__filters == null) {
            return this.__cacheAsBitmap;
          } else {
            return true;
          }
        },
        set_filters: function (a) {
          if (a != null && a.length > 0) {
            var b = [];
            for (var c = 0; c < a.length;) {
              var d = a[c];
              ++c;
              d = d.clone();
              d.__renderDirty = true;
              b.push(d);
            }
            this.__filters = b;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          } else if (this.__filters != null) {
            this.__filters = null;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return a;
        },
        get_height: function () {
          var a = da.__pool.get();
          this.__getLocalBounds(a);
          var b = a.height;
          da.__pool.release(a);
          return b;
        },
        set_height: function (a) {
          var b = da.__pool.get();
          var c = za.__pool.get();
          c.identity();
          this.__getBounds(b, c);
          if (a != b.height) {
            this.set_scaleY(a / b.height);
          } else {
            this.set_scaleY(1);
          }
          da.__pool.release(b);
          za.__pool.release(c);
          return a;
        },
        get_loaderInfo: function () {
          if (this.stage != null) {
            return yd.current.__loaderInfo;
          } else {
            return null;
          }
        },
        get_mask: function () {
          return this.__mask;
        },
        set_mask: function (a) {
          if (a == this.__mask) {
            return a;
          }
          if (a != this.__mask) {
            this.__setTransformDirty();
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          if (this.__mask != null) {
            this.__mask.__isMask = false;
            this.__mask.__maskTarget = null;
            this.__mask.__setTransformDirty();
            var b = this.__mask;
            if (!b.__renderDirty) {
              b.__renderDirty = true;
              b.__setParentRenderDirty();
            }
          }
          if (a != null) {
            a.__isMask = true;
            a.__maskTarget = this;
            a.__setWorldTransformInvalid();
          }
          if (this.__cacheBitmap != null && this.__cacheBitmap.get_mask() != a) {
            this.__cacheBitmap.set_mask(a);
          }
          return this.__mask = a;
        },
        get_mouseX: function () {
          var a = this.stage != null ? this.stage.__mouseX : yd.current.stage.__mouseX;
          var b = this.stage != null ? this.stage.__mouseY : yd.current.stage.__mouseY;
          var c = this.__getRenderTransform();
          var d = c.a * c.d - c.b * c.c;
          if (d == 0) {
            return -c.tx;
          } else {
            return 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx));
          }
        },
        get_mouseY: function () {
          var a = this.stage != null ? this.stage.__mouseX : yd.current.stage.__mouseX;
          var b = this.stage != null ? this.stage.__mouseY : yd.current.stage.__mouseY;
          var c = this.__getRenderTransform();
          var d = c.a * c.d - c.b * c.c;
          if (d == 0) {
            return -c.ty;
          } else {
            return 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a));
          }
        },
        get_name: function () {
          return this.__name;
        },
        set_name: function (a) {
          return this.__name = a;
        },
        get_rotation: function () {
          return this.__rotation;
        },
        set_rotation: function (a) {
          if (a != this.__rotation) {
            this.__rotation = a;
            var b = Math.PI / 180 * this.__rotation;
            this.__rotationSine = Math.sin(b);
            this.__rotationCosine = Math.cos(b);
            this.__transform.a = this.__rotationCosine * this.__scaleX;
            this.__transform.b = this.__rotationSine * this.__scaleX;
            this.__transform.c = -this.__rotationSine * this.__scaleY;
            this.__transform.d = this.__rotationCosine * this.__scaleY;
            this.__setTransformDirty();
          }
          return a;
        },
        get_scaleX: function () {
          return this.__scaleX;
        },
        set_scaleX: function (a) {
          if (a != this.__scaleX) {
            this.__scaleX = a;
            if (this.__transform.b == 0) {
              if (a != this.__transform.a) {
                this.__setTransformDirty();
              }
              this.__transform.a = a;
            } else {
              var b = this.__rotationCosine * a;
              var c = this.__rotationSine * a;
              if (this.__transform.a != b || this.__transform.b != c) {
                this.__setTransformDirty();
              }
              this.__transform.a = b;
              this.__transform.b = c;
            }
          }
          return a;
        },
        get_scaleY: function () {
          return this.__scaleY;
        },
        set_scaleY: function (a) {
          if (a != this.__scaleY) {
            this.__scaleY = a;
            if (this.__transform.c == 0) {
              if (a != this.__transform.d) {
                this.__setTransformDirty();
              }
              this.__transform.d = a;
            } else {
              var b = -this.__rotationSine * a;
              var c = this.__rotationCosine * a;
              if (this.__transform.d != c || this.__transform.c != b) {
                this.__setTransformDirty();
              }
              this.__transform.c = b;
              this.__transform.d = c;
            }
          }
          return a;
        },
        get_scrollRect: function () {
          if (this.__scrollRect == null) {
            return null;
          } else {
            return this.__scrollRect.clone();
          }
        },
        set_scrollRect: function (a) {
          if (a == null && this.__scrollRect == null || a != null && this.__scrollRect != null && this.__scrollRect.equals(a)) {
            return a;
          }
          if (a != null) {
            if (this.__scrollRect == null) {
              this.__scrollRect = new da();
            }
            this.__scrollRect.copyFrom(a);
          } else {
            this.__scrollRect = null;
          }
          this.__setTransformDirty();
          if (wa.__supportDOM && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return a;
        },
        get_transform: function () {
          if (this.__objectTransform == null) {
            this.__objectTransform = new lk(this);
          }
          return this.__objectTransform;
        },
        set_transform: function (a) {
          if (a == null) {
            throw new Li("Parameter transform must be non-null.");
          }
          if (this.__objectTransform == null) {
            this.__objectTransform = new lk(this);
          }
          this.__setTransformDirty();
          this.__objectTransform.set_matrix(a.get_matrix());
          if (!this.__objectTransform.__colorTransform.__equals(a.__colorTransform, true) || !this.get_cacheAsBitmap() && this.__objectTransform.__colorTransform.alphaMultiplier != a.__colorTransform.alphaMultiplier) {
            this.__objectTransform.__colorTransform.__copyFrom(a.get_colorTransform());
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__objectTransform;
        },
        get_visible: function () {
          return this.__visible;
        },
        set_visible: function (a) {
          if (a != this.__visible && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return this.__visible = a;
        },
        get_width: function () {
          var a = da.__pool.get();
          this.__getLocalBounds(a);
          var b = a.width;
          da.__pool.release(a);
          return b;
        },
        set_width: function (a) {
          var b = da.__pool.get();
          var c = za.__pool.get();
          c.identity();
          this.__getBounds(b, c);
          if (a != b.width) {
            this.set_scaleX(a / b.width);
          } else {
            this.set_scaleX(1);
          }
          da.__pool.release(b);
          za.__pool.release(c);
          return a;
        },
        get_x: function () {
          return this.__transform.tx;
        },
        set_x: function (a) {
          if (a != this.__transform.tx) {
            this.__setTransformDirty();
          }
          return this.__transform.tx = a;
        },
        get_y: function () {
          return this.__transform.ty;
        },
        set_y: function (a) {
          if (a != this.__transform.ty) {
            this.__setTransformDirty();
          }
          return this.__transform.ty = a;
        },
        __class__: wa,
        __properties__: {
          set_filters: "set_filters",
          set_blendMode: "set_blendMode",
          set_y: "set_y",
          get_y: "get_y",
          set_x: "set_x",
          get_x: "get_x",
          set_width: "set_width",
          get_width: "get_width",
          set_visible: "set_visible",
          get_visible: "get_visible",
          set_transform: "set_transform",
          get_transform: "get_transform",
          set_scrollRect: "set_scrollRect",
          get_scrollRect: "get_scrollRect",
          set_scaleY: "set_scaleY",
          get_scaleY: "get_scaleY",
          set_scaleX: "set_scaleX",
          get_scaleX: "get_scaleX",
          set_rotation: "set_rotation",
          get_rotation: "get_rotation",
          set_name: "set_name",
          get_name: "get_name",
          get_mouseY: "get_mouseY",
          get_mouseX: "get_mouseX",
          set_mask: "set_mask",
          get_mask: "get_mask",
          get_loaderInfo: "get_loaderInfo",
          set_height: "set_height",
          get_height: "get_height",
          get_cacheAsBitmap: "get_cacheAsBitmap",
          set_alpha: "set_alpha",
          get_alpha: "get_alpha"
        }
      });
      function Ca() {
        wa.call(this);
        this.doubleClickEnabled = false;
        this.mouseEnabled = true;
        this.needsSoftKeyboard = false;
        this.__tabEnabled = null;
        this.__tabIndex = -1;
      }
      g["openfl.display.InteractiveObject"] = Ca;
      Ca.__name__ = "openfl.display.InteractiveObject";
      Ca.__super__ = wa;
      Ca.prototype = q(wa.prototype, {
        __allowMouseFocus: function () {
          if (this.mouseEnabled) {
            return this.get_tabEnabled();
          } else {
            return false;
          }
        },
        __getInteractive: function (a) {
          if (a != null) {
            a.push(this);
            if (this.parent != null) {
              this.parent.__getInteractive(a);
            }
          }
          return true;
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || e && !this.mouseEnabled) {
            return false;
          } else {
            return wa.prototype.__hitTest.call(this, a, b, c, d, e, f);
          }
        },
        __tabTest: function (a) {
          if (this.get_tabEnabled()) {
            a.push(this);
          }
        },
        get_tabEnabled: function () {
          if (this.__tabEnabled == 1) {
            return true;
          } else {
            return false;
          }
        },
        get_tabIndex: function () {
          return this.__tabIndex;
        },
        __class__: Ca,
        __properties__: q(wa.prototype.__properties__, {
          get_tabIndex: "get_tabIndex",
          get_tabEnabled: "get_tabEnabled"
        })
      });
      function gb() {
        Ca.call(this);
        this.__tabChildren = this.mouseChildren = true;
        this.__children = [];
        this.__removedChildren = ab.toObjectVector(null);
      }
      g["openfl.display.DisplayObjectContainer"] = gb;
      gb.__name__ = "openfl.display.DisplayObjectContainer";
      gb.__super__ = Ca;
      gb.prototype = q(Ca.prototype, {
        addChild: function (a) {
          return this.addChildAt(a, this.get_numChildren());
        },
        addChildAt: function (a, b) {
          if (a == null) {
            a = new Li("Error #2007: Parameter child must be non-null.");
            a.errorID = 2007;
            throw a;
          }
          if (a.stage == a) {
            a = new Mh("Error #3783: A Stage object cannot be added as the child of another object.");
            a.errorID = 3783;
            throw a;
          }
          if (b > this.__children.length || b < 0) {
            throw G.thrown("Invalid index position " + b);
          }
          if (a.parent == this) {
            if (this.__children[b] != a) {
              r.remove(this.__children, a);
              this.__children.splice(b, 0, a);
              if (!this.__renderDirty) {
                this.__renderDirty = true;
                this.__setParentRenderDirty();
              }
            }
          } else {
            if (a.parent != null) {
              a.parent.removeChild(a);
            }
            this.__children.splice(b, 0, a);
            a.parent = this;
            if (b = this.stage != null && a.stage == null) {
              a.__setStageReference(this.stage);
            }
            a.__setTransformDirty();
            if (!a.__renderDirty) {
              a.__renderDirty = true;
              a.__setParentRenderDirty();
            }
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            var c = new Ga("added");
            c.bubbles = true;
            c.target = a;
            a.__dispatchWithCapture(c);
            if (b) {
              c = new Ga("addedToStage", false, false);
              a.__dispatchWithCapture(c);
              a.__dispatchChildren(c);
            }
          }
          return a;
        },
        contains: function (a) {
          while (a != this && a != null) {
            a = a.parent;
          }
          return a == this;
        },
        getChildAt: function (a) {
          if (a >= 0 && a < this.__children.length) {
            return this.__children[a];
          } else {
            return null;
          }
        },
        getChildByName: function (a) {
          for (var b = 0, c = this.__children; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.get_name() == a) {
              return d;
            }
          }
          return null;
        },
        getChildIndex: function (a) {
          for (var b = 0, c = this.__children.length; b < c;) {
            var d = b++;
            if (this.__children[d] == a) {
              return d;
            }
          }
          return -1;
        },
        removeChild: function (a) {
          if (a != null && a.parent == this) {
            a.__setTransformDirty();
            if (!a.__renderDirty) {
              a.__renderDirty = true;
              a.__setParentRenderDirty();
            }
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            var b = new Ga("removed", true);
            a.__dispatchWithCapture(b);
            if (this.stage != null) {
              if (a.stage != null && this.stage.get_focus() == a) {
                this.stage.set_focus(null);
              }
              b = new Ga("removedFromStage", false, false);
              a.__dispatchWithCapture(b);
              a.__dispatchChildren(b);
              a.__setStageReference(null);
            }
            a.parent = null;
            r.remove(this.__children, a);
            this.__removedChildren.push(a);
            a.__setTransformDirty();
          }
          return a;
        },
        removeChildAt: function (a) {
          if (a >= 0 && a < this.__children.length) {
            return this.removeChild(this.__children[a]);
          } else {
            return null;
          }
        },
        removeChildren: function (a, b) {
          if (b == null) {
            b = 2147483647;
          }
          if (a == null) {
            a = 0;
          }
          if (b == 2147483647 && (b = this.__children.length - 1, b < 0)) {
            return;
          }
          if (!(a > this.__children.length - 1)) {
            if (b < a || a < 0 || b > this.__children.length) {
              throw new Mi("The supplied index is out of bounds.");
            }
            for (b -= a; b >= 0;) {
              this.removeChildAt(a);
              --b;
            }
          }
        },
        __cleanup: function () {
          Ca.prototype.__cleanup.call(this);
          for (var a = 0, b = this.__children; a < b.length;) {
            var c = b[a];
            ++a;
            c.__cleanup();
          }
          for (a = this.__removedChildren.iterator(); a.hasNext();) {
            b = a.next();
            if (b.stage == null) {
              b.__cleanup();
            }
          }
          this.__removedChildren.set_length(0);
        },
        __dispatchChildren: function (a) {
          if (this.__children != null) {
            for (var b = 0, c = this.__children; b < c.length;) {
              var d = c[b];
              ++b;
              a.target = d;
              if (!d.__dispatchWithCapture(a)) {
                break;
              }
              d.__dispatchChildren(a);
            }
          }
        },
        __enterFrame: function (a) {
          for (var b = 0, c = this.__children; b < c.length;) {
            var d = c[b];
            ++b;
            d.__enterFrame(a);
          }
        },
        __getBounds: function (a, b) {
          Ca.prototype.__getBounds.call(this, a, b);
          if (this.__children.length != 0) {
            var c = za.__pool.get();
            for (var d = 0, e = this.__children; d < e.length;) {
              var f = e[d];
              ++d;
              if (f.__scaleX != 0 && f.__scaleY != 0) {
                var k = f.__transform;
                c.a = k.a * b.a + k.b * b.c;
                c.b = k.a * b.b + k.b * b.d;
                c.c = k.c * b.a + k.d * b.c;
                c.d = k.c * b.b + k.d * b.d;
                c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                f.__getBounds(a, c);
              }
            }
            za.__pool.release(c);
          }
        },
        __getFilterBounds: function (a, b) {
          Ca.prototype.__getFilterBounds.call(this, a, b);
          if (this.__scrollRect == null && this.__children.length != 0) {
            var c = za.__pool.get();
            for (var d = 0, e = this.__children; d < e.length;) {
              var f = e[d];
              ++d;
              if (f.__scaleX != 0 && f.__scaleY != 0 && !f.__isMask) {
                var k = f.__transform;
                c.a = k.a * b.a + k.b * b.c;
                c.b = k.a * b.b + k.b * b.d;
                c.c = k.c * b.a + k.d * b.c;
                c.d = k.c * b.b + k.d * b.d;
                c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                k = da.__pool.get();
                f.__getFilterBounds(k, c);
                a.__expand(k.x, k.y, k.width, k.height);
                da.__pool.release(k);
              }
            }
            za.__pool.release(c);
          }
        },
        __getRenderBounds: function (a, b) {
          if (this.__scrollRect != null) {
            Ca.prototype.__getRenderBounds.call(this, a, b);
          } else {
            Ca.prototype.__getBounds.call(this, a, b);
            if (this.__children.length != 0) {
              var c = za.__pool.get();
              for (var d = 0, e = this.__children; d < e.length;) {
                var f = e[d];
                ++d;
                if (f.__scaleX != 0 && f.__scaleY != 0 && !f.__isMask) {
                  var k = f.__transform;
                  c.a = k.a * b.a + k.b * b.c;
                  c.b = k.a * b.b + k.b * b.d;
                  c.c = k.c * b.a + k.d * b.c;
                  c.d = k.c * b.b + k.d * b.d;
                  c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                  c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                  f.__getRenderBounds(a, c);
                }
              }
              za.__pool.release(c);
            }
          }
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || e && !this.mouseEnabled && !this.mouseChildren || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          if (this.__scrollRect != null) {
            var k = lb.__pool.get();
            k.setTo(a, b);
            var t = this.__getRenderTransform();
            var n = t.a * t.d - t.b * t.c;
            if (n == 0) {
              k.x = -t.tx;
              k.y = -t.ty;
            } else {
              var h = 1 / n * (t.c * (t.ty - k.y) + t.d * (k.x - t.tx));
              k.y = 1 / n * (t.a * (k.y - t.ty) + t.b * (t.tx - k.x));
              k.x = h;
            }
            if (!this.__scrollRect.containsPoint(k)) {
              lb.__pool.release(k);
              return false;
            }
            lb.__pool.release(k);
          }
          k = this.__children.length;
          if (e) {
            if (d == null || !this.mouseChildren) {
              while (--k >= 0) {
                if (this.__children[k].__hitTest(a, b, c, null, true, this.__children[k])) {
                  if (d != null) {
                    d.push(f);
                  }
                  return true;
                }
              }
            } else if (d != null) {
              e = d.length;
              for (n = false; --k >= 0 && (!(t = this.__children[k].__getInteractive(null)) && (!this.mouseEnabled || !!n) || !this.__children[k].__hitTest(a, b, c, d, true, this.__children[k]) || !(n = true, t && d.length > e)););
              if (n) {
                d.splice(e, 0, f);
                return true;
              }
            }
          } else {
            for (n = false; --k >= 0 && (!this.__children[k].__hitTest(a, b, c, d, false, this.__children[k]) || (n = true, d != null)););
            return n;
          }
          return false;
        },
        __hitTestMask: function (a, b) {
          for (var c = this.__children.length; --c >= 0;) {
            if (this.__children[c].__hitTestMask(a, b)) {
              return true;
            }
          }
          return false;
        },
        __setStageReference: function (a) {
          Ca.prototype.__setStageReference.call(this, a);
          if (this.__children != null) {
            for (var b = 0, c = this.__children; b < c.length;) {
              var d = c[b];
              ++b;
              d.__setStageReference(a);
            }
          }
        },
        __setWorldTransformInvalid: function () {
          if (!this.__worldTransformInvalid && (this.__worldTransformInvalid = true, this.__children != null)) {
            for (var a = 0, b = this.__children; a < b.length;) {
              var c = b[a];
              ++a;
              c.__setWorldTransformInvalid();
            }
          }
        },
        __tabTest: function (a) {
          Ca.prototype.__tabTest.call(this, a);
          if (this.get_tabChildren()) {
            var b;
            for (var c = 0, d = this.__children; c < d.length;) {
              var e = d[c];
              ++c;
              if (b = e.__getInteractive(null)) {
                b = e;
                b.__tabTest(a);
              }
            }
          }
        },
        __update: function (a, b) {
          Ca.prototype.__update.call(this, a, b);
          if (b) {
            b = 0;
            for (var c = this.__children; b < c.length;) {
              var d = c[b];
              ++b;
              d.__update(a, true);
            }
          }
        },
        get_numChildren: function () {
          return this.__children.length;
        },
        get_tabChildren: function () {
          return this.__tabChildren;
        },
        __class__: gb,
        __properties__: q(Ca.prototype.__properties__, {
          get_tabChildren: "get_tabChildren",
          get_numChildren: "get_numChildren"
        })
      });
      function Ua() {
        gb.call(this);
        this.__drawableType = 4;
        this.__buttonMode = false;
        this.useHandCursor = true;
        if (this.__pendingBindLibrary != null) {
          var a = this.__pendingBindLibrary;
          var b = this.__pendingBindClassName;
          this.__pendingBindClassName = this.__pendingBindLibrary = null;
          a.bind(b, this);
        } else if (Ua.__constructor != null) {
          a = Ua.__constructor;
          Ua.__constructor = null;
          a(this);
        }
      }
      g["openfl.display.Sprite"] = Ua;
      Ua.__name__ = "openfl.display.Sprite";
      Ua.__super__ = gb;
      Ua.prototype = q(gb.prototype, {
        __getCursor: function () {
          if (this.__buttonMode && this.useHandCursor) {
            return "button";
          } else {
            return null;
          }
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (e && !this.mouseEnabled && !this.mouseChildren) {
            return false;
          }
          if (!f.get_visible() || this.__isMask || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return this.__hitTestHitArea(a, b, c, d, e, f);
          }
          if (this.__scrollRect != null) {
            var k = lb.__pool.get();
            k.setTo(a, b);
            var t = this.__getRenderTransform();
            var n = t.a * t.d - t.b * t.c;
            if (n == 0) {
              k.x = -t.tx;
              k.y = -t.ty;
            } else {
              var h = 1 / n * (t.c * (t.ty - k.y) + t.d * (k.x - t.tx));
              k.y = 1 / n * (t.a * (k.y - t.ty) + t.b * (t.tx - k.x));
              k.x = h;
            }
            if (!this.__scrollRect.containsPoint(k)) {
              lb.__pool.release(k);
              return this.__hitTestHitArea(a, b, c, d, true, f);
            }
            lb.__pool.release(k);
          }
          if (gb.prototype.__hitTest.call(this, a, b, c, d, e, f)) {
            if (d != null) {
              return e;
            } else {
              return true;
            }
          } else if (this.hitArea == null && this.__graphics != null && this.__graphics.__hitTest(a, b, c, this.__getRenderTransform())) {
            if (d != null && (!e || !!this.mouseEnabled)) {
              d.push(f);
            }
            return true;
          } else {
            return this.__hitTestHitArea(a, b, c, d, e, f);
          }
        },
        __hitTestHitArea: function (a, b, c, d, e, f) {
          if (this.hitArea == null || this.hitArea.mouseEnabled) {
            return false;
          } else {
            this.hitArea.mouseEnabled = true;
            a = this.hitArea.__hitTest(a, b, c, null, true, f);
            this.hitArea.mouseEnabled = false;
            if (d != null && a) {
              d[d.length] = f;
            }
            return a;
          }
        },
        __hitTestMask: function (a, b) {
          if (gb.prototype.__hitTestMask.call(this, a, b) || this.__graphics != null && this.__graphics.__hitTest(a, b, true, this.__getRenderTransform())) {
            return true;
          } else {
            return false;
          }
        },
        get_graphics: function () {
          if (this.__graphics == null) {
            this.__graphics = new fe(this);
          }
          return this.__graphics;
        },
        get_tabEnabled: function () {
          if (this.__tabEnabled == null) {
            return this.__buttonMode;
          } else {
            return this.__tabEnabled;
          }
        },
        get_buttonMode: function () {
          return this.__buttonMode;
        },
        __class__: Ua,
        __properties__: q(gb.prototype.__properties__, {
          get_graphics: "get_graphics",
          get_buttonMode: "get_buttonMode"
        })
      });
      function Wb() {
        this.game = {
          width: 1280,
          height: 720,
          initialState: yc,
          zoom: 1,
          framerate: 60,
          skipSplash: true,
          startFullscreen: false
        };
        Ua.call(this);
        if (this.stage != null) {
          this.init();
        } else {
          this.addEventListener("addedToStage", m(this, this.init));
        }
      }
      g.Main = Wb;
      Wb.__name__ = "Main";
      Wb.main = function () {
        oa.get_current().addChild(new Wb());
      };
      Wb.resetSpriteCache = function (a) {
        a.__cacheBitmap = null;
        a.__cacheBitmapData = null;
      };
      Wb.__super__ = Ua;
      Wb.prototype = q(Ua.prototype, {
        init: function (a) {
          if (this.hasEventListener("addedToStage")) {
            this.removeEventListener("addedToStage", m(this, this.init));
          }
          this.setupGame();
        },
        setupGame: function () {
          oa.get_current();
          oa.get_current();
          Aa.instance = new Aa();
          y.loadDefaultKeys();
          this.addChild(new mk(this.game.width, this.game.height, vp.fromType(this.game.initialState), this.game.framerate, this.game.framerate, this.game.skipSplash, this.game.startFullscreen));
          Wb.fpsVar = new nk(10, 3, 16777215);
          this.addChild(Wb.fpsVar);
          oa.get_current().stage.align = Dp.fromString("tl");
          oa.get_current().stage.set_scaleMode(2);
          if (Wb.fpsVar != null) {
            Wb.fpsVar.set_visible(y.data.showFPS);
          }
          h.autoPause = false;
          h.mouse.set_visible(false);
          h.signals.gameResized.add(function (a, b) {
            if (h.cameras != null) {
              a = 0;
              b = h.cameras.list;
              while (a < b.length) {
                var c = b[a];
                ++a;
                if (c != null && c.filters != null) {
                  Wb.resetSpriteCache(c.flashSprite);
                }
              }
            }
            if (h.game != null) {
              Wb.resetSpriteCache(h.game);
            }
          });
        },
        __class__: Wb
      });
      function zd(a) {
        a.addChild(this);
        Wb.call(this);
        this.dispatchEvent(new Ga("addedToStage", false, false));
      }
      g.DocumentClass = zd;
      zd.__name__ = "DocumentClass";
      zd.__super__ = Wb;
      zd.prototype = q(Wb.prototype, {
        __class__: zd
      });
      function V(a, b) {
        this.r = new RegExp(a, b.split("u").join(""));
      }
      g.EReg = V;
      V.__name__ = "EReg";
      V.prototype = {
        match: function (a) {
          if (this.r.global) {
            this.r.lastIndex = 0;
          }
          this.r.m = this.r.exec(a);
          this.r.s = a;
          return this.r.m != null;
        },
        matched: function (a) {
          if (this.r.m != null && a >= 0 && a < this.r.m.length) {
            return this.r.m[a];
          }
          throw G.thrown("EReg::matched");
        },
        matchedPos: function () {
          if (this.r.m == null) {
            throw G.thrown("No string matched");
          }
          return {
            pos: this.r.m.index,
            len: this.r.m[0].length
          };
        },
        matchSub: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (this.r.global) {
            this.r.lastIndex = b;
            this.r.m = this.r.exec(c < 0 ? a : r.substr(a, 0, b + c));
            if (c = this.r.m != null) {
              this.r.s = a;
            }
          } else if (c = this.match(c < 0 ? r.substr(a, b, null) : r.substr(a, b, c))) {
            this.r.s = a;
            this.r.m.index += b;
          }
          return c;
        },
        split: function (a) {
          return a.replace(this.r, "#__delim__#").split("#__delim__#");
        },
        map: function (a, b) {
          var c = 0;
          var d = "";
          do {
            if (c >= a.length) {
              break;
            } else if (!this.matchSub(a, c)) {
              d += v.string(r.substr(a, c, null));
              break;
            }
            var e = this.matchedPos();
            d += v.string(r.substr(a, c, e.pos - c));
            d += v.string(b(this));
            if (e.len == 0) {
              d += v.string(r.substr(a, e.pos, 1));
              c = e.pos + 1;
            } else {
              c = e.pos + e.len;
            }
          } while (this.r.global);
          if (!this.r.global && c > 0 && c < a.length) {
            d += v.string(r.substr(a, c, null));
          }
          return d;
        },
        __class__: V
      };
      function rb() {}
      g["flixel.util.IFlxDestroyable"] = rb;
      rb.__name__ = "flixel.util.IFlxDestroyable";
      rb.__isInterface__ = true;
      rb.prototype = {
        __class__: rb
      };
      function Ea() {
        this.flixelType = 0;
        this.active = this.visible = this.alive = this.exists = true;
        this.ID = Ea.idEnumerator++;
      }
      g["flixel.FlxBasic"] = Ea;
      Ea.__name__ = "flixel.FlxBasic";
      Ea.__interfaces__ = [rb];
      Ea.prototype = {
        destroy: function () {
          if (this.get_container() != null) {
            this.get_container().remove(this);
          }
          this.container = null;
          this.set_exists(false);
          this._cameras = null;
        },
        kill: function () {
          this.set_alive(false);
          this.set_exists(false);
        },
        revive: function () {
          this.set_alive(true);
          this.set_exists(true);
        },
        update: function (a) {},
        draw: function () {},
        set_visible: function (a) {
          return this.visible = a;
        },
        set_active: function (a) {
          return this.active = a;
        },
        set_exists: function (a) {
          return this.exists = a;
        },
        set_alive: function (a) {
          return this.alive = a;
        },
        get_camera: function () {
          if (this._cameras == null || this._cameras.length == 0) {
            return Tb._defaultCameras[0];
          } else {
            return this._cameras[0];
          }
        },
        getCameras: function () {
          return this._cameras ?? (this._cameras == null && this.get_container() != null ? this.get_container().getCameras() : Tb._defaultCameras);
        },
        getCamerasLegacy: function () {
          if (this._cameras == null) {
            return Tb._defaultCameras;
          } else {
            return this._cameras;
          }
        },
        get_cameras: function () {
          return this.getCamerasLegacy();
        },
        set_cameras: function (a) {
          return this._cameras = a;
        },
        get_container: function () {
          return this.container;
        },
        __class__: Ea,
        __properties__: {
          get_container: "get_container",
          set_cameras: "set_cameras",
          get_cameras: "get_cameras",
          get_camera: "get_camera",
          set_exists: "set_exists",
          set_alive: "set_alive",
          set_visible: "set_visible",
          set_active: "set_active"
        }
      };
      function jc(a) {
        this.finishCallback = null;
        var b = this;
        Ea.call(this);
        jc.player = new ok();
        jc.player.set_x(0);
        jc.player.set_y(0);
        h.addChildBelowMouse(jc.player);
        var c = new pk();
        c.connect(null);
        jc.netStream = new qk(c);
        jc.netStream.client = {
          onMetaData: function () {
            jc.player.attachNetStream(jc.netStream);
            jc.player.set_width(h.width);
            jc.player.set_height(h.height);
          }
        };
        c.addEventListener("netStatus", function (a) {
          if (a.info.code == "NetStream.Play.Complete") {
            jc.netStream.dispose();
            if (h.game.contains(jc.player)) {
              h.game.removeChild(jc.player);
            }
            if (b.finishCallback != null) {
              b.finishCallback();
            }
          }
        });
        jc.netStream.play(a);
      }
      g.FlxVideo = jc;
      jc.__name__ = "FlxVideo";
      jc.__super__ = Ea;
      jc.prototype = q(Ea.prototype, {
        skipVideo: function () {
          jc.netStream.dispose();
          if (h.game.contains(jc.player)) {
            h.game.removeChild(jc.player);
          }
          if (this.finishCallback != null) {
            this.finishCallback();
          }
        },
        __class__: jc
      });
      function r() {}
      g.HxOverrides = r;
      r.__name__ = "HxOverrides";
      r.strDate = function (a) {
        switch (a.length) {
          case 8:
            a = a.split(":");
            var b = new Date();
            b.setTime(0);
            b.setUTCHours(a[0]);
            b.setUTCMinutes(a[1]);
            b.setUTCSeconds(a[2]);
            return b;
          case 10:
            a = a.split("-");
            return new Date(a[0], a[1] - 1, a[2], 0, 0, 0);
          case 19:
            a = a.split(" ");
            b = a[0].split("-");
            a = a[1].split(":");
            return new Date(b[0], b[1] - 1, b[2], a[0], a[1], a[2]);
          default:
            throw G.thrown("Invalid date format : " + a);
        }
      };
      r.cca = function (a, b) {
        a = a.charCodeAt(b);
        if (a == a) {
          return a;
        }
      };
      r.substr = function (a, b, c) {
        if (c == null) {
          c = a.length;
        } else if (c < 0) {
          if (b == 0) {
            c = a.length + c;
          } else {
            return "";
          }
        }
        return a.substr(b, c);
      };
      r.remove = function (a, b) {
        b = a.indexOf(b);
        if (b == -1) {
          return false;
        }
        a.splice(b, 1);
        return true;
      };
      r.keyValueIter = function (a) {
        return new ln(a);
      };
      r.now = function () {
        return Date.now();
      };
      function qd(a, b) {
        this.min = a;
        this.max = b;
      }
      g.IntIterator = qd;
      qd.__name__ = "IntIterator";
      qd.prototype = {
        hasNext: function () {
          return this.min < this.max;
        },
        next: function () {
          return this.min++;
        },
        __class__: qd
      };
      function Ve() {}
      g.Lambda = Ve;
      Ve.__name__ = "Lambda";
      Ve.array = function (a) {
        var b = [];
        for (a = M(a); a.hasNext();) {
          var c = a.next();
          b.push(c);
        }
        return b;
      };
      function Ra() {}
      g.ManifestResources = Ra;
      Ra.__name__ = "ManifestResources";
      Ra.init = function (a) {
        Ra.preloadLibraries = [];
        Ra.preloadLibraryNames = [];
        Ra.rootPath = null;
        if (a != null && Object.prototype.hasOwnProperty.call(a, "rootPath")) {
          Ra.rootPath = ja.field(a, "rootPath");
          if (!w.endsWith(Ra.rootPath, "/")) {
            Ra.rootPath += "/";
          }
        }
        if (Ra.rootPath == null) {
          Ra.rootPath = "./";
        }
        wb.registerFont(Mb);
        wb.registerFont(Fc);
        wb.registerFont(Nb);
        wb.registerFont(ba);
        sa.libraryPaths.h.songs = Ra.rootPath + "manifest/songs.json";
        a = Rd.parse("{\"name\":null,\"assets\":\"aoy4:pathy34:assets%2Ffonts%2Ffonts-go-here.txty4:sizezy4:typey4:TEXTy2:idR1y7:preloadtgoR2i14656R3y4:FONTy9:classNamey31:__ASSET__assets_fonts_pixel_otfR5y26:assets%2Ffonts%2Fpixel.otfR6tgoR2i75864R3R7R8y29:__ASSET__assets_fonts_vcr_ttfR5y24:assets%2Ffonts%2Fvcr.ttfR6tgoR0y41:assets%2Fshared%2Fcharacters%2Fbendy.jsonR2i2753R3R4R5R13R6tgoR0y43:assets%2Fshared%2Fcharacters%2Fbf-dead.jsonR2i709R3R4R5R14R6tgoR0y38:assets%2Fshared%2Fcharacters%2Fbf.jsonR2i2467R3R4R5R15R6tgoR0y38:assets%2Fshared%2Fcharacters%2Fgf.jsonR2i2326R3R4R5R16R6tgoR0y41:assets%2Fshared%2Fcharacters%2Follie.jsonR2i2103R3R4R5R17R6tgoR0y46:assets%2Fshared%2Fcharacters%2Follielaugh.jsonR2i545R3R4R5R18R6tgoR0y41:assets%2Fshared%2Fcharacters%2Freadme.txtR2i240R3R4R5R19R6tgoR0y42:assets%2Fshared%2Fdata%2Fachievements.jsonR2i330R3R4R5R20R6tgoR0y51:assets%2Fshared%2Fdata%2Fanemaniac%2Fanemaniac.jsonR2i113051R3R4R5R21R6tgoR0y51:assets%2Fshared%2Fdata%2Fanemaniac%2FExtraChars.luaR2i22418R3R4R5R22R6tgoR0y45:assets%2Fshared%2Fdata%2Fanemaniac%2Fmute.luaR2i4831R3R4R5R23R6tgoR0y47:assets%2Fshared%2Fdata%2Fanemaniac%2Fscript.luaR2i11970R3R4R5R24R6tgoR0y42:assets%2Fshared%2Fdata%2FcharacterList.txtR2i253R3R4R5R25R6tgoR0y36:assets%2Fshared%2Fdata%2Fcredits.txtR2i562R3R4R5R26R6tgoR0y43:assets%2Fshared%2Fdata%2Fdata-goes-here.txtR2zR3R4R5R27R6tgoR0y35:assets%2Fshared%2Fdata%2Fen-US.langR2i9808R3R4R5R28R6tgoR0y38:assets%2Fshared%2Fdata%2FintroText.txtR2zR3R4R5R29R6tgoR0y41:assets%2Fshared%2Fdata%2FLoadingScreen.hxR2i1831R3R4R5R30R6tgoR0y38:assets%2Fshared%2Fdata%2Fmain-view.xmlR2i123R3R4R5R31R6tgoR0y35:assets%2Fshared%2Fdata%2Freadme.txtR2i1175R3R4R5R32R6tgoR0y38:assets%2Fshared%2Fdata%2Fsettings.jsonR2zR3R4R5R33R6tgoR0y42:assets%2Fshared%2Fdata%2FspecialThanks.txtR2i300R3R4R5R34R6tgoR0y38:assets%2Fshared%2Fdata%2FstageList.txtR2i61R3R4R5R35R6tgoR0y51:assets%2Fshared%2Fimages%2Fachievements%2FBendy.pngR2i3379R3y5:IMAGER5R36R6tgoR0y52:assets%2Fshared%2Fimages%2Fachievements%2FCutout.pngR2i4460R3R37R5R38R6tgoR0y54:assets%2Fshared%2Fimages%2Fachievements%2Fdebugger.pngR2i5257R3R37R5R39R6tgoR0y63:assets%2Fshared%2Fimages%2Fachievements%2Ffriday_night_play.pngR2i5043R3R37R5R40R6tgoR0y50:assets%2Fshared%2Fimages%2Fachievements%2Fhype.pngR2i10435R3R37R5R41R6tgoR0y63:assets%2Fshared%2Fimages%2Fachievements%2Flockedachievement.pngR2i1709R3R37R5R42R6tgoR0y51:assets%2Fshared%2Fimages%2Fachievements%2FOllie.pngR2i4158R3R37R5R43R6tgoR0y57:assets%2Fshared%2Fimages%2Fachievements%2Foversinging.pngR2i9667R3R37R5R44R6tgoR0y65:assets%2Fshared%2Fimages%2Fachievements%2Froadkill_enthusiast.pngR2i4718R3R37R5R45R6tgoR0y53:assets%2Fshared%2Fimages%2Fachievements%2Ftoastie.pngR2i3094R3R37R5R46R6tgoR0y54:assets%2Fshared%2Fimages%2Fachievements%2Ftwo_keys.pngR2i12409R3R37R5R47R6tgoR0y52:assets%2Fshared%2Fimages%2Fachievements%2Fur_bad.pngR2i10384R3R37R5R48R6tgoR0y53:assets%2Fshared%2Fimages%2Fachievements%2Fur_good.pngR2i3467R3R37R5R49R6tgoR0y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek1_nomiss.pngR2i9818R3R37R5R50R6tgoR0y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek2_nomiss.pngR2i6201R3R37R5R51R6tgoR0y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek3_nomiss.pngR2i10089R3R37R5R52R6tgoR0y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek4_nomiss.pngR2i7484R3R37R5R53R6tgoR0y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek5_nomiss.pngR2i9789R3R37R5R54R6tgoR0y64:assets%2Fshared%2Fimages%2Fachievements%2Fweek6_nomiss-pixel.pngR2i552R3R37R5R55R6tgoR0y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek7_nomiss.pngR2i4902R3R37R5R56R6tgoR0y39:assets%2Fshared%2Fimages%2Falphabet.pngR2i182314R3R37R5R57R6tgoR0y39:assets%2Fshared%2Fimages%2Falphabet.xmlR2i105671R3R4R5R58R6tgoR0y51:assets%2Fshared%2Fimages%2Falphabet_playstation.pngR2i1532R3R37R5R59R6tgoR0y51:assets%2Fshared%2Fimages%2Falphabet_playstation.xmlR2i1209R3R4R5R60R6tgoR0y41:assets%2Fshared%2Fimages%2Fbackground.pngR2i954429R3R37R5R61R6tgoR0y34:assets%2Fshared%2Fimages%2Fbad.pngR2i5207R3R37R5R62R6tgoR0y42:assets%2Fshared%2Fimages%2FbendyCutout.pngR2i28793R3R37R5R63R6tgoR0y34:assets%2Fshared%2Fimages%2Fbg1.pngR2i592205R3R37R5R64R6tgoR0y54:assets%2Fshared%2Fimages%2Fcampaign_menu_UI_assets.pngR2i3044R3R37R5R65R6tgoR0y54:assets%2Fshared%2Fimages%2Fcampaign_menu_UI_assets.xmlR2i597R3R4R5R66R6tgoR0y49:assets%2Fshared%2Fimages%2Fcharacters%2Fbendy.pngR2i500894R3R37R5R67R6tgoR0y49:assets%2Fshared%2Fimages%2Fcharacters%2Fbendy.xmlR2i8681R3R4R5R68R6tgoR0y53:assets%2Fshared%2Fimages%2Fcharacters%2FBOYFRIEND.pngR2i875627R3R37R5R69R6tgoR0y53:assets%2Fshared%2Fimages%2Fcharacters%2FBOYFRIEND.xmlR2i52069R3R4R5R70R6tgoR0y58:assets%2Fshared%2Fimages%2Fcharacters%2FBOYFRIEND_DEAD.pngR2i778368R3R37R5R71R6tgoR0y58:assets%2Fshared%2Fimages%2Fcharacters%2FBOYFRIEND_DEAD.xmlR2i15438R3R4R5R72R6tgoR0y53:assets%2Fshared%2Fimages%2Fcharacters%2FGF_assets.pngR2i208687R3R37R5R73R6tgoR0y53:assets%2Fshared%2Fimages%2Fcharacters%2FGF_assets.xmlR2i4364R3R4R5R74R6tgoR0y49:assets%2Fshared%2Fimages%2Fcharacters%2FOllie.pngR2i781034R3R37R5R75R6tgoR0y49:assets%2Fshared%2Fimages%2Fcharacters%2FOllie.xmlR2i8859R3R4R5R76R6tgoR0y42:assets%2Fshared%2Fimages%2Fchart_quant.pngR2i2663R3R37R5R77R6tgoR0y42:assets%2Fshared%2Fimages%2Fchart_quant.xmlR2i1028R3R4R5R78R6tgoR0y43:assets%2Fshared%2Fimages%2Fcheckboxanim.pngR2i16546R3R37R5R79R6tgoR0y43:assets%2Fshared%2Fimages%2Fcheckboxanim.xmlR2i1976R3R4R5R80R6tgoR0y36:assets%2Fshared%2Fimages%2Fcombo.pngR2i6414R3R37R5R81R6tgoR0y45:assets%2Fshared%2Fimages%2Fcontrollertype.pngR2i1324R3R37R5R82R6tgoR0y40:assets%2Fshared%2Fimages%2Fcountdown.pngR2i36906988R3R37R5R83R6tgoR0y40:assets%2Fshared%2Fimages%2Fcountdown.xmlR2i13073R3R4R5R84R6tgoR0y43:assets%2Fshared%2Fimages%2Fcredits%2Fbb.pngR2i3533R3R37R5R85R6tgoR0y48:assets%2Fshared%2Fimages%2Fcredits%2Fbdayboy.pngR2i8498R3R37R5R86R6tgoR0y46:assets%2Fshared%2Fimages%2Fcredits%2Fchili.pngR2i1602R3R37R5R87R6tgoR0y51:assets%2Fshared%2Fimages%2Fcredits%2Fcrowplexus.pngR2i3910R3R37R5R88R6tgoR0y48:assets%2Fshared%2Fimages%2Fcredits%2Fdiscord.pngR2i1510R3R37R5R89R6tgoR0y49:assets%2Fshared%2Fimages%2Fcredits%2Fevilsk8r.pngR2i4431R3R37R5R90R6tgoR0y47:assets%2Fshared%2Fimages%2Fcredits%2Fflicky.pngR2i3869R3R37R5R91R6tgoR0y43:assets%2Fshared%2Fimages%2Fcredits%2Fje.pngR2i2353R3R37R5R92R6tgoR0y45:assets%2Fshared%2Fimages%2Fcredits%2Fkade.pngR2i5777R3R37R5R93R6tgoR0y52:assets%2Fshared%2Fimages%2Fcredits%2Fkawaisprite.pngR2i2817R3R37R5R94R6tgoR0y47:assets%2Fshared%2Fimages%2Fcredits%2Fkeoiki.pngR2i3838R3R37R5R95R6tgoR0y51:assets%2Fshared%2Fimages%2Fcredits%2Fmastereric.pngR2i4651R3R37R5R96R6tgoR0y53:assets%2Fshared%2Fimages%2Fcredits%2Fmissing_icon.pngR2i2664R3R37R5R97R6tgoR0y54:assets%2Fshared%2Fimages%2Fcredits%2Fninjamuffin99.pngR2i3596R3R37R5R98R6tgoR0y54:assets%2Fshared%2Fimages%2Fcredits%2Fphantomarcade.pngR2i4971R3R37R5R99R6tgoR0y46:assets%2Fshared%2Fimages%2Fcredits%2Fproxy.pngR2i4388R3R37R5R100R6tgoR0y48:assets%2Fshared%2Fimages%2Fcredits%2Friveren.pngR2i4841R3R37R5R101R6tgoR0y49:assets%2Fshared%2Fimages%2Fcredits%2Froofmatt.pngR2i1733R3R37R5R102R6tgoR0y52:assets%2Fshared%2Fimages%2Fcredits%2Fshadowmario.pngR2i3679R3R37R5R103R6tgoR0y47:assets%2Fshared%2Fimages%2Fcredits%2Fsqirra.pngR2i4468R3R37R5R104R6tgoR0y54:assets%2Fshared%2Fimages%2Fcredits%2Fsuperpowers04.pngR2i4018R3R37R5R105R6tgoR0y46:assets%2Fshared%2Fimages%2Fcredits%2Ftahir.pngR2i4880R3R37R5R106R6tgoR0y48:assets%2Fshared%2Fimages%2Fcredits%2Fteykats.pngR2i3101R3R37R5R107R6tgoR0y34:assets%2Fshared%2Fimages%2FEND.pngR2i952131R3R37R5R108R6tgoR0y41:assets%2Fshared%2Fimages%2FeventArrow.pngR2i4827R3R37R5R109R6tgoR0y37:assets%2Fshared%2Fimages%2Ffunkay.pngR2i96575R3R37R5R110R6tgoR0y44:assets%2Fshared%2Fimages%2FgfDanceTitle.jsonR2i341R3R4R5R111R6tgoR0y33:assets%2Fshared%2Fimages%2Fgo.pngR2i5889R3R37R5R112R6tgoR0y35:assets%2Fshared%2Fimages%2Fgood.pngR2i5648R3R37R5R113R6tgoR0y40:assets%2Fshared%2Fimages%2FhealthBar.pngR2i551R3R37R5R114R6tgoR0y49:assets%2Fshared%2Fimages%2Ficons%2Ficon-bendy.pngR2i3246R3R37R5R115R6tgoR0y46:assets%2Fshared%2Fimages%2Ficons%2Ficon-bf.pngR2i8671R3R37R5R116R6tgoR0y48:assets%2Fshared%2Fimages%2Ficons%2Ficon-face.pngR2i3549R3R37R5R117R6tgoR0y46:assets%2Fshared%2Fimages%2Ficons%2Ficon-gf.pngR2i6093R3R37R5R118R6tgoR0y49:assets%2Fshared%2Fimages%2Ficons%2Ficon-ollie.pngR2i4294R3R37R5R119R6tgoR0y41:assets%2Fshared%2Fimages%2FLOADINGTXT.pngR2i73528R3R37R5R120R6tgoR0y35:assets%2Fshared%2Fimages%2Flogo.pngR2i32113R3R37R5R121R6tgoR0y41:assets%2Fshared%2Fimages%2FlogoBumpin.pngR2i228340R3R37R5R122R6tgoR0y41:assets%2Fshared%2Fimages%2FlogoBumpin.xmlR2i2177R3R4R5R123R6tgoR0y53:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_awards.pngR2i28858R3R37R5R124R6tgoR0y53:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_awards.xmlR2i1380R3R4R5R125R6tgoR0y54:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_credits.pngR2i28734R3R37R5R126R6tgoR0y54:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_credits.xmlR2i1385R3R4R5R127R6tgoR0y53:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_donate.pngR2i24842R3R37R5R128R6tgoR0y53:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_donate.xmlR2i1375R3R4R5R129R6tgoR0y55:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_freeplay.pngR2i30316R3R37R5R130R6tgoR0y55:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_freeplay.xmlR2i1399R3R4R5R131R6tgoR0y51:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_mods.pngR2i22741R3R37R5R132R6tgoR0y51:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_mods.xmlR2i1644R3R4R5R133R6tgoR0y54:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_options.pngR2i27299R3R37R5R134R6tgoR0y54:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_options.xmlR2i1332R3R4R5R135R6tgoR0y57:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_story_mode.pngR2i54659R3R37R5R136R6tgoR0y57:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_story_mode.xmlR2i1444R3R4R5R137R6tgoR0y59:assets%2Fshared%2Fimages%2Fmenubackgrounds%2Fmenu_stage.pngR2i21287R3R37R5R138R6tgoR0y55:assets%2Fshared%2Fimages%2Fmenubackgrounds%2Freadme.txtR2i121R3R4R5R139R6tgoR0y37:assets%2Fshared%2Fimages%2FmenuBG.pngR2i255319R3R37R5R140R6tgoR0y41:assets%2Fshared%2Fimages%2FmenuBGBlue.pngR2i258474R3R37R5R141R6tgoR0y44:assets%2Fshared%2Fimages%2FmenuBGMagenta.pngR2i258541R3R37R5R142R6tgoR0y51:assets%2Fshared%2Fimages%2Fmenucharacters%2Fbf.jsonR2i125R3R4R5R143R6tgoR0y52:assets%2Fshared%2Fimages%2Fmenucharacters%2Fdad.jsonR2i126R3R4R5R144R6tgoR0y51:assets%2Fshared%2Fimages%2Fmenucharacters%2Fgf.jsonR2i125R3R4R5R145R6tgoR0y55:assets%2Fshared%2Fimages%2Fmenucharacters%2FMenu_BF.pngR2i88528R3R37R5R146R6tgoR0y55:assets%2Fshared%2Fimages%2Fmenucharacters%2FMenu_BF.xmlR2i5582R3R4R5R147R6tgoR0y56:assets%2Fshared%2Fimages%2Fmenucharacters%2FMenu_Dad.pngR2i42084R3R37R5R148R6tgoR0y56:assets%2Fshared%2Fimages%2Fmenucharacters%2FMenu_Dad.xmlR2i2115R3R4R5R149R6tgoR0y55:assets%2Fshared%2Fimages%2Fmenucharacters%2FMenu_GF.pngR2i104544R3R37R5R150R6tgoR0y55:assets%2Fshared%2Fimages%2Fmenucharacters%2FMenu_GF.xmlR2i3802R3R4R5R151R6tgoR0y54:assets%2Fshared%2Fimages%2Fmenucharacters%2Freadme.txtR2i30R3R4R5R152R6tgoR0y40:assets%2Fshared%2Fimages%2FmenuDesat.pngR2i215613R3R37R5R153R6tgoR0y54:assets%2Fshared%2Fimages%2Fmenudifficulties%2Feasy.pngR2i1756R3R37R5R154R6tgoR0y54:assets%2Fshared%2Fimages%2Fmenudifficulties%2Fhard.pngR2i1944R3R37R5R155R6tgoR0y56:assets%2Fshared%2Fimages%2Fmenudifficulties%2Fnormal.pngR2i2553R3R37R5R156R6tgoR0y42:assets%2Fshared%2Fimages%2FMenu_Tracks.pngR2i1254R3R37R5R157R6tgoR0y46:assets%2Fshared%2Fimages%2Fnewgrounds_logo.pngR2i23378R3R37R5R158R6tgoR0y57:assets%2Fshared%2Fimages%2FnoteColorMenu%2FcolorWheel.pngR2i83362R3R37R5R159R6tgoR0y51:assets%2Fshared%2Fimages%2FnoteColorMenu%2Fcopy.pngR2i1684R3R37R5R160R6tgoR0y51:assets%2Fshared%2Fimages%2FnoteColorMenu%2Fnote.pngR2i11625R3R37R5R161R6tgoR0y56:assets%2Fshared%2Fimages%2FnoteColorMenu%2FnotePixel.pngR2i429R3R37R5R162R6tgoR0y54:assets%2Fshared%2Fimages%2FnoteColorMenu%2Fpalette.pngR2i288R3R37R5R163R6tgoR0y52:assets%2Fshared%2Fimages%2FnoteColorMenu%2Fpaste.pngR2i1518R3R37R5R164R6tgoR0y47:assets%2Fshared%2Fimages%2FnoteSkins%2Flist.txtR2i11R3R4R5R165R6tgoR0y59:assets%2Fshared%2Fimages%2FnoteSkins%2FNOTE_assets-chip.pngR2i169067R3R37R5R166R6tgoR0y59:assets%2Fshared%2Fimages%2FnoteSkins%2FNOTE_assets-chip.xmlR2i4866R3R4R5R167R6tgoR0y61:assets%2Fshared%2Fimages%2FnoteSkins%2FNOTE_assets-future.pngR2i571497R3R37R5R168R6tgoR0y61:assets%2Fshared%2Fimages%2FnoteSkins%2FNOTE_assets-future.xmlR2i4929R3R4R5R169R6tgoR0y54:assets%2Fshared%2Fimages%2FnoteSkins%2FNOTE_assets.pngR2i653659R3R37R5R170R6tgoR0y54:assets%2Fshared%2Fimages%2FnoteSkins%2FNOTE_assets.xmlR2i4913R3R4R5R171R6tgoR0y49:assets%2Fshared%2Fimages%2FnoteSkins%2Freadme.txtR2i336R3R4R5R172R6tgoR0y50:assets%2Fshared%2Fimages%2FnoteSplashes%2Flist.txtR2i33R3R4R5R173R6tgoR0y66:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-diamond.pngR2i32456R3R37R5R174R6tgoR0y66:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-diamond.txtR2i89R3R4R5R175R6tgoR0y66:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-diamond.xmlR2i4415R3R4R5R176R6tgoR0y67:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-electric.pngR2i26326R3R37R5R177R6tgoR0y67:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-electric.txtR2i28R3R4R5R178R6tgoR0y67:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-electric.xmlR2i2584R3R4R5R179R6tgoR0y67:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-sparkles.pngR2i22341R3R37R5R180R6tgoR0y67:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-sparkles.txtR2i29R3R4R5R181R6tgoR0y67:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-sparkles.xmlR2i2596R3R4R5R182R6tgoR0y66:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-vanilla.pngR2i184255R3R37R5R183R6tgoR0y66:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-vanilla.txtR2i84R3R4R5R184R6tgoR0y66:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-vanilla.xmlR2i4725R3R4R5R185R6tgoR0y58:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes.pngR2i33060R3R37R5R186R6tgoR0y58:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes.txtR2i81R3R4R5R187R6tgoR0y58:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes.xmlR2i4383R3R4R5R188R6tgoR0y52:assets%2Fshared%2Fimages%2FnoteSplashes%2Freadme.txtR2i443R3R4R5R189R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum0.pngR2i1816R3R37R5R190R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum1.pngR2i1639R3R37R5R191R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum2.pngR2i1985R3R37R5R192R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum3.pngR2i1990R3R37R5R193R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum4.pngR2i1955R3R37R5R194R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum5.pngR2i2023R3R37R5R195R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum6.pngR2i2082R3R37R5R196R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum7.pngR2i1881R3R37R5R197R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum8.pngR2i2024R3R37R5R198R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum9.pngR2i1851R3R37R5R199R6tgoR0y42:assets%2Fshared%2Fimages%2FollieCutout.pngR2i29234R3R37R5R200R6tgoR0y39:assets%2Fshared%2Fimages%2Foverlay1.pngR2i93276R3R37R5R201R6tgoR0y50:assets%2Fshared%2Fimages%2FpixelUI%2Fbad-pixel.pngR2i228R3R37R5R202R6tgoR0y52:assets%2Fshared%2Fimages%2FpixelUI%2Fcombo-pixel.pngR2i247R3R37R5R203R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fdate-pixel.pngR2i518R3R37R5R204R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fgood-pixel.pngR2i237R3R37R5R205R6tgoR0y69:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assets-chip.pngR2i1480R3R37R5R206R6tgoR0y71:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assets-future.pngR2i2351R3R37R5R207R6tgoR0y64:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assets.pngR2i3337R3R37R5R208R6tgoR0y73:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assetsENDS-chip.pngR2i246R3R37R5R209R6tgoR0y75:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assetsENDS-future.pngR2i258R3R37R5R210R6tgoR0y68:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assetsENDS.pngR2i202R3R37R5R211R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum0-pixel.pngR2i132R3R37R5R212R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum1-pixel.pngR2i123R3R37R5R213R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum2-pixel.pngR2i139R3R37R5R214R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum3-pixel.pngR2i137R3R37R5R215R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum4-pixel.pngR2i132R3R37R5R216R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum5-pixel.pngR2i135R3R37R5R217R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum6-pixel.pngR2i138R3R37R5R218R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum7-pixel.pngR2i141R3R37R5R219R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum8-pixel.pngR2i129R3R37R5R220R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum9-pixel.pngR2i127R3R37R5R221R6tgoR0y52:assets%2Fshared%2Fimages%2FpixelUI%2Fready-pixel.pngR2i531R3R37R5R222R6tgoR0y50:assets%2Fshared%2Fimages%2FpixelUI%2Fset-pixel.pngR2i485R3R37R5R223R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fshit-pixel.pngR2i292R3R37R5R224R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fsick-pixel.pngR2i307R3R37R5R225R6tgoR0y36:assets%2Fshared%2Fimages%2Fready.pngR2i28966R3R37R5R226R6tgoR0y34:assets%2Fshared%2Fimages%2Fset.pngR2i25471R3R37R5R227R6tgoR0y35:assets%2Fshared%2Fimages%2Fshit.pngR2i15319R3R37R5R228R6tgoR0y35:assets%2Fshared%2Fimages%2Fsick.pngR2i19249R3R37R5R229R6tgoR0y36:assets%2Fshared%2Fimages%2Fsmoke.pngR2i3731R3R37R5R230R6tgoR0y38:assets%2Fshared%2Fimages%2Fsnokido.pngR2i6645R3R37R5R231R6tgoR0y44:assets%2Fshared%2Fimages%2Fspeech_bubble.pngR2i189234R3R37R5R232R6tgoR0y44:assets%2Fshared%2Fimages%2Fspeech_bubble.xmlR2i9686R3R4R5R233R6tgoR0y40:assets%2Fshared%2Fimages%2Fspotlight.pngR2i12487R3R37R5R234R6tgoR0y43:assets%2Fshared%2Fimages%2FspotlightNEW.pngR2i462851R3R37R5R235R6tgoR0y40:assets%2Fshared%2Fimages%2Fstageback.pngR2i14010R3R37R5R236R6tgoR0y44:assets%2Fshared%2Fimages%2Fstagecurtains.pngR2i123947R3R37R5R237R6tgoR0y41:assets%2Fshared%2Fimages%2Fstagefront.pngR2i120269R3R37R5R238R6tgoR0y42:assets%2Fshared%2Fimages%2Fstage_light.pngR2i7324R3R37R5R239R6tgoR0y49:assets%2Fshared%2Fimages%2Fstorymenu%2Freadme.txtR2i87R3R4R5R240R6tgoR0y48:assets%2Fshared%2Fimages%2Fstorymenu%2Fweek1.pngR2i6261R3R37R5R241R6tgoR0y38:assets%2Fshared%2Fimages%2FtimeBar.pngR2i367R3R37R5R242R6tgoR0y41:assets%2Fshared%2Fimages%2FtitleEnter.pngR2i26291R3R37R5R243R6tgoR0y41:assets%2Fshared%2Fimages%2FtitleEnter.xmlR2i518R3R4R5R244R6tgoR0y41:assets%2Fshared%2Fimages%2FunknownMod.pngR2i2387R3R37R5R245R6tgoR2i1745780R3y5:MUSICR5y39:assets%2Fshared%2Fmusic%2Fbreakfast.mp3y9:pathGroupaR247hR6tgoR2i3101918R3R246R5y40:assets%2Fshared%2Fmusic%2FfreakyMenu.mp3R248aR249hR6tgoR2i442391R3R246R5y38:assets%2Fshared%2Fmusic%2FgameOver.mp3R248aR250hR6tgoR2i54262R3R246R5y41:assets%2Fshared%2Fmusic%2FgameOverEnd.mp3R248aR251hR6tgoR2i1611886R3R246R5y40:assets%2Fshared%2Fmusic%2FoffsetSong.mp3R248aR252hR6tgoR2i6919100R3R246R5y38:assets%2Fshared%2Fmusic%2Ftea-time.mp3R248aR253hR6tgoR2i12318R3R246R5y41:assets%2Fshared%2Fsounds%2FcancelMenu.mp3R248aR254hR6tgoR2i8010R3R246R5y40:assets%2Fshared%2Fsounds%2FclickText.mp3R248aR255hR6tgoR2i51475R3R246R5y42:assets%2Fshared%2Fsounds%2FconfirmMenu.mp3R248aR256hR6tgoR2i5140R3R246R5y39:assets%2Fshared%2Fsounds%2Fdialogue.mp3R248aR257hR6tgoR2i9014R3R246R5y44:assets%2Fshared%2Fsounds%2FdialogueClose.mp3R248aR258hR6tgoR2i113558R3R246R5y43:assets%2Fshared%2Fsounds%2Ffnf_loss_sfx.mp3R248aR259hR6tgoR2i15095R3R246R5y35:assets%2Fshared%2Fsounds%2FGF_1.mp3R248aR260hR6tgoR2i15774R3R246R5y35:assets%2Fshared%2Fsounds%2FGF_2.mp3R248aR261hR6tgoR2i16402R3R246R5y35:assets%2Fshared%2Fsounds%2FGF_3.mp3R248aR262hR6tgoR2i15720R3R246R5y35:assets%2Fshared%2Fsounds%2FGF_4.mp3R248aR263hR6tgoR2i6499R3R246R5y39:assets%2Fshared%2Fsounds%2Fhitsound.mp3R248aR264hR6tgoR2i11748R3R246R5y43:assets%2Fshared%2Fsounds%2Fintro1-pixel.mp3R248aR265hR6tgoR2i13329R3R246R5y37:assets%2Fshared%2Fsounds%2Fintro1.mp3R248aR266hR6tgoR2i12141R3R246R5y43:assets%2Fshared%2Fsounds%2Fintro2-pixel.mp3R248aR267hR6tgoR2i13746R3R246R5y37:assets%2Fshared%2Fsounds%2Fintro2.mp3R248aR268hR6tgoR2i10889R3R246R5y43:assets%2Fshared%2Fsounds%2Fintro3-pixel.mp3R248aR269hR6tgoR2i13330R3R246R5y37:assets%2Fshared%2Fsounds%2Fintro3.mp3R248aR270hR6tgoR2i24879R3R246R5y44:assets%2Fshared%2Fsounds%2FintroGo-pixel.mp3R248aR271hR6tgoR2i14848R3R246R5y38:assets%2Fshared%2Fsounds%2FintroGo.mp3R248aR272hR6tgoR2i116765R3R246R5y45:assets%2Fshared%2Fsounds%2FLights_Turn_On.mp3R248aR273hR6tgoR2i2958R3R246R5y45:assets%2Fshared%2Fsounds%2FMetronome_Tick.mp3R248aR274hR6tgoR2i9424R3R246R5y40:assets%2Fshared%2Fsounds%2Fmissnote1.mp3R248aR275hR6tgoR2i30075R3R246R5y40:assets%2Fshared%2Fsounds%2Fmissnote2.mp3R248aR276hR6tgoR2i30597R3R246R5y40:assets%2Fshared%2Fsounds%2Fmissnote3.mp3R248aR277hR6tgoR2i121534R3R246R5y36:assets%2Fshared%2Fsounds%2Follie.mp3R248aR278hR6tgoR2i9579R3R246R5y41:assets%2Fshared%2Fsounds%2FscrollMenu.mp3R248aR279hR6tgoR2i249596R3R246R5y40:assets%2Fshared%2Fsounds%2FsoundTest.mp3R248aR280hR6tgoR0y39:assets%2Fshared%2Fstages%2Ffactory.jsonR2i286R3R4R5R281R6tgoR0y38:assets%2Fshared%2Fstages%2Ffactory.luaR2i187R3R4R5R282R6tgoR0y37:assets%2Fshared%2Fstages%2Fstage.jsonR2i271R3R4R5R283R6tgoR0y40:assets%2Fshared%2Fweeks%2Fanemaniac.jsonR2i379R3R4R5R284R6tgoR0y38:assets%2Fshared%2Fweeks%2FweekList.txtR2i9R3R4R5R285R6tgoR2i8220R3R246R5y26:flixel%2Fsounds%2Fbeep.mp3R248aR286y26:flixel%2Fsounds%2Fbeep.ogghR6tgoR2i39706R3R246R5y28:flixel%2Fsounds%2Fflixel.mp3R248aR288y28:flixel%2Fsounds%2Fflixel.ogghR6tgoR2i6840R3y5:SOUNDR5R287R248aR286R287hgoR2i33629R3R290R5R289R248aR288R289hgoR2i15744R3R7R8y35:__ASSET__flixel_fonts_nokiafc22_ttfR5y30:flixel%2Ffonts%2Fnokiafc22.ttfR6tgoR2i29724R3R7R8y36:__ASSET__flixel_fonts_monsterrat_ttfR5y31:flixel%2Ffonts%2Fmonsterrat.ttfR6tgoR0y33:flixel%2Fimages%2Fui%2Fbutton.pngR2i277R3R37R5R295R6tgoR0y36:flixel%2Fimages%2Flogo%2Fdefault.pngR2i505R3R37R5R296R6tgoR0y34:flixel%2Fflixel-ui%2Fimg%2Fbox.pngR2i912R3R37R5R297R6tgoR0y37:flixel%2Fflixel-ui%2Fimg%2Fbutton.pngR2i433R3R37R5R298R6tgoR0y48:flixel%2Fflixel-ui%2Fimg%2Fbutton_arrow_down.pngR2i446R3R37R5R299R6tgoR0y48:flixel%2Fflixel-ui%2Fimg%2Fbutton_arrow_left.pngR2i459R3R37R5R300R6tgoR0y49:flixel%2Fflixel-ui%2Fimg%2Fbutton_arrow_right.pngR2i511R3R37R5R301R6tgoR0y46:flixel%2Fflixel-ui%2Fimg%2Fbutton_arrow_up.pngR2i493R3R37R5R302R6tgoR0y42:flixel%2Fflixel-ui%2Fimg%2Fbutton_thin.pngR2i247R3R37R5R303R6tgoR0y44:flixel%2Fflixel-ui%2Fimg%2Fbutton_toggle.pngR2i534R3R37R5R304R6tgoR0y40:flixel%2Fflixel-ui%2Fimg%2Fcheck_box.pngR2i922R3R37R5R305R6tgoR0y41:flixel%2Fflixel-ui%2Fimg%2Fcheck_mark.pngR2i946R3R37R5R306R6tgoR0y37:flixel%2Fflixel-ui%2Fimg%2Fchrome.pngR2i253R3R37R5R307R6tgoR0y42:flixel%2Fflixel-ui%2Fimg%2Fchrome_flat.pngR2i212R3R37R5R308R6tgoR0y43:flixel%2Fflixel-ui%2Fimg%2Fchrome_inset.pngR2i192R3R37R5R309R6tgoR0y43:flixel%2Fflixel-ui%2Fimg%2Fchrome_light.pngR2i214R3R37R5R310R6tgoR0y44:flixel%2Fflixel-ui%2Fimg%2Fdropdown_mark.pngR2i156R3R37R5R311R6tgoR0y41:flixel%2Fflixel-ui%2Fimg%2Ffinger_big.pngR2i1724R3R37R5R312R6tgoR0y43:flixel%2Fflixel-ui%2Fimg%2Ffinger_small.pngR2i294R3R37R5R313R6tgoR0y38:flixel%2Fflixel-ui%2Fimg%2Fhilight.pngR2i129R3R37R5R314R6tgoR0y36:flixel%2Fflixel-ui%2Fimg%2Finvis.pngR2i128R3R37R5R315R6tgoR0y41:flixel%2Fflixel-ui%2Fimg%2Fminus_mark.pngR2i136R3R37R5R316R6tgoR0y40:flixel%2Fflixel-ui%2Fimg%2Fplus_mark.pngR2i147R3R37R5R317R6tgoR0y36:flixel%2Fflixel-ui%2Fimg%2Fradio.pngR2i191R3R37R5R318R6tgoR0y40:flixel%2Fflixel-ui%2Fimg%2Fradio_dot.pngR2i153R3R37R5R319R6tgoR0y37:flixel%2Fflixel-ui%2Fimg%2Fswatch.pngR2i185R3R37R5R320R6tgoR0y34:flixel%2Fflixel-ui%2Fimg%2Ftab.pngR2i201R3R37R5R321R6tgoR0y39:flixel%2Fflixel-ui%2Fimg%2Ftab_back.pngR2i210R3R37R5R322R6tgoR0y44:flixel%2Fflixel-ui%2Fimg%2Ftooltip_arrow.pngR2i18509R3R37R5R323R6tgoR0y39:flixel%2Fflixel-ui%2Fxml%2Fdefaults.xmlR2i1263R3R4R5R324R6tgoR0y53:flixel%2Fflixel-ui%2Fxml%2Fdefault_loading_screen.xmlR2i1953R3R4R5R325R6tgoR0y44:flixel%2Fflixel-ui%2Fxml%2Fdefault_popup.xmlR2i1848R3R4R5R326R6tgoR0y42:flixel%2Fimages%2Ftransitions%2Fcircle.pngR2i824R3R37R5R327R6tgoR0y53:flixel%2Fimages%2Ftransitions%2Fdiagonal_gradient.pngR2i3812R3R37R5R328R6tgoR0y43:flixel%2Fimages%2Ftransitions%2Fdiamond.pngR2i788R3R37R5R329R6tgoR0y42:flixel%2Fimages%2Ftransitions%2Fsquare.pngR2i383R3R37R5R330R6tgoR0y31:flxanimate%2Fimages%2Fpivot.pngR2i300R3R37R5R331R6tgoR0y35:flxanimate%2Fimages%2Findicator.pngR2i129R3R37R5R332R6tgh\",\"rootPath\":null,\"version\":2,\"libraryArgs\":[],\"libraryType\":null}", Ra.rootPath);
        a = hc.fromManifest(a);
        sa.registerLibrary("default", a);
        a = sa.getLibrary("default");
        if (a != null) {
          Ra.preloadLibraries.push(a);
        } else {
          Ra.preloadLibraryNames.push("default");
        }
      };
      function Ja(a) {
        if (a != null) {
          this.name = a;
        }
        if (!this.__init) {
          if (this.ascender == undefined) {
            this.ascender = 0;
          }
          if (this.descender == undefined) {
            this.descender = 0;
          }
          if (this.height == undefined) {
            this.height = 0;
          }
          if (this.numGlyphs == undefined) {
            this.numGlyphs = 0;
          }
          if (this.underlinePosition == undefined) {
            this.underlinePosition = 0;
          }
          if (this.underlineThickness == undefined) {
            this.underlineThickness = 0;
          }
          if (this.unitsPerEM == undefined) {
            this.unitsPerEM = 0;
          }
          if (this.__fontID != null) {
            if (sa.isLocal(this.__fontID)) {
              this.__fromBytes(sa.getBytes(this.__fontID));
            }
          } else if (this.__fontPath != null) {
            this.__fromFile(this.__fontPath);
          }
        }
      }
      g["lime.text.Font"] = Ja;
      Ja.__name__ = "lime.text.Font";
      Ja.fromFile = function (a) {
        if (a == null) {
          return null;
        }
        var b = new Ja();
        b.__fromFile(a);
        return b;
      };
      Ja.loadFromName = function (a) {
        return new Ja().__loadFromName(a);
      };
      Ja.__measureFontNode = function (a) {
        var b = window.document.createElement("span");
        b.setAttribute("aria-hidden", "true");
        var c = window.document.createTextNode("BESbswy");
        b.appendChild(c);
        c = b.style;
        c.display = "block";
        c.position = "absolute";
        c.top = "-9999px";
        c.left = "-9999px";
        c.fontSize = "300px";
        c.width = "auto";
        c.height = "auto";
        c.lineHeight = "normal";
        c.margin = "0";
        c.padding = "0";
        c.fontVariant = "normal";
        c.whiteSpace = "nowrap";
        c.fontFamily = a;
        window.document.body.appendChild(b);
        return b;
      };
      Ja.prototype = {
        __copyFrom: function (a) {
          if (a != null) {
            this.ascender = a.ascender;
            this.descender = a.descender;
            this.height = a.height;
            this.name = a.name;
            this.numGlyphs = a.numGlyphs;
            this.src = a.src;
            this.underlinePosition = a.underlinePosition;
            this.underlineThickness = a.underlineThickness;
            this.unitsPerEM = a.unitsPerEM;
            this.__fontID = a.__fontID;
            this.__fontPath = a.__fontPath;
            this.__init = true;
          }
        },
        __fromBytes: function (a) {
          this.__fontPath = null;
        },
        __fromFile: function (a) {
          this.__fontPath = a;
        },
        __loadFromName: function (a) {
          var b = this;
          var c = new Id();
          this.name = a;
          var d = E.navigator.userAgent.toLowerCase();
          var e = d.indexOf(" safari/") >= 0 && d.indexOf(" chrome/") < 0;
          d = new V("(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)", "i").match(d);
          if (!e && !d && window.document.fonts && (u = window.document.fonts, m(u, u.load))) {
            window.document.fonts.load("1em '" + a + "'").then(function (a) {
              c.complete(b);
            }, function (d) {
              Va.warn("Could not load web font \"" + a + "\"", {
                fileName: "lime/text/Font.hx",
                lineNumber: 516,
                className: "lime.text.Font",
                methodName: "__loadFromName"
              });
              c.complete(b);
            });
          } else {
            var f = Ja.__measureFontNode("'" + a + "', sans-serif");
            var k = Ja.__measureFontNode("'" + a + "', serif");
            var t = f.offsetWidth;
            var n = k.offsetWidth;
            var h = -1;
            var ya = 0;
            var l;
            var L;
            h = window.setInterval(function () {
              ya += 1;
              l = f.offsetWidth != t || k.offsetWidth != n;
              L = ya * 50 >= 3000;
              if (l || L) {
                window.clearInterval(h);
                f.parentNode.removeChild(f);
                k.parentNode.removeChild(k);
                k = f = null;
                if (L) {
                  Va.warn("Could not load web font \"" + a + "\"", {
                    fileName: "lime/text/Font.hx",
                    lineNumber: 551,
                    className: "lime.text.Font",
                    methodName: "__loadFromName"
                  });
                }
                c.complete(b);
              }
            }, 50);
          }
          return c.future;
        },
        __class__: Ja
      };
      var hb = x.__ASSET__assets_fonts_pixel_otf = function () {
        this.ascender = 1125;
        this.descender = -250;
        this.height = 1375;
        this.numGlyphs = 262;
        this.underlinePosition = -143;
        this.underlineThickness = 20;
        this.unitsPerEM = 1000;
        this.name = "Pixel Arial 11 Bold";
        Ja.call(this);
      };
      g.__ASSET__assets_fonts_pixel_otf = hb;
      hb.__name__ = "__ASSET__assets_fonts_pixel_otf";
      hb.__super__ = Ja;
      hb.prototype = q(Ja.prototype, {
        __class__: hb
      });
      var Ma = x.__ASSET__assets_fonts_vcr_ttf = function () {
        this.ascender = 1800;
        this.descender = 0;
        this.height = 2000;
        this.numGlyphs = 204;
        this.underlinePosition = -292;
        this.underlineThickness = 150;
        this.unitsPerEM = 2048;
        this.name = "VCR OSD Mono";
        Ja.call(this);
      };
      g.__ASSET__assets_fonts_vcr_ttf = Ma;
      Ma.__name__ = "__ASSET__assets_fonts_vcr_ttf";
      Ma.__super__ = Ja;
      Ma.prototype = q(Ja.prototype, {
        __class__: Ma
      });
      var ma = x.__ASSET__flixel_fonts_nokiafc22_ttf = function () {
        this.ascender = 2048;
        this.descender = -512;
        this.height = 2816;
        this.numGlyphs = 172;
        this.underlinePosition = -640;
        this.underlineThickness = 256;
        this.unitsPerEM = 2048;
        this.name = "Nokia Cellphone FC Small";
        Ja.call(this);
      };
      g.__ASSET__flixel_fonts_nokiafc22_ttf = ma;
      ma.__name__ = "__ASSET__flixel_fonts_nokiafc22_ttf";
      ma.__super__ = Ja;
      ma.prototype = q(Ja.prototype, {
        __class__: ma
      });
      var ka = x.__ASSET__flixel_fonts_monsterrat_ttf = function () {
        this.ascender = 968;
        this.descender = -251;
        this.height = 1219;
        this.numGlyphs = 263;
        this.underlinePosition = -150;
        this.underlineThickness = 50;
        this.unitsPerEM = 1000;
        this.name = "Monsterrat";
        Ja.call(this);
      };
      g.__ASSET__flixel_fonts_monsterrat_ttf = ka;
      ka.__name__ = "__ASSET__flixel_fonts_monsterrat_ttf";
      ka.__super__ = Ja;
      ka.prototype = q(Ja.prototype, {
        __class__: ka
      });
      function wb(a) {
        Ja.call(this, a);
      }
      g["openfl.text.Font"] = wb;
      wb.__name__ = "openfl.text.Font";
      wb.fromFile = function (a) {
        if (a == null) {
          return null;
        }
        var b = new wb();
        b.__fromFile(a);
        return b;
      };
      wb.loadFromName = function (a) {
        return Ja.loadFromName(a).then(function (a) {
          var b = new wb();
          b.__fromLimeFont(a);
          return Bb.withValue(b);
        });
      };
      wb.registerFont = function (a) {
        a = va.getClass(a) == null ? va.__cast(yb.createInstance(a, []), wb) : va.__cast(a, wb);
        if (a != null) {
          wb.__registeredFonts.push(a);
          wb.__fontByName.h[a.name] = a;
        }
      };
      wb.__super__ = Ja;
      wb.prototype = q(Ja.prototype, {
        __fromLimeFont: function (a) {
          this.__copyFrom(a);
        },
        __class__: wb
      });
      var Mb = x.__ASSET__OPENFL__assets_fonts_pixel_otf = function () {
        this.__fromLimeFont(new hb());
        Ja.call(this, undefined);
      };
      g.__ASSET__OPENFL__assets_fonts_pixel_otf = Mb;
      Mb.__name__ = "__ASSET__OPENFL__assets_fonts_pixel_otf";
      Mb.__super__ = wb;
      Mb.prototype = q(wb.prototype, {
        __class__: Mb
      });
      var Fc = x.__ASSET__OPENFL__assets_fonts_vcr_ttf = function () {
        this.__fromLimeFont(new Ma());
        Ja.call(this, undefined);
      };
      g.__ASSET__OPENFL__assets_fonts_vcr_ttf = Fc;
      Fc.__name__ = "__ASSET__OPENFL__assets_fonts_vcr_ttf";
      Fc.__super__ = wb;
      Fc.prototype = q(wb.prototype, {
        __class__: Fc
      });
      var Nb = x.__ASSET__OPENFL__flixel_fonts_nokiafc22_ttf = function () {
        this.__fromLimeFont(new ma());
        Ja.call(this, undefined);
      };
      g.__ASSET__OPENFL__flixel_fonts_nokiafc22_ttf = Nb;
      Nb.__name__ = "__ASSET__OPENFL__flixel_fonts_nokiafc22_ttf";
      Nb.__super__ = wb;
      Nb.prototype = q(wb.prototype, {
        __class__: Nb
      });
      var ba = x.__ASSET__OPENFL__flixel_fonts_monsterrat_ttf = function () {
        this.__fromLimeFont(new ka());
        Ja.call(this, undefined);
      };
      g.__ASSET__OPENFL__flixel_fonts_monsterrat_ttf = ba;
      ba.__name__ = "__ASSET__OPENFL__flixel_fonts_monsterrat_ttf";
      ba.__super__ = wb;
      ba.prototype = q(wb.prototype, {
        __class__: ba
      });
      Math.__name__ = "Math";
      function ja() {}
      g.Reflect = ja;
      ja.__name__ = "Reflect";
      ja.field = function (a, b) {
        try {
          return a[b];
        } catch (c) {
          Pa.lastError = c;
          return null;
        }
      };
      ja.getProperty = function (a, b) {
        var c;
        if (a == null) {
          return null;
        }
        var d = a.__properties__ ? c = a.__properties__["get_" + b] : false;
        if (d) {
          return a[c]();
        } else {
          return a[b];
        }
      };
      ja.setProperty = function (a, b, c) {
        var d;
        var e = a.__properties__ ? d = a.__properties__["set_" + b] : false;
        if (e) {
          a[d](c);
        } else {
          a[b] = c;
        }
      };
      ja.fields = function (a) {
        var b = [];
        if (a != null) {
          var c = Object.prototype.hasOwnProperty;
          var d;
          for (d in a) {
            if (d != "__id__" && d != "hx__closures__" && c.call(a, d)) {
              b.push(d);
            }
          }
        }
        return b;
      };
      ja.isFunction = function (a) {
        if (typeof a == "function") {
          return !a.__name__ && !a.__ename__;
        } else {
          return false;
        }
      };
      ja.compare = function (a, b) {
        if (a == b) {
          return 0;
        } else if (a > b) {
          return 1;
        } else {
          return -1;
        }
      };
      ja.isObject = function (a) {
        if (a == null) {
          return false;
        }
        var b = typeof a;
        if (b == "string" || b == "object" && a.__enum__ == null) {
          return true;
        } else if (b == "function") {
          return (a.__name__ || a.__ename__) != null;
        } else {
          return false;
        }
      };
      ja.isEnumValue = function (a) {
        if (a != null) {
          return a.__enum__ != null;
        } else {
          return false;
        }
      };
      ja.deleteField = function (a, b) {
        if (!Object.prototype.hasOwnProperty.call(a, b)) {
          return false;
        }
        delete a[b];
        return true;
      };
      function v() {}
      g.Std = v;
      v.__name__ = "Std";
      v.string = function (a) {
        return va.__string_rec(a, "");
      };
      v.parseInt = function (a) {
        a = parseInt(a);
        if (isNaN(a)) {
          return null;
        } else {
          return a;
        }
      };
      function J() {}
      g["_String.String_Impl_"] = J;
      J.__name__ = "_String.String_Impl_";
      J.fromCharCode = function (a) {
        return String.fromCodePoint(a);
      };
      function Ab() {
        this.b = "";
      }
      g.StringBuf = Ab;
      Ab.__name__ = "StringBuf";
      Ab.prototype = {
        __class__: Ab
      };
      function w() {}
      g.StringTools = w;
      w.__name__ = "StringTools";
      w.htmlEscape = function (a, b) {
        var c = "";
        for (var d = 0, e = a; d < e.length;) {
          a = e;
          var f = d++;
          var k = a.charCodeAt(f);
          if (k >= 55296 && k <= 56319) {
            k = k - 55232 << 10 | a.charCodeAt(f + 1) & 1023;
          }
          a = k;
          if (a >= 65536) {
            ++d;
          }
          switch (a) {
            case 34:
              c = b ? c + "&quot;" : c + String.fromCodePoint(a);
              break;
            case 38:
              c += "&amp;";
              break;
            case 39:
              c = b ? c + "&#039;" : c + String.fromCodePoint(a);
              break;
            case 60:
              c += "&lt;";
              break;
            case 62:
              c += "&gt;";
              break;
            default:
              c += String.fromCodePoint(a);
          }
        }
        return c;
      };
      w.htmlUnescape = function (a) {
        return a.split("&gt;").join(">").split("&lt;").join("<").split("&quot;").join("\"").split("&#039;").join("'").split("&amp;").join("&");
      };
      w.startsWith = function (a, b) {
        if (a.length >= b.length) {
          return a.lastIndexOf(b, 0) == 0;
        } else {
          return false;
        }
      };
      w.endsWith = function (a, b) {
        var c = b.length;
        var d = a.length;
        if (d >= c) {
          return a.indexOf(b, d - c) == d - c;
        } else {
          return false;
        }
      };
      w.isSpace = function (a, b) {
        a = r.cca(a, b);
        if (a > 8 && a < 14) {
          return true;
        } else {
          return a == 32;
        }
      };
      w.ltrim = function (a) {
        for (var b = a.length, c = 0; c < b && w.isSpace(a, c);) {
          ++c;
        }
        if (c > 0) {
          return r.substr(a, c, b - c);
        } else {
          return a;
        }
      };
      w.rtrim = function (a) {
        for (var b = a.length, c = 0; c < b && w.isSpace(a, b - c - 1);) {
          ++c;
        }
        if (c > 0) {
          return r.substr(a, 0, b - c);
        } else {
          return a;
        }
      };
      w.trim = function (a) {
        return w.ltrim(w.rtrim(a));
      };
      w.replace = function (a, b, c) {
        return a.split(b).join(c);
      };
      w.hex = function (a, b) {
        var c = "";
        do {
          c = "0123456789ABCDEF".charAt(a & 15) + c;
          a >>>= 4;
        } while (a > 0);
        if (b != null) {
          while (c.length < b) {
            c = "0" + c;
          }
        }
        return c;
      };
      var Bc = z.ValueType = {
        __ename__: "ValueType",
        __constructs__: null,
        TNull: {
          _hx_name: "TNull",
          _hx_index: 0,
          __enum__: "ValueType",
          toString: p
        },
        TInt: {
          _hx_name: "TInt",
          _hx_index: 1,
          __enum__: "ValueType",
          toString: p
        },
        TFloat: {
          _hx_name: "TFloat",
          _hx_index: 2,
          __enum__: "ValueType",
          toString: p
        },
        TBool: {
          _hx_name: "TBool",
          _hx_index: 3,
          __enum__: "ValueType",
          toString: p
        },
        TObject: {
          _hx_name: "TObject",
          _hx_index: 4,
          __enum__: "ValueType",
          toString: p
        },
        TFunction: {
          _hx_name: "TFunction",
          _hx_index: 5,
          __enum__: "ValueType",
          toString: p
        },
        TClass: (u = function (a) {
          return {
            _hx_index: 6,
            c: a,
            __enum__: "ValueType",
            toString: p
          };
        }, u._hx_name = "TClass", u.__params__ = ["c"], u),
        TEnum: (u = function (a) {
          return {
            _hx_index: 7,
            e: a,
            __enum__: "ValueType",
            toString: p
          };
        }, u._hx_name = "TEnum", u.__params__ = ["e"], u),
        TUnknown: {
          _hx_name: "TUnknown",
          _hx_index: 8,
          __enum__: "ValueType",
          toString: p
        }
      };
      Bc.__constructs__ = [Bc.TNull, Bc.TInt, Bc.TFloat, Bc.TBool, Bc.TObject, Bc.TFunction, Bc.TClass, Bc.TEnum, Bc.TUnknown];
      function yb() {}
      g.Type = yb;
      yb.__name__ = "Type";
      yb.resolveEnum = function (a) {
        return z[a];
      };
      yb.createInstance = function (a, b) {
        return new (Function.prototype.bind.apply(a, [null].concat(b)))();
      };
      yb.createEnum = function (a, b, c) {
        var d = ja.field(a, b);
        if (d == null) {
          throw G.thrown("No such constructor " + b);
        }
        if (ja.isFunction(d)) {
          if (c == null) {
            throw G.thrown("Constructor " + b + " need parameters");
          }
          return d.apply(a, c);
        }
        if (c != null && c.length != 0) {
          throw G.thrown("Constructor " + b + " does not need parameters");
        }
        return d;
      };
      yb.typeof = function (a) {
        switch (typeof a) {
          case "boolean":
            return Bc.TBool;
          case "function":
            if (a.__name__ || a.__ename__) {
              return Bc.TObject;
            } else {
              return Bc.TFunction;
            }
          case "number":
            if (Math.ceil(a) == a % 2147483648) {
              return Bc.TInt;
            } else {
              return Bc.TFloat;
            }
          case "object":
            if (a == null) {
              return Bc.TNull;
            }
            var b = a.__enum__;
            if (b != null) {
              return Bc.TEnum(z[b]);
            }
            a = va.getClass(a);
            if (a != null) {
              return Bc.TClass(a);
            } else {
              return Bc.TObject;
            }
          case "string":
            return Bc.TClass(String);
          case "undefined":
            return Bc.TNull;
          default:
            return Bc.TUnknown;
        }
      };
      yb.enumParameters = function (a) {
        var b = z[a.__enum__].__constructs__[a._hx_index].__params__;
        if (b != null) {
          var c = [];
          for (var d = 0; d < b.length;) {
            var e = b[d];
            ++d;
            c.push(a[e]);
          }
          return c;
        }
        return [];
      };
      var kc = {
        gt: function (a, b) {
          var c = a < 0;
          if (c != b < 0) {
            return c;
          } else {
            return a > b;
          }
        },
        toFloat: function (a) {
          if (a < 0) {
            return 4294967296 + a;
          } else {
            return a + 0;
          }
        }
      };
      var mb = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "Element";
            case 1:
              return "PCData";
            case 2:
              return "CData";
            case 3:
              return "Comment";
            case 4:
              return "DocType";
            case 5:
              return "ProcessingInstruction";
            case 6:
              return "Document";
          }
        }
      };
      function ea(a) {
        this.nodeType = a;
        this.children = [];
        this.attributeMap = new ua();
      }
      g.Xml = ea;
      ea.__name__ = "Xml";
      ea.parse = function (a) {
        return Ag.parse(a);
      };
      ea.createElement = function (a) {
        var b = new ea(ea.Element);
        if (b.nodeType != ea.Element) {
          throw G.thrown("Bad node type, expected Element but found " + (b.nodeType == null ? "null" : mb.toString(b.nodeType)));
        }
        b.nodeName = a;
        return b;
      };
      ea.createPCData = function (a) {
        var b = new ea(ea.PCData);
        if (b.nodeType == ea.Document || b.nodeType == ea.Element) {
          throw G.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : mb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      ea.createCData = function (a) {
        var b = new ea(ea.CData);
        if (b.nodeType == ea.Document || b.nodeType == ea.Element) {
          throw G.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : mb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      ea.createComment = function (a) {
        var b = new ea(ea.Comment);
        if (b.nodeType == ea.Document || b.nodeType == ea.Element) {
          throw G.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : mb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      ea.createDocType = function (a) {
        var b = new ea(ea.DocType);
        if (b.nodeType == ea.Document || b.nodeType == ea.Element) {
          throw G.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : mb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      ea.createProcessingInstruction = function (a) {
        var b = new ea(ea.ProcessingInstruction);
        if (b.nodeType == ea.Document || b.nodeType == ea.Element) {
          throw G.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : mb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      ea.createDocument = function () {
        return new ea(ea.Document);
      };
      ea.prototype = {
        get: function (a) {
          if (this.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element but found " + (this.nodeType == null ? "null" : mb.toString(this.nodeType)));
          }
          return this.attributeMap.h[a];
        },
        set: function (a, b) {
          if (this.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element but found " + (this.nodeType == null ? "null" : mb.toString(this.nodeType)));
          }
          this.attributeMap.h[a] = b;
        },
        exists: function (a) {
          if (this.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element but found " + (this.nodeType == null ? "null" : mb.toString(this.nodeType)));
          }
          return Object.prototype.hasOwnProperty.call(this.attributeMap.h, a);
        },
        attributes: function () {
          if (this.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element but found " + (this.nodeType == null ? "null" : mb.toString(this.nodeType)));
          }
          return new rk(this.attributeMap.h);
        },
        elements: function () {
          if (this.nodeType != ea.Document && this.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : mb.toString(this.nodeType)));
          }
          var a = [];
          for (var b = 0, c = this.children; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.nodeType == ea.Element) {
              a.push(d);
            }
          }
          return new Qf(a);
        },
        elementsNamed: function (a) {
          if (this.nodeType != ea.Document && this.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : mb.toString(this.nodeType)));
          }
          var b = [];
          for (var c = 0, d = this.children; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.nodeType == ea.Element) {
              if (e.nodeType != ea.Element) {
                throw G.thrown("Bad node type, expected Element but found " + (e.nodeType == null ? "null" : mb.toString(e.nodeType)));
              }
              var f = e.nodeName == a;
            } else {
              f = false;
            }
            if (f) {
              b.push(e);
            }
          }
          return new Qf(b);
        },
        firstElement: function () {
          if (this.nodeType != ea.Document && this.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : mb.toString(this.nodeType)));
          }
          for (var a = 0, b = this.children; a < b.length;) {
            var c = b[a];
            ++a;
            if (c.nodeType == ea.Element) {
              return c;
            }
          }
          return null;
        },
        addChild: function (a) {
          if (this.nodeType != ea.Document && this.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : mb.toString(this.nodeType)));
          }
          if (a.parent != null) {
            a.parent.removeChild(a);
          }
          this.children.push(a);
          a.parent = this;
        },
        removeChild: function (a) {
          if (this.nodeType != ea.Document && this.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : mb.toString(this.nodeType)));
          }
          if (r.remove(this.children, a)) {
            a.parent = null;
            return true;
          } else {
            return false;
          }
        },
        insertChild: function (a, b) {
          if (this.nodeType != ea.Document && this.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : mb.toString(this.nodeType)));
          }
          if (a.parent != null) {
            r.remove(a.parent.children, a);
          }
          this.children.splice(b, 0, a);
          a.parent = this;
        },
        toString: function () {
          return Bg.print(this);
        },
        __class__: ea
      };
      var Sf = z["backend.Countdown"] = {
        __ename__: "backend.Countdown",
        __constructs__: null,
        THREE: {
          _hx_name: "THREE",
          _hx_index: 0,
          __enum__: "backend.Countdown",
          toString: p
        },
        TWO: {
          _hx_name: "TWO",
          _hx_index: 1,
          __enum__: "backend.Countdown",
          toString: p
        },
        ONE: {
          _hx_name: "ONE",
          _hx_index: 2,
          __enum__: "backend.Countdown",
          toString: p
        },
        GO: {
          _hx_name: "GO",
          _hx_index: 3,
          __enum__: "backend.Countdown",
          toString: p
        },
        START: {
          _hx_name: "START",
          _hx_index: 4,
          __enum__: "backend.Countdown",
          toString: p
        }
      };
      Sf.__constructs__ = [Sf.THREE, Sf.TWO, Sf.ONE, Sf.GO, Sf.START];
      function Nh() {
        this.curBeat = this.curDecBeat = this.curStep = this.curDecStep = this.curSection = 0;
        this.onPlayState = false;
        this.game = A.instance;
        var a = P.getState();
        this.onPlayState = a instanceof A;
        this.game = a;
        if (this.game == null) {
          h.log.advanced("Invalid state for the stage added!", xa.WARNING, true);
          this.destroy();
        } else {
          this.game.stages.push(this);
          Ea.call(this);
          this.create();
        }
      }
      g["backend.BaseStage"] = Nh;
      Nh.__name__ = "backend.BaseStage";
      Nh.__super__ = Ea;
      Nh.prototype = q(Ea.prototype, {
        create: function () {},
        createPost: function () {},
        countdownTick: function (a, b) {},
        beatHit: function () {},
        stepHit: function () {},
        sectionHit: function () {},
        closeSubState: function () {},
        openSubState: function (a) {},
        eventCalled: function (a, b, c, d, e, f) {},
        eventPushed: function (a) {},
        eventPushedUnique: function (a) {},
        add: function (a) {
          this.game.add(a);
        },
        __class__: Nh
      });
      function sk(a, b, c, d, e, f, k, t, n, h, ya, l, L, g, p, v, m, q, w, u, r, z, ba, J, y, B, A, D, C, x, F, G, H, la, N, ha, ja) {
        this.guitarHeroSustains = this.discordRPC = true;
        this.safeFrames = 10;
        this.badWindow = 135;
        this.goodWindow = 90;
        this.sickWindow = 45;
        this.ratingOffset = 0;
        this.comboOffset = [0, 0, 0, 0];
        var K = new ua();
        K.h.scrollspeed = 1;
        K.h.scrolltype = "multiplicative";
        K.h.songspeed = 1;
        K.h.healthgain = 1;
        K.h.healthloss = 1;
        K.h.instakill = false;
        K.h.practice = false;
        K.h.botplay = false;
        K.h.opponentplay = false;
        this.gameplaySettings = K;
        this.checkForUpdates = this.comboStacking = true;
        this.pauseMusic = "Tea Time";
        this.hitsoundVolume = 0;
        this.healthBarAlpha = 1;
        this.noReset = false;
        this.scoreZoom = true;
        this.timeBarType = "Time Left";
        this.ghostTapping = true;
        this.arrowRGBPixel = [[-1935617, -1537, -10485619], [-12727553, -720897, -16764832], [-9313536, -589850, -16764672], [-30642, -1291, -9699328]];
        this.arrowRGB = [[-4043879, -1, -12837034], [-16711681, -1, -15383881], [-15533563, -1, -16104377], [-444097, -1, -10153928]];
        this.noteOffset = 0;
        this.hideHud = false;
        this.camZooms = true;
        this.framerate = 60;
        this.cacheOnGPU = false;
        this.shaders = true;
        this.lowQuality = false;
        this.splashAlpha = 0.6;
        this.splashSkin = "Psych";
        this.noteSkin = "Default";
        this.antialiasing = true;
        this.autoPause = false;
        this.flashing = true;
        this.showFPS = false;
        this.opponentStrums = true;
        this.downScroll = this.middleScroll = false;
        if (a != null) {
          this.downScroll = a;
        }
        if (b != null) {
          this.middleScroll = b;
        }
        if (c != null) {
          this.opponentStrums = c;
        }
        if (d != null) {
          this.showFPS = d;
        }
        if (e != null) {
          this.flashing = e;
        }
        if (f != null) {
          this.autoPause = f;
        }
        if (k != null) {
          this.antialiasing = k;
        }
        if (t != null) {
          this.noteSkin = t;
        }
        if (n != null) {
          this.splashSkin = n;
        }
        if (h != null) {
          this.splashAlpha = h;
        }
        if (ya != null) {
          this.lowQuality = ya;
        }
        if (l != null) {
          this.shaders = l;
        }
        if (L != null) {
          this.cacheOnGPU = L;
        }
        if (g != null) {
          this.framerate = g;
        }
        if (p != null) {
          this.camZooms = p;
        }
        if (v != null) {
          this.hideHud = v;
        }
        if (m != null) {
          this.noteOffset = m;
        }
        if (q != null) {
          this.arrowRGB = q;
        }
        if (w != null) {
          this.arrowRGBPixel = w;
        }
        if (u != null) {
          this.ghostTapping = u;
        }
        if (r != null) {
          this.timeBarType = r;
        }
        if (z != null) {
          this.scoreZoom = z;
        }
        if (ba != null) {
          this.noReset = ba;
        }
        if (J != null) {
          this.healthBarAlpha = J;
        }
        if (y != null) {
          this.hitsoundVolume = y;
        }
        if (B != null) {
          this.pauseMusic = B;
        }
        if (A != null) {
          this.checkForUpdates = A;
        }
        if (D != null) {
          this.comboStacking = D;
        }
        if (C != null) {
          this.gameplaySettings = C;
        }
        if (x != null) {
          this.comboOffset = x;
        }
        if (F != null) {
          this.ratingOffset = F;
        }
        if (G != null) {
          this.sickWindow = G;
        }
        if (H != null) {
          this.goodWindow = H;
        }
        if (la != null) {
          this.badWindow = la;
        }
        if (N != null) {
          this.safeFrames = N;
        }
        if (ha != null) {
          this.guitarHeroSustains = ha;
        }
        if (ja != null) {
          this.discordRPC = ja;
        }
      }
      g["backend.SaveVariables"] = sk;
      sk.__name__ = "backend.SaveVariables";
      sk.prototype = {
        __class__: sk
      };
      function y() {}
      g["backend.ClientPrefs"] = y;
      y.__name__ = "backend.ClientPrefs";
      y.resetKeys = function (a) {
        if (a != 1) {
          var b = y.keyBinds.h;
          var c = Object.keys(b);
          for (var d = c.length, e = 0; e < d;) {
            var f = c[e++];
            if (Object.prototype.hasOwnProperty.call(y.defaultKeys.h, f)) {
              b = y.keyBinds;
              var k = y.defaultKeys.h[f].slice();
              b.h[f] = k;
            }
          }
        }
        if (a != 0) {
          b = y.gamepadBinds.h;
          a = Object.keys(b);
          c = a.length;
          d = 0;
          while (d < c) {
            e = a[d++];
            if (Object.prototype.hasOwnProperty.call(y.defaultButtons.h, e)) {
              b = y.gamepadBinds;
              k = y.defaultButtons.h[e].slice();
              b.h[e] = k;
            }
          }
        }
      };
      y.clearInvalidKeys = function (a) {
        var b = y.keyBinds.h[a];
        for (a = y.gamepadBinds.h[a]; b != null && b.indexOf(-1) != -1;) {
          r.remove(b, -1);
        }
        while (a != null && a.indexOf(-1) != -1) {
          r.remove(a, -1);
        }
      };
      y.loadDefaultKeys = function () {
        y.defaultKeys = ua.createCopy(y.keyBinds.h);
        y.defaultButtons = ua.createCopy(y.gamepadBinds.h);
      };
      y.saveSettings = function () {
        for (var a = 0, b = ja.fields(y.data); a < b.length;) {
          var c = b[a];
          ++a;
          h.save.data[c] = ja.field(y.data, c);
        }
        h.save.flush();
        a = new Jd();
        b = oa.get_current().stage.application.meta.h.company;
        a.bind("controls_v3", "" + b + "/" + Jd.validate(oa.get_current().stage.application.meta.h.file));
        a.data.keyboard = y.keyBinds;
        a.data.gamepad = y.gamepadBinds;
        a.flush();
        h.log.advanced("Settings saved!", xa.NORMAL);
      };
      y.loadPrefs = function () {
        for (var a = 0, b = ja.fields(y.data); a < b.length;) {
          var c = b[a];
          ++a;
          if (c != "gameplaySettings" && Object.prototype.hasOwnProperty.call(h.save.data, c)) {
            y.data[c] = ja.field(h.save.data, c);
          }
        }
        if (Wb.fpsVar != null) {
          Wb.fpsVar.set_visible(y.data.showFPS);
        }
        if (y.data.framerate > h.drawFramerate) {
          h.set_updateFramerate(y.data.framerate);
          h.set_drawFramerate(y.data.framerate);
        } else {
          h.set_drawFramerate(y.data.framerate);
          h.set_updateFramerate(y.data.framerate);
        }
        if (h.save.data.gameplaySettings != null) {
          var d = h.save.data.gameplaySettings.h;
          b = d;
          d = Object.keys(d);
          for (var e = d.length, f = 0; f < e;) {
            var k = c = d[f++];
            c = b[c];
            y.data.gameplaySettings.h[k] = c;
          }
        }
        if (h.save.data.volume != null) {
          h.sound.set_volume(h.save.data.volume);
        }
        if (h.save.data.mute != null) {
          h.sound.muted = h.save.data.mute;
        }
        a = new Jd();
        b = oa.get_current().stage.application.meta.h.company;
        a.bind("controls_v3", "" + b + "/" + Jd.validate(oa.get_current().stage.application.meta.h.file));
        if (a != null) {
          if (a.data.keyboard != null) {
            b = a.data.keyboard;
            b = d = b.h;
            d = Object.keys(d);
            e = d.length;
            f = 0;
            while (f < e) {
              k = c = d[f++];
              c = b[c];
              if (Object.prototype.hasOwnProperty.call(y.keyBinds.h, k)) {
                y.keyBinds.h[k] = c;
              }
            }
          }
          if (a.data.gamepad != null) {
            b = a.data.gamepad;
            b = d = b.h;
            d = Object.keys(d);
            e = d.length;
            f = 0;
            while (f < e) {
              k = c = d[f++];
              c = b[c];
              if (Object.prototype.hasOwnProperty.call(y.gamepadBinds.h, k)) {
                y.gamepadBinds.h[k] = c;
              }
            }
          }
          y.reloadVolumeKeys();
        }
      };
      y.reloadVolumeKeys = function () {
        yc.muteKeys = y.keyBinds.h.volume_mute.slice();
        yc.volumeDownKeys = y.keyBinds.h.volume_down.slice();
        yc.volumeUpKeys = y.keyBinds.h.volume_up.slice();
        y.toggleVolumeKeys(true);
      };
      y.toggleVolumeKeys = function (a) {
        if (a == null) {
          a = true;
        }
        h.sound.muteKeys = a ? yc.muteKeys : [];
        h.sound.volumeDownKeys = a ? yc.volumeDownKeys : [];
        h.sound.volumeUpKeys = a ? yc.volumeUpKeys : [];
      };
      function O() {}
      g["backend.Conductor"] = O;
      O.__name__ = "backend.Conductor";
      O.__properties__ = {
        set_bpm: "set_bpm"
      };
      O.judgeNote = function (a, b) {
        if (b == null) {
          b = 0;
        }
        for (var c = 0, d = a.length - 1; c < d;) {
          var e = c++;
          if (b <= a[e].hitWindow) {
            return a[e];
          }
        }
        return a[a.length - 1];
      };
      O.getBPMFromSeconds = function (a) {
        var b = {
          stepTime: 0,
          songTime: 0,
          bpm: O.bpm,
          stepCrochet: O.stepCrochet
        };
        for (var c = 0, d = O.bpmChangeMap.length; c < d;) {
          var e = c++;
          if (a >= O.bpmChangeMap[e].songTime) {
            b = O.bpmChangeMap[e];
          }
        }
        return b;
      };
      O.getBPMFromStep = function (a) {
        var b = {
          stepTime: 0,
          songTime: 0,
          bpm: O.bpm,
          stepCrochet: O.stepCrochet
        };
        for (var c = 0, d = O.bpmChangeMap.length; c < d;) {
          var e = c++;
          if (O.bpmChangeMap[e].stepTime <= a) {
            b = O.bpmChangeMap[e];
          }
        }
        return b;
      };
      O.beatToSeconds = function (a) {
        a *= 4;
        var b = O.getBPMFromStep(a);
        return b.songTime + (a - b.stepTime) / (b.bpm / 60) / 4 * 1000;
      };
      O.mapBPMChanges = function (a) {
        O.bpmChangeMap = [];
        for (var b = a.bpm, c = 0, d = 0, e = 0, f = a.notes.length; e < f;) {
          var k = e++;
          if (a.notes[k].changeBPM && a.notes[k].bpm != b) {
            b = a.notes[k].bpm;
            O.bpmChangeMap.push({
              stepTime: c,
              songTime: d,
              bpm: b,
              stepCrochet: 60 / b * 1000 / 4
            });
          }
          k = Math.round(O.getSectionBeats(a, k) * 4);
          c += k;
          d += 60 / b * 1000 / 4 * k;
        }
        zb.trace("new BPM map BUDDY " + v.string(O.bpmChangeMap), {
          fileName: "source/backend/Conductor.hx",
          lineNumber: 124,
          className: "backend.Conductor",
          methodName: "mapBPMChanges"
        });
      };
      O.getSectionBeats = function (a, b) {
        var c = null;
        if (a.notes[b] != null) {
          c = a.notes[b].sectionBeats;
        }
        return c ?? 4;
      };
      O.set_bpm = function (a) {
        O.bpm = a;
        O.crochet = 60 / O.bpm * 1000;
        O.stepCrochet = O.crochet / 4;
        return O.bpm = a;
      };
      function Aa() {
        this.controllerMode = false;
        this.keyboardBinds = y.keyBinds;
        this.gamepadBinds = y.gamepadBinds;
      }
      g["backend.Controls"] = Aa;
      Aa.__name__ = "backend.Controls";
      Aa.prototype = {
        get_UI_UP_P: function () {
          return this.justPressed("ui_up");
        },
        get_UI_DOWN_P: function () {
          return this.justPressed("ui_down");
        },
        get_UI_LEFT_P: function () {
          return this.justPressed("ui_left");
        },
        get_UI_RIGHT_P: function () {
          return this.justPressed("ui_right");
        },
        get_UI_UP: function () {
          return this.pressed("ui_up");
        },
        get_UI_DOWN: function () {
          return this.pressed("ui_down");
        },
        get_UI_LEFT: function () {
          return this.pressed("ui_left");
        },
        get_UI_RIGHT: function () {
          return this.pressed("ui_right");
        },
        get_UI_LEFT_R: function () {
          return this.justReleased("ui_left");
        },
        get_UI_RIGHT_R: function () {
          return this.justReleased("ui_right");
        },
        get_ACCEPT: function () {
          return this.justPressed("accept");
        },
        get_BACK: function () {
          return this.justPressed("back");
        },
        get_PAUSE: function () {
          return this.justPressed("pause");
        },
        get_RESET: function () {
          return this.justPressed("reset");
        },
        justPressed: function (a) {
          var b = h.keys.checkKeyArrayState(this.keyboardBinds.h[a], 2) == 1;
          if (b) {
            this.controllerMode = false;
          }
          if (b) {
            return true;
          } else {
            return this._myGamepadJustPressed(this.gamepadBinds.h[a]) == 1;
          }
        },
        pressed: function (a) {
          var b = h.keys.checkKeyArrayState(this.keyboardBinds.h[a], 1) == 1;
          if (b) {
            this.controllerMode = false;
          }
          if (b) {
            return true;
          } else {
            return this._myGamepadPressed(this.gamepadBinds.h[a]) == 1;
          }
        },
        justReleased: function (a) {
          var b = h.keys.checkKeyArrayState(this.keyboardBinds.h[a], -1) == 1;
          if (b) {
            this.controllerMode = false;
          }
          if (b) {
            return true;
          } else {
            return this._myGamepadJustReleased(this.gamepadBinds.h[a]) == 1;
          }
        },
        _myGamepadJustPressed: function (a) {
          if (a != null) {
            for (var b = 0; b < a.length;) {
              var c = a[b];
              ++b;
              if (h.gamepads.anyHasState(c, 2) == 1) {
                return this.controllerMode = true;
              }
            }
          }
          return false;
        },
        _myGamepadPressed: function (a) {
          if (a != null) {
            for (var b = 0; b < a.length;) {
              var c = a[b];
              ++b;
              if (h.gamepads.anyHasState(c, 1) == 1) {
                return this.controllerMode = true;
              }
            }
          }
          return false;
        },
        _myGamepadJustReleased: function (a) {
          if (a != null) {
            for (var b = 0; b < a.length;) {
              var c = a[b];
              ++b;
              if (h.gamepads.anyHasState(c, -1) == 1) {
                return this.controllerMode = true;
              }
            }
          }
          return false;
        },
        __class__: Aa,
        __properties__: {
          get_RESET: "get_RESET",
          get_PAUSE: "get_PAUSE",
          get_BACK: "get_BACK",
          get_ACCEPT: "get_ACCEPT",
          get_UI_RIGHT_R: "get_UI_RIGHT_R",
          get_UI_LEFT_R: "get_UI_LEFT_R",
          get_UI_RIGHT: "get_UI_RIGHT",
          get_UI_LEFT: "get_UI_LEFT",
          get_UI_DOWN: "get_UI_DOWN",
          get_UI_UP: "get_UI_UP",
          get_UI_RIGHT_P: "get_UI_RIGHT_P",
          get_UI_LEFT_P: "get_UI_LEFT_P",
          get_UI_DOWN_P: "get_UI_DOWN_P",
          get_UI_UP_P: "get_UI_UP_P"
        }
      };
      function Ni() {}
      g["backend.CoolUtil"] = Ni;
      Ni.__name__ = "backend.CoolUtil";
      Ni.floorDecimal = function (a, b) {
        if (b < 1) {
          return Math.floor(a);
        }
        var c = 1;
        for (var d = 0; d < b;) {
          d++;
          c *= 10;
        }
        return Math.floor(a * c) / c;
      };
      function Qa(a) {
        if (a == null) {
          a = 0;
        }
        this.length = this._marker = 0;
        Ea.call(this);
        this.members = [];
        this.set_maxSize(Math.abs(a) | 0);
        this.flixelType = 2;
      }
      g["flixel.group.FlxTypedGroup"] = Qa;
      Qa.__name__ = "flixel.group.FlxTypedGroup";
      Qa.resolveGroup = function (a) {
        if (a != null) {
          if (a.flixelType == 2) {
            return a;
          }
          if (a.flixelType == 4) {
            return a.group;
          }
        }
        return null;
      };
      Qa.__super__ = Ea;
      Qa.prototype = q(Ea.prototype, {
        destroy: function () {
          Ea.prototype.destroy.call(this);
          ca.destroy(this._memberAdded);
          ca.destroy(this._memberRemoved);
          if (this.members != null) {
            for (var a = this.length; a-- > 0;) {
              var b = this.members.shift();
              if (b != null) {
                b.destroy();
              }
            }
            this.members = null;
          }
        },
        update: function (a) {
          for (var b = 0, c = this.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.exists && d.active) {
              d.update(a);
            }
          }
        },
        draw: function () {
          var a = Tb._defaultCameras;
          if (this._cameras != null) {
            Tb._defaultCameras = this._cameras;
          }
          for (var b = 0, c = this.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.exists && d.visible) {
              d.draw();
            }
          }
          Tb._defaultCameras = a;
        },
        add: function (a) {
          if (a == null) {
            h.log.advanced("Cannot add a `null` object to a FlxGroup.", xa.WARNING, true);
            return null;
          }
          if (this.members.indexOf(a) >= 0) {
            return a;
          }
          var b = this.getFirstNull();
          if (b != -1) {
            this.members[b] = a;
            if (b >= this.length) {
              this.length = b + 1;
            }
            this.onMemberAdd(a);
            return a;
          }
          if (this.maxSize > 0 && this.length >= this.maxSize) {
            return a;
          }
          this.members.push(a);
          this.length++;
          this.onMemberAdd(a);
          return a;
        },
        insert: function (a, b) {
          if (b == null) {
            h.log.advanced("Cannot insert a `null` object into a FlxGroup.", xa.WARNING, true);
            return null;
          }
          if (this.members.indexOf(b) >= 0) {
            return b;
          }
          if (a < this.length && this.members[a] == null) {
            this.members[a] = b;
            this.onMemberAdd(b);
            return b;
          }
          if (this.maxSize > 0 && this.length >= this.maxSize) {
            return b;
          }
          this.members.splice(a, 0, b);
          this.length++;
          this.onMemberAdd(b);
          return b;
        },
        recycle: function (a, b, c, d) {
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = false;
          }
          if (this.maxSize > 0) {
            if (this.length < this.maxSize) {
              if (b != null) {
                return this.add(b());
              } else if (a != null) {
                return this.add(yb.createInstance(a, []));
              } else {
                return null;
              }
            }
            c = this.members[this._marker++];
            if (this._marker >= this.maxSize) {
              this._marker = 0;
            }
            if (d) {
              c.revive();
            }
            return c;
          }
          c = this.getFirstAvailable(a, c);
          if (c != null) {
            if (d) {
              c.revive();
            }
            return c;
          } else if (b != null) {
            return this.add(b());
          } else if (a != null) {
            return this.add(yb.createInstance(a, []));
          } else {
            return null;
          }
        },
        remove: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (this.members == null) {
            return null;
          }
          var c = this.members.indexOf(a);
          if (c < 0) {
            return null;
          }
          if (b) {
            this.members.splice(c, 1);
            this.length--;
          } else {
            this.members[c] = null;
          }
          this.onMemberRemove(a);
          return a;
        },
        any: function (a) {
          for (var b = 0, c = this.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && a(d)) {
              return true;
            }
          }
          return false;
        },
        getFirstAvailable: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (var c = 0, d = this.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && !e.exists && (a == null || !!va.__instanceof(e, a)) && (!b || va.getClass(e).__name__ == a.__name__)) {
              return e;
            }
          }
          return null;
        },
        getFirstNull: function () {
          return this.members.indexOf(null);
        },
        clear: function () {
          this.length = 0;
          if (this._memberRemoved != null) {
            for (var a = 0, b = this.members; a < b.length;) {
              var c = b[a];
              ++a;
              this.onMemberRemove(c);
            }
          }
          ve.clearArray(this.members);
        },
        killMembers: function () {
          for (var a = 0, b = this.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.exists) {
              c.kill();
            }
          }
        },
        kill: function () {
          this.killMembers();
          Ea.prototype.kill.call(this);
        },
        reviveMembers: function () {
          for (var a = 0, b = this.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && !c.exists) {
              c.revive();
            }
          }
        },
        revive: function () {
          this.reviveMembers();
          Ea.prototype.revive.call(this);
        },
        forEach: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (var c = 0, d = this.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              if (b) {
                var f = Qa.resolveGroup(e);
                if (f != null) {
                  f.forEach(a, b);
                }
              }
              a(e);
            }
          }
        },
        forEachAlive: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (var c = 0, d = this.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && e.exists && e.alive) {
              if (b) {
                var f = Qa.resolveGroup(e);
                if (f != null) {
                  f.forEachAlive(a, b);
                }
              }
              a(e);
            }
          }
        },
        forEachExists: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (var c = 0, d = this.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && e.exists) {
              if (b) {
                var f = Qa.resolveGroup(e);
                if (f != null) {
                  f.forEachExists(a, b);
                }
              }
              a(e);
            }
          }
        },
        set_maxSize: function (a) {
          this.maxSize = Math.abs(a) | 0;
          if (this._marker >= this.maxSize) {
            this._marker = 0;
          }
          if (this.maxSize == 0 || this.members == null || this.maxSize >= this.length) {
            return this.maxSize;
          }
          while (this.length > this.maxSize) {
            a = this.members.splice(this.maxSize - 1, 1)[0];
            if (a != null) {
              this.onMemberRemove(a);
              a.destroy();
            }
            this.length--;
          }
          return this.maxSize;
        },
        onMemberAdd: function (a) {
          if (this._memberAdded != null) {
            this._memberAdded.dispatch(a);
          }
        },
        onMemberRemove: function (a) {
          if (this._memberRemoved != null) {
            this._memberRemoved.dispatch(a);
          }
        },
        __class__: Qa,
        __properties__: q(Ea.prototype.__properties__, {
          set_maxSize: "set_maxSize"
        })
      });
      function We(a) {
        if (a == null) {
          a = 0;
        }
        Qa.call(this, a);
      }
      g["flixel.group.FlxTypedContainer"] = We;
      We.__name__ = "flixel.group.FlxTypedContainer";
      We.__super__ = Qa;
      We.prototype = q(Qa.prototype, {
        onMemberAdd: function (a) {
          if (a.get_container() != null) {
            a.get_container().remove(a);
          }
          a.container = this;
          Qa.prototype.onMemberAdd.call(this, a);
        },
        onMemberRemove: function (a) {
          a.container = null;
          Qa.prototype.onMemberRemove.call(this, a);
        },
        __class__: We
      });
      function lc() {
        this._requestSubStateReset = false;
        this.persistentDraw = this.destroySubStates = true;
        this.persistentUpdate = false;
        We.call(this, 0);
      }
      g["flixel.FlxState"] = lc;
      lc.__name__ = "flixel.FlxState";
      lc.__super__ = We;
      lc.prototype = q(We.prototype, {
        create: function () {},
        draw: function () {
          if (this.persistentDraw || this.subState == null) {
            We.prototype.draw.call(this);
          }
          if (this.subState != null) {
            this.subState.draw();
          }
        },
        openSubState: function (a) {
          this._requestSubStateReset = true;
          this._requestedSubState = a;
        },
        closeSubState: function () {
          this._requestSubStateReset = true;
        },
        resetSubState: function () {
          if (this.subState != null) {
            if (this.subState.closeCallback != null) {
              this.subState.closeCallback();
            }
            if (this._subStateClosed != null) {
              this._subStateClosed.dispatch(this.subState);
            }
            if (this.destroySubStates) {
              this.subState.destroy();
            }
          }
          this.subState = this._requestedSubState;
          this._requestedSubState = null;
          if (this.subState != null) {
            if (!this.persistentUpdate) {
              h.inputs.onStateSwitch();
            }
            this.subState._parentState = this;
            if (!this.subState._created) {
              this.subState._created = true;
              this.subState.create();
            }
            if (this.subState.openCallback != null) {
              this.subState.openCallback();
            }
            if (this._subStateOpened != null) {
              this._subStateOpened.dispatch(this.subState);
            }
          }
        },
        destroy: function () {
          this._constructor = Cg.fromMaker(function () {
            throw G.thrown("Attempting to resetState while the current state is destroyed");
          });
          ca.destroy(this._subStateOpened);
          ca.destroy(this._subStateClosed);
          if (this.subState != null) {
            this.subState.destroy();
            this.subState = null;
          }
          We.prototype.destroy.call(this);
        },
        switchTo: function (a) {
          return true;
        },
        startOutro: function (a) {
          a();
        },
        onFocusLost: function () {},
        onFocus: function () {},
        onResize: function (a, b) {},
        tryUpdate: function (a) {
          if (this.persistentUpdate || this.subState == null) {
            this.update(a);
          }
          if (this._requestSubStateReset) {
            this._requestSubStateReset = false;
            this.resetSubState();
          }
          if (this.subState != null) {
            this.subState.tryUpdate(a);
          }
        },
        get_bgColor: function () {
          return h.cameras.get_bgColor();
        },
        set_bgColor: function (a) {
          return h.cameras.set_bgColor(a);
        },
        get_subStateOpened: function () {
          if (this._subStateOpened == null) {
            this._subStateOpened = new sf();
          }
          return this._subStateOpened;
        },
        get_subStateClosed: function () {
          if (this._subStateClosed == null) {
            this._subStateClosed = new sf();
          }
          return this._subStateClosed;
        },
        __class__: lc,
        __properties__: q(We.prototype.__properties__, {
          get_subStateClosed: "get_subStateClosed",
          get_subStateOpened: "get_subStateOpened",
          set_bgColor: "set_bgColor",
          get_bgColor: "get_bgColor"
        })
      });
      function rd(a) {
        if (a == null) {
          a = 0;
        }
        this._created = false;
        lc.call(this);
        this.openCallback = this.closeCallback = null;
        if (h.renderTile) {
          this._bgSprite = new tk();
        }
        this.set_bgColor(a);
      }
      g["flixel.FlxSubState"] = rd;
      rd.__name__ = "flixel.FlxSubState";
      rd.__super__ = lc;
      rd.prototype = q(lc.prototype, {
        draw: function () {
          if (h.renderBlit) {
            for (var a = 0, b = this.getCamerasLegacy(); a < b.length;) {
              var c = b[a];
              ++a;
              c.fill(this._bgColor);
            }
          } else {
            this._bgSprite.draw();
          }
          lc.prototype.draw.call(this);
        },
        destroy: function () {
          lc.prototype.destroy.call(this);
          this._parentState = this.openCallback = this.closeCallback = null;
          this._bgSprite = ca.destroy(this._bgSprite);
        },
        close: function () {
          if (this._parentState != null && this._parentState.subState == this) {
            this._parentState.closeSubState();
          }
        },
        get_bgColor: function () {
          return this._bgColor;
        },
        set_bgColor: function (a) {
          if (h.renderTile && this._bgSprite != null) {
            this._bgSprite.get_pixels().setPixel32(0, 0, a);
          }
          return this._bgColor = a;
        },
        __class__: rd
      });
      function db() {
        this.curSection = this.stepsToDo = this.lastBeat = this.lastStep = this.curStep = this.curBeat = this.curDecStep = this.curDecBeat = 0;
        rd.call(this);
      }
      g["backend.MusicBeatSubstate"] = db;
      db.__name__ = "backend.MusicBeatSubstate";
      db.__super__ = rd;
      db.prototype = q(rd.prototype, {
        get_controls: function () {
          return Aa.instance;
        },
        update: function (a) {
          if (!this.persistentUpdate) {
            P.timePassedOnState += a;
          }
          var b = this.curStep;
          this.updateCurStep();
          this.updateBeat();
          if (b != this.curStep) {
            if (this.curStep > 0) {
              this.stepHit();
            }
            if (A.SONG != null) {
              if (b < this.curStep) {
                this.updateSection();
              } else {
                this.rollbackSection();
              }
            }
          }
          rd.prototype.update.call(this, a);
        },
        updateSection: function () {
          if (this.stepsToDo < 1) {
            this.stepsToDo = Math.round(this.getBeatsOnSection() * 4);
          }
          while (this.curStep >= this.stepsToDo) {
            this.curSection++;
            var a = this.getBeatsOnSection();
            this.stepsToDo += Math.round(a * 4);
            this.sectionHit();
          }
        },
        rollbackSection: function () {
          if (!(this.curStep < 0)) {
            var a = this.curSection;
            for (var b = this.stepsToDo = this.curSection = 0, c = A.SONG.notes.length; b < c;) {
              var d = b++;
              if (A.SONG.notes[d] != null) {
                this.stepsToDo += Math.round(this.getBeatsOnSection() * 4);
                if (this.stepsToDo > this.curStep) {
                  break;
                }
                this.curSection++;
              }
            }
            if (this.curSection > a) {
              this.sectionHit();
            }
          }
        },
        updateBeat: function () {
          this.curBeat = Math.floor(this.curStep / 4);
          this.curDecBeat = this.curDecStep / 4;
        },
        updateCurStep: function () {
          var a = O.getBPMFromSeconds(O.songPosition);
          var b = (O.songPosition - y.data.noteOffset - a.songTime) / a.stepCrochet;
          this.curDecStep = a.stepTime + b;
          this.curStep = a.stepTime + Math.floor(b);
        },
        stepHit: function () {
          if (this.curStep % 4 == 0) {
            this.beatHit();
          }
        },
        beatHit: function () {},
        sectionHit: function () {},
        getBeatsOnSection: function () {
          var a = 4;
          if (A.SONG != null && A.SONG.notes[this.curSection] != null) {
            a = A.SONG.notes[this.curSection].sectionBeats;
          }
          if (a == null) {
            return 4;
          } else {
            return a;
          }
        },
        __class__: db,
        __properties__: q(rd.prototype.__properties__, {
          get_controls: "get_controls"
        })
      });
      function dg(a, b) {
        this.isTransIn = false;
        this.duration = a;
        this.isTransIn = b;
        db.call(this);
      }
      g["backend.CustomFadeTransition"] = dg;
      dg.__name__ = "backend.CustomFadeTransition";
      dg.__super__ = db;
      dg.prototype = q(db.prototype, {
        create: function () {
          this.set_cameras([h.cameras.list[h.cameras.list.length - 1]]);
          var a = h.width / Math.max(this.get_camera().zoom, 0.001) | 0;
          var b = h.height / Math.max(this.get_camera().zoom, 0.001) | 0;
          this.transGradient = sd.createGradientFlxSprite(1, b, this.isTransIn ? [0, -16777216] : [-16777216, 0]);
          this.transGradient.scale.set_x(a);
          this.transGradient.updateHitbox();
          var c = this.transGradient.scrollFactor;
          c.set_x(0);
          c.set_y(0);
          c = this.transGradient;
          var d = 1;
          if (d == null) {
            d = 17;
          }
          if (d == 1 || d == 17) {
            c.set_x((h.width - c.get_width()) / 2);
          }
          if (d == 16 || d == 17) {
            c.set_y((h.height - c.get_height()) / 2);
          }
          this.add(this.transGradient);
          this.transBlack = new F().makeGraphic(1, 1, -16777216);
          c = this.transBlack.scale;
          b += 400;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
          this.transBlack.updateHitbox();
          c = this.transBlack.scrollFactor;
          c.set_x(0);
          c.set_y(0);
          c = this.transBlack;
          d = 1;
          if (d == null) {
            d = 17;
          }
          if (d == 1 || d == 17) {
            c.set_x((h.width - c.get_width()) / 2);
          }
          if (d == 16 || d == 17) {
            c.set_y((h.height - c.get_height()) / 2);
          }
          this.add(this.transBlack);
          if (this.isTransIn) {
            this.transGradient.set_y(this.transBlack.y - this.transBlack.get_height());
          } else {
            this.transGradient.set_y(-this.transGradient.get_height());
          }
          db.prototype.create.call(this);
        },
        update: function (a) {
          db.prototype.update.call(this, a);
          var b = h.height * Math.max(this.get_camera().zoom, 0.001);
          var c = this.transGradient.get_height() + Math.max(this.get_camera().zoom, 0.001) * 50;
          if (this.duration > 0) {
            var d = this.transGradient;
            d.set_y(d.y + (b + c) * a / this.duration);
          } else {
            this.transGradient.set_y(c * a);
          }
          if (this.isTransIn) {
            this.transBlack.set_y(this.transGradient.y + this.transGradient.get_height());
          } else {
            this.transBlack.set_y(this.transGradient.y - this.transBlack.get_height());
          }
          if (this.transGradient.y >= c) {
            this.close();
            if (dg.finishCallback != null) {
              dg.finishCallback();
            }
            dg.finishCallback = null;
          }
        },
        __class__: dg
      });
      function nb() {}
      g["backend.Difficulty"] = nb;
      nb.__name__ = "backend.Difficulty";
      function $a() {}
      g["backend.Highscore"] = $a;
      $a.__name__ = "backend.Highscore";
      $a.resetSong = function (a, b) {
        if (b == null) {
          b = 0;
        }
        a = $a.formatSong(a, b);
        $a.setScore(a, 0);
        $a.setRating(a, 0);
      };
      $a.resetWeek = function (a, b) {
        if (b == null) {
          b = 0;
        }
        a = $a.formatSong(a, b);
        $a.setWeekScore(a, 0);
      };
      $a.saveScore = function (a, b, c, d) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = $a.formatSong(a, c);
        if (Object.prototype.hasOwnProperty.call($a.songScores.h, a)) {
          if ($a.songScores.h[a] < b) {
            $a.setScore(a, b);
            if (d >= 0) {
              $a.setRating(a, d);
            }
          }
        } else {
          $a.setScore(a, b);
          if (d >= 0) {
            $a.setRating(a, d);
          }
        }
      };
      $a.saveWeekScore = function (a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = $a.formatSong(a, c);
        if (Object.prototype.hasOwnProperty.call($a.weekScores.h, a)) {
          if ($a.weekScores.h[a] < b) {
            $a.setWeekScore(a, b);
          }
        } else {
          $a.setWeekScore(a, b);
        }
      };
      $a.setScore = function (a, b) {
        $a.songScores.h[a] = b;
        h.save.data.songScores = $a.songScores;
        h.save.flush();
      };
      $a.setWeekScore = function (a, b) {
        $a.weekScores.h[a] = b;
        h.save.data.weekScores = $a.weekScores;
        h.save.flush();
      };
      $a.setRating = function (a, b) {
        $a.songRating.h[a] = b;
        h.save.data.songRating = $a.songRating;
        h.save.flush();
      };
      $a.formatSong = function (a, b) {
        var c = new V("[~&\\\\;:<>#]", "");
        var d = new V("[.,'\"%?!]", "");
        c = c.split(w.replace(a, " ", "-")).join("-");
        a = d.split(c).join("").toLowerCase();
        d = b;
        if (d == null) {
          d = A.storyDifficulty;
        }
        b = nb.list[d];
        b = b != nb.defaultDifficulty ? "-" + b : "";
        c = new V("[~&\\\\;:<>#]", "");
        d = new V("[.,'\"%?!]", "");
        c = c.split(w.replace(b, " ", "-")).join("-");
        return a + d.split(c).join("").toLowerCase();
      };
      $a.getScore = function (a, b) {
        a = $a.formatSong(a, b);
        if (!Object.prototype.hasOwnProperty.call($a.songScores.h, a)) {
          $a.setScore(a, 0);
        }
        return $a.songScores.h[a];
      };
      $a.getRating = function (a, b) {
        a = $a.formatSong(a, b);
        if (!Object.prototype.hasOwnProperty.call($a.songRating.h, a)) {
          $a.setRating(a, 0);
        }
        return $a.songRating.h[a];
      };
      $a.getWeekScore = function (a, b) {
        a = $a.formatSong(a, b);
        if (!Object.prototype.hasOwnProperty.call($a.weekScores.h, a)) {
          $a.setWeekScore(a, 0);
        }
        return $a.weekScores.h[a];
      };
      $a.load = function () {
        if (h.save.data.weekScores != null) {
          $a.weekScores = h.save.data.weekScores;
        }
        if (h.save.data.songScores != null) {
          $a.songScores = h.save.data.songScores;
        }
        if (h.save.data.songRating != null) {
          $a.songRating = h.save.data.songRating;
        }
      };
      function Sd() {}
      g["backend.InputFormatter"] = Sd;
      Sd.__name__ = "backend.InputFormatter";
      Sd.getKeyName = function (a) {
        switch (a) {
          case -1:
            return "---";
          case 8:
            return "BckSpc";
          case 17:
            return "Ctrl";
          case 18:
            return "Alt";
          case 20:
            return "Caps";
          case 33:
            return "PgUp";
          case 34:
            return "PgDown";
          case 48:
            return "0";
          case 49:
            return "1";
          case 50:
            return "2";
          case 51:
            return "3";
          case 52:
            return "4";
          case 53:
            return "5";
          case 54:
            return "6";
          case 55:
            return "7";
          case 56:
            return "8";
          case 57:
            return "9";
          case 96:
            return "#0";
          case 97:
            return "#1";
          case 98:
            return "#2";
          case 99:
            return "#3";
          case 100:
            return "#4";
          case 101:
            return "#5";
          case 102:
            return "#6";
          case 103:
            return "#7";
          case 104:
            return "#8";
          case 105:
            return "#9";
          case 106:
            return "#*";
          case 107:
            return "#+";
          case 109:
            return "#-";
          case 110:
            return "#.";
          case 186:
            return ";";
          case 188:
            return ",";
          case 190:
            return ".";
          case 192:
            return "`";
          case 219:
            return "[";
          case 221:
            return "]";
          case 222:
            return "'";
          case 301:
            return "PrtScrn";
          default:
            a = Dg.toStringMap.get(a);
            if (a.toLowerCase() == "null") {
              return "---";
            }
            a = a.split("_");
            for (var b = 0, c = a.length; b < c;) {
              var d = b++;
              var e = a[d];
              a[d] = e.charAt(0).toUpperCase() + r.substr(e, 1, null).toLowerCase();
            }
            return a.join(" ");
        }
      };
      Sd.getGamepadName = function (a) {
        var b = h.gamepads.firstActive;
        b = b != null ? b.detectedModel : rc.UNKNOWN;
        switch (a) {
          case -1:
            return "---";
          case 0:
            switch (b._hx_index) {
              case 2:
                return "X";
              case 4:
                return "A";
              default:
                return "Action Down";
            }
          case 1:
            switch (b._hx_index) {
              case 2:
                return "O";
              case 4:
                return "B";
              default:
                return "Action Right";
            }
          case 2:
            switch (b._hx_index) {
              case 2:
                return "[";
              case 4:
                return "X";
              default:
                return "Action Left";
            }
          case 3:
            switch (b._hx_index) {
              case 2:
                return "]";
              case 4:
                return "Y";
              default:
                return "Action Up";
            }
          case 4:
            switch (b._hx_index) {
              case 2:
                return "L1";
              case 4:
                return "LB";
              default:
                return "L. Bumper";
            }
          case 5:
            switch (b._hx_index) {
              case 2:
                return "R1";
              case 4:
                return "RB";
              default:
                return "R. Bumper";
            }
          case 6:
            switch (b._hx_index) {
              case 2:
                return "Share";
              case 4:
                return "Back";
              default:
                return "Select";
            }
          case 7:
            if (b._hx_index == 2) {
              return "Options";
            } else {
              return "Start";
            }
          case 8:
            switch (b._hx_index) {
              case 2:
                return "L3";
              case 4:
                return "LS";
              default:
                return "Analog Click";
            }
          case 9:
            switch (b._hx_index) {
              case 2:
                return "R3";
              case 4:
                return "RS";
              default:
                return "C. Click";
            }
          case 11:
            return "D. Up";
          case 12:
            return "D. Down";
          case 13:
            return "D. Left";
          case 14:
            return "D. Right";
          case 15:
          case 17:
            switch (b._hx_index) {
              case 2:
                return "L2";
              case 4:
                return "LT";
              default:
                return "L. Trigger";
            }
          case 16:
          case 18:
            switch (b._hx_index) {
              case 2:
                return "R2";
              case 4:
                return "RT";
              default:
                return "R. Trigger";
            }
          case 34:
            return "Up";
          case 35:
            return "Right";
          case 36:
            return "Down";
          case 37:
            return "Left";
          case 38:
            return "C. Up";
          case 39:
            return "C. Right";
          case 40:
            return "C. Down";
          case 41:
            return "C. Left";
          default:
            a = eg.toStringMap.get(a);
            if (a.toLowerCase() == "null") {
              return "---";
            }
            a = a.split("_");
            b = 0;
            for (var c = a.length; b < c;) {
              var d = b++;
              var e = a[d];
              a[d] = e.charAt(0).toUpperCase() + r.substr(e, 1, null).toLowerCase();
            }
            return a.join(" ");
        }
      };
      function Kd() {}
      g["backend.Mods"] = Kd;
      Kd.__name__ = "backend.Mods";
      Kd.loadTopMod = function () {
        Kd.currentModDirectory = "";
      };
      function Rb(a, b) {
        this.transOutFinished = this._exiting = false;
        this.transIn = a;
        this.transOut = b;
        if (this.transIn == null && Rb.defaultTransIn != null) {
          this.transIn = Rb.defaultTransIn;
        }
        if (this.transOut == null && Rb.defaultTransOut != null) {
          this.transOut = Rb.defaultTransOut;
        }
        lc.call(this);
      }
      g["flixel.addons.transition.FlxTransitionableState"] = Rb;
      Rb.__name__ = "flixel.addons.transition.FlxTransitionableState";
      Rb.__super__ = lc;
      Rb.prototype = q(lc.prototype, {
        destroy: function () {
          lc.prototype.destroy.call(this);
          this._onExit = this.transOut = this.transIn = null;
        },
        create: function () {
          lc.prototype.create.call(this);
          this.transitionIn();
        },
        startOutro: function (a) {
          if (this.get_hasTransOut()) {
            if (!this._exiting) {
              this._exiting = true;
              this.transitionOut(a);
              if (Rb.skipNextTransOut) {
                Rb.skipNextTransOut = false;
                this.finishTransOut();
              }
            }
          } else {
            a();
          }
        },
        transitionIn: function () {
          if (this.transIn != null && this.transIn.type != "none") {
            if (Rb.skipNextTransIn) {
              Rb.skipNextTransIn = false;
              if (this.finishTransIn != null) {
                this.finishTransIn();
              }
            } else {
              var a = this.createTransition(this.transIn);
              a.setStatus(3);
              this.openSubState(a);
              a.set_finishCallback(m(this, this.finishTransIn));
              a.start(1);
            }
          }
        },
        transitionOut: function (a) {
          this._onExit = a;
          if (this.get_hasTransOut()) {
            a = this.createTransition(this.transOut);
            a.setStatus(2);
            this.openSubState(a);
            a.set_finishCallback(m(this, this.finishTransOut));
            a.start(0);
          } else {
            this._onExit();
          }
        },
        get_hasTransIn: function () {
          if (this.transIn != null) {
            return this.transIn.type != "none";
          } else {
            return false;
          }
        },
        get_hasTransOut: function () {
          if (this.transOut != null) {
            return this.transOut.type != "none";
          } else {
            return false;
          }
        },
        createTransition: function (a) {
          switch (a.type) {
            case "fade":
              return new Oi(a);
            case "tiles":
              return new Oi(a);
            default:
              return null;
          }
        },
        finishTransIn: function () {
          this.closeSubState();
        },
        finishTransOut: function () {
          this.transOutFinished = true;
          if (!this._exiting) {
            this.closeSubState();
          }
          if (this._onExit != null) {
            this._onExit();
          }
        },
        __class__: Rb,
        __properties__: q(lc.prototype.__properties__, {
          get_hasTransOut: "get_hasTransOut",
          get_hasTransIn: "get_hasTransIn"
        })
      });
      function ih() {}
      g["flixel.addons.ui.interfaces.IEventGetter"] = ih;
      ih.__name__ = "flixel.addons.ui.interfaces.IEventGetter";
      ih.__isInterface__ = true;
      ih.prototype = {
        __class__: ih
      };
      function Eg() {}
      g["flixel.addons.ui.interfaces.IFlxUIState"] = Eg;
      Eg.__name__ = "flixel.addons.ui.interfaces.IFlxUIState";
      Eg.__isInterface__ = true;
      Eg.__interfaces__ = [ih];
      Eg.prototype = {
        __class__: Eg
      };
      function Td(a, b) {
        this.getTextFallback = null;
        this._reload_countdown = 0;
        this.reload_ui_on_resize = this._reload = false;
        this._xml_id = "";
        this.hideCursorOnSubstate = this._cursorHidden = false;
        this.cursor = null;
        Rb.call(this, a, b);
      }
      g["flixel.addons.ui.FlxUIState"] = Td;
      Td.__name__ = "flixel.addons.ui.FlxUIState";
      Td.__interfaces__ = [Eg, ih];
      Td.__super__ = Rb;
      Td.prototype = q(Rb.prototype, {
        create: function () {
          if (Td.static_tongue != null) {
            this._tongue = Td.static_tongue;
          }
          if (this._makeCursor == 1) {
            this.cursor = this.createCursor();
          }
          this.tooltips = new Pi(this);
          this._ui = this.createUI(null, this, null, this._tongue);
          this.add(this._ui);
          if (this.getTextFallback != null) {
            this._ui.getTextFallback = this.getTextFallback;
          }
          if (this._xml_id != null && this._xml_id != "") {
            var a = null;
            try {
              a = C.xml(this._xml_id);
            } catch (c) {
              Pa.lastError = c;
              var b = G.caught(c).unwrap();
              if (typeof b != "string") {
                throw c;
              }
            }
            if (a == null) {
              try {
                a = C.xml(this._xml_id, "xml", true, "");
              } catch (c) {
                Pa.lastError = c;
                b = G.caught(c).unwrap();
                if (typeof b != "string") {
                  throw c;
                }
              }
            }
            if (a == null) {
              h.log.advanced("FlxUISubState: Could not load _xml_id \"" + this._xml_id + "\"", xa.ERROR, true);
            } else {
              this.loadUIFromData(a);
            }
          } else {
            this.loadUIFromData(null);
          }
          if (this.cursor != null && this._ui != null) {
            this.add(this.cursor);
            this.cursor.addWidgetsFromUI(this._ui);
            this.cursor.findVisibleLocation(0);
          }
          this.tooltips.init();
          Rb.prototype.create.call(this);
          this.cleanup();
        },
        update: function (a) {
          Rb.prototype.update.call(this, a);
          if (this.tooltips != null) {
            this.tooltips.update(a);
          }
          if (this._reload && this._reload_countdown > 0) {
            this._reload_countdown--;
            if (this._reload_countdown == 0) {
              this.reloadUI();
            }
          }
        },
        cleanup: function () {
          this._ui.cleanup();
        },
        _cleanupUIVars: function () {
          if (this._ui_vars != null) {
            var a = Object.keys(this._ui_vars.h);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              var e = this._ui_vars;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._ui_vars = null;
          }
        },
        setUIVariable: function (a, b) {
          if (this._ui != null) {
            this._ui.setVariable(a, b);
          } else {
            if (this._ui_vars == null) {
              this._ui_vars = new ua();
            }
            this._ui_vars.h[a] = b;
          }
        },
        resizeScreen: function (a, b) {},
        openSubState: function (a) {
          if (this.cursor != null && this.hideCursorOnSubstate && this.cursor.visible == 1) {
            this._cursorHidden = true;
            this.cursor.set_visible(false);
          }
          Rb.prototype.openSubState.call(this, a);
        },
        closeSubState: function () {
          if (this.cursor != null && this.hideCursorOnSubstate && this._cursorHidden) {
            this._cursorHidden = false;
            this.cursor.set_visible(true);
          }
          Rb.prototype.closeSubState.call(this);
        },
        onResize: function (a, b) {
          if (this.reload_ui_on_resize) {
            h.scaleMode.onMeasure(a, b);
            this._reload_countdown = 1;
            this._reload = true;
          }
        },
        onShowTooltip: function (a) {},
        destroy: function () {
          this.destroyed = true;
          if (this._ui != null) {
            this._ui.destroy();
            this.remove(this._ui, true);
            this._ui = null;
          }
          if (this.tooltips != null) {
            this.tooltips.destroy();
            this.tooltips = null;
          }
          Rb.prototype.destroy.call(this);
        },
        forceFocus: function (a, b) {
          if (this._ui != null) {
            if (a) {
              this._ui.set_focus(b);
            } else {
              this._ui.set_focus(null);
            }
          }
        },
        onCursorEvent: function (a, b) {
          this.getEvent(a, b, null);
        },
        getEvent: function (a, b, c, d) {},
        getRequest: function (a, b, c, d) {
          return null;
        },
        getText: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = "ui";
          }
          if (this._tongue != null) {
            return this._tongue.get(a, b, c);
          } else if (this.getTextFallback != null) {
            return this.getTextFallback(a, b, c);
          } else {
            return a;
          }
        },
        createCursor: function () {
          return new Qi(m(this, this.onCursorEvent));
        },
        createUI: function (a, b, c, d, e) {
          if (e == null) {
            e = "";
          }
          a = new Ka(a, b, c, d, e, this._ui_vars);
          this._cleanupUIVars();
          return a;
        },
        loadUIFromData: function (a) {
          this._ui.load(a);
        },
        reloadUI: function (a) {
          if (this._ui != null) {
            this.remove(this._ui, true);
            this._ui.destroy();
            this._ui = null;
          }
          this._ui = this.createUI(null, this, null, this._tongue);
          this.add(this._ui);
          a = C.xml(this._xml_id);
          if (a != null) {
            this.loadUIFromData(a);
          }
          this._reload = false;
          this._reload_countdown = 0;
        },
        __class__: Td
      });
      function P(a, b) {
        this.stages = [];
        this._psychCameraInitialized = false;
        this.curSection = this.stepsToDo = this.curStep = this.curBeat = this.curDecStep = this.curDecBeat = 0;
        Td.call(this, a, b);
      }
      g["backend.MusicBeatState"] = P;
      P.__name__ = "backend.MusicBeatState";
      P.switchState = function (a) {
        if (a == null) {
          a = h.game._state;
        }
        if (a == h.game._state) {
          P.resetState();
        } else {
          if (Rb.skipNextTransIn) {
            var b = Cg.fromState(a);
            var c = h.game._state;
            if (!(b instanceof lc) || !!h.canSwitchTo(b)) {
              h.game._state.startOutro(function () {
                if (h.game._state == c) {
                  h.game._nextState = b;
                } else {
                  h.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", xa.WARNING, true);
                }
              });
            }
          } else {
            P.startTransition(a);
          }
          Rb.skipNextTransIn = false;
        }
      };
      P.resetState = function () {
        if (Rb.skipNextTransIn) {
          if (h.game._state == null || h.game._state._constructor == null) {
            h.log.advanced("FlxG.resetState was called while switching states", xa.ERROR, true);
          } else if (h.game._state._constructor instanceof lc) {
            var a = Cg.fromState(yb.createInstance(va.getClass(h.game._state), []));
            var b = h.game._state;
            if (!(a instanceof lc) || !!h.canSwitchTo(a)) {
              h.game._state.startOutro(function () {
                if (h.game._state == b) {
                  h.game._nextState = a;
                } else {
                  h.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", xa.WARNING, true);
                }
              });
            }
          } else {
            var c = h.game._state._constructor;
            var d = h.game._state;
            if (!(c instanceof lc) || !!h.canSwitchTo(c)) {
              h.game._state.startOutro(function () {
                if (h.game._state == d) {
                  h.game._nextState = c;
                } else {
                  h.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", xa.WARNING, true);
                }
              });
            }
          }
        } else {
          P.startTransition();
        }
        Rb.skipNextTransIn = false;
      };
      P.startTransition = function (a) {
        if (a == null) {
          a = h.game._state;
        }
        h.game._state.openSubState(new dg(0.6, false));
        dg.finishCallback = a == h.game._state ? function () {
          if (h.game._state == null || h.game._state._constructor == null) {
            h.log.advanced("FlxG.resetState was called while switching states", xa.ERROR, true);
          } else if (h.game._state._constructor instanceof lc) {
            var a = Cg.fromState(yb.createInstance(va.getClass(h.game._state), []));
            var c = h.game._state;
            if (!(a instanceof lc) || !!h.canSwitchTo(a)) {
              h.game._state.startOutro(function () {
                if (h.game._state == c) {
                  h.game._nextState = a;
                } else {
                  h.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", xa.WARNING, true);
                }
              });
            }
          } else {
            var d = h.game._state._constructor;
            var e = h.game._state;
            if (!(d instanceof lc) || !!h.canSwitchTo(d)) {
              h.game._state.startOutro(function () {
                if (h.game._state == e) {
                  h.game._nextState = d;
                } else {
                  h.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", xa.WARNING, true);
                }
              });
            }
          }
        } : function () {
          var b = Cg.fromState(a);
          var c = h.game._state;
          if (!(b instanceof lc) || !!h.canSwitchTo(b)) {
            h.game._state.startOutro(function () {
              if (h.game._state == c) {
                h.game._nextState = b;
              } else {
                h.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", xa.WARNING, true);
              }
            });
          }
        };
      };
      P.getState = function () {
        return va.__cast(h.game._state, P);
      };
      P.__super__ = Td;
      P.prototype = q(Td.prototype, {
        get_controls: function () {
          return Aa.instance;
        },
        create: function () {
          var a = Rb.skipNextTransOut;
          if (!this._psychCameraInitialized) {
            this.initPsychCamera();
          }
          Td.prototype.create.call(this);
          if (!a) {
            this.openSubState(new dg(0.6, true));
          }
          Rb.skipNextTransOut = false;
          P.timePassedOnState = 0;
        },
        initPsychCamera: function () {
          var a = new uk();
          h.cameras.reset(a);
          h.cameras.setDefaultDrawTarget(a, true);
          this._psychCameraInitialized = true;
          return a;
        },
        update: function (a) {
          var b = this.curStep;
          P.timePassedOnState += a;
          this.updateCurStep();
          this.updateBeat();
          if (b != this.curStep) {
            if (this.curStep > 0) {
              this.stepHit();
            }
            if (A.SONG != null) {
              if (b < this.curStep) {
                this.updateSection();
              } else {
                this.rollbackSection();
              }
            }
          }
          if (h.save.data != null) {
            h.save.data.fullscreen = h.get_fullscreen();
          }
          this.stagesFunc(function (b) {
            b.update(a);
          });
          Td.prototype.update.call(this, a);
        },
        updateSection: function () {
          if (this.stepsToDo < 1) {
            this.stepsToDo = Math.round(this.getBeatsOnSection() * 4);
          }
          while (this.curStep >= this.stepsToDo) {
            this.curSection++;
            var a = this.getBeatsOnSection();
            this.stepsToDo += Math.round(a * 4);
            this.sectionHit();
          }
        },
        rollbackSection: function () {
          if (!(this.curStep < 0)) {
            var a = this.curSection;
            for (var b = this.stepsToDo = this.curSection = 0, c = A.SONG.notes.length; b < c;) {
              var d = b++;
              if (A.SONG.notes[d] != null) {
                this.stepsToDo += Math.round(this.getBeatsOnSection() * 4);
                if (this.stepsToDo > this.curStep) {
                  break;
                }
                this.curSection++;
              }
            }
            if (this.curSection > a) {
              this.sectionHit();
            }
          }
        },
        updateBeat: function () {
          this.curBeat = Math.floor(this.curStep / 4);
          this.curDecBeat = this.curDecStep / 4;
        },
        updateCurStep: function () {
          var a = O.getBPMFromSeconds(O.songPosition);
          var b = (O.songPosition - y.data.noteOffset - a.songTime) / a.stepCrochet;
          this.curDecStep = a.stepTime + b;
          this.curStep = a.stepTime + Math.floor(b);
        },
        stepHit: function () {
          var a = this;
          this.stagesFunc(function (b) {
            b.curStep = a.curStep;
            b.curDecStep = a.curDecStep;
            b.stepHit();
          });
          if (this.curStep % 4 == 0) {
            this.beatHit();
          }
        },
        beatHit: function () {
          var a = this;
          this.stagesFunc(function (b) {
            b.curBeat = a.curBeat;
            b.curDecBeat = a.curDecBeat;
            b.beatHit();
          });
        },
        sectionHit: function () {
          var a = this;
          this.stagesFunc(function (b) {
            b.curSection = a.curSection;
            b.sectionHit();
          });
        },
        stagesFunc: function (a) {
          for (var b = 0, c = this.stages; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.exists && d.active) {
              a(d);
            }
          }
        },
        getBeatsOnSection: function () {
          var a = 4;
          if (A.SONG != null && A.SONG.notes[this.curSection] != null) {
            a = A.SONG.notes[this.curSection].sectionBeats;
          }
          if (a == null) {
            return 4;
          } else {
            return a;
          }
        },
        __class__: P,
        __properties__: q(Td.prototype.__properties__, {
          get_controls: "get_controls"
        })
      });
      function Ri() {}
      g["backend.NoteTypesConfig"] = Ri;
      Ri.__name__ = "backend.NoteTypesConfig";
      Ri.clearNoteTypesData = function () {
        Ri.noteTypesData.h = Object.create(null);
      };
      function D() {}
      g["backend.Paths"] = D;
      D.__name__ = "backend.Paths";
      D.clearUnusedMemory = function () {
        var a = Object.keys(D.currentTrackedAssets.h);
        for (var b = a.length, c = 0; c < b;) {
          var d = a[c++];
          if (D.localTrackedAssets.indexOf(d) == -1 && D.dumpExclusions.indexOf(d) == -1) {
            var e = D.currentTrackedAssets.h[d];
            if (e != null) {
              var f = h.bitmap._cache;
              if (Object.prototype.hasOwnProperty.call(f.h, d)) {
                delete f.h[d];
              }
              Q.cache.removeBitmapData(d);
              f = D.currentTrackedAssets;
              if (Object.prototype.hasOwnProperty.call(f.h, d)) {
                delete f.h[d];
              }
              e.persist = false;
              e.set_destroyOnNoUse(true);
              e.destroy();
            }
          }
        }
        Si.gc();
      };
      D.clearStoredMemory = function () {
        var a = h.bitmap._cache.h;
        var b = Object.keys(a);
        for (var c = b.length, d = 0; d < c;) {
          a = b[d++];
          var e = h.bitmap._cache.h[a];
          if (e != null && !Object.prototype.hasOwnProperty.call(D.currentTrackedAssets.h, a)) {
            Q.cache.removeBitmapData(a);
            var f = h.bitmap._cache;
            if (Object.prototype.hasOwnProperty.call(f.h, a)) {
              delete f.h[a];
            }
            e.destroy();
          }
        }
        b = a = D.currentTrackedSounds.h;
        c = Object.keys(a);
        d = c.length;
        for (e = 0; e < d;) {
          var k = a = c[e++];
          a = b[a];
          if (D.localTrackedAssets.indexOf(k) == -1 && D.dumpExclusions.indexOf(k) == -1 && a != null) {
            sa.cache.clear(k);
            f = D.currentTrackedSounds;
            if (Object.prototype.hasOwnProperty.call(f.h, k)) {
              delete f.h[k];
            }
          }
        }
        D.localTrackedAssets = [];
      };
      D.setCurrentLevel = function (a) {
        D.currentLevel = a.toLowerCase();
      };
      D.getPath = function (a, b, c, d) {
        if (b == null) {
          b = "TEXT";
        }
        if (c != null) {
          return D.getLibraryPath(a, c);
        }
        if (D.currentLevel != null && D.currentLevel != "shared" && (c = D.currentLevel, d = null, d == null && (d = c), c = "" + c + ":assets/" + d + "/" + a, Q.exists(c, b))) {
          return c;
        }
        if (a == null) {
          a = "";
        }
        return "assets/shared/" + a;
      };
      D.getLibraryPath = function (a, b) {
        if (b == null) {
          b = "shared";
        }
        if (b == "shared") {
          if (a == null) {
            a = "";
          }
          return "assets/shared/" + a;
        }
        var c = null;
        if (c == null) {
          c = b;
        }
        return "" + b + ":assets/" + c + "/" + a;
      };
      D.video = function (a) {
        return D.getPath("videos/" + a + ".mp4");
      };
      D.sound = function (a, b) {
        return D.returnSound("sounds", a, b);
      };
      D.image = function (a, b, c) {
        if (c == null) {
          c = true;
        }
        var d = null;
        a = D.getPath("images/" + a + ".png", "IMAGE", b);
        if (Object.prototype.hasOwnProperty.call(D.currentTrackedAssets.h, a)) {
          D.localTrackedAssets.push(a);
          return D.currentTrackedAssets.h[a];
        }
        if (Q.exists(a, "IMAGE")) {
          d = Q.getBitmapData(a);
        }
        if (d != null && (c = D.cacheBitmap(a, d, c), c != null)) {
          return c;
        }
        zb.trace("oh no its returning null NOOOO (" + a + ")", {
          fileName: "source/backend/Paths.hx",
          lineNumber: 245,
          className: "backend.Paths",
          methodName: "image"
        });
        return null;
      };
      D.cacheBitmap = function (a, b, c) {
        if (c == null) {
          c = true;
        }
        if (b == null && (Q.exists(a, "IMAGE") && (b = Q.getBitmapData(a)), b == null)) {
          return null;
        }
        D.localTrackedAssets.push(a);
        if (c && y.data.cacheOnGPU) {
          c = oa.get_current().stage.context3D.createRectangleTexture(b.width, b.height, 1, true);
          c.uploadFromBitmapData(b);
          b.image.set_data(null);
          b.dispose();
          b.disposeImage();
          b = T.fromTexture(c);
        }
        b = Zb.fromBitmapData(b, false, a);
        b.persist = true;
        b.set_destroyOnNoUse(false);
        return D.currentTrackedAssets.h[a] = b;
      };
      D.getTextFromFile = function (a, b) {
        a = D.getPath(a, "TEXT");
        if (Q.exists(a, "TEXT")) {
          return sa.getText(a);
        } else {
          return null;
        }
      };
      D.fileExists = function (a, b, c, d) {
        if (Q.exists(D.getPath(a, b, d, false))) {
          return true;
        } else {
          return false;
        }
      };
      D.getAtlas = function (a, b, c) {
        if (c == null) {
          c = true;
        }
        c = D.image(a, b, c);
        var d = D.getPath("images/" + a + ".xml", "TEXT", b, true);
        if (Q.exists(d)) {
          return ob.fromSparrow(c, d);
        }
        d = D.getPath("images/" + a + ".json", "TEXT", b, true);
        if (Q.exists(d)) {
          return ob.fromTexturePackerJson(c, d);
        }
        c = D.image(a, b, true);
        return ob.fromSpriteSheetPacker(c, D.getPath("images/" + a + ".txt", null, b));
      };
      D.returnSound = function (a, b, c) {
        var d = "" + b + ".mp3";
        if (a != null) {
          d = "" + a + "/" + d;
        }
        d = D.getPath(d, "SOUND", c);
        d = d.substring(d.indexOf(":") + 1, d.length);
        if (!Object.prototype.hasOwnProperty.call(D.currentTrackedSounds.h, d)) {
          b = (a == "songs" ? "songs:" : "") + D.getPath("" + (a != null ? "" + a + "/" + b : b) + ".mp3", "SOUND", c);
          if (Q.exists(b, "SOUND")) {
            a = D.currentTrackedSounds;
            b = Q.getSound(b);
            a.h[d] = b;
          }
        }
        D.localTrackedAssets.push(d);
        return D.currentTrackedSounds.h[d];
      };
      D.loadAnimateAtlas = function (a, b, c, d) {
        var e = false;
        var f = false;
        var k = false;
        if (c != null) {
          f = true;
          c = Q.getText(c);
        }
        if (d != null) {
          e = true;
          d = Q.getText(d);
        }
        if (typeof b == "string") {
          var t = b;
          for (var n = 0; n < 10;) {
            var h = n++;
            var ya = "" + h;
            if (h == 0) {
              ya = "";
            }
            if (!f) {
              c = D.getTextFromFile("images/" + t + "/spritemap" + ya + ".json");
              if (c != null) {
                k = true;
                b = D.image("" + t + "/spritemap" + ya);
                break;
              }
            } else if (D.fileExists("images/" + t + "/spritemap" + ya + ".png", "IMAGE")) {
              k = true;
              b = D.image("" + t + "/spritemap" + ya);
              break;
            }
          }
          if (!k) {
            b = D.image(t);
          }
          if (!e) {
            d = D.getTextFromFile("images/" + t + "/Animation.json");
          }
        }
        a.loadAtlasEx(b, c, d);
      };
      function Oh() {}
      g["flixel.util.IFlxPooled"] = Oh;
      Oh.__name__ = "flixel.util.IFlxPooled";
      Oh.__isInterface__ = true;
      Oh.__interfaces__ = [rb];
      Oh.prototype = {
        __class__: Oh
      };
      function Wo() {}
      g["flixel.util.IFlxPool"] = Wo;
      Wo.__name__ = "flixel.util.IFlxPool";
      Wo.__isInterface__ = true;
      function jh(a) {
        this._count = 0;
        this._pool = [];
        this._constructor = a;
      }
      g["flixel.util.FlxPool"] = jh;
      jh.__name__ = "flixel.util.FlxPool";
      jh.__interfaces__ = [Wo];
      jh.prototype = {
        get: function () {
          if (this._count == 0) {
            return this._constructor();
          } else {
            return this._pool[--this._count];
          }
        },
        put: function (a) {
          if (a != null) {
            var b = this._pool.indexOf(a);
            if (b == -1 || b >= this._count) {
              this.putHelper(a);
            }
          }
        },
        putUnsafe: function (a) {
          if (a != null) {
            this.putHelper(a);
          }
        },
        putHelper: function (a) {
          a.destroy();
          this._pool[this._count++] = a;
        },
        __class__: jh
      };
      function W(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._weak = this._inPool = false;
        this.x = this.y = 0;
        this.set(a, b);
      }
      g["flixel.math.FlxBasePoint"] = W;
      W.__name__ = "flixel.math.FlxBasePoint";
      W.__interfaces__ = [Oh];
      W.prototype = {
        set: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.set_x(a);
          this.set_y(b);
          return this;
        },
        put: function () {
          if (!this._inPool) {
            this._inPool = true;
            this._weak = false;
            W.pool.putUnsafe(this);
          }
        },
        destroy: function () {},
        set_x: function (a) {
          return this.x = a;
        },
        set_y: function (a) {
          return this.y = a;
        },
        __class__: W,
        __properties__: {
          set_y: "set_y",
          set_x: "set_x"
        }
      };
      function Ha(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._weak = this._inPool = false;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
        this.width = c;
        this.height = d;
      }
      g["flixel.math.FlxRect"] = Ha;
      Ha.__name__ = "flixel.math.FlxRect";
      Ha.__interfaces__ = [Oh];
      Ha.prototype = {
        put: function () {
          if (!this._inPool) {
            this._inPool = true;
            this._weak = false;
            Ha._pool.putUnsafe(this);
          }
        },
        getRotatedBounds: function (a, b, c) {
          if (b == null) {
            var d = b = 0;
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = W.pool.get().set(b, d);
            b._inPool = false;
            b._weak = true;
          }
          if (c == null) {
            d = Ha._pool.get();
            var e = 0;
            var f = 0;
            var k = 0;
            var t = 0;
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            d.x = e;
            d.y = f;
            d.width = k;
            d.height = t;
            c = d;
            c._inPool = false;
          }
          a %= 360;
          if (a == 0) {
            d = b;
            if (d._weak) {
              d.put();
            }
            e = this.x;
            f = this.y;
            k = this.width;
            t = this.height;
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.x = e;
            c.y = f;
            c.width = k;
            c.height = t;
            return c;
          }
          if (a < 0) {
            a += 360;
          }
          e = Math.PI / 180 * a;
          d = Math.cos(e);
          e = Math.sin(e);
          f = -b.x;
          k = -b.y;
          t = -b.x + this.width;
          var n = -b.y + this.height;
          if (a < 90) {
            c.x = this.x + b.x + d * f - e * n;
            c.y = this.y + b.y + e * f + d * k;
          } else if (a < 180) {
            c.x = this.x + b.x + d * t - e * n;
            c.y = this.y + b.y + e * f + d * n;
          } else if (a < 270) {
            c.x = this.x + b.x + d * t - e * k;
            c.y = this.y + b.y + e * t + d * n;
          } else {
            c.x = this.x + b.x + d * f - e * k;
            c.y = this.y + b.y + e * t + d * k;
          }
          a = Math.abs(d * this.height) + Math.abs(e * this.width);
          c.width = Math.abs(d * this.width) + Math.abs(e * this.height);
          c.height = a;
          d = b;
          if (d._weak) {
            d.put();
          }
          return c;
        },
        destroy: function () {},
        intersection: function (a, b) {
          if (b == null) {
            b = Ha._pool.get();
            var c = 0;
            var d = 0;
            var e = 0;
            var f = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
            b._inPool = false;
          }
          e = this.x < a.x ? a.x : this.x;
          var k = this.x + this.width > a.x + a.width ? a.x + a.width : this.x + this.width;
          if (k <= e) {
            if (a._weak && !a._inPool) {
              a._inPool = true;
              a._weak = false;
              Ha._pool.putUnsafe(a);
            }
            return b;
          }
          f = this.y < a.y ? a.y : this.y;
          var t = this.y + this.height > a.y + a.height ? a.y + a.height : this.y + this.height;
          if (t <= f) {
            if (a._weak && !a._inPool) {
              a._inPool = true;
              a._weak = false;
              Ha._pool.putUnsafe(a);
            }
            return b;
          }
          if (a._weak && !a._inPool) {
            a._inPool = true;
            a._weak = false;
            Ha._pool.putUnsafe(a);
          }
          c = e;
          d = f;
          e = k - e;
          f = t - f;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.x = c;
          b.y = d;
          b.width = e;
          b.height = f;
          return b;
        },
        __class__: Ha
      };
      function Xo(a, b, c, d, e, f) {
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 1;
        }
        this.a = a;
        this.b = b;
        this.c = c;
        this.d = d;
        this.tx = e;
        this.ty = f;
      }
      g["lime.math.Matrix3"] = Xo;
      Xo.__name__ = "lime.math.Matrix3";
      Xo.prototype = {
        __class__: Xo
      };
      function za(a, b, c, d, e, f) {
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 1;
        }
        this.a = a;
        this.b = b;
        this.c = c;
        this.d = d;
        this.tx = e;
        this.ty = f;
      }
      g["openfl.geom.Matrix"] = za;
      za.__name__ = "openfl.geom.Matrix";
      za.prototype = {
        clone: function () {
          return new za(this.a, this.b, this.c, this.d, this.tx, this.ty);
        },
        concat: function (a) {
          var b = this.a * a.a + this.b * a.c;
          this.b = this.a * a.b + this.b * a.d;
          this.a = b;
          b = this.c * a.a + this.d * a.c;
          this.d = this.c * a.b + this.d * a.d;
          this.c = b;
          b = this.tx * a.a + this.ty * a.c + a.tx;
          this.ty = this.tx * a.b + this.ty * a.d + a.ty;
          this.tx = b;
        },
        copyFrom: function (a) {
          this.a = a.a;
          this.b = a.b;
          this.c = a.c;
          this.d = a.d;
          this.tx = a.tx;
          this.ty = a.ty;
        },
        createGradientBox: function (a, b, c, d, e) {
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          this.a = a / 1638.4;
          this.d = b / 1638.4;
          if (c != 0) {
            var f = Math.cos(c);
            c = Math.sin(c);
            this.b = c * this.d;
            this.c = -c * this.a;
            this.a *= f;
            this.d *= f;
          } else {
            this.c = this.b = 0;
          }
          this.tx = d + a / 2;
          this.ty = e + b / 2;
        },
        equals: function (a) {
          if (a != null && this.tx == a.tx && this.ty == a.ty && this.a == a.a && this.b == a.b && this.c == a.c) {
            return this.d == a.d;
          } else {
            return false;
          }
        },
        identity: function () {
          this.a = 1;
          this.c = this.b = 0;
          this.d = 1;
          this.ty = this.tx = 0;
        },
        invert: function () {
          var a = this.a * this.d - this.b * this.c;
          if (a == 0) {
            this.a = this.b = this.c = this.d = 0;
            this.tx = -this.tx;
            this.ty = -this.ty;
          } else {
            a = 1 / a;
            var b = this.d * a;
            this.d = this.a * a;
            this.a = b;
            this.b *= -a;
            this.c *= -a;
            a = -this.a * this.tx - this.c * this.ty;
            this.ty = -this.b * this.tx - this.d * this.ty;
            this.tx = a;
          }
          return this;
        },
        rotate: function (a) {
          var b = Math.cos(a);
          a = Math.sin(a);
          var c = this.a * b - this.b * a;
          this.b = this.a * a + this.b * b;
          this.a = c;
          c = this.c * b - this.d * a;
          this.d = this.c * a + this.d * b;
          this.c = c;
          c = this.tx * b - this.ty * a;
          this.ty = this.tx * a + this.ty * b;
          this.tx = c;
        },
        scale: function (a, b) {
          this.a *= a;
          this.b *= b;
          this.c *= a;
          this.d *= b;
          this.tx *= a;
          this.ty *= b;
        },
        setTo: function (a, b, c, d, e, f) {
          this.a = a;
          this.b = b;
          this.c = c;
          this.d = d;
          this.tx = e;
          this.ty = f;
        },
        translate: function (a, b) {
          this.tx += a;
          this.ty += b;
        },
        __class__: za
      };
      function Lb(a, b, c, d, e, f, k, t) {
        if (t == null) {
          t = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 1;
        }
        if (a == null) {
          a = 1;
        }
        this.redMultiplier = a;
        this.greenMultiplier = b;
        this.blueMultiplier = c;
        this.alphaMultiplier = d;
        this.redOffset = e;
        this.greenOffset = f;
        this.blueOffset = k;
        this.alphaOffset = t;
      }
      g["openfl.geom.ColorTransform"] = Lb;
      Lb.__name__ = "openfl.geom.ColorTransform";
      Lb.prototype = {
        concat: function (a) {
          this.redOffset = a.redOffset * this.redMultiplier + this.redOffset;
          this.greenOffset = a.greenOffset * this.greenMultiplier + this.greenOffset;
          this.blueOffset = a.blueOffset * this.blueMultiplier + this.blueOffset;
          this.alphaOffset = a.alphaOffset * this.alphaMultiplier + this.alphaOffset;
          this.redMultiplier *= a.redMultiplier;
          this.greenMultiplier *= a.greenMultiplier;
          this.blueMultiplier *= a.blueMultiplier;
          this.alphaMultiplier *= a.alphaMultiplier;
        },
        __clone: function () {
          return new Lb(this.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier, this.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset);
        },
        __copyFrom: function (a) {
          this.redMultiplier = a.redMultiplier;
          this.greenMultiplier = a.greenMultiplier;
          this.blueMultiplier = a.blueMultiplier;
          this.alphaMultiplier = a.alphaMultiplier;
          this.redOffset = a.redOffset;
          this.greenOffset = a.greenOffset;
          this.blueOffset = a.blueOffset;
          this.alphaOffset = a.alphaOffset;
        },
        __combine: function (a) {
          this.redMultiplier *= a.redMultiplier;
          this.greenMultiplier *= a.greenMultiplier;
          this.blueMultiplier *= a.blueMultiplier;
          this.alphaMultiplier *= a.alphaMultiplier;
          this.redOffset += a.redOffset;
          this.greenOffset += a.greenOffset;
          this.blueOffset += a.blueOffset;
          this.alphaOffset += a.alphaOffset;
        },
        __identity: function () {
          this.alphaMultiplier = this.blueMultiplier = this.greenMultiplier = this.redMultiplier = 1;
          this.alphaOffset = this.blueOffset = this.greenOffset = this.redOffset = 0;
        },
        __invert: function () {
          this.redMultiplier = this.redMultiplier != 0 ? 1 / this.redMultiplier : 1;
          this.greenMultiplier = this.greenMultiplier != 0 ? 1 / this.greenMultiplier : 1;
          this.blueMultiplier = this.blueMultiplier != 0 ? 1 / this.blueMultiplier : 1;
          this.alphaMultiplier = this.alphaMultiplier != 0 ? 1 / this.alphaMultiplier : 1;
          this.redOffset = -this.redOffset;
          this.greenOffset = -this.greenOffset;
          this.blueOffset = -this.blueOffset;
          this.alphaOffset = -this.alphaOffset;
        },
        __equals: function (a, b) {
          if (a == null || this.redMultiplier != a.redMultiplier || this.greenMultiplier != a.greenMultiplier || this.blueMultiplier != a.blueMultiplier || !b && this.alphaMultiplier != a.alphaMultiplier || this.redOffset != a.redOffset || this.greenOffset != a.greenOffset || this.blueOffset != a.blueOffset) {
            return false;
          } else {
            return this.alphaOffset == a.alphaOffset;
          }
        },
        __isDefault: function (a) {
          if (a) {
            if (this.redMultiplier == 1 && this.greenMultiplier == 1 && this.blueMultiplier == 1 && this.redOffset == 0 && this.greenOffset == 0 && this.blueOffset == 0) {
              return this.alphaOffset == 0;
            } else {
              return false;
            }
          } else if (this.redMultiplier == 1 && this.greenMultiplier == 1 && this.blueMultiplier == 1 && this.alphaMultiplier == 1 && this.redOffset == 0 && this.greenOffset == 0 && this.blueOffset == 0) {
            return this.alphaOffset == 0;
          } else {
            return false;
          }
        },
        __setArrays: function (a, b) {
          a[0] = this.redMultiplier;
          a[1] = this.greenMultiplier;
          a[2] = this.blueMultiplier;
          a[3] = this.alphaMultiplier;
          b[0] = this.redOffset;
          b[1] = this.greenOffset;
          b[2] = this.blueOffset;
          b[3] = this.alphaOffset;
        },
        __toLimeColorMatrix: function () {
          if (Lb.__limeColorMatrix == null) {
            Lb.__limeColorMatrix = new Float32Array(20);
          }
          Lb.__limeColorMatrix[0] = this.redMultiplier;
          Lb.__limeColorMatrix[4] = this.redOffset / 255;
          Lb.__limeColorMatrix[6] = this.greenMultiplier;
          Lb.__limeColorMatrix[9] = this.greenOffset / 255;
          Lb.__limeColorMatrix[12] = this.blueMultiplier;
          Lb.__limeColorMatrix[14] = this.blueOffset / 255;
          Lb.__limeColorMatrix[18] = this.alphaMultiplier;
          Lb.__limeColorMatrix[19] = this.alphaOffset / 255;
          return Lb.__limeColorMatrix;
        },
        __class__: Lb
      };
      function Tb(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._helperPoint = new lb();
        this._helperMatrix = new Rc();
        var f = Ha._pool.get();
        var k = 0;
        var t = 0;
        var n = 0;
        var K = 0;
        if (K == null) {
          K = 0;
        }
        if (n == null) {
          n = 0;
        }
        if (t == null) {
          t = 0;
        }
        if (k == null) {
          k = 0;
        }
        f.x = k;
        f.y = t;
        f.width = n;
        f.height = K;
        f._inPool = false;
        this._bounds = f;
        this._scrollRect = new Ua();
        this.initialZoom = 1;
        this.filters = null;
        k = f = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = W.pool.get().set(f, k);
        f._inPool = false;
        this._point = f;
        this._fxShakeAxes = 17;
        this._fxFadeAlpha = this._fxShakeIntensity = this._fxShakeDuration = 0;
        this._fxFadeComplete = null;
        this._fxFadeIn = false;
        k = f = this._fxFadeDuration = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = W.pool.get().set(f, k);
        f._inPool = false;
        this._scrollTarget = f;
        this._fxFlashAlpha = this._fxFadeColor = 0;
        this._fxFlashComplete = null;
        k = f = this._fxFlashColor = this._fxFlashDuration = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = W.pool.get().set(f, k);
        f._inPool = false;
        this._flashOffset = f;
        this._flashPoint = new lb();
        this.filtersEnabled = true;
        k = f = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = W.pool.get().set(f, k);
        f._inPool = false;
        this.followLead = f;
        this.antialiasing = false;
        this.color = -1;
        this.alpha = 1;
        this._useBlitMatrix = false;
        this._blitMatrix = new Rc();
        this.width = this.height = 0;
        this.pixelPerfectShake = null;
        this.flashSprite = new Ua();
        this.useBgAlphaBlending = false;
        k = f = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = W.pool.get().set(f, k);
        f._inPool = false;
        this.scroll = f;
        this.followLerp = 60 / h.updateFramerate;
        k = f = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = W.pool.get().set(f, k);
        f._inPool = false;
        this.targetOffset = f;
        this.x = this.y = this.scaleX = this.scaleY = 0;
        Ea.call(this);
        this.set_x(a);
        this.set_y(b);
        this.set_width(c <= 0 ? h.width : c);
        this.set_height(d <= 0 ? h.height : d);
        this._flashRect = new da(0, 0, this.width, this.height);
        this.flashSprite.addChild(this._scrollRect);
        this._scrollRect.set_scrollRect(new da());
        if (this.pixelPerfectRender = h.renderBlit) {
          this.screen = new F();
          this.buffer = new T(this.width, this.height, true, 0);
          this.screen.set_pixels(this.buffer);
          a = this.screen.origin;
          a.set_x(0);
          a.set_y(0);
          this._flashBitmap = new Nc(this.buffer);
          this._scrollRect.addChild(this._flashBitmap);
          this._fill = new T(this.width, this.height, true, 0);
        } else {
          this.canvas = new Ua();
          this._scrollRect.addChild(this.canvas);
        }
        this.set_color(-1);
        this.initialZoom = e == 0 ? Tb.defaultZoom : e;
        this.set_zoom(e);
        this.updateScrollRect();
        this.updateFlashOffset();
        this.updateFlashSpritePosition();
        this.updateInternalSpritePositions();
        this.bgColor = h.cameras.get_bgColor();
      }
      g["flixel.FlxCamera"] = Tb;
      Tb.__name__ = "flixel.FlxCamera";
      Tb.__super__ = Ea;
      Tb.prototype = q(Ea.prototype, {
        startQuadBatch: function (a, b, c, d, e, f) {
          if (e == null) {
            e = false;
          }
          if (c == null) {
            c = false;
          }
          var k = Ld.blendToInt(d);
          if (this._currentDrawItem != null && this._currentDrawItem.type == vk.TILES && this._headTiles.graphics == a && this._headTiles.colored == b && this._headTiles.hasColorOffsets == c && this._headTiles.blending == k && this._headTiles.blend == d && this._headTiles.antialiasing == e && this._headTiles.shader == f) {
            return this._headTiles;
          }
          if (Tb._storageTilesHead != null) {
            var t = Tb._storageTilesHead;
            var n = Tb._storageTilesHead.nextTyped;
            t.reset();
            Tb._storageTilesHead = n;
          } else {
            t = new wk();
          }
          if (a.shader == null) {
            throw G.thrown("Attempted to queue an invalid FlxDrawItem, did you destroy a cached sprite?");
          }
          t.graphics = a;
          t.antialiasing = e;
          t.colored = b;
          t.hasColorOffsets = c;
          t.blending = k;
          t.blend = d;
          t.shader = f;
          t.nextTyped = this._headTiles;
          this._headTiles = t;
          if (this._headOfDrawStack == null) {
            this._headOfDrawStack = t;
          }
          if (this._currentDrawItem != null) {
            this._currentDrawItem.next = t;
          }
          return this._currentDrawItem = t;
        },
        clearDrawStack: function () {
          for (var a = this._headTiles, b; a != null;) {
            b = a.nextTyped;
            a.reset();
            a.nextTyped = Tb._storageTilesHead;
            Tb._storageTilesHead = a;
            a = b;
          }
          for (a = this._headTriangles; a != null;) {
            b = a.nextTyped;
            a.reset();
            a.nextTyped = Tb._storageTrianglesHead;
            Tb._storageTrianglesHead = a;
            a = b;
          }
          this._headTriangles = this._headTiles = this._headOfDrawStack = this._currentDrawItem = null;
        },
        render: function () {
          for (var a = this._headOfDrawStack; a != null;) {
            a.render(this);
            a = a.next;
          }
        },
        drawPixels: function (a, b, c, d, e, f, k) {
          if (f == null) {
            f = false;
          }
          if (h.renderBlit) {
            this._helperMatrix.copyFrom(c);
            if (this._useBlitMatrix) {
              this._helperMatrix.concat(this._blitMatrix);
              this.buffer.draw(b, this._helperMatrix, null, null, null, f || this.antialiasing);
            } else {
              this._helperMatrix.translate(-this.viewMarginX, -this.viewMarginY);
              this.buffer.draw(b, this._helperMatrix, null, e, null, f || this.antialiasing);
            }
          } else {
            b = d != null && Xe.hasRGBMultipliers(d);
            var t = d != null && Xe.hasRGBAOffsets(d);
            this.startQuadBatch(a.parent, b, t, e, f, k).addQuad(a, c, d);
          }
        },
        copyPixels: function (a, b, c, d, e, f, k, t) {
          if (k == null) {
            k = false;
          }
          if (h.renderBlit) {
            if (b != null) {
              if (this._useBlitMatrix) {
                this._helperMatrix.identity();
                this._helperMatrix.translate(d.x, d.y);
                this._helperMatrix.concat(this._blitMatrix);
                this.buffer.draw(b, this._helperMatrix, null, null, null, k || this.antialiasing);
              } else {
                this._helperPoint.x = d.x - (this.viewMarginX | 0);
                this._helperPoint.y = d.y - (this.viewMarginY | 0);
                this.buffer.copyPixels(b, c, this._helperPoint, null, null, true);
              }
            } else if (a != null) {
              a.paint(this.buffer, d, true);
            }
          } else {
            this._helperMatrix.identity();
            this._helperMatrix.translate(d.x + a.offset.x, d.y + a.offset.y);
            b = e != null && Xe.hasRGBMultipliers(e);
            c = e != null && Xe.hasRGBAOffsets(e);
            this.startQuadBatch(a.parent, b, c, f, k, t).addQuad(a, this._helperMatrix, e);
          }
        },
        destroy: function () {
          ca.removeChild(this.flashSprite, this._scrollRect);
          if (h.renderBlit) {
            ca.removeChild(this._scrollRect, this._flashBitmap);
            this.screen = ca.destroy(this.screen);
            this._flashBitmap = this.buffer = null;
            this._fill = ca.dispose(this._fill);
          } else {
            ca.removeChild(this._scrollRect, this.canvas);
            if (this.canvas != null) {
              for (var a = 0, b = this.canvas.get_numChildren(); a < b;) {
                a++;
                this.canvas.removeChildAt(0);
              }
              this.canvas = null;
            }
            if (this._headOfDrawStack != null) {
              this.clearDrawStack();
            }
            this._helperPoint = this._helperMatrix = this._blitMatrix = null;
          }
          this._bounds = null;
          this.scroll = ca.put(this.scroll);
          this.targetOffset = ca.put(this.targetOffset);
          this.deadzone = ca.put(this.deadzone);
          this._fxShakeComplete = this._fxFadeComplete = this._fxFlashComplete = this._flashPoint = this._flashRect = this._scrollRect = this.flashSprite = this.target = null;
          Ea.prototype.destroy.call(this);
        },
        update: function (a) {
          if (this.target != null) {
            this.updateFollow();
          }
          this.updateScroll();
          this.updateFlash(a);
          this.updateFade(a);
          this.flashSprite.set_filters(this.filtersEnabled ? this.filters : null);
          this.updateFlashSpritePosition();
          this.updateShake(a);
        },
        updateScroll: function () {
          this.bindScrollPos(this.scroll);
        },
        bindScrollPos: function (a) {
          var b = this.minScrollX == null ? null : this.minScrollX - (this.zoom - 1) * this.width / (this.zoom * 2);
          var c = this.maxScrollX == null ? null : this.maxScrollX + (this.zoom - 1) * this.width / (this.zoom * 2);
          var d = this.minScrollY == null ? null : this.minScrollY - (this.zoom - 1) * this.height / (this.zoom * 2);
          var e = this.maxScrollY == null ? null : this.maxScrollY + (this.zoom - 1) * this.height / (this.zoom * 2);
          var f = a.x;
          c = c != null ? c - this.width : null;
          b = b != null && f < b ? b : f;
          a.set_x(c != null && b > c ? c : b);
          f = a.y;
          c = e != null ? e - this.height : null;
          b = d != null && f < d ? d : f;
          a.set_y(c != null && b > c ? c : b);
          return a;
        },
        updateFollow: function () {
          if (this.deadzone == null) {
            this.target.getMidpoint(this._point);
            var a = this._point;
            var b = this.targetOffset;
            var c = b.x;
            var d = b.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.set_x(a.x + c);
            a.set_y(a.y + d);
            d = b;
            if (d._weak) {
              d.put();
            }
            a = this._scrollTarget;
            c = this._point.x - this.width * 0.5;
            d = this._point.y - this.height * 0.5;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.set_x(c);
            a.set_y(d);
          } else {
            a = this.target.x + this.targetOffset.x;
            c = this.target.y + this.targetOffset.y;
            if (this.style == tf.SCREEN_BY_SCREEN) {
              if (a >= this.scroll.x + (this.width - this.viewMarginX)) {
                this._scrollTarget.set_x(this._scrollTarget.x + (this.width - this.viewMarginX * 2));
              } else if (a + this.target.get_width() < this.scroll.x + this.viewMarginX) {
                this._scrollTarget.set_x(this._scrollTarget.x - (this.width - this.viewMarginX * 2));
              }
              if (c >= this.scroll.y + (this.height - this.viewMarginY)) {
                this._scrollTarget.set_y(this._scrollTarget.y + (this.height - this.viewMarginY * 2));
              } else if (c + this.target.get_height() < this.scroll.y + this.viewMarginY) {
                this._scrollTarget.set_y(this._scrollTarget.y - (this.height - this.viewMarginY * 2));
              }
              this.bindScrollPos(this._scrollTarget);
            } else {
              d = a - this.deadzone.x;
              if (this._scrollTarget.x > d) {
                this._scrollTarget.set_x(d);
              }
              d = a + this.target.get_width() - this.deadzone.x - this.deadzone.width;
              if (this._scrollTarget.x < d) {
                this._scrollTarget.set_x(d);
              }
              d = c - this.deadzone.y;
              if (this._scrollTarget.y > d) {
                this._scrollTarget.set_y(d);
              }
              d = c + this.target.get_height() - this.deadzone.y - this.deadzone.height;
              if (this._scrollTarget.y < d) {
                this._scrollTarget.set_y(d);
              }
            }
            if (this.target instanceof F) {
              if (this._lastTargetPosition == null) {
                c = this.target.x;
                d = this.target.y;
                if (d == null) {
                  d = 0;
                }
                if (c == null) {
                  c = 0;
                }
                a = c;
                if (d == null) {
                  d = 0;
                }
                if (a == null) {
                  a = 0;
                }
                b = W.pool.get().set(a, d);
                b._inPool = false;
                this._lastTargetPosition = b;
              }
              this._scrollTarget.set_x(this._scrollTarget.x + (this.target.x - this._lastTargetPosition.x) * this.followLead.x);
              this._scrollTarget.set_y(this._scrollTarget.y + (this.target.y - this._lastTargetPosition.y) * this.followLead.y);
              this._lastTargetPosition.set_x(this.target.x);
              this._lastTargetPosition.set_y(this.target.y);
            }
          }
          if (this.followLerp >= 60 / h.updateFramerate) {
            a = this.scroll;
            b = this._scrollTarget;
            c = b.x;
            d = b.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.set_x(c);
            a.set_y(d);
            d = b;
            if (d._weak) {
              d.put();
            }
          } else {
            this.scroll.set_x(this.scroll.x + 60 / h.updateFramerate * this.followLerp * (this._scrollTarget.x - this.scroll.x));
            this.scroll.set_y(this.scroll.y + 60 / h.updateFramerate * this.followLerp * (this._scrollTarget.y - this.scroll.y));
          }
        },
        updateFlash: function (a) {
          if (this._fxFlashAlpha > 0) {
            this._fxFlashAlpha -= a / this._fxFlashDuration;
            if (this._fxFlashAlpha <= 0 && this._fxFlashComplete != null) {
              this._fxFlashComplete();
            }
          }
        },
        updateFade: function (a) {
          if (this._fxFadeDuration != 0) {
            if (this._fxFadeIn) {
              this._fxFadeAlpha -= a / this._fxFadeDuration;
              if (this._fxFadeAlpha <= 0) {
                this._fxFadeAlpha = 0;
                this.completeFade();
              }
            } else {
              this._fxFadeAlpha += a / this._fxFadeDuration;
              if (this._fxFadeAlpha >= 1) {
                this._fxFadeAlpha = 1;
                this.completeFade();
              }
            }
          }
        },
        completeFade: function () {
          this._fxFadeDuration = 0;
          if (this._fxFadeComplete != null) {
            this._fxFadeComplete();
          }
        },
        updateShake: function (a) {
          if (this._fxShakeDuration > 0) {
            this._fxShakeDuration -= a;
            if (this._fxShakeDuration <= 0) {
              if (this._fxShakeComplete != null) {
                this._fxShakeComplete();
              }
            } else {
              a = this.pixelPerfectShake == null ? this.pixelPerfectRender : this.pixelPerfectShake;
              var b = this._fxShakeAxes;
              if (b == 1 || b == 17) {
                b = h.random.float(-1, 1) * this._fxShakeIntensity * this.width;
                if (a) {
                  b = Math.round(b);
                }
                var c = this.flashSprite;
                c.set_x(c.get_x() + b * this.zoom * h.scaleMode.scale.x);
              }
              b = this._fxShakeAxes;
              if (b == 16 || b == 17) {
                b = h.random.float(-1, 1) * this._fxShakeIntensity * this.height;
                if (a) {
                  b = Math.round(b);
                }
                c = this.flashSprite;
                c.set_y(c.get_y() + b * this.zoom * h.scaleMode.scale.y);
              }
            }
          }
        },
        updateFlashSpritePosition: function () {
          if (this.flashSprite != null) {
            this.flashSprite.set_x(this.x * h.scaleMode.scale.x + this._flashOffset.x);
            this.flashSprite.set_y(this.y * h.scaleMode.scale.y + this._flashOffset.y);
          }
        },
        updateFlashOffset: function () {
          this._flashOffset.set_x(this.width * 0.5 * h.scaleMode.scale.x * this.initialZoom);
          this._flashOffset.set_y(this.height * 0.5 * h.scaleMode.scale.y * this.initialZoom);
        },
        updateScrollRect: function () {
          var a = this._scrollRect != null ? this._scrollRect.get_scrollRect() : null;
          if (a != null) {
            a.x = a.y = 0;
            a.width = this.width * this.initialZoom * h.scaleMode.scale.x;
            a.height = this.height * this.initialZoom * h.scaleMode.scale.y;
            this._scrollRect.set_scrollRect(a);
            this._scrollRect.set_x(a.width * -0.5);
            this._scrollRect.set_y(a.height * -0.5);
          }
        },
        updateInternalSpritePositions: function () {
          if (h.renderBlit) {
            if (this._flashBitmap != null) {
              this._flashBitmap.set_x(0);
              this._flashBitmap.set_y(0);
            }
          } else if (this.canvas != null) {
            this.canvas.set_x(this.width * -0.5 * (this.scaleX - this.initialZoom) * h.scaleMode.scale.x);
            this.canvas.set_y(this.height * -0.5 * (this.scaleY - this.initialZoom) * h.scaleMode.scale.y);
            this.canvas.set_scaleX(this.totalScaleX);
            this.canvas.set_scaleY(this.totalScaleY);
          }
        },
        follow: function (a, b, c) {
          if (b == null) {
            b = tf.LOCKON;
          }
          if (c == null) {
            c = 60 / h.updateFramerate;
          }
          this.style = b;
          this.target = a;
          this.set_followLerp(c);
          this._lastTargetPosition = ca.put(this._lastTargetPosition);
          this.deadzone = ca.put(this.deadzone);
          switch (b._hx_index) {
            case 0:
              c = b = 0;
              if (this.target != null) {
                b = this.target.get_width();
                c = this.target.get_height();
              }
              var d = (this.width - b) / 2;
              a = (this.height - c) / 2 - c * 0.25;
              var e = c;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ha._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 1:
              b = this.width / 8;
              c = this.height / 3;
              d = (this.width - b) / 2;
              a = (this.height - c) / 2 - c * 0.25;
              e = c;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ha._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 2:
              c = Math.max(this.width, this.height) / 4;
              d = (this.width - c) / 2;
              a = (this.height - c) / 2;
              e = b = c;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ha._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 3:
              c = Math.max(this.width, this.height) / 8;
              d = (this.width - c) / 2;
              a = (this.height - c) / 2;
              e = b = c;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ha._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 4:
              a = d = 0;
              b = this.width;
              e = this.height;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ha._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 5:
              this.deadzone = null;
          }
        },
        snapToTarget: function () {
          this.updateFollow();
          var a = this.scroll;
          var b = this._scrollTarget;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        flash: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (b == null) {
            b = 1;
          }
          if (a == null) {
            a = -1;
          }
          if (!!d || !(this._fxFlashAlpha > 0)) {
            this._fxFlashColor = a;
            if (b <= 0) {
              b = 0.000001;
            }
            this._fxFlashDuration = b;
            this._fxFlashComplete = c;
            this._fxFlashAlpha = 1;
          }
        },
        fade: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 1;
          }
          if (a == null) {
            a = -16777216;
          }
          if (!(this._fxFadeDuration > 0) || !!e) {
            this._fxFadeColor = a;
            if (b <= 0) {
              b = 0.000001;
            }
            this._fxFadeIn = c;
            this._fxFadeDuration = b;
            this._fxFadeComplete = d;
            this._fxFadeAlpha = this._fxFadeIn ? 0.999999 : 0.000001;
          }
        },
        shake: function (a, b, c, d, e) {
          if (d == null) {
            d = true;
          }
          if (b == null) {
            b = 0.5;
          }
          if (a == null) {
            a = 0.05;
          }
          if (e == null) {
            e = 17;
          }
          if (!!d || !(this._fxShakeDuration > 0)) {
            this._fxShakeIntensity = a;
            this._fxShakeDuration = b;
            this._fxShakeComplete = c;
            this._fxShakeAxes = e;
          }
        },
        fill: function (a, b, c, d) {
          if (c == null) {
            c = 1;
          }
          if (b == null) {
            b = true;
          }
          if (h.renderBlit) {
            if (b) {
              this._fill.fillRect(this._flashRect, a);
              this.buffer.copyPixels(this._fill, this._flashRect, this._flashPoint, null, null, b);
            } else {
              this.buffer.fillRect(this._flashRect, a);
            }
          } else if (c != 0) {
            b = d == null ? this.canvas.get_graphics() : d;
            b.beginFill(a, c);
            b.drawRect(this.viewMarginX - 1, this.viewMarginY - 1, this.width - this.viewMarginX * 2 + 2, this.height - this.viewMarginY * 2 + 2);
            b.endFill();
          }
        },
        drawFX: function () {
          if (this._fxFlashAlpha > 0) {
            var a = this._fxFlashColor >> 24 & 255;
            if (h.renderBlit) {
              this.fill((((a <= 0 ? 255 : a) * this._fxFlashAlpha | 0) << 24) + (this._fxFlashColor & 16777215));
            } else {
              this.fill(this._fxFlashColor & 16777215, true, (a <= 0 ? 255 : a) * this._fxFlashAlpha / 255, this.canvas.get_graphics());
            }
          }
          if (this._fxFadeAlpha > 0) {
            a = this._fxFadeColor >> 24 & 255;
            if (h.renderBlit) {
              this.fill((((a <= 0 ? 255 : a) * this._fxFadeAlpha | 0) << 24) + (this._fxFadeColor & 16777215));
            } else {
              this.fill(this._fxFadeColor & 16777215, true, (a <= 0 ? 255 : a) * this._fxFadeAlpha / 255, this.canvas.get_graphics());
            }
          }
        },
        checkResize: function () {
          if (h.renderBlit) {
            if (this.width != this.buffer.width || this.height != this.buffer.height) {
              var a = this.screen.graphic;
              this.buffer = new T(this.width, this.height, true, 0);
              this.screen.set_pixels(this.buffer);
              var b = this.screen.origin;
              b.set_x(0);
              b.set_y(0);
              this._flashBitmap.set_bitmapData(this.buffer);
              this._flashRect.width = this.width;
              this._flashRect.height = this.height;
              this._fill = ca.dispose(this._fill);
              this._fill = new T(this.width, this.height, true, 0);
              h.bitmap.removeIfNoUse(a);
            }
            this._blitMatrix.identity();
            this._blitMatrix.translate(-this.viewMarginX, -this.viewMarginY);
            this._blitMatrix.scale(this.scaleX, this.scaleY);
            this._useBlitMatrix = this.scaleX < this.initialZoom || this.scaleY < this.initialZoom;
          }
        },
        setScale: function (a, b) {
          this.scaleX = a;
          this.scaleY = b;
          this.totalScaleX = this.scaleX * h.scaleMode.scale.x;
          this.totalScaleY = this.scaleY * h.scaleMode.scale.y;
          if (h.renderBlit) {
            this._blitMatrix.identity();
            this._blitMatrix.translate(-this.viewMarginX, -this.viewMarginY);
            this._blitMatrix.scale(this.scaleX, this.scaleY);
            if (this._useBlitMatrix = this.scaleX < this.initialZoom || this.scaleY < this.initialZoom) {
              this._flashBitmap.set_scaleX(this.initialZoom * h.scaleMode.scale.x);
              this._flashBitmap.set_scaleY(this.initialZoom * h.scaleMode.scale.y);
            } else {
              this._flashBitmap.set_scaleX(this.totalScaleX);
              this._flashBitmap.set_scaleY(this.totalScaleY);
            }
          }
          this.viewMarginX = this.width * 0.5 * (this.scaleX - this.initialZoom) / this.scaleX;
          this.viewMarginY = this.height * 0.5 * (this.scaleY - this.initialZoom) / this.scaleY;
          this.updateScrollRect();
          this.updateInternalSpritePositions();
          h.cameras.cameraResized.dispatch(this);
        },
        onResize: function () {
          this.updateFlashOffset();
          this.setScale(this.scaleX, this.scaleY);
        },
        getViewMarginRect: function (a) {
          if (a == null) {
            a = Ha._pool.get();
            var b = 0;
            var c = 0;
            var d = 0;
            var e = 0;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.x = b;
            a.y = c;
            a.width = d;
            a.height = e;
            a._inPool = false;
          }
          b = this.viewMarginX;
          c = this.viewMarginY;
          d = this.width - this.viewMarginX * 2;
          e = this.height - this.viewMarginY * 2;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.x = b;
          a.y = c;
          a.width = d;
          a.height = e;
          return a;
        },
        set_followLerp: function (a) {
          var b = 60 / h.updateFramerate;
          a = a < 0 ? 0 : a;
          return this.followLerp = b != null && a > b ? b : a;
        },
        set_width: function (a) {
          if (this.width != a && a > 0) {
            this.width = a;
            this.viewMarginX = this.width * 0.5 * (this.scaleX - this.initialZoom) / this.scaleX;
            this.updateFlashOffset();
            this.updateScrollRect();
            this.updateInternalSpritePositions();
            h.cameras.cameraResized.dispatch(this);
          }
          return a;
        },
        set_height: function (a) {
          if (this.height != a && a > 0) {
            this.height = a;
            this.viewMarginY = this.height * 0.5 * (this.scaleY - this.initialZoom) / this.scaleY;
            this.updateFlashOffset();
            this.updateScrollRect();
            this.updateInternalSpritePositions();
            h.cameras.cameraResized.dispatch(this);
          }
          return a;
        },
        set_zoom: function (a) {
          this.zoom = a == 0 ? Tb.defaultZoom : a;
          this.setScale(this.zoom, this.zoom);
          return this.zoom;
        },
        set_alpha: function (a) {
          var b = a < 0 ? 0 : a;
          this.alpha = b > 1 ? 1 : b;
          if (h.renderBlit) {
            this._flashBitmap.set_alpha(a);
          } else {
            this.canvas.set_alpha(a);
          }
          return a;
        },
        set_color: function (a) {
          this.color = a;
          if (h.renderBlit) {
            if (this._flashBitmap == null) {
              return a;
            }
            var b = this._flashBitmap.get_transform().get_colorTransform();
          } else {
            b = this.canvas.get_transform().get_colorTransform();
          }
          b.redMultiplier = (this.color >> 16 & 255) / 255;
          b.greenMultiplier = (this.color >> 8 & 255) / 255;
          b.blueMultiplier = (this.color & 255) / 255;
          if (h.renderBlit) {
            this._flashBitmap.get_transform().set_colorTransform(b);
          } else {
            this.canvas.get_transform().set_colorTransform(b);
          }
          return a;
        },
        set_x: function (a) {
          this.x = a;
          this.updateFlashSpritePosition();
          return a;
        },
        set_y: function (a) {
          this.y = a;
          this.updateFlashSpritePosition();
          return a;
        },
        set_visible: function (a) {
          if (this.flashSprite != null) {
            this.flashSprite.set_visible(a);
          }
          return this.visible = a;
        },
        get_camera: function () {
          throw G.thrown("don't reference camera.camera");
        },
        get_cameras: function () {
          throw G.thrown("don't reference camera.cameras");
        },
        set_cameras: function (a) {
          throw G.thrown("don't reference camera.cameras");
        },
        __class__: Tb,
        __properties__: q(Ea.prototype.__properties__, {
          set_color: "set_color",
          set_alpha: "set_alpha",
          set_zoom: "set_zoom",
          set_height: "set_height",
          set_width: "set_width",
          set_followLerp: "set_followLerp",
          set_y: "set_y",
          set_x: "set_x"
        })
      });
      function uk(a, b, c, d, e) {
        Tb.call(this, a, b, c, d, e);
      }
      g["backend.PsychCamera"] = uk;
      uk.__name__ = "backend.PsychCamera";
      uk.__super__ = Tb;
      uk.prototype = q(Tb.prototype, {
        update: function (a) {
          if (this.target != null) {
            this.updateFollowDelta(a);
          }
          this.updateScroll();
          this.updateFlash(a);
          this.updateFade(a);
          this.flashSprite.set_filters(this.filtersEnabled ? this.filters : null);
          this.updateFlashSpritePosition();
          this.updateShake(a);
        },
        updateFollowDelta: function (a) {
          if (a == null) {
            a = 0;
          }
          if (this.deadzone == null) {
            this.target.getMidpoint(this._point);
            var b = this._point;
            var c = this.targetOffset;
            var d = c.x;
            var e = c.y;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            b.set_x(b.x + d);
            b.set_y(b.y + e);
            e = c;
            if (e._weak) {
              e.put();
            }
            b = this._scrollTarget;
            d = this._point.x - this.width * 0.5;
            e = this._point.y - this.height * 0.5;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            b.set_x(d);
            b.set_y(e);
          } else {
            b = this.target.x + this.targetOffset.x;
            c = this.target.y + this.targetOffset.y;
            if (this.style == tf.SCREEN_BY_SCREEN) {
              if (b >= this.scroll.x + (this.width - this.viewMarginX)) {
                this._scrollTarget.set_x(this._scrollTarget.x + (this.width - this.viewMarginX * 2));
              } else if (b + this.target.get_width() < this.scroll.x + this.viewMarginX) {
                this._scrollTarget.set_x(this._scrollTarget.x - (this.width - this.viewMarginX * 2));
              }
              if (c >= this.scroll.y + (this.height - this.viewMarginY)) {
                this._scrollTarget.set_y(this._scrollTarget.y + (this.height - this.viewMarginY * 2));
              } else if (c + this.target.get_height() < this.scroll.y + this.viewMarginY) {
                this._scrollTarget.set_y(this._scrollTarget.y - (this.height - this.viewMarginY * 2));
              }
              this.bindScrollPos(this._scrollTarget);
            } else {
              e = b - this.deadzone.x;
              if (this._scrollTarget.x > e) {
                this._scrollTarget.set_x(e);
              }
              e = b + this.target.get_width() - this.deadzone.x - this.deadzone.width;
              if (this._scrollTarget.x < e) {
                this._scrollTarget.set_x(e);
              }
              e = c - this.deadzone.y;
              if (this._scrollTarget.y > e) {
                this._scrollTarget.set_y(e);
              }
              e = c + this.target.get_height() - this.deadzone.y - this.deadzone.height;
              if (this._scrollTarget.y < e) {
                this._scrollTarget.set_y(e);
              }
            }
            if (this.target instanceof F) {
              if (this._lastTargetPosition == null) {
                d = this.target.x;
                e = this.target.y;
                if (e == null) {
                  e = 0;
                }
                if (d == null) {
                  d = 0;
                }
                b = d;
                if (e == null) {
                  e = 0;
                }
                if (b == null) {
                  b = 0;
                }
                c = W.pool.get().set(b, e);
                c._inPool = false;
                this._lastTargetPosition = c;
              }
              this._scrollTarget.set_x(this._scrollTarget.x + (this.target.x - this._lastTargetPosition.x) * this.followLead.x);
              this._scrollTarget.set_y(this._scrollTarget.y + (this.target.y - this._lastTargetPosition.y) * this.followLead.y);
              this._lastTargetPosition.set_x(this.target.x);
              this._lastTargetPosition.set_y(this.target.y);
            }
          }
          a = 1 - Math.exp(-a * this.followLerp);
          this.scroll.set_x(this.scroll.x + (this._scrollTarget.x - this.scroll.x) * a);
          this.scroll.set_y(this.scroll.y + (this._scrollTarget.y - this.scroll.y) * a);
        },
        set_followLerp: function (a) {
          return this.followLerp = a;
        },
        __class__: uk
      });
      function fg(a) {
        this.hits = 0;
        this.noteSplash = true;
        this.score = 350;
        this.ratingMod = 1;
        this.hitWindow = 0;
        this.name = this.image = "";
        this.image = this.name = a;
        this.hitWindow = 0;
        try {
          this.hitWindow = ja.field(y.data, a + "Window");
        } catch (b) {
          a = G.caught(b);
          h.log.advanced(a, xa.ERROR, true);
        }
      }
      g["backend.Rating"] = fg;
      fg.__name__ = "backend.Rating";
      fg.loadDefault = function () {
        var a = [new fg("sick")];
        var b = new fg("good");
        b.ratingMod = 0.67;
        b.score = 200;
        b.noteSplash = false;
        a.push(b);
        b = new fg("bad");
        b.ratingMod = 0.34;
        b.score = 100;
        b.noteSplash = false;
        a.push(b);
        b = new fg("shit");
        b.ratingMod = 0;
        b.score = 50;
        b.noteSplash = false;
        a.push(b);
        return a;
      };
      fg.prototype = {
        __class__: fg
      };
      function Md() {}
      g["backend.Song"] = Md;
      Md.__name__ = "backend.Song";
      Md.onLoadJson = function (a) {
        if (a.gfVersion == null) {
          a.gfVersion = a.player3;
          a.player3 = null;
        }
        if (a.events == null) {
          a.events = [];
          for (var b = 0, c = a.notes.length; b < c;) {
            var d = b++;
            var e = 0;
            d = a.notes[d].sectionNotes;
            for (var f = d.length; e < f;) {
              var k = d[e];
              if (k[1] < 0) {
                a.events.push([k[0], [[k[2], k[3], k[4]]]]);
                r.remove(d, k);
                f = d.length;
              } else {
                ++e;
              }
            }
          }
        }
      };
      Md.loadFromJson = function (a, b) {
        var c = null;
        var d = new V("[~&\\\\;:<>#]", "");
        var e = new V("[.,'\"%?!]", "");
        d = d.split(w.replace(b, " ", "-")).join("-");
        b = e.split(d).join("").toLowerCase();
        d = new V("[~&\\\\;:<>#]", "");
        e = new V("[.,'\"%?!]", "");
        d = d.split(w.replace(a, " ", "-")).join("-");
        e = e.split(d).join("").toLowerCase();
        if (c == null) {
          D.getPath("data/" + (b + "/" + e) + ".json", "TEXT", null);
          c = w.trim(sa.getText(D.getPath("data/" + (b + "/" + e) + ".json", "TEXT", null)));
        }
        while (!w.endsWith(c, "}")) {
          c = r.substr(c, 0, c.length - 1);
        }
        c = Md.parseJSONshit(c);
        if (a != "events") {
          we.loadDirectory(c);
        }
        Md.onLoadJson(c);
        return c;
      };
      Md.parseJSONshit = function (a) {
        return JSON.parse(a).song;
      };
      function we() {}
      g["backend.StageData"] = we;
      we.__name__ = "backend.StageData";
      we.dummy = function () {
        return {
          directory: "",
          defaultZoom: 0.9,
          isPixelStage: false,
          stageUI: "normal",
          boyfriend: [770, 100],
          girlfriend: [400, 130],
          opponent: [100, 100],
          hide_girlfriend: false,
          camera_boyfriend: [0, 0],
          camera_opponent: [0, 0],
          camera_girlfriend: [0, 0],
          camera_speed: 1
        };
      };
      we.loadDirectory = function (a) {
        if (a.stage != null) {
          a = a.stage;
        } else if (a.song != null) {
          switch (w.replace(a.song.toLowerCase(), " ", "-")) {
            case "cocoa":
            case "eggnog":
              a = "mall";
              break;
            case "high":
            case "milf":
            case "satin-panties":
              a = "limo";
              break;
            case "monster":
            case "south":
            case "spookeez":
              a = "spooky";
              break;
            case "blammed":
            case "philly":
            case "philly-nice":
            case "pico":
              a = "philly";
              break;
            case "roses":
            case "senpai":
              a = "school";
              break;
            case "guns":
            case "stress":
            case "ugh":
              a = "tank";
              break;
            case "thorns":
              a = "schoolEvil";
              break;
            case "winter-horrorland":
              a = "mallEvil";
              break;
            default:
              a = "stage";
          }
        } else {
          a = "stage";
        }
        a = we.getStageFile(a);
        we.forceNextDirectory = a == null ? "" : a.directory;
      };
      we.getStageFile = function (a) {
        a = "stages/" + a + ".json";
        if (a == null) {
          a = "";
        }
        a = "assets/shared/" + a;
        if (Q.exists(a)) {
          a = Q.getText(a);
        } else {
          return null;
        }
        return Ph.parse(a);
      };
      we.vanillaSongStage = function (a) {
        switch (a) {
          case "cocoa":
          case "eggnog":
            return "mall";
          case "high":
          case "milf":
          case "satin-panties":
            return "limo";
          case "monster":
          case "south":
          case "spookeez":
            return "spooky";
          case "blammed":
          case "philly":
          case "philly-nice":
          case "pico":
            return "philly";
          case "roses":
          case "senpai":
            return "school";
          case "guns":
          case "stress":
          case "ugh":
            return "tank";
          case "thorns":
            return "schoolEvil";
          case "winter-horrorland":
            return "mallEvil";
        }
        return "stage";
      };
      function ib(a, b) {
        this.folder = "";
        this.songs = a.songs;
        this.weekCharacters = a.weekCharacters;
        this.weekBackground = a.weekBackground;
        this.weekBefore = a.weekBefore;
        this.storyName = a.storyName;
        this.weekName = a.weekName;
        this.freeplayColor = a.freeplayColor;
        this.startUnlocked = a.startUnlocked;
        this.hiddenUntilUnlocked = a.hiddenUntilUnlocked;
        this.hideStoryMode = a.hideStoryMode;
        this.hideFreeplay = a.hideFreeplay;
        this.difficulties = a.difficulties;
        this.fileName = b;
      }
      g["backend.WeekData"] = ib;
      ib.__name__ = "backend.WeekData";
      ib.createWeekFile = function () {
        return {
          songs: [["Bopeebo", "dad", [146, 113, 253]], ["Fresh", "dad", [146, 113, 253]], ["Dad Battle", "dad", [146, 113, 253]]],
          weekCharacters: ["dad", "bf", "gf"],
          weekBackground: "stage",
          weekBefore: "tutorial",
          storyName: "Your New Week",
          weekName: "Custom Week",
          freeplayColor: [146, 113, 253],
          startUnlocked: true,
          hiddenUntilUnlocked: false,
          hideStoryMode: false,
          hideFreeplay: false,
          difficulties: ""
        };
      };
      ib.reloadWeekFiles = function (a) {
        if (a == null) {
          a = false;
        }
        ib.weeksList = [];
        ib.weeksLoaded.h = Object.create(null);
        var b = ["assets/shared/"];
        var c = "weeks/weekList.txt";
        if (c == null) {
          c = "";
        }
        c = "assets/shared/" + c;
        var d = null;
        if (Q.exists(c)) {
          d = Q.getText(c);
        }
        if (d != null) {
          var e = w.trim(d).split("\n");
          c = 0;
          for (d = e.length; c < d;) {
            var f = c++;
            e[f] = w.trim(e[f]);
          }
        } else {
          e = [];
        }
        c = 0;
        for (d = e.length; c < d;) {
          f = c++;
          for (var k = 0, t = b.length; k < t;) {
            var n = k++;
            n = b[n] + "weeks/" + e[f] + ".json";
            if (!Object.prototype.hasOwnProperty.call(ib.weeksLoaded.h, e[f])) {
              n = ib.getWeekFile(n);
              if (n != null) {
                n = new ib(n, e[f]);
                if (n != null && (a == null || a && !n.hideStoryMode || !a && !n.hideFreeplay)) {
                  ib.weeksLoaded.h[e[f]] = n;
                  ib.weeksList.push(e[f]);
                }
              }
            }
          }
        }
      };
      ib.getWeekFile = function (a) {
        var b = null;
        if (Q.exists(a)) {
          b = sa.getText(a);
        }
        if (b != null && b.length > 0) {
          return JSON.parse(b);
        } else {
          return null;
        }
      };
      ib.getWeekFileName = function () {
        return ib.weeksList[A.storyWeek];
      };
      ib.getCurrentWeek = function () {
        return ib.weeksLoaded.h[ib.weeksList[A.storyWeek]];
      };
      ib.setDirectoryFromWeek = function (a) {
        Kd.currentModDirectory = "";
        if (a != null && a.folder != null && a.folder.length > 0) {
          Kd.currentModDirectory = a.folder;
        }
      };
      ib.prototype = {
        __class__: ib
      };
      function kh(a) {
        this._animations = new ua();
        this.timeScale = 1;
        this.frameIndex = -1;
        this._sprite = a;
      }
      g["flixel.animation.FlxAnimationController"] = kh;
      kh.__name__ = "flixel.animation.FlxAnimationController";
      kh.__interfaces__ = [rb];
      kh.prototype = {
        update: function (a) {
          if (this._curAnim != null) {
            this._curAnim.update(a * this.timeScale * h.animationTimeScale);
          } else if (this._prerotated != null) {
            this._prerotated.set_angle(this._sprite.angle);
          }
        },
        copyFrom: function (a) {
          this.destroyAnimations();
          var b = a._animations.h;
          var c = Object.keys(b);
          for (var d = c.length, e = 0; e < d;) {
            var f = b[c[e++]];
            this.add(f.name, f.frames, f.frameRate, f.looped, f.flipX, f.flipY);
          }
          if (a._prerotated != null) {
            this.createPrerotated();
          }
          if (a.get_name() != null) {
            this.set_name(a.get_name());
          }
          this.set_frameIndex(a.frameIndex);
          return this;
        },
        createPrerotated: function (a) {
          this.destroyAnimations();
          if (a == null) {
            a = this;
          }
          this._prerotated = new xk(a, a._sprite.bakedRotationAngle);
          this._prerotated.set_angle(this._sprite.angle);
        },
        destroyAnimations: function () {
          this.clearAnimations();
          this.clearPrerotated();
        },
        destroy: function () {
          this.destroyAnimations();
          this._sprite = this.callback = this._animations = null;
        },
        getFrameDuration: function (a) {
          return this._sprite.frames.frames[a].duration;
        },
        clearPrerotated: function () {
          if (this._prerotated != null) {
            this._prerotated.destroy();
          }
          this._prerotated = null;
        },
        clearAnimations: function () {
          if (this._animations != null) {
            var a;
            var b = Object.keys(this._animations.h);
            for (var c = b.length, d = 0; d < c;) {
              a = b[d++];
              a = this._animations.h[a];
              if (a != null) {
                a.destroy();
              }
            }
          }
          this._animations = new ua();
          this._curAnim = null;
        },
        add: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = 30;
          }
          if (this._sprite.get_numFrames() == 0) {
            h.log.advanced("Could not create animation: \"" + a + "\", this sprite has no frames", xa.WARNING, true);
          } else {
            var k = b;
            for (var t = false, n = k.length; n-- >= 0;) {
              if (k[n] >= this._sprite.get_numFrames()) {
                t = true;
                if (k == b) {
                  k = b.slice();
                }
                k.splice(n, 1);
              }
            }
            if (k.length > 0) {
              b = new Qh(this, a, k, c, d, e, f);
              this._animations.h[a] = b;
              if (t) {
                h.log.advanced("Could not add frames above " + (this._sprite.get_numFrames() - 1) + " to animation: \"" + a + "\"", xa.WARNING, true);
              }
            } else {
              h.log.advanced("Could not create animation: \"" + a + "\", no valid frames were given", xa.WARNING, true);
            }
          }
        },
        remove: function (a) {
          var b = this._animations.h[a];
          if (b != null) {
            var c = this._animations;
            if (Object.prototype.hasOwnProperty.call(c.h, a)) {
              delete c.h[a];
            }
            b.destroy();
          }
        },
        addByIndices: function (a, b, c, d, e, f, k, t) {
          if (t == null) {
            t = false;
          }
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = true;
          }
          if (e == null) {
            e = 30;
          }
          if (this._sprite.frames != null) {
            var n = [];
            this.byIndicesHelper(n, b, c, d);
            if (n.length > 0) {
              b = new Qh(this, a, n, e, f, k, t);
              this._animations.h[a] = b;
            }
          }
        },
        findSpriteFrame: function (a, b, c) {
          var d = this._sprite.frames.frames;
          for (var e = 0, f = d.length; e < f;) {
            var k = e++;
            var t = d[k].name;
            if (w.startsWith(t, a) && w.endsWith(t, c) && v.parseInt(t.substring(a.length, t.length - c.length)) == b) {
              return k;
            }
          }
          return -1;
        },
        addByPrefix: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = 30;
          }
          if (this._sprite.frames != null) {
            var k = [];
            this.findByPrefix(k, b);
            if (k.length > 0) {
              var t = [];
              this.byPrefixHelper(t, k, b);
              b = new Qh(this, a, t, c, d, e, f);
              this._animations.h[a] = b;
            } else {
              h.log.advanced("Could not create animation: \"" + a + "\", no frames were found with the prefix \"" + b + "\" ", xa.WARNING, true);
            }
          }
        },
        play: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          if (a == null) {
            if (this._curAnim != null) {
              this._curAnim.stop();
            }
            this._curAnim = null;
          }
          if (a == null || this._animations.h[a] == null) {
            h.log.advanced("No animation called \"" + a + "\"", xa.WARNING, true);
          } else {
            var e = false;
            var f = false;
            if (this._curAnim != null && a != this._curAnim.name) {
              e = this._curAnim.flipX;
              f = this._curAnim.flipY;
              this._curAnim.stop();
            }
            this._curAnim = this._animations.h[a];
            this._curAnim.play(b, c, d);
            if (e != this._curAnim.flipX || f != this._curAnim.flipY) {
              this._sprite.dirty = true;
            }
          }
        },
        byIndicesHelper: function (a, b, c, d) {
          for (var e = 0; e < c.length;) {
            var f = c[e];
            ++e;
            f = this.findSpriteFrame(b, f, d);
            if (f != -1) {
              a.push(f);
            }
          }
        },
        byPrefixHelper: function (a, b, c) {
          var d = b[0].name;
          var e = d.indexOf(".", c.length);
          d = d.substring(e == -1 ? d.length : e, d.length);
          pb.sortHelper(b, c.length, d == null ? 0 : d.length, true);
          for (c = 0; c < b.length;) {
            d = b[c];
            ++c;
            a.push(this._sprite.frames.frames.indexOf(d));
          }
        },
        findByPrefix: function (a, b, c) {
          c = 0;
          for (var d = this._sprite.frames.frames; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.name != null && w.startsWith(e.name, b)) {
              a.push(e);
            }
          }
          this.removeInvalidFrames(a);
        },
        removeInvalidFrames: function (a) {
          var b = [];
          for (var c = a.length; c-- > 0;) {
            if (a[c].parent.shader == null) {
              b.unshift(a.splice(c, 1)[0]);
            }
          }
          return b;
        },
        set_frameIndex: function (a) {
          if (this._sprite.frames != null && this._sprite.get_numFrames() > 0) {
            a %= this._sprite.get_numFrames();
            this._sprite.set_frame(this._sprite.frames.frames[a]);
            this.frameIndex = a;
            if (this.callback != null) {
              this.callback(this._curAnim != null ? this._curAnim.name : null, this._curAnim != null ? this._curAnim.curFrame : this.frameIndex, this.frameIndex);
            }
          }
          return this.frameIndex;
        },
        get_name: function () {
          var a = null;
          if (this._curAnim != null) {
            a = this._curAnim.name;
          }
          return a;
        },
        set_name: function (a) {
          this.play(a);
          return a;
        },
        get_finished: function () {
          var a = true;
          if (this._curAnim != null) {
            a = this._curAnim.finished;
          }
          return a;
        },
        __class__: kh,
        __properties__: {
          get_finished: "get_finished",
          set_name: "set_name",
          get_name: "get_name",
          set_frameIndex: "set_frameIndex"
        }
      };
      function lh(a) {
        this.followGlobalSpeed = true;
        kh.call(this, a);
      }
      g["backend.animation.PsychAnimationController"] = lh;
      lh.__name__ = "backend.animation.PsychAnimationController";
      lh.__super__ = kh;
      lh.prototype = q(kh.prototype, {
        update: function (a) {
          if (this._curAnim != null) {
            var b = this.timeScale;
            if (this.followGlobalSpeed) {
              b *= h.animationTimeScale;
            }
            this._curAnim.update(a * b);
          } else if (this._prerotated != null) {
            this._prerotated.set_angle(this._sprite.angle);
          }
        },
        __class__: lh
      });
      function mn() {
        this.firstFrame = false;
        this.cutsceneTime = 0;
        this.music = null;
        this.objects = [];
        this.endTime = 0;
        this.finishCallback = this.finishCallback2 = this.onStart = null;
        this.timedEvents = [];
        var a = this;
        Ea.call(this);
        this.timer(0, function () {
          if (a.music != null) {
            var b = h.sound;
            var c = D.returnSound("music", a.music, null);
            b.playMusic(c, 0, false);
            b = h.sound.music;
            if (b._channel == null) {
              b.play();
            }
            if (b.fadeTween != null) {
              b.fadeTween.cancel();
            }
            b.fadeTween = Da.num(0, 1, 1, {
              onComplete: null
            }, m(b, b.volumeTween));
          }
          if (a.onStart != null) {
            a.onStart();
          }
        });
        A.instance.add(this);
      }
      g["cutscenes.CutsceneHandler"] = mn;
      mn.__name__ = "cutscenes.CutsceneHandler";
      mn.__super__ = Ea;
      mn.prototype = q(Ea.prototype, {
        update: function (a) {
          Ea.prototype.update.call(this, a);
          if (h.game._state == A.instance && this.firstFrame) {
            this.cutsceneTime += a;
            if (this.endTime <= this.cutsceneTime) {
              this.finishCallback();
              if (this.finishCallback2 != null) {
                this.finishCallback2();
              }
              a = 0;
              for (var b = this.objects; a < b.length;) {
                var c = b[a];
                ++a;
                c.kill();
                A.instance.remove(c);
                c.destroy();
              }
              this.kill();
              this.destroy();
              A.instance.remove(this);
            }
            while (this.timedEvents.length > 0 && this.timedEvents[0][0] <= this.cutsceneTime) {
              this.timedEvents[0][1]();
              this.timedEvents.splice(0, 1);
            }
          } else {
            this.firstFrame = true;
          }
        },
        timer: function (a, b) {
          this.timedEvents.push([a, b]);
          this.timedEvents.sort(m(this, this.sortByTime));
        },
        sortByTime: function (a, b) {
          a = a[0];
          b = b[0];
          var c = 0;
          if (a < b) {
            c = -1;
          } else if (a > b) {
            c = 1;
          }
          return c;
        },
        __class__: mn
      });
      function $b(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        var e = Ha._pool.get();
        var f = 0;
        var k = 0;
        var t = 0;
        var n = 0;
        if (n == null) {
          n = 0;
        }
        if (t == null) {
          t = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        e.x = f;
        e.y = k;
        e.width = t;
        e.height = n;
        e._inPool = false;
        this._rect = e;
        f = e = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = W.pool.get().set(e, f);
        e._inPool = false;
        this._point = e;
        this.path = null;
        this.allowCollisions = 4369;
        this.touching = this.wasTouching = 0;
        this.maxAngular = 10000;
        this.angularVelocity = this.angularAcceleration = this.angularDrag = 0;
        this.immovable = false;
        this.moves = $b.defaultMoves;
        this.angle = 0;
        this.pixelPerfectPosition = true;
        this.x = this.y = 0;
        Ea.call(this);
        this.set_x(a);
        this.set_y(b);
        this.set_width(c);
        this.set_height(d);
        this.initVars();
      }
      g["flixel.FlxObject"] = $b;
      $b.__name__ = "flixel.FlxObject";
      $b.__super__ = Ea;
      $b.prototype = q(Ea.prototype, {
        initVars: function () {
          this.flixelType = 1;
          var a = this.x;
          var b = this.y;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          this.last = b;
          b = a = 1;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          this.scrollFactor = b;
          this.pixelPerfectPosition = $b.defaultPixelPerfectPosition;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          this.velocity = b;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          this.acceleration = b;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          this.drag = b;
          b = a = 10000;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          this.maxVelocity = b;
        },
        destroy: function () {
          Ea.prototype.destroy.call(this);
          this.velocity = ca.put(this.velocity);
          this.acceleration = ca.put(this.acceleration);
          this.drag = ca.put(this.drag);
          this.maxVelocity = ca.put(this.maxVelocity);
          this.scrollFactor = ca.put(this.scrollFactor);
          this.last = ca.put(this.last);
          this._point = ca.put(this._point);
          this._rect = ca.put(this._rect);
        },
        update: function (a) {
          var b = this.last;
          var c = this.x;
          var d = this.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          if (this.path != null && this.path.active) {
            this.path.update(a);
          }
          if (this.moves) {
            this.updateMotion(a);
          }
          this.wasTouching = this.touching;
          this.touching = 0;
        },
        updateMotion: function (a) {
          var b = (yk.computeVelocity(this.angularVelocity, this.angularAcceleration, this.angularDrag, this.maxAngular, a) - this.angularVelocity) * 0.5;
          this.angularVelocity += b;
          this.set_angle(this.angle + this.angularVelocity * a);
          this.angularVelocity += b;
          b = (yk.computeVelocity(this.velocity.x, this.acceleration.x, this.drag.x, this.maxVelocity.x, a) - this.velocity.x) * 0.5;
          this.velocity.set_x(this.velocity.x + b);
          var c = this.velocity.x * a;
          this.velocity.set_x(this.velocity.x + b);
          this.set_x(this.x + c);
          b = (yk.computeVelocity(this.velocity.y, this.acceleration.y, this.drag.y, this.maxVelocity.y, a) - this.velocity.y) * 0.5;
          this.velocity.set_y(this.velocity.y + b);
          c = this.velocity.y * a;
          this.velocity.set_y(this.velocity.y + b);
          this.set_y(this.y + c);
        },
        draw: function () {},
        overlaps: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          var d = Qa.resolveGroup(a);
          if (d != null) {
            var e = this;
            var f = b;
            var k = c;
            return d.any(function (a) {
              return e.overlaps(a, f, k);
            });
          }
          if (a.flixelType == 3) {
            return a.overlaps(this, b, c);
          }
          if (!b) {
            if (a.x + a.get_width() > this.x && a.x < this.x + this.get_width() && a.y + a.get_height() > this.y) {
              return a.y < this.y + this.get_height();
            } else {
              return false;
            }
          }
          if (c == null) {
            c = h.camera;
          }
          b = a.getScreenPosition(null, c);
          this.getScreenPosition(this._point, c);
          if (b.x + a.get_width() > this._point.x && b.x < this._point.x + this.get_width() && b.y + a.get_height() > this._point.y) {
            return b.y < this._point.y + this.get_height();
          } else {
            return false;
          }
        },
        overlapsPoint: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          if (!b) {
            if (a.x >= this.x && a.x < this.x + this.get_width() && a.y >= this.y) {
              return a.y < this.y + this.get_height();
            } else {
              return false;
            }
          }
          if (c == null) {
            c = h.camera;
          }
          b = a.x - c.scroll.x;
          var d = a.y - c.scroll.y;
          this.getScreenPosition(this._point, c);
          if (a._weak) {
            a.put();
          }
          if (b >= this._point.x && b < this._point.x + this.get_width() && d >= this._point.y) {
            return d < this._point.y + this.get_height();
          } else {
            return false;
          }
        },
        getScreenPosition: function (a, b) {
          if (a == null) {
            var c = 0;
            var d = 0;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a = W.pool.get().set(c, d);
            a._inPool = false;
          }
          if (b == null) {
            b = h.camera;
          }
          c = this.x;
          d = this.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (this.pixelPerfectPosition) {
            a.set_x(Math.floor(a.x));
            a.set_y(Math.floor(a.y));
          }
          c = b.scroll.x * this.scrollFactor.x;
          d = b.scroll.y * this.scrollFactor.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(a.x - c);
          a.set_y(a.y - d);
          return a;
        },
        getPosition: function (a) {
          if (a == null) {
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a = W.pool.get().set(b, c);
            a._inPool = false;
          }
          b = this.x;
          c = this.y;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          return a;
        },
        getMidpoint: function (a) {
          if (a == null) {
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a = W.pool.get().set(b, c);
            a._inPool = false;
          }
          b = this.x + this.get_width() * 0.5;
          c = this.y + this.get_height() * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          return a;
        },
        isOnScreen: function (a) {
          if (a == null) {
            a = h.camera;
          }
          this.getScreenPosition(this._point, a);
          var b = this._point;
          var c = this.get_width();
          var d = this.get_height();
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a = b.x + c > a.viewMarginX && b.x < a.width - a.viewMarginX && b.y + d > a.viewMarginY && b.y < a.height - a.viewMarginY;
          if (b._weak) {
            b.put();
          }
          return a;
        },
        isPixelPerfectRender: function (a) {
          if (a == null) {
            a = h.camera;
          }
          if (this.pixelPerfectRender == null) {
            return a.pixelPerfectRender;
          } else {
            return this.pixelPerfectRender;
          }
        },
        setPosition: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.set_x(a);
          this.set_y(b);
        },
        toString: function () {
          var a = this.x;
          var b = Vc._pool.get();
          b.label = "x";
          b.value = a;
          a = this.y;
          var c = Vc._pool.get();
          c.label = "y";
          c.value = a;
          a = this.get_width();
          var d = Vc._pool.get();
          d.label = "w";
          d.value = a;
          a = this.get_height();
          var e = Vc._pool.get();
          e.label = "h";
          e.value = a;
          a = this.visible;
          var f = Vc._pool.get();
          f.label = "visible";
          f.value = a;
          a = this.velocity;
          var k = Vc._pool.get();
          k.label = "velocity";
          k.value = a;
          return Ub.getDebugString([b, c, d, e, f, k]);
        },
        set_x: function (a) {
          return this.x = a;
        },
        set_y: function (a) {
          return this.y = a;
        },
        set_width: function (a) {
          return this.width = a;
        },
        set_height: function (a) {
          return this.height = a;
        },
        get_width: function () {
          return this.width;
        },
        get_height: function () {
          return this.height;
        },
        set_angle: function (a) {
          return this.angle = a;
        },
        set_moves: function (a) {
          return this.moves = a;
        },
        set_immovable: function (a) {
          return this.immovable = a;
        },
        set_allowCollisions: function (a) {
          return this.allowCollisions = a;
        },
        __class__: $b,
        __properties__: q(Ea.prototype.__properties__, {
          set_allowCollisions: "set_allowCollisions",
          set_immovable: "set_immovable",
          set_moves: "set_moves",
          set_angle: "set_angle",
          set_height: "set_height",
          get_height: "get_height",
          set_width: "set_width",
          get_width: "get_width",
          set_y: "set_y",
          set_x: "set_x"
        })
      });
      function F(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._angleChanged = true;
        this._cosAngle = 1;
        this._sinAngle = 0;
        this._facingHorizontalMult = this._facingVerticalMult = 1;
        this.useColorTransform = false;
        this.color = 16777215;
        this.flipX = this.flipY = false;
        this.alpha = 1;
        this.frameWidth = this.frameHeight = this.bakedRotationAngle = 0;
        this.dirty = true;
        this.antialiasing = F.defaultAntialiasing;
        this.useFramePixels = true;
        $b.call(this, a, b);
        this.set_useFramePixels(h.renderBlit);
        if (c != null) {
          this.loadGraphic(c);
        }
      }
      g["flixel.FlxSprite"] = F;
      F.__name__ = "flixel.FlxSprite";
      F.__super__ = $b;
      F.prototype = q($b.prototype, {
        initVars: function () {
          $b.prototype.initVars.call(this);
          this.animation = new kh(this);
          this._flashPoint = new lb();
          this._flashRect = new da();
          this._flashRect2 = new da();
          this._flashPointZero = new lb();
          var a = 0;
          var b = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          this.offset = b;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          this.origin = b;
          b = a = 1;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          this.scale = b;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          this._halfSize = b;
          this._matrix = new Rc();
          this.colorTransform = new Lb();
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          this._scaledOrigin = b;
        },
        destroy: function () {
          $b.prototype.destroy.call(this);
          this.animation = ca.destroy(this.animation);
          this.offset = ca.put(this.offset);
          this.origin = ca.put(this.origin);
          this.scale = ca.put(this.scale);
          this._halfSize = ca.put(this._halfSize);
          this._scaledOrigin = ca.put(this._scaledOrigin);
          this.framePixels = ca.dispose(this.framePixels);
          this.colorTransform = this._matrix = this._flashPointZero = this._flashRect2 = this._flashRect = this._flashPoint = null;
          this.set_blend(null);
          this.set_frames(null);
          this.set_graphic(null);
          this._frame = ca.destroy(this._frame);
          this._frameGraphic = ca.destroy(this._frameGraphic);
          this.shader = null;
        },
        loadGraphic: function (a, b, c, d, e, f) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          a = h.bitmap.add(a, e, f);
          if (a == null) {
            return this;
          }
          if (c == 0) {
            c = b ? a.height : a.width;
            if (c > a.width) {
              c = a.width;
            }
          } else if (c > a.width) {
            h.log.advanced("frameWidth:" + c + " is larger than the graphic's width:" + a.width, xa.WARNING, true);
          }
          if (d == 0) {
            d = b ? c : a.height;
            if (d > a.height) {
              d = a.height;
            }
          } else if (d > a.height) {
            h.log.advanced("frameHeight:" + d + " is larger than the graphic's height:" + a.height, xa.WARNING, true);
          }
          if (b) {
            b = c;
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            d = W.pool.get().set(b, d);
            d._inPool = false;
            this.set_frames(Fg.fromGraphic(a, d));
          } else {
            this.set_frames(a.get_imageFrame());
          }
          return this;
        },
        makeGraphic: function (a, b, c, d, e) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = -1;
          }
          a = h.bitmap.create(a, b, c, d, e);
          this.set_frames(a.get_imageFrame());
          return this;
        },
        graphicLoaded: function () {},
        setGraphicSize: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (!(a <= 0) || !(b <= 0)) {
            var c = a / this.frameWidth;
            var d = b / this.frameHeight;
            var e = this.scale;
            var f = c;
            var k = d;
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            e.set_x(f);
            e.set_y(k);
            if (a <= 0) {
              this.scale.set_x(d);
            } else if (b <= 0) {
              this.scale.set_y(c);
            }
          }
        },
        updateHitbox: function () {
          this.set_width(Math.abs(this.scale.x) * this.frameWidth);
          this.set_height(Math.abs(this.scale.y) * this.frameHeight);
          var a = this.offset;
          var b = (this.get_width() - this.frameWidth) * -0.5;
          var c = (this.get_height() - this.frameHeight) * -0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          a = this.origin;
          b = this.frameWidth * 0.5;
          c = this.frameHeight * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
        },
        resetHelpers: function () {
          if (this.frame != null) {
            this.frameWidth = this.frame.sourceSize.x | 0;
            this.frameHeight = this.frame.sourceSize.y | 0;
          }
          var a = this._halfSize;
          var b = this.frameWidth * 0.5;
          var c = this.frameHeight * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this._flashRect.x = 0;
          this._flashRect.y = 0;
          this._flashRect.width = this.frameWidth;
          this._flashRect.height = this.frameHeight;
          this.set_width(this.frameWidth);
          this.set_height(this.frameHeight);
          this._flashRect2.x = 0;
          this._flashRect2.y = 0;
          if (this.graphic != null) {
            this._flashRect2.width = this.graphic.width;
            this._flashRect2.height = this.graphic.height;
          }
          a = this.origin;
          b = this.frameWidth * 0.5;
          c = this.frameHeight * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          if (h.renderBlit) {
            this.dirty = true;
            this.updateFramePixels();
          }
        },
        update: function (a) {
          $b.prototype.update.call(this, a);
          this.updateAnimation(a);
        },
        updateAnimation: function (a) {
          this.animation.update(a);
        },
        checkEmptyFrame: function () {
          if (this._frame == null) {
            this.loadGraphic("flixel/images/logo/default.png");
          } else if (this.graphic != null && this.graphic.shader == null) {
            var a = this.get_width();
            var b = this.get_height();
            h.log.advanced("Cannot render a destroyed graphic, the placeholder image will be used instead", xa.ERROR, true);
            this.loadGraphic("flixel/images/logo/default.png");
            this.set_width(a);
            this.set_height(b);
          }
        },
        draw: function () {
          this.checkEmptyFrame();
          if (this.alpha != 0 && this._frame.type != 2) {
            if (this.dirty) {
              this.calcFrame(this.useFramePixels);
            }
            for (var a = 0, b = this.getCamerasLegacy(); a < b.length;) {
              var c = b[a];
              ++a;
              if (c.visible && c.exists && this.isOnScreen(c)) {
                if (this.isSimpleRender(c)) {
                  this.drawSimple(c);
                } else {
                  this.drawComplex(c);
                }
              }
            }
          }
        },
        drawSimple: function (a) {
          var b = this.getScreenPosition(this._point, a);
          var c = this.offset;
          var d = c.x;
          var e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(b.x - d);
          b.set_y(b.y - e);
          if (c._weak) {
            c.put();
          }
          if (this.isPixelPerfectRender(a)) {
            b = this._point;
            b.set_x(Math.floor(b.x));
            b.set_y(Math.floor(b.y));
          }
          b = this._point;
          c = this._flashPoint;
          if (c == null) {
            c = new lb();
          }
          c.x = b.x;
          c.y = b.y;
          a.copyPixels(this._frame, this.framePixels, this._flashRect, this._flashPoint, this.colorTransform, this.blend, this.antialiasing);
        },
        drawComplex: function (a) {
          var b = this.flipX != this._frame.flipX;
          var c = this.flipY != this._frame.flipY;
          this._frame.prepareMatrix(this._matrix, 0, this.animation._curAnim != null ? b != this.animation._curAnim.flipX : b, this.animation._curAnim != null ? c != this.animation._curAnim.flipY : c);
          this._matrix.translate(-this.origin.x, -this.origin.y);
          this._matrix.scale(this.scale.x, this.scale.y);
          if (this.bakedRotationAngle <= 0 && (this._angleChanged && (b = Math.PI / 180 * this.angle, this._sinAngle = Math.sin(b), this._cosAngle = Math.cos(b), this._angleChanged = false), this.angle != 0)) {
            b = this._matrix;
            c = this._cosAngle;
            var d = this._sinAngle;
            var e = b.a * c - b.b * d;
            b.b = b.a * d + b.b * c;
            b.a = e;
            e = b.c * c - b.d * d;
            b.d = b.c * d + b.d * c;
            b.c = e;
            e = b.tx * c - b.ty * d;
            b.ty = b.tx * d + b.ty * c;
            b.tx = e;
          }
          b = this.getScreenPosition(this._point, a);
          c = this.offset;
          d = c.x;
          e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(b.x - d);
          b.set_y(b.y - e);
          b = c;
          if (b._weak) {
            b.put();
          }
          b = this._point;
          d = this.origin.x;
          e = this.origin.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(b.x + d);
          b.set_y(b.y + e);
          this._matrix.translate(this._point.x, this._point.y);
          if (this.isPixelPerfectRender(a)) {
            this._matrix.tx = Math.floor(this._matrix.tx);
            this._matrix.ty = Math.floor(this._matrix.ty);
          }
          a.drawPixels(this._frame, this.framePixels, this._matrix, this.colorTransform, this.blend, this.antialiasing, this.shader);
        },
        stamp: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.drawFrame();
          if (this.graphic == null || a.graphic == null) {
            throw G.thrown("Cannot stamp to or from a FlxSprite with no graphics.");
          }
          var d = a.framePixels;
          if (this.isSimpleRenderBlit()) {
            this._flashPoint.x = b + this.frame.frame.x;
            this._flashPoint.y = c + this.frame.frame.y;
            this._flashRect2.width = d.width;
            this._flashRect2.height = d.height;
            this.graphic.bitmap.copyPixels(d, this._flashRect2, this._flashPoint, null, null, true);
            this._flashRect2.width = this.graphic.bitmap.width;
            this._flashRect2.height = this.graphic.bitmap.height;
          } else {
            this._matrix.identity();
            this._matrix.translate(-a.origin.x, -a.origin.y);
            this._matrix.scale(a.scale.x, a.scale.y);
            if (a.angle != 0) {
              this._matrix.rotate(Math.PI / 180 * a.angle);
            }
            this._matrix.translate(b + this.frame.frame.x + a.origin.x, c + this.frame.frame.y + a.origin.y);
            this.graphic.bitmap.draw(d, this._matrix, null, a.blend, null, a.antialiasing);
          }
          if (h.renderBlit) {
            this.dirty = true;
            this.calcFrame();
          }
        },
        drawFrame: function (a) {
          if (a == null) {
            a = false;
          }
          if (h.renderBlit) {
            if (a || this.dirty) {
              this.dirty = true;
              this.calcFrame();
            }
          } else {
            this.dirty = true;
            this.calcFrame(true);
          }
        },
        centerOffsets: function (a) {
          if (a == null) {
            a = false;
          }
          this.offset.set_x((this.frameWidth - this.get_width()) * 0.5);
          this.offset.set_y((this.frameHeight - this.get_height()) * 0.5);
          if (a) {
            this.set_x(this.x + this.offset.x);
            this.set_y(this.y + this.offset.y);
          }
        },
        updateColorTransform: function () {
          if (this.colorTransform != null) {
            if (this.useColorTransform = this.alpha != 1 || this.color != 16777215) {
              Xe.setMultipliers(this.colorTransform, (this.color >> 16 & 255) / 255, (this.color >> 8 & 255) / 255, (this.color & 255) / 255, this.alpha);
            } else {
              Xe.setMultipliers(this.colorTransform, 1, 1, 1, 1);
            }
            this.dirty = true;
          }
        },
        pixelsOverlapPoint: function (a, b, c) {
          if (b == null) {
            b = 255;
          }
          a = this.getPixelAt(a, c);
          if (a != null) {
            return (a >> 24 & 255) * this.alpha >= b;
          } else {
            return false;
          }
        },
        getPixelAt: function (a, b) {
          this.transformWorldToPixels(a, b, this._point);
          if (this._point.x >= 0 && this._point.x <= this.frameWidth && this._point.y >= 0 && this._point.y <= this.frameHeight) {
            return this.updateFramePixels().getPixel32(this._point.x | 0, this._point.y | 0);
          } else {
            return null;
          }
        },
        transformWorldToPixels: function (a, b, c) {
          if (b == null) {
            b = h.camera;
          }
          var d = a.x - b.scroll.x;
          var e = a.y - b.scroll.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          d = W.pool.get().set(d, e);
          d._inPool = false;
          d._weak = true;
          if (a._weak) {
            a.put();
          }
          return this.transformScreenToPixels(d, b, c);
        },
        transformScreenToPixels: function (a, b, c) {
          c = this.getScreenPosition(c, b);
          b = a.x;
          var d = a.y;
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          c.set_x(c.x - b);
          c.set_y(c.y - d);
          c.set_x(c.x * -1);
          c.set_y(c.y * -1);
          var e = this.offset;
          b = e.x;
          d = e.y;
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          c.set_x(c.x + b);
          c.set_y(c.y + d);
          b = e;
          if (b._weak) {
            b.put();
          }
          e = this.origin;
          b = e.x;
          d = e.y;
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          c.set_x(c.x - b);
          c.set_y(c.y - d);
          b = e;
          if (b._weak) {
            b.put();
          }
          b = 1 / this.scale.x;
          d = 1 / this.scale.y;
          if (d == null) {
            d = b;
          }
          c.set_x(c.x * b);
          c.set_y(c.y * d);
          b = (zk.get_radians(c) * (180 / Math.PI) - this.angle) * (Math.PI / 180);
          d = Math.sqrt(c.x * c.x + c.y * c.y);
          c.set_x(d * Math.cos(b));
          c.set_y(d * Math.sin(b));
          e = this.origin;
          b = e.x;
          d = e.y;
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          c.set_x(c.x + b);
          c.set_y(c.y + d);
          b = e;
          if (b._weak) {
            b.put();
          }
          b = a;
          if (b._weak) {
            b.put();
          }
          return c;
        },
        calcFrame: function (a) {
          if (a == null) {
            a = false;
          }
          this.checkEmptyFrame();
          if (!h.renderTile || !!a) {
            this.updateFramePixels();
          }
        },
        updateFramePixels: function () {
          if (this._frame == null || !this.dirty) {
            return this.framePixels;
          }
          if (h.renderTile && this._frameGraphic != null) {
            this.dirty = false;
            return this.framePixels;
          }
          var a = this.flipX != this._frame.flipX;
          a = this.animation._curAnim != null ? a != this.animation._curAnim.flipX : a;
          var b = this.flipY != this._frame.flipY;
          b = this.animation._curAnim != null ? b != this.animation._curAnim.flipY : b;
          this.framePixels = a || b || this._frame.type != 0 ? this._frame.paintRotatedAndFlipped(this.framePixels, this._flashPointZero, 0, a, b, false, true) : this._frame.paint(this.framePixels, this._flashPointZero, false, true);
          if (this.useColorTransform) {
            this.framePixels.colorTransform(this._flashRect, this.colorTransform);
          }
          if (h.renderTile && this.useFramePixels) {
            this._frameGraphic = ca.destroy(this._frameGraphic);
            this._frameGraphic = Zb.fromBitmapData(this.framePixels, false, null, false);
            this._frame = this._frameGraphic.get_imageFrame().get_frame().copyTo(this._frame);
          }
          this.dirty = false;
          return this.framePixels;
        },
        getGraphicMidpoint: function (a) {
          if (a == null) {
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a = W.pool.get().set(b, c);
            a._inPool = false;
          }
          b = this.x + this.frameWidth * 0.5 * this.scale.x;
          c = this.y + this.frameHeight * 0.5 * this.scale.y;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          return a;
        },
        isOnScreen: function (a) {
          if (a == null) {
            a = h.camera;
          }
          var b = this.getScreenBounds(this._rect, a);
          a = b.x + b.width > a.viewMarginX && b.x < a.width - a.viewMarginX && b.y + b.height > a.viewMarginY && b.y < a.height - a.viewMarginY;
          if (b._weak && !b._inPool) {
            b._inPool = true;
            b._weak = false;
            Ha._pool.putUnsafe(b);
          }
          return a;
        },
        isSimpleRender: function (a) {
          if (h.renderTile) {
            return false;
          } else {
            return this.isSimpleRenderBlit(a);
          }
        },
        isSimpleRenderBlit: function (a) {
          var b = (this.angle == 0 || this.bakedRotationAngle > 0) && this.scale.x == 1 && this.scale.y == 1 && this.blend == null;
          return b = b && (a != null ? this.isPixelPerfectRender(a) : this.pixelPerfectRender);
        },
        getScreenBounds: function (a, b) {
          if (a == null) {
            a = Ha._pool.get();
            var c = 0;
            var d = 0;
            var e = 0;
            var f = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.x = c;
            a.y = d;
            a.width = e;
            a.height = f;
            a._inPool = false;
          }
          if (b == null) {
            b = h.camera;
          }
          a.x = this.x;
          a.y = this.y;
          if (this.pixelPerfectPosition) {
            a.x = Math.floor(a.x);
            a.y = Math.floor(a.y);
            a.width = Math.floor(a.width);
            a.height = Math.floor(a.height);
          }
          f = this._scaledOrigin;
          c = this.origin.x * this.scale.x;
          d = this.origin.y * this.scale.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          f.set_x(c);
          f.set_y(d);
          a.x += -(b.scroll.x * this.scrollFactor.x | 0) - this.offset.x + this.origin.x - this._scaledOrigin.x;
          a.y += -(b.scroll.y * this.scrollFactor.y | 0) - this.offset.y + this.origin.y - this._scaledOrigin.y;
          if (this.isPixelPerfectRender(b)) {
            a.x = Math.floor(a.x);
            a.y = Math.floor(a.y);
            a.width = Math.floor(a.width);
            a.height = Math.floor(a.height);
          }
          f = this.frameHeight * Math.abs(this.scale.y);
          a.width = this.frameWidth * Math.abs(this.scale.x);
          a.height = f;
          return a.getRotatedBounds(this.angle, this._scaledOrigin, a);
        },
        get_pixels: function () {
          if (this.graphic == null) {
            return null;
          } else {
            return this.graphic.bitmap;
          }
        },
        set_pixels: function (a) {
          var b = h.bitmap.findKeyForBitmap(a);
          if (b == null) {
            b = h.bitmap.getUniqueKey();
            this.set_graphic(h.bitmap.add(a, false, b));
          } else {
            this.set_graphic(h.bitmap._cache.h[b]);
          }
          this.set_frames(this.graphic.get_imageFrame());
          return a;
        },
        set_frame: function (a) {
          this.frame = a;
          if (this.frame != null) {
            if (this.frame != null) {
              this.frameWidth = this.frame.sourceSize.x | 0;
              this.frameHeight = this.frame.sourceSize.y | 0;
            }
            a = this._halfSize;
            var b = this.frameWidth * 0.5;
            var c = this.frameHeight * 0.5;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            this._flashRect.x = 0;
            this._flashRect.y = 0;
            this._flashRect.width = this.frameWidth;
            this._flashRect.height = this.frameHeight;
            this.dirty = true;
          } else if (this.frames != null && this.frames.frames != null && this.get_numFrames() > 0) {
            this.frame = this.frames.frames[0];
            this.dirty = true;
          } else {
            return null;
          }
          if (h.renderTile) {
            this._frameGraphic = ca.destroy(this._frameGraphic);
          }
          this._frame = this.clipRect != null ? this.frame.clipTo(this.clipRect, this._frame) : this.frame.copyTo(this._frame);
          return this.frame;
        },
        set_alpha: function (a) {
          if (this.alpha == a) {
            return a;
          }
          a = a < 0 ? 0 : a;
          this.alpha = a > 1 ? 1 : a;
          this.updateColorTransform();
          return this.alpha;
        },
        set_color: function (a) {
          if (this.color == a) {
            return a;
          }
          this.color = a;
          this.updateColorTransform();
          return this.color;
        },
        set_angle: function (a) {
          var b = this.angle != a;
          a = $b.prototype.set_angle.call(this, a);
          if (b) {
            this._angleChanged = true;
            this.animation.update(0);
          }
          return a;
        },
        set_blend: function (a) {
          return this.blend = a;
        },
        set_graphic: function (a) {
          if (this.graphic != a) {
            if (a != null) {
              a.incrementUseCount();
            }
            if (this.graphic != null) {
              this.graphic.decrementUseCount();
            }
            this.graphic = a;
          }
          return a;
        },
        set_clipRect: function (a) {
          if (a != null) {
            a.x = Math.round(a.x);
            a.y = Math.round(a.y);
            a.width = Math.round(a.width);
            a.height = Math.round(a.height);
            this.clipRect = a;
          } else {
            this.clipRect = null;
          }
          if (this.frames != null) {
            this.set_frame(this.frames.frames[this.animation.frameIndex]);
          }
          return a;
        },
        set_frames: function (a) {
          if (this.animation != null) {
            this.animation.destroyAnimations();
          }
          if (a != null) {
            this.set_graphic(a.parent);
            this.frames = a;
            this.set_frame(this.frames.frames[0]);
            this.resetHelpers();
            this.bakedRotationAngle = 0;
            this.animation.set_frameIndex(0);
            this.graphicLoaded();
          } else {
            this.frames = null;
            this.set_frame(null);
            this.set_graphic(null);
          }
          return a;
        },
        get_numFrames: function () {
          if (this.frames != null) {
            return this.frames.frames.length;
          } else {
            return 0;
          }
        },
        set_flipX: function (a) {
          if (h.renderTile) {
            this._facingHorizontalMult = a ? -1 : 1;
          }
          this.dirty = this.flipX != a || this.dirty;
          return this.flipX = a;
        },
        set_flipY: function (a) {
          if (h.renderTile) {
            this._facingVerticalMult = a ? -1 : 1;
          }
          this.dirty = this.flipY != a || this.dirty;
          return this.flipY = a;
        },
        set_antialiasing: function (a) {
          return this.antialiasing = a;
        },
        set_useFramePixels: function (a) {
          if (h.renderTile) {
            if (a != this.useFramePixels) {
              this.useFramePixels = a;
              this.set_frame(this.frame);
              if (a) {
                this.updateFramePixels();
              }
            }
            return a;
          } else {
            return this.useFramePixels = true;
          }
        },
        __class__: F,
        __properties__: q($b.prototype.__properties__, {
          set_clipRect: "set_clipRect",
          set_color: "set_color",
          set_blend: "set_blend",
          set_flipY: "set_flipY",
          set_flipX: "set_flipX",
          set_alpha: "set_alpha",
          set_graphic: "set_graphic",
          set_frames: "set_frames",
          get_numFrames: "get_numFrames",
          set_frame: "set_frame",
          set_pixels: "set_pixels",
          get_pixels: "get_pixels",
          set_antialiasing: "set_antialiasing",
          set_useFramePixels: "set_useFramePixels"
        })
      });
      function La(a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.directAlpha = this._skipTransformChildren = false;
        this.initGroup(c);
        F.call(this, a, b);
      }
      g["flixel.group.FlxTypedSpriteGroup"] = La;
      La.__name__ = "flixel.group.FlxTypedSpriteGroup";
      La.__super__ = F;
      La.prototype = q(F.prototype, {
        transformChildren_flixel_math_FlxRect: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_flixel_math_FlxPoint: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_openfl_display_BlendMode: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_Array_flixel_FlxCamera: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        multiTransformChildren_Float: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            var c = a.length;
            if (!(c > b.length)) {
              var d;
              for (var e = 0, f = this.group.members; e < f.length;) {
                var k = f[e];
                ++e;
                if (k != null && k.exists) {
                  for (var t = 0, n = c; t < n;) {
                    var h = t++;
                    d = a[h];
                    d(k, b[h]);
                  }
                }
              }
            }
          }
        },
        transformChildren_Bool: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_Int: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_Float: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        initGroup: function (a) {
          this.set_group(new Qa(a));
        },
        initVars: function () {
          this.flixelType = 4;
          this.offset = new mh(m(this, this.offsetCallback));
          this.origin = new mh(m(this, this.originCallback));
          this.scale = new mh(m(this, this.scaleCallback));
          this.scrollFactor = new mh(m(this, this.scrollFactorCallback));
          var a = this.scale;
          var b = 1;
          var c = 1;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          a = this.scrollFactor;
          c = b = 1;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          c = W.pool.get().set(b, c);
          c._inPool = false;
          this.velocity = c;
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          c = W.pool.get().set(b, c);
          c._inPool = false;
          this.acceleration = c;
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          c = W.pool.get().set(b, c);
          c._inPool = false;
          this.drag = c;
          c = b = 10000;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a = b;
          if (c == null) {
            c = 0;
          }
          if (a == null) {
            a = 0;
          }
          c = W.pool.get().set(a, c);
          c._inPool = false;
          this.maxVelocity = c;
        },
        destroy: function () {
          this.offset = ca.destroy(this.offset);
          this.origin = ca.destroy(this.origin);
          this.scale = ca.destroy(this.scale);
          this.scrollFactor = ca.destroy(this.scrollFactor);
          this.group = ca.destroy(this.group);
          F.prototype.destroy.call(this);
        },
        isOnScreen: function (a) {
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.exists && d.visible && d.isOnScreen(a)) {
              return true;
            }
          }
          return false;
        },
        overlapsPoint: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          var d = false;
          for (var e = 0, f = this.group.members; e < f.length;) {
            var k = f[e];
            ++e;
            if (k != null && k.exists && k.visible) {
              d = d || k.overlapsPoint(a, b, c);
            }
          }
          return d;
        },
        pixelsOverlapPoint: function (a, b, c) {
          if (b == null) {
            b = 255;
          }
          var d = false;
          for (var e = 0, f = this.group.members; e < f.length;) {
            var k = f[e];
            ++e;
            if (k != null && k.exists && k.visible) {
              d = d || k.pixelsOverlapPoint(a, b, c);
            }
          }
          return d;
        },
        update: function (a) {
          this.group.update(a);
          if (this.path != null && this.path.active) {
            this.path.update(a);
          }
          if (this.moves) {
            this.updateMotion(a);
          }
        },
        draw: function () {
          this.group.draw();
        },
        add: function (a) {
          this.preAdd(a);
          return this.group.add(a);
        },
        preAdd: function (a) {
          a.set_x(a.x + this.x);
          a.set_y(a.y + this.y);
          a.set_alpha(a.alpha * this.alpha);
          var b = a.scrollFactor;
          var c = this.scrollFactor;
          var d = c.x;
          var e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(d);
          b.set_y(e);
          b = c;
          if (b._weak) {
            b.put();
          }
          a.set_cameras(this._cameras);
          if (this.clipRect != null) {
            b = this.clipRect;
            if (b == null) {
              a.set_clipRect(null);
            } else {
              e = b.x - a.x + this.x;
              var f = b.y - a.y + this.y;
              c = b.width;
              d = b.height;
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              b = Ha._pool.get();
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              b.x = e;
              b.y = f;
              b.width = c;
              b.height = d;
              b._inPool = false;
              a.set_clipRect(b);
            }
          }
        },
        remove: function (a, b) {
          if (b == null) {
            b = false;
          }
          a.set_x(a.x - this.x);
          a.set_y(a.y - this.y);
          a.set_cameras(null);
          return this.group.remove(a, b);
        },
        kill: function () {
          this._skipTransformChildren = true;
          F.prototype.kill.call(this);
          this._skipTransformChildren = false;
          this.group.kill();
        },
        revive: function () {
          this._skipTransformChildren = true;
          F.prototype.revive.call(this);
          this._skipTransformChildren = false;
          this.group.revive();
        },
        setPosition: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          var c = a - this.x;
          var d = b - this.y;
          this.multiTransformChildren_Float([m(this, this.xTransform), m(this, this.yTransform)], [c, d]);
          this._skipTransformChildren = true;
          this.set_x(a);
          this.set_y(b);
          this._skipTransformChildren = false;
        },
        set_cameras: function (a) {
          if (this._cameras != a) {
            this.transformChildren_Array_flixel_FlxCamera(m(this, this.camerasTransform), a);
          }
          return F.prototype.set_cameras.call(this, a);
        },
        set_exists: function (a) {
          if (this.exists != a) {
            this.transformChildren_Bool(m(this, this.existsTransform), a);
          }
          return F.prototype.set_exists.call(this, a);
        },
        set_visible: function (a) {
          if (this.exists && this.visible != a) {
            this.transformChildren_Bool(m(this, this.visibleTransform), a);
          }
          return F.prototype.set_visible.call(this, a);
        },
        set_active: function (a) {
          if (this.exists && this.active != a) {
            this.transformChildren_Bool(m(this, this.activeTransform), a);
          }
          return F.prototype.set_active.call(this, a);
        },
        set_alive: function (a) {
          if (this.alive != a) {
            this.transformChildren_Bool(m(this, this.aliveTransform), a);
          }
          return F.prototype.set_alive.call(this, a);
        },
        set_x: function (a) {
          if (this.exists && this.x != a) {
            this.transformChildren_Float(m(this, this.xTransform), a - this.x);
          }
          return this.x = a;
        },
        set_y: function (a) {
          if (this.exists && this.y != a) {
            this.transformChildren_Float(m(this, this.yTransform), a - this.y);
          }
          return this.y = a;
        },
        set_angle: function (a) {
          if (this.exists && this.angle != a) {
            this.transformChildren_Float(m(this, this.angleTransform), a - this.angle);
          }
          return this.angle = a;
        },
        set_alpha: function (a) {
          a = a < 0 ? 0 : a;
          a = a > 1 ? 1 : a;
          if (this.exists && this.alpha != a) {
            var b = this.alpha > 0 ? a / this.alpha : 0;
            if (this.directAlpha || this.alpha == 0) {
              this.transformChildren_Float(m(this, this.directAlphaTransform), a);
            } else {
              this.transformChildren_Float(m(this, this.alphaTransform), b);
            }
          }
          return this.alpha = a;
        },
        set_flipX: function (a) {
          if (this.exists && this.flipX != a) {
            this.transformChildren_Bool(m(this, this.flipXTransform), a);
          }
          return this.flipX = a;
        },
        set_flipY: function (a) {
          if (this.exists && this.flipY != a) {
            this.transformChildren_Bool(m(this, this.flipYTransform), a);
          }
          return this.flipY = a;
        },
        set_moves: function (a) {
          if (this.exists && this.moves != a) {
            this.transformChildren_Bool(m(this, this.movesTransform), a);
          }
          return this.moves = a;
        },
        set_immovable: function (a) {
          if (this.exists && this.immovable != a) {
            this.transformChildren_Bool(m(this, this.immovableTransform), a);
          }
          return this.immovable = a;
        },
        set_color: function (a) {
          if (this.exists && this.color != a) {
            this.transformChildren_Int(m(this, this.gColorTransform), a);
          }
          return this.color = a;
        },
        set_blend: function (a) {
          if (this.exists && this.blend != a) {
            this.transformChildren_openfl_display_BlendMode(m(this, this.blendTransform), a);
          }
          return this.blend = a;
        },
        set_clipRect: function (a) {
          if (this.exists) {
            this.transformChildren_flixel_math_FlxRect(m(this, this.clipRectTransform), a);
          }
          return F.prototype.set_clipRect.call(this, a);
        },
        set_width: function (a) {
          return a;
        },
        get_width: function () {
          if (this.group.length == 0) {
            return 0;
          } else {
            return this.findMaxXHelper() - this.findMinXHelper();
          }
        },
        findMinX: function () {
          if (this.group.length == 0) {
            return this.x;
          } else {
            return this.findMinXHelper();
          }
        },
        findMinXHelper: function () {
          var a = Infinity;
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              d = d.flixelType == 4 ? d.findMinX() : d.x;
              if (d < a) {
                a = d;
              }
            }
          }
          return a;
        },
        findMaxX: function () {
          if (this.group.length == 0) {
            return this.x;
          } else {
            return this.findMaxXHelper();
          }
        },
        findMaxXHelper: function () {
          var a = -Infinity;
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              d = d.flixelType == 4 ? d.findMaxX() : d.x + d.get_width();
              if (d > a) {
                a = d;
              }
            }
          }
          return a;
        },
        set_height: function (a) {
          return a;
        },
        get_height: function () {
          if (this.group.length == 0) {
            return 0;
          } else {
            return this.findMaxYHelper() - this.findMinYHelper();
          }
        },
        findMinY: function () {
          if (this.group.length == 0) {
            return this.y;
          } else {
            return this.findMinYHelper();
          }
        },
        findMinYHelper: function () {
          var a = Infinity;
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              d = d.flixelType == 4 ? d.findMinY() : d.y;
              if (d < a) {
                a = d;
              }
            }
          }
          return a;
        },
        findMaxY: function () {
          if (this.group.length == 0) {
            return this.y;
          } else {
            return this.findMaxYHelper();
          }
        },
        findMaxYHelper: function () {
          var a = -Infinity;
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              d = d.flixelType == 4 ? d.findMaxY() : d.y + d.get_height();
              if (d > a) {
                a = d;
              }
            }
          }
          return a;
        },
        xTransform: function (a, b) {
          a.set_x(a.x + b);
        },
        yTransform: function (a, b) {
          a.set_y(a.y + b);
        },
        angleTransform: function (a, b) {
          a.set_angle(a.angle + b);
        },
        alphaTransform: function (a, b) {
          if (a.alpha != 0 || b == 0) {
            a.set_alpha(a.alpha * b);
          } else {
            a.set_alpha(1 / b);
          }
        },
        directAlphaTransform: function (a, b) {
          a.set_alpha(b);
        },
        flipXTransform: function (a, b) {
          a.set_flipX(b);
        },
        flipYTransform: function (a, b) {
          a.set_flipY(b);
        },
        movesTransform: function (a, b) {
          a.set_moves(b);
        },
        gColorTransform: function (a, b) {
          a.set_color(b);
        },
        blendTransform: function (a, b) {
          a.set_blend(b);
        },
        immovableTransform: function (a, b) {
          a.set_immovable(b);
        },
        visibleTransform: function (a, b) {
          a.set_visible(b);
        },
        activeTransform: function (a, b) {
          a.set_active(b);
        },
        aliveTransform: function (a, b) {
          a.set_alive(b);
        },
        existsTransform: function (a, b) {
          a.set_exists(b);
        },
        camerasTransform: function (a, b) {
          a.set_cameras(b);
        },
        offsetTransform: function (a, b) {
          a = a.offset;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        originTransform: function (a, b) {
          a = a.origin;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        scaleTransform: function (a, b) {
          a = a.scale;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        scrollFactorTransform: function (a, b) {
          a = a.scrollFactor;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        clipRectTransform: function (a, b) {
          if (b == null) {
            a.set_clipRect(null);
          } else {
            var c = b.x - a.x + this.x;
            var d = b.y - a.y + this.y;
            var e = b.width;
            var f = b.height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b = Ha._pool.get();
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
            b._inPool = false;
            a.set_clipRect(b);
          }
        },
        offsetCallback: function (a) {
          this.transformChildren_flixel_math_FlxPoint(m(this, this.offsetTransform), a);
        },
        originCallback: function (a) {
          this.transformChildren_flixel_math_FlxPoint(m(this, this.originTransform), a);
        },
        scaleCallback: function (a) {
          this.transformChildren_flixel_math_FlxPoint(m(this, this.scaleTransform), a);
        },
        scrollFactorCallback: function (a) {
          this.transformChildren_flixel_math_FlxPoint(m(this, this.scrollFactorTransform), a);
        },
        loadGraphic: function (a, b, c, d, e, f) {
          return this;
        },
        makeGraphic: function (a, b, c, d, e) {
          return this;
        },
        set_pixels: function (a) {
          return a;
        },
        set_frame: function (a) {
          return a;
        },
        get_pixels: function () {
          return null;
        },
        set_group: function (a) {
          return this.group = a;
        },
        calcFrame: function (a) {},
        resetHelpers: function () {},
        stamp: function (a, b, c) {},
        set_frames: function (a) {
          return a;
        },
        updateColorTransform: function () {},
        __class__: La,
        __properties__: q(F.prototype.__properties__, {
          set_group: "set_group"
        })
      });
      function ac(a, b) {
        this.lastBoxType = "";
        this.lastCharacter = -1;
        this.closeVolume = 1;
        this.closeSound = "dialogueClose";
        this.ignoreThisFrame = true;
        this.daText = null;
        this.dialogueEnded = false;
        this.textBoxTypes = ["normal", "angry"];
        this.offsetPos = -600;
        this.currentText = 0;
        this.arrayCharacters = [];
        this.dialogueList = this.nextDialogueThing = this.skipDialogueThing = this.bgFade = null;
        this.scrollSpeed = 4000;
        La.call(this);
        D.sound("dialogue");
        D.sound("dialogueClose");
        if (b != null && b != "") {
          var c = h.sound;
          b = D.returnSound("music", b, null);
          c.playMusic(b, 0);
          c = h.sound.music;
          b = 2;
          var d = 0;
          var e = 1;
          if (e == null) {
            e = 1;
          }
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 1;
          }
          if (c._channel == null) {
            c.play();
          }
          if (c.fadeTween != null) {
            c.fadeTween.cancel();
          }
          c.fadeTween = Da.num(d, e, b, {
            onComplete: null
          }, m(c, c.volumeTween));
        }
        this.bgFade = new F(-500, -500).makeGraphic(h.width * 2, h.height * 2, -1);
        c = this.bgFade.scrollFactor;
        c.set_x(0);
        c.set_y(0);
        this.bgFade.set_visible(true);
        this.bgFade.set_alpha(0);
        this.add(this.bgFade);
        this.dialogueList = a;
        this.spawnCharacters();
        this.box = new F(70, 370);
        this.box.set_antialiasing(y.data.antialiasing);
        c = this.box;
        a = D.image("speech_bubble", null, true);
        c.set_frames(ob.fromSparrow(a, D.getPath("images/speech_bubble.xml", null, null)));
        c = this.box.scrollFactor;
        c.set_x(0);
        c.set_y(0);
        this.box.animation.addByPrefix("normal", "speech bubble normal", 24);
        this.box.animation.addByPrefix("normalOpen", "Speech Bubble Normal Open", 24, false);
        this.box.animation.addByPrefix("angry", "AHH speech bubble", 24);
        this.box.animation.addByPrefix("angryOpen", "speech bubble loud open", 24, false);
        this.box.animation.addByPrefix("center-normal", "speech bubble middle", 24);
        this.box.animation.addByPrefix("center-normalOpen", "Speech Bubble Middle Open", 24, false);
        this.box.animation.addByPrefix("center-angry", "AHH Speech Bubble middle", 24);
        this.box.animation.addByPrefix("center-angryOpen", "speech bubble Middle loud open", 24, false);
        this.box.animation.play("normal", true);
        this.box.set_visible(false);
        this.box.setGraphicSize(this.box.get_width() * 0.9 | 0);
        this.box.updateHitbox();
        this.add(this.box);
        this.daText = new Rh(ac.DEFAULT_TEXT_X, ac.DEFAULT_TEXT_Y, "");
        this.daText.setScale(0.7);
        this.add(this.daText);
        this.startNextDialog();
      }
      g["cutscenes.DialogueBoxPsych"] = ac;
      ac.__name__ = "cutscenes.DialogueBoxPsych";
      ac.updateBoxOffsets = function (a) {
        a.centerOffsets();
        a.updateHitbox();
        if (w.startsWith(a.animation._curAnim.name, "angry")) {
          var b = a.offset;
          var c = 50;
          var d = 65;
        } else if (w.startsWith(a.animation._curAnim.name, "center-angry")) {
          b = a.offset;
          c = 50;
          d = 30;
        } else {
          b = a.offset;
          c = 10;
          d = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        b.set_x(c);
        b.set_y(d);
        if (!a.flipX) {
          a.offset.set_y(a.offset.y + 10);
        }
      };
      ac.__super__ = La;
      ac.prototype = q(La.prototype, {
        spawnCharacters: function () {
          var a = Object.create(null);
          for (var b = 0, c = this.dialogueList.dialogue.length; b < c;) {
            var d = b++;
            if (this.dialogueList.dialogue[d] != null) {
              d = this.dialogueList.dialogue[d].portrait;
              if (!Object.prototype.hasOwnProperty.call(a, d) || !a[d]) {
                a[d] = true;
              }
            }
          }
          a = Object.keys(a);
          b = a.length;
          for (c = 0; c < b;) {
            var e = a[c++];
            d = ac.LEFT_CHAR_X;
            var f = ac.DEFAULT_CHAR_Y;
            e = new kd(d + this.offsetPos, f, e);
            e.setGraphicSize(e.get_width() * kd.DEFAULT_SCALE * e.jsonFile.scale | 0);
            e.updateHitbox();
            var k = e.scrollFactor;
            k.set_x(0);
            k.set_y(0);
            e.set_alpha(0.00001);
            this.add(e);
            k = false;
            switch (e.jsonFile.dialogue_pos) {
              case "center":
                e.set_x(h.width / 2);
                e.set_x(e.x - e.get_width() / 2);
                f = e.y;
                e.set_y(h.height + 50);
                k = true;
                break;
              case "right":
                d = h.width - e.get_width() + ac.RIGHT_CHAR_X;
                e.set_x(d - this.offsetPos);
            }
            d += e.jsonFile.position[0];
            f += e.jsonFile.position[1];
            e.set_x(e.x + e.jsonFile.position[0]);
            e.set_y(e.y + e.jsonFile.position[1]);
            e.startingPos = k ? f : d;
            this.arrayCharacters.push(e);
          }
        },
        update: function (a) {
          if (this.ignoreThisFrame) {
            this.ignoreThisFrame = false;
          } else if (this.dialogueEnded) {
            if (this.box != null && this.box.animation._curAnim.curFrame <= 0) {
              this.box.kill();
              this.remove(this.box);
              this.box.destroy();
              this.box = null;
            }
            if (this.bgFade != null) {
              c = this.bgFade;
              c.set_alpha(c.alpha - a * 0.5);
              if (this.bgFade.alpha <= 0) {
                this.bgFade.kill();
                this.remove(this.bgFade);
                this.bgFade.destroy();
                this.bgFade = null;
              }
            }
            c = 0;
            for (d = this.arrayCharacters.length; c < d;) {
              e = c++;
              var b = this.arrayCharacters[e];
              if (b != null) {
                switch (this.arrayCharacters[e].jsonFile.dialogue_pos) {
                  case "center":
                    b.set_y(b.y + this.scrollSpeed * a);
                    break;
                  case "left":
                    b.set_x(b.x - this.scrollSpeed * a);
                    break;
                  case "right":
                    b.set_x(b.x + this.scrollSpeed * a);
                }
                b.set_alpha(b.alpha - a * 10);
              }
            }
            if (this.box == null && this.bgFade == null) {
              c = 0;
              for (d = this.arrayCharacters.length; c < d;) {
                c++;
                b = this.arrayCharacters[0];
                if (b != null) {
                  r.remove(this.arrayCharacters, b);
                  b.kill();
                  this.remove(b);
                  b.destroy();
                }
              }
              this.finishThing();
              this.kill();
            }
          } else {
            var c = this.bgFade;
            c.set_alpha(c.alpha + a * 0.5);
            if (this.bgFade.alpha > 0.5) {
              this.bgFade.set_alpha(0.5);
            }
            if (Aa.instance.get_ACCEPT()) {
              if (this.daText.finishedText) {
                if (this.currentText >= this.dialogueList.dialogue.length) {
                  this.dialogueEnded = true;
                  c = 0;
                  for (var d = this.textBoxTypes.length; c < d;) {
                    var e = c++;
                    b = ["", "center-"];
                    var f = this.box.animation._curAnim.name;
                    for (var k = 0, t = b.length; k < t;) {
                      var n = k++;
                      if (f == b[n] + this.textBoxTypes[e] || f == b[n] + this.textBoxTypes[e] + "Open") {
                        this.box.animation.play(b[n] + this.textBoxTypes[e] + "Open", true);
                      }
                    }
                  }
                  this.box.animation._curAnim.set_curFrame(this.box.animation._curAnim.frames.length - 1);
                  this.box.animation._curAnim.reverse();
                  if (this.daText != null) {
                    this.daText.kill();
                    this.remove(this.daText);
                    this.daText.destroy();
                  }
                  ac.updateBoxOffsets(this.box);
                  c = h.sound.music;
                  d = 1;
                  e = 0;
                  if (e == null) {
                    e = 0;
                  }
                  if (d == null) {
                    d = 1;
                  }
                  if (c.fadeTween != null) {
                    c.fadeTween.cancel();
                  }
                  c.fadeTween = Da.num(c._volume, e, d, {
                    onComplete: null
                  }, m(c, c.volumeTween));
                } else {
                  this.startNextDialog();
                }
              } else {
                this.daText.finishText();
                if (this.skipDialogueThing != null) {
                  this.skipDialogueThing();
                }
              }
              h.sound.play(D.sound(this.closeSound), this.closeVolume);
            } else if (this.daText.finishedText) {
              b = this.arrayCharacters[this.lastCharacter];
              if (b != null && b.animation._curAnim != null && b.animationIsLoop() && b.animation.get_finished()) {
                b.playAnim(b.animation._curAnim.name, true);
              }
            } else {
              b = this.arrayCharacters[this.lastCharacter];
              if (b != null && b.animation._curAnim != null && b.animation.get_finished()) {
                b.animation._curAnim.restart();
              }
            }
            if (this.box.animation._curAnim.finished) {
              c = 0;
              for (d = this.textBoxTypes.length; c < d;) {
                e = c++;
                b = ["", "center-"];
                f = this.box.animation._curAnim.name;
                k = 0;
                t = b.length;
                while (k < t) {
                  n = k++;
                  if (f == b[n] + this.textBoxTypes[e] || f == b[n] + this.textBoxTypes[e] + "Open") {
                    this.box.animation.play(b[n] + this.textBoxTypes[e], true);
                  }
                }
              }
              ac.updateBoxOffsets(this.box);
            }
            if (this.lastCharacter != -1 && this.arrayCharacters.length > 0) {
              c = 0;
              d = this.arrayCharacters.length;
              while (c < d) {
                e = c++;
                b = this.arrayCharacters[e];
                if (b != null) {
                  if (e != this.lastCharacter) {
                    switch (b.jsonFile.dialogue_pos) {
                      case "center":
                        b.set_y(b.y + this.scrollSpeed * a);
                        if (b.y > b.startingPos + h.height) {
                          b.set_y(b.startingPos + h.height);
                        }
                        break;
                      case "left":
                        b.set_x(b.x - this.scrollSpeed * a);
                        if (b.x < b.startingPos + this.offsetPos) {
                          b.set_x(b.startingPos + this.offsetPos);
                        }
                        break;
                      case "right":
                        b.set_x(b.x + this.scrollSpeed * a);
                        if (b.x > b.startingPos - this.offsetPos) {
                          b.set_x(b.startingPos - this.offsetPos);
                        }
                    }
                    b.set_alpha(b.alpha - a * 3);
                    if (b.alpha < 0.00001) {
                      b.set_alpha(0.00001);
                    }
                  } else {
                    switch (b.jsonFile.dialogue_pos) {
                      case "center":
                        b.set_y(b.y - this.scrollSpeed * a);
                        if (b.y < b.startingPos) {
                          b.set_y(b.startingPos);
                        }
                        break;
                      case "left":
                        b.set_x(b.x + this.scrollSpeed * a);
                        if (b.x > b.startingPos) {
                          b.set_x(b.startingPos);
                        }
                        break;
                      case "right":
                        b.set_x(b.x - this.scrollSpeed * a);
                        if (b.x < b.startingPos) {
                          b.set_x(b.startingPos);
                        }
                    }
                    b.set_alpha(b.alpha + a * 3);
                    if (b.alpha > 1) {
                      b.set_alpha(1);
                    }
                  }
                }
              }
            }
          }
          La.prototype.update.call(this, a);
        },
        startNextDialog: function () {
          do {
            var a = this.dialogueList.dialogue[this.currentText];
          } while (a == null);
          if (a.text == null || a.text.length < 1) {
            a.text = " ";
          }
          if (a.boxState == null) {
            a.boxState = "normal";
          }
          if (a.speed != null ? isNaN(a.speed) : 1) {
            a.speed = 0.05;
          }
          var b = a.boxState;
          var c = this.textBoxTypes[0];
          for (var d = 0, e = this.textBoxTypes.length; d < e;) {
            var f = d++;
            if (this.textBoxTypes[f] == b) {
              c = b;
            }
          }
          b = 0;
          this.box.set_visible(true);
          d = 0;
          for (e = this.arrayCharacters.length; d < e;) {
            f = d++;
            if (this.arrayCharacters[f].curCharacter == a.portrait) {
              b = f;
              break;
            }
          }
          d = "";
          e = this.arrayCharacters[b].jsonFile.dialogue_pos;
          if (e == "center") {
            d = "center-";
          }
          if (b != this.lastCharacter) {
            this.box.animation.play(d + c + "Open", true);
            ac.updateBoxOffsets(this.box);
            this.box.set_flipX(e == "left");
          } else if (c != this.lastBoxType) {
            this.box.animation.play(d + c, true);
            ac.updateBoxOffsets(this.box);
          }
          this.lastCharacter = b;
          this.lastBoxType = c;
          this.daText.set_text(a.text);
          this.daText.delay = a.speed;
          this.daText.sound = a.sound;
          if (this.daText.sound == null || w.trim(this.daText.sound) == "") {
            this.daText.sound = "dialogue";
          }
          this.daText.set_y(ac.DEFAULT_TEXT_Y);
          if (this.daText.rows > 2) {
            c = this.daText;
            c.set_y(c.y - ac.LONG_TEXT_ADD);
          }
          c = this.arrayCharacters[b];
          if (c != null) {
            c.playAnim(a.expression, this.daText.finishedText);
            if (c.animation._curAnim != null) {
              a = 24 - (a.speed - 0.05) / 5 * 480;
              if (a < 12) {
                a = 12;
              } else if (a > 48) {
                a = 48;
              }
              c.animation._curAnim.set_frameRate(a);
            }
          }
          this.currentText++;
          if (this.nextDialogueThing != null) {
            this.nextDialogueThing();
          }
        },
        __class__: ac
      });
      function kd(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.curCharacter = "bf";
        this.isGhost = false;
        this.startingPos = 0;
        this.dialogueAnimations = new ua();
        this.jsonFile = null;
        F.call(this, a, b);
        if (c == null) {
          c = kd.DEFAULT_CHARACTER;
        }
        this.curCharacter = c;
        this.reloadCharacterJson(c);
        a = "dialogue/" + this.jsonFile.image;
        b = D.image(a, null, true);
        this.set_frames(ob.fromSparrow(b, D.getPath("images/" + a + ".xml", null, null)));
        this.reloadAnimations();
        this.set_antialiasing(y.data.antialiasing);
        if (this.jsonFile.no_antialiasing == 1) {
          this.set_antialiasing(false);
        }
      }
      g["cutscenes.DialogueCharacter"] = kd;
      kd.__name__ = "cutscenes.DialogueCharacter";
      kd.__super__ = F;
      kd.prototype = q(F.prototype, {
        reloadCharacterJson: function (a) {
          a = "images/dialogue/" + a + ".json";
          if (a == null) {
            a = "";
          }
          a = sa.getText("assets/shared/" + a);
          this.jsonFile = JSON.parse(a);
        },
        reloadAnimations: function () {
          this.dialogueAnimations.h = Object.create(null);
          if (this.jsonFile.animations != null && this.jsonFile.animations.length > 0) {
            for (var a = 0, b = this.jsonFile.animations; a < b.length;) {
              var c = b[a];
              ++a;
              this.animation.addByPrefix(c.anim, c.loop_name, 24, this.isGhost);
              this.animation.addByPrefix(c.anim + kd.IDLE_SUFFIX, c.idle_name, 24, true);
              this.dialogueAnimations.h[c.anim] = c;
            }
          }
        },
        playAnim: function (a, b) {
          if (b == null) {
            b = false;
          }
          var c = a;
          if (a == null || !Object.prototype.hasOwnProperty.call(this.dialogueAnimations.h, a)) {
            var d = [];
            var e = this.dialogueAnimations.h;
            var f = Object.keys(e);
            for (var k = f.length, t = 0; t < k;) {
              a = e[f[t++]];
              d.push(a.anim);
            }
            if (d.length > 0) {
              c = d[h.random.int(0, d.length - 1)];
            }
          }
          if (Object.prototype.hasOwnProperty.call(this.dialogueAnimations.h, c) && (this.dialogueAnimations.h[c].loop_name == null || this.dialogueAnimations.h[c].loop_name.length < 1 || this.dialogueAnimations.h[c].loop_name == this.dialogueAnimations.h[c].idle_name)) {
            b = true;
          }
          this.animation.play(b ? c + kd.IDLE_SUFFIX : c, false);
          if (Object.prototype.hasOwnProperty.call(this.dialogueAnimations.h, c)) {
            a = this.dialogueAnimations.h[c];
            if (b) {
              d = this.offset;
              e = a.idle_offsets[0];
              a = a.idle_offsets[1];
            } else {
              d = this.offset;
              e = a.loop_offsets[0];
              a = a.loop_offsets[1];
            }
            if (a == null) {
              a = 0;
            }
            if (e == null) {
              e = 0;
            }
            d.set_x(e);
            d.set_y(a);
          } else {
            d = this.offset;
            a = e = 0;
            if (a == null) {
              a = 0;
            }
            if (e == null) {
              e = 0;
            }
            d.set_x(e);
            d.set_y(a);
            zb.trace("Offsets not found! Dialogue character is badly formatted, anim: " + c + ", " + (b ? "idle anim" : "loop anim"), {
              fileName: "source/cutscenes/DialogueCharacter.hx",
              lineNumber: 118,
              className: "cutscenes.DialogueCharacter",
              methodName: "playAnim"
            });
          }
        },
        animationIsLoop: function () {
          if (this.animation._curAnim == null) {
            return false;
          } else {
            return !w.endsWith(this.animation._curAnim.name, kd.IDLE_SUFFIX);
          }
        },
        __class__: kd
      });
      function Wc() {
        this.__renderedOnCanvasWhileOnDOM = this.__forceCachedBitmapUpdate = false;
        this.__mouseScrollVCounter = 0;
        this.condenseWhite = false;
        Ca.call(this);
        this.__drawableType = 7;
        this.__selectionIndex = this.__caretIndex = -1;
        this.__displayAsPassword = false;
        this.__graphics = new fe(this);
        this.__textEngine = new fc(this);
        this.__layoutDirty = true;
        this.__offsetY = this.__offsetX = 0;
        this.__mouseWheelEnabled = true;
        this.__text = "";
        this.doubleClickEnabled = true;
        if (Wc.__defaultTextFormat == null) {
          Wc.__defaultTextFormat = new ld("Times New Roman", 12, 0, false, false, false, "", "", 3, 0, 0, 0, 0);
          Wc.__defaultTextFormat.blockIndent = 0;
          Wc.__defaultTextFormat.bullet = false;
          Wc.__defaultTextFormat.letterSpacing = 0;
          Wc.__defaultTextFormat.kerning = false;
        }
        this.__textFormat = Wc.__defaultTextFormat.clone();
        this.__textEngine.textFormatRanges.push(new Ud(this.__textFormat, 0, 0));
        this.addEventListener("mouseDown", m(this, this.this_onMouseDown));
        this.addEventListener("focusIn", m(this, this.this_onFocusIn));
        this.addEventListener("focusOut", m(this, this.this_onFocusOut));
        this.addEventListener("keyDown", m(this, this.this_onKeyDown));
        this.addEventListener("mouseWheel", m(this, this.this_onMouseWheel));
        this.addEventListener("doubleClick", m(this, this.this_onDoubleClick));
      }
      g["openfl.text.TextField"] = Wc;
      Wc.__name__ = "openfl.text.TextField";
      Wc.__super__ = Ca;
      Wc.prototype = q(Ca.prototype, {
        appendText: function (a) {
          if (a != null && a != "") {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__updateText(this.__text + a);
            this.__selectionIndex = this.__caretIndex = this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end = this.__text.length;
          }
        },
        getCharBoundaries: function (a) {
          if (a < 0 || a > this.__text.length - 1) {
            return null;
          }
          var b = new da();
          if (this.__getCharBoundaries(a, b)) {
            return b;
          } else {
            return null;
          }
        },
        getLineIndexOfChar: function (a) {
          if (a < 0 || a > this.__text.length) {
            return -1;
          }
          this.__updateLayout();
          for (var b = this.__textEngine.layoutGroups.iterator(); b.hasNext();) {
            var c = b.next();
            if (c.startIndex <= a && c.endIndex >= a) {
              return c.lineIndex;
            }
          }
          return -1;
        },
        getLineLength: function (a) {
          this.__updateLayout();
          if (a < 0 || a > this.__textEngine.numLines - 1) {
            return 0;
          }
          var b = -1;
          var c = -1;
          for (var d = this.__textEngine.layoutGroups.iterator(); d.hasNext();) {
            var e = d.next();
            if (e.lineIndex == a) {
              if (b == -1) {
                b = e.startIndex;
              }
            } else if (e.lineIndex == a + 1) {
              c = e.startIndex;
              break;
            }
          }
          if (c == -1) {
            c = this.__text.length;
          }
          return c - b;
        },
        getLineOffset: function (a) {
          this.__updateLayout();
          if (a < 0 || a > this.__textEngine.numLines - 1) {
            return -1;
          }
          for (var b = this.__textEngine.layoutGroups.iterator(); b.hasNext();) {
            var c = b.next();
            if (c.lineIndex == a) {
              return c.startIndex;
            }
          }
          return 0;
        },
        replaceSelectedText: function (a) {
          this.__replaceSelectedText(a, false);
        },
        replaceText: function (a, b, c) {
          this.__replaceText(a, b, c, false);
        },
        setSelection: function (a, b) {
          this.__selectionIndex = a;
          this.__caretIndex = b;
          this.__updateScrollV();
          this.__updateScrollH();
          if (this.stage != null && this.stage.get_focus() == this) {
            this.__stopCursorTimer();
            this.__startCursorTimer();
          }
        },
        setTextFormat: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = -1;
          }
          var d = this.get_text().length;
          if (b == -1) {
            if (c == -1) {
              c = d;
            }
            b = 0;
          } else if (c == -1) {
            c = b + 1;
          }
          if (b != c) {
            if (b < 0 || c <= 0 || c < b || b >= d || c > d) {
              throw new Mi();
            }
            if (b == 0 && c == d) {
              this.__textEngine.textFormatRanges.set_length(1);
              var e = this.__textEngine.textFormatRanges.get(0);
              e.start = 0;
              e.end = d;
              e.format.__merge(a);
            } else {
              d = 0;
              for (var f; d < this.__textEngine.textFormatRanges.get_length();) {
                e = this.__textEngine.textFormatRanges.get(d);
                if (e.end <= b) {
                  ++d;
                } else if (e.start >= c) {
                  break;
                } else if (e.start <= b && e.end >= c) {
                  if (e.start == b && e.end == c) {
                    e.format = e.format.clone();
                    e.format.__merge(a);
                    break;
                  } else if (e.start == b) {
                    f = new Ud(e.format.clone(), b, c);
                    f.format.__merge(a);
                    this.__textEngine.textFormatRanges.insertAt(d, f);
                    e.start = c;
                    d += 2;
                  } else {
                    if (e.end == c) {
                      f = new Ud(e.format.clone(), b, c);
                      f.format.__merge(a);
                      this.__textEngine.textFormatRanges.insertAt(d + 1, f);
                    } else {
                      f = new Ud(e.format.clone(), b, c);
                      f.format.__merge(a);
                      this.__textEngine.textFormatRanges.insertAt(d + 1, f);
                      f = new Ud(e.format.clone(), c, e.end);
                      this.__textEngine.textFormatRanges.insertAt(d + 2, f);
                    }
                    e.end = b;
                    break;
                  }
                } else if (e.start >= b && e.end <= c) {
                  if (e.start == b) {
                    e.format = e.format.clone();
                    e.format.__merge(a);
                    e.end = c;
                  } else {
                    this.__textEngine.textFormatRanges.removeAt(d);
                  }
                } else if (e.start > b && e.end > b) {
                  e.start = c;
                  break;
                } else if (e.start < b && e.end <= c) {
                  f = new Ud(e.format.clone(), b, c);
                  f.format.__merge(a);
                  this.__textEngine.textFormatRanges.insertAt(d + 1, f);
                  e.end = b;
                  d += 2;
                } else {
                  ++d;
                  Va.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                    fileName: "openfl/text/TextField.hx",
                    lineNumber: 1578,
                    className: "openfl.text.TextField",
                    methodName: "setTextFormat"
                  });
                }
              }
            }
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        __allowMouseFocus: function () {
          return this.mouseEnabled;
        },
        __caretBeginningOfLine: function () {
          this.__caretIndex = this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex));
        },
        __caretBeginningOfNextLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          this.__caretIndex = a < this.__textEngine.numLines - 1 ? this.getLineOffset(a + 1) : this.__text.length;
        },
        __caretBeginningOfPreviousLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          if (a > 0) {
            var b = this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex));
            this.__caretIndex = this.__caretIndex == b ? this.getLineOffset(a - 1) : b;
          }
        },
        __caretEndOfLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          this.__caretIndex = a < this.__textEngine.numLines - 1 ? this.getLineOffset(a + 1) - 1 : this.__text.length;
        },
        __caretNextCharacter: function () {
          if (this.__caretIndex < this.__text.length) {
            this.__caretIndex++;
          }
        },
        __caretNextLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          if (a < this.__textEngine.numLines - 1) {
            this.__caretIndex = this.__getCharIndexOnDifferentLine(this.get_caretIndex(), a + 1);
          }
        },
        __caretPreviousCharacter: function () {
          if (this.__caretIndex > 0) {
            this.__caretIndex--;
          }
        },
        __caretPreviousLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          if (a > 0) {
            this.__caretIndex = this.__getCharIndexOnDifferentLine(this.get_caretIndex(), a - 1);
          }
        },
        __disableInput: function () {
          if (this.__inputEnabled && this.stage != null) {
            this.stage.window.__backend.setTextInputEnabled(false);
            this.stage.window.onTextInput.remove(m(this, this.window_onTextInput));
            this.stage.window.onKeyDown.remove(m(this, this.window_onKeyDown));
            this.__inputEnabled = false;
            this.__stopCursorTimer();
          }
        },
        __dispatch: function (a) {
          if (a.eventPhase == 2 && a.type == "mouseUp") {
            var b = this.__getGroup(this.get_mouseX(), this.get_mouseY(), true);
            if (b != null) {
              b = b.format.url;
              if (b != null && b != "") {
                if (w.startsWith(b, "event:")) {
                  this.dispatchEvent(new Tf("link", true, false, r.substr(b, 6, null)));
                } else {
                  oa.getURL(new Sh(b));
                }
              }
            }
          }
          return Ca.prototype.__dispatch.call(this, a);
        },
        __enableInput: function () {
          if (this.stage != null) {
            var a = this.getBounds(this.stage);
            a = new Ie(a.x, a.y, a.width, a.height);
            this.stage.window.setTextInputRect(a);
            this.stage.window.__backend.setTextInputEnabled(true);
            if (!this.__inputEnabled) {
              this.stage.window.__backend.setTextInputEnabled(true);
              if (!this.stage.window.onTextInput.has(m(this, this.window_onTextInput))) {
                this.stage.window.onTextInput.add(m(this, this.window_onTextInput));
                this.stage.window.onKeyDown.add(m(this, this.window_onKeyDown));
              }
              this.__inputEnabled = true;
              this.__stopCursorTimer();
              this.__startCursorTimer();
            }
          }
        },
        __getBounds: function (a, b) {
          this.__updateLayout();
          var c = da.__pool.get();
          c.copyFrom(this.__textEngine.bounds);
          c.offset(this.__offsetX, this.__offsetY);
          c.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          da.__pool.release(c);
        },
        __getCharBoundaries: function (a, b) {
          if (a < 0 || a > this.__text.length - 1) {
            return false;
          }
          this.__updateLayout();
          for (var c = this.__textEngine.layoutGroups.iterator(); c.hasNext();) {
            var d = c.next();
            if (a >= d.startIndex && a < d.endIndex) {
              try {
                var e = d.offsetX;
                for (var f = 0, k = a - d.startIndex; f < k;) {
                  var t = f++;
                  e += d.positions[t];
                }
                b.setTo(e, d.offsetY, d.positions[a - d.startIndex], d.ascent + d.descent);
                return true;
              } catch (n) {
                Pa.lastError = n;
              }
            }
          }
          return false;
        },
        __getCharIndexOnDifferentLine: function (a, b) {
          if (a < 0 || a > this.__text.length || b < 0 || b > this.__textEngine.numLines - 1) {
            return -1;
          }
          var c = null;
          var d = null;
          for (var e = this.__textEngine.layoutGroups.iterator(); e.hasNext();) {
            var f = e.next();
            if (a >= f.startIndex && a <= f.endIndex) {
              c = f.offsetX;
              for (var k = 0, t = a - f.startIndex; k < t;) {
                var n = k++;
                c += f.positions[n];
              }
              if (d != null) {
                return this.__getPosition(c, d);
              }
            }
            if (f.lineIndex == b) {
              d = f.offsetY + f.height / 2;
              f = 0;
              for (k = this.get_scrollV() - 1; f < k;) {
                t = f++;
                d -= this.__textEngine.lineHeights.get(t);
              }
              if (c != null) {
                return this.__getPosition(c, d);
              }
            }
          }
          return -1;
        },
        __getCursor: function () {
          var a = this.__getGroup(this.get_mouseX(), this.get_mouseY(), true);
          if (a != null && a.format.url != "") {
            return "button";
          } else if (this.__textEngine.selectable) {
            return "ibeam";
          } else {
            return null;
          }
        },
        __getGroup: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          this.__updateLayout();
          a += this.get_scrollH();
          for (var d = 0, e = this.get_scrollV() - 1; d < e;) {
            var f = d++;
            b += this.__textEngine.lineHeights.get(f);
          }
          if (!c && b > this.__textEngine.textHeight) {
            b = this.__textEngine.textHeight;
          }
          var k = true;
          d = 0;
          for (e = this.__textEngine.layoutGroups.get_length(); d < e;) {
            f = d++;
            var t = this.__textEngine.layoutGroups.get(f);
            f = f < this.__textEngine.layoutGroups.get_length() - 1 ? this.__textEngine.layoutGroups.get(f + 1) : null;
            if (k) {
              if (b < t.offsetY) {
                b = t.offsetY;
              }
              if (a < t.offsetX) {
                a = t.offsetX;
              }
              k = false;
            }
            if (b >= t.offsetY && b <= t.offsetY + t.height || !c && f == null) {
              if (a >= t.offsetX && a <= t.offsetX + t.width || !c && (f == null || f.lineIndex != t.lineIndex)) {
                return t;
              }
            }
          }
          return null;
        },
        __getPosition: function (a, b) {
          b = this.__getGroup(a, b);
          if (b == null) {
            return this.__text.length;
          }
          var c = 0;
          for (var d = 0, e = b.positions.length; d < e;) {
            var f = d++;
            c += b.positions[f];
            if (a <= b.offsetX + c) {
              if (a <= b.offsetX + (c - b.positions[f]) + b.positions[f] / 2) {
                return b.startIndex + f;
              }
              if (b.startIndex + f < b.endIndex) {
                return b.startIndex + f + 1;
              }
              break;
            }
          }
          return b.endIndex;
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || e && !this.mouseEnabled || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          this.__getRenderTransform();
          this.__updateLayout();
          c = this.__renderTransform;
          e = c.a * c.d - c.b * c.c;
          var k = e == 0 ? -c.tx : 1 / e * (c.c * (c.ty - b) + c.d * (a - c.tx));
          c = this.__renderTransform;
          e = c.a * c.d - c.b * c.c;
          if (this.__textEngine.bounds.contains(k, e == 0 ? -c.ty : 1 / e * (c.a * (b - c.ty) + c.b * (c.tx - a)))) {
            if (d != null) {
              d.push(f);
            }
            return true;
          } else {
            return false;
          }
        },
        __hitTestMask: function (a, b) {
          this.__getRenderTransform();
          this.__updateLayout();
          var c = this.__renderTransform;
          var d = c.a * c.d - c.b * c.c;
          var e = d == 0 ? -c.tx : 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx));
          c = this.__renderTransform;
          d = c.a * c.d - c.b * c.c;
          if (this.__textEngine.bounds.contains(e, d == 0 ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a)))) {
            return true;
          } else {
            return false;
          }
        },
        __replaceSelectedText: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a == null) {
            a = "";
          }
          if (a != "" || this.__selectionIndex != this.__caretIndex) {
            var c = this.__caretIndex < this.__selectionIndex ? this.__caretIndex : this.__selectionIndex;
            var d = this.__caretIndex > this.__selectionIndex ? this.__caretIndex : this.__selectionIndex;
            if (c != d || !(this.__textEngine.maxChars > 0) || this.__text.length != this.__textEngine.maxChars) {
              if (c > this.__text.length) {
                c = this.__text.length;
              }
              if (d > this.__text.length) {
                d = this.__text.length;
              }
              if (d < c) {
                var e = d;
                d = c;
                c = e;
              }
              if (c < 0) {
                c = 0;
              }
              this.__replaceText(c, d, a, b);
            }
          }
        },
        __replaceText: function (a, b, c, d) {
          if (!(b < a) && !(a < 0) && !(b > this.__text.length) && c != null) {
            if (d) {
              c = this.__textEngine.restrictText(c);
              if (this.__textEngine.maxChars > 0) {
                d = this.__textEngine.maxChars - this.__text.length + (b - a);
                if (d <= 0) {
                  c = "";
                } else if (d < c.length) {
                  c = r.substr(c, 0, d);
                }
              }
            }
            this.__updateText(this.__text.substring(0, a) + c + this.__text.substring(b));
            d = c.length - (b - a);
            for (var e = 0, f; e < this.__textEngine.textFormatRanges.get_length();) {
              f = this.__textEngine.textFormatRanges.get(e);
              if (a == b) {
                if (f.start == f.end) {
                  if (f.start != 0) {
                    Va.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                      fileName: "openfl/text/TextField.hx",
                      lineNumber: 2087,
                      className: "openfl.text.TextField",
                      methodName: "__replaceText"
                    });
                  } else {
                    f.end += d;
                  }
                } else if (f.end >= a) {
                  if (f.start >= a) {
                    f.start += d;
                    f.end += d;
                  } else if (f.start < a && f.end >= b) {
                    f.end += d;
                  }
                }
              } else if (f.end > a) {
                if (f.start > b) {
                  f.start += d;
                  f.end += d;
                } else if (f.start <= a && f.end > b) {
                  f.end += d;
                } else if (f.start >= a && f.end <= b) {
                  f = this.__textEngine.textFormatRanges;
                  f.__tempIndex = e--;
                  for (var k = 0, t = []; k < t.length;) {
                    var n = t[k++];
                    f.insertAt(f.__tempIndex, n);
                    f.__tempIndex++;
                  }
                  f.splice(f.__tempIndex, 1);
                } else if (f.end > b && f.start > a && f.start <= b) {
                  f.start = a;
                  f.end += d;
                } else if (f.start < a && f.end > a && f.end <= b) {
                  f.end = a;
                }
              }
              ++e;
            }
            if (this.__textEngine.textFormatRanges.get_length() == 0) {
              this.__textEngine.textFormatRanges.push(new Ud(this.get_defaultTextFormat().clone(), 0, c.length));
            } else if (a == b && this.__textEngine.textFormatRanges.get(0).start > 0) {
              this.__textEngine.textFormatRanges.unshift(new Ud(this.get_defaultTextFormat().clone(), 0, this.__textEngine.textFormatRanges.get(0).start));
            } else if (a != b && this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end < this.__text.length) {
              this.__textEngine.textFormatRanges.push(new Ud(this.get_defaultTextFormat().clone(), this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end, this.__text.length));
            }
            this.__selectionIndex = this.__caretIndex = a + c.length;
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        __startCursorTimer: function () {
          if (this.get_type() == 1) {
            if (this.__inputEnabled) {
              this.__cursorTimer = gg.delay(m(this, this.__startCursorTimer), 600);
              this.__showCursor = !this.__showCursor;
            }
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          } else if (this.get_selectable()) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        __startTextInput: function () {
          if (this.__caretIndex < 0) {
            this.__selectionIndex = this.__caretIndex = this.__text.length;
          }
          if (wa.__supportDOM ? this.__renderedOnCanvasWhileOnDOM : 1) {
            this.__enableInput();
          }
        },
        __stopCursorTimer: function () {
          if (this.__cursorTimer != null) {
            this.__cursorTimer.stop();
            this.__cursorTimer = null;
          }
          if (this.__showCursor) {
            this.__showCursor = false;
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        __stopTextInput: function () {
          if (wa.__supportDOM ? this.__renderedOnCanvasWhileOnDOM : 1) {
            this.__disableInput();
          }
        },
        __updateLayout: function () {
          if (this.__layoutDirty) {
            var a = this.__textEngine.width;
            this.__textEngine.update();
            if (this.__textEngine.autoSize != 2) {
              if (this.__textEngine.width != a) {
                switch (this.__textEngine.autoSize) {
                  case 0:
                    this.set_x(this.get_x() + (a - this.__textEngine.width) / 2);
                    break;
                  case 3:
                    this.set_x(this.get_x() + (a - this.__textEngine.width));
                }
              }
              this.__textEngine.getBounds();
            }
            this.__layoutDirty = false;
            this.setSelection(this.__selectionIndex, this.__caretIndex);
          }
        },
        __updateMouseDrag: function () {
          if (this.stage != null) {
            var a = this.getBounds(this);
            if (this.get_mouseX() > a.width - 1) {
              this.set_scrollH(this.get_scrollH() + (Math.max(Math.min((this.get_mouseX() - a.width) * 0.1, 10), 1) | 0));
            } else if (this.get_mouseX() < 1) {
              this.set_scrollH(this.get_scrollH() - (Math.max(Math.min(this.get_mouseX() * -0.1, 10), 1) | 0));
            }
            this.__mouseScrollVCounter++;
            if (this.__mouseScrollVCounter > this.stage.get_frameRate() / 10) {
              if (this.get_mouseY() > a.height - 2) {
                this.set_scrollV(Math.min(this.get_scrollV() + Math.max(Math.min((this.get_mouseY() - a.height) * 0.03, 5), 1), this.get_maxScrollV()) | 0);
              } else if (this.get_mouseY() < 2) {
                this.set_scrollV(this.get_scrollV() - (Math.max(Math.min(this.get_mouseY() * -0.03, 5), 1) | 0));
              }
              this.__mouseScrollVCounter = 0;
            }
            this.stage_onMouseMove(null);
          }
        },
        __updateScrollH: function () {
          this.__updateLayout();
          var a = this.getBounds(this);
          if (this.get_textWidth() <= a.width - 4) {
            this.set_scrollH(0);
          } else {
            var b = this.get_scrollH();
            if (this.__caretIndex == 0 || this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex)) == this.__caretIndex) {
              b = 0;
            } else {
              var c = da.__pool.get();
              var d = false;
              if (this.__caretIndex < this.__text.length) {
                d = this.__getCharBoundaries(this.__caretIndex, c);
              }
              if (!d) {
                this.__getCharBoundaries(this.__caretIndex - 1, c);
                c.x += c.width;
              }
              while (c.x < b && b > 0) {
                b -= 24;
              }
              while (c.x > b + a.width - 4) {
                b += 24;
              }
              da.__pool.release(c);
            }
            if (b > 0 && this.get_type() != 1) {
              c = this.getLineLength(this.getLineIndexOfChar(this.__caretIndex));
              if (this.get_scrollH() + a.width - 4 > c) {
                this.set_scrollH(Math.ceil(c - a.width + 4));
              }
            }
            if (b < 0) {
              this.set_scrollH(0);
            } else if (b > this.get_maxScrollH()) {
              this.set_scrollH(this.get_maxScrollH());
            } else {
              this.set_scrollH(b);
            }
          }
        },
        __updateScrollV: function () {
          this.__updateLayout();
          if (this.get_textHeight() <= this.get_height() - 4) {
            this.set_scrollV(1);
          } else {
            var a = this.getLineIndexOfChar(this.__caretIndex);
            if (a == -1 && this.__caretIndex > 0) {
              a = this.getLineIndexOfChar(this.__caretIndex - 1) + 1;
            }
            if (a + 1 < this.get_scrollV()) {
              this.set_scrollV(a + 1);
            } else if (a + 1 > this.get_bottomScrollV()) {
              var b = 0;
              for (a >= this.__textEngine.lineHeights.get_length() && (a = this.__textEngine.lineHeights.get_length() - 1); a >= 0;) {
                b += this.__textEngine.lineHeights.get(a);
                if (b > this.get_height() - 4) {
                  a += b - this.get_height() < 0 ? 1 : 2;
                  break;
                }
                --a;
              }
              this.set_scrollV(a);
            } else {
              this.set_scrollV(this.get_scrollV());
            }
          }
        },
        __updateText: function (a) {
          if (wa.__supportDOM && this.__renderedOnCanvasWhileOnDOM) {
            this.__forceCachedBitmapUpdate = this.__text != a;
          }
          this.__textEngine.set_text(a);
          this.__text = this.__textEngine.text;
          if (this.stage != null && this.stage.get_focus() == this) {
            if (this.__text.length < this.__selectionIndex) {
              this.__selectionIndex = this.__text.length;
            }
            if (this.__text.length < this.__caretIndex) {
              this.__caretIndex = this.__text.length;
            }
          } else if (this.__isHTML) {
            this.__selectionIndex = this.__caretIndex = this.__text.length;
          } else {
            this.__caretIndex = this.__selectionIndex = 0;
          }
          if (!this.__displayAsPassword || wa.__supportDOM && !this.__renderedOnCanvasWhileOnDOM) {
            this.__textEngine.set_text(this.__text);
          } else {
            a = "";
            for (var b = 0, c = this.get_text().length; b < c;) {
              b++;
              a += "*";
            }
            this.__textEngine.set_text(a);
          }
        },
        __updateTransforms: function (a) {
          Ca.prototype.__updateTransforms.call(this, a);
          a = this.__renderTransform;
          var b = this.__offsetX;
          var c = this.__offsetY;
          a.tx = b * a.a + c * a.c + a.tx;
          a.ty = b * a.b + c * a.d + a.ty;
        },
        set_autoSize: function (a) {
          if (a != this.__textEngine.autoSize) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__textEngine.autoSize = a;
        },
        get_bottomScrollV: function () {
          this.__updateLayout();
          return this.__textEngine.get_bottomScrollV();
        },
        get_caretIndex: function () {
          return this.__caretIndex;
        },
        get_defaultTextFormat: function () {
          return this.__textFormat.clone();
        },
        set_defaultTextFormat: function (a) {
          this.__textFormat.__merge(a);
          this.__dirty = this.__layoutDirty = true;
          if (!this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return a;
        },
        get_displayAsPassword: function () {
          return this.__displayAsPassword;
        },
        set_displayAsPassword: function (a) {
          if (a != this.__displayAsPassword) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__displayAsPassword = a;
            this.__updateText(this.__text);
          }
          return a;
        },
        get_embedFonts: function () {
          return this.__textEngine.embedFonts;
        },
        set_embedFonts: function (a) {
          return this.__textEngine.embedFonts = a;
        },
        get_height: function () {
          this.__updateLayout();
          return this.__textEngine.height * Math.abs(this.get_scaleY());
        },
        set_height: function (a) {
          if (a != this.__textEngine.height) {
            this.__setTransformDirty();
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__textEngine.height = a;
          }
          return this.__textEngine.height * Math.abs(this.get_scaleY());
        },
        get_htmlText: function () {
          if (this.__isHTML) {
            return this.__htmlText;
          } else {
            return this.__text;
          }
        },
        set_htmlText: function (a) {
          if (!this.__isHTML || this.__text != a) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          this.__isHTML = true;
          if (this.condenseWhite) {
            a = a.replace(/\s+/g, " ");
          }
          this.__htmlText = a;
          a = Wa.parse(a, this.get_multiline(), this.__styleSheet, this.__textFormat, this.__textEngine.textFormatRanges);
          this.__updateText(a);
          return a;
        },
        get_maxScrollH: function () {
          this.__updateLayout();
          return this.__textEngine.maxScrollH;
        },
        get_maxScrollV: function () {
          this.__updateLayout();
          return this.__textEngine.get_maxScrollV();
        },
        get_mouseWheelEnabled: function () {
          return this.__mouseWheelEnabled;
        },
        get_multiline: function () {
          return this.__textEngine.multiline;
        },
        set_multiline: function (a) {
          return this.__textEngine.multiline = a;
        },
        get_numLines: function () {
          this.__updateLayout();
          return this.__textEngine.numLines;
        },
        get_scrollH: function () {
          return this.__textEngine.scrollH;
        },
        set_scrollH: function (a) {
          this.__updateLayout();
          if (a > this.__textEngine.maxScrollH) {
            a = this.__textEngine.maxScrollH;
          }
          if (a < 0) {
            a = 0;
          }
          if (a != this.__textEngine.scrollH) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__textEngine.scrollH = a;
            this.dispatchEvent(new Ga("scroll"));
          }
          return this.__textEngine.scrollH;
        },
        get_scrollV: function () {
          return this.__textEngine.get_scrollV();
        },
        set_scrollV: function (a) {
          this.__updateLayout();
          if (a > this.__textEngine.get_maxScrollV()) {
            a = this.__textEngine.get_maxScrollV();
          }
          if (a < 1) {
            a = 1;
          }
          if (a != this.__textEngine.get_scrollV() || this.__textEngine.get_scrollV() == 0) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__textEngine.set_scrollV(a);
            this.dispatchEvent(new Ga("scroll"));
          }
          return this.__textEngine.get_scrollV();
        },
        get_selectable: function () {
          return this.__textEngine.selectable;
        },
        set_selectable: function (a) {
          if (a != this.__textEngine.selectable && this.get_type() == 1) {
            if (this.stage != null && this.stage.get_focus() == this) {
              this.__startTextInput();
            } else if (!a) {
              this.__stopTextInput();
            }
          }
          return this.__textEngine.selectable = a;
        },
        set_sharpness: function (a) {
          if (a != this.__textEngine.sharpness) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__textEngine.sharpness = a;
        },
        get_tabEnabled: function () {
          if (this.__tabEnabled == null) {
            return this.__textEngine.type == 1;
          } else {
            return this.__tabEnabled;
          }
        },
        get_text: function () {
          return this.__text;
        },
        set_text: function (a) {
          if (this.__styleSheet != null) {
            return this.set_htmlText(a);
          }
          if (this.__isHTML || this.__text != a) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          } else {
            return a;
          }
          if (this.__textEngine.textFormatRanges.get_length() > 1) {
            var b = this.__textEngine.textFormatRanges;
            var c = this.__textEngine.textFormatRanges.get_length() - 1;
            b.__tempIndex = 1;
            for (var d = 0, e = []; d < e.length;) {
              var f = e[d++];
              b.insertAt(b.__tempIndex, f);
              b.__tempIndex++;
            }
            b.splice(b.__tempIndex, c);
          }
          b = this.__textEngine.textFormatRanges.get(0);
          b.format = this.__textFormat;
          b.start = 0;
          b.end = a.length;
          this.__isHTML = false;
          this.__updateText(a);
          return a;
        },
        set_textColor: function (a) {
          if (a != this.__textFormat.color) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          for (var b = this.__textEngine.textFormatRanges.iterator(); b.hasNext();) {
            b.next().format.color = a;
          }
          return this.__textFormat.color = a;
        },
        get_textWidth: function () {
          this.__updateLayout();
          return this.__textEngine.textWidth;
        },
        get_textHeight: function () {
          this.__updateLayout();
          return this.__textEngine.textHeight;
        },
        get_type: function () {
          return this.__textEngine.type;
        },
        get_width: function () {
          this.__updateLayout();
          return this.__textEngine.width * Math.abs(this.__scaleX);
        },
        set_width: function (a) {
          if (a != this.__textEngine.width) {
            this.__setTransformDirty();
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__textEngine.width = a;
          }
          return this.__textEngine.width * Math.abs(this.__scaleX);
        },
        get_wordWrap: function () {
          return this.__textEngine.wordWrap;
        },
        set_wordWrap: function (a) {
          if (a != this.__textEngine.wordWrap) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__textEngine.wordWrap = a;
        },
        get_x: function () {
          return this.__transform.tx + this.__offsetX;
        },
        set_x: function (a) {
          if (a != this.__transform.tx + this.__offsetX) {
            this.__setTransformDirty();
          }
          this.__transform.tx = a - this.__offsetX;
          return a;
        },
        get_y: function () {
          return this.__transform.ty + this.__offsetY;
        },
        set_y: function (a) {
          if (a != this.__transform.ty + this.__offsetY) {
            this.__setTransformDirty();
          }
          this.__transform.ty = a - this.__offsetY;
          return a;
        },
        stage_onMouseMove: function (a) {
          if (this.stage != null && this.get_selectable() && this.__selectionIndex >= 0) {
            this.__updateLayout();
            a = this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY());
            if (a != this.__caretIndex) {
              this.__caretIndex = a;
              a = true;
              if (wa.__supportDOM) {
                if (this.__renderedOnCanvasWhileOnDOM) {
                  this.__forceCachedBitmapUpdate = true;
                }
                a = false;
              }
              if (a) {
                this.__dirty = true;
                if (!this.__renderDirty) {
                  this.__renderDirty = true;
                  this.__setParentRenderDirty();
                }
              }
            }
          }
        },
        stage_onMouseUp: function (a) {
          a = a.currentTarget;
          a.removeEventListener("enterFrame", m(this, this.this_onEnterFrame));
          a.removeEventListener("mouseMove", m(this, this.stage_onMouseMove));
          a.removeEventListener("mouseUp", m(this, this.stage_onMouseUp));
          if (this.stage == a && a.get_focus() == this) {
            this.__getWorldTransform();
            this.__updateLayout();
            a = this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY());
            var b = Math.max(this.__selectionIndex, a) | 0;
            this.__selectionIndex = Math.min(this.__selectionIndex, a) | 0;
            this.__caretIndex = b;
            if (this.__inputEnabled) {
              this.this_onFocusIn(null);
              this.__stopCursorTimer();
              this.__startCursorTimer();
              if (wa.__supportDOM && this.__renderedOnCanvasWhileOnDOM) {
                this.__forceCachedBitmapUpdate = true;
              }
            }
          }
        },
        this_onEnterFrame: function (a) {
          this.__updateMouseDrag();
        },
        this_onFocusIn: function (a) {
          if (this.get_type() == 1 && this.stage != null && this.stage.get_focus() == this) {
            this.__startTextInput();
          } else if (this.get_type() != 1 && this.get_selectable() && this.stage != null && this.stage.get_focus() == this) {
            this.__startCursorTimer();
          }
        },
        this_onFocusOut: function (a) {
          this.__stopCursorTimer();
          this.__stopTextInput();
          if (this.__selectionIndex != this.__caretIndex) {
            this.__selectionIndex = this.__caretIndex;
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        this_onKeyDown: function (a) {
          if (this.get_selectable() && this.get_type() != 1 && a.keyCode == 67 && (a.commandKey || a.ctrlKey)) {
            if (this.__caretIndex != this.__selectionIndex && !this.get_displayAsPassword()) {
              ic.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex));
            }
          }
        },
        this_onMouseDown: function (a) {
          if (this.get_selectable() || this.get_type() == 1) {
            this.__updateLayout();
            this.__selectionIndex = this.__caretIndex = this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY());
            if (!wa.__supportDOM) {
              this.__dirty = true;
              if (!this.__renderDirty) {
                this.__renderDirty = true;
                this.__setParentRenderDirty();
              }
            }
            if (this.stage != null) {
              this.stage.addEventListener("enterFrame", m(this, this.this_onEnterFrame));
              this.stage.addEventListener("mouseMove", m(this, this.stage_onMouseMove));
              this.stage.addEventListener("mouseUp", m(this, this.stage_onMouseUp));
            }
          }
        },
        this_onMouseWheel: function (a) {
          if (this.get_mouseWheelEnabled()) {
            this.set_scrollV(Math.min(this.get_scrollV() - a.delta, this.get_maxScrollV()) | 0);
          }
        },
        this_onDoubleClick: function (a) {
          if (this.get_selectable()) {
            this.__updateLayout();
            a = "\n.!?, ;:()-_/".split("");
            var b = this.__text;
            var c = -1;
            var d = b.length;
            var e = Math.max(this.__caretIndex, 1) | 0;
            if (b.length > 0 && this.__caretIndex >= 0 && d >= this.__caretIndex) {
              for (var f = 0; f < a.length;) {
                var k = a[f];
                ++f;
                var t = b.lastIndexOf(k, e - 1);
                if (t > c) {
                  c = t + 1;
                }
                t = b.indexOf(k, e);
                if (t < d && t != -1) {
                  d = t;
                }
              }
              if (c != d) {
                this.setSelection(c, d);
                a = true;
                if (wa.__supportDOM) {
                  if (this.__renderedOnCanvasWhileOnDOM) {
                    this.__forceCachedBitmapUpdate = true;
                  }
                  a = false;
                }
                if (a) {
                  this.__dirty = true;
                  if (!this.__renderDirty) {
                    this.__renderDirty = true;
                    this.__setParentRenderDirty();
                  }
                }
              }
            }
          }
        },
        window_onKeyDown: function (a, b) {
          switch (a) {
            case 8:
              if (this.__selectionIndex == this.__caretIndex && this.__caretIndex > 0) {
                this.__selectionIndex = this.__caretIndex - 1;
              }
              if (this.__selectionIndex != this.__caretIndex) {
                this.replaceSelectedText("");
                this.__selectionIndex = this.__caretIndex;
                this.dispatchEvent(new Ga("change", true));
              } else {
                this.__stopCursorTimer();
                this.__startCursorTimer();
              }
              break;
            case 97:
              if (this.get_selectable() && (Ob.get_metaKey(b) || Ob.get_ctrlKey(b))) {
                this.setSelection(0, this.__text.length);
              }
              break;
            case 99:
              if (Ob.get_metaKey(b) || Ob.get_ctrlKey(b)) {
                if (this.__caretIndex != this.__selectionIndex && !this.get_displayAsPassword()) {
                  ic.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex));
                }
              }
              break;
            case 120:
              if ((!!Ob.get_metaKey(b) || !!Ob.get_ctrlKey(b)) && this.__caretIndex != this.__selectionIndex && !this.get_displayAsPassword()) {
                ic.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex));
                this.replaceSelectedText("");
                this.dispatchEvent(new Ga("change", true));
              }
              break;
            case 127:
              if (this.__selectionIndex == this.__caretIndex && this.__caretIndex < this.__text.length) {
                this.__selectionIndex = this.__caretIndex + 1;
              }
              if (this.__selectionIndex != this.__caretIndex) {
                this.replaceSelectedText("");
                this.__selectionIndex = this.__caretIndex;
                this.dispatchEvent(new Ga("change", true));
              } else {
                this.__stopCursorTimer();
                this.__startCursorTimer();
              }
              break;
            case 1073741898:
              if (this.get_selectable()) {
                if (Ob.get_metaKey(b) || Ob.get_ctrlKey(b)) {
                  this.__caretIndex = 0;
                } else {
                  this.__caretBeginningOfLine();
                }
                if (!Ob.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741901:
              if (this.get_selectable()) {
                if (Ob.get_metaKey(b) || Ob.get_ctrlKey(b)) {
                  this.__caretIndex = this.__text.length;
                } else {
                  this.__caretEndOfLine();
                }
                if (!Ob.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741903:
              if (this.get_selectable()) {
                if (Ob.get_metaKey(b) || Ob.get_ctrlKey(b)) {
                  this.__caretBeginningOfNextLine();
                } else {
                  this.__caretNextCharacter();
                }
                if (!Ob.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741904:
              if (this.get_selectable()) {
                if (Ob.get_metaKey(b) || Ob.get_ctrlKey(b)) {
                  this.__caretBeginningOfPreviousLine();
                } else {
                  this.__caretPreviousCharacter();
                }
                if (!Ob.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741905:
              if (this.get_selectable()) {
                if (Ob.get_metaKey(b) || Ob.get_ctrlKey(b)) {
                  this.__caretIndex = this.__text.length;
                } else {
                  this.__caretNextLine();
                }
                if (!Ob.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741906:
              if (this.get_selectable()) {
                if (Ob.get_metaKey(b) || Ob.get_ctrlKey(b)) {
                  this.__caretIndex = 0;
                } else {
                  this.__caretPreviousLine();
                }
                if (!Ob.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 13:
            case 1073741912:
              if (this.__textEngine.multiline) {
                a = new Tf("textInput", true, true, "\n");
                this.dispatchEvent(a);
                if (!a.isDefaultPrevented()) {
                  this.__replaceSelectedText("\n", true);
                  this.dispatchEvent(new Ga("change", true));
                }
              } else {
                this.__stopCursorTimer();
                this.__startCursorTimer();
              }
          }
        },
        window_onTextInput: function (a) {
          this.__replaceSelectedText(a, true);
          this.dispatchEvent(new Ga("change", true));
        },
        __class__: Wc,
        __properties__: q(Ca.prototype.__properties__, {
          set_textColor: "set_textColor",
          set_sharpness: "set_sharpness",
          set_autoSize: "set_autoSize",
          set_wordWrap: "set_wordWrap",
          get_wordWrap: "get_wordWrap",
          get_type: "get_type",
          get_textWidth: "get_textWidth",
          get_textHeight: "get_textHeight",
          set_text: "set_text",
          get_text: "get_text",
          set_selectable: "set_selectable",
          get_selectable: "get_selectable",
          set_scrollV: "set_scrollV",
          get_scrollV: "get_scrollV",
          set_scrollH: "set_scrollH",
          get_scrollH: "get_scrollH",
          get_numLines: "get_numLines",
          set_multiline: "set_multiline",
          get_multiline: "get_multiline",
          get_mouseWheelEnabled: "get_mouseWheelEnabled",
          get_maxScrollV: "get_maxScrollV",
          get_maxScrollH: "get_maxScrollH",
          set_htmlText: "set_htmlText",
          get_htmlText: "get_htmlText",
          set_embedFonts: "set_embedFonts",
          get_embedFonts: "get_embedFonts",
          set_displayAsPassword: "set_displayAsPassword",
          get_displayAsPassword: "get_displayAsPassword",
          set_defaultTextFormat: "set_defaultTextFormat",
          get_defaultTextFormat: "get_defaultTextFormat",
          get_caretIndex: "get_caretIndex",
          get_bottomScrollV: "get_bottomScrollV"
        })
      });
      function nk(a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 10;
        }
        if (a == null) {
          a = 10;
        }
        this.deltaTimeout = 0;
        Wc.call(this);
        this.set_x(a);
        this.set_y(b);
        this.currentFPS = 0;
        this.set_selectable(false);
        this.mouseEnabled = false;
        this.set_defaultTextFormat(new ld("_sans", 14, c));
        this.set_autoSize(1);
        this.set_multiline(true);
        this.set_text("FPS: ");
        this.times = [];
      }
      g["debug.FPSCounter"] = nk;
      nk.__name__ = "debug.FPSCounter";
      nk.__super__ = Wc;
      nk.prototype = q(Wc.prototype, {
        __enterFrame: function (a) {
          if (this.deltaTimeout > 1000) {
            this.deltaTimeout = 0;
          } else {
            var b = new Date().getTime() / 1000 * 1000;
            for (this.times.push(b); this.times[0] < b - 1000;) {
              this.times.shift();
            }
            this.currentFPS = this.times.length < h.updateFramerate ? this.times.length : h.updateFramerate;
            this.updateText();
            this.deltaTimeout += a;
          }
        },
        updateText: function () {
          this.set_text("FPS: " + this.currentFPS + ("\nMemory: " + Ub.formatBytes(kc.toFloat(va.__cast(Si.get_totalMemory(), Ti)))));
          this.set_textColor(-1);
          if (this.currentFPS < h.drawFramerate * 0.5) {
            this.set_textColor(-65536);
          }
        },
        __class__: nk
      });
      function Ak() {}
      g["flixel.IFlxBasic"] = Ak;
      Ak.__name__ = "flixel.IFlxBasic";
      Ak.__isInterface__ = true;
      Ak.prototype = {
        __class__: Ak,
        __properties__: {
          set_visible: "set_visible",
          set_active: "set_active"
        }
      };
      var tf = z["flixel.FlxCameraFollowStyle"] = {
        __ename__: "flixel.FlxCameraFollowStyle",
        __constructs__: null,
        LOCKON: {
          _hx_name: "LOCKON",
          _hx_index: 0,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        PLATFORMER: {
          _hx_name: "PLATFORMER",
          _hx_index: 1,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        TOPDOWN: {
          _hx_name: "TOPDOWN",
          _hx_index: 2,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        TOPDOWN_TIGHT: {
          _hx_name: "TOPDOWN_TIGHT",
          _hx_index: 3,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        SCREEN_BY_SCREEN: {
          _hx_name: "SCREEN_BY_SCREEN",
          _hx_index: 4,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        NO_DEAD_ZONE: {
          _hx_name: "NO_DEAD_ZONE",
          _hx_index: 5,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        }
      };
      tf.__constructs__ = [tf.LOCKON, tf.PLATFORMER, tf.TOPDOWN, tf.TOPDOWN_TIGHT, tf.SCREEN_BY_SCREEN, tf.NO_DEAD_ZONE];
      function Ui(a, b, c) {
        this.major = a;
        this.minor = b;
        this.patch = c;
      }
      g["flixel.system.FlxVersion"] = Ui;
      Ui.__name__ = "flixel.system.FlxVersion";
      Ui.prototype = {
        toString: function () {
          var a = Ui.sha;
          if (a != "") {
            a = "@" + a.substring(0, 7);
          }
          return "HaxeFlixel " + this.major + "." + this.minor + "." + this.patch + a;
        },
        __class__: Ui
      };
      function nn() {
        this._lastUniqueKeyIndex = 0;
        this.reset();
      }
      g["flixel.system.frontEnds.BitmapFrontEnd"] = nn;
      nn.__name__ = "flixel.system.frontEnds.BitmapFrontEnd";
      nn.prototype = {
        onAssetsReload: function (a) {
          a = Object.keys(this._cache.h);
          for (var b = a.length, c = 0; c < b;) {
            var d = a[c++];
            d = this._cache.h[d];
            if (d != null && (d.assetsClass != null || d.assetsKey != null)) {
              d.onAssetsReload();
            }
          }
        },
        onContext: function () {
          var a = Object.keys(this._cache.h);
          for (var b = a.length, c = 0; c < b;) {
            var d = a[c++];
            d = this._cache.h[d];
            if (d != null && d.isDumped) {
              d.onContext();
            }
          }
        },
        create: function (a, b, c, d, e) {
          if (d == null) {
            d = false;
          }
          return Zb.fromRectangle(a, b, c, d, e);
        },
        add: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          if (a instanceof Zb) {
            return Zb.fromGraphic(a, b, c);
          } else if (a instanceof T) {
            return Zb.fromBitmapData(a, b, c);
          } else {
            return Zb.fromAssetKey(v.string(a), b, c);
          }
        },
        findKeyForBitmap: function (a) {
          var b = Object.keys(this._cache.h);
          for (var c = b.length, d = 0; d < c;) {
            var e = b[d++];
            var f = this._cache.h[e];
            if (f != null && f.bitmap == a) {
              return e;
            }
          }
          return null;
        },
        generateKey: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = a;
          }
          if (c || b == null) {
            b = this.getUniqueKey(b);
          }
          return b;
        },
        getUniqueKey: function (a) {
          if (a == null) {
            a = "pixels";
          }
          if (this._cache.h[a] == null) {
            return a;
          }
          var b = this._lastUniqueKeyIndex;
          do {
            ++b;
            var c = a + b;
          } while (this._cache.h[c] != null);
          this._lastUniqueKeyIndex = b;
          return c;
        },
        remove: function (a) {
          if (a != null) {
            var b = a.key;
            if (b != null) {
              Q.cache.removeBitmapData(b);
              var c = this._cache;
              if (Object.prototype.hasOwnProperty.call(c.h, b)) {
                delete c.h[b];
              }
            }
            if (a.shader != null) {
              a.destroy();
            }
          }
        },
        removeByKey: function (a) {
          if (a != null) {
            var b = this._cache.h[a];
            if (a != null) {
              Q.cache.removeBitmapData(a);
              var c = this._cache;
              if (Object.prototype.hasOwnProperty.call(c.h, a)) {
                delete c.h[a];
              }
            }
            if (b != null) {
              b.destroy();
            }
          }
        },
        removeIfNoUse: function (a) {
          if (a != null && a.useCount == 0 && !a.persist) {
            this.remove(a);
          }
        },
        clearCache: function () {
          if (this._cache == null) {
            this._cache = new ua();
          } else {
            var a = Object.keys(this._cache.h);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              var e = this._cache.h[d];
              if (e != null && !e.persist && e.useCount <= 0) {
                if (d != null) {
                  Q.cache.removeBitmapData(d);
                  var f = this._cache;
                  if (Object.prototype.hasOwnProperty.call(f.h, d)) {
                    delete f.h[d];
                  }
                }
                e.destroy();
              }
            }
          }
        },
        reset: function () {
          if (this._cache == null) {
            this._cache = new ua();
          } else {
            var a = Object.keys(this._cache.h);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              var e = this._cache.h[d];
              if (d != null) {
                Q.cache.removeBitmapData(d);
                var f = this._cache;
                if (Object.prototype.hasOwnProperty.call(f.h, d)) {
                  delete f.h[d];
                }
              }
              if (e != null) {
                e.destroy();
              }
            }
          }
        },
        __class__: nn
      };
      function on() {
        this.useBufferLocking = false;
        this.cameraResized = new sf();
        this.cameraRemoved = new sf();
        this.cameraAdded = new sf();
        this.defaults = [];
        this.list = [];
        Tb._defaultCameras = this.defaults;
      }
      g["flixel.system.frontEnds.CameraFrontEnd"] = on;
      on.__name__ = "flixel.system.frontEnds.CameraFrontEnd";
      on.prototype = {
        add: function (a, b) {
          if (b == null) {
            b = true;
          }
          h.game.addChildAt(a.flashSprite, h.game.getChildIndex(h.game._inputContainer));
          this.list.push(a);
          if (b) {
            this.defaults.push(a);
          }
          a.ID = this.list.length - 1;
          this.cameraAdded.dispatch(a);
          return a;
        },
        remove: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this.list.indexOf(a);
          if (a != null && c != -1) {
            h.game.removeChild(a.flashSprite);
            this.list.splice(c, 1);
            r.remove(this.defaults, a);
            if (h.renderTile) {
              c = 0;
              for (var d = this.list.length; c < d;) {
                var e = c++;
                this.list[e].ID = e;
              }
            }
            if (b) {
              a.destroy();
            }
            this.cameraRemoved.dispatch(a);
          } else {
            h.log.advanced("FlxG.cameras.remove(): The camera you attempted to remove is not a part of the game.", xa.WARNING, true);
          }
        },
        setDefaultDrawTarget: function (a, b) {
          if (this.list.indexOf(a) == -1) {
            h.log.advanced("FlxG.cameras.setDefaultDrawTarget(): The specified camera is not a part of the game.", xa.WARNING, true);
          } else {
            var c = this.defaults.indexOf(a);
            if (b && c == -1) {
              this.defaults.push(a);
            } else if (!b) {
              this.defaults.splice(c, 1);
            }
          }
        },
        reset: function (a) {
          while (this.list.length > 0) {
            this.remove(this.list[0]);
          }
          if (a == null) {
            a = new Tb(0, 0, h.width, h.height);
          }
          h.camera = this.add(a);
          a.ID = 0;
          Tb._defaultCameras = this.defaults;
        },
        resize: function () {
          for (var a = 0, b = this.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.onResize();
          }
        },
        get_bgColor: function () {
          if (h.camera == null) {
            return -16777216;
          } else {
            return h.camera.bgColor;
          }
        },
        set_bgColor: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            d.bgColor = a;
          }
          return a;
        },
        __class__: on,
        __properties__: {
          set_bgColor: "set_bgColor",
          get_bgColor: "get_bgColor"
        }
      };
      function pn() {
        this.visible = false;
        this.visibilityChanged = new Vd();
        this.precision = 3;
      }
      g["flixel.system.frontEnds.DebuggerFrontEnd"] = pn;
      pn.__name__ = "flixel.system.frontEnds.DebuggerFrontEnd";
      pn.prototype = {
        __class__: pn
      };
      function qn() {
        this.resetOnStateSwitch = true;
        this.list = [];
      }
      g["flixel.system.frontEnds.InputFrontEnd"] = qn;
      qn.__name__ = "flixel.system.frontEnds.InputFrontEnd";
      qn.prototype = {
        add_flixel_input_gamepad_FlxGamepadManager: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            if (Ub.getClassName(a, true) == Ub.getClassName(d, true)) {
              return a;
            }
          }
          this.list.push(a);
          return a;
        },
        add_flixel_input_touch_FlxTouchManager: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            if (Ub.getClassName(a, true) == Ub.getClassName(d, true)) {
              return a;
            }
          }
          this.list.push(a);
          return a;
        },
        replace_flixel_input_mouse_FlxMouse: function (a, b) {
          var c = 0;
          var d = false;
          for (var e = 0, f = this.list; e < f.length;) {
            var k = f[e];
            ++e;
            if (k == a) {
              this.list[c] = b;
              d = true;
              break;
            }
            ++c;
          }
          if (d) {
            return b;
          } else {
            return null;
          }
        },
        add_flixel_input_mouse_FlxMouse: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            if (Ub.getClassName(a, true) == Ub.getClassName(d, true)) {
              return a;
            }
          }
          this.list.push(a);
          return a;
        },
        add_flixel_input_keyboard_FlxKeyboard: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            if (Ub.getClassName(a, true) == Ub.getClassName(d, true)) {
              return a;
            }
          }
          this.list.push(a);
          return a;
        },
        reset: function () {
          for (var a = 0, b = this.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.reset();
          }
        },
        onStateSwitch: function () {
          if (this.resetOnStateSwitch) {
            this.reset();
          }
        },
        __class__: qn
      };
      function rn() {
        this._standardTraceFunction = zb.trace;
      }
      g["flixel.system.frontEnds.LogFrontEnd"] = rn;
      rn.__name__ = "flixel.system.frontEnds.LogFrontEnd";
      rn.prototype = {
        advanced: function (a, b, c) {
          if (b == null) {
            b = xa.NORMAL;
          }
          if (!(a instanceof Array)) {
            a = [a];
          }
          if (b.throwException) {
            throw G.thrown(b.toLogString(a));
          }
        },
        __class__: rn
      };
      function zb() {}
      g["haxe.Log"] = zb;
      zb.__name__ = "haxe.Log";
      zb.formatOutput = function (a, b) {
        var c = v.string(a);
        if (b == null) {
          return c;
        }
        var d = b.fileName + ":" + b.lineNumber;
        if (b.customParams != null) {
          var e = 0;
          for (b = b.customParams; e < b.length;) {
            a = b[e];
            ++e;
            c += ", " + v.string(a);
          }
        }
        return d + ": " + c;
      };
      zb.trace = function (a, b) {
        a = zb.formatOutput(a, b);
        if (typeof console != "undefined" && console.log != null) {
          console.log(a);
        }
      };
      function va() {}
      g["js.Boot"] = va;
      va.__name__ = "js.Boot";
      va.getClass = function (a) {
        if (a == null) {
          return null;
        }
        if (a instanceof Array) {
          return Array;
        }
        var b = a.__class__;
        if (b != null) {
          return b;
        }
        a = va.__nativeClassName(a);
        if (a != null) {
          return va.__resolveNativeClass(a);
        } else {
          return null;
        }
      };
      va.__string_rec = function (a, b) {
        if (a == null) {
          return "null";
        }
        if (b.length >= 5) {
          return "<...>";
        }
        var c = typeof a;
        if (c == "function" && (a.__name__ || a.__ename__)) {
          c = "object";
        }
        switch (c) {
          case "function":
            return "<function>";
          case "object":
            if (a.__enum__) {
              var d = z[a.__enum__].__constructs__[a._hx_index];
              c = d._hx_name;
              if (d.__params__) {
                b += "\t";
                var e = [];
                var f = 0;
                for (d = d.__params__; f < d.length;) {
                  var k = d[f];
                  f += 1;
                  e.push(va.__string_rec(a[k], b));
                }
                return c + "(" + e.join(",") + ")";
              }
              return c;
            }
            if (a instanceof Array) {
              c = "[";
              b += "\t";
              e = 0;
              for (f = a.length; e < f;) {
                d = e++;
                c += (d > 0 ? "," : "") + va.__string_rec(a[d], b);
              }
              return c + "]";
            }
            try {
              e = a.toString;
            } catch (t) {
              Pa.lastError = t;
              return "???";
            }
            if (e != null && e != Object.toString && typeof e == "function" && (c = a.toString(), c != "[object Object]")) {
              return c;
            }
            c = "{\n";
            b += "\t";
            e = a.hasOwnProperty != null;
            f = null;
            for (f in a) {
              if ((!e || !!a.hasOwnProperty(f)) && f != "prototype" && f != "__class__" && f != "__super__" && f != "__interfaces__" && f != "__properties__") {
                if (c.length != 2) {
                  c += ", \n";
                }
                c += b + f + " : " + va.__string_rec(a[f], b);
              }
            }
            b = b.substring(1);
            return c + ("\n" + b + "}");
          case "string":
            return a;
          default:
            return String(a);
        }
      };
      va.__interfLoop = function (a, b) {
        if (a == null) {
          return false;
        }
        if (a == b) {
          return true;
        }
        var c = a.__interfaces__;
        if (c != null) {
          for (var d = 0, e = c.length; d < e;) {
            var f = d++;
            f = c[f];
            if (f == b || va.__interfLoop(f, b)) {
              return true;
            }
          }
        }
        return va.__interfLoop(a.__super__, b);
      };
      va.__instanceof = function (a, b) {
        if (b == null) {
          return false;
        }
        switch (b) {
          case Array:
            return a instanceof Array;
          case Fp:
            return typeof a == "boolean";
          case Gp:
            return a != null;
          case rp:
            return typeof a == "number";
          case Ti:
            if (typeof a == "number") {
              return (a | 0) === a;
            } else {
              return false;
            }
          case String:
            return typeof a == "string";
          default:
            if (a != null) {
              if (typeof b == "function") {
                if (va.__downcastCheck(a, b)) {
                  return true;
                }
              } else if (typeof b == "object" && va.__isNativeObj(b) && a instanceof b) {
                return true;
              }
            } else {
              return false;
            }
            if (b == Vi && a.__name__ != null || b == xp && a.__ename__ != null) {
              return true;
            } else if (a.__enum__ != null) {
              return z[a.__enum__] == b;
            } else {
              return false;
            }
        }
      };
      va.__downcastCheck = function (a, b) {
        if (a instanceof b) {
          return true;
        } else if (b.__isInterface__) {
          return va.__interfLoop(va.getClass(a), b);
        } else {
          return false;
        }
      };
      va.__implements = function (a, b) {
        return va.__interfLoop(va.getClass(a), b);
      };
      va.__cast = function (a, b) {
        if (a == null || va.__instanceof(a, b)) {
          return a;
        }
        throw G.thrown("Cannot cast " + v.string(a) + " to " + v.string(b));
      };
      va.__nativeClassName = function (a) {
        a = va.__toStr.call(a).slice(8, -1);
        if (a == "Object" || a == "Function" || a == "Math" || a == "JSON") {
          return null;
        } else {
          return a;
        }
      };
      va.__isNativeObj = function (a) {
        return va.__nativeClassName(a) != null;
      };
      va.__resolveNativeClass = function (a) {
        return E[a];
      };
      function Wi(a) {
        this.initialSeed = this.internalSeed = 1;
        if (a != null) {
          a = a < 1 ? 1 : a;
          a = (a > 2147483646 ? 2147483646 : a) | 0;
        } else {
          a = Math.random() * 2147483647 | 0;
          a = a < 1 ? 1 : a;
          a = (a > 2147483646 ? 2147483646 : a) | 0;
          a = a < 1 ? 1 : a;
          a = (a > 2147483646 ? 2147483646 : a) | 0;
        }
        a = a < 1 ? 1 : a;
        this.initialSeed = (this.internalSeed = (a > 2147483646 ? 2147483646 : a) | 0) | 0;
      }
      g["flixel.math.FlxRandom"] = Wi;
      Wi.__name__ = "flixel.math.FlxRandom";
      Wi.prototype = {
        getObject_Array_String: function (a, b, c, d) {
          if (c == null) {
            c = 0;
          }
          var e = null;
          if (a.length != 0) {
            if (b == null) {
              e = [];
              for (var f = 0, k = a.length; f < k;) {
                f++;
                e.push(1);
              }
              b = e;
            }
            if (d == null) {
              d = a.length - 1;
            }
            e = a.length - 1;
            f = c < 0 ? 0 : c;
            c = (e != null && f > e ? e : f) | 0;
            e = a.length - 1;
            f = d < 0 ? 0 : d;
            d = (e != null && f > e ? e : f) | 0;
            if (d < c) {
              c += d;
              d = c - d;
              c -= d;
            }
            if (d > b.length - 1) {
              d = b.length - 1;
            }
            e = [];
            f = c;
            for (k = d + 1; f < k;) {
              d = f++;
              e.push(b[d]);
            }
            Wi._arrayFloatHelper = e;
            e = a[c + this.weightedPick(Wi._arrayFloatHelper)];
          }
          return e;
        },
        int: function (a, b, c) {
          if (b == null) {
            b = 2147483647;
          }
          if (a == null) {
            a = 0;
          }
          if (a == 0 && b == 2147483647 && c == null) {
            return (this.internalSeed = this.internalSeed * 48271 % 2147483647) | 0;
          }
          if (a == b) {
            return a;
          }
          if (a > b) {
            a += b;
            b = a - b;
            a -= b;
          }
          if (c == null) {
            return Math.floor(a + (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647 * (b - a + 1));
          }
          do {
            var d = Math.floor(a + (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647 * (b - a + 1));
          } while (c.indexOf(d) >= 0);
          return d;
        },
        float: function (a, b, c) {
          if (b == null) {
            b = 1;
          }
          if (a == null) {
            a = 0;
          }
          if (a == 0 && b == 1 && c == null) {
            return (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647;
          }
          if (a == b) {
            var d = a;
          } else {
            if (a > b) {
              a += b;
              b = a - b;
              a -= b;
            }
            if (c == null) {
              d = a + (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647 * (b - a);
            } else {
              do {
                d = a + (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647 * (b - a);
              } while (c.indexOf(d) >= 0);
            }
          }
          return d;
        },
        weightedPick: function (a) {
          var b = 0;
          var c = 0;
          for (var d = 0; d < a.length;) {
            var e = a[d];
            ++d;
            b += e;
          }
          b = this.float(0, b);
          d = 0;
          for (var f = a.length; d < f;) {
            e = d++;
            if (b < a[e]) {
              c = e;
              break;
            }
            b -= a[e];
          }
          return c;
        },
        __class__: Wi
      };
      function Jd() {
        this.status = nh.EMPTY;
      }
      g["flixel.util.FlxSave"] = Jd;
      Jd.__name__ = "flixel.util.FlxSave";
      Jd.__interfaces__ = [rb];
      Jd.validate = function (a) {
        return a;
      };
      Jd.validateAndWarn = function (a, b) {
        return Jd.validate(a);
      };
      Jd.prototype = {
        destroy: function () {
          this._sharedObject = null;
          this.status = nh.EMPTY;
          this.data = null;
        },
        bind: function (a, b) {
          this.destroy();
          a = Jd.validateAndWarn(a, "name");
          if (b != null) {
            b = Jd.validateAndWarn(b, "path");
          }
          try {
            this._sharedObject = ad.getLocal(a, b);
            this.status = nh.BOUND(a, b);
          } catch (d) {
            var c = G.caught(d);
            if (c instanceof Pb) {
              h.log.advanced("Error:" + c.get_message() + " name:\"" + a + "\", path:\"" + b + "\".", xa.ERROR, true);
              this.destroy();
              return false;
            }
            throw d;
          }
          this.data = this._sharedObject.data;
          return true;
        },
        mergeDataFrom: function (a, b, c, d, e) {
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = false;
          }
          if (!this.checkStatus()) {
            return false;
          }
          var f = new Jd();
          if (f.bind(a, b)) {
            a = this.mergeData(f.data, c, e);
            if (d) {
              f.erase();
            }
            f.destroy();
            return a;
          }
          f.destroy();
          return false;
        },
        mergeData: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          var d = false;
          for (var e = 0, f = ja.fields(a); e < f.length;) {
            var k = f[e];
            ++e;
            d = true;
            if (b || !Object.prototype.hasOwnProperty.call(this.data, k)) {
              this.data[k] = ja.field(a, k);
            }
          }
          if (d) {
            return this.flush(c);
          } else {
            return true;
          }
        },
        flush: function (a) {
          if (a == null) {
            a = 0;
          }
          if (!this.checkStatus()) {
            return false;
          }
          try {
            if (this._sharedObject.flush(a) != 0) {
              this.status = nh.ERROR("FlxSave is requesting extra storage space.");
            }
          } catch (b) {
            if (G.caught(b) instanceof Pb) {
              this.status = nh.ERROR("There was an problem flushing the save data.");
            } else {
              throw b;
            }
          }
          this.checkStatus();
          if (this.status._hx_index == 1) {
            return true;
          } else {
            return false;
          }
        },
        erase: function () {
          if (!this.checkStatus()) {
            return false;
          }
          this._sharedObject.clear();
          this.data = {};
          return true;
        },
        checkStatus: function () {
          var a = this.status;
          switch (a._hx_index) {
            case 0:
              h.log.advanced("You must call FlxSave.bind() before you can read or write data.", xa.WARNING, true);
              break;
            case 2:
              h.log.advanced(a.msg, xa.ERROR, true);
              break;
            default:
              return true;
          }
          return false;
        },
        isEmpty: function () {
          if (this.data != null) {
            return ja.fields(this.data).length == 0;
          } else {
            return true;
          }
        },
        __class__: Jd
      };
      function Xi() {
        this.verticalAlign = sn.CENTER;
        this.horizontalAlign = tn.CENTER;
        var a = 0;
        var b = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = W.pool.get().set(a, b);
        a._inPool = false;
        this.deviceSize = a;
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = W.pool.get().set(a, b);
        a._inPool = false;
        this.gameSize = a;
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = W.pool.get().set(a, b);
        a._inPool = false;
        this.scale = a;
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = W.pool.get().set(a, b);
        a._inPool = false;
        this.offset = a;
      }
      g["flixel.system.scaleModes.BaseScaleMode"] = Xi;
      Xi.__name__ = "flixel.system.scaleModes.BaseScaleMode";
      Xi.prototype = {
        onMeasure: function (a, b) {
          h.width = h.initialWidth;
          h.height = h.initialHeight;
          this.updateGameSize(a, b);
          this.updateDeviceSize(a, b);
          this.updateScaleOffset();
          this.updateGamePosition();
        },
        updateGameSize: function (a, b) {
          var c = this.gameSize;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
        },
        updateDeviceSize: function (a, b) {
          var c = this.deviceSize;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
        },
        updateScaleOffset: function () {
          this.scale.set_x(this.gameSize.x / h.width);
          this.scale.set_y(this.gameSize.y / h.height);
          this.updateOffsetX();
          this.updateOffsetY();
        },
        updateOffsetX: function () {
          var a = this.offset;
          switch (this.horizontalAlign._hx_index) {
            case 0:
              var b = 0;
              break;
            case 1:
              b = Math.ceil((this.deviceSize.x - this.gameSize.x) * 0.5);
              break;
            case 2:
              b = this.deviceSize.x - this.gameSize.x;
          }
          a.set_x(b);
        },
        updateOffsetY: function () {
          var a = this.offset;
          switch (this.verticalAlign._hx_index) {
            case 0:
              var b = 0;
              break;
            case 1:
              b = Math.ceil((this.deviceSize.y - this.gameSize.y) * 0.5);
              break;
            case 2:
              b = this.deviceSize.y - this.gameSize.y;
          }
          a.set_y(b);
        },
        updateGamePosition: function () {
          if (h.game != null) {
            h.game.set_x(this.offset.x);
            h.game.set_y(this.offset.y);
          }
        },
        __class__: Xi
      };
      function Bk(a) {
        if (a == null) {
          a = false;
        }
        Xi.call(this);
        this.fillScreen = a;
      }
      g["flixel.system.scaleModes.RatioScaleMode"] = Bk;
      Bk.__name__ = "flixel.system.scaleModes.RatioScaleMode";
      Bk.__super__ = Xi;
      Bk.prototype = q(Xi.prototype, {
        updateGameSize: function (a, b) {
          var c = h.width / h.height;
          var d = a / b < c;
          if (this.fillScreen) {
            d = !d;
          }
          if (d) {
            this.gameSize.set_x(a);
            this.gameSize.set_y(Math.floor(this.gameSize.x / c));
          } else {
            this.gameSize.set_y(b);
            this.gameSize.set_x(Math.floor(this.gameSize.y * c));
          }
        },
        __class__: Bk
      });
      function un() {
        this.focusLost = new Vd();
        this.focusGained = new Vd();
        this.postDraw = new Vd();
        this.preDraw = new Vd();
        this.postUpdate = new Vd();
        this.preUpdate = new Vd();
        this.postGameStart = new Vd();
        this.preGameStart = new Vd();
        this.postGameReset = new Vd();
        this.preGameReset = new Vd();
        this.gameResized = new Ck();
        this.preStateCreate = new sf();
        this.postStateSwitch = new Vd();
        this.preStateSwitch = new Vd();
      }
      g["flixel.system.frontEnds.SignalFrontEnd"] = un;
      un.__name__ = "flixel.system.frontEnds.SignalFrontEnd";
      un.prototype = {
        __class__: un
      };
      function h() {}
      g["flixel.FlxG"] = h;
      h.__name__ = "flixel.FlxG";
      h.__properties__ = {
        set_mouse: "set_mouse",
        set_fullscreen: "set_fullscreen",
        get_fullscreen: "get_fullscreen",
        set_drawFramerate: "set_drawFramerate",
        set_updateFramerate: "set_updateFramerate"
      };
      h.canSwitchTo = function (a) {
        return h.game._state.switchTo(a);
      };
      h.overlap = function (a, b, c, d) {
        if (a == null) {
          a = h.game._state;
        }
        if (b == a) {
          b = null;
        }
        R.divisions = h.worldDivisions;
        var e = R.recycle(h.worldBounds.x, h.worldBounds.y, h.worldBounds.width, h.worldBounds.height);
        e.load(a, b, c, d);
        a = e.execute();
        e.destroy();
        return a;
      };
      h.addChildBelowMouse = function (a, b) {
        if (b == null) {
          b = 0;
        }
        var c = h.game.getChildIndex(h.game._inputContainer);
        var d = h.game.get_numChildren();
        c = bc.maxAdd(c, b, d);
        h.game.addChildAt(a, c);
        return a;
      };
      h.init = function (a, b, c) {
        if (b < 0) {
          b = -b;
        }
        if (c < 0) {
          c = -c;
        }
        h.game = a;
        h.width = b;
        h.height = c;
        h.initRenderMethod();
        h.initialWidth = b;
        h.initialHeight = c;
        b = oa.get_current().stage.stageWidth;
        c = oa.get_current().stage.stageHeight;
        h.scaleMode.onMeasure(b, c);
        h.keys = h.inputs.add_flixel_input_keyboard_FlxKeyboard(new Dk());
        h.set_mouse(h.inputs.add_flixel_input_mouse_FlxMouse(new hg(a._inputContainer)));
        h.touches = h.inputs.add_flixel_input_touch_FlxTouchManager(new Th());
        h.gamepads = h.inputs.add_flixel_input_gamepad_FlxGamepadManager(new ig());
        h.accelerometer = new vn();
        h.initSave();
        h.plugins = new wn();
        h.vcr = new xn();
        h.sound = new yn();
      };
      h.initRenderMethod = function () {
        h.renderMethod = Uh.BLITTING;
        switch (oa.get_current().stage.window.context.type) {
          case "opengl":
          case "opengles":
          case "webgl":
            var a = Uh.DRAW_TILES;
            break;
          default:
            a = Uh.BLITTING;
        }
        h.renderMethod = a;
        h.renderBlit = h.renderMethod == Uh.BLITTING;
        h.renderTile = h.renderMethod == Uh.DRAW_TILES;
        $b.defaultPixelPerfectPosition = h.renderBlit;
      };
      h.initSave = function () {
        if (h.save.status._hx_index != 1) {
          var a = oa.get_current().stage.application.meta.h.file;
          h.save.bind(Jd.validate(a));
          if (h.save.isEmpty()) {
            h.save.mergeDataFrom("flixel", null, false, false);
          }
        }
      };
      h.reset = function () {
        var a = h.random;
        var b = Math.random() * 2147483647 | 0;
        b = b < 1 ? 1 : b;
        b = (b > 2147483646 ? 2147483646 : b) | 0;
        b = b < 1 ? 1 : b;
        b = (b > 2147483646 ? 2147483646 : b) | 0;
        b = b < 1 ? 1 : b;
        a.initialSeed = (a.internalSeed = (b > 2147483646 ? 2147483646 : b) | 0) | 0;
        h.bitmap.reset();
        h.inputs.reset();
        h.sound.destroy(true);
        h.autoPause = true;
        h.fixedTimestep = true;
        h.timeScale = 1;
        h.animationTimeScale = 1;
        h.elapsed = 0;
        h.maxElapsed = 0.1;
        a = h.worldBounds;
        var c = b = -10;
        var d = h.width + 20;
        var e = h.height + 20;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.x = b;
        a.y = c;
        a.width = d;
        a.height = e;
        h.worldDivisions = 6;
      };
      h.set_mouse = function (a) {
        if (h.mouse == null) {
          h.mouse = h.inputs.add_flixel_input_mouse_FlxMouse(a);
          return h.mouse;
        }
        var b = h.mouse;
        var c = h.inputs.replace_flixel_input_mouse_FlxMouse(b, a);
        if (c != null) {
          h.mouse = c;
          b.destroy();
          return a;
        } else {
          return b;
        }
      };
      h.set_updateFramerate = function (a) {
        if (a < h.drawFramerate) {
          h.log.advanced("FlxG.framerate: the game's framerate shouldn't be smaller than the flash framerate, since it can stop your game from updating.", xa.WARNING, true);
        }
        h.updateFramerate = a;
        h.game._stepMS = Math.abs(1000 / a);
        h.game._stepSeconds = h.game._stepMS / 1000;
        if (h.game._maxAccumulation < h.game._stepMS) {
          h.game._maxAccumulation = h.game._stepMS;
        }
        return a;
      };
      h.set_drawFramerate = function (a) {
        if (a > h.updateFramerate) {
          h.log.advanced("FlxG.drawFramerate: the update framerate shouldn't be smaller than the draw framerate, since it can stop your game from updating.", xa.WARNING, true);
        }
        h.drawFramerate = Math.abs(a) | 0;
        if (h.game.stage != null) {
          h.game.stage.set_frameRate(h.drawFramerate);
        }
        h.game._maxAccumulation = 2000 / h.drawFramerate - 1;
        if (h.game._maxAccumulation < h.game._stepMS) {
          h.game._maxAccumulation = h.game._stepMS;
        }
        return a;
      };
      h.get_fullscreen = function () {
        if (oa.get_current().stage.get_displayState() != 0) {
          return oa.get_current().stage.get_displayState() == 1;
        } else {
          return true;
        }
      };
      h.set_fullscreen = function (a) {
        oa.get_current().stage.set_displayState(a ? 0 : 2);
        return a;
      };
      var Uh = z["flixel.FlxRenderMethod"] = {
        __ename__: "flixel.FlxRenderMethod",
        __constructs__: null,
        DRAW_TILES: {
          _hx_name: "DRAW_TILES",
          _hx_index: 0,
          __enum__: "flixel.FlxRenderMethod",
          toString: p
        },
        BLITTING: {
          _hx_name: "BLITTING",
          _hx_index: 1,
          __enum__: "flixel.FlxRenderMethod",
          toString: p
        }
      };
      Uh.__constructs__ = [Uh.DRAW_TILES, Uh.BLITTING];
      function mk(a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = 60;
        }
        if (d == null) {
          d = 60;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._skipSplash = this._resetGame = false;
        this._customSoundTray = Ek;
        this._lostFocus = false;
        this._total = this._startTime = 0;
        this._gameJustStarted = false;
        this.filtersEnabled = true;
        this.ticks = 0;
        this.focusLostFramerate = 10;
        Ua.call(this);
        this._inputContainer = new Ua();
        if (a == 0) {
          a = oa.get_current().stage.stageWidth;
        }
        if (b == 0) {
          b = oa.get_current().stage.stageHeight;
        }
        h.init(this, a, b);
        h.set_updateFramerate(d);
        h.set_drawFramerate(e);
        this._accumulator = this._stepMS;
        this._skipSplash = f;
        this._initialState = c == null ? Cg.fromMaker(function () {
          return new lc();
        }) : vp.toNextState(c);
        this.addEventListener("addedToStage", m(this, this.create));
      }
      g["flixel.FlxGame"] = mk;
      mk.__name__ = "flixel.FlxGame";
      mk.__super__ = Ua;
      mk.prototype = q(Ua.prototype, {
        create: function (a) {
          if (this.stage != null) {
            this.removeEventListener("addedToStage", m(this, this.create));
            this._startTime = this.getTimer();
            this._total = this.getTimer() - this._startTime;
            this.stage.set_scaleMode(2);
            this.stage.align = 6;
            this.stage.set_frameRate(h.drawFramerate);
            this.addChild(this._inputContainer);
            this.soundTray = yb.createInstance(this._customSoundTray, []);
            this.addChild(this.soundTray);
            this.stage.addEventListener("deactivate", m(this, this.onFocusLost));
            this.stage.addEventListener("activate", m(this, this.onFocus));
            var b = this;
            h.signals.preGameReset.dispatch();
            if (this._skipSplash) {
              this._nextState = this._initialState;
              this._gameJustStarted = true;
            } else {
              this._nextState = Cg.fromMaker(function () {
                return new Yi(b._initialState);
              });
              this._skipSplash = true;
            }
            h.reset();
            h.signals.postGameReset.dispatch();
            this.switchState();
            if (h.updateFramerate < h.drawFramerate) {
              h.log.advanced("FlxG.updateFramerate: The update framerate shouldn't be smaller than the draw framerate, since it can slow down your game.", xa.WARNING, true);
            }
            this.stage.addEventListener("enterFrame", m(this, this.onEnterFrame));
            this.stage.addEventListener("resize", m(this, this.onResize));
            this.resizeGame(oa.get_current().stage.stageWidth, oa.get_current().stage.stageHeight);
            Q.addEventListener("change", (u = h.bitmap, m(u, u.onAssetsReload)));
          }
        },
        onFocus: function (a) {
          this._lostFocus = false;
          h.signals.focusGained.dispatch();
          this._state.onFocus();
          if (h.autoPause) {
            this.stage.set_frameRate(h.drawFramerate);
            h.sound.onFocus();
            a = 0;
            for (var b = h.inputs.list; a < b.length;) {
              var c = b[a];
              ++a;
              c.onFocus();
            }
          }
        },
        onFocusLost: function (a) {
          this._lostFocus = true;
          h.signals.focusLost.dispatch();
          this._state.onFocusLost();
          if (h.autoPause) {
            this.stage.set_frameRate(this.focusLostFramerate);
            h.sound.onFocusLost();
            a = 0;
            for (var b = h.inputs.list; a < b.length;) {
              var c = b[a];
              ++a;
              c.onFocusLost();
            }
          }
        },
        onResize: function (a) {
          a = oa.get_current().stage.stageWidth;
          var b = oa.get_current().stage.stageHeight;
          if (h.renderTile) {
            h.bitmap.onContext();
          }
          this.resizeGame(a, b);
        },
        resizeGame: function (a, b) {
          h.scaleMode.onMeasure(a, b);
          this._state.onResize(a, b);
          h.cameras.resize();
          h.signals.gameResized.dispatch(a, b);
          if (this.soundTray != null) {
            this.soundTray.screenCenter();
          }
        },
        onEnterFrame: function (a) {
          this.ticks = this.getTimer() - this._startTime;
          this._elapsedMS = this.ticks - this._total;
          this._total = this.ticks;
          if (this.soundTray != null && this.soundTray.active) {
            this.soundTray.update(this._elapsedMS);
          }
          if (!this._lostFocus || !h.autoPause) {
            if (h.vcr.paused) {
              if (h.vcr.stepRequested) {
                h.vcr.stepRequested = false;
              } else if (this._nextState == null) {
                return;
              }
            }
            if (h.fixedTimestep) {
              this._accumulator += this._elapsedMS;
              this._accumulator = this._accumulator > this._maxAccumulation ? this._maxAccumulation : this._accumulator;
              while (this._accumulator >= this._stepMS) {
                this.step();
                this._accumulator -= this._stepMS;
              }
            } else {
              this.step();
            }
            this.draw();
          }
        },
        switchState: function () {
          h.cameras.reset();
          h.inputs.onStateSwitch();
          h.sound.destroy();
          h.signals.preStateSwitch.dispatch();
          if (this._state != null) {
            this._state.destroy();
          }
          h.bitmap.clearCache();
          this._state = Cg.createInstance(this._nextState);
          this._state._constructor = this._nextState;
          this._nextState = null;
          if (this._gameJustStarted) {
            h.signals.preGameStart.dispatch();
          }
          h.signals.preStateCreate.dispatch(this._state);
          this._state.create();
          if (this._gameJustStarted) {
            this.gameStart();
          }
          h.signals.postStateSwitch.dispatch();
        },
        gameStart: function () {
          h.signals.postGameStart.dispatch();
          this._gameJustStarted = false;
        },
        step: function () {
          if (this._resetGame) {
            var a = this;
            h.signals.preGameReset.dispatch();
            if (this._skipSplash) {
              this._nextState = this._initialState;
              this._gameJustStarted = true;
            } else {
              this._nextState = Cg.fromMaker(function () {
                return new Yi(a._initialState);
              });
              this._skipSplash = true;
            }
            h.reset();
            h.signals.postGameReset.dispatch();
            this._resetGame = false;
          }
          this.handleReplayRequests();
          this.update();
        },
        handleReplayRequests: function () {},
        update: function () {
          if (this._state.active && this._state.exists) {
            if (this._nextState != null) {
              this.switchState();
            }
            this.updateElapsed();
            h.signals.preUpdate.dispatch();
            this.updateInput();
            h.sound.update(h.elapsed);
            var a = h.elapsed;
            for (var b = 0, c = h.plugins.list; b < c.length;) {
              var d = c[b];
              ++b;
              if (d.exists && d.active) {
                d.update(a);
              }
            }
            this._state.tryUpdate(h.elapsed);
            a = h.elapsed;
            b = 0;
            for (c = h.cameras.list; b < c.length;) {
              d = c[b];
              ++b;
              if (d != null && d.exists && d.active) {
                d.update(a);
              }
            }
            h.signals.postUpdate.dispatch();
            for (a = h.swipes.length; a-- > 0;) {
              b = h.swipes.pop();
              if (b != null) {
                b.destroy();
              }
            }
            this.set_filters(this.filtersEnabled ? this._filters : null);
          }
        },
        updateElapsed: function () {
          if (h.fixedTimestep) {
            h.elapsed = h.timeScale * this._stepSeconds;
          } else {
            h.elapsed = this._elapsedMS / 1000 * h.timeScale;
            var a = h.maxElapsed * h.timeScale;
            if (h.elapsed > a) {
              h.elapsed = a;
            }
          }
        },
        updateInput: function () {
          for (var a = 0, b = h.inputs.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.update();
          }
        },
        draw: function () {
          if (this._state.visible && this._state.exists) {
            h.signals.preDraw.dispatch();
            if (h.renderTile) {
              Ld.drawCalls = 0;
            }
            var a = h.cameras;
            for (var b = 0, c = a.list; b < c.length;) {
              var d = c[b];
              ++b;
              if (d != null && d.exists && d.visible) {
                if (h.renderBlit) {
                  d.checkResize();
                  if (a.useBufferLocking) {
                    d.buffer.lock();
                  }
                }
                if (h.renderTile) {
                  d.clearDrawStack();
                  d.canvas.get_graphics().clear();
                }
                if (h.renderBlit) {
                  d.fill(d.bgColor, d.useBgAlphaBlending);
                  d.screen.dirty = true;
                } else {
                  d.fill(d.bgColor & 16777215, d.useBgAlphaBlending, (d.bgColor >> 24 & 255) / 255);
                }
              }
            }
            if (h.plugins.drawOnTop) {
              this._state.draw();
              b = 0;
              c = h.plugins.list;
              while (b < c.length) {
                a = c[b];
                ++b;
                if (a.exists && a.visible) {
                  a.draw();
                }
              }
            } else {
              b = 0;
              for (c = h.plugins.list; b < c.length;) {
                a = c[b];
                ++b;
                if (a.exists && a.visible) {
                  a.draw();
                }
              }
              this._state.draw();
            }
            if (h.renderTile && h.renderTile) {
              b = 0;
              c = h.cameras.list;
              while (b < c.length) {
                d = c[b];
                ++b;
                if (d != null && d.exists && d.visible) {
                  d.render();
                }
              }
            }
            a = h.cameras;
            b = 0;
            for (c = a.list; b < c.length;) {
              d = c[b];
              ++b;
              if (d != null && d.exists && d.visible) {
                d.drawFX();
                if (h.renderBlit) {
                  if (a.useBufferLocking) {
                    d.buffer.unlock();
                  }
                  d.screen.dirty = true;
                }
              }
            }
            h.signals.postDraw.dispatch();
          }
        },
        getTimer: function () {
          return oa.getTimer();
        },
        __class__: mk
      });
      function jg(a) {
        this._curPart = 0;
        lc.call(this);
        this.nextState = a;
      }
      g["flixel.system.FlxSplash"] = jg;
      jg.__name__ = "flixel.system.FlxSplash";
      jg.__super__ = lc;
      jg.prototype = q(lc.prototype, {
        create: function () {
          this._cachedBgColor = h.cameras.get_bgColor();
          h.cameras.set_bgColor(-16777216);
          this._cachedTimestep = h.fixedTimestep;
          h.fixedTimestep = false;
          this._cachedAutoPause = h.autoPause;
          h.autoPause = false;
          h.keys.enabled = false;
          this._times = [0.041, 0.184, 0.334, 0.495, 0.636];
          this._colors = [47394, 16761138, 16066382, 3555839, 314875];
          this._functions = [m(this, this.drawGreen), m(this, this.drawYellow), m(this, this.drawRed), m(this, this.drawBlue), m(this, this.drawLightBlue)];
          for (var a = 0, b = this._times; a < b.length;) {
            var c = b[a];
            ++a;
            new Ec().start(c, m(this, this.timerCallback));
          }
          a = oa.get_current().stage.stageWidth;
          b = oa.get_current().stage.stageHeight;
          this._sprite = new Ua();
          oa.get_current().stage.addChild(this._sprite);
          this._gfx = this._sprite.get_graphics();
          this._text = new Wc();
          this._text.set_selectable(false);
          this._text.set_embedFonts(true);
          c = new ld(Nd.FONT_DEFAULT, 16, 16777215);
          c.align = 0;
          this._text.set_defaultTextFormat(c);
          this._text.set_text("HaxeFlixel");
          oa.get_current().stage.addChild(this._text);
          this.onResize(a, b);
          if (!jg.muted) {
            h.sound.load(Nd.getSound("flixel/sounds/flixel")).play();
          }
        },
        destroy: function () {
          this._functions = this._colors = this._times = this._text = this._gfx = this._sprite = null;
          lc.prototype.destroy.call(this);
        },
        complete: function () {
          var a = this.nextState;
          var b = h.game._state;
          if (!(a instanceof lc) || !!h.canSwitchTo(a)) {
            h.game._state.startOutro(function () {
              if (h.game._state == b) {
                h.game._nextState = a;
              } else {
                h.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", xa.WARNING, true);
              }
            });
          }
        },
        onResize: function (a, b) {
          lc.prototype.onResize.call(this, a, b);
          this._sprite.set_x(a / 2);
          this._sprite.set_y(b / 2 - h.game.get_scaleY() * 20);
          this._text.set_width(a / h.game.get_scaleX());
          this._text.set_x(0);
          this._text.set_y(this._sprite.get_y() + h.game.get_scaleY() * 80);
          this._sprite.set_scaleX(this._text.set_scaleX(h.game.get_scaleX()));
          this._sprite.set_scaleY(this._text.set_scaleY(h.game.get_scaleY()));
        },
        timerCallback: function (a) {
          var b = this;
          this._functions[this._curPart]();
          this._text.set_textColor(this._colors[this._curPart]);
          this._text.set_text("HaxeFlixel");
          this._curPart++;
          if (this._curPart == 5) {
            Da.tween(this._sprite, {
              alpha: 0
            }, 3, {
              ease: Xa.quadOut,
              onComplete: function (a) {
                b.complete();
              }
            });
            Da.tween(this._text, {
              alpha: 0
            }, 3, {
              ease: Xa.quadOut
            });
          }
        },
        drawGreen: function () {
          this._gfx.beginFill(47394);
          this._gfx.moveTo(0, -37);
          this._gfx.lineTo(1, -37);
          this._gfx.lineTo(37, 0);
          this._gfx.lineTo(37, 1);
          this._gfx.lineTo(1, 37);
          this._gfx.lineTo(0, 37);
          this._gfx.lineTo(-37, 1);
          this._gfx.lineTo(-37, 0);
          this._gfx.lineTo(0, -37);
          this._gfx.endFill();
        },
        drawYellow: function () {
          this._gfx.beginFill(16761138);
          this._gfx.moveTo(-50, -50);
          this._gfx.lineTo(-25, -50);
          this._gfx.lineTo(0, -37);
          this._gfx.lineTo(-37, 0);
          this._gfx.lineTo(-50, -25);
          this._gfx.lineTo(-50, -50);
          this._gfx.endFill();
        },
        drawRed: function () {
          this._gfx.beginFill(16066382);
          this._gfx.moveTo(50, -50);
          this._gfx.lineTo(25, -50);
          this._gfx.lineTo(1, -37);
          this._gfx.lineTo(37, 0);
          this._gfx.lineTo(50, -25);
          this._gfx.lineTo(50, -50);
          this._gfx.endFill();
        },
        drawBlue: function () {
          this._gfx.beginFill(3555839);
          this._gfx.moveTo(-50, 50);
          this._gfx.lineTo(-25, 50);
          this._gfx.lineTo(0, 37);
          this._gfx.lineTo(-37, 1);
          this._gfx.lineTo(-50, 25);
          this._gfx.lineTo(-50, 50);
          this._gfx.endFill();
        },
        drawLightBlue: function () {
          this._gfx.beginFill(314875);
          this._gfx.moveTo(50, 50);
          this._gfx.lineTo(25, 50);
          this._gfx.lineTo(1, 37);
          this._gfx.lineTo(37, 1);
          this._gfx.lineTo(50, 25);
          this._gfx.lineTo(50, 50);
          this._gfx.endFill();
        },
        startOutro: function (a) {
          h.cameras.set_bgColor(this._cachedBgColor);
          h.fixedTimestep = this._cachedTimestep;
          h.autoPause = this._cachedAutoPause;
          h.keys.enabled = true;
          oa.get_current().stage.removeChild(this._sprite);
          oa.get_current().stage.removeChild(this._text);
          lc.prototype.startOutro.call(this, a);
        },
        __class__: jg
      });
      function Yi(a) {
        jg.call(this, a);
      }
      g["flixel._FlxGame.FlxIntroSplash"] = Yi;
      Yi.__name__ = "flixel._FlxGame.FlxIntroSplash";
      Yi.__super__ = jg;
      Yi.prototype = q(jg.prototype, {
        startOutro: function (a) {
          h.game._gameJustStarted = true;
          jg.prototype.startOutro.call(this, a);
        },
        __class__: Yi
      });
      function Zi() {}
      g["flixel.IFlxSprite"] = Zi;
      Zi.__name__ = "flixel.IFlxSprite";
      Zi.__isInterface__ = true;
      Zi.__interfaces__ = [Ak];
      Zi.prototype = {
        __class__: Zi,
        __properties__: {
          set_y: "set_y",
          set_x: "set_x"
        }
      };
      function $i(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 17;
        }
        this._prevDrawParams = {
          graphicKey: null,
          tilesX: -1,
          tilesY: -1,
          scaleX: 0,
          scaleY: 0,
          spacingX: 0,
          spacingY: 0,
          repeatAxes: 17,
          angle: 0
        };
        this._blitGraphic = null;
        var e = 0;
        var f = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = W.pool.get().set(e, f);
        e._inPool = false;
        this._blitOffset = e;
        this.blitMode = Fk.AUTO;
        this.drawBlit = h.renderBlit;
        f = e = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = W.pool.get().set(e, f);
        e._inPool = false;
        this.spacing = e;
        this.repeatAxes = 17;
        F.call(this, 0, 0, a);
        this.repeatAxes = b;
        a = this.spacing;
        e = c;
        f = d;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        a.set_x(e);
        a.set_y(f);
      }
      g["flixel.addons.display.FlxBackdrop"] = $i;
      $i.__name__ = "flixel.addons.display.FlxBackdrop";
      $i.__super__ = F;
      $i.prototype = q(F.prototype, {
        destroy: function () {
          this.spacing = ca.destroy(this.spacing);
          this._blitOffset = ca.destroy(this._blitOffset);
          this._blitGraphic = ca.destroy(this._blitGraphic);
          F.prototype.destroy.call(this);
        },
        draw: function () {
          if (this.repeatAxes == 0) {
            F.prototype.draw.call(this);
          } else {
            this.checkEmptyFrame();
            if (this.alpha != 0 && this._frame.type != 2 && !(this.scale.x <= 0) && !(this.scale.y <= 0)) {
              if (this.dirty) {
                this.calcFrame(this.useFramePixels);
              }
              if (this.drawBlit) {
                this.drawToLargestCamera();
              }
              for (var a = this.getCamerasLegacy(), b = 0; b < a.length;) {
                var c = a[b];
                ++b;
                if (c.visible && c.exists && this.isOnScreen(c)) {
                  if (this.isSimpleRender(c)) {
                    this.drawSimple(c);
                  } else {
                    this.drawComplex(c);
                  }
                }
              }
            }
          }
        },
        isOnScreen: function (a) {
          if (this.repeatAxes == 17) {
            return true;
          }
          if (this.repeatAxes == 0) {
            return F.prototype.isOnScreen.call(this, a);
          }
          if (a == null) {
            a = h.camera;
          }
          var b = this.getScreenBounds(this._rect, a);
          var c = this.repeatAxes;
          if (c == 1 || c == 17) {
            b.x = a.viewMarginX;
          }
          c = this.repeatAxes;
          if (c == 16 || c == 17) {
            b.y = a.viewMarginY;
          }
          a = b.x + b.width > a.viewMarginX && b.x < a.width - a.viewMarginX && b.y + b.height > a.viewMarginY && b.y < a.height - a.viewMarginY;
          if (b._weak && !b._inPool) {
            b._inPool = true;
            b._weak = false;
            Ha._pool.putUnsafe(b);
          }
          return a;
        },
        drawToLargestCamera: function () {
          for (var a = null, b = 0, c = this.getCamerasLegacy(), d = 0; d < c.length;) {
            var e = c[d];
            ++d;
            if (e.visible && e.exists && this.isOnScreen(e) && (e.width - e.viewMarginX * 2) * (e.height - e.viewMarginY * 2) > b) {
              a = e;
              b = (e.width - e.viewMarginX * 2) * (e.height - e.viewMarginY * 2);
            }
          }
          if (a != null) {
            this.regenGraphic(a);
          }
        },
        isSimpleRenderBlit: function (a) {
          if (this.repeatAxes == 0) {
            return F.prototype.isSimpleRenderBlit.call(this, a);
          } else if (F.prototype.isSimpleRenderBlit.call(this, a) || this.drawBlit) {
            if (a != null) {
              return this.isPixelPerfectRender(a);
            } else {
              return this.pixelPerfectRender;
            }
          } else {
            return false;
          }
        },
        drawSimple: function (a) {
          if (this.repeatAxes == 0) {
            F.prototype.drawSimple.call(this, a);
          } else {
            var b = !this.drawBlit;
            var c = this.drawBlit ? this._blitGraphic.get_imageFrame().get_frame() : this._frame;
            var d = c.frame.width;
            var e = c.frame.height;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            var f = d;
            var k = e;
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            var t = W.pool.get().set(f, k);
            t._inPool = false;
            f = t;
            if (b) {
              t = this.spacing;
              d = t.x;
              e = t.y;
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              f.set_x(f.x + d);
              f.set_y(f.y + e);
              e = t;
              if (e._weak) {
                e.put();
              }
            }
            var n = this.getScreenPosition(this._point, a);
            t = this.offset;
            d = t.x;
            e = t.y;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            n.set_x(n.x - d);
            n.set_y(n.y - e);
            e = t;
            if (e._weak) {
              e.put();
            }
            b = k = 1;
            if (this.repeatAxes != 0) {
              e = a.getViewMarginRect();
              n = this.repeatAxes;
              if (n == 1 || n == 17) {
                k = this.modMin(this._point.x + this.frameWidth, f.x, e.x) - this.frameWidth;
                d = this.modMax(this._point.x, f.x, e.x + e.width) + f.x;
                k = Math.round((d - k) / f.x);
                this._point.set_x(this.modMin(this._point.x + this.frameWidth, this.frameWidth + this.spacing.x, e.x) - this.frameWidth);
              }
              n = this.repeatAxes;
              if (n == 16 || n == 17) {
                b = this.modMin(this._point.y + this.frameHeight, f.y, e.y) - this.frameHeight;
                d = this.modMax(this._point.y, f.y, e.y + e.height) + f.y;
                b = Math.round((d - b) / f.y);
                this._point.set_y(this.modMin(this._point.y + this.frameHeight, this.frameHeight + this.spacing.y, e.y) - this.frameHeight);
              }
              if (!e._inPool) {
                e._inPool = true;
                e._weak = false;
                Ha._pool.putUnsafe(e);
              }
            }
            if (this.drawBlit) {
              n = this._point;
              t = this._blitOffset;
              d = t.x;
              e = t.y;
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              n.set_x(n.x + d);
              n.set_y(n.y + e);
              e = t;
              if (e._weak) {
                e.put();
              }
            }
            if (h.renderBlit) {
              this.calcFrame(true);
            }
            a.buffer.lock();
            for (e = 0; e < k;) {
              d = e++;
              t = 0;
              n = b;
              while (t < n) {
                var K = t++;
                this._flashPoint.setTo(this._point.x + f.x * d, this._point.y + f.y * K);
                if (this.isPixelPerfectRender(a)) {
                  this._flashPoint.x = Math.floor(this._flashPoint.x);
                  this._flashPoint.y = Math.floor(this._flashPoint.y);
                }
                K = this.drawBlit ? this._blitGraphic.bitmap : this.framePixels;
                a.copyPixels(c, K, K.rect, this._flashPoint, this.colorTransform, this.blend, this.antialiasing);
              }
            }
            a.buffer.unlock();
          }
        },
        drawComplex: function (a) {
          if (this.repeatAxes == 0) {
            F.prototype.drawComplex.call(this, a);
          } else {
            var b = !this.drawBlit;
            var c = this.drawBlit ? this._blitGraphic : this.graphic;
            var d = this.drawBlit ? this._blitGraphic.get_imageFrame().get_frame() : this._frame;
            var e = this.flipX != this._frame.flipX;
            var f = this.flipY != this._frame.flipY;
            d.prepareMatrix(this._matrix, 0, this.animation._curAnim != null ? e != this.animation._curAnim.flipX : e, this.animation._curAnim != null ? f != this.animation._curAnim.flipY : f);
            this._matrix.translate(-this.origin.x, -this.origin.y);
            var k = d.frame.width;
            var t = d.frame.height;
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            e = k;
            f = t;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            var n = W.pool.get().set(e, f);
            n._inPool = false;
            e = n;
            if (b) {
              k = (d.frame.width + this.spacing.x) * this.scale.x;
              t = (d.frame.height + this.spacing.y) * this.scale.y;
              if (t == null) {
                t = 0;
              }
              if (k == null) {
                k = 0;
              }
              e.set_x(k);
              e.set_y(t);
              this._matrix.scale(this.scale.x, this.scale.y);
              if (this.bakedRotationAngle <= 0) {
                if (this._angleChanged) {
                  b = Math.PI / 180 * this.angle;
                  this._sinAngle = Math.sin(b);
                  this._cosAngle = Math.cos(b);
                  this._angleChanged = false;
                }
                if (this.angle != 0) {
                  t = this._matrix;
                  b = this._cosAngle;
                  f = this._sinAngle;
                  k = t.a * b - t.b * f;
                  t.b = t.a * f + t.b * b;
                  t.a = k;
                  k = t.c * b - t.d * f;
                  t.d = t.c * f + t.d * b;
                  t.c = k;
                  k = t.tx * b - t.ty * f;
                  t.ty = t.tx * f + t.ty * b;
                  t.tx = k;
                }
              }
            }
            b = null;
            if (h.renderTile) {
              b = this.alpha != 1 || this.color != 16777215;
              f = this.colorTransform != null && Xe.hasRGBAOffsets(this.colorTransform);
              b = a.startQuadBatch(c, b, f, this.blend, this.antialiasing, this.shader);
            } else {
              a.buffer.lock();
            }
            var K = this.getScreenPosition(this._point, a);
            n = this.offset;
            k = n.x;
            t = n.y;
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            K.set_x(K.x - k);
            K.set_y(K.y - t);
            t = n;
            if (t._weak) {
              t.put();
            }
            c = f = 1;
            if (this.repeatAxes != 0) {
              t = a.getViewMarginRect();
              k = this.getScreenBounds(null, a);
              K = this.repeatAxes;
              if (K == 1 || K == 17) {
                f = (this.frameWidth + this.spacing.x) * this.scale.x;
                n = this.modMin(k.x + k.width, f, t.x) - k.width;
                f = this.modMax(k.x, f, t.x + t.width) + f;
                f = Math.round((f - n) / e.x);
                this._point.set_x(n + this._point.x - k.x);
              }
              K = this.repeatAxes;
              if (K == 16 || K == 17) {
                c = (this.frameHeight + this.spacing.y) * this.scale.y;
                n = this.modMin(k.y + k.height, c, t.y) - k.height;
                c = this.modMax(k.y, c, t.y + t.height) + c;
                c = Math.round((c - n) / e.y);
                this._point.set_y(n + this._point.y - k.y);
              }
              if (!t._inPool) {
                t._inPool = true;
                t._weak = false;
                Ha._pool.putUnsafe(t);
              }
              if (!k._inPool) {
                k._inPool = true;
                k._weak = false;
                Ha._pool.putUnsafe(k);
              }
            }
            K = this._point;
            n = this.origin;
            k = n.x;
            t = n.y;
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            K.set_x(K.x + k);
            K.set_y(K.y + t);
            t = n;
            if (t._weak) {
              t.put();
            }
            if (this.drawBlit) {
              K = this._point;
              n = this._blitOffset;
              k = n.x;
              t = n.y;
              if (t == null) {
                t = 0;
              }
              if (k == null) {
                k = 0;
              }
              K.set_x(K.x + k);
              K.set_y(K.y + t);
              t = n;
              if (t._weak) {
                t.put();
              }
            }
            t = new Rc();
            for (k = 0; k < f;) {
              n = k++;
              K = 0;
              for (var ya = c; K < ya;) {
                var l = K++;
                t.copyFrom(this._matrix);
                t.translate(this._point.x + e.x * n, this._point.y + e.y * l);
                if (this.isPixelPerfectRender(a)) {
                  t.tx = Math.floor(t.tx);
                  t.ty = Math.floor(t.ty);
                }
                if (h.renderBlit) {
                  a.drawPixels(d, this.drawBlit ? this._blitGraphic.bitmap : this.framePixels, t, this.colorTransform, this.blend, this.antialiasing, this.shader);
                } else {
                  b.addQuad(d, t, this.colorTransform);
                }
              }
            }
            if (h.renderBlit) {
              a.buffer.unlock();
            }
          }
        },
        modMin: function (a, b, c) {
          return a - Math.floor((a - c) / b) * b;
        },
        modMax: function (a, b, c) {
          return a - Math.ceil((a - c) / b) * b;
        },
        regenGraphic: function (a) {
          var b = (this.frameWidth + this.spacing.x) * this.scale.x;
          var c = (this.frameHeight + this.spacing.y) * this.scale.y;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          var d = b;
          var e = c;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          d = W.pool.get().set(d, e);
          d._inPool = false;
          var f = a.getViewMarginRect();
          a = e = 1;
          if (this.repeatAxes != 0) {
            var k = this.blitMode;
            switch (k._hx_index) {
              case 0:
                k = this.repeatAxes;
                if (k == 1 || k == 17) {
                  e = Math.ceil(f.width / d.x) + 1;
                }
                k = this.repeatAxes;
                if (k == 16 || k == 17) {
                  a = Math.ceil(f.height / d.y) + 1;
                }
                break;
              case 1:
                b = k.x;
                c = k.y;
                if (b == 1) {
                  if (c != 1) {
                    k = this.repeatAxes;
                    if (k == 1 || k == 17) {
                      k = Math.ceil(f.width / d.x) + 1;
                      e = b < k ? b : k;
                    }
                    k = this.repeatAxes;
                    if (k == 16 || k == 17) {
                      k = Math.ceil(f.height / d.y) + 1;
                      a = c < k ? c : k;
                    }
                  }
                } else {
                  k = this.repeatAxes;
                  if (k == 1 || k == 17) {
                    k = Math.ceil(f.width / d.x) + 1;
                    e = b < k ? b : k;
                  }
                  k = this.repeatAxes;
                  if (k == 16 || k == 17) {
                    k = Math.ceil(f.height / d.y) + 1;
                    a = c < k ? c : k;
                  }
                }
                break;
              case 2:
                b = k.tiles;
                if (b != 1) {
                  c = b;
                  k = this.repeatAxes;
                  if (k == 1 || k == 17) {
                    k = Math.ceil(f.width / d.x) + 1;
                    e = c < k ? c : k;
                  }
                  k = this.repeatAxes;
                  if (k == 16 || k == 17) {
                    k = Math.ceil(f.height / d.y) + 1;
                    a = c < k ? c : k;
                  }
                }
                break;
              case 3:
                b = k.portions;
                if (b == 1) {
                  k = this.repeatAxes;
                  if (k == 1 || k == 17) {
                    e = Math.ceil(f.width / d.x) + 1;
                  }
                  k = this.repeatAxes;
                  if (k == 16 || k == 17) {
                    a = Math.ceil(f.height / d.y) + 1;
                  }
                } else {
                  c = b;
                  k = this.repeatAxes;
                  if (k == 1 || k == 17) {
                    k = this.repeatAxes;
                    e = k == 1 || k == 17 ? Math.ceil(f.width / d.x / c + 1) : 1;
                  }
                  k = this.repeatAxes;
                  if (k == 16 || k == 17) {
                    k = this.repeatAxes;
                    a = k == 16 || k == 17 ? Math.ceil(f.height / d.y / c + 1) : 1;
                  }
                }
            }
          }
          if (!f._inPool) {
            f._inPool = true;
            f._weak = false;
            Ha._pool.putUnsafe(f);
          }
          if (this._prevDrawParams.graphicKey != this.graphic.key || this._prevDrawParams.tilesX != e || this._prevDrawParams.tilesY != a || this._prevDrawParams.scaleX != this.scale.x || this._prevDrawParams.scaleY != this.scale.y || this._prevDrawParams.spacingX != this.spacing.x || this._prevDrawParams.spacingY != this.spacing.y || this._prevDrawParams.repeatAxes != this.repeatAxes || this._prevDrawParams.angle != this.angle) {
            this._prevDrawParams.graphicKey = this.graphic.key;
            this._prevDrawParams.tilesX = e;
            this._prevDrawParams.tilesY = a;
            this._prevDrawParams.scaleX = this.scale.x;
            this._prevDrawParams.scaleY = this.scale.y;
            this._prevDrawParams.spacingX = this.spacing.x;
            this._prevDrawParams.spacingY = this.spacing.y;
            this._prevDrawParams.repeatAxes = this.repeatAxes;
            this._prevDrawParams.angle = this.angle;
            k = this._blitOffset;
            c = b = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            k.set_x(b);
            k.set_y(c);
            f = Math.ceil(e * d.x);
            c = Math.ceil(a * d.y);
            if (this.repeatAxes != 17) {
              b = this.getScreenBounds();
              var t = this.getScreenPosition();
              k = this.repeatAxes;
              if (k != 1 && k != 17) {
                f = Math.ceil(b.width);
                this._blitOffset.set_x(b.x - t.x);
              }
              k = this.repeatAxes;
              if (k != 16 && k != 17) {
                c = Math.ceil(b.height);
                this._blitOffset.set_y(b.y - t.y);
              }
              if (!b._inPool) {
                b._inPool = true;
                b._weak = false;
                Ha._pool.putUnsafe(b);
              }
              t.put();
            }
            if (this._blitGraphic == null || this._blitGraphic.width != f || this._blitGraphic.height != c) {
              this._blitGraphic = h.bitmap.create(f, c, 0, true);
            }
            f = this._blitGraphic.bitmap;
            f.lock();
            f.fillRect(f.rect, 0);
            this.animation.set_frameIndex(0);
            this.calcFrame(true);
            this._matrix.identity();
            this._matrix.translate(-this.origin.x, -this.origin.y);
            this._matrix.scale(this.scale.x, this.scale.y);
            if (this.bakedRotationAngle <= 0) {
              if (this._angleChanged) {
                k = Math.PI / 180 * this.angle;
                this._sinAngle = Math.sin(k);
                this._cosAngle = Math.cos(k);
                this._angleChanged = false;
              }
              if (this.angle != 0) {
                k = this._matrix;
                c = this._cosAngle;
                b = this._sinAngle;
                t = k.a * c - k.b * b;
                k.b = k.a * b + k.b * c;
                k.a = t;
                t = k.c * c - k.d * b;
                k.d = k.c * b + k.d * c;
                k.c = t;
                t = k.tx * c - k.ty * b;
                k.ty = k.tx * b + k.ty * c;
                k.tx = t;
              }
            }
            this._matrix.translate(this.origin.x, this.origin.y);
            this._matrix.translate(-this._blitOffset.x, -this._blitOffset.y);
            k = this._point;
            b = this._matrix.tx;
            c = this._matrix.ty;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            k.set_x(b);
            k.set_y(c);
            k = this.repeatAxes;
            c = k != 1 && k != 17 || this.angle == 0 ? 0 : 1;
            k = this.repeatAxes;
            t = k != 16 && k != 17 || this.angle == 0 ? 0 : 1;
            k = -c;
            for (b = e + c; k < b;) {
              e = k++;
              c = -t;
              for (var n = a + t; c < n;) {
                var K = c++;
                this._matrix.tx = this._point.x + e * d.x;
                this._matrix.ty = this._point.y + K * d.y;
                f.draw(this.framePixels, this._matrix);
              }
            }
            f.unlock();
          }
          d.put();
        },
        __class__: $i
      });
      var Fk = z["flixel.addons.display.BackdropBlitMode"] = {
        __ename__: "flixel.addons.display.BackdropBlitMode",
        __constructs__: null,
        AUTO: {
          _hx_name: "AUTO",
          _hx_index: 0,
          __enum__: "flixel.addons.display.BackdropBlitMode",
          toString: p
        },
        MAX_TILES_XY: (u = function (a, b) {
          return {
            _hx_index: 1,
            x: a,
            y: b,
            __enum__: "flixel.addons.display.BackdropBlitMode",
            toString: p
          };
        }, u._hx_name = "MAX_TILES_XY", u.__params__ = ["x", "y"], u),
        MAX_TILES: (u = function (a) {
          return {
            _hx_index: 2,
            tiles: a,
            __enum__: "flixel.addons.display.BackdropBlitMode",
            toString: p
          };
        }, u._hx_name = "MAX_TILES", u.__params__ = ["tiles"], u),
        SPLIT: (u = function (a) {
          return {
            _hx_index: 3,
            portions: a,
            __enum__: "flixel.addons.display.BackdropBlitMode",
            toString: p
          };
        }, u._hx_name = "SPLIT", u.__params__ = ["portions"], u)
      };
      Fk.__constructs__ = [Fk.AUTO, Fk.MAX_TILES_XY, Fk.MAX_TILES, Fk.SPLIT];
      function oh() {}
      g["flixel.addons.display.FlxGridOverlay"] = oh;
      oh.__name__ = "flixel.addons.display.FlxGridOverlay";
      oh.create = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = -2501163;
        }
        if (f == null) {
          f = -1579290;
        }
        if (e == null) {
          e = true;
        }
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = -1;
        }
        if (c == -1) {
          c = h.width;
        }
        if (d == -1) {
          d = h.height;
        }
        if (c < a || d < b) {
          return null;
        }
        a = oh.createGrid(a, b, c, d, e, f, k);
        b = new F();
        b.set_pixels(a);
        b.dirty = true;
        return b;
      };
      oh.createGrid = function (a, b, c, d, e, f, k) {
        var t = f;
        var n = f;
        var h = new T(c, d, true);
        for (var ya = 0; ya <= d;) {
          if (ya > 0 && n == t && e) {
            n = n == f ? k : f;
          } else if (ya > 0 && n != t && e == 0) {
            n = n == k ? f : k;
          }
          for (var l = 0; l <= c;) {
            if (l == 0) {
              t = n;
            }
            h.fillRect(new da(l, ya, a, b), n);
            n = n == f ? k : f;
            l += a;
          }
          ya += b;
        }
        return h;
      };
      function ge(a) {
        this.byteCode = a;
        this.precisionHint = 1;
        this.__glSourceDirty = true;
        this.__numPasses = 1;
        this.__data = yp._new(a);
      }
      g["openfl.display.Shader"] = ge;
      ge.__name__ = "openfl.display.Shader";
      ge.prototype = {
        __clearUseArray: function () {
          for (var a = 0, b = this.__paramBool; a < b.length;) {
            var c = b[a];
            ++a;
            c.__useArray = false;
          }
          a = 0;
          for (b = this.__paramFloat; a < b.length;) {
            c = b[a];
            ++a;
            c.__useArray = false;
          }
          a = 0;
          for (b = this.__paramInt; a < b.length;) {
            c = b[a];
            ++a;
            c.__useArray = false;
          }
        },
        __createGLShader: function (a, b) {
          var c = this.__context.gl;
          var d = c.createShader(b);
          c.shaderSource(d, a);
          c.compileShader(d);
          var e = c.getShaderInfoLog(d);
          var f = e != null && w.trim(e) != "";
          var k = c.getShaderParameter(d, c.COMPILE_STATUS);
          if (f || k == 0) {
            b = (k == 0 ? "Error" : "Info") + (b == c.VERTEX_SHADER ? " compiling vertex shader" : " compiling fragment shader");
            b = b + ("\n" + e) + ("\n" + a);
            if (k == 0) {
              Va.error(b, {
                fileName: "openfl/display/Shader.hx",
                lineNumber: 334,
                className: "openfl.display.Shader",
                methodName: "__createGLShader"
              });
            } else if (f) {
              Va.debug(b, {
                fileName: "openfl/display/Shader.hx",
                lineNumber: 335,
                className: "openfl.display.Shader",
                methodName: "__createGLShader"
              });
            }
          }
          return d;
        },
        __createGLProgram: function (a, b) {
          var c = this.__context.gl;
          a = this.__createGLShader(a, c.VERTEX_SHADER);
          var d = this.__createGLShader(b, c.FRAGMENT_SHADER);
          b = c.createProgram();
          for (var e = 0, f = this.__paramFloat; e < f.length;) {
            var k = f[e];
            ++e;
            if (k.name.indexOf("Position") > -1 && w.startsWith(k.name, "openfl_")) {
              c.bindAttribLocation(b, 0, k.name);
              break;
            }
          }
          c.attachShader(b, a);
          c.attachShader(b, d);
          c.linkProgram(b);
          if (c.getProgramParameter(b, c.LINK_STATUS) == 0) {
            c = "Unable to initialize the shader program\n" + c.getProgramInfoLog(b);
            Va.error(c, {
              fileName: "openfl/display/Shader.hx",
              lineNumber: 368,
              className: "openfl.display.Shader",
              methodName: "__createGLProgram"
            });
          }
          return b;
        },
        __disable: function () {
          if (this.program != null) {
            this.__disableGL();
          }
        },
        __disableGL: function () {
          var a = this.__context.gl;
          var b = 0;
          for (var c = 0, d = this.__inputBitmapData; c < d.length;) {
            var e = d[c];
            ++c;
            e.__disableGL(this.__context, b);
            ++b;
            if (b == a.MAX_TEXTURE_IMAGE_UNITS) {
              break;
            }
          }
          c = 0;
          for (d = this.__paramBool; c < d.length;) {
            b = d[c];
            ++c;
            b.__disableGL(this.__context);
          }
          c = 0;
          for (d = this.__paramFloat; c < d.length;) {
            b = d[c];
            ++c;
            b.__disableGL(this.__context);
          }
          c = 0;
          for (d = this.__paramInt; c < d.length;) {
            b = d[c];
            ++c;
            b.__disableGL(this.__context);
          }
          this.__context.__bindGLArrayBuffer(null);
          if (this.__context.__context.type == "opengl") {
            a.disable(a.TEXTURE_2D);
          }
        },
        __enable: function () {
          this.__init();
          if (this.program != null) {
            this.__enableGL();
          }
        },
        __enableGL: function () {
          var a = 0;
          var b = this.__context.gl;
          for (var c = 0, d = this.__inputBitmapData; c < d.length;) {
            var e = d[c];
            ++c;
            b.uniform1i(e.index, a);
            ++a;
          }
          if (this.__context.__context.type == "opengl" && a > 0) {
            b.enable(b.TEXTURE_2D);
          }
        },
        __init: function () {
          if (this.__data == null) {
            this.__data = yp._new(null);
          }
          if (this.__glFragmentSource != null && this.__glVertexSource != null && (this.program == null || !!this.__glSourceDirty)) {
            this.__initGL();
          }
        },
        __initGL: function () {
          if (this.__glSourceDirty || this.__paramBool == null) {
            this.__glSourceDirty = false;
            this.program = null;
            this.__inputBitmapData = [];
            this.__paramBool = [];
            this.__paramFloat = [];
            this.__paramInt = [];
            this.__processGLData(this.get_glVertexSource(), "attribute");
            this.__processGLData(this.get_glVertexSource(), "uniform");
            this.__processGLData(this.get_glFragmentSource(), "uniform");
          }
          if (this.__context != null && this.program == null) {
            var a = this.__context.gl;
            var b = this.precisionHint == 1 ? "precision mediump float;\n" : "precision lowp float;\n";
            var c = b + this.get_glVertexSource();
            b += this.get_glFragmentSource();
            var d = c + b;
            if (Object.prototype.hasOwnProperty.call(this.__context.__programs.h, d)) {
              this.program = this.__context.__programs.h[d];
            } else {
              this.program = this.__context.createProgram(1);
              this.program.__glProgram = this.__createGLProgram(c, b);
              this.__context.__programs.h[d] = this.program;
            }
            if (this.program != null) {
              this.glProgram = this.program.__glProgram;
              c = 0;
              for (b = this.__inputBitmapData; c < b.length;) {
                d = b[c];
                ++c;
                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
              }
              c = 0;
              for (b = this.__paramBool; c < b.length;) {
                d = b[c];
                ++c;
                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
              }
              c = 0;
              for (b = this.__paramFloat; c < b.length;) {
                d = b[c];
                ++c;
                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
              }
              c = 0;
              for (b = this.__paramInt; c < b.length;) {
                d = b[c];
                ++c;
                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
              }
            }
          }
        },
        __processGLData: function (a, b) {
          var c = 0;
          var d;
          for (d = b == "uniform" ? new V("uniform ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", "") : new V("attribute ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", ""); d.matchSub(a, c);) {
            var e = d.matched(1);
            var f = d.matched(2);
            if (!w.startsWith(f, "gl_")) {
              c = b == "uniform";
              if (w.startsWith(e, "sampler")) {
                e = new aj();
                e.name = f;
                e.__isUniform = c;
                this.__inputBitmapData.push(e);
                switch (f) {
                  case "bitmap":
                    this.__bitmap = e;
                    break;
                  case "openfl_Texture":
                    this.__texture = e;
                }
                this.__data[f] = e;
                if (this.__isGenerated) {
                  this[f] = e;
                }
              } else if (!Object.prototype.hasOwnProperty.call(this.__data, f) || ja.field(this.__data, f) == null) {
                switch (e) {
                  case "bool":
                    var k = 0;
                    break;
                  case "bvec2":
                    k = 1;
                    break;
                  case "bvec3":
                    k = 2;
                    break;
                  case "bvec4":
                    k = 3;
                    break;
                  case "dvec2":
                  case "vec2":
                    k = 5;
                    break;
                  case "dvec3":
                  case "vec3":
                    k = 6;
                    break;
                  case "dvec4":
                  case "vec4":
                    k = 7;
                    break;
                  case "double":
                  case "float":
                    k = 4;
                    break;
                  case "mat2":
                  case "mat2x2":
                    k = 12;
                    break;
                  case "mat2x3":
                    k = 13;
                    break;
                  case "mat2x4":
                    k = 14;
                    break;
                  case "mat3x2":
                    k = 15;
                    break;
                  case "mat3":
                  case "mat3x3":
                    k = 16;
                    break;
                  case "mat3x4":
                    k = 17;
                    break;
                  case "mat4x2":
                    k = 18;
                    break;
                  case "mat4x3":
                    k = 19;
                    break;
                  case "mat4":
                  case "mat4x4":
                    k = 20;
                    break;
                  case "int":
                  case "uint":
                    k = 8;
                    break;
                  case "ivec2":
                  case "uvec2":
                    k = 9;
                    break;
                  case "ivec3":
                  case "uvec3":
                    k = 10;
                    break;
                  case "ivec4":
                  case "uvec4":
                    k = 11;
                    break;
                  default:
                    k = null;
                }
                switch (k) {
                  case 1:
                  case 5:
                  case 9:
                    e = 2;
                    break;
                  case 2:
                  case 6:
                  case 10:
                    e = 3;
                    break;
                  case 3:
                  case 7:
                  case 11:
                  case 12:
                    e = 4;
                    break;
                  case 16:
                    e = 9;
                    break;
                  case 20:
                    e = 16;
                    break;
                  default:
                    e = 1;
                }
                switch (k) {
                  case 12:
                    var t = 2;
                    break;
                  case 16:
                    t = 3;
                    break;
                  case 20:
                    t = 4;
                    break;
                  default:
                    t = 1;
                }
                switch (k) {
                  case 0:
                  case 1:
                  case 2:
                  case 3:
                    var n = new kg();
                    n.set_name(f);
                    n.type = k;
                    n.__arrayLength = t;
                    n.__isBool = true;
                    n.__isUniform = c;
                    n.__length = e;
                    this.__paramBool.push(n);
                    if (f == "openfl_HasColorTransform") {
                      this.__hasColorTransform = n;
                    }
                    this.__data[f] = n;
                    if (this.__isGenerated) {
                      this[f] = n;
                    }
                    break;
                  case 8:
                  case 9:
                  case 10:
                  case 11:
                    n = new kg();
                    n.set_name(f);
                    n.type = k;
                    n.__arrayLength = t;
                    n.__isInt = true;
                    n.__isUniform = c;
                    n.__length = e;
                    this.__paramInt.push(n);
                    this.__data[f] = n;
                    if (this.__isGenerated) {
                      this[f] = n;
                    }
                    break;
                  default:
                    n = new kg();
                    n.set_name(f);
                    n.type = k;
                    n.__arrayLength = t;
                    if (t > 0) {
                      k = t * t;
                      k = k != null ? new Float32Array(k) : null;
                      n.__uniformMatrix = k;
                    }
                    n.__isFloat = true;
                    n.__isUniform = c;
                    n.__length = e;
                    this.__paramFloat.push(n);
                    if (w.startsWith(f, "openfl_")) {
                      switch (f) {
                        case "openfl_Alpha":
                          this.__alpha = n;
                          break;
                        case "openfl_ColorMultiplier":
                          this.__colorMultiplier = n;
                          break;
                        case "openfl_ColorOffset":
                          this.__colorOffset = n;
                          break;
                        case "openfl_Matrix":
                          this.__matrix = n;
                          break;
                        case "openfl_Position":
                          this.__position = n;
                          break;
                        case "openfl_TextureCoord":
                          this.__textureCoord = n;
                          break;
                        case "openfl_TextureSize":
                          this.__textureSize = n;
                      }
                    }
                    this.__data[f] = n;
                    if (this.__isGenerated) {
                      this[f] = n;
                    }
                }
              }
              f = d.matchedPos();
              c = f.pos + f.len;
            }
          }
        },
        __update: function () {
          if (this.program != null) {
            this.__updateGL();
          }
        },
        __updateFromBuffer: function (a, b) {
          if (this.program != null) {
            this.__updateGLFromBuffer(a, b);
          }
        },
        __updateGL: function () {
          var a = 0;
          for (var b = 0, c = this.__inputBitmapData; b < c.length;) {
            var d = c[b];
            ++b;
            d.__updateGL(this.__context, a);
            ++a;
          }
          b = 0;
          for (c = this.__paramBool; b < c.length;) {
            a = c[b];
            ++b;
            a.__updateGL(this.__context);
          }
          b = 0;
          for (c = this.__paramFloat; b < c.length;) {
            a = c[b];
            ++b;
            a.__updateGL(this.__context);
          }
          b = 0;
          for (c = this.__paramInt; b < c.length;) {
            a = c[b];
            ++b;
            a.__updateGL(this.__context);
          }
        },
        __updateGLFromBuffer: function (a, b) {
          for (var c = 0, d, e, f, k, t, n = 0, h = a.inputCount; n < h;) {
            t = n++;
            d = a.inputRefs[t];
            e = a.inputs[t];
            f = a.inputFilter[t];
            k = a.inputMipFilter[t];
            t = a.inputWrap[t];
            if (e != null) {
              d.__updateGL(this.__context, c, e, f, k, t);
              ++c;
            }
          }
          n = this.__context.gl;
          if (a.paramDataLength > 0) {
            if (a.paramDataBuffer == null) {
              a.paramDataBuffer = n.createBuffer();
            }
            this.__context.__bindGLArrayBuffer(a.paramDataBuffer);
            Xc.bufferData(n, n.ARRAY_BUFFER, a.paramData, n.DYNAMIC_DRAW);
          } else {
            this.__context.__bindGLArrayBuffer(null);
          }
          e = d = c = 0;
          f = a.paramBoolCount;
          k = a.paramFloatCount;
          var ya = a.paramData;
          var l = null;
          var L = null;
          var g = null;
          n = 0;
          for (h = a.paramCount; n < h;) {
            t = n++;
            var p = false;
            if (t < f) {
              var v = a.paramRefs_Bool[c];
              for (var m = 0, q = a.overrideBoolCount; m < q;) {
                var w = m++;
                if (v.name == a.overrideBoolNames[w]) {
                  l = a.overrideBoolValues[w];
                  p = true;
                  break;
                }
              }
              if (p) {
                v.__updateGL(this.__context, l);
              } else {
                v.__updateGLFromBuffer(this.__context, ya, a.paramPositions[t], a.paramLengths[t], b);
              }
              ++c;
            } else if (t < f + k) {
              v = a.paramRefs_Float[d];
              m = 0;
              for (q = a.overrideFloatCount; m < q;) {
                w = m++;
                if (v.name == a.overrideFloatNames[w]) {
                  L = a.overrideFloatValues[w];
                  p = true;
                  break;
                }
              }
              if (p) {
                v.__updateGL(this.__context, L);
              } else {
                v.__updateGLFromBuffer(this.__context, ya, a.paramPositions[t], a.paramLengths[t], b);
              }
              ++d;
            } else {
              v = a.paramRefs_Int[e];
              m = 0;
              for (q = a.overrideIntCount; m < q;) {
                w = m++;
                if (v.name == a.overrideIntNames[w]) {
                  g = a.overrideIntValues[w];
                  p = true;
                  break;
                }
              }
              if (p) {
                v.__updateGL(this.__context, g);
              } else {
                v.__updateGLFromBuffer(this.__context, ya, a.paramPositions[t], a.paramLengths[t], b);
              }
              ++e;
            }
          }
        },
        get_glFragmentSource: function () {
          return this.__glFragmentSource;
        },
        get_glVertexSource: function () {
          return this.__glVertexSource;
        },
        __class__: ge,
        __properties__: {
          get_glVertexSource: "get_glVertexSource",
          get_glFragmentSource: "get_glFragmentSource"
        }
      };
      function ph(a) {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (bitmap, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}";
        }
        ge.call(this, a);
        this.__isGenerated = true;
        this.__initGL();
      }
      g["openfl.display.GraphicsShader"] = ph;
      ph.__name__ = "openfl.display.GraphicsShader";
      ph.__super__ = ge;
      ph.prototype = q(ge.prototype, {
        __class__: ph
      });
      function Wd() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\tgl_FragColor = flixel_texture2D(bitmap, openfl_TextureCoordv);\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\t\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\t\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\t\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        ph.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      g["flixel.graphics.tile.FlxGraphicsShader"] = Wd;
      Wd.__name__ = "flixel.graphics.tile.FlxGraphicsShader";
      Wd.__super__ = ph;
      Wd.prototype = q(ph.prototype, {
        __class__: Wd
      });
      function he(a, b) {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\n\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\tgl_FragColor = flixel_texture2D(bitmap, openfl_TextureCoordv);\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\t\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\t\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\t\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        if (a != null && a.length > 0) {
          this.set_glFragmentSource(a);
        } else {
          this.set_glFragmentSource(he.BASE_FRAGMENT_SOURCE);
        }
        if (b != null && b.length > 0) {
          this.set_glVertexSource(b);
        } else {
          this.set_glVertexSource(he.BASE_VERTEX_SOURCE);
        }
        Wd.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      g["flixel.addons.display.FlxRuntimeShader"] = he;
      he.__name__ = "flixel.addons.display.FlxRuntimeShader";
      he.__super__ = Wd;
      he.prototype = q(Wd.prototype, {
        __processGLData: function (a, b) {
          var c = 0;
          var d;
          for (d = b == "uniform" ? new V("uniform ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", "") : new V("attribute ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", ""); d.matchSub(a, c);) {
            var e = d.matched(1);
            var f = d.matched(2);
            if (!w.startsWith(f, "gl_")) {
              c = b == "uniform";
              if (w.startsWith(e, "sampler")) {
                e = new aj();
                e.name = f;
                e.__isUniform = c;
                this.__inputBitmapData.push(e);
                switch (f) {
                  case "bitmap":
                    this.__bitmap = e;
                    break;
                  case "openfl_Texture":
                    this.__texture = e;
                }
                this.__data[f] = e;
                try {
                  if (this.__isGenerated) {
                    this[f] = e;
                  }
                } catch (K) {
                  Pa.lastError = K;
                }
              } else if (!Object.prototype.hasOwnProperty.call(this.__data, f) || ja.field(this.__data, f) == null) {
                switch (e) {
                  case "bool":
                    var k = 0;
                    break;
                  case "bvec2":
                    k = 1;
                    break;
                  case "bvec3":
                    k = 2;
                    break;
                  case "bvec4":
                    k = 3;
                    break;
                  case "dvec2":
                  case "vec2":
                    k = 5;
                    break;
                  case "dvec3":
                  case "vec3":
                    k = 6;
                    break;
                  case "dvec4":
                  case "vec4":
                    k = 7;
                    break;
                  case "double":
                  case "float":
                    k = 4;
                    break;
                  case "mat2":
                  case "mat2x2":
                    k = 12;
                    break;
                  case "mat2x3":
                    k = 13;
                    break;
                  case "mat2x4":
                    k = 14;
                    break;
                  case "mat3x2":
                    k = 15;
                    break;
                  case "mat3":
                  case "mat3x3":
                    k = 16;
                    break;
                  case "mat3x4":
                    k = 17;
                    break;
                  case "mat4x2":
                    k = 18;
                    break;
                  case "mat4x3":
                    k = 19;
                    break;
                  case "mat4":
                  case "mat4x4":
                    k = 20;
                    break;
                  case "int":
                  case "uint":
                    k = 8;
                    break;
                  case "ivec2":
                  case "uvec2":
                    k = 9;
                    break;
                  case "ivec3":
                  case "uvec3":
                    k = 10;
                    break;
                  case "ivec4":
                  case "uvec4":
                    k = 11;
                    break;
                  default:
                    k = null;
                }
                switch (k) {
                  case 1:
                  case 5:
                  case 9:
                    e = 2;
                    break;
                  case 2:
                  case 6:
                  case 10:
                    e = 3;
                    break;
                  case 3:
                  case 7:
                  case 11:
                  case 12:
                    e = 4;
                    break;
                  case 16:
                    e = 9;
                    break;
                  case 20:
                    e = 16;
                    break;
                  default:
                    e = 1;
                }
                switch (k) {
                  case 12:
                    var t = 2;
                    break;
                  case 16:
                    t = 3;
                    break;
                  case 20:
                    t = 4;
                    break;
                  default:
                    t = 1;
                }
                switch (k) {
                  case 0:
                  case 1:
                  case 2:
                  case 3:
                    var n = new kg();
                    n.set_name(f);
                    n.type = k;
                    n.__arrayLength = t;
                    n.__isBool = true;
                    n.__isUniform = c;
                    n.__length = e;
                    this.__paramBool.push(n);
                    if (f == "openfl_HasColorTransform") {
                      this.__hasColorTransform = n;
                    }
                    this.__data[f] = n;
                    try {
                      if (this.__isGenerated) {
                        this[f] = n;
                      }
                    } catch (K) {
                      Pa.lastError = K;
                    }
                    break;
                  case 8:
                  case 9:
                  case 10:
                  case 11:
                    n = new kg();
                    n.set_name(f);
                    n.type = k;
                    n.__arrayLength = t;
                    n.__isInt = true;
                    n.__isUniform = c;
                    n.__length = e;
                    this.__paramInt.push(n);
                    this.__data[f] = n;
                    try {
                      if (this.__isGenerated) {
                        this[f] = n;
                      }
                    } catch (K) {
                      Pa.lastError = K;
                    }
                    break;
                  default:
                    n = new kg();
                    n.set_name(f);
                    n.type = k;
                    n.__arrayLength = t;
                    if (t > 0) {
                      k = t * t;
                      k = k != null ? new Float32Array(k) : null;
                      n.__uniformMatrix = k;
                    }
                    n.__isFloat = true;
                    n.__isUniform = c;
                    n.__length = e;
                    this.__paramFloat.push(n);
                    if (w.startsWith(f, "openfl_")) {
                      switch (f) {
                        case "openfl_Alpha":
                          this.__alpha = n;
                          break;
                        case "openfl_ColorMultiplier":
                          this.__colorMultiplier = n;
                          break;
                        case "openfl_ColorOffset":
                          this.__colorOffset = n;
                          break;
                        case "openfl_Matrix":
                          this.__matrix = n;
                          break;
                        case "openfl_Position":
                          this.__position = n;
                          break;
                        case "openfl_TextureCoord":
                          this.__textureCoord = n;
                          break;
                        case "openfl_TextureSize":
                          this.__textureSize = n;
                      }
                    }
                    this.__data[f] = n;
                    try {
                      if (this.__isGenerated) {
                        this[f] = n;
                      }
                    } catch (K) {
                      Pa.lastError = K;
                    }
                }
              }
              f = d.matchedPos();
              c = f.pos + f.len;
            }
          }
        },
        set_glFragmentSource: function (a) {
          if (a != null) {
            a = w.replace(w.replace(a, "#pragma header", he.BASE_FRAGMENT_HEADER), "#pragma body", he.BASE_FRAGMENT_BODY);
          }
          if (a != this.__glFragmentSource) {
            this.__glSourceDirty = true;
          }
          return this.__glFragmentSource = a;
        },
        set_glVertexSource: function (a) {
          if (a != null) {
            a = w.replace(w.replace(a, "#pragma header", he.BASE_VERTEX_HEADER), "#pragma body", he.BASE_VERTEX_BODY);
          }
          if (a != this.__glVertexSource) {
            this.__glSourceDirty = true;
          }
          return this.__glVertexSource = a;
        },
        __class__: he
      });
      function Vh(a, b, c, d, e, f, k, t) {
        if (t == null) {
          t = 0;
        }
        if (k == null) {
          k = 0;
        }
        this.shapeDirty = false;
        this.shape_id = Ye.UNKNOWN;
        F.call(this, a, b);
        this.lineStyle = e;
        this.shapeDirty = true;
        this.fillColor = f;
        this.shapeDirty = true;
        if (c == 0 && k != 0) {
          c = k + this.get_strokeBuffer();
        }
        if (d == 0 && t != 0) {
          d = t + this.get_strokeBuffer();
        }
        if (c < 1) {
          c = 1;
        }
        if (d < 1) {
          d = 1;
        }
        this.shapeWidth = k;
        this.shapeHeight = t;
        this.shapeDirty = true;
        this.set_width(c);
        this.set_height(d);
        this.makeGraphic(this.get_width() | 0, this.get_height() | 0, 0, true);
        this._drawStyle = {
          matrix: null,
          colorTransform: null,
          blendMode: 10,
          clipRect: null,
          smoothing: true
        };
        if (this.shapeWidth != 0 && this.shapeHeight != 0 && this.shapeWidth < c && this.shapeHeight < d) {
          this.fixBoundaries(this.shapeWidth, this.shapeHeight);
        }
        this.shapeDirty = true;
      }
      g["flixel.addons.display.shapes.FlxShape"] = Vh;
      Vh.__name__ = "flixel.addons.display.shapes.FlxShape";
      Vh.__super__ = F;
      Vh.prototype = q(F.prototype, {
        destroy: function () {
          this.lineStyle = null;
          this.shapeDirty = true;
          F.prototype.destroy.call(this);
        },
        drawSpecificShape: function (a) {},
        redrawShape: function () {
          var a = (this.shapeWidth | 0) - this.get_pixels().width;
          var b = (this.shapeHeight | 0) - this.get_pixels().height;
          if (a != 0 || b != 0) {
            a = this.shapeWidth;
            b = this.shapeHeight;
            this.makeGraphic(this.get_width() + this.get_strokeBuffer() | 0, this.get_height() + this.get_strokeBuffer() | 0, 0, true);
            this.fixBoundaries(a, b);
          } else {
            this.get_pixels().fillRect(this.get_pixels().rect, 0);
          }
          if (this.lineStyle.thickness > 1) {
            a = this.getStrokeOffsetMatrix(this._matrix);
            this.drawSpecificShape(a);
          } else {
            this.drawSpecificShape();
          }
        },
        draw: function () {
          if (this.shapeDirty) {
            this.redrawShape();
            this.shapeDirty = false;
          }
          F.prototype.draw.call(this);
        },
        fixBoundaries: function (a, b) {
          this.set_width(a);
          this.set_height(b);
          this.offset.set_x(this.getStrokeOffsetX());
          this.offset.set_y(this.getStrokeOffsetY());
          this.shapeDirty = true;
        },
        getStrokeOffsetX: function () {
          return this.get_strokeBuffer() / 4;
        },
        getStrokeOffsetY: function () {
          return this.get_strokeBuffer() / 4;
        },
        get_strokeBuffer: function () {
          return this.lineStyle.thickness * 2;
        },
        getStrokeOffsetMatrix: function (a) {
          var b = this.get_strokeBuffer() / 2;
          a.identity();
          a.translate(b, b);
          return a;
        },
        __class__: Vh,
        __properties__: q(F.prototype.__properties__, {
          get_strokeBuffer: "get_strokeBuffer"
        })
      });
      function Wh(a, b, c, d, e) {
        Vh.call(this, a, b, 0, 0, d, e, c * 2, c * 2);
        this.radius = c;
        this.shapeWidth = c * 2;
        this.shapeHeight = c * 2;
        this.shapeDirty = true;
        this.shape_id = Ye.CIRCLE;
      }
      g["flixel.addons.display.shapes.FlxShapeCircle"] = Wh;
      Wh.__name__ = "flixel.addons.display.shapes.FlxShapeCircle";
      Wh.__super__ = Vh;
      Wh.prototype = q(Vh.prototype, {
        drawSpecificShape: function (a) {
          Hc.drawCircle(this, this.radius, this.radius, this.radius, this.fillColor, this.lineStyle, {
            matrix: a
          });
        },
        getStrokeOffsetX: function () {
          return this.get_strokeBuffer() / 2;
        },
        getStrokeOffsetY: function () {
          return this.get_strokeBuffer() / 2;
        },
        get_strokeBuffer: function () {
          return this.lineStyle.thickness;
        },
        __class__: Wh
      });
      var Ye = z["flixel.addons.display.shapes.FlxShapeType"] = {
        __ename__: "flixel.addons.display.shapes.FlxShapeType",
        __constructs__: null,
        ARROW: {
          _hx_name: "ARROW",
          _hx_index: 0,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        BOX: {
          _hx_name: "BOX",
          _hx_index: 1,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        CIRCLE: {
          _hx_name: "CIRCLE",
          _hx_index: 2,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        CROSS: {
          _hx_name: "CROSS",
          _hx_index: 3,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        DONUT: {
          _hx_name: "DONUT",
          _hx_index: 4,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        DOUBLE_CIRCLE: {
          _hx_name: "DOUBLE_CIRCLE",
          _hx_index: 5,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        GRID: {
          _hx_name: "GRID",
          _hx_index: 6,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        LIGHTNING: {
          _hx_name: "LIGHTNING",
          _hx_index: 7,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        LINE: {
          _hx_name: "LINE",
          _hx_index: 8,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        SQUARE_DONUT: {
          _hx_name: "SQUARE_DONUT",
          _hx_index: 9,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        UNKNOWN: {
          _hx_name: "UNKNOWN",
          _hx_index: 10,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        }
      };
      Ye.__constructs__ = [Ye.ARROW, Ye.BOX, Ye.CIRCLE, Ye.CROSS, Ye.DONUT, Ye.DOUBLE_CIRCLE, Ye.GRID, Ye.LIGHTNING, Ye.LINE, Ye.SQUARE_DONUT, Ye.UNKNOWN];
      function Xh(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
      }
      g["lime.math.Vector2"] = Xh;
      Xh.__name__ = "lime.math.Vector2";
      Xh.prototype = {
        offset: function (a, b) {
          this.x += a;
          this.y += b;
        },
        __toFlashPoint: function () {
          return null;
        },
        __class__: Xh
      };
      function T(a, b, c, d) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        this.__drawableType = 0;
        this.transparent = c;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a < 0) {
          a = 0;
        }
        if (b < 0) {
          b = 0;
        }
        this.width = a;
        this.height = b;
        this.rect = new da(0, 0, a, b);
        this.__textureWidth = a;
        this.__textureHeight = b;
        if (a > 0 && b > 0) {
          if (c) {
            if ((d & -16777216) == 0) {
              d = 0;
            }
          } else {
            d = d & 16777215 | -16777216;
          }
          this.image = new Cb(null, 0, 0, a, b, d << 8 | d >>> 24 & 255);
          this.image.set_transparent(c);
          this.readable = this.__isValid = true;
        }
        this.__renderTransform = new za();
        this.__worldAlpha = 1;
        this.__worldTransform = new za();
        this.__worldColorTransform = new Lb();
        this.__renderable = true;
      }
      g["openfl.display.BitmapData"] = T;
      T.__name__ = "openfl.display.BitmapData";
      T.__interfaces__ = [na];
      T.fromCanvas = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (a == null) {
          return null;
        }
        var c = new T(0, 0, b, 0);
        c.__fromImage(Cb.fromCanvas(a));
        c.image.set_transparent(b);
        return c;
      };
      T.fromImage = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (a == null || a.buffer == null) {
          return null;
        }
        var c = new T(0, 0, b, 0);
        c.__fromImage(a);
        c.image.set_transparent(b);
        if (c.image != null) {
          return c;
        } else {
          return null;
        }
      };
      T.fromTexture = function (a) {
        if (a == null) {
          return null;
        }
        var b = new T(a.__width, a.__height, true, 0);
        b.readable = false;
        b.__texture = a;
        b.__textureContext = a.__textureContext;
        b.image = null;
        return b;
      };
      T.prototype = {
        clone: function () {
          if (this.__isValid) {
            if (this.readable || this.image != null) {
              var a = T.fromImage(this.image.clone(), this.transparent);
            } else {
              a = new T(0, 0, this.transparent, 0);
              a.width = this.width;
              a.height = this.height;
              a.__textureWidth = this.__textureWidth;
              a.__textureHeight = this.__textureHeight;
              a.rect.copyFrom(this.rect);
              a.__framebuffer = this.__framebuffer;
              a.__framebufferContext = this.__framebufferContext;
              a.__texture = this.__texture;
              a.__textureContext = this.__textureContext;
              a.__isValid = true;
            }
          } else {
            a = new T(this.width, this.height, this.transparent, 0);
          }
          a.__worldTransform.copyFrom(this.__worldTransform);
          a.__renderTransform.copyFrom(this.__renderTransform);
          return a;
        },
        colorTransform: function (a, b) {
          if (this.readable) {
            this.image.colorTransform(a.__toLimeRectangle(), b.__toLimeColorMatrix());
          }
        },
        copyPixels: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (this.readable && a != null) {
            if (e != null) {
              T.__tempVector.x = e.x;
              T.__tempVector.y = e.y;
            }
            this.image.copyPixels(a.image, b.__toLimeRectangle(), c.__toLimeVector2(), d != null ? d.image : null, e != null ? T.__tempVector : null, f);
          }
        },
        dispose: function () {
          this.image = null;
          this.height = this.width = 0;
          this.rect = null;
          this.readable = this.__isValid = false;
          this.__textureContext = this.__texture = this.__framebufferContext = this.__framebuffer = this.__vertexBuffer = this.__surface = null;
        },
        disposeImage: function () {
          this.readable = false;
        },
        draw: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (a != null) {
            var k = true;
            var t = null;
            if (a instanceof wa) {
              t = va.__cast(a, wa);
              if (!t.get_visible()) {
                k = false;
                t.set_visible(true);
              }
            }
            a.__update(false, true);
            var n = za.__pool.get();
            n.copyFrom(a.__renderTransform);
            n.invert();
            if (b != null) {
              n.concat(b);
            }
            b = null;
            if (e != null) {
              b = za.__pool.get();
              b.copyFrom(n);
              b.invert();
            }
            var h = new Lb();
            h.__copyFrom(a.__worldColorTransform);
            h.__invert();
            if (this.readable || oa.get_current().stage.context3D == null) {
              if (c != null) {
                var ya = da.__pool.get();
                var l = za.__pool.get();
                a.__getBounds(ya, l);
                var L = Math.ceil(ya.width);
                var g = Math.ceil(ya.height);
                l.tx = -ya.x;
                l.ty = -ya.y;
                L = new T(L, g, true, 0);
                L.draw(a, l);
                L.colorTransform(L.rect, c);
                L.__renderTransform.identity();
                L.__renderTransform.tx = ya.x;
                L.__renderTransform.ty = ya.y;
                L.__renderTransform.concat(a.__renderTransform);
                L.__worldAlpha = a.__worldAlpha;
                L.__worldColorTransform.__copyFrom(a.__worldColorTransform);
                a = L;
                da.__pool.release(ya);
                za.__pool.release(l);
              }
              Ya.convertToCanvas(this.image);
              c = new lg(this.image.buffer.__srcContext);
              c.__allowSmoothing = f;
              c.__overrideBlendMode = d;
              c.__worldTransform = n;
              c.__worldAlpha = 1 / a.__worldAlpha;
              c.__worldColorTransform = h;
              if (e != null) {
                c.__pushMaskRect(e, b);
              }
              this.__drawCanvas(a, c);
            } else {
              if (this.__textureContext == null) {
                this.__textureContext = ia.current.__window.context;
              }
              if (c != null) {
                h.__combine(c);
              }
              c = new tb(oa.get_current().stage.context3D, this);
              c.__allowSmoothing = f;
              c.__pixelRatio = oa.get_current().stage.window.__scale;
              c.__overrideBlendMode = d;
              c.__worldTransform = n;
              c.__worldAlpha = 1 / a.__worldAlpha;
              c.__worldColorTransform = h;
              c.__resize(this.width, this.height);
              if (e != null) {
                c.__pushMaskRect(e, b);
              }
              this.__drawGL(a, c);
            }
            if (e != null) {
              c.__popMaskRect();
              za.__pool.release(b);
            }
            za.__pool.release(n);
            if (t != null && !k) {
              t.set_visible(false);
            }
          }
        },
        fillRect: function (a, b) {
          this.__fillRect(a, b, true);
        },
        getIndexBuffer: function (a, b) {
          if (this.__indexBuffer == null || this.__indexBufferContext != a.__context || b != null && this.__indexBufferGrid == null || this.__indexBufferGrid != null && !this.__indexBufferGrid.equals(b)) {
            this.__indexBufferContext = a.__context;
            this.__indexBuffer = null;
            if (b != null) {
              if (this.__indexBufferGrid == null) {
                this.__indexBufferGrid = new da();
              }
              this.__indexBufferGrid.copyFrom(b);
              var c = b.width;
              b = b.height;
              if (c != 0 && b != 0) {
                this.__indexBufferData = new Uint16Array(54);
                this.__indexBufferData[0] = 0;
                this.__indexBufferData[1] = 1;
                this.__indexBufferData[2] = 2;
                this.__indexBufferData[3] = 2;
                this.__indexBufferData[4] = 1;
                this.__indexBufferData[5] = 3;
                this.__indexBufferData[6] = 4;
                this.__indexBufferData[7] = 0;
                this.__indexBufferData[8] = 5;
                this.__indexBufferData[9] = 5;
                this.__indexBufferData[10] = 0;
                this.__indexBufferData[11] = 2;
                this.__indexBufferData[12] = 6;
                this.__indexBufferData[13] = 4;
                this.__indexBufferData[14] = 7;
                this.__indexBufferData[15] = 7;
                this.__indexBufferData[16] = 4;
                this.__indexBufferData[17] = 5;
                this.__indexBufferData[18] = 8;
                this.__indexBufferData[19] = 9;
                this.__indexBufferData[20] = 0;
                this.__indexBufferData[21] = 0;
                this.__indexBufferData[22] = 9;
                this.__indexBufferData[23] = 1;
                this.__indexBufferData[24] = 10;
                this.__indexBufferData[25] = 8;
                this.__indexBufferData[26] = 4;
                this.__indexBufferData[27] = 4;
                this.__indexBufferData[28] = 8;
                this.__indexBufferData[29] = 0;
                this.__indexBufferData[30] = 11;
                this.__indexBufferData[31] = 10;
                this.__indexBufferData[32] = 6;
                this.__indexBufferData[33] = 6;
                this.__indexBufferData[34] = 10;
                this.__indexBufferData[35] = 4;
                this.__indexBufferData[36] = 12;
                this.__indexBufferData[37] = 13;
                this.__indexBufferData[38] = 8;
                this.__indexBufferData[39] = 8;
                this.__indexBufferData[40] = 13;
                this.__indexBufferData[41] = 9;
                this.__indexBufferData[42] = 14;
                this.__indexBufferData[43] = 12;
                this.__indexBufferData[44] = 10;
                this.__indexBufferData[45] = 10;
                this.__indexBufferData[46] = 12;
                this.__indexBufferData[47] = 8;
                this.__indexBufferData[48] = 15;
                this.__indexBufferData[49] = 14;
                this.__indexBufferData[50] = 11;
                this.__indexBufferData[51] = 11;
                this.__indexBufferData[52] = 14;
                this.__indexBufferData[53] = 10;
                this.__indexBuffer = a.createIndexBuffer(54);
              } else if (c == 0 && b != 0) {
                this.__indexBufferData = new Uint16Array(18);
                this.__indexBufferData[0] = 0;
                this.__indexBufferData[1] = 1;
                this.__indexBufferData[2] = 2;
                this.__indexBufferData[3] = 2;
                this.__indexBufferData[4] = 1;
                this.__indexBufferData[5] = 3;
                this.__indexBufferData[6] = 4;
                this.__indexBufferData[7] = 5;
                this.__indexBufferData[8] = 0;
                this.__indexBufferData[9] = 0;
                this.__indexBufferData[10] = 5;
                this.__indexBufferData[11] = 1;
                this.__indexBufferData[12] = 6;
                this.__indexBufferData[13] = 7;
                this.__indexBufferData[14] = 4;
                this.__indexBufferData[15] = 4;
                this.__indexBufferData[16] = 7;
                this.__indexBufferData[17] = 5;
                this.__indexBuffer = a.createIndexBuffer(18);
              } else if (c != 0 && b == 0) {
                this.__indexBufferData = new Uint16Array(18);
                this.__indexBufferData[0] = 0;
                this.__indexBufferData[1] = 1;
                this.__indexBufferData[2] = 2;
                this.__indexBufferData[3] = 2;
                this.__indexBufferData[4] = 1;
                this.__indexBufferData[5] = 3;
                this.__indexBufferData[6] = 4;
                this.__indexBufferData[7] = 0;
                this.__indexBufferData[8] = 5;
                this.__indexBufferData[9] = 5;
                this.__indexBufferData[10] = 0;
                this.__indexBufferData[11] = 2;
                this.__indexBufferData[12] = 6;
                this.__indexBufferData[13] = 4;
                this.__indexBufferData[14] = 7;
                this.__indexBufferData[15] = 7;
                this.__indexBufferData[16] = 4;
                this.__indexBufferData[17] = 5;
                this.__indexBuffer = a.createIndexBuffer(18);
              }
            } else {
              this.__indexBufferGrid = null;
            }
            if (this.__indexBuffer == null) {
              this.__indexBufferData = new Uint16Array(6);
              this.__indexBufferData[0] = 0;
              this.__indexBufferData[1] = 1;
              this.__indexBufferData[2] = 2;
              this.__indexBufferData[3] = 2;
              this.__indexBufferData[4] = 1;
              this.__indexBufferData[5] = 3;
              this.__indexBuffer = a.createIndexBuffer(6);
            }
            this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData);
          }
          return this.__indexBuffer;
        },
        getVertexBuffer: function (a, b, c) {
          if (this.__vertexBuffer == null || this.__vertexBufferContext != a.__context || b != null && this.__vertexBufferGrid == null || this.__vertexBufferGrid != null && !this.__vertexBufferGrid.equals(b) || c != null && (this.__vertexBufferWidth != c.get_width() || this.__vertexBufferHeight != c.get_height() || this.__vertexBufferScaleX != c.get_scaleX() || this.__vertexBufferScaleY != c.get_scaleY())) {
            this.__uvRect = new da(0, 0, this.width, this.height);
            this.__vertexBufferContext = a.__context;
            this.__vertexBuffer = null;
            if (c != null) {
              this.__vertexBufferWidth = c.get_width();
              this.__vertexBufferHeight = c.get_height();
              this.__vertexBufferScaleX = c.get_scaleX();
              this.__vertexBufferScaleY = c.get_scaleY();
            }
            if (b != null && c != null) {
              if (this.__vertexBufferGrid == null) {
                this.__vertexBufferGrid = new da();
              }
              this.__vertexBufferGrid.copyFrom(b);
              this.__vertexBufferWidth = c.get_width();
              this.__vertexBufferHeight = c.get_height();
              this.__vertexBufferScaleX = c.get_scaleX();
              this.__vertexBufferScaleY = c.get_scaleY();
              var d = b.width;
              var e = b.height;
              if (d != 0 && e != 0) {
                this.__vertexBufferData = new Float32Array(224);
                var f = b.x;
                var k = b.y;
                var t = this.width - d - f;
                var n = this.height - e - k;
                b = f / this.width;
                var h = k / this.height;
                d /= this.width;
                e /= this.height;
                f /= c.get_scaleX();
                k /= c.get_scaleY();
                t /= c.get_scaleX();
                var ya = n / c.get_scaleY();
                n = c.get_width() / c.get_scaleX() - f - t;
                t = c.get_height() / c.get_scaleY() - k - ya;
                this.__vertexBufferData[0] = f;
                this.__vertexBufferData[1] = k;
                this.__vertexBufferData[3] = b * 1;
                this.__vertexBufferData[4] = h * 1;
                this.__vertexBufferData[15] = k;
                this.__vertexBufferData[18] = h * 1;
                this.__vertexBufferData[28] = f;
                this.__vertexBufferData[31] = b * 1;
                this.__vertexBufferData[56] = f + n;
                this.__vertexBufferData[57] = k;
                this.__vertexBufferData[59] = (b + d) * 1;
                this.__vertexBufferData[60] = h * 1;
                this.__vertexBufferData[70] = f + n;
                this.__vertexBufferData[73] = (b + d) * 1;
                this.__vertexBufferData[84] = this.width;
                this.__vertexBufferData[85] = k;
                this.__vertexBufferData[87] = 1;
                this.__vertexBufferData[88] = h * 1;
                this.__vertexBufferData[98] = this.width;
                this.__vertexBufferData[101] = 1;
                this.__vertexBufferData[112] = f;
                this.__vertexBufferData[113] = k + t;
                this.__vertexBufferData[115] = b * 1;
                this.__vertexBufferData[116] = (h + e) * 1;
                this.__vertexBufferData[127] = k + t;
                this.__vertexBufferData[130] = (h + e) * 1;
                this.__vertexBufferData[140] = f + n;
                this.__vertexBufferData[141] = k + t;
                this.__vertexBufferData[143] = (b + d) * 1;
                this.__vertexBufferData[144] = (h + e) * 1;
                this.__vertexBufferData[154] = this.width;
                this.__vertexBufferData[155] = k + t;
                this.__vertexBufferData[157] = 1;
                this.__vertexBufferData[158] = (h + e) * 1;
                this.__vertexBufferData[168] = f;
                this.__vertexBufferData[169] = this.height;
                this.__vertexBufferData[171] = b * 1;
                this.__vertexBufferData[172] = 1;
                this.__vertexBufferData[183] = this.height;
                this.__vertexBufferData[186] = 1;
                this.__vertexBufferData[196] = f + n;
                this.__vertexBufferData[197] = this.height;
                this.__vertexBufferData[199] = (b + d) * 1;
                this.__vertexBufferData[200] = 1;
                this.__vertexBufferData[210] = this.width;
                this.__vertexBufferData[211] = this.height;
                this.__vertexBufferData[213] = 1;
                this.__vertexBufferData[214] = 1;
                this.__vertexBuffer = a.createVertexBuffer(16, 14);
              } else if (d == 0 && e != 0) {
                this.__vertexBufferData = new Float32Array(112);
                k = b.y;
                n = this.height - e - k;
                h = k / this.height;
                e /= this.height;
                k /= c.get_scaleY();
                ya = n / c.get_scaleY();
                t = c.get_height() / c.get_scaleY() - k - ya;
                c = c.get_width() / c.get_scaleX();
                this.__vertexBufferData[0] = c;
                this.__vertexBufferData[1] = k;
                this.__vertexBufferData[3] = 1;
                this.__vertexBufferData[4] = h * 1;
                this.__vertexBufferData[15] = k;
                this.__vertexBufferData[18] = h * 1;
                this.__vertexBufferData[28] = c;
                this.__vertexBufferData[31] = 1;
                this.__vertexBufferData[56] = c;
                this.__vertexBufferData[57] = k + t;
                this.__vertexBufferData[59] = 1;
                this.__vertexBufferData[60] = (h + e) * 1;
                this.__vertexBufferData[71] = k + t;
                this.__vertexBufferData[74] = (h + e) * 1;
                this.__vertexBufferData[84] = c;
                this.__vertexBufferData[85] = this.height;
                this.__vertexBufferData[87] = 1;
                this.__vertexBufferData[88] = 1;
                this.__vertexBufferData[99] = this.height;
                this.__vertexBufferData[102] = 1;
                this.__vertexBuffer = a.createVertexBuffer(8, 14);
              } else if (e == 0 && d != 0) {
                this.__vertexBufferData = new Float32Array(112);
                f = b.x;
                t = this.width - d - f;
                b = f / this.width;
                d /= this.width;
                f /= c.get_scaleX();
                t /= c.get_scaleX();
                n = c.get_width() / c.get_scaleX() - f - t;
                c = c.get_height() / c.get_scaleY();
                this.__vertexBufferData[0] = f;
                this.__vertexBufferData[1] = c;
                this.__vertexBufferData[3] = b * 1;
                this.__vertexBufferData[4] = 1;
                this.__vertexBufferData[15] = c;
                this.__vertexBufferData[18] = 1;
                this.__vertexBufferData[28] = f;
                this.__vertexBufferData[31] = b * 1;
                this.__vertexBufferData[56] = f + n;
                this.__vertexBufferData[57] = c;
                this.__vertexBufferData[59] = (b + d) * 1;
                this.__vertexBufferData[60] = 1;
                this.__vertexBufferData[70] = f + n;
                this.__vertexBufferData[73] = (b + d) * 1;
                this.__vertexBufferData[84] = this.width;
                this.__vertexBufferData[85] = c;
                this.__vertexBufferData[87] = 1;
                this.__vertexBufferData[88] = 1;
                this.__vertexBufferData[98] = this.width;
                this.__vertexBufferData[101] = 1;
                this.__vertexBuffer = a.createVertexBuffer(8, 14);
              }
            } else {
              this.__vertexBufferGrid = null;
            }
            if (this.__vertexBuffer == null) {
              this.__vertexBufferData = new Float32Array(56);
              this.__vertexBufferData[0] = this.width;
              this.__vertexBufferData[1] = this.height;
              this.__vertexBufferData[3] = 1;
              this.__vertexBufferData[4] = 1;
              this.__vertexBufferData[15] = this.height;
              this.__vertexBufferData[18] = 1;
              this.__vertexBufferData[28] = this.width;
              this.__vertexBufferData[31] = 1;
              this.__vertexBuffer = a.createVertexBuffer(3, 14);
            }
            this.__vertexBuffer.uploadFromTypedArray(bj.toArrayBufferView(this.__vertexBufferData));
          }
          return this.__vertexBuffer;
        },
        getPixel32: function (a, b) {
          if (this.readable) {
            return this.image.getPixel32(a, b, 1);
          } else {
            return 0;
          }
        },
        getTexture: function (a) {
          if (!this.__isValid) {
            return null;
          }
          if (this.__texture == null || this.__textureContext != a.__context) {
            this.__textureContext = a.__context;
            this.__texture = a.createRectangleTexture(this.width, this.height, 1, false);
            this.__textureVersion = -1;
          }
          Ya.sync(this.image, false);
          if (this.image != null && this.image.version > this.__textureVersion) {
            if (this.__surface != null) {
              Hp.flush(this.__surface);
            }
            a = this.image;
            if (!Vb.__supportsBGRA && a.get_format() != 0) {
              a = a.clone();
              a.set_format(0);
            }
            this.__texture.__uploadFromImage(a);
            this.__textureVersion = this.image.version;
            this.__textureWidth = a.buffer.width;
            this.__textureHeight = a.buffer.height;
          }
          if (!this.readable && this.image != null) {
            this.image = this.__surface = null;
          }
          return this.__texture;
        },
        lock: function () {},
        setPixel: function (a, b, c) {
          if (this.readable) {
            this.image.setPixel(a, b, c, 1);
          }
        },
        setPixel32: function (a, b, c) {
          if (this.readable) {
            this.image.setPixel32(a, b, c, 1);
          }
        },
        unlock: function (a) {},
        __drawCanvas: function (a, b) {
          var c = this.image.buffer;
          if (!b.__allowSmoothing) {
            b.applySmoothing(c.__srcContext, false);
          }
          b.__render(a);
          if (!b.__allowSmoothing) {
            b.applySmoothing(c.__srcContext, true);
          }
          c.__srcContext.setTransform(1, 0, 0, 1, 0, 0);
          c.__srcImageData = null;
          c.data = null;
          this.image.dirty = true;
          this.image.version++;
        },
        __drawGL: function (a, b) {
          var c = b.__context3D;
          var d = c.__state.renderToTexture;
          var e = c.__state.renderToTextureDepthStencil;
          var f = c.__state.renderToTextureAntiAlias;
          var k = c.__state.renderToTextureSurfaceSelector;
          c.setRenderToTexture(this.getTexture(c), true);
          b.__render(a);
          if (d != null) {
            c.setRenderToTexture(d, e, f, k);
          } else {
            c.setRenderToBackBuffer();
          }
        },
        __fillRect: function (a, b, c) {
          if (a != null) {
            if (this.transparent && (b & -16777216) == 0) {
              b = 0;
            }
            if (c && this.__texture != null && this.__texture.__glFramebuffer != null && oa.get_current().stage.__renderer.__type == "opengl") {
              c = oa.get_current().stage.__renderer.__context3D;
              var d = !this.rect.equals(a);
              var e = c.__state.renderToTexture;
              var f = c.__state.renderToTextureDepthStencil;
              var k = c.__state.renderToTextureAntiAlias;
              var t = c.__state.renderToTextureSurfaceSelector;
              c.setRenderToTexture(this.__texture);
              if (d) {
                c.setScissorRectangle(a);
              }
              c.clear((b >>> 16 & 255) / 255, (b >>> 8 & 255) / 255, (b & 255) / 255, this.transparent ? (b >>> 24 & 255) / 255 : 1, 0, 0, 1);
              if (d) {
                c.setScissorRectangle(null);
              }
              if (e != null) {
                c.setRenderToTexture(e, f, k, t);
              } else {
                c.setRenderToBackBuffer();
              }
            } else if (this.readable) {
              this.image.fillRect(a.__toLimeRectangle(), b, 1);
            }
          }
        },
        __fromImage: function (a) {
          if (a != null && a.buffer != null) {
            this.image = a;
            this.width = a.width;
            this.height = a.height;
            this.rect = new da(0, 0, a.width, a.height);
            this.__textureWidth = this.width;
            this.__textureHeight = this.height;
            this.__isValid = this.readable = true;
          }
        },
        __getBounds: function (a, b) {
          var c = da.__pool.get();
          this.rect.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          da.__pool.release(c);
        },
        __setUVRect: function (a, b, c, d, e) {
          if (this.getVertexBuffer(a) != null && (d != this.__uvRect.width || e != this.__uvRect.height || b != this.__uvRect.x || c != this.__uvRect.y)) {
            if (this.__uvRect == null) {
              this.__uvRect = new da();
            }
            this.__uvRect.setTo(b, c, d, e);
            a = this.__textureWidth > 0 ? b / this.__textureWidth : 0;
            c = this.__textureHeight > 0 ? c / this.__textureHeight : 0;
            b = this.__textureWidth > 0 ? d / this.__textureWidth : 0;
            var f = this.__textureHeight > 0 ? e / this.__textureHeight : 0;
            this.__vertexBufferData[0] = d;
            this.__vertexBufferData[1] = e;
            this.__vertexBufferData[3] = a + b;
            this.__vertexBufferData[4] = c + f;
            this.__vertexBufferData[15] = e;
            this.__vertexBufferData[17] = a;
            this.__vertexBufferData[18] = c + f;
            this.__vertexBufferData[28] = d;
            this.__vertexBufferData[31] = a + b;
            this.__vertexBufferData[32] = c;
            this.__vertexBufferData[45] = a;
            this.__vertexBufferData[46] = c;
            this.__vertexBuffer.uploadFromTypedArray(bj.toArrayBufferView(this.__vertexBufferData));
          }
        },
        __update: function (a, b) {
          this.__updateTransforms();
        },
        __updateTransforms: function (a) {
          if (a == null) {
            this.__worldTransform.identity();
          } else {
            this.__worldTransform.copyFrom(a);
          }
          this.__renderTransform.copyFrom(this.__worldTransform);
        },
        __class__: T
      };
      function xe(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (xe.preload != null) {
          this.__fromImage(xe.preload);
        } else {
          var f = this;
          Cb.loadFromBase64(Ze.getString(xe.resourceName), xe.resourceType).then(function (a) {
            f.__fromImage(a);
            return Bb.withValue(f);
          }).onComplete(function (a) {
            if (xe.preload == null) {
              xe.preload = a.image;
            }
            if (e != null && ja.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      g["flixel.addons.transition._FlxTransitionSprite.RawGraphicTransTileCircle"] = xe;
      xe.__name__ = "flixel.addons.transition._FlxTransitionSprite.RawGraphicTransTileCircle";
      xe.__super__ = T;
      xe.prototype = q(T.prototype, {
        __class__: xe
      });
      function zn(a) {
        xe.call(this, 544, 32, true, -1, a);
        this.width = 544;
        this.height = 32;
      }
      g["flixel.addons.transition.GraphicTransTileCircle"] = zn;
      zn.__name__ = "flixel.addons.transition.GraphicTransTileCircle";
      zn.__super__ = xe;
      zn.prototype = q(xe.prototype, {
        __class__: zn
      });
      function ye(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (ye.preload != null) {
          this.__fromImage(ye.preload);
        } else {
          var f = this;
          Cb.loadFromBase64(Ze.getString(ye.resourceName), ye.resourceType).then(function (a) {
            f.__fromImage(a);
            return Bb.withValue(f);
          }).onComplete(function (a) {
            if (ye.preload == null) {
              ye.preload = a.image;
            }
            if (e != null && ja.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      g["flixel.addons.transition._FlxTransitionSprite.RawGraphicTransTileDiamond"] = ye;
      ye.__name__ = "flixel.addons.transition._FlxTransitionSprite.RawGraphicTransTileDiamond";
      ye.__super__ = T;
      ye.prototype = q(T.prototype, {
        __class__: ye
      });
      function Gk(a) {
        ye.call(this, 544, 32, true, -1, a);
        this.width = 544;
        this.height = 32;
      }
      g["flixel.addons.transition.GraphicTransTileDiamond"] = Gk;
      Gk.__name__ = "flixel.addons.transition.GraphicTransTileDiamond";
      Gk.__super__ = ye;
      Gk.prototype = q(ye.prototype, {
        __class__: Gk
      });
      function ze(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (ze.preload != null) {
          this.__fromImage(ze.preload);
        } else {
          var f = this;
          Cb.loadFromBase64(Ze.getString(ze.resourceName), ze.resourceType).then(function (a) {
            f.__fromImage(a);
            return Bb.withValue(f);
          }).onComplete(function (a) {
            if (ze.preload == null) {
              ze.preload = a.image;
            }
            if (e != null && ja.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      g["flixel.addons.transition.RawGraphicTransTileSquare"] = ze;
      ze.__name__ = "flixel.addons.transition.RawGraphicTransTileSquare";
      ze.__super__ = T;
      ze.prototype = q(T.prototype, {
        __class__: ze
      });
      function An(a) {
        ze.call(this, 544, 32, true, -1, a);
        this.width = 544;
        this.height = 32;
      }
      g["flixel.addons.transition.GraphicTransTileSquare"] = An;
      An.__name__ = "flixel.addons.transition.GraphicTransTileSquare";
      An.__super__ = ze;
      An.prototype = q(ze.prototype, {
        __class__: An
      });
      function Hk(a, b, c, d, e, f, k) {
        if (k == null) {
          k = 40;
        }
        if (f == null) {
          f = 32;
        }
        if (e == null) {
          e = 32;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._newStatus = -1;
        this.status = 0;
        this._finished = false;
        this._starting = true;
        F.call(this, a, b);
        if (d == null) {
          d = Zb.fromClass(Gk);
          f = e = 32;
        }
        this._delay = c;
        this.loadGraphic(d, true, e, f);
        if (this.graphic != null) {
          this.graphic.persist = true;
          this.graphic.set_destroyOnNoUse(false);
          a = [];
          b = 1;
          for (c = this.get_numFrames() - 1; b < c;) {
            d = b++;
            a.push(d);
          }
          b = a.slice();
          b.reverse();
          this.animation.add("empty", [0], 0, false);
          this.animation.add("in", a, k, false);
          this.animation.add("full", [this.get_numFrames() - 1], 0, false);
          this.animation.add("out", b, k, false);
          this.setStatus(3);
        }
      }
      g["flixel.addons.transition.FlxTransitionSprite"] = Hk;
      Hk.__name__ = "flixel.addons.transition.FlxTransitionSprite";
      Hk.__super__ = F;
      Hk.prototype = q(F.prototype, {
        start: function (a) {
          this._starting = true;
          this._finished = false;
          this._count = 0;
          this._newStatus = a;
        },
        setStatus: function (a) {
          switch (a) {
            case -1:
            case 2:
              var b = "empty";
              break;
            case 0:
              b = "in";
              break;
            case 1:
              b = "out";
              break;
            case 3:
              b = "full";
          }
          this.animation.play(b);
          this.animation.finishCallback = m(this, this.onFinishAnim);
          this.status = a;
        },
        onFinishAnim: function (a) {
          if (!this._finished) {
            this._finished = true;
            switch (this.status) {
              case 0:
                this.setStatus(3);
                break;
              case 1:
                this.setStatus(2);
            }
          }
        },
        update: function (a) {
          F.prototype.update.call(this, a);
          if (this._starting && (this._count += a, this._count >= this._delay)) {
            this.onTime();
          }
        },
        onTime: function () {
          this._starting = false;
          this._count = 0;
          this.setStatus(this._newStatus);
          this._newStatus = -1;
        },
        __class__: Hk
      });
      function Oi(a) {
        rd.call(this, 0);
        this._effect = this.createEffect(a);
        a = this._effect.scrollFactor;
        var b = 0;
        var c = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.set_x(b);
        a.set_y(c);
        this.add(this._effect);
      }
      g["flixel.addons.transition.Transition"] = Oi;
      Oi.__name__ = "flixel.addons.transition.Transition";
      Oi.__super__ = rd;
      Oi.prototype = q(rd.prototype, {
        destroy: function () {
          rd.prototype.destroy.call(this);
          this.set_finishCallback(null);
          this._effect = ca.destroy(this._effect);
        },
        start: function (a) {
          this._effect.start(a);
        },
        setStatus: function (a) {
          this._effect.setStatus(a);
        },
        createEffect: function (a) {
          switch (a.type) {
            case "fade":
              return new Ik(a);
            case "none":
              throw G.thrown("Unexpected TransitionType: NONE");
            case "tiles":
              return new Jk(a);
          }
        },
        get_finishCallback: function () {
          if (this._effect != null) {
            return this._effect.finishCallback;
          } else {
            return null;
          }
        },
        set_finishCallback: function (a) {
          if (this._effect != null) {
            return this._effect.finishCallback = a;
          } else {
            return null;
          }
        },
        __class__: Oi,
        __properties__: q(rd.prototype.__properties__, {
          set_finishCallback: "set_finishCallback",
          get_finishCallback: "get_finishCallback"
        })
      });
      var Kk = z["flixel.addons.transition.TransitionCameraMode"] = {
        __ename__: "flixel.addons.transition.TransitionCameraMode",
        __constructs__: null,
        TOP: {
          _hx_name: "TOP",
          _hx_index: 0,
          __enum__: "flixel.addons.transition.TransitionCameraMode",
          toString: p
        },
        NEW: {
          _hx_name: "NEW",
          _hx_index: 1,
          __enum__: "flixel.addons.transition.TransitionCameraMode",
          toString: p
        },
        DEFAULT: {
          _hx_name: "DEFAULT",
          _hx_index: 2,
          __enum__: "flixel.addons.transition.TransitionCameraMode",
          toString: p
        }
      };
      Kk.__constructs__ = [Kk.TOP, Kk.NEW, Kk.DEFAULT];
      function Bn(a, b, c, d, e, f, k) {
        if (k == null) {
          k = Kk.TOP;
        }
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = -1;
        }
        if (a == null) {
          a = "fade";
        }
        this.cameraMode = Kk.TOP;
        this.duration = 1;
        this.type = a;
        this.tileData = e;
        this.duration = c;
        this.color = b;
        if (d == null) {
          a = d = 0;
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          d = W.pool.get().set(d, a);
          d._inPool = false;
        } else {
          a = d.x;
          a = a < -1 ? -1 : a;
          d.set_x(a > 1 ? 1 : a);
          a = d.y;
          a = a < -1 ? -1 : a;
          d.set_y(a > 1 ? 1 : a);
        }
        this.direction = d;
        this.tweenOptions = {
          onComplete: null
        };
        if (f == null) {
          f = new Ha(0, 0, h.width, h.height);
        }
        this.region = f;
        this.cameraMode = k;
      }
      g["flixel.addons.transition.TransitionData"] = Bn;
      Bn.__name__ = "flixel.addons.transition.TransitionData";
      Bn.__interfaces__ = [rb];
      Bn.prototype = {
        destroy: function () {
          this.direction = this.region = this.tweenOptions = this.direction = this.tileData = null;
        },
        __class__: Bn
      };
      function Uf(a, b, c) {
        La.call(this, a, b, c);
      }
      g["flixel.group.FlxTypedSpriteContainer"] = Uf;
      Uf.__name__ = "flixel.group.FlxTypedSpriteContainer";
      Uf.__super__ = La;
      Uf.prototype = q(La.prototype, {
        initGroup: function (a) {
          this.group = new Lk(this, a);
        },
        draw: function () {
          var a = Tb._defaultCameras;
          if (this._cameras != null) {
            Tb._defaultCameras = this._cameras;
          }
          La.prototype.draw.call(this);
          Tb._defaultCameras = a;
        },
        set_group: function (a) {
          throw G.thrown("FlxSpriteContainer.group cannot be set in FlxSpriteContainers");
        },
        set_camera: function (a) {
          this._cameras = a == null ? null : [a];
          return a;
        },
        set_cameras: function (a) {
          return this._cameras = a;
        },
        __class__: Uf
      });
      function ie(a) {
        this._finalDelayTime = 0;
        this.finished = this._started = false;
        this._data = a;
        La.call(this, undefined, undefined, undefined);
      }
      g["flixel.addons.transition.TransitionEffect"] = ie;
      ie.__name__ = "flixel.addons.transition.TransitionEffect";
      ie.__super__ = Uf;
      ie.prototype = q(Uf.prototype, {
        destroy: function () {
          Uf.prototype.destroy.call(this);
          this.finishCallback = null;
          if (this._customCamera != null) {
            if (h.cameras.list.indexOf(this._customCamera) != -1) {
              h.cameras.remove(this._customCamera, true);
            }
            this._customCamera = null;
          }
        },
        start: function (a) {
          this._started = true;
          this._endStatus = a == 0 ? 3 : 2;
          switch (this._data.cameraMode._hx_index) {
            case 0:
              a = h.cameras.list;
              this.set_camera(a[a.length - 1]);
              break;
            case 1:
              this._customCamera = new Tb(0, 0, this._data.region.width | 0, this._data.region.height | 0);
              this._customCamera.bgColor = 0;
              h.cameras.add(this._customCamera, false);
              this.set_camera(this._customCamera);
          }
        },
        setStatus: function (a) {},
        delayThenFinish: function () {
          new Ec().start(this._finalDelayTime, m(this, this.onFinish));
        },
        onFinish: function (a) {
          this.finished = true;
          if (this.finishCallback != null) {
            a = this.finishCallback;
            this.finishCallback = null;
            a();
          }
        },
        __class__: ie
      });
      function Ae(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (Ae.preload != null) {
          this.__fromImage(Ae.preload);
        } else {
          var f = this;
          Cb.loadFromBase64(Ze.getString(Ae.resourceName), Ae.resourceType).then(function (a) {
            f.__fromImage(a);
            return Bb.withValue(f);
          }).onComplete(function (a) {
            if (Ae.preload == null) {
              Ae.preload = a.image;
            }
            if (e != null && ja.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      g["flixel.addons.transition._TransitionFade.RawGraphicDiagonalGradient"] = Ae;
      Ae.__name__ = "flixel.addons.transition._TransitionFade.RawGraphicDiagonalGradient";
      Ae.__super__ = T;
      Ae.prototype = q(T.prototype, {
        __class__: Ae
      });
      function Cn(a) {
        Ae.call(this, 319, 128, true, -1, a);
        this.width = 319;
        this.height = 128;
      }
      g["flixel.addons.transition.GraphicDiagonalGradient"] = Cn;
      Cn.__name__ = "flixel.addons.transition.GraphicDiagonalGradient";
      Cn.__super__ = Ae;
      Cn.prototype = q(Ae.prototype, {
        __class__: Cn
      });
      function Ik(a) {
        ie.call(this, a);
        this.back = this.makeSprite(a.direction.x, a.direction.y, a.region);
        a = this.back.scrollFactor;
        var b = 0;
        var c = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.set_x(b);
        a.set_y(c);
        this.add(this.back);
      }
      g["flixel.addons.transition.TransitionFade"] = Ik;
      Ik.__name__ = "flixel.addons.transition.TransitionFade";
      Ik.__super__ = ie;
      Ik.prototype = q(ie.prototype, {
        destroy: function () {
          ie.prototype.destroy.call(this);
          this.back = null;
        },
        start: function (a) {
          ie.prototype.start.call(this, a);
          var b = {};
          this.setTweenValues(a == 0, this._data.direction.x, this._data.direction.y, this.back, b);
          this._data.tweenOptions.onComplete = m(this, this.finishTween);
          Da.tween(this.back, b, this._data.duration, this._data.tweenOptions);
        },
        setTweenValues: function (a, b, c, d, e) {
          var f = !a;
          if (b == 0 && c == 0) {
            d.set_alpha(a ? 0 : 1);
            e.alpha = f ? 0 : 1;
          } else if (b != 0 && c != 0) {
            if (b > 0) {
              d.set_x(a ? -this.back.get_width() : 0);
              e.x = f ? -this.back.get_width() : 0;
            } else {
              d.set_x(a ? h.width : h.width - this.back.get_width());
              e.x = f ? h.width : h.width - this.back.get_width();
            }
          } else if (b != 0) {
            if (b > 0) {
              d.set_x(a ? -this.back.get_width() : 0);
              e.x = f ? -this.back.get_width() : 0;
            } else {
              d.set_x(a ? h.width : -this.back.get_width() / 2);
              e.x = f ? h.width : -this.back.get_width() / 2;
            }
          } else if (c > 0) {
            d.set_y(a ? -this.back.get_height() : 0);
            e.y = f ? -this.back.get_height() : 0;
          } else {
            d.set_y(a ? h.height : -this.back.get_height() / 2);
            e.y = f ? h.height : -this.back.get_height() / 2;
          }
        },
        makeSprite: function (a, b, c) {
          var d = new F(c.x, c.y);
          var e = "transition" + this._data.color + "x" + a + "y" + b;
          d.set_antialiasing(false);
          if (a == 0 && b == 0) {
            d.makeGraphic(1, 1, this._data.color, false, e);
            e = d.scale;
            b = c.width | 0;
            c = c.height | 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            e.set_x(b);
            e.set_y(c);
            d.updateHitbox();
          } else if (a == 0 && b != 0) {
            d.makeGraphic(1, c.height * 2 | 0, this._data.color, false, e);
            e = sd.createGradientBitmapData(1, c.height | 0, [this._data.color, 0], 1, b > 0 ? 90 : 270);
            b = b > 0 ? c.height : 0;
            d.get_pixels().copyPixels(e, e.rect, new lb(0, b));
            e = d.scale;
            b = c.width;
            c = 1;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            e.set_x(b);
            e.set_y(c);
            d.updateHitbox();
          } else if (a != 0 && b == 0) {
            b = a > 0 ? c.width : 0;
            a = a > 0 ? 0 : 180;
            d.makeGraphic(c.width * 2 | 0, 1, this._data.color, false, e);
            e = sd.createGradientBitmapData(c.width | 0, 1, [this._data.color, 0], 1, a);
            d.get_pixels().copyPixels(e, e.rect, new lb(b, 0));
            e = d.scale;
            b = 1;
            c = c.height;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            e.set_x(b);
            e.set_y(c);
            d.updateHitbox();
          } else if (a != 0 && b != 0) {
            d.loadGraphic(this.getGradient());
            d.set_color(this._data.color);
            d.set_flipX(a < 0);
            d.set_flipY(b < 0);
          }
          return d;
        },
        getGradient: function () {
          var a = h.width;
          var b = h.height;
          var c = h.bitmap.add("flixel/images/transitions/diagonal_gradient.png").bitmap;
          var d = "flixel/images/transitions/diagonal_gradient.png:" + a + "x" + b;
          var e = h.bitmap._cache.h[d];
          if (e == null) {
            a = new T(Math.floor(a * 2.5), b, true, 0);
            b = new za();
            b.scale(a.width / c.width, a.height / c.height);
            a.draw(c, b, null, null, null, true);
            e = h.bitmap.add(a, false, d);
            e.persist = true;
            e.set_destroyOnNoUse(false);
          }
          return e;
        },
        finishTween: function (a) {
          this.delayThenFinish();
        },
        __class__: Ik
      });
      function Jk(a) {
        this._isCenter = false;
        ie.call(this, a);
        this._grpSprites = new La();
        var b = 0;
        if (a.tileData == null) {
          a.tileData = {
            asset: null,
            width: 32,
            height: 32
          };
        }
        var c = a.region;
        var d = Math.ceil(c.width / a.tileData.width);
        var e = Math.ceil(c.height / a.tileData.height);
        var f = a.duration / (d > e ? d : e);
        var k = f * Math.abs(a.direction.x);
        f *= Math.abs(a.direction.y);
        var t = a.tileData.width;
        var n = a.tileData.height;
        var h = c.x | 0;
        var ya = c.y | 0;
        if (a.direction.x < 0) {
          t *= -1;
          h += c.width + t | 0;
        }
        if (a.direction.y < 0) {
          n *= -1;
          ya += c.height + n | 0;
        }
        c = h;
        for (var l = 0; l < e;) {
          var L = l++;
          for (var g = 0, p = d; g < p;) {
            g++;
            var v = 40;
            if (a.tileData.frameRate != null) {
              v = a.tileData.frameRate;
            }
            v = new Hk(c, ya, b, a.tileData.asset, a.tileData.width, a.tileData.height, v);
            v.set_color(a.color);
            var m = v.scrollFactor;
            var q = 0;
            var w = 0;
            if (w == null) {
              w = 0;
            }
            if (q == null) {
              q = 0;
            }
            m.set_x(q);
            m.set_y(w);
            this._grpSprites.add(v);
            c += t;
            b += k;
          }
          ya += n;
          c = h;
          b = (L + 1) * f;
        }
        this.add(this._grpSprites);
        this._isCenter = a.direction.x == 0 && a.direction.y == 0;
      }
      g["flixel.addons.transition.TransitionTiles"] = Jk;
      Jk.__name__ = "flixel.addons.transition.TransitionTiles";
      Jk.__super__ = ie;
      Jk.prototype = q(ie.prototype, {
        destroy: function () {
          ie.prototype.destroy.call(this);
          this._grpSprites = null;
        },
        start: function (a) {
          ie.prototype.start.call(this, a);
          this._grpSprites.group.forEach(function (b) {
            b.start(a);
          }, false);
        },
        setStatus: function (a) {
          ie.prototype.setStatus.call(this, a);
          this._grpSprites.group.forEach(function (b) {
            b.setStatus(a);
          }, false);
        },
        update: function (a) {
          ie.prototype.update.call(this, a);
          if (this._started) {
            a = true;
            for (var b = 0, c = this._grpSprites.group.members; b < c.length;) {
              var d = c[b];
              ++b;
              if (d.status != -1 && d.status != this._endStatus) {
                a = false;
                break;
              }
            }
            if (a) {
              this._started = false;
              this.delayThenFinish();
            }
          }
        },
        __class__: Jk
      });
      function Gg(a, b, c, d, e, f) {
        this.x = new Mk(a, c, e);
        this.y = new Mk(b, d, f);
      }
      g["flixel.addons.ui.Anchor"] = Gg;
      Gg.__name__ = "flixel.addons.ui.Anchor";
      Gg.__interfaces__ = [rb];
      Gg.prototype = {
        destroy: function () {
          this.y = this.x = null;
        },
        anchorThing: function (a, b) {
          switch (this.x.side) {
            case "center":
              var c = b.x + b.get_width() / 2;
              break;
            case "left":
              c = b.x;
              break;
            case "right":
              c = b.x + b.get_width();
              break;
            default:
              c = b.x;
          }
          switch (this.y.side) {
            case "bottom":
              b = b.y + b.get_height();
              break;
            case "center":
              b = b.y + b.get_height() / 2;
              break;
            case "top":
              b = b.y;
              break;
            default:
              b = b.y;
          }
          switch (this.x.flush) {
            case "center":
              c -= a.get_width() / 2;
              break;
            case "right":
              c -= a.get_width();
          }
          switch (this.y.flush) {
            case "bottom":
              b -= a.get_height();
              break;
            case "center":
              b -= a.get_height() / 2;
          }
          a.set_x(c + this.x.offset);
          a.set_y(b + this.y.offset);
        },
        getFlipped: function (a, b, c) {
          var d = a ? this.x.offset * -1 : this.x.offset;
          var e = b ? this.y.offset * -1 : this.y.offset;
          var f = a ? this.flipAnchorSide(this.x.side) : this.x.side;
          var k = b ? this.flipAnchorSide(this.y.side) : this.y.side;
          a = a ? this.flipAnchorSide(this.x.flush) : this.x.flush;
          b = b ? this.flipAnchorSide(this.y.flush) : this.y.flush;
          if (c == null) {
            c = new Gg(d, e, f, k, a, b);
          } else {
            c.x.offset = d;
            c.y.offset = e;
            c.x.side = f;
            c.y.side = k;
            c.x.flush = a;
            c.y.flush = b;
          }
          return c;
        },
        clone: function () {
          return new Gg(this.x.offset, this.y.offset, this.x.side, this.y.side, this.x.flush, this.y.flush);
        },
        flipAnchorSide: function (a) {
          if (a == "left") {
            return "right";
          } else if (a == "right") {
            return "left";
          } else if (a == "top") {
            return "bottom";
          } else if (a == "bottom") {
            return "top";
          } else {
            return a;
          }
        },
        __class__: Gg
      };
      function Mk(a, b, c) {
        this.side = this.flush = "center";
        this.offset = 0;
        this.offset = a;
        this.side = b;
        this.flush = c;
      }
      g["flixel.addons.ui.AnchorPoint"] = Mk;
      Mk.__name__ = "flixel.addons.ui.AnchorPoint";
      Mk.prototype = {
        __class__: Mk
      };
      function $e(a, b, c, d) {
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 1;
        }
        this.style = a;
        this.color = b;
        this.size = c;
        this.quality = d;
      }
      g["flixel.addons.ui.BorderDef"] = $e;
      $e.__name__ = "flixel.addons.ui.BorderDef";
      $e.fromXML = function (a) {
        var b = C.xml_str(a, "border");
        var c = Sa.NONE;
        var d = C.xml_color(a, "border_color", true, 0);
        var e = C.xml_f(a, "border_size", 1);
        var f = C.xml_f(a, "border_quality", 0);
        c = new $e(c, d, e, f);
        switch (b) {
          case "":
            b = C.xml_str(a, "shadow", true, "");
            if (b != "" && b != "false" && b != "none") {
              c.style = Sa.SHADOW;
              a = true;
              if (a == null) {
                a = false;
              }
              d = eb.fromString(b);
              if (d == null) {
                if (a) {
                  d = 0;
                } else {
                  throw G.thrown("U.parseHex() unable to parse hex String " + b);
                }
              }
              c.color = d;
            } else {
              b = C.xml_str(a, "outline", true, "");
              if (b != "" && b != "false" && b != "none") {
                c.style = Sa.OUTLINE;
                a = true;
                if (a == null) {
                  a = false;
                }
                d = eb.fromString(b);
                if (d == null) {
                  if (a) {
                    d = 0;
                  } else {
                    throw G.thrown("U.parseHex() unable to parse hex String " + b);
                  }
                }
                c.color = d;
              } else {
                b = C.xml_str(a, "outline_fast");
                if (b != "" && b != "false" && b != "none") {
                  c.style = Sa.OUTLINE_FAST;
                  a = true;
                  if (a == null) {
                    a = false;
                  }
                  d = eb.fromString(b);
                  if (d == null) {
                    if (a) {
                      d = 0;
                    } else {
                      throw G.thrown("U.parseHex() unable to parse hex String " + b);
                    }
                  }
                  c.color = d;
                }
              }
            }
            break;
          case "false":
          case "none":
            c.style = Sa.NONE;
            break;
          case "outline":
            c.style = Sa.OUTLINE;
            break;
          case "outline_fast":
            c.style = Sa.OUTLINE_FAST;
            break;
          case "shadow":
            c.style = Sa.SHADOW;
        }
        return c;
      };
      $e.prototype = {
        clone: function () {
          return new $e(this.style, this.color, this.size, this.quality);
        },
        apply: function (a) {
          var b = this.color;
          var c = this.size;
          var d = this.quality;
          if (d == null) {
            d = 1;
          }
          if (c == null) {
            c = 1;
          }
          if (b == null) {
            b = 0;
          }
          a.set_borderStyle(this.style);
          a.set_borderColor(b);
          a.set_borderSize(c);
          a.set_borderQuality(d);
          return a;
        },
        __class__: $e
      };
      function cj(a, b, c, d) {
        this.font = this.border = this.color = this.align = null;
        this.font = a;
        this.border = d;
        this.color = c;
        this.align = b;
      }
      g["flixel.addons.ui.ButtonLabelStyle"] = cj;
      cj.__name__ = "flixel.addons.ui.ButtonLabelStyle";
      cj.prototype = {
        apply: function (a) {
          if (this.font != null) {
            this.font.apply(null, a);
          }
          if (this.border != null) {
            this.border.apply(a);
          }
          if (this.color != null) {
            a.set_color(this.color);
          }
          if (this.align != null) {
            a.set_alignment(this.align);
          }
        },
        __class__: cj
      };
      function Hg() {}
      g["flixel.addons.ui.FlxBaseMultiInput"] = Hg;
      Hg.__name__ = "flixel.addons.ui.FlxBaseMultiInput";
      Hg.__interfaces__ = [rb];
      Hg.prototype = {
        destroy: function () {
          this.forbiddens = this.combos = null;
        },
        checkJustPressed: function () {
          return false;
        },
        checkPressed: function () {
          return false;
        },
        justPressed: function () {
          if (this.checkJustPressed()) {
            return this.passCombosAndForbiddens();
          } else {
            return false;
          }
        },
        pressed: function () {
          if (this.checkPressed()) {
            return this.passCombosAndForbiddens();
          } else {
            return false;
          }
        },
        equals: function (a) {
          if (a == null || yb.typeof(a) != yb.typeof(this) || this.input != a.input || this.combos == null != (a.combos == null) || this.forbiddens == null != (a.forbiddens == null)) {
            return false;
          }
          if (this.combos != null && a.combos != null) {
            for (var b = 0, c = this.combos; b < c.length;) {
              var d = c[b];
              ++b;
              if (a.combos.indexOf(d) == -1) {
                return false;
              }
            }
          }
          if (this.forbiddens != null && a.forbiddens != null) {
            b = 0;
            c = this.forbiddens;
            while (b < c.length) {
              d = c[b];
              ++b;
              if (a.forbiddens.indexOf(d) == -1) {
                return false;
              }
            }
          }
          return true;
        },
        passCombosAndForbiddens: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            a = true;
          }
          a = this.combos == null || this.checkCombos(a);
          b = this.forbiddens == null || this.checkForbiddens(b);
          if (a) {
            return b;
          } else {
            return false;
          }
        },
        checkCombos: function (a) {
          return false;
        },
        checkForbiddens: function (a) {
          return false;
        },
        __class__: Hg
      };
      function U(a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 8;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._hasBorderAlpha = false;
        this._regen = true;
        this._formatRanges = [];
        this._autoHeight = true;
        this.borderSize = this.borderQuality = 1;
        this.borderColor = 0;
        this.borderStyle = Sa.NONE;
        this.text = "";
        F.call(this, a, b);
        if (d == null || d == "") {
          this.set_text("");
          d = " ";
        } else {
          this.set_text(d);
        }
        this.textField = new Wc();
        this.textField.set_selectable(false);
        this.textField.set_multiline(true);
        this.textField.set_wordWrap(true);
        this._defaultFormat = new ld(null, e, 16777215);
        this.set_letterSpacing(0);
        this.set_font(Nd.FONT_DEFAULT);
        this._formatAdjusted = new ld();
        this.textField.set_defaultTextFormat(this._defaultFormat);
        this.textField.set_text(d);
        this.set_fieldWidth(c);
        this.textField.set_embedFonts(f);
        this.textField.set_sharpness(100);
        this.textField.set_height(d.length <= 0 ? 1 : 10);
        this.set_allowCollisions(0);
        this.set_moves(false);
        this.drawFrame();
        a = b = 1;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = W.pool.get().set(b, a);
        a._inPool = false;
        this.shadowOffset = a;
      }
      g["flixel.text.FlxText"] = U;
      U.__name__ = "flixel.text.FlxText";
      U.__super__ = F;
      U.prototype = q(F.prototype, {
        destroy: function () {
          this._formatAdjusted = this._defaultFormat = this._font = this.textField = null;
          this.shadowOffset = ca.put(this.shadowOffset);
          F.prototype.destroy.call(this);
        },
        drawFrame: function (a) {
          if (a == null) {
            a = false;
          }
          this._regen = this._regen || a;
          F.prototype.drawFrame.call(this, this._regen);
        },
        setFormat: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = true;
          }
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = 8;
          }
          if (e == null) {
            e = Sa.NONE;
          }
          if (k) {
            this.set_font(a);
          } else if (a != null) {
            this.set_systemFont(a);
          }
          this.set_size(b);
          this.set_color(c);
          if (d != null) {
            this.set_alignment(d);
          }
          c = f;
          if (c == null) {
            c = 0;
          }
          this.set_borderStyle(e);
          this.set_borderColor(c);
          this.set_borderSize(1);
          this.set_borderQuality(1);
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return this;
        },
        updateHitbox: function () {
          this.regenGraphic();
          F.prototype.updateHitbox.call(this);
        },
        getScreenBounds: function (a, b) {
          this.regenGraphic();
          return F.prototype.getScreenBounds.call(this, a, b);
        },
        set_fieldWidth: function (a) {
          if (this.textField == null) {
            return a;
          }
          if (a <= 0) {
            this.set_wordWrap(false);
            this.set_autoSize(true);
            this._autoHeight = true;
          } else {
            this.set_autoSize(false);
            this.set_wordWrap(true);
            this.textField.set_width(a);
          }
          this._regen = true;
          return a;
        },
        get_fieldWidth: function () {
          if (this.textField != null) {
            return this.textField.get_width();
          } else {
            return 0;
          }
        },
        set_fieldHeight: function (a) {
          if (this.textField == null) {
            return a;
          }
          if (a <= 0) {
            this._autoHeight = true;
          } else {
            this._autoHeight = false;
            this.textField.set_height(a);
          }
          this._regen = true;
          return a;
        },
        set_autoSize: function (a) {
          if (this.textField != null) {
            this.textField.set_autoSize(a ? 1 : 2);
            this._regen = true;
          }
          return a;
        },
        set_text: function (a) {
          this.text = a;
          if (this.textField != null) {
            var b = this.textField.get_text();
            this.textField.set_text(a);
            this._regen = this.textField.get_text() != b || this._regen;
          }
          return a;
        },
        set_size: function (a) {
          this._defaultFormat.size = a;
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_letterSpacing: function (a) {
          this._defaultFormat.letterSpacing = a;
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_color: function (a) {
          if (this._defaultFormat.color == (a & 16777215)) {
            return a;
          }
          this._defaultFormat.color = a & 16777215;
          this.color = a;
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_font: function (a) {
          this.textField.set_embedFonts(true);
          if (a != null) {
            var b = a;
            if (Q.exists(a, "FONT")) {
              b = Q.getFont(a).name;
            }
            this._defaultFormat.font = b;
          } else {
            this._defaultFormat.font = Nd.FONT_DEFAULT;
          }
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return this._font = this._defaultFormat.font;
        },
        set_systemFont: function (a) {
          this.textField.set_embedFonts(false);
          this._defaultFormat.font = a;
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_wordWrap: function (a) {
          if (this.textField.get_wordWrap() != a) {
            this.textField.set_wordWrap(a);
            this._regen = true;
          }
          return a;
        },
        set_alignment: function (a) {
          this._defaultFormat.align = Dn.toOpenFL(a);
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_borderStyle: function (a) {
          if (a != this.borderStyle) {
            this._regen = true;
          }
          return this.borderStyle = a;
        },
        set_borderColor: function (a) {
          if (this.borderColor != a && this.borderStyle != Sa.NONE) {
            this._regen = true;
          }
          this._hasBorderAlpha = (a >> 24 & 255) / 255 < 1;
          return this.borderColor = a;
        },
        set_borderSize: function (a) {
          if (a != this.borderSize && this.borderStyle != Sa.NONE) {
            this._regen = true;
          }
          return this.borderSize = a;
        },
        set_borderQuality: function (a) {
          a = a < 0 ? 0 : a;
          a = a > 1 ? 1 : a;
          if (a != this.borderQuality && this.borderStyle != Sa.NONE) {
            this._regen = true;
          }
          return this.borderQuality = a;
        },
        set_graphic: function (a) {
          var b = this.graphic;
          a = F.prototype.set_graphic.call(this, a);
          h.bitmap.removeIfNoUse(b);
          return a;
        },
        get_width: function () {
          this.regenGraphic();
          return F.prototype.get_width.call(this);
        },
        get_height: function () {
          this.regenGraphic();
          return F.prototype.get_height.call(this);
        },
        updateColorTransform: function () {
          if (this.colorTransform == null) {
            this.colorTransform = new Lb();
          }
          if (this.alpha != 1) {
            this.colorTransform.alphaMultiplier = this.alpha;
            this.useColorTransform = true;
          } else {
            this.colorTransform.alphaMultiplier = 1;
            this.useColorTransform = false;
          }
          this.dirty = true;
        },
        regenGraphic: function () {
          if (this.textField != null && this._regen) {
            var a = 0;
            var b = 4;
            if (this.graphic != null) {
              a = this.graphic.width;
              b = this.graphic.height;
            }
            var c = Math.ceil(this.textField.get_width());
            var d = this._autoHeight ? this.textField.get_textHeight() : this.textField.get_height();
            d = Math.ceil(d) + (this._autoHeight ? 4 : 0);
            if (this.textField.get_textHeight() == 0) {
              d = b;
            }
            if (a != c || b != d) {
              a = h.bitmap.getUniqueKey("text");
              this.makeGraphic(c, d, 0, false, a);
              if (this._hasBorderAlpha) {
                this._borderPixels = this.graphic.bitmap.clone();
              }
              if (this._autoHeight) {
                this.textField.set_height(d);
              }
              this._flashRect.x = 0;
              this._flashRect.y = 0;
              this._flashRect.width = c;
              this._flashRect.height = d;
            } else {
              this.graphic.bitmap.fillRect(this._flashRect, 0);
              if (this._hasBorderAlpha) {
                if (this._borderPixels == null) {
                  this._borderPixels = new T(this.frameWidth, this.frameHeight, true);
                } else {
                  this._borderPixels.fillRect(this._flashRect, 0);
                }
              }
            }
            if (this.textField != null && this.textField.get_text() != null) {
              this.copyTextFormat(this._defaultFormat, this._formatAdjusted);
              this._matrix.identity();
              this.applyBorderStyle();
              if (this._hasBorderAlpha) {
                if (this._borderColorTransform == null) {
                  this._borderColorTransform = new Lb();
                }
                this._borderColorTransform.alphaMultiplier = (this.borderColor >> 24 & 255) / 255;
                this._borderPixels.colorTransform(this._borderPixels.rect, this._borderColorTransform);
                this.graphic.bitmap.draw(this._borderPixels);
              }
              this.applyFormats(this._formatAdjusted, false);
              this.drawTextFieldTo(this.graphic.bitmap);
            }
            this._regen = false;
            this.set_frame(this.frame);
          }
        },
        drawTextFieldTo: function (a) {
          a.draw(this.textField, this._matrix);
        },
        draw: function () {
          this.regenGraphic();
          F.prototype.draw.call(this);
        },
        calcFrame: function (a) {
          if (a == null) {
            a = false;
          }
          if (this.textField != null && (!h.renderTile || !!a)) {
            this.regenGraphic();
            F.prototype.calcFrame.call(this, a);
          }
        },
        applyBorderStyle: function () {
          var a = this.borderSize * this.borderQuality | 0;
          if (a <= 0) {
            a = 1;
          }
          var b = this.borderSize / a;
          switch (this.borderStyle._hx_index) {
            case 1:
              this.applyFormats(this._formatAdjusted, true);
              for (var c = 0; c < a;) {
                c++;
                var d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(b, b);
                this.drawTextFieldTo(d);
              }
              this._matrix.translate(-this.shadowOffset.x * this.borderSize, -this.shadowOffset.y * this.borderSize);
              break;
            case 2:
              this.applyFormats(this._formatAdjusted, true);
              var e = b;
              for (c = 0; c < a;) {
                c++;
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e, -e);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(e, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(e, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(0, e);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(0, e);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(0, -e);
                this.drawTextFieldTo(d);
                this._matrix.translate(e, 0);
                e += b;
              }
              break;
            case 3:
              this.applyFormats(this._formatAdjusted, true);
              e = b;
              c = 0;
              while (c < a) {
                c++;
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e, -e);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(e * 2, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(0, e * 2);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e * 2, 0);
                this.drawTextFieldTo(d);
                this._matrix.translate(e, -e);
                e += b;
              }
          }
        },
        applyFormats: function (a, b) {
          if (b == null) {
            b = false;
          }
          this.copyTextFormat(this._defaultFormat, a, false);
          a.color = b ? this.borderColor & 16777215 : this._defaultFormat.color;
          this.textField.setTextFormat(a);
          for (var c = 0, d = this._formatRanges; c < d.length;) {
            var e = d[c];
            ++c;
            if (this.textField.get_text().length - 1 < e.range.start) {
              break;
            } else {
              var f = e.format.format;
              this.copyTextFormat(f, a, false);
              a.color = b ? e.format.borderColor & 16777215 : f.color;
            }
            this.textField.setTextFormat(a, e.range.start, Math.min(e.range.end, this.textField.get_text().length) | 0);
          }
        },
        copyTextFormat: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          b.font = a.font;
          b.bold = a.bold;
          b.italic = a.italic;
          b.underline = a.underline;
          b.size = a.size;
          b.color = a.color;
          b.leading = a.leading;
          if (c) {
            b.align = a.align;
          }
        },
        set_frames: function (a) {
          F.prototype.set_frames.call(this, a);
          this._regen = false;
          return a;
        },
        __class__: U,
        __properties__: q(F.prototype.__properties__, {
          set_alignment: "set_alignment",
          set_wordWrap: "set_wordWrap",
          set_systemFont: "set_systemFont",
          set_font: "set_font",
          set_letterSpacing: "set_letterSpacing",
          set_size: "set_size",
          set_autoSize: "set_autoSize",
          set_fieldHeight: "set_fieldHeight",
          set_fieldWidth: "set_fieldWidth",
          get_fieldWidth: "get_fieldWidth",
          set_borderQuality: "set_borderQuality",
          set_borderSize: "set_borderSize",
          set_borderColor: "set_borderColor",
          set_borderStyle: "set_borderStyle",
          set_text: "set_text"
        })
      });
      function af(a, b, c, d, e, f, k, t) {
        if (t == null) {
          t = true;
        }
        if (k == null) {
          k = -1;
        }
        if (f == null) {
          f = -16777216;
        }
        if (e == null) {
          e = 8;
        }
        if (c == null) {
          c = 150;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.backgroundColor = -1;
        this.fieldBorderThickness = 1;
        this.fieldBorderColor = -16777216;
        this.caretIndex = this.forceCase = this.maxLength = this.filterMode = 0;
        this.hasFocus = false;
        this.caretWidth = 1;
        this.background = false;
        U.call(this, a, b, c, d, e, t);
        this.set_backgroundColor(k);
        if (k != 0) {
          this.background = true;
        }
        this.set_color(f);
        this.set_caretColor(f);
        this.caret = new F();
        this.caret.makeGraphic(this.caretWidth, e + 2 | 0);
        this._caretTimer = new Ec();
        this.set_caretIndex(0);
        this.set_hasFocus(false);
        if (this.background) {
          this.fieldBorderSprite = new F(a, b);
          this.backgroundSprite = new F(a, b);
        }
        this.set_lines(1);
        oa.get_current().stage.addEventListener("keyDown", m(this, this.onKeyDown));
        if (d == null) {
          d = "";
        }
        this.set_text(d);
        this.calcFrame();
      }
      g["flixel.addons.ui.FlxInputText"] = af;
      af.__name__ = "flixel.addons.ui.FlxInputText";
      af.__super__ = U;
      af.prototype = q(U.prototype, {
        set_caretColor: function (a) {
          this.caretColor = a;
          this.dirty = true;
          return this.caretColor;
        },
        destroy: function () {
          oa.get_current().stage.removeEventListener("keyDown", m(this, this.onKeyDown));
          this.backgroundSprite = ca.destroy(this.backgroundSprite);
          this.fieldBorderSprite = ca.destroy(this.fieldBorderSprite);
          this.callback = null;
          U.prototype.destroy.call(this);
        },
        draw: function () {
          this.drawSprite(this.fieldBorderSprite);
          this.drawSprite(this.backgroundSprite);
          U.prototype.draw.call(this);
          if (this.caretColor != this.caret.color || this.caret.get_height() != (this._defaultFormat.size | 0) + 2) {
            this.caret.set_color(this.caretColor);
          }
          this.drawSprite(this.caret);
        },
        drawSprite: function (a) {
          if (a != null && a.visible) {
            a.scrollFactor = this.scrollFactor;
            a.set_cameras(this.get_cameras());
            a.draw();
          }
        },
        update: function (a) {
          U.prototype.update.call(this, a);
          if (h.mouse._leftButton.current == 2) {
            a = this.hasFocus;
            if (h.mouse.overlaps(this, this.get_camera())) {
              this.set_caretIndex(this.getCaretIndex());
              this.set_hasFocus(true);
              if (!a && this.focusGained != null) {
                this.focusGained();
              }
            } else {
              this.set_hasFocus(false);
              if (a && this.focusLost != null) {
                this.focusLost();
              }
            }
          }
        },
        onKeyDown: function (a) {
          var b = a.keyCode;
          if (this.hasFocus) {
            if (b == 67 && a.ctrlKey) {
              ic.set_text(this.text);
              this.onChange("copy");
            } else if (b == 86 && a.ctrlKey) {
              a = this.filter(ic.get_text());
              if (a.length > 0 && (this.maxLength == 0 || this.text.length + a.length < this.maxLength)) {
                this.set_text(this.insertSubstring(this.text, a, this.caretIndex));
                this.set_caretIndex(this.caretIndex + a.length);
                this.onChange("input");
                this.onChange("paste");
              }
            } else if (b == 88 && a.ctrlKey) {
              ic.set_text(this.text);
              this.set_text("");
              this.set_caretIndex(0);
              this.onChange("input");
              this.onChange("cut");
            } else if (b != 16 && b != 17 && b != 220 && b != 27) {
              if (b == 37) {
                if (this.caretIndex > 0) {
                  this.set_caretIndex(this.caretIndex - 1);
                  this.set_text(this.text);
                }
              } else if (b == 39) {
                if (this.caretIndex < this.text.length) {
                  this.set_caretIndex(this.caretIndex + 1);
                  this.set_text(this.text);
                }
              } else if (b == 35) {
                this.set_caretIndex(this.text.length);
                this.set_text(this.text);
              } else if (b == 36) {
                this.set_caretIndex(0);
                this.set_text(this.text);
              } else if (b == 8) {
                if (this.caretIndex > 0) {
                  this.set_caretIndex(this.caretIndex - 1);
                  this.set_text(this.text.substring(0, this.caretIndex) + this.text.substring(this.caretIndex + 1));
                  this.onChange("backspace");
                }
              } else if (b == 46) {
                if (this.text.length > 0 && this.caretIndex < this.text.length) {
                  this.set_text(this.text.substring(0, this.caretIndex) + this.text.substring(this.caretIndex + 1));
                  this.onChange("delete");
                }
              } else if (b == 13) {
                this.onChange("enter");
              } else if (a.charCode != 0) {
                a = this.filter(String.fromCodePoint(a.charCode));
                if (a.length > 0 && (this.maxLength == 0 || this.text.length + a.length < this.maxLength)) {
                  this.set_text(this.insertSubstring(this.text, a, this.caretIndex));
                  this.set_caretIndex(this.caretIndex + 1);
                  this.onChange("input");
                }
              }
            }
          }
        },
        onChange: function (a) {
          if (this.callback != null) {
            this.callback(this.text, a);
          }
        },
        insertSubstring: function (a, b, c) {
          return a = c != a.length ? a.substring(0, c) + b + a.substring(c) : a + b;
        },
        getCaretIndex: function () {
          var a = h.mouse.x - this.x;
          var b = h.mouse.y - this.y;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          return this.getCharIndexAtPoint(b.x, b.y);
        },
        getCharBoundaries: function (a) {
          if (this._charBoundaries != null && a >= 0 && this._charBoundaries.length > 0) {
            var b = new da();
            if (a >= this._charBoundaries.length) {
              a = this._charBoundaries[this._charBoundaries.length - 1];
              var c = b;
            } else {
              a = this._charBoundaries[a];
              c = b;
            }
            if (c == null) {
              c = new da();
            }
            c.x = a.x;
            c.y = a.y;
            c.width = a.width;
            c.height = a.height;
            return b;
          }
          return null;
        },
        set_text: function (a) {
          var b = U.prototype.set_text.call(this, a);
          if (this.textField == null) {
            return b;
          }
          var c = a.length;
          this.prepareCharBoundaries(c);
          this.textField.set_text("");
          var d = 0;
          var e;
          var f = 0;
          for (var k = 0; k < c;) {
            var t = k++;
            this.textField.appendText(r.substr(a, t, 1));
            e = this.textField.get_textWidth();
            if (t == 0) {
              d = this.textField.get_textHeight();
            }
            this._charBoundaries[t].x = 2 + f;
            this._charBoundaries[t].y = 2;
            this._charBoundaries[t].width = e - f;
            this._charBoundaries[t].height = d;
            f = e;
          }
          this.textField.set_text(a);
          this.onSetTextCheck();
          return b;
        },
        getCharIndexAtPoint: function (a, b) {
          b = 0;
          if (this._charBoundaries != null && this._charBoundaries.length > 0 && this.textField.get_textWidth() <= this.textField.get_width()) {
            switch (this.getAlignStr()) {
              case "center":
                a = a - this.textField.get_width() / 2 + this.textField.get_textWidth() / 2;
                break;
              case "right":
                a = a - this.textField.get_width() + this.textField.get_textWidth();
            }
          }
          if (this._charBoundaries != null) {
            for (var c = 0, d = this._charBoundaries; c < d.length;) {
              var e = d[c];
              ++c;
              if (a >= e.x && a <= e.x + e.width) {
                return b;
              }
              ++b;
            }
          }
          if (this._charBoundaries != null && this._charBoundaries.length > 0 && a > this.textField.get_textWidth()) {
            return this._charBoundaries.length;
          } else {
            return 0;
          }
        },
        prepareCharBoundaries: function (a) {
          if (this._charBoundaries == null) {
            this._charBoundaries = [];
          }
          if (this._charBoundaries.length > a) {
            for (var b = 0, c = this._charBoundaries.length - a; b < c;) {
              b++;
              this._charBoundaries.pop();
            }
          }
          b = 0;
          for (c = a; b < c;) {
            a = b++;
            if (this._charBoundaries.length - 1 < a) {
              a = this._charBoundaries;
              var d = 0;
              var e = 0;
              var f = 0;
              var k = 0;
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              var t = Ha._pool.get();
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              t.x = d;
              t.y = e;
              t.width = f;
              t.height = k;
              t._inPool = false;
              a.push(t);
            }
          }
        },
        onSetTextCheck: function () {},
        calcFrame: function (a) {
          if (a == null) {
            a = false;
          }
          U.prototype.calcFrame.call(this, a);
          if (this.fieldBorderSprite != null) {
            if (this.fieldBorderThickness > 0) {
              this.fieldBorderSprite.makeGraphic(this.get_width() + this.fieldBorderThickness * 2 | 0, this.get_height() + this.fieldBorderThickness * 2 | 0, this.fieldBorderColor);
              this.fieldBorderSprite.set_x(this.x - this.fieldBorderThickness);
              this.fieldBorderSprite.set_y(this.y - this.fieldBorderThickness);
            } else if (this.fieldBorderThickness == 0) {
              this.fieldBorderSprite.set_visible(false);
            }
          }
          if (this.backgroundSprite != null) {
            if (this.background) {
              this.backgroundSprite.makeGraphic(this.get_width() | 0, this.get_height() | 0, this.backgroundColor);
              this.backgroundSprite.set_x(this.x);
              this.backgroundSprite.set_y(this.y);
            } else {
              this.backgroundSprite.set_visible(false);
            }
          }
          if (this.caret != null) {
            a = this.caretWidth;
            var b = (this._defaultFormat.size | 0) + 2 | 0;
            var c = this.borderColor & 16777215 | -16777216;
            var d = this.caretColor & 16777215 | -16777216;
            var e = "caret" + a + "x" + b + "c:" + d + "b:" + v.string(this.borderStyle) + "," + this.borderSize + "," + c;
            switch (this.borderStyle._hx_index) {
              case 0:
                this.caret.makeGraphic(a, b, d, false, e);
                this.caret.offset.set_x(this.caret.offset.set_y(0));
                break;
              case 1:
                a += this.borderSize | 0;
                b += this.borderSize | 0;
                this.caret.makeGraphic(a, b, 0, false, e);
                e = new da(this.borderSize, this.borderSize, this.caretWidth, (this._defaultFormat.size | 0) + 2 | 0);
                this.caret.get_pixels().fillRect(e, c);
                e.x = e.y = 0;
                this.caret.get_pixels().fillRect(e, d);
                this.caret.offset.set_x(this.caret.offset.set_y(0));
                break;
              case 2:
              case 3:
                a += this.borderSize * 2 | 0;
                b += this.borderSize * 2 | 0;
                this.caret.makeGraphic(a, b, c, false, e);
                e = new da(this.borderSize, this.borderSize, this.caretWidth, (this._defaultFormat.size | 0) + 2 | 0);
                this.caret.get_pixels().fillRect(e, d);
                this.caret.offset.set_x(this.caret.offset.set_y(this.borderSize));
            }
            this.caret.set_width(a);
            this.caret.set_height(b);
            this.set_caretIndex(this.caretIndex);
          }
        },
        toggleCaret: function (a) {
          this.caret.set_visible(!this.caret.visible);
        },
        filter: function (a) {
          if (this.forceCase == 1) {
            a = a.toUpperCase();
          } else if (this.forceCase == 2) {
            a = a.toLowerCase();
          }
          if (this.filterMode != 0) {
            switch (this.filterMode) {
              case 1:
                var b = new V("[^a-zA-Z]*", "g");
                break;
              case 2:
                b = new V("[^0-9]*", "g");
                break;
              case 3:
                b = new V("[^a-zA-Z0-9]*", "g");
                break;
              case 4:
                b = this.customFilterPattern;
                break;
              default:
                throw new Pb("FlxInputText: Unknown filterMode (" + this.filterMode + ")");
            }
            a = a.replace(b.r, "");
          }
          return a;
        },
        set_params: function (a) {
          this.params = a;
          if (this.params == null) {
            this.params = [];
          }
          this.params.push({
            name: "value",
            value: this.text
          });
          return a;
        },
        set_x: function (a) {
          if (this.fieldBorderSprite != null && this.fieldBorderThickness > 0) {
            this.fieldBorderSprite.set_x(a - this.fieldBorderThickness);
          }
          if (this.backgroundSprite != null && this.background) {
            this.backgroundSprite.set_x(a);
          }
          return U.prototype.set_x.call(this, a);
        },
        set_y: function (a) {
          if (this.fieldBorderSprite != null && this.fieldBorderThickness > 0) {
            this.fieldBorderSprite.set_y(a - this.fieldBorderThickness);
          }
          if (this.backgroundSprite != null && this.background) {
            this.backgroundSprite.set_y(a);
          }
          return U.prototype.set_y.call(this, a);
        },
        set_hasFocus: function (a) {
          if (a) {
            if (this.hasFocus != a) {
              this._caretTimer = new Ec().start(0.5, m(this, this.toggleCaret), 0);
              this.caret.set_visible(true);
              this.set_caretIndex(this.text.length);
            }
          } else {
            this.caret.set_visible(false);
            if (this._caretTimer != null) {
              this._caretTimer.cancel();
            }
          }
          if (a != this.hasFocus) {
            this.calcFrame();
          }
          return this.hasFocus = a;
        },
        getAlignStr: function () {
          var a = "left";
          if (this._defaultFormat != null && this._defaultFormat.align != null) {
            a = Dn.fromOpenFL(this._defaultFormat.align);
          }
          return a;
        },
        set_caretIndex: function (a) {
          var b = 0;
          switch (this.getAlignStr()) {
            case "center":
              if (b <= 1) {
                b = 0;
              }
              break;
            case "right":
              b = this.textField.get_width() - 2 - this.textField.get_textWidth() - 2;
              if (b < 0) {
                b = 0;
              }
              break;
            default:
              b = 0;
          }
          this.caretIndex = a;
          if (this.caretIndex > this.text.length + 1) {
            this.caretIndex = -1;
          }
          if (this.caretIndex != -1) {
            if (this.caretIndex < this.text.length) {
              a = this.getCharBoundaries(this.caretIndex);
              if (a != null) {
                this.caret.set_x(b + a.get_left() + this.x);
                this.caret.set_y(a.get_top() + this.y);
              }
            } else {
              a = this.getCharBoundaries(this.caretIndex - 1);
              if (a != null) {
                this.caret.set_x(b + a.get_right() + this.x);
                this.caret.set_y(a.get_top() + this.y);
              } else if (this.text.length == 0) {
                this.caret.set_x(this.x + b + 2);
                this.caret.set_y(this.y + 2);
              }
            }
          }
          if (this.lines == 1 && this.caret.x + this.caret.get_width() > this.x + this.get_width()) {
            this.caret.set_x(this.x + this.get_width() - 2);
          }
          return this.caretIndex;
        },
        set_forceCase: function (a) {
          this.forceCase = a;
          this.set_text(this.filter(this.text));
          return this.forceCase;
        },
        set_size: function (a) {
          U.prototype.set_size.call(this, a);
          this.caret.makeGraphic(1, (this._defaultFormat.size | 0) + 2 | 0);
          return a;
        },
        set_lines: function (a) {
          if (a == 0) {
            return 0;
          }
          if (a > 1) {
            this.textField.set_wordWrap(true);
            this.textField.set_multiline(true);
          } else {
            this.textField.set_wordWrap(false);
            this.textField.set_multiline(false);
          }
          this.lines = a;
          this.calcFrame();
          return this.lines;
        },
        set_passwordMode: function (a) {
          this.textField.set_displayAsPassword(a);
          this.calcFrame();
          return a;
        },
        set_filterMode: function (a) {
          this.filterMode = a;
          this.set_text(this.filter(this.text));
          return this.filterMode;
        },
        set_backgroundColor: function (a) {
          this.backgroundColor = a;
          this.calcFrame();
          return this.backgroundColor;
        },
        __class__: af,
        __properties__: q(U.prototype.__properties__, {
          set_passwordMode: "set_passwordMode",
          set_backgroundColor: "set_backgroundColor",
          set_filterMode: "set_filterMode",
          set_lines: "set_lines",
          set_forceCase: "set_forceCase",
          set_caretIndex: "set_caretIndex",
          set_hasFocus: "set_hasFocus",
          set_params: "set_params",
          set_caretColor: "set_caretColor"
        })
      });
      function Ad(a, b, c, d) {
        this.input = b;
        this.gamepad = a;
        this.combos = c;
        this.forbiddens = d;
      }
      g["flixel.addons.ui.FlxMultiGamepad"] = Ad;
      Ad.__name__ = "flixel.addons.ui.FlxMultiGamepad";
      Ad.__super__ = Hg;
      Ad.prototype = q(Hg.prototype, {
        destroy: function () {
          Hg.prototype.destroy.call(this);
          this.gamepad = null;
        },
        checkJustPressed: function () {
          var a = this.gamepad;
          var b = this.input;
          switch (b) {
            case -2:
              return a.anyButton(2);
            case -1:
              return !a.anyButton(2);
            default:
              b = a.mapping.getRawID(b);
              a = a.buttons[b];
              if (a != null) {
                return a.hasState(2);
              } else {
                return false;
              }
          }
        },
        checkPressed: function () {
          var a = this.gamepad;
          var b = this.input;
          switch (b) {
            case -2:
              return a.anyButton(1);
            case -1:
              return !a.anyButton(1);
            default:
              b = a.mapping.getRawID(b);
              a = a.buttons[b];
              if (a != null) {
                return a.hasState(1);
              } else {
                return false;
              }
          }
        },
        checkCombos: function (a) {
          return this.gamepad.checkButtonArrayState(this.combos, 1) == a;
        },
        checkForbiddens: function (a) {
          return this.gamepad.checkButtonArrayState(this.forbiddens, 1) == a;
        },
        __class__: Ad
      });
      function uf(a, b, c, d) {
        this.sInput = b;
        Ad.call(this, a, b.id, c, d);
      }
      g["flixel.addons.ui.FlxMultiGamepadAnalogStick"] = uf;
      uf.__name__ = "flixel.addons.ui.FlxMultiGamepadAnalogStick";
      uf.__super__ = Ad;
      uf.prototype = q(Ad.prototype, {
        destroy: function () {
          Ad.prototype.destroy.call(this);
          this.sInput = null;
        },
        checkJustPressed: function () {
          if (this.gamepad == null) {
            return false;
          }
          var a = this.gamepad.get_deadZone();
          switch (this.sInput.id) {
            case 19:
              if (this.sInput.axis == Je.X) {
                var b = this.gamepad.analog.justMoved;
                var c = b.gamepad.mapping.getAnalogStick(19);
                if (c == null) {
                  b = false;
                } else {
                  c = b.gamepad.buttons[c.x];
                  b = c != null && c.hasState(b.status);
                }
                if (b) {
                  if (this.sInput.positive) {
                    b = this.gamepad.analog.value.gamepad;
                    return b.getAnalogXAxisValue(b.mapping.getAnalogStick(19)) > a;
                  }
                  b = this.gamepad.analog.value.gamepad;
                  return b.getAnalogXAxisValue(b.mapping.getAnalogStick(19)) < -a;
                }
              } else {
                b = this.gamepad.analog.justMoved;
                c = b.gamepad.mapping.getAnalogStick(19);
                if (c == null) {
                  b = false;
                } else {
                  c = b.gamepad.buttons[c.y];
                  b = c != null && c.hasState(b.status);
                }
                if (b) {
                  if (this.sInput.positive) {
                    b = this.gamepad.analog.value.gamepad;
                    return b.getYAxisRaw(b.mapping.getAnalogStick(19)) > a;
                  }
                  b = this.gamepad.analog.value.gamepad;
                  return b.getYAxisRaw(b.mapping.getAnalogStick(19)) < -a;
                }
              }
              return false;
            case 20:
              if (this.sInput.axis == Je.X) {
                b = this.gamepad.analog.justMoved;
                c = b.gamepad.mapping.getAnalogStick(20);
                if (c == null) {
                  b = false;
                } else {
                  c = b.gamepad.buttons[c.x];
                  b = c != null && c.hasState(b.status);
                }
                if (b) {
                  if (this.sInput.positive) {
                    b = this.gamepad.analog.value.gamepad;
                    return b.getAnalogXAxisValue(b.mapping.getAnalogStick(20)) > a;
                  }
                  b = this.gamepad.analog.value.gamepad;
                  return b.getAnalogXAxisValue(b.mapping.getAnalogStick(20)) < -a;
                }
              } else {
                b = this.gamepad.analog.justMoved;
                c = b.gamepad.mapping.getAnalogStick(20);
                if (c == null) {
                  b = false;
                } else {
                  c = b.gamepad.buttons[c.y];
                  b = c != null && c.hasState(b.status);
                }
                if (b) {
                  if (this.sInput.positive) {
                    b = this.gamepad.analog.value.gamepad;
                    return b.getYAxisRaw(b.mapping.getAnalogStick(20)) > a;
                  }
                  b = this.gamepad.analog.value.gamepad;
                  return b.getYAxisRaw(b.mapping.getAnalogStick(20)) < -a;
                }
              }
              return false;
            default:
              return false;
          }
        },
        checkPressed: function () {
          if (this.gamepad == null) {
            return false;
          }
          var a = this.gamepad.get_deadZone();
          switch (this.sInput.id) {
            case 19:
              if (this.sInput.axis == Je.X) {
                if (this.sInput.positive) {
                  var b = this.gamepad.analog.value.gamepad;
                  return b.getAnalogXAxisValue(b.mapping.getAnalogStick(19)) > a;
                }
                b = this.gamepad.analog.value.gamepad;
                return b.getAnalogXAxisValue(b.mapping.getAnalogStick(19)) < -a;
              }
              if (this.sInput.positive) {
                b = this.gamepad.analog.value.gamepad;
                return b.getYAxisRaw(b.mapping.getAnalogStick(19)) > a;
              }
              b = this.gamepad.analog.value.gamepad;
              return b.getYAxisRaw(b.mapping.getAnalogStick(19)) < -a;
            case 20:
              if (this.sInput.axis == Je.X) {
                if (this.sInput.positive) {
                  b = this.gamepad.analog.value.gamepad;
                  return b.getAnalogXAxisValue(b.mapping.getAnalogStick(20)) > a;
                }
                b = this.gamepad.analog.value.gamepad;
                return b.getAnalogXAxisValue(b.mapping.getAnalogStick(20)) < -a;
              }
              if (this.sInput.positive) {
                b = this.gamepad.analog.value.gamepad;
                return b.getYAxisRaw(b.mapping.getAnalogStick(20)) > a;
              }
              b = this.gamepad.analog.value.gamepad;
              return b.getYAxisRaw(b.mapping.getAnalogStick(20)) < -a;
            default:
              return false;
          }
        },
        checkCombos: function (a) {
          if (this.gamepad == null) {
            return false;
          } else {
            return this.gamepad.checkButtonArrayState(this.combos, 1) == a;
          }
        },
        checkForbiddens: function (a) {
          if (this.gamepad == null) {
            return false;
          } else {
            return this.gamepad.checkButtonArrayState(this.forbiddens, 1) == a;
          }
        },
        __class__: uf
      });
      var Je = z["flixel.addons.ui.XY"] = {
        __ename__: "flixel.addons.ui.XY",
        __constructs__: null,
        X: {
          _hx_name: "X",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.XY",
          toString: p
        },
        Y: {
          _hx_name: "Y",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.XY",
          toString: p
        }
      };
      Je.__constructs__ = [Je.X, Je.Y];
      function bd(a, b, c) {
        this.input = a;
        this.combos = b;
        this.forbiddens = c;
      }
      g["flixel.addons.ui.FlxMultiKey"] = bd;
      bd.__name__ = "flixel.addons.ui.FlxMultiKey";
      bd.__super__ = Hg;
      bd.prototype = q(Hg.prototype, {
        checkJustPressed: function () {
          return h.keys.checkStatus(this.input, 2);
        },
        checkPressed: function () {
          return h.keys.checkStatus(this.input, 1);
        },
        checkCombos: function (a) {
          return h.keys.checkKeyArrayState(this.combos, 1) == a;
        },
        checkForbiddens: function (a) {
          return h.keys.checkKeyArrayState(this.forbiddens, 1) == a;
        },
        __class__: bd
      });
      function Yh(a, b, c, d, e, f, k, t, n, K, ya) {
        if (ya == null) {
          ya = -8224126;
        }
        if (K == null) {
          K = -16777216;
        }
        if (n == null) {
          n = 3;
        }
        if (t == null) {
          t = 15;
        }
        if (k == null) {
          k = 100;
        }
        if (f == null) {
          f = 10;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        this._justClicked = this._justHovered = false;
        this.setVariable = true;
        this.callback = null;
        this.hoverAlpha = 0.5;
        this.decimals = 0;
        La.call(this);
        this.set_x(c);
        this.set_y(d);
        if (e == f) {
          h.log.advanced("FlxSlider: MinValue and MaxValue can't be the same (" + e + ")", xa.ERROR, true);
        }
        this.decimals = bc.getDecimals(e);
        if (bc.getDecimals(f) > this.decimals) {
          this.decimals = bc.getDecimals(f);
        }
        this.decimals++;
        this.minValue = e;
        this.maxValue = f;
        this._object = a;
        this.set_varString(b);
        this._width = k;
        this._height = t;
        this._thickness = n;
        this._color = K;
        this._handleColor = ya;
        this.createSlider();
      }
      g["flixel.addons.ui.FlxSlider"] = Yh;
      Yh.__name__ = "flixel.addons.ui.FlxSlider";
      Yh.__super__ = La;
      Yh.prototype = q(La.prototype, {
        createSlider: function () {
          var a = this.offset;
          var b = 7;
          var c = 18;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          c = this.x + this.offset.x;
          var d = this.y + this.offset.y;
          var e = this._width;
          b = this._height;
          if (b == null) {
            b = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a = Ha._pool.get();
          if (b == null) {
            b = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.x = c;
          a.y = d;
          a.width = e;
          a.height = b;
          a._inPool = false;
          this._bounds = a;
          this.body = new F(this.offset.x, this.offset.y);
          a = this._color;
          a = "slider:W=" + this._width + "H=" + this._height + "C=" + ("0x" + w.hex(a >> 24 & 255, 2) + w.hex(a >> 16 & 255, 2) + w.hex(a >> 8 & 255, 2) + w.hex(a & 255, 2)) + "T=" + this._thickness;
          this.body.makeGraphic(this._width, this._height, 0, false, a);
          a = this.body.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          Hc.drawLine(this.body, 0, this._height / 2, this._width, this._height / 2, {
            color: this._color,
            thickness: this._thickness
          });
          this.handle = new F(this.offset.x, this.offset.y);
          this.handle.makeGraphic(this._thickness, this._height, this._handleColor);
          a = this.handle.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.nameLabel = new U(this.offset.x, 0, this._width, this.varString);
          this.nameLabel.set_alignment("center");
          this.nameLabel.set_color(this._color);
          a = this.nameLabel.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          b = this._height + this.offset.y + 3;
          this.valueLabel = new U(this.offset.x, b, this._width);
          this.valueLabel.set_alignment("center");
          this.valueLabel.set_color(this._handleColor);
          a = this.valueLabel.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.minLabel = new U(-50 + this.offset.x, b, 100, v.string(this.minValue));
          this.minLabel.set_alignment("center");
          this.minLabel.set_color(this._color);
          a = this.minLabel.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.maxLabel = new U(this._width - 50 + this.offset.x, b, 100, v.string(this.maxValue));
          this.maxLabel.set_alignment("center");
          this.maxLabel.set_color(this._color);
          a = this.maxLabel.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.body);
          this.add(this.handle);
          this.add(this.nameLabel);
          this.add(this.valueLabel);
          this.add(this.minLabel);
          this.add(this.maxLabel);
        },
        update: function (a) {
          if (this.mouseInRect(this._bounds)) {
            if (this.hoverAlpha != 1) {
              this.set_alpha(this.hoverAlpha);
            }
            if (this.hoverSound != null && !this._justHovered) {
              h.sound.play(this.hoverSound);
            }
            this._justHovered = true;
            var b = h.mouse._leftButton;
            if (b.current == 1 || b.current == 2) {
              this.handle.set_x(h.mouse.getPositionInCameraView(this.get_camera()).x);
              this.updateValue();
              if (this.clickSound != null && !this._justClicked) {
                h.sound.play(this.clickSound);
                this._justClicked = true;
              }
            }
            b = h.mouse._leftButton;
            if (b.current != 1 && b.current != 2) {
              this._justClicked = false;
            }
          } else {
            if (this.hoverAlpha != 1) {
              this.set_alpha(1);
            }
            this._justHovered = false;
          }
          b = h.mouse._leftButton;
          if ((b.current == 1 || b.current == 2) && !!this.mouseInRect(this._bounds)) {
            this.updateValue();
          }
          if (this.varString != null && ja.getProperty(this._object, this.varString) != null) {
            this.value = ja.getProperty(this._object, this.varString);
          }
          if (this.handle.x != this.get_expectedPos()) {
            this.handle.set_x(this.get_expectedPos());
          }
          this.valueLabel.set_text(v.string(bc.roundDecimal(this.value, this.decimals)));
          La.prototype.update.call(this, a);
        },
        mouseInRect: function (a) {
          if (bc.pointInFlxRect(h.mouse.getPositionInCameraView(this.get_camera()).x, h.mouse.getPositionInCameraView(this.get_camera()).y, a)) {
            return true;
          } else {
            return false;
          }
        },
        updateValue: function () {
          if (this._lastPos != this.get_relativePos()) {
            if (this.setVariable && this.varString != null) {
              ja.setProperty(this._object, this.varString, this.get_relativePos() * (this.maxValue - this.minValue) + this.minValue);
            }
            this._lastPos = this.get_relativePos();
            if (this.callback != null) {
              this.callback(this.get_relativePos());
            }
          }
        },
        destroy: function () {
          this.body = ca.destroy(this.body);
          this.handle = ca.destroy(this.handle);
          this.minLabel = ca.destroy(this.minLabel);
          this.maxLabel = ca.destroy(this.maxLabel);
          this.nameLabel = ca.destroy(this.nameLabel);
          this.valueLabel = ca.destroy(this.valueLabel);
          this._bounds = ca.put(this._bounds);
          La.prototype.destroy.call(this);
        },
        get_expectedPos: function () {
          var a = this.x + this.offset.x + (this._width - this.handle.get_width()) * ((this.value - this.minValue) / (this.maxValue - this.minValue));
          if (a > this.x + this._width + this.offset.x) {
            a = this.x + this._width + this.offset.x;
          } else if (a < this.x + this.offset.x) {
            a = this.x + this.offset.x;
          }
          return a;
        },
        get_relativePos: function () {
          var a = (this.handle.x - this.x - this.offset.x) / (this._width - this.handle.get_width());
          if (a > 1) {
            a = 1;
          }
          return a;
        },
        set_varString: function (a) {
          try {
            ja.getProperty(this._object, a);
            this.varString = a;
          } catch (b) {
            Pa.lastError = b;
            h.log.advanced("Could not create FlxSlider - '" + a + "' is not a valid field of '" + v.string(this._object) + "'", xa.ERROR, true);
            this.varString = null;
          }
          return a;
        },
        set_x: function (a) {
          La.prototype.set_x.call(this, a);
          if (this._bounds != null) {
            var b = this._bounds;
            var c = this.x + this.offset.x;
            var d = this.y + this.offset.y;
            var e = this._width;
            var f = this._height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
          }
          return this.x = a;
        },
        set_y: function (a) {
          La.prototype.set_y.call(this, a);
          if (this._bounds != null) {
            var b = this._bounds;
            var c = this.x + this.offset.x;
            var d = this.y + this.offset.y;
            var e = this._width;
            var f = this._height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
          }
          return this.y = a;
        },
        __class__: Yh,
        __properties__: q(La.prototype.__properties__, {
          set_varString: "set_varString",
          get_relativePos: "get_relativePos",
          get_expectedPos: "get_expectedPos"
        })
      });
      function td() {}
      g["flixel.addons.ui.interfaces.IFlxUIWidget"] = td;
      td.__name__ = "flixel.addons.ui.interfaces.IFlxUIWidget";
      td.__isInterface__ = true;
      td.__interfaces__ = [Zi];
      td.prototype = {
        __class__: td,
        __properties__: {
          set_height: "set_height",
          get_height: "get_height",
          set_width: "set_width",
          get_width: "get_width"
        }
      };
      function cb(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.broadcastToFlxUI = this.autoBounds = true;
        La.call(this, a, b, undefined);
      }
      g["flixel.addons.ui.FlxTypedUIGroup"] = cb;
      cb.__name__ = "flixel.addons.ui.FlxTypedUIGroup";
      cb.__interfaces__ = [td];
      cb.__super__ = Uf;
      cb.prototype = q(Uf.prototype, {
        add: function (a) {
          Uf.prototype.add.call(this, a);
          if (this.autoBounds) {
            this.calcBounds();
          }
          return a;
        },
        remove: function (a, b) {
          if (b == null) {
            b = false;
          }
          a = Uf.prototype.remove.call(this, a, b);
          if (this.autoBounds) {
            this.calcBounds();
          }
          return a;
        },
        setScrollFactor: function (a, b) {
          for (var c = 0, d = this.group.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              e = e.scrollFactor;
              var f = a;
              var k = b;
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              e.set_x(f);
              e.set_y(k);
            }
          }
        },
        contains: function (a) {
          return this.group.members.indexOf(a) != -1;
        },
        calcBounds: function (a) {
          if (this.group.members == null || this.group.members.length == 0) {
            this.set_width(this.set_height(0));
            if (a != null) {
              a.x = 0;
              a.y = 0;
              a.width = 0;
              a.height = 0;
            }
          } else {
            var b = Infinity;
            var c = -Infinity;
            var d = Infinity;
            var e = -Infinity;
            for (var f = 0, k = this.group.members; f < k.length;) {
              var t = k[f];
              ++f;
              if (t != null) {
                if (t.x < b) {
                  b = t.x;
                }
                if (t.x + t.get_width() > c) {
                  c = t.x + t.get_width();
                }
                if (t.y < d) {
                  d = t.y;
                }
                if (t.y + t.get_height() > e) {
                  e = t.y + t.get_height();
                }
              }
            }
            this.set_width(c - b);
            this.set_height(e - d);
            if (a != null) {
              a.x = b;
              a.y = d;
              a.width = this.get_width();
              a.height = this.get_height();
            }
          }
        },
        __class__: cb
      });
      function Ka(a, b, c, d, e, f) {
        this._scaledAssets = [];
        this._assetsToCleanUp = [];
        this._safe_input_delay_elapsed = 0;
        this._curr_mode = "";
        this._pointX = this._pointY = 1;
        this._postLoaded = false;
        this.getTextFallback = this.cursorLists = null;
        this.failed_by = 0;
        this.failed = false;
        this.safe_input_delay_time = 0.01;
        this.do_safe_input_delay = true;
        cb.call(this);
        this._ptr_tongue = d;
        this._ptr = b;
        if (c != null) {
          this.setSuperIndex(c);
        }
        if (f != null) {
          this._variable_index = new ua();
          b = Object.keys(f.h);
          c = b.length;
          d = 0;
          while (d < c) {
            e = b[d++];
            this._variable_index.h[e] = f.h[e];
          }
        }
        if (a != null) {
          this.load(a);
        }
      }
      g["flixel.addons.ui.FlxUI"] = Ka;
      Ka.__name__ = "flixel.addons.ui.FlxUI";
      Ka.__interfaces__ = [ih];
      Ka.event = function (a, b, c, d) {
        var e = Ka.getLeafUIState();
        if (e != null) {
          e.getEvent(a, b, c, d);
        }
      };
      Ka.fontSize = function (a, b) {
        var c = Ka.getLeafUIState()._tongue;
        c = c ?? null;
        if (c != null) {
          b = c.getFontSize(a, b);
        }
        return b;
      };
      Ka.font = function (a, b, c) {
        if (c == null) {
          c = ".ttf";
        }
        if (b == null) {
          b = "";
        }
        var d = Ka.getLeafUIState()._tongue;
        d = d ?? null;
        if (d != null) {
          a = d.getFont(a);
        }
        return C.font(a, b, c);
      };
      Ka.forceFocus = function (a, b) {
        var c = Ka.getLeafUIState();
        if (c != null) {
          c.forceFocus(a, b);
        }
      };
      Ka.getLeafUIState = function () {
        var a = h.game._state;
        if (a != null) {
          while (a.subState != null) {
            a = a.subState;
          }
        }
        if (va.__implements(a, Eg)) {
          return a;
        } else {
          return null;
        }
      };
      Ka.consolidateData = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        if (a == null && b != null) {
          return b;
        }
        if (b == null) {
          return a;
        }
        b = ea.parse(Bg.print(b)).firstElement();
        for (var d = a.attributes(); d.hasNext();) {
          var e = d.next();
          var f = Kb.resolve(a, e);
          b.set(e, f);
        }
        if (a.nodeType == ea.Document) {
          f = "Document";
        } else {
          if (a.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
          }
          f = a.nodeName;
        }
        if (b.nodeType != ea.Element) {
          throw G.thrown("Bad node type, expected Element but found " + (b.nodeType == null ? "null" : mb.toString(b.nodeType)));
        }
        b.nodeName = f;
        if (cc.resolve(a, "name") || cc.resolve(a, "id")) {
          b.set("name", C.xml_name(a));
        } else {
          b.set("name", "");
        }
        for (f = a.elements(); f.hasNext();) {
          var k = f.next();
          if (k.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element but found " + (k.nodeType == null ? "null" : mb.toString(k.nodeType)));
          }
          d = k.nodeName;
          var t = !c;
          if (c) {
            e = b.elementsNamed(d);
            var n = e.next();
            if (dc.resolve(a, d).length == 1 && n != null && e.hasNext() == 0) {
              for (d = k.attributes(); d.hasNext();) {
                e = d.next();
                n.set(e, k.get(e));
              }
            } else {
              t = true;
            }
          }
          if (t) {
            b.insertChild(ea.parse(Bg.print(k)).firstElement(), 0);
          }
        }
        if (b.nodeType != ea.Document && b.nodeType != ea.Element) {
          throw G.thrown("Invalid nodeType " + (b.nodeType == null ? "null" : mb.toString(b.nodeType)));
        }
        return b;
      };
      Ka.sortParams = function (a, b) {
        if (a.sort < b.sort) {
          return -1;
        } else if (a.sort > b.sort) {
          return 1;
        } else {
          return 0;
        }
      };
      Ka.__super__ = cb;
      Ka.prototype = q(cb.prototype, {
        set_focus: function (a) {
          if (this.focus != null) {
            this.onFocusLost(this.focus);
          }
          this.focus = a;
          if (this.focus != null) {
            this.onFocus(this.focus);
          }
          return a;
        },
        getEvent: function (a, b, c, d) {
          if (this._ptr != null && (this._ptr.getEvent(a, b, c, d), a == "post_load")) {
            a = Object.keys(this._asset_index.h);
            d = a.length;
            for (var e = 0; e < d;) {
              var f = a[e++];
              f = this._asset_index.h[f];
              if (f instanceof Ka) {
                f.getEvent("post_load", b, c);
              }
            }
          }
        },
        getRequest: function (a, b, c, d) {
          if (this._ptr != null) {
            return this._ptr.getRequest(a, b, c, d);
          } else {
            return null;
          }
        },
        onFocus: function (a) {
          if (a instanceof sc) {
            for (var b = 0, c = this.group.members; b < c.length;) {
              var d = c[b];
              ++b;
              this.setWidgetSuppression(d, a);
            }
          }
        },
        setWidgetSuppression: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          if (va.__implements(a, vf)) {
            var d = false;
            if (a instanceof sc && a == b) {
              d = true;
            }
            if (!d) {
              a.set_skipButtonUpdate(c);
            }
          } else if (a instanceof cb) {
            d = 0;
            a = a.group.members;
            while (d < a.length) {
              var e = a[d];
              ++d;
              this.setWidgetSuppression(e, b, c);
            }
          }
        },
        onFocusLost: function (a) {
          if (a instanceof sc) {
            a = 0;
            for (var b = this.group.members; a < b.length;) {
              var c = b[a];
              ++a;
              this.setWidgetSuppression(c, null, false);
            }
          }
        },
        setSuperIndex: function (a) {
          this._superIndexUI = a;
        },
        update: function (a) {
          if (this.do_safe_input_delay) {
            this._safe_input_delay_elapsed += h.elapsed;
            if (this._safe_input_delay_elapsed > this.safe_input_delay_time) {
              this.do_safe_input_delay = false;
            } else {
              return;
            }
          }
          cb.prototype.update.call(this, a);
        },
        addAsset: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = "";
          }
          if (Object.prototype.hasOwnProperty.call(this._asset_index.h, b)) {
            if (b == "screen") {
              h.log.advanced("Failed to add a widget with the name 'screen', that is reserved by the system for the screen itself", xa.NOTICE);
            } else {
              h.log.advanced("Duplicate screen name '" + b + "'", xa.NOTICE);
            }
            return false;
          }
          c = this.getGroup(c, d);
          if (c != null) {
            c.add(a);
          } else {
            this.add(a);
          }
          this._asset_index.h[b] = a;
          return true;
        },
        destroy: function () {
          if (this._group_index != null) {
            var a = this._group_index.h;
            a = Object.keys(a);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              var e = this._group_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._group_index = null;
          }
          if (this._asset_index != null) {
            a = this._asset_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              e = this._asset_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._asset_index = null;
          }
          if (this._tag_index != null) {
            a = this._tag_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              ve.clearArray(this._tag_index.h[d]);
              e = this._tag_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._tag_index = null;
          }
          if (this._definition_index != null) {
            a = this._definition_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              e = this._definition_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._definition_index = null;
          }
          if (this._variable_index != null) {
            a = this._variable_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              e = this._variable_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._variable_index = null;
          }
          if (this._mode_index != null) {
            a = this._mode_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              e = this._mode_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._mode_index = null;
          }
          this._ptr_tongue = this._superIndexUI = this._ptr = null;
          if (this.cursorLists != null) {
            a = 0;
            for (b = this.cursorLists; a < b.length;) {
              c = b[a];
              ++a;
              ve.clearArray(c);
            }
            ve.clearArray(this.cursorLists);
          }
          this.cursorLists = null;
          ve.clearArray(this._failure_checks);
          this._failure_checks = null;
          ve.clearArray(this._assetsToCleanUp);
          this._assetsToCleanUp = null;
          ve.clearArray(this._scaledAssets);
          this._scaledAssets = null;
          cb.prototype.destroy.call(this);
        },
        load: function (a) {
          this._group_index = new ua();
          this._asset_index = new ua();
          this._tag_index = new ua();
          this._definition_index = new ua();
          if (this._variable_index == null) {
            this._variable_index = new ua();
          }
          this._mode_index = new ua();
          if (a != null) {
            if (this._superIndexUI == null) {
              var b = new qh(0, 0, h.width, h.height);
              b.name = "screen";
              this.addAsset(b, "screen");
              if (fb.resolve(a, "screen_override") && this._loadTest(Db.resolve(a, "screen_override"))) {
                var c = Db.resolve(a, "screen_override");
                this._loadPosition(c, b);
                b.set_width(this._loadWidth(c, h.width));
                b.set_height(this._loadHeight(c, h.height));
              }
            }
            this._data = a;
            if (fb.resolve(a, "inject")) {
              while (fb.resolve(a, "inject")) {
                var d = Db.resolve(a, "inject");
                b = C.xml_name(d);
                var e = C.xml(b, "xml", false);
                if (e != null) {
                  var f = d.parent;
                  var k = 0;
                  b = 0;
                  for (c = f.children; b < c.length;) {
                    var t = c[b];
                    ++b;
                    if (t == d) {
                      break;
                    }
                    ++k;
                  }
                  if (f.removeChild(d)) {
                    b = 0;
                    c = e.elements();
                    while (c.hasNext()) {
                      d = c.next();
                      f.insertChild(d, k + b);
                      ++b;
                    }
                  }
                }
              }
            }
            if (fb.resolve(a, "include")) {
              b = 0;
              c = dc.resolve(a, "include");
              while (b < c.length) {
                f = c[b];
                ++b;
                f = C.xml_name(f);
                f = C.xml(f);
                if (f != null) {
                  e = 0;
                  for (t = dc.resolve(f, "definition"); e < t.length;) {
                    k = t[e];
                    ++e;
                    d = "include:" + C.xml_name(k);
                    this.unparentXML(k);
                    this._definition_index.h[d] = k;
                  }
                  if (fb.resolve(f, "point_size")) {
                    this._loadPointSize(f);
                  }
                  if (fb.resolve(f, "default")) {
                    k = 0;
                    f = dc.resolve(f, "default");
                    while (k < f.length) {
                      d = f[k];
                      ++k;
                      if (this._loadTest(d)) {
                        e = C.xml_name(d);
                        this.unparentXML(d);
                        this._definition_index.h["default:" + e] = d;
                      }
                    }
                  }
                }
              }
            }
            if (fb.resolve(a, "point_size")) {
              this._loadPointSize(a);
            }
            if (fb.resolve(a, "definition")) {
              b = 0;
              c = dc.resolve(a, "definition");
              while (b < c.length) {
                k = c[b];
                ++b;
                if (this._loadTest(k)) {
                  d = C.xml_name(k);
                  f = "";
                  if (d.indexOf("default:") != -1) {
                    f = "'default:'";
                  }
                  if (d.indexOf("include:") != -1) {
                    f = "'include:'";
                  }
                  if (f != "") {
                    h.log.advanced("Can't create FlxUI definition '" + d + "', because '" + f + "' is a reserved name prefix!", xa.WARNING, true);
                  } else {
                    this.unparentXML(k);
                    this._definition_index.h[d] = k;
                  }
                }
              }
            }
            if (fb.resolve(a, "default")) {
              b = 0;
              c = dc.resolve(a, "default");
              while (b < c.length) {
                d = c[b];
                ++b;
                if (this._loadTest(d)) {
                  e = C.xml_name(d);
                  this.unparentXML(d);
                  this._definition_index.h["default:" + e] = d;
                }
              }
            }
            if (fb.resolve(a, "variable")) {
              b = 0;
              c = dc.resolve(a, "variable");
              while (b < c.length) {
                k = c[b];
                ++b;
                if (this._loadTest(k)) {
                  f = C.xml_name(k);
                  k = C.xml_str(k, "value");
                  if (f != "") {
                    this._variable_index.h[f] = k;
                  }
                }
              }
            }
            if (fb.resolve(a, "mode")) {
              b = 0;
              c = dc.resolve(a, "mode");
              while (b < c.length) {
                k = c[b];
                ++b;
                if (this._loadTest(k)) {
                  f = this.applyNodeConditionals(k);
                  k = C.xml_name(k);
                  this.unparentXML(f);
                  this._mode_index.h[k] = f;
                }
              }
            }
            if (fb.resolve(a, "group")) {
              b = 0;
              c = dc.resolve(a, "group");
              while (b < c.length) {
                k = c[b];
                ++b;
                if (this._loadTest(k)) {
                  f = C.xml_name(k);
                  d = C.xml_str(k, "custom");
                  k = null;
                  if (d != "") {
                    d = this._ptr.getRequest("ui_get_group:", this, d);
                    if (d != null && d instanceof cb) {
                      k = d;
                    }
                  }
                  if (k == null) {
                    k = new cb();
                  }
                  k.name = f;
                  this._group_index.h[f] = k;
                  this.add(k);
                }
              }
            }
            if (a.firstElement() != null) {
              for (b = a.elements(); b.hasNext();) {
                c = b.next();
                this._loadSub(c);
              }
            }
            this._postLoad(a);
          } else {
            this._onFinishLoad();
          }
        },
        unparentXML: function (a) {
          return C.unparentXML(a);
        },
        _loadPointSize: function (a) {
          var b = Db.resolve(a, "point_size");
          var c = -1;
          if (c == null) {
            c = 0;
          }
          var d = this._loadWidth(b, c, "x");
          b = Db.resolve(a, "point_size");
          c = -1;
          if (c == null) {
            c = 0;
          }
          b = this._loadHeight(b, c, "y");
          if (b < 1 && d < 1) {
            d = b = this._loadHeight(Db.resolve(a, "point_size"), -1, "value");
          }
          if (b > 0) {
            this._pointX = d;
          }
          if (d > 0) {
            this._pointY = b;
          }
        },
        _loadSub: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
          }
          var c = a.nodeName;
          if (a.nodeType != ea.Document && a.nodeType != ea.Element) {
            throw G.thrown("Invalid nodeType " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
          }
          if (c == "load_if") {
            if (this._loadTest(a) && a.firstElement() != null) {
              for (a = a.elements(); a.hasNext();) {
                var d = a.next();
                this._loadSub(d, b + 1);
              }
            }
          } else {
            d = null;
            b = C.xml_name(a);
            if (cc.resolve(a, "group")) {
              d = Kb.resolve(a, "group");
              d = this.getGroup(d);
            }
            c = this._loadThing(c, a);
            if (c != null) {
              this._loadGlobals(a, c);
              if (b != null && b != "") {
                this._asset_index.h[b] = c;
                c.name = b;
                var e = C.xml_str(a, "tags");
                if (e != "") {
                  e = e.split(",");
                  this._addTags(e, b);
                }
              }
              this._loadTooltip(c, a);
              if (d != null) {
                d.add(c);
              } else {
                this.add(c);
              }
              this._loadPosition(a, c);
            }
          }
        },
        _addTags: function (a, b) {
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            if (!Object.prototype.hasOwnProperty.call(this._tag_index.h, d)) {
              this._tag_index.h[d] = [];
            }
            d = this._tag_index.h[d];
            if (d.indexOf(b) == -1) {
              d.push(b);
            }
          }
        },
        _loadGlobals: function (a, b) {
          if (b instanceof Ea) {
            var c = C.xml_bool(a, "visible", true);
            var d = C.xml_bool(a, "active", true);
            var e = C.xml_i(a, "num_id");
            b.visible = c;
            b.active = d;
            b.ID = e;
            if (b instanceof F) {
              a = C.xml_f(a, "alpha", 1);
              b.set_alpha(a);
            }
          }
        },
        _postLoad: function (a) {
          this._postLoaded = true;
          if (a.firstElement() != null) {
            for (var b = a.elements(); b.hasNext();) {
              var c = b.next();
              if (c.nodeType != ea.Element) {
                throw G.thrown("Bad node type, expected Element but found " + (c.nodeType == null ? "null" : mb.toString(c.nodeType)));
              }
              var d = c.nodeName.toLowerCase();
              if (c.nodeType != ea.Document && c.nodeType != ea.Element) {
                throw G.thrown("Invalid nodeType " + (c.nodeType == null ? "null" : mb.toString(c.nodeType)));
              }
              this._postLoadThing(d, c);
            }
          }
          if (fb.resolve(a, "mode")) {
            b = 0;
            c = dc.resolve(a, "mode");
            while (b < c.length) {
              a = c[b];
              ++b;
              if (C.xml_bool(a, "is_default")) {
                a = C.xml_name(a);
                this.setMode(a);
                break;
              }
            }
          }
          if (this._failure_checks != null) {
            b = 0;
            for (c = this._failure_checks; b < c.length;) {
              a = c[b];
              ++b;
              if (this._checkFailure(a)) {
                this.failed = true;
                break;
              }
            }
            C.clearArraySoft(this._failure_checks);
            this._failure_checks = null;
          }
          this._onFinishLoad();
        },
        _sendTo: function (a, b) {
          var c = this.getAssetGroup(null, a);
          if (c == null) {
            if (this.group.members.indexOf(a) != -1) {
              c = this;
            } else {
              return;
            }
          }
          if (b == -1 || b == 1) {
            r.remove(c.group.members, a);
            switch (b) {
              case -1:
                c.group.members.splice(0, 0, a);
                break;
              case 1:
                c.group.members.push(a);
            }
          }
        },
        setMode: function (a, b) {
          if (b == null) {
            b = "";
          }
          if (this._curr_mode != a) {
            var c = this.getMode(a);
            this._curr_mode = a;
            if (b == "") {
              if (c != null) {
                for (a = c.elements(); a.hasNext();) {
                  b = a.next();
                  c = b = this.applyNodeConditionals(b);
                  if (c.nodeType != ea.Element) {
                    throw G.thrown("Bad node type, expected Element but found " + (c.nodeType == null ? "null" : mb.toString(c.nodeType)));
                  }
                  var d = c.nodeName;
                  var e = C.xml_str(c, "active") == "" ? null : true;
                  if (e != null) {
                    e = C.xml_bool(c, "active");
                  }
                  if (this._loadTest(b)) {
                    switch (d) {
                      case "align":
                        this._alignThing(b);
                        break;
                      case "change":
                        this._changeThing(b);
                        break;
                      case "hide":
                        this.showThing(C.xml_name(c), false, e);
                        break;
                      case "position":
                        c = C.xml_name(c);
                        c = this.getAsset(c);
                        if (c != null) {
                          this._loadPosition(b, c);
                        }
                        break;
                      case "show":
                        this.showThing(C.xml_name(c), true, e);
                    }
                  }
                }
              }
            } else {
              b = this.getAsset(b);
              if (b != null && b instanceof Ka) {
                va.__cast(b, Ka).setMode(a, "");
              }
            }
          }
        },
        showThing: function (a, b, c) {
          if (b == null) {
            b = true;
          }
          if (a.indexOf(",") != -1) {
            a = a.split(",");
            for (var d = 0; d < a.length;) {
              var e = a[d];
              ++d;
              var f = this.getAsset(e);
              if (f != null) {
                f.set_visible(b);
                if (c != null) {
                  f.set_active(c);
                }
              } else {
                f = this.getGroup(e);
                if (f != null) {
                  f.set_visible(b);
                  if (c != null) {
                    f.set_active(c);
                  }
                }
              }
            }
          } else if (a != "*") {
            f = this.getAsset(a);
            if (f != null) {
              f.set_visible(b);
              if (c != null) {
                f.set_active(c);
              }
            } else {
              f = this.getGroup(a);
              if (f != null) {
                f.set_visible(b);
                if (c != null) {
                  f.set_active(c);
                }
              }
            }
          } else {
            a = Object.keys(this._asset_index.h);
            d = a.length;
            f = 0;
            while (f < d) {
              e = a[f++];
              if (e != "*") {
                this.showThing(e, b, c);
              }
            }
          }
        },
        getGroup: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._group_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            return this._superIndexUI.getGroup(a, b);
          } else {
            return c;
          }
        },
        hasAsset: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (Object.prototype.hasOwnProperty.call(this._asset_index.h, a)) {
            return true;
          } else if (b && this._superIndexUI != null) {
            return this._superIndexUI.hasAsset(a, b);
          } else {
            return false;
          }
        },
        getAsset: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._asset_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            return this._superIndexUI.getAsset(a, b);
          } else {
            return c;
          }
        },
        getAssetGroup: function (a, b) {
          if (b == null && (a == null || a == "")) {
            return null;
          }
          if (b == null) {
            b = this.getAsset(a);
          }
          if (b == null) {
            return null;
          }
          var c = Object.keys(this._group_index.h);
          for (var d = c.length, e = 0; e < d;) {
            a = c[e++];
            a = this._group_index.h[a];
            if (a.group.members.indexOf(b) != -1) {
              return a;
            }
          }
          return null;
        },
        getMode: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._mode_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            return this._superIndexUI.getMode(a, b);
          } else {
            return c;
          }
        },
        checkVariable: function (a, b, c, d, e) {
          if (e == null) {
            e = true;
          }
          if (d == null) {
            d = "==";
          }
          a = this.getVariable(a, e);
          if (a != null) {
            return C.compareStringVars(a, b, c, d);
          } else {
            return C.compareStringVars("", b, c, d);
          }
        },
        setVariable: function (a, b) {
          this._variable_index.h[a] = b;
        },
        getVariable: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._variable_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            c = this._superIndexUI.getVariable(a, b);
          }
          return c;
        },
        getDefinition: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._definition_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            c = this._superIndexUI.getDefinition(a, b);
          }
          if (c == null && a.indexOf("include:") == -1) {
            c = this.getDefinition("include:" + a, b);
          }
          return c;
        },
        screenWidth: function () {
          if (this.hasAsset("screen")) {
            return this.getAsset("screen").get_width() | 0;
          } else {
            return h.width;
          }
        },
        screenHeight: function () {
          if (this.hasAsset("height")) {
            return this.getAsset("screen").get_height() | 0;
          } else {
            return h.height;
          }
        },
        applyNodeConditionals: function (a) {
          if (fb.resolve(a, "locale") || fb.resolve(a, "haxedef")) {
            a = ea.parse(Bg.print(a)).firstElement();
            if (a.nodeType != ea.Document && a.nodeType != ea.Element) {
              throw G.thrown("Invalid nodeType " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
            }
            if (fb.resolve(a, "locale")) {
              a = this.applyNodeChanges(a, "locale");
            }
            if (fb.resolve(a, "haxedef")) {
              a = this.applyNodeChanges(a, "haxedef");
            }
            if (fb.resolve(a, "window")) {
              a = this.applyNodeChanges(a, "window");
            }
          }
          return a;
        },
        applyNodeChanges: function (a, b) {
          var c = "";
          if (b == "locale") {
            if (this._ptr_tongue == null) {
              return a;
            }
            c = this._ptr_tongue.locale.toLowerCase();
          }
          var d = false;
          if (b == "haxedef") {
            d = true;
          }
          if (b == "window") {
            c = h.width + "," + h.height;
          }
          var e = 0;
          for (b = dc.resolve(a, b); e < b.length;) {
            var f = b[e];
            ++e;
            var k = C.xml_name(f);
            if (d) {
              c = "";
              if (C.checkHaxedef(k)) {
                c = k;
              }
            }
            if (k == c && fb.resolve(f, "change")) {
              k = 0;
              f = dc.resolve(f, "change");
              while (k < f.length) {
                var t = f[k];
                ++k;
                for (var n = t.attributes(); n.hasNext();) {
                  var K = n.next();
                  var ya = t.get(K);
                  a.set(K, ya);
                }
              }
            }
          }
          return a;
        },
        _loadThingGetInfo: function (a) {
          if (a.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
          }
          var b = this.getDefinition("default:" + a.nodeName);
          var c = null;
          if (b != null) {
            c = Ka.consolidateData(a, b, true);
          }
          if (c == null) {
            c = a;
          }
          a = C.xml_str(c, "use_def", true);
          b = null;
          if (a != "") {
            b = this.getDefinition(a);
          }
          c = Ka.consolidateData(c, b);
          c = this.applyNodeConditionals(c);
          if (this._loadTest(c) == 0) {
            return null;
          } else {
            return c;
          }
        },
        _loadTooltip: function (a, b) {
          if (fb.resolve(b, "tooltip")) {
            b = this._loadTooltipData(Db.resolve(b, "tooltip"));
            var c = Ka.getLeafUIState();
            if (a instanceof xb) {
              c.tooltips.add(a.button, b);
            } else {
              c.tooltips.add(a, b);
            }
          }
        },
        _loadTooltipData: function (a) {
          var b = {
            title: "",
            body: "",
            anchor: null,
            style: {
              titleFormat: null,
              bodyFormat: null,
              titleBorder: null,
              bodyBorder: null,
              titleOffset: null,
              bodyOffset: null,
              titleWidth: -1,
              bodyWidth: -1,
              background: null,
              borderSize: -1,
              borderColor: null,
              arrow: null,
              autoSizeVertical: null,
              autoSizeHorizontal: null,
              leftPadding: -1,
              rightPadding: -1,
              topPadding: -1,
              bottomPadding: -1
            }
          };
          var c = this.getDefinition("default:tooltip");
          if (c != null) {
            a = Ka.consolidateData(a, c, true);
          }
          if (cc.resolve(a, "use_def")) {
            c = C.xml_str(a, "use_def", true);
            c = this.getDefinition(c);
            if (c != null) {
              a = Ka.consolidateData(a, c, true);
            }
          }
          if (cc.resolve(a, "text")) {
            this._loadTooltipText(a, "text", b);
          }
          if (fb.resolve(a, "title")) {
            this._loadTooltipText(Db.resolve(a, "title"), "text", b);
          }
          if (fb.resolve(a, "body")) {
            this._loadTooltipText(Db.resolve(a, "body"), "text", b);
          }
          b.anchor = this._loadAnchor(a);
          this._loadTooltipStyle(a, b);
          return b;
        },
        _loadTooltipStyle: function (a, b) {
          b.style.background = C.xml_color(a, "background");
          b.style.borderSize = C.xml_i(a, "border", -1);
          b.style.borderColor = C.xml_color(a, "border_color");
          if (cc.resolve(a, "arrow")) {
            var c = "";
            if (a.get("arrow") != null) {
              c = a.get("arrow");
              if (c == "" || c == null) {
                c = "";
              } else {
                c = C.gfx(c);
                try {
                  if (!Q.exists(c, "IMAGE")) {
                    throw G.thrown("couldn't load bmp \"arrow\"");
                  }
                } catch (e) {
                  Pa.lastError = e;
                  var d = G.caught(e).unwrap();
                  if (typeof d == "string") {
                    h.log.advanced("FlxUI: U.xml_gfx() : " + d, xa.ERROR, true);
                  } else {
                    throw e;
                  }
                }
              }
            }
          } else {
            c = null;
          }
          b.style.arrow = c;
          b.style.autoSizeHorizontal = C.xml_bool(a, "auto_size_horizontal", true);
          b.style.autoSizeVertical = C.xml_bool(a, "auto_size_vertical", true);
          c = this._loadHeight(a, -1, "pad_all") | 0;
          if (c != -1) {
            b.style.leftPadding = b.style.rightPadding = b.style.topPadding = b.style.bottomPadding = c;
          } else {
            c = this._loadWidth(a, 0, "pad_left") | 0;
            b.style.leftPadding = c;
            c = this._loadWidth(a, 0, "pad_right") | 0;
            b.style.rightPadding = c;
            c = this._loadHeight(a, 0, "pad_top") | 0;
            b.style.topPadding = c;
            c = this._loadHeight(a, 0, "pad_bottom") | 0;
            b.style.bottomPadding = c;
          }
        },
        _loadTooltipText: function (a, b, c) {
          if (a.nodeType == ea.Document) {
            var d = "Document";
          } else {
            if (a.nodeType != ea.Element) {
              throw G.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
            }
            d = a.nodeName;
          }
          b = this._loadString(a, b);
          var e = this._loadWidth(a, 0, "x");
          var f = this._loadHeight(a, 0, "y");
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          e = W.pool.get().set(e, f);
          e._inPool = false;
          if (cc.resolve(a, "use_def")) {
            f = C.xml_str(a, "use_def", true);
            f = this.getDefinition(f);
            if (f != null) {
              a = Ka.consolidateData(a, f);
            }
          }
          f = this._loadBorder(a);
          var k = this._loadFontDef(a);
          var t = C.xml_color(a, "color", true, -16777216);
          k.format.color = t;
          a = this._loadWidth(a, -1, "width") | 0;
          switch (d) {
            case "body":
              if (b != "") {
                c.body = b;
              }
              c.style.bodyOffset = e;
              c.style.bodyFormat = k;
              c.style.bodyWidth = a;
              c.style.bodyBorder = f;
              break;
            case "title":
            case "tooltip":
              if (b != "") {
                c.title = b;
              }
              c.style.titleOffset = e;
              c.style.titleFormat = k;
              c.style.titleWidth = a;
              c.style.titleBorder = f;
          }
        },
        _loadAnchor: function (a) {
          var b = this._loadWidth(a, 0, "x");
          var c = this._loadHeight(a, 0, "y");
          if (fb.resolve(a, "anchor")) {
            var d = C.xml_str(Db.resolve(a, "anchor"), "x", true, "right");
            var e = C.xml_str(Db.resolve(a, "anchor"), "y", true, "top");
            var f = C.xml_str(Db.resolve(a, "anchor"), "x-flush", true, "left");
            a = C.xml_str(Db.resolve(a, "anchor"), "y-flush", true, "top");
            return new Gg(b, c, d, e, f, a);
          }
          return null;
        },
        _loadThing: function (a, b) {
          var c = this._loadThingGetInfo(b);
          if (c == null) {
            return null;
          }
          switch (a) {
            case "align":
              this._alignThing(c, true);
              return null;
            case "bar":
              return this._loadBar(c);
            case "box":
              return this._loadBox(c);
            case "button":
              return this._loadButton(c);
            case "button_toggle":
              return this._loadButton(c, true, true);
            case "change":
              this._changeThing(c);
              return null;
            case "checkbox":
              return this._loadCheckBox(c);
            case "failure":
              if (this._failure_checks == null) {
                this._failure_checks = [];
              }
              this.unparentXML(c);
              this._failure_checks.push(c);
              return null;
            case "input_text":
              return this._loadInputText(c);
            case "line":
              return this._loadLine(c);
            case "default":
            case "group":
            case "include":
            case "inject":
            case "load_if":
            case "mode":
              return null;
            case "chrome":
            case "nine_slice":
            case "nine_slice_sprite":
            case "nineslice":
            case "nineslicesprite":
              return this._load9SliceSprite(c);
            case "num_stepper":
            case "numeric_stepper":
            case "numstepper":
              return this._loadNumericStepper(c);
            case "position":
              this.name = C.xml_name(c);
              a = this.getAsset(this.name);
              if (a != null) {
                this._loadPosition(c, a);
              }
              return null;
            case "dropdown":
            case "dropdown_menu":
            case "pulldown":
            case "pulldown_menu":
              return this._loadDropDownMenu(c);
            case "radio_group":
              return this._loadRadioGroup(c);
            case "region":
              return this._loadRegion(c);
            case "sprite":
              return this._loadSprite(c);
            case "tab_menu":
              return this._loadTabMenu(c);
            case "text":
              return this._loadText(c);
            case "tile_test":
              return this._loadTileTest(c);
            case "layout":
            case "ui":
              return this._loadLayout(c);
            default:
              return this._ptr.getRequest("ui_get:" + a, this, c, [b]);
          }
        },
        _loadScale: function (a, b, c) {
          if (c == null) {
            c = "scale";
          }
          if (b == null) {
            b = 1;
          }
          return this._loadHeight(a, b, c, "none");
        },
        _loadScaleX: function (a, b) {
          if (b == null) {
            b = 1;
          }
          return this._loadWidth(a, b, "scale_x", "none");
        },
        _loadScaleY: function (a, b) {
          if (b == null) {
            b = 1;
          }
          return this._loadHeight(a, b, "scale_y", "none");
        },
        _loadWidth: function (a, b, c, d) {
          if (d == null) {
            d = "";
          }
          if (c == null) {
            c = "width";
          }
          if (b == null) {
            b = 10;
          }
          c = C.xml_str(a, c, true, b == null ? "null" : "" + b);
          a = this.getRound(a, d);
          return this.doRound(this._getDataSize("w", c, b), a);
        },
        _loadHeight: function (a, b, c, d) {
          if (d == null) {
            d = "";
          }
          if (c == null) {
            c = "height";
          }
          if (b == null) {
            b = 10;
          }
          c = C.xml_str(a, c, true, b == null ? "null" : "" + b);
          a = this.getRound(a, d);
          return this.doRound(this._getDataSize("h", c, b), a);
        },
        _loadCompass: function (a, b) {
          if (b == null) {
            b = "resize_point";
          }
          a = C.xml_str(a, b, true, "nw");
          var c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = W.pool.get().set(b, c);
          b._inPool = false;
          switch (a) {
            case "c":
            case "center":
            case "m":
            case "mid":
              b.set_x(0.5);
              b.set_y(0.5);
              break;
            case "ll":
            case "sw":
              b.set_x(0);
              b.set_y(1);
              break;
            case "lr":
            case "se":
              b.set_x(1);
              b.set_y(1);
              break;
            case "e":
            case "r":
              b.set_x(1);
              b.set_y(0.5);
              break;
            case "s":
              b.set_x(0.5);
              b.set_y(1);
              break;
            case "n":
            case "u":
              b.set_x(0.5);
              b.set_y(0);
              break;
            case "nw":
            case "ul":
              b.set_x(0);
              b.set_y(0);
              break;
            case "ne":
            case "ur":
              b.set_x(1);
              b.set_y(0);
              break;
            case "w":
              b.set_x(0.5);
              b.set_y(0);
          }
          return b;
        },
        _changeThing: function (a) {
          var b = C.xml_name(a);
          b = this.getAsset(b);
          if (b != null) {
            var c = -1;
            var d = -1;
            var e;
            var f;
            for (var k = a.attributes(); k.hasNext();) {
              switch (k.next()) {
                case "height":
                  d = this._loadHeight(a);
                  break;
                case "label":
                  var t = C.xml_str(a, "label");
                  e = C.xml_str(a, "context", true, "ui");
                  f = C.xml_str(a, "code", true, "");
                  t = this.getText(t, e, true, f);
                  if (va.__implements(b, Zh)) {
                    b.getLabel().set_text(t);
                  }
                  break;
                case "text":
                  if (b instanceof Xd) {
                    t = C.xml_str(a, "text");
                    e = C.xml_str(a, "context", true, "ui");
                    var n = b;
                    f = C.xml_str(a, "code", true, "");
                    n.set_text(this.getText(t, e, true, f));
                  }
                  break;
                case "width":
                  c = this._loadWidth(a);
              }
            }
            if (!!va.__implements(b, cd) && (c != -1 || d != -1)) {
              if (c == -1) {
                c = b.get_width();
              }
              if (d == -1) {
                d = b.get_height();
              }
              b.resize(c, d);
            }
            if (fb.resolve(a, "param") && va.__implements(b, Ke)) {
              c = null;
              if (fb.resolve(a, "param")) {
                c = [];
                d = 0;
                for (a = dc.resolve(a, "param"); d < a.length;) {
                  f = a[d];
                  ++d;
                  if (cc.resolve(f, "type") && cc.resolve(f, "value")) {
                    k = Kb.resolve(f, "type");
                    k = k.toLowerCase();
                    t = e = Kb.resolve(f, "value");
                    f = C.xml_i(f, "sort", -1);
                    switch (k) {
                      case "bool":
                      case "boolean":
                        e = new String(e);
                        e = e.toLowerCase();
                        t = e == "true" || e == "1" ? true : false;
                        break;
                      case "float":
                        t = parseFloat(e);
                        break;
                      case "color":
                      case "hex":
                        k = eb.fromString(e);
                        if (k == null) {
                          throw G.thrown("U.parseHex() unable to parse hex String " + e);
                        }
                        t = k;
                        break;
                      case "int":
                        t = v.parseInt(e);
                        break;
                      case "string":
                        t = new String(e);
                    }
                    c.push({
                      sort: f,
                      value: t
                    });
                  }
                }
                c.sort(Ka.sortParams);
                d = 0;
                for (a = c.length; d < a;) {
                  e = d++;
                  c[e] = c[e].value;
                }
              }
              b.set_params(c);
            }
          }
        },
        _alignThing: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (fb.resolve(a, "objects")) {
            for (var c = 0, d = dc.resolve(a, "objects"); c < d.length;) {
              var e = d[c];
              ++c;
              e = C.xml_str(e, "value", true, "").split(",");
              var f = C.xml_str(a, "axis", true);
              if (f != "horizontal" && f != "vertical") {
                throw new Pb("FlxUI._alignThing(): axis must be \"horizontal\" or \"vertical\"!");
              }
              var k = f == "horizontal" ? this._getDataSize("w", C.xml_str(a, "spacing", true), -1) : this._getDataSize("h", C.xml_str(a, "spacing", true), -1);
              var t = C.xml_bool(a, "resize");
              var n = C.xml_bool(a, "grow", true);
              var K = C.xml_bool(a, "shrink", true);
              var ya = -1;
              var l = -1;
              if (l == null) {
                l = 0;
              }
              if (ya == null) {
                ya = 0;
              }
              if (l == null) {
                l = 0;
              }
              if (ya == null) {
                ya = 0;
              }
              l = W.pool.get().set(ya, l);
              l._inPool = false;
              ya = "";
              if (fb.resolve(a, "bounds")) {
                if (f == "horizontal") {
                  l.set_x(this._getDataSize("w", C.xml_str(Db.resolve(a, "bounds"), "left"), -1));
                  l.set_y(this._getDataSize("w", C.xml_str(Db.resolve(a, "bounds"), "right"), -1));
                } else if (f == "vertical") {
                  l.set_x(this._getDataSize("h", C.xml_str(Db.resolve(a, "bounds"), "top"), -1));
                  l.set_y(this._getDataSize("h", C.xml_str(Db.resolve(a, "bounds"), "bottom"), -1));
                }
              }
              if (l.x != -1 && l.y != -1) {
                if (l.y <= l.x) {
                  ya = "bounds max must be > bounds min! (max=" + l.y + " min=" + l.x + ")";
                }
              } else {
                ya = "missing bound!";
              }
              if (ya == "") {
                this._doAlign(e, f, k, t, l, n, K);
              }
              if (fb.resolve(a, "anchor") || cc.resolve(a, "x") || cc.resolve(a, "y")) {
                for (f = 0; f < e.length;) {
                  k = e[f];
                  ++f;
                  k = this.getAsset(k);
                  this._loadPosition(a, k);
                }
              } else if (ya != "") {
                if (!b) {
                  h.log.advanced(ya, xa.ERROR, true);
                }
              }
            }
          } else {
            throw new Pb("FlxUI._alignThing(): <objects> node not found!");
          }
        },
        _doAlign: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = true;
          }
          if (f == null) {
            f = true;
          }
          var t = 0;
          var n = e.y - e.x;
          var h = a.length - 1;
          var ya = 0;
          var l = "width";
          var L = "x";
          if (b == "vertical") {
            l = "height";
            L = "y";
          }
          for (var g = 0; g < a.length;) {
            var p = a[g];
            ++g;
            p = this.getAsset(p);
            if (p != null) {
              var v = 0;
              switch (l) {
                case "height":
                  v = p.get_height();
                  break;
                case "width":
                  v = p.get_width();
              }
              t += v;
            }
          }
          if (d == 0) {
            t = (n - t) / h;
          } else {
            t = c;
            ya = (n - c * h) / a.length;
          }
          ya |= 0;
          t |= 0;
          e = e.x;
          for (g = 0; g < a.length;) {
            p = a[g];
            ++g;
            p = this.getAsset(p);
            if (p != null) {
              c = e;
              if (d) {
                if (va.__implements(p, cd)) {
                  e = true;
                  n = p;
                  if (b == "vertical") {
                    if (ya > n.get_width()) {
                      e = f;
                    } else if (ya < n.get_width()) {
                      e = k;
                    }
                    if (e) {
                      n.resize(n.get_width(), ya);
                    }
                  } else if (b == "horizontal") {
                    if (ya > n.get_height()) {
                      e = f;
                    } else if (ya < n.get_height()) {
                      e = k;
                    }
                    if (e) {
                      n.resize(ya, n.get_height());
                    }
                  }
                }
              } else {
                switch (l) {
                  case "height":
                    ya = p.get_height();
                    break;
                  case "width":
                    ya = p.get_width();
                }
              }
              e = c + ya + t;
              switch (L) {
                case "x":
                  p.set_x(c);
                  break;
                case "y":
                  p.set_y(c);
              }
            }
          }
        },
        _checkFailure: function (a) {
          var b = C.xml_str(a, "target", true);
          var c = C.xml_str(a, "property", true);
          var d = C.xml_str(a, "compare", true);
          a = C.xml_str(a, "value", true);
          var e = this.getAsset(b);
          if (e == null) {
            return false;
          }
          var f = b = 0;
          var k = C.perc_to_float(a);
          switch (c) {
            case "h":
            case "height":
              b = e.get_height();
              break;
            case "w":
            case "width":
              b = e.get_width();
          }
          if (isNaN(k)) {
            if (C.isStrNum(a)) {
              f = parseFloat(a);
            } else {
              return false;
            }
          } else {
            switch (c) {
              case "h":
              case "height":
                f = k * this.screenHeight();
                break;
              case "w":
              case "width":
                f = k * this.screenWidth();
            }
          }
          c = false;
          switch (d) {
            case "<":
              if (b < f) {
                this.failed_by = f - b;
                c = true;
              }
              break;
            case "<=":
              if (b <= f) {
                this.failed_by = f - b;
                c = true;
              }
              break;
            case "=":
            case "==":
              if (b == f) {
                this.failed_by = Math.abs(b - f);
                c = true;
              }
              break;
            case ">":
              if (b > f) {
                this.failed_by = b - f;
                c = true;
              }
              break;
            case ">=":
              if (b >= f) {
                this.failed_by = b - f;
                c = true;
              }
          }
          return c;
        },
        _resizeThing: function (a, b) {
          var c = false;
          var d = a.get_width();
          var e = a.get_height();
          if (d < b.min_width) {
            c = true;
            d = b.min_width;
          } else if (d > b.max_width) {
            c = true;
            d = b.max_width;
          }
          if (e < b.min_height) {
            c = true;
            e = b.min_height;
          } else if (e > b.max_height) {
            c = true;
            e = b.max_height;
          }
          if (c) {
            a.resize(d, e);
          }
        },
        _postLoadThing: function (a, b) {
          if (a == "load_if") {
            if (this._loadTest(b) && b.firstElement() != null) {
              for (var c = b.elements(); c.hasNext();) {
                var d = c.next();
                if (d.nodeType != ea.Element) {
                  throw G.thrown("Bad node type, expected Element but found " + (d.nodeType == null ? "null" : mb.toString(d.nodeType)));
                }
                b = d.nodeName.toLowerCase();
                if (d.nodeType != ea.Document && d.nodeType != ea.Element) {
                  throw G.thrown("Invalid nodeType " + (d.nodeType == null ? "null" : mb.toString(d.nodeType)));
                }
                this._postLoadThing(b, d);
              }
            }
          } else if (this._loadTest(b) != 0) {
            var e = C.xml_name(b);
            c = this.getAsset(e);
            if (d = a == "group") {
              c = this.getGroup(e);
            }
            if (a == "align") {
              this._alignThing(b);
            }
            if (a == "change") {
              this._changeThing(b);
            }
            if (a == "position") {
              this._loadPosition(b, c);
            } else {
              if (a == "cursor") {
                this._loadCursor(b);
              }
              if (c != null || d) {
                if (!d) {
                  a = C.xml_str(b, "use_def", true);
                  if (a != "") {
                    this.getDefinition(a);
                  }
                  if (va.__implements(c, cd)) {
                    a = this._getDataSize("w", C.xml_str(b, "width"));
                    e = this._getDataSize("h", C.xml_str(b, "height"));
                    if (a == 0 || a == c.get_width()) {
                      a = null;
                    }
                    if (e == 0 || e == c.get_height()) {
                      e = null;
                    }
                    var f = this.calcMaxMinSize(b);
                    if (f != null) {
                      if (a != null) {
                        if (a < f.min_width) {
                          a = f.min_width;
                        }
                        if (a > f.max_width) {
                          a = f.max_width;
                        }
                        f.min_width = f.max_width = a;
                      }
                      if (e != null) {
                        if (e < f.min_height) {
                          e = f.min_height;
                        }
                        if (e > f.max_height) {
                          e = f.max_height;
                        }
                        f.min_height = f.max_height = e;
                      }
                      this._resizeThing(va.__cast(c, cd), f);
                    }
                  }
                  a = -c.x;
                  e = -c.y;
                  if (e == null) {
                    e = 0;
                  }
                  if (a == null) {
                    a = 0;
                  }
                  c.set_x(c.x + a);
                  c.set_y(c.y + e);
                  this._loadPosition(b, c);
                }
                b = C.xml_str(b, "send_to", true, "");
                if (b != "") {
                  switch (b) {
                    case "back":
                    case "bottom":
                      this._sendTo(c, -1);
                      break;
                    case "front":
                    case "top":
                      this._sendTo(c, 1);
                  }
                }
                if (!d && c instanceof Ka && c._postLoaded == 0) {
                  c.getEvent("post_load", this, null);
                }
              }
            }
          }
        },
        _loadTileTest: function (a) {
          var b = C.xml_i(a, "tiles_w", 2);
          var c = C.xml_i(a, "tiles_h", 2);
          var d = this._loadWidth(a);
          var e = this._loadHeight(a);
          var f = this.calcMaxMinSize(a);
          if (d < f.min_width) {
            d = f.min_width;
          }
          if (e < f.min_height) {
            e = f.min_height;
          }
          d = d / b | 0;
          e = e / c | 0;
          if (d < e) {
            e = d;
          } else if (e < d) {
            d = e;
          }
          if (d * b > f.max_width) {
            d = f.max_width / b | 0;
          }
          if (e * c > f.max_height) {
            e = f.max_height / c | 0;
          }
          if (d < e) {
            e = d;
          } else if (e < d) {
            d = e;
          }
          if (d < 2) {
            d = 2;
          }
          if (e < 2) {
            e = 2;
          }
          var k = eb.fromString(C.xml_str(a, "color1", true, "0x808080"));
          var t = eb.fromString(C.xml_str(a, "color2", true, "0xc4c4c4"));
          f = C.xml_i(a, "base_tile_size", -1);
          a = C.xml_bool(a, "floor_to_even", false);
          b = new dj(0, 0, d, e, b, c, k, t, a);
          b.baseTileSize = f;
          return b;
        },
        _loadString: function (a, b) {
          b = C.xml_str(a, b);
          var c = C.xml_str(a, "context", true, "ui");
          a = C.xml_str(a, "code", true, "");
          return b = this.getText(b, c, true, a);
        },
        _loadText: function (a) {
          var b = C.xml_str(a, "text");
          var c = C.xml_str(a, "context", true, "ui");
          var d = C.xml_str(a, "code", true, "");
          b = this.getText(b, c, true, d);
          d = this._loadWidth(a, 100) | 0;
          c = this._loadHeight(a, -1) | 0;
          var e = this._loadFontFace(a);
          if (C.xml_bool(a, "input")) {
            throw new Pb("FlxUI._loadText(): <text> with input has been deprecated. Use <input_text> instead.");
          }
          var f = C.xml_str(a, "align");
          if (f == "") {
            f = null;
          }
          var k = this._loadHeight(a, 8, "size", "floor") | 0;
          var t = this._loadColor(a);
          var n = this._loadBorder(a);
          d = new Xd(0, 0, d, b, k);
          d.setFormat(e, k, t, f);
          n.apply(d);
          d.drawFrame();
          if (fb.resolve(a, "param")) {
            e = null;
            if (fb.resolve(a, "param")) {
              e = [];
              f = 0;
              for (a = dc.resolve(a, "param"); f < a.length;) {
                t = a[f];
                ++f;
                if (cc.resolve(t, "type") && cc.resolve(t, "value")) {
                  n = Kb.resolve(t, "type");
                  n = n.toLowerCase();
                  var h = k = Kb.resolve(t, "value");
                  t = C.xml_i(t, "sort", -1);
                  switch (n) {
                    case "bool":
                    case "boolean":
                      k = new String(k);
                      k = k.toLowerCase();
                      h = k == "true" || k == "1" ? true : false;
                      break;
                    case "float":
                      h = parseFloat(k);
                      break;
                    case "color":
                    case "hex":
                      n = eb.fromString(k);
                      if (n == null) {
                        throw G.thrown("U.parseHex() unable to parse hex String " + k);
                      }
                      h = n;
                      break;
                    case "int":
                      h = v.parseInt(k);
                      break;
                    case "string":
                      h = new String(k);
                  }
                  e.push({
                    sort: t,
                    value: h
                  });
                }
              }
              e.sort(Ka.sortParams);
              f = 0;
              for (a = e.length; f < a;) {
                k = f++;
                e[k] = e[k].value;
              }
            }
            d.set_params(e);
          }
          if (c > 0 && d.get_height() != c && va.__implements(d, cd)) {
            d.resize(d.get_width(), c);
          }
          d.set_text(" ");
          d.set_text(b);
          return d;
        },
        _loadInputText: function (a) {
          var b = C.xml_str(a, "text");
          var c = C.xml_str(a, "context", true, "ui");
          var d = C.xml_str(a, "code", true, "");
          b = this.getText(b, c, true, d);
          var e = this._loadWidth(a, 100) | 0;
          c = this._loadHeight(a, -1) | 0;
          d = this._loadFontFace(a);
          var f = C.xml_str(a, "align");
          if (f == "") {
            f = null;
          }
          var k = this._loadHeight(a, 8, "size") | 0;
          var t = this._loadColor(a);
          var n = this._loadBorder(a);
          var h = C.xml_str(a, "background", true, "0x00000000");
          var ya = true;
          var l = 0;
          if (l == null) {
            l = 0;
          }
          if (ya == null) {
            ya = false;
          }
          var L = eb.fromString(h);
          if (L == null) {
            if (ya) {
              L = l;
            } else {
              throw G.thrown("U.parseHex() unable to parse hex String " + h);
            }
          }
          h = L;
          L = C.xml_bool(a, "password_mode");
          b = new ub(0, 0, e, b, k, t, h);
          b.set_passwordMode(L);
          switch (C.xml_str(a, "force_case", true, "")) {
            case "l":
            case "u":
              throw new Pb("FlxUI._loadInputText(): 1 letter values have been deprecated (force_case attribute).");
            case "lower":
            case "lower_case":
            case "lowercase":
              L = 2;
              break;
            case "upper":
            case "upper_case":
            case "uppercase":
              L = 1;
              break;
            default:
              L = 0;
          }
          for (h = C.xml_str(a, "filter", true, ""); h.indexOf("_") != -1;) {
            h = w.replace(h, "_", "");
          }
          switch (h) {
            case "a":
            case "an":
            case "n":
              throw new Pb("FlxUI._loadInputText(): 1 letter values have been deprecated (filter attribute).");
            case "alpha":
            case "onlyalpha":
              h = 1;
              break;
            case "alphanum":
            case "alphanumeric":
            case "onlyalphanumeric":
              h = 3;
              break;
            case "num":
            case "numeric":
            case "onlynumeric":
              h = 2;
              break;
            default:
              h = 0;
          }
          b.setFormat(d, k, t, f);
          b.set_forceCase(L);
          b.set_filterMode(h);
          n.apply(b);
          b.drawFrame();
          if (fb.resolve(a, "param")) {
            d = null;
            if (fb.resolve(a, "param")) {
              d = [];
              f = 0;
              for (a = dc.resolve(a, "param"); f < a.length;) {
                t = a[f];
                ++f;
                if (cc.resolve(t, "type") && cc.resolve(t, "value")) {
                  n = Kb.resolve(t, "type");
                  n = n.toLowerCase();
                  L = k = Kb.resolve(t, "value");
                  t = C.xml_i(t, "sort", -1);
                  switch (n) {
                    case "bool":
                    case "boolean":
                      h = new String(k);
                      h = h.toLowerCase();
                      L = h == "true" || h == "1" ? true : false;
                      break;
                    case "float":
                      L = parseFloat(k);
                      break;
                    case "color":
                    case "hex":
                      L = eb.fromString(k);
                      if (L == null) {
                        throw G.thrown("U.parseHex() unable to parse hex String " + k);
                      }
                      break;
                    case "int":
                      L = v.parseInt(k);
                      break;
                    case "string":
                      L = new String(k);
                  }
                  d.push({
                    sort: t,
                    value: L
                  });
                }
              }
              d.sort(Ka.sortParams);
              f = 0;
              for (a = d.length; f < a;) {
                k = f++;
                d[k] = d[k].value;
              }
            }
            b.set_params(d);
          }
          if (c > 0 && b.get_height() != c && va.__implements(b, cd)) {
            b.resize(b.get_width(), c);
          }
          return b;
        },
        _loadRadioGroup: function (a) {
          var b = C.xml_str(a, "dot_src", true);
          var c = C.xml_str(a, "radio_src", true);
          var d = [];
          var e = [];
          var f = this._loadWidth(a, 11, "radio_width");
          var k = this._loadHeight(a, 11, "radio_height");
          var t = this._loadHeight(a, 0, "height");
          var n = this._loadHeight(a, 0, "width");
          var h = this._loadWidth(a, 100, "label_width");
          for (var ya = 0, l = dc.resolve(a, "radio"); ya < l.length;) {
            var L = l[ya];
            ++ya;
            var g = C.xml_name(L);
            var p = C.xml_str(L, "label");
            var m = C.xml_str(L, "context", true, "ui");
            L = C.xml_str(L, "code", true, "");
            p = this.getText(p, m, true, L);
            e.push(g);
            d.push(p);
          }
          e.reverse();
          d.reverse();
          L = this._loadHeight(a, 25, "y_space");
          m = null;
          if (fb.resolve(a, "param")) {
            m = [];
            ya = 0;
            for (l = dc.resolve(a, "param"); ya < l.length;) {
              g = l[ya];
              ++ya;
              if (cc.resolve(g, "type") && cc.resolve(g, "value")) {
                var q = Kb.resolve(g, "type");
                q = q.toLowerCase();
                var w = p = Kb.resolve(g, "value");
                g = C.xml_i(g, "sort", -1);
                switch (q) {
                  case "bool":
                  case "boolean":
                    p = new String(p);
                    p = p.toLowerCase();
                    w = p == "true" || p == "1" ? true : false;
                    break;
                  case "float":
                    w = parseFloat(p);
                    break;
                  case "color":
                  case "hex":
                    q = eb.fromString(p);
                    if (q == null) {
                      throw G.thrown("U.parseHex() unable to parse hex String " + p);
                    }
                    w = q;
                    break;
                  case "int":
                    w = v.parseInt(p);
                    break;
                  case "string":
                    w = new String(p);
                }
                m.push({
                  sort: g,
                  value: w
                });
              }
            }
            m.sort(Ka.sortParams);
            ya = 0;
            for (l = m.length; ya < l;) {
              p = ya++;
              m[p] = m[p].value;
            }
          }
          p = m;
          m = null;
          if (c != "") {
            m = C.gfx(c);
          } else if (fb.resolve(a, "box")) {
            m = C.xml_str(Db.resolve(a, "box"), "slice9") != "" ? this._load9SliceSprite(Db.resolve(a, "box")) : this._loadSprite(Db.resolve(a, "box"));
          }
          c = null;
          if (b != "") {
            c = C.gfx(b);
          } else if (fb.resolve(a, "dot")) {
            c = C.xml_str(Db.resolve(a, "dot"), "slice9") != "" ? this._load9SliceSprite(Db.resolve(a, "dot")) : this._loadSprite(Db.resolve(a, "dot"));
          }
          q = b = null;
          if (fb.resolve(a, "button")) {
            ya = 0;
            l = dc.resolve(a, "button");
            while (ya < l.length) {
              w = l[ya];
              ++ya;
              g = C.xml_name(w);
              if (g == "previous" || g == "prev") {
                b = C.xml_f(w, "x");
                g = C.xml_f(w, "y");
                if (g == null) {
                  g = 0;
                }
                if (b == null) {
                  b = 0;
                }
                if (g == null) {
                  g = 0;
                }
                if (b == null) {
                  b = 0;
                }
                b = W.pool.get().set(b, g);
                b._inPool = false;
              } else if (g == "next") {
                g = C.xml_f(w, "x");
                q = C.xml_f(w, "y");
                if (q == null) {
                  q = 0;
                }
                if (g == null) {
                  g = 0;
                }
                if (q == null) {
                  q = 0;
                }
                if (g == null) {
                  g = 0;
                }
                g = W.pool.get().set(g, q);
                g._inPool = false;
                q = g;
              }
            }
          }
          d = new ej(0, 0, e, d, null, L, f, k, h, null, b, q);
          d.set_params(p);
          if (m != "" && m != null) {
            d.loadGraphics(m, c);
          }
          e = this._loadWidth(a, 0, "text_x") | 0;
          f = this._loadHeight(a, 0, "text_y") | 0;
          k = d.getRadios();
          p = 0;
          m = false;
          h = a.elementsNamed("radio");
          ya = 0;
          for (l = k.length; ya < l;) {
            L = ya++;
            b = k[k.length - 1 - L];
            L = h.hasNext() ? h.next() : null;
            if (b != null && b instanceof xb && (b = va.__cast(b, xb), c = this.formatButtonText(a, b), c != null && m == 0 && (m = md.copyFromFlxText(c), g = new $e(c.borderStyle, c.borderColor, c.borderSize, c.borderQuality), d.set_activeStyle(new fj(16777215, m, Dn.fromOpenFL(c._defaultFormat.align), c.color, g)), m = true), b.set_textX(e), b.set_textY(f), ++p, L != null)) {
              if (L.nodeType != ea.Document && L.nodeType != ea.Element) {
                throw G.thrown("Invalid nodeType " + (L.nodeType == null ? "null" : mb.toString(L.nodeType)));
              }
              this._loadTooltip(b, L);
            }
          }
          if (n != 0) {
            d.fixedSize = true;
            d.set_width(n);
          }
          if (t != 0) {
            d.fixedSize = true;
            d.set_height(t);
          }
          return d;
        },
        _loadCheckBox: function (a) {
          var b = C.xml_str(a, "label");
          var c = C.xml_str(a, "context", true, "ui");
          var d = C.xml_str(a, "code", true, "");
          var e = C.xml_bool(a, "checked", false);
          b = this.getText(b, c, true, d);
          c = this._loadWidth(a, 100, "label_width");
          d = C.xml_str(a, "check_src", true);
          var f = C.xml_str(a, "box_src", true);
          var k = null;
          if (fb.resolve(a, "param")) {
            k = [];
            for (var t = 0, n = dc.resolve(a, "param"); t < n.length;) {
              var h = n[t];
              ++t;
              if (cc.resolve(h, "type") && cc.resolve(h, "value")) {
                var g = Kb.resolve(h, "type");
                g = g.toLowerCase();
                var l = Kb.resolve(h, "value");
                var L = l;
                h = C.xml_i(h, "sort", -1);
                switch (g) {
                  case "bool":
                  case "boolean":
                    l = new String(l);
                    l = l.toLowerCase();
                    L = l == "true" || l == "1" ? true : false;
                    break;
                  case "float":
                    L = parseFloat(l);
                    break;
                  case "color":
                  case "hex":
                    g = eb.fromString(l);
                    if (g == null) {
                      throw G.thrown("U.parseHex() unable to parse hex String " + l);
                    }
                    L = g;
                    break;
                  case "int":
                    L = v.parseInt(l);
                    break;
                  case "string":
                    L = new String(l);
                }
                k.push({
                  sort: h,
                  value: L
                });
              }
            }
            k.sort(Ka.sortParams);
            t = 0;
            for (n = k.length; t < n;) {
              l = t++;
              k[l] = k[l].value;
            }
          }
          n = t = null;
          if (f != "") {
            t = C.gfx(f);
          } else if (fb.resolve(a, "box")) {
            t = C.xml_str(Db.resolve(a, "box"), "slice9") != "" ? this._load9SliceSprite(Db.resolve(a, "box")) : this._loadSprite(Db.resolve(a, "box"));
          }
          if (d != "") {
            n = C.gfx(d);
          } else if (fb.resolve(a, "check")) {
            n = C.xml_str(Db.resolve(a, "check"), "slice9") != "" ? this._load9SliceSprite(Db.resolve(a, "check")) : this._loadSprite(Db.resolve(a, "check"));
          }
          c = new xb(0, 0, t, n, b, c, k);
          this.formatButtonText(a, c);
          d = this._loadWidth(a, 0, "text_x") | 0;
          a = this._loadHeight(a, 0, "text_y") | 0;
          c.set_textX(d);
          c.set_textY(a);
          c.set_text(b);
          c.set_checked(e);
          return c;
        },
        _loadDropDownMenu: function (a) {
          var b = C.xml_str(a, "label");
          var c = C.xml_str(a, "context", true, "ui");
          var d = C.xml_str(a, "code", true, "");
          b = this.getText(b, c, true, d);
          var e = C.xml_str(a, "back_def", true);
          var f = C.xml_str(a, "panel_def", true);
          var k = C.xml_str(a, "button_def", true);
          var t = C.xml_str(a, "label_def", true);
          var n = c = d = null;
          var K = null;
          if (e != "") {
            d = this._loadSprite(this.getDefinition(e));
          }
          if (f != "") {
            c = this._load9SliceSprite(this.getDefinition(f));
          }
          if (k != "") {
            try {
              n = this._loadButton(this.getDefinition(k), false, false);
            } catch (l) {
              if (G.caught(l) instanceof Pb) {
                h.log.advanced("couldn't loadButton with definition \"" + k + "\"", xa.NORMAL);
                n = null;
              } else {
                throw l;
              }
            }
          }
          if (t != "") {
            try {
              K = this._loadText(this.getDefinition(t));
            } catch (l) {
              if (G.caught(l) instanceof Pb) {
                h.log.advanced("couldn't loadText with definition \"" + t + "\"", xa.NORMAL);
                K = null;
              } else {
                throw l;
              }
            }
            if (K != null && b != "") {
              K.set_text(b);
            }
          }
          e = b = null;
          if (fb.resolve(a, "data")) {
            f = 0;
            a = dc.resolve(a, "data");
            while (f < a.length) {
              k = a[f];
              ++f;
              if (e == null) {
                e = [];
              }
              k = new Nk(C.xml_str(k, "name", true), C.xml_str(k, "label"));
              e.push(k);
            }
          } else if (fb.resolve(a, "asset")) {
            f = 0;
            a = dc.resolve(a, "asset");
            while (f < a.length) {
              t = a[f];
              ++f;
              if (b == null) {
                b = [];
              }
              k = C.xml_str(t, "def", true);
              t = C.xml_name(t);
              var g = null;
              try {
                g = this._loadButton(this.getDefinition(k), false);
              } catch (l) {
                if (G.caught(l) instanceof Pb) {
                  h.log.advanced("couldn't loadButton with definition \"" + k + "\"", xa.NORMAL);
                } else {
                  throw l;
                }
              }
              if (g != null) {
                g.name = t;
                if (b == null) {
                  b = [];
                }
                b.push(g);
              }
            }
          }
          d = new gj(120, d, K, n);
          return new sc(0, 0, e, null, d, c, b);
        },
        _loadTest: function (a) {
          var b = true;
          if (a.nodeType == ea.Document) {
            var c = "Document";
          } else {
            if (a.nodeType != ea.Element) {
              throw G.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
            }
            c = a.nodeName;
          }
          if (c == "load_if" && (b = this._loadTestSub(a), b == 0)) {
            return false;
          }
          if (fb.resolve(a, "load_if")) {
            c = 0;
            a = dc.resolve(a, "load_if");
            while (c < a.length) {
              var d = a[c];
              ++c;
              var e = d;
              if (e.nodeType != ea.Document && e.nodeType != ea.Element) {
                throw G.thrown("Bad node type, expected Element or Document but found " + (e.nodeType == null ? "null" : mb.toString(e.nodeType)));
              }
              if (e.children[0] == null && (b = this._loadTestSub(d), b == 0)) {
                return false;
              }
            }
          }
          return b;
        },
        _loadTestSub: function (a) {
          var b = C.xml_bool(a, "is", true);
          var c = C.xml_f(a, "aspect_ratio", -1);
          if (c != -1) {
            var d = true;
            var e = va.__cast(h.width, rp) / va.__cast(h.height, rp);
            var f = Math.abs(e - c);
            if (cc.resolve(a, "tolerance")) {
              c = C.xml_f(a, "tolerance", 0.1);
              if (f > c) {
                d = false;
              }
            } else if (cc.resolve(a, "tolerance_plus") || cc.resolve(a, "tolerance_minus")) {
              var k = C.xml_f(a, "tolerance_minus", -1);
              var t = C.xml_f(a, "tolerance_plus", -1);
              if (e > c && t != -1 && f > t) {
                d = false;
              }
              if (e < c && k != -1 && f > k) {
                d = false;
              }
            }
            if (d != b) {
              return false;
            }
          }
          f = C.xml_pt(a, "resolution", null);
          if (f != null) {
            d = true;
            c = C.xml_pt(a, "tolerance", null);
            if (c == null) {
              e = c = 0;
              if (e == null) {
                e = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (c == null) {
                c = 0;
              }
              c = W.pool.get().set(c, e);
              c._inPool = false;
            }
            e = Math.abs(f.y - h.height);
            if (Math.abs(f.x - h.width) > c.x || e > c.y) {
              d = false;
            }
            if (d != b) {
              return false;
            }
          }
          d = C.xml_str(a, "haxedef", true, "");
          f = C.xml_bool(a, "value", true);
          if (d != "" && C.checkHaxedef(d) == f != b) {
            return false;
          }
          f = C.xml_str(a, "variable", false, "");
          a = C.xml_str(a, "type", true, "string");
          if (f != "" && (d = true, f = this.parseVarValue(f), f != null && (d = this.checkVariable(f.variable, f.value, a, f.op)), d != b)) {
            return false;
          } else {
            return true;
          }
        },
        parseVarValue: function (a) {
          for (var b = "== = != !== < > <= >=".split(" "), c, d = 0; d < b.length;) {
            var e = b[d];
            ++d;
            if (a.indexOf(e) != -1 && (c = a.split(e), c != null && c.length == 2)) {
              return {
                variable: c[0],
                value: c[1],
                op: e
              };
            }
          }
          return null;
        },
        _loadLayout: function (a) {
          var b = C.xml_str(a, "name", true);
          var c = this._loadWidth(a, 0, "x");
          var d = this._loadHeight(a, 0, "y");
          a = this.createUI(a);
          a.set_x(c);
          a.set_y(d);
          a.name = b;
          return a;
        },
        addToCleanup: function (a) {
          if (this._assetsToCleanUp != null && this._assetsToCleanUp.indexOf(a) == -1) {
            this._assetsToCleanUp.push(a);
          }
        },
        addToScaledAssets: function (a) {
          if (this._scaledAssets != null && this._scaledAssets.indexOf(a) == -1) {
            this._scaledAssets.push(a);
          }
        },
        cleanup: function () {
          for (var a = 0, b = this._assetsToCleanUp; a < b.length;) {
            var c = b[a];
            ++a;
            h.bitmap.removeByKey(c);
          }
          this._scaledAssets = this._assetsToCleanUp = null;
        },
        createUI: function (a) {
          return new Ka(a, this, this, this._ptr_tongue, this.liveFilePath);
        },
        _loadTabMenu: function (a) {
          var b = C.xml_str(a, "back_def");
          b = this.getDefinition(b);
          if (b == null) {
            b = a;
          }
          b = Ka.consolidateData(b, a);
          switch (C.xml_str(a, "back_type", true, "chrome")) {
            case "region":
              b = new qh();
              break;
            case "sprite":
              b = this._loadSprite(b);
              break;
            default:
              b = this._load9SliceSprite(b, "tab_menu");
          }
          var c = null;
          var d = C.xml_bool(a, "stretch_tabs", false);
          var e = "front";
          var f = "back";
          if (fb.resolve(a, "stacking")) {
            e = C.xml_str(Db.resolve(a, "stacking"), "toggled", true, "front");
            f = C.xml_str(Db.resolve(a, "stacking"), "untoggled", true, "back");
          }
          var k = null;
          if (C.xml_str(a, "spacing", true, "") != "") {
            k = this._loadWidth(a, 0, "spacing");
          }
          var t = this._loadWidth(a, 0, "tab_x");
          var n = this._loadHeight(a, 0, "tab_y");
          if (n == null) {
            n = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (t == null) {
            t = 0;
          }
          t = W.pool.get().set(t, n);
          t._inPool = false;
          var h = "";
          if (fb.resolve(a, "tab")) {
            n = 0;
            for (var g = dc.resolve(a, "tab"); n < g.length;) {
              c = g[n];
              ++n;
              c = C.xml_str(c, "use_def");
              if (c != "") {
                h = c;
              }
            }
            c = h != "" ? this.getDefinition(h) : Db.resolve(a, "tab");
          }
          h = [];
          if (fb.resolve(a, "tab")) {
            n = 0;
            g = dc.resolve(a, "tab");
            while (n < g.length) {
              var l = g[n];
              ++n;
              var L = C.xml_name(l);
              if (L != "") {
                var p = C.xml_str(l, "label");
                var v = C.xml_str(l, "context", true, "ui");
                var m = C.xml_str(l, "code", true, "");
                p = this.getText(p, v, true, m);
                this.getText(p, v, true, m);
                l = Ka.consolidateData(l, c);
                p = this._loadButton(l, true, true, "tab_menu");
                p.name = L;
                h.push(p);
                this._loadTooltip(p, l);
              }
            }
          }
          if (h.length > 0) {
            if (c == null || !fb.resolve(c, "text")) {
              for (n = 0; n < h.length;) {
                g = h[n];
                ++n;
                if (g instanceof Jc) {
                  g.label.set_color(16777215);
                  if (g.label instanceof Xd) {
                    g = g.label;
                    g.set_borderStyle(Sa.OUTLINE);
                    g.set_borderColor(0);
                    g.set_borderSize(1);
                    g.set_borderQuality(1);
                  }
                }
              }
            }
            if (c == null || !cc.resolve(c, "width")) {
              d = true;
            }
          }
          b = new je(b, h, null, t, d, k, [e, f]);
          if (fb.resolve(a, "group")) {
            n = 0;
            g = dc.resolve(a, "group");
            while (n < g.length) {
              a = g[n];
              ++n;
              L = C.xml_name(a);
              a = new Ka(a, b, this, this._ptr_tongue);
              if (h != null && h.length > 0) {
                a.set_y(a.y + h[0].get_height());
              }
              a.name = L;
              b.addGroup(a);
            }
          }
          return b;
        },
        _loadNumericStepper: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = C.xml_f(a, "step", 1);
          var d = C.xml_f(a, "value", 0);
          var e = C.xml_f(a, "min", 0);
          var f = C.xml_f(a, "max", 10);
          var k = C.xml_i(a, "decimals", 0);
          var t = C.xml_bool(a, "percent");
          var n = C.xml_str(a, "stack", true, "");
          if (n == "") {
            n = C.xml_str(a, "stacking", true, "");
          }
          n = n.toLowerCase();
          switch (n) {
            case "h":
            case "horizontal":
            case "horz":
              n = 1;
              break;
            case "v":
            case "vert":
            case "vertical":
              n = 0;
              break;
            default:
              n = 1;
          }
          var h = null;
          var g = null;
          var l = null;
          if (fb.resolve(a, "text")) {
            h = this._loadThing("text", Db.resolve(a, "text"));
          }
          if (fb.resolve(a, "plus")) {
            g = this._loadThing("button", Db.resolve(a, "plus"));
          }
          if (fb.resolve(a, "minus")) {
            l = this._loadThing("button", Db.resolve(a, "minus"));
          }
          c = new Ib(0, 0, c, d, e, f, k, n, h, g, l, t);
          if (b) {
            b = null;
            if (fb.resolve(a, "param")) {
              b = [];
              d = 0;
              for (a = dc.resolve(a, "param"); d < a.length;) {
                f = a[d];
                ++d;
                if (cc.resolve(f, "type") && cc.resolve(f, "value")) {
                  k = Kb.resolve(f, "type");
                  k = k.toLowerCase();
                  t = e = Kb.resolve(f, "value");
                  f = C.xml_i(f, "sort", -1);
                  switch (k) {
                    case "bool":
                    case "boolean":
                      e = new String(e);
                      e = e.toLowerCase();
                      t = e == "true" || e == "1" ? true : false;
                      break;
                    case "float":
                      t = parseFloat(e);
                      break;
                    case "color":
                    case "hex":
                      k = eb.fromString(e);
                      if (k == null) {
                        throw G.thrown("U.parseHex() unable to parse hex String " + e);
                      }
                      t = k;
                      break;
                    case "int":
                      t = v.parseInt(e);
                      break;
                    case "string":
                      t = new String(e);
                  }
                  b.push({
                    sort: f,
                    value: t
                  });
                }
              }
              b.sort(Ka.sortParams);
              d = 0;
              for (a = b.length; d < a;) {
                e = d++;
                b[e] = b[e].value;
              }
            }
            c.set_params(b);
          }
          return c;
        },
        getResizeRatio: function (a, b) {
          if (b == null) {
            b = 1;
          }
          var c = C.xml_str(a, "resize_ratio_x", true);
          if (c == "") {
            c = C.xml_str(a, "resize_ratio_y", true);
            if (c == "") {
              a = C.xml_f(a, "resize_ratio", -1);
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              b = W.pool.get().set(a, b);
            } else {
              a = parseFloat(c);
              b = 1;
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              b = W.pool.get().set(a, b);
            }
          } else {
            a = parseFloat(c);
            b = 0;
            if (b == null) {
              b = 0;
            }
            if (a == null) {
              a = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (a == null) {
              a = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (a == null) {
              a = 0;
            }
            b = W.pool.get().set(a, b);
          }
          b._inPool = false;
          return b;
        },
        _loadButton: function (a, b, c, d) {
          if (d == null) {
            d = "";
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = true;
          }
          var e = this._loadColor(a);
          var f = C.xml_f(a, "resize_ratio", -1);
          var k = this._loadCompass(a, "resize_point");
          var t = C.xml_bool(a, "resize_label", false);
          var n = C.xml_str(a, "label");
          var h = null;
          var g = null;
          if (fb.resolve(a, "sprite")) {
            for (var l = 0, L = dc.resolve(a, "sprite"); l < L.length;) {
              var p = L[l];
              ++l;
              if (c && C.xml_bool(p, "toggle")) {
                g = this._loadThing("sprite", p);
              } else {
                h = this._loadThing("sprite", p);
              }
            }
          }
          l = C.xml_str(a, "context", true, "ui");
          p = C.xml_str(a, "code", true, "");
          n = this.getText(n, l, true, p);
          p = this._loadWidth(a, 0, "width") | 0;
          var m = this._loadHeight(a, 0, "height") | 0;
          var q = null;
          if (fb.resolve(a, "param")) {
            q = [];
            l = 0;
            for (L = dc.resolve(a, "param"); l < L.length;) {
              var w = L[l];
              ++l;
              if (cc.resolve(w, "type") && cc.resolve(w, "value")) {
                var Gc = Kb.resolve(w, "type");
                Gc = Gc.toLowerCase();
                var u = Kb.resolve(w, "value");
                var r = u;
                w = C.xml_i(w, "sort", -1);
                switch (Gc) {
                  case "bool":
                  case "boolean":
                    u = new String(u);
                    u = u.toLowerCase();
                    r = u == "true" || u == "1" ? true : false;
                    break;
                  case "float":
                    r = parseFloat(u);
                    break;
                  case "color":
                  case "hex":
                    Gc = eb.fromString(u);
                    if (Gc == null) {
                      throw G.thrown("U.parseHex() unable to parse hex String " + u);
                    }
                    r = Gc;
                    break;
                  case "int":
                    r = v.parseInt(u);
                    break;
                  case "string":
                    r = new String(u);
                }
                q.push({
                  sort: w,
                  value: r
                });
              }
            }
            q.sort(Ka.sortParams);
            l = 0;
            for (L = q.length; l < L;) {
              u = l++;
              q[u] = q[u].value;
            }
          }
          l = q;
          if (h == null) {
            L = fb.resolve(a, "graphic") == 0;
            e = new ud(0, 0, n, null, L, false, e);
            e._autoCleanup = false;
          } else if (n != "") {
            e = new Xd(0, 0, 80, n, 8);
            e.setFormat(null, 8, 3355443, "center");
            L = new La();
            L.add(h);
            L.add(e);
            e = new bf(0, 0, L);
          } else {
            e = new bf(0, 0, h);
          }
          e.resize_ratio = f;
          e.resize_point = k;
          e.autoResizeLabel = t;
          if (b) {
            e.set_params(l);
          }
          if (fb.resolve(a, "graphic")) {
            if (C.xml_bool(Db.resolve(a, "graphic"), "blank")) {
              e.loadGraphicSlice9(["", "", ""], p, m, null, 0, f);
            } else {
              t = null;
              if (c) {
                b = "     ".split(" ");
                k = [null, null, null, null, null, null];
              } else {
                b = ["", "", ""];
                k = [null, null, null];
              }
              q = C.xml_i(Db.resolve(a, "graphic"), "src_w", 0);
              u = C.xml_i(Db.resolve(a, "graphic"), "src_h", 0);
              w = C.xml_str(Db.resolve(a, "graphic"), "tile", true, "");
              var z = 0;
              switch (w) {
                case "h":
                case "horizontal":
                  z = 16;
                  break;
                case "v":
                case "vertical":
                  z = 1;
                  break;
                case "all":
                case "both":
                case "hv":
                case "true":
                case "vh":
                  z = 17;
              }
              w = z;
              l = C.xml_str(Db.resolve(a, "graphic"), "frames", true);
              if (l != "") {
                t = [];
                L = l.split(",");
                l = 0;
                while (l < L.length) {
                  Gc = L[l];
                  ++l;
                  t.push(v.parseInt(Gc));
                }
              }
              l = 0;
              for (L = dc.resolve(a, "graphic"); l < L.length;) {
                Gc = L[l];
                ++l;
                var ba = C.xml_name(Gc);
                r = C.xml_str(Gc, "image");
                var J = Ub.toIntArray(C.xml_str(Gc, "slice9"));
                w = C.xml_str(Gc, "tile", true, "");
                z = 0;
                switch (w) {
                  case "h":
                  case "horizontal":
                    z = 16;
                    break;
                  case "v":
                  case "vertical":
                    z = 1;
                    break;
                  case "all":
                  case "both":
                  case "hv":
                  case "true":
                  case "vh":
                    z = 17;
                }
                w = z;
                var y = C.xml_bool(Gc, "toggle");
                y = y && c;
                z = C.gfx(r);
                switch (ba) {
                  case "all":
                    ba = c ? 6 : 3;
                    if (u != 0) {
                      ba = C.getBmp(z).height / u | 0;
                    }
                    if (r != "") {
                      b = [this.loadScaledSrc(Gc, "image", "scale_src", 1, ba)];
                    }
                    k = [this.load9SliceSprite_scaleSub(J, Gc, b[0], "image")];
                    u = C.getBmp(b[0]);
                    q = u.width;
                    u = u.height / ba | 0;
                    break;
                  case "active":
                  case "highlight":
                  case "hilight":
                  case "hover":
                  case "over":
                    if (r != "") {
                      if (y) {
                        b[4] = this.loadScaledSrc(Gc, "image", "scale_src");
                      } else {
                        b[1] = this.loadScaledSrc(Gc, "image", "scale_src");
                      }
                    }
                    if (y) {
                      k[4] = this.load9SliceSprite_scaleSub(J, Gc, b[4], "image");
                    } else {
                      k[1] = this.load9SliceSprite_scaleSub(J, Gc, b[1], "image");
                    }
                    break;
                  case "down":
                  case "pressed":
                  case "pushed":
                    if (r != "") {
                      if (y) {
                        b[5] = this.loadScaledSrc(Gc, "image", "scale_src");
                      } else {
                        b[2] = this.loadScaledSrc(Gc, "image", "scale_src");
                      }
                    }
                    if (y) {
                      k[5] = this.load9SliceSprite_scaleSub(J, Gc, b[5], "image");
                    } else {
                      k[2] = this.load9SliceSprite_scaleSub(J, Gc, b[2], "image");
                    }
                    break;
                  case "":
                  case "inactive":
                  case "normal":
                  case "up":
                    if (r != "") {
                      if (y) {
                        b[3] = this.loadScaledSrc(Gc, "image", "scale_src");
                      } else {
                        b[0] = this.loadScaledSrc(Gc, "image", "scale_src");
                      }
                    }
                    if (y) {
                      k[3] = this.load9SliceSprite_scaleSub(J, Gc, b[3], "image");
                    } else {
                      k[0] = this.load9SliceSprite_scaleSub(J, Gc, b[0], "image");
                    }
                }
                if (b[0] != "" && b.length >= 3) {
                  if (b[1] == "") {
                    b[1] = b[0];
                  }
                  if (b[2] == "") {
                    b[2] = b[1];
                  }
                  if (b.length >= 6) {
                    if (b[3] == "") {
                      b[3] = b[0];
                    }
                    if (b[4] == "") {
                      b[4] = b[1];
                    }
                    if (b[5] == "") {
                      b[5] = b[2];
                    }
                  }
                }
              }
              e.loadGraphicSlice9(b, p, m, k, w, f, c, q, u, t);
            }
          } else if (d == "tab_menu") {
            b = "flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab.png flixel/flixel-ui/img/tab.png flixel/flixel-ui/img/tab.png".split(" ");
            l = Ub.toIntArray("6,6,11,11");
            k = [l, l, l, l, l, l];
            e.loadGraphicSlice9(b, p, m, k, 0, f, c);
          } else {
            if (p <= 0) {
              p = 80;
            }
            if (m <= 0) {
              m = 20;
            }
            e.loadGraphicSlice9(null, p, m, null, 0, f, c);
          }
          if (h == null) {
            if (a != null && fb.resolve(a, "text")) {
              this.formatButtonText(a, e);
            } else if (d == "tab_menu") {
              e.up_color = 16777215;
              e.down_color = 16777215;
              e.over_color = 16777215;
              e.up_toggle_color = 16777215;
              e.down_toggle_color = 16777215;
              e.over_toggle_color = 16777215;
            } else {
              e.autoCenterLabel();
            }
          } else {
            e.autoCenterLabel();
          }
          if (h != null && n != "" && a != null && fb.resolve(a, "text")) {
            this.formatButtonText(a, e);
          }
          d = c = 0;
          if (a.get("text_x") != null) {
            c = this._loadWidth(a, 0, "text_x") | 0;
          } else if (a.get("label_x") != null) {
            c = this._loadWidth(a, 0, "label_x") | 0;
          }
          if (a.get("text_y") != null) {
            d = this._loadHeight(a, 0, "text_y") | 0;
          } else if (a.get("label_y") != null) {
            d = this._loadHeight(a, 0, "label_y") | 0;
          }
          if (e instanceof bf) {
            f = e;
            if (f.label instanceof La) {
              a = f.label;
              l = 0;
              L = a.group.members;
              while (l < L.length) {
                a = L[l];
                ++l;
                if (a instanceof Xd) {
                  a.offset.set_x(a.offset.x - c);
                  a.offset.set_y(a.offset.y - d);
                  break;
                }
              }
            } else {
              a = f.label;
              a.offset.set_x(a.offset.x - c);
              a = f.label;
              a.offset.set_y(a.offset.y - d);
              if (g != null) {
                g.offset.set_x(g.offset.x - c);
                g.offset.set_y(g.offset.y - d);
              }
            }
          } else {
            f = e;
            a = f.label;
            a.offset.set_x(a.offset.x - c);
            a = f.label;
            a.offset.set_y(a.offset.y - d);
          }
          if (h != null && g != null) {
            e.set_toggle_label(g);
          }
          if (e instanceof Jc && (h = e, h._assetsToCleanup != null)) {
            l = 0;
            L = h._assetsToCleanup;
            while (l < L.length) {
              h = L[l];
              ++l;
              this.addToCleanup(h);
            }
          }
          return e;
        },
        _loadRegion: function (a) {
          var b = this.calcMaxMinSize(a);
          var c = this._loadWidth(a) | 0;
          var d = this._loadHeight(a) | 0;
          if (b != null) {
            d = C.conformToBounds(new lb(c, d), b);
            c = d.x | 0;
            d = d.y | 0;
          }
          a = C.xml_bool(a, "visible", true);
          c = new qh(0, 0, c, d);
          c.set_visible(a);
          return c;
        },
        _load9SliceSprite: function (a, b) {
          if (b == null) {
            b = "";
          }
          var c = this.getResizeRatio(a);
          var d = this._loadColor(a);
          var e = c.x;
          var f = this._loadCompass(a, "resize_point");
          c = c.y | 0;
          var k = this.calcMaxMinSize(a);
          var t = "";
          if (a.get("src") != null) {
            t = a.get("src");
            if (t == "" || t == null) {
              t = "";
            } else {
              t = C.gfx(t);
              try {
                if (!Q.exists(t, "IMAGE")) {
                  throw G.thrown("couldn't load bmp \"src\"");
                }
              } catch (l) {
                Pa.lastError = l;
                var n = G.caught(l).unwrap();
                if (typeof n == "string") {
                  h.log.advanced("FlxUI: U.xml_gfx() : " + n, xa.ERROR, true);
                } else {
                  throw l;
                }
              }
            }
          }
          if (n = fb.resolve(a, "scale_src")) {
            var K = t;
            t = this.loadScaledSrc(a, "src", "scale_src");
            if (t != K) {
              this.addToCleanup(K);
            }
          }
          if (t == "") {
            t = null;
          }
          if (t == null && b == "tab_menu") {
            t = "flixel/flixel-ui/img/chrome_flat.png";
          }
          b = this._loadWidth(a) | 0;
          K = this._loadHeight(a) | 0;
          if (k != null) {
            if (b < k.min_width) {
              b = k.min_width | 0;
            } else if (b > k.max_width) {
              b = k.max_width;
            }
            if (K < k.min_height) {
              K = k.min_height | 0;
            } else if (K > k.max_height) {
              K = k.max_height | 0;
            }
          }
          if (b == 0 || K == 0) {
            return null;
          }
          k = new da(0, 0, b, K);
          b = Ub.toIntArray(C.xml_str(a, "slice9"));
          K = "";
          var g = t;
          if (n) {
            b = this.load9SliceSprite_scaleSub(b, a, t);
            K = t;
            g = h.bitmap._cache.h[t];
          }
          t = C.xml_bool(a, "smooth", false);
          n = 0;
          switch (C.xml_str(a, "tile", true, "")) {
            case "h":
            case "horizontal":
              n = 16;
              break;
            case "v":
            case "vertical":
              n = 1;
              break;
            case "all":
            case "both":
            case "hv":
            case "true":
            case "vh":
              n = 17;
          }
          return new Z(0, 0, g, k, b, n, t, K, e, f, c, false, d);
        },
        load9SliceSprite_scaleSub: function (a, b, c, d) {
          if (d == null) {
            d = "src";
          }
          var e = "";
          if (b.get(d) != null) {
            e = b.get(d);
            if (e == "" || e == null) {
              e = "";
            } else {
              e = C.gfx(e);
              try {
                if (!Q.exists(e, "IMAGE")) {
                  throw G.thrown("couldn't load bmp \"" + d + "\"");
                }
              } catch (k) {
                Pa.lastError = k;
                b = G.caught(k).unwrap();
                if (typeof b == "string") {
                  h.log.advanced("FlxUI: U.xml_gfx() : " + b, xa.ERROR, true);
                } else {
                  throw k;
                }
              }
            }
          }
          if (c == e) {
            return a;
          }
          c = h.bitmap._cache.h[c] != null ? h.bitmap._cache.h[c].bitmap : null;
          if (c == null) {
            c = Q.getBitmapData(e);
          }
          e = Q.getBitmapData(e, false);
          b = c.width / e.width;
          d = c.height / e.height;
          if (Math.abs(1 - b) <= 0.001 && Math.abs(1 - d) <= 0.001) {
            return a;
          }
          if (a != null) {
            a[0] = a[0] * b | 0;
            a[1] = a[1] * d | 0;
            var f = e.height - a[3];
            a[2] = c.width - ((e.width - a[2]) * b | 0) | 0;
            a[3] = c.height - (f * d | 0) | 0;
          }
          return a;
        },
        _loadBox: function (a) {
          var b = this._loadWidth(a, 1, "thickness") | 0;
          var c = this.calcMaxMinSize(a);
          if (c == null) {
            c = {
              min_width: -Infinity,
              min_height: -Infinity,
              max_width: Infinity,
              max_height: Infinity
            };
          }
          var d = this._loadWidth(a) | 0;
          var e = this._loadHeight(a) | 0;
          if (c != null) {
            if (d < c.min_width) {
              d = c.min_width | 0;
            } else if (d > c.max_width) {
              d = c.max_width | 0;
            }
            if (e < c.min_height) {
              e = c.max_height | 0;
            } else if (e > c.max_height) {
              e = c.max_height | 0;
            }
          }
          a = C.xml_str(a, "color", true, "0xff000000");
          c = 0;
          if (a != "" && (c = eb.fromString(a), c == null)) {
            throw G.thrown("U.parseHex() unable to parse hex String " + a);
          }
          a = new Cc(0, 0);
          var f = d + "x" + e + ":" + c + ":" + b;
          if (h.bitmap._cache.h[f] != null) {
            a.loadGraphic(f);
          } else {
            a.makeGraphic(d, e, c, false, f);
            b = new da(b, b, d - b * 2, e - b * 2);
            a.graphic.bitmap.fillRect(b, 0);
          }
          return a;
        },
        _loadLine: function (a) {
          var b = C.xml_str(a, "axis", true, "horizontal");
          var c = this._loadWidth(a, -1, "thickness") | 0;
          var d = this.calcMaxMinSize(a);
          if (d == null) {
            d = {
              min_width: 1,
              min_height: 1,
              max_width: Infinity,
              max_height: Infinity
            };
          }
          switch (b) {
            case "h":
            case "horizontal":
            case "horz":
              d.max_height = c;
              d.min_height = c;
              break;
            case "v":
            case "vert":
            case "vertical":
              d.max_width = c;
              d.min_width = c;
          }
          var e = this._loadWidth(a) | 0;
          var f = this._loadHeight(a) | 0;
          if (d != null) {
            if (e < d.min_width) {
              e = d.min_width | 0;
            } else if (e > d.max_width) {
              e = d.max_width | 0;
            }
            if (f < d.min_height) {
              f = d.max_height | 0;
            } else if (f > d.max_height) {
              f = d.max_height | 0;
            }
          }
          a = C.xml_str(a, "color", true, "0xff000000");
          d = 0;
          if (a != "" && (d = eb.fromString(a), d == null)) {
            throw G.thrown("U.parseHex() unable to parse hex String " + a);
          }
          b = b == "horizontal" ? Ig.HORIZONTAL : Ig.VERTICAL;
          return new hj(0, 0, b, b == Ig.HORIZONTAL ? e : f, c != -1 ? c : b == Ig.HORIZONTAL ? f : e, d);
        },
        _loadBar: function (a) {
          var b = {
            filledColors: null,
            emptyColors: null,
            chunkSize: null,
            gradRotation: null,
            filledColor: null,
            emptyColor: null,
            borderColor: null,
            filledImgSrc: "",
            emptyImgSrc: ""
          };
          var c = this._loadWidth(a, -1) | 0;
          var d = this._loadHeight(a, -1) | 0;
          switch (C.xml_str(a, "fill_direction", true)) {
            case "bottom_to_top":
              var e = Bd.BOTTOM_TO_TOP;
              break;
            case "horizontal_inside_out":
              e = Bd.HORIZONTAL_INSIDE_OUT;
              break;
            case "horizontal_outside_in":
              e = Bd.HORIZONTAL_OUTSIDE_IN;
              break;
            case "left_to_right":
              e = Bd.LEFT_TO_RIGHT;
              break;
            case "right_to_left":
              e = Bd.RIGHT_TO_LEFT;
              break;
            case "top_to_bottom":
              e = Bd.TOP_TO_BOTTOM;
              break;
            case "vertical_inside_out":
              e = Bd.VERTICAL_INSIDE_OUT;
              break;
            case "vertical_outside_in":
              e = Bd.VERTICAL_OUTSIDE_IN;
              break;
            default:
              e = Bd.LEFT_TO_RIGHT;
          }
          var f = C.xml_str(a, "parent_ref", true);
          var k = f != "" ? this.getAsset(f) : null;
          var t = C.xml_str(a, "variable");
          f = C.xml_f(a, "value", -1);
          var n = C.xml_f(a, "min", 0);
          var h = C.xml_f(a, "max", 100);
          if (f == -1) {
            f = h;
          }
          b.borderColor = C.xml_color(a, "border_color");
          var g = b.borderColor != null;
          b.filledColor = C.xml_color(a, "filled_color");
          if (b.filledColor == null) {
            b.filledColor = C.xml_color(a, "color");
          }
          b.emptyColor = C.xml_color(a, "empty_color");
          b.filledColors = C.xml_colorArray(a, "filled_colors");
          b.emptyColors = C.xml_colorArray(a, "empty_colors");
          if (b.filledColors == null) {
            b.filledColors = C.xml_colorArray(a, "colors");
          }
          b.filledImgSrc = this.loadScaledSrc(a, "src_filled");
          b.emptyImgSrc = this.loadScaledSrc(a, "src_empty");
          if (b.filledImgSrc == "") {
            b.filledImgSrc = this.loadScaledSrc(a, "src");
          }
          b.chunkSize = C.xml_i(a, "chunk_size", 1);
          b.gradRotation = C.xml_i(a, "rotation", 90);
          if (b.filledImgSrc == "" && b.filledColor == null && b.filledColors == null) {
            b.filledColor = -65536;
          }
          a = c == -1 && d == -1 ? new $h(0, 0, e, 100, 10, k, t, n, h, g) : new $h(0, 0, e, c, d, k, t, n, h, g);
          a.set_style(b);
          a.resize(a.barWidth, a.barHeight);
          a.set_value(f);
          return a;
        },
        _loadSprite: function (a) {
          var b = this.loadScaledSrc(a);
          var c = this.calcMaxMinSize(a);
          var d = this.getResizeRatio(a, -1);
          var e = d.x;
          d = d.y | 0;
          var f = this._loadCompass(a, "resize_point");
          var k = this._loadWidth(a, -1) | 0;
          var t = this._loadHeight(a, -1) | 0;
          if (c != null) {
            if (k < c.min_width) {
              k = c.min_width | 0;
            } else if (k > c.max_width) {
              k = c.max_width | 0;
            }
            if (t < c.min_height) {
              t = c.max_height | 0;
            } else if (t > c.max_height) {
              t = c.max_height | 0;
            }
          }
          if (b != "") {
            if (k == -1 && t == -1) {
              a = new Cc(0, 0, b);
            } else {
              if (e != -1 && (k == -1 || t == -1)) {
                if (d == -1) {
                  if (k == -1) {
                    d = 0;
                  }
                  if (t == -1) {
                    d = 1;
                  }
                }
                if (d == 1) {
                  t = 1 / e * k;
                } else if (d == 0) {
                  k = 1 / e * t;
                }
              }
              b = this.loadSmooth(a, true);
              a = new Cc(0, 0, C.loadScaledImage(C.xml_str(a, "src"), k, t, b));
            }
          } else {
            a = C.xml_str(a, "color");
            b = 0;
            if (a != "" && (b = eb.fromString(a), b == null)) {
              throw G.thrown("U.parseHex() unable to parse hex String " + a);
            }
            a = new Cc(0, 0);
            a.makeGraphic(k, t, b);
          }
          a.set_resize_point(f);
          a.set_resize_ratio(e);
          a.resize_ratio_axis = d;
          return a;
        },
        loadSmooth: function (a, b) {
          b = b ? "true" : "false";
          var c = C.xml_str(a, "smooth", true, b);
          if (c == "") {
            c = C.xml_str(a, "antialias", true, b);
          }
          return C.boolify(c);
        },
        loadScaledSrc: function (a, b, c, d, e) {
          if (e == null) {
            e = 1;
          }
          if (d == null) {
            d = 1;
          }
          if (c == null) {
            c = "scale";
          }
          if (b == null) {
            b = "src";
          }
          var f = C.xml_str(a, b);
          if (fb.resolve(a, c)) {
            for (var k = 0, t = dc.resolve(a, c); k < t.length;) {
              c = t[k];
              ++k;
              var n = C.xml_f(c, "screen_ratio", -1);
              var K = C.xml_f(c, "tolerance", 0.1);
              var g = h.width / h.height;
              if (n < 0 || n > 0 && Math.abs(n - g) <= K) {
                k = C.xml_str(c, "suffix");
                k = f + k;
                K = -1;
                t = this.loadSmooth(c, true);
                n = this._loadHeight(c, -1, "to_height");
                if (n != -1) {
                  g = C.getBmp(C.gfx(f));
                  if (g != null) {
                    K = n / g.height;
                  }
                } else {
                  K = this._loadScale(c, -1);
                  if (K == -1) {
                    K = this._loadScale(c, -1, "value");
                  }
                }
                n = K != -1 ? K : this._loadScaleX(c, -1);
                K = K != -1 ? K : this._loadScaleY(c, -1);
                if (n > 0 && K > 0) {
                  if (n <= 0) {
                    n = 1;
                  }
                  if (K <= 0) {
                    K = 1;
                  }
                  g = this._loadWidth(c, -1);
                  var l = this._loadHeight(c, -1);
                  if (g == -1 || l == -1) {
                    c = Q.getBitmapData(C.gfx(f));
                    g = c.width;
                    l = c.height;
                  }
                  g *= n;
                  l *= K;
                } else {
                  g = this._loadWidth(c, -1);
                  l = this._loadHeight(c, -1);
                }
                if (g != 0 && l != 0) {
                  if (e > 1 || d > 1) {
                    c = Q.getBitmapData(C.gfx(f));
                    d = C.scaleAndStoreTileset(C.gfx(k), K, c.width / d | 0, c.height / e | 0, g | 0, l / e | 0, t);
                    this.addToScaledAssets(d);
                    return d;
                  }
                  a = C.loadScaledImage(k, g, l, t);
                  this.addToScaledAssets(a);
                  return a;
                }
                break;
              }
            }
          }
          d = "";
          if (a.get(b) != null) {
            d = a.get(b);
            if (d == "" || d == null) {
              d = "";
            } else {
              d = C.gfx(d);
              try {
                if (!Q.exists(d, "IMAGE")) {
                  throw G.thrown("couldn't load bmp \"" + b + "\"");
                }
              } catch (L) {
                Pa.lastError = L;
                t = G.caught(L).unwrap();
                if (typeof t == "string") {
                  h.log.advanced("FlxUI: U.xml_gfx() : " + t, xa.ERROR, true);
                } else {
                  throw L;
                }
              }
            }
          }
          return d;
        },
        _getAnchorPos: function (a, b, c) {
          switch (c) {
            case "":
              break;
            case "center":
              if (b == "x") {
                return this.screenWidth() / 2;
              }
              if (b == "y") {
                return this.screenHeight() / 2;
              }
              break;
            case "bottom":
            case "down":
              return this.screenHeight();
            case "left":
              break;
            case "right":
              return this.screenWidth();
            case "top":
            case "up":
              break;
            default:
              a = C.perc_to_float(c);
              if (!isNaN(a)) {
                if (b == "x") {
                  return a * this.screenWidth();
                }
                if (b == "y") {
                  return a * this.screenHeight();
                }
              } else if (new V("[\\w]+\\.[\\w]+", "").match(c)) {
                a = "";
                if (b == "x") {
                  a = "w";
                }
                if (b == "y") {
                  a = "h";
                }
                return this._getStretch(1, a, c);
              }
          }
          return 0;
        },
        getRound: function (a, b) {
          if (b == null) {
            b = "";
          }
          switch (C.xml_str(a, "round", true, b)) {
            case "1":
            case "ceil":
            case "ceiling":
            case "up":
              return rh.Ceil;
            case "-1":
            case "down":
            case "floor":
              return rh.Floor;
            case "0":
            case "round":
            case "true":
              return rh.Round;
          }
          return rh.None;
        },
        doRound: function (a, b) {
          switch (b._hx_index) {
            case 0:
              return Math.floor(a);
            case 1:
              return Math.ceil(a);
            case 2:
              return Math.round(a);
            case 3:
              return a;
          }
        },
        calcMaxMinSize: function (a, b, c) {
          var d = 0;
          var e = 0;
          var f = Infinity;
          var k = Infinity;
          if (fb.resolve(a, "exact_size")) {
            var t = 0;
            for (a = dc.resolve(a, "exact_size"); t < a.length;) {
              f = a[t];
              ++t;
              d = C.xml_str(f, "width");
              e = C.xml_str(f, "height");
              var n = this.getRound(f);
              d = this.doRound(this._getDataSize("w", d, 0), n);
              e = this.doRound(this._getDataSize("h", e, 0), n);
              f = this.doRound(d, n);
              k = this.doRound(e, n);
            }
          } else if (fb.resolve(a, "min_size")) {
            t = 0;
            a = dc.resolve(a, "min_size");
            while (t < a.length) {
              n = a[t];
              ++t;
              var h = C.xml_str(n, "width");
              var g = C.xml_str(n, "height");
              n = this.getRound(n);
              h = this.doRound(this._getDataSize("w", h, 0), n);
              n = this.doRound(this._getDataSize("h", g, 0), n);
              if (h > d) {
                d = h;
              }
              if (n > e) {
                e = n;
              }
            }
          } else if (fb.resolve(a, "max_size")) {
            t = 0;
            a = dc.resolve(a, "max_size");
            while (t < a.length) {
              n = a[t];
              ++t;
              h = C.xml_str(n, "width");
              g = C.xml_str(n, "height");
              n = this.getRound(n);
              h = this.doRound(this._getDataSize("w", h, Infinity), n);
              n = this.doRound(this._getDataSize("h", g, Infinity), n);
              if (h < f) {
                f = h;
              }
              if (n < k) {
                k = n;
              }
            }
          } else {
            return null;
          }
          if (b != null) {
            if (b > d) {
              d = b;
            }
            if (b < f) {
              f = b;
            }
          }
          if (c != null) {
            if (c > e) {
              e = c;
            }
            if (c < k) {
              k = c;
            }
          }
          if (f <= 0) {
            f = Infinity;
          }
          if (k <= 0) {
            k = Infinity;
          }
          return {
            min_width: d,
            min_height: e,
            max_width: f,
            max_height: k
          };
        },
        _getDataSize: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (C.isStrNum(b)) {
            return parseFloat(b);
          }
          var d = C.perc_to_float(b);
          if (isNaN(d)) {
            if (b.indexOf("stretch:") == 0) {
              b = w.replace(b, "stretch:", "");
              d = b.split(",");
              b = this._getStretch(0, a, d[0]);
              a = this._getStretch(1, a, d[1]);
              if (b != -1 && a != -1) {
                return a - b;
              } else {
                return c;
              }
            }
            if (b.indexOf("asset:") == 0) {
              b = w.replace(b, "asset:", "");
              return c = this._getStretch(1, a, b);
            }
            if (new V("[\\w]+\\.[\\w]+", "").match(b)) {
              return c = this._getStretch(1, a, b);
            }
            d = "";
            if (b.indexOf("pt") == b.length - 2) {
              d = r.substr(b, 0, b.length - 2);
            }
            if (d != "" && C.isStrNum(d)) {
              b = parseFloat(d);
              switch (a) {
                case "h":
                case "height":
                  return this._pointY * b;
                case "w":
                case "width":
                  return this._pointX * b;
              }
            }
          } else {
            switch (a) {
              case "h":
              case "height":
                return this.screenHeight() * d;
              case "scale":
              case "scale_x":
              case "scale_y":
                return d;
              case "w":
              case "width":
                return this.screenWidth() * d;
            }
          }
          return c;
        },
        _getOperation: function (a) {
          for (var b = ["+", "-", "*", "/", "^"], c = "", d = Infinity, e = 0; e < b.length;) {
            var f = b[e];
            ++e;
            var k = a.indexOf(f);
            if (k != -1 && k < d) {
              d = k;
              c = f;
            }
          }
          d = false;
          if (c != "" && a.indexOf(c) != -1 && (e = a.indexOf(c), e != a.length - 1 && (b = r.substr(a, 0, e), a = r.substr(a, e + 1, a.length - (e + 1)), e = a.indexOf("pt"), e != -1 && e == a.length - 2 ? (d = w.replace(a, "pt", ""), e = parseFloat(d), d = true) : e = parseFloat(a), isNaN(e) && (e = this.getAssetProperty(1, "", a)), e != 0 || a == "0"))) {
            return [b, c, e, d];
          } else {
            return null;
          }
        },
        _doOperation: function (a, b, c) {
          switch (b) {
            case "*":
              return a * c;
            case "+":
              return a + c;
            case "-":
              return a - c;
            case "/":
              return a / c;
            case "^":
              return Math.pow(a, c);
          }
          return a;
        },
        _getStretch: function (a, b, c) {
          var d = "";
          var e = 0;
          var f = this._getOperation(c);
          if (f != null && (c = f[0], d = f[1], e = f[2], f = f[3])) {
            switch (b) {
              case "h":
              case "height":
                e *= this._pointY;
                break;
              case "w":
              case "width":
                e *= this._pointX;
                break;
              default:
                e *= this._pointY;
            }
          }
          a = this.getAssetProperty(a, b, c);
          if (a != -1 && d != "") {
            a = this._doOperation(a, d, e);
          }
          return a;
        },
        getAssetProperty: function (a, b, c) {
          var d = "";
          if (c.indexOf(".") != -1) {
            d = c.split(".");
            c = d[0];
            d = d[1];
          }
          var e = this.getAsset(c);
          var f = 0;
          if (e == null) {
            switch (c) {
              case "bottom":
              case "down":
                f = this.screenHeight();
                break;
              case "left":
                f = 0;
                break;
              case "right":
                f = this.screenWidth();
                break;
              case "top":
              case "up":
                f = 0;
                break;
              default:
                f = C.isStrNum(c) ? parseFloat(c) : -1;
            }
          } else {
            switch (b) {
              case "h":
              case "height":
                if (d == "") {
                  if (a == 0) {
                    f = e.y + e.get_height();
                  }
                  if (a == 1) {
                    f = e.y;
                  }
                } else {
                  switch (d) {
                    case "center":
                      f = e.y + e.get_height() / 2;
                      break;
                    case "bottom":
                    case "down":
                      f = e.y + e.get_height();
                      break;
                    case "halfheight":
                      f = e.get_height() / 2;
                      break;
                    case "halfwidth":
                      f = e.get_width() / 2;
                      break;
                    case "height":
                      f = e.get_height();
                      break;
                    case "right":
                      f = e.x + e.get_width();
                      break;
                    case "width":
                      f = e.get_width();
                      break;
                    case "left":
                    case "x":
                      f = e.x;
                      break;
                    case "top":
                    case "up":
                    case "y":
                      f = e.y;
                  }
                }
                break;
              case "w":
              case "width":
                if (d == "") {
                  if (a == 0) {
                    f = e.x + e.get_width();
                  }
                  if (a == 1) {
                    f = e.x;
                  }
                } else {
                  switch (d) {
                    case "center":
                      f = e.x + e.get_width() / 2;
                      break;
                    case "bottom":
                    case "down":
                      f = e.y + e.get_height();
                      break;
                    case "halfheight":
                      f = e.get_height() / 2;
                      break;
                    case "halfwidth":
                      f = e.get_width() / 2;
                      break;
                    case "height":
                      f = e.get_height();
                      break;
                    case "right":
                      f = e.x + e.get_width();
                      break;
                    case "width":
                      f = e.get_width();
                      break;
                    case "left":
                    case "x":
                      f = e.x;
                      break;
                    case "top":
                    case "up":
                    case "y":
                      f = e.y;
                  }
                }
                break;
              default:
                switch (d) {
                  case "centerx":
                    f = e.x + e.get_width() / 2;
                    break;
                  case "centery":
                    f = e.y + e.get_height() / 2;
                    break;
                  case "bottom":
                  case "down":
                    f = e.y + e.get_height();
                    break;
                  case "halfheight":
                    f = e.get_height() / 2;
                    break;
                  case "halfwidth":
                    f = e.get_width() / 2;
                    break;
                  case "height":
                    f = e.get_height();
                    break;
                  case "right":
                    f = e.x + e.get_width();
                    break;
                  case "width":
                    f = e.get_width();
                    break;
                  case "left":
                  case "x":
                    f = e.x;
                    break;
                  case "top":
                  case "up":
                  case "y":
                    f = e.y;
                }
            }
          }
          return f;
        },
        _loadCursor: function (a) {
          if (fb.resolve(a, "list")) {
            if (this.cursorLists == null) {
              this.cursorLists = [];
            }
            var b = 0;
            for (a = dc.resolve(a, "list"); b < a.length;) {
              var c = a[b];
              ++b;
              c = C.xml_str(c, "ids").split(",");
              if (c != null && c.length > 0) {
                var d = [];
                for (var e = 0; e < c.length;) {
                  var f = c[e];
                  ++e;
                  f = this.getAsset(f);
                  if (f != null) {
                    d.push(f);
                  }
                }
                this.cursorLists.push(d);
              }
            }
          }
        },
        _loadPosition: function (a, b) {
          var c = this._loadWidth(a, 0, "x");
          var d = this._loadHeight(a, 0, "y");
          var e = C.xml_bool(a, "center_x");
          var f = C.xml_bool(a, "center_y");
          var k = C.xml_str(a, "center_on");
          var t = C.xml_str(a, "center_on_x");
          var n = C.xml_str(a, "center_on_y");
          var K = "";
          var g = "";
          var l = 0;
          var L = 0;
          var p = "";
          var m = "";
          if (fb.resolve(a, "anchor")) {
            K = C.xml_str(Db.resolve(a, "anchor"), "x");
            g = C.xml_str(Db.resolve(a, "anchor"), "y");
            p = this.getRound(Db.resolve(a, "anchor"));
            l = this._getAnchorPos(b, "x", K);
            L = this._getAnchorPos(b, "y", g);
            l = this.doRound(l, p);
            L = this.doRound(L, p);
            p = C.xml_str(Db.resolve(a, "anchor"), "x-flush", true);
            m = C.xml_str(Db.resolve(a, "anchor"), "y-flush", true);
          }
          if (K != "" || g != "") {
            switch (p) {
              case "center":
                l -= b.get_width() / 2;
                break;
              case "right":
                l -= b.get_width();
            }
            switch (m) {
              case "bottom":
              case "down":
                L -= b.get_height();
                break;
              case "center":
                L -= b.get_height() / 2;
            }
            if (K != "") {
              b.set_x(l);
            }
            if (g != "") {
              b.set_y(L);
            }
          }
          if (e || f) {
            a = e;
            if (f == null) {
              f = true;
            }
            if (a == null) {
              a = true;
            }
            if (a) {
              b.set_x((h.width - b.get_width()) / 2);
            }
            if (f) {
              b.set_y((h.height - b.get_height()) / 2);
            }
          }
          if (k != "") {
            k = this.getAsset(k);
            if (k != null) {
              k = va.__cast(k, $b);
              t = va.__cast(b, $b);
              t.set_x(k.x + (k.get_width() - t.get_width()) / 2);
              t.set_y(k.y + (k.get_height() - t.get_height()) / 2);
            }
          } else {
            if (t != "") {
              k = this.getAsset(t);
              if (k != null) {
                k = va.__cast(k, $b);
                t = va.__cast(b, $b);
                f = true;
                a = false;
                if (a == null) {
                  a = true;
                }
                if (f == null) {
                  f = true;
                }
                if (f) {
                  t.set_x(k.x + (k.get_width() - t.get_width()) / 2);
                }
                if (a) {
                  t.set_y(k.y + (k.get_height() - t.get_height()) / 2);
                }
              }
            }
            if (n != "") {
              k = this.getAsset(n);
              if (k != null) {
                k = va.__cast(k, $b);
                t = va.__cast(b, $b);
                f = false;
                a = true;
                if (a == null) {
                  a = true;
                }
                if (f == null) {
                  f = true;
                }
                if (f) {
                  t.set_x(k.x + (k.get_width() - t.get_width()) / 2);
                }
                if (a) {
                  t.set_y(k.y + (k.get_height() - t.get_height()) / 2);
                }
              }
            }
          }
          a = c;
          f = d;
          if (f == null) {
            f = 0;
          }
          if (a == null) {
            a = 0;
          }
          b.set_x(b.x + a);
          b.set_y(b.y + f);
        },
        _loadBorder: function (a) {
          var b = $e.fromXML(a);
          var c = this.getRound(a, "floor");
          a = this._getDataSize("h", C.xml_str(a, "border_size"), 1);
          c = this.doRound(a, c) | 0;
          b.size = c;
          return b;
        },
        _loadColor: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = "color";
          }
          var d = C.xml_str(a, b);
          if (d == "") {
            if (a.nodeType != ea.Element) {
              throw G.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
            }
            b = a.nodeName == b;
          } else {
            b = false;
          }
          if (b) {
            d = C.xml_str(a, "value");
          }
          a = c;
          if (d != "" && (a = eb.fromString(d), a == null)) {
            throw G.thrown("U.parseHex() unable to parse hex String " + d);
          }
          return a;
        },
        _loadFontDef: function (a) {
          var b = md.fromXML(a);
          a = this._loadHeight(a, 8, "size") | 0;
          b.format.size = Ka.fontSize(b.file, a);
          b.set_size(a);
          return b;
        },
        _loadFontFace: function (a) {
          var b = C.xml_str(a, "font");
          a = C.xml_str(a, "style");
          var c = null;
          if (b != "") {
            c = Ka.font(b, a);
          }
          return c;
        },
        _onFinishLoad: function () {
          if (this._ptr != null) {
            this._ptr.getEvent("finish_load", this, null);
          }
        },
        getText: function (a, b, c, d) {
          if (d == null) {
            d = "";
          }
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = "data";
          }
          if (this._ptr_tongue != null) {
            a = this._ptr_tongue.get(a, b, c);
            return this.formatFromCode(a, d);
          } else if (this.getTextFallback != null) {
            a = this.getTextFallback(a, b, c);
            return this.formatFromCode(a, d);
          } else {
            return a;
          }
        },
        formatFromCode: function (a, b) {
          switch (b) {
            case "fu":
              return C.FU(a);
            case "fu_":
              return C.FU_(a);
            case "l":
              return a.toLowerCase();
            case "u":
              return a.toUpperCase();
          }
          return a;
        },
        formatButtonText: function (a, b) {
          if (a != null && fb.resolve(a, "text")) {
            a = Db.resolve(a, "text");
            var c = C.xml_str(a, "use_def", true);
            var d = null;
            if (c != "") {
              d = this.getDefinition(c);
            }
            var e = Ka.consolidateData(a, d);
            var f = this._loadFontFace(e);
            var k = this._loadHeight(e, 8, "size", "floor") | 0;
            a = this._loadColor(e);
            var t = C.xml_f(e, "width");
            var n = this._loadBorder(e);
            var h = C.xml_str(e, "align", true);
            if (h == "") {
              h = null;
            }
            var g = c = null;
            var l = null;
            if (b instanceof xb == 0) {
              if (h == "" || h == null) {
                h = "center";
              }
            } else {
              b = b.button;
              h = "left";
            }
            if (b != null) {
              if (b instanceof ud) {
                g = b;
                c = g.label;
              } else if (b instanceof bf) {
                l = b;
                if (l.label instanceof U) {
                  c = l.label;
                } else if (l.label instanceof La) {
                  d = 0;
                  for (var L = l.label.group.members; d < L.length;) {
                    var p = L[d];
                    ++d;
                    if (p instanceof U) {
                      c = p;
                      break;
                    }
                  }
                }
              }
              b.up_color = a;
              b.down_color = 0;
              b.over_color = 0;
            }
            if (c != null) {
              if (t != 0) {
                c.set_width(t);
                c.resetHelpers();
              }
              if (g != null) {
                g.setLabelFormat(f, k, a, h);
              } else {
                c.setFormat(f, k, a, h);
              }
              c.set_borderStyle(n.style);
              c.set_borderColor(n.color);
              c.set_borderSize(n.size);
              c.set_borderQuality(n.quality);
              if (c instanceof Xd) {
                c.drawFrame();
              }
              if (g != null) {
                g.autoCenterLabel();
              }
              if (l != null) {
                l.autoCenterLabel();
              }
            }
            d = 0;
            for (L = dc.resolve(e, "color"); d < L.length;) {
              k = L[d];
              ++d;
              a = this._loadColor(k);
              e = C.xml_bool(k, "visible", true);
              f = C.xml_name(k);
              k = C.xml_bool(k, "toggle");
              switch (f) {
                case "active":
                case "hilight":
                case "hover":
                case "over":
                  if (k) {
                    b.over_toggle_color = a;
                    b.over_toggle_visible = e;
                  } else {
                    b.over_color = a;
                    b.over_visible = e;
                  }
                  break;
                case "":
                case "inactive":
                case "normal":
                case "up":
                  if (k) {
                    b.up_toggle_color = a;
                    b.up_toggle_visible = e;
                  } else {
                    b.up_color = a;
                    b.up_visible = e;
                  }
                  break;
                case "down":
                case "pressed":
                case "pushed":
                  if (k) {
                    b.down_toggle_color = a;
                    b.down_toggle_visible = e;
                  } else {
                    b.down_color = a;
                    b.down_visible = e;
                  }
              }
            }
            if (b.over_color == 0) {
              b.over_color = b.up_color;
            }
            if (b.down_color == 0) {
              b.down_color = b.over_color;
            }
            if (b.up_toggle_color == 0) {
              b.up_toggle_color = b.up_color;
            }
            if (b.over_toggle_color == 0) {
              b.over_toggle_color = b.over_color;
            }
            if (b.down_toggle_color == 0) {
              b.down_toggle_color = b.down_color;
            }
            if (c != null) {
              c.set_visible(b.up_visible);
              c.set_color(b.up_color);
            }
            return c;
          }
          return null;
        },
        __class__: Ka,
        __properties__: q(cb.prototype.__properties__, {
          set_focus: "set_focus"
        })
      });
      var rh = z["flixel.addons.ui.Rounding"] = {
        __ename__: "flixel.addons.ui.Rounding",
        __constructs__: null,
        Floor: {
          _hx_name: "Floor",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.Rounding",
          toString: p
        },
        Ceil: {
          _hx_name: "Ceil",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.Rounding",
          toString: p
        },
        Round: {
          _hx_name: "Round",
          _hx_index: 2,
          __enum__: "flixel.addons.ui.Rounding",
          toString: p
        },
        None: {
          _hx_name: "None",
          _hx_index: 3,
          __enum__: "flixel.addons.ui.Rounding",
          toString: p
        }
      };
      rh.__constructs__ = [rh.Floor, rh.Ceil, rh.Round, rh.None];
      function cd() {}
      g["flixel.addons.ui.interfaces.IResizable"] = cd;
      cd.__name__ = "flixel.addons.ui.interfaces.IResizable";
      cd.__isInterface__ = true;
      cd.prototype = {
        __class__: cd,
        __properties__: {
          get_height: "get_height",
          get_width: "get_width"
        }
      };
      function Cc(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._originalKey = "";
        this.resize_ratio_axis = 1;
        this.ptr_owner = null;
        F.call(this, a, b, c);
      }
      g["flixel.addons.ui.FlxUISprite"] = Cc;
      Cc.__name__ = "flixel.addons.ui.FlxUISprite";
      Cc.__interfaces__ = [cd, td];
      Cc.__super__ = F;
      Cc.prototype = q(F.prototype, {
        set_resize_ratio: function (a) {
          return this.resize_ratio = a;
        },
        set_resize_point: function (a) {
          if (a != null) {
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = W.pool.get().set(b, c);
            b._inPool = false;
            this.resize_point = b;
            this.resize_point.set_x(a.x);
            this.resize_point.set_y(a.y);
          }
          return this.resize_point;
        },
        resize: function (a, b) {
          var c = this.get_width();
          var d = this.get_height();
          if (this.resize_ratio > 0 && Math.abs(a / b - this.resize_ratio) > 0.0001) {
            if (this.resize_ratio_axis == 1) {
              b = 1 / this.resize_ratio * a;
            } else {
              a = 1 / this.resize_ratio * b;
            }
          }
          if (this._originalKey != "" && this._originalKey != null) {
            a = C.loadScaledImage(this._originalKey, a, b);
            if (a != "" && a != null) {
              this.loadFromScaledGraphic(a);
            }
          }
          c = this.get_width() - c;
          d = this.get_height() - d;
          if (this.resize_point != null) {
            d *= this.resize_point.y;
            this.set_x(this.x - c * this.resize_point.x);
            this.set_y(this.y - d);
          }
        },
        loadGraphic: function (a, b, c, d, e, f) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          a = F.prototype.loadGraphic.call(this, a, b, c, d, e, f);
          this._originalKey = this.graphic.assetsKey;
          if (this._originalKey == null) {
            this._originalKey = this.graphic.key;
          }
          return a;
        },
        destroy: function () {
          this.ptr_owner = null;
          F.prototype.destroy.call(this);
        },
        loadFromScaledGraphic: function (a, b, c, d, e, f) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          F.prototype.loadGraphic.call(this, a, b, c, d, e, f);
        },
        __class__: Cc,
        __properties__: q(F.prototype.__properties__, {
          set_resize_point: "set_resize_point",
          set_resize_ratio: "set_resize_ratio"
        })
      });
      function lb(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
      }
      g["openfl.geom.Point"] = lb;
      lb.__name__ = "openfl.geom.Point";
      lb.prototype = {
        copyFrom: function (a) {
          this.x = a.x;
          this.y = a.y;
        },
        offset: function (a, b) {
          this.x += a;
          this.y += b;
        },
        setTo: function (a, b) {
          this.x = a;
          this.y = b;
        },
        __toLimeVector2: function () {
          if (lb.__limeVector2 == null) {
            lb.__limeVector2 = new Xh();
          }
          var a = lb.__limeVector2;
          a.x = this.x;
          a.y = this.y;
          return lb.__limeVector2;
        },
        __class__: lb
      };
      function da(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
        this.width = c;
        this.height = d;
      }
      g["openfl.geom.Rectangle"] = da;
      da.__name__ = "openfl.geom.Rectangle";
      da.prototype = {
        clone: function () {
          return new da(this.x, this.y, this.width, this.height);
        },
        contains: function (a, b) {
          if (a >= this.x && b >= this.y && a < this.get_right()) {
            return b < this.get_bottom();
          } else {
            return false;
          }
        },
        containsPoint: function (a) {
          return this.contains(a.x, a.y);
        },
        copyFrom: function (a) {
          this.x = a.x;
          this.y = a.y;
          this.width = a.width;
          this.height = a.height;
        },
        equals: function (a) {
          if (a == this) {
            return true;
          } else if (a != null && this.x == a.x && this.y == a.y && this.width == a.width) {
            return this.height == a.height;
          } else {
            return false;
          }
        },
        inflate: function (a, b) {
          this.x -= a;
          this.width += a * 2;
          this.y -= b;
          this.height += b * 2;
        },
        offset: function (a, b) {
          this.x += a;
          this.y += b;
        },
        setEmpty: function () {
          this.x = this.y = this.width = this.height = 0;
        },
        setTo: function (a, b, c, d) {
          this.x = a;
          this.y = b;
          this.width = c;
          this.height = d;
        },
        union: function (a) {
          if (this.width == 0 || this.height == 0) {
            return a.clone();
          }
          if (a.width == 0 || a.height == 0) {
            return this.clone();
          }
          var b = this.x > a.x ? a.x : this.x;
          var c = this.get_right() < a.get_right() ? a.get_right() : this.get_right();
          var d = this.y > a.y ? a.y : this.y;
          a = this.get_bottom() < a.get_bottom() ? a.get_bottom() : this.get_bottom();
          return new da(b, d, c - b, a - d);
        },
        __contract: function (a, b, c, d) {
          if (this.width != 0 || this.height != 0) {
            var e = 0;
            var f = 0;
            var k = 0;
            var t = 0;
            if (this.x < a) {
              e = a - this.x;
            }
            if (this.y < b) {
              f = b - this.y;
            }
            if (this.get_right() > a + c) {
              k = a + c - this.get_right();
            }
            if (this.get_bottom() > b + d) {
              t = b + d - this.get_bottom();
            }
            this.x += e;
            this.y += f;
            this.width += k - e;
            this.height += t - f;
          }
        },
        __expand: function (a, b, c, d) {
          if (this.width == 0 && this.height == 0) {
            this.x = a;
            this.y = b;
            this.width = c;
            this.height = d;
          } else {
            var e = this.get_right();
            var f = this.get_bottom();
            if (this.x > a) {
              this.x = a;
              this.width = e - a;
            }
            if (this.y > b) {
              this.y = b;
              this.height = f - b;
            }
            if (e < a + c) {
              this.width = a + c - this.x;
            }
            if (f < b + d) {
              this.height = b + d - this.y;
            }
          }
        },
        __toLimeRectangle: function () {
          if (da.__limeRectangle == null) {
            da.__limeRectangle = new Ie();
          }
          da.__limeRectangle.setTo(this.x, this.y, this.width, this.height);
          return da.__limeRectangle;
        },
        __transform: function (a, b) {
          var c = b.a * this.x + b.c * this.y;
          var d = c;
          var e = b.b * this.x + b.d * this.y;
          var f = e;
          var k = b.a * (this.x + this.width) + b.c * this.y;
          var t = b.b * (this.x + this.width) + b.d * this.y;
          if (k < c) {
            c = k;
          }
          if (t < e) {
            e = t;
          }
          if (k > d) {
            d = k;
          }
          if (t > f) {
            f = t;
          }
          k = b.a * (this.x + this.width) + b.c * (this.y + this.height);
          t = b.b * (this.x + this.width) + b.d * (this.y + this.height);
          if (k < c) {
            c = k;
          }
          if (t < e) {
            e = t;
          }
          if (k > d) {
            d = k;
          }
          if (t > f) {
            f = t;
          }
          k = b.a * this.x + b.c * (this.y + this.height);
          t = b.b * this.x + b.d * (this.y + this.height);
          if (k < c) {
            c = k;
          }
          if (t < e) {
            e = t;
          }
          if (k > d) {
            d = k;
          }
          if (t > f) {
            f = t;
          }
          a.setTo(c + b.tx, e + b.ty, d - c, f - e);
        },
        get_bottom: function () {
          return this.y + this.height;
        },
        get_left: function () {
          return this.x;
        },
        get_right: function () {
          return this.x + this.width;
        },
        get_top: function () {
          return this.y;
        },
        get_topLeft: function () {
          return new lb(this.x, this.y);
        },
        __class__: da,
        __properties__: {
          get_topLeft: "get_topLeft",
          get_top: "get_top",
          get_right: "get_right",
          get_left: "get_left",
          get_bottom: "get_bottom"
        }
      };
      function Z(a, b, c, d, e, f, k, t, n, h, g, l, L) {
        if (L == null) {
          L = -1;
        }
        if (l == null) {
          l = false;
        }
        if (g == null) {
          g = 1;
        }
        if (n == null) {
          n = -1;
        }
        if (t == null) {
          t = "";
        }
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = 0;
        }
        this._asset_id = "";
        this._smooth = false;
        this._tile = 0;
        this._slice9 = null;
        this.paintScale9_id = "";
        Cc.call(this, a, b, null);
        this.set_color(L);
        this._slice9 = e;
        this._tile = f;
        this._smooth = k;
        this._asset_id = "";
        if (c == null) {
          c = "flixel/flixel-ui/img/chrome.png";
        }
        if (typeof c == "string") {
          this._asset_id = c;
          this._raw_pixels = null;
        } else if (c instanceof T) {
          this._asset_id = t;
          this._raw_pixels = c;
        } else if (c instanceof Zb) {
          a = c;
          this._asset_id = a.key;
          this._raw_pixels = a.bitmap;
        }
        this.set_resize_ratio(n);
        this.resize_ratio_axis = g;
        if (h != null) {
          this.set_resize_point(h);
        }
        if (l) {
          d = C.applyResize(this.resize_ratio, this.resize_ratio_axis, d.width, d.height);
          this.set_width(d.x);
          this.set_height(d.y);
        } else {
          this.resize(d.width, d.height);
        }
      }
      g["flixel.addons.ui.FlxUI9SliceSprite"] = Z;
      Z.__name__ = "flixel.addons.ui.FlxUI9SliceSprite";
      Z.__interfaces__ = [td, cd];
      Z.paintScale9 = function (a, b, c, d, e, f, k) {
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = 0;
        }
        if (c != null) {
          if (k == null) {
            var t = C.getBmp(b);
            if (t != null) {
              var n = t.width;
              t = t.height;
            } else {
              t = h.bitmap._cache.h[b];
              n = t.width;
              t = t.height;
            }
          } else {
            n = k.width;
            t = k.height;
          }
          var K = c[0];
          var g = c[1];
          var l = c[2];
          var L = c[3];
          if (Z._staticRects == null) {
            Z._staticRects = new ua();
            var p = Z._staticRects;
            var m = Ha._pool.get();
            var v = 0;
            var q = 0;
            var w = 0;
            var u = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (q == null) {
              q = 0;
            }
            if (v == null) {
              v = 0;
            }
            m.x = v;
            m.y = q;
            m.width = w;
            m.height = u;
            m._inPool = false;
            p.h["top.left"] = m;
            p = Z._staticRects;
            m = Ha._pool.get();
            u = w = q = v = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (q == null) {
              q = 0;
            }
            if (v == null) {
              v = 0;
            }
            m.x = v;
            m.y = q;
            m.width = w;
            m.height = u;
            m._inPool = false;
            p.h.top = m;
            p = Z._staticRects;
            m = Ha._pool.get();
            u = w = q = v = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (q == null) {
              q = 0;
            }
            if (v == null) {
              v = 0;
            }
            m.x = v;
            m.y = q;
            m.width = w;
            m.height = u;
            m._inPool = false;
            p.h["top.right"] = m;
            p = Z._staticRects;
            m = Ha._pool.get();
            u = w = q = v = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (q == null) {
              q = 0;
            }
            if (v == null) {
              v = 0;
            }
            m.x = v;
            m.y = q;
            m.width = w;
            m.height = u;
            m._inPool = false;
            p.h.left = m;
            p = Z._staticRects;
            m = Ha._pool.get();
            u = w = q = v = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (q == null) {
              q = 0;
            }
            if (v == null) {
              v = 0;
            }
            m.x = v;
            m.y = q;
            m.width = w;
            m.height = u;
            m._inPool = false;
            p.h.middle = m;
            p = Z._staticRects;
            m = Ha._pool.get();
            u = w = q = v = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (q == null) {
              q = 0;
            }
            if (v == null) {
              v = 0;
            }
            m.x = v;
            m.y = q;
            m.width = w;
            m.height = u;
            m._inPool = false;
            p.h.right = m;
            p = Z._staticRects;
            m = Ha._pool.get();
            u = w = q = v = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (q == null) {
              q = 0;
            }
            if (v == null) {
              v = 0;
            }
            m.x = v;
            m.y = q;
            m.width = w;
            m.height = u;
            m._inPool = false;
            p.h["bottom.left"] = m;
            p = Z._staticRects;
            m = Ha._pool.get();
            u = w = q = v = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (q == null) {
              q = 0;
            }
            if (v == null) {
              v = 0;
            }
            m.x = v;
            m.y = q;
            m.width = w;
            m.height = u;
            m._inPool = false;
            p.h.bottom = m;
            p = Z._staticRects;
            m = Ha._pool.get();
            u = w = q = v = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (q == null) {
              q = 0;
            }
            if (v == null) {
              v = 0;
            }
            m.x = v;
            m.y = q;
            m.width = w;
            m.height = u;
            m._inPool = false;
            p.h["bottom.right"] = m;
          }
          m = Z._staticRects.h["top.left"];
          q = v = 0;
          w = K;
          u = g;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (q == null) {
            q = 0;
          }
          if (v == null) {
            v = 0;
          }
          m.x = v;
          m.y = q;
          m.width = w;
          m.height = u;
          m = Z._staticRects.h.top;
          v = K;
          q = 0;
          w = l - K;
          u = g;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (q == null) {
            q = 0;
          }
          if (v == null) {
            v = 0;
          }
          m.x = v;
          m.y = q;
          m.width = w;
          m.height = u;
          m = Z._staticRects.h["top.right"];
          v = l;
          q = 0;
          w = n - l;
          u = g;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (q == null) {
            q = 0;
          }
          if (v == null) {
            v = 0;
          }
          m.x = v;
          m.y = q;
          m.width = w;
          m.height = u;
          m = Z._staticRects.h.left;
          v = 0;
          q = g;
          w = K;
          u = L - g;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (q == null) {
            q = 0;
          }
          if (v == null) {
            v = 0;
          }
          m.x = v;
          m.y = q;
          m.width = w;
          m.height = u;
          m = Z._staticRects.h.middle;
          v = K;
          q = g;
          w = l - K;
          u = L - g;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (q == null) {
            q = 0;
          }
          if (v == null) {
            v = 0;
          }
          m.x = v;
          m.y = q;
          m.width = w;
          m.height = u;
          m = Z._staticRects.h.right;
          v = l;
          q = g;
          w = n - l;
          u = L - g;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (q == null) {
            q = 0;
          }
          if (v == null) {
            v = 0;
          }
          m.x = v;
          m.y = q;
          m.width = w;
          m.height = u;
          m = Z._staticRects.h["bottom.left"];
          v = 0;
          q = L;
          w = K;
          u = t - L;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (q == null) {
            q = 0;
          }
          if (v == null) {
            v = 0;
          }
          m.x = v;
          m.y = q;
          m.width = w;
          m.height = u;
          m = Z._staticRects.h.bottom;
          v = K;
          q = L;
          w = l - K;
          u = t - L;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (q == null) {
            q = 0;
          }
          if (v == null) {
            v = 0;
          }
          m.x = v;
          m.y = q;
          m.width = w;
          m.height = u;
          m = Z._staticRects.h["bottom.right"];
          v = l;
          q = L;
          w = n - l;
          u = t - L;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (q == null) {
            q = 0;
          }
          if (v == null) {
            v = 0;
          }
          m.x = v;
          m.y = q;
          m.width = w;
          m.height = u;
          if (Z.cacheCounter == null) {
            Z.cacheCounter = new ua();
          }
          c = Z.makePaintScale9Id(b, c, d);
          n = Z.cacheCounter.h[c];
          if (n == null) {
            n = {
              useCount: 0,
              subKeys: []
            };
            for (t = 0; t < 9;) {
              switch (t++) {
                case 0:
                  m = Z._staticRects.h["top.left"];
                  break;
                case 1:
                  m = Z._staticRects.h.top;
                  break;
                case 2:
                  m = Z._staticRects.h["top.right"];
                  break;
                case 3:
                  m = Z._staticRects.h.left;
                  break;
                case 4:
                  m = Z._staticRects.h.middle;
                  break;
                case 5:
                  m = Z._staticRects.h.right;
                  break;
                case 6:
                  m = Z._staticRects.h["bottom.left"];
                  break;
                case 7:
                  m = Z._staticRects.h.bottom;
                  break;
                case 8:
                  m = Z._staticRects.h["bottom.right"];
                  break;
                default:
                  m = Z._staticRects.h["top.left"];
              }
              n.subKeys.push(b + "_" + m.x + "_" + m.y + "_" + m.width + "_" + m.height + "_");
            }
            Z.cacheCounter.h[c] = n;
          }
          Z.paintCompoundBitmap(a, b, Z._staticRects, d, e, f, k);
          return c;
        }
        return "";
      };
      Z.makePaintScale9Id = function (a, b, c) {
        a = a + "_" + b.join(",") + "_";
        b = c.x;
        var d = Vc._pool.get();
        d.label = "x";
        d.value = b;
        b = c.y;
        var e = Vc._pool.get();
        e.label = "y";
        e.value = b;
        b = c.width;
        var f = Vc._pool.get();
        f.label = "w";
        f.value = b;
        b = c.height;
        c = Vc._pool.get();
        c.label = "h";
        c.value = b;
        return a + Ub.getDebugString([d, e, f, c]);
      };
      Z.paintCompoundBitmap = function (a, b, c, d, e, f, k) {
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = 0;
        }
        d.x |= 0;
        d.y |= 0;
        d.width |= 0;
        d.height |= 0;
        var t = c.h["top.left"];
        if (t != null) {
          var n = Z._staticFlxRect2;
          var h = 0;
          var g = 0;
          var l = t.width;
          var L = t.height;
          if (L == null) {
            L = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (h == null) {
            h = 0;
          }
          n.x = h;
          n.y = g;
          n.width = l;
          n.height = L;
          Z.paintBitmapSection(a, b, t, Z._staticFlxRect2, null, 0, f, k);
        }
        var p = c.h["top.right"];
        if (p != null) {
          n = Z._staticFlxRect2;
          h = d.width - p.width;
          g = 0;
          l = p.width;
          L = p.height;
          if (L == null) {
            L = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (h == null) {
            h = 0;
          }
          n.x = h;
          n.y = g;
          n.width = l;
          n.height = L;
          Z.paintBitmapSection(a, b, p, Z._staticFlxRect2, null, 0, f, k);
        }
        var m = c.h.top;
        if (m != null) {
          n = Z._staticFlxRect2;
          h = t.width;
          g = 0;
          l = d.width - t.width - p.width;
          L = m.height;
          if (L == null) {
            L = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (h == null) {
            h = 0;
          }
          n.x = h;
          n.y = g;
          n.width = l;
          n.height = L;
          Z.paintBitmapSection(a, b, m, Z._staticFlxRect2, null, e & 16, f, k);
        }
        var v = c.h["bottom.left"];
        if (v != null) {
          n = Z._staticFlxRect2;
          h = 0;
          g = d.height - v.height;
          l = v.width;
          L = v.height;
          if (L == null) {
            L = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (h == null) {
            h = 0;
          }
          n.x = h;
          n.y = g;
          n.width = l;
          n.height = L;
          Z.paintBitmapSection(a, b, v, Z._staticFlxRect2, null, 0, f, k);
        }
        var q = c.h["bottom.right"];
        if (q != null) {
          n = Z._staticFlxRect2;
          h = d.width - q.width;
          g = d.height - q.height;
          l = q.width;
          L = q.height;
          if (L == null) {
            L = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (h == null) {
            h = 0;
          }
          n.x = h;
          n.y = g;
          n.width = l;
          n.height = L;
          Z.paintBitmapSection(a, b, q, Z._staticFlxRect2, null, 0, f, k);
        }
        var w = c.h.bottom;
        if (w != null) {
          n = Z._staticFlxRect2;
          h = v.width;
          g = d.height - w.height;
          l = d.width - v.width - q.width;
          L = w.height;
          if (L == null) {
            L = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (h == null) {
            h = 0;
          }
          n.x = h;
          n.y = g;
          n.width = l;
          n.height = L;
          Z.paintBitmapSection(a, b, w, Z._staticFlxRect2, null, e & 16, f, k);
        }
        q = c.h.left;
        if (q != null) {
          n = Z._staticFlxRect2;
          h = 0;
          g = t.height;
          l = q.width;
          L = d.height - t.height - v.height;
          if (L == null) {
            L = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (h == null) {
            h = 0;
          }
          n.x = h;
          n.y = g;
          n.width = l;
          n.height = L;
          Z.paintBitmapSection(a, b, q, Z._staticFlxRect2, null, e & 1, f, k);
        }
        var u = c.h.right;
        if (u != null) {
          n = Z._staticFlxRect2;
          h = d.width - u.width;
          g = p.height;
          l = u.width;
          L = d.height - t.height - v.height;
          if (L == null) {
            L = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (h == null) {
            h = 0;
          }
          n.x = h;
          n.y = g;
          n.width = l;
          n.height = L;
          Z.paintBitmapSection(a, b, u, Z._staticFlxRect2, null, e & 1, f, k);
        }
        c = c.h.middle;
        if (c != null) {
          n = Z._staticFlxRect2;
          h = q.width;
          g = m.height;
          l = d.width - q.width - u.width;
          L = d.height - m.height - w.height;
          if (L == null) {
            L = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (h == null) {
            h = 0;
          }
          n.x = h;
          n.y = g;
          n.width = l;
          n.height = L;
          Z.paintBitmapSection(a, b, c, Z._staticFlxRect2, null, e, f, k);
        }
      };
      Z.paintBitmapSection = function (a, b, c, d, e, f, k, t) {
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = t ?? C.getBmp(b);
        }
        c.x |= 0;
        c.y |= 0;
        c.width |= 0;
        c.height |= 0;
        d.x |= 0;
        d.y |= 0;
        d.width |= 0;
        d.height |= 0;
        var h = t = null;
        if (Z.useSectionCache == 1 && b != null) {
          if (Z.sectionCache == null) {
            Z.sectionCache = new ua();
          }
          h = b + "_" + c.x + "_" + c.y + "_" + c.width + "_" + c.height + "_";
          t = Z.sectionCache.h[h];
        }
        if (t == null) {
          t = new T(c.width | 0, c.height | 0, true, 16777215);
          Z._staticRect2.x = c.x;
          Z._staticRect2.y = c.y;
          Z._staticRect2.width = c.width;
          Z._staticRect2.height = c.height;
          t.copyPixels(e, Z._staticRect2, Z._staticPointZero);
          if (Z.useSectionCache == 1 && h != null) {
            Z.sectionCache.h[h] = t;
          }
          Z.bitmapsCreated++;
        }
        if (d.width > 0 && d.height > 0) {
          Z._staticRect2.x = d.x;
          Z._staticRect2.y = d.y;
          Z._staticRect2.width = d.width;
          Z._staticRect2.height = d.height;
          Z.bitmapFillRect(a, Z._staticRect2, t, f, k);
        }
      };
      Z.bitmapFillRect = function (a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        var f = new T(b.width | 0, b.height | 0, true, 0);
        Z._staticMatrix.identity();
        Z._staticRect.x = 0;
        Z._staticRect.y = 0;
        Z._staticRect.width = c.width;
        Z._staticRect.height = c.height;
        if ((d & 16) == 0) {
          Z._staticMatrix.scale(b.width / c.width, 1);
          Z._staticRect.width = b.width;
        }
        if ((d & 1) == 0) {
          Z._staticMatrix.scale(1, b.height / c.height);
          Z._staticRect.height = b.height;
        }
        if (c.width == b.width && c.height == b.height) {
          Z._staticPoint.x = 0;
          Z._staticPoint.y = 0;
          f.copyPixels(c, c.rect, Z._staticPoint);
        } else if (e) {
          f.draw(c, Z._staticMatrix, null, null, null, true);
        } else {
          f.draw(c, Z._staticMatrix, null, null, null, false);
        }
        if (d != 0) {
          if ((d & 16) == 16) {
            Z._staticPoint.x = 0;
            Z._staticPoint.y = 0;
            while (Z._staticPoint.x < b.width) {
              Z._staticPoint.x += Z._staticRect.width;
              f.copyPixels(f, Z._staticRect, Z._staticPoint);
            }
          }
          if ((d & 1) == 1) {
            Z._staticPoint.x = 0;
            Z._staticPoint.y = 0;
            Z._staticRect.width = f.width;
            while (Z._staticPoint.y < b.height) {
              Z._staticPoint.y += Z._staticRect.height;
              f.copyPixels(f, Z._staticRect, Z._staticPoint);
            }
          }
        }
        Z._staticPoint.x = b.x;
        Z._staticPoint.y = b.y;
        a.copyPixels(f, f.rect, Z._staticPoint);
        ca.dispose(f);
      };
      Z.__super__ = Cc;
      Z.prototype = q(Cc.prototype, {
        destroy: function () {
          this.noLongerUsingCachedID(this.paintScale9_id);
          Cc.prototype.destroy.call(this);
        },
        resize: function (a, b) {
          if ((a | 0) < 1) {
            a = 1;
          }
          if ((b | 0) < 1) {
            b = 1;
          }
          var c = this.get_width();
          var d = this.get_height();
          var e = C.applyResize(this.resize_ratio, this.resize_ratio_axis, a, b);
          a = e.x;
          b = e.y;
          var f = e.x | 0;
          var k = e.y | 0;
          if (this._slice9 == null || this._slice9.length != 4) {
            if (this._slice9 != null) {
              h.log.advanced("Invalid 9slice array, expected a length of 4", xa.WARNING, true);
            }
            this._slice9 = [4, 4, 7, 7];
          }
          e = this._asset_id + "_" + this._slice9.join(",") + "_" + f + "x" + k + "_" + this._tile + "_" + v.string(this._smooth);
          if (h.bitmap._cache.h[e] != null) {
            this.loadGraphic(e, false, f, k);
          } else {
            f = new T(a | 0, b | 0);
            Z._staticFlxRect.x = 0;
            Z._staticFlxRect.y = 0;
            Z._staticFlxRect.width = a;
            Z._staticFlxRect.height = b;
            a = this.paintScale9_id;
            if (Z.makePaintScale9Id(this._asset_id, this._slice9, Z._staticFlxRect) != a) {
              this.paintScale9_id = Z.paintScale9(f, this._asset_id, this._slice9, Z._staticFlxRect, this._tile, this._smooth, this._raw_pixels);
              Z.cacheCounter.h[this.paintScale9_id].useCount++;
              this.noLongerUsingCachedID(a);
            }
            this.loadGraphic(f, false, f.width, f.height, false, e);
          }
          c = this.get_width() - c;
          d = this.get_height() - d;
          if (this.resize_point != null) {
            d *= this.resize_point.y;
            this.set_x(this.x - c * this.resize_point.x);
            this.set_y(this.y - d);
          }
        },
        noLongerUsingCachedID: function (a) {
          if (Object.prototype.hasOwnProperty.call(Z.cacheCounter.h, a)) {
            var b = Z.cacheCounter.h[a];
            b.useCount--;
            if (b.useCount <= 0) {
              this.purgeSections(a);
            }
          }
        },
        purgeSections: function (a) {
          var b = Z.cacheCounter.h[a];
          if (b != null) {
            for (var c = 0, d = b.subKeys; c < d.length;) {
              var e = d[c];
              ++c;
              var f = Z.sectionCache;
              if (Object.prototype.hasOwnProperty.call(f.h, e)) {
                delete f.h[e];
              }
            }
            b.subKeys = null;
            f = Z.cacheCounter;
            if (Object.prototype.hasOwnProperty.call(f.h, a)) {
              delete f.h[a];
            }
          }
        },
        __class__: Z
      });
      function Jg(a, b, c, d, e, f, k, t, n, K) {
        if (K == null) {
          K = false;
        }
        if (n == null) {
          n = 100;
        }
        if (t == null) {
          t = 0;
        }
        if (k == null) {
          k = "";
        }
        if (e == null) {
          e = 10;
        }
        if (d == null) {
          d = 100;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.numDivisions = this._maxPercent = 100;
        this.killOnEmpty = false;
        this.fixedPosition = true;
        F.call(this, a, b);
        if (c == null) {
          c = Bd.LEFT_TO_RIGHT;
        }
        this.barWidth = d;
        this.barHeight = e;
        this._filledBarPoint = new lb();
        this._filledBarRect = new da();
        if (h.renderBlit) {
          this._zeroOffset = new lb();
          this._emptyBarRect = new da();
          this.makeGraphic(d, e, 0, true);
        } else {
          a = Ha._pool.get();
          var g = e = d = b = 0;
          if (g == null) {
            g = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.x = b;
          a.y = d;
          a.width = e;
          a.height = g;
          a._inPool = false;
          this._filledFlxRect = a;
        }
        if (f != null) {
          this.parent = f;
          this.parentVariable = k;
        }
        this.set_fillDirection(c);
        this.createFilledBar(-16756480, -16714752, K);
        this.setRange(t, n);
      }
      g["flixel.ui.FlxBar"] = Jg;
      Jg.__name__ = "flixel.ui.FlxBar";
      Jg.__super__ = F;
      Jg.prototype = q(F.prototype, {
        destroy: function () {
          this.positionOffset = ca.put(this.positionOffset);
          if (h.renderTile) {
            this.set_frontFrames(null);
            this._filledFlxRect = ca.put(this._filledFlxRect);
          } else {
            this._zeroOffset = this._emptyBarRect = null;
            this._emptyBar = ca.dispose(this._emptyBar);
            this._filledBar = ca.dispose(this._filledBar);
          }
          this.filledCallback = this.emptyCallback = this.parent = this._filledBarPoint = this._filledBarRect = null;
          F.prototype.destroy.call(this);
        },
        trackParent: function (a, b) {
          this.fixedPosition = false;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          this.positionOffset = b;
          if (Object.prototype.hasOwnProperty.call(this.parent, "scrollFactor")) {
            this.scrollFactor.set_x(this.parent.scrollFactor.x);
            this.scrollFactor.set_y(this.parent.scrollFactor.y);
          }
        },
        setParent: function (a, b, c, d, e) {
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          this.parent = a;
          this.parentVariable = b;
          if (c) {
            this.trackParent(d, e);
          }
          this.updateValueFromParent();
        },
        setRange: function (a, b) {
          if (b <= a) {
            throw G.thrown("FlxBar: max cannot be less than or equal to min");
          }
          this.min = a;
          this.max = b;
          this.range = b - a;
          this.pct = this.range / this._maxPercent;
          this.pxPerPercent = this._fillHorizontal ? this.barWidth / this._maxPercent : this.barHeight / this._maxPercent;
          var c = this.get_value();
          if (isNaN(c)) {
            this.set_value(a);
          } else {
            this.set_value(Math.max(a, Math.min(this.get_value(), b)));
          }
        },
        createFilledBar: function (a, b, c, d) {
          if (d == null) {
            d = -1;
          }
          if (c == null) {
            c = false;
          }
          this.createColoredEmptyBar(a, c, d);
          this.createColoredFilledBar(b, c, d);
          return this;
        },
        createColoredEmptyBar: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = false;
          }
          if (h.renderTile) {
            var d = "empty: " + this.barWidth + "x" + this.barHeight + ":" + ("0x" + w.hex(a >> 24 & 255, 2) + w.hex(a >> 16 & 255, 2) + w.hex(a >> 8 & 255, 2) + w.hex(a & 255, 2));
            if (b) {
              d += ",border: " + ("0x" + w.hex(c >> 24 & 255, 2) + w.hex(c >> 16 & 255, 2) + w.hex(c >> 8 & 255, 2) + w.hex(c & 255, 2));
            }
            if (h.bitmap._cache.h[d] == null) {
              if (b) {
                b = new T(this.barWidth, this.barHeight, true, c);
                b.fillRect(new da(1, 1, this.barWidth - 2, this.barHeight - 2), a);
              } else {
                b = new T(this.barWidth, this.barHeight, true, a);
              }
              h.bitmap.add(b, false, d);
            }
            this.set_frames(h.bitmap._cache.h[d].get_imageFrame());
          } else {
            if (b) {
              this._emptyBar = new T(this.barWidth, this.barHeight, true, c);
              this._emptyBar.fillRect(new da(1, 1, this.barWidth - 2, this.barHeight - 2), a);
            } else {
              this._emptyBar = new T(this.barWidth, this.barHeight, true, a);
            }
            this._emptyBarRect.setTo(0, 0, this.barWidth, this.barHeight);
            this.updateEmptyBar();
          }
          return this;
        },
        createColoredFilledBar: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = false;
          }
          if (h.renderTile) {
            var d = "filled: " + this.barWidth + "x" + this.barHeight + ":" + ("0x" + w.hex(a >> 24 & 255, 2) + w.hex(a >> 16 & 255, 2) + w.hex(a >> 8 & 255, 2) + w.hex(a & 255, 2));
            if (b) {
              d += ",border: " + ("0x" + w.hex(c >> 24 & 255, 2) + w.hex(c >> 16 & 255, 2) + w.hex(c >> 8 & 255, 2) + w.hex(c & 255, 2));
            }
            if (h.bitmap._cache.h[d] == null) {
              if (b) {
                b = new T(this.barWidth, this.barHeight, true, c);
                b.fillRect(new da(1, 1, this.barWidth - 2, this.barHeight - 2), a);
              } else {
                b = new T(this.barWidth, this.barHeight, true, a);
              }
              h.bitmap.add(b, false, d);
            }
            this.set_frontFrames(h.bitmap._cache.h[d].get_imageFrame());
          } else {
            if (b) {
              this._filledBar = new T(this.barWidth, this.barHeight, true, c);
              this._filledBar.fillRect(new da(1, 1, this.barWidth - 2, this.barHeight - 2), a);
            } else {
              this._filledBar = new T(this.barWidth, this.barHeight, true, a);
            }
            this._filledBarRect.setTo(0, 0, this.barWidth, this.barHeight);
            this.updateFilledBar();
          }
          return this;
        },
        createGradientBar: function (a, b, c, d, e, f) {
          if (f == null) {
            f = -1;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 180;
          }
          if (c == null) {
            c = 1;
          }
          this.createGradientEmptyBar(a, c, d, e, f);
          this.createGradientFilledBar(b, c, d, e, f);
          return this;
        },
        createGradientEmptyBar: function (a, b, c, d, e) {
          if (e == null) {
            e = -1;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 180;
          }
          if (b == null) {
            b = 1;
          }
          if (h.renderTile) {
            var f = "Gradient:" + this.barWidth + "x" + this.barHeight + ",colors:[";
            for (var k = 0; k < a.length;) {
              var t = a[k];
              ++k;
              f += "0x" + w.hex(t >> 24 & 255, 2) + w.hex(t >> 16 & 255, 2) + w.hex(t >> 8 & 255, 2) + w.hex(t & 255, 2) + ",";
            }
            f += "],chunkSize: " + b + ",rotation: " + c;
            if (d) {
              f += ",border: " + ("0x" + w.hex(e >> 24 & 255, 2) + w.hex(e >> 16 & 255, 2) + w.hex(e >> 8 & 255, 2) + w.hex(e & 255, 2));
            }
            if (h.bitmap._cache.h[f] == null) {
              if (d) {
                d = new T(this.barWidth, this.barHeight, true, e);
                sd.overlayGradientOnBitmapData(d, this.barWidth - 2, this.barHeight - 2, a, 1, 1, b, c);
              } else {
                d = sd.createGradientBitmapData(this.barWidth, this.barHeight, a, b, c);
              }
              h.bitmap.add(d, false, f);
            }
            this.set_frames(h.bitmap._cache.h[f].get_imageFrame());
          } else {
            if (d) {
              this._emptyBar = new T(this.barWidth, this.barHeight, true, e);
              sd.overlayGradientOnBitmapData(this._emptyBar, this.barWidth - 2, this.barHeight - 2, a, 1, 1, b, c);
            } else {
              this._emptyBar = sd.createGradientBitmapData(this.barWidth, this.barHeight, a, b, c);
            }
            this._emptyBarRect.setTo(0, 0, this.barWidth, this.barHeight);
            this.updateEmptyBar();
          }
          return this;
        },
        createGradientFilledBar: function (a, b, c, d, e) {
          if (e == null) {
            e = -1;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 180;
          }
          if (b == null) {
            b = 1;
          }
          if (h.renderTile) {
            var f = "Gradient:" + this.barWidth + "x" + this.barHeight + ",colors:[";
            for (var k = 0; k < a.length;) {
              var t = a[k];
              ++k;
              f += "0x" + w.hex(t >> 24 & 255, 2) + w.hex(t >> 16 & 255, 2) + w.hex(t >> 8 & 255, 2) + w.hex(t & 255, 2) + ",";
            }
            f += "],chunkSize: " + b + ",rotation: " + c;
            if (d) {
              f += ",border: " + ("0x" + w.hex(e >> 24 & 255, 2) + w.hex(e >> 16 & 255, 2) + w.hex(e >> 8 & 255, 2) + w.hex(e & 255, 2));
            }
            if (h.bitmap._cache.h[f] == null) {
              if (d) {
                d = new T(this.barWidth, this.barHeight, true, e);
                sd.overlayGradientOnBitmapData(d, this.barWidth - 2, this.barHeight - 2, a, 1, 1, b, c);
              } else {
                d = sd.createGradientBitmapData(this.barWidth, this.barHeight, a, b, c);
              }
              h.bitmap.add(d, false, f);
            }
            this.set_frontFrames(h.bitmap._cache.h[f].get_imageFrame());
          } else {
            if (d) {
              this._filledBar = new T(this.barWidth, this.barHeight, true, e);
              sd.overlayGradientOnBitmapData(this._filledBar, this.barWidth - 2, this.barHeight - 2, a, 1, 1, b, c);
            } else {
              this._filledBar = sd.createGradientBitmapData(this.barWidth, this.barHeight, a, b, c);
            }
            this._filledBarRect.setTo(0, 0, this.barWidth, this.barHeight);
            this.updateFilledBar();
          }
          return this;
        },
        createImageBar: function (a, b, c, d) {
          if (d == null) {
            d = -16711936;
          }
          if (c == null) {
            c = -16777216;
          }
          this.createImageEmptyBar(a, c);
          this.createImageFilledBar(b, d);
          return this;
        },
        createImageEmptyBar: function (a, b) {
          if (b == null) {
            b = -16777216;
          }
          if (a != null) {
            a = h.bitmap.add(a);
            if (h.renderTile) {
              this.set_frames(a.get_imageFrame());
            } else {
              this._emptyBar = a.bitmap.clone();
              this.barWidth = this._emptyBar.width;
              this.barHeight = this._emptyBar.height;
              this._emptyBarRect.setTo(0, 0, this.barWidth, this.barHeight);
              if (this.graphic == null || this.frame.sourceSize.x != this.barWidth || this.frame.sourceSize.y != this.barHeight) {
                this.makeGraphic(this.barWidth, this.barHeight, 0, true);
              }
              this.updateEmptyBar();
            }
          } else {
            this.createColoredEmptyBar(b);
          }
          return this;
        },
        createImageFilledBar: function (a, b) {
          if (b == null) {
            b = -16711936;
          }
          if (a != null) {
            a = h.bitmap.add(a);
            if (h.renderTile) {
              this.set_frontFrames(a.get_imageFrame());
            } else {
              this._filledBar = a.bitmap.clone();
              this._filledBarRect.setTo(0, 0, this.barWidth, this.barHeight);
              if (this.graphic == null || this.frame.sourceSize.x != this.barWidth || this.frame.sourceSize.y != this.barHeight) {
                this.makeGraphic(this.barWidth, this.barHeight, 0, true);
              }
              this.pxPerPercent = this._fillHorizontal ? this.barWidth / this._maxPercent : this.barHeight / this._maxPercent;
              this.updateFilledBar();
            }
          } else {
            this.createColoredFilledBar(b);
          }
          return this;
        },
        set_fillDirection: function (a) {
          this.fillDirection = a;
          switch (a._hx_index) {
            case 0:
            case 1:
            case 4:
            case 5:
              this._fillHorizontal = true;
              break;
            case 2:
            case 3:
            case 6:
            case 7:
              this._fillHorizontal = false;
          }
          return this.fillDirection;
        },
        updateValueFromParent: function () {
          this.set_value(ja.getProperty(this.parent, this.parentVariable));
        },
        updateBar: function () {
          this.updateEmptyBar();
          this.updateFilledBar();
        },
        updateEmptyBar: function () {
          if (h.renderBlit) {
            this.get_pixels().copyPixels(this._emptyBar, this._emptyBarRect, this._zeroOffset);
            this.dirty = true;
          }
        },
        updateFilledBar: function () {
          this._filledBarRect.width = this.barWidth;
          this._filledBarRect.height = this.barHeight;
          var a = (this.get_value() - this.min) / this.range;
          var b = a * this._maxPercent;
          var c = this._fillHorizontal ? this.barWidth : this.barHeight;
          var d = c / this.numDivisions;
          a = Math.round((a * c / d | 0) * d);
          if (this._fillHorizontal) {
            this._filledBarRect.width = a | 0;
          } else {
            this._filledBarRect.height = a | 0;
          }
          if (b > 0) {
            switch (this.fillDirection._hx_index) {
              case 1:
                this._filledBarRect.x = this.barWidth - this._filledBarRect.width;
                this._filledBarPoint.x = this.barWidth - this._filledBarRect.width;
                break;
              case 3:
                this._filledBarRect.y = this.barHeight - this._filledBarRect.height;
                this._filledBarPoint.y = this.barHeight - this._filledBarRect.height;
                break;
              case 4:
                this._filledBarRect.x = this.barWidth / 2 - this._filledBarRect.width / 2 | 0;
                this._filledBarPoint.x = this.barWidth / 2 - this._filledBarRect.width / 2 | 0;
                break;
              case 5:
                this._filledBarRect.width = c - a | 0;
                this._filledBarPoint.x = (this.barWidth - this._filledBarRect.width) / 2 | 0;
                break;
              case 6:
                this._filledBarRect.y = this.barHeight / 2 - this._filledBarRect.height / 2 | 0;
                this._filledBarPoint.y = this.barHeight / 2 - this._filledBarRect.height / 2 | 0;
                break;
              case 7:
                this._filledBarRect.height = c - a | 0;
                this._filledBarPoint.y = (this.barHeight - this._filledBarRect.height) / 2 | 0;
            }
            if (h.renderBlit) {
              this.get_pixels().copyPixels(this._filledBar, this._filledBarRect, this._filledBarPoint, null, null, true);
            } else if (this.get_frontFrames() != null) {
              c = this._filledFlxRect;
              a = this._filledBarRect;
              c.x = a.x;
              c.y = a.y;
              c.width = a.width;
              c.height = a.height;
              c.x = Math.round(c.x);
              c.y = Math.round(c.y);
              c.width = Math.round(c.width);
              c.height = Math.round(c.height);
              if ((b | 0) > 0) {
                this._frontFrame = this.get_frontFrames().get_frame().clipTo(this._filledFlxRect, this._frontFrame);
              }
            }
          }
          if (h.renderBlit) {
            this.dirty = true;
          }
        },
        update: function (a) {
          if (this.parent != null) {
            if (ja.getProperty(this.parent, this.parentVariable) != this.get_value()) {
              this.updateValueFromParent();
            }
            if (!this.fixedPosition) {
              this.set_x(this.parent.x + this.positionOffset.x);
              this.set_y(this.parent.y + this.positionOffset.y);
            }
          }
          F.prototype.update.call(this, a);
        },
        draw: function () {
          F.prototype.draw.call(this);
          if (h.renderTile && this.alpha != 0 && this.get_percent() > 0 && this._frontFrame.type != 2) {
            for (var a = 0, b = this.getCamerasLegacy(); a < b.length;) {
              var c = b[a];
              ++a;
              if (c.visible && c.exists && this.isOnScreen(c)) {
                var d = this.flipX != this._frame.flipX;
                var e = this.flipY != this._frame.flipY;
                this._frontFrame.prepareMatrix(this._matrix, 0, this.animation._curAnim != null ? d != this.animation._curAnim.flipX : d, this.animation._curAnim != null ? e != this.animation._curAnim.flipY : e);
                this._matrix.translate(-this.origin.x, -this.origin.y);
                this._matrix.scale(this.scale.x, this.scale.y);
                if (this.bakedRotationAngle <= 0 && (this._angleChanged && (d = Math.PI / 180 * this.angle, this._sinAngle = Math.sin(d), this._cosAngle = Math.cos(d), this._angleChanged = false), this.angle != 0)) {
                  d = this._matrix;
                  e = this._cosAngle;
                  var f = this._sinAngle;
                  var k = d.a * e - d.b * f;
                  d.b = d.a * f + d.b * e;
                  d.a = k;
                  k = d.c * e - d.d * f;
                  d.d = d.c * f + d.d * e;
                  d.c = k;
                  k = d.tx * e - d.ty * f;
                  d.ty = d.tx * f + d.ty * e;
                  d.tx = k;
                }
                d = this.getScreenPosition(this._point, c);
                e = this.offset;
                f = e.x;
                k = e.y;
                if (k == null) {
                  k = 0;
                }
                if (f == null) {
                  f = 0;
                }
                d.set_x(d.x - f);
                d.set_y(d.y - k);
                d = e;
                if (d._weak) {
                  d.put();
                }
                d = this._point;
                e = this.origin.x;
                f = this.origin.y;
                if (f == null) {
                  f = 0;
                }
                if (e == null) {
                  e = 0;
                }
                d.set_x(d.x + e);
                d.set_y(d.y + f);
                this._matrix.translate(this._point.x, this._point.y);
                if (this.isPixelPerfectRender(c)) {
                  this._matrix.tx = Math.floor(this._matrix.tx);
                  this._matrix.ty = Math.floor(this._matrix.ty);
                }
                c.drawPixels(this._frontFrame, null, this._matrix, this.colorTransform, this.blend, this.antialiasing, this.shader);
              }
            }
          }
        },
        set_pixels: function (a) {
          if (h.renderTile) {
            return a;
          } else {
            return F.prototype.set_pixels.call(this, a);
          }
        },
        toString: function () {
          var a = this.min;
          var b = Vc._pool.get();
          b.label = "min";
          b.value = a;
          a = this.max;
          var c = Vc._pool.get();
          c.label = "max";
          c.value = a;
          a = this.range;
          var d = Vc._pool.get();
          d.label = "range";
          d.value = a;
          a = this.pct;
          var e = Vc._pool.get();
          e.label = "%";
          e.value = a;
          a = this.pxPerPercent;
          var f = Vc._pool.get();
          f.label = "px/%";
          f.value = a;
          a = this.get_value();
          var k = Vc._pool.get();
          k.label = "value";
          k.value = a;
          return Ub.getDebugString([b, c, d, e, f, k]);
        },
        get_percent: function () {
          if (this.get_value() > this.max) {
            return this._maxPercent;
          } else {
            return Math.floor((this.get_value() - this.min) / this.range * this._maxPercent);
          }
        },
        set_value: function (a) {
          this.value = Math.max(this.min, Math.min(a, this.max));
          if (this.get_value() == this.min && this.emptyCallback != null) {
            this.emptyCallback();
          }
          if (this.get_value() == this.max && this.filledCallback != null) {
            this.filledCallback();
          }
          if (this.get_value() == this.min && this.killOnEmpty) {
            this.kill();
          }
          this.updateBar();
          return a;
        },
        get_value: function () {
          return this.value;
        },
        set_numDivisions: function (a) {
          this.numDivisions = a > 0 ? a : 100;
          this.updateFilledBar();
          return a;
        },
        get_frontFrames: function () {
          if (h.renderTile) {
            return this.frontFrames;
          } else {
            return null;
          }
        },
        set_frontFrames: function (a) {
          if (h.renderTile) {
            if (a != null) {
              a.parent.incrementUseCount();
            }
            if (this.get_frontFrames() != null) {
              this.get_frontFrames().parent.decrementUseCount();
            }
            this.frontFrames = a;
            this._frontFrame = a != null ? a.get_frame().copyTo(this._frontFrame) : ca.destroy(this._frontFrame);
          } else {
            this.createImageFilledBar(a.get_frame().paint());
          }
          return a;
        },
        __class__: Jg,
        __properties__: q(F.prototype.__properties__, {
          set_fillDirection: "set_fillDirection",
          set_frontFrames: "set_frontFrames",
          get_frontFrames: "get_frontFrames",
          set_numDivisions: "set_numDivisions",
          set_value: "set_value",
          get_value: "get_value",
          get_percent: "get_percent"
        })
      });
      function Ke() {}
      g["flixel.addons.ui.interfaces.IHasParams"] = Ke;
      Ke.__name__ = "flixel.addons.ui.interfaces.IHasParams";
      Ke.__isInterface__ = true;
      Ke.prototype = {
        __class__: Ke,
        __properties__: {
          set_params: "set_params"
        }
      };
      function $h(a, b, c, d, e, f, k, t, h, K) {
        if (K == null) {
          K = false;
        }
        if (h == null) {
          h = 100;
        }
        if (t == null) {
          t = 0;
        }
        if (k == null) {
          k = "";
        }
        if (e == null) {
          e = 10;
        }
        if (d == null) {
          d = 100;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        Jg.call(this, a, b, c, d, e, f, k, t, h, K);
      }
      g["flixel.addons.ui.FlxUIBar"] = $h;
      $h.__name__ = "flixel.addons.ui.FlxUIBar";
      $h.__interfaces__ = [Ke, td, cd];
      $h.__super__ = Jg;
      $h.prototype = q(Jg.prototype, {
        set_style: function (a) {
          this.style = a;
          this.resize(this.barWidth, this.barHeight);
          return this.style;
        },
        resize: function (a, b) {
          this.set_width(a);
          this.set_height(b);
          this.barWidth = this.get_width() | 0;
          this.barHeight = this.get_height() | 0;
          if (h.renderBlit) {
            this.makeGraphic(this.barWidth, this.barHeight, 0, true);
          }
          a = this.style.borderColor != null;
          b = this.style.emptyColor == null ? -16777216 : this.style.emptyColor;
          var c = this.style.filledColor == null ? -65536 : this.style.filledColor;
          var d = this.style.borderColor == null ? -16777216 : this.style.borderColor;
          if (this.style.filledColor != null) {
            this.createFilledBar(b, c, a, d);
          }
          if (this.style.filledColors != null) {
            this.createGradientBar(this.style.emptyColors == null ? [-16777216] : this.style.emptyColors, this.style.filledColors == null ? [-65536] : this.style.filledColors, this.style.chunkSize == null ? 1 : this.style.chunkSize, this.style.emptyImgSrc == null ? 180 : this.style.gradRotation, a, d);
          }
          if (this.style.filledImgSrc != "") {
            this.createImageBar(this.style.emptyImgSrc, this.style.filledImgSrc, b, c);
          }
          this.setRange(this.min, this.max);
          this.set_value(this.get_value());
        },
        set_params: function (a) {
          return this.params = a;
        },
        __class__: $h,
        __properties__: q(Jg.prototype.__properties__, {
          set_params: "set_params",
          set_style: "set_style"
        })
      });
      function sh() {}
      g["flixel.input.IFlxInput"] = sh;
      sh.__name__ = "flixel.input.IFlxInput";
      sh.__isInterface__ = true;
      sh.prototype = {
        __class__: sh,
        __properties__: {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased"
        }
      };
      function dd(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.lastStatus = -1;
        this.maxInputMovement = Infinity;
        this.mouseButtons = [-1];
        this.allowSwiping = true;
        this.statusAnimations = ["normal", "highlight", "pressed", "disabled"];
        this.labelAlphas = [0.8, 1, 0.5, 0.3];
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var f = W.pool.get().set(d, e);
        f._inPool = false;
        e = d = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var k = W.pool.get().set(d, e);
        k._inPool = false;
        d = 0;
        e = 1;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var t = d;
        if (e == null) {
          e = 0;
        }
        if (t == null) {
          t = 0;
        }
        t = W.pool.get().set(t, e);
        t._inPool = false;
        e = d = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        e = W.pool.get().set(d, e);
        e._inPool = false;
        this.labelOffsets = [f, k, t, e];
        F.call(this, a, b);
        this.loadDefaultGraphic();
        this.onUp = new wf(c);
        this.onDown = new wf();
        this.onOver = new wf();
        this.onOut = new wf();
        this.set_status(0);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        oa.get_current().stage.addEventListener("mouseUp", m(this, this.onUpEventListener));
        this.input = new ke(0);
      }
      g["flixel.ui.FlxTypedButton"] = dd;
      dd.__name__ = "flixel.ui.FlxTypedButton";
      dd.__interfaces__ = [sh];
      dd.__super__ = F;
      dd.prototype = q(F.prototype, {
        graphicLoaded: function () {
          F.prototype.graphicLoaded.call(this);
          this.setupAnimation("normal", 0);
          this.setupAnimation("highlight", 1);
          this.setupAnimation("pressed", 2);
          this.setupAnimation("disabled", 3);
        },
        loadDefaultGraphic: function () {
          this.loadGraphic("flixel/images/ui/button.png", true, 80, 20);
        },
        setupAnimation: function (a, b) {
          b = Math.min(b, this.animation._sprite.get_numFrames() - 1) | 0;
          this.animation.add(a, [b]);
        },
        destroy: function () {
          this.set_label(ca.destroy(this.label));
          this._spriteLabel = null;
          this.onUp = ca.destroy(this.onUp);
          this.onDown = ca.destroy(this.onDown);
          this.onOver = ca.destroy(this.onOver);
          this.onOut = ca.destroy(this.onOut);
          this.labelOffsets = ca.putArray(this.labelOffsets);
          this.input = this.currentInput = this.labelAlphas = null;
          oa.get_current().stage.removeEventListener("mouseUp", m(this, this.onUpEventListener));
          F.prototype.destroy.call(this);
        },
        update: function (a) {
          F.prototype.update.call(this, a);
          if (this.visible) {
            this.updateButton();
            if (this.lastStatus != this.status) {
              this.updateStatusAnimation();
              this.lastStatus = this.status;
            }
          }
          this.input.update();
        },
        updateStatusAnimation: function () {
          this.animation.play(this.statusAnimations[this.status]);
        },
        draw: function () {
          F.prototype.draw.call(this);
          if (this._spriteLabel != null && this._spriteLabel.visible) {
            this._spriteLabel.set_cameras(this._cameras);
            this._spriteLabel.draw();
          }
        },
        updateButton: function () {
          if (this.status != 3) {
            var a = this.checkMouseOverlap();
            a ||= this.checkTouchOverlap();
            if (this.currentInput != null && this.currentInput.get_justReleased() && a) {
              this.onUpHandler();
            }
            if (this.status != 0 && (!a || this.currentInput != null && this.currentInput.get_justReleased())) {
              this.onOutHandler();
            }
          }
        },
        checkMouseOverlap: function () {
          var a = false;
          for (var b = 0, c = this.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            for (var e = 0, f = this.mouseButtons; e < f.length;) {
              var k = f[e];
              ++e;
              k = cf.getByID(k);
              if (k != null && this.checkInput(h.mouse, k, k.justPressedPosition, d)) {
                a = true;
              }
            }
          }
          return a;
        },
        checkTouchOverlap: function () {
          var a = false;
          for (var b = 0, c = this.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            for (var e = 0, f = h.touches.list; e < f.length;) {
              var k = f[e];
              ++e;
              if (this.checkInput(k, k, k.justPressedPosition, d)) {
                a = true;
              }
            }
          }
          return a;
        },
        checkInput: function (a, b, c, d) {
          if (this.maxInputMovement != Infinity) {
            var e = 0;
            var f = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            f = W.pool.get().set(e, f);
            f._inPool = false;
            f._weak = true;
            c = zk.distanceTo(c, a.getScreenPosition(null, f)) > this.maxInputMovement;
          } else {
            c = false;
          }
          if (c && b == this.currentInput) {
            this.currentInput = null;
          } else if (this.overlapsPoint(a.getWorldPosition(d, this._point), true, d)) {
            this.updateStatus(b);
            return true;
          }
          return false;
        },
        updateStatus: function (a) {
          if (a.get_justPressed()) {
            this.currentInput = a;
            this.onDownHandler();
          } else if (this.status == 0) {
            if (this.allowSwiping && a.get_pressed()) {
              this.onDownHandler();
            } else {
              this.onOverHandler();
            }
          }
        },
        updateLabelPosition: function () {
          if (this._spriteLabel != null) {
            this._spriteLabel.set_x((this.pixelPerfectPosition ? Math.floor(this.x) : this.x) + this.labelOffsets[this.status].x);
            this._spriteLabel.set_y((this.pixelPerfectPosition ? Math.floor(this.y) : this.y) + this.labelOffsets[this.status].y);
          }
        },
        updateLabelAlpha: function () {
          if (this._spriteLabel != null && this.labelAlphas.length > this.status) {
            this._spriteLabel.set_alpha(this.alpha * this.labelAlphas[this.status]);
          }
        },
        onUpEventListener: function (a) {
          if (this.visible && this.exists && this.active && this.status == 2) {
            this.onUpHandler();
          }
        },
        onUpHandler: function () {
          this.set_status(1);
          this.input.release();
          this.currentInput = null;
          var a = this.onUp;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        onDownHandler: function () {
          this.set_status(2);
          this.input.press();
          var a = this.onDown;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        onOverHandler: function () {
          if (h.mouse.enabled) {
            this.set_status(1);
            var a = this.onOver;
            if (a.callback != null) {
              a.callback();
            }
            if (a.sound != null) {
              a.sound.play(true);
            }
          } else {
            this.set_status(0);
          }
        },
        onOutHandler: function () {
          this.set_status(0);
          this.input.release();
          var a = this.onOut;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        set_label: function (a) {
          if (a != null) {
            a.scrollFactor.put();
            a.scrollFactor = this.scrollFactor;
          }
          this._spriteLabel = this.label = a;
          this.updateLabelPosition();
          return a;
        },
        set_status: function (a) {
          this.status = a;
          this.updateLabelAlpha();
          return this.status;
        },
        set_alpha: function (a) {
          F.prototype.set_alpha.call(this, a);
          this.updateLabelAlpha();
          return this.alpha;
        },
        set_x: function (a) {
          F.prototype.set_x.call(this, a);
          this.updateLabelPosition();
          return this.x;
        },
        set_y: function (a) {
          F.prototype.set_y.call(this, a);
          this.updateLabelPosition();
          return this.y;
        },
        get_justReleased: function () {
          return this.input.current == -1;
        },
        get_pressed: function () {
          var a = this.input;
          if (a.current != 1) {
            return a.current == 2;
          } else {
            return true;
          }
        },
        get_justPressed: function () {
          return this.input.current == 2;
        },
        __class__: dd,
        __properties__: q(F.prototype.__properties__, {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased",
          set_status: "set_status",
          set_label: "set_label"
        })
      });
      function ij() {}
      g["flixel.addons.ui.interfaces.ICursorPointable"] = ij;
      ij.__name__ = "flixel.addons.ui.interfaces.ICursorPointable";
      ij.__isInterface__ = true;
      function vf() {}
      g["flixel.addons.ui.interfaces.IFlxUIClickable"] = vf;
      vf.__name__ = "flixel.addons.ui.interfaces.IFlxUIClickable";
      vf.__isInterface__ = true;
      vf.prototype = {
        __class__: vf,
        __properties__: {
          set_skipButtonUpdate: "set_skipButtonUpdate"
        }
      };
      function Kg() {}
      g["flixel.addons.ui.interfaces.IFlxUIButton"] = Kg;
      Kg.__name__ = "flixel.addons.ui.interfaces.IFlxUIButton";
      Kg.__isInterface__ = true;
      Kg.__interfaces__ = [rb, Ke, td];
      Kg.prototype = {
        __class__: Kg,
        __properties__: {
          get_justMousedOut: "get_justMousedOut",
          get_mouseIsOut: "get_mouseIsOut",
          get_mouseIsOver: "get_mouseIsOver",
          get_justMousedOver: "get_justMousedOver",
          set_toggle_label: "set_toggle_label",
          set_toggled: "set_toggled"
        }
      };
      function Jc(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._centerLabelOffset = null;
        this._src_w = this._src_h = 0;
        this._no_graphic = false;
        this._assetsToCleanup = [];
        this._autoCleanup = true;
        this.skipButtonUpdate = this.autoResizeLabel = false;
        this.up_visible = this.over_visible = this.down_visible = this.up_toggle_visible = this.over_toggle_visible = this.down_toggle_visible = this.round_labels = true;
        this.up_color = this.over_color = this.down_color = this.up_toggle_color = this.over_toggle_color = this.down_toggle_color = null;
        this.broadcastToFlxUI = true;
        this.has_toggle = this.toggled = false;
        this.tile = 0;
        this.resize_point = null;
        this.resize_ratio_axis = 1;
        this.resize_ratio = -1;
        dd.call(this, a, b, c);
        a = b = 0;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = W.pool.get().set(b, a);
        a._inPool = false;
        this._centerLabelOffset = a;
        this.statusAnimations[3] = "normal_toggled";
        this.statusAnimations[4] = "highlight_toggled";
        this.statusAnimations[5] = "pressed_toggled";
        a = [];
        a.push(1);
        a.push(1);
        a.push(1);
        this.labelAlphas = a;
        this.inputOver = new ke(0);
      }
      g["flixel.addons.ui.FlxUITypedButton"] = Jc;
      Jc.__name__ = "flixel.addons.ui.FlxUITypedButton";
      Jc.__interfaces__ = [ij, Ke, vf, td, cd, Kg];
      Jc.__super__ = dd;
      Jc.prototype = q(dd.prototype, {
        set_toggled: function (a) {
          this.toggled = a;
          this.updateStatusAnimation();
          return this.toggled;
        },
        get_justMousedOver: function () {
          return this.inputOver.current == 2;
        },
        get_justMousedOut: function () {
          return this.inputOver.current == -1;
        },
        get_mouseIsOver: function () {
          var a = this.inputOver;
          if (a.current != 1) {
            return a.current == 2;
          } else {
            return true;
          }
        },
        get_mouseIsOut: function () {
          var a = this.inputOver;
          if (a.current != 0) {
            return a.current == -1;
          } else {
            return true;
          }
        },
        set_toggle_label: function (a) {
          if (this.label != null) {
            return this.toggle_label = a;
          } else {
            return null;
          }
        },
        set_visible: function (a) {
          if (this.visible && a == 0) {
            this.inputOver.release();
          }
          return dd.prototype.set_visible.call(this, a);
        },
        set_skipButtonUpdate: function (a) {
          return this.skipButtonUpdate = a;
        },
        set_params: function (a) {
          return this.params = a;
        },
        destroy: function () {
          this.resize_point = ca.put(this.resize_point);
          dd.prototype.destroy.call(this);
        },
        graphicLoaded: function () {
          dd.prototype.graphicLoaded.call(this);
          this.setupAnimation("normal_toggled", 3);
          this.setupAnimation("highlight_toggled", 4);
          this.setupAnimation("pressed_toggled", 5);
          if (this._autoCleanup) {
            this.cleanup();
          }
        },
        copyStyle: function (a) {
          this.up_color = a.up_color;
          this.over_color = a.over_color;
          this.down_color = a.down_color;
          this.up_toggle_color = a.up_toggle_color;
          this.down_toggle_color = this.over_toggle_color = a.over_toggle_color;
          this.up_visible = a.up_visible;
          this.over_visible = a.over_visible;
          this.down_visible = a.down_visible;
          this.up_toggle_visible = a.up_toggle_visible;
          this.over_toggle_visible = a.over_toggle_visible;
          this.down_toggle_visible = a.down_toggle_visible;
          var b = a.getCenterLabelOffset();
          this.setCenterLabelOffset(b.x, b.y);
          for (var c = b = 0, d = a.labelOffsets; c < d.length;) {
            var e = d[c];
            ++c;
            this.labelOffsets[b].set_x(e.x);
            this.labelOffsets[b].set_y(e.y);
            ++b;
          }
          c = b = 0;
          for (d = a.labelAlphas; c < d.length;) {
            a = d[c];
            ++c;
            this.labelAlphas[b] = a;
            ++b;
          }
        },
        setAllLabelOffsets: function (a, b) {
          for (var c = 0, d = this.labelOffsets; c < d.length;) {
            var e = d[c];
            ++c;
            var f = a;
            var k = b;
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            e.set_x(f);
            e.set_y(k);
          }
        },
        update: function (a) {
          dd.prototype.update.call(this, a);
          if (this.status == 0) {
            a = this.inputOver;
            a = a.current == 1 || a.current == 2;
          } else {
            a = false;
          }
          if (a && this.input.current == -1 == 0) {
            this.inputOver.release();
          }
          this.inputOver.update();
          if (this.label != null) {
            a = this.fetchAndShowCorrectLabel();
            a.set_x(this.x + this._centerLabelOffset.x + this.labelOffsets[this.status].x);
            a.set_y(this.y + this._centerLabelOffset.y + this.labelOffsets[this.status].y);
            if (this.round_labels) {
              a.set_x(a.x + 0.5 | 0);
              a.set_y(a.y + 0.5 | 0);
            }
            a.scrollFactor = this.scrollFactor;
          }
        },
        updateStatusAnimation: function () {
          if (this.has_toggle && this.toggled) {
            this.animation.play(this.statusAnimations[this.status + 3]);
          } else {
            dd.prototype.updateStatusAnimation.call(this);
          }
        },
        draw: function () {
          dd.prototype.draw.call(this);
          if (this.has_toggle && this.toggled && this.toggle_label != null && this.toggle_label.visible == 1) {
            this.toggle_label._cameras = this._cameras;
            this.toggle_label.draw();
          }
        },
        resize: function (a, b) {
          this.doResize(a, b);
        },
        doResize: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          var d = this.get_width();
          var e = this.get_height();
          var f = 0;
          var k = 0;
          if (this.label != null) {
            f = this.get_width() - this._spriteLabel.get_width();
            k = this.get_height() - this._spriteLabel.get_height();
          }
          if (a <= 0) {
            a = 80;
          }
          if (b <= 0) {
            b = 20;
          }
          if (c) {
            if (this._slice9_assets != null) {
              this.loadGraphicSlice9(this._slice9_assets, a | 0, b | 0, this._slice9_arrays, this.tile, this.resize_ratio, this.has_toggle, this._src_w, this._src_h, this._frame_indeces);
            } else if (this._no_graphic) {
              c = this.has_toggle ? new T(a | 0, b * 6 | 0, true, 0) : new T(a | 0, b * 3 | 0, true, 0);
              this.loadGraphicsUpOverDown(c);
            } else {
              this.loadGraphicSlice9(null, a | 0, b | 0, null, this.tile);
            }
          }
          if (this.label != null && this.autoResizeLabel && va.__implements(this.label, cd)) {
            this.label.resize(a - f, b - k);
          }
          this.autoCenterLabel();
          a = this.get_width() - d;
          e = this.get_height() - e;
          if (this.resize_point != null) {
            e *= this.resize_point.y;
            this.set_x(this.x - a * this.resize_point.x);
            this.set_y(this.y - e);
          }
        },
        getBmp: function (a) {
          return C.getBmp(a);
        },
        loadGraphicsUpOverDown: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          this._slice9_arrays = this._slice9_assets = null;
          this.resize_ratio = -1;
          if (b) {
            this.has_toggle = true;
          }
          b = null;
          if (a instanceof T) {
            b = a;
          } else if (typeof a == "string") {
            b = this.getBmp(a);
          }
          a = this.grabButtonFrame(b, 0, this.has_toggle, 0, 0, c);
          var d = this.grabButtonFrame(b, 1, this.has_toggle, 0, 0, c);
          var e = this.grabButtonFrame(b, 2, this.has_toggle, 0, 0, c);
          var f = c;
          if (c == null || c == "" || h.bitmap._cache.h[c] != null == 0) {
            f = this.assembleButtonFrames(a, d, e);
          }
          if (this.has_toggle) {
            f = this.assembleButtonFrames(a, d, e);
            a = this.grabButtonFrame(b, 3, true, 0, 0, c);
            d = this.grabButtonFrame(b, 4, true, 0, 0, c);
            e = this.grabButtonFrame(b, 5, true, 0, 0, c);
            b = this.assembleButtonFrames(a, d, e);
            d = this.combineToggleBitmaps(f, b);
            ca.dispose(f);
            ca.dispose(b);
            this.loadGraphic(d, true, a.width, a.height, false, c);
          } else {
            this.loadGraphic(f, true, a.width, a.height, false, c);
          }
        },
        loadGraphicSlice9: function (a, b, c, d, e, f, k, t, n, K) {
          if (n == null) {
            n = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = -1;
          }
          if (e == null) {
            e = 0;
          }
          if (c == null) {
            c = 20;
          }
          if (b == null) {
            b = 80;
          }
          if (t != 0) {
            this._src_w = t;
          }
          if (n != 0) {
            this._src_h = n;
          }
          this.tile = e;
          this.has_toggle = k;
          this.resize_ratio = f;
          this._slice9_assets = a;
          this._slice9_arrays = d;
          e = "";
          if (K == null) {
            K = this.has_toggle ? [0, 1, 2, 3, 4, 5] : [0, 1, 2];
          } else {
            f = 2;
            for (this.has_toggle && (f = 5); K.length < f + 1;) {
              K.push(K.length - 1);
            }
            for (var g = 0, l = K.length; g < l;) {
              var L = g++;
              if (K[L] > 5) {
                K[L] = 5;
              } else if (K[L] < 0) {
                K[L] = 0;
              }
            }
          }
          this._frame_indeces = K;
          if (b == 0) {
            b = 80;
          }
          if (c == 0) {
            c = 20;
          }
          c = C.applyResize(this.resize_ratio, this.resize_ratio_axis, b, c);
          b = c.x | 0;
          c = c.y | 0;
          if (a == null) {
            if (k) {
              a = ["flixel/flixel-ui/img/button_toggle.png"];
              d = [Ub.toIntArray("6,6,11,11")];
              k = this.getBmp(a[0]);
              this._src_w = k.width | 0;
              this._src_h = k.height / 6 | 0;
            } else {
              a = ["flixel/flixel-ui/img/button.png"];
              d = [Ub.toIntArray("6,6,11,11")];
              k = this.getBmp(a[0]);
              this._src_w = k.width | 0;
              this._src_h = k.height / 3 | 0;
            }
          }
          if (!this.has_toggle && a.length <= 3) {
            k = [null, null, null];
            f = [null, null, null];
          } else {
            this.has_toggle = true;
            k = [null, null, null, null, null, null];
            f = [null, null, null, null, null, null];
          }
          this._flashRect2.width = b;
          this._flashRect2.height = c;
          t = e += v.string(a) + "_slice9=" + v.string(d) + "_src=" + this._src_w + "x" + this._src_h;
          e += "_final=" + b + "x" + c + "_fi=" + v.string(this._frame_indeces);
          if (a.length == 1) {
            n = this.getBmp(a[0]);
            g = "_all";
            if (this._src_w == 0 || this._src_h == 0) {
              throw new Pb("Ambiguous situation! If you only provide one asset, you MUST provide src_w and src_h. Otherwise I can't tell if it's a stacked set of frames or a single frame.");
            }
            l = n.height > this._src_h;
            g += l ? "_multiframe" : "";
            e += g;
            t += g;
            if (h.bitmap._cache.h[e] != null) {
              this.loadGraphic(e, true, b, c);
              return;
            }
            if (l) {
              g = 0;
              for (l = k.length; g < l;) {
                L = g++;
                k[L] = this.grabButtonFrame(n, L, this.has_toggle, this._src_w, this._src_h, t);
              }
              if (d != null && d[0] != []) {
                g = 0;
                for (l = k.length; g < l;) {
                  L = g++;
                  f[L] = new Z(0, 0, k[L], this._flashRect2, d[0], this.tile, false, a[0] + ":" + L, this.resize_ratio);
                  f[L].set_resize_point(this.resize_point);
                }
                g = 0;
                for (l = k.length; g < l;) {
                  L = g++;
                  k[L] = f[L].get_pixels();
                }
                b = k[0].width;
                c = k[0].height;
              }
            } else {
              k[0] = n;
            }
          } else {
            if (h.bitmap._cache.h[e] != null) {
              this.loadGraphic(e, true, b, c);
              return;
            }
            if (this.has_toggle) {
              while (a.length < 6) {
                a.push("");
              }
            } else {
              while (a.length < 3) {
                a.push("");
              }
            }
            if (a[0] != "") {
              if (d != null && d.length > 0 && d[0] != null && d[0].length > 0) {
                while (d.length < a.length) {
                  d.push(null);
                }
                f[0] = d[0] != null ? new Z(0, 0, a[0], this._flashRect2, d[0], this.tile, false, "", this.resize_ratio) : new Cc(0, 0, a[0]);
                k[0] = f[0].get_pixels();
                g = 1;
                for (l = a.length; g < l;) {
                  L = g++;
                  if (a[L] != "") {
                    f[L] = d[L] != null ? new Z(0, 0, a[L], this._flashRect2, d[L], this.tile, false, "", this.resize_ratio) : new Cc(0, 0, a[L]);
                    k[L] = f[L].get_pixels();
                  }
                }
              } else {
                g = 0;
                l = a.length;
                while (g < l) {
                  L = g++;
                  k[L] = this.getBmp(a[L]);
                }
              }
              b = k[0].width;
              c = k[0].height;
            } else {
              if (b == 0) {
                b = 80;
              }
              if (c == 0) {
                c = 20;
              }
              k[0] = new T(b, c * 3, true, 0);
              this._no_graphic = true;
            }
          }
          if (this.has_toggle) {
            a = this.assembleButtonFrames(k[K[0]], k[K[1]], k[K[2]]);
            K = this.assembleButtonFrames(k[K[3]], k[K[4]], k[K[5]]);
            d = this.combineToggleBitmaps(a, K);
            ca.dispose(a);
            ca.dispose(K);
            h.bitmap.add(d, true, e);
          } else {
            a = this.assembleButtonFrames(k[K[0]], k[K[1]], k[K[2]]);
            h.bitmap.add(a, true, e);
          }
          this.loadGraphic(e, true, b, c);
          g = 0;
          for (l = f.length; g < l;) {
            L = g++;
            if (f[L] != null) {
              f[L].destroy();
              f[L] = null;
            }
          }
          while (f.length > 0) {
            f.pop();
          }
          while (k.length > 0) {
            k.pop();
          }
        },
        autoCenterLabel: function () {
          if (this.label != null) {
            this.get_width();
            this._spriteLabel.get_width();
            if (this.label instanceof Xd) {
              var a = this.label;
              var b = (this.get_width() - a.get_fieldWidth()) / 2;
              a = (this.get_height() - a.get_height()) / 2;
            } else {
              b = (this.get_width() - this._spriteLabel.get_width()) / 2;
              a = (this.get_height() - this._spriteLabel.get_height()) / 2;
            }
            this._centerLabelOffset.set_x(b);
            this._centerLabelOffset.set_y(a);
          }
        },
        setCenterLabelOffset: function (a, b) {
          this._centerLabelOffset.set_x(a);
          this._centerLabelOffset.set_y(b);
        },
        getCenterLabelOffset: function () {
          var a = this._centerLabelOffset.x;
          var b = this._centerLabelOffset.y;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          return b;
        },
        forceStateHandler: function (a) {
          switch (a) {
            case "click_button":
              this.onUpHandler();
              break;
            case "down_button":
              this.onDownHandler();
              break;
            case "out_button":
              this.onOutHandler();
              break;
            case "over_button":
              this.onOverHandler();
          }
        },
        grabButtonFrame: function (a, b, c, d, e, f) {
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (e == 0) {
            e = c ? a.height / 6 | 0 : a.height / 3 | 0;
          }
          c = d;
          if (c == 0) {
            c = a.width;
          }
          this._flashRect.x = 0;
          this._flashRect.y = b * e;
          this._flashRect.width = c;
          this._flashRect.height = e;
          if (this._flashRect.y >= a.height && (a.height / e | 0) == 4) {
            if (b == 4) {
              this._flashRect.y = e * 3;
            } else if (b == 5) {
              this._flashRect.y = e * 2;
            }
          }
          b = f + "{x:" + this._flashRect.x + "y:" + this._flashRect.y + "w:" + this._flashRect.width + "h:" + this._flashRect.height + "}";
          if (b != null && h.bitmap._cache.h[b] != null) {
            return h.bitmap._cache.h[b].bitmap;
          }
          e = new T(c, e);
          e.copyPixels(a, this._flashRect, this._flashPointZero);
          if (f != null) {
            h.bitmap.add(e, true, b);
            this.addToCleanup(b);
          }
          return e;
        },
        combineToggleBitmaps: function (a, b) {
          var c = new T(a.width, a.height + b.height);
          c.copyPixels(a, a.rect, this._flashPointZero);
          this._flashPoint.x = 0;
          this._flashPoint.y = a.height;
          c.copyPixels(b, b.rect, this._flashPoint);
          return c;
        },
        assembleButtonFrames: function (a, b, c) {
          var d = b != null ? c != null ? new T(a.width, a.height * 3) : new T(a.width, a.height * 2) : new T(a.width, a.height);
          d.copyPixels(a, a.rect, this._flashPointZero);
          if (b != null) {
            this._flashPoint.x = 0;
            this._flashPoint.y = a.height;
            d.copyPixels(b, b.rect, this._flashPoint);
            if (c != null) {
              this._flashPoint.y = a.height * 2;
              d.copyPixels(c, c.rect, this._flashPoint);
            }
          }
          return d;
        },
        updateButton: function () {
          if (!this.skipButtonUpdate) {
            dd.prototype.updateButton.call(this);
          }
        },
        addToCleanup: function (a) {
          if (this._assetsToCleanup == null) {
            this._assetsToCleanup = [];
          }
          if (this._assetsToCleanup.indexOf(a) == -1) {
            this._assetsToCleanup.push(a);
          }
        },
        cleanup: function () {
          if (this._assetsToCleanup != null) {
            for (var a = 0, b = this._assetsToCleanup; a < b.length;) {
              var c = b[a];
              ++a;
              h.bitmap.removeByKey(c);
            }
            this._assetsToCleanup = null;
          }
        },
        fetchAndShowCorrectLabel: function () {
          if (this.has_toggle) {
            if (this.toggled && this.toggle_label != null) {
              this._spriteLabel.set_visible(false);
              this.toggle_label.set_visible(true);
              return this.toggle_label;
            }
            if (this.toggle_label != null) {
              this.toggle_label.set_visible(false);
            }
            this._spriteLabel.set_visible(true);
          }
          return this.label;
        },
        onUpHandler: function () {
          if (this.has_toggle) {
            this.set_toggled(!this.toggled);
          }
          dd.prototype.onUpHandler.call(this);
          if (this.label != null) {
            var a = this.fetchAndShowCorrectLabel();
            a.set_visible(this.toggled ? this.up_toggle_visible : this.up_visible);
            var b = this.toggled ? this.up_toggle_color : this.up_color;
            if (b != null) {
              a.set_color(b);
            }
          }
          if (this.broadcastToFlxUI) {
            Ka.event("click_button", this, null, this.params);
          }
        },
        onDownHandler: function () {
          dd.prototype.onDownHandler.call(this);
          if (this.label != null) {
            var a = this.fetchAndShowCorrectLabel();
            a.set_visible(this.toggled ? this.down_toggle_visible : this.down_visible);
            var b = this.toggled ? this.down_toggle_color : this.down_color;
            if (b != null) {
              a.set_color(b);
            }
          }
          if (this.broadcastToFlxUI) {
            Ka.event("down_button", this, null, this.params);
          }
        },
        onOverHandler: function () {
          dd.prototype.onOverHandler.call(this);
          this.inputOver.press();
          if (this.label != null) {
            var a = this.fetchAndShowCorrectLabel();
            a.set_visible(this.toggled ? this.over_toggle_visible : this.over_visible);
            var b = this.toggled ? this.over_toggle_color : this.over_color;
            if (b != null) {
              a.set_color(b);
            }
          }
          if (this.broadcastToFlxUI) {
            Ka.event("over_button", this, null, this.params);
          }
        },
        onOutHandler: function () {
          dd.prototype.onOutHandler.call(this);
          this.inputOver.release();
          if (this.label != null) {
            var a = this.fetchAndShowCorrectLabel();
            a.set_visible(this.toggled ? this.up_toggle_visible : this.up_visible);
            var b = this.toggled ? this.up_toggle_color : this.up_color;
            if (b != null) {
              a.set_color(b);
            }
          }
          if (this.broadcastToFlxUI) {
            Ka.event("out_button", this, null, this.params);
          }
        },
        set_x: function (a) {
          dd.prototype.set_x.call(this, a);
          if (this._spriteLabel != null) {
            this._spriteLabel.set_x(this.x + this._centerLabelOffset.x + this.labelOffsets[this.status].x);
            if (this.round_labels) {
              this._spriteLabel.set_x(this._spriteLabel.x + 0.5 | 0);
            }
            if (this.has_toggle && this.toggle_label != null) {
              this.toggle_label.set_x(this._spriteLabel.x);
            }
          }
          return a;
        },
        set_y: function (a) {
          dd.prototype.set_y.call(this, a);
          if (this.label != null) {
            this._spriteLabel.set_y(this.y + this._centerLabelOffset.y + this.labelOffsets[this.status].y);
            if (this.round_labels) {
              this._spriteLabel.set_y(this._spriteLabel.y + 0.5 | 0);
            }
            if (this.has_toggle && this.toggle_label != null) {
              this.toggle_label.set_y(this._spriteLabel.y);
            }
          }
          return a;
        },
        __class__: Jc,
        __properties__: q(dd.prototype.__properties__, {
          set_params: "set_params",
          set_skipButtonUpdate: "set_skipButtonUpdate",
          set_toggle_label: "set_toggle_label",
          get_justMousedOut: "get_justMousedOut",
          get_mouseIsOut: "get_mouseIsOut",
          get_mouseIsOver: "get_mouseIsOver",
          get_justMousedOver: "get_justMousedOver",
          set_toggled: "set_toggled"
        })
      });
      function Zh() {}
      g["flixel.addons.ui.interfaces.ILabeled"] = Zh;
      Zh.__name__ = "flixel.addons.ui.interfaces.ILabeled";
      Zh.__isInterface__ = true;
      Zh.prototype = {
        __class__: Zh
      };
      function ud(a, b, c, d, e, f, k) {
        if (k == null) {
          k = -1;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = true;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.up_style = this.over_style = this.down_style = this.up_toggle_style = this.over_toggle_style = this.down_toggle_style = null;
        Jc.call(this, a, b, d);
        this.set_color(k);
        if (c != null) {
          this.set_label(new Xd(0, 0, 80, c, 8));
          this.label.setFormat(null, 8, 3355443, "center");
        }
        if (f) {
          this._no_graphic = true;
        }
        if (e) {
          this.resize(this.get_width(), this.get_height());
        } else if (this._no_graphic == 0) {
          this.doResize(this.get_width(), this.get_height(), false);
        } else {
          this.doResize(this.get_width(), this.get_height(), true);
        }
      }
      g["flixel.addons.ui.FlxUIButton"] = ud;
      ud.__name__ = "flixel.addons.ui.FlxUIButton";
      ud.__interfaces__ = [Kg, Zh];
      ud.__super__ = Jc;
      ud.prototype = q(Jc.prototype, {
        setLabelFormat: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = true;
          }
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = 8;
          }
          if (this.label != null) {
            this.label.setFormat(a, b, c, d, e, f, k);
            return this.label;
          } else {
            return null;
          }
        },
        autoCenterLabel: function () {
          Jc.prototype.autoCenterLabel.call(this);
        },
        copyStyle: function (a) {
          Jc.prototype.copyStyle.call(this, a);
          if (a instanceof ud) {
            this.up_style = a.up_style;
            this.over_style = a.over_style;
            this.down_style = a.down_style;
            this.up_toggle_style = a.up_toggle_style;
            this.over_toggle_style = a.over_toggle_style;
            this.down_toggle_style = a.down_toggle_style;
            a = a.label;
            var b = a.textField.get_defaultTextFormat();
            if (a._font.indexOf(Nd.FONT_DEFAULT) == -1) {
              md.copyFromFlxText(a).apply(null, this.label);
            } else {
              var c = Dn.fromOpenFL(b.align);
              this.label.setFormat(null, b.size | 0, b.color, c, a.borderStyle, a.borderColor, a.textField.get_embedFonts());
            }
          }
        },
        getLabel: function () {
          return this.label;
        },
        resize: function (a, b) {
          Jc.prototype.resize.call(this, a, b);
        },
        destroy: function () {
          this._noIconGraphicsBkup = ca.dispose(this._noIconGraphicsBkup);
          Jc.prototype.destroy.call(this);
        },
        loadDefaultGraphic: function () {},
        resetHelpers: function () {
          Jc.prototype.resetHelpers.call(this);
          if (this.label != null) {
            var a = this.label;
            var b = this.get_width() | 0;
            a.set_width(this.label.frameWidth = b);
            this.label.set_fieldWidth(this.label.get_width());
            this.label.set_size(this.label._defaultFormat.size | 0);
          }
        },
        onDownHandler: function () {
          Jc.prototype.onDownHandler.call(this);
          if (this.label != null) {
            if (this.toggled && this.down_toggle_style != null) {
              this.label.set_color(this.down_toggle_style.color);
              if (this.down_toggle_style.border != null) {
                this.label.set_borderStyle(this.down_toggle_style.border.style);
                this.label.set_borderColor(this.down_toggle_style.border.color);
                this.label.set_borderSize(this.down_toggle_style.border.size);
                this.label.set_borderQuality(this.down_toggle_style.border.quality);
              }
            } else if (!this.toggled && this.down_style != null) {
              this.label.set_color(this.down_style.color);
              if (this.down_style.border != null) {
                this.label.set_borderStyle(this.down_style.border.style);
                this.label.set_borderColor(this.down_style.border.color);
                this.label.set_borderSize(this.down_style.border.size);
                this.label.set_borderQuality(this.down_style.border.quality);
              }
            }
          }
        },
        onOverHandler: function () {
          Jc.prototype.onOverHandler.call(this);
          if (this.label != null) {
            if (this.toggled && this.over_toggle_style != null) {
              this.label.set_color(this.over_toggle_style.color);
              if (this.over_toggle_style.border != null) {
                this.label.set_borderStyle(this.over_toggle_style.border.style);
                this.label.set_borderColor(this.over_toggle_style.border.color);
                this.label.set_borderSize(this.over_toggle_style.border.size);
                this.label.set_borderQuality(this.over_toggle_style.border.quality);
              }
            } else if (!this.toggled && this.over_style != null) {
              this.label.set_color(this.over_style.color);
              if (this.over_style.border != null) {
                this.label.set_borderStyle(this.over_style.border.style);
                this.label.set_borderColor(this.over_style.border.color);
                this.label.set_borderSize(this.over_style.border.size);
                this.label.set_borderQuality(this.over_style.border.quality);
              }
            }
          }
        },
        onOutHandler: function () {
          Jc.prototype.onOutHandler.call(this);
          if (this.label != null) {
            if (this.toggled && this.up_toggle_style != null) {
              this.label.set_color(this.up_toggle_style.color);
              if (this.up_toggle_style.border != null) {
                this.label.set_borderStyle(this.up_toggle_style.border.style);
                this.label.set_borderColor(this.up_toggle_style.border.color);
                this.label.set_borderSize(this.up_toggle_style.border.size);
                this.label.set_borderQuality(this.up_toggle_style.border.quality);
              }
            } else if (!this.toggled && this.up_style != null) {
              this.label.set_color(this.up_style.color);
              if (this.up_style.border != null) {
                this.label.set_borderStyle(this.up_style.border.style);
                this.label.set_borderColor(this.up_style.border.color);
                this.label.set_borderSize(this.up_style.border.size);
                this.label.set_borderQuality(this.up_style.border.quality);
              }
            }
          }
        },
        onUpHandler: function () {
          Jc.prototype.onUpHandler.call(this);
          if (this.label != null) {
            if (this.toggled && this.up_toggle_style != null) {
              this.label.set_color(this.up_toggle_style.color);
              if (this.up_toggle_style.border != null) {
                this.label.set_borderStyle(this.up_toggle_style.border.style);
                this.label.set_borderColor(this.up_toggle_style.border.color);
                this.label.set_borderSize(this.up_toggle_style.border.size);
                this.label.set_borderQuality(this.up_toggle_style.border.quality);
              }
            } else if (!this.toggled && this.up_style != null) {
              this.label.set_color(this.up_style.color);
              if (this.up_style.border != null) {
                this.label.set_borderStyle(this.up_style.border.style);
                this.label.set_borderColor(this.up_style.border.color);
                this.label.set_borderSize(this.up_style.border.size);
                this.label.set_borderQuality(this.up_style.border.quality);
              }
            }
          }
        },
        __class__: ud
      });
      function xb(a, b, c, d, e, f, k, t) {
        if (f == null) {
          f = 100;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.skipButtonUpdate = false;
        this.box_space = 2;
        this.textX = this.textY = 0;
        this.checked = this.checkbox_dirty = false;
        this.max_width = -1;
        cb.call(this);
        this.callback = t;
        this.set_params(k);
        if (c == null) {
          c = "flixel/flixel-ui/img/check_box.png";
        }
        if (c instanceof F) {
          this.box = c;
        } else {
          this.box = new F();
          this.box.loadGraphic(c, true);
        }
        this.button = new ud(0, 0, e, m(this, this._clickCheck));
        this.button.label.setFormat(null, 8, 16777215, "left", Sa.OUTLINE);
        this.button.label.set_fieldWidth(f);
        this.button.up_color = 16777215;
        this.button.down_color = 16777215;
        this.button.over_color = 16777215;
        this.button.up_toggle_color = 16777215;
        this.button.down_toggle_color = 16777215;
        this.button.over_toggle_color = 16777215;
        this.button.loadGraphicSlice9(["", "", ""], this.box.get_width() + this.box_space + f | 0, this.box.get_height() | 0);
        this.max_width = this.box.get_width() + this.box_space + f | 0;
        this.button.onUp.callback = m(this, this._clickCheck);
        if (d == null) {
          d = "flixel/flixel-ui/img/check_mark.png";
        }
        if (d instanceof F) {
          this.mark = d;
        } else {
          this.mark = new F();
          this.mark.loadGraphic(d);
        }
        this.add(this.box);
        this.add(this.mark);
        this.add(this.button);
        this.anchorLabelX();
        this.anchorLabelY();
        this.set_checked(false);
        this.button.setAllLabelOffsets(0, 0);
        this.set_x(a);
        this.set_y(b);
        this.set_textX(0);
        this.set_textY(0);
      }
      g["flixel.addons.ui.FlxUICheckBox"] = xb;
      xb.__name__ = "flixel.addons.ui.FlxUICheckBox";
      xb.__interfaces__ = [ij, Ke, vf, Zh];
      xb.__super__ = cb;
      xb.prototype = q(cb.prototype, {
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          this.button.set_skipButtonUpdate(this.skipButtonUpdate);
          return this.skipButtonUpdate;
        },
        set_params: function (a) {
          this.params = a;
          if (this.params == null) {
            this.params = [];
          }
          this.params.push({
            name: "checked",
            value: false
          });
          return this.params;
        },
        set_color: function (a) {
          if (this.button != null) {
            this.button.label.set_color(a);
          }
          return cb.prototype.set_color.call(this, a);
        },
        getLabel: function () {
          if (this.button == null) {
            return null;
          } else {
            return this.button.label;
          }
        },
        set_visible: function (a) {
          return this.visible = a;
        },
        set_textX: function (a) {
          this.textX = a;
          this.anchorLabelX();
          return this.textX;
        },
        set_textY: function (a) {
          this.textY = a;
          this.anchorLabelY();
          return this.textY;
        },
        anchorLabelX: function () {
          if (this.button != null) {
            this.button.label.offset.set_x(-(this.box.get_width() + this.box_space + this.textX));
          }
        },
        anchorLabelY: function () {
          if (this.button != null) {
            this.button.set_y(this.box.y + (this.box.get_height() - this.button.get_height()) / 2 + this.textY);
          }
        },
        destroy: function () {
          cb.prototype.destroy.call(this);
          if (this.mark != null) {
            this.mark.destroy();
            this.mark = null;
          }
          if (this.box != null) {
            this.box.destroy();
            this.box = null;
          }
          if (this.button != null) {
            this.button.destroy();
            this.button = null;
          }
        },
        set_text: function (a) {
          this.button.label.set_text(a);
          this.checkbox_dirty = true;
          return a;
        },
        update: function (a) {
          cb.prototype.update.call(this, a);
          if (this.checkbox_dirty && this.button.label != null) {
            if (this.button.label instanceof Xd) {
              this.button.label.drawFrame();
            }
            this.anchorLabelX();
            this.anchorLabelY();
            this.button.set_width(this.box.frameWidth + this.box_space + this.button.label.textField.get_textWidth());
            this.checkbox_dirty = false;
          }
        },
        set_checked: function (a) {
          this.mark.set_visible(a);
          return this.checked = a;
        },
        _clickCheck: function () {
          if (this.visible) {
            this.set_checked(!this.checked);
            if (this.callback != null) {
              this.callback();
            }
            if (this.broadcastToFlxUI) {
              Ka.event("click_check_box", this, this.checked, this.params);
            }
          }
        },
        __class__: xb,
        __properties__: q(cb.prototype.__properties__, {
          set_text: "set_text",
          set_skipButtonUpdate: "set_skipButtonUpdate",
          set_textY: "set_textY",
          set_textX: "set_textX",
          set_params: "set_params",
          set_checked: "set_checked"
        })
      });
      function Qi(a, b, c, d) {
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 1;
        }
        this._clickTime = 0;
        this._clickPressed = false;
        this.inputMethod = this.lastMouseX = this.lastMouseY = 0;
        this.dispatchEvents = true;
        this.gamepadAutoConnect = Ok.FirstActive;
        this.listIndex = 0;
        this.location = -1;
        this.wrap = true;
        if (d == null) {
          d = h.height < 400 ? "flixel/flixel-ui/img/finger_small.png" : "flixel/flixel-ui/img/finger_big.png";
        }
        Cc.call(this, 0, 0, d);
        this.inputMethod = b;
        this._lists = [{
          x: 0,
          y: 0,
          width: 0,
          height: 0,
          widgets: []
        }];
        this._widgets = this._lists[0].widgets;
        this.anchor = new Gg(-2, 0, "left", "center", "right", "center");
        this.setDefaultKeys(c);
        this.callback = a;
        a = this.scrollFactor;
        c = b = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.set_x(b);
        a.set_y(c);
        if (h.mouse != null && h.mouse instanceof jj == 0) {
          this._newMouse = new jj(h.mouse.cursorContainer);
          h.set_mouse(this._newMouse);
        } else {
          this._newMouse = h.mouse;
        }
      }
      g["flixel.addons.ui.FlxUICursor"] = Qi;
      Qi.__name__ = "flixel.addons.ui.FlxUICursor";
      Qi.__super__ = Cc;
      Qi.prototype = q(Cc.prototype, {
        findVisibleLocation: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = true;
          }
          this.set_location(a);
          if (this.location != -1) {
            for (a = false; this._widgets[this.location] == null || this._widgets[this.location].visible == 0;) {
              if (b) {
                if (this.location == this._widgets.length - 1) {
                  if (c) {
                    if (a) {
                      this.set_location(-1);
                      break;
                    } else {
                      a = true;
                      this.set_location(0);
                    }
                  } else {
                    this.set_location(-1);
                    break;
                  }
                } else {
                  this.set_location(this.location + 1);
                }
              } else if (this.location == 0) {
                if (c) {
                  if (a) {
                    this.set_location(-1);
                    break;
                  } else {
                    a = true;
                    this.set_location(this._widgets.length - 1);
                  }
                } else {
                  this.set_location(-1);
                  break;
                }
              } else {
                this.set_location(this.location - 1);
              }
            }
          }
        },
        set_listIndex: function (a) {
          if (a >= this._lists.length) {
            a = this._lists.length - 1;
          } else if (a < 0) {
            a = 0;
          }
          this.listIndex = a;
          this.set_location(0);
          this._updateCursor();
          return this.listIndex;
        },
        set_visible: function (a) {
          return a = Cc.prototype.set_visible.call(this, a);
        },
        set_location: function (a) {
          if (a >= this._widgets.length) {
            a = this._widgets.length - 1;
          }
          this.location = a;
          this._updateCursor();
          return this.location;
        },
        set_gamepad: function (a) {
          this._gamepad = a;
          this.setDefaultKeys(this._defaultCode);
          for (var b = [this.keysUp, this.keysDown, this.keysLeft, this.keysRight, this.keysClick], c = 0; c < b.length;) {
            var d = b[c];
            ++c;
            if (d != null) {
              for (var e = 0; e < d.length;) {
                var f = d[e];
                ++e;
                if (f instanceof Ad) {
                  f.gamepad = this._gamepad;
                }
              }
            }
          }
          return a;
        },
        get_gamepad: function () {
          return this._gamepad;
        },
        destroy: function () {
          Cc.prototype.destroy.call(this);
          if (h.mouse == this._newMouse) {
            this._newMouse = null;
          }
          this.keysUp = ca.destroyArray(this.keysUp);
          this.keysDown = ca.destroyArray(this.keysDown);
          this.keysLeft = ca.destroyArray(this.keysLeft);
          this.keysRight = ca.destroyArray(this.keysRight);
          this.keysClick = ca.destroyArray(this.keysClick);
          this.anchor = ca.destroy(this.anchor);
          for (var a = 0, b = this._lists; a < b.length;) {
            var c = b[a];
            ++a;
            C.clearArraySoft(c.widgets);
          }
          C.clearArraySoft(this._lists);
          this._widgets = null;
        },
        update: function (a) {
          if (this.get_gamepad() == null || !this.get_gamepad().connected) {
            var b = this.getGamepad(false);
            if (this.get_gamepad() != b) {
              this.set_gamepad(b);
            }
          }
          if (this.lastMouseX != h.mouse.x || this.lastMouseY != h.mouse.y) {
            b = this.visible;
            if (this.scrollFactor.x == 0 && this.scrollFactor.y == 0) {
              this.jumpToXY(h.mouse.screenX, h.mouse.screenY);
            } else {
              this.jumpToXY(h.mouse.x, h.mouse.y);
            }
            this.set_visible(b);
            this.lastMouseX = h.mouse.x;
            this.lastMouseY = h.mouse.y;
          }
          this._checkKeys();
          this._clickTime += a;
          Cc.prototype.update.call(this, a);
        },
        addWidgetsFromUI: function (a) {
          if (a.cursorLists != null) {
            var b = 0;
            for (a = a.cursorLists; b < a.length;) {
              var c = a[b];
              ++b;
              this.addWidgetList(c);
            }
            this._widgets = this._lists[0].widgets;
            this.set_location(0);
            this.set_listIndex(0);
          } else {
            b = 0;
            a = a.group.members;
            while (b < a.length) {
              c = a[b];
              ++b;
              if (va.__implements(c, ij) || c instanceof cb) {
                this.addWidget(c);
              }
            }
          }
        },
        jumpToXY: function (a, b) {
          var c = 0;
          var d = Infinity;
          var e = -1;
          var f = -1;
          if (this._lists != null) {
            for (var k = 0, t = this._lists; k < t.length;) {
              var h = t[k];
              ++k;
              for (var K = 0, g = h.widgets.length; K < g;) {
                var l = K++;
                var L = h.widgets[l];
                if (L.visible == 1 && a >= L.x && b >= L.y && a <= L.x + L.get_width() && b <= L.y + L.get_height()) {
                  var p = L.x + L.get_width() / 2 - a;
                  L = L.y + L.get_height() / 2 - b;
                  p = p * p + L * L;
                  if (p < d) {
                    d = p;
                    e = c;
                    f = l;
                  }
                }
              }
              ++c;
            }
            if (e != -1 && f != -1) {
              this.set_listIndex(e);
              this.set_location(f);
              return true;
            }
          } else {
            k = 0;
            for (t = this._widgets.length; k < t;) {
              l = k++;
              L = this._widgets[l];
              if (L.visible == 1 && a >= L.x && b >= L.y && a <= L.x + L.get_width() && b <= L.y + L.get_height()) {
                p = L.x + L.get_width() / 2 - a;
                L = L.y + L.get_height() / 2 - b;
                p = p * p + L * L;
                if (p < d) {
                  d = p;
                  f = l;
                }
              }
            }
            if (f != -1) {
              this.set_location(f);
              return true;
            }
          }
          return false;
        },
        addWidgetList: function (a) {
          for (var b = 0, c = this._lists; b < c.length;) {
            var d = c[b];
            ++b;
            if (ve.equals(d.widgets, a)) {
              return;
            }
          }
          d = c = Infinity;
          var e = -Infinity;
          var f = -Infinity;
          for (b = 0; b < a.length;) {
            var k = a[b];
            ++b;
            if (k.x < c) {
              c = k.x;
            }
            if (k.y < d) {
              d = k.y;
            }
            if (k.x + k.get_width() > e) {
              e = k.x;
            }
            if (k.y + k.get_height() > f) {
              f = k.y;
            }
          }
          if (this._lists.length == 1 && this._lists[0].widgets != null && this._lists[0].widgets.length == 0) {
            this._lists[0].widgets = [];
            this._lists[0].x = c | 0;
            this._lists[0].y = d | 0;
            this._lists[0].width = e - c | 0;
            this._lists[0].height = f - d | 0;
            b = this._lists[0];
          } else {
            this._lists.push({
              x: c | 0,
              y: d | 0,
              width: e - c | 0,
              height: f - d | 0,
              widgets: []
            });
            b = this._lists[this._lists.length - 1];
          }
          c = this._widgets;
          this._widgets = b.widgets;
          for (b = 0; b < a.length;) {
            d = a[b];
            ++b;
            this.addWidget(d);
          }
          this._widgets = c;
          this._lists.sort(m(this, this._sortXYWidgetList));
          b = 0;
          for (c = this._lists; b < c.length;) {
            a = c[b];
            ++b;
            a.widgets.sort(m(this, this._sortXYVisible));
          }
        },
        addWidget: function (a) {
          if (va.__implements(a, ij)) {
            this._widgets.push(a);
          } else if (a instanceof cb) {
            var b = 0;
            for (a = a.group.members; b < a.length;) {
              var c = a[b];
              ++b;
              if (va.__implements(c, td)) {
                this.addWidget(c);
              }
            }
          }
          this._widgets.sort(m(this, this._sortXYVisible));
        },
        setDefaultKeys: function (a) {
          this._defaultCode = a;
          this._clearKeys();
          this._newKeys();
          var b = 1;
          if ((a & b) == b) {
            this._addToKeys(this.keysRight, new bd(9, null, [16]));
            this._addToKeys(this.keysLeft, new bd(9, [16]));
            this._addToKeys(this.keysClick, new bd(13));
          }
          b = 256;
          if ((a & b) == b) {
            this._addToKeys(this.keysRight, new bd(39));
            this._addToKeys(this.keysLeft, new bd(37));
            this._addToKeys(this.keysDown, new bd(40));
            this._addToKeys(this.keysUp, new bd(38));
            this._addToKeys(this.keysClick, new bd(13));
          }
          b = 16;
          if ((a & b) == b) {
            this._addToKeys(this.keysRight, new bd(68));
            this._addToKeys(this.keysLeft, new bd(65));
            this._addToKeys(this.keysDown, new bd(83));
            this._addToKeys(this.keysUp, new bd(87));
            this._addToKeys(this.keysClick, new bd(13));
          }
          b = 4096;
          if ((a & b) == b) {
            this._addToKeys(this.keysRight, new bd(102));
            this._addToKeys(this.keysLeft, new bd(100));
            this._addToKeys(this.keysDown, new bd(98));
            this._addToKeys(this.keysUp, new bd(104));
            this._addToKeys(this.keysClick, new bd(13));
          }
          if (this._gamepad == null || !this._gamepad.connected) {
            this._gamepad = this.getGamepad();
          }
          if (this._gamepad != null && this._gamepad.connected) {
            b = 65536;
            if ((a & b) == b) {
              this._addToKeys(this.keysLeft, new Ad(this.get_gamepad(), 13));
              this._addToKeys(this.keysRight, new Ad(this.get_gamepad(), 14));
              this._addToKeys(this.keysDown, new Ad(this.get_gamepad(), 12));
              this._addToKeys(this.keysUp, new Ad(this.get_gamepad(), 11));
              this._addToKeys(this.keysClick, new Ad(this.get_gamepad(), 0));
            }
            b = 268435456;
            if ((a & b) == b) {
              this._addToKeys(this.keysLeft, new Ad(this.get_gamepad(), 4));
              this._addToKeys(this.keysRight, new Ad(this.get_gamepad(), 5));
              this._addToKeys(this.keysClick, new Ad(this.get_gamepad(), 0));
            }
            b = 1048576;
            if ((a & b) == b) {
              this._addToKeys(this.keysLeft, new uf(this.get_gamepad(), {
                id: 19,
                axis: Je.X,
                positive: false
              }));
              this._addToKeys(this.keysRight, new uf(this.get_gamepad(), {
                id: 19,
                axis: Je.X,
                positive: true
              }));
              this._addToKeys(this.keysUp, new uf(this.get_gamepad(), {
                id: 19,
                axis: Je.Y,
                positive: false
              }));
              this._addToKeys(this.keysDown, new uf(this.get_gamepad(), {
                id: 19,
                axis: Je.Y,
                positive: true
              }));
              this._addToKeys(this.keysClick, new Ad(this.get_gamepad(), 0));
            }
            b = 16777216;
            if ((a & b) == b) {
              this._addToKeys(this.keysLeft, new uf(this.get_gamepad(), {
                id: 20,
                axis: Je.X,
                positive: false
              }));
              this._addToKeys(this.keysRight, new uf(this.get_gamepad(), {
                id: 20,
                axis: Je.X,
                positive: true
              }));
              this._addToKeys(this.keysUp, new uf(this.get_gamepad(), {
                id: 20,
                axis: Je.Y,
                positive: false
              }));
              this._addToKeys(this.keysDown, new uf(this.get_gamepad(), {
                id: 20,
                axis: Je.Y,
                positive: true
              }));
              this._addToKeys(this.keysClick, new Ad(this.get_gamepad(), 0));
            }
          }
        },
        getGamepad: function (a) {
          if (a == null) {
            a = true;
          }
          var b = this.gamepadAutoConnect;
          switch (b._hx_index) {
            case 0:
              var c = null;
              break;
            case 1:
              c = h.gamepads.getFirstActiveGamepad();
              break;
            case 2:
              c = h.gamepads.lastActive;
              break;
            case 3:
              c = b.i;
              c = h.gamepads._activeGamepads[c];
          }
          if (c != null && c.connected || !a) {
            return c;
          }
          b = 0;
          for (a = h.gamepads.get_numActiveGamepads(); b < a;) {
            c = b++;
            c = h.gamepads._activeGamepads[c];
            if (c != null && c.connected) {
              return c;
            }
          }
          return null;
        },
        _sortXYWidgetList: function (a, b) {
          if (a.y < b.y) {
            return -1;
          } else if (a.y > b.y) {
            return 1;
          } else if (a.x < b.x) {
            return -1;
          } else if (a.x > b.x) {
            return 1;
          } else {
            return 0;
          }
        },
        _sortXYVisible: function (a, b) {
          if (a.visible && !b.visible) {
            return -1;
          } else if (b.visible && !a.visible) {
            return 1;
          } else if (a.y < b.y) {
            return -1;
          } else if (a.y > b.y) {
            return 1;
          } else if (a.x < b.x) {
            return -1;
          } else if (a.x > b.x) {
            return 1;
          } else {
            return 0;
          }
        },
        _addToKeys: function (a, b) {
          var c = false;
          for (var d = 0; d < a.length;) {
            var e = a[d];
            ++d;
            if (b.equals(e)) {
              c = true;
              break;
            }
          }
          if (!c) {
            a.push(b);
          }
        },
        _clearKeys: function () {
          C.clearArray(this.keysUp);
          this.keysUp = null;
          C.clearArray(this.keysDown);
          this.keysDown = null;
          C.clearArray(this.keysLeft);
          this.keysLeft = null;
          C.clearArray(this.keysRight);
          this.keysRight = null;
          C.clearArray(this.keysClick);
          this.keysClick = null;
        },
        _newKeys: function () {
          this.keysUp = [];
          this.keysDown = [];
          this.keysLeft = [];
          this.keysRight = [];
          this.keysClick = [];
        },
        _checkKeys: function () {
          var a = this.visible == 0;
          var b = this.location;
          for (var c = 0, d = this.keysUp; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.justPressed()) {
              this._doInput(0, -1);
              break;
            }
          }
          c = 0;
          for (d = this.keysDown; c < d.length;) {
            e = d[c];
            ++c;
            if (e.justPressed()) {
              this._doInput(0, 1);
              break;
            }
          }
          c = 0;
          for (d = this.keysLeft; c < d.length;) {
            e = d[c];
            ++c;
            if (e.justPressed()) {
              this._doInput(-1, 0);
              break;
            }
          }
          c = 0;
          for (d = this.keysRight; c < d.length;) {
            e = d[c];
            ++c;
            if (e.justPressed()) {
              this._doInput(1, 0);
              break;
            }
          }
          if (a && this.visible && b != -1) {
            this.set_location(b);
          }
          if (this._clickKeysJustPressed()) {
            if (this.ignoreNextInput) {
              this.ignoreNextInput = false;
            } else {
              this._clickPressed = true;
              this._clickTime = 0;
              this._doPress();
            }
          }
          if (this._clickKeysPressed()) {
            this._clickPressed = true;
            this._doMouseMove();
          } else if (this._clickTime > 0 && this._clickPressed) {
            this._doRelease();
            this._clickPressed = false;
          }
        },
        _clickKeysJustPressed: function () {
          for (var a = 0, b = this.keysClick; a < b.length;) {
            var c = b[a];
            ++a;
            if (c.justPressed()) {
              return true;
            }
          }
          return false;
        },
        _clickKeysPressed: function () {
          for (var a = 0, b = this.keysClick; a < b.length;) {
            var c = b[a];
            ++a;
            if (c.pressed()) {
              return true;
            }
          }
          return false;
        },
        _getWidgetPoint: function (a) {
          if (a == null) {
            a = h.camera;
          }
          var b = this._widgets[this.location];
          if (b == null) {
            return null;
          }
          var c = null;
          if (b instanceof $b) {
            c = b.getScreenPosition();
          }
          c.set_x(c.x * a.totalScaleX);
          c.set_y(c.y * a.totalScaleY);
          if (c == null) {
            var d = b.x;
            c = b.y;
            if (c == null) {
              c = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (d == null) {
              d = 0;
            }
            c = W.pool.get().set(d, c);
            c._inPool = false;
          }
          c.set_x(c.x + b.get_width() * a.totalScaleX * 0.5);
          c.set_y(c.y + b.get_height() * a.totalScaleY * 0.5);
          return c;
        },
        _doMouseMove: function (a) {
          var b = false;
          if (a == null) {
            a = this._getWidgetPoint();
            if (a == null) {
              return;
            }
            b = true;
          }
          if (this.dispatchEvents) {
            var c = h.mouse;
            c._globalScreenX = a.x / h.scaleMode.scale.x | 0;
            c._globalScreenY = a.y / h.scaleMode.scale.y | 0;
            c.updatePositions();
            if (this._newMouse != null) {
              this._newMouse.updateGlobalScreenPosition = false;
            }
            var d = oa.get_current().stage;
            var e = a.x;
            var f = a.y;
            var k = oa.get_current().stage;
            c = h.keys.pressed;
            var t = c.keyManager.checkStatusUnsafe(17, c.status);
            c = h.keys.pressed;
            var n = c.keyManager.checkStatusUnsafe(18, c.status);
            c = h.keys.pressed;
            d.dispatchEvent(new Sb("mouseMove", true, false, e, f, k, t, n, c.keyManager.checkStatusUnsafe(16, c.status)));
          }
          if (b) {
            a.put();
          }
        },
        _doPress: function (a) {
          var b = this._widgets[this.location];
          if (b != null) {
            var c = false;
            if (a == null) {
              a = this._getWidgetPoint();
              if (a == null) {
                return;
              }
              c = true;
            }
            if (this.dispatchEvents) {
              var d = a.x * h.camera.zoom;
              var e = a.y * h.camera.zoom;
              var f = h.keys.pressed;
              var k = f.keyManager.checkStatusUnsafe(17, f.status);
              f = h.keys.pressed;
              var t = f.keyManager.checkStatusUnsafe(18, f.status);
              f = h.keys.pressed;
              f = f.keyManager.checkStatusUnsafe(16, f.status);
              oa.get_current().stage.dispatchEvent(new Sb("mouseDown", true, false, d, e, oa.get_current().stage, k, t, f));
            }
            if (this.callback != null) {
              this.callback("cursor_down", b);
            }
            if (c) {
              a.put();
            }
          }
        },
        _doRelease: function (a) {
          var b = this._widgets[this.location];
          if (b != null) {
            var c = false;
            if (a == null) {
              a = this._getWidgetPoint();
              if (a == null) {
                return;
              }
              c = true;
            }
            if (this.dispatchEvents) {
              var d = a.x * h.camera.zoom;
              var e = a.y * h.camera.zoom;
              var f = h.keys.pressed;
              var k = f.keyManager.checkStatusUnsafe(17, f.status);
              f = h.keys.pressed;
              var t = f.keyManager.checkStatusUnsafe(18, f.status);
              f = h.keys.pressed;
              f = f.keyManager.checkStatusUnsafe(16, f.status);
              oa.get_current().stage.dispatchEvent(new Sb("mouseUp", true, false, d, e, oa.get_current().stage, k, t, f));
              if (this._clickPressed) {
                oa.get_current().stage.dispatchEvent(new Sb("click", true, false, d, e, oa.get_current().stage, k, t, f));
              }
            }
            if (this.callback != null) {
              this.callback("cursor_click", b);
            }
            if (c) {
              a.put();
            }
            if (this._newMouse != null) {
              this._newMouse.updateGlobalScreenPosition = true;
              f = this._newMouse;
              a = h.game.get_mouseX() | 0;
              b = h.game.get_mouseY() | 0;
              f._globalScreenX = a / h.scaleMode.scale.x | 0;
              f._globalScreenY = b / h.scaleMode.scale.y | 0;
              f.updatePositions();
            }
          }
        },
        _findNextY: function (a, b, c, d) {
          var e = 0;
          var f = 0;
          var k = 0;
          if (c != null) {
            e = c[b].x | 0;
            f = c[b].y | 0;
            k = c.length;
          } else if (d != null) {
            e = d[b].x;
            f = d[b].y;
            k = d.length;
          }
          for (var t = 0, h = 0, K = Infinity, g = Infinity, l = K, p = g, m = -1, v = 0; v < k;) {
            var q = v++;
            if (q != b) {
              if (c != null) {
                t = c[q].x | 0;
                h = c[q].y | 0;
              } else if (d != null) {
                t = d[q].x;
                h = d[q].y;
              }
              g = h - f;
              if ((g < 0 ? -1 : 1) == (a < 0 ? -1 : 1) && g != 0) {
                g = Math.abs(g);
                if (g < p) {
                  p = g;
                  l = Math.abs(e - t);
                  m = q;
                } else if (g == p) {
                  K = Math.abs(e - t);
                  if (K < l) {
                    l = K;
                    m = q;
                  }
                }
              }
            }
          }
          return m;
        },
        _wrapX: function (a, b, c) {
          if (b + a < 0) {
            b = b + a + c;
          } else if (b + a >= c) {
            b = b + a - c;
          }
          return b;
        },
        _wrapY: function (a, b, c, d) {
          var e;
          var f;
          var k = -1;
          var t = Infinity;
          var h = f = 0;
          var K = 0;
          var g = 0;
          if (c != null) {
            h = c.length;
            K = c[b].x | 0;
            g = c[b].y | 0;
          }
          if (d != null) {
            h = d.length;
            K = d[b].x;
            g = d[b].y;
          }
          for (var l = 0; l < h;) {
            var p = l++;
            if (p != this.location) {
              var m = e = 0;
              if (c != null) {
                e = c[p].x | 0;
                m = c[p].y | 0;
              } else if (d != null) {
                e = d[p].x | 0;
                m = d[p].y | 0;
              }
              m -= g;
              if ((m < 0 ? -1 : 1) == (a < 0 ? -1 : 1) == 0 && m != 0) {
                m = Math.abs(m);
                if (m > f) {
                  f = m;
                  t = Math.abs(K - e);
                  k = p;
                } else if (m == f) {
                  e = Math.abs(K - e);
                  if (e < t) {
                    t = e;
                    k = p;
                  }
                }
              }
            }
          }
          if (k != -1) {
            b = k;
          }
          return b;
        },
        _doInput: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (this.ignoreNextInput) {
            this.ignoreNextInput = false;
          } else {
            var d = null;
            if (b == 0) {
              if (this.location + a >= 0 && this.location + a < this._widgets.length) {
                this.set_location(this.location + a);
              } else if (this.wrap) {
                if (this._lists.length == 1) {
                  this.set_location(this._wrapX(a, this.location, this._widgets.length));
                } else {
                  if (this.listIndex + a >= 0 && this.listIndex + a < this._lists.length) {
                    this.set_listIndex(this.listIndex + a);
                  } else {
                    this.set_listIndex(this._wrapX(a, this.listIndex, this._lists.length));
                  }
                  if (a == -1) {
                    this.set_location(this._widgets.length - 1);
                  }
                }
              }
              d = this._widgets[this.location];
            } else {
              var e = this._findNextY(b, this.location, this._widgets, null);
              if (e != -1) {
                this.set_location(e);
                d = this._widgets[this.location];
              } else if (this.wrap) {
                if (this._lists.length == 1) {
                  this.set_location(this._wrapY(b, this.location, this._widgets, null));
                } else {
                  d = this._findNextY(b, this.listIndex, null, this._lists);
                  if (d != -1) {
                    this.set_listIndex(d);
                  } else {
                    this.set_listIndex(this._wrapY(b, this.listIndex, null, this._lists));
                  }
                  if (b == -1) {
                    this.set_location(this._widgets.length - 1);
                  }
                }
                d = this._widgets[this.location];
              }
            }
            if (d != null && this._widgets != null && d.visible == 0 && c < this._widgets.length) {
              this._doInput(a, b, c + 1);
            } else if (this.callback != null) {
              this.callback("cursor_jump", d);
            }
          }
        },
        _updateCursor: function () {
          this._widgets = this._lists[this.listIndex].widgets;
          if (this.location < 0 || this._lists == null || this._widgets == null) {
            this.set_visible(false);
          } else {
            this.set_visible(this.set_active(true));
            var a = this._widgets[this.location];
            var b = false;
            var c = false;
            if (a != null) {
              var d = a;
              if (d instanceof F) {
                var e = d;
                if (e != null && e.scrollFactor != null) {
                  var f = this.scrollFactor;
                  var k = e.scrollFactor.x;
                  e = e.scrollFactor.y;
                  if (e == null) {
                    e = 0;
                  }
                  if (k == null) {
                    k = 0;
                  }
                  f.set_x(k);
                  f.set_y(e);
                }
              }
              if (a instanceof xb) {
                d = d.box;
              }
              this.anchor.anchorThing(this, d);
              if (this.x < 0) {
                this._flipAnchor("left", d);
                b = true;
              } else if (this.x > h.width + this.get_width()) {
                this._flipAnchor("right", d);
                b = true;
              }
              if (this.y < 0) {
                this._flipAnchor("top", d);
                c = true;
              } else if (this.y > h.height + this.get_height()) {
                this._flipAnchor("bottom", d);
                c = true;
              }
              this.set_flipX(b);
              this.set_flipY(c);
            }
          }
        },
        _flipAnchor: function (a, b) {
          var c = null;
          switch (a) {
            case "bottom":
              if (this.anchor.y.side == "bottom") {
                c = this._bottomAnchor = this.anchor.getFlipped(true, false, this._bottomAnchor);
              }
              break;
            case "left":
              if (this.anchor.x.side == "left") {
                c = this._leftAnchor = this.anchor.getFlipped(true, false, this._leftAnchor);
              }
              break;
            case "right":
              if (this.anchor.x.side == "right") {
                this._topAnchor = this.anchor.getFlipped(true, false, this._rightAnchor);
                c = this._rightAnchor;
              }
              break;
            case "top":
              if (this.anchor.y.side == "top") {
                c = this._topAnchor = this.anchor.getFlipped(true, false, this._topAnchor);
              }
          }
          if (c != null) {
            c.anchorThing(this, b);
          }
        },
        __class__: Qi,
        __properties__: q(Cc.prototype.__properties__, {
          set_gamepad: "set_gamepad",
          get_gamepad: "get_gamepad",
          set_listIndex: "set_listIndex",
          set_location: "set_location"
        })
      });
      var Ok = z["flixel.addons.ui.GamepadAutoConnectPreference"] = {
        __ename__: "flixel.addons.ui.GamepadAutoConnectPreference",
        __constructs__: null,
        Never: {
          _hx_name: "Never",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.GamepadAutoConnectPreference",
          toString: p
        },
        FirstActive: {
          _hx_name: "FirstActive",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.GamepadAutoConnectPreference",
          toString: p
        },
        LastActive: {
          _hx_name: "LastActive",
          _hx_index: 2,
          __enum__: "flixel.addons.ui.GamepadAutoConnectPreference",
          toString: p
        },
        GamepadID: (u = function (a) {
          return {
            _hx_index: 3,
            i: a,
            __enum__: "flixel.addons.ui.GamepadAutoConnectPreference",
            toString: p
          };
        }, u._hx_name = "GamepadID", u.__params__ = ["i"], u)
      };
      Ok.__constructs__ = [Ok.Never, Ok.FirstActive, Ok.LastActive, Ok.GamepadID];
      function sc(a, b, c, d, e, f, k, t) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.dropDirection = kj.Down;
        this.list = [];
        this.canScroll = true;
        this.currentScroll = 0;
        cb.call(this, a, b);
        this.callback = d;
        this.header = e;
        this.dropPanel = f;
        if (this.header == null) {
          this.header = new gj();
        }
        if (this.dropPanel == null) {
          a = new da(0, 0, this.header.background.get_width(), this.header.background.get_height());
          this.dropPanel = new Z(0, 0, "flixel/flixel-ui/img/box.png", a, [1, 1, 14, 14]);
        }
        if (c != null) {
          a = 0;
          for (k = c.length; a < k;) {
            b = a++;
            d = c[b];
            this.list.push(this.makeListButton(b, d.label, d.name));
          }
          this.selectSomething(c[0].name, c[0].label);
        } else if (k != null) {
          for (a = 0; a < k.length;) {
            c = k[a];
            ++a;
            this.list.push(c);
            c.resize(this.header.background.get_width(), this.header.background.get_height());
            c.set_x(1);
          }
        }
        this.updateButtonPositions();
        this.dropPanel.resize(this.header.background.get_width(), this.getPanelHeight());
        this.dropPanel.set_visible(false);
        this.add(this.dropPanel);
        a = 0;
        for (k = this.list; a < k.length;) {
          c = k[a];
          ++a;
          this.add(c);
          c.set_visible(false);
        }
        this.header.button.onUp.callback = m(this, this.onDropdown);
        this.add(this.header);
      }
      g["flixel.addons.ui.FlxUIDropDownMenu"] = sc;
      sc.__name__ = "flixel.addons.ui.FlxUIDropDownMenu";
      sc.__interfaces__ = [Ke, vf, td];
      sc.makeStrIdLabelArray = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = [];
        for (var d = 0, e = a.length; d < e;) {
          var f = d++;
          var k = a[f];
          if (b) {
            k = f == null ? "null" : "" + f;
          }
          c[f] = new Nk(k, a[f]);
        }
        return c;
      };
      sc.__super__ = cb;
      sc.prototype = q(cb.prototype, {
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          this.header.button.set_skipButtonUpdate(a);
          return a;
        },
        get_selectedId: function () {
          return this._selectedId;
        },
        set_selectedId: function (a) {
          if (this._selectedId == a) {
            return a;
          }
          var b = 0;
          for (var c = 0, d = this.list; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && e.name == a) {
              b = this.list[b];
              this._selectedId = a;
              if (b.label != null) {
                this._selectedLabel = b.label.text;
                this.header.text.set_text(b.label.text);
              } else {
                this._selectedLabel = "";
                this.header.text.set_text("");
              }
              break;
            }
            ++b;
          }
          return a;
        },
        get_selectedLabel: function () {
          return this._selectedLabel;
        },
        set_selectedLabel: function (a) {
          if (this._selectedLabel == a) {
            return a;
          }
          var b = 0;
          for (var c = 0, d = this.list; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.label.text == a) {
              this._selectedId = this.list[b].name;
              this._selectedLabel = a;
              this.header.text.set_text(a);
              break;
            }
            ++b;
          }
          return a;
        },
        set_params: function (a) {
          return this.params = a;
        },
        updateButtonPositions: function () {
          var a = this.header.background.get_height();
          this.dropPanel.set_y(this.header.background.y);
          if (this.dropsUp()) {
            var b = this.dropPanel;
            b.set_y(b.y - this.getPanelHeight());
          } else {
            b = this.dropPanel;
            b.set_y(b.y + a);
          }
          b = this.dropPanel.y;
          for (var c = 0, d = this.currentScroll; c < d;) {
            var e = c++;
            e = this.list[e];
            if (e != null) {
              e.set_y(h.height + 250);
            }
          }
          c = this.currentScroll;
          for (d = this.list.length; c < d;) {
            e = c++;
            e = this.list[e];
            if (e != null) {
              e.set_y(b);
              b += a;
            }
          }
        },
        set_visible: function (a) {
          var b = this.dropPanel.visible;
          var c = [];
          for (var d = 0, e = this.list.length; d < e;) {
            var f = d++;
            if (this.list[f] != null) {
              c.push(this.list[f].visible);
            } else {
              c.push(false);
            }
          }
          cb.prototype.set_visible.call(this, a);
          this.dropPanel.set_visible(b);
          d = 0;
          for (e = this.list.length; d < e;) {
            f = d++;
            if (this.list[f] != null) {
              this.list[f].set_visible(c[f]);
            }
          }
          return a;
        },
        dropsUp: function () {
          if (this.dropDirection != kj.Up) {
            if (this.dropDirection == kj.Automatic) {
              return this.exceedsHeight();
            } else {
              return false;
            }
          } else {
            return true;
          }
        },
        exceedsHeight: function () {
          return this.y + this.getPanelHeight() + this.header.background.get_height() > h.height;
        },
        getPanelHeight: function () {
          return this.list.length * this.header.background.get_height();
        },
        setData: function (a) {
          var b = 0;
          if (a != null) {
            for (var c = 0; c < a.length;) {
              var d = a[c];
              ++c;
              var e = false;
              if (this.list != null) {
                if (b <= this.list.length - 1) {
                  var f = this.list[b];
                  if (f != null) {
                    f.label.set_text(d.label);
                    this.list[b].name = d.name;
                    e = true;
                  }
                }
              } else {
                this.list = [];
              }
              if (!e) {
                d = this.makeListButton(b, d.label, d.name);
                this.list.push(d);
                this.add(d);
                d.set_visible(false);
              }
              ++b;
            }
            if (this.list.length > a.length) {
              c = a.length;
              b = this.list.length;
              while (c < b) {
                c++;
                d = this.list.pop();
                d.set_visible(false);
                d.set_active(false);
                this.remove(d, true);
                d.destroy();
              }
            }
            this.selectSomething(a[0].name, a[0].label);
          }
          this.dropPanel.resize(this.header.background.get_width(), this.getPanelHeight());
          this.updateButtonPositions();
        },
        selectSomething: function (a, b) {
          this.header.text.set_text(b);
          this.set_selectedId(a);
          this.set_selectedLabel(b);
        },
        makeListButton: function (a, b, c) {
          b = new ud(0, 0, b);
          b.broadcastToFlxUI = false;
          var d = this;
          b.onUp.callback = function () {
            d.onClickItem(a);
          };
          b.name = c;
          b.loadGraphicSlice9(["flixel/flixel-ui/img/invis.png", "flixel/flixel-ui/img/hilight.png", "flixel/flixel-ui/img/hilight.png"], this.header.background.get_width() | 0, this.header.background.get_height() | 0, [[1, 1, 3, 3], [1, 1, 3, 3], [1, 1, 3, 3]], 0);
          c = b.labelOffsets;
          c[2].set_y(c[2].y - 1);
          b.up_color = -16777216;
          b.over_color = -1;
          b.down_color = -1;
          b.resize(this.header.background.get_width() - 2, this.header.background.get_height() - 1);
          b.label.set_alignment("left");
          b.autoCenterLabel();
          b.set_x(1);
          c = 0;
          for (var e = b.labelOffsets; c < e.length;) {
            var f = e[c];
            ++c;
            f.set_x(f.x + 2);
          }
          return b;
        },
        update: function (a) {
          cb.prototype.update.call(this, a);
          if (this.dropPanel.visible) {
            if (this.list.length > 1 && this.canScroll) {
              a = this.currentScroll;
              if (h.mouse.wheel <= 0) {
                var b = h.keys.justPressed;
                b = b.keyManager.checkStatusUnsafe(38, b.status);
              } else {
                b = true;
              }
              if (b) {
                --this.currentScroll;
                if (this.currentScroll < 0) {
                  this.currentScroll = 0;
                }
              } else {
                if (h.mouse.wheel >= 0) {
                  b = h.keys.justPressed;
                  b = b.keyManager.checkStatusUnsafe(40, b.status);
                } else {
                  b = true;
                }
                if (b) {
                  this.currentScroll++;
                  if (this.currentScroll >= this.list.length) {
                    this.currentScroll = this.list.length - 1;
                  }
                }
              }
              if (a != this.currentScroll) {
                this.updateButtonPositions();
              }
            }
            if (h.mouse._leftButton.current == 2 && !h.mouse.overlaps(this, this.get_camera())) {
              this.showList(false);
            }
          }
        },
        destroy: function () {
          cb.prototype.destroy.call(this);
          this.dropPanel = ca.destroy(this.dropPanel);
          this.list = ca.destroyArray(this.list);
          this.callback = null;
        },
        showList: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            d.set_visible(a);
            d.set_active(a);
          }
          this.dropPanel.set_visible(a);
          if (this.currentScroll != 0) {
            this.currentScroll = 0;
            this.updateButtonPositions();
          }
          Ka.forceFocus(a, this);
        },
        onDropdown: function () {
          if (this.dropPanel.visible) {
            this.showList(false);
          } else {
            this.showList(true);
          }
        },
        onClickItem: function (a) {
          a = this.list[a];
          this.selectSomething(a.name, a.label.text);
          this.showList(false);
          if (this.callback != null) {
            this.callback(a.name);
          }
          if (this.broadcastToFlxUI) {
            Ka.event("click_dropdown", this, a.name, this.params);
          }
        },
        __class__: sc,
        __properties__: q(cb.prototype.__properties__, {
          set_params: "set_params",
          set_selectedLabel: "set_selectedLabel",
          get_selectedLabel: "get_selectedLabel",
          set_selectedId: "set_selectedId",
          get_selectedId: "get_selectedId",
          set_skipButtonUpdate: "set_skipButtonUpdate"
        })
      });
      function gj(a, b, c, d) {
        if (a == null) {
          a = 120;
        }
        cb.call(this);
        this.background = b;
        this.text = c;
        this.button = d;
        if (this.background == null) {
          this.background = new Z(0, 0, "flixel/flixel-ui/img/box.png", new da(0, 0, a, 20), [1, 1, 14, 14]);
        }
        if (this.button == null) {
          this.button = new bf(0, 0, new F(0, 0, "flixel/flixel-ui/img/dropdown_mark.png"));
          this.button.loadGraphicSlice9(["flixel/flixel-ui/img/button_thin.png"], 80, 20, [Ub.toIntArray("6,6,11,11")], 0, -1, false, 18, 18);
        }
        this.button.resize(this.background.get_height(), this.background.get_height());
        this.button.set_x(this.background.x + this.background.get_width() - this.button.get_width());
        this.button.set_width(a);
        b = this.button;
        b.offset.set_x(b.offset.x - (a - this.button.frameWidth));
        this.button.set_x(this.offset.x);
        b = this.button.label;
        b.offset.set_x(b.offset.x + this.button.offset.x);
        if (this.text == null) {
          this.text = new Xd(0, 0, this.background.get_width() | 0);
        }
        this.text.setPosition(2, 4);
        this.text.set_color(-16777216);
        this.add(this.background);
        this.add(this.button);
        this.add(this.text);
      }
      g["flixel.addons.ui.FlxUIDropDownHeader"] = gj;
      gj.__name__ = "flixel.addons.ui.FlxUIDropDownHeader";
      gj.__super__ = cb;
      gj.prototype = q(cb.prototype, {
        destroy: function () {
          cb.prototype.destroy.call(this);
          this.background = ca.destroy(this.background);
          this.text = ca.destroy(this.text);
          this.button = ca.destroy(this.button);
        },
        __class__: gj
      });
      var kj = z["flixel.addons.ui.FlxUIDropDownMenuDropDirection"] = {
        __ename__: "flixel.addons.ui.FlxUIDropDownMenuDropDirection",
        __constructs__: null,
        Automatic: {
          _hx_name: "Automatic",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.FlxUIDropDownMenuDropDirection",
          toString: p
        },
        Down: {
          _hx_name: "Down",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.FlxUIDropDownMenuDropDirection",
          toString: p
        },
        Up: {
          _hx_name: "Up",
          _hx_index: 2,
          __enum__: "flixel.addons.ui.FlxUIDropDownMenuDropDirection",
          toString: p
        }
      };
      kj.__constructs__ = [kj.Automatic, kj.Down, kj.Up];
      function ub(a, b, c, d, e, f, k, t) {
        this.broadcastToFlxUI = true;
        af.call(this, a, b, c, d, e, f, k, t);
      }
      g["flixel.addons.ui.FlxUIInputText"] = ub;
      ub.__name__ = "flixel.addons.ui.FlxUIInputText";
      ub.__interfaces__ = [Ke, td, cd];
      ub.__super__ = af;
      ub.prototype = q(af.prototype, {
        resize: function (a, b) {
          this.set_width(a);
          this.set_height(b);
          this.calcFrame();
        },
        onChange: function (a) {
          af.prototype.onChange.call(this, a);
          if (this.broadcastToFlxUI) {
            switch (a) {
              case "backspace":
              case "delete":
                Ka.event("delete_input_text", this, this.text, this.params);
                Ka.event("change_input_text", this, this.text, this.params);
                break;
              case "copy":
                Ka.event("copy_input_text", this, this.text, this.params);
                break;
              case "cut":
                Ka.event("cut_input_text", this, this.text, this.params);
                Ka.event("change_input_text", this, this.text, this.params);
                break;
              case "enter":
                Ka.event("enter_input_text", this, this.text, this.params);
                break;
              case "input":
                Ka.event("input_input_text", this, this.text, this.params);
                Ka.event("change_input_text", this, this.text, this.params);
                break;
              case "paste":
                Ka.event("paste_input_text", this, this.text, this.params);
                Ka.event("change_input_text", this, this.text, this.params);
            }
          }
        },
        __class__: ub
      });
      function hj(a, b, c, d, e, f) {
        this.thickness = 1;
        this.length = 10;
        this.axis = Ig.HORIZONTAL;
        Cc.call(this, a, b);
        this.makeGraphic(2, 2, -1);
        this.set_color(f);
        this.set_axis(c);
        this.set_length(d);
        this.set_thickness(e);
      }
      g["flixel.addons.ui.FlxUILine"] = hj;
      hj.__name__ = "flixel.addons.ui.FlxUILine";
      hj.__interfaces__ = [cd];
      hj.__super__ = Cc;
      hj.prototype = q(Cc.prototype, {
        set_axis: function (a) {
          this.axis = a;
          this.refresh();
          return a;
        },
        set_length: function (a) {
          this.length = a;
          this.refresh();
          return a;
        },
        set_thickness: function (a) {
          this.thickness = a;
          this.refresh();
          return a;
        },
        refresh: function () {
          if (this.axis == Ig.HORIZONTAL) {
            var a = this.scale;
            var b = this.length * 0.5;
            var c = this.thickness * 0.5;
          } else {
            a = this.scale;
            b = this.thickness * 0.5;
            c = this.length * 0.5;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this.updateHitbox();
        },
        resize: function (a, b) {
          if (this.axis == Ig.HORIZONTAL) {
            this.set_length(a);
            this.set_thickness(b);
          } else {
            this.set_length(b);
            this.set_thickness(a);
          }
        },
        __class__: hj,
        __properties__: q(Cc.prototype.__properties__, {
          set_thickness: "set_thickness",
          set_length: "set_length",
          set_axis: "set_axis"
        })
      });
      var Ig = z["flixel.addons.ui.LineAxis"] = {
        __ename__: "flixel.addons.ui.LineAxis",
        __constructs__: null,
        HORIZONTAL: {
          _hx_name: "HORIZONTAL",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.LineAxis",
          toString: p
        },
        VERTICAL: {
          _hx_name: "VERTICAL",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.LineAxis",
          toString: p
        }
      };
      Ig.__constructs__ = [Ig.HORIZONTAL, Ig.VERTICAL];
      function Pk(a, b, c, d, e, f, k, t, h, K, g, l) {
        if (t == null) {
          t = 0;
        }
        if (k == null) {
          k = 1;
        }
        if (f == null) {
          f = "<X> more...";
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._skipRefresh = false;
        this.scrollIndex = 0;
        this._skipRefresh = true;
        cb.call(this, a, b);
        this.set_stacking(k);
        this.set_spacing(t);
        if (c != null) {
          for (var n = 0; n < c.length;) {
            a = c[n];
            ++n;
            this.add(a);
          }
        }
        this.prevButton = g;
        this.nextButton = l;
        this.prevButtonOffset = h;
        this.nextButtonOffset = K;
        this.set_moreString(f);
        if (this.prevButton == null) {
          n = this;
          c = new ud(0, 0, " ", function () {
            n.onClick(-1);
          });
          if (this.stacking == 0) {
            c.loadGraphicsUpOverDown("flixel/flixel-ui/img/button_arrow_left.png");
            c.label.set_width(c.label.set_fieldWidth(100));
            c.label.set_text(this.getMoreString(0));
            c.setAllLabelOffsets(c.get_width() - c.label.get_width(), c.get_height() + 2);
            c.label.set_alignment("right");
          } else {
            c.loadGraphicsUpOverDown("flixel/flixel-ui/img/button_arrow_up.png");
            c.label.set_width(c.label.set_fieldWidth(100));
            c.label.set_text(this.getMoreString(0));
            c.setAllLabelOffsets(0, 0);
            c.setCenterLabelOffset(c.get_width() + 2, c.get_height() - c.label.get_height());
            c.label.set_alignment("left");
          }
          this.prevButton = c;
        } else {
          if (this.prevButton instanceof ud) {
            c = this.prevButton;
            var p = this;
            c.onUp.callback = function () {
              p.onClick(-1);
            };
          }
          if (this.prevButton instanceof bf) {
            c = this.prevButton;
            var m = this;
            c.onUp.callback = function () {
              m.onClick(-1);
            };
          }
        }
        if (this.nextButton == null) {
          var ya = this;
          c = new ud(0, 0, " ", function () {
            ya.onClick(1);
          });
          if (this.stacking == 0) {
            c.loadGraphicsUpOverDown("flixel/flixel-ui/img/button_arrow_right.png");
            c.label.set_width(c.label.set_fieldWidth(100));
            c.label.set_text(this.getMoreString(0));
            c.setAllLabelOffsets(0, c.get_height() + 2);
          } else {
            c.loadGraphicsUpOverDown("flixel/flixel-ui/img/button_arrow_down.png");
            c.label.set_width(c.label.set_fieldWidth(100));
            c.label.set_text(this.getMoreString(0));
            c.setAllLabelOffsets(0, 0);
            c.setCenterLabelOffset(c.get_width() + 2, 0);
          }
          c.label.set_alignment("left");
          this.nextButton = c;
        } else {
          if (this.nextButton instanceof ud) {
            c = this.nextButton;
            var v = this;
            c.onUp.callback = function () {
              v.onClick(1);
            };
          }
          if (this.nextButton instanceof bf) {
            c = this.nextButton;
            var q = this;
            c.onUp.callback = function () {
              q.onClick(1);
            };
          }
        }
        if (this.prevButtonOffset == null) {
          c = f = 0;
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          c = W.pool.get().set(f, c);
          c._inPool = false;
          this.prevButtonOffset = c;
        }
        if (this.nextButtonOffset == null) {
          c = f = 0;
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          c = W.pool.get().set(f, c);
          c._inPool = false;
          this.nextButtonOffset = c;
        }
        this._skipRefresh = false;
        this.setSize(d, e);
      }
      g["flixel.addons.ui.FlxUIList"] = Pk;
      Pk.__name__ = "flixel.addons.ui.FlxUIList";
      Pk.__super__ = cb;
      Pk.prototype = q(cb.prototype, {
        set_scrollIndex: function (a) {
          this.scrollIndex = a;
          this.refreshList();
          return a;
        },
        set_stacking: function (a) {
          this.stacking = a;
          this.refreshList();
          return a;
        },
        set_spacing: function (a) {
          this.spacing = a;
          this.refreshList();
          return a;
        },
        set_moreString: function (a) {
          this.moreString = a;
          this.refreshList();
          return this.moreString;
        },
        destroy: function () {
          this.prevButton = ca.destroy(this.prevButton);
          this.nextButton = ca.destroy(this.nextButton);
          this.prevButtonOffset = ca.put(this.prevButtonOffset);
          this.nextButtonOffset = ca.put(this.nextButtonOffset);
          cb.prototype.destroy.call(this);
        },
        setSize: function (a, b) {
          var c = false;
          if (this._skipRefresh == 0) {
            c = this._skipRefresh = true;
          }
          this.set_width(a);
          this.set_height(b);
          if (c) {
            this._skipRefresh = false;
          }
          this.refreshList();
        },
        add: function (a) {
          cb.prototype.add.call(this, a);
          this.refreshList();
          return a;
        },
        safeAdd: function (a) {
          return cb.prototype.add.call(this, a);
        },
        getMoreString: function (a) {
          for (var b = this.moreString; b.indexOf("<X>") != -1;) {
            b = w.replace(b, "<X>", a == null ? "null" : "" + a);
          }
          return b;
        },
        set_visible: function (a) {
          cb.prototype.set_visible.call(this, a);
          this.refreshList();
          return a;
        },
        onClick: function (a) {
          this.set_scrollIndex(this.scrollIndex + a);
          this.refreshList();
        },
        refreshList: function () {
          if (!this._skipRefresh) {
            this.autoBounds = false;
            if (this.group.members.indexOf(this.prevButton) != -1) {
              this.remove(this.prevButton, true);
            }
            if (this.group.members.indexOf(this.nextButton) != -1) {
              this.remove(this.nextButton, true);
            }
            var a = 0;
            var b = 0;
            var c = 0;
            if (this.stacking == 0) {
              this.prevButton.set_x(this.prevButtonOffset.x - this.prevButton.get_width() - 2);
              this.prevButton.set_y(this.prevButtonOffset.y);
              this.nextButton.set_x(this.nextButtonOffset.x + this.get_width() + 2);
              this.nextButton.set_y(this.nextButtonOffset.y);
            } else {
              this.prevButton.set_x(this.prevButtonOffset.x);
              this.prevButton.set_y(this.prevButtonOffset.y - this.prevButton.get_height() - 2);
              this.nextButton.set_x(this.nextButtonOffset.x);
              this.nextButton.set_y(this.nextButtonOffset.y + this.get_height() + 2);
            }
            this.prevButton.set_x(this.prevButton.x | 0);
            this.prevButton.set_y(this.prevButton.y | 0);
            this.nextButton.set_x(this.nextButton.x | 0);
            this.nextButton.set_y(this.nextButton.y | 0);
            for (var d = 0, e = 0, f = this.group.members; e < f.length;) {
              var k = f[e];
              ++e;
              var t = false;
              if (c >= this.scrollIndex) {
                t = this.stacking == 1 ? b + k.get_height() <= this.get_height() || this.get_height() <= 0 : a + k.get_width() <= this.get_width() || this.get_width() <= 0;
              }
              if (t) {
                d = c;
                k.set_visible(k.set_active(true));
                k.set_x(this.x + a);
                k.set_y(this.y + b);
                if (this.stacking == 1) {
                  b += k.get_height() + this.spacing;
                } else {
                  a += k.get_width() + this.spacing;
                }
              } else {
                k.set_x(k.set_y(0));
                k.set_visible(k.set_active(false));
              }
              ++c;
            }
            this.amountPrevious = this.scrollIndex;
            this.amountNext = this.group.members.length - (d + 1);
            if (this.amountPrevious > 0) {
              this.safeAdd(this.prevButton);
              if (this.prevButton instanceof ud) {
                a = this.prevButton;
                a.label.set_text(this.getMoreString(this.amountPrevious));
              }
            }
            if (this.amountNext > 0) {
              this.safeAdd(this.nextButton);
              if (this.nextButton instanceof ud) {
                a = this.nextButton;
                a.label.set_text(this.getMoreString(this.amountNext));
              }
            }
          }
        },
        get_width: function () {
          return this.width;
        },
        get_height: function () {
          return this.height;
        },
        set_width: function (a) {
          this.width = a;
          this.refreshList();
          return a;
        },
        set_height: function (a) {
          this.height = a;
          this.refreshList();
          return a;
        },
        __class__: Pk,
        __properties__: q(cb.prototype.__properties__, {
          set_moreString: "set_moreString",
          set_spacing: "set_spacing",
          set_stacking: "set_stacking",
          set_scrollIndex: "set_scrollIndex"
        })
      });
      function ed() {
        this.x = this.y = this.screenX = this.screenY = this._globalScreenX = this._globalScreenY = 0;
      }
      g["flixel.input.FlxPointer"] = ed;
      ed.__name__ = "flixel.input.FlxPointer";
      ed.prototype = {
        getWorldPosition: function (a, b) {
          if (a == null) {
            a = h.camera;
          }
          if (b == null) {
            var c = b = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = W.pool.get().set(b, c);
            b._inPool = false;
          }
          this.getScreenPosition(a, ed._cachedPoint);
          b.set_x(ed._cachedPoint.x + a.scroll.x);
          b.set_y(ed._cachedPoint.y + a.scroll.y);
          return b;
        },
        getScreenPosition: function (a, b) {
          if (a == null) {
            a = h.camera;
          }
          if (b == null) {
            var c = b = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = W.pool.get().set(b, c);
            b._inPool = false;
          }
          b.set_x((this._globalScreenX - a.x + a.width * 0.5 * (a.zoom - a.initialZoom)) / a.zoom);
          b.set_y((this._globalScreenY - a.y + a.height * 0.5 * (a.zoom - a.initialZoom)) / a.zoom);
          return b;
        },
        getPositionInCameraView: function (a, b) {
          if (a == null) {
            a = h.camera;
          }
          if (b == null) {
            var c = b = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = W.pool.get().set(b, c);
            b._inPool = false;
          }
          b.set_x((this._globalScreenX - a.x) / a.zoom + a.viewMarginX);
          b.set_y((this._globalScreenY - a.y) / a.zoom + a.viewMarginY);
          return b;
        },
        overlaps: function (a, b) {
          var c = this;
          var d = false;
          var e = Qa.resolveGroup(a);
          if (e != null) {
            e.forEachExists(function (a) {
              if (c.overlaps(a, b)) {
                d = true;
              }
            });
          } else {
            this.getWorldPosition(b, ed._cachedPoint);
            d = a.overlapsPoint(ed._cachedPoint, true, b);
          }
          return d;
        },
        updatePositions: function () {
          this.getScreenPosition(h.camera, ed._cachedPoint);
          this.screenX = ed._cachedPoint.x | 0;
          this.screenY = ed._cachedPoint.y | 0;
          this.getWorldPosition(h.camera, ed._cachedPoint);
          this.x = ed._cachedPoint.x | 0;
          this.y = ed._cachedPoint.y | 0;
        },
        __class__: ed
      };
      function Lg() {}
      g["flixel.input.IFlxInputManager"] = Lg;
      Lg.__name__ = "flixel.input.IFlxInputManager";
      Lg.__isInterface__ = true;
      Lg.__interfaces__ = [rb];
      Lg.prototype = {
        __class__: Lg
      };
      function hg(a) {
        this._prevX = this._prevY = this._prevScreenX = this._prevScreenY = 0;
        this._visibleWhenFocusLost = true;
        this.useSystemCursor = this._wheelUsed = false;
        this.visible = true;
        this.wheel = 0;
        this.enabled = true;
        ed.call(this);
        this.cursorContainer = a;
        this.cursorContainer.mouseChildren = false;
        this.cursorContainer.mouseEnabled = false;
        this._leftButton = new cf(-1);
        this._stage = oa.get_current().stage;
        this._stage.addEventListener("mouseDown", (u = this._leftButton, m(u, u.onDown)));
        this._stage.addEventListener("mouseUp", (u = this._leftButton, m(u, u.onUp)));
        this._middleButton = new cf(-2);
        this._rightButton = new cf(-3);
        this._stage.addEventListener("middleMouseDown", (u = this._middleButton, m(u, u.onDown)));
        this._stage.addEventListener("middleMouseUp", (u = this._middleButton, m(u, u.onUp)));
        this._stage.addEventListener("rightMouseDown", (u = this._rightButton, m(u, u.onDown)));
        this._stage.addEventListener("rightMouseUp", (u = this._rightButton, m(u, u.onUp)));
        this._stage.addEventListener("mouseLeave", m(this, this.onMouseLeave));
        this._stage.addEventListener("mouseWheel", m(this, this.onMouseWheel));
        h.signals.postGameStart.add(m(this, this.onGameStart));
        fd.hide();
      }
      g["flixel.input.mouse.FlxMouse"] = hg;
      hg.__name__ = "flixel.input.mouse.FlxMouse";
      hg.__interfaces__ = [Lg];
      hg.__super__ = ed;
      hg.prototype = q(ed.prototype, {
        load: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 1;
          }
          if (this.cursor != null) {
            ca.removeChild(this.cursorContainer, this.cursor);
          }
          if (a == null) {
            a = new Le(0, 0);
          }
          if (va.__instanceof(a, Vi)) {
            this.cursor = yb.createInstance(a, []);
          } else if (a instanceof T) {
            this.cursor = new Nc(a);
          } else if (typeof a == "string") {
            if (Q.exists(a)) {
              a = Q.getBitmapData(a, true);
            } else {
              h.log.advanced("Could not find a BitmapData asset with ID '" + a + "'.", xa.ERROR, true);
              a = null;
            }
            this.cursor = new Nc(a);
          } else {
            this.cursor = new Nc(new Le(0, 0));
          }
          this.cursor.set_x(c);
          this.cursor.set_y(d);
          this.cursor.set_scaleX(b);
          this.cursor.set_scaleY(b);
          this.cursorContainer.addChild(this.cursor);
        },
        destroy: function () {
          if (this._stage != null) {
            this._stage.removeEventListener("mouseDown", (u = this._leftButton, m(u, u.onDown)));
            this._stage.removeEventListener("mouseUp", (u = this._leftButton, m(u, u.onUp)));
            this._stage.removeEventListener("middleMouseDown", (u = this._middleButton, m(u, u.onDown)));
            this._stage.removeEventListener("middleMouseUp", (u = this._middleButton, m(u, u.onUp)));
            this._stage.removeEventListener("rightMouseDown", (u = this._rightButton, m(u, u.onDown)));
            this._stage.removeEventListener("rightMouseUp", (u = this._rightButton, m(u, u.onUp)));
            this._stage.removeEventListener("mouseLeave", m(this, this.onMouseLeave));
            this._stage.removeEventListener("mouseWheel", m(this, this.onMouseWheel));
          }
          this.cursor = this.cursorContainer = null;
          this._leftButton = ca.destroy(this._leftButton);
          this._middleButton = ca.destroy(this._middleButton);
          this._rightButton = ca.destroy(this._rightButton);
          this._cursorBitmapData = ca.dispose(this._cursorBitmapData);
          h.signals.postGameStart.remove(m(this, this.onGameStart));
        },
        reset: function () {
          this._leftButton.reset();
          this._middleButton.reset();
          this._rightButton.reset();
        },
        update: function () {
          this._prevX = this.x;
          this._prevY = this.y;
          this._prevScreenX = this.screenX;
          this._prevScreenY = this.screenY;
          var a = h.game.get_mouseX();
          var b = h.game.get_mouseY();
          this._globalScreenX = a / h.scaleMode.scale.x | 0;
          this._globalScreenY = b / h.scaleMode.scale.y | 0;
          this.updatePositions();
          if (this.visible) {
            this.cursorContainer.set_x(h.game.get_mouseX());
            this.cursorContainer.set_y(h.game.get_mouseY());
          }
          this._leftButton.update();
          this._middleButton.update();
          this._rightButton.update();
          if (!this._wheelUsed) {
            this.wheel = 0;
          }
          this._wheelUsed = false;
        },
        onFocus: function () {
          this.reset();
          this.set_useSystemCursor(this.useSystemCursor);
          this.set_visible(this._visibleWhenFocusLost);
        },
        onFocusLost: function () {
          if (this._visibleWhenFocusLost = this.visible) {
            this.set_visible(false);
          }
          fd.show();
        },
        onGameStart: function () {
          this.set_visible(this.visible);
        },
        onMouseWheel: function (a) {
          if (this.enabled) {
            this._wheelUsed = true;
            this.wheel = a.delta;
          }
        },
        onMouseLeave: function (a) {
          this._rightButton.onUp();
          this._middleButton.onUp();
        },
        showSystemCursor: function () {
          this.cursorContainer.set_visible(false);
          fd.show();
        },
        hideSystemCursor: function () {
          fd.hide();
          if (this.visible) {
            this.cursorContainer.set_visible(true);
          }
        },
        set_useSystemCursor: function (a) {
          if (a) {
            this.showSystemCursor();
          } else {
            this.hideSystemCursor();
          }
          return this.useSystemCursor = a;
        },
        showCursor: function () {
          if (this.useSystemCursor) {
            fd.show();
          } else {
            if (this.cursor == null) {
              this.load();
            }
            this.cursorContainer.set_visible(true);
            fd.hide();
          }
        },
        hideCursor: function () {
          this.cursorContainer.set_visible(false);
          fd.hide();
        },
        set_visible: function (a) {
          if (a) {
            this.showCursor();
          } else {
            this.hideCursor();
          }
          return this.visible = a;
        },
        __class__: hg,
        __properties__: {
          set_useSystemCursor: "set_useSystemCursor",
          set_visible: "set_visible"
        }
      });
      function jj(a) {
        this.updateGlobalScreenPosition = true;
        hg.call(this, a);
      }
      g["flixel.addons.ui.FlxUIMouse"] = jj;
      jj.__name__ = "flixel.addons.ui.FlxUIMouse";
      jj.__super__ = hg;
      jj.prototype = q(hg.prototype, {
        update: function () {
          var a = this._globalScreenX;
          var b = this._globalScreenY;
          hg.prototype.update.call(this);
          if (!this.updateGlobalScreenPosition) {
            this._globalScreenX = a;
            this._globalScreenY = b;
          }
        },
        __class__: jj
      });
      function Ib(a, b, c, d, e, f, k, t, h, K, g, l) {
        if (l == null) {
          l = false;
        }
        if (t == null) {
          t = 1;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 999;
        }
        if (e == null) {
          e = -999;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.isPercent = false;
        this.stack = 1;
        this.value = 0;
        this.max = 10;
        this.stepSize = this.decimals = this.min = 0;
        cb.call(this, a, b);
        if (h == null) {
          h = new ub(0, 0, 25);
        }
        h.set_x(0);
        h.set_y(0);
        this.text_field = h;
        this.text_field.set_text(d == null ? "null" : "" + d);
        if (this.text_field instanceof ub) {
          a = this.text_field;
          a.set_lines(1);
          a.callback = m(this, this._onInputTextEvent);
          a.broadcastToFlxUI = false;
        }
        this.stepSize = c;
        this.set_decimals(k);
        this.set_min(e);
        this.set_max(f);
        this.set_value(d);
        this.set_isPercent(l);
        c = 1 + h.get_height();
        if (K == null) {
          K = new Jc(0, 0);
          K.loadGraphicSlice9(["flixel/flixel-ui/img/button_thin.png"], c, c, [Ub.toIntArray("2,2,15,15")], 0, -1, false, 18, 18);
          K.set_label(new F(0, 0, "flixel/flixel-ui/img/plus_mark.png"));
        }
        if (g == null) {
          g = new Jc(0, 0);
          g.loadGraphicSlice9(["flixel/flixel-ui/img/button_thin.png"], c, c, [Ub.toIntArray("2,2,15,15")], 0, -1, false, 18, 18);
          g.set_label(new F(0, 0, "flixel/flixel-ui/img/minus_mark.png"));
        }
        this.button_plus = K;
        this.button_minus = g;
        this.add(this.text_field);
        this.add(this.button_plus);
        this.add(this.button_minus);
        this.button_plus.onUp.callback = m(this, this._onPlus);
        this.button_plus.broadcastToFlxUI = false;
        this.button_minus.onUp.callback = m(this, this._onMinus);
        this.button_minus.broadcastToFlxUI = false;
        this.set_stack(t);
      }
      g["flixel.addons.ui.FlxUINumericStepper"] = Ib;
      Ib.__name__ = "flixel.addons.ui.FlxUINumericStepper";
      Ib.__interfaces__ = [Ke, vf, td];
      Ib.__super__ = cb;
      Ib.prototype = q(cb.prototype, {
        set_params: function (a) {
          return this.params = a;
        },
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          this.button_plus.set_skipButtonUpdate(a);
          this.button_minus.set_skipButtonUpdate(a);
          return a;
        },
        set_color: function (a) {
          this.color = a;
          this.button_plus.set_color(a);
          this.button_minus.set_color(a);
          if (this.text_field instanceof af) {
            this.text_field.set_backgroundColor(a);
          } else {
            this.text_field.set_color(a);
          }
          return a;
        },
        set_min: function (a) {
          this.min = a;
          if (this.value < this.min) {
            this.set_value(this.min);
          }
          return this.min;
        },
        set_max: function (a) {
          this.max = a;
          if (this.value > this.max) {
            this.set_value(this.max);
          }
          return this.max;
        },
        set_value: function (a) {
          this.value = a;
          if (this.value < this.min) {
            this.value = this.min;
          }
          if (this.value > this.max) {
            this.value = this.max;
          }
          if (this.text_field != null) {
            a = this.value;
            if (this.isPercent) {
              var b = Math.pow(10, this.decimals);
              this.text_field.set_text(v.string(v.string(Math.round(a * 100 * b) / b)) + "%");
            } else {
              b = Math.pow(10, this.decimals);
              this.text_field.set_text(v.string(Math.round(a * b) / b));
            }
          }
          return this.value;
        },
        set_decimals: function (a) {
          this.decimals = a;
          if (a < 0) {
            this.decimals = 0;
          }
          this.set_value(this.value);
          return this.decimals;
        },
        set_isPercent: function (a) {
          this.isPercent = a;
          this.set_value(this.value);
          return this.isPercent;
        },
        set_stack: function (a) {
          this.stack = a;
          var b = 0;
          var c = 0;
          if (this.text_field instanceof ub) {
            c = b = 1;
          }
          switch (this.stack) {
            case 0:
              a = 1 + this.text_field.get_height() / 2;
              if (this.button_plus.get_height() != a) {
                this.button_plus.resize(a, a);
              }
              if (this.button_minus.get_height() != a) {
                this.button_minus.resize(a, a);
              }
              this.button_plus.set_x(b + this.text_field.x + this.text_field.get_width());
              this.button_plus.set_y(-c + this.text_field.y);
              this.button_minus.set_x(b + this.text_field.x + this.text_field.get_width());
              this.button_minus.set_y(c + this.text_field.y + (this.text_field.get_height() - this.button_minus.get_height()));
              break;
            case 1:
              a = 2 + this.text_field.get_height();
              if (this.button_plus.get_height() != a) {
                this.button_plus.resize(a, a);
              }
              if (this.button_minus.get_height() != a) {
                this.button_minus.resize(a, a);
              }
              this.button_plus.set_x(b + this.text_field.x + this.text_field.get_width());
              this.button_plus.set_y(-c + this.text_field.y);
              this.button_minus.set_x(this.button_plus.x + this.button_plus.get_width());
              this.button_minus.set_y(this.button_plus.y);
          }
          return this.stack;
        },
        _onInputTextEvent: function (a, b) {
          if (a == "") {
            a = v.string(this.min);
          }
          for (var c = b = 0, d = a.length; c < d;) {
            var e = c++;
            if (a.charAt(e) == ".") {
              ++b;
            }
          }
          if (b != 1 || a.indexOf(".") != a.length - 1) {
            this.set_value(parseFloat(a));
            this._doCallback("edit_numeric_stepper");
            this._doCallback("change_numeric_stepper");
          }
        },
        _onPlus: function () {
          this.set_value(this.value + this.stepSize);
          this._doCallback("click_numeric_stepper");
          this._doCallback("change_numeric_stepper");
        },
        _onMinus: function () {
          this.set_value(this.value - this.stepSize);
          this._doCallback("click_numeric_stepper");
          this._doCallback("change_numeric_stepper");
        },
        _doCallback: function (a) {
          if (this.broadcastToFlxUI) {
            Ka.event(a, this, this.value, this.params);
          }
        },
        __class__: Ib,
        __properties__: q(cb.prototype.__properties__, {
          set_skipButtonUpdate: "set_skipButtonUpdate",
          set_params: "set_params",
          set_isPercent: "set_isPercent",
          set_stack: "set_stack",
          set_value: "set_value",
          set_max: "set_max",
          set_min: "set_min",
          set_decimals: "set_decimals"
        })
      });
      function Vf(a) {
        if (a == null) {
          a = 0;
        }
        this.getTextFallback = null;
        this._reload_countdown = 0;
        this.reload_ui_on_resize = this._reload = false;
        this._xml_id = "";
        this.cursor = null;
        rd.call(this, a);
      }
      g["flixel.addons.ui.FlxUISubState"] = Vf;
      Vf.__name__ = "flixel.addons.ui.FlxUISubState";
      Vf.__interfaces__ = [Eg];
      Vf.__super__ = rd;
      Vf.prototype = q(rd.prototype, {
        forceScrollFactor: function (a, b) {
          if (this._ui != null) {
            for (var c = 0, d = this._ui.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              e = e.scrollFactor;
              var f = a;
              var k = b;
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              e.set_x(f);
              e.set_y(k);
            }
            if (this._ui.scrollFactor != null) {
              e = this._ui.scrollFactor;
              f = a;
              k = b;
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              e.set_x(f);
              e.set_y(k);
            }
          }
        },
        forceFocus: function (a, b) {
          if (this._ui != null) {
            if (a) {
              this._ui.set_focus(b);
            } else {
              this._ui.set_focus(null);
            }
          }
        },
        create: function () {
          if (Td.static_tongue != null) {
            this._tongue = Td.static_tongue;
          }
          if (this._makeCursor == 1) {
            this.cursor = this.createCursor();
          }
          this.tooltips = new Pi(null, this);
          this._ui = this.createUI(null, this, null, this._tongue);
          this.add(this._ui);
          this._ui.getTextFallback = this.getTextFallback;
          if (this._xml_id != "" && this._xml_id != null) {
            var a = C.xml(this._xml_id);
            if (a == null) {
              a = C.xml(this._xml_id, "xml", true, "");
            }
            if (a != null) {
              this._ui.load(a);
            }
          } else {
            this._ui.load(null);
          }
          if (this.cursor != null && this._ui != null) {
            this.add(this.cursor);
            this.cursor.addWidgetsFromUI(this._ui);
            this.cursor.findVisibleLocation(0);
          }
          h.mouse.set_visible(true);
          this.tooltips.init();
          rd.prototype.create.call(this);
          this.cleanup();
          if (this._parentState instanceof Td) {
            this.reload_ui_on_resize = va.__cast(this._parentState, Td).reload_ui_on_resize;
          }
        },
        onCursorEvent: function (a, b) {
          this.getEvent(a, b, null);
        },
        onShowTooltip: function (a) {},
        onResize: function (a, b) {
          if (this.reload_ui_on_resize) {
            h.scaleMode.onMeasure(a, b);
            this._reload_countdown = 5;
            this._reload = true;
          }
        },
        update: function (a) {
          rd.prototype.update.call(this, a);
          this.tooltips.update(a);
          if (this._reload && this._reload_countdown > 0) {
            this._reload_countdown--;
            if (this._reload_countdown == 0) {
              this.reloadUI();
            }
          }
        },
        destroy: function () {
          this.destroyed = true;
          if (this.tooltips != null) {
            this.tooltips.destroy();
            this.tooltips = null;
          }
          if (this._ui != null) {
            this._ui.destroy();
            this.remove(this._ui, true);
            this._ui = null;
          }
          rd.prototype.destroy.call(this);
        },
        getEvent: function (a, b, c, d) {},
        getRequest: function (a, b, c, d) {
          return null;
        },
        getText: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = "ui";
          }
          if (this._tongue != null) {
            return this._tongue.get(a, b, c);
          } else if (this.getTextFallback != null) {
            return this.getTextFallback(a, b, c);
          } else {
            return a;
          }
        },
        cleanup: function () {
          this._ui.cleanup();
        },
        createCursor: function () {
          return new Qi(m(this, this.onCursorEvent));
        },
        createUI: function (a, b, c, d, e) {
          if (e == null) {
            e = "";
          }
          return new Ka(a, b, c, d, e);
        },
        reloadUI: function () {
          if (this._ui != null) {
            this.remove(this._ui, true);
            this._ui.destroy();
            this._ui = null;
          }
          this._ui = this.createUI(null, this, null, this._tongue);
          this.add(this._ui);
          var a = C.xml(this._xml_id);
          this._ui.load(a);
          this._reload = false;
          this._reload_countdown = 0;
        },
        __class__: Vf
      });
      function lj(a) {
        this._quickSetupParams = null;
        this._width = this._height = 0;
        this.alpha = 1;
        this.params = null;
        this.x = this.y = 0;
        this.broadcastToFlxUI = true;
        Vf.call(this, a);
      }
      g["flixel.addons.ui.FlxUIPopup"] = lj;
      lj.__name__ = "flixel.addons.ui.FlxUIPopup";
      lj.__interfaces__ = [td];
      lj.__super__ = Vf;
      lj.prototype = q(Vf.prototype, {
        set_immovable: function (a) {
          return this.immovable;
        },
        set_x: function (a) {
          return this.x = a;
        },
        set_y: function (a) {
          return this.y = a;
        },
        get_width: function () {
          return this._width;
        },
        get_height: function () {
          return this._height;
        },
        set_width: function (a) {
          return this._width = a;
        },
        set_height: function (a) {
          return this._height = a;
        },
        set_angle: function (a) {
          return this.angle = a;
        },
        set_alpha: function (a) {
          return this.alpha = a;
        },
        set_facing: function (a) {
          return this.facing = a;
        },
        set_moves: function (a) {
          return this.moves = a;
        },
        set_offset: function (a) {
          return this.offset = a;
        },
        set_origin: function (a) {
          return this.origin = a;
        },
        set_scale: function (a) {
          return this.scale = a;
        },
        set_scrollFactor: function (a) {
          return this.scrollFactor = a;
        },
        reset: function (a, b) {
          this.setPosition(a, b);
        },
        setPosition: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.set_x(a);
          this.set_y(b);
        },
        create: function () {
          if (this._xml_id == "") {
            this._xml_id = "flixel/flixel-ui/xml/default_popup";
          }
          var a = 0;
          var b = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = W.pool.get().set(a, b);
          b._inPool = false;
          this.set_scrollFactor(b);
          this.getTextFallback = m(this, this.myGetTextFallback);
          Vf.prototype.create.call(this);
          if (this._quickSetupParams != null) {
            this._doQuickSetup();
          }
          var c = this.scrollFactor;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
          this._ui.setScrollFactor(0, 0);
        },
        quickSetup: function (a, b, c) {
          this._quickSetupParams = {
            title: a,
            body: b,
            button_labels: c
          };
        },
        getEvent: function (a, b, c, d) {
          if (d == null && this.params != null) {
            d = [];
          }
          if (this.params != null) {
            d = d.concat(this.params);
          }
          if (a == "click_button") {
            var e = "";
            if (d != null) {
              if (typeof d[0] == "string") {
                e = v.string(d[0]);
              }
              var f = d[0] | 0;
              if (e == "affirm" || e == "cancel" || e == "alt") {
                if (va.__implements(this._parentState, Eg)) {
                  this.castParent().getEvent("click_popup", this, f, d);
                } else {
                  Ka.event("click_popup", this, f, d);
                }
                this.close();
              }
            }
          }
          Vf.prototype.getEvent.call(this, a, b, c, d);
        },
        castParent: function () {
          return this._parentState;
        },
        myGetTextFallback: function (a, b, c) {
          switch (a) {
            case "$POPUP_BODY_DEFAULT":
              return "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam consectetur vehicula pellentesque. Phasellus at blandit augue. Suspendisse vel leo ut elit imperdiet eleifend ut quis purus. Quisque imperdiet turpis vitae justo hendrerit molestie. Quisque tempor ante eget posuere viverra.";
            case "$POPUP_CANCEL":
              return "Cancel";
            case "$POPUP_NO":
              return "No";
            case "$POPUP_OK":
              return "Ok";
            case "$POPUP_TITLE_DEFAULT":
              return "Alert!";
            case "$POPUP_YES":
              return "Yes";
          }
          return a;
        },
        _doQuickSetup: function () {
          if (this._ui.hasAsset("title")) {
            this._ui.getAsset("title").set_text(this._quickSetupParams.title);
          }
          if (this._ui.hasAsset("body")) {
            this._ui.getAsset("body").set_text(this._quickSetupParams.body);
          }
          this._doQuickSetupButtons();
          this._quickSetupParams = this._quickSetupParams.button_labels = null;
        },
        _doQuickSetupButtons: function () {
          var a = ["btn0", "btn1", "btn2"];
          var b = 0;
          switch (this._quickSetupParams.button_labels.length) {
            case 1:
              this._ui.setMode("1btn");
              break;
            case 2:
              this._ui.setMode("2btn");
              break;
            case 3:
              this._ui.setMode("3btn");
          }
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            if (this._ui.hasAsset(d) && (d = this._ui.getAsset(d), this._quickSetupParams.button_labels.length > b)) {
              var e = this._quickSetupParams.button_labels[b];
              var f = e;
              switch (e) {
                case "<cancel>":
                case "<no>":
                case "<yes>":
                  e = r.substr(e, 1, e.length - 2).toUpperCase();
                  f = "$POPUP_" + e;
                  f = this._ui.getText(f, "ui", false);
                  if (f == null || f == "") {
                    f = e;
                  }
              }
              C.setButtonLabel(d, f);
            }
            ++b;
          }
        },
        __class__: lj,
        __properties__: q(Vf.prototype.__properties__, {
          set_height: "set_height",
          get_height: "get_height",
          set_width: "set_width",
          get_width: "get_width",
          set_alpha: "set_alpha",
          set_y: "set_y",
          set_x: "set_x",
          set_scrollFactor: "set_scrollFactor",
          set_scale: "set_scale",
          set_origin: "set_origin",
          set_offset: "set_offset",
          set_moves: "set_moves",
          set_facing: "set_facing",
          set_angle: "set_angle",
          set_immovable: "set_immovable"
        })
      });
      function ej(a, b, c, d, e, f, k, t, h, K, g, l, p, m) {
        if (K == null) {
          K = "<X> more...";
        }
        if (h == null) {
          h = 100;
        }
        if (t == null) {
          t = 20;
        }
        if (k == null) {
          k = 100;
        }
        if (f == null) {
          f = 25;
        }
        this._clickable = true;
        this._selected = 0;
        this._y_space = 25;
        this._height = 20;
        this._label_width = this._width = 100;
        this.fixedSize = false;
        cb.call(this);
        this._y_space = f;
        this._width = k;
        this._height = t;
        this._label_width = h;
        if (c == null) {
          c = [];
        }
        if (d == null) {
          d = [];
        }
        this.callback = e;
        this._list_radios = [];
        this._list_active = [];
        this._list = new Pk(0, 0, null, 0, 0, K, 1, 0, g, l, p, m);
        this.add(this._list);
        this.updateRadios(c, d);
        this.loadGraphics(null, null);
        this.set_x(a);
        this.set_y(b);
      }
      g["flixel.addons.ui.FlxUIRadioGroup"] = ej;
      ej.__name__ = "flixel.addons.ui.FlxUIRadioGroup";
      ej.__interfaces__ = [Ke, vf];
      ej.__super__ = cb;
      ej.prototype = q(cb.prototype, {
        set_activeStyle: function (a) {
          this.activeStyle = a;
          this.updateActives();
          return this.activeStyle;
        },
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          for (var b = 0, c = this._list_radios; b < c.length;) {
            var d = c[b];
            ++b;
            d.set_skipButtonUpdate(a);
          }
          return this.skipButtonUpdate;
        },
        set_params: function (a) {
          return this.params = a;
        },
        set_width: function (a) {
          cb.prototype.set_width.call(this, a);
          if (this.fixedSize && this._list != null) {
            this._list.set_width(a);
          }
          return a;
        },
        set_height: function (a) {
          cb.prototype.set_height.call(this, a);
          if (this.fixedSize && this._list != null) {
            this._list.set_height(a);
          }
          return a;
        },
        loadGraphics: function (a, b) {
          this._box_asset = a ?? "flixel/flixel-ui/img/radio.png";
          this._dot_asset = b ?? "flixel/flixel-ui/img/radio_dot.png";
          if (this._box_asset instanceof F) {
            a = this._box_asset;
            this._box_asset = a.graphic.key;
          }
          if (this._dot_asset instanceof F) {
            a = this._dot_asset;
            this._dot_asset = a.graphic.key;
          }
          a = 0;
          for (b = this._list_radios; a < b.length;) {
            var c = b[a];
            ++a;
            c.box.loadGraphic(this._box_asset, true);
            c.mark.loadGraphic(this._dot_asset);
          }
          this._refreshRadios();
        },
        destroy: function () {
          if (this._list_radios != null) {
            C.clearArray(this._list_radios);
          }
          if (this._list_active != null) {
            C.clearArray(this._list_active);
          }
          this._labels = this._ids = this._list = this._list_radios = this._list_active = null;
          cb.prototype.destroy.call(this);
        },
        updateRadios: function (a, b) {
          this._ids = a;
          this._labels = b;
          a = 0;
          for (b = this._list_radios; a < b.length;) {
            var c = b[a];
            ++a;
            c.set_visible(false);
          }
          this._refreshRadios();
        },
        getRadios: function () {
          return this._list_radios;
        },
        get_selectedId: function () {
          return this._ids[this._selected];
        },
        _refreshRadios: function () {
          var a = this.x;
          var b = this.y;
          var c = 0;
          var d = 0;
          var e = 0;
          this._list._skipRefresh = true;
          for (var f = 0, k = this._ids; f < k.length;) {
            var t = k[f];
            ++f;
            var h = "";
            h = this._labels != null && this._labels.length > c ? this._labels[c] : "<" + t + ">";
            if (this._list_radios.length > c) {
              t = this._list_radios[c];
              t.set_visible(true);
              t.set_text(h);
              if (c == 0) {
                a = t.x;
                b = t.y;
              } else {
                t.set_x(a | 0);
                t.set_y(b | 0);
              }
            } else {
              t = new xb(0, 0, this._box_asset, this._dot_asset, h, this._label_width, [t, false]);
              t.broadcastToFlxUI = false;
              t.callback = function (a, b) {
                return function () {
                  a[0]._onCheckBoxEvent(b[0]);
                };
              }([this], [t]);
              this._list.add(t);
              t.set_x(a | 0);
              t.set_y(b | 0);
              t.set_text(h);
              if (this._list_radios.length > 0) {
                t.button.copyStyle(this._list_radios[0].button);
                if (this.activeStyle == null) {
                  this.set_activeStyle(this.makeActiveStyle());
                }
                t.button.set_width(this._list_radios[0].button.get_width());
                t.button.set_height(this._list_radios[0].button.get_height());
                t.set_textX(this._list_radios[0].textX);
                t.set_textY(this._list_radios[0].textY);
              }
              this._list_radios.push(t);
              this._list_active.push(true);
            }
            if (a + t.get_width() > d) {
              d = a + t.get_width();
            }
            if (b + t.get_height() > e) {
              e = b + t.get_height();
            }
            b += this._y_space;
            ++c;
          }
          if (this.fixedSize == 0) {
            d += 5;
            e += 5;
            if (d > this._list.get_width()) {
              this._list.set_width(d);
            }
            if (e > this._list.get_height()) {
              this._list.set_height(e);
            }
            this.set_width(d);
            this.set_height(e);
          }
          this._list._skipRefresh = false;
          if (this.fixedSize == 1) {
            this._list.refreshList();
          }
          this.updateActives();
        },
        updateActives: function () {
          var a = 0;
          for (var b = 0, c = this._list_radios; b < c.length;) {
            var d = c[b];
            ++b;
            d.set_active(this._list_active[a]);
            if (this._list_active[a] == 0 && this.inactiveStyle != null) {
              this.inactiveStyle.applyToCheck(d);
            } else if (this._list_active[a] == 1 && this.activeStyle != null) {
              this.activeStyle.applyToCheck(d);
            }
            ++a;
          }
        },
        makeActiveStyle: function () {
          if (this._list_radios.length > 0) {
            var a = this._list_radios[0].button.label;
            var b = md.copyFromFlxText(a);
            var c = new $e(a.borderStyle, a.borderColor, a.borderSize, a.borderQuality);
            return new fj(16777215, b, Dn.fromOpenFL(a._defaultFormat.align), a.color, c);
          }
          return null;
        },
        _onCheckBoxEvent: function (a) {
          this._onClick(a, true);
        },
        _onClick: function (a, b) {
          if (!this._clickable) {
            return false;
          }
          for (var c = 0, d = 0, e = this._list_radios; d < e.length;) {
            var f = e[d];
            ++d;
            f.set_checked(false);
            if (a == f) {
              this._selected = c;
              f.set_checked(true);
            }
            ++c;
          }
          if (b) {
            if (this.callback != null) {
              this.callback(this.get_selectedId());
            }
            if (this.broadcastToFlxUI) {
              Ka.event("click_radio_group", this, this._ids[this._selected], this.params);
            }
          }
          return true;
        },
        __class__: ej,
        __properties__: q(cb.prototype.__properties__, {
          set_params: "set_params",
          set_skipButtonUpdate: "set_skipButtonUpdate",
          set_activeStyle: "set_activeStyle",
          get_selectedId: "get_selectedId"
        })
      });
      function fj(a, b, c, d, e) {
        this.checkColor = a;
        cj.call(this, b, c, d, e);
      }
      g["flixel.addons.ui.CheckStyle"] = fj;
      fj.__name__ = "flixel.addons.ui.CheckStyle";
      fj.__super__ = cj;
      fj.prototype = q(cj.prototype, {
        applyToCheck: function (a) {
          if (this.checkColor != null) {
            a.set_color(this.checkColor);
          }
          this.apply(a.button.label);
        },
        __class__: fj
      });
      function qh(a, b, c, d) {
        if (d == null) {
          d = 16;
        }
        if (c == null) {
          c = 16;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        F.call(this, a, b);
        this.makeGraphic(1, 1, 0);
        if (d < 1) {
          d = 1;
        }
        if (c < 1) {
          c = 1;
        }
        this.resize(c, d);
      }
      g["flixel.addons.ui.FlxUIRegion"] = qh;
      qh.__name__ = "flixel.addons.ui.FlxUIRegion";
      qh.__interfaces__ = [cd, td];
      qh.__super__ = F;
      qh.prototype = q(F.prototype, {
        resize: function (a, b) {
          this.set_width(a);
          this.set_height(b);
        },
        __class__: qh
      });
      function th(a, b, c, d, e, f, k, t, h, K, g) {
        Yh.call(this, a, b, c, d, e, f, k, t, h, K, g);
      }
      g["flixel.addons.ui.FlxUISlider"] = th;
      th.__name__ = "flixel.addons.ui.FlxUISlider";
      th.__interfaces__ = [td];
      th.__super__ = Yh;
      th.prototype = q(Yh.prototype, {
        __class__: th
      });
      function bf(a, b, c, d) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        Jc.call(this, a, b, d);
        this.up_color = this.over_color = this.down_color = this.up_toggle_color = this.over_toggle_color = this.down_toggle_color = -1;
        if (c != null) {
          this.set_label(c);
        }
      }
      g["flixel.addons.ui.FlxUISpriteButton"] = bf;
      bf.__name__ = "flixel.addons.ui.FlxUISpriteButton";
      bf.__interfaces__ = [Kg];
      bf.__super__ = Jc;
      bf.prototype = q(Jc.prototype, {
        resize: function (a, b) {
          Jc.prototype.resize.call(this, a, b);
          this.autoCenterLabel();
        },
        autoCenterLabel: function () {
          if (this.label != null) {
            if (this.label instanceof La) {
              var a = this.label;
              for (var b = 0, c = a.group.members; b < c.length;) {
                var d = c[b];
                ++b;
                d.set_x(-d.get_width() / 2);
                d.set_y(-d.get_height() / 2);
              }
              var e = a.get_width();
              var f = a.get_height();
              b = 0;
              for (c = a.group.members; b < c.length;) {
                d = c[b];
                ++b;
                d.set_x((e - d.get_width()) / 2);
                d.set_y((f - d.get_height()) / 2);
              }
            }
            Jc.prototype.autoCenterLabel.call(this);
          }
        },
        __class__: bf
      });
      function je(a, b, c, d, e, f, k) {
        if (e == null) {
          e = false;
        }
        this._selected_tab = -1;
        this._selected_tab_id = "";
        this._tab_spacing = this._tab_stacking = this._tab_offset = null;
        this._stretch_tabs = false;
        cb.call(this);
        if (a == null) {
          a = new Z(0, 0, "flixel/flixel-ui/img/chrome_flat.png", new da(0, 0, 200, 200));
        }
        this._back = a;
        this.add(this._back);
        if (b == null && c != null) {
          b = [];
          a = 0;
          while (a < c.length) {
            var t = c[a];
            ++a;
            var h = new ud(0, 0, t.label);
            h.up_color = 16777215;
            h.down_color = 16777215;
            h.over_color = 16777215;
            h.up_toggle_color = 16777215;
            h.down_toggle_color = 16777215;
            h.over_toggle_color = 16777215;
            h.label.set_color(16777215);
            var K = h.label;
            K.set_borderStyle(Sa.OUTLINE);
            K.set_borderColor(0);
            K.set_borderSize(1);
            K.set_borderQuality(1);
            h.name = t.name;
            t = Ub.toIntArray("6,6,11,11");
            h.loadGraphicSlice9("flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab.png flixel/flixel-ui/img/tab.png flixel/flixel-ui/img/tab.png".split(" "), 0, 0, [t, t, t, t, t, t], 0, -1, true);
            b.push(h);
          }
        }
        this._tabs = b;
        this._stretch_tabs = e;
        this._tab_spacing = f;
        this._tab_stacking = k;
        if (this._tab_stacking == null) {
          this._tab_stacking = ["front", "back"];
        }
        this._tab_offset = d;
        b = 0;
        d = null;
        a = 0;
        for (c = this._tabs; a < c.length;) {
          d = c[a];
          ++a;
          this.add(d);
          e = function (a, b) {
            return function () {
              a[0]._onTabEvent(b[0]);
            };
          }([this], [d.name]);
          d.onUp.callback = e;
          ++b;
        }
        this.distributeTabs();
        this._tab_groups = [];
      }
      g["flixel.addons.ui.FlxUITabMenu"] = je;
      je.__name__ = "flixel.addons.ui.FlxUITabMenu";
      je.__interfaces__ = [ih, vf, cd];
      je.__super__ = cb;
      je.prototype = q(cb.prototype, {
        getEvent: function (a, b, c, d) {},
        getRequest: function (a, b, c, d) {
          return null;
        },
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          for (var b = 0, c = this._tabs; b < c.length;) {
            var d = c[b];
            ++b;
            d.set_skipButtonUpdate(a);
          }
          b = 0;
          for (c = this._tab_groups; b < c.length;) {
            var e = c[b];
            ++b;
            d = 0;
            for (e = e.group.members; d < e.length;) {
              var f = e[d];
              ++d;
              if (va.__implements(f, vf)) {
                f.set_skipButtonUpdate(a);
              }
            }
          }
          return a;
        },
        get_width: function () {
          return this._back.get_width();
        },
        get_height: function () {
          var a = this.getFirstTab();
          if (a != null) {
            return this._back.y + this._back.get_height() - a.y;
          } else {
            return this._back.get_height();
          }
        },
        resize: function (a, b) {
          if (va.__implements(this._back, cd)) {
            this.distributeTabs(a);
            var c = this._back;
            var d = this.getFirstTab();
            if (d != null) {
              c.resize(a, b - d.get_height());
            } else {
              c.resize(a, b);
            }
          } else {
            this.distributeTabs();
          }
        },
        get_selected_tab: function () {
          return this._selected_tab;
        },
        set_selected_tab: function (a) {
          this.showTabInt(a);
          return this._selected_tab;
        },
        get_selected_tab_id: function () {
          return this._selected_tab_id;
        },
        set_selected_tab_id: function (a) {
          this.showTabId(a);
          return this._selected_tab_id;
        },
        destroy: function () {
          cb.prototype.destroy.call(this);
          C.clearArray(this._tab_groups);
          C.clearArray(this._tabs);
          this._tab_groups = this._tabs = this._back = null;
        },
        getTab: function (a, b) {
          if (a != null) {
            for (var c = 0, d = this._tabs; c < d.length;) {
              var e = d[c];
              ++c;
              if (e.name == a) {
                return e;
              }
            }
          }
          if (b != null && b < this._tabs.length) {
            return this._tabs[b];
          } else {
            return null;
          }
        },
        addGroup: function (a) {
          if (a != this) {
            if (!this.contains(a)) {
              a.set_y(this._back.y - this.y);
              this.add(a);
              this._tab_groups.push(a);
            }
            this._showOnlyGroup("");
            if (this._tab_groups.length == 1) {
              this.set_selected_tab(0);
            }
            if (this._selected_tab != -1) {
              this.set_selected_tab(this._selected_tab);
            }
          }
        },
        _onTabEvent: function (a) {
          this.showTabId(a);
          var b = this.getTab(a);
          b = b != null ? b.params : null;
          if (this.broadcastToFlxUI) {
            Ka.event("tab_menu_click", this, a, b);
          }
        },
        stackTabs: function () {
          var a = this._back.x;
          var b = this._back.y;
          this.group.remove(this._back, true);
          var c;
          for (var d = 0, e = this._tabs; d < e.length;) {
            c = e[d];
            ++d;
            if (c.toggled) {
              this.group.remove(c, true);
            }
          }
          this.group.add(this._back);
          d = 0;
          for (e = this._tabs; d < e.length;) {
            c = e[d];
            ++d;
            if (c.toggled) {
              this.group.add(c);
            }
          }
          d = 0;
          for (e = this._tab_groups; d < e.length;) {
            c = e[d];
            ++d;
            var f = c.x;
            var k = c.y;
            this.remove(c, true);
            this.add(c);
            c.set_x(f);
            c.set_y(k);
          }
          this._back.set_x(a);
          this._back.set_y(b);
        },
        showTabId: function (a) {
          this._selected_tab = -1;
          this._selected_tab_id = "";
          for (var b = 0, c = 0, d = this._tabs; c < d.length;) {
            var e = d[c];
            ++c;
            e.set_toggled(false);
            e.forceStateHandler("out_button");
            if (e.name == a) {
              e.set_toggled(true);
              this._selected_tab_id = a;
              this._selected_tab = b;
            }
            ++b;
          }
          this._showOnlyGroup(a);
          this.stackTabs();
        },
        sortTabs: function (a, b) {
          if (!(a.name < b.name) && a.name > b.name) {
            return 1;
          } else {
            return -1;
          }
        },
        showTabInt: function (a) {
          if (a >= 0 && this._tabs != null && this._tabs.length > a) {
            this.showTabId(this._tabs[a].name);
          } else {
            this.showTabId("");
          }
        },
        _showOnlyGroup: function (a) {
          for (var b = 0, c = this._tab_groups; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.name == a) {
              d.set_visible(d.set_active(true));
            } else {
              d.set_visible(d.set_active(false));
            }
          }
        },
        getFirstTab: function () {
          var a = null;
          if (this._tabs != null && this._tabs.length > 0) {
            a = this._tabs[0];
          }
          return a;
        },
        distributeTabs: function (a) {
          if (a == null) {
            a = -1;
          }
          var b = 0;
          var c = 0;
          if (a == -1) {
            a = this._back.get_width();
          }
          var d = 0;
          if (this._stretch_tabs) {
            c = a / this._tabs.length;
            var e = (c | 0) * this._tabs.length;
            if (e < a) {
              d = a - e;
            }
          }
          this._tabs.sort(m(this, this.sortTabs));
          e = a = 0;
          var f;
          for (var k = 0, t = this._tabs; k < t.length;) {
            f = t[k];
            ++k;
            f.set_x(this.x + b);
            f.set_y(this.y);
            if (this._tab_offset != null) {
              f.set_x(f.x + this._tab_offset.x);
              f.set_y(f.y + this._tab_offset.y);
            }
            if (this._stretch_tabs) {
              var h = f.get_height();
              if (a != 0) {
                h = e;
                f.resize_ratio = -1;
              }
              if (d > 0) {
                f.resize(c + 1, h);
                b += (c | 0) + 1;
                --d;
              } else {
                f.resize(c, h);
                b += c | 0;
              }
            } else {
              b = this._tab_spacing != null ? b + (f.get_width() + this._tab_spacing) : b + f.get_width();
            }
            if (a == 0) {
              e = f.get_height();
            }
            ++a;
          }
          if (this._tabs != null && this._tabs.length > 0 && this._tabs[0] != null) {
            this._back.set_y(this._tabs[0].y + this._tabs[0].get_height() - 2);
            if (this._tab_offset != null) {
              b = this._back;
              b.set_y(b.y - this._tab_offset.y);
            }
          }
          this.calcBounds();
        },
        __class__: je,
        __properties__: q(cb.prototype.__properties__, {
          set_selected_tab_id: "set_selected_tab_id",
          get_selected_tab_id: "get_selected_tab_id",
          set_selected_tab: "set_selected_tab",
          get_selected_tab: "get_selected_tab",
          set_skipButtonUpdate: "set_skipButtonUpdate"
        })
      });
      function Xd(a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 8;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.minimumHeight = 1;
        U.call(this, a, b, c, d, e, f);
      }
      g["flixel.addons.ui.FlxUIText"] = Xd;
      Xd.__name__ = "flixel.addons.ui.FlxUIText";
      Xd.__interfaces__ = [Ke, td, cd];
      Xd.__super__ = U;
      Xd.prototype = q(U.prototype, {
        resize: function (a, b) {
          var c = 1;
          if (b < this.minimumHeight) {
            b = this.minimumHeight;
          }
          if (b < this.get_height()) {
            c = -1;
          }
          this.set_width(a);
          this.set_height(b);
          this.textField.set_width(this.get_width());
          var d = this._defaultFormat.size | 0;
          for (var e = this.get_height() - this.graphic.bitmap.height, f = 0, k = this.textField.get_numLines(); e * c > 0 && f < 999;) {
            ++f;
            this.set_size((this._defaultFormat.size | 0) + c);
            if (c > 0 && this.textField.get_numLines() > k) {
              this.set_size((this._defaultFormat.size | 0) - c);
              break;
            }
            this._regen = true;
            this.calcFrame(true);
            e = b - this.graphic.bitmap.height;
          }
          if (f >= 999) {
            h.log.advanced("Loop failsafe tripped while resizing FlxUIText to height(" + b + ")", xa.WARNING, true);
            this.set_size(d);
          }
          this.set_width(a);
          this.set_height(b);
          this._regen = true;
          this.calcFrame(true);
        },
        set_params: function (a) {
          return this.params = a;
        },
        __class__: Xd,
        __properties__: q(U.prototype.__properties__, {
          set_params: "set_params"
        })
      });
      function dj(a, b, c, d, e, f, k, t, h) {
        if (h == null) {
          h = false;
        }
        if (t == null) {
          t = 12895428;
        }
        if (k == null) {
          k = 8421504;
        }
        this.baseTileSize = -1;
        this.floorToEven = false;
        this._color1 = this._color2 = 0;
        this._tilesWide = this._tilesTall = 2;
        Cc.call(this, a, b);
        this.tileWidth = c;
        this.tileHeight = d;
        this._tilesWide = e;
        this._tilesTall = f;
        this._color1 = k;
        this._color2 = t;
        this.floorToEven = h;
        this.makeTiles(this.tileWidth, this.tileHeight, this._tilesWide, this._tilesTall, this._color1, this._color2);
      }
      g["flixel.addons.ui.FlxUITileTest"] = dj;
      dj.__name__ = "flixel.addons.ui.FlxUITileTest";
      dj.__interfaces__ = [td, cd];
      dj.__super__ = Cc;
      dj.prototype = q(Cc.prototype, {
        makeTiles: function (a, b, c, d, e, f) {
          if (f == null) {
            f = -3881788;
          }
          if (e == null) {
            e = -8355712;
          }
          b = this.constrain(a * this._tilesWide, b * this._tilesTall);
          a = b.x | 0;
          b = b.y | 0;
          this.makeGraphic(c, d, e);
          e = this.get_pixels();
          var k = 0;
          for (var t = 0; t < c;) {
            var h = t++;
            for (var K = 0, g = d; K < g;) {
              var l = K++;
              if (k % 2 == 0) {
                e.setPixel(h, l, f);
              }
              ++k;
            }
            if (c % 2 != 0) {
              ++k;
            }
          }
          this.set_pixels(e);
          c = this.scale;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
          this.updateHitbox();
        },
        constrain: function (a, b) {
          a = a / this._tilesWide | 0;
          var c = b / this._tilesTall | 0;
          if (a < c) {
            c = a;
          } else if (c < a) {
            a = c;
          }
          if (this.floorToEven && a % 2 == 1) {
            --a;
            c = a;
          }
          if (this.baseTileSize > 0) {
            c = a = (a / this.baseTileSize | 0) * this.baseTileSize;
          }
          b = a;
          a = c;
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = W.pool.get().set(b, a);
          b._inPool = false;
          return b;
        },
        resize: function (a, b) {
          this.makeTiles(this.tileWidth, this.tileHeight, this._tilesWide, this._tilesTall, this._color1, this._color2);
        },
        __class__: dj
      });
      function Od(a, b, c, d) {
        cb.call(this, 0, 0);
        if (c == null) {
          c = new Gg(0, 0, "left", "top", "right", "top");
        }
        d = Od.styleFix(d);
        this.refresh(a, b, "", "", c, d);
        this.setScrollFactor(0, 0);
      }
      g["flixel.addons.ui.FlxUITooltip"] = Od;
      Od.__name__ = "flixel.addons.ui.FlxUITooltip";
      Od.styleFix = function (a, b) {
        if (a == null) {
          a = {
            titleFormat: null,
            bodyFormat: null,
            titleBorder: null,
            bodyBorder: null,
            titleOffset: null,
            bodyOffset: null,
            background: null,
            borderSize: -1,
            borderColor: null,
            arrow: null,
            titleWidth: -1,
            bodyWidth: -1,
            autoSizeHorizontal: null,
            autoSizeVertical: null,
            leftPadding: -1,
            rightPadding: -1,
            topPadding: -1,
            bottomPadding: -1
          };
        }
        if (b != null) {
          if (a.titleFormat == null) {
            a.titleFormat = b.titleFormat;
          }
          if (a.bodyFormat == null) {
            a.bodyFormat = b.bodyFormat;
          }
          if (a.titleBorder == null) {
            a.titleBorder = b.titleBorder;
          }
          if (a.bodyBorder == null) {
            a.bodyBorder = b.bodyBorder;
          }
          if (a.titleOffset == null) {
            a.titleOffset = b.titleOffset;
          }
          if (a.bodyOffset == null) {
            a.bodyOffset = b.bodyOffset;
          }
          if (a.background == null) {
            a.background = b.background;
          }
          if (a.borderColor == null) {
            a.borderColor = b.borderColor;
          }
          if (a.arrow == null) {
            a.arrow = b.arrow;
          }
          if (a.borderSize == null || a.borderSize < 0) {
            a.borderSize = b.borderSize;
          }
          if (a.titleWidth == null || a.titleWidth < 0) {
            a.titleWidth = b.titleWidth;
          }
          if (a.bodyWidth == null || a.bodyWidth < 0) {
            a.bodyWidth = b.bodyWidth;
          }
          if (a.autoSizeHorizontal == null) {
            a.autoSizeHorizontal = b.autoSizeHorizontal;
          }
          if (a.autoSizeVertical == null) {
            a.autoSizeVertical = b.autoSizeVertical;
          }
          if (a.leftPadding == null || a.leftPadding < 0) {
            a.leftPadding = b.leftPadding;
          }
          if (a.rightPadding == null || a.rightPadding < 0) {
            a.rightPadding = b.rightPadding;
          }
          if (a.topPadding == null || a.topPadding < 0) {
            a.topPadding = b.topPadding;
          }
          if (a.leftPadding == null || a.bottomPadding < 0) {
            a.bottomPadding = b.bottomPadding;
          }
        }
        if (b != null) {
          if (a.titleFormat != null) {
            Od.fillFontDefNulls(a.titleFormat, b.titleFormat);
            if (a.titleFormat.format != null && b.titleFormat.format != null) {
              Od.fillFormatNulls(a.titleFormat.format, b.titleFormat.format);
            }
          }
          if (a.bodyFormat != null) {
            Od.fillFontDefNulls(a.bodyFormat, b.bodyFormat);
            if (a.bodyFormat.format != null && b.bodyFormat.format != null) {
              Od.fillFormatNulls(a.bodyFormat.format, b.bodyFormat.format);
            }
          }
        }
        if (a.titleFormat == null) {
          a.titleFormat = new md(null, null, null, new ld(null, 8, -16777216), null);
        }
        if (a.bodyFormat == null) {
          a.bodyFormat = new md(null, null, null, new ld(null, 8, -16777216), null);
        }
        if (a.titleBorder == null) {
          a.titleBorder = new $e(Sa.NONE, 0, 0, 1);
        }
        if (a.bodyBorder == null) {
          a.bodyBorder = new $e(Sa.NONE, 0, 0, 1);
        }
        if (a.titleOffset == null) {
          var c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = W.pool.get().set(b, c);
          b._inPool = false;
          a.titleOffset = b;
        }
        if (a.bodyOffset == null) {
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = W.pool.get().set(b, c);
          b._inPool = false;
          a.bodyOffset = b;
        }
        if (a.background == null) {
          a.background = 16777162;
        }
        if (a.borderColor == null) {
          a.borderColor = -16777216;
        }
        if (a.arrow == null) {
          a.arrow = "flixel/flixel-ui/img/tooltip_arrow.png";
        }
        if (a.borderSize == null || a.borderSize < 0) {
          a.borderSize = 1;
        }
        if (a.titleWidth == null || a.titleWidth < 0) {
          a.titleWidth = 100;
        }
        if (a.bodyWidth == null || a.bodyWidth < 0) {
          a.bodyWidth = 100;
        }
        if (a.autoSizeHorizontal == null) {
          a.autoSizeHorizontal = true;
        }
        if (a.autoSizeVertical == null) {
          a.autoSizeVertical = true;
        }
        if (a.leftPadding == null || a.leftPadding < 0) {
          a.leftPadding = 0;
        }
        if (a.rightPadding == null || a.rightPadding < 0) {
          a.rightPadding = 0;
        }
        if (a.topPadding == null || a.topPadding < 0) {
          a.topPadding = 0;
        }
        if (a.leftPadding == null || a.bottomPadding < 0) {
          a.bottomPadding = 0;
        }
        return a;
      };
      Od.cloneStyle = function (a) {
        var b = a.titleFormat != null ? a.titleFormat.clone() : null;
        var c = a.bodyFormat != null ? a.bodyFormat.clone() : null;
        var d = a.borderSize;
        var e = a.titleWidth;
        var f = a.bodyWidth;
        var k = a.background;
        var t = a.borderColor;
        var h = a.arrow;
        var K = a.titleOffset;
        var g = null;
        if (g == null) {
          var l = 0;
          var p = 0;
          if (p == null) {
            p = 0;
          }
          if (l == null) {
            l = 0;
          }
          l = W.pool.get().set(l, p);
          l._inPool = false;
          g = l;
        }
        l = K.x;
        p = K.y;
        if (p == null) {
          p = 0;
        }
        if (l == null) {
          l = 0;
        }
        g.set_x(l);
        g.set_y(p);
        K = a.bodyOffset;
        var m = null;
        if (m == null) {
          p = l = 0;
          if (p == null) {
            p = 0;
          }
          if (l == null) {
            l = 0;
          }
          l = W.pool.get().set(l, p);
          l._inPool = false;
          m = l;
        }
        l = K.x;
        p = K.y;
        if (p == null) {
          p = 0;
        }
        if (l == null) {
          l = 0;
        }
        m.set_x(l);
        m.set_y(p);
        return {
          titleFormat: b,
          bodyFormat: c,
          borderSize: d,
          titleWidth: e,
          bodyWidth: f,
          background: k,
          borderColor: t,
          arrow: h,
          titleOffset: g,
          bodyOffset: m,
          titleBorder: a.titleBorder.clone(),
          bodyBorder: a.bodyBorder.clone(),
          autoSizeVertical: a.autoSizeVertical,
          autoSizeHorizontal: a.autoSizeHorizontal,
          leftPadding: a.leftPadding,
          rightPadding: a.rightPadding,
          topPadding: a.topPadding,
          bottomPadding: a.bottomPadding
        };
      };
      Od.fillFontDefNulls = function (a, b) {
        if (a.get_size() == 0) {
          a.set_size(b.get_size());
        }
        if (a.name == null || a.name == "") {
          a.name = b.name;
        }
        if (a.file == null || a.file == "") {
          a.file = b.file;
        }
        if (a.extension == null || a.extension == "") {
          a.extension = b.extension;
        }
        if (a.border == null) {
          a.border = b.border != null ? b.border.clone() : null;
        }
      };
      Od.fillFormatNulls = function (a, b) {
        if (a.align == null) {
          a.align = b.align;
        }
        if (a.blockIndent == null) {
          a.blockIndent = b.blockIndent;
        }
        if (a.bold == null) {
          a.bold = b.bold;
        }
        if (a.bullet == null) {
          a.bullet = b.bullet;
        }
        if (a.color == null) {
          a.color = b.color;
        }
        if (a.font == null) {
          a.font = b.font;
        }
        if (a.indent == null) {
          a.indent = b.indent;
        }
        if (a.italic == null) {
          a.italic = b.italic;
        }
        if (a.kerning == null) {
          a.kerning = b.kerning;
        }
        if (a.leading == null) {
          a.leading = b.leading;
        }
        if (a.leftMargin == null) {
          a.leftMargin = b.leftMargin;
        }
        if (a.letterSpacing == null) {
          a.letterSpacing = b.letterSpacing;
        }
        if (a.rightMargin == null) {
          a.rightMargin = b.rightMargin;
        }
        if (a.size == null) {
          a.size = b.size;
        }
        if (a.tabStops == null) {
          a.tabStops = b.tabStops;
        }
        if (a.target == null) {
          a.target = b.target;
        }
        if (a.underline == null) {
          a.underline = b.underline;
        }
        if (a.url == null) {
          a.url = b.url;
        }
      };
      Od.__super__ = cb;
      Od.prototype = q(cb.prototype, {
        show: function (a, b, c, d, e, f) {
          if (f == null) {
            f = true;
          }
          if (e == null) {
            e = true;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = "";
          }
          if (b == null) {
            b = "";
          }
          this.set_visible(true);
          this.set_active(true);
          this.set_x(0);
          this.set_y(0);
          this._bkg.set_x(0);
          this._bkg.set_y(0);
          this._arrow.set_x(0);
          this._arrow.set_y(0);
          this._arrowBkg.set_x(0);
          this._arrowBkg.set_y(0);
          this._arrowBkg = this.makeArrowBkg(this._arrowBkg);
          this._arrow.set_color(this.style.background);
          this._arrow.set_visible(this._arrowBkg.set_visible(f));
          if (this.style.titleWidth > 0) {
            this._titleText.set_width(this._titleText.textField.set_width(this.style.titleWidth) | 0);
          }
          if (this.style.bodyWidth > 0) {
            this._bodyText.set_width(this._bodyText.textField.set_width(this.style.bodyWidth) | 0);
          }
          if (this.style.titleFormat != null) {
            this.style.titleFormat.apply(null, this._titleText);
          }
          if (this.style.bodyFormat != null) {
            this.style.bodyFormat.apply(null, this._bodyText);
          }
          if (this.style.titleBorder != null) {
            this.style.titleBorder.apply(this._titleText);
          }
          if (this.style.bodyBorder != null) {
            this.style.bodyBorder.apply(this._bodyText);
          }
          this._titleText.set_text(b);
          this._bodyText.set_text(c);
          this._titleText.update(0);
          this._bodyText.update(0);
          b = this._titleText.textField.get_textHeight() + 4 | 0;
          if (this.style.titleOffset != null) {
            this._titleText.set_x(this.style.titleOffset.x | 0);
            this._titleText.set_y(this.style.titleOffset.y | 0);
          }
          if (this.style.bodyOffset != null) {
            this._bodyText.set_x(this.style.bodyOffset.x | 0);
            this._bodyText.set_y(this._titleText.y + b + this.style.bodyOffset.y | 0);
          }
          f = this._bkg.get_width() | 0;
          c = this._bkg.get_height() | 0;
          if (e) {
            e = this._titleText.text != "" ? this._titleText.x + this._titleText.get_width() : 0;
            f = this._bodyText.text != "" ? this._bodyText.x + this._bodyText.get_width() : 0;
            f = Math.max(e, f) | 0;
          }
          if (d) {
            c = this._titleText.text != "" ? this._titleText.y + this._titleText.get_height() : 0;
            d = this._bodyText.text != "" ? this._bodyText.y + this._bodyText.get_height() : 0;
            c = Math.max(c, d) | 0;
            c = Math.max(c, this._arrowBkg.get_height()) | 0;
          }
          if (this.style.leftPadding == null) {
            this.style.leftPadding = 0;
          }
          if (this.style.rightPadding == null) {
            this.style.rightPadding = 0;
          }
          if (this.style.topPadding == null) {
            this.style.topPadding = 0;
          }
          if (this.style.bottomPadding == null) {
            this.style.bottomPadding = 0;
          }
          f += this.style.leftPadding + this.style.rightPadding;
          c += this.style.topPadding + this.style.bottomPadding;
          c |= 0;
          this.refreshBkg(f | 0, c, this.style);
          d = this._anchorArrow.x.offset | 0;
          e = this._anchorArrow.y.offset | 0;
          this._anchorArrow.x.offset -= this.anchor.x.offset;
          this._anchorArrow.y.offset += this.anchor.y.offset;
          this._anchorArrow.x.offset |= 0;
          this._anchorArrow.y.offset |= 0;
          this._anchorArrow.anchorThing(this._arrow, this._bkg);
          this._anchorArrow.x.offset = d;
          this._anchorArrow.y.offset = e;
          if (this._arrow.x < 0) {
            e = Math.abs(this._arrow.x) | 0;
            d = this._bkg;
            d.set_x(d.x + e);
            d = this._titleText;
            d.set_x(d.x + e);
            d = this._bodyText;
            d.set_x(d.x + e);
            this._arrow.set_x(0);
          }
          if (this._arrow.y < 0) {
            e = Math.abs(this._arrow.y) | 0;
            d = this._bkg;
            d.set_y(d.y + e);
            d = this._titleText;
            d.set_y(d.y + e);
            d = this._bodyText;
            d.set_y(d.y + e);
            this._arrow.set_y(0);
          }
          if (this._titleText.text != "" && this._bodyText.text == "") {
            c -= this.style.topPadding + this.style.bottomPadding;
            d = this._titleText;
            d.set_y(d.y + ((c - b) / 2 | 0));
          }
          d = this._titleText;
          d.set_x(d.x + this.style.leftPadding);
          d = this._bodyText;
          d.set_x(d.x + this.style.leftPadding);
          d = this._titleText;
          d.set_y(d.y + this.style.topPadding);
          d = this._bodyText;
          d.set_y(d.y + this.style.topPadding);
          if (this._titleText.text == "") {
            this._titleText.set_x(this._bkg.x);
            this._titleText.set_y(this._bkg.y);
            this._titleText.set_width(this._bkg.get_width());
          }
          if (this._bodyText.text == "") {
            this._bodyText.set_x(this._bkg.x);
            this._bodyText.set_y(this._bkg.y);
            this._bodyText.set_width(this._bkg.get_width());
          }
          this.anchor.anchorThing(this, a);
          this.set_x(this.x | 0);
          this.set_y(this.y | 0);
          this._arrowBkg.set_x(this._arrow.x - this.style.borderSize | 0);
          this._arrowBkg.set_y(this._arrow.y - this.style.borderSize | 0);
          this._titleText.set_x(this._titleText.x | 0);
          this._bodyText.set_x(this._bodyText.x | 0);
          this._bkg.set_x(this._bkg.x | 0);
          this._bkg.set_y(this._bkg.y | 0);
          this._arrowBkg.set_x(this._arrowBkg.x | 0);
          this._arrowBkg.set_y(this._arrowBkg.y | 0);
          this._arrow.set_x(this._arrow.x | 0);
          this._arrow.set_y(this._arrow.y | 0);
        },
        get_height: function () {
          if (this.group.length == 0) {
            return 0;
          }
          var a = Infinity;
          var b = -Infinity;
          for (var c = 0, d = this.group.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && !(e instanceof U)) {
              var f = e.y;
              e = f + e.get_height();
              if (e > b) {
                b = e;
              }
              if (f < a) {
                a = f;
              }
            }
          }
          return b - a;
        },
        hide: function () {
          this.set_visible(false);
          this.set_active(false);
        },
        set_anchor: function (a) {
          this.anchor = a;
          this._anchorArrow = this.getArrowAnchor(a, this._anchorArrow);
          if (this._arrowBkg != null) {
            this.makeArrowBkg(this._arrowBkg);
          }
          return a;
        },
        set_style: function (a) {
          return this.style = a;
        },
        refresh: function (a, b, c, d, e, f) {
          var k = this._bkg == null;
          var t = this._arrow == null;
          var n = this._titleText == null;
          var K = this._bodyText == null;
          if (k) {
            this._bkg = new F();
          }
          if (t) {
            this._arrow = new F();
          }
          if (n) {
            this._titleText = new Xd(0, 0, a);
            if (f.titleFormat != null) {
              f.titleFormat.apply(null, this._titleText);
            }
            if (f.titleBorder != null) {
              f.titleBorder.apply(this._titleText);
            }
          }
          if (K) {
            this._bodyText = new Xd(0, 0, a);
            if (f.bodyFormat != null) {
              f.bodyFormat.apply(null, this._bodyText);
            }
            if (f.bodyBorder != null) {
              f.bodyBorder.apply(this._bodyText);
            }
          }
          this._titleText.set_text(c);
          this._bodyText.set_text(d);
          this._arrow.set_color(f.background);
          c = h.bitmap.add(f.arrow);
          if (f.arrow == null) {
            f.arrow = "flixel/flixel-ui/img/tooltip_arrow.png";
            h.bitmap.add(f.arrow);
          }
          this._arrow.loadGraphic(f.arrow, true, c.height, c.height);
          if (t) {
            this._arrow.animation.add("right", [0], 0, false);
            this._arrow.animation.add("down", [1], 0, false);
            this._arrow.animation.add("left", [2], 0, false);
            this._arrow.animation.add("up", [3], 0, false);
          }
          this.refreshBkg(a, b, f);
          this.set_style(f);
          if (t && f.borderSize > 0) {
            this._arrowBkg = new F();
            this.add(this._arrowBkg);
          }
          this.set_anchor(e);
          if (k) {
            this.add(this._bkg);
          }
          if (t) {
            this.add(this._arrow);
          }
          if (n) {
            this.add(this._titleText);
          }
          if (K) {
            this.add(this._bodyText);
          }
        },
        refreshBkg: function (a, b, c) {
          var d = this.getStyleKey(a, b, c);
          if (h.bitmap._cache.h[d] == null) {
            if (c.borderSize > 0) {
              var e = new T(a, b, false, c.borderColor);
              e.fillRect(new da(c.borderSize, c.borderSize, a - c.borderSize * 2, b - c.borderSize * 2), c.background);
            } else {
              e = new T(a, b, false, c.background);
            }
            h.bitmap.add(e, true, d);
          }
          this._bkg.loadGraphic(d);
        },
        getStyleKey: function (a, b, c) {
          var d = c.background;
          a = a + "," + b + "," + ("0x" + w.hex(d >> 24 & 255, 2) + w.hex(d >> 16 & 255, 2) + w.hex(d >> 8 & 255, 2) + w.hex(d & 255, 2)) + "," + c.borderSize + ",";
          d = c.borderColor;
          return a + ("0x" + w.hex(d >> 24 & 255, 2) + w.hex(d >> 16 & 255, 2) + w.hex(d >> 8 & 255, 2) + w.hex(d & 255, 2));
        },
        makeArrowBkg: function (a) {
          if (a == null) {
            a = new F();
          }
          var b = "arrowBkg:" + this.style.background + "," + this.style.borderSize + "," + this.style.borderColor + "," + (this._arrow == null ? "null" : this._arrow.animation._curAnim == null ? "null" : this._arrow.animation._curAnim.name);
          if (h.bitmap._cache.h[b] == null) {
            var c = this.style.borderSize;
            if (c < 0 || c == null) {
              c = 0;
            }
            var d = this._arrow.get_width() + c | 0;
            c = this._arrow.get_height() + c | 0;
            d = new T(d, c, true, 0);
            h.bitmap.add(d, false, b);
            a.loadGraphic(b);
            d = this._arrow.color;
            this._arrow.set_color(this.style.borderColor);
            new za().identity();
            a.stamp(this._arrow, this.style.borderSize * 0, this.style.borderSize * 0);
            a.stamp(this._arrow, this.style.borderSize, this.style.borderSize * 0);
            a.stamp(this._arrow, this.style.borderSize * 2, this.style.borderSize * 0);
            a.stamp(this._arrow, this.style.borderSize * 0, this.style.borderSize);
            a.stamp(this._arrow, this.style.borderSize * 2, this.style.borderSize);
            a.stamp(this._arrow, this.style.borderSize * 0, this.style.borderSize * 2);
            a.stamp(this._arrow, this.style.borderSize, this.style.borderSize * 2);
            a.stamp(this._arrow, this.style.borderSize * 2, this.style.borderSize * 2);
            this._arrow.set_color(d);
          }
          a.loadGraphic(b);
          return a;
        },
        getArrowAnchor: function (a, b) {
          var c = a.x.side == "left" && a.x.flush == "right" || a.x.side == "right" && a.x.flush == "left";
          var d = a.y.side == "top" && a.y.flush == "bottom" || a.y.side == "bottom" && a.y.flush == "top";
          var e = a.x.side == "left" && a.x.flush == "left" || a.x.side == "right" && a.x.flush == "right";
          var f = a.y.side == "top" && a.y.flush == "top" || a.y.side == "bottom" && a.y.flush == "bottom";
          var k = e && f;
          var t = this.style.borderSize;
          if (!c || !d) {
            if (c) {
              b = a.getFlipped(true, false, b);
              if (b.x.flush == "left") {
                b.x.offset -= t;
                this._arrow.animation.play("right");
              }
              if (b.x.flush == "right") {
                b.x.offset += t;
                this._arrow.animation.play("left");
              }
            }
            if (d) {
              b = a.getFlipped(false, true, b);
              if (b.y.flush == "top") {
                b.y.offset -= t;
                this._arrow.animation.play("down");
              }
              if (b.y.flush == "bottom") {
                b.y.offset += t;
                this._arrow.animation.play("up");
              }
            }
          }
          if (!k) {
            if (e) {
              if (b.x.flush == "left") {
                b.x.offset += t;
              }
              if (b.x.flush == "right") {
                b.x.offset -= t;
              }
            }
            if (f) {
              if (b.y.flush == "top") {
                b.y.offset += t;
              }
              if (b.y.flush == "bottom") {
                b.y.offset -= t;
              }
            }
          }
          return b ?? a;
        },
        __class__: Od,
        __properties__: q(cb.prototype.__properties__, {
          set_anchor: "set_anchor",
          set_style: "set_style"
        })
      });
      function Pi(a, b) {
        this.current = -1;
        this._init = false;
        this.delay = 0.1;
        this.defaultAnchor = this.fixedPosition = this.defaultStyle = null;
        this.autoFlipAnchor = true;
        if (a != null) {
          this.state = a;
        } else if (b != null) {
          this.subState = b;
        }
        this.list = [];
        this.tooltip = new Od(100, 50);
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = W.pool.get().set(a, b);
        a._inPool = false;
        this.lastPosition = a;
        this.defaultAnchor = this.tooltip.anchor.clone();
        this.defaultStyle = Od.cloneStyle(this.tooltip.style);
      }
      g["flixel.addons.ui.FlxUITooltipManager"] = Pi;
      Pi.__name__ = "flixel.addons.ui.FlxUITooltipManager";
      Pi.__interfaces__ = [rb];
      Pi.prototype = {
        init: function () {
          var a = this.state != null ? this.state._ui : this.subState != null ? this.subState._ui : null;
          if (a != null && a != null && a.getDefinition("default:tooltip") != null) {
            a = a._loadTooltipData(null);
            this.defaultStyle = Od.cloneStyle(a.style);
            this.tooltip.set_style(this.defaultStyle);
          }
        },
        destroy: function () {
          ca.destroyArray(this.list);
          this.defaultStyle = this.defaultAnchor = this.subState = this.state = this.lastPosition = this.tooltip = this.list = null;
        },
        add: function (a, b) {
          if (this._init) {
            b.style = Od.styleFix(b.style, this.defaultStyle);
          }
          if (va.__implements(a, Kg)) {
            var c = a;
            var d = this.findBtn(c);
            if (d == -1) {
              this.list.push(new mj(c, b));
            } else {
              this.list[d].data = b;
              this.list[d].count = 0;
            }
          } else {
            d = this.findObj(a);
            if (d == -1) {
              c = new ud(0, 0, "", null, false, true);
              c.resize(a.get_width(), a.get_height());
              c.set_x(a.x);
              c.set_y(a.y);
              c.set_width(a.get_width());
              c.set_height(a.get_height());
              d = c.scrollFactor;
              var e = a.scrollFactor.x;
              var f = a.scrollFactor.y;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              d.set_x(e);
              d.set_y(f);
              if (this.state != null) {
                this.state.add(c);
              } else if (this.subState != null) {
                this.subState.add(c);
              }
              this.list.push(new mj(c, b, a));
            } else {
              this.list[d].data = b;
              this.list[d].count = 0;
              this.list[d].btn.set_x(a.x);
              this.list[d].btn.set_y(a.y);
              this.list[d].btn.set_width(a.get_width());
              this.list[d].btn.set_height(a.get_height());
              d = this.list[d].btn.scrollFactor;
              e = a.scrollFactor.x;
              f = a.scrollFactor.y;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              d.set_x(e);
              d.set_y(f);
            }
          }
        },
        update: function (a) {
          for (var b = 0, c = this.list.length; b < c;) {
            var d = b++;
            var e = this.list[d].btn;
            var f = this.list[d].obj;
            if (this.list[d].enabled == 0) {
              if (this.current == d) {
                this.hide(d);
              }
              this.list[d].count = 0;
            } else {
              if (f != null) {
                e.set_x(f.x);
                e.set_y(f.y);
                e.set_width(f.get_width());
                e.set_height(f.get_height());
                e.set_visible(f.visible);
              }
              if (this.list[d].sticky == 0 && (e.visible == 0 || e.get_justMousedOut() || e.get_mouseIsOut())) {
                this.list[d].count = 0;
                this.hide(d);
              } else if ((e.get_justMousedOver() || e.get_mouseIsOver()) && e.get_mouseIsOver()) {
                this.list[d].count += a;
              }
              if (this.list[d].count > this.delay || this.list[d].data.delay >= 0 && this.list[d].count > this.list[d].data.delay) {
                if (this.current != d) {
                  this.show(d);
                } else if (this.list[d].data.moving) {
                  this.show(d);
                }
              }
            }
          }
        },
        hide: function (a) {
          if (this.current == a) {
            this.tooltip.hide();
            if (this.state != null) {
              this.state.remove(this.tooltip, true);
            }
            if (this.subState != null) {
              this.subState.remove(this.tooltip, true);
            }
            this.current = -1;
          }
        },
        findBtn: function (a) {
          if (a == null) {
            return -1;
          }
          for (var b = 0, c = this.list.length; b < c;) {
            var d = b++;
            if (this.list[d] != null && this.list[d].btn == a) {
              return d;
            }
          }
          return -1;
        },
        findObj: function (a) {
          if (a == null) {
            return -1;
          }
          for (var b = 0, c = this.list.length; b < c;) {
            var d = b++;
            if (this.list[d] != null && this.list[d].obj == a) {
              return d;
            }
          }
          return -1;
        },
        show: function (a) {
          if (!(a < 0) && !(a >= this.list.length)) {
            var b = this.list[a].btn;
            if (b.visible != 0 && (this.list[a].obj == null || this.list[a].obj.visible != 0)) {
              if (this.current == a) {
                a = b.x - this.lastPosition.x;
                var c = b.y - this.lastPosition.y;
                this.lastPosition.set_x(b.x);
                this.lastPosition.set_y(b.y);
                b = this.tooltip;
                b.set_x(b.x + a);
                b = this.tooltip;
                b.set_y(b.y + c);
              } else {
                this.current = a;
                a = this.list[a].data;
                if (a.init != 1) {
                  a.style = Od.styleFix(a.style, this.defaultStyle);
                  a.init = true;
                }
                var d = c = true;
                if (a.style != null) {
                  this.tooltip.set_style(a.style);
                  c = a.style.autoSizeVertical;
                  d = a.style.autoSizeHorizontal;
                }
                if (a.anchor != null) {
                  this.tooltip.set_anchor(a.anchor);
                } else if (this.defaultAnchor != null) {
                  this.tooltip.set_anchor(this.defaultAnchor);
                }
                if (this.state != null) {
                  this.state.add(this.tooltip);
                }
                if (this.subState != null) {
                  this.subState.add(this.tooltip);
                }
                this.tooltip.show(b, a.title, a.body, c, d);
                if (this.fixedPosition != null) {
                  this.fixedPosition.anchor.anchorThing(this.tooltip, this.fixedPosition.object);
                }
                if (this.autoFlipAnchor && this.checkAutoFlip(this.tooltip, this.fixedPosition != null ? this.fixedPosition.anchor : null)) {
                  if (this.fixedPosition != null) {
                    this.fixedPosition.anchor.anchorThing(this.tooltip, this.fixedPosition.object);
                  } else {
                    this.tooltip.show(b, a.title, a.body, c, d, this.showTooltipArrow);
                  }
                }
                a = this.lastPosition;
                c = b.x;
                b = b.y;
                if (b == null) {
                  b = 0;
                }
                if (c == null) {
                  c = 0;
                }
                a.set_x(c);
                a.set_y(b);
                if (this.state != null) {
                  this.state.onShowTooltip(this.tooltip);
                } else if (this.subState != null) {
                  this.subState.onShowTooltip(this.tooltip);
                }
              }
            }
          }
        },
        checkAutoFlip: function (a, b) {
          var c = a.x < 0 || a.x + a.get_width() > h.width;
          var d = a.y < 0 || a.y + a.get_height() > h.height;
          if (c || d) {
            if (b == null) {
              b = a.anchor;
            }
            b.getFlipped(c, d, b);
            return true;
          } else {
            return false;
          }
        },
        __class__: Pi
      };
      function mj(a, b, c) {
        this.sticky = false;
        this.btn = a;
        this.data = b;
        this.obj = c;
        this.count = 0;
        this.enabled = true;
        if (this.data != null) {
          if (this.data.delay == null) {
            this.data.delay = -1;
          }
          if (this.data.moving == null) {
            this.data.moving = false;
          }
        }
      }
      g["flixel.addons.ui._FlxUITooltipManager.FlxUITooltipEntry"] = mj;
      mj.__name__ = "flixel.addons.ui._FlxUITooltipManager.FlxUITooltipEntry";
      mj.__interfaces__ = [rb];
      mj.prototype = {
        destroy: function () {
          this.count = 0;
          this.btn = this.obj = null;
          this.data.anchor = null;
          this.data = this.data.style = null;
        },
        __class__: mj
      };
      function md(a, b, c, d, e) {
        if (c == null) {
          c = "";
        }
        if (b == null) {
          b = ".ttf";
        }
        this._size = 0;
        this.name = a;
        this.extension = b;
        this.file = c;
        this.format = d;
        if (this.format == null) {
          this.format = new ld();
        }
        this.border = e;
        if (this.border == null) {
          this.border = new $e(Sa.NONE, 0);
        }
      }
      g["flixel.addons.ui.FontDef"] = md;
      md.__name__ = "flixel.addons.ui.FontDef";
      md.copyFromTextField = function (a) {
        a = a.get_defaultTextFormat();
        var b = new md("");
        b.fromStr(a.font);
        b.format.font = a.font;
        b.format.size = a.size;
        b.format.color = a.color;
        b.format.bold = a.bold;
        b.format.italic = a.italic;
        b.format.underline = a.underline;
        b.format.url = a.url;
        b.format.letterSpacing = a.letterSpacing;
        b.format.leading = a.leading;
        b.format.target = a.target;
        b.format.align = a.align;
        return b;
      };
      md.copyFromFlxText = function (a) {
        var b = md.copyFromTextField(a.textField);
        b.fromStr(a._font);
        b.border.style = a.borderStyle;
        b.border.color = a.borderColor;
        b.border.quality = a.borderQuality;
        b.border.size = a.borderSize;
        return b;
      };
      md.fromXML = function (a) {
        var b = C.xml_str(a, "font");
        var c = C.xml_str(a, "style");
        var d = null;
        if (b != "") {
          d = Ka.font(b, c);
        }
        c = C.xml_str(a, "style");
        b = Ka.fontSize(d, C.xml_i(a, "size", 8));
        var e = C.xml_color(a, "color", true, -1);
        switch (C.xml_str(a, "align").toLowerCase()) {
          case "center":
            var f = 0;
            break;
          case "justify":
            f = 2;
            break;
          case "left":
            f = 3;
            break;
          case "right":
            f = 4;
            break;
          default:
            f = 3;
        }
        d = new md(C.xml_str(a, "font"), ".ttf", d);
        d.format.color = e;
        d.format.size = b;
        d.format.align = f;
        d.set_size(b);
        d.setFontStyle(c);
        d.border = $e.fromXML(a);
        return d;
      };
      md.prototype = {
        get_size: function () {
          if (this.format != null) {
            this._size = this.format.size | 0;
          }
          return this._size;
        },
        set_size: function (a) {
          if (this.format != null) {
            this.format.size = a;
          }
          return this._size = a;
        },
        clone: function () {
          var a = this.border == null ? null : this.border.clone();
          var b = this.format == null ? null : new ld(this.format.font, this.format.size, this.format.color, this.format.bold, this.format.italic, this.format.underline, this.format.url, this.format.target, this.format.align, this.format.leftMargin, this.format.rightMargin, this.format.indent, this.format.leading);
          if (this.format != null) {
            b.letterSpacing = this.format.letterSpacing;
          }
          a = new md(this.name, this.extension, this.file, b, a);
          a.set_size(this.get_size());
          return a;
        },
        applyFlx: function (a) {
          var b = null;
          if (this.format.align != null) {
            switch (this.format.align) {
              case 0:
                b = "center";
                break;
              case 2:
                b = "justify";
                break;
              case 3:
                b = "left";
                break;
              case 4:
                b = "right";
                break;
              default:
                b = "left";
            }
          }
          a.setFormat(this.file == "" || this.file == null ? null : this.file, this.format.size | 0, this.format.color, b, this.border.style, this.border.color);
          a.textField.get_defaultTextFormat().leading = this.format.leading;
          a.textField.get_defaultTextFormat().letterSpacing = this.format.letterSpacing;
          return a;
        },
        apply: function (a, b) {
          if (a != null) {
            a.setTextFormat(this.format);
          }
          if (b != null) {
            this.applyFlx(b);
          }
        },
        fromStr: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (!(b > 3)) {
            a = le.fix(a);
            var c = this.getFontStyle(a);
            this.setFontStyle(c);
            var d = "";
            for (var e = 0, f = md.EXTENSIONS; e < f.length;) {
              var k = f[e];
              ++e;
              if (a.indexOf(k) != -1 && Q.exists(a + d, "FONT")) {
                this.name = w.replace(a, d, "");
                this.file = a;
                d = k;
                break;
              }
            }
            if (d == "") {
              e = 0;
              for (f = md.EXTENSIONS; e < f.length;) {
                k = f[e];
                ++e;
                if (Q.exists(a + k, "FONT")) {
                  d = k;
                  this.name = a;
                  this.file = a + d;
                  break;
                }
              }
              this.setFontStyle(c);
            } else {
              a = this.stripFontExtensions(a);
              if (this.getFontStyle(a) != "") {
                a = r.substr(a, a.length - 1, 1);
              }
              this.fromStr(a, b + 1);
            }
          }
        },
        stripFontExtensions: function (a) {
          if (a == null) {
            return a;
          }
          for (var b = 0, c = md.EXTENSIONS; b < c.length;) {
            var d = c[b];
            ++b;
            if (a != null && a.indexOf(d) != -1) {
              a = w.replace(a, d, "");
            }
          }
          return a;
        },
        getFontExtension: function (a) {
          if (a == null) {
            return "";
          }
          for (var b = 0, c = md.EXTENSIONS; b < c.length;) {
            var d = c[b];
            ++b;
            if (a.indexOf(d) != -1) {
              return d;
            }
          }
          return a;
        },
        fixFontName: function () {
          var a = this.getFontStyle(this.file);
          var b = this.getFontExtension(this.file);
          var c = this.stripFontExtensions(this.file);
          if (a != "") {
            c = r.substr(c, 0, c.length - 1);
          }
          a = "";
          if (this.format.bold && this.format.italic) {
            a = "z";
          } else if (this.format.bold) {
            a = "b";
          } else if (this.format.italic) {
            a = "i";
          }
          this.file = c + a + b;
        },
        getFontStyle: function (a) {
          if (a == null) {
            return "";
          }
          a = this.stripFontExtensions(a);
          a = r.substr(a, a.length - 1, 1);
          if (a != "" && a != null) {
            a = a.toLowerCase();
            switch (a) {
              case "b":
                return "b";
              case "i":
                return "i";
              case "z":
                return "z";
            }
          }
          return "";
        },
        setFontStyle: function (a) {
          a = a.toLowerCase();
          switch (a) {
            case "b":
            case "bold":
              this.format.bold = true;
              this.format.italic = false;
              break;
            case "all":
            case "bi":
            case "bold-italic":
            case "bolditalic":
            case "both":
            case "ib":
            case "italicbold":
            case "z":
              this.format.bold = true;
              this.format.italic = true;
              break;
            case "i":
            case "italic":
              this.format.bold = false;
              this.format.italic = true;
              break;
            default:
              this.format.bold = false;
              this.format.italic = false;
          }
          this.fixFontName();
        },
        __class__: md,
        __properties__: {
          set_size: "set_size",
          get_size: "get_size"
        }
      };
      function le() {}
      g["flixel.addons.ui.FontFixer"] = le;
      le.__name__ = "flixel.addons.ui.FontFixer";
      le.init = function () {
        if (le.name2File == null) {
          le.name2File = new ua();
        }
      };
      le.fix = function (a) {
        le.init();
        if (a.indexOf(".ttf") == -1 && Object.prototype.hasOwnProperty.call(le.name2File.h, a)) {
          a = le.name2File.h[a];
        }
        return a;
      };
      le.add = function (a, b) {
        if (b == null) {
          b = "";
        }
        le.init();
        if (b != "" && Object.prototype.hasOwnProperty.call(le.name2File.h, b)) {
          return le.name2File.h[b];
        }
        if (!Q.exists(a, "FONT")) {
          return a;
        }
        var c = Q.getFont(a);
        if (c == null) {
          return a;
        }
        if (b == "") {
          b = c.name;
        }
        le.name2File.h[b] = a;
        return le.fix(a);
      };
      function Nk(a, b) {
        if (b == null) {
          b = "";
        }
        if (a == null) {
          a = "";
        }
        this.name = a;
        this.label = b;
      }
      g["flixel.addons.ui.StrNameLabel"] = Nk;
      Nk.__name__ = "flixel.addons.ui.StrNameLabel";
      Nk.prototype = {
        __class__: Nk
      };
      function C() {}
      g["flixel.addons.ui.U"] = C;
      C.__name__ = "flixel.addons.ui.U";
      C.xml_str = function (a, b, c, d) {
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (a.get(b) != null) {
          if (c) {
            return a.get(b).toLowerCase();
          } else {
            return a.get(b);
          }
        } else {
          return d;
        }
      };
      C.xml_name = function (a) {
        var b = C.xml_str(a, "name", true, "");
        if (b == "") {
          b = C.xml_str(a, "id", true, "");
        }
        return b;
      };
      C.xml_color = function (a, b, c, d) {
        c = null;
        a = C.xml_str(a, b, true);
        if (a != "") {
          b = eb.fromString(a);
          if (b == null) {
            throw G.thrown("U.parseHex() unable to parse hex String " + a);
          }
          c = b;
        }
        if (c == null && d != null) {
          c = d;
        }
        return c;
      };
      C.xml_strArray = function (a, b, c, d) {
        if (c == null) {
          c = true;
        }
        a = C.xml_str(a, b, c);
        if (a != "") {
          return a.split(",");
        } else {
          return d;
        }
      };
      C.xml_colorArray = function (a, b, c) {
        a = C.xml_strArray(a, b);
        b = null;
        if (a != null && a.length > 0) {
          b = [];
          c = 0;
          for (var d = a.length; c < d;) {
            var e = c++;
            var f = a[e];
            var k = eb.fromString(f);
            if (k == null) {
              throw G.thrown("U.parseHex() unable to parse hex String " + f);
            }
            b[e] = k;
          }
        }
        return b;
      };
      C.perc_to_float = function (a) {
        if (a.lastIndexOf("%") == a.length - 1) {
          a = r.substr(a, 0, a.length - 1);
          var b = new V("([0-9]+)?(\\.)?([0-9]*)?", "");
          if (b.match(a) && (b = b.matchedPos(), b.pos == 0 && b.len == a.length)) {
            return parseFloat(a) / 100;
          }
        }
        return NaN;
      };
      C.isStrNum = function (a) {
        if (a == null || a == "") {
          return false;
        }
        var b = new V("-?([0-9]+)?(\\.)?([0-9]*)?", "");
        if (b.match(a) && (b = b.matchedPos(), b.pos == 0 && b.len == a.length)) {
          return true;
        } else {
          return false;
        }
      };
      C.xml_f = function (a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (a.get(b) != null) {
          return parseFloat(a.get(b));
        } else {
          return c;
        }
      };
      C.xml_i = function (a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (a.get(b) != null) {
          return v.parseInt(a.get(b));
        } else {
          return c;
        }
      };
      C.xml_pt = function (a, b, c) {
        if (a.get(b) != null) {
          return C.pointify(a.get(b));
        } else {
          return c;
        }
      };
      C.boolify = function (a) {
        a = a.toLowerCase();
        if (a == "true" || a == "1") {
          return true;
        } else {
          return false;
        }
      };
      C.pointify = function (a) {
        var b = null;
        if (a != null) {
          for (var c = ["(", ")", " ", "=", ":"], d = 0; d < c.length;) {
            var e = c[d];
            for (++d; a.indexOf(e) != -1;) {
              a = w.replace(a, e, "");
            }
          }
          if (a.indexOf(",") == -1 && a.indexOf("x") != -1) {
            a = w.replace(a, "x", ",");
          }
          c = a.split(",");
          if (c.length == 2) {
            a = parseFloat(c[0]);
            c = parseFloat(c[1]);
            if (c == null) {
              c = 0;
            }
            if (a == null) {
              a = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (a == null) {
              a = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (a == null) {
              a = 0;
            }
            c = W.pool.get().set(a, c);
            c._inPool = false;
            b = c;
          }
        }
        return b;
      };
      C.compareStringVars = function (a, b, c, d) {
        if (d == null) {
          d = "==";
        }
        switch (c) {
          case "bool":
            a = C.boolify(a);
            b = C.boolify(b);
            if (d == "==" || d == "=") {
              return a == b;
            }
            if (d == "!==" || d == "!=") {
              return a != b;
            }
            break;
          case "float":
            a = parseFloat(a);
            b = parseFloat(b);
            if (d == "==" || d == "=") {
              return a == b;
            }
            if (d == "!==" || d == "!=") {
              return a != b;
            }
            if (d == "<") {
              return a < b;
            }
            if (d == ">") {
              return a > b;
            }
            if (d == "<=") {
              return a <= b;
            }
            if (d == ">=") {
              return a >= b;
            }
            break;
          case "int":
            a = v.parseInt(a);
            b = v.parseInt(b);
            if (d == "==" || d == "=") {
              return a == b;
            }
            if (d == "!==" || d == "!=") {
              return a != b;
            }
            if (d == "<") {
              return a < b;
            }
            if (d == ">") {
              return a > b;
            }
            if (d == "<=") {
              return a <= b;
            }
            if (d == ">=") {
              return a >= b;
            }
            break;
          case "string":
            if (d == "==" || d == "=") {
              return a == b;
            }
            if (d == "!==" || d == "!=") {
              return a != b;
            }
        }
        return false;
      };
      C.xml_bool = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        if (a.get(b) != null) {
          a = a.get(b);
          a = a.toLowerCase();
          if (a == "true" || a == "1") {
            return true;
          } else {
            return false;
          }
        } else {
          return c;
        }
      };
      C.conformToBounds = function (a, b) {
        if (b != null) {
          if (a.x < b.min_width) {
            a.x = b.min_width;
          }
          if (a.y < b.min_height) {
            a.y = b.min_height;
          }
          if (a.x > b.max_width) {
            a.x = b.max_width;
          }
          if (a.x > b.max_height) {
            a.y = b.max_height;
          }
        }
        return a;
      };
      C.applyResize = function (a, b, c, d, e) {
        if (e == null) {
          var f = 0;
          var k = 0;
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          e = f;
          if (k == null) {
            k = 0;
          }
          if (e == null) {
            e = 0;
          }
          k = W.pool.get().set(e, k);
          k._inPool = false;
          e = k;
        }
        if (a > 0 && Math.abs(c / d - a) > 0.0001) {
          if (b == 1) {
            d = 1 / a * c;
          } else {
            c = 1 / a * d;
          }
        }
        if ((c | 0) < 1) {
          c = 1;
        }
        if ((d | 0) < 1) {
          d = 1;
        }
        f = c;
        k = d;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        e.set_x(f);
        e.set_y(k);
        return e;
      };
      C.xml = function (a, b, c, d) {
        if (d == null) {
          d = "assets/xml/";
        }
        if (c == null) {
          c = true;
        }
        if (b == null) {
          b = "xml";
        }
        if (a.indexOf("raw:") == 0 || a.indexOf("RAW:") == 0) {
          a = r.substr(a, 4, a.length - 4);
          d = "";
        }
        if (!Q.exists(d + a + "." + b, "TEXT")) {
          return null;
        }
        a = Q.getText(d + a + "." + b);
        if (a == null) {
          return null;
        }
        a = ea.parse(a);
        if (c) {
          c = a.firstElement();
          if (c.nodeType != ea.Document && c.nodeType != ea.Element) {
            throw G.thrown("Invalid nodeType " + (c.nodeType == null ? "null" : mb.toString(c.nodeType)));
          }
          return c;
        }
        return a.firstElement();
      };
      C.clearArraySoft = function (a) {
        if (a != null) {
          for (var b = a.length - 1; b >= 0;) {
            a[b] = null;
            a.splice(b, 1);
            --b;
          }
        }
      };
      C.clearArray = function (a) {
        if (a != null) {
          for (var b = a.length - 1; b >= 0;) {
            C.destroyThing(a[b]);
            a[b] = null;
            a.splice(b, 1);
            --b;
          }
        }
      };
      C.destroyThing = function (a) {
        if (a != null) {
          if (a instanceof Array) {
            C.clearArray(a);
          } else if (va.__implements(a, rb)) {
            va.__cast(a, rb).destroy();
          } else if (a instanceof Ea) {
            va.__cast(a, Ea).destroy();
          }
        }
      };
      C.font = function (a, b, c) {
        if (c == null) {
          c = ".ttf";
        }
        if (b == null) {
          b = "";
        }
        var d = a;
        var e = b;
        if (e == null) {
          e = "";
        }
        e = e.toLowerCase();
        var f = "";
        switch (e) {
          case "":
          case "none":
          case "normal":
          case "regular":
            f = "";
            break;
          case "b":
          case "bold":
            f = "b";
            break;
          case "i":
          case "italic":
            f = "i";
            break;
          case "bi":
          case "bold-italic":
          case "boldi":
          case "bolditalic":
          case "ib":
          case "ibold":
          case "italic-bold":
          case "italicbold":
          case "z":
            f = "z";
        }
        a = a.indexOf("assets/fonts/") != 0 ? "assets/fonts/" + a + f : a + f;
        if (a.indexOf(c) == -1) {
          a += c;
        }
        a = le.add(a);
        if (!Q.exists(a, "FONT") && c == ".ttf" && (b = C.font(d, b, ".otf"), Q.exists(b, "FONT"))) {
          return b;
        } else {
          return a;
        }
      };
      C.FU = function (a) {
        return r.substr(a, 0, 1).toUpperCase() + r.substr(a, 1, a.length - 1);
      };
      C.getBmp = function (a) {
        var b = null;
        if (typeof a == "string") {
          b = a;
        } else if (a instanceof Zb) {
          b = a.key;
        } else if (a instanceof T) {
          return a;
        }
        if (h.bitmap._cache.h[b] != null && (a = h.bitmap._cache.h[b], a.bitmap != null)) {
          return a.bitmap;
        } else {
          return Q.getBitmapData(b, false);
        }
      };
      C.checkHaxedef = function (a) {
        a = a.toLowerCase();
        switch (a) {
          case "html5":
            return true;
          case "js":
            return true;
          case "lime_next":
          case "next":
            return true;
          case "web":
            return true;
        }
        return false;
      };
      C.FU_ = function (a) {
        var b = a.split(" ");
        a = "";
        for (var c = 0, d = b.length; c < d;) {
          var e = c++;
          a += C.FU(b[e]);
          if (e != b.length - 1) {
            a += " ";
          }
        }
        return a;
      };
      C.scaleTileBmp = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = true;
        }
        if (f == null) {
          f = -1;
        }
        if (e == null) {
          e = -1;
        }
        var t = Q.getBitmapData(a, false);
        if (t == null) {
          if (h.bitmap._cache.h[a] != null) {
            t = h.bitmap._cache.h[a].bitmap;
          } else {
            return null;
          }
        }
        a = t.width / c | 0;
        var n = t.height / d | 0;
        if (e == -1) {
          e = c * b | 0;
        }
        if (f == -1) {
          f = d * b | 0;
          b = f / d;
        }
        if (Math.abs(b - 1) > 0.001) {
          var K = new T(e * a | 0, f * n | 0, true, 0);
          var g = new da();
          var l = new lb();
          var p = new za();
          p.scale(b, b);
          for (b = 0; b < n;) {
            var m = b++;
            for (var v = 0, q = a; v < q;) {
              var w = v++;
              var u = new T(c, d, true, 0);
              g.setTo(w * c, m * d, c, d);
              l.setTo(0, 0);
              u.copyPixels(t, g, l);
              var r = new T(e, f, true, 0);
              r.draw(u, p, null, null, null, k);
              l.setTo(w * e, m * f);
              K.copyPixels(r, r.rect, l);
            }
          }
          return K;
        }
        return t.clone();
      };
      C.scaleAndStoreTileset = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = true;
        }
        if (f == null) {
          f = -1;
        }
        if (e == null) {
          e = -1;
        }
        var t = a + "_x" + b;
        if (h.bitmap._cache.h[t] != null == 0) {
          a = C.scaleTileBmp(a, b, c, d, e, f, k);
          h.bitmap.add(a, false, t);
        }
        return t;
      };
      C.loadScaledImage = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        var e = C.gfx(a);
        a = Q.getBitmapData(e, false);
        if (a != null) {
          if (b < 0) {
            b = a.width;
          }
          if (c < 0) {
            c = a.height;
          }
          if (Math.abs(b - a.width) + Math.abs(c - a.height) > 0.01 && (e = e + "_" + (b | 0) + "x" + (c | 0), h.bitmap._cache.h[e] == null)) {
            var f = new T(b | 0, c | 0, true, 0);
            var k = C.getMatrix();
            k.identity();
            k.scale(b / a.width, c / a.height);
            f.draw(a, k, null, null, null, d);
            h.bitmap.add(f, true, e);
          }
          return e;
        }
        return null;
      };
      C.gfx = function (a, b, c, d, e, f) {
        if (e == null) {
          e = "";
        }
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = "";
        }
        if (b == null) {
          b = "";
        }
        if (a != null) {
          a = a.toLowerCase();
        }
        f = "";
        if (b != "") {
          f = b + "/";
          if (c != "") {
            f += c + "/";
            if (d != "") {
              f += d + "/";
              if (e != "") {
                f += e + "/";
              }
            }
          }
        }
        if (f != "") {
          a = f + a;
        }
        if (a.indexOf("raw:") != 0) {
          a = w.replace(a, "-", "_");
        }
        return C.get_gfx(a);
      };
      C.get_gfx = function (a) {
        var b = "";
        var c = a.indexOf(".jpg") != -1 ? ".jpg" : ".png";
        if (a != null && a.length > 4 && a.indexOf(c) != -1) {
          a = r.substr(a, 0, a.length - 4);
        }
        if (a.indexOf("raw:") == 0 || a.indexOf("RAW:") == 0) {
          a = r.substr(a, 4, a.length - 4);
          b = a + c;
        }
        if (a != null && a.indexOf("assets/gfx/") == 0) {
          b = a + c;
        }
        if (b == "") {
          b = "assets/gfx/" + a + c;
        }
        if (b.indexOf(".stitch.txt" + c) != -1) {
          b = w.replace(b, ".stitch.txt" + c, ".stitch.txt");
        }
        return b;
      };
      C.unparentXML = function (a) {
        if (a.parent != null) {
          a.parent.removeChild(a);
        }
        return a;
      };
      C.setButtonLabel = function (a, b) {
        if (a != null) {
          if (a instanceof ud) {
            va.__cast(a, ud).label.set_text(b);
          } else if (a instanceof bf && a.label != null && a.label instanceof La) {
            var c = a.label;
            if (c.group.members != null) {
              a = 0;
              c = c.group.members;
              while (a < c.length) {
                var d = c[a];
                ++a;
                if (d != null && d instanceof U) {
                  va.__cast(d, U).set_text(b);
                  break;
                }
              }
            }
          }
        }
      };
      C.getMatrix = function () {
        if (C._matrix == null) {
          C._matrix = new za();
        }
        return C._matrix;
      };
      function En() {}
      g["flixel.addons.ui.interfaces.IFireTongue"] = En;
      En.__name__ = "flixel.addons.ui.interfaces.IFireTongue";
      En.__isInterface__ = true;
      En.prototype = {
        __class__: En
      };
      function df(a, b) {
        this.curIndex = 0;
        this.parent = a;
        this.name = b;
      }
      g["flixel.animation.FlxBaseAnimation"] = df;
      df.__name__ = "flixel.animation.FlxBaseAnimation";
      df.__interfaces__ = [rb];
      df.prototype = {
        set_curIndex: function (a) {
          this.curIndex = a;
          if (this.parent != null && this.parent._curAnim == this) {
            this.parent.set_frameIndex(a);
          }
          return a;
        },
        destroy: function () {
          this.name = this.parent = null;
        },
        __class__: df,
        __properties__: {
          set_curIndex: "set_curIndex"
        }
      };
      function Qh(a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = true;
        }
        if (d == null) {
          d = 0;
        }
        this._frameTimer = 0;
        this.timeScale = 1;
        this.reversed = this.flipX = this.flipY = false;
        this.loopPoint = 0;
        this.finished = this.paused = this.looped = true;
        this.curFrame = this.frameDuration = 0;
        df.call(this, a, b);
        this.set_frameRate(d);
        this.frames = c;
        this.looped = e;
        this.flipX = f;
        this.flipY = k;
      }
      g["flixel.animation.FlxAnimation"] = Qh;
      Qh.__name__ = "flixel.animation.FlxAnimation";
      Qh.__super__ = df;
      Qh.prototype = q(df.prototype, {
        destroy: function () {
          this.name = this.frames = null;
          df.prototype.destroy.call(this);
        },
        play: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          if (a == null) {
            a = false;
          }
          if (a || this.finished || this.reversed != b) {
            this.reversed = b;
            this.paused = false;
            this._frameTimer = 0;
            this.finished = this.frameDuration == 0;
            a = this.frames.length - 1;
            if (c < 0) {
              this.set_curFrame(h.random.int(0, a));
            } else {
              if (c > a) {
                c = a;
              }
              if (this.reversed) {
                c = a - c;
              }
              this.set_curFrame(c);
            }
            if (this.finished) {
              c = this.parent;
              if (c.finishCallback != null) {
                c.finishCallback(this.name);
              }
            }
          } else {
            this.paused = false;
          }
        },
        restart: function () {
          this.play(true, this.reversed);
        },
        stop: function () {
          this.paused = this.finished = true;
        },
        finish: function () {
          this.stop();
          this.set_curFrame(this.reversed ? 0 : this.frames.length - 1);
        },
        pause: function () {
          this.paused = true;
        },
        reverse: function () {
          this.reversed = !this.reversed;
          if (this.finished) {
            this.play(false, this.reversed);
          }
        },
        update: function (a) {
          var b = this.getCurrentFrameDuration();
          if (b != 0 && !this.finished && !this.paused) {
            for (this._frameTimer += a * this.timeScale; this._frameTimer > b && !this.finished;) {
              this._frameTimer -= b;
              if (this.reversed) {
                if (this.looped && this.curFrame == this.loopPoint) {
                  this.set_curFrame(this.frames.length - 1);
                } else {
                  this.set_curFrame(this.curFrame - 1);
                }
              } else if (this.looped && this.curFrame == this.frames.length - 1) {
                this.set_curFrame(this.loopPoint);
              } else {
                this.set_curFrame(this.curFrame + 1);
              }
              if (this.finished) {
                break;
              }
              b = this.getCurrentFrameDuration();
            }
          }
        },
        getCurrentFrameDuration: function () {
          var a = this.parent.getFrameDuration(this.frames[this.curFrame]);
          if (a > 0) {
            return a;
          } else {
            return this.frameDuration;
          }
        },
        set_frameRate: function (a) {
          this.frameRate = a;
          this.frameDuration = a > 0 ? 1 / a : 0;
          return a;
        },
        set_curFrame: function (a) {
          var b = this.frames.length - 1;
          var c = this.reversed ? b - a : a;
          if (c >= 0) {
            if (!this.looped && c > b) {
              this.finished = true;
              this.curFrame = this.reversed ? 0 : b;
            } else {
              this.curFrame = a;
            }
          } else {
            this.curFrame = h.random.int(0, b);
          }
          this.set_curIndex(this.frames[this.curFrame]);
          if (this.finished && this.parent != null) {
            b = this.parent;
            if (b.finishCallback != null) {
              b.finishCallback(this.name);
            }
          }
          return a;
        },
        __class__: Qh,
        __properties__: q(df.prototype.__properties__, {
          set_curFrame: "set_curFrame",
          set_frameRate: "set_frameRate"
        })
      });
      function xk(a, b) {
        this.angle = 0;
        df.call(this, a, "prerotated_animation");
        this.baked = b;
        this.rotations = Math.round(360 / b);
      }
      g["flixel.animation.FlxPrerotatedAnimation"] = xk;
      xk.__name__ = "flixel.animation.FlxPrerotatedAnimation";
      xk.__super__ = df;
      xk.prototype = q(df.prototype, {
        set_angle: function (a) {
          if (isNaN(a)) {
            throw G.thrown("angle must not be NaN");
          }
          var b = this.curIndex;
          for (var c = Math.floor(a % 360); c < 0;) {
            c += 360;
          }
          c = Math.floor(c / this.baked + 0.5);
          c = c % this.rotations | 0;
          if (b != c) {
            this.set_curIndex(c);
          }
          return this.angle = a;
        },
        set_curIndex: function (a) {
          this.curIndex = a;
          if (this.parent != null) {
            this.parent.set_frameIndex(a);
          }
          return a;
        },
        __class__: xk,
        __properties__: q(df.prototype.__properties__, {
          set_angle: "set_angle"
        })
      });
      function gd() {}
      g["flixel.effects.FlxFlicker"] = gd;
      gd.__name__ = "flixel.effects.FlxFlicker";
      gd.__interfaces__ = [rb];
      gd.flicker = function (a, b, c, d, e, f, k) {
        if (e == null) {
          e = true;
        }
        if (d == null) {
          d = true;
        }
        if (c == null) {
          c = 0.04;
        }
        if (b == null) {
          b = 1;
        }
        if (gd.isFlickering(a)) {
          if (e) {
            gd.stopFlickering(a);
          } else {
            return gd._boundObjects.h[a.__id__];
          }
        }
        if (c <= 0) {
          c = h.elapsed;
        }
        e = gd._pool.get();
        e.start(a, b, c, d, f, k);
        gd._boundObjects.set(a, e);
        return e;
      };
      gd.isFlickering = function (a) {
        return gd._boundObjects.h.__keys__[a.__id__] != null;
      };
      gd.stopFlickering = function (a) {
        a = gd._boundObjects.h[a.__id__];
        if (a != null) {
          a.stop();
        }
      };
      gd.prototype = {
        destroy: function () {
          this.progressCallback = this.completionCallback = this.timer = this.object = null;
        },
        start: function (a, b, c, d, e, f) {
          this.object = a;
          this.duration = b;
          this.interval = c;
          this.completionCallback = e;
          this.progressCallback = f;
          this.endVisibility = d;
          this.timer = new Ec().start(this.interval, m(this, this.flickerProgress), this.duration / this.interval | 0);
        },
        stop: function () {
          this.timer.cancel();
          this.object.set_visible(true);
          this.release();
        },
        release: function () {
          gd._boundObjects.remove(this.object);
          gd._pool.put(this);
        },
        flickerProgress: function (a) {
          this.object.set_visible(!this.object.visible);
          if (this.progressCallback != null) {
            this.progressCallback(this);
          }
          if (a.loops > 0 && a.loops - a._loopsCounter == 0) {
            this.object.set_visible(this.endVisibility);
            if (this.completionCallback != null) {
              this.completionCallback(this);
            }
            if (this.timer == a) {
              this.release();
            }
          }
        },
        __class__: gd
      };
      function Zb(a, b, c) {
        this.unique = false;
        this.useCount = 0;
        this.isDumped = false;
        this.destroyOnNoUse = true;
        this.persist = false;
        this.width = this.height = 0;
        this.key = a;
        this.persist = c ?? Zb.defaultPersist;
        this.frameCollections = new nj();
        this.frameCollectionTypes = [];
        this.set_bitmap(b);
        this.shader = new Wd();
      }
      g["flixel.graphics.FlxGraphic"] = Zb;
      Zb.__name__ = "flixel.graphics.FlxGraphic";
      Zb.__interfaces__ = [rb];
      Zb.fromAssetKey = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (b == null) {
          b = false;
        }
        if (!d) {
          if (Q.exists(a)) {
            var e = Q.getBitmapData(a, true);
          } else {
            h.log.advanced("Could not find a BitmapData asset with ID '" + a + "'.", xa.ERROR, true);
            e = null;
          }
          if (e == null) {
            return null;
          } else {
            return Zb.createGraphic(e, c, b, d);
          }
        }
        c = h.bitmap.generateKey(a, c, b);
        e = h.bitmap._cache.h[c];
        if (e != null) {
          return e;
        }
        if (Q.exists(a)) {
          e = Q.getBitmapData(a, true);
        } else {
          h.log.advanced("Could not find a BitmapData asset with ID '" + a + "'.", xa.ERROR, true);
          e = null;
        }
        if (e == null) {
          return null;
        }
        e = Zb.createGraphic(e, c, b);
        e.assetsKey = a;
        return e;
      };
      Zb.fromClass = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (b == null) {
          b = false;
        }
        if (!d) {
          var e = yb.createInstance(a, []);
          return Zb.createGraphic(e, c, b, d);
        }
        d = a.__name__;
        d = h.bitmap.generateKey(d, c, b);
        c = h.bitmap._cache.h[d];
        if (c != null) {
          return c;
        }
        e = yb.createInstance(a, []);
        c = Zb.createGraphic(e, d, b);
        c.assetsClass = a;
        return c;
      };
      Zb.fromBitmapData = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (b == null) {
          b = false;
        }
        if (!d) {
          return Zb.createGraphic(a, c, b, d);
        }
        d = h.bitmap.findKeyForBitmap(a);
        var e = null;
        var f = null;
        if (d != null) {
          var k = h.bitmap._cache.h[d];
          e = k.assetsKey;
          f = k.assetsClass;
        }
        d = h.bitmap.generateKey(d, c, b);
        k = h.bitmap._cache.h[d];
        if (k != null) {
          return k;
        }
        k = Zb.createGraphic(a, d, b);
        k.assetsKey = e;
        k.assetsClass = f;
        return k;
      };
      Zb.fromGraphic = function (a, b, c) {
        if (b == null) {
          b = false;
        }
        if (!b) {
          return a;
        }
        c = h.bitmap.generateKey(a.key, c, b);
        c = Zb.createGraphic(a.bitmap, c, b);
        c.unique = b;
        c.assetsClass = a.assetsClass;
        c.assetsKey = a.assetsKey;
        return h.bitmap._cache.h[c.key] = c;
      };
      Zb.fromRectangle = function (a, b, c, d, e) {
        if (d == null) {
          d = false;
        }
        d = h.bitmap.generateKey(a + "x" + b + ":" + c, e, d);
        e = h.bitmap._cache.h[d];
        if (e != null) {
          return e;
        }
        a = new T(a, b, true, c);
        return Zb.createGraphic(a, d);
      };
      Zb.createGraphic = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (c == null) {
          c = false;
        }
        var e = c;
        if (e == null) {
          e = false;
        }
        if (e) {
          a = a.clone();
        }
        if (d) {
          a = new Zb(b, a);
          a.unique = c;
          h.bitmap._cache.h[a.key] = a;
        } else {
          a = new Zb(null, a);
        }
        return a;
      };
      Zb.prototype = {
        dump: function () {},
        undump: function () {
          var a = this.getBitmapFromSystem();
          if (a != null) {
            this.set_bitmap(a);
          }
          this.isDumped = false;
        },
        onContext: function () {
          if (this.isDumped) {
            this.undump();
            this.dump();
          }
        },
        onAssetsReload: function () {
          if (this.assetsClass != null || this.assetsKey != null) {
            var a = this.isDumped;
            this.undump();
            if (a) {
              this.dump();
            }
          }
        },
        destroy: function () {
          this.set_bitmap(ca.dispose(this.bitmap));
          this.assetsClass = this.assetsKey = this.key = this.shader = null;
          this.imageFrame = ca.destroy(this.get_imageFrame());
          if (this.frameCollections != null) {
            var a;
            for (var b = 0, c = this.frameCollectionTypes; b < c.length;) {
              a = c[b];
              ++b;
              a = this.frameCollections.get(a);
              ca.destroyArray(a);
            }
            this.frameCollectionTypes = this.frameCollections = null;
          }
        },
        addFrameCollection: function (a) {
          if (a.type != null) {
            var b = a.type;
            var c = this.frameCollections.get(b);
            if (c == null) {
              c = [];
              this.frameCollections.set(b, c);
            }
            b = c;
            if (b.indexOf(a) != -1) {
              h.log.advanced("Attempting to add already added collection", xa.WARNING, true);
            } else {
              b.push(a);
            }
          }
        },
        getBitmapFromSystem: function () {
          var a = null;
          if (this.assetsClass != null) {
            a = yb.createInstance(this.assetsClass, []);
          } else if (this.assetsKey != null) {
            a = this.assetsKey;
            if (Q.exists(a)) {
              a = Q.getBitmapData(a, true);
            } else {
              h.log.advanced("Could not find a BitmapData asset with ID '" + a + "'.", xa.ERROR, true);
              a = null;
            }
          }
          if (a != null) {
            var b = this.unique;
            if (b == null) {
              b = false;
            }
            if (b) {
              return a.clone();
            } else {
              return a;
            }
          }
          return null;
        },
        incrementUseCount: function () {
          this.useCount++;
        },
        decrementUseCount: function () {
          this.useCount--;
          this.checkUseCount();
        },
        checkUseCount: function () {
          if (this.useCount <= 0 && this.destroyOnNoUse && !this.persist) {
            h.bitmap.remove(this);
          }
        },
        set_destroyOnNoUse: function (a) {
          this.destroyOnNoUse = a;
          this.checkUseCount();
          return a;
        },
        get_imageFrame: function () {
          if (this.imageFrame == null) {
            this.imageFrame = Wf.fromRectangle(this);
          }
          return this.imageFrame;
        },
        set_bitmap: function (a) {
          if (a != null) {
            this.bitmap = a;
            this.width = this.bitmap.width;
            this.height = this.bitmap.height;
          }
          return a;
        },
        __class__: Zb,
        __properties__: {
          get_imageFrame: "get_imageFrame",
          set_destroyOnNoUse: "set_destroyOnNoUse",
          set_bitmap: "set_bitmap"
        }
      };
      function Be(a, b, c) {
        this.parent = a;
        this.type = b;
        if (c == null) {
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = W.pool.get().set(b, c);
          b._inPool = false;
        } else {
          b = c;
        }
        this.border = b;
        this.frames = [];
        this.framesByName = new ua();
        if (a != null) {
          a.addFrameCollection(this);
        }
      }
      g["flixel.graphics.frames.FlxFramesCollection"] = Be;
      Be.__name__ = "flixel.graphics.frames.FlxFramesCollection";
      Be.__interfaces__ = [rb];
      Be.prototype = {
        destroy: function () {
          this.frames = ca.destroyArray(this.frames);
          this.border = ca.put(this.border);
          this.type = this.parent = this.framesByName = null;
        },
        addEmptyFrame: function (a) {
          var b = new pb(this.parent);
          b.type = 2;
          var c = Ha._pool.get();
          var d = 0;
          var e = 0;
          var f = 0;
          var k = 0;
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.x = d;
          c.y = e;
          c.width = f;
          c.height = k;
          c._inPool = false;
          b.set_frame(c);
          c = b.sourceSize;
          d = a.width;
          a = a.height;
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(a);
          this.frames.push(b);
          return b;
        },
        addSpriteSheetFrame: function (a) {
          var b = Ha._pool.get();
          var c = 0;
          var d = 0;
          var e = 0;
          var f = 0;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.x = c;
          b.y = d;
          b.width = e;
          b.height = f;
          b._inPool = false;
          b.x = a.x;
          b.y = a.y;
          b.width = a.width;
          b.height = a.height;
          if (a._weak && !a._inPool) {
            a._inPool = true;
            a._weak = false;
            Ha._pool.putUnsafe(a);
          }
          a = b;
          b = new pb(this.parent);
          b.set_frame(this.checkFrame(a));
          c = b.sourceSize;
          d = a.width;
          a = a.height;
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(a);
          c = b.offset;
          a = d = 0;
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(a);
          return this.pushFrame(b);
        },
        addAtlasFrame: function (a, b, c, d, e, f, k, t) {
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = 0;
          }
          if (d != null && Object.prototype.hasOwnProperty.call(this.framesByName.h, d)) {
            return this.framesByName.h[d];
          }
          e = new pb(this.parent, e, f, k, t);
          e.name = d;
          f = e.sourceSize;
          k = b.x;
          t = b.y;
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.set_x(k);
          f.set_y(t);
          f = e.offset;
          k = c.x;
          t = c.y;
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.set_x(k);
          f.set_y(t);
          e.set_frame(this.checkFrame(a, d));
          ca.put(b);
          ca.put(c);
          return this.pushFrame(e);
        },
        checkFrame: function (a, b) {
          var c = a.x;
          var d = this.parent.width;
          var e = c < 0 ? 0 : c;
          var f = d != null && e > d ? d : e;
          c = a.y;
          d = this.parent.height;
          e = c < 0 ? 0 : c;
          var k = d != null && e > d ? d : e;
          c = a.x + a.width;
          d = this.parent.width;
          e = c < 0 ? 0 : c;
          var t = d != null && e > d ? d : e;
          c = a.y + a.height;
          d = this.parent.height;
          e = c < 0 ? 0 : c;
          c = f;
          var n = k;
          f = t - f;
          d = (d != null && e > d ? d : e) - k;
          if (d == null) {
            d = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.x = c;
          a.y = n;
          a.width = f;
          a.height = d;
          if (a.width <= 0 || a.height <= 0) {
            h.log.advanced("The frame " + b + " has incorrect data and results in an image with the size of (0, 0)", xa.WARNING, true);
          }
          return a;
        },
        pushFrame: function (a, b) {
          if (b == null) {
            b = false;
          }
          var c = a.name;
          if (c != null && Object.prototype.hasOwnProperty.call(this.framesByName.h, c) && !b) {
            return this.framesByName.h[c];
          }
          this.frames.push(a);
          a.cacheFrameMatrix();
          if (c != null) {
            this.framesByName.h[c] = a;
          }
          return a;
        },
        __class__: Be
      };
      function ob(a, b) {
        this.usedGraphics = [];
        Be.call(this, a, xf.ATLAS, b);
      }
      g["flixel.graphics.frames.FlxAtlasFrames"] = ob;
      ob.__name__ = "flixel.graphics.frames.FlxAtlasFrames";
      ob.fromTexturePackerJson = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        var d = h.bitmap.add(a, false);
        if (d == null) {
          return null;
        }
        a = ob.findFrame(d);
        if (a != null) {
          return a;
        }
        if (d == null || b == null) {
          return null;
        }
        a = new ob(d);
        b = Ip.getData(b);
        if (b.frames instanceof Array) {
          d = 0;
          for (var e = b.frames; d < e.length;) {
            b = e[d];
            ++d;
            ob.texturePackerHelper(b.filename, b, a, c);
          }
        } else {
          d = b.frames;
          e = ja.fields(d);
          for (var f = 0; f < e.length;) {
            var k = b = e[f++];
            b = d[b];
            ob.texturePackerHelper(k, b, a, c);
          }
        }
        return a;
      };
      ob.texturePackerHelper = function (a, b, c, d) {
        if (d == null) {
          d = false;
        }
        var e = 0;
        var f = b.frame;
        if (b.rotated) {
          var k = f.x;
          var t = f.y;
          var h = f.h;
          var K = f.w;
          if (K == null) {
            K = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f = Ha._pool.get();
          if (K == null) {
            K = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.x = k;
          f.y = t;
          f.width = h;
          f.height = K;
          f._inPool = false;
          e = -90;
        } else {
          k = f.x;
          t = f.y;
          h = f.w;
          K = f.h;
          if (K == null) {
            K = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f = Ha._pool.get();
          if (K == null) {
            K = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.x = k;
          f.y = t;
          f.width = h;
          f.height = K;
          f._inPool = false;
        }
        k = b.sourceSize.w;
        K = b.sourceSize.h;
        if (K == null) {
          K = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (K == null) {
          K = 0;
        }
        if (k == null) {
          k = 0;
        }
        K = W.pool.get().set(k, K);
        K._inPool = false;
        h = K;
        k = b.spriteSourceSize.x;
        K = b.spriteSourceSize.y;
        if (K == null) {
          K = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (K == null) {
          K = 0;
        }
        if (k == null) {
          k = 0;
        }
        K = W.pool.get().set(k, K);
        K._inPool = false;
        c.addAtlasFrame(f, h, K, a, e, false, false, d && b.duration != null ? b.duration / 1000 : 0);
      };
      ob.fromSparrow = function (a, b) {
        var c = h.bitmap.add(a);
        if (c == null) {
          return null;
        }
        a = ob.findFrame(c);
        if (a != null) {
          return a;
        }
        if (c == null || b == null) {
          return null;
        }
        a = new ob(c);
        var d = Jp.getXml(b).firstElement();
        if (d.nodeType != ea.Document && d.nodeType != ea.Element) {
          throw G.thrown("Invalid nodeType " + (d.nodeType == null ? "null" : mb.toString(d.nodeType)));
        }
        b = 0;
        for (c = dc.resolve(d, "SubTexture"); b < c.length;) {
          var e = c[b];
          ++b;
          if (!cc.resolve(e, "width") && cc.resolve(e, "w")) {
            throw G.thrown("Sparrow v1 is not supported, use Sparrow v2");
          }
          var f = Kb.resolve(e, "name");
          var k = cc.resolve(e, "frameX");
          var t = cc.resolve(e, "rotated") && Kb.resolve(e, "rotated") == "true";
          var n = cc.resolve(e, "flipX") && Kb.resolve(e, "flipX") == "true";
          var K = cc.resolve(e, "flipY") && Kb.resolve(e, "flipY") == "true";
          var g = parseFloat(Kb.resolve(e, "x"));
          var l = parseFloat(Kb.resolve(e, "y"));
          d = parseFloat(Kb.resolve(e, "width"));
          var p = parseFloat(Kb.resolve(e, "height"));
          if (p == null) {
            p = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          var m = Ha._pool.get();
          if (p == null) {
            p = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          m.x = g;
          m.y = l;
          m.width = d;
          m.height = p;
          m._inPool = false;
          if (k) {
            d = v.parseInt(Kb.resolve(e, "frameX"));
            l = v.parseInt(Kb.resolve(e, "frameY"));
            p = v.parseInt(Kb.resolve(e, "frameWidth"));
            g = v.parseInt(Kb.resolve(e, "frameHeight"));
            if (g == null) {
              g = 0;
            }
            if (p == null) {
              p = 0;
            }
            if (l == null) {
              l = 0;
            }
            if (d == null) {
              d = 0;
            }
            e = Ha._pool.get();
            if (g == null) {
              g = 0;
            }
            if (p == null) {
              p = 0;
            }
            if (l == null) {
              l = 0;
            }
            if (d == null) {
              d = 0;
            }
            e.x = d;
            e.y = l;
            e.width = p;
            e.height = g;
            e._inPool = false;
          } else {
            l = g = 0;
            d = m.width;
            p = m.height;
            if (p == null) {
              p = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (l == null) {
              l = 0;
            }
            if (g == null) {
              g = 0;
            }
            e = Ha._pool.get();
            if (p == null) {
              p = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (l == null) {
              l = 0;
            }
            if (g == null) {
              g = 0;
            }
            e.x = g;
            e.y = l;
            e.width = d;
            e.height = p;
            e._inPool = false;
          }
          p = t ? -90 : 0;
          d = -e.x;
          g = -e.y;
          if (g == null) {
            g = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (d == null) {
            d = 0;
          }
          g = W.pool.get().set(d, g);
          g._inPool = false;
          l = e.width;
          d = e.height;
          if (d == null) {
            d = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (l == null) {
            l = 0;
          }
          d = W.pool.get().set(l, d);
          d._inPool = false;
          if (t && !k) {
            t = e.height;
            l = e.width;
            if (l == null) {
              l = 0;
            }
            if (t == null) {
              t = 0;
            }
            d.set_x(t);
            d.set_y(l);
          }
          if (m.width == 0 || m.height == 0) {
            if (!k) {
              e.width = 1;
              e.height = 1;
            }
            k = a.addEmptyFrame(e);
            k.name = f;
            f = k.offset;
            k = g.x;
            n = g.y;
            if (n == null) {
              n = 0;
            }
            if (k == null) {
              k = 0;
            }
            f.set_x(k);
            f.set_y(n);
            f = g;
            if (f._weak) {
              f.put();
            }
          } else {
            a.addAtlasFrame(m, d, g, f, p, n, K);
          }
        }
        return a;
      };
      ob.fromSpriteSheetPacker = function (a, b) {
        var c = h.bitmap.add(a);
        if (c == null) {
          return null;
        }
        a = ob.findFrame(c);
        if (a != null) {
          return a;
        }
        if (c == null || b == null) {
          return null;
        }
        a = new ob(c);
        if (Q.exists(b)) {
          b = Q.getText(b);
        }
        b = w.trim(b).split("\n");
        c = 0;
        for (var d = b.length; c < d;) {
          var e = c++;
          var f = b[e].split("=");
          e = w.trim(f[0]);
          f = w.trim(f[1]).split(" ");
          var k = v.parseInt(f[0]);
          var t = v.parseInt(f[1]);
          var n = v.parseInt(f[2]);
          var K = v.parseInt(f[3]);
          if (K == null) {
            K = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f = Ha._pool.get();
          if (K == null) {
            K = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.x = k;
          f.y = t;
          f.width = n;
          f.height = K;
          f._inPool = false;
          K = f.width;
          n = f.height;
          if (n == null) {
            n = 0;
          }
          if (K == null) {
            K = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (K == null) {
            K = 0;
          }
          n = W.pool.get().set(K, n);
          n._inPool = false;
          k = K = 0;
          if (k == null) {
            k = 0;
          }
          if (K == null) {
            K = 0;
          }
          K = W.pool.get().set(K, k);
          K._inPool = false;
          a.addAtlasFrame(f, n, K, e, 0);
        }
        return a;
      };
      ob.findFrame = function (a, b) {
        if (b == null) {
          var c = 0;
          b = 0;
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          b = W.pool.get().set(c, b);
          b._inPool = false;
          b._weak = true;
        }
        c = xf.ATLAS;
        var d = a.frameCollections.get(c);
        if (d == null) {
          d = [];
          a.frameCollections.set(c, d);
        }
        a = d;
        for (c = 0; c < a.length;) {
          d = a[c];
          ++c;
          var e = d.border;
          e = Math.abs(e.x - b.x) <= 1e-7 && Math.abs(e.y - b.y) <= 1e-7;
          if (b._weak) {
            b.put();
          }
          if (e) {
            return d;
          }
        }
        return null;
      };
      ob.__super__ = Be;
      ob.prototype = q(Be.prototype, {
        destroy: function () {
          while (this.usedGraphics.length > 0) {
            this.usedGraphics.shift().decrementUseCount();
          }
          Be.prototype.destroy.call(this);
        },
        __class__: ob
      });
      function Rc(a, b, c, d, e, f) {
        za.call(this, a, b, c, d, e, f);
      }
      g["flixel.math.FlxMatrix"] = Rc;
      Rc.__name__ = "flixel.math.FlxMatrix";
      Rc.__super__ = za;
      Rc.prototype = q(za.prototype, {
        __class__: Rc
      });
      function pb(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = 0;
        }
        this.parent = a;
        this.angle = b;
        this.flipX = c;
        this.flipY = d;
        this.duration = e;
        b = a = this.type = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = W.pool.get().set(a, b);
        a._inPool = false;
        this.sourceSize = a;
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = W.pool.get().set(a, b);
        a._inPool = false;
        this.offset = a;
        this.blitMatrix = Array(6);
        if (h.renderTile) {
          this.tileMatrix = Array(6);
        }
      }
      g["flixel.graphics.frames.FlxFrame"] = pb;
      pb.__name__ = "flixel.graphics.frames.FlxFrame";
      pb.__interfaces__ = [rb];
      pb.sortHelper = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (d) {
          for (d = 0; d < a.length;) {
            var e = a[d];
            ++d;
            e = e.name;
            var f = e.substring(b, e.length - c);
            var k = v.parseInt(f);
            if (k == null) {
              h.log.advanced("Could not parse frame number of \"" + f + "\" in frame named \"" + e + "\"", xa.WARNING, true);
            } else if (k < 0) {
              h.log.advanced("Found negative frame number \"" + f + "\" in frame named \"" + e + "\"", xa.WARNING, true);
            }
          }
        }
        Yc.sort(a, function (a, d) {
          return pb.sortByName(a, d, b, c);
        });
      };
      pb.sortByName = function (a, b, c, d) {
        var e = a.name;
        a = v.parseInt(e.substring(c, e.length - d));
        e = b.name;
        b = v.parseInt(e.substring(c, e.length - d));
        return (a == null ? 0 : a > 0 ? a : -a) - (b == null ? 0 : b > 0 ? b : -b);
      };
      pb.prototype = {
        cacheFrameMatrix: function () {
          var a = pb._matrix;
          var b = true;
          if (b == null) {
            b = true;
          }
          a.identity();
          if (b) {
            a.translate(-this.frame.x, -this.frame.y);
          }
          if (this.angle == 90) {
            a.setTo(-a.b, a.a, -a.d, a.c, -a.ty, a.tx);
            a.translate(this.frame.height, 0);
          } else if (this.angle == -90) {
            a.setTo(a.b, -a.a, a.d, -a.c, a.ty, -a.tx);
            a.translate(0, this.frame.width);
          }
          a.translate(this.offset.x, this.offset.y);
          this.blitMatrix[0] = pb._matrix.a;
          this.blitMatrix[1] = pb._matrix.b;
          this.blitMatrix[2] = pb._matrix.c;
          this.blitMatrix[3] = pb._matrix.d;
          this.blitMatrix[4] = pb._matrix.tx;
          this.blitMatrix[5] = pb._matrix.ty;
          if (h.renderTile) {
            a = pb._matrix;
            b = false;
            if (b == null) {
              b = true;
            }
            a.identity();
            if (b) {
              a.translate(-this.frame.x, -this.frame.y);
            }
            if (this.angle == 90) {
              a.setTo(-a.b, a.a, -a.d, a.c, -a.ty, a.tx);
              a.translate(this.frame.height, 0);
            } else if (this.angle == -90) {
              a.setTo(a.b, -a.a, a.d, -a.c, a.ty, -a.tx);
              a.translate(0, this.frame.width);
            }
            a.translate(this.offset.x, this.offset.y);
            this.tileMatrix[0] = pb._matrix.a;
            this.tileMatrix[1] = pb._matrix.b;
            this.tileMatrix[2] = pb._matrix.c;
            this.tileMatrix[3] = pb._matrix.d;
            this.tileMatrix[4] = pb._matrix.tx;
            this.tileMatrix[5] = pb._matrix.ty;
          }
        },
        prepareTransformedBlitMatrix: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          a.a = this.blitMatrix[0];
          a.b = this.blitMatrix[1];
          a.c = this.blitMatrix[2];
          a.d = this.blitMatrix[3];
          a.tx = this.blitMatrix[4];
          a.ty = this.blitMatrix[5];
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          var e = this.sourceSize.x | 0;
          var f = this.sourceSize.y | 0;
          if (b != 0) {
            var k = e;
            e = f;
            f = k;
            if (b == 90) {
              a.setTo(-a.b, a.a, -a.d, a.c, -a.ty, a.tx);
              a.translate(this.sourceSize.y, 0);
            } else if (b == -90 || b == -90) {
              a.setTo(a.b, -a.a, a.d, -a.c, a.ty, -a.tx);
              a.translate(0, this.sourceSize.x);
            }
          }
          if (c) {
            a.scale(-1, 1);
            a.translate(e, 0);
          }
          if (d) {
            a.scale(1, -1);
            a.translate(0, f);
          }
          return a;
        },
        prepareMatrix: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          if (h.renderBlit) {
            a.identity();
            return a;
          }
          a.a = this.tileMatrix[0];
          a.b = this.tileMatrix[1];
          a.c = this.tileMatrix[2];
          a.d = this.tileMatrix[3];
          a.tx = this.tileMatrix[4];
          a.ty = this.tileMatrix[5];
          c = c != this.flipX;
          d = d != this.flipY;
          if (b == 0 && !c && !d) {
            return a;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          var e = this.sourceSize.x | 0;
          var f = this.sourceSize.y | 0;
          if (b != 0) {
            var k = e;
            e = f;
            f = k;
            if (b == 90) {
              a.setTo(-a.b, a.a, -a.d, a.c, -a.ty, a.tx);
              a.translate(this.sourceSize.y, 0);
            } else if (b == -90 || b == -90) {
              a.setTo(a.b, -a.a, a.d, -a.c, a.ty, -a.tx);
              a.translate(0, this.sourceSize.x);
            }
          }
          if (c) {
            a.scale(-1, 1);
            a.translate(e, 0);
          }
          if (d) {
            a.scale(1, -1);
            a.translate(0, f);
          }
          return a;
        },
        paint: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          var e = 0;
          var f = c;
          if (d == null) {
            d = false;
          }
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = 0;
          }
          var k = e != 0;
          e = (k ? this.sourceSize.y : this.sourceSize.x) | 0;
          k = (k ? this.sourceSize.x : this.sourceSize.y) | 0;
          if (a != null && d) {
            a = ca.disposeIfNotEqual(a, e, k);
          }
          if (a == null || f) {
            if (a == null) {
              a = new T(e, k, true, 0);
            }
          } else {
            if (b != null) {
              pb._rect.setTo(b.x, b.y, e, k);
            } else {
              pb._rect.setTo(0, 0, e, k);
            }
            a.fillRect(pb._rect, 0);
          }
          if (this.type == 2) {
            return a;
          }
          if (this.angle == 0) {
            f = this.offset;
            d = pb._point;
            if (d == null) {
              d = new lb();
            }
            d.x = f.x;
            d.y = f.y;
            if (b != null) {
              pb._point.offset(b.x, b.y);
            }
            f = this.parent.bitmap;
            k = this.frame;
            e = pb._rect;
            if (e == null) {
              e = new da();
            }
            e.x = k.x;
            e.y = k.y;
            e.width = k.width;
            e.height = k.height;
            a.copyPixels(f, e, pb._point, null, null, c);
          } else {
            var t = pb._matrix;
            t.a = this.blitMatrix[0];
            t.b = this.blitMatrix[1];
            t.c = this.blitMatrix[2];
            t.d = this.blitMatrix[3];
            t.tx = this.blitMatrix[4];
            t.ty = this.blitMatrix[5];
            if (b != null) {
              pb._matrix.translate(b.x, b.y);
            }
            f = this.parent.bitmap;
            t = c = pb._matrix;
            d = pb._rect;
            var h = this.frame.x;
            k = this.frame.y;
            if (k == null) {
              k = 0;
            }
            if (h == null) {
              h = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (h == null) {
              h = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (h == null) {
              h = 0;
            }
            b = W.pool.get().set(h, k);
            b._inPool = false;
            b._weak = true;
            e = b;
            k = this.frame;
            h = k.x + k.width;
            k = this.frame;
            k = k.y + k.height;
            if (k == null) {
              k = 0;
            }
            if (h == null) {
              h = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (h == null) {
              h = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (h == null) {
              h = 0;
            }
            b = W.pool.get().set(h, k);
            b._inPool = false;
            b._weak = true;
            h = e.x * t.a + e.y * t.c + t.tx;
            k = e.x * t.b + e.y * t.d + t.ty;
            if (k == null) {
              k = 0;
            }
            if (h == null) {
              h = 0;
            }
            e.set_x(h);
            e.set_y(k);
            h = b.x * t.a + b.y * t.c + t.tx;
            k = b.x * t.b + b.y * t.d + t.ty;
            if (k == null) {
              k = 0;
            }
            if (h == null) {
              h = 0;
            }
            b.set_x(h);
            b.set_y(k);
            k = Ha._pool.get();
            var K = h = t = 0;
            var g = 0;
            if (g == null) {
              g = 0;
            }
            if (K == null) {
              K = 0;
            }
            if (h == null) {
              h = 0;
            }
            if (t == null) {
              t = 0;
            }
            k.x = t;
            k.y = h;
            k.width = K;
            k.height = g;
            k._inPool = false;
            K = Math.min(e.x, b.x);
            g = Math.min(e.y, b.y);
            var l = Math.max(e.x, b.x);
            var p = Math.max(e.y, b.y);
            if (e._weak) {
              e.put();
            }
            e = b;
            if (e._weak) {
              e.put();
            }
            t = K;
            h = g;
            K = l - K;
            g = p - g;
            if (g == null) {
              g = 0;
            }
            if (K == null) {
              K = 0;
            }
            if (h == null) {
              h = 0;
            }
            if (t == null) {
              t = 0;
            }
            k.x = t;
            k.y = h;
            k.width = K;
            k.height = g;
            b = k;
            e = d;
            if (e == null) {
              e = new da();
            }
            e.x = b.x;
            e.y = b.y;
            e.width = b.width;
            e.height = b.height;
            if (!b._inPool) {
              b._inPool = true;
              b._weak = false;
              Ha._pool.putUnsafe(b);
            }
            a.draw(f, c, null, null, d);
          }
          return a;
        },
        paintRotatedAndFlipped: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 0;
          }
          if (this.type == 2 && c == 0) {
            return this.paint(a, b, f, k);
          }
          var t = c;
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = false;
          }
          if (t == null) {
            t = 0;
          }
          var h = t != 0;
          t = (h ? this.sourceSize.y : this.sourceSize.x) | 0;
          h = (h ? this.sourceSize.x : this.sourceSize.y) | 0;
          if (a != null && k) {
            a = ca.disposeIfNotEqual(a, t, h);
          }
          if (a == null || f) {
            if (a == null) {
              a = new T(t, h, true, 0);
            }
          } else {
            if (b != null) {
              pb._rect.setTo(b.x, b.y, t, h);
            } else {
              pb._rect.setTo(0, 0, t, h);
            }
            a.fillRect(pb._rect, 0);
          }
          if (this.type == 2) {
            return a;
          }
          this.prepareTransformedBlitMatrix(pb._matrix, c, d != this.flipX, e != this.flipY);
          if (b != null) {
            pb._matrix.translate(b.x, b.y);
          }
          c = this.parent.bitmap;
          t = d = pb._matrix;
          e = pb._rect;
          h = this.frame.x;
          k = this.frame.y;
          if (k == null) {
            k = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (h == null) {
            h = 0;
          }
          b = W.pool.get().set(h, k);
          b._inPool = false;
          b._weak = true;
          f = b;
          k = this.frame;
          h = k.x + k.width;
          k = this.frame;
          k = k.y + k.height;
          if (k == null) {
            k = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (h == null) {
            h = 0;
          }
          b = W.pool.get().set(h, k);
          b._inPool = false;
          b._weak = true;
          h = f.x * t.a + f.y * t.c + t.tx;
          k = f.x * t.b + f.y * t.d + t.ty;
          if (k == null) {
            k = 0;
          }
          if (h == null) {
            h = 0;
          }
          f.set_x(h);
          f.set_y(k);
          h = b.x * t.a + b.y * t.c + t.tx;
          k = b.x * t.b + b.y * t.d + t.ty;
          if (k == null) {
            k = 0;
          }
          if (h == null) {
            h = 0;
          }
          b.set_x(h);
          b.set_y(k);
          k = Ha._pool.get();
          var K = h = t = 0;
          var g = 0;
          if (g == null) {
            g = 0;
          }
          if (K == null) {
            K = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (t == null) {
            t = 0;
          }
          k.x = t;
          k.y = h;
          k.width = K;
          k.height = g;
          k._inPool = false;
          K = Math.min(f.x, b.x);
          g = Math.min(f.y, b.y);
          var l = Math.max(f.x, b.x);
          var p = Math.max(f.y, b.y);
          if (f._weak) {
            f.put();
          }
          f = b;
          if (f._weak) {
            f.put();
          }
          t = K;
          h = g;
          K = l - K;
          g = p - g;
          if (g == null) {
            g = 0;
          }
          if (K == null) {
            K = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (t == null) {
            t = 0;
          }
          k.x = t;
          k.y = h;
          k.width = K;
          k.height = g;
          f = k;
          b = e;
          if (b == null) {
            b = new da();
          }
          b.x = f.x;
          b.y = f.y;
          b.width = f.width;
          b.height = f.height;
          if (!f._inPool) {
            f._inPool = true;
            f._weak = false;
            Ha._pool.putUnsafe(f);
          }
          a.draw(c, d, null, null, e);
          return a;
        },
        clipTo: function (a, b) {
          if (b == null) {
            b = new pb(this.parent, this.angle);
          } else {
            b.parent = this.parent;
            b.angle = this.angle;
            b.set_frame(ca.put(b.frame));
          }
          var c = b.sourceSize;
          var d = this.sourceSize;
          var e = d.x;
          var f = d.y;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          c.set_x(e);
          c.set_y(f);
          e = d;
          if (e._weak) {
            e.put();
          }
          b.name = this.name;
          if (this.type == 2) {
            b.type = 2;
            c = b.offset;
            f = e = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.set_x(e);
            c.set_y(f);
            return b;
          }
          var k = 0;
          c = 0;
          if (c == null) {
            c = 0;
          }
          if (k == null) {
            k = 0;
          }
          e = Ha._pool.get();
          d = k;
          var t = 0;
          f = 0;
          if (f == null) {
            f = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          e.x = d;
          e.y = c;
          e.width = t;
          e.height = f;
          d = e;
          d._inPool = false;
          e = d;
          e.width = this.frame.width;
          e.height = this.frame.height;
          c = e;
          if (this.angle != 0) {
            c.width = this.frame.height;
            c.height = this.frame.width;
          }
          a.x += -this.offset.x;
          a.y += -this.offset.y;
          d = c.intersection(a);
          if (!c._inPool) {
            c._inPool = true;
            c._weak = false;
            Ha._pool.putUnsafe(c);
          }
          if (d.width == 0 || d.height == 0) {
            b.type = 2;
            f = t = c = k = 0;
            if (f == null) {
              f = 0;
            }
            if (t == null) {
              t = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (k == null) {
              k = 0;
            }
            d.x = k;
            d.y = c;
            d.width = t;
            d.height = f;
            b.set_frame(d);
            c = b.offset;
            f = e = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.set_x(e);
            c.set_y(f);
          } else {
            b.type = 0;
            c = b.offset;
            e = d.x;
            f = d.y;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.set_x(e);
            c.set_y(f);
            k = this.offset;
            e = k.x;
            f = k.y;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.set_x(c.x + e);
            c.set_y(c.y + f);
            e = k;
            if (e._weak) {
              e.put();
            }
            e = d.x;
            f = d.y;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            k = W.pool.get().set(e, f);
            k._inPool = false;
            e = k;
            e._weak = true;
            c = e;
            e = d.x + d.width;
            f = d.y + d.height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            k = W.pool.get().set(e, f);
            k._inPool = false;
            e = k;
            e._weak = true;
            k = e;
            pb._matrix.identity();
            if (this.angle == -90) {
              e = pb._matrix;
              e.setTo(-e.b, e.a, -e.d, e.c, -e.ty, e.tx);
              pb._matrix.translate(this.frame.width, 0);
            } else if (this.angle == 90) {
              e = pb._matrix;
              e.setTo(e.b, -e.a, e.d, -e.c, e.ty, -e.tx);
              pb._matrix.translate(0, this.frame.height);
            }
            if (this.angle != 0) {
              f = pb._matrix;
              e = c.x * f.a + c.y * f.c + f.tx;
              f = c.x * f.b + c.y * f.d + f.ty;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(f);
              f = pb._matrix;
              e = k.x * f.a + k.y * f.c + f.tx;
              f = k.x * f.b + k.y * f.d + f.ty;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              k.set_x(e);
              k.set_y(f);
            }
            t = Math.min(c.x, k.x);
            f = Math.min(c.y, k.y);
            var h = Math.max(c.x, k.x);
            var g = Math.max(c.y, k.y);
            e = c;
            if (e._weak) {
              e.put();
            }
            e = k;
            if (e._weak) {
              e.put();
            }
            k = t;
            c = f;
            t = h - t;
            f = g - f;
            if (f == null) {
              f = 0;
            }
            if (t == null) {
              t = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (k == null) {
              k = 0;
            }
            d.x = k;
            d.y = c;
            d.width = t;
            d.height = f;
            d.x += this.frame.x;
            d.y += this.frame.y;
            b.set_frame(d);
            b.cacheFrameMatrix();
          }
          a.x += this.offset.x;
          a.y += this.offset.y;
          return b;
        },
        copyTo: function (a) {
          if (a == null) {
            a = new pb(this.parent, this.angle);
          } else {
            a.parent = this.parent;
            a.angle = this.angle;
            a.set_frame(ca.put(a.frame));
          }
          var b = a.offset;
          var c = this.offset;
          var d = c.x;
          var e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(d);
          b.set_y(e);
          b = c;
          if (b._weak) {
            b.put();
          }
          a.flipX = this.flipX;
          a.flipY = this.flipY;
          b = a.sourceSize;
          c = this.sourceSize;
          d = c.x;
          e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(d);
          b.set_y(e);
          b = c;
          if (b._weak) {
            b.put();
          }
          b = Ha._pool.get();
          var f = e = d = c = 0;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.x = c;
          b.y = d;
          b.width = e;
          b.height = f;
          b._inPool = false;
          c = this.frame;
          b.x = c.x;
          b.y = c.y;
          b.width = c.width;
          b.height = c.height;
          if (c._weak && !c._inPool) {
            c._inPool = true;
            c._weak = false;
            Ha._pool.putUnsafe(c);
          }
          a.set_frame(b);
          a.type = this.type;
          a.name = this.name;
          a.cacheFrameMatrix();
          return a;
        },
        destroy: function () {
          this.parent = this.name = null;
          this.sourceSize = ca.put(this.sourceSize);
          this.offset = ca.put(this.offset);
          this.set_frame(ca.put(this.frame));
          this.uv = ca.put(this.uv);
          this.tileMatrix = this.blitMatrix = null;
        },
        set_frame: function (a) {
          if (a != null) {
            if (this.uv == null) {
              var b = Ha._pool.get();
              var c = 0;
              var d = 0;
              var e = 0;
              var f = 0;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              b.x = c;
              b.y = d;
              b.width = e;
              b.height = f;
              b._inPool = false;
              this.uv = b;
            }
            b = this.uv;
            c = a.x / this.parent.width;
            d = a.y / this.parent.height;
            e = (a.x + a.width) / this.parent.width;
            f = (a.y + a.height) / this.parent.height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
          }
          return this.frame = a;
        },
        __class__: pb,
        __properties__: {
          set_frame: "set_frame"
        }
      };
      var xf = z["flixel.graphics.frames.FlxFrameCollectionType"] = {
        __ename__: "flixel.graphics.frames.FlxFrameCollectionType",
        __constructs__: null,
        IMAGE: {
          _hx_name: "IMAGE",
          _hx_index: 0,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        },
        TILES: {
          _hx_name: "TILES",
          _hx_index: 1,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        },
        ATLAS: {
          _hx_name: "ATLAS",
          _hx_index: 2,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        },
        FONT: {
          _hx_name: "FONT",
          _hx_index: 3,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        },
        USER: (u = function (a) {
          return {
            _hx_index: 4,
            type: a,
            __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
            toString: p
          };
        }, u._hx_name = "USER", u.__params__ = ["type"], u),
        FILTER: {
          _hx_name: "FILTER",
          _hx_index: 5,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        }
      };
      xf.__constructs__ = [xf.IMAGE, xf.TILES, xf.ATLAS, xf.FONT, xf.USER, xf.FILTER];
      function Wf(a, b) {
        Be.call(this, a, xf.IMAGE, b);
      }
      g["flixel.graphics.frames.FlxImageFrame"] = Wf;
      Wf.__name__ = "flixel.graphics.frames.FlxImageFrame";
      Wf.fromGraphic = function (a, b) {
        if (a == null || a.shader == null) {
          return null;
        }
        var c = 0;
        var d = 0;
        var e = a.width;
        var f = a.height;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        var k = Ha._pool.get();
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        k.x = c;
        k.y = d;
        k.width = e;
        k.height = f;
        k._inPool = false;
        if (b != null) {
          k.x = b.x;
          k.y = b.y;
          k.width = b.width;
          k.height = b.height;
          if (k._weak && !k._inPool) {
            k._inPool = true;
            k._weak = false;
            Ha._pool.putUnsafe(k);
          }
        }
        var t = Wf.findFrame(a, k);
        if (!k._inPool) {
          k._inPool = true;
          k._weak = false;
          Ha._pool.putUnsafe(k);
        }
        if (t != null) {
          if (b != null && b._weak && !b._inPool) {
            b._inPool = true;
            b._weak = false;
            Ha._pool.putUnsafe(b);
          }
          return t;
        }
        t = new Wf(a);
        if (b == null) {
          d = c = 0;
          e = a.width;
          f = a.height;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          k = Ha._pool.get();
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          k.x = c;
          k.y = d;
          k.width = e;
          k.height = f;
          k._inPool = false;
          a = k;
          a._weak = true;
          b = a;
        } else {
          if (b.width == 0) {
            b.width = a.width - b.x;
          }
          if (b.height == 0) {
            b.height = a.height - b.y;
          }
        }
        t.addSpriteSheetFrame(b);
        return t;
      };
      Wf.fromRectangle = function (a, b) {
        a = h.bitmap.add(a, false);
        return Wf.fromGraphic(a, b);
      };
      Wf.findFrame = function (a, b, c) {
        if (c == null) {
          var d = 0;
          c = 0;
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          var e = W.pool.get().set(d, c);
          e._inPool = false;
          c = e;
          c._weak = true;
        }
        d = xf.IMAGE;
        var f = a.frameCollections.get(d);
        if (f == null) {
          f = [];
          a.frameCollections.set(d, f);
        }
        a = f;
        for (d = 0; d < a.length;) {
          f = a[d];
          ++d;
          e = f.get_frame().frame;
          var k = Math.abs(b.x - e.x) <= 1e-7 && Math.abs(b.y - e.y) <= 1e-7 && Math.abs(b.width - e.width) <= 1e-7 && Math.abs(b.height - e.height) <= 1e-7;
          if (e._weak && !e._inPool) {
            e._inPool = true;
            e._weak = false;
            Ha._pool.putUnsafe(e);
          }
          if (k) {
            k = c;
            e = f.border;
            k = Math.abs(k.x - e.x) <= 1e-7 && Math.abs(k.y - e.y) <= 1e-7;
            if (e._weak) {
              e.put();
            }
            e = k;
          } else {
            e = false;
          }
          if (e && f.get_frame().type != 2) {
            return f;
          }
        }
        k = c;
        if (k._weak) {
          k.put();
        }
        if (b._weak && !b._inPool) {
          b._inPool = true;
          b._weak = false;
          Ha._pool.putUnsafe(b);
        }
        return null;
      };
      Wf.__super__ = Be;
      Wf.prototype = q(Be.prototype, {
        get_frame: function () {
          return this.frames[0];
        },
        __class__: Wf,
        __properties__: {
          get_frame: "get_frame"
        }
      });
      function Fg(a, b) {
        this.numRows = this.numCols = 0;
        Be.call(this, a, xf.TILES, b);
      }
      g["flixel.graphics.frames.FlxTileFrames"] = Fg;
      Fg.__name__ = "flixel.graphics.frames.FlxTileFrames";
      Fg.fromGraphic = function (a, b, c, d) {
        var e = Fg.findFrame(a, b, c, null, d);
        if (e != null) {
          return e;
        }
        if (c == null) {
          var f = 0;
          var k = 0;
          var t = a.width;
          var h = a.height;
          if (h == null) {
            h = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          var g = Ha._pool.get();
          if (h == null) {
            h = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          g.x = f;
          g.y = k;
          g.width = t;
          g.height = h;
          g._inPool = false;
          c = g;
        } else {
          if (c.width == 0) {
            c.width = a.width - c.x;
          }
          if (c.height == 0) {
            c.height = a.height - c.y;
          }
        }
        if (d == null) {
          var p = 0;
          e = 0;
          if (e == null) {
            e = 0;
          }
          if (p == null) {
            p = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (p == null) {
            p = 0;
          }
          e = W.pool.get().set(p, e);
          e._inPool = false;
          d = e;
        }
        e = new Fg(a);
        e.region = c;
        e.atlasFrame = null;
        e.tileSize = b;
        e.tileSpacing = d;
        c.x = Math.floor(c.x);
        c.y = Math.floor(c.y);
        c.width = Math.floor(c.width);
        c.height = Math.floor(c.height);
        d.set_x(Math.floor(d.x));
        d.set_y(Math.floor(d.y));
        b.set_x(Math.floor(b.x));
        b.set_y(Math.floor(b.y));
        a = b.x + d.x;
        p = b.y + d.y;
        var l = b.y == 0 ? 1 : (c.height + d.y) / p | 0;
        d = b.x == 0 ? 1 : (c.width + d.x) / a | 0;
        for (var L = 0; L < l;) {
          var m = L++;
          for (var v = 0, q = d; v < q;) {
            g = v++;
            f = c.x + g * a;
            k = c.y + m * p;
            t = b.x;
            h = b.y;
            if (h == null) {
              h = 0;
            }
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            g = Ha._pool.get();
            if (h == null) {
              h = 0;
            }
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            g.x = f;
            g.y = k;
            g.width = t;
            g.height = h;
            g._inPool = false;
            e.addSpriteSheetFrame(g);
          }
        }
        e.numCols = d;
        e.numRows = l;
        return e;
      };
      Fg.findFrame = function (a, b, c, d, e, f) {
        d = xf.TILES;
        var k = a.frameCollections.get(d);
        if (k == null) {
          k = [];
          a.frameCollections.set(d, k);
        }
        a = k;
        for (d = 0; d < a.length;) {
          k = a[d];
          ++d;
          if (k.equals(b, c, null, e, f)) {
            return k;
          }
        }
        return null;
      };
      Fg.__super__ = Be;
      Fg.prototype = q(Be.prototype, {
        equals: function (a, b, c, d, e) {
          if (this.region == null && this.atlasFrame == null) {
            return false;
          }
          if (c != null) {
            b = c.frame;
          }
          if (b == null) {
            var f = b = 0;
            var k = this.parent.width;
            var t = this.parent.height;
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (b == null) {
              b = 0;
            }
            var h = Ha._pool.get();
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (b == null) {
              b = 0;
            }
            h.x = b;
            h.y = f;
            h.width = k;
            h.height = t;
            h._inPool = false;
            h._weak = true;
            b = h;
          }
          if (d == null) {
            h = f = 0;
            if (h == null) {
              h = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (h == null) {
              h = 0;
            }
            if (f == null) {
              f = 0;
            }
            h = W.pool.get().set(f, h);
            h._inPool = false;
            h._weak = true;
            d = h;
          }
          if (e == null) {
            h = f = 0;
            if (h == null) {
              h = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (h == null) {
              h = 0;
            }
            if (f == null) {
              f = 0;
            }
            h = W.pool.get().set(f, h);
            h._inPool = false;
            h._weak = true;
            e = h;
          }
          if (this.atlasFrame == c) {
            h = this.region;
            c = Math.abs(h.x - b.x) <= 1e-7 && Math.abs(h.y - b.y) <= 1e-7 && Math.abs(h.width - b.width) <= 1e-7 && Math.abs(h.height - b.height) <= 1e-7;
            if (b._weak && !b._inPool) {
              b._inPool = true;
              b._weak = false;
              Ha._pool.putUnsafe(b);
            }
          } else {
            c = false;
          }
          if (c) {
            h = this.tileSize;
            c = Math.abs(h.x - a.x) <= 1e-7 && Math.abs(h.y - a.y) <= 1e-7;
            if (a._weak) {
              a.put();
            }
            a = c;
          } else {
            a = false;
          }
          if (a) {
            h = this.tileSpacing;
            c = Math.abs(h.x - d.x) <= 1e-7 && Math.abs(h.y - d.y) <= 1e-7;
            if (d._weak) {
              d.put();
            }
            d = c;
          } else {
            d = false;
          }
          if (d) {
            h = this.border;
            c = Math.abs(h.x - e.x) <= 1e-7 && Math.abs(h.y - e.y) <= 1e-7;
            if (e._weak) {
              e.put();
            }
            return c;
          } else {
            return false;
          }
        },
        destroy: function () {
          Be.prototype.destroy.call(this);
          this.atlasFrame = null;
          this.region = ca.put(this.region);
          this.tileSize = ca.put(this.tileSize);
          this.tileSpacing = ca.put(this.tileSpacing);
        },
        __class__: Fg
      });
      function Ld() {
        this.blending = 0;
        this.antialiasing = this.colored = this.hasColorOffsets = false;
      }
      g["flixel.graphics.tile.FlxDrawBaseItem"] = Ld;
      Ld.__name__ = "flixel.graphics.tile.FlxDrawBaseItem";
      Ld.blendToInt = function (a) {
        return 0;
      };
      Ld.prototype = {
        reset: function () {
          this.graphics = null;
          this.antialiasing = false;
          this.next = this.nextTyped = null;
        },
        render: function (a) {
          Ld.drawCalls++;
        },
        __class__: Ld
      };
      var vk = z["flixel.graphics.tile.FlxDrawItemType"] = {
        __ename__: "flixel.graphics.tile.FlxDrawItemType",
        __constructs__: null,
        TILES: {
          _hx_name: "TILES",
          _hx_index: 0,
          __enum__: "flixel.graphics.tile.FlxDrawItemType",
          toString: p
        },
        TRIANGLES: {
          _hx_name: "TRIANGLES",
          _hx_index: 1,
          __enum__: "flixel.graphics.tile.FlxDrawItemType",
          toString: p
        }
      };
      vk.__constructs__ = [vk.TILES, vk.TRIANGLES];
      function wk() {
        Ld.call(this);
        this.type = vk.TILES;
        this.rects = ab.toFloatVector(null);
        this.transforms = ab.toFloatVector(null);
        this.alphas = [];
      }
      g["flixel.graphics.tile.FlxDrawQuadsItem"] = wk;
      wk.__name__ = "flixel.graphics.tile.FlxDrawQuadsItem";
      wk.__super__ = Ld;
      wk.prototype = q(Ld.prototype, {
        reset: function () {
          Ld.prototype.reset.call(this);
          this.rects.set_length(0);
          this.transforms.set_length(0);
          this.alphas.splice(0, this.alphas.length);
          if (this.colorMultipliers != null) {
            this.colorMultipliers.splice(0, this.colorMultipliers.length);
          }
          if (this.colorOffsets != null) {
            this.colorOffsets.splice(0, this.colorOffsets.length);
          }
        },
        addQuad: function (a, b, c) {
          a = a.frame;
          this.rects.push(a.x);
          this.rects.push(a.y);
          this.rects.push(a.width);
          this.rects.push(a.height);
          this.transforms.push(b.a);
          this.transforms.push(b.b);
          this.transforms.push(b.c);
          this.transforms.push(b.d);
          this.transforms.push(b.tx);
          this.transforms.push(b.ty);
          b = c != null ? c.alphaMultiplier : 1;
          this.alphas.push(b);
          this.alphas.push(b);
          this.alphas.push(b);
          this.alphas.push(b);
          if (this.colored || this.hasColorOffsets) {
            if (this.colorMultipliers == null) {
              this.colorMultipliers = [];
            }
            if (this.colorOffsets == null) {
              this.colorOffsets = [];
            }
            b = 0;
            while (b < 4) {
              b++;
              if (c != null) {
                this.colorMultipliers.push(c.redMultiplier);
                this.colorMultipliers.push(c.greenMultiplier);
                this.colorMultipliers.push(c.blueMultiplier);
                this.colorOffsets.push(c.redOffset);
                this.colorOffsets.push(c.greenOffset);
                this.colorOffsets.push(c.blueOffset);
                this.colorOffsets.push(c.alphaOffset);
              } else {
                this.colorMultipliers.push(1);
                this.colorMultipliers.push(1);
                this.colorMultipliers.push(1);
                this.colorOffsets.push(0);
                this.colorOffsets.push(0);
                this.colorOffsets.push(0);
                this.colorOffsets.push(0);
              }
              this.colorMultipliers.push(1);
            }
          }
        },
        render: function (a) {
          if (this.rects.get_length() != 0) {
            if (this.shader == null && this.graphics.shader == null) {
              throw G.thrown("Attempted to render an invalid FlxDrawItem, did you destroy a cached sprite?");
            }
            var b = this.shader ?? this.graphics.shader;
            b.bitmap.input = this.graphics.bitmap;
            b.bitmap.filter = a.antialiasing || this.antialiasing ? 4 : 5;
            b.alpha.value = this.alphas;
            if (this.colored || this.hasColorOffsets) {
              b.colorMultiplier.value = this.colorMultipliers;
              b.colorOffset.value = this.colorOffsets;
            }
            var c = b.hasTransform;
            if (c.value == null) {
              c.value = [];
            }
            c.value[0] = true;
            c = b.hasColorTransform;
            if (c.value == null) {
              c.value = [];
            }
            c.value[0] = this.colored || this.hasColorOffsets;
            a.canvas.get_graphics().overrideBlendMode(this.blend);
            a.canvas.get_graphics().beginShaderFill(b);
            a.canvas.get_graphics().drawQuads(this.rects, null, this.transforms);
            Ld.prototype.render.call(this, a);
          }
        },
        __class__: wk
      });
      function Fn() {
        this.verticesPosition = this.indicesPosition = this.colorsPosition = 0;
        this.colors = ab.toIntVector(null);
        this.uvtData = ab.toFloatVector(null);
        this.indices = ab.toIntVector(null);
        this.vertices = ab.toFloatVector(null);
        Ld.call(this);
        this.type = vk.TRIANGLES;
        this.alphas = [];
      }
      g["flixel.graphics.tile.FlxDrawTrianglesItem"] = Fn;
      Fn.__name__ = "flixel.graphics.tile.FlxDrawTrianglesItem";
      Fn.__super__ = Ld;
      Fn.prototype = q(Ld.prototype, {
        render: function (a) {
          if (h.renderTile && !(this.get_numTriangles() <= 0)) {
            var b = this.shader ?? this.graphics.shader;
            b.bitmap.input = this.graphics.bitmap;
            b.bitmap.filter = a.antialiasing || this.antialiasing ? 4 : 5;
            b.bitmap.wrap = 2;
            b.alpha.value = this.alphas;
            if (this.colored || this.hasColorOffsets) {
              b.colorMultiplier.value = this.colorMultipliers;
              b.colorOffset.value = this.colorOffsets;
            }
            var c = b.hasTransform;
            if (c.value == null) {
              c.value = [];
            }
            c.value[0] = true;
            c = b.hasColorTransform;
            if (c.value == null) {
              c.value = [];
            }
            c.value[0] = this.colored || this.hasColorOffsets;
            a.canvas.get_graphics().overrideBlendMode(this.blend);
            a.canvas.get_graphics().beginShaderFill(b);
            a.canvas.get_graphics().drawTriangles(this.vertices, this.indices, this.uvtData, 1);
            a.canvas.get_graphics().endFill();
            Ld.prototype.render.call(this, a);
          }
        },
        reset: function () {
          Ld.prototype.reset.call(this);
          var a = this.vertices;
          var b = this.vertices.get_length();
          for (var c = a.__tempIndex = 0, d = []; c < d.length;) {
            var e = d[c++];
            a.insertAt(a.__tempIndex, e);
            a.__tempIndex++;
          }
          a.splice(a.__tempIndex, b);
          a = this.indices;
          b = this.indices.get_length();
          c = a.__tempIndex = 0;
          for (d = []; c < d.length;) {
            e = d[c++];
            a.insertAt(a.__tempIndex, e);
            a.__tempIndex++;
          }
          a.splice(a.__tempIndex, b);
          a = this.uvtData;
          b = this.uvtData.get_length();
          c = a.__tempIndex = 0;
          for (d = []; c < d.length;) {
            e = d[c++];
            a.insertAt(a.__tempIndex, e);
            a.__tempIndex++;
          }
          a.splice(a.__tempIndex, b);
          a = this.colors;
          b = this.colors.get_length();
          c = a.__tempIndex = 0;
          for (d = []; c < d.length;) {
            e = d[c++];
            a.insertAt(a.__tempIndex, e);
            a.__tempIndex++;
          }
          a.splice(a.__tempIndex, b);
          this.colorsPosition = this.indicesPosition = this.verticesPosition = 0;
          this.alphas.splice(0, this.alphas.length);
          if (this.colorMultipliers != null) {
            this.colorMultipliers.splice(0, this.colorMultipliers.length);
          }
          if (this.colorOffsets != null) {
            this.colorOffsets.splice(0, this.colorOffsets.length);
          }
        },
        get_numTriangles: function () {
          return this.indices.get_length() / 3 | 0;
        },
        __class__: Fn
      });
      function tc(a, b) {
        this._groupMembers = a;
        this._filter = b;
        this._cursor = 0;
        this._length = this._groupMembers.length;
      }
      g["flixel.group.FlxTypedGroupIterator"] = tc;
      tc.__name__ = "flixel.group.FlxTypedGroupIterator";
      tc.prototype = {
        next: function () {
          if (this.hasNext()) {
            return this._groupMembers[this._cursor++];
          } else {
            return null;
          }
        },
        hasNext: function () {
          while (this._cursor < this._length && (this._groupMembers[this._cursor] == null || this._filter != null && !this._filter(this._groupMembers[this._cursor]))) {
            this._cursor++;
          }
          return this._cursor < this._length;
        },
        __class__: tc
      };
      function Lk(a, b) {
        this.parentSprite = a;
        We.call(this, b);
      }
      g["flixel.group._FlxSpriteContainer.SpriteContainer"] = Lk;
      Lk.__name__ = "flixel.group._FlxSpriteContainer.SpriteContainer";
      Lk.__super__ = We;
      Lk.prototype = q(We.prototype, {
        get_container: function () {
          return this.parentSprite.get_container();
        },
        getCamerasLegacy: function () {
          return this._cameras ?? this.parentSprite.getCamerasLegacy();
        },
        getCameras: function () {
          return this._cameras ?? this.parentSprite.getCameras();
        },
        __class__: Lk
      });
      function vn() {
        this.x = this.y = this.z = 0;
        if (mc.get_isSupported()) {
          this._sensor = new mc();
          this._sensor.addEventListener("update", m(this, this.update));
        }
      }
      g["flixel.input.FlxAccelerometer"] = vn;
      vn.__name__ = "flixel.input.FlxAccelerometer";
      vn.prototype = {
        update: function (a) {
          this.x = a.accelerationX;
          this.y = a.accelerationY;
          this.z = a.accelerationZ;
          this.x /= 10;
          this.y /= 10;
          this.z /= 10;
        },
        __class__: vn
      };
      function oj(a, b) {
        this.status = a;
        this.keyManager = b;
      }
      g["flixel.input.FlxBaseKeyList"] = oj;
      oj.__name__ = "flixel.input.FlxBaseKeyList";
      oj.prototype = {
        get_ANY: function () {
          for (var a = 0, b = this.keyManager._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && this.keyManager.checkStatusUnsafe(c.ID, this.status)) {
              return true;
            }
          }
          return false;
        },
        get_NONE: function () {
          for (var a = 0, b = this.keyManager._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && this.keyManager.checkStatusUnsafe(c.ID, this.status)) {
              return false;
            }
          }
          return true;
        },
        __class__: oj,
        __properties__: {
          get_NONE: "get_NONE",
          get_ANY: "get_ANY"
        }
      };
      function ke(a) {
        this.current = this.last = 0;
        this.ID = a;
      }
      g["flixel.input.FlxInput"] = ke;
      ke.__name__ = "flixel.input.FlxInput";
      ke.__interfaces__ = [sh];
      ke.prototype = {
        press: function () {
          this.last = this.current;
          this.current = this.current == 1 || this.current == 2 ? 1 : 2;
        },
        release: function () {
          this.last = this.current;
          this.current = this.current == 1 || this.current == 2 ? -1 : 0;
        },
        update: function () {
          if (this.last == -1 && this.current == -1) {
            this.current = 0;
          } else if (this.last == 2 && this.current == 2) {
            this.current = 1;
          }
          this.last = this.current;
        },
        reset: function () {
          this.last = this.current = 0;
        },
        hasState: function (a) {
          switch (a) {
            case -1:
              return this.current == -1;
            case 0:
              if (this.current != 0) {
                return this.current == -1;
              } else {
                return true;
              }
            case 1:
              if (this.current != 1) {
                return this.current == 2;
              } else {
                return true;
              }
            case 2:
              return this.current == 2;
          }
        },
        get_justReleased: function () {
          return this.current == -1;
        },
        get_pressed: function () {
          if (this.current != 1) {
            return this.current == 2;
          } else {
            return true;
          }
        },
        get_justPressed: function () {
          return this.current == 2;
        },
        __class__: ke,
        __properties__: {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased"
        }
      };
      function Mg(a) {
        this._keyListMap = new wc();
        this._keyListArray = [];
        this.preventDefaultKeys = [];
        this.enabled = true;
        oa.get_current().stage.addEventListener("keyDown", m(this, this.onKeyDown));
        oa.get_current().stage.addEventListener("keyUp", m(this, this.onKeyUp));
        this.pressed = a(1, this);
        this.released = a(0, this);
        this.justPressed = a(2, this);
        this.justReleased = a(-1, this);
      }
      g["flixel.input.FlxKeyManager"] = Mg;
      Mg.__name__ = "flixel.input.FlxKeyManager";
      Mg.__interfaces__ = [Lg];
      Mg.prototype = {
        firstJustPressed: function () {
          for (var a = 0, b = this._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.current == 2) {
              return c.ID;
            }
          }
          return -1;
        },
        firstJustReleased: function () {
          for (var a = 0, b = this._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.current == -1) {
              return c.ID;
            }
          }
          return -1;
        },
        checkStatus: function (a, b) {
          if (a == -2) {
            switch (b) {
              case -1:
                return this.justReleased.get_ANY();
              case 0:
                return this.released.get_ANY();
              case 1:
                return this.pressed.get_ANY();
              case 2:
                return this.justPressed.get_ANY();
            }
          }
          if (a == -1) {
            switch (b) {
              case -1:
                return this.justReleased.get_NONE();
              case 0:
                return this.released.get_NONE();
              case 1:
                return this.pressed.get_NONE();
              case 2:
                return this.justPressed.get_NONE();
            }
          }
          if (this._keyListMap.h.hasOwnProperty(a)) {
            return this.checkStatusUnsafe(a, b);
          } else {
            return false;
          }
        },
        checkStatusUnsafe: function (a, b) {
          return this._keyListMap.h[a].hasState(b);
        },
        destroy: function () {
          this._keyListMap = this._keyListArray = null;
        },
        reset: function () {
          for (var a = 0, b = this._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.release();
            }
          }
        },
        update: function () {
          for (var a = 0, b = this._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.update();
            }
          }
        },
        checkKeyArrayState: function (a, b) {
          if (a == null) {
            return false;
          }
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            if (this.checkStatus(d, b)) {
              return true;
            }
          }
          return false;
        },
        onKeyUp: function (a) {
          var b = this.resolveKeyCode(a);
          this.handlePreventDefaultKeys(b, a);
          if (this.enabled) {
            a = this._keyListMap.h[b];
            if (a != null) {
              a.release();
            }
          }
        },
        onKeyDown: function (a) {
          var b = this.resolveKeyCode(a);
          this.handlePreventDefaultKeys(b, a);
          if (this.enabled) {
            a = this._keyListMap.h[b];
            if (a != null) {
              a.press();
            }
          }
        },
        handlePreventDefaultKeys: function (a, b) {
          a = this._keyListMap.h[a];
          if (a != null && this.preventDefaultKeys != null && this.preventDefaultKeys.indexOf(a.ID) != -1) {
            b.stopImmediatePropagation();
            b.stopPropagation();
            b.preventDefault();
          }
        },
        resolveKeyCode: function (a) {
          return a.keyCode;
        },
        onFocus: function () {},
        onFocusLost: function () {
          this.reset();
        },
        __class__: Mg
      };
      function pj(a, b, c, d) {
        this.ID = a;
        this.startPosition = b;
        this.endPosition = c;
        this._startTimeInTicks = d;
        this._endTimeInTicks = h.game.ticks;
      }
      g["flixel.input.FlxSwipe"] = pj;
      pj.__name__ = "flixel.input.FlxSwipe";
      pj.__interfaces__ = [rb];
      pj.prototype = {
        destroy: function () {
          this.startPosition = ca.put(this.startPosition);
          this.endPosition = ca.put(this.endPosition);
        },
        __class__: pj
      };
      function Rk(a, b, c, d) {
        this.buttons = [];
        this._deadZone = 0.15;
        d = [];
        d.push(0);
        d.push(0);
        d.push(0);
        d.push(0);
        d.push(0);
        d.push(0);
        this.axis = d;
        this.deadZoneMode = Qk.INDEPENDENT_AXES;
        this.connected = true;
        this.id = a;
        this.manager = b;
        this.pressed = new uh(1, this);
        this.released = new uh(0, this);
        this.justPressed = new uh(2, this);
        this.justReleased = new uh(-1, this);
        this.analog = new Gn(this);
        this.motion = new Hn(this);
        this.pointer = new In(this);
        if (c == null) {
          c = rc.XINPUT;
        }
        this.set_model(c);
        this.detectedModel = c;
      }
      g["flixel.input.gamepad.FlxGamepad"] = Rk;
      Rk.__name__ = "flixel.input.gamepad.FlxGamepad";
      Rk.__interfaces__ = [rb];
      Rk.prototype = {
        getButton: function (a) {
          if (a == -1) {
            return null;
          }
          var b = this.buttons[a];
          if (b == null) {
            b = new Sk(a);
            this.buttons[a] = b;
          }
          return b;
        },
        update: function () {
          if (this._device != null) {
            for (var a = 0, b = this._device.get_numControls(); a < b;) {
              var c = a++;
              var d = this._device.getControlAt(c);
              var e = this.getButton(c);
              if (this.isAxisForAnalogStick(c)) {
                this.handleAxisMove(c, d.value, e.value);
              }
              e.value = d.value;
              d = Math.abs(d.value);
              if (d < this.get_deadZone()) {
                e.release();
              } else if (d > this.get_deadZone()) {
                e.press();
              }
            }
            a = 0;
            for (b = this.buttons; a < b.length;) {
              e = b[a];
              ++a;
              if (e != null) {
                e.update();
              }
            }
          }
        },
        reset: function () {
          for (var a = 0, b = this.buttons; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.reset();
            }
          }
          b = this.axis.length;
          for (a = 0; a < b;) {
            c = a++;
            this.axis[c] = 0;
          }
        },
        destroy: function () {
          this.connected = false;
          this.manager = this.axis = this.buttons = null;
        },
        checkButtonArrayState: function (a, b) {
          if (a == null) {
            return false;
          }
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            switch (d) {
              case -2:
                d = this.anyButton(b);
                break;
              case -1:
                d = !this.anyButton(b);
                break;
              default:
                d = this.mapping.getRawID(d);
                d = this.buttons[d];
                d = d != null && d.hasState(b);
            }
            if (d) {
              return true;
            }
          }
          return false;
        },
        firstJustPressedRawID: function () {
          for (var a = 0, b = this.buttons; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.current == 2) {
              return c.ID;
            }
          }
          return -1;
        },
        firstJustReleasedRawID: function () {
          for (var a = 0, b = this.buttons; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.current == -1) {
              return c.ID;
            }
          }
          return -1;
        },
        getAxis: function (a) {
          a = this.getAxisValue(this.mapping.getRawID(a));
          if (Math.abs(a) > this.get_deadZone()) {
            return a;
          } else {
            return 0;
          }
        },
        isAxisForAnalogStick: function (a) {
          var b = this.mapping.leftStick;
          var c = this.mapping.rightStick;
          if (b != null && (a == b.x || a == b.y) || c != null && (a == c.x || a == c.y)) {
            return true;
          } else {
            return false;
          }
        },
        getYAxisRaw: function (a) {
          return this.getAnalogYAxisValue(a);
        },
        anyButton: function (a) {
          if (a == null) {
            a = 1;
          }
          for (var b = 0, c = this.buttons; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.hasState(a)) {
              return true;
            }
          }
          return false;
        },
        anyInput: function () {
          if (this.anyButton()) {
            return true;
          }
          for (var a = 0, b = this.axis.length; a < b;) {
            a++;
            if (this.axis[0] != 0) {
              return true;
            }
          }
          return false;
        },
        getAxisValue: function (a) {
          var b = 0;
          if (a == -1) {
            return 0;
          }
          if (this._device != null && this._device.enabled) {
            var c = this._device.get_numControls() - 1;
            c = a >= 0 && (c == null || a <= c);
          } else {
            c = false;
          }
          if (c) {
            b = this._device.getControlAt(a).value;
          }
          if (this.isAxisForAnalogStick(a) && this.mapping.isAxisFlipped(a)) {
            b *= -1;
          }
          return b;
        },
        getAnalogXAxisValue: function (a) {
          if (a == null) {
            return 0;
          } else if (this.deadZoneMode == Qk.CIRCULAR) {
            return this.getAnalogAxisValueCircular(a, a.x);
          } else {
            return this.getAnalogAxisValueIndependent(a.x);
          }
        },
        getAnalogYAxisValue: function (a) {
          if (a == null) {
            return 0;
          } else if (this.deadZoneMode == Qk.CIRCULAR) {
            return this.getAnalogAxisValueCircular(a, a.y);
          } else {
            return this.getAnalogAxisValueIndependent(a.y);
          }
        },
        getAnalogAxisValueCircular: function (a, b) {
          if (a == null) {
            return 0;
          }
          var c = this.getAxisValue(a.x);
          a = this.getAxisValue(a.y);
          if (a == null) {
            a = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (c == null) {
            c = 0;
          }
          c = W.pool.get().set(c, a);
          c._inPool = false;
          a = Math.sqrt(c.x * c.x + c.y * c.y);
          c.put();
          if (a > this.get_deadZone()) {
            return this.getAxisValue(b);
          } else {
            return 0;
          }
        },
        getAnalogAxisValueIndependent: function (a) {
          a = this.getAxisValue(a);
          if (Math.abs(a) > this.get_deadZone()) {
            return a;
          } else {
            return 0;
          }
        },
        handleAxisMove: function (a, b, c) {
          var d = b;
          if (this.mapping.isAxisFlipped(a)) {
            d *= -1;
          }
          b = d;
          d = c;
          if (this.mapping.isAxisFlipped(a)) {
            d *= -1;
          }
          c = d;
          d = this.mapping.leftStick;
          var e = this.mapping.rightStick;
          d = d != null && a == d.x || a == d.y ? d : e != null && a == e.x || a == e.y ? e : null;
          if (d.mode == Ng.ONLY_DIGITAL || d.mode == Ng.BOTH) {
            this.handleAxisMoveSub(d, a, b, c, 1);
            this.handleAxisMoveSub(d, a, b, c, -1);
          }
        },
        handleAxisMoveSub: function (a, b, c, d, e) {
          if (e == null) {
            e = 1;
          }
          var f = -1;
          if (b == a.x) {
            f = e < 0 ? a.rawLeft : a.rawRight;
          } else if (b == a.y) {
            f = e < 0 ? a.rawUp : a.rawDown;
          }
          a = a.digitalThreshold;
          c *= e;
          d *= e;
          if (c > a && d <= a) {
            f = this.getButton(f);
            if (f != null) {
              f.press();
            }
          } else if (c <= a && d > a) {
            f = this.getButton(f);
            if (f != null) {
              f.release();
            }
          }
        },
        createMappingForModel: function (a) {
          switch (a._hx_index) {
            case 0:
              return new Tk(this.attachment);
            case 1:
              return new Uk(this.attachment);
            case 2:
              return new Vk(this.attachment);
            case 3:
              return new Wk(this.attachment);
            case 4:
              return new qj(this.attachment);
            case 5:
              return new Xk(this.attachment);
            case 6:
              return new Yk(this.attachment);
            case 7:
              return new Zk(this.attachment);
            case 8:
              return new $k(this.attachment);
            case 9:
              return new al(this.attachment);
            case 10:
              return new bl(this.attachment);
            default:
              return new qj(this.attachment);
          }
        },
        set_model: function (a) {
          this.model = a;
          this.mapping = this.createMappingForModel(this.model);
          return this.model;
        },
        get_deadZone: function () {
          if (this.manager == null || this.manager.globalDeadZone == null) {
            return this._deadZone;
          } else {
            return this.manager.globalDeadZone;
          }
        },
        __class__: Rk,
        __properties__: {
          get_deadZone: "get_deadZone",
          set_model: "set_model"
        }
      };
      var Qk = z["flixel.input.gamepad.FlxGamepadDeadZoneMode"] = {
        __ename__: "flixel.input.gamepad.FlxGamepadDeadZoneMode",
        __constructs__: null,
        INDEPENDENT_AXES: {
          _hx_name: "INDEPENDENT_AXES",
          _hx_index: 0,
          __enum__: "flixel.input.gamepad.FlxGamepadDeadZoneMode",
          toString: p
        },
        CIRCULAR: {
          _hx_name: "CIRCULAR",
          _hx_index: 1,
          __enum__: "flixel.input.gamepad.FlxGamepadDeadZoneMode",
          toString: p
        }
      };
      Qk.__constructs__ = [Qk.INDEPENDENT_AXES, Qk.CIRCULAR];
      var rc = z["flixel.input.gamepad.FlxGamepadModel"] = {
        __ename__: "flixel.input.gamepad.FlxGamepadModel",
        __constructs__: null,
        LOGITECH: {
          _hx_name: "LOGITECH",
          _hx_index: 0,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        OUYA: {
          _hx_name: "OUYA",
          _hx_index: 1,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        PS4: {
          _hx_name: "PS4",
          _hx_index: 2,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        PSVITA: {
          _hx_name: "PSVITA",
          _hx_index: 3,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        XINPUT: {
          _hx_name: "XINPUT",
          _hx_index: 4,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        MAYFLASH_WII_REMOTE: {
          _hx_name: "MAYFLASH_WII_REMOTE",
          _hx_index: 5,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        WII_REMOTE: {
          _hx_name: "WII_REMOTE",
          _hx_index: 6,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        MFI: {
          _hx_name: "MFI",
          _hx_index: 7,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        SWITCH_PRO: {
          _hx_name: "SWITCH_PRO",
          _hx_index: 8,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        SWITCH_JOYCON_LEFT: {
          _hx_name: "SWITCH_JOYCON_LEFT",
          _hx_index: 9,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        SWITCH_JOYCON_RIGHT: {
          _hx_name: "SWITCH_JOYCON_RIGHT",
          _hx_index: 10,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        UNKNOWN: {
          _hx_name: "UNKNOWN",
          _hx_index: 11,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        }
      };
      rc.__constructs__ = [rc.LOGITECH, rc.OUYA, rc.PS4, rc.PSVITA, rc.XINPUT, rc.MAYFLASH_WII_REMOTE, rc.WII_REMOTE, rc.MFI, rc.SWITCH_PRO, rc.SWITCH_JOYCON_LEFT, rc.SWITCH_JOYCON_RIGHT, rc.UNKNOWN];
      var Jn = z["flixel.input.gamepad.FlxGamepadAttachment"] = {
        __ename__: "flixel.input.gamepad.FlxGamepadAttachment",
        __constructs__: null,
        WII_NUNCHUCK: {
          _hx_name: "WII_NUNCHUCK",
          _hx_index: 0,
          __enum__: "flixel.input.gamepad.FlxGamepadAttachment",
          toString: p
        },
        WII_CLASSIC_CONTROLLER: {
          _hx_name: "WII_CLASSIC_CONTROLLER",
          _hx_index: 1,
          __enum__: "flixel.input.gamepad.FlxGamepadAttachment",
          toString: p
        },
        NONE: {
          _hx_name: "NONE",
          _hx_index: 2,
          __enum__: "flixel.input.gamepad.FlxGamepadAttachment",
          toString: p
        }
      };
      Jn.__constructs__ = [Jn.WII_NUNCHUCK, Jn.WII_CLASSIC_CONTROLLER, Jn.NONE];
      function Oc(a, b, c) {
        this.mode = Ng.BOTH;
        this.digitalThreshold = 0.5;
        this.rawUp = this.rawDown = this.rawLeft = this.rawRight = -1;
        this.x = a;
        this.y = b;
        if (c != null) {
          this.mode = c.mode ?? Ng.BOTH;
          this.rawUp = c.up ?? -1;
          this.rawDown = c.down ?? -1;
          this.rawLeft = c.left ?? -1;
          this.rawRight = c.right ?? -1;
          this.digitalThreshold = c.threshold ?? 0.5;
        }
      }
      g["flixel.input.gamepad.FlxGamepadAnalogStick"] = Oc;
      Oc.__name__ = "flixel.input.gamepad.FlxGamepadAnalogStick";
      Oc.prototype = {
        __class__: Oc
      };
      var Ng = z["flixel.input.gamepad.FlxAnalogToDigitalMode"] = {
        __ename__: "flixel.input.gamepad.FlxAnalogToDigitalMode",
        __constructs__: null,
        BOTH: {
          _hx_name: "BOTH",
          _hx_index: 0,
          __enum__: "flixel.input.gamepad.FlxAnalogToDigitalMode",
          toString: p
        },
        ONLY_DIGITAL: {
          _hx_name: "ONLY_DIGITAL",
          _hx_index: 1,
          __enum__: "flixel.input.gamepad.FlxAnalogToDigitalMode",
          toString: p
        },
        ONLY_ANALOG: {
          _hx_name: "ONLY_ANALOG",
          _hx_index: 2,
          __enum__: "flixel.input.gamepad.FlxAnalogToDigitalMode",
          toString: p
        }
      };
      Ng.__constructs__ = [Ng.BOTH, Ng.ONLY_DIGITAL, Ng.ONLY_ANALOG];
      function Sk(a) {
        this.value = 0;
        ke.call(this, a);
      }
      g["flixel.input.gamepad.FlxGamepadButton"] = Sk;
      Sk.__name__ = "flixel.input.gamepad.FlxGamepadButton";
      Sk.__super__ = ke;
      Sk.prototype = q(ke.prototype, {
        __class__: Sk
      });
      var eg = {};
      function sb() {
        pa.call(this);
        sb.__instances.push(this);
      }
      g["openfl.ui.GameInput"] = sb;
      sb.__name__ = "openfl.ui.GameInput";
      sb.getDeviceAt = function (a) {
        if (a >= 0 && a < sb.__deviceList.length) {
          return sb.__deviceList[a];
        } else {
          return null;
        }
      };
      sb.__getDevice = function (a) {
        if (a == null) {
          return null;
        }
        if (sb.__devices.h.__keys__[a.__id__] == null) {
          var b = Mc.__getDeviceData();
          var c = b[a.id].id;
          b = Mc.__getDeviceData();
          b = new Kn(c, b[a.id].id);
          sb.__deviceList.push(b);
          sb.__devices.set(a, b);
          sb.numDevices = sb.__deviceList.length;
        }
        return sb.__devices.h[a.__id__];
      };
      sb.__onGamepadAxisMove = function (a, b, c) {
        a = sb.__getDevice(a);
        if (a != null && a.enabled) {
          if (!a.__axis.h.hasOwnProperty(b)) {
            if (b == null) {
              var d = "null";
            } else {
              switch (b) {
                case 0:
                  d = "LEFT_X";
                  break;
                case 1:
                  d = "LEFT_Y";
                  break;
                case 2:
                  d = "RIGHT_X";
                  break;
                case 3:
                  d = "RIGHT_Y";
                  break;
                case 4:
                  d = "TRIGGER_LEFT";
                  break;
                case 5:
                  d = "TRIGGER_RIGHT";
                  break;
                default:
                  d = "UNKNOWN (" + b + ")";
              }
            }
            d = new Me(a, "AXIS_" + d, -1, 1);
            a.__axis.h[b] = d;
            a.__controls.push(d);
          }
          d = a.__axis.h[b];
          d.value = c;
          d.dispatchEvent(new Ga("change"));
        }
      };
      sb.__onGamepadButtonDown = function (a, b) {
        a = sb.__getDevice(a);
        if (a != null && a.enabled) {
          if (!a.__button.h.hasOwnProperty(b)) {
            if (b == null) {
              var c = "null";
            } else {
              switch (b) {
                case 0:
                  c = "A";
                  break;
                case 1:
                  c = "B";
                  break;
                case 2:
                  c = "X";
                  break;
                case 3:
                  c = "Y";
                  break;
                case 4:
                  c = "BACK";
                  break;
                case 5:
                  c = "GUIDE";
                  break;
                case 6:
                  c = "START";
                  break;
                case 7:
                  c = "LEFT_STICK";
                  break;
                case 8:
                  c = "RIGHT_STICK";
                  break;
                case 9:
                  c = "LEFT_SHOULDER";
                  break;
                case 10:
                  c = "RIGHT_SHOULDER";
                  break;
                case 11:
                  c = "DPAD_UP";
                  break;
                case 12:
                  c = "DPAD_DOWN";
                  break;
                case 13:
                  c = "DPAD_LEFT";
                  break;
                case 14:
                  c = "DPAD_RIGHT";
                  break;
                default:
                  c = "UNKNOWN (" + b + ")";
              }
            }
            c = new Me(a, "BUTTON_" + c, 0, 1);
            a.__button.h[b] = c;
            a.__controls.push(c);
          }
          c = a.__button.h[b];
          c.value = 1;
          c.dispatchEvent(new Ga("change"));
        }
      };
      sb.__onGamepadButtonUp = function (a, b) {
        a = sb.__getDevice(a);
        if (a != null && a.enabled) {
          if (!a.__button.h.hasOwnProperty(b)) {
            if (b == null) {
              var c = "null";
            } else {
              switch (b) {
                case 0:
                  c = "A";
                  break;
                case 1:
                  c = "B";
                  break;
                case 2:
                  c = "X";
                  break;
                case 3:
                  c = "Y";
                  break;
                case 4:
                  c = "BACK";
                  break;
                case 5:
                  c = "GUIDE";
                  break;
                case 6:
                  c = "START";
                  break;
                case 7:
                  c = "LEFT_STICK";
                  break;
                case 8:
                  c = "RIGHT_STICK";
                  break;
                case 9:
                  c = "LEFT_SHOULDER";
                  break;
                case 10:
                  c = "RIGHT_SHOULDER";
                  break;
                case 11:
                  c = "DPAD_UP";
                  break;
                case 12:
                  c = "DPAD_DOWN";
                  break;
                case 13:
                  c = "DPAD_LEFT";
                  break;
                case 14:
                  c = "DPAD_RIGHT";
                  break;
                default:
                  c = "UNKNOWN (" + b + ")";
              }
            }
            c = new Me(a, "BUTTON_" + c, 0, 1);
            a.__button.h[b] = c;
            a.__controls.push(c);
          }
          c = a.__button.h[b];
          c.value = 0;
          c.dispatchEvent(new Ga("change"));
        }
      };
      sb.__onGamepadConnect = function (a) {
        a = sb.__getDevice(a);
        if (a != null) {
          for (var b = 0, c = sb.__instances; b < c.length;) {
            var d = c[b];
            ++b;
            d.dispatchEvent(new ai("deviceAdded", true, false, a));
          }
        }
      };
      sb.__onGamepadDisconnect = function (a) {
        var b = sb.__devices.h[a.__id__];
        if (b != null) {
          if (sb.__devices.h.__keys__[a.__id__] != null) {
            r.remove(sb.__deviceList, sb.__devices.h[a.__id__]);
            sb.__devices.remove(a);
          }
          sb.numDevices = sb.__deviceList.length;
          a = 0;
          for (var c = sb.__instances; a < c.length;) {
            var d = c[a];
            ++a;
            d.dispatchEvent(new ai("deviceRemoved", true, false, b));
          }
        }
      };
      sb.__super__ = pa;
      sb.prototype = q(pa.prototype, {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          pa.prototype.addEventListener.call(this, a, b, c, d, e);
          if (a == "deviceAdded") {
            a = 0;
            b = sb.__deviceList;
            while (a < b.length) {
              c = b[a];
              ++a;
              this.dispatchEvent(new ai("deviceAdded", true, false, c));
            }
          }
        },
        __class__: sb
      });
      function ig() {
        this._activeGamepads = [];
        this._gamepads = [];
        this.deviceConnected = new sf();
        this.deviceDisconnected = new sf();
        ig._gameInput.addEventListener("deviceAdded", m(this, this.onDeviceAdded));
        ig._gameInput.addEventListener("deviceRemoved", m(this, this.onDeviceRemoved));
        for (var a = 0, b = sb.numDevices; a < b;) {
          var c = a++;
          this.addGamepad(sb.getDeviceAt(c));
        }
      }
      g["flixel.input.gamepad.FlxGamepadManager"] = ig;
      ig.__name__ = "flixel.input.gamepad.FlxGamepadManager";
      ig.__interfaces__ = [Lg];
      ig.prototype = {
        removeByID: function (a) {
          var b = this._gamepads[a];
          if (b != null) {
            this._gamepads[a] = null;
            a = this._activeGamepads.indexOf(b);
            if (a != -1) {
              this._activeGamepads[a] = null;
              this.deviceDisconnected.dispatch(b);
            }
            ca.destroy(b);
          }
          if (this.lastActive == b) {
            this.lastActive = null;
          }
          if (this.firstActive == b) {
            this.firstActive = null;
          }
        },
        createByID: function (a, b) {
          var c = this._gamepads[a];
          if (c == null) {
            c = new Rk(a, this, b);
            this._gamepads[a] = c;
            a = false;
            b = 0;
            for (var d = this._activeGamepads.length; b < d;) {
              var e = b++;
              if (this._activeGamepads[e] == null) {
                this._activeGamepads[e] = c;
                a = true;
                break;
              }
            }
            if (!a) {
              this._activeGamepads.push(c);
            }
          }
          this.lastActive = c;
          if (this.firstActive == null) {
            this.firstActive = c;
          }
          return c;
        },
        getActiveGamepads: function (a) {
          if (a == null) {
            a = [];
          }
          for (var b = 0, c = this._gamepads; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.anyInput()) {
              a.push(d);
            }
          }
          return a;
        },
        getFirstActiveGamepad: function () {
          for (var a = 0, b = this._gamepads; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.anyInput()) {
              return c;
            }
          }
          return null;
        },
        anyInput: function () {
          for (var a = 0, b = this._gamepads; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.anyInput()) {
              return true;
            }
          }
          return false;
        },
        anyHasState: function (a, b) {
          for (var c = 0, d = this._gamepads; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              switch (a) {
                case -2:
                  e = e.anyButton(b);
                  break;
                case -1:
                  e = !e.anyButton(b);
                  break;
                default:
                  var f = e.mapping.getRawID(a);
                  e = e.buttons[f];
                  e = e != null && e.hasState(b);
              }
            } else {
              e = false;
            }
            if (e) {
              return true;
            }
          }
          return false;
        },
        destroy: function () {
          ca.destroyArray(this._gamepads);
          this._gamepads = this.lastActive = this.firstActive = null;
          ig._gameInput.removeEventListener("deviceAdded", m(this, this.onDeviceAdded));
          ig._gameInput.removeEventListener("deviceRemoved", m(this, this.onDeviceRemoved));
        },
        reset: function () {
          for (var a = 0, b = this._gamepads; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.reset();
            }
          }
        },
        onDeviceAdded: function (a) {
          this.addGamepad(a.device);
        },
        onDeviceRemoved: function (a) {
          this.removeGamepad(a.device);
        },
        findGamepadIndex: function (a) {
          if (a == null) {
            return -1;
          }
          for (var b = 0, c = sb.numDevices; b < c;) {
            var d = b++;
            if (sb.getDeviceAt(d) == a) {
              return d;
            }
          }
          return -1;
        },
        addGamepad: function (a) {
          if (a != null) {
            a.enabled = true;
            var b = this.findGamepadIndex(a);
            if (!(b < 0)) {
              b = this.createByID(b, this.getModelFromDeviceName(a.name));
              b._device = a;
              this.deviceConnected.dispatch(b);
            }
          }
        },
        getModelFromDeviceName: function (a) {
          if (a == null) {
            return rc.UNKNOWN;
          }
          a = w.replace(w.replace(a.toLowerCase(), "-", ""), "_", "");
          if (a.indexOf("ouya") != -1) {
            return rc.OUYA;
          } else if (a.indexOf("wireless controller") != -1 || a.indexOf("ps4") != -1) {
            return rc.PS4;
          } else if (a.indexOf("logitech") != -1) {
            return rc.LOGITECH;
          } else if (a.indexOf("xbox") != -1 && a.indexOf("360") != -1 || a.indexOf("xinput") != -1) {
            return rc.XINPUT;
          } else if (a.indexOf("nintendo rvlcnt01tr") != -1) {
            return rc.WII_REMOTE;
          } else if (a.indexOf("nintendo rvlcnt01") != -1) {
            return rc.WII_REMOTE;
          } else if (a.indexOf("mayflash wiimote pc adapter") != -1) {
            return rc.MAYFLASH_WII_REMOTE;
          } else if (a.indexOf("pro controller") != -1 || a.indexOf("joycon l+r") != -1) {
            return rc.SWITCH_PRO;
          } else if (a.indexOf("joycon (l)") != -1) {
            return rc.SWITCH_JOYCON_LEFT;
          } else if (a.indexOf("joycon (r)") != -1) {
            return rc.SWITCH_JOYCON_RIGHT;
          } else if (a.indexOf("mfi") != -1) {
            return rc.MFI;
          } else {
            return rc.UNKNOWN;
          }
        },
        removeGamepad: function (a) {
          if (a != null) {
            for (var b = 0, c = this._gamepads.length; b < c;) {
              var d = b++;
              var e = this._gamepads[d];
              if (e != null && e._device == a) {
                this.removeByID(d);
              }
            }
          }
        },
        update: function () {
          for (var a = 0, b = this._gamepads; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.update();
            }
          }
        },
        onFocus: function () {},
        onFocusLost: function () {
          this.reset();
        },
        get_numActiveGamepads: function () {
          var a = 0;
          for (var b = 0, c = this._gamepads; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              ++a;
            }
          }
          return a;
        },
        __class__: ig,
        __properties__: {
          get_numActiveGamepads: "get_numActiveGamepads"
        }
      };
      function ef() {}
      g["flixel.input.gamepad.id.LogitechID"] = ef;
      ef.__name__ = "flixel.input.gamepad.id.LogitechID";
      function ff() {}
      g["flixel.input.gamepad.id.MFiID"] = ff;
      ff.__name__ = "flixel.input.gamepad.id.MFiID";
      function Cd() {}
      g["flixel.input.gamepad.id.MayflashWiiRemoteID"] = Cd;
      Cd.__name__ = "flixel.input.gamepad.id.MayflashWiiRemoteID";
      function gf() {}
      g["flixel.input.gamepad.id.OUYAID"] = gf;
      gf.__name__ = "flixel.input.gamepad.id.OUYAID";
      function hf() {}
      g["flixel.input.gamepad.id.PS4ID"] = hf;
      hf.__name__ = "flixel.input.gamepad.id.PS4ID";
      function Ce() {}
      g["flixel.input.gamepad.id.PSVitaID"] = Ce;
      Ce.__name__ = "flixel.input.gamepad.id.PSVitaID";
      function bi() {}
      g["flixel.input.gamepad.id.SwitchJoyconLeftID"] = bi;
      bi.__name__ = "flixel.input.gamepad.id.SwitchJoyconLeftID";
      function ci() {}
      g["flixel.input.gamepad.id.SwitchJoyconRightID"] = ci;
      ci.__name__ = "flixel.input.gamepad.id.SwitchJoyconRightID";
      function jf() {}
      g["flixel.input.gamepad.id.SwitchProID"] = jf;
      jf.__name__ = "flixel.input.gamepad.id.SwitchProID";
      function Dd() {}
      g["flixel.input.gamepad.id.WiiRemoteID"] = Dd;
      Dd.__name__ = "flixel.input.gamepad.id.WiiRemoteID";
      function kf() {}
      g["flixel.input.gamepad.id.XInputID"] = kf;
      kf.__name__ = "flixel.input.gamepad.id.XInputID";
      function rj(a, b) {
        this.status = a;
        this.gamepad = b;
      }
      g["flixel.input.gamepad.lists.FlxBaseGamepadList"] = rj;
      rj.__name__ = "flixel.input.gamepad.lists.FlxBaseGamepadList";
      rj.prototype = {
        __class__: rj
      };
      function Gn(a) {
        this.value = new Ln(a);
        this.justMoved = new cl(2, a);
        this.justReleased = new cl(-1, a);
      }
      g["flixel.input.gamepad.lists.FlxGamepadAnalogList"] = Gn;
      Gn.__name__ = "flixel.input.gamepad.lists.FlxGamepadAnalogList";
      Gn.prototype = {
        __class__: Gn
      };
      function cl(a, b) {
        this.status = a;
        this.gamepad = b;
      }
      g["flixel.input.gamepad.lists.FlxGamepadAnalogStateList"] = cl;
      cl.__name__ = "flixel.input.gamepad.lists.FlxGamepadAnalogStateList";
      cl.prototype = {
        get_LEFT_STICK: function () {
          return this.checkXY(19);
        },
        get_LEFT_STICK_X: function () {
          var a = this.gamepad.mapping.getAnalogStick(19);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.x];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        get_LEFT_STICK_Y: function () {
          var a = this.gamepad.mapping.getAnalogStick(19);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.y];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        get_RIGHT_STICK: function () {
          return this.checkXY(20);
        },
        get_RIGHT_STICK_X: function () {
          var a = this.gamepad.mapping.getAnalogStick(20);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.x];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        get_RIGHT_STICK_Y: function () {
          var a = this.gamepad.mapping.getAnalogStick(20);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.y];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        checkXY: function (a) {
          a = this.gamepad.mapping.getAnalogStick(a);
          if (a == null) {
            return false;
          }
          var b = this.gamepad.buttons[a.x];
          var c = b != null && b.hasState(this.status);
          b = this.gamepad.buttons[a.y];
          var d = b != null && b.hasState(this.status);
          if (c && d || c && (b = this.gamepad.buttons[a.y], c = b != null && b.hasState(0), b = this.gamepad.buttons[a.y], b = b != null && b.hasState(-1), c || b) || d && (b = this.gamepad.buttons[a.x], d = b != null && b.hasState(0), b = this.gamepad.buttons[a.x], a = b != null && b.hasState(-1), d || a)) {
            return true;
          } else {
            return false;
          }
        },
        checkX: function (a) {
          a = this.gamepad.mapping.getAnalogStick(a);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.x];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        checkY: function (a) {
          a = this.gamepad.mapping.getAnalogStick(a);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.y];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        checkRaw: function (a, b) {
          a = this.gamepad.buttons[a];
          if (a != null) {
            return a.hasState(b);
          } else {
            return false;
          }
        },
        __class__: cl,
        __properties__: {
          get_RIGHT_STICK_Y: "get_RIGHT_STICK_Y",
          get_RIGHT_STICK_X: "get_RIGHT_STICK_X",
          get_RIGHT_STICK: "get_RIGHT_STICK",
          get_LEFT_STICK_Y: "get_LEFT_STICK_Y",
          get_LEFT_STICK_X: "get_LEFT_STICK_X",
          get_LEFT_STICK: "get_LEFT_STICK"
        }
      };
      function Ln(a) {
        this.gamepad = a;
      }
      g["flixel.input.gamepad.lists.FlxGamepadAnalogValueList"] = Ln;
      Ln.__name__ = "flixel.input.gamepad.lists.FlxGamepadAnalogValueList";
      Ln.prototype = {
        get_LEFT_STICK_X: function () {
          var a = this.gamepad;
          return a.getAnalogXAxisValue(a.mapping.getAnalogStick(19));
        },
        get_LEFT_STICK_Y: function () {
          var a = this.gamepad;
          return a.getYAxisRaw(a.mapping.getAnalogStick(19));
        },
        get_RIGHT_STICK_X: function () {
          var a = this.gamepad;
          return a.getAnalogXAxisValue(a.mapping.getAnalogStick(20));
        },
        get_RIGHT_STICK_Y: function () {
          var a = this.gamepad;
          return a.getYAxisRaw(a.mapping.getAnalogStick(20));
        },
        get_LEFT_TRIGGER: function () {
          return this.gamepad.getAxis(17);
        },
        get_RIGHT_TRIGGER: function () {
          return this.gamepad.getAxis(18);
        },
        get_POINTER_X: function () {
          return this.gamepad.getAxis(28);
        },
        get_POINTER_Y: function () {
          return this.gamepad.getAxis(29);
        },
        getAxis: function (a) {
          return this.gamepad.getAxis(a);
        },
        getXAxis: function (a) {
          var b = this.gamepad;
          return b.getAnalogXAxisValue(b.mapping.getAnalogStick(a));
        },
        getYAxis: function (a) {
          var b = this.gamepad;
          return b.getYAxisRaw(b.mapping.getAnalogStick(a));
        },
        __class__: Ln,
        __properties__: {
          get_POINTER_Y: "get_POINTER_Y",
          get_POINTER_X: "get_POINTER_X",
          get_RIGHT_TRIGGER: "get_RIGHT_TRIGGER",
          get_LEFT_TRIGGER: "get_LEFT_TRIGGER",
          get_RIGHT_STICK_Y: "get_RIGHT_STICK_Y",
          get_RIGHT_STICK_X: "get_RIGHT_STICK_X",
          get_LEFT_STICK_Y: "get_LEFT_STICK_Y",
          get_LEFT_STICK_X: "get_LEFT_STICK_X"
        }
      };
      function uh(a, b) {
        rj.call(this, a, b);
      }
      g["flixel.input.gamepad.lists.FlxGamepadButtonList"] = uh;
      uh.__name__ = "flixel.input.gamepad.lists.FlxGamepadButtonList";
      uh.__super__ = rj;
      uh.prototype = q(rj.prototype, {
        __class__: uh
      });
      function Hn(a) {
        this.gamepad = a;
      }
      g["flixel.input.gamepad.lists.FlxGamepadMotionValueList"] = Hn;
      Hn.__name__ = "flixel.input.gamepad.lists.FlxGamepadMotionValueList";
      Hn.prototype = {
        get_TILT_PITCH: function () {
          if (this.gamepad.mapping.supportsMotion) {
            return this.gamepad.getAxis(26);
          } else {
            return 0;
          }
        },
        get_TILT_ROLL: function () {
          if (this.gamepad.mapping.supportsMotion) {
            return this.gamepad.getAxis(27);
          } else {
            return 0;
          }
        },
        getAxis: function (a) {
          if (this.gamepad.mapping.supportsMotion) {
            return this.gamepad.getAxis(a);
          } else {
            return 0;
          }
        },
        get_isSupported: function () {
          return this.gamepad.mapping.supportsMotion;
        },
        __class__: Hn,
        __properties__: {
          get_TILT_ROLL: "get_TILT_ROLL",
          get_TILT_PITCH: "get_TILT_PITCH",
          get_isSupported: "get_isSupported"
        }
      };
      function In(a) {
        this.gamepad = a;
      }
      g["flixel.input.gamepad.lists.FlxGamepadPointerValueList"] = In;
      In.__name__ = "flixel.input.gamepad.lists.FlxGamepadPointerValueList";
      In.prototype = {
        get_X: function () {
          if (this.gamepad.mapping.supportsPointer) {
            return this.gamepad.getAxis(28);
          } else {
            return 0;
          }
        },
        get_Y: function () {
          if (this.gamepad.mapping.supportsPointer) {
            return this.gamepad.getAxis(29);
          } else {
            return 0;
          }
        },
        getAxis: function (a) {
          if (this.gamepad.mapping.supportsPointer) {
            return this.gamepad.getAxis(a);
          } else {
            return 0;
          }
        },
        get_isSupported: function () {
          return this.gamepad.mapping.supportsPointer;
        },
        __class__: In,
        __properties__: {
          get_Y: "get_Y",
          get_X: "get_X",
          get_isSupported: "get_isSupported"
        }
      };
      function Xb(a) {
        this.attachment = Jn.NONE;
        this.supportsMotion = this.supportsPointer = false;
        if (a != null) {
          this.set_attachment(a);
        }
        this.initValues();
      }
      g["flixel.input.gamepad.mappings.FlxGamepadMapping"] = Xb;
      Xb.__name__ = "flixel.input.gamepad.mappings.FlxGamepadMapping";
      Xb.prototype = {
        initValues: function () {},
        getAnalogStick: function (a) {
          switch (a) {
            case 19:
              return this.leftStick;
            case 20:
              return this.rightStick;
            default:
              return null;
          }
        },
        getID: function (a) {
          return -1;
        },
        getRawID: function (a) {
          return -1;
        },
        isAxisFlipped: function (a) {
          return false;
        },
        set_attachment: function (a) {
          return this.attachment = a;
        },
        __class__: Xb,
        __properties__: {
          set_attachment: "set_attachment"
        }
      };
      function Tk(a) {
        Xb.call(this, a);
      }
      g["flixel.input.gamepad.mappings.LogitechMapping"] = Tk;
      Tk.__name__ = "flixel.input.gamepad.mappings.LogitechMapping";
      Tk.__super__ = Xb;
      Tk.prototype = q(Xb.prototype, {
        initValues: function () {
          this.leftStick = ef.LEFT_ANALOG_STICK;
          this.rightStick = ef.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case -5:
              return 10;
            case 0:
              return 2;
            case 1:
              return 0;
            case 2:
              return 1;
            case 3:
              return 3;
            case 4:
              return 4;
            case 5:
              return 5;
            case 6:
              return 17;
            case 7:
              return 18;
            case 8:
              return 6;
            case 9:
              return 7;
            case 10:
              return 8;
            case 11:
              return 9;
            case 16:
              return 11;
            case 17:
              return 12;
            case 18:
              return 13;
            case 19:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 1;
            case 1:
              return 2;
            case 2:
              return 0;
            case 3:
              return 3;
            case 4:
              return 4;
            case 5:
              return 5;
            case 6:
              return 8;
            case 7:
              return 9;
            case 8:
              return 10;
            case 9:
              return 11;
            case 10:
              return -5;
            case 11:
              return 16;
            case 12:
              return 17;
            case 13:
              return 18;
            case 14:
              return 19;
            case 17:
              return 6;
            case 18:
              return 7;
            case 34:
              return ef.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return ef.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return ef.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return ef.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return ef.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return ef.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return ef.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return ef.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: Tk
      });
      function Zk(a) {
        Xb.call(this, a);
      }
      g["flixel.input.gamepad.mappings.MFiMapping"] = Zk;
      Zk.__name__ = "flixel.input.gamepad.mappings.MFiMapping";
      Zk.__super__ = Xb;
      Zk.prototype = q(Xb.prototype, {
        initValues: function () {
          this.leftStick = ff.LEFT_ANALOG_STICK;
          this.rightStick = ff.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 11:
              return 10;
            case 12:
              return 7;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return 11;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 34:
              return ff.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return ff.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return ff.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return ff.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return ff.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return ff.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return ff.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return ff.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: Zk
      });
      function Xk(a) {
        Xb.call(this, a);
      }
      g["flixel.input.gamepad.mappings.MayflashWiiRemoteMapping"] = Xk;
      Xk.__name__ = "flixel.input.gamepad.mappings.MayflashWiiRemoteMapping";
      Xk.__super__ = Xb;
      Xk.prototype = q(Xb.prototype, {
        initValues: function () {
          this.supportsPointer = true;
        },
        getID: function (a) {
          switch (this.attachment._hx_index) {
            case 0:
              return this.getIDNunchuk(a);
            case 1:
              return this.getIDClassicController(a);
            case 2:
              return this.getIDDefault(a);
          }
        },
        getIDClassicController: function (a) {
          switch (a) {
            case 4:
              return 11;
            case 5:
              return 12;
            case 6:
              return 13;
            case 7:
              return 14;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 0;
            case 11:
              return 1;
            case 12:
              return 17;
            case 13:
              return 18;
            case 14:
              return 4;
            case 15:
              return 5;
            case 16:
              return 6;
            case 17:
              return 7;
            case 19:
              return 10;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getIDNunchuk: function (a) {
          switch (a) {
            case 4:
              return 11;
            case 5:
              return 12;
            case 6:
              return 13;
            case 7:
              return 14;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 0;
            case 11:
              return 1;
            case 12:
              return 6;
            case 13:
              return 7;
            case 14:
              return 17;
            case 15:
              return 4;
            case 19:
              return 10;
            default:
              return -1;
          }
        },
        getIDDefault: function (a) {
          switch (a) {
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 0;
            case 11:
              return 1;
            case 12:
              return 6;
            case 13:
              return 7;
            case 19:
              return 10;
            case 22:
              return 11;
            case 23:
              return 12;
            case 24:
              return 13;
            case 25:
              return 14;
            default:
              return -1;
          }
        },
        getRawID: function (a) {
          switch (this.attachment._hx_index) {
            case 0:
              return this.getRawNunchuk(a);
            case 1:
              return this.getRawClassicController(a);
            case 2:
              return this.getRawDefault(a);
          }
        },
        getRawClassicController: function (a) {
          switch (a) {
            case 0:
              return 10;
            case 1:
              return 11;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 14;
            case 5:
              return 15;
            case 6:
              return 16;
            case 7:
              return 17;
            case 10:
              return 19;
            case 11:
              return 4;
            case 12:
              return 5;
            case 13:
              return 6;
            case 14:
              return 7;
            case 17:
              return 12;
            case 18:
              return 13;
            case 30:
              return -1;
            case 31:
              return -1;
            case 34:
              return Cd.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Cd.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Cd.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Cd.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return Cd.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return Cd.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return Cd.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return Cd.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return this.getRawDefault(a);
          }
        },
        getRawNunchuk: function (a) {
          switch (a) {
            case 0:
              return 10;
            case 1:
              return 11;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 6:
              return 12;
            case 7:
              return 13;
            case 10:
              return 19;
            case 11:
              return 4;
            case 12:
              return 5;
            case 13:
              return 6;
            case 14:
              return 7;
            case 17:
              return 14;
            case 28:
              return 2;
            case 29:
              return 3;
            case 34:
              return Cd.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Cd.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Cd.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Cd.LEFT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        getRawDefault: function (a) {
          switch (a) {
            case 0:
              return 10;
            case 1:
              return 11;
            case 2:
              return 8;
            case 3:
              return 9;
            case 6:
              return 12;
            case 7:
              return 13;
            case 10:
              return 19;
            case 11:
              return 22;
            case 12:
              return 23;
            case 13:
              return 24;
            case 14:
              return 25;
            default:
              return -1;
          }
        },
        set_attachment: function (a) {
          switch (a._hx_index) {
            case 0:
            case 1:
              var b = Cd.LEFT_ANALOG_STICK;
              break;
            case 2:
              b = Cd.REMOTE_DPAD;
          }
          this.leftStick = b;
          this.rightStick = a._hx_index == 1 ? Cd.RIGHT_ANALOG_STICK : null;
          return Xb.prototype.set_attachment.call(this, a);
        },
        __class__: Xk
      });
      function Uk(a) {
        Xb.call(this, a);
      }
      g["flixel.input.gamepad.mappings.OUYAMapping"] = Uk;
      Uk.__name__ = "flixel.input.gamepad.mappings.OUYAMapping";
      Uk.__super__ = Xb;
      Uk.prototype = q(Xb.prototype, {
        initValues: function () {
          this.leftStick = gf.LEFT_ANALOG_STICK;
          this.rightStick = gf.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case 4:
              return 17;
            case 5:
              return 18;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            case 16777234:
              return 10;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return 16777234;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 34:
              return gf.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return gf.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return gf.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return gf.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return gf.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return gf.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return gf.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return gf.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: Uk
      });
      function Vk(a) {
        Xb.call(this, a);
      }
      g["flixel.input.gamepad.mappings.PS4Mapping"] = Vk;
      Vk.__name__ = "flixel.input.gamepad.mappings.PS4Mapping";
      Vk.__super__ = Xb;
      Vk.prototype = q(Xb.prototype, {
        initValues: function () {
          this.leftStick = hf.LEFT_ANALOG_STICK;
          this.rightStick = hf.RIGHT_ANALOG_STICK;
          this.supportsPointer = this.supportsMotion = true;
        },
        getID: function (a) {
          switch (a) {
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 11:
              return 10;
            case 12:
              return 7;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return 11;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 34:
              return hf.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return hf.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return hf.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return hf.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return hf.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return hf.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return hf.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return hf.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: Vk
      });
      function Wk(a) {
        Xb.call(this, a);
      }
      g["flixel.input.gamepad.mappings.PSVitaMapping"] = Wk;
      Wk.__name__ = "flixel.input.gamepad.mappings.PSVitaMapping";
      Wk.__super__ = Xb;
      Wk.prototype = q(Xb.prototype, {
        initValues: function () {
          this.leftStick = Ce.LEFT_ANALOG_STICK;
          this.rightStick = Ce.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 12:
              return 7;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 34;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 34:
              return Ce.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Ce.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Ce.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Ce.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return Ce.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return Ce.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return Ce.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return Ce.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        isAxisFlipped: function (a) {
          if (a != Ce.LEFT_ANALOG_STICK.y) {
            return a == Ce.RIGHT_ANALOG_STICK.y;
          } else {
            return true;
          }
        },
        __class__: Wk
      });
      function al(a) {
        Xb.call(this, a);
      }
      g["flixel.input.gamepad.mappings.SwitchJoyconLeftMapping"] = al;
      al.__name__ = "flixel.input.gamepad.mappings.SwitchJoyconLeftMapping";
      al.__super__ = Xb;
      al.prototype = q(Xb.prototype, {
        initValues: function () {
          this.leftStick = bi.LEFT_ANALOG_STICK;
          this.supportsMotion = true;
          this.supportsPointer = false;
        },
        getID: function (a) {
          switch (a) {
            case 4:
              return 17;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 30;
            case 12:
              return 7;
            case 13:
              return 8;
            case 15:
              return 4;
            case 16:
              return 5;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 7:
              return 12;
            case 8:
              return 13;
            case 17:
              return 4;
            case 30:
              return 10;
            case 34:
              return bi.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return bi.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return bi.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return bi.LEFT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: al
      });
      function bl(a) {
        Xb.call(this, a);
      }
      g["flixel.input.gamepad.mappings.SwitchJoyconRightMapping"] = bl;
      bl.__name__ = "flixel.input.gamepad.mappings.SwitchJoyconRightMapping";
      bl.__super__ = Xb;
      bl.prototype = q(Xb.prototype, {
        initValues: function () {
          this.leftStick = ci.LEFT_ANALOG_STICK;
          this.supportsMotion = true;
          this.supportsPointer = false;
        },
        getID: function (a) {
          switch (a) {
            case 5:
              return 18;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 30;
            case 11:
              return 10;
            case 12:
              return 7;
            case 13:
              return 8;
            case 15:
              return 4;
            case 16:
              return 5;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 7:
              return 12;
            case 8:
              return 13;
            case 10:
              return 11;
            case 18:
              return 5;
            case 30:
              return 10;
            case 34:
              return ci.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return ci.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return ci.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return ci.LEFT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: bl
      });
      function $k(a) {
        Xb.call(this, a);
      }
      g["flixel.input.gamepad.mappings.SwitchProMapping"] = $k;
      $k.__name__ = "flixel.input.gamepad.mappings.SwitchProMapping";
      $k.__super__ = Xb;
      $k.prototype = q(Xb.prototype, {
        initValues: function () {
          this.leftStick = jf.LEFT_ANALOG_STICK;
          this.rightStick = jf.RIGHT_ANALOG_STICK;
          this.supportsMotion = true;
          this.supportsPointer = false;
        },
        getID: function (a) {
          switch (a) {
            case 4:
              return 17;
            case 5:
              return 18;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 11:
              return 10;
            case 12:
              return 7;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            case 21:
              return 30;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return 11;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 30:
              return 21;
            case 34:
              return jf.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return jf.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return jf.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return jf.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return jf.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return jf.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return jf.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return jf.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: $k
      });
      function Yk(a) {
        Xb.call(this, a);
      }
      g["flixel.input.gamepad.mappings.WiiRemoteMapping"] = Yk;
      Yk.__name__ = "flixel.input.gamepad.mappings.WiiRemoteMapping";
      Yk.__super__ = Xb;
      Yk.prototype = q(Xb.prototype, {
        initValues: function () {
          this.supportsMotion = true;
          this.supportsPointer = false;
        },
        getID: function (a) {
          switch (this.attachment._hx_index) {
            case 0:
              return this.getIDNunchuk(a);
            case 1:
              return this.getIDClassicController(a);
            case 2:
              return this.getIDDefault(a);
          }
        },
        getIDClassicController: function (a) {
          switch (a) {
            case 5:
              return 11;
            case 6:
              return 12;
            case 7:
              return 13;
            case 8:
              return 14;
            case 9:
              return 1;
            case 10:
              return 0;
            case 11:
              return 2;
            case 12:
              return 3;
            case 13:
              return 17;
            case 14:
              return 18;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 7;
            case 18:
              return 6;
            case 19:
              return 10;
            case 20:
              return 30;
            case 21:
              return 31;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getIDNunchuk: function (a) {
          switch (a) {
            case 5:
              return 11;
            case 6:
              return 12;
            case 7:
              return 13;
            case 8:
              return 14;
            case 9:
              return 0;
            case 10:
              return 1;
            case 11:
              return 4;
            case 12:
              return 17;
            case 13:
              return 2;
            case 14:
              return 3;
            case 15:
              return 7;
            case 16:
              return 6;
            case 17:
              return 10;
            default:
              return -1;
          }
        },
        getIDDefault: function (a) {
          switch (a) {
            case 9:
              return 2;
            case 10:
              return 3;
            case 11:
              return 0;
            case 12:
              return 1;
            case 13:
              return 7;
            case 14:
              return 6;
            case 15:
              return 10;
            case 22:
              return 11;
            case 23:
              return 12;
            case 24:
              return 13;
            case 25:
              return 14;
            default:
              return -1;
          }
        },
        getRawID: function (a) {
          switch (this.attachment._hx_index) {
            case 0:
              return this.getRawNunchuk(a);
            case 1:
              return this.getRawClassicController(a);
            case 2:
              return this.getRawDefault(a);
          }
        },
        getRawClassicController: function (a) {
          switch (a) {
            case 0:
              return 10;
            case 1:
              return 9;
            case 2:
              return 11;
            case 3:
              return 12;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 18;
            case 7:
              return 17;
            case 10:
              return 19;
            case 11:
              return 5;
            case 12:
              return 6;
            case 13:
              return 7;
            case 14:
              return 8;
            case 17:
              return 13;
            case 18:
              return 14;
            case 30:
              return 20;
            case 31:
              return 21;
            case 34:
              return Dd.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Dd.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Dd.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Dd.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return Dd.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return Dd.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return Dd.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return Dd.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        getRawNunchuk: function (a) {
          switch (a) {
            case 0:
              return 9;
            case 1:
              return 10;
            case 2:
              return 13;
            case 3:
              return 14;
            case 4:
              return 11;
            case 6:
              return 16;
            case 7:
              return 15;
            case 10:
              return 17;
            case 11:
              return 5;
            case 12:
              return 6;
            case 13:
              return 7;
            case 14:
              return 8;
            case 17:
              return 12;
            case 26:
              return 3;
            case 27:
              return 2;
            case 34:
              return Dd.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Dd.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Dd.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Dd.LEFT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        getRawDefault: function (a) {
          switch (a) {
            case 0:
              return 11;
            case 1:
              return 12;
            case 2:
              return 9;
            case 3:
              return 10;
            case 6:
              return 14;
            case 7:
              return 13;
            case 10:
              return 15;
            case 11:
              return 22;
            case 12:
              return 23;
            case 13:
              return 24;
            case 14:
              return 25;
            case 26:
              return 2;
            case 27:
              return 3;
            default:
              return -1;
          }
        },
        isAxisFlipped: function (a) {
          return a == 4;
        },
        set_attachment: function (a) {
          switch (a._hx_index) {
            case 0:
            case 1:
              var b = Dd.LEFT_ANALOG_STICK;
              break;
            case 2:
              b = Dd.REMOTE_DPAD;
          }
          this.leftStick = b;
          this.rightStick = a._hx_index == 1 ? Dd.RIGHT_ANALOG_STICK : null;
          return Xb.prototype.set_attachment.call(this, a);
        },
        __class__: Yk
      });
      function qj(a) {
        Xb.call(this, a);
      }
      g["flixel.input.gamepad.mappings.XInputMapping"] = qj;
      qj.__name__ = "flixel.input.gamepad.mappings.XInputMapping";
      qj.__super__ = Xb;
      qj.prototype = q(Xb.prototype, {
        initValues: function () {
          this.leftStick = kf.LEFT_ANALOG_STICK;
          this.rightStick = kf.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case -1:
              return 10;
            case 4:
              return 17;
            case 5:
              return 18;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 12:
              return 7;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return -1;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 34:
              return kf.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return kf.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return kf.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return kf.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return kf.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return kf.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return kf.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return kf.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: qj
      });
      var Dg = {};
      function dl(a, b) {
        oj.call(this, a, b);
      }
      g["flixel.input.keyboard.FlxKeyList"] = dl;
      dl.__name__ = "flixel.input.keyboard.FlxKeyList";
      dl.__super__ = oj;
      dl.prototype = q(oj.prototype, {
        __class__: dl
      });
      function Dk() {
        Mg.call(this, function (a, b) {
          return new dl(a, b);
        });
        this.preventDefaultKeys = [38, 40, 37, 39, 32, 9];
        var a = Dg.fromStringMap.h;
        var b = Object.keys(a);
        for (var c = b.length, d = 0; d < c;) {
          var e = a[b[d++]];
          if (e != -2 && e != -1) {
            var f = new ke(e);
            this._keyListArray.push(f);
            this._keyListMap.h[e] = f;
          }
        }
      }
      g["flixel.input.keyboard.FlxKeyboard"] = Dk;
      Dk.__name__ = "flixel.input.keyboard.FlxKeyboard";
      Dk.__super__ = Mg;
      Dk.prototype = q(Mg.prototype, {
        onKeyUp: function (a) {
          Mg.prototype.onKeyUp.call(this, a);
        },
        onKeyDown: function (a) {
          Mg.prototype.onKeyDown.call(this, a);
        },
        resolveKeyCode: function (a) {
          return a.keyCode;
        },
        __class__: Dk
      });
      function Le(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (Le.preload != null) {
          this.__fromImage(Le.preload);
        } else {
          var f = this;
          Cb.loadFromBase64(Ze.getString(Le.resourceName), Le.resourceType).then(function (a) {
            f.__fromImage(a);
            return Bb.withValue(f);
          }).onComplete(function (a) {
            if (Le.preload == null) {
              Le.preload = a.image;
            }
            if (e != null && ja.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      g["flixel.input.mouse._FlxMouse.GraphicCursor"] = Le;
      Le.__name__ = "flixel.input.mouse._FlxMouse.GraphicCursor";
      Le.__super__ = T;
      Le.prototype = q(T.prototype, {
        __class__: Le
      });
      function cf(a) {
        this.justPressedTimeInTicks = -1;
        var b = 0;
        var c = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        b = W.pool.get().set(b, c);
        b._inPool = false;
        this.justPressedPosition = b;
        ke.call(this, a);
      }
      g["flixel.input.mouse.FlxMouseButton"] = cf;
      cf.__name__ = "flixel.input.mouse.FlxMouseButton";
      cf.__interfaces__ = [rb];
      cf.getByID = function (a) {
        switch (a) {
          case -3:
            return h.mouse._rightButton;
          case -2:
            return h.mouse._middleButton;
          case -1:
            return h.mouse._leftButton;
        }
      };
      cf.__super__ = ke;
      cf.prototype = q(ke.prototype, {
        update: function () {
          ke.prototype.update.call(this);
          if (this.current == 2) {
            var a = this.justPressedPosition;
            var b = h.mouse.screenX;
            var c = h.mouse.screenY;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            this.justPressedTimeInTicks = h.game.ticks;
          } else if (this.current == -1) {
            var d = h.swipes;
            var e = this.ID;
            a = this.justPressedPosition;
            var f = null;
            if (f == null) {
              c = b = 0;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              b = W.pool.get().set(b, c);
              b._inPool = false;
              f = b;
            }
            b = a.x;
            c = a.y;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            f.set_x(b);
            f.set_y(c);
            d.push(new pj(e, f, h.mouse.getScreenPosition(), this.justPressedTimeInTicks));
          }
        },
        destroy: function () {
          this.justPressedPosition = ca.put(this.justPressedPosition);
        },
        onDown: function (a) {
          if (h.mouse.enabled) {
            this.press();
          }
        },
        onUp: function (a) {
          if (h.mouse.enabled) {
            this.release();
          }
        },
        __class__: cf
      });
      function el(a, b, c, d, e, f, k, h, n) {
        this.object = a;
        this.onMouseDown = b;
        this.onMouseUp = c;
        this.onMouseOver = d;
        this.onMouseOut = e;
        this.mouseChildren = f;
        this.mouseEnabled = k;
        this.pixelPerfect = h;
        this.mouseButtons = n == null ? [-1] : n;
        if (a instanceof F) {
          this.sprite = a;
        }
      }
      g["flixel.input.mouse.FlxMouseEvent"] = el;
      el.__name__ = "flixel.input.mouse.FlxMouseEvent";
      el.__interfaces__ = [rb];
      el.prototype = {
        destroy: function () {
          this.mouseButtons = this.onMouseWheel = this.onMouseMove = this.onMouseOut = this.onMouseOver = this.onMouseDoubleClick = this.onMouseClick = this.onMouseUp = this.onMouseDown = this.sprite = this.object = null;
        },
        __class__: el
      };
      function fl() {
        this.maxDoubleClickDelay = 500;
        var a = 0;
        var b = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = W.pool.get().set(a, b);
        a._inPool = false;
        this._point = a;
        this.mouseClickedTime = -1;
        this._clickList = [];
        this._downList = [];
        this._overList = [];
        this._list = [];
        Ea.call(this);
        if (this._list != null) {
          this.clearRegistry();
        }
        this._list = [];
        this._overList = [];
        this._downList = [];
        this._clickList = [];
        h.signals.preStateSwitch.add(m(this, this.removeAll));
      }
      g["flixel.input.mouse.FlxMouseEventManager"] = fl;
      fl.__name__ = "flixel.input.mouse.FlxMouseEventManager";
      fl.__super__ = Ea;
      fl.prototype = q(Ea.prototype, {
        destroy: function () {
          this.clearRegistry();
          this._point = ca.put(this._point);
          h.signals.preStateSwitch.remove(m(this, this.removeAll));
          Ea.prototype.destroy.call(this);
        },
        update: function (a) {
          Ea.prototype.update.call(this, a);
          a = [];
          for (var b = 0, c = this._list; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.object.alive && d.object.exists && d.object.visible && d.mouseEnabled && this.checkOverlap(d) && (a.push(d), !d.mouseChildren)) {
              break;
            }
          }
          b = 0;
          for (c = this._overList; b < c.length;) {
            d = c[b];
            ++b;
            if (d.onMouseOut != null && (!d.object.exists || !d.object.visible || this.get(d.object, a) == null)) {
              d.onMouseOut(d.object);
            }
          }
          for (b = 0; b < a.length;) {
            d = a[b];
            ++b;
            if (d.onMouseOver != null && d.object.exists && d.object.visible && this.get(d.object, this._overList) == null) {
              d.onMouseOver(d.object);
            }
          }
          if (h.mouse.enabled) {
            b = h.mouse;
            if (b._prevX != b.x || b._prevY != b.y) {
              for (b = 0; b < a.length;) {
                d = a[b];
                ++b;
                if (d.onMouseMove != null && d.object.exists && d.object.visible) {
                  d.onMouseMove(d.object);
                }
              }
            }
            for (b = 0; b < a.length;) {
              d = a[b];
              ++b;
              if (d.onMouseDown != null && d.object.exists && d.object.visible) {
                c = 0;
                for (var e = d.mouseButtons; c < e.length;) {
                  var f = e[c];
                  ++c;
                  if (cf.getByID(f).current == 2) {
                    d.onMouseDown(d.object);
                  }
                }
              }
            }
            if (h.mouse._leftButton.current == 2) {
              for (b = 0; b < a.length;) {
                d = a[b];
                ++b;
                if ((d.onMouseClick != null || d.onMouseDoubleClick != null) && d.object.exists && d.object.visible) {
                  this._downList.push(d);
                }
              }
            }
            for (b = 0; b < a.length;) {
              d = a[b];
              ++b;
              if (d.onMouseUp != null && d.object.exists && d.object.visible) {
                c = 0;
                e = d.mouseButtons;
                while (c < e.length) {
                  f = e[c];
                  ++c;
                  if (cf.getByID(f).current == -1) {
                    d.onMouseUp(d.object);
                  }
                }
              }
            }
            if (this._clickList.length > 0 && h.game.ticks - this.mouseClickedTime > this.maxDoubleClickDelay) {
              this._clickList = [];
            }
            if (h.mouse._leftButton.current == -1) {
              this.mouseClickedTime = h.game.ticks;
              d = this._clickList;
              if (this._clickList.length > 0) {
                this._clickList = [];
              }
              b = 0;
              c = this._downList;
              while (b < c.length) {
                e = c[b];
                ++b;
                if (e.object != null && e.object.exists && e.object.visible && this.get(e.object, a) != null) {
                  if (e.onMouseClick != null) {
                    e.onMouseClick(e.object);
                  }
                  if (e.onMouseDoubleClick != null) {
                    if (this.get(e.object, d) != null) {
                      e.onMouseDoubleClick(e.object);
                    } else {
                      this._clickList.push(e);
                    }
                  }
                }
              }
            }
            if (this._downList.length > 0) {
              b = h.mouse._leftButton;
              b = b.current != 1 && b.current != 2;
            } else {
              b = false;
            }
            if (b) {
              this._downList = [];
            }
            if (h.mouse.wheel != 0) {
              for (b = 0; b < a.length;) {
                d = a[b];
                ++b;
                if (d.onMouseWheel != null && d.object.exists && d.object.visible) {
                  d.onMouseWheel(d.object);
                }
              }
            }
            this._overList = a;
          }
        },
        removeAll: function () {
          if (this._list != null) {
            for (var a = 0, b = this._list; a < b.length;) {
              var c = b[a];
              ++a;
              c.destroy();
            }
          }
          this._list.splice(0, this._list.length);
          this._overList = [];
          this._downList = [];
          this._clickList = [];
        },
        get: function (a, b) {
          if (b == null) {
            b = this._list;
          }
          for (var c = 0; c < b.length;) {
            var d = b[c];
            ++c;
            if (d.object == a) {
              return d;
            }
          }
          return null;
        },
        clearRegistry: function () {
          this._clickList = this._downList = this._overList = null;
          this._list = ca.destroyArray(this._list);
        },
        checkOverlap: function (a) {
          for (var b = 0, c = a.object.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            var e = this._point = h.mouse.getPositionInCameraView(d, this._point);
            var f = e.x > d.viewMarginX && e.x < d.width - d.viewMarginX && e.y > d.viewMarginY && e.y < d.height - d.viewMarginY;
            if (e._weak) {
              e.put();
            }
            if (f && (f = this._point = h.mouse.getWorldPosition(d, this._point), a.pixelPerfect && a.sprite != null ? a.sprite.pixelsOverlapPoint(f, 1, d) : a.object.overlapsPoint(f, true, d))) {
              return true;
            }
            f = 0;
            for (e = h.touches.list; f < e.length;) {
              var k = e[f];
              ++f;
              var t = this._point = k.getPositionInCameraView(d, this._point);
              var n = t.x > d.viewMarginX && t.x < d.width - d.viewMarginX && t.y > d.viewMarginY && t.y < d.height - d.viewMarginY;
              if (t._weak) {
                t.put();
              }
              if (n && (k = this._point = k.getWorldPosition(d, this._point), a.pixelPerfect && a.sprite != null ? a.sprite.pixelsOverlapPoint(k, 1, d) : a.object.overlapsPoint(k, true, d))) {
                return true;
              }
            }
          }
          return false;
        },
        __class__: fl
      });
      function sj(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.justPressedTimeInTicks = -1;
        var e = 0;
        var f = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = W.pool.get().set(e, f);
        e._inPool = false;
        this.justPressedPosition = e;
        this.flashPoint = new lb();
        ed.call(this);
        this.input = new ke(c);
        this.setXY(a, b);
        this.pressure = d;
      }
      g["flixel.input.touch.FlxTouch"] = sj;
      sj.__name__ = "flixel.input.touch.FlxTouch";
      sj.__interfaces__ = [sh, rb];
      sj.__super__ = ed;
      sj.prototype = q(ed.prototype, {
        destroy: function () {
          this.input = null;
          this.justPressedPosition = ca.put(this.justPressedPosition);
          this.flashPoint = null;
        },
        recycle: function (a, b, c, d) {
          this.setXY(a, b);
          this.input.ID = c;
          this.input.reset();
          this.pressure = d;
        },
        update: function () {
          this.input.update();
          if (this.input.current == 2) {
            var a = this.justPressedPosition;
            var b = this.screenX;
            var c = this.screenY;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            this.justPressedTimeInTicks = h.game.ticks;
          } else if (this.input.current == -1) {
            var d = h.swipes;
            var e = this.input.ID;
            a = this.justPressedPosition;
            var f = null;
            if (f == null) {
              c = b = 0;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              b = W.pool.get().set(b, c);
              b._inPool = false;
              f = b;
            }
            b = a.x;
            c = a.y;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            f.set_x(b);
            f.set_y(c);
            d.push(new pj(e, f, this.getScreenPosition(), this.justPressedTimeInTicks));
          }
        },
        setXY: function (a, b) {
          this.flashPoint.setTo(a, b);
          this.flashPoint = h.game.globalToLocal(this.flashPoint);
          this._globalScreenX = this.flashPoint.x / h.scaleMode.scale.x | 0;
          this._globalScreenY = this.flashPoint.y / h.scaleMode.scale.y | 0;
          this.updatePositions();
        },
        get_justReleased: function () {
          return this.input.current == -1;
        },
        get_pressed: function () {
          var a = this.input;
          if (a.current != 1) {
            return a.current == 2;
          } else {
            return true;
          }
        },
        get_justPressed: function () {
          return this.input.current == 2;
        },
        __class__: sj,
        __properties__: {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased"
        }
      });
      function Th() {
        this.list = [];
        this._inactiveTouches = [];
        this._touchesCache = new wc();
        Th.maxTouchPoints = di.maxTouchPoints;
        di.inputMode = 2;
        oa.get_current().stage.addEventListener("touchBegin", m(this, this.handleTouchBegin));
        oa.get_current().stage.addEventListener("touchEnd", m(this, this.handleTouchEnd));
        oa.get_current().stage.addEventListener("touchMove", m(this, this.handleTouchMove));
      }
      g["flixel.input.touch.FlxTouchManager"] = Th;
      Th.__name__ = "flixel.input.touch.FlxTouchManager";
      Th.__interfaces__ = [Lg];
      Th.prototype = {
        destroy: function () {
          for (var a = 0, b = this.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.destroy();
          }
          this.list = null;
          a = 0;
          for (b = this._inactiveTouches; a < b.length;) {
            c = b[a];
            ++a;
            c.destroy();
          }
          this._touchesCache = this._inactiveTouches = null;
        },
        reset: function () {
          for (var a = this._touchesCache.keys(); a.hasNext();) {
            var b = a.next();
            this._touchesCache.remove(b);
          }
          a = 0;
          for (b = this.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.input.reset();
            this._inactiveTouches.push(c);
          }
          this.list.splice(0, this.list.length);
        },
        handleTouchBegin: function (a) {
          var b = this._touchesCache.h[a.touchPointID];
          if (b != null) {
            b.setXY(a.stageX | 0, a.stageY | 0);
            b.pressure = a.pressure;
          } else {
            b = this.recycle(a.stageX | 0, a.stageY | 0, a.touchPointID, a.pressure);
          }
          b.input.press();
        },
        handleTouchEnd: function (a) {
          a = this._touchesCache.h[a.touchPointID];
          if (a != null) {
            a.input.release();
          }
        },
        handleTouchMove: function (a) {
          var b = this._touchesCache.h[a.touchPointID];
          if (b != null) {
            b.setXY(a.stageX | 0, a.stageY | 0);
            b.pressure = a.pressure;
          }
        },
        add: function (a) {
          this.list.push(a);
          return this._touchesCache.h[a.input.ID] = a;
        },
        recycle: function (a, b, c, d) {
          if (this._inactiveTouches.length > 0) {
            var e = this._inactiveTouches.pop();
            e.recycle(a, b, c, d);
            return this.add(e);
          }
          return this.add(new sj(a, b, c, d));
        },
        update: function () {
          for (var a = this.list.length - 1, b; a >= 0;) {
            b = this.list[a];
            var c = b.input;
            if (c.current != 0 && c.current != -1 || b.input.current == -1) {
              b.update();
            } else {
              b.input.reset();
              this._touchesCache.remove(b.input.ID);
              this.list.splice(a, 1);
              this._inactiveTouches.push(b);
            }
            --a;
          }
        },
        onFocus: function () {},
        onFocusLost: function () {
          this.reset();
        },
        __class__: Th
      };
      function bc() {}
      g["flixel.math.FlxMath"] = bc;
      bc.__name__ = "flixel.math.FlxMath";
      bc.roundDecimal = function (a, b) {
        var c = 1;
        for (var d = 0; d < b;) {
          d++;
          c *= 10;
        }
        return Math.round(a * c) / c;
      };
      bc.pointInFlxRect = function (a, b, c) {
        if (a >= c.x && a <= c.x + c.width && b >= c.y) {
          return b <= c.y + c.height;
        } else {
          return false;
        }
      };
      bc.maxAdd = function (a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        a += b;
        if (a > c) {
          a = c;
        } else if (a <= d) {
          a = d;
        }
        return a;
      };
      bc.wrap = function (a, b, c) {
        c = c - b + 1;
        if (a < b) {
          a += c * ((b - a) / c + 1 | 0);
        }
        return b + (a - b) % c;
      };
      bc.remapToRange = function (a, b, c, d, e) {
        return d + (e - d) / (c - b) * (a - b);
      };
      bc.getDecimals = function (a) {
        a = (a == null ? "null" : "" + a).split(".");
        var b = 0;
        if (a.length > 1) {
          b = a[1].length;
        }
        return b;
      };
      var zk = {
        __properties__: {
          get_radians: "get_radians"
        },
        distanceTo: function (a, b) {
          var c = a.x - b.x;
          a = a.y - b.y;
          if (b._weak) {
            b.put();
          }
          return Math.sqrt(c * c + a * a);
        },
        get_radians: function (a) {
          var b = a.x;
          a = a.y;
          var c = false;
          if (c == null) {
            c = false;
          }
          if (c) {
            return 180 / Math.PI * Math.atan2(a, b);
          } else {
            return Math.atan2(a, b);
          }
        }
      };
      function mh(a, b, c) {
        W.call(this);
        this._setXCallback = a;
        this._setXYCallback = this._setYCallback = c;
        if (this._setXCallback != null) {
          if (this._setYCallback == null) {
            this._setYCallback = a;
          }
          if (this._setXYCallback == null) {
            this._setXYCallback = a;
          }
        }
      }
      g["flixel.math.FlxCallbackPoint"] = mh;
      mh.__name__ = "flixel.math.FlxCallbackPoint";
      mh.__super__ = W;
      mh.prototype = q(W.prototype, {
        set: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          W.prototype.set.call(this, a, b);
          if (this._setXYCallback != null) {
            this._setXYCallback(this);
          }
          return this;
        },
        set_x: function (a) {
          W.prototype.set_x.call(this, a);
          if (this._setXCallback != null) {
            this._setXCallback(this);
          }
          return a;
        },
        set_y: function (a) {
          W.prototype.set_y.call(this, a);
          if (this._setYCallback != null) {
            this._setYCallback(this);
          }
          return a;
        },
        destroy: function () {
          W.prototype.destroy.call(this);
          this._setXYCallback = this._setYCallback = this._setXCallback = null;
        },
        put: function () {},
        __class__: mh
      });
      function yk() {}
      g["flixel.math.FlxVelocity"] = yk;
      yk.__name__ = "flixel.math.FlxVelocity";
      yk.computeVelocity = function (a, b, c, d, e) {
        if (b != 0) {
          a += b * e;
        } else if (c != 0) {
          b = c * e;
          a = a - b > 0 ? a - b : a + b < 0 ? a + b : 0;
        }
        if (a != 0 && d != 0) {
          if (a > d) {
            a = d;
          } else if (a < -d) {
            a = -d;
          }
        }
        return a;
      };
      var gl = z["flixel.path.CenterMode"] = {
        __ename__: "flixel.path.CenterMode",
        __constructs__: null,
        TOP_LEFT: {
          _hx_name: "TOP_LEFT",
          _hx_index: 0,
          __enum__: "flixel.path.CenterMode",
          toString: p
        },
        CENTER: {
          _hx_name: "CENTER",
          _hx_index: 1,
          __enum__: "flixel.path.CenterMode",
          toString: p
        },
        ORIGIN: {
          _hx_name: "ORIGIN",
          _hx_index: 2,
          __enum__: "flixel.path.CenterMode",
          toString: p
        },
        CUSTOM: (u = function (a) {
          return {
            _hx_index: 3,
            offset: a,
            __enum__: "flixel.path.CenterMode",
            toString: p
          };
        }, u._hx_name = "CUSTOM", u.__params__ = ["offset"], u)
      };
      gl.__constructs__ = [gl.TOP_LEFT, gl.CENTER, gl.ORIGIN, gl.CUSTOM];
      function Yd(a) {
        this._firstUpdate = false;
        this._wasObjectImmovable = null;
        this._inc = 1;
        this.axes = 17;
        this.finished = false;
        this.nodeIndex = 0;
        this.active = false;
        this.angleOffset = 0;
        this.autoRotate = false;
        this.centerMode = gl.CENTER;
        this.angle = 0;
        this.immovable = false;
        this.speed = 0;
        this._nodes = a != null ? a.slice() : [];
      }
      g["flixel.path.FlxPath"] = Yd;
      Yd.__name__ = "flixel.path.FlxPath";
      Yd.__interfaces__ = [rb];
      Yd.prototype = {
        computeCenter: function (a) {
          a.set_x(this.object.x);
          a.set_y(this.object.y);
          var b = this.centerMode;
          switch (b._hx_index) {
            case 0:
              return a;
            case 1:
              b = this.object.get_width() * 0.5;
              var c = this.object.get_height() * 0.5;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              a.set_x(a.x + b);
              a.set_y(a.y + c);
              return a;
            case 2:
              if (this.object instanceof F) {
                b = va.__cast(this.object, F).origin.x;
                c = va.__cast(this.object, F).origin.y;
                if (c == null) {
                  c = 0;
                }
                if (b == null) {
                  b = 0;
                }
                a.set_x(a.x + b);
                a.set_y(a.y + c);
              }
              return a;
            case 3:
              var d = b.offset;
              b = d.x;
              c = d.y;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              a.set_x(a.x + b);
              a.set_y(a.y + c);
              if (d._weak) {
                d.put();
              }
              return a;
          }
        },
        update: function (a) {
          if (this.object != null) {
            if (this._firstUpdate) {
              if (this.immovable) {
                this._wasObjectImmovable = this.object.immovable;
                this.object.set_immovable(true);
              }
              this._firstUpdate = false;
            }
            Yd._point = this.computeCenter(Yd._point);
            var b = this._nodes[this.nodeIndex];
            var c = b.x - Yd._point.x;
            var d = b.y - Yd._point.y;
            var e = this.axes == 1;
            var f = this.axes == 16;
            if (e) {
              if ((c > 0 ? c : -c) < this.speed * a) {
                b = this.advancePath();
              }
            } else if (f) {
              if ((d > 0 ? d : -d) < this.speed * a) {
                b = this.advancePath();
              }
            } else if (Math.sqrt(c * c + d * d) < this.speed * a) {
              b = this.advancePath();
            }
            if (this.object != null && this.speed != 0) {
              Yd._point = this.computeCenter(Yd._point);
              a = Yd._point;
              a = Math.abs(a.x - b.x) <= 1e-7 && Math.abs(a.y - b.y) <= 1e-7;
              if (b._weak) {
                b.put();
              }
              if (a) {
                b = this.object.velocity;
                b.set_x(0);
                b.set_y(0);
              } else {
                this.calculateVelocity(b, e, f);
              }
              if (this.autoRotate) {
                this.object.angularVelocity = 0;
                this.object.angularAcceleration = 0;
                this.object.set_angle(this.angle + this.angleOffset);
              }
              if (this.finished) {
                this.cancel();
              }
            }
          }
        },
        calculateVelocity: function (a, b, c) {
          if (b || Yd._point.y == a.y) {
            this.object.velocity.set_x(Yd._point.x < a.x ? this.speed : -this.speed);
            this.angle = this.object.velocity.x < 0 ? 180 : 0;
            if (!b) {
              this.object.velocity.set_y(0);
            }
          } else if (c || Yd._point.x == a.x) {
            this.object.velocity.set_y(Yd._point.y < a.y ? this.speed : -this.speed);
            this.angle = this.object.velocity.y < 0 ? -90 : 90;
            if (!c) {
              this.object.velocity.set_x(0);
            }
          } else {
            b = this.object.velocity;
            c = a.x;
            var d = a.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
            if (a._weak) {
              a.put();
            }
            a = Yd._point;
            c = a.x;
            d = a.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(b.x - c);
            b.set_y(b.y - d);
            if (a._weak) {
              a.put();
            }
            a = this.speed;
            if (!(Math.abs(b.x) < 1e-7) || !(Math.abs(b.y) < 1e-7)) {
              c = zk.get_radians(b);
              b.set_x(a * Math.cos(c));
              b.set_y(a * Math.sin(c));
            }
            this.angle = zk.get_radians(b) * (180 / Math.PI);
          }
        },
        advancePath: function (a) {
          if (a == null) {
            a = true;
          }
          if (a && (a = this._nodes[this.nodeIndex], a != null)) {
            var b = this.axes;
            if (b == 1 || b == 17) {
              this.object.set_x(a.x);
              b = this.centerMode;
              switch (b._hx_index) {
                case 1:
                  b = this.object;
                  b.set_x(b.x - this.object.get_width() * 0.5);
                  break;
                case 2:
                  if (this.object instanceof F) {
                    b = this.object;
                    b.set_x(b.x - this.object.origin.x);
                  }
                  break;
                case 3:
                  var c = b.offset;
                  b = this.object;
                  b.set_x(b.x - c.x);
              }
            }
            b = this.axes;
            if (b == 16 || b == 17) {
              this.object.set_y(a.y);
              b = this.centerMode;
              switch (b._hx_index) {
                case 1:
                  b = this.object;
                  b.set_y(b.y - this.object.get_height() * 0.5);
                  break;
                case 2:
                  if (this.object instanceof F) {
                    b = this.object;
                    b.set_y(b.y - this.object.origin.y);
                  }
                  break;
                case 3:
                  c = b.offset;
                  b = this.object;
                  b.set_y(b.y - c.y);
              }
            }
          }
          a = false;
          this.nodeIndex += this._inc;
          if (this._mode == 1) {
            if (this.nodeIndex < 0) {
              this.nodeIndex = 0;
              a = true;
              this.onEnd();
            }
          } else if (this._mode == 16) {
            if (this.nodeIndex >= this._nodes.length) {
              a = true;
              this.nodeIndex = 0;
            }
          } else if (this._mode == 256) {
            if (this.nodeIndex < 0) {
              this.nodeIndex = this._nodes.length - 1;
              a = true;
              if (this.nodeIndex < 0) {
                this.nodeIndex = 0;
              }
            }
          } else if (this._mode == 4096) {
            if (this._inc > 0) {
              if (this.nodeIndex >= this._nodes.length) {
                this.nodeIndex = this._nodes.length - 2;
                a = true;
                if (this.nodeIndex < 0) {
                  this.nodeIndex = 0;
                }
                this._inc = -this._inc;
              }
            } else if (this.nodeIndex < 0) {
              this.nodeIndex = 1;
              a = true;
              if (this.nodeIndex >= this._nodes.length) {
                this.nodeIndex = this._nodes.length - 1;
              }
              if (this.nodeIndex < 0) {
                this.nodeIndex = 0;
              }
              this._inc = -this._inc;
            }
          } else if (this.nodeIndex >= this._nodes.length) {
            this.nodeIndex = this._nodes.length - 1;
            a = true;
            this.onEnd();
          }
          if (a && this.onComplete != null) {
            this.onComplete(this);
          }
          return this._nodes[this.nodeIndex];
        },
        cancel: function () {
          this.onEnd();
          if (this.object != null) {
            var a = this.object.velocity;
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
          }
          return this;
        },
        onEnd: function () {
          this.finished = true;
          this.active = false;
          if (this._wasObjectImmovable != null) {
            this.object.set_immovable(this._wasObjectImmovable);
          }
          this._wasObjectImmovable = null;
        },
        destroy: function () {
          ca.putArray(this._nodes);
          this.onComplete = this.object = this._nodes = null;
        },
        __class__: Yd
      };
      function Zd() {
        this._alreadyPaused = false;
        this._pitch = this._volumeAdjust = 1;
        this.loopTime = this._time = this._length = 0;
        Ea.call(this);
        this.reset();
      }
      g["flixel.sound.FlxSound"] = Zd;
      Zd.__name__ = "flixel.sound.FlxSound";
      Zd.__super__ = Ea;
      Zd.prototype = q(Ea.prototype, {
        reset: function () {
          this.destroy();
          this._time = this.y = this.x = 0;
          this._paused = false;
          this._volumeAdjust = this._volume = 1;
          this.looped = false;
          this.endTime = this.loopTime = 0;
          this._target = null;
          this._radius = 0;
          this._proximityPan = false;
          this.set_visible(false);
          this.amplitudeRight = this.amplitudeLeft = this.amplitude = 0;
          this.autoDestroy = false;
          if (this._transform == null) {
            this._transform = new mg();
          }
          this._transform.pan = 0;
        },
        destroy: function () {
          if (this.group != null) {
            this.group.remove(this);
          }
          this._transform = null;
          this.set_exists(false);
          this.set_active(false);
          this.artist = this.name = this._target = null;
          if (this._channel != null) {
            this._channel.removeEventListener("soundComplete", m(this, this.stopped));
            this._channel.stop();
            this._channel = null;
          }
          if (this._sound != null) {
            this._sound.removeEventListener("id3", m(this, this.gotID3));
            this._sound = null;
          }
          this.onComplete = null;
          Ea.prototype.destroy.call(this);
        },
        update: function (a) {
          if (this._channel != null) {
            this._time = this._channel.get_position();
            var b = 1;
            if (this._target != null) {
              a = this._target.getPosition();
              b = this.x;
              var c = this.y;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              b = W.pool.get().set(b, c);
              b._inPool = false;
              b._weak = true;
              b = zk.distanceTo(a, b) / this._radius;
              a.put();
              a = b < 0 ? 0 : b;
              b = 1 - (a > 1 ? 1 : a);
              if (this._proximityPan) {
                a = (this.x - this._target.x) / this._radius;
                a = a < -1 ? -1 : a;
                this._transform.pan = a > 1 ? 1 : a;
              }
            }
            this._volumeAdjust = b;
            this.updateTransform();
            if (this._transform.volume > 0) {
              this.amplitudeLeft = this._channel.leftPeak / this._transform.volume;
              this.amplitudeRight = this._channel.rightPeak / this._transform.volume;
              this.amplitude = (this.amplitudeLeft + this.amplitudeRight) * 0.5;
            } else {
              this.amplitude = this.amplitudeRight = this.amplitudeLeft = 0;
            }
            if (this.endTime != null && this._time >= this.endTime) {
              this.stopped();
            }
          }
        },
        kill: function () {
          Ea.prototype.kill.call(this);
          this.cleanup(false);
        },
        loadEmbedded: function (a, b, c, d) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return this;
          }
          this.cleanup(true);
          if (a instanceof ng) {
            this._sound = a;
          } else if (va.__instanceof(a, Vi)) {
            this._sound = yb.createInstance(a, []);
          } else if (typeof a == "string") {
            if (Q.exists(a, "SOUND") || Q.exists(a, "MUSIC")) {
              this._sound = Q.getSound(a);
            } else {
              h.log.advanced("Could not find a Sound asset with an ID of '" + a + "'.", xa.ERROR, true);
            }
          }
          return this.init(b, c, d);
        },
        loadStream: function (a, b, c, d, e) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          var f = this;
          this.cleanup(true);
          this._sound = new ng();
          this._sound.addEventListener("id3", m(this, this.gotID3));
          var k = null;
          k = function (a) {
            a.target.removeEventListener(a.type, k);
            if (lf.__eq(f._sound, a.target)) {
              f._length = f._sound.get_length();
              if (e != null) {
                e();
              }
            }
          };
          this._sound.addEventListener("complete", k, false, 0, true);
          this._sound.load(new Sh(a));
          return this.init(b, c, d);
        },
        init: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            a = false;
          }
          this.looped = a;
          this.autoDestroy = b;
          this.updateTransform();
          this.set_exists(true);
          this.onComplete = c;
          this.set_pitch(1);
          this.endTime = this._length = this._sound == null ? 0 : this._sound.get_length();
          return this;
        },
        play: function (a, b, c) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = false;
          }
          if (!this.exists) {
            return this;
          }
          if (a) {
            this.cleanup(false, true);
          } else if (this._channel != null) {
            return this;
          }
          if (this._paused) {
            this.resume();
          } else {
            this.startSound(b);
          }
          this.endTime = c;
          return this;
        },
        resume: function () {
          if (this._paused) {
            this.startSound(this._time);
          }
          return this;
        },
        pause: function () {
          if (this._channel == null) {
            return this;
          }
          this._time = this._channel.get_position();
          this._paused = true;
          this.cleanup(false, false);
          return this;
        },
        volumeTween: function (a) {
          this.set_volume(a);
        },
        updateTransform: function () {
          this._transform.volume = (h.sound.muted ? 0 : 1) * h.sound.volume * (this.group != null ? this.group.volume : 1) * this._volume * this._volumeAdjust;
          if (this._channel != null) {
            this._channel.set_soundTransform(this._transform);
          }
        },
        startSound: function (a) {
          if (this._sound != null) {
            this._time = a;
            this._paused = false;
            this._channel = this._sound.play(this._time, 0, this._transform);
            if (this._channel != null) {
              this.set_pitch(this._pitch);
              this._channel.addEventListener("soundComplete", m(this, this.stopped));
              this.set_active(true);
            } else {
              this.set_exists(false);
              this.set_active(false);
            }
          }
        },
        stopped: function (a) {
          if (this.onComplete != null) {
            this.onComplete();
          }
          if (this.looped) {
            this.cleanup(false);
            this.play(false, this.loopTime, this.endTime);
          } else {
            this.cleanup(this.autoDestroy);
          }
        },
        cleanup: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a) {
            this.reset();
          } else {
            if (this._channel != null) {
              this._channel.removeEventListener("soundComplete", m(this, this.stopped));
              this._channel.stop();
              this._channel = null;
            }
            this.set_active(false);
            if (b) {
              this._time = 0;
              this._paused = false;
            }
          }
        },
        gotID3: function (a) {
          this.name = this._sound.get_id3().songName;
          this.artist = this._sound.get_id3().artist;
          this._sound.removeEventListener("id3", m(this, this.gotID3));
        },
        onFocus: function () {
          if (!this._alreadyPaused) {
            this.resume();
          }
        },
        onFocusLost: function () {
          this._alreadyPaused = this._paused;
          this.pause();
        },
        set_volume: function (a) {
          var b = a < 0 ? 0 : a;
          this._volume = b > 1 ? 1 : b;
          this.updateTransform();
          return a;
        },
        set_pitch: function (a) {
          if (this._channel != null && this._channel.__audioSource != null) {
            this._channel.__audioSource.set_pitch(a);
          }
          return this._pitch = a;
        },
        set_time: function (a) {
          if (this._channel != null) {
            this.cleanup(false, true);
            this.startSound(a);
          }
          return this._time = a;
        },
        __class__: Zd,
        __properties__: q(Ea.prototype.__properties__, {
          set_time: "set_time",
          set_pitch: "set_pitch",
          set_volume: "set_volume"
        })
      });
      function hl(a) {
        if (a == null) {
          a = 1;
        }
        this.sounds = [];
        this.set_volume(a);
      }
      g["flixel.sound.FlxSoundGroup"] = hl;
      hl.__name__ = "flixel.sound.FlxSoundGroup";
      hl.prototype = {
        add: function (a) {
          if (this.sounds.indexOf(a) == -1) {
            if (a.group != null) {
              r.remove(a.group.sounds, a);
            }
            this.sounds.push(a);
            a.group = this;
            a.updateTransform();
            return true;
          } else {
            return false;
          }
        },
        remove: function (a) {
          if (this.sounds.indexOf(a) != -1) {
            a.group = null;
            r.remove(this.sounds, a);
            a.updateTransform();
            return true;
          } else {
            return false;
          }
        },
        set_volume: function (a) {
          this.volume = a;
          for (var b = 0, c = this.sounds; b < c.length;) {
            var d = c[b];
            ++b;
            d.updateTransform();
          }
          return a;
        },
        __class__: hl,
        __properties__: {
          set_volume: "set_volume"
        }
      };
      function yf(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (yf.preload != null) {
          this.__fromImage(yf.preload);
        } else {
          var f = this;
          Cb.loadFromBase64(Ze.getString(yf.resourceName), yf.resourceType).then(function (a) {
            f.__fromImage(a);
            return Bb.withValue(f);
          }).onComplete(function (a) {
            if (yf.preload == null) {
              yf.preload = a.image;
            }
            if (e != null && ja.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      g["flixel.system.GraphicLogo"] = yf;
      yf.__name__ = "flixel.system.GraphicLogo";
      yf.__super__ = T;
      yf.prototype = q(T.prototype, {
        __class__: yf
      });
      function zf(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (zf.preload != null) {
          this.__fromImage(zf.preload);
        } else {
          var f = this;
          Cb.loadFromBase64(Ze.getString(zf.resourceName), zf.resourceType).then(function (a) {
            f.__fromImage(a);
            return Bb.withValue(f);
          }).onComplete(function (a) {
            if (zf.preload == null) {
              zf.preload = a.image;
            }
            if (e != null && ja.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      g["flixel.system.GraphicVirtualInput"] = zf;
      zf.__name__ = "flixel.system.GraphicVirtualInput";
      zf.__super__ = T;
      zf.prototype = q(T.prototype, {
        __class__: zf
      });
      function Yb(a) {
        this.length = a.byteLength;
        this.b = new Uint8Array(a);
        this.b.bufferValue = a;
        a.hxBytes = this;
        a.bytes = this.b;
      }
      g["haxe.io.Bytes"] = Yb;
      Yb.__name__ = "haxe.io.Bytes";
      Yb.ofString = function (a, b) {
        b = [];
        for (var c = 0; c < a.length;) {
          var d = a.charCodeAt(c++);
          if (d >= 55296 && d <= 56319) {
            d = d - 55232 << 10 | a.charCodeAt(c++) & 1023;
          }
          if (d <= 127) {
            b.push(d);
          } else {
            if (d <= 2047) {
              b.push(d >> 6 | 192);
            } else {
              if (d <= 65535) {
                b.push(d >> 12 | 224);
              } else {
                b.push(d >> 18 | 240);
                b.push(d >> 12 & 63 | 128);
              }
              b.push(d >> 6 & 63 | 128);
            }
            b.push(d & 63 | 128);
          }
        }
        return new Yb(new Uint8Array(b).buffer);
      };
      Yb.ofData = function (a) {
        var b = a.hxBytes;
        return b ?? new Yb(a);
      };
      Yb.prototype = {
        blit: function (a, b, c, d) {
          if (a < 0 || c < 0 || d < 0 || a + d > this.length || c + d > b.length) {
            throw G.thrown(Af.OutsideBounds);
          }
          if (c == 0 && d == b.b.byteLength) {
            this.b.set(b.b, a);
          } else {
            this.b.set(b.b.subarray(c, c + d), a);
          }
        },
        getString: function (a, b, c) {
          if (a < 0 || b < 0 || a + b > this.length) {
            throw G.thrown(Af.OutsideBounds);
          }
          c = "";
          var d = this.b;
          var e = J.fromCharCode;
          var f = a;
          for (a += b; f < a;) {
            b = d[f++];
            if (b < 128) {
              if (b == 0) {
                break;
              }
              c += e(b);
            } else if (b < 224) {
              c += e((b & 63) << 6 | d[f++] & 127);
            } else if (b < 240) {
              var k = d[f++];
              c += e((b & 31) << 12 | (k & 127) << 6 | d[f++] & 127);
            } else {
              k = d[f++];
              var h = d[f++];
              b = (b & 15) << 18 | (k & 127) << 12 | (h & 127) << 6 | d[f++] & 127;
              c += e((b >> 10) + 55232);
              c += e(b & 1023 | 56320);
            }
          }
          return c;
        },
        toString: function () {
          return this.getString(0, this.length);
        },
        __class__: Yb
      };
      function Yo() {}
      g["openfl.utils.IDataOutput"] = Yo;
      Yo.__name__ = "openfl.utils.IDataOutput";
      Yo.__isInterface__ = true;
      function Zo() {}
      g["openfl.utils.IDataInput"] = Zo;
      Zo.__name__ = "openfl.utils.IDataInput";
      Zo.__isInterface__ = true;
      function vd(a) {
        if (a == null) {
          a = 0;
        }
        var b = new Yb(new ArrayBuffer(a));
        Yb.call(this, b.b.buffer);
        this.__allocated = a;
        if (vd.__defaultEndian == null) {
          if ($c.get_endianness() == il.LITTLE_ENDIAN) {
            vd.__defaultEndian = 1;
          } else {
            vd.__defaultEndian = 0;
          }
        }
        this.__endian = vd.__defaultEndian;
        this.objectEncoding = vd.defaultObjectEncoding;
        this.position = 0;
      }
      g["openfl.utils.ByteArrayData"] = vd;
      vd.__name__ = "openfl.utils.ByteArrayData";
      vd.__interfaces__ = [Yo, Zo];
      vd.fromBytes = function (a) {
        var b = new vd();
        b.__fromBytes(a);
        return b;
      };
      vd.__super__ = Yb;
      vd.prototype = q(Yb.prototype, {
        readByte: function () {
          var a = this.readUnsignedByte();
          if ((a & 128) != 0) {
            return a - 256;
          } else {
            return a;
          }
        },
        readInt: function () {
          var a = this.readUnsignedByte();
          var b = this.readUnsignedByte();
          var c = this.readUnsignedByte();
          var d = this.readUnsignedByte();
          if (this.__endian == 1) {
            return d << 24 | c << 16 | b << 8 | a;
          } else {
            return a << 24 | b << 16 | c << 8 | d;
          }
        },
        readUnsignedByte: function () {
          if (this.position < this.length) {
            return this.b[this.position++];
          }
          throw new tj();
        },
        readUnsignedInt: function () {
          var a = this.readUnsignedByte();
          var b = this.readUnsignedByte();
          var c = this.readUnsignedByte();
          var d = this.readUnsignedByte();
          if (this.__endian == 1) {
            return d << 24 | c << 16 | b << 8 | a;
          } else {
            return a << 24 | b << 16 | c << 8 | d;
          }
        },
        readUnsignedShort: function () {
          var a = this.readUnsignedByte();
          var b = this.readUnsignedByte();
          if (this.__endian == 1) {
            return (b << 8) + a;
          } else {
            return a << 8 | b;
          }
        },
        readUTF: function () {
          var a = this.readUnsignedShort();
          return this.readUTFBytes(a);
        },
        readUTFBytes: function (a) {
          if (this.position + a > this.length) {
            throw new tj();
          }
          this.position += a;
          return this.getString(this.position - a, a);
        },
        writeByte: function (a) {
          this.__resize(this.position + 1);
          this.b[this.position++] = a & 255;
        },
        writeBytes: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (Ne.get_length(a) != 0) {
            if (c == 0) {
              c = Ne.get_length(a) - b;
            }
            this.__resize(this.position + c);
            this.blit(this.position, a, b, c);
            this.position += c;
          }
        },
        writeInt: function (a) {
          this.__resize(this.position + 4);
          if (this.__endian == 1) {
            this.b[this.position++] = a & 255;
            this.b[this.position++] = a >> 8 & 255;
            this.b[this.position++] = a >> 16 & 255;
            this.b[this.position++] = a >> 24 & 255;
          } else {
            this.b[this.position++] = a >> 24 & 255;
            this.b[this.position++] = a >> 16 & 255;
            this.b[this.position++] = a >> 8 & 255;
            this.b[this.position++] = a & 255;
          }
        },
        writeShort: function (a) {
          this.__resize(this.position + 2);
          if (this.__endian == 1) {
            this.b[this.position++] = a & 255;
            this.b[this.position++] = a >> 8 & 255;
          } else {
            this.b[this.position++] = a >> 8 & 255;
            this.b[this.position++] = a & 255;
          }
        },
        writeUnsignedInt: function (a) {
          this.writeInt(a);
        },
        writeUTFBytes: function (a) {
          a = Yb.ofString(a);
          this.writeBytes(Ne.fromBytes(a));
        },
        __fromBytes: function (a) {
          this.b = a.b;
          this.__allocated = a.length;
          this.data = a.data;
          this.length = a.length;
        },
        __resize: function (a) {
          if (a > this.__allocated) {
            var b = new Yb(new ArrayBuffer((a + 1) * 3 >> 1));
            if (this.__allocated > 0) {
              var c = this.length;
              this.length = this.__allocated;
              b.blit(0, this, 0, this.__allocated);
              this.length = c;
            }
            this.b = b.b;
            this.__allocated = b.length;
            this.data = b.data;
          }
          if (this.length < a) {
            this.length = a;
          }
        },
        __class__: vd
      });
      var Jp = {
        getXml: function (a) {
          if (typeof a == "string") {
            if (Q.exists(a)) {
              return ea.parse(Q.getText(a));
            } else {
              return ea.parse(a);
            }
          } else {
            return va.__cast(a, ea);
          }
        }
      };
      var Ip = {
        getData: function (a) {
          if (typeof a == "string") {
            if (Q.exists(a)) {
              return JSON.parse(Q.getText(a));
            } else {
              return JSON.parse(a);
            }
          } else {
            return a;
          }
        }
      };
      function Nd() {}
      g["flixel.system.FlxAssets"] = Nd;
      Nd.__name__ = "flixel.system.FlxAssets";
      Nd.drawLogo = function (a) {
        a.beginFill(47394);
        a.moveTo(50, 13);
        a.lineTo(51, 13);
        a.lineTo(87, 50);
        a.lineTo(87, 51);
        a.lineTo(51, 87);
        a.lineTo(50, 87);
        a.lineTo(13, 51);
        a.lineTo(13, 50);
        a.lineTo(50, 13);
        a.endFill();
        a.beginFill(16761138);
        a.moveTo(0, 0);
        a.lineTo(25, 0);
        a.lineTo(50, 13);
        a.lineTo(13, 50);
        a.lineTo(0, 25);
        a.lineTo(0, 0);
        a.endFill();
        a.beginFill(16066382);
        a.moveTo(100, 0);
        a.lineTo(75, 0);
        a.lineTo(51, 13);
        a.lineTo(87, 50);
        a.lineTo(100, 25);
        a.lineTo(100, 0);
        a.endFill();
        a.beginFill(3555839);
        a.moveTo(0, 100);
        a.lineTo(25, 100);
        a.lineTo(50, 87);
        a.lineTo(13, 51);
        a.lineTo(0, 75);
        a.lineTo(0, 100);
        a.endFill();
        a.beginFill(314875);
        a.moveTo(100, 100);
        a.lineTo(75, 100);
        a.lineTo(51, 87);
        a.lineTo(87, 51);
        a.lineTo(100, 75);
        a.lineTo(100, 100);
        a.endFill();
      };
      Nd.getSound = function (a) {
        if (!w.endsWith(a, ".mp3") && !w.endsWith(a, ".ogg") && !w.endsWith(a, ".wav")) {
          a += "." + Nd.defaultSoundExtension;
        }
        return Q.getSound(a);
      };
      function tk() {
        F.call(this);
        this.makeGraphic(1, 1, -1, true, h.bitmap.getUniqueKey("bg_graphic_"));
        var a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      g["flixel.system.FlxBGSprite"] = tk;
      tk.__name__ = "flixel.system.FlxBGSprite";
      tk.__super__ = F;
      tk.prototype = q(F.prototype, {
        draw: function () {
          for (var a = 0, b = this.getCamerasLegacy(); a < b.length;) {
            var c = b[a];
            ++a;
            if (c.visible && c.exists) {
              this._matrix.identity();
              this._matrix.scale(c.width - c.viewMarginX * 2, c.height - c.viewMarginY * 2);
              c.drawPixels(this.frame, null, this._matrix, this.colorTransform);
            }
          }
        },
        __class__: tk
      });
      function Og() {
        Ua.call(this);
        this.addEventListener("addedToStage", m(this, this.onAddedToStage));
      }
      g["flixel.system._FlxBasePreloader.DefaultPreloader"] = Og;
      Og.__name__ = "flixel.system._FlxBasePreloader.DefaultPreloader";
      Og.__super__ = Ua;
      Og.prototype = q(Ua.prototype, {
        onAddedToStage: function (a) {
          this.removeEventListener("addedToStage", m(this, this.onAddedToStage));
          this.onInit();
          this.onUpdate(this.get_loaderInfo().bytesLoaded, this.get_loaderInfo().bytesTotal);
          this.addEventListener("progress", m(this, this.onProgress));
          this.addEventListener("complete", m(this, this.onComplete));
        },
        onComplete: function (a) {
          a.preventDefault();
          this.removeEventListener("progress", m(this, this.onProgress));
          this.removeEventListener("complete", m(this, this.onComplete));
          this.onLoaded();
        },
        onProgress: function (a) {
          this.onUpdate(a.bytesLoaded | 0, a.bytesTotal | 0);
        },
        onInit: function () {},
        onLoaded: function () {
          this.dispatchEvent(new Ga("unload"));
        },
        onUpdate: function (a, b) {},
        __class__: Og
      });
      function Pg(a, b) {
        if (a == null) {
          a = 0;
        }
        this._loaded = this._urlChecked = this._destroyed = false;
        this._percent = 0;
        this.siteLockBodyText = "It appears the website you are using is hosting an unauthorized copy of this game. Storage or redistribution of this content, without the express permission of the developer or other copyright holder, is prohibited under copyright law.\n\nThank you for your interest in this game! Please support the developer by visiting the following website to play the game:";
        this.siteLockTitleText = "Sorry.";
        this.minDisplayTime = this.siteLockURLIndex = 0;
        Og.call(this);
        this.minDisplayTime = a;
        this.allowedURLs = b ?? [];
        this._startTime = new Date().getTime();
      }
      g["flixel.system.FlxBasePreloader"] = Pg;
      Pg.__name__ = "flixel.system.FlxBasePreloader";
      Pg.__super__ = Og;
      Pg.prototype = q(Og.prototype, {
        create: function () {},
        onInit: function () {
          Og.prototype.onInit.call(this);
          oa.get_current().stage.set_scaleMode(2);
          oa.get_current().stage.align = 6;
          this.create();
          this.addEventListener("enterFrame", m(this, this.onEnterFrame));
          this.checkSiteLock();
        },
        onUpdate: function (a, b) {
          this._percent = b != 0 ? a / b : 0;
        },
        onEnterFrame: function (a) {
          a = new Date().getTime() - this._startTime;
          var b = this.minDisplayTime * 1000;
          var c = this._percent;
          if (b > 0 && this._percent > a / b) {
            c = a / b;
          }
          if (!this._destroyed) {
            this.update(c);
          }
          if (this._loaded && (b <= 0 || a / b >= 1)) {
            this.removeEventListener("enterFrame", m(this, this.onEnterFrame));
            Og.prototype.onLoaded.call(this);
            this.destroy();
            this._destroyed = true;
          }
        },
        destroy: function () {},
        update: function (a) {},
        onLoaded: function () {
          this._loaded = true;
          this._percent = 1;
        },
        createBitmap: function (a, b) {
          var c = new Nc();
          c.set_bitmapData(yb.createInstance(a, [0, 0, true, -1, function (a) {
            b(c);
          }]));
          return c;
        },
        checkSiteLock: function () {
          if (!this._urlChecked) {
            if (this.isHostUrlAllowed()) {
              this._urlChecked = true;
            } else {
              this.removeChildren();
              this.removeEventListener("enterFrame", m(this, this.onEnterFrame));
              this.createSiteLockFailureScreen();
            }
          }
        },
        createSiteLockFailureScreen: function () {
          this.addChild(this.createSiteLockFailureBackground(16777215, 15066597));
          this.addChild(this.createSiteLockFailureIcon(15066597, 0.9));
          this.addChild(this.createSiteLockFailureText(30));
        },
        createSiteLockFailureBackground: function (a, b) {
          var c = new og();
          var d = c.get_graphics();
          d.clear();
          var e = new za();
          e.createGradientBox(1, 1, 0, -0.5, -0.5);
          var f = Math.max(this.stage.stageWidth, this.stage.stageHeight);
          e.scale(f, f);
          e.translate(this.stage.stageWidth * 0.5, this.stage.stageHeight * 0.5);
          d.beginGradientFill(1, [a, b], [1, 1], [0, 255], e);
          d.drawRect(0, 0, this.stage.stageWidth, this.stage.stageHeight);
          d.endFill();
          return c;
        },
        createSiteLockFailureIcon: function (a, b) {
          var c = new og();
          var d = c.get_graphics();
          d.clear();
          d.beginFill(a);
          a = [1, 6, 2, 2, 2, 6, 6, 2, 2, 2, 6, 1, 6, 2, 6, 2, 6, 2, 6, 1, 6, 6, 2, 2, 2, 6, 6];
          var e = ab.toIntVector(null);
          for (var f = 0, k = a.length; f < k;) {
            var h = f++;
            e.set(h, a[h]);
          }
          var n = e;
          a = [120, 0, 164, 0, 200, 35, 200, 79, 200, 130, 160, 130, 160, 79, 160, 57, 142, 40, 120, 40, 97, 40, 79, 57, 79, 79, 80, 130, 40, 130, 40, 79, 40, 35, 75, 0, 120, 0, 220, 140, 231, 140, 240, 148, 240, 160, 240, 300, 240, 311, 231, 320, 220, 320, 20, 320, 8, 320, 0, 311, 0, 300, 0, 160, 0, 148, 8, 140, 20, 140, 120, 190, 108, 190, 100, 198, 100, 210, 100, 217, 104, 223, 110, 227, 110, 270, 130, 270, 130, 227, 135, 223, 140, 217, 140, 210, 140, 198, 131, 190, 120, 190];
          e = ab.toFloatVector(null);
          f = 0;
          for (k = a.length; f < k;) {
            h = f++;
            e.set(h, a[h]);
          }
          d.drawPath(n, e, 1);
          d.endFill();
          d = new za();
          d.translate(c.get_width() * -0.5, c.get_height() * -0.5);
          b *= Math.min(this.stage.stageWidth / c.get_width(), this.stage.stageHeight / c.get_height());
          d.scale(b, b);
          d.translate(this.stage.stageWidth * 0.5, this.stage.stageHeight * 0.5);
          c.get_transform().set_matrix(d);
          return c;
        },
        createSiteLockFailureText: function (a) {
          var b = new Ua();
          var c = new da(0, 0, this.stage.stageWidth, this.stage.stageHeight);
          c.inflate(-a, -a);
          a = new Wc();
          var d = new ld("_sans", 33, 3355443, true);
          d.align = 3;
          a.set_defaultTextFormat(d);
          a.set_selectable(false);
          a.set_width(c.width);
          a.set_text(this.siteLockTitleText);
          d = new Wc();
          var e = new ld("_sans", 22, 3355443);
          e.align = 2;
          d.set_defaultTextFormat(e);
          d.set_multiline(true);
          d.set_wordWrap(true);
          d.set_selectable(false);
          d.set_width(c.width);
          d.set_text(this.siteLockBodyText);
          e = new Wc();
          var f = new ld("_sans", 22, 7247820, true, false, true);
          f.align = 0;
          f.url = this.allowedURLs[this.siteLockURLIndex];
          e.set_defaultTextFormat(f);
          e.set_selectable(true);
          e.set_width(c.width);
          e.set_text(this.allowedURLs[this.siteLockURLIndex]);
          this.adjustSiteLockTextFields(a, d, e);
          a.set_height(a.get_textHeight() + 4);
          d.set_height(d.get_textHeight() + 4);
          e.set_height(e.get_textHeight() + 4);
          a.set_x(d.set_x(e.set_x(c.get_left())));
          a.set_y(c.get_top());
          d.set_y(a.get_y() + a.get_height() * 2);
          e.set_y(d.get_y() + d.get_height() + e.get_height());
          b.addChild(a);
          b.addChild(d);
          b.addChild(e);
          return b;
        },
        adjustSiteLockTextFields: function (a, b, c) {},
        isHostUrlAllowed: function () {
          if (this.allowedURLs.length == 0) {
            return true;
          }
          var a = Ub.getDomain(E.location.href);
          for (var b = 0, c = this.allowedURLs; b < c.length;) {
            var d = c[b];
            ++b;
            if (Ub.getDomain(d) == a) {
              return true;
            }
          }
          return false;
        },
        __class__: Pg
      });
      function nd() {
        this.exists = true;
      }
      g["flixel.system.FlxLinkedList"] = nd;
      nd.__name__ = "flixel.system.FlxLinkedList";
      nd.__interfaces__ = [rb];
      nd.recycle = function () {
        if (nd._cachedListsHead != null) {
          var a = nd._cachedListsHead;
          nd._cachedListsHead = nd._cachedListsHead.next;
          nd._NUM_CACHED_FLX_LIST--;
          a.exists = true;
          a.next = null;
          return a;
        }
        return new nd();
      };
      nd.prototype = {
        destroy: function () {
          if (this.exists) {
            this.object = null;
            if (this.next != null) {
              this.next.destroy();
            }
            this.exists = false;
            this.next = nd._cachedListsHead;
            nd._cachedListsHead = this;
            nd._NUM_CACHED_FLX_LIST++;
          }
        },
        __class__: nd
      };
      function mf(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (mf.preload != null) {
          this.__fromImage(mf.preload);
        } else {
          var f = this;
          Cb.loadFromBase64(Ze.getString(mf.resourceName), mf.resourceType).then(function (a) {
            f.__fromImage(a);
            return Bb.withValue(f);
          }).onComplete(function (a) {
            if (mf.preload == null) {
              mf.preload = a.image;
            }
            if (e != null && ja.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      g["flixel.system._FlxPreloader.GraphicLogoLight"] = mf;
      mf.__name__ = "flixel.system._FlxPreloader.GraphicLogoLight";
      mf.__super__ = T;
      mf.prototype = q(T.prototype, {
        __class__: mf
      });
      function nf(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        T.call(this, 0, 0, c, d);
        if (nf.preload != null) {
          this.__fromImage(nf.preload);
        } else {
          var f = this;
          Cb.loadFromBase64(Ze.getString(nf.resourceName), nf.resourceType).then(function (a) {
            f.__fromImage(a);
            return Bb.withValue(f);
          }).onComplete(function (a) {
            if (nf.preload == null) {
              nf.preload = a.image;
            }
            if (e != null && ja.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      g["flixel.system._FlxPreloader.GraphicLogoCorners"] = nf;
      nf.__name__ = "flixel.system._FlxPreloader.GraphicLogoCorners";
      nf.__super__ = T;
      nf.prototype = q(T.prototype, {
        __class__: nf
      });

  function ik(a, b) {
    if (a == null) {
      a = 0;
    }
   Pg.call(this, a, ["https://www.snokido.com", "https://www.snokido.fr", "https://w8.snokido.com", "localhost"]);
  }
  g["flixel.system.FlxPreloader"] = ik;
  ik.__name__ = "flixel.system.FlxPreloader";
  ik.__super__ = Pg;
  ik.prototype = q(Pg.prototype, {
    create: function () {
      var a = this;
      this._buffer = new Ua();
      this._buffer.set_scaleX(this._buffer.set_scaleY(2));
      this.addChild(this._buffer);
      this._width = oa.get_current().stage.stageWidth / this._buffer.get_scaleX() | 0;
      this._height = oa.get_current().stage.stageHeight / this._buffer.get_scaleY() | 0;
      this._buffer.addChild(new Nc(new T(this._width, this._height, false, 13406)));
      var b = this.createBitmap(mf, function (b) {
        b.set_width(b.set_height(a._height));
        b.set_x((a._width - b.get_width()) / 2);
      });
      b.smoothing = true;
      this._buffer.addChild(b);
      this._bmpBar = new Nc(new T(1, 7, false, 6253311));
      this._bmpBar.set_x(4);
      this._bmpBar.set_y(this._height - 11);
      this._buffer.addChild(this._bmpBar);
      this._text = new Wc();
      this._text.set_defaultTextFormat(new ld(Nd.FONT_DEFAULT, 8, 6253311));
      this._text.set_embedFonts(true);
      this._text.set_selectable(false);
      this._text.set_multiline(false);
      this._text.set_x(2);
      this._text.set_y(this._bmpBar.get_y() - 11);
      this._text.set_width(200);
      this._buffer.addChild(this._text);
      this._logo = new Ua();
      Nd.drawLogo(this._logo.get_graphics());
      this._logo.set_scaleX(this._logo.set_scaleY(this._height / 8 * 0.04));
      this._logo.set_x((this._width - this._logo.get_width()) / 2);
      this._logo.set_y((this._height - this._logo.get_height()) / 2);
      this._buffer.addChild(this._logo);
      this._logoGlow = new Ua();
      Nd.drawLogo(this._logoGlow.get_graphics());
      this._logoGlow.set_blendMode(12);
      this._logoGlow.set_scaleX(this._logoGlow.set_scaleY(this._height / 8 * 0.04));
      this._logoGlow.set_x((this._width - this._logoGlow.get_width()) / 2);
      this._logoGlow.set_y((this._height - this._logoGlow.get_height()) / 2);
      this._buffer.addChild(this._logoGlow);
      b = this.createBitmap(nf, function (b) {
        b.set_width(a._width);
        b.set_height(a.get_height());
      });
      b.smoothing = true;
      this._buffer.addChild(b);
      b = new Nc(new T(this._width, this._height, false, 16777215));
      for (var c = 0, d = 0; c < this._height;) {
        for (d = 0; d < this._width;) {
          b.get_bitmapData().setPixel(d++, c, 0);
        }
        c += 2;
      }
      b.set_blendMode(11);
      b.set_alpha(0.25);
      this._buffer.addChild(b);
      Pg.prototype.create.call(this);
    },
    destroy: function () {
      if (this._buffer != null) {
        this.removeChild(this._buffer);
      }
      this._logoGlow = this._logo = this._text = this._bmpBar = this._buffer = null;
      Pg.prototype.destroy.call(this);
    },
    update: function (a) {
      this._bmpBar.set_scaleX(a * (this._width - 8));
      this._text.set_text(v.string(h.VERSION) + " " + (a * 100 | 0) + "%");
      if (a < 0.1) {
        this._logoGlow.set_alpha(0);
        this._logo.set_alpha(0);
      } else if (a < 0.15) {
        this._logoGlow.set_alpha(Math.random());
        this._logo.set_alpha(0);
      } else if (a < 0.2) {
        this._logoGlow.set_alpha(0);
        this._logo.set_alpha(0);
      } else if (a < 0.25) {
        this._logoGlow.set_alpha(0);
        this._logo.set_alpha(Math.random());
      } else if (a < 0.7) {
        this._logoGlow.set_alpha((a - 0.45) / 0.45);
        this._logo.set_alpha(1);
      } else if (a > 0.8 && a < 0.9) {
        this._logoGlow.set_alpha(1 - (a - 0.8) / 0.1);
        this._logo.set_alpha(0);
      } else if (a > 0.9) {
        this._buffer.set_alpha(1 - (a - 0.9) / 0.1);
      }
    },
    __class__: ik
  });

      function R(a, b, c, d, e) {
        Ha.call(this);
        var f = a;
        var k = b;
        var h = c;
        var n = d;
        if (n == null) {
          n = 0;
        }
        if (h == null) {
          h = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        this.x = f;
        this.y = k;
        this.width = h;
        this.height = n;
        this.reset(a, b, c, d, e);
      }
      g["flixel.system.FlxQuadTree"] = R;
      R.__name__ = "flixel.system.FlxQuadTree";
      R.recycle = function (a, b, c, d, e) {
        if (R._cachedTreesHead != null) {
          var f = R._cachedTreesHead;
          R._cachedTreesHead = R._cachedTreesHead.next;
          R._NUM_CACHED_QUAD_TREES--;
          f.reset(a, b, c, d, e);
          return f;
        }
        return new R(a, b, c, d, e);
      };
      R.__super__ = Ha;
      R.prototype = q(Ha.prototype, {
        reset: function (a, b, c, d, e) {
          this.exists = true;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.x = a;
          this.y = b;
          this.width = c;
          this.height = d;
          this._headA = this._tailA = nd.recycle();
          this._headB = this._tailB = nd.recycle();
          if (e != null) {
            if (e._headA.object != null) {
              for (d = e._headA; d != null;) {
                if (this._tailA.object != null) {
                  a = this._tailA;
                  this._tailA = nd.recycle();
                  a.next = this._tailA;
                }
                this._tailA.object = d.object;
                d = d.next;
              }
            }
            if (e._headB.object != null) {
              for (d = e._headB; d != null;) {
                if (this._tailB.object != null) {
                  a = this._tailB;
                  this._tailB = nd.recycle();
                  a.next = this._tailB;
                }
                this._tailB.object = d.object;
                d = d.next;
              }
            }
          } else {
            R._min = Math.floor((this.width + this.height) / (R.divisions * 2));
          }
          this._canSubdivide = this.width > R._min || this.height > R._min;
          this._southWestTree = this._southEastTree = this._northEastTree = this._northWestTree = null;
          this._leftEdge = this.x;
          this._rightEdge = this.x + this.width;
          this._halfWidth = this.width / 2;
          this._midpointX = this._leftEdge + this._halfWidth;
          this._topEdge = this.y;
          this._bottomEdge = this.y + this.height;
          this._halfHeight = this.height / 2;
          this._midpointY = this._topEdge + this._halfHeight;
        },
        destroy: function () {
          this._headA = ca.destroy(this._headA);
          this._headB = ca.destroy(this._headB);
          this._tailA = ca.destroy(this._tailA);
          this._tailB = ca.destroy(this._tailB);
          this._northWestTree = ca.destroy(this._northWestTree);
          this._northEastTree = ca.destroy(this._northEastTree);
          this._southWestTree = ca.destroy(this._southWestTree);
          this._southEastTree = ca.destroy(this._southEastTree);
          R._object = null;
          R._processingCallback = null;
          R._notifyCallback = null;
          this.exists = false;
          this.next = R._cachedTreesHead;
          R._cachedTreesHead = this;
          R._NUM_CACHED_QUAD_TREES++;
          Ha.prototype.destroy.call(this);
        },
        load: function (a, b, c, d) {
          this.add(a, 0);
          if (b != null) {
            this.add(b, 1);
            R._useBothLists = true;
          } else {
            R._useBothLists = false;
          }
          R._notifyCallback = c;
          R._processingCallback = d;
        },
        add: function (a, b) {
          R._list = b;
          var c = Qa.resolveGroup(a);
          if (c != null) {
            a = 0;
            for (var d, e = c.members, f = c.length; a < f;) {
              d = e[a++];
              if (d != null && d.exists) {
                c = Qa.resolveGroup(d);
                if (c != null) {
                  this.add(c, b);
                } else {
                  R._object = d;
                  if (R._object.exists && R._object.allowCollisions != 0) {
                    R._objectLeftEdge = R._object.x;
                    R._objectTopEdge = R._object.y;
                    R._objectRightEdge = R._object.x + R._object.get_width();
                    R._objectBottomEdge = R._object.y + R._object.get_height();
                    this.addObject();
                  }
                }
              }
            }
          } else {
            R._object = a;
            if (R._object.exists && R._object.allowCollisions != 0) {
              R._objectLeftEdge = R._object.x;
              R._objectTopEdge = R._object.y;
              R._objectRightEdge = R._object.x + R._object.get_width();
              R._objectBottomEdge = R._object.y + R._object.get_height();
              this.addObject();
            }
          }
        },
        addObject: function () {
          if (!this._canSubdivide || this._leftEdge >= R._objectLeftEdge && this._rightEdge <= R._objectRightEdge && this._topEdge >= R._objectTopEdge && this._bottomEdge <= R._objectBottomEdge) {
            this.addToList();
          } else {
            if (R._objectLeftEdge > this._leftEdge && R._objectRightEdge < this._midpointX) {
              if (R._objectTopEdge > this._topEdge && R._objectBottomEdge < this._midpointY) {
                if (this._northWestTree == null) {
                  this._northWestTree = R.recycle(this._leftEdge, this._topEdge, this._halfWidth, this._halfHeight, this);
                }
                this._northWestTree.addObject();
                return;
              }
              if (R._objectTopEdge > this._midpointY && R._objectBottomEdge < this._bottomEdge) {
                if (this._southWestTree == null) {
                  this._southWestTree = R.recycle(this._leftEdge, this._midpointY, this._halfWidth, this._halfHeight, this);
                }
                this._southWestTree.addObject();
                return;
              }
            }
            if (R._objectLeftEdge > this._midpointX && R._objectRightEdge < this._rightEdge) {
              if (R._objectTopEdge > this._topEdge && R._objectBottomEdge < this._midpointY) {
                if (this._northEastTree == null) {
                  this._northEastTree = R.recycle(this._midpointX, this._topEdge, this._halfWidth, this._halfHeight, this);
                }
                this._northEastTree.addObject();
                return;
              }
              if (R._objectTopEdge > this._midpointY && R._objectBottomEdge < this._bottomEdge) {
                if (this._southEastTree == null) {
                  this._southEastTree = R.recycle(this._midpointX, this._midpointY, this._halfWidth, this._halfHeight, this);
                }
                this._southEastTree.addObject();
                return;
              }
            }
            if (R._objectRightEdge > this._leftEdge && R._objectLeftEdge < this._midpointX && R._objectBottomEdge > this._topEdge && R._objectTopEdge < this._midpointY) {
              if (this._northWestTree == null) {
                this._northWestTree = R.recycle(this._leftEdge, this._topEdge, this._halfWidth, this._halfHeight, this);
              }
              this._northWestTree.addObject();
            }
            if (R._objectRightEdge > this._midpointX && R._objectLeftEdge < this._rightEdge && R._objectBottomEdge > this._topEdge && R._objectTopEdge < this._midpointY) {
              if (this._northEastTree == null) {
                this._northEastTree = R.recycle(this._midpointX, this._topEdge, this._halfWidth, this._halfHeight, this);
              }
              this._northEastTree.addObject();
            }
            if (R._objectRightEdge > this._midpointX && R._objectLeftEdge < this._rightEdge && R._objectBottomEdge > this._midpointY && R._objectTopEdge < this._bottomEdge) {
              if (this._southEastTree == null) {
                this._southEastTree = R.recycle(this._midpointX, this._midpointY, this._halfWidth, this._halfHeight, this);
              }
              this._southEastTree.addObject();
            }
            if (R._objectRightEdge > this._leftEdge && R._objectLeftEdge < this._midpointX && R._objectBottomEdge > this._midpointY && R._objectTopEdge < this._bottomEdge) {
              if (this._southWestTree == null) {
                this._southWestTree = R.recycle(this._leftEdge, this._midpointY, this._halfWidth, this._halfHeight, this);
              }
              this._southWestTree.addObject();
            }
          }
        },
        addToList: function () {
          if (R._list == 0) {
            if (this._tailA.object != null) {
              var a = this._tailA;
              this._tailA = nd.recycle();
              a.next = this._tailA;
            }
            this._tailA.object = R._object;
          } else {
            if (this._tailB.object != null) {
              a = this._tailB;
              this._tailB = nd.recycle();
              a.next = this._tailB;
            }
            this._tailB.object = R._object;
          }
          if (this._canSubdivide) {
            if (this._northWestTree != null) {
              this._northWestTree.addToList();
            }
            if (this._northEastTree != null) {
              this._northEastTree.addToList();
            }
            if (this._southEastTree != null) {
              this._southEastTree.addToList();
            }
            if (this._southWestTree != null) {
              this._southWestTree.addToList();
            }
          }
        },
        execute: function () {
          var a = false;
          if (this._headA.object != null) {
            for (var b = this._headA; b != null;) {
              R._object = b.object;
              R._iterator = R._useBothLists ? this._headB : b.next;
              if (R._object != null && R._object.exists && R._object.allowCollisions > 0 && R._iterator != null && R._iterator.object != null && this.overlapNode()) {
                a = true;
              }
              b = b.next;
            }
          }
          if (this._northWestTree != null && this._northWestTree.execute()) {
            a = true;
          }
          if (this._northEastTree != null && this._northEastTree.execute()) {
            a = true;
          }
          if (this._southEastTree != null && this._southEastTree.execute()) {
            a = true;
          }
          if (this._southWestTree != null && this._southWestTree.execute()) {
            a = true;
          }
          return a;
        },
        overlapNode: function () {
          R._objectHullX = R._object.x < R._object.last.x ? R._object.x : R._object.last.x;
          R._objectHullY = R._object.y < R._object.last.y ? R._object.y : R._object.last.y;
          R._objectHullWidth = R._object.x - R._object.last.x;
          R._objectHullWidth = R._object.get_width() + (R._objectHullWidth > 0 ? R._objectHullWidth : -R._objectHullWidth);
          R._objectHullHeight = R._object.y - R._object.last.y;
          R._objectHullHeight = R._object.get_height() + (R._objectHullHeight > 0 ? R._objectHullHeight : -R._objectHullHeight);
          for (var a = false, b; R._iterator != null;) {
            b = R._iterator.object;
            if (R._object == b || !b.exists || b.allowCollisions <= 0) {
              R._iterator = R._iterator.next;
            } else {
              R._checkObjectHullX = b.x < b.last.x ? b.x : b.last.x;
              R._checkObjectHullY = b.y < b.last.y ? b.y : b.last.y;
              R._checkObjectHullWidth = b.x - b.last.x;
              R._checkObjectHullWidth = b.get_width() + (R._checkObjectHullWidth > 0 ? R._checkObjectHullWidth : -R._checkObjectHullWidth);
              R._checkObjectHullHeight = b.y - b.last.y;
              R._checkObjectHullHeight = b.get_height() + (R._checkObjectHullHeight > 0 ? R._checkObjectHullHeight : -R._checkObjectHullHeight);
              if (R._objectHullX + R._objectHullWidth > R._checkObjectHullX && R._objectHullX < R._checkObjectHullX + R._checkObjectHullWidth && R._objectHullY + R._objectHullHeight > R._checkObjectHullY && R._objectHullY < R._checkObjectHullY + R._checkObjectHullHeight && (R._processingCallback == null || R._processingCallback(R._object, b))) {
                a = true;
                if (R._notifyCallback != null) {
                  R._notifyCallback(R._object, b);
                }
              }
              if (R._iterator != null) {
                R._iterator = R._iterator.next;
              }
            }
          }
          return a;
        },
        __class__: R
      });
      function pg() {}
      g["flixel.system.debug.DebuggerUtil"] = pg;
      pg.__name__ = "flixel.system.debug.DebuggerUtil";
      pg.createTextField = function (a, b, c, d) {
        if (d == null) {
          d = 12;
        }
        if (c == null) {
          c = -1;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        return pg.initTextField(new Wc(), a, b, c, d);
      };
      pg.initTextField = function (a, b, c, d, e) {
        if (e == null) {
          e = 12;
        }
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.set_x(b);
        a.set_y(c);
        a.set_multiline(false);
        a.set_wordWrap(false);
        a.set_embedFonts(true);
        a.set_selectable(false);
        a.set_defaultTextFormat(new ld(Nd.FONT_DEBUGGER, e, d & 16777215));
        a.set_alpha((d >> 24 & 255) / 255);
        a.set_autoSize(1);
        return a;
      };
      pg.fixSize = function (a) {
        ja.setProperty(a, "width", 11);
        ja.setProperty(a, "height", 11);
        return a;
      };
      function Mn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug._FlxDebugger.GraphicFlixel"] = Mn;
      Mn.__name__ = "flixel.system.debug._FlxDebugger.GraphicFlixel";
      Mn.__super__ = T;
      Mn.prototype = q(T.prototype, {
        __class__: Mn
      });
      function Nn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug._FlxDebugger.GraphicDrawDebug"] = Nn;
      Nn.__name__ = "flixel.system.debug._FlxDebugger.GraphicDrawDebug";
      Nn.__super__ = T;
      Nn.prototype = q(T.prototype, {
        __class__: Nn
      });
      function On(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.GraphicLog"] = On;
      On.__name__ = "flixel.system.debug.GraphicLog";
      On.__super__ = T;
      On.prototype = q(T.prototype, {
        __class__: On
      });
      function Pn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.GraphicStats"] = Pn;
      Pn.__name__ = "flixel.system.debug.GraphicStats";
      Pn.__super__ = T;
      Pn.prototype = q(T.prototype, {
        __class__: Pn
      });
      function Qn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.GraphicWatch"] = Qn;
      Qn.__name__ = "flixel.system.debug.GraphicWatch";
      Qn.__super__ = T;
      Qn.prototype = q(T.prototype, {
        __class__: Qn
      });
      function Rn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.GraphicBitmapLog"] = Rn;
      Rn.__name__ = "flixel.system.debug.GraphicBitmapLog";
      Rn.__super__ = T;
      Rn.prototype = q(T.prototype, {
        __class__: Rn
      });
      function Sn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.GraphicConsole"] = Sn;
      Sn.__name__ = "flixel.system.debug.GraphicConsole";
      Sn.__super__ = T;
      Sn.prototype = q(T.prototype, {
        __class__: Sn
      });
      function Tn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.GraphicArrowLeft"] = Tn;
      Tn.__name__ = "flixel.system.debug.GraphicArrowLeft";
      Tn.__super__ = T;
      Tn.prototype = q(T.prototype, {
        __class__: Tn
      });
      function Un(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.GraphicArrowRight"] = Un;
      Un.__name__ = "flixel.system.debug.GraphicArrowRight";
      Un.__super__ = T;
      Un.prototype = q(T.prototype, {
        __class__: Un
      });
      function jl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.GraphicCloseButton"] = jl;
      jl.__name__ = "flixel.system.debug.GraphicCloseButton";
      jl.__super__ = T;
      jl.prototype = q(T.prototype, {
        __class__: jl
      });
      function kl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.GraphicInteractive"] = kl;
      kl.__name__ = "flixel.system.debug.GraphicInteractive";
      kl.__super__ = T;
      kl.prototype = q(T.prototype, {
        __class__: kl
      });
      function ll() {
        Ua.call(this);
      }
      g["flixel.system.debug.FlxDebugger"] = ll;
      ll.__name__ = "flixel.system.debug.FlxDebugger";
      ll.__super__ = Ua;
      ll.prototype = q(Ua.prototype, {
        __class__: ll
      });
      function ei() {}
      g["flixel.system.debug.Tooltip"] = ei;
      ei.__name__ = "flixel.system.debug.Tooltip";
      ei.add = function (a, b) {
        a = new ml(a, b);
        ei._container.addChild(a);
        ei._tooltips.push(a);
        return a;
      };
      function ml(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        Ua.call(this);
        this.owner = a;
        this.maxSize = new lb(c, d);
        this._shadow = new Nc(new T(1, 2, true, -16777216));
        this._background = new Nc(new T(1, 1, true, -12961222));
        this.textField = pg.createTextField(2, 1);
        this.textField.set_alpha(0.8);
        this.textField.set_text(b);
        this.textField.set_wordWrap(true);
        this.addChild(this._shadow);
        this.addChild(this._background);
        this.addChild(this.textField);
        this.updateSize();
        this.setVisible(false);
        if (this.owner != null) {
          this.owner.addEventListener("mouseOver", m(this, this.handleMouseEvents));
          this.owner.addEventListener("mouseOut", m(this, this.handleMouseEvents));
        }
      }
      g["flixel.system.debug.TooltipOverlay"] = ml;
      ml.__name__ = "flixel.system.debug.TooltipOverlay";
      ml.__super__ = Ua;
      ml.prototype = q(Ua.prototype, {
        setVisible: function (a) {
          this.set_visible(a);
          if (this.get_visible()) {
            this.parent.addChild(this);
            this.ensureOnScreen();
          }
        },
        updateSize: function () {
          this._width = ((this.maxSize.x <= 0 ? this.textField.get_textWidth() : Math.abs(this.maxSize.x)) | 0) + 8;
          this._height = ((this.maxSize.y <= 0 ? this.textField.get_textHeight() : Math.abs(this.maxSize.y)) | 0) + 8;
          this._background.set_scaleX(this._width);
          this._background.set_scaleY(this._height);
          this._shadow.set_scaleX(this._width);
          this._shadow.set_y(this._height);
          this.textField.set_width(this._width);
        },
        ensureOnScreen: function () {
          this.set_x(this.get_x() < 0 ? 0 : this.get_x());
          this.set_y(this.get_y() < 0 ? 0 : this.get_y());
          var a = this.get_x() + this.get_width() >= oa.get_current().stage.stageWidth ? oa.get_current().stage.stageWidth - (this.get_x() + this.get_width()) : 0;
          var b = this.get_y() + this.get_height() >= oa.get_current().stage.stageHeight ? oa.get_current().stage.stageHeight - (this.get_y() + this.get_height()) : 0;
          this.set_x(this.get_x() + a);
          this.set_y(this.get_y() + b);
        },
        handleMouseEvents: function (a) {
          if (a.type != "mouseOver" || this.get_visible()) {
            if (a.type == "mouseOut") {
              this.setVisible(false);
            }
          } else {
            this.set_x(a.stageX + 10);
            this.set_y(a.stageY + 10);
            this.setVisible(true);
          }
        },
        __class__: ml
      });
      function nl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug._Window.GraphicWindowHandle"] = nl;
      nl.__name__ = "flixel.system.debug._Window.GraphicWindowHandle";
      nl.__super__ = T;
      nl.prototype = q(T.prototype, {
        __class__: nl
      });
      function Oe(a, b, c, d, e, f, k, h) {
        if (h == null) {
          h = true;
        }
        if (k == null) {
          k = false;
        }
        if (e == null) {
          e = true;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        Ua.call(this);
        this.minSize = new lb(50, 30);
        this._width = Math.abs(c) | 0;
        this._height = Math.abs(d) | 0;
        this.updateBounds(f);
        this._drag = new lb();
        this._resizable = e;
        this._closable = k;
        this._alwaysOnTop = h;
        this._shadow = new Nc(new T(1, 2, true, -16777216));
        this._background = new Nc(new T(1, 1, true, -580952225));
        this._header = new Nc(new T(1, 15, true, -1157627904));
        this._background.set_y(this._header.get_height());
        this._title = pg.createTextField(2, -1);
        this._title.set_alpha(0.8);
        this._title.set_text(a);
        this.addChild(this._shadow);
        this.addChild(this._background);
        this.addChild(this._header);
        this.addChild(this._title);
        if (b != null) {
          pg.fixSize(b);
          this._icon = new Nc(b);
          this._icon.set_x(5);
          this._icon.set_y(2);
          this._icon.set_alpha(0.8);
          this._title.set_x(this._icon.get_x() + this._icon.get_width() + 2);
          this.addChild(this._icon);
        }
        if (this._resizable) {
          this._handle = new Nc(pg.fixSize(new nl(0, 0)));
          this.addChild(this._handle);
        }
        if (this._closable) {
          this._closeButton = new fi(new jl(0, 0), m(this, this.close));
          this._closeButton.set_alpha(0.8);
          this.addChild(this._closeButton);
        } else {
          this._id = Oe.windowAmount;
          this.loadSaveData();
          Oe.windowAmount++;
        }
        if (this._width != 0 || this._height != 0) {
          this.updateSize();
        }
        this.bound();
        this.addEventListener("enterFrame", m(this, this.init));
      }
      g["flixel.system.debug.Window"] = Oe;
      Oe.__name__ = "flixel.system.debug.Window";
      Oe.__super__ = Ua;
      Oe.prototype = q(Ua.prototype, {
        destroy: function () {
          this._bounds = this.maxSize = this.minSize = null;
          if (this._shadow != null) {
            this.removeChild(this._shadow);
          }
          this._shadow = null;
          if (this._background != null) {
            this.removeChild(this._background);
          }
          this._background = null;
          if (this._header != null) {
            this.removeChild(this._header);
          }
          this._header = null;
          if (this._title != null) {
            this.removeChild(this._title);
          }
          this._title = null;
          if (this._handle != null) {
            this.removeChild(this._handle);
          }
          this._drag = this._handle = null;
          this._closeButton = ca.destroy(this._closeButton);
          var a = oa.get_current().stage;
          if (a.hasEventListener("mouseMove")) {
            a.removeEventListener("mouseMove", m(this, this.onMouseMove));
          }
          if (this.hasEventListener("mouseDown")) {
            this.removeEventListener("mouseDown", m(this, this.onMouseDown));
          }
          if (a.hasEventListener("mouseUp")) {
            a.removeEventListener("mouseUp", m(this, this.onMouseUp));
          }
        },
        resize: function (a, b) {
          this._width = Math.abs(a) | 0;
          this._height = Math.abs(b) | 0;
          this.updateSize();
        },
        reposition: function (a, b) {
          this.set_x(a);
          this.set_y(b);
          this.bound();
        },
        updateBounds: function (a) {
          this._bounds = a;
          this.maxSize = this._bounds != null ? new lb(this._bounds.width, this._bounds.height) : new lb(1.79e+308, 1.79e+308);
        },
        loadSaveData: function () {
          if (h.save.status._hx_index == 1) {
            if (h.save.data.windowSettings == null) {
              this.initWindowsSave();
              h.save.flush();
            }
            this.set_visible(h.save.data.windowSettings[this._id]);
          }
        },
        initWindowsSave: function () {
          var a = [];
          for (var b = 0; b < 10;) {
            b++;
            a.push(true);
          }
          h.save.data.windowSettings = a;
        },
        init: function (a) {
          if (this.stage != null) {
            this.removeEventListener("enterFrame", m(this, this.init));
            this.stage.addEventListener("mouseMove", m(this, this.onMouseMove));
            this.stage.addEventListener("mouseUp", m(this, this.onMouseUp));
            this.addEventListener("mouseDown", m(this, this.onMouseDown));
          }
        },
        onMouseMove: function (a) {
          a = this.get_mouseX() < 0 ? 0 : this.get_mouseX();
          var b = this.get_mouseY() < 0 ? 0 : this.get_mouseY();
          if (this.parent.get_visible()) {
            if (this._dragging) {
              this._overHeader = true;
              this.reposition(this.parent.get_mouseX() - this._drag.x, this.parent.get_mouseY() - this._drag.y);
            } else if (this._resizing) {
              this._overHandle = true;
              this.resize(a - this._drag.x, b - this._drag.y);
            } else if (a >= 0 && a <= this._width && b >= 0 && b <= this._height) {
              this._overHeader = a <= this._header.get_width() && b <= this._header.get_height();
              if (this._resizable) {
                this._overHandle = a >= this._width - this._handle.get_width() && b >= this._height - this._handle.get_height();
              }
            } else {
              this._overHandle = this._overHeader = false;
            }
          } else {
            this._overHandle = this._overHeader = false;
          }
        },
        onMouseDown: function (a) {
          if (this._overHeader) {
            if (this._alwaysOnTop) {
              this.parent.addChild(this);
            }
            this._dragging = true;
            this._drag.x = this.get_mouseX();
            this._drag.y = this.get_mouseY();
          } else if (this._overHandle) {
            if (this._alwaysOnTop) {
              this.parent.addChild(this);
            }
            this._resizing = true;
            a = this._width;
            var b = this.get_mouseX();
            this._drag.x = a - b;
            a = this._height;
            b = this.get_mouseY();
            this._drag.y = a - b;
          }
        },
        onMouseUp: function (a) {
          this._resizing = this._dragging = false;
        },
        bound: function () {
          if (this._bounds != null) {
            var a = this.get_x();
            var b = this._bounds.get_left();
            var c = this._bounds.get_right() - this._width;
            a = b != null && a < b ? b : a;
            this.set_x(c != null && a > c ? c : a);
            a = this.get_y();
            b = this._bounds.get_top();
            c = this._bounds.get_bottom() - this._height;
            a = b != null && a < b ? b : a;
            this.set_y(c != null && a > c ? c : a);
          }
        },
        updateSize: function () {
          var a = this._width;
          var b = this.minSize.x;
          var c = this.maxSize.x;
          a = b != null && a < b ? b : a;
          this._width = (c != null && a > c ? c : a) | 0;
          a = this._height;
          b = this.minSize.y;
          c = this.maxSize.y;
          a = b != null && a < b ? b : a;
          this._height = (c != null && a > c ? c : a) | 0;
          this._header.set_scaleX(this._width);
          this._background.set_scaleX(this._width);
          this._background.set_scaleY(this._height - this._header.get_height());
          this._shadow.set_scaleX(this._width);
          this._shadow.set_y(this._height);
          this._title.set_width(this._width - 4);
          if (this._resizable) {
            this._handle.set_x(this._width - this._handle.get_width());
            this._handle.set_y(this._height - this._handle.get_height());
          }
          if (this._closeButton != null) {
            this._closeButton.set_x(this._width - this._closeButton.get_width() - 3);
            this._closeButton.set_y(3);
          }
        },
        close: function () {
          this.destroy();
        },
        __class__: Oe
      });
      function Vn(a) {
        this._flixelPointer = new ed();
        this._debuggerInteraction = false;
        this._keysUp = new wc();
        this._keysDown = new wc();
        this._turn = 2;
        this._tools = [];
        this.macKeyboard = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent) || /Mac/.test(navigator.platform);
        this.shouldDrawItemsSelection = true;
        this.pointerJustPressed = this.pointerJustReleased = this.pointerPressed = false;
        var b = 0;
        var c = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        c = W.pool.get().set(b, c);
        c._inPool = false;
        this.flixelPointer = c;
        this.selectedItems = new Qa();
        Oe.call(this, "Tools", new kl(0, 0), 40, 25, false);
        this.reposition(2, 100);
        this._container = a;
        this._customCursor = new Ua();
        this._customCursor.mouseEnabled = false;
        this._container.addChild(this._customCursor);
        this.addTool(new ol());
        this.addTool(new pl());
        this.addTool(new ql());
        this.addTool(new rl());
        this.addTool(new sl());
        h.signals.postDraw.add(m(this, this.postDraw));
        h.debugger.visibilityChanged.add(m(this, this.handleDebuggerVisibilityChanged));
        oa.get_current().stage.addEventListener("mouseMove", m(this, this.updateMouse));
        oa.get_current().stage.addEventListener("mouseDown", m(this, this.handleMouseClick));
        oa.get_current().stage.addEventListener("mouseUp", m(this, this.handleMouseClick));
        oa.get_current().stage.addEventListener("keyDown", m(this, this.handleKeyEvent));
        oa.get_current().stage.addEventListener("keyUp", m(this, this.handleKeyEvent));
        this._container.addEventListener("mouseOver", m(this, this.handleMouseInDebugger));
        this._container.addEventListener("mouseOut", m(this, this.handleMouseInDebugger));
      }
      g["flixel.system.debug.interaction.Interaction"] = Vn;
      Vn.__name__ = "flixel.system.debug.interaction.Interaction";
      Vn.__super__ = Oe;
      Vn.prototype = q(Oe.prototype, {
        handleDebuggerVisibilityChanged: function () {
          if (h.debugger.visible) {
            this.saveSystemCursorInfo();
          } else {
            this.restoreSystemCursor();
          }
        },
        updateMouse: function (a) {
          if (a.stageX != null && a.stageY != null) {
            var b = 0;
            var c = 0;
            if (this.activeTool != null) {
              var d = this.activeTool.cursor;
              if (d != null) {
                b = d.width / h.scaleMode.scale.x / 2;
                c = d.height / h.scaleMode.scale.y / 2;
              }
            }
            this._customCursor.set_x(a.stageX + b);
            this._customCursor.set_y(a.stageY + c);
            d = this._flixelPointer;
            d._globalScreenX = a.stageX / h.scaleMode.scale.x | 0;
            d._globalScreenY = a.stageY / h.scaleMode.scale.y | 0;
            d.updatePositions();
            this.flixelPointer.set_x(this._flixelPointer.x + b);
            this.flixelPointer.set_y(this._flixelPointer.y + c);
          }
        },
        handleMouseClick: function (a) {
          if (a.type != "mouseDown" || !this.belongsToDebugger(a.target)) {
            this.pointerJustPressed = a.type == "mouseDown";
            this.pointerJustReleased = a.type == "mouseUp";
            if (this.pointerJustPressed) {
              this.pointerPressed = true;
            } else if (this.pointerJustReleased) {
              this.pointerPressed = false;
            }
          }
        },
        belongsToDebugger: function (a) {
          if (a == null) {
            return false;
          } else if (a instanceof ll) {
            return true;
          } else {
            return this.belongsToDebugger(a.parent);
          }
        },
        handleMouseInDebugger: function (a) {
          if (this.isActive()) {
            if (a.type == "mouseOver") {
              this._debuggerInteraction = true;
            } else if (a.type == "mouseOut") {
              this._debuggerInteraction = false;
            }
            a.stopPropagation();
          }
        },
        handleKeyEvent: function (a) {
          if (a.type == "keyDown") {
            this._keysDown.h[a.keyCode] = true;
          } else if (a.type == "keyUp") {
            this._keysDown.h[a.keyCode] = false;
            this._keysUp.h[a.keyCode] = this._turn;
          }
        },
        countToolsWithUIButton: function () {
          var a = 0;
          for (var b = 0, c = this._tools; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.button != null) {
              ++a;
            }
          }
          return a;
        },
        addTool: function (a) {
          a.init(this);
          this._tools.push(a);
          a = a.button;
          if (a != null) {
            var b = this.countToolsWithUIButton();
            var c = Math.ceil(b / 2);
            a.set_x(10 + (b - 1) % 2 * 25);
            a.set_y(c * 20);
            this.addChild(a);
            this.resize(Math.min(b, 2) * 25 + 10, Math.ceil(b / 2) * 25 + 10);
          }
        },
        destroy: function () {
          h.signals.postDraw.remove(m(this, this.postDraw));
          h.debugger.visibilityChanged.remove(m(this, this.handleDebuggerVisibilityChanged));
          oa.get_current().stage.removeEventListener("mouseMove", m(this, this.updateMouse));
          oa.get_current().stage.removeEventListener("mouseDown", m(this, this.handleMouseClick));
          oa.get_current().stage.removeEventListener("mouseUp", m(this, this.handleMouseClick));
          oa.get_current().stage.removeEventListener("keyDown", m(this, this.handleKeyEvent));
          oa.get_current().stage.removeEventListener("keyUp", m(this, this.handleKeyEvent));
          if (this._container != null) {
            this._container.removeEventListener("mouseOver", m(this, this.handleMouseInDebugger));
            this._container.removeEventListener("mouseOut", m(this, this.handleMouseInDebugger));
          }
          if (this._customCursor != null) {
            this._customCursor.parent.removeChild(this._customCursor);
            this._customCursor = null;
          }
          this._tools = ca.destroyArray(this._tools);
          this.selectedItems = ca.destroy(this.selectedItems);
          this.flixelPointer = ca.destroy(this.flixelPointer);
          this._keysUp = this._keysDown = null;
        },
        isActive: function () {
          if (h.debugger.visible) {
            return this.get_visible();
          } else {
            return false;
          }
        },
        postDraw: function () {
          if (this.isActive()) {
            for (var a = 0, b = this._tools; a < b.length;) {
              var c = b[a];
              ++a;
              c.draw();
            }
            if (this.shouldDrawItemsSelection) {
              this.drawItemsSelection();
            }
          }
        },
        getDebugGraphics: function () {
          if (h.renderBlit) {
            Hc.flashGfx.clear();
            return Hc.flashGfx;
          } else {
            return null;
          }
        },
        drawItemsSelection: function () {
          var a = this.getDebugGraphics();
          if (a != null) {
            for (var b = new tc(this.selectedItems.members, null); b.hasNext();) {
              var c = b.next();
              if (c != null && c.scrollFactor != null && c.isOnScreen()) {
                var d = h.camera.scroll;
                a.lineStyle(1, 16777215, 0.75);
                a.drawRect(c.x - d.x - 0.5, c.y - d.y - 0.5, c.get_width() + 1, c.get_height() + 1);
              }
            }
            if (h.renderBlit) {
              h.camera.buffer.draw(Hc.flashGfxSprite);
            }
          }
        },
        registerCustomCursor: function (a, b) {
          if (b != null) {
            var c = new Ua();
            c.set_visible(false);
            c.set_name(a);
            c.addChild(new Nc(b));
            this._customCursor.addChild(c);
          }
        },
        updateCustomCursors: function () {
          if (this.activeTool == null || this._debuggerInteraction) {
            h.mouse.set_useSystemCursor(true);
          } else if (this.activeTool.cursor != null) {
            var a = this.activeTool.cursorInUse == "" ? this.activeTool.getName() : this.activeTool.cursorInUse;
            for (var b = 0, c = this._customCursor.get_numChildren(); b < c;) {
              var d = b++;
              d = this._customCursor.getChildAt(d);
              d.set_visible(d.get_name() == a);
            }
            if (h.mouse.visible) {
              h.mouse.set_visible(false);
            }
          } else {
            h.mouse.set_useSystemCursor(true);
          }
        },
        saveSystemCursorInfo: function () {
          this._wasMouseVisible = h.mouse.visible;
          this._wasUsingSystemCursor = h.mouse.useSystemCursor;
        },
        restoreSystemCursor: function () {
          h.mouse.set_useSystemCursor(this._wasUsingSystemCursor);
          h.mouse.set_visible(this._wasMouseVisible);
          this._customCursor.set_visible(false);
        },
        setActiveTool: function (a) {
          if (this.activeTool != null) {
            this.activeTool.deactivate();
            this.activeTool.button.set_toggled(true);
          }
          if (this.activeTool == a) {
            a = null;
          }
          this.activeTool = a;
          if (this.activeTool != null) {
            this.setToolsCursorVisibility(true);
            this.activeTool.button.set_toggled(false);
            this.activeTool.activate();
            this.updateCustomCursors();
          } else {
            this.setSystemCursorVisibility(true);
          }
          h.mouse.enabled = !this.isInUse();
        },
        setSystemCursorVisibility: function (a) {
          h.mouse.set_useSystemCursor(a);
          this._customCursor.set_visible(!a);
        },
        setToolsCursorVisibility: function (a) {
          h.mouse.set_useSystemCursor(false);
          this._customCursor.set_visible(a);
          if (!a) {
            a = 0;
            for (var b = this._customCursor.get_numChildren(); a < b;) {
              var c = a++;
              this._customCursor.getChildAt(c).set_visible(false);
            }
          }
        },
        keyPressed: function (a) {
          return this._keysDown.h[a];
        },
        isInUse: function () {
          if (h.debugger.visible && this.get_visible()) {
            return this.activeTool != null;
          } else {
            return false;
          }
        },
        __class__: Vn
      });
      function Wn(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.interaction.tools._Eraser.GraphicEraserTool"] = Wn;
      Wn.__name__ = "flixel.system.debug.interaction.tools._Eraser.GraphicEraserTool";
      Wn.__super__ = T;
      Wn.prototype = q(T.prototype, {
        __class__: Wn
      });
      function Pc() {
        this._name = "(Unknown tool)";
        this.cursorInUse = "";
        Ua.call(this);
      }
      g["flixel.system.debug.interaction.tools.Tool"] = Pc;
      Pc.__name__ = "flixel.system.debug.interaction.tools.Tool";
      Pc.__interfaces__ = [rb];
      Pc.__super__ = Ua;
      Pc.prototype = q(Ua.prototype, {
        init: function (a) {
          this._brain = a;
          return this;
        },
        draw: function () {},
        activate: function () {},
        deactivate: function () {},
        destroy: function () {},
        isActive: function () {
          if (this._brain.activeTool == this) {
            return this._brain.get_visible();
          } else {
            return false;
          }
        },
        setButton: function (a) {
          this.button = new fi(yb.createInstance(a, [0, 0]), m(this, this.onButtonClicked), true);
          this.button.set_toggled(true);
          a = this._name;
          if (this._shortcut != null) {
            a += " (" + this._shortcut + ")";
          }
          ei.add(this.button, a);
        },
        setCursor: function (a) {
          this.cursor = a;
          this._brain.registerCustomCursor(this._name, this.cursor);
        },
        onButtonClicked: function () {
          this._brain.setActiveTool(this);
        },
        getName: function () {
          return this._name;
        },
        __class__: Pc
      });
      function ql() {
        Pc.call(this);
      }
      g["flixel.system.debug.interaction.tools.Eraser"] = ql;
      ql.__name__ = "flixel.system.debug.interaction.tools.Eraser";
      ql.__super__ = Pc;
      ql.prototype = q(Pc.prototype, {
        init: function (a) {
          Pc.prototype.init.call(this, a);
          this._name = "Eraser";
          return this;
        },
        activate: function () {
          this.doDeletion(this._brain.keyPressed(16));
          this._brain.setActiveTool(null);
        },
        doDeletion: function (a) {
          var b = this._brain.selectedItems;
          if (b != null) {
            this.findAndDelete(b, a);
            b.clear();
          }
        },
        findAndDelete: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (a = new tc(a.members, null); a.hasNext();) {
            var c = a.next();
            if (c != null && !(c instanceof Qa)) {
              c.kill();
              if (b) {
                this.removeFromMemory(c, h.game._state);
              }
            }
          }
        },
        removeFromMemory: function (a, b) {
          for (var c = 0, d = b.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              if (e instanceof Qa) {
                this.removeFromMemory(a, e);
              } else if (e == a) {
                b.remove(e);
              }
            }
          }
        },
        __class__: ql
      });
      function uj(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.interaction.tools._Mover.GraphicMoverTool"] = uj;
      uj.__name__ = "flixel.system.debug.interaction.tools._Mover.GraphicMoverTool";
      uj.__super__ = T;
      uj.prototype = q(T.prototype, {
        __class__: uj
      });
      function pl() {
        Pc.call(this);
      }
      g["flixel.system.debug.interaction.tools.Mover"] = pl;
      pl.__name__ = "flixel.system.debug.interaction.tools.Mover";
      pl.__super__ = Pc;
      pl.prototype = q(Pc.prototype, {
        init: function (a) {
          Pc.prototype.init.call(this, a);
          var b = a.flixelPointer.x;
          var c = a.flixelPointer.x;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = W.pool.get().set(b, c);
          b._inPool = false;
          this._lastCursorPosition = b;
          this._name = "Mover";
          this._shortcut = a.macKeyboard ? "" : "Ctrl";
          this.setButton(uj);
          this.setCursor(new uj(0, 0));
          return this;
        },
        __class__: pl
      });
      function gi(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.interaction.tools.GraphicCursorCross"] = gi;
      gi.__name__ = "flixel.system.debug.interaction.tools.GraphicCursorCross";
      gi.__super__ = T;
      gi.prototype = q(T.prototype, {
        __class__: gi
      });
      function ol() {
        this._selectionArea = new Ha();
        this._selectionHappening = false;
        Pc.call(this);
      }
      g["flixel.system.debug.interaction.tools.Pointer"] = ol;
      ol.__name__ = "flixel.system.debug.interaction.tools.Pointer";
      ol.__super__ = Pc;
      ol.prototype = q(Pc.prototype, {
        init: function (a) {
          Pc.prototype.init.call(this, a);
          this._name = "Pointer";
          this.setButton(gi);
          this.setCursor(new gi(0, 0));
          return this;
        },
        draw: function () {
          var a = this._brain.getDebugGraphics();
          if (a != null) {
            if (this._selectionHappening) {
              a.lineStyle(0.9, 12255232);
              a.drawRect(this._selectionArea.x - h.camera.scroll.x, this._selectionArea.y - h.camera.scroll.y, this._selectionArea.width, this._selectionArea.height);
            }
            if (h.renderBlit) {
              h.camera.buffer.draw(Hc.flashGfxSprite);
            }
          }
        },
        __class__: ol
      });
      function tl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.interaction.tools._ToggleBounds.GraphicToggleBoundsTool"] = tl;
      tl.__name__ = "flixel.system.debug.interaction.tools._ToggleBounds.GraphicToggleBoundsTool";
      tl.__super__ = T;
      tl.prototype = q(T.prototype, {
        __class__: tl
      });
      function sl() {
        Pc.call(this);
      }
      g["flixel.system.debug.interaction.tools.ToggleBounds"] = sl;
      sl.__name__ = "flixel.system.debug.interaction.tools.ToggleBounds";
      sl.__super__ = Pc;
      sl.prototype = q(Pc.prototype, {
        init: function (a) {
          Pc.prototype.init.call(this, a);
          this._name = "Toggle Debug Draw";
          this.setButton(tl);
          this.button.toggleMode = false;
          return this;
        },
        onButtonClicked: function () {},
        __class__: sl
      });
      function ul(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.interaction.tools._Transform.GraphicTransformTool"] = ul;
      ul.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformTool";
      ul.__super__ = T;
      ul.prototype = q(T.prototype, {
        __class__: ul
      });
      function vl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorDefault"] = vl;
      vl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorDefault";
      vl.__super__ = T;
      vl.prototype = q(T.prototype, {
        __class__: vl
      });
      function wl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleY"] = wl;
      wl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleY";
      wl.__super__ = T;
      wl.prototype = q(T.prototype, {
        __class__: wl
      });
      function xl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleX"] = xl;
      xl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleX";
      xl.__super__ = T;
      xl.prototype = q(T.prototype, {
        __class__: xl
      });
      function yl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleXY"] = yl;
      yl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleXY";
      yl.__super__ = T;
      yl.prototype = q(T.prototype, {
        __class__: yl
      });
      function zl(a, b, c, d) {
        T.call(this, a, b, c, d);
      }
      g["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorRotate"] = zl;
      zl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorRotate";
      zl.__super__ = T;
      zl.prototype = q(T.prototype, {
        __class__: zl
      });
      function rl() {
        this._markers = [];
        Pc.call(this);
      }
      g["flixel.system.debug.interaction.tools.Transform"] = rl;
      rl.__name__ = "flixel.system.debug.interaction.tools.Transform";
      rl.__super__ = Pc;
      rl.prototype = q(Pc.prototype, {
        init: function (a) {
          var b = this;
          Pc.prototype.init.call(this, a);
          this._name = "Transform";
          this.setButton(ul);
          this.setCursor(new vl(0, 0));
          a.registerCustomCursor("transformRotate", new zl(0, 0));
          a.registerCustomCursor("transformScaleX", new xl(0, 0));
          a.registerCustomCursor("transformScaleY", new wl(0, 0));
          a.registerCustomCursor("transformScaleXY", new yl(0, 0));
          this._tooltip = ei.add(null, "");
          this._tooltip.textField.set_wordWrap(false);
          a = this._markers;
          var c = 0;
          var d = 0;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          d = W.pool.get().set(c, d);
          d._inPool = false;
          a.push(d);
          a = this._markers;
          d = c = 0;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          d = W.pool.get().set(c, d);
          d._inPool = false;
          a.push(d);
          a = this._markers;
          d = c = 0;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          d = W.pool.get().set(c, d);
          d._inPool = false;
          a.push(d);
          a = this._markers;
          d = c = 0;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          d = W.pool.get().set(c, d);
          d._inPool = false;
          a.push(d);
          this.stopAction();
          h.signals.preStateSwitch.add(function () {
            b._target = null;
          });
          return this;
        },
        stopAction: function () {
          this._actionHappening = false;
          this._actionMarker = -1;
          this._tooltip.setVisible(false);
        },
        drawTargetAreaOutline: function (a) {
          a.lineStyle(0.9, -65281, 1, false, 2, 2);
          a.moveTo(this._markers[0].x, this._markers[0].y);
          for (var b = 0, c = this._markers.length; b < c;) {
            var d = b++;
            a.lineTo(this._markers[d].x, this._markers[d].y);
          }
          a.lineTo(this._markers[0].x, this._markers[0].y);
        },
        drawMarkers: function (a) {
          a.lineStyle(0.9, -65281, 1, false, 2, 2);
          a.beginFill(-65281);
          for (var b = 0, c = this._markers.length; b < c;) {
            var d = b++;
            if (d == 0) {
              a.drawCircle(this._markers[d].x, this._markers[d].y, 2.7);
            } else {
              a.drawRect(this._markers[d].x - 1.5, this._markers[d].y - 1.5, 3, 3);
            }
          }
          a.endFill();
        },
        draw: function () {
          var a = this._brain.getDebugGraphics();
          if (a != null && this._target != null && this.isActive()) {
            this.drawTargetAreaOutline(a);
            this.drawMarkers(a);
            if (h.renderBlit) {
              h.camera.buffer.draw(Hc.flashGfxSprite);
            }
          }
        },
        activate: function () {
          this._target = null;
          if (this._brain.selectedItems.length != 0) {
            for (var a = new tc(this._brain.selectedItems.members, null); a.hasNext();) {
              var b = a.next();
              if (b != null && b.scrollFactor != null && b.isOnScreen()) {
                this._target = b;
                break;
              }
            }
            this._brain.shouldDrawItemsSelection = false;
          }
        },
        deactivate: function () {
          this._brain.shouldDrawItemsSelection = true;
        },
        __class__: rl
      });
      function xa(a, b, c, d, e, f, k, h, n, g) {
        if (g == null) {
          g = false;
        }
        if (h == null) {
          h = false;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = 12;
        }
        if (b == null) {
          b = "FFFFFF";
        }
        if (a == null) {
          a = "";
        }
        this.throwException = false;
        this.prefix = a;
        this.color = b;
        this.size = c;
        this.bold = d;
        this.italic = e;
        this.underlined = f;
        this.errorSound = k;
        this.openConsole = h;
        this.callbackFunction = n;
        this.throwException = g;
      }
      g["flixel.system.debug.log.LogStyle"] = xa;
      xa.__name__ = "flixel.system.debug.log.LogStyle";
      xa.prototype = {
        toLogString: function (a) {
          var b = [];
          for (var c = 0, d = a.length; c < d;) {
            var e = c++;
            e = a[e] == null ? "null" : v.string(a[e]);
            b.push(w.htmlEscape(e));
          }
          return this.prefix + b.join(" ");
        },
        __class__: xa
      };
      function vj(a, b, c, d, e, f, k, h) {
        Oe.call(this, a, b, c, d, e, f, k, h);
      }
      g["flixel.system.debug.watch.Watch"] = vj;
      vj.__name__ = "flixel.system.debug.watch.Watch";
      vj.__super__ = Oe;
      vj.prototype = q(Oe.prototype, {
        __class__: vj
      });
      function Xn(a, b, c, d, e, f, k, h) {
        Oe.call(this, a, b, c, d, e, f, k, h);
      }
      g["flixel.system.debug.watch.Tracker"] = Xn;
      Xn.__name__ = "flixel.system.debug.watch.Tracker";
      Xn.__super__ = vj;
      Xn.prototype = q(vj.prototype, {
        __class__: Xn
      });
      function wn() {
        this.drawOnTop = false;
        this.list = [];
        this.addPlugin(Ec.globalManager = new Al());
        this.addPlugin(Da.globalManager = new Bl());
        this.addPlugin(el.globalManager = new fl());
      }
      g["flixel.system.frontEnds.PluginFrontEnd"] = wn;
      wn.__name__ = "flixel.system.frontEnds.PluginFrontEnd";
      wn.prototype = {
        addPlugin: function (a) {
          this.list.push(a);
          return a;
        },
        __class__: wn
      };
      function yn() {
        this.volume = 1;
        this.list = new Qa();
        this.defaultSoundGroup = new hl();
        this.defaultMusicGroup = new hl();
        this.soundTrayEnabled = true;
        this.muteKeys = [48, 96];
        this.volumeDownKeys = [189, 109];
        this.volumeUpKeys = [187, 107];
        this.muted = false;
        this.loadSavedPrefs();
      }
      g["flixel.system.frontEnds.SoundFrontEnd"] = yn;
      yn.__name__ = "flixel.system.frontEnds.SoundFrontEnd";
      yn.prototype = {
        playMusic: function (a, b, c, d) {
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = 1;
          }
          if (d == null) {
            d = this.defaultMusicGroup;
          }
          if (this.music == null) {
            this.music = new Zd();
          } else if (this.music.active) {
            var e = this.music;
            e.cleanup(e.autoDestroy, true);
          }
          this.music.loadEmbedded(a, c);
          this.music.set_volume(b);
          this.music.persist = true;
          d.add(this.music);
          this.music.play();
        },
        load: function (a, b, c, d, e, f, k, t, n) {
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 1;
          }
          if (a == null && k == null) {
            h.log.advanced("FlxG.sound.load() requires either\nan embedded sound or a URL to work.", xa.WARNING, true);
            return null;
          }
          var g = this.list.recycle(Zd);
          if (a != null) {
            g.loadEmbedded(a, c, e, t);
            this.loadHelper(g, b, d, f);
            if (n != null && g._sound != null) {
              n();
            }
          } else {
            a = n;
            if (f) {
              a = function () {
                g.play();
                if (n != null) {
                  n();
                }
              };
            }
            g.loadStream(k, c, e, t, a);
            this.loadHelper(g, b, d);
          }
          return g;
        },
        loadHelper: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = this.defaultSoundGroup;
          }
          a.set_volume(b);
          c.add(a);
          if (d) {
            a.play();
          }
          return a;
        },
        play: function (a, b, c, d, e, f) {
          if (e == null) {
            e = true;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 1;
          }
          if (typeof a == "string") {
            if (Q.exists(a, "SOUND") || Q.exists(a, "MUSIC")) {
              a = Q.getSound(a, true);
            } else {
              h.log.advanced("Could not find a Sound asset with an ID of '" + a + "'.", xa.ERROR, true);
              a = null;
            }
          }
          a = this.list.recycle(Zd).loadEmbedded(a, c, e, f);
          return this.loadHelper(a, b, d, true);
        },
        pause: function () {
          if (this.music != null && this.music.exists && this.music.active) {
            this.music.pause();
          }
          for (var a = 0, b = this.list.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.exists && c.active) {
              c.pause();
            }
          }
        },
        destroy: function (a) {
          if (a == null) {
            a = false;
          }
          if (this.music != null && (!!a || !this.music.persist)) {
            this.music.destroy();
            this.music = null;
          }
          for (var b = 0, c = this.list.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && (!!a || !d.persist)) {
              d.destroy();
            }
          }
        },
        toggleMuted: function () {
          this.muted = !this.muted;
          if (this.volumeHandler != null) {
            this.volumeHandler(this.muted ? 0 : this.volume);
          }
          this.showSoundTray(true);
        },
        changeVolume: function (a) {
          this.muted = false;
          this.set_volume(this.volume + a);
          this.showSoundTray(a > 0);
        },
        showSoundTray: function (a) {
          if (a == null) {
            a = false;
          }
          if (h.game.soundTray != null && this.soundTrayEnabled) {
            h.game.soundTray.show(a);
          }
        },
        update: function (a) {
          if (this.music != null && this.music.active) {
            this.music.update(a);
          }
          if (this.list != null && this.list.active) {
            this.list.update(a);
          }
          if (h.keys.checkKeyArrayState(this.muteKeys, -1)) {
            this.toggleMuted();
          } else if (h.keys.checkKeyArrayState(this.volumeUpKeys, -1)) {
            this.changeVolume(0.1);
          } else if (h.keys.checkKeyArrayState(this.volumeDownKeys, -1)) {
            this.changeVolume(-0.1);
          }
        },
        onFocusLost: function () {
          if (this.music != null) {
            this.music.onFocusLost();
          }
          for (var a = 0, b = this.list.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.onFocusLost();
            }
          }
        },
        onFocus: function () {
          if (this.music != null) {
            this.music.onFocus();
          }
          for (var a = 0, b = this.list.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.onFocus();
            }
          }
        },
        loadSavedPrefs: function () {
          if (h.save.status._hx_index == 1) {
            if (h.save.data.volume != null) {
              this.set_volume(h.save.data.volume);
            }
            if (h.save.data.mute != null) {
              this.muted = h.save.data.mute;
            }
          }
        },
        set_volume: function (a) {
          a = a < 0 ? 0 : a;
          a = a > 1 ? 1 : a;
          if (this.volumeHandler != null) {
            this.volumeHandler(this.muted ? 0 : a);
          }
          return this.volume = a;
        },
        __class__: yn,
        __properties__: {
          set_volume: "set_volume"
        }
      };
      function xn() {
        this.paused = this.stepRequested = false;
      }
      g["flixel.system.frontEnds.VCRFrontEnd"] = xn;
      xn.__name__ = "flixel.system.frontEnds.VCRFrontEnd";
      xn.prototype = {
        __class__: xn
      };
      function Ek() {
        this.silent = false;
        this.volumeUpSound = this.volumeDownSound = "flixel/sounds/beep";
        this._defaultScale = 2;
        this._width = 80;
        Ua.call(this);
        this.set_visible(false);
        this.set_scaleX(this._defaultScale);
        this.set_scaleY(this._defaultScale);
        var a = new Nc(new T(this._width, 30, true, 2130706432));
        this.screenCenter();
        this.addChild(a);
        var b = new Wc();
        b.set_width(a.get_width());
        b.set_height(a.get_height());
        b.set_multiline(true);
        b.set_wordWrap(true);
        b.set_selectable(false);
        a = new ld(Nd.FONT_DEFAULT, 10, 16777215);
        a.align = 0;
        b.set_defaultTextFormat(a);
        this.addChild(b);
        b.set_text("VOLUME");
        b.set_y(16);
        b = 10;
        var c = 14;
        this._bars = [];
        for (var d = 0; d < 10;) {
          a = d++;
          a = new Nc(new T(4, a + 1, false, -1));
          a.set_x(b);
          a.set_y(c);
          this.addChild(a);
          this._bars.push(a);
          b += 6;
          --c;
        }
        this.set_y(-this.get_height());
        this.set_visible(false);
      }
      g["flixel.system.ui.FlxSoundTray"] = Ek;
      Ek.__name__ = "flixel.system.ui.FlxSoundTray";
      Ek.__super__ = Ua;
      Ek.prototype = q(Ua.prototype, {
        update: function (a) {
          if (this._timer > 0) {
            this._timer -= a / 1000;
          } else if (this.get_y() > -this.get_height()) {
            this.set_y(this.get_y() - a / 1000 * this.get_height() * 0.5);
            if (this.get_y() <= -this.get_height()) {
              this.set_visible(false);
              this.active = false;
              if (h.save.status._hx_index == 1) {
                h.save.data.mute = h.sound.muted;
                h.save.data.volume = h.sound.volume;
                h.save.flush();
              }
            }
          }
        },
        show: function (a) {
          if (a == null) {
            a = false;
          }
          if (!this.silent) {
            a = Nd.getSound(a ? this.volumeUpSound : this.volumeDownSound);
            if (a != null) {
              h.sound.load(a).play();
            }
          }
          this._timer = 1;
          this.set_y(0);
          this.set_visible(true);
          this.active = true;
          a = Math.round(h.sound.volume * 10);
          if (h.sound.muted) {
            a = 0;
          }
          for (var b = 0, c = this._bars.length; b < c;) {
            var d = b++;
            if (d < a) {
              this._bars[d].set_alpha(1);
            } else {
              this._bars[d].set_alpha(0.5);
            }
          }
        },
        screenCenter: function () {
          this.set_scaleX(this._defaultScale);
          this.set_scaleY(this._defaultScale);
          this.set_x((oa.get_current().stage.stageWidth - this._width * this._defaultScale) * 0.5 - h.game.get_x());
        },
        __class__: Ek
      });
      function fi(a, b, c) {
        if (c == null) {
          c = false;
        }
        this.toggleMode = this.toggled = this._mouseDown = false;
        this.enabled = true;
        Ua.call(this);
        if (a != null) {
          this.changeIcon(a);
        }
        this.upHandler = b;
        this.toggleMode = c;
        this.addEventListener("mouseUp", m(this, this.onMouseUp));
        this.addEventListener("mouseDown", m(this, this.onMouseDown));
        this.addEventListener("mouseOut", m(this, this.onMouseOut));
        this.addEventListener("mouseOver", m(this, this.onMouseOver));
      }
      g["flixel.system.ui.FlxSystemButton"] = fi;
      fi.__name__ = "flixel.system.ui.FlxSystemButton";
      fi.__interfaces__ = [rb];
      fi.__super__ = Ua;
      fi.prototype = q(Ua.prototype, {
        changeIcon: function (a) {
          if (this._icon != null) {
            this.removeChild(this._icon);
          }
          pg.fixSize(a);
          this._icon = new Nc(a);
          this.addChild(this._icon);
        },
        destroy: function () {
          this.removeEventListener("mouseUp", m(this, this.onMouseUp));
          this.removeEventListener("mouseDown", m(this, this.onMouseDown));
          this.removeEventListener("mouseOut", m(this, this.onMouseOut));
          this.removeEventListener("mouseOver", m(this, this.onMouseOver));
          this.upHandler = this._icon = null;
        },
        onMouseUp: function (a) {
          if (this.enabled && this._mouseDown) {
            this.set_toggled(!this.toggled);
            this._mouseDown = false;
            if (this.upHandler != null) {
              this.upHandler();
            }
          }
        },
        onMouseDown: function (a) {
          this._mouseDown = true;
        },
        onMouseOver: function (a) {
          if (this.enabled) {
            this.set_alpha(this.get_alpha() - 0.2);
          }
        },
        onMouseOut: function (a) {
          if (this.enabled) {
            this.set_alpha(this.get_alpha() + 0.2);
          }
        },
        set_toggled: function (a) {
          if (this.toggleMode) {
            this.set_alpha(a ? 0.3 : 1);
          }
          return this.toggled = a;
        },
        __class__: fi,
        __properties__: q(Ua.prototype.__properties__, {
          set_toggled: "set_toggled"
        })
      });
      function $o(a, b, c, d, e) {
        this.format = new ld(null, null, a, b, c, e);
        this.borderColor = d == null ? 0 : d;
      }
      g["flixel.text.FlxTextFormat"] = $o;
      $o.__name__ = "flixel.text.FlxTextFormat";
      $o.prototype = {
        __class__: $o
      };
      function ap(a, b, c) {
        this.range = new Yn(b, c);
        this.format = a;
      }
      g["flixel.text._FlxText.FlxTextFormatRange"] = ap;
      ap.__name__ = "flixel.text._FlxText.FlxTextFormatRange";
      ap.prototype = {
        __class__: ap
      };
      var Sa = z["flixel.text.FlxTextBorderStyle"] = {
        __ename__: "flixel.text.FlxTextBorderStyle",
        __constructs__: null,
        NONE: {
          _hx_name: "NONE",
          _hx_index: 0,
          __enum__: "flixel.text.FlxTextBorderStyle",
          toString: p
        },
        SHADOW: {
          _hx_name: "SHADOW",
          _hx_index: 1,
          __enum__: "flixel.text.FlxTextBorderStyle",
          toString: p
        },
        OUTLINE: {
          _hx_name: "OUTLINE",
          _hx_index: 2,
          __enum__: "flixel.text.FlxTextBorderStyle",
          toString: p
        },
        OUTLINE_FAST: {
          _hx_name: "OUTLINE_FAST",
          _hx_index: 3,
          __enum__: "flixel.text.FlxTextBorderStyle",
          toString: p
        }
      };
      Sa.__constructs__ = [Sa.NONE, Sa.SHADOW, Sa.OUTLINE, Sa.OUTLINE_FAST];
      var Dn = {
        fromOpenFL: function (a) {
          switch (a) {
            case 0:
              return "center";
            case 2:
              return "justify";
            case 3:
              return "left";
            case 4:
              return "right";
            default:
              return "left";
          }
        },
        toOpenFL: function (a) {
          switch (a) {
            case "center":
              return 0;
            case "justify":
              return 2;
            case "left":
              return 3;
            case "right":
              return 4;
            default:
              return 3;
          }
        }
      };
      function Zn() {
        this._tileObjects = [];
        $b.call(this);
        this.flixelType = 3;
        this.set_immovable(true);
        this.set_moves(false);
      }
      g["flixel.tile.FlxBaseTilemap"] = Zn;
      Zn.__name__ = "flixel.tile.FlxBaseTilemap";
      Zn.__super__ = $b;
      Zn.prototype = q($b.prototype, {
        getTileIndexByCoords: function (a) {
          throw G.thrown("getTileIndexByCoords must be implemented");
        },
        overlapsWithCallback: function (a, b, c, d) {
          throw G.thrown("overlapsWithCallback must be implemented");
        },
        destroy: function () {
          this._data = null;
          $b.prototype.destroy.call(this);
        },
        overlaps: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          var d = Qa.resolveGroup(a);
          if (d != null) {
            var e = this;
            var f = b;
            return d.any(function (a) {
              var b = f;
              if (b == null) {
                b = false;
              }
              if (a.flixelType == 1 || a.flixelType == 3) {
                return e.overlapsWithCallback(a);
              } else {
                return e.overlaps(a, b, c);
              }
            });
          }
          if (a.flixelType == 1 || a.flixelType == 3) {
            return this.overlapsWithCallback(a);
          } else {
            return this.overlaps(a, false, null);
          }
        },
        overlapsPoint: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          if (b) {
            if (c == null) {
              c = h.camera;
            }
            b = c.scroll;
            c = b.x;
            var d = b.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.set_x(a.x - c);
            a.set_y(a.y - d);
            if (b._weak) {
              b.put();
            }
            b = a;
            if (b._weak) {
              b.put();
            }
          }
          return this.tileAtPointAllowsCollisions(a);
        },
        tileAtPointAllowsCollisions: function (a) {
          a = this.getTileIndexByCoords(a);
          if (a < 0 || a >= this._data.length) {
            return false;
          } else {
            return this._tileObjects[this._data[a]].allowCollisions > 0;
          }
        },
        __class__: Zn
      });
      function $n(a, b, c, d) {
        F.call(this, a, b);
        this.makeGraphic(c, d, 0, true);
        this.set_active(false);
        this.set_immovable(true);
        this.set_moves(false);
      }
      g["flixel.tile.FlxTileblock"] = $n;
      $n.__name__ = "flixel.tile.FlxTileblock";
      $n.__super__ = F;
      $n.prototype = q(F.prototype, {
        destroy: function () {
          this.tileSprite = ca.destroy(this.tileSprite);
          F.prototype.destroy.call(this);
        },
        __class__: $n
      });
      function Xa() {}
      g["flixel.tweens.FlxEase"] = Xa;
      Xa.__name__ = "flixel.tweens.FlxEase";
      Xa.linear = function (a) {
        return a;
      };
      Xa.quadOut = function (a) {
        return -a * (a - 2);
      };
      Xa.quadInOut = function (a) {
        if (a <= 0.5) {
          return a * a * 2;
        } else {
          return 1 - --a * a * 2;
        }
      };
      Xa.cubeInOut = function (a) {
        if (a <= 0.5) {
          return a * a * a * 4;
        } else {
          return 1 + --a * a * a * 4;
        }
      };
      Xa.quartInOut = function (a) {
        if (a <= 0.5) {
          return a * a * a * a * 8;
        }
        a = a * 2 - 2;
        return (1 - a * a * a * a) / 2 + 0.5;
      };
      Xa.smootherStepOut = function (a) {
        a = a / 2 + 0.5;
        return a * 2 * a * a * (a * (a * 6 - 15) + 10) - 1;
      };
      Xa.smootherStepInOut = function (a) {
        return a * a * a * (a * (a * 6 - 15) + 10);
      };
      Xa.sineIn = function (a) {
        return -Math.cos(Xa.PI2 * a) + 1;
      };
      Xa.sineOut = function (a) {
        return Math.sin(Xa.PI2 * a);
      };
      Xa.sineInOut = function (a) {
        return -Math.cos(Math.PI * a) / 2 + 0.5;
      };
      Xa.circOut = function (a) {
        return Math.sqrt(1 - (a - 1) * (a - 1));
      };
      Xa.elasticInOut = function (a) {
        if (a < 0.5) {
          return Math.pow(2, (a -= 0.5) * 10) * -0.5 * Math.sin((a - Xa.ELASTIC_PERIOD / 4) * 2 * Math.PI / Xa.ELASTIC_PERIOD);
        } else {
          return Math.pow(2, (a -= 0.5) * -10) * Math.sin((a - Xa.ELASTIC_PERIOD / 4) * 2 * Math.PI / Xa.ELASTIC_PERIOD) * 0.5 + 1;
        }
      };
      function Da(a, b) {
        this._running = this._waitingForRestart = false;
        this.duration = this.scale = this.executions = this.startDelay = this.loopDelay = this._secondsSinceStart = this._delayToUse = 0;
        this.active = false;
        a = this.resolveTweenOptions(a);
        this.set_type(a.type);
        this.onStart = a.onStart;
        this.onUpdate = a.onUpdate;
        this.onComplete = a.onComplete;
        this.ease = a.ease;
        this.setDelays(a.startDelay, a.loopDelay);
        this.manager = b ?? Da.globalManager;
      }
      g["flixel.tweens.FlxTween"] = Da;
      Da.__name__ = "flixel.tweens.FlxTween";
      Da.__interfaces__ = [rb];
      Da.tween = function (a, b, c, d) {
        if (c == null) {
          c = 1;
        }
        return Da.globalManager.tween(a, b, c, d);
      };
      Da.num = function (a, b, c, d, e) {
        if (c == null) {
          c = 1;
        }
        return Da.globalManager.num(a, b, c, d, e);
      };
      Da.color = function (a, b, c, d, e) {
        if (b == null) {
          b = 1;
        }
        return Da.globalManager.color(a, b, c, d, e);
      };
      Da.prototype = {
        resolveTweenOptions: function (a) {
          if (a == null) {
            a = {
              type: 8
            };
          }
          if (a.type == null) {
            a.type = 8;
          }
          return a;
        },
        destroy: function () {
          this._nextTweenInChain = this._chainedTweens = this.manager = this.ease = this.onComplete = this.onUpdate = this.onStart = null;
        },
        update: function (a) {
          this._secondsSinceStart += a;
          a = this.executions > 0 ? this.loopDelay : this.startDelay;
          if (!(this._secondsSinceStart < a)) {
            this.scale = Math.max(this._secondsSinceStart - a, 0) / this.duration;
            if (this.ease != null) {
              this.scale = this.ease(this.scale);
            }
            if (this.backward) {
              this.scale = 1 - this.scale;
            }
            if (this._secondsSinceStart > a && !this._running && (this._running = true, this.onStart != null)) {
              this.onStart(this);
            }
            if (this._secondsSinceStart >= this.duration + a) {
              this.scale = this.backward ? 0 : 1;
              this.finished = true;
            } else if (this.onUpdate != null) {
              this.onUpdate(this);
            }
          }
        },
        start: function () {
          this._waitingForRestart = false;
          this._secondsSinceStart = 0;
          this._delayToUse = this.executions > 0 ? this.loopDelay : this.startDelay;
          if (this.duration == 0) {
            this.set_active(false);
            return this;
          }
          this.set_active(true);
          this.finished = this._running = false;
          return this;
        },
        cancel: function () {
          this.onEnd();
          if (this.manager != null) {
            this.manager.remove(this);
          }
        },
        finish: function () {
          this.executions++;
          if (this.onComplete != null) {
            this.onComplete(this);
          }
          var a = this.type & -17;
          if (a == 1 || a == 8) {
            this.onEnd();
            this._secondsSinceStart = this.duration + this.startDelay;
            if (a == 8 && this.manager != null) {
              this.manager.remove(this);
            }
          }
          if (a == 2 || a == 4) {
            this._secondsSinceStart = (this._secondsSinceStart - this._delayToUse) % this.duration + this._delayToUse;
            this.scale = Math.max(this._secondsSinceStart - this._delayToUse, 0) / this.duration;
            if (this.ease != null && this.scale > 0 && this.scale < 1) {
              this.scale = this.ease(this.scale);
            }
            if (a == 4 && (this.backward = !this.backward)) {
              this.scale = 1 - this.scale;
            }
            this.restart();
          }
        },
        onEnd: function () {
          this.setVarsOnEnd();
          this.processTweenChain();
        },
        setVarsOnEnd: function () {
          this.set_active(false);
          this._running = false;
          this.finished = true;
        },
        processTweenChain: function () {
          if (this._chainedTweens != null && !(this._chainedTweens.length <= 0)) {
            this._nextTweenInChain = this._chainedTweens.shift();
            this.doNextTween(this._nextTweenInChain);
            this._chainedTweens = null;
          }
        },
        doNextTween: function (a) {
          if (!a.active) {
            a.start();
            this.manager.add_flixel_tweens_FlxTween(a);
          }
          a.setChain(this._chainedTweens);
        },
        setChain: function (a) {
          if (a != null) {
            this._chainedTweens = this._chainedTweens == null ? a : this._chainedTweens.concat(a);
          }
        },
        restart: function () {
          if (this.active) {
            this.start();
          } else {
            this._waitingForRestart = true;
          }
        },
        setDelays: function (a, b) {
          this.set_startDelay(a ?? 0);
          this.set_loopDelay(b ?? 0);
          return this;
        },
        set_startDelay: function (a) {
          a = Math.abs(a);
          if (this.executions == 0) {
            this._delayToUse = a;
          }
          return this.startDelay = a;
        },
        set_loopDelay: function (a) {
          a = Math.abs(a);
          if (this.executions > 0) {
            this._secondsSinceStart = Math.max(this._secondsSinceStart - this._delayToUse, 0) / this.duration * this.duration + Math.max(a - this.loopDelay, 0);
            this._delayToUse = a;
          }
          return this.loopDelay = a;
        },
        set_type: function (a) {
          if (a == 0) {
            a = 8;
          } else if (a == 16) {
            a = 17;
          }
          this.backward = (a & 16) > 0;
          return this.type = a;
        },
        set_active: function (a) {
          this.active = a;
          if (this._waitingForRestart) {
            this.restart();
          }
          return a;
        },
        __class__: Da,
        __properties__: {
          set_loopDelay: "set_loopDelay",
          set_startDelay: "set_startDelay",
          set_type: "set_type",
          set_active: "set_active"
        }
      };
      function Bl() {
        this._tweens = [];
        Ea.call(this);
        this.set_visible(false);
        h.signals.preStateSwitch.add(m(this, this.clear));
      }
      g["flixel.tweens.FlxTweenManager"] = Bl;
      Bl.__name__ = "flixel.tweens.FlxTweenManager";
      Bl.__super__ = Ea;
      Bl.prototype = q(Ea.prototype, {
        add_flixel_tweens_misc_ColorTween: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return null;
          }
          this._tweens.push(a);
          if (b) {
            a.start();
          }
          return a;
        },
        add_flixel_tweens_misc_NumTween: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return null;
          }
          this._tweens.push(a);
          if (b) {
            a.start();
          }
          return a;
        },
        add_flixel_tweens_misc_VarTween: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return null;
          }
          this._tweens.push(a);
          if (b) {
            a.start();
          }
          return a;
        },
        add_flixel_tweens_FlxTween: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return null;
          }
          this._tweens.push(a);
          if (b) {
            a.start();
          }
          return a;
        },
        tween: function (a, b, c, d) {
          if (c == null) {
            c = 1;
          }
          d = new Cl(d, this);
          d.tween(a, b, c);
          return this.add_flixel_tweens_misc_VarTween(d);
        },
        num: function (a, b, c, d, e) {
          if (c == null) {
            c = 1;
          }
          d = new Dl(d, this);
          d.tween(a, b, c, e);
          return this.add_flixel_tweens_misc_NumTween(d);
        },
        color: function (a, b, c, d, e) {
          if (b == null) {
            b = 1;
          }
          e = new El(e, this);
          e.tween(b, c, d, a);
          return this.add_flixel_tweens_misc_ColorTween(e);
        },
        destroy: function () {
          Ea.prototype.destroy.call(this);
          h.signals.preStateSwitch.remove(m(this, this.clear));
        },
        update: function (a) {
          var b = null;
          for (var c = 0, d = this._tweens; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.active) {
              e.update(a);
              if (e.finished) {
                if (b == null) {
                  b = [];
                }
                b.push(e);
              }
            }
          }
          if (b != null) {
            while (b.length > 0) {
              b.shift().finish();
            }
          }
        },
        remove: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a == null) {
            return null;
          }
          a.set_active(false);
          if (b) {
            a.destroy();
          }
          b = this._tweens;
          var c = b.indexOf(a);
          if (c != -1) {
            b[c] = b[b.length - 1];
            b.pop();
          }
          return a;
        },
        clear: function () {
          for (var a = 0, b = this._tweens; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.set_active(false);
              c.destroy();
            }
          }
          this._tweens.splice(0, this._tweens.length);
        },
        forEach: function (a) {
          for (var b = 0, c = this._tweens; b < c.length;) {
            var d = c[b];
            ++b;
            a(d);
          }
        },
        __class__: Bl
      });
      function El(a, b) {
        Da.call(this, a, b);
      }
      g["flixel.tweens.misc.ColorTween"] = El;
      El.__name__ = "flixel.tweens.misc.ColorTween";
      El.__super__ = Da;
      El.prototype = q(Da.prototype, {
        destroy: function () {
          Da.prototype.destroy.call(this);
          this.sprite = null;
        },
        tween: function (a, b, c, d) {
          this.color = this.startColor = b;
          this.endColor = c;
          this.duration = a;
          this.sprite = d;
          this.start();
          return this;
        },
        update: function (a) {
          Da.prototype.update.call(this, a);
          var b = this.startColor;
          var c = this.endColor;
          var d = this.scale;
          if (d == null) {
            d = 0.5;
          }
          a = ((c >> 16 & 255) - (b >> 16 & 255)) * d + (b >> 16 & 255) | 0;
          var e = ((c >> 8 & 255) - (b >> 8 & 255)) * d + (b >> 8 & 255) | 0;
          var f = ((c & 255) - (b & 255)) * d + (b & 255) | 0;
          c = ((c >> 24 & 255) - (b >> 24 & 255)) * d + (b >> 24 & 255) | 0;
          if (c == null) {
            c = 255;
          }
          b = eb._new();
          if (c == null) {
            c = 255;
          }
          b = (b & -16711681 | (a > 255 ? 255 : a < 0 ? 0 : a) << 16) & -65281 | (e > 255 ? 255 : e < 0 ? 0 : e) << 8;
          b &= -256;
          b |= f > 255 ? 255 : f < 0 ? 0 : f;
          b &= 16777215;
          this.color = b |= (c > 255 ? 255 : c < 0 ? 0 : c) << 24;
          if (this.sprite != null) {
            this.sprite.set_color(this.color);
            this.sprite.set_alpha((this.color >> 24 & 255) / 255);
          }
        },
        __class__: El
      });
      function Dl(a, b) {
        Da.call(this, a, b);
      }
      g["flixel.tweens.misc.NumTween"] = Dl;
      Dl.__name__ = "flixel.tweens.misc.NumTween";
      Dl.__super__ = Da;
      Dl.prototype = q(Da.prototype, {
        destroy: function () {
          Da.prototype.destroy.call(this);
          this._tweenFunction = null;
        },
        tween: function (a, b, c, d) {
          this._tweenFunction = d;
          this._start = this.value = a;
          this._range = b - this.value;
          this.duration = c;
          this.start();
          return this;
        },
        update: function (a) {
          Da.prototype.update.call(this, a);
          this.value = this._start + this._range * this.scale;
          if (this._tweenFunction != null) {
            this._tweenFunction(this.value);
          }
        },
        __class__: Dl
      });
      function Cl(a, b) {
        Da.call(this, a, b);
      }
      g["flixel.tweens.misc.VarTween"] = Cl;
      Cl.__name__ = "flixel.tweens.misc.VarTween";
      Cl.__super__ = Da;
      Cl.prototype = q(Da.prototype, {
        tween: function (a, b, c) {
          this._object = a;
          this._properties = b;
          this._propertyInfos = [];
          this.duration = c;
          this.start();
          this.initializeVars();
          return this;
        },
        update: function (a) {
          if (this._secondsSinceStart < (this.executions > 0 ? this.loopDelay : this.startDelay)) {
            Da.prototype.update.call(this, a);
          } else {
            if (isNaN(this._propertyInfos[0].startValue)) {
              this.setStartValues();
            }
            Da.prototype.update.call(this, a);
            if (this.active) {
              a = 0;
              for (var b = this._propertyInfos; a < b.length;) {
                var c = b[a];
                ++a;
                ja.setProperty(c.object, c.field, c.startValue + c.range * this.scale);
              }
            }
          }
        },
        initializeVars: function () {
          if (ja.isObject(this._properties)) {
            var a = ja.fields(this._properties);
          } else {
            throw G.thrown("Unsupported properties container - use an object containing key/value pairs.");
          }
          for (var b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            var d = this._object;
            for (var e = c.split("."), f = e.pop(), k = 0; k < e.length;) {
              var h = e[k];
              ++k;
              d = ja.getProperty(d, h);
              if (!ja.isObject(d)) {
                throw G.thrown("The object does not have the property \"" + h + "\" in \"" + c + "\"");
              }
            }
            this._propertyInfos.push({
              object: d,
              field: f,
              startValue: NaN,
              range: ja.getProperty(this._properties, c)
            });
          }
        },
        setStartValues: function () {
          for (var a = 0, b = this._propertyInfos; a < b.length;) {
            var c = b[a];
            ++a;
            if (ja.getProperty(c.object, c.field) == null) {
              throw G.thrown("The object does not have the property \"" + c.field + "\"");
            }
            var d = ja.getProperty(c.object, c.field);
            if (isNaN(d)) {
              throw G.thrown("The property \"" + c.field + "\" is not numeric.");
            }
            c.startValue = d;
            c.range -= d;
          }
        },
        destroy: function () {
          Da.prototype.destroy.call(this);
          this._propertyInfos = this._properties = this._object = null;
        },
        __class__: Cl
      });
      var Bd = z["flixel.ui.FlxBarFillDirection"] = {
        __ename__: "flixel.ui.FlxBarFillDirection",
        __constructs__: null,
        LEFT_TO_RIGHT: {
          _hx_name: "LEFT_TO_RIGHT",
          _hx_index: 0,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        RIGHT_TO_LEFT: {
          _hx_name: "RIGHT_TO_LEFT",
          _hx_index: 1,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        TOP_TO_BOTTOM: {
          _hx_name: "TOP_TO_BOTTOM",
          _hx_index: 2,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        BOTTOM_TO_TOP: {
          _hx_name: "BOTTOM_TO_TOP",
          _hx_index: 3,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        HORIZONTAL_INSIDE_OUT: {
          _hx_name: "HORIZONTAL_INSIDE_OUT",
          _hx_index: 4,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        HORIZONTAL_OUTSIDE_IN: {
          _hx_name: "HORIZONTAL_OUTSIDE_IN",
          _hx_index: 5,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        VERTICAL_INSIDE_OUT: {
          _hx_name: "VERTICAL_INSIDE_OUT",
          _hx_index: 6,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        VERTICAL_OUTSIDE_IN: {
          _hx_name: "VERTICAL_OUTSIDE_IN",
          _hx_index: 7,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        }
      };
      Bd.__constructs__ = [Bd.LEFT_TO_RIGHT, Bd.RIGHT_TO_LEFT, Bd.TOP_TO_BOTTOM, Bd.BOTTOM_TO_TOP, Bd.HORIZONTAL_INSIDE_OUT, Bd.HORIZONTAL_OUTSIDE_IN, Bd.VERTICAL_INSIDE_OUT, Bd.VERTICAL_OUTSIDE_IN];
      function Qg(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.lastStatus = -1;
        this.maxInputMovement = Infinity;
        this.mouseButtons = [-1];
        this.allowSwiping = true;
        this.statusAnimations = ["normal", "highlight", "pressed", "disabled"];
        this.labelAlphas = [0.8, 1, 0.5, 0.3];
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var f = W.pool.get().set(d, e);
        f._inPool = false;
        e = d = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var k = W.pool.get().set(d, e);
        k._inPool = false;
        d = 0;
        e = 1;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var h = d;
        if (e == null) {
          e = 0;
        }
        if (h == null) {
          h = 0;
        }
        h = W.pool.get().set(h, e);
        h._inPool = false;
        e = d = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        e = W.pool.get().set(d, e);
        e._inPool = false;
        this.labelOffsets = [f, k, h, e];
        F.call(this, a, b);
        this.loadDefaultGraphic();
        this.onUp = new wf(c);
        this.onDown = new wf();
        this.onOver = new wf();
        this.onOut = new wf();
        this.set_status(0);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        oa.get_current().stage.addEventListener("mouseUp", m(this, this.onUpEventListener));
        this.input = new ke(0);
      }
      g["flixel.ui.FlxTypedButton_flixel_text_FlxText"] = Qg;
      Qg.__name__ = "flixel.ui.FlxTypedButton_flixel_text_FlxText";
      Qg.__interfaces__ = [sh];
      Qg.__super__ = F;
      Qg.prototype = q(F.prototype, {
        graphicLoaded: function () {
          F.prototype.graphicLoaded.call(this);
          this.setupAnimation("normal", 0);
          this.setupAnimation("highlight", 1);
          this.setupAnimation("pressed", 2);
          this.setupAnimation("disabled", 3);
        },
        loadDefaultGraphic: function () {
          this.loadGraphic("flixel/images/ui/button.png", true, 80, 20);
        },
        setupAnimation: function (a, b) {
          b = Math.min(b, this.animation._sprite.get_numFrames() - 1) | 0;
          this.animation.add(a, [b]);
        },
        destroy: function () {
          this.set_label(ca.destroy(this.label));
          this._spriteLabel = null;
          this.onUp = ca.destroy(this.onUp);
          this.onDown = ca.destroy(this.onDown);
          this.onOver = ca.destroy(this.onOver);
          this.onOut = ca.destroy(this.onOut);
          this.labelOffsets = ca.putArray(this.labelOffsets);
          this.input = this.currentInput = this.labelAlphas = null;
          oa.get_current().stage.removeEventListener("mouseUp", m(this, this.onUpEventListener));
          F.prototype.destroy.call(this);
        },
        update: function (a) {
          F.prototype.update.call(this, a);
          if (this.visible) {
            this.updateButton();
            if (this.lastStatus != this.status) {
              this.updateStatusAnimation();
              this.lastStatus = this.status;
            }
          }
          this.input.update();
        },
        updateStatusAnimation: function () {
          this.animation.play(this.statusAnimations[this.status]);
        },
        draw: function () {
          F.prototype.draw.call(this);
          if (this._spriteLabel != null && this._spriteLabel.visible) {
            this._spriteLabel.set_cameras(this._cameras);
            this._spriteLabel.draw();
          }
        },
        updateButton: function () {
          if (this.status != 3) {
            var a = this.checkMouseOverlap();
            a ||= this.checkTouchOverlap();
            if (this.currentInput != null && this.currentInput.get_justReleased() && a) {
              this.onUpHandler();
            }
            if (this.status != 0 && (!a || this.currentInput != null && this.currentInput.get_justReleased())) {
              this.onOutHandler();
            }
          }
        },
        checkMouseOverlap: function () {
          var a = false;
          for (var b = 0, c = this.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            for (var e = 0, f = this.mouseButtons; e < f.length;) {
              var k = f[e];
              ++e;
              k = cf.getByID(k);
              if (k != null && this.checkInput(h.mouse, k, k.justPressedPosition, d)) {
                a = true;
              }
            }
          }
          return a;
        },
        checkTouchOverlap: function () {
          var a = false;
          for (var b = 0, c = this.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            for (var e = 0, f = h.touches.list; e < f.length;) {
              var k = f[e];
              ++e;
              if (this.checkInput(k, k, k.justPressedPosition, d)) {
                a = true;
              }
            }
          }
          return a;
        },
        checkInput: function (a, b, c, d) {
          if (this.maxInputMovement != Infinity) {
            var e = 0;
            var f = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            f = W.pool.get().set(e, f);
            f._inPool = false;
            f._weak = true;
            c = zk.distanceTo(c, a.getScreenPosition(null, f)) > this.maxInputMovement;
          } else {
            c = false;
          }
          if (c && b == this.currentInput) {
            this.currentInput = null;
          } else if (this.overlapsPoint(a.getWorldPosition(d, this._point), true, d)) {
            this.updateStatus(b);
            return true;
          }
          return false;
        },
        updateStatus: function (a) {
          if (a.get_justPressed()) {
            this.currentInput = a;
            this.onDownHandler();
          } else if (this.status == 0) {
            if (this.allowSwiping && a.get_pressed()) {
              this.onDownHandler();
            } else {
              this.onOverHandler();
            }
          }
        },
        updateLabelPosition: function () {
          if (this._spriteLabel != null) {
            this._spriteLabel.set_x((this.pixelPerfectPosition ? Math.floor(this.x) : this.x) + this.labelOffsets[this.status].x);
            this._spriteLabel.set_y((this.pixelPerfectPosition ? Math.floor(this.y) : this.y) + this.labelOffsets[this.status].y);
          }
        },
        updateLabelAlpha: function () {
          if (this._spriteLabel != null && this.labelAlphas.length > this.status) {
            this._spriteLabel.set_alpha(this.alpha * this.labelAlphas[this.status]);
          }
        },
        onUpEventListener: function (a) {
          if (this.visible && this.exists && this.active && this.status == 2) {
            this.onUpHandler();
          }
        },
        onUpHandler: function () {
          this.set_status(1);
          this.input.release();
          this.currentInput = null;
          var a = this.onUp;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        onDownHandler: function () {
          this.set_status(2);
          this.input.press();
          var a = this.onDown;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        onOverHandler: function () {
          if (h.mouse.enabled) {
            this.set_status(1);
            var a = this.onOver;
            if (a.callback != null) {
              a.callback();
            }
            if (a.sound != null) {
              a.sound.play(true);
            }
          } else {
            this.set_status(0);
          }
        },
        onOutHandler: function () {
          this.set_status(0);
          this.input.release();
          var a = this.onOut;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        set_label: function (a) {
          if (a != null) {
            a.scrollFactor.put();
            a.scrollFactor = this.scrollFactor;
          }
          this._spriteLabel = this.label = a;
          this.updateLabelPosition();
          return a;
        },
        set_status: function (a) {
          this.status = a;
          this.updateLabelAlpha();
          return this.status;
        },
        set_alpha: function (a) {
          F.prototype.set_alpha.call(this, a);
          this.updateLabelAlpha();
          return this.alpha;
        },
        set_x: function (a) {
          F.prototype.set_x.call(this, a);
          this.updateLabelPosition();
          return this.x;
        },
        set_y: function (a) {
          F.prototype.set_y.call(this, a);
          this.updateLabelPosition();
          return this.y;
        },
        get_justReleased: function () {
          return this.input.current == -1;
        },
        get_pressed: function () {
          var a = this.input;
          if (a.current != 1) {
            return a.current == 2;
          } else {
            return true;
          }
        },
        get_justPressed: function () {
          return this.input.current == 2;
        },
        __class__: Qg,
        __properties__: q(F.prototype.__properties__, {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased",
          set_status: "set_status",
          set_label: "set_label"
        })
      });
      function qb(a, b, c, d) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        Qg.call(this, a, b, d);
        a = 0;
        for (b = this.labelOffsets; a < b.length;) {
          d = b[a];
          ++a;
          var e = d.x;
          var f = d.y + 3;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          d.set_x(e);
          d.set_y(f);
        }
        if (c != null) {
          this.set_label(new U(this.x + this.labelOffsets[0].x, this.y + this.labelOffsets[0].y, 80, c));
          this.label.setFormat(null, 8, 3355443, "center");
          this.label.set_alpha(this.labelAlphas[this.status]);
          this.label.drawFrame(true);
        }
      }
      g["flixel.ui.FlxButton"] = qb;
      qb.__name__ = "flixel.ui.FlxButton";
      qb.__super__ = Qg;
      qb.prototype = q(Qg.prototype, {
        resetHelpers: function () {
          Qg.prototype.resetHelpers.call(this);
          if (this.label != null) {
            var a = this.label;
            var b = this.get_width() | 0;
            a.set_fieldWidth(this.label.frameWidth = b);
            this.label.set_size(this.label._defaultFormat.size | 0);
          }
        },
        __class__: qb
      });
      function wf(a, b) {
        this.callback = a;
        this.sound = b;
      }
      g["flixel.ui._FlxButton.FlxButtonEvent"] = wf;
      wf.__name__ = "flixel.ui._FlxButton.FlxButtonEvent";
      wf.__interfaces__ = [rb];
      wf.prototype = {
        destroy: function () {
          this.callback = null;
          this.sound = ca.destroy(this.sound);
        },
        __class__: wf
      };
      function ve() {}
      g["flixel.util.FlxArrayUtil"] = ve;
      ve.__name__ = "flixel.util.FlxArrayUtil";
      ve.clearArray = function (a, b) {
        if (b == null) {
          b = false;
        }
        if (a == null) {
          return a;
        }
        if (b) {
          while (a.length > 0) {
            if (a.pop() instanceof Array) {
              ve.clearArray(a, b);
            }
          }
        } else {
          while (a.length > 0) {
            a.pop();
          }
        }
        return a;
      };
      ve.equals = function (a, b) {
        if (a == null && b == null) {
          return true;
        }
        if (a == null && b != null || a != null && b == null || a.length != b.length) {
          return false;
        }
        for (var c = 0, d = a.length; c < d;) {
          var e = c++;
          if (a[e] != b[e]) {
            return false;
          }
        }
        return true;
      };
      var eb = {
        __properties__: {
          get_hue: "get_hue"
        },
        fromHSB: function (a, b, c, d) {
          if (d == null) {
            d = 1;
          }
          var e = eb._new();
          b *= c;
          c -= b;
          var f = a % 360 / 60;
          a = b * (1 - Math.abs(f % 2 - 1)) + c;
          b += c;
          switch (f | 0) {
            case 0:
              if (d == null) {
                d = 1;
              }
              f = Math.round(b * 255);
              e = e & -16711681 | (f > 255 ? 255 : f < 0 ? 0 : f) << 16;
              f = Math.round(a * 255);
              e = e & -65281 | (f > 255 ? 255 : f < 0 ? 0 : f) << 8;
              f = Math.round(c * 255);
              e = e & -256 | (f > 255 ? 255 : f < 0 ? 0 : f);
              f = Math.round(d * 255);
              e = e & 16777215 | (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
              break;
            case 1:
              if (d == null) {
                d = 1;
              }
              f = Math.round(a * 255);
              e = e & -16711681 | (f > 255 ? 255 : f < 0 ? 0 : f) << 16;
              f = Math.round(b * 255);
              e = e & -65281 | (f > 255 ? 255 : f < 0 ? 0 : f) << 8;
              f = Math.round(c * 255);
              e = e & -256 | (f > 255 ? 255 : f < 0 ? 0 : f);
              f = Math.round(d * 255);
              e = e & 16777215 | (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
              break;
            case 2:
              if (d == null) {
                d = 1;
              }
              f = Math.round(c * 255);
              e = e & -16711681 | (f > 255 ? 255 : f < 0 ? 0 : f) << 16;
              f = Math.round(b * 255);
              e = e & -65281 | (f > 255 ? 255 : f < 0 ? 0 : f) << 8;
              f = Math.round(a * 255);
              e = e & -256 | (f > 255 ? 255 : f < 0 ? 0 : f);
              f = Math.round(d * 255);
              e = e & 16777215 | (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
              break;
            case 3:
              if (d == null) {
                d = 1;
              }
              f = Math.round(c * 255);
              e = e & -16711681 | (f > 255 ? 255 : f < 0 ? 0 : f) << 16;
              f = Math.round(a * 255);
              e = e & -65281 | (f > 255 ? 255 : f < 0 ? 0 : f) << 8;
              f = Math.round(b * 255);
              e = e & -256 | (f > 255 ? 255 : f < 0 ? 0 : f);
              f = Math.round(d * 255);
              e = e & 16777215 | (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
              break;
            case 4:
              if (d == null) {
                d = 1;
              }
              f = Math.round(a * 255);
              e = e & -16711681 | (f > 255 ? 255 : f < 0 ? 0 : f) << 16;
              f = Math.round(c * 255);
              e = e & -65281 | (f > 255 ? 255 : f < 0 ? 0 : f) << 8;
              f = Math.round(b * 255);
              e = e & -256 | (f > 255 ? 255 : f < 0 ? 0 : f);
              f = Math.round(d * 255);
              e = e & 16777215 | (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
              break;
            case 5:
              if (d == null) {
                d = 1;
              }
              f = Math.round(b * 255);
              e = e & -16711681 | (f > 255 ? 255 : f < 0 ? 0 : f) << 16;
              f = Math.round(c * 255);
              e = e & -65281 | (f > 255 ? 255 : f < 0 ? 0 : f) << 8;
              f = Math.round(a * 255);
              e = e & -256 | (f > 255 ? 255 : f < 0 ? 0 : f);
              f = Math.round(d * 255);
              e = e & 16777215 | (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
          }
          return e;
        },
        fromString: function (a) {
          var b = null;
          a = w.trim(a);
          if (eb.COLOR_REGEX.match(a)) {
            a = "0x" + eb.COLOR_REGEX.matched(2);
            b = eb._new(v.parseInt(a));
            if (a.length == 8) {
              b = b & 16777215 | -16777216;
            }
          } else {
            a = a.toUpperCase();
            var c = Object.keys(eb.colorLookup.h);
            for (var d = c.length, e = 0; e < d;) {
              var f = c[e++];
              if (f.toUpperCase() == a) {
                b = eb._new(eb.colorLookup.h[f]);
                break;
              }
            }
          }
          return b;
        },
        _new: function (a) {
          if (a == null) {
            a = 0;
          }
          return a;
        },
        get_hue: function (a) {
          a = Math.atan2(Math.sqrt(3) * ((a >> 8 & 255) / 255 - (a & 255) / 255), (a >> 16 & 255) / 255 * 2 - (a >> 8 & 255) / 255 - (a & 255) / 255);
          var b = 0;
          if (a != 0) {
            b = 180 / Math.PI * a;
          }
          if (b < 0) {
            return b + 360;
          } else {
            return b;
          }
        }
      };
      function Xe() {}
      g["flixel.util.FlxColorTransformUtil"] = Xe;
      Xe.__name__ = "flixel.util.FlxColorTransformUtil";
      Xe.setMultipliers = function (a, b, c, d, e) {
        a.redMultiplier = b;
        a.greenMultiplier = c;
        a.blueMultiplier = d;
        a.alphaMultiplier = e;
        return a;
      };
      Xe.hasRGBMultipliers = function (a) {
        if (a.redMultiplier == 1 && a.greenMultiplier == 1) {
          return a.blueMultiplier != 1;
        } else {
          return true;
        }
      };
      Xe.hasRGBOffsets = function (a) {
        if (a.redOffset == 0 && a.greenOffset == 0) {
          return a.blueOffset != 0;
        } else {
          return true;
        }
      };
      Xe.hasRGBAOffsets = function (a) {
        if (Xe.hasRGBOffsets(a)) {
          return true;
        } else {
          return a.alphaOffset != 0;
        }
      };
      function ca() {}
      g["flixel.util.FlxDestroyUtil"] = ca;
      ca.__name__ = "flixel.util.FlxDestroyUtil";
      ca.destroy = function (a) {
        if (a != null) {
          a.destroy();
        }
        return null;
      };
      ca.destroyArray = function (a) {
        if (a != null) {
          for (var b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            ca.destroy(c);
          }
          a.splice(0, a.length);
        }
        return null;
      };
      ca.put = function (a) {
        if (a != null) {
          a.put();
        }
        return null;
      };
      ca.putArray = function (a) {
        if (a != null) {
          for (var b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            ca.put(c);
          }
          a.splice(0, a.length);
        }
        return null;
      };
      ca.dispose = function (a) {
        if (a != null) {
          a.dispose();
        }
        return null;
      };
      ca.disposeIfNotEqual = function (a, b, c) {
        if (a != null && (a.width != b || a.height != c)) {
          a.dispose();
        } else if (a != null) {
          return a;
        }
        return null;
      };
      ca.removeChild = function (a, b) {
        if (a != null && b != null && a.contains(b)) {
          a.removeChild(b);
        }
        return null;
      };
      function sd() {}
      g["flixel.util.FlxGradient"] = sd;
      sd.__name__ = "flixel.util.FlxGradient";
      sd.createGradientMatrix = function (a, b, c, d, e) {
        if (e == null) {
          e = 90;
        }
        if (d == null) {
          d = 1;
        }
        var f = new za();
        e *= Math.PI / 180;
        f.createGradientBox(a, kc.toFloat(b) / kc.toFloat(d), e, 0, 0);
        a = [];
        b = 0;
        for (d = c.length; b < d;) {
          e = b++;
          a.push((c[e] >> 24 & 255) / 255);
        }
        e = [];
        if (c.length == 2) {
          e[0] = 0;
          e[1] = 255;
        } else {
          var k = 255 / (c.length - 1) | 0;
          e.push(0);
          b = 1;
          for (d = c.length - 1; b < d;) {
            c = b++;
            e.push(c * k);
          }
          e.push(255);
        }
        return {
          matrix: f,
          alpha: a,
          ratio: e
        };
      };
      sd.createGradientFlxSprite = function (a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 90;
        }
        if (d == null) {
          d = 1;
        }
        a = sd.createGradientBitmapData(a, b, c, d, e, f);
        b = new F();
        b.set_pixels(a);
        return b;
      };
      sd.createGradientBitmapData = function (a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 90;
        }
        if (d == null) {
          d = 1;
        }
        if (kc.gt(1, a)) {
          a = 1;
        }
        if (kc.gt(1, b)) {
          b = 1;
        }
        var k = sd.createGradientMatrix(a, b, c, d, e);
        e = new og();
        f = f ? 1 : 0;
        e.get_graphics().beginGradientFill(0, c, k.alpha, k.ratio, k.matrix, 0, f, 0);
        e.get_graphics().drawRect(0, 0, kc.toFloat(a), kc.toFloat(b) / kc.toFloat(d));
        f = new T(a, b, true, 0);
        if (d == 1) {
          f.draw(e);
        } else {
          k = new Nc(new T(a, kc.toFloat(b) / kc.toFloat(d) | 0, true, 0));
          k.get_bitmapData().draw(e);
          k.set_scaleY(kc.toFloat(d));
          d = new za();
          d.scale(k.get_scaleX(), k.get_scaleY());
          f.draw(k, d);
          d = k.get_height();
          a = kc.toFloat(a);
          e = k.get_height();
          b = new da(0, d, a, kc.toFloat(b) - e);
          f.fillRect(b, c[c.length - 1]);
        }
        return f;
      };
      sd.overlayGradientOnBitmapData = function (a, b, c, d, e, f, k, h, n) {
        if (n == null) {
          n = true;
        }
        if (h == null) {
          h = 90;
        }
        if (k == null) {
          k = 1;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (b > a.width) {
          b = a.width;
        }
        if (c > a.height) {
          c = a.height;
        }
        b = sd.createGradientBitmapData(b, c, d, k, h, n);
        a.copyPixels(b, new da(0, 0, b.width, b.height), new lb(e, f), null, null, true);
        b.dispose();
        return a;
      };
      var tn = z["flixel.util.FlxHorizontalAlign"] = {
        __ename__: "flixel.util.FlxHorizontalAlign",
        __constructs__: null,
        LEFT: {
          _hx_name: "LEFT",
          _hx_index: 0,
          __enum__: "flixel.util.FlxHorizontalAlign",
          toString: p
        },
        CENTER: {
          _hx_name: "CENTER",
          _hx_index: 1,
          __enum__: "flixel.util.FlxHorizontalAlign",
          toString: p
        },
        RIGHT: {
          _hx_name: "RIGHT",
          _hx_index: 2,
          __enum__: "flixel.util.FlxHorizontalAlign",
          toString: p
        }
      };
      tn.__constructs__ = [tn.LEFT, tn.CENTER, tn.RIGHT];
      function Xf() {
        pa.call(this);
        this.client = this;
        this.objectEncoding = Xf.defaultObjectEncoding;
      }
      g["openfl.net.SharedObject"] = Xf;
      Xf.__name__ = "openfl.net.SharedObject";
      Xf.__resolveClass = function (a) {
        if (a != null) {
          if (w.startsWith(a, "neash.")) {
            a = w.replace(a, "neash.", "openfl.");
          }
          if (w.startsWith(a, "native.")) {
            a = w.replace(a, "native.", "openfl.");
          }
          if (w.startsWith(a, "flash.")) {
            a = w.replace(a, "flash.", "openfl.");
          }
          if (w.startsWith(a, "openfl._v2.")) {
            a = w.replace(a, "openfl._v2.", "openfl.");
          }
          if (w.startsWith(a, "openfl._legacy.")) {
            a = w.replace(a, "openfl._legacy.", "openfl.");
          }
          return g[a];
        } else {
          return null;
        }
      };
      Xf.__super__ = pa;
      Xf.prototype = q(pa.prototype, {
        clear: function () {
          this.data = {};
          try {
            var a = qg.getLocalStorage();
            if (a != null) {
              a.removeItem(this.__localPath + ":" + this.__name);
            }
          } catch (b) {
            Pa.lastError = b;
          }
        },
        flush: function (a) {
          if (ja.fields(this.data).length == 0) {
            return 0;
          }
          a = me.run(this.data);
          try {
            var b = qg.getLocalStorage();
            if (b != null) {
              b.removeItem(this.__localPath + ":" + this.__name);
              b.setItem(this.__localPath + ":" + this.__name, a);
            }
          } catch (c) {
            Pa.lastError = c;
            return 1;
          }
          return 0;
        },
        __class__: Xf
      });
      function ad() {
        Xf.call(this);
      }
      g["flixel.util._FlxSave.FlxSharedObject"] = ad;
      ad.__name__ = "flixel.util._FlxSave.FlxSharedObject";
      ad.init = function () {
        if (ad.all == null) {
          ad.all = new ua();
          var a = ia.current;
          if (a != null) {
            a.onExit.add(ad.onExit);
          }
        }
      };
      ad.onExit = function (a) {
        a = ad.all.h;
        var b = Object.keys(a);
        for (var c = b.length, d = 0; d < c;) {
          a[b[d++]].flush();
        }
      };
      ad.getDefaultLocalPath = function () {
        var a = oa.get_current().stage.application.meta.h.company;
        return a = a == null || a == "" ? "HaxeFlixel" : Jd.validate(a);
      };
      ad.getLocal = function (a, b) {
        if (a == null || a == "") {
          throw new Pb("Error: Invalid name:\"" + a + "\".");
        }
        if (b == null) {
          b = "";
        }
        var c = b + "/" + a;
        ad.init();
        if (!Object.prototype.hasOwnProperty.call(ad.all.h, c)) {
          var d = null;
          try {
            if (new V("(?:^|/)\\.\\./", "").match(b)) {
              throw new Pb("../ not allowed in localPath");
            }
            d = ad.getData(a, b);
          } catch (k) {
            Pa.lastError = k;
          }
          if (b == "") {
            b = ad.getDefaultLocalPath();
          }
          var e = new ad();
          e.data = {};
          e.__localPath = b;
          e.__name = a;
          if (d != null && d != "") {
            try {
              var f = new $d(d);
              f.setResolver({
                resolveEnum: yb.resolveEnum,
                resolveClass: Xf.__resolveClass
              });
              e.data = f.unserialize();
            } catch (k) {
              Pa.lastError = k;
            }
          }
          ad.all.h[c] = e;
        }
        return ad.all.h[c];
      };
      ad.getData = function (a, b) {
        var c = qg.getLocalStorage();
        if (c == null) {
          return null;
        }
        if (b != "") {
          return c.getItem(b + ":" + a);
        }
        b = c.getItem(ad.getDefaultLocalPath() + ":" + a);
        if (b != null) {
          return b;
        }
        b = c.getItem(window.location.pathname + ":" + a);
        return b ?? c.getItem(window.location.href + ":" + a);
      };
      ad.__super__ = Xf;
      ad.prototype = q(Xf.prototype, {
        __class__: ad
      });
      var nh = z["flixel.util.FlxSaveStatus"] = {
        __ename__: "flixel.util.FlxSaveStatus",
        __constructs__: null,
        EMPTY: {
          _hx_name: "EMPTY",
          _hx_index: 0,
          __enum__: "flixel.util.FlxSaveStatus",
          toString: p
        },
        BOUND: (u = function (a, b) {
          return {
            _hx_index: 1,
            name: a,
            path: b,
            __enum__: "flixel.util.FlxSaveStatus",
            toString: p
          };
        }, u._hx_name = "BOUND", u.__params__ = ["name", "path"], u),
        ERROR: (u = function (a) {
          return {
            _hx_index: 2,
            msg: a,
            __enum__: "flixel.util.FlxSaveStatus",
            toString: p
          };
        }, u._hx_name = "ERROR", u.__params__ = ["msg"], u)
      };
      nh.__constructs__ = [nh.EMPTY, nh.BOUND, nh.ERROR];
      function Fl(a, b) {
        this.dispatchOnce = false;
        this.listener = a;
        this.dispatchOnce = b;
      }
      g["flixel.util._FlxSignal.FlxSignalHandler"] = Fl;
      Fl.__name__ = "flixel.util._FlxSignal.FlxSignalHandler";
      Fl.__interfaces__ = [rb];
      Fl.prototype = {
        destroy: function () {
          this.listener = null;
        },
        __class__: Fl
      };
      function wj() {}
      g["flixel.util.IFlxSignal"] = wj;
      wj.__name__ = "flixel.util.IFlxSignal";
      wj.__isInterface__ = true;
      wj.__interfaces__ = [rb];
      wj.prototype = {
        __class__: wj
      };
      function of() {
        this.processingListeners = false;
        this.handlers = [];
        this.pendingRemove = [];
      }
      g["flixel.util._FlxSignal.FlxBaseSignal"] = of;
      of.__name__ = "flixel.util._FlxSignal.FlxBaseSignal";
      of.__interfaces__ = [wj];
      of.prototype = {
        add: function (a) {
          if (a != null) {
            this.registerListener(a, false);
          }
        },
        remove: function (a) {
          if (a != null) {
            a = this.getHandler(a);
            if (a != null) {
              if (this.processingListeners) {
                this.pendingRemove.push(a);
              } else {
                r.remove(this.handlers, a);
                a.destroy();
              }
            }
          }
        },
        destroy: function () {
          ca.destroyArray(this.handlers);
          this.pendingRemove = this.handlers = null;
        },
        registerListener: function (a, b) {
          var c = this.getHandler(a);
          if (c == null) {
            c = new Fl(a, b);
            this.handlers.push(c);
            return c;
          }
          if (c.dispatchOnce != b) {
            throw G.thrown("You cannot addOnce() then add() the same listener without removing the relationship first.");
          }
          return c;
        },
        getHandler: function (a) {
          for (var b = 0, c = this.handlers; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.listener == a) {
              return d;
            }
          }
          return null;
        },
        __class__: of
      };
      function Vd() {
        of.call(this);
        this.dispatch = m(this, this.dispatch0);
      }
      g["flixel.util._FlxSignal.FlxSignal0"] = Vd;
      Vd.__name__ = "flixel.util._FlxSignal.FlxSignal0";
      Vd.__super__ = of;
      Vd.prototype = q(of.prototype, {
        dispatch0: function () {
          this.processingListeners = true;
          for (var a = 0, b = this.handlers; a < b.length;) {
            var c = b[a];
            ++a;
            c.listener();
            if (c.dispatchOnce) {
              if (this.processingListeners) {
                this.pendingRemove.push(c);
              } else {
                r.remove(this.handlers, c);
                c.destroy();
              }
            }
          }
          this.processingListeners = false;
          a = 0;
          for (b = this.pendingRemove; a < b.length;) {
            c = b[a];
            ++a;
            if (this.processingListeners) {
              this.pendingRemove.push(c);
            } else {
              r.remove(this.handlers, c);
              c.destroy();
            }
          }
          if (this.pendingRemove.length > 0) {
            this.pendingRemove = [];
          }
        },
        __class__: Vd
      });
      function sf() {
        of.call(this);
        this.dispatch = m(this, this.dispatch1);
      }
      g["flixel.util._FlxSignal.FlxSignal1"] = sf;
      sf.__name__ = "flixel.util._FlxSignal.FlxSignal1";
      sf.__super__ = of;
      sf.prototype = q(of.prototype, {
        dispatch1: function (a) {
          this.processingListeners = true;
          for (var b = 0, c = this.handlers; b < c.length;) {
            var d = c[b];
            ++b;
            d.listener(a);
            if (d.dispatchOnce) {
              if (this.processingListeners) {
                this.pendingRemove.push(d);
              } else {
                r.remove(this.handlers, d);
                d.destroy();
              }
            }
          }
          this.processingListeners = false;
          b = 0;
          for (c = this.pendingRemove; b < c.length;) {
            d = c[b];
            ++b;
            if (this.processingListeners) {
              this.pendingRemove.push(d);
            } else {
              r.remove(this.handlers, d);
              d.destroy();
            }
          }
          if (this.pendingRemove.length > 0) {
            this.pendingRemove = [];
          }
        },
        __class__: sf
      });
      function Ck() {
        of.call(this);
        this.dispatch = m(this, this.dispatch2);
      }
      g["flixel.util._FlxSignal.FlxSignal2"] = Ck;
      Ck.__name__ = "flixel.util._FlxSignal.FlxSignal2";
      Ck.__super__ = of;
      Ck.prototype = q(of.prototype, {
        dispatch2: function (a, b) {
          this.processingListeners = true;
          for (var c = 0, d = this.handlers; c < d.length;) {
            var e = d[c];
            ++c;
            e.listener(a, b);
            if (e.dispatchOnce) {
              if (this.processingListeners) {
                this.pendingRemove.push(e);
              } else {
                r.remove(this.handlers, e);
                e.destroy();
              }
            }
          }
          this.processingListeners = false;
          c = 0;
          for (d = this.pendingRemove; c < d.length;) {
            e = d[c];
            ++c;
            if (this.processingListeners) {
              this.pendingRemove.push(e);
            } else {
              r.remove(this.handlers, e);
              e.destroy();
            }
          }
          if (this.pendingRemove.length > 0) {
            this.pendingRemove = [];
          }
        },
        __class__: Ck
      });
      function ao() {}
      g["flixel.util.FlxSort"] = ao;
      ao.__name__ = "flixel.util.FlxSort";
      ao.byY = function (a, b, c) {
        b = b.y;
        c = c.y;
        var d = 0;
        if (b < c) {
          d = a;
        } else if (b > c) {
          d = -a;
        }
        return d;
      };
      function Hc() {}
      g["flixel.util.FlxSpriteUtil"] = Hc;
      Hc.__name__ = "flixel.util.FlxSpriteUtil";
      Hc.drawLine = function (a, b, c, d, e, f, k) {
        if (f == null) {
          f = {
            thickness: 1,
            color: -1
          };
        }
        if (f.thickness == null) {
          f.thickness = 1;
        }
        if (f.color == null) {
          f.color = -1;
        }
        Hc.flashGfx.clear();
        if (f != null) {
          var h = f.color == null ? -16777216 : f.color;
          if (f.thickness == null) {
            f.thickness = 1;
          }
          if (f.pixelHinting == null) {
            f.pixelHinting = false;
          }
          if (f.miterLimit == null) {
            f.miterLimit = 3;
          }
          Hc.flashGfx.lineStyle(f.thickness, h & 16777215, (h >> 24 & 255) / 255, f.pixelHinting, f.scaleMode, f.capsStyle, f.jointStyle, f.miterLimit);
        }
        Hc.flashGfx.moveTo(b, c);
        Hc.flashGfx.lineTo(d, e);
        Hc.flashGfx.endFill();
        Hc.updateSpriteGraphic(a, k);
        return a;
      };
      Hc.drawCircle = function (a, b, c, d, e, f, k) {
        if (e == null) {
          e = -1;
        }
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = -1;
        }
        if (b == null) {
          b = -1;
        }
        if (b == -1 || c == -1) {
          var h = a.getGraphicMidpoint();
          if (b == -1) {
            b = h.x - a.x;
          }
          if (c == -1) {
            c = h.y - a.y;
          }
          h.put();
        }
        if (d < 1) {
          d = Math.min(a.frameWidth, a.frameHeight) / 2;
        }
        Hc.flashGfx.clear();
        if (f != null) {
          h = f.color == null ? -16777216 : f.color;
          if (f.thickness == null) {
            f.thickness = 1;
          }
          if (f.pixelHinting == null) {
            f.pixelHinting = false;
          }
          if (f.miterLimit == null) {
            f.miterLimit = 3;
          }
          Hc.flashGfx.lineStyle(f.thickness, h & 16777215, (h >> 24 & 255) / 255, f.pixelHinting, f.scaleMode, f.capsStyle, f.jointStyle, f.miterLimit);
        }
        if (e != 0) {
          Hc.flashGfx.beginFill(e & 16777215, (e >> 24 & 255) / 255);
        }
        Hc.flashGfx.drawCircle(b, c, d);
        Hc.flashGfx.endFill();
        Hc.updateSpriteGraphic(a, k);
        return a;
      };
      Hc.updateSpriteGraphic = function (a, b) {
        if (b == null) {
          b = {
            smoothing: false
          };
        } else if (b.smoothing == null) {
          b.smoothing = false;
        }
        a.get_pixels().draw(Hc.flashGfxSprite, b.matrix, b.colorTransform, b.blendMode, b.clipRect, b.smoothing);
        a.dirty = true;
        return a;
      };
      function Ub() {}
      g["flixel.util.FlxStringUtil"] = Ub;
      Ub.__name__ = "flixel.util.FlxStringUtil";
      Ub.formatTime = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = (a / 60 | 0) + ":";
        var d = (a | 0) % 60;
        if (d < 10) {
          c += "0";
        }
        c += d;
        if (b) {
          c += ".";
          d = (a - (a | 0)) * 100 | 0;
          if (d < 10) {
            c += "0";
          }
          c += d;
        }
        return c;
      };
      Ub.formatBytes = function (a, b) {
        if (b == null) {
          b = 2;
        }
        for (var c = "Bytes kB MB GB TB PB".split(" "), d = 0; a >= 1024 && d < c.length - 1;) {
          a /= 1024;
          ++d;
        }
        return bc.roundDecimal(a, b) + c[d];
      };
      Ub.getClassName = function (a, b) {
        if (b == null) {
          b = false;
        }
        a = va.__instanceof(a, Vi) ? a : va.getClass(a);
        return Ub.formatPackage(a.__name__, b);
      };
      Ub.formatPackage = function (a, b) {
        if (a == null) {
          return null;
        }
        a = w.replace(a, "::", ".");
        if (b) {
          a = r.substr(a, a.lastIndexOf(".") + 1, null);
        }
        return a;
      };
      Ub.getHost = function (a) {
        var b = new V("^(?:[a-z][a-z0-9+\\-.]*://)?(?:[a-z0-9\\-._~%!$&'()*+,;=]+@)?([a-z0-9\\-._~%]{3,}|\\[[a-f0-9:.]+\\])?(?::[0-9]+)?", "i");
        if (b.match(a) && (a = b.matched(1), a != null)) {
          return decodeURIComponent(a.split("+").join(" ")).toLowerCase();
        } else {
          return "";
        }
      };
      Ub.getDomain = function (a) {
        a = Ub.getHost(a);
        var b = new V("^(localhost|[0-9.]+|\\[[a-f0-9:.]+\\])$", "i");
        var c = new V("^(?:[a-z0-9\\-]+\\.)*([a-z0-9\\-]+\\.[a-z0-9\\-]+)$", "i");
        if (!b.match(a) && c.match(a) && (a = c.matched(1), a != null)) {
          return a.toLowerCase();
        } else {
          return "";
        }
      };
      Ub.toIntArray = function (a) {
        if (a != null && a != "") {
          a = a.split(",");
          var b = [];
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            b.push(v.parseInt(d));
          }
          return b;
        }
        return null;
      };
      Ub.getDebugString = function (a) {
        var b = "(";
        for (var c = 0; c < a.length;) {
          var d = a[c];
          ++c;
          b += d.label + ": ";
          var e = d.value;
          if (typeof e == "number") {
            e = bc.roundDecimal(e, h.debugger.precision);
          }
          b += v.string(e) + " | ";
          Vc._pool.put(d);
        }
        b = w.trim(r.substr(b, 0, b.length - 2));
        return b + ")";
      };
      function Vc() {}
      g["flixel.util.LabelValuePair"] = Vc;
      Vc.__name__ = "flixel.util.LabelValuePair";
      Vc.__interfaces__ = [rb];
      Vc.prototype = {
        destroy: function () {
          this.value = this.label = null;
        },
        __class__: Vc
      };
      function Ec(a) {
        this._inManager = false;
        this._timeCounter = this._loopsCounter = 0;
        this.active = this.finished = false;
        this.time = this.loops = 0;
        this.manager = a ?? Ec.globalManager;
      }
      g["flixel.util.FlxTimer"] = Ec;
      Ec.__name__ = "flixel.util.FlxTimer";
      Ec.__interfaces__ = [rb];
      Ec.prototype = {
        destroy: function () {
          this.onComplete = null;
        },
        start: function (a, b, c) {
          if (c == null) {
            c = 1;
          }
          if (a == null) {
            a = 1;
          }
          if (this.manager != null && !this._inManager) {
            this.manager.add(this);
            this._inManager = true;
          }
          this.active = true;
          this.finished = false;
          this.time = Math.abs(a);
          if (c < 0) {
            c *= -1;
          }
          this.loops = c;
          this.onComplete = b;
          this._loopsCounter = this._timeCounter = 0;
          return this;
        },
        cancel: function () {
          this.finished = true;
          this.active = false;
          if (this.manager != null && this._inManager) {
            this.manager.remove(this);
            this._inManager = false;
          }
        },
        update: function (a) {
          for (this._timeCounter += a; this._timeCounter >= this.time && this.active && !this.finished;) {
            this._timeCounter -= this.time;
            this._loopsCounter++;
            if (this.loops > 0 && this._loopsCounter >= this.loops) {
              this.finished = true;
            }
          }
        },
        onLoopFinished: function () {
          if (this.finished) {
            this.cancel();
          }
          if (this.onComplete != null) {
            this.onComplete(this);
          }
        },
        __class__: Ec
      };
      function Al() {
        this._timers = [];
        Ea.call(this);
        this.set_visible(false);
        h.signals.preStateSwitch.add(m(this, this.clear));
      }
      g["flixel.util.FlxTimerManager"] = Al;
      Al.__name__ = "flixel.util.FlxTimerManager";
      Al.__super__ = Ea;
      Al.prototype = q(Ea.prototype, {
        destroy: function () {
          ve.clearArray(this._timers);
          this._timers = null;
          h.signals.preStateSwitch.remove(m(this, this.clear));
          Ea.prototype.destroy.call(this);
        },
        update: function (a) {
          var b = null;
          for (var c = 0, d = this._timers; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.active && !e.finished && e.time >= 0) {
              var f = e._loopsCounter;
              e.update(a);
              if (f != e._loopsCounter) {
                if (b == null) {
                  b = [];
                }
                b.push(e);
              }
            }
          }
          if (b != null) {
            while (b.length > 0) {
              b.shift().onLoopFinished();
            }
          }
        },
        add: function (a) {
          this._timers.push(a);
        },
        remove: function (a) {
          var b = this._timers;
          a = b.indexOf(a);
          if (a != -1) {
            b[a] = b[b.length - 1];
            b.pop();
          }
        },
        clear: function () {
          ve.clearArray(this._timers);
        },
        forEach: function (a) {
          for (var b = 0, c = this._timers; b < c.length;) {
            var d = c[b];
            ++b;
            a(d);
          }
        },
        __class__: Al
      });
      var sn = z["flixel.util.FlxVerticalAlign"] = {
        __ename__: "flixel.util.FlxVerticalAlign",
        __constructs__: null,
        TOP: {
          _hx_name: "TOP",
          _hx_index: 0,
          __enum__: "flixel.util.FlxVerticalAlign",
          toString: p
        },
        CENTER: {
          _hx_name: "CENTER",
          _hx_index: 1,
          __enum__: "flixel.util.FlxVerticalAlign",
          toString: p
        },
        BOTTOM: {
          _hx_name: "BOTTOM",
          _hx_index: 2,
          __enum__: "flixel.util.FlxVerticalAlign",
          toString: p
        }
      };
      sn.__constructs__ = [sn.TOP, sn.CENTER, sn.BOTTOM];
      function Yn(a, b) {
        this.start = a;
        this.end = b == null ? a : b;
      }
      g["flixel.util.helpers.FlxRange"] = Yn;
      Yn.__name__ = "flixel.util.helpers.FlxRange";
      Yn.prototype = {
        __class__: Yn
      };
      var Cg = {
        fromState: function (a) {
          return a;
        },
        fromMaker: function (a) {
          return a;
        },
        createInstance: function (a) {
          if (a instanceof lc) {
            return a;
          } else if (va.__instanceof(a, Vi)) {
            return yb.createInstance(a, []);
          } else {
            return a();
          }
        }
      };
      var vp = {
        fromType: function (a) {
          return a;
        },
        toNextState: function (a) {
          if (va.__instanceof(a, Vi)) {
            return Cg.fromMaker(function () {
              return yb.createInstance(a, []);
            });
          } else {
            return a;
          }
        }
      };
      function hi(a, b, c, d) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._mat = new Rc();
        this.pressed = false;
        this.renderer = new bo();
        this.showPivot = false;
        F.call(this, a, b);
        this._sprite = new Ua();
        this.anim = new Gl(this);
        if (c != null) {
          this.loadAtlas(c);
        }
        if (d != null) {
          this.setTheSettings(d);
        }
        this._pivot = Zb.fromBitmapData(Q.getBitmapData("flxanimate/images/pivot.png"), null, "__pivot").get_imageFrame().get_frame();
        this._indicator = Zb.fromBitmapData(Q.getBitmapData("flxanimate/images/indicator.png"), null, "__indicator").get_imageFrame().get_frame();
        this.get_camera().canvas.addChild(this._sprite);
        this.rect = da.__pool.get();
      }
      g["flxanimate.FlxAnimate"] = hi;
      hi.__name__ = "flxanimate.FlxAnimate";
      hi.__super__ = F;
      hi.prototype = q(F.prototype, {
        loadAtlas: function (a) {
          if (Kc.extension(a) == "zip" || Q.exists("" + a + "/Animation.json")) {
            this.anim._loadAtlas(this.atlasSetting(a));
            this.set_frames(wd.fromTextureAtlas(a));
            this.origin = this.anim.curInstance.symbol.transformationPoint;
          } else {
            h.log.advanced("Animation file not found in specified path: \"" + v.string(this.path) + "\", have you written the correct path?", xa.ERROR, true);
          }
        },
        draw: function () {
          this._matrix.identity();
          if (this.flipX) {
            this._matrix.a *= -1;
            this._matrix.tx += this.get_width();
          }
          if (this.flipY) {
            this._matrix.d *= -1;
            this._matrix.ty += this.get_height();
          }
          this.frameHeight = this.frameWidth = 0;
          this.set_width(0);
          this.set_height(0);
          this._flashRect.setEmpty();
          this.parseElement(this.anim.curInstance, this.anim.get_curFrame(), this._matrix, this.colorTransform, true, null, this.get_cameras());
          this.set_width(this._flashRect.width);
          this.set_height(this._flashRect.height);
          this.frameWidth = this.get_width() | 0;
          this.frameHeight = this.get_height() | 0;
          if (this.showPivot) {
            this.drawLimb(this._pivot, new Rc(1, 0, 0, 1, this.origin.x - this._pivot.frame.width * 0.5, this.origin.y - this._pivot.frame.height * 0.5), null, null, this.get_cameras());
            this.drawLimb(this._indicator, new Rc(1, 0, 0, 1, -this._indicator.frame.width * 0.5, -this._indicator.frame.height * 0.5), null, null, this.get_cameras());
          }
        },
        parseElement: function (a, b, c, d, e, f, k) {
          if (e == null) {
            e = false;
          }
          var h = f != null;
          if (k == null) {
            k = this.get_cameras();
          }
          var n = new Rc();
          n.concat(a.matrix);
          n.concat(c);
          var g = new Lb();
          g.__copyFrom(d);
          d = a.symbol != null ? this.anim.symbolDictionary.h[a.symbol.name] : null;
          if (a.symbol != null && (a.symbol.colorEffect != null && g.concat(a.symbol.colorEffect.__create()), a.symbol.get_cacheAsBitmap() && (a.symbol._renderDirty && (a.symbol._renderDirty = false, this.filterCamera == null && (this.filterCamera = new Tb(0, 0, 0, 0, 1)), a.symbol._cacheBitmapMatrix.copyFrom(a.symbol.cacheAsBitmapMatrix), this.parseElement(a, b, a.symbol._cacheBitmapMatrix, new Lb(), e, {
            instance: a
          }, [this.filterCamera]), a.symbol._filterBitmap == null && (a.symbol._filterBitmap = Zb.fromRectangle(1, 1, 0, true).get_imageFrame().get_frame()), this.renderFilter(this.filterCamera, a.symbol.filters, a.symbol._filterBitmap, a.symbol._cacheBitmapMatrix, this.renderer), a.symbol._renderDirty = false), (!h || h && f.instance != a) && a.symbol._filterBitmap != null))) {
            n.identity();
            n.concat(a.symbol._cacheBitmapMatrix);
            n.concat(c);
            this.drawLimb(a.symbol._filterBitmap, n, g, h, k);
            return;
          }
          if (a.bitmap != null) {
            this.drawLimb(this.frames.framesByName.h[a.bitmap], n, g, h, k);
          } else {
            b = a.symbol.firstFrame + b;
            if (a.symbol.type._hx_index == 2) {
              b = this.setButtonFrames(b);
            }
            switch (a.symbol.loop._hx_index) {
              case 0:
                b %= d.get_length();
                break;
              case 1:
                var p = d.get_length() - 1;
                b = b < 0 ? 0 : b;
                b = p != null && b > p ? p : b;
            }
            d = d.timeline.getList();
            p = 0;
            for (var l = d.length; p < l;) {
              var L = p++;
              var m = d[d.length - 1 - L];
              if (m.visible || h || !e) {
                m._setCurFrame(b);
                L = m._currFrame;
                if (L != null) {
                  L.update(b);
                  var v = L.filters != null;
                  if (v) {
                    if (L._renderDirty || L._filterFrame == null) {
                      L._filterFrame = Zb.fromRectangle(1, 1, 0, true).get_imageFrame().get_frame();
                      if (m._filterCamera == null) {
                        m._filterCamera = new Tb();
                      }
                    } else {
                      m = new Rc();
                      m.concat(L._bitmapMatrix);
                      m.concat(a.matrix);
                      m.concat(c);
                      this.drawLimb(L._filterFrame, m, null, h, k);
                      continue;
                    }
                  }
                  for (var q = 0, w = L.getList(); q < w.length;) {
                    var u = w[q];
                    ++q;
                    var r = 0;
                    if (u.symbol != null && u.symbol.type == ae.Graphic && u.symbol.loop != Pd.SingleFrame) {
                      r = b - L.index;
                    }
                    var z = new Lb();
                    z.__copyFrom(g);
                    if (L.colorEffect != null) {
                      z.concat(L.colorEffect.__create());
                    }
                    this.parseElement(u, r, v ? new Rc() : n, z, false, v ? {
                      instance: null
                    } : f, v ? [m._filterCamera] : k);
                    if (v && u.symbol != null && u.symbol._layerDirty) {
                      u.symbol._layerDirty = false;
                    }
                  }
                  if (v) {
                    L._bitmapMatrix.identity();
                    this.renderFilter(m._filterCamera, L.filters, L._filterFrame, L._bitmapMatrix, this.renderer);
                    L._renderDirty = false;
                    m = new Rc();
                    m.concat(L._bitmapMatrix);
                    m.concat(a.matrix);
                    m.concat(c);
                    this.drawLimb(L._filterFrame, m, null, h, k);
                  }
                }
              }
            }
          }
        },
        renderFilter: function (a, b, c, d, e) {
          a.render();
          var f = e.graphicstoBitmapData(a.canvas.get_graphics());
          if (f != null) {
            var k = f.rect.clone();
            if (k != null) {
              var h = new da();
              a.canvas.__getBounds(h, d);
              if (b != null && b.length > 0) {
                f = this.applyFilter(e, f, b, k);
              }
              d.translate(h.x + k.x - (f.width - k.width) * 0.5, h.y + k.y - (f.height - k.height) * 0.5);
              a.clearDrawStack();
              a.canvas.get_graphics().clear();
              c.parent.bitmap.dispose();
              c.parent.set_bitmap(f);
              a = c.frame;
              a.width = f.width;
              a.height = f.height;
            }
          }
        },
        applyFilter: function (a, b, c, d) {
          var e = da.__pool.get();
          for (var f = 0; f < c.length;) {
            var k = c[f];
            ++f;
            e.__expand(-k.__leftExtension, -k.__topExtension, k.__leftExtension + k.__rightExtension, k.__topExtension + k.__bottomExtension);
          }
          d.width += e.width;
          d.height += e.height;
          d.x += e.x;
          d.y += e.y;
          da.__pool.release(e);
          return a.applyFilter(b, c, d);
        },
        setButtonFrames: function (a) {
          var b = a = false;
          var c = h.mouse._leftButton;
          if ((c.current == 1 || c.current == 2) && !!h.mouse.overlaps(this)) {
            b = true;
          }
          c = h.mouse._leftButton;
          if ((c.current == 1 || c.current == 2) && !h.mouse.overlaps(this) && !b) {
            a = true;
          }
          c = h.mouse._leftButton;
          if (c.current != 1 && c.current != 2) {
            a = false;
          }
          if (h.mouse.overlaps(this) && !a) {
            c = this.anim.buttonMap;
            a = this.anim.get_curSymbol().name;
            b = c.h[a];
            if (h.mouse._leftButton.current == 2 && !this.pressed) {
              if (b != null) {
                c = new Hl(b.Callbacks != null ? b.Callbacks.OnClick : null, b.Sound);
                if (c.callback != null) {
                  c.callback();
                }
                if (c.sound != null) {
                  c.sound.play(true);
                }
              }
              this.pressed = true;
            }
            c = h.mouse._leftButton;
            a = c.current == 1 || c.current == 2 ? 2 : 1;
            if (h.mouse._leftButton.current == -1 && this.pressed) {
              if (b != null) {
                c = new Hl(b.Callbacks != null ? b.Callbacks.OnRelease : null, b.Sound);
                if (c.callback != null) {
                  c.callback();
                }
                if (c.sound != null) {
                  c.sound.play(true);
                }
              }
              this.pressed = false;
            }
          } else {
            a = 0;
          }
          return a;
        },
        drawLimb: function (a, b, c, d, e) {
          if (d == null) {
            d = false;
          }
          if (e != null && this.alpha != 0 && (c == null || c.alphaMultiplier != 0 && c.alphaOffset != -255) && a != null && a.type != 2) {
            for (var f = 0; f < e.length;) {
              var k = e[f];
              ++f;
              a.prepareMatrix(this._mat);
              var h = this._mat;
              h.concat(b);
              if (!k.visible || !k.exists) {
                break;
              }
              if (!d) {
                var n = this.getScreenPosition(this._point, k);
                var g = this.offset;
                var p = g.x;
                var l = g.y;
                if (l == null) {
                  l = 0;
                }
                if (p == null) {
                  p = 0;
                }
                n.set_x(n.x - p);
                n.set_y(n.y - l);
                n = g;
                if (n._weak) {
                  n.put();
                }
                if ([this._pivot, this._indicator].indexOf(a) == -1) {
                  h.translate(-this.origin.x, -this.origin.y);
                  h.scale(this.scale.x, this.scale.y);
                  if (this.bakedRotationAngle <= 0) {
                    if (this._angleChanged) {
                      n = Math.PI / 180 * this.angle;
                      this._sinAngle = Math.sin(n);
                      this._cosAngle = Math.cos(n);
                      this._angleChanged = false;
                    }
                    if (this.angle != 0) {
                      n = this._cosAngle;
                      g = this._sinAngle;
                      p = h.a * n - h.b * g;
                      h.b = h.a * g + h.b * n;
                      h.a = p;
                      p = h.c * n - h.d * g;
                      h.d = h.c * g + h.d * n;
                      h.c = p;
                      p = h.tx * n - h.ty * g;
                      h.ty = h.tx * g + h.ty * n;
                      h.tx = p;
                    }
                  }
                  n = this._point;
                  g = this.origin;
                  p = g.x;
                  l = g.y;
                  if (l == null) {
                    l = 0;
                  }
                  if (p == null) {
                    p = 0;
                  }
                  n.set_x(n.x + p);
                  n.set_y(n.y + l);
                  n = g;
                  if (n._weak) {
                    n.put();
                  }
                } else {
                  h.scale(0.7, 0.7);
                  h.a /= k.zoom;
                  h.d /= k.zoom;
                  h.tx /= k.zoom;
                  h.ty /= k.zoom;
                }
                if (this.isPixelPerfectRender(k)) {
                  n = this._point;
                  n.set_x(Math.floor(n.x));
                  n.set_y(Math.floor(n.y));
                }
                h.translate(this._point.x, this._point.y);
                if (!this.limbOnScreen(a, h, k)) {
                  break;
                }
              }
              k.drawPixels(a, null, h, c, this.blend, this.antialiasing);
            }
          }
        },
        limbOnScreen: function (a, b, c) {
          if (c == null) {
            c = h.camera;
          }
          var d = a.frame;
          var e = this.rect;
          if (e == null) {
            e = new da();
          }
          e.x = d.x;
          e.y = d.y;
          e.width = d.width;
          e.height = d.height;
          this.rect.x = 0;
          this.rect.y = 0;
          this.rect.__transform(this.rect, b);
          d = this._point;
          b = this.rect.get_topLeft();
          d.set(b.x, b.y);
          if (a != this._pivot) {
            this._flashRect = this._flashRect.union(this.rect);
          }
          a = this._point;
          d = this.rect.width;
          b = this.rect.height;
          if (b == null) {
            b = 0;
          }
          if (d == null) {
            d = 0;
          }
          c = a.x + d > c.viewMarginX && a.x < c.width - c.viewMarginX && a.y + b > c.viewMarginY && a.y < c.height - c.viewMarginY;
          d = a;
          if (d._weak) {
            d.put();
          }
          return c;
        },
        destroy: function () {
          if (this.anim != null) {
            this.anim.destroy();
          }
          this.anim = null;
          F.prototype.destroy.call(this);
        },
        updateAnimation: function (a) {
          this.anim.update(a);
        },
        setTheSettings: function (a) {
          this.set_antialiasing(a.Antialiasing);
          if (a.ButtonSettings != null) {
            this.anim.buttonMap = a.ButtonSettings;
            if (this.anim.get_symbolType() != ae.Button) {
              this.anim.set_symbolType(ae.Button);
            }
          }
          if (a.Reversed != null) {
            this.anim.set_reversed(a.Reversed);
          }
          if (a.FrameRate != null) {
            this.anim.set_framerate(a.FrameRate > 0 ? this.anim.metadata.frameRate : a.FrameRate);
          }
          if (a.OnComplete != null) {
            this.anim.onComplete = a.OnComplete;
          }
          if (a.ShowPivot != null) {
            this.showPivot = a.ShowPivot;
          }
          if (a.Antialiasing != null) {
            this.set_antialiasing(a.Antialiasing);
          }
          if (a.ScrollFactor != null) {
            this.scrollFactor = a.ScrollFactor;
          }
          if (a.Offset != null) {
            this.offset = a.Offset;
          }
        },
        atlasSetting: function (a) {
          var b = null;
          if (Kc.extension(a) == "zip") {
            a = Il.readZip(Ne.toBytes(Q.getBytes(a)));
            for (var c = Il.unzip(a).h; c != null;) {
              var d = c.item;
              c = c.next;
              if (d.fileName.indexOf("Animation.json") != -1) {
                b = JSON.parse(d.data.toString());
                a.remove(d);
              }
            }
            wd.zip = a;
          } else {
            b = JSON.parse(Q.getText("" + a + "/Animation.json"));
          }
          return b;
        },
        loadAtlasEx: function (a, b, c) {
          if (typeof c == "string") {
            var d = w.trim(b);
            d = r.substr(d, d.length - 5, null).toLowerCase();
            if (d == ".json") {
              c = Q.getText(c);
            }
            c = JSON.parse(this._removeBOM(c));
          }
          var e = null;
          var f = b;
          d = w.trim(b);
          d = r.substr(d, d.length - 5, null).toLowerCase();
          if (d == ".json") {
            f = Q.getText(b);
            e = false;
          } else if (r.substr(d, 1, null) == ".xml") {
            f = Q.getText(b);
            e = true;
          }
          f = this._removeBOM(f);
          if (e == null) {
            try {
              f = JSON.parse(f);
              e = false;
            } catch (k) {
              f = ea.parse(f);
              e = true;
            }
          } else {
            f = e ? ea.parse(f) : JSON.parse(f);
          }
          this.anim._loadAtlas(c);
          if (e) {
            this.set_frames(wd.fromSparrow(f, a));
          } else {
            this.set_frames(wd.fromAnimateAtlas(f, a));
          }
          this.origin = this.anim.curInstance.symbol.transformationPoint;
        },
        _removeBOM: function (a) {
          if (r.cca(a, 0) == 65279) {
            a = r.substr(a, 1, null);
          }
          return a;
        },
        __class__: hi
      });
      function Hl(a, b) {
        this.callback = a;
        this.sound = b;
      }
      g["flxanimate.animate.ButtonEvent"] = Hl;
      Hl.__name__ = "flxanimate.animate.ButtonEvent";
      Hl.prototype = {
        __class__: Hl
      };
      function Gl(a, b) {
        this.lastPlayedAnim = null;
        this.animsMap = new ua();
        this.buttonMap = new ua();
        this.swfRender = false;
        this._tick = 0;
        this._parent = a;
        this.isPlaying = false;
        if (b != null) {
          this._loadAtlas(b);
        }
      }
      g["flxanimate.animate.FlxAnim"] = Gl;
      Gl.__name__ = "flxanimate.animate.FlxAnim";
      Gl.__interfaces__ = [rb];
      Gl.prototype = {
        _loadAtlas: function (a) {
          this.symbolDictionary = new ua();
          this.stageInstance = null;
          this.setSymbols(a);
          this.curInstance = this.stageInstance = sp.get_STI(Rg.get_AN(a)) != null ? Bf.fromJSON(sp.get_STI(Rg.get_AN(a))) : new Bf(null, new vh(xj.get_SN(Rg.get_AN(a))));
          this.set_curFrame(this.stageInstance.symbol.firstFrame);
          var b = this._parent.origin;
          var c = this.stageInstance.symbol.transformationPoint;
          var d = c.x;
          var e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(d);
          b.set_y(e);
          if (c._weak) {
            c.put();
          }
          this.metadata = new co(sp.get_N(Rg.get_AN(a)), Kp.get_FRT(Rg.get_MD(a)));
          this.set_framerate(this.metadata.frameRate);
        },
        play: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          if (a == null) {
            a = "";
          }
          this.pause();
          b = b || this.get_finished();
          if (a != "") {
            if (Object.prototype.hasOwnProperty.call(this.animsMap.h, a)) {
              var e = this.animsMap.h[a];
              this.set_framerate(e.frameRate == 0 ? this.metadata.frameRate : e.frameRate);
              b = b || this.curInstance != e.instance;
              this.curInstance = e.instance;
            } else if (a == this.metadata.name) {
              this.curInstance = this.stageInstance;
            } else if (Object.prototype.hasOwnProperty.call(this.symbolDictionary.h, a)) {
              this.curInstance.symbol.reset();
              this.curInstance.symbol.name = a;
            } else {
              h.log.advanced("There's no animation called " + a + "!", xa.ERROR, true);
            }
            this.lastPlayedAnim = a;
          }
          if (b) {
            this.set_curFrame(c ? d - this.get_length() : d);
          }
          this.set_reversed(c);
          this.resume();
        },
        pause: function () {
          this.isPlaying = false;
        },
        resume: function () {
          this.isPlaying = true;
        },
        setSymbols: function (a) {
          var b = this.symbolDictionary;
          var c = xj.get_SN(Rg.get_AN(a));
          var d = new yj(Kc.withoutDirectory(xj.get_SN(Rg.get_AN(a))), wh.fromJSON(xj.get_TL(Rg.get_AN(a))));
          b.h[c] = d;
          if (Rg.get_SD(a) != null) {
            var e = 0;
            for (a = Lp.get_S(Rg.get_SD(a)); e < a.length;) {
              d = a[e];
              ++e;
              b = this.symbolDictionary;
              c = xj.get_SN(d);
              d = new yj(Kc.withoutDirectory(xj.get_SN(d)), wh.fromJSON(xj.get_TL(d)));
              b.h[c] = d;
            }
          }
        },
        update: function (a) {
          if (this.frameDelay != 0 && this.isPlaying && !this.get_finished()) {
            for (this._tick += a; this._tick > this.frameDelay;) {
              if (this.get_reversed()) {
                this.set_curFrame(this.get_curFrame() - 1);
              } else {
                this.set_curFrame(this.get_curFrame() + 1);
              }
              this.get_curSymbol().fireCallbacks(this.get_curFrame());
              this._tick -= this.frameDelay;
            }
            if (this.get_finished() || this.get_curFrame() == (this.get_reversed() ? 0 : this.get_curSymbol().get_length() - 1)) {
              if (this.get_loopType() == Pd.PlayOnce) {
                this.pause();
              }
              if (this.onComplete != null) {
                this.onComplete();
              }
            }
          }
        },
        get_finished: function () {
          if (this.get_loopType() == Pd.PlayOnce) {
            if (this.get_reversed() && this.get_curFrame() == 0) {
              return true;
            } else if (this.get_reversed()) {
              return false;
            } else {
              return this.get_curFrame() >= this.get_length() - 1;
            }
          } else {
            return false;
          }
        },
        get_curFrame: function () {
          return this.get_curSymbol().get_curFrame();
        },
        set_curFrame: function (a) {
          var b = this.get_curSymbol();
          switch (this.get_loopType()._hx_index) {
            case 0:
              var c = a % this.get_curSymbol().get_length();
              break;
            case 1:
              c = this.get_curSymbol().get_length() - 1;
              a = a < 0 ? 0 : a;
              c = c != null && a > c ? c : a;
              break;
            default:
              c = a;
          }
          b.set_curFrame(c);
          if (this.get_symbolType() == ae.MovieClip && !this.swfRender) {
            this.get_curSymbol().set_curFrame(0);
          }
          return this.get_curSymbol().get_curFrame();
        },
        addBySymbol: function (a, b, c, d, e, f) {
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = 0;
          }
          d = new Bf(null, new vh(null, null, null, d ? Pd.Loop : Pd.PlayOnce), new Rc(1, 0, 0, 1, e, f));
          e = Object.keys(this.symbolDictionary.h);
          f = e.length;
          for (var k = 0; k < f;) {
            var t = e[k++];
            if (this.startsWith(t, b)) {
              d.symbol.name = t;
              break;
            }
          }
          if (d.symbol.name != null) {
            this.animsMap.h[a] = {
              instance: d,
              frameRate: c
            };
          } else {
            h.log.advanced("No symbol was found with the name " + b + "!", xa.ERROR, true);
          }
        },
        startsWith: function (a, b) {
          if (w.endsWith(b, "\\")) {
            return a == b.substring(0, b.length - 1);
          } else {
            return w.startsWith(a, b);
          }
        },
        addBySymbolIndices: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = true;
          }
          if (d == null) {
            d = 0;
          }
          if (Object.prototype.hasOwnProperty.call(this.symbolDictionary.h, b)) {
            e = new Bf(null, new vh(null, null, null, e ? Pd.Loop : Pd.PlayOnce), new Rc(1, 0, 0, 1, f, k));
            f = new wh();
            f.add(null, "Layer 1");
            k = 0;
            for (var t = c.length; k < t;) {
              var n = k++;
              var g = c[n];
              n = new Sg(n);
              var p = new vh(b, null, null, e.symbol.loop);
              p.set_firstFrame(g);
              n.add(new Bf(null, p));
              f.get(0).add(n);
            }
            b = new yj(a, f);
            e.symbol.name = b.name;
            this.symbolDictionary.h[b.name] = b;
            this.animsMap.h[a] = {
              instance: e,
              frameRate: d
            };
          } else {
            h.log.advanced("" + b + " does not exist as a symbol! maybe you misspelled it?", xa.ERROR, true);
          }
        },
        set_framerate: function (a) {
          this.frameDelay = 1 / a;
          return this.framerate = a;
        },
        get_length: function () {
          return this.get_curSymbol().get_length();
        },
        get_loopType: function () {
          return this.curInstance.symbol.loop;
        },
        get_symbolType: function () {
          return this.curInstance.symbol.type;
        },
        set_symbolType: function (a) {
          return this.curInstance.symbol.set_type(a);
        },
        get_reversed: function () {
          return this.curInstance.symbol.reverse;
        },
        set_reversed: function (a) {
          return this.curInstance.symbol.reverse = a;
        },
        get_curSymbol: function () {
          return this.symbolDictionary.h[this.curInstance.symbol.name];
        },
        destroy: function () {
          this.isPlaying = false;
          this.set_curFrame(0);
          this.set_framerate(0);
          this._tick = 0;
          this.animsMap = this.buttonMap = null;
          this.curInstance.destroy();
          this.curInstance = null;
          this.stageInstance.destroy();
          this.stageInstance = null;
          this.metadata.destroy();
          this.metadata = null;
          this.swfRender = false;
          this.symbolDictionary = this._parent = null;
        },
        __class__: Gl,
        __properties__: {
          set_symbolType: "set_symbolType",
          get_symbolType: "get_symbolType",
          get_loopType: "get_loopType",
          set_curFrame: "set_curFrame",
          get_curFrame: "get_curFrame",
          set_framerate: "set_framerate",
          set_reversed: "set_reversed",
          get_reversed: "get_reversed",
          get_finished: "get_finished",
          get_curSymbol: "get_curSymbol",
          get_length: "get_length"
        }
      };
      function co(a, b) {
        this.name = a;
        this.frameRate = b;
      }
      g["flxanimate.animate.FlxMetaData"] = co;
      co.__name__ = "flxanimate.animate.FlxMetaData";
      co.prototype = {
        destroy: function () {
          this.name = null;
          this.frameRate = 0;
        },
        __class__: co
      };
      function Bf(a, b, c) {
        this.set_bitmap(a);
        this.symbol = b;
        if (b != null) {
          b._parent = this;
        }
        this.set_matrix(c == null ? new Rc() : c);
      }
      g["flxanimate.animate.FlxElement"] = Bf;
      Bf.__name__ = "flxanimate.animate.FlxElement";
      Bf.fromJSON = function (a) {
        var b = De.get_SI(a) != null;
        var c = null;
        if (b) {
          c = new vh();
          c.instance = Pe.get_IN(De.get_SI(a));
          switch (Pe.get_ST(De.get_SI(a))) {
            case "B":
            case "button":
              var d = ae.Button;
              break;
            case "MC":
            case "movieclip":
              d = ae.MovieClip;
              break;
            default:
              d = ae.Graphic;
          }
          c.set_type(d);
          switch (Pe.get_LP(De.get_SI(a)) == null ? "LP" : Pe.get_LP(De.get_SI(a)).split("R")[0]) {
            case "PO":
            case "playonce":
              d = Pd.PlayOnce;
              break;
            case "SF":
            case "singleframe":
              d = Pd.SingleFrame;
              break;
            default:
              d = Pd.Loop;
          }
          c.set_loop(d);
          c.reverse = Pe.get_LP(De.get_SI(a)) == null ? false : Pe.get_LP(De.get_SI(a)).indexOf("R") != -1;
          c.set_firstFrame(Pe.get_FF(De.get_SI(a)));
          c.set_colorEffect(Fa.fromColorJson(Pe.get_C(De.get_SI(a))));
          c.name = Pe.get_SN(De.get_SI(a));
          d = Pe.get_TRP(De.get_SI(a)).x;
          var e = Pe.get_TRP(De.get_SI(a)).y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          d = W.pool.get().set(d, e);
          d._inPool = false;
          d._weak = true;
          c.transformationPoint = d;
          c.set_filters(Fa.fromFilterJson(Pe.get_F(De.get_SI(a))));
        }
        d = b ? Pe.get_M3D(De.get_SI(a)) : Mp.get_M3D(tp.get_ASI(a));
        e = ja.fields(d);
        if (!(d instanceof Array)) {
          e.sort(function (a, b) {
            return v.parseInt(a.substring(1)) - v.parseInt(b.substring(1));
          });
        }
        if (d instanceof Array) {
          e = d;
        } else {
          var f = [];
          for (var k = 0; k < e.length;) {
            var h = e[k];
            ++k;
            f.push(ja.field(d, h));
          }
          e = f;
        }
        if (!b && d == null) {
          e[0] = e[5] = 1;
          e[1] = e[4] = e[12] = e[13] = 0;
        }
        d = b ? bp.get_POS(Pe.get_bitmap(De.get_SI(a))) : bp.get_POS(tp.get_ASI(a));
        if (d == null) {
          d = {
            x: 0,
            y: 0
          };
        }
        return new Bf(b ? bp.get_N(Pe.get_bitmap(De.get_SI(a))) : bp.get_N(tp.get_ASI(a)), c, new Rc(e[0], e[1], e[4], e[5], e[12], e[13]));
      };
      Bf.prototype = {
        destroy: function () {
          this._parent = null;
          if (this.symbol != null) {
            this.symbol.destroy();
          }
          this.set_bitmap(null);
          this.set_matrix(null);
        },
        set_bitmap: function (a) {
          if (a != this.bitmap && this.symbol != null && this.symbol.get_cacheAsBitmap()) {
            this.symbol._renderDirty = true;
          }
          return this.bitmap = a;
        },
        set_matrix: function (a) {
          if (a == null) {
            this.matrix.identity();
          } else {
            this.matrix = a;
          }
          return a;
        },
        __class__: Bf,
        __properties__: {
          set_matrix: "set_matrix",
          set_bitmap: "set_bitmap"
        }
      };
      function Sg(a, b, c, d, e) {
        if (b == null) {
          b = 1;
        }
        this._renderDirty = false;
        this.set_index(a);
        this.set_duration(b);
        this.set_name(e);
        this._elements = c == null ? [] : c;
        this.set_colorEffect(d);
        this.callbacks = [];
        this._bitmapMatrix = new Rc();
      }
      g["flxanimate.animate.FlxKeyFrame"] = Sg;
      Sg.__name__ = "flxanimate.animate.FlxKeyFrame";
      Sg.fromJSON = function (a) {
        if (a == null) {
          return null;
        }
        var b = new Sg(zj.get_I(a), zj.get_DU(a), null, null, zj.get_N(a));
        b.set_colorEffect(Fa.fromColorJson(zj.get_C(a)));
        if (zj.get_E(a) != null) {
          for (var c = 0, d = zj.get_E(a); c < d.length;) {
            var e = d[c];
            ++c;
            b.add(Bf.fromJSON(e));
          }
        }
        b.set_filters(Fa.fromFilterJson(zj.get_F(a)));
        return b;
      };
      Sg.prototype = {
        set_duration: function (a) {
          var b = null;
          var c = a < 1 ? 1 : a;
          var d = this.duration - (b != null && c > b ? b : c);
          b = null;
          c = a < 1 ? 1 : a;
          this.duration = b != null && c > b ? b : c;
          if (this._parent != null) {
            b = this._parent.get(this.index + a);
            if (b != null) {
              b.set_index(b.index - d);
            }
          }
          return a;
        },
        set_filters: function (a) {
          this._renderDirty = true;
          return this.filters = a;
        },
        update: function (a) {
          if (this.filters != null && this.filters.length != 0 && !this._renderDirty) {
            a = 0;
            for (var b = this.filters; a < b.length;) {
              var c = b[a];
              ++a;
              if (c.__renderDirty) {
                this._renderDirty = true;
                return;
              }
            }
            a = 0;
            for (b = this._elements; a < b.length;) {
              c = b[a];
              ++a;
              if (c.symbol != null && (c.symbol._renderDirty || c.symbol._layerDirty)) {
                this._renderDirty = true;
                break;
              }
            }
          }
        },
        add: function (a) {
          if (a instanceof Bf) {
            if (a == null) {
              h.log.advanced("this element is null!", xa.ERROR, true);
              return null;
            }
            a._parent = this;
            this._elements.push(a);
          } else {
            if (a == null) {
              h.log.advanced("this callback is null!", xa.ERROR, true);
              return null;
            }
            this.callbacks.push(a);
          }
          return a;
        },
        getList: function () {
          return this._elements;
        },
        fireCallbacks: function () {
          for (var a = 0; a < this.callbacks.length;) {
            this.callbacks[a]();
            ++a;
          }
        },
        destroy: function () {
          this.set_name(null);
          this.set_index(0);
          this.set_duration(0);
          this._parent = this.callbacks = null;
          this.set_colorEffect(null);
          for (var a = 0, b = this._elements; a < b.length;) {
            var c = b[a];
            ++a;
            c.destroy();
          }
        },
        set_colorEffect: function (a) {
          if (a == null) {
            a = Qd.None;
          }
          if (va.__instanceof(a, Qd)) {
            this.colorEffect = Fa.parseColorEffect(a);
          } else {
            this.colorEffect = a;
          }
          return this.colorEffect;
        },
        set_index: function (a) {
          this.index = a;
          if (this._parent != null) {
            this._parent.remove(this);
            this._parent.add(this);
          }
          return this.index;
        },
        set_name: function (a) {
          if (this._parent != null) {
            var b = this.name;
            var c = this._parent._labels;
            if (Object.prototype.hasOwnProperty.call(c.h, b)) {
              delete c.h[b];
            }
            this._parent._labels.h[a] = this;
          }
          return this.name = a;
        },
        __class__: Sg,
        __properties__: {
          set_filters: "set_filters",
          set_colorEffect: "set_colorEffect",
          set_duration: "set_duration",
          set_index: "set_index",
          set_name: "set_name"
        }
      };
      function xh(a, b) {
        this._renderable = true;
        $b.call(this);
        this.name = a;
        this.set_type(ii.Normal);
        this._keyframes = b ?? [];
        this.set_visible(true);
        this._labels = new ua();
        this._filterMatrix = new Rc();
      }
      g["flxanimate.animate.FlxLayer"] = xh;
      xh.__name__ = "flxanimate.animate.FlxLayer";
      xh.fromJSON = function (a) {
        if (a == null) {
          return null;
        }
        var b = new xh(Aj.get_LN(a));
        if (Aj.get_LT(a) != null || Aj.get_Clpb(a) != null) {
          b.set_type(Aj.get_LT(a) != null ? ii.Clipper : ii.Clipped(Aj.get_Clpb(a)));
        }
        if (Aj.get_FR(a) != null) {
          var c = 0;
          for (a = Aj.get_FR(a); c < a.length;) {
            var d = a[c];
            ++c;
            b.add(Sg.fromJSON(d));
          }
        }
        return b;
      };
      xh.__super__ = $b;
      xh.prototype = q($b.prototype, {
        destroy: function () {},
        get: function (a) {
          return this._get(a, false);
        },
        _get: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b) {
            var c = this.type;
            c = z[c.__enum__].__constructs__[c._hx_index]._hx_name == "Clipped";
          } else {
            c = false;
          }
          if (c) {
            b = this._parent.getList();
            b = b[b.indexOf(this) - 1];
            if (this._parent != null && b != null) {
              c = b.type;
              c = z[c.__enum__].__constructs__[c._hx_index]._hx_name == "Clipper";
            } else {
              c = false;
            }
            if (c) {
              b._renderable = false;
            }
          }
          if (typeof a == "string") {
            if (Object.prototype.hasOwnProperty.call(this._labels.h, a)) {
              return this._labels.h[a];
            } else {
              return null;
            }
          }
          if (a > this.get_length()) {
            return null;
          }
          b = 0;
          for (c = this._keyframes; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.index + d.duration > a) {
              return d;
            }
          }
          return null;
        },
        add: function (a) {
          if (a == null) {
            return null;
          }
          var b = a.index;
          if (a.name != null) {
            this._labels.h[a.name] = a;
          }
          var c = this.get_length() - 1;
          var d = b < 0 ? 0 : b;
          var e = this.get(c != null && d > c ? c : d);
          if (this.get_length() == 0) {
            e = new Sg(0, 1);
            this._keyframes.push(e);
          }
          c = Math.abs(b - e.index);
          if (b == e.index) {
            a.set_duration(a.duration + (e.duration - 1));
            this._keyframes.splice(this._keyframes.indexOf(e), 0, a);
            r.remove(this._keyframes, e);
            e.destroy();
          } else {
            b = e.duration;
            e.set_duration(e.duration + (c - b));
            b = b - c - 1;
            c = null;
            d = b < 0 ? 0 : b;
            a.set_duration(a.duration + (c != null && d > c ? c : d));
            this._keyframes.splice(this._keyframes.indexOf(e) + 1, 0, a);
          }
          a._parent = this;
          return a;
        },
        remove: function (a) {
          if (a instanceof Sg) {
            r.remove(this._keyframes, a);
            return a;
          } else if (this.get_length() > a) {
            a = this.get(a);
            if (a.duration > 1) {
              a.set_duration(a.duration - 1);
            } else {
              r.remove(this._keyframes, a);
            }
            return a;
          } else {
            return null;
          }
        },
        rename: function (a) {
          if (a == null) {
            a = "";
          }
          if (["", null].indexOf(a) != -1 && ["", null].indexOf(this.name) != -1) {
            a = "Layer " + (this._parent != null ? this._parent.getList().length : 1);
          }
          if (this._parent != null && this._parent.get(a) != null) {
            a += " copy";
          }
          if (["", null].indexOf(a) == -1) {
            this.name = a;
          }
        },
        set__parent: function (a) {
          this._parent = a;
          this.rename();
          return a;
        },
        get_length: function () {
          var a = this._keyframes[this._keyframes.length - 1];
          if (a != null) {
            return a.index + a.duration;
          } else {
            return 0;
          }
        },
        set_type: function (a) {
          if (this.type != null) {
            var b = this.type;
            b = z[b.__enum__].__constructs__[b._hx_index]._hx_name == "Clipped";
          } else {
            b = false;
          }
          if (b) {
            var c = this._parent.getList();
            c = c[c.indexOf(this) - 1];
            if (this._parent != null && c != null) {
              b = c.type;
              b = z[b.__enum__].__constructs__[b._hx_index]._hx_name == "Clipper";
            } else {
              b = false;
            }
            if (b) {
              c._renderable = true;
            }
          }
          return this.type = a;
        },
        _setCurFrame: function (a) {
          if (this.get_length() == 0 || a > this.get_length()) {
            this._currFrame = null;
          } else if (this._currFrame != null) {
            if (!(a >= this._currFrame.index) || !(a < this._currFrame.duration)) {
              var b = this._keyframes.indexOf(this._currFrame);
              if (a >= this._currFrame.index + this._currFrame.duration) {
                for (var c = this._keyframes[b]; a >= c.index + c.duration && (c = this._keyframes[b++], c != null););
                this._currFrame = c;
              } else if (a < this._currFrame.index) {
                for (c = this._keyframes[b]; a < c.index && (c = this._keyframes[b--], c != null););
                this._currFrame = c;
              }
            }
          } else {
            this._currFrame = this.get(a);
          }
        },
        __class__: xh,
        __properties__: q($b.prototype.__properties__, {
          get_length: "get_length",
          set_type: "set_type",
          set__parent: "set__parent"
        })
      });
      function yj(a, b) {
        this.activeCount = 0;
        this.layers = [];
        this.set_curFrame(0);
        this.timeline = b;
        b._parent = this;
        this.name = a;
        this.activeCount = 0;
      }
      g["flxanimate.animate.FlxSymbol"] = yj;
      yj.__name__ = "flxanimate.animate.FlxSymbol";
      yj.prototype = {
        fireCallbacks: function (a) {
          if (a == null) {
            a = this._curFrame;
          }
          for (var b = 0, c = this.timeline.getList(); b < c.length;) {
            var d = c[b];
            ++b;
            var e = d._labels.h;
            d = e;
            e = Object.keys(e);
            for (var f = e.length, k = 0; k < f;) {
              var h = d[e[k++]];
              if (h.index == a) {
                h.fireCallbacks();
              }
            }
          }
          if (this.onCallback != null) {
            this.onCallback();
          }
        },
        get_length: function () {
          return this.timeline.get_totalFrames();
        },
        get_curFrame: function () {
          return this._curFrame;
        },
        set_curFrame: function (a) {
          return this._curFrame = a;
        },
        __class__: yj,
        __properties__: {
          set_curFrame: "set_curFrame",
          get_curFrame: "get_curFrame",
          get_length: "get_length"
        }
      };
      function wh(a) {
        this._layers = a ?? [];
      }
      g["flxanimate.animate.FlxTimeline"] = wh;
      wh.__name__ = "flxanimate.animate.FlxTimeline";
      wh.fromJSON = function (a) {
        if (a == null || zp.get_L(a) == null) {
          return null;
        }
        var b = [];
        var c = 0;
        for (a = zp.get_L(a); c < a.length;) {
          var d = a[c];
          ++c;
          b.push(xh.fromJSON(d));
        }
        return new wh(b);
      };
      wh.prototype = {
        getList: function () {
          return this._layers;
        },
        get: function (a) {
          if (typeof a == "number" && (a | 0) === a) {
            return this._layers[a];
          }
          for (var b = 0, c = this._layers; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.name == a) {
              return d;
            }
          }
          return null;
        },
        add: function (a, b) {
          if (a == null) {
            a = 0;
          }
          b = typeof b == "string" || b == null ? new xh(b) : b;
          b.set__parent(this);
          this._layers.splice(a, 0, b);
          return b;
        },
        get_totalFrames: function () {
          var a = 0;
          for (var b = 0, c = this._layers; b < c.length;) {
            var d = c[b];
            ++b;
            d = d.get_length();
            if (a < d) {
              a = d;
            }
          }
          return a;
        },
        __class__: wh,
        __properties__: {
          get_totalFrames: "get_totalFrames"
        }
      };
      function vh(a, b, c, d) {
        if (d == null) {
          d = Pd.Loop;
        }
        if (c == null) {
          c = ae.Graphic;
        }
        if (b == null) {
          b = "";
        }
        this._cacheAsBitmap = this._renderDirty = this._layerDirty = false;
        this.name = a;
        this.instance = b;
        this.set_type(c);
        this.set_loop(d);
        this.set_firstFrame(0);
        a = b = 0;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = W.pool.get().set(b, a);
        a._inPool = false;
        this.transformationPoint = a;
        this.set_colorEffect(Qd.None);
        this._curFrame = -1;
        this.set_filters(null);
        this.cacheAsBitmapMatrix = new Rc();
        this._cacheBitmapMatrix = new Rc();
      }
      g["flxanimate.animate.SymbolParameters"] = vh;
      vh.__name__ = "flxanimate.animate.SymbolParameters";
      vh.prototype = {
        destroy: function () {
          this.instance = null;
          this.set_type(null);
          this.reverse = false;
          this.set_firstFrame(0);
          this.name = null;
          this.set_colorEffect(null);
          this.transformationPoint = null;
        },
        set_type: function (a) {
          this.type = a;
          this.set_loop(a == null ? null : Pd.Loop);
          if (a == ae.Graphic) {
            this.set_filters(null);
            ca.destroy(this._filterBitmap);
            this.set_cacheAsBitmap(false);
          }
          return a;
        },
        set_loop: function (a) {
          if (this.type == null) {
            return this.loop = null;
          }
          switch (this.type._hx_index) {
            case 1:
              var b = Pd.Loop;
              break;
            case 2:
              b = Pd.SingleFrame;
              break;
            default:
              b = a;
          }
          this.loop = b;
          return a;
        },
        set_firstFrame: function (a) {
          if (this.type == ae.Graphic && this.firstFrame != a) {
            this.firstFrame = a;
            this._layerDirty = true;
          }
          return a;
        },
        reset: function () {
          this.name = null;
          this.set_type(ae.Graphic);
          this.set_loop(Pd.Loop);
          this.instance = "";
          this.set_firstFrame(0);
          var a = this.transformationPoint;
          a.set_x(0);
          a.set_y(0);
          this.set_colorEffect(Qd.None);
        },
        set_colorEffect: function (a) {
          if (this.get_cacheAsBitmap()) {
            this._renderDirty = true;
          }
          if (a == null) {
            a = Qd.None;
          }
          if (va.__instanceof(a, Qd)) {
            this.colorEffect = Fa.parseColorEffect(a);
          } else {
            this.colorEffect = a;
          }
          return this.colorEffect;
        },
        set_filters: function (a) {
          if (this.type == ae.Graphic) {
            return null;
          }
          if (a != null && a.length > 0) {
            this._renderDirty = true;
          } else if (this._cacheAsBitmap) {
            this._renderDirty = true;
          } else {
            this._filterBitmap = ca.destroy(this._filterBitmap);
          }
          return this.filters = a;
        },
        get_cacheAsBitmap: function () {
          if (this.type == ae.Graphic) {
            return false;
          } else if (this.filters != null && this.filters.length > 0) {
            return true;
          } else {
            return this._cacheAsBitmap;
          }
        },
        set_cacheAsBitmap: function (a) {
          if (this.type == ae.Graphic) {
            return false;
          }
          if (a) {
            this._renderDirty = true;
          }
          return this._cacheAsBitmap = a;
        },
        __class__: vh,
        __properties__: {
          set_filters: "set_filters",
          set_cacheAsBitmap: "set_cacheAsBitmap",
          get_cacheAsBitmap: "get_cacheAsBitmap",
          set_colorEffect: "set_colorEffect",
          set_firstFrame: "set_firstFrame",
          set_loop: "set_loop",
          set_type: "set_type"
        }
      };
      function Fa() {}
      g["flxanimate.data.AnimationData"] = Fa;
      Fa.__name__ = "flxanimate.data.AnimationData";
      Fa.setFieldBool = function (a, b, c) {
        if (a == null) {
          return ja.field({}, "");
        }
        for (var d = 0; d < b.length;) {
          var e = b[d];
          ++d;
          if (c != null) {
            return a[e] = c;
          }
          if (Object.prototype.hasOwnProperty.call(a, e)) {
            return ja.field(a, e);
          }
        }
        return ja.field(a, "");
      };
      Fa.fromColorJson = function (a) {
        var b = Qd.None;
        if (a == null) {
          return b;
        }
        switch (pf.get_M(a)) {
          case "AD":
          case "Advanced":
            b = new Lb();
            b.redMultiplier = pf.get_RM(a);
            b.redOffset = pf.get_RO(a);
            b.greenMultiplier = pf.get_GM(a);
            b.greenOffset = pf.get_GO(a);
            b.blueMultiplier = pf.get_BM(a);
            b.blueOffset = pf.get_BO(a);
            b.alphaMultiplier = pf.get_AM(a);
            b.alphaOffset = pf.get_AO(a);
            b = Qd.Advanced(b);
            break;
          case "Alpha":
          case "CA":
            b = Qd.Alpha(pf.get_AM(a));
            break;
          case "Brightness":
          case "CBRT":
            b = Qd.Brightness(pf.get_BRT(a));
            break;
          case "T":
          case "Tint":
            b = "0x" + pf.get_TC(a).substring(1);
            b = Qd.Tint(v.parseInt(b), pf.get_TM(a));
            break;
          default:
            h.log.advanced("color Effect mode \"" + pf.get_M(a) + "\" is invalid or not supported!", xa.ERROR, true);
        }
        return b;
      };
      Fa.colorFromString = function (a) {
        return v.parseInt("0x" + a.substring(1));
      };
      Fa.fromFilterJson = function (a) {
        if (a == null) {
          return null;
        }
        var b = [];
        for (var c = 0, d = ja.fields(a); c < d.length;) {
          var e = d[c];
          ++c;
          switch (e) {
            case "ACF":
            case "AdjustColorFilter":
              e = ja.field(a, e);
              var f = new Bj();
              f.set_hue(cp.get_H(e));
              f.set_brightness(cp.get_BRT(e));
              f.set_contrast(cp.get_CT(e));
              f.set_saturation(cp.get_SAT(e));
              b.push(new Tg(f.calculateFinalFlatArray()));
              break;
            case "BF":
            case "BevelFilter":
              e = ja.field(a, e);
              b.push(new Cf(yh.get_DST(e), yh.get_AL(e), Fa.colorFromString(yh.get_HC(e)), yh.get_HA(e), Fa.colorFromString(yh.get_SC(e)), yh.get_SA(e), zh.get_BLX(e), zh.get_BLY(e), yh.get_STR(e), zh.get_Q(e), yh.get_TP(e), yh.get_KK(e)));
              break;
            case "BLF":
            case "BlurFilter":
              e = ja.field(a, e);
              b.push(new Df(zh.get_BLX(e), zh.get_BLY(e), zh.get_Q(e)));
              break;
            case "GF":
            case "GlowFilter":
              e = ja.field(a, e);
              b.push(new Ed(Fa.colorFromString(eo.get_C(e)), eo.get_A(e), zh.get_BLX(e), zh.get_BLY(e), eo.get_STR(e), zh.get_Q(e), eo.get_IN(e), eo.get_KK(e)));
          }
        }
        return b;
      };
      Fa.parseColorEffect = function (a) {
        if (a == null) {
          a = Qd.None;
        }
        var b = null;
        if ([Qd.None, null].indexOf(a) == -1) {
          b = yb.enumParameters(a);
          switch (z[a.__enum__].__constructs__[a._hx_index]._hx_name) {
            case "Advanced":
              b = new Jl(b[0]);
              break;
            case "Alpha":
              b = new Kl(b[0]);
              break;
            case "Brightness":
              b = new Ll(b[0]);
              break;
            case "Tint":
              b = new Ml(b[0], b[1]);
              break;
            default:
              b = new ne();
          }
        }
        return b;
      };
      var Qd = z["flxanimate.data.ColorEffect"] = {
        __ename__: "flxanimate.data.ColorEffect",
        __constructs__: null,
        None: {
          _hx_name: "None",
          _hx_index: 0,
          __enum__: "flxanimate.data.ColorEffect",
          toString: p
        },
        Brightness: (u = function (a) {
          return {
            _hx_index: 1,
            Bright: a,
            __enum__: "flxanimate.data.ColorEffect",
            toString: p
          };
        }, u._hx_name = "Brightness", u.__params__ = ["Bright"], u),
        Tint: (u = function (a, b) {
          return {
            _hx_index: 2,
            Color: a,
            Opacity: b,
            __enum__: "flxanimate.data.ColorEffect",
            toString: p
          };
        }, u._hx_name = "Tint", u.__params__ = ["Color", "Opacity"], u),
        Alpha: (u = function (a) {
          return {
            _hx_index: 3,
            Alpha: a,
            __enum__: "flxanimate.data.ColorEffect",
            toString: p
          };
        }, u._hx_name = "Alpha", u.__params__ = ["Alpha"], u),
        Advanced: (u = function (a) {
          return {
            _hx_index: 4,
            transform: a,
            __enum__: "flxanimate.data.ColorEffect",
            toString: p
          };
        }, u._hx_name = "Advanced", u.__params__ = ["transform"], u)
      };
      Qd.__constructs__ = [Qd.None, Qd.Brightness, Qd.Tint, Qd.Alpha, Qd.Advanced];
      var Pd = z["flxanimate.data.Loop"] = {
        __ename__: "flxanimate.data.Loop",
        __constructs__: null,
        Loop: {
          _hx_name: "Loop",
          _hx_index: 0,
          __enum__: "flxanimate.data.Loop",
          toString: p
        },
        PlayOnce: {
          _hx_name: "PlayOnce",
          _hx_index: 1,
          __enum__: "flxanimate.data.Loop",
          toString: p
        },
        SingleFrame: {
          _hx_name: "SingleFrame",
          _hx_index: 2,
          __enum__: "flxanimate.data.Loop",
          toString: p
        }
      };
      Pd.__constructs__ = [Pd.Loop, Pd.PlayOnce, Pd.SingleFrame];
      var ae = z["flxanimate.data.SymbolT"] = {
        __ename__: "flxanimate.data.SymbolT",
        __constructs__: null,
        Graphic: {
          _hx_name: "Graphic",
          _hx_index: 0,
          __enum__: "flxanimate.data.SymbolT",
          toString: p
        },
        MovieClip: {
          _hx_name: "MovieClip",
          _hx_index: 1,
          __enum__: "flxanimate.data.SymbolT",
          toString: p
        },
        Button: {
          _hx_name: "Button",
          _hx_index: 2,
          __enum__: "flxanimate.data.SymbolT",
          toString: p
        }
      };
      ae.__constructs__ = [ae.Graphic, ae.MovieClip, ae.Button];
      var ii = z["flxanimate.data.LayerType"] = {
        __ename__: "flxanimate.data.LayerType",
        __constructs__: null,
        Normal: {
          _hx_name: "Normal",
          _hx_index: 0,
          __enum__: "flxanimate.data.LayerType",
          toString: p
        },
        Clipper: {
          _hx_name: "Clipper",
          _hx_index: 1,
          __enum__: "flxanimate.data.LayerType",
          toString: p
        },
        Clipped: (u = function (a) {
          return {
            _hx_index: 2,
            layer: a,
            __enum__: "flxanimate.data.LayerType",
            toString: p
          };
        }, u._hx_name = "Clipped", u.__params__ = ["layer"], u),
        Folder: {
          _hx_name: "Folder",
          _hx_index: 3,
          __enum__: "flxanimate.data.LayerType",
          toString: p
        }
      };
      ii.__constructs__ = [ii.Normal, ii.Clipper, ii.Clipped, ii.Folder];
      var Rg = {
        __properties__: {
          get_MD: "get_MD",
          get_SD: "get_SD",
          get_AN: "get_AN"
        },
        get_AN: function (a) {
          return Fa.setFieldBool(a, ["AN", "ANIMATION"]);
        },
        get_MD: function (a) {
          return Fa.setFieldBool(a, ["MD", "metadata"]);
        },
        get_SD: function (a) {
          return Fa.setFieldBool(a, ["SD", "SYMBOL_DICTIONARY"]);
        }
      };
      var Lp = {
        __properties__: {
          get_S: "get_S"
        },
        get_S: function (a) {
          return Fa.setFieldBool(a, ["S", "Symbols"]);
        }
      };
      var sp = {
        __properties__: {
          get_STI: "get_STI",
          get_N: "get_N"
        },
        get_N: function (a) {
          return Fa.setFieldBool(a, ["N", "name"]);
        },
        get_STI: function (a) {
          return Fa.setFieldBool(a, ["STI", "StageInstance"]);
        }
      };
      var De = {
        __properties__: {
          get_SI: "get_SI"
        },
        get_SI: function (a) {
          return Fa.setFieldBool(a, ["SI", "SYMBOL_Instance"]);
        }
      };
      var xj = {
        __properties__: {
          get_TL: "get_TL",
          get_SN: "get_SN"
        },
        get_SN: function (a) {
          return Fa.setFieldBool(a, ["SN", "SYMBOL_name"]);
        },
        get_TL: function (a) {
          return Fa.setFieldBool(a, ["TL", "TIMELINE"]);
        }
      };
      var zp = {
        __properties__: {
          get_L: "get_L"
        },
        get_L: function (a) {
          return Fa.setFieldBool(a, ["L", "LAYERS"]);
        }
      };
      var Aj = {
        __properties__: {
          get_FR: "get_FR",
          get_Clpb: "get_Clpb",
          get_LT: "get_LT",
          get_LN: "get_LN"
        },
        get_LN: function (a) {
          return Fa.setFieldBool(a, ["LN", "Layer_name"]);
        },
        get_LT: function (a) {
          return Fa.setFieldBool(a, ["LT", "Layer_type"]);
        },
        get_Clpb: function (a) {
          return Fa.setFieldBool(a, ["Clpb", "Clipped_by"]);
        },
        get_FR: function (a) {
          return Fa.setFieldBool(a, ["FR", "Frames"]);
        }
      };
      var Kp = {
        __properties__: {
          get_FRT: "get_FRT"
        },
        get_FRT: function (a) {
          return Fa.setFieldBool(a, ["FRT", "framerate"]);
        }
      };
      var zj = {
        __properties__: {
          get_F: "get_F",
          get_C: "get_C",
          get_E: "get_E",
          get_DU: "get_DU",
          get_I: "get_I",
          get_N: "get_N"
        },
        get_N: function (a) {
          return Fa.setFieldBool(a, ["N", "name"]);
        },
        get_I: function (a) {
          return Fa.setFieldBool(a, ["I", "index"]);
        },
        get_DU: function (a) {
          return Fa.setFieldBool(a, ["DU", "duration"]);
        },
        get_E: function (a) {
          return Fa.setFieldBool(a, ["E", "elements"]);
        },
        get_C: function (a) {
          return Fa.setFieldBool(a, ["C", "color"]);
        },
        get_F: function (a) {
          return Fa.setFieldBool(a, ["F", "filters"]);
        }
      };
      var tp = {
        __properties__: {
          get_ASI: "get_ASI"
        },
        get_ASI: function (a) {
          return Fa.setFieldBool(a, ["ASI", "ATLAS_SPRITE_instance"]);
        }
      };
      var Pe = {
        __properties__: {
          get_F: "get_F",
          get_C: "get_C",
          get_M3D: "get_M3D",
          get_TRP: "get_TRP",
          get_LP: "get_LP",
          get_FF: "get_FF",
          get_bitmap: "get_bitmap",
          get_ST: "get_ST",
          get_IN: "get_IN",
          get_SN: "get_SN"
        },
        get_SN: function (a) {
          return Fa.setFieldBool(a, ["SN", "SYMBOL_name"]);
        },
        get_IN: function (a) {
          return Fa.setFieldBool(a, ["IN", "Instance_Name"]);
        },
        get_ST: function (a) {
          return Fa.setFieldBool(a, ["ST", "symbolType"]);
        },
        get_bitmap: function (a) {
          return Fa.setFieldBool(a, ["BM", "bitmap"]);
        },
        get_FF: function (a) {
          return Fa.setFieldBool(a, ["FF", "firstFrame"]);
        },
        get_LP: function (a) {
          return Fa.setFieldBool(a, ["LP", "loop"]);
        },
        get_TRP: function (a) {
          return Fa.setFieldBool(a, ["TRP", "transformationPoint"]);
        },
        get_M3D: function (a) {
          return Fa.setFieldBool(a, ["M3D", "Matrix3D"]);
        },
        get_C: function (a) {
          return Fa.setFieldBool(a, ["C", "color"]);
        },
        get_F: function (a) {
          return Fa.setFieldBool(a, ["F", "filters"]);
        }
      };
      var pf = {
        __properties__: {
          get_BRT: "get_BRT",
          get_BO: "get_BO",
          get_BM: "get_BM",
          get_GO: "get_GO",
          get_GM: "get_GM",
          get_RO: "get_RO",
          get_RM: "get_RM",
          get_AO: "get_AO",
          get_AM: "get_AM",
          get_TM: "get_TM",
          get_TC: "get_TC",
          get_M: "get_M"
        },
        get_M: function (a) {
          return Fa.setFieldBool(a, ["M", "mode"]);
        },
        get_TC: function (a) {
          return Fa.setFieldBool(a, ["TC", "tintColor"]);
        },
        get_TM: function (a) {
          return Fa.setFieldBool(a, ["TM", "tintMultiplier"]);
        },
        get_AM: function (a) {
          return Fa.setFieldBool(a, ["AM", "alphaMultiplier"]);
        },
        get_AO: function (a) {
          return Fa.setFieldBool(a, ["AO", "AlphaOffset"]);
        },
        get_RM: function (a) {
          return Fa.setFieldBool(a, ["RM", "RedMultiplier"]);
        },
        get_RO: function (a) {
          return Fa.setFieldBool(a, ["RO", "redOffset"]);
        },
        get_GM: function (a) {
          return Fa.setFieldBool(a, ["GM", "greenMultiplier"]);
        },
        get_GO: function (a) {
          return Fa.setFieldBool(a, ["GO", "greenOffset"]);
        },
        get_BM: function (a) {
          return Fa.setFieldBool(a, ["BM", "blueMultiplier"]);
        },
        get_BO: function (a) {
          return Fa.setFieldBool(a, ["BO", "blueOffset"]);
        },
        get_BRT: function (a) {
          return Fa.setFieldBool(a, ["BRT", "Brightness"]);
        }
      };
      var cp = {
        __properties__: {
          get_H: "get_H",
          get_SAT: "get_SAT",
          get_CT: "get_CT",
          get_BRT: "get_BRT"
        },
        get_BRT: function (a) {
          return Fa.setFieldBool(a, ["BRT", "brightness"]);
        },
        get_CT: function (a) {
          return Fa.setFieldBool(a, ["CT", "contrast"]);
        },
        get_SAT: function (a) {
          return Fa.setFieldBool(a, ["SAT", "saturation"]);
        },
        get_H: function (a) {
          return Fa.setFieldBool(a, ["H", "hue"]);
        }
      };
      var zh = {
        __properties__: {
          get_Q: "get_Q",
          get_BLY: "get_BLY",
          get_BLX: "get_BLX"
        },
        get_BLX: function (a) {
          return Fa.setFieldBool(a, ["BLX", "blurX"]);
        },
        get_BLY: function (a) {
          return Fa.setFieldBool(a, ["BLY", "blurY"]);
        },
        get_Q: function (a) {
          return Fa.setFieldBool(a, ["Q", "quality"]);
        }
      };
      var eo = {
        __properties__: {
          get_IN: "get_IN",
          get_KK: "get_KK",
          get_STR: "get_STR",
          get_A: "get_A",
          get_C: "get_C"
        },
        get_C: function (a) {
          return Fa.setFieldBool(a, ["C"]);
        },
        get_A: function (a) {
          return Fa.setFieldBool(a, ["A"]);
        },
        get_STR: function (a) {
          return Fa.setFieldBool(a, ["STR", "strength"]);
        },
        get_KK: function (a) {
          return Fa.setFieldBool(a, ["KK", "knockout"]);
        },
        get_IN: function (a) {
          return Fa.setFieldBool(a, ["IN"]);
        }
      };
      var yh = {
        __properties__: {
          get_TP: "get_TP",
          get_DST: "get_DST",
          get_AL: "get_AL",
          get_KK: "get_KK",
          get_STR: "get_STR",
          get_HA: "get_HA",
          get_HC: "get_HC",
          get_SA: "get_SA",
          get_SC: "get_SC"
        },
        get_SC: function (a) {
          return Fa.setFieldBool(a, ["SC", "shadowColor"]);
        },
        get_SA: function (a) {
          return Fa.setFieldBool(a, ["SA", "shadowAlpha"]);
        },
        get_HC: function (a) {
          return Fa.setFieldBool(a, ["HC", "highlightColor"]);
        },
        get_HA: function (a) {
          return Fa.setFieldBool(a, ["HA", "highlightAlpha"]);
        },
        get_STR: function (a) {
          return Fa.setFieldBool(a, ["STR", "strength"]);
        },
        get_KK: function (a) {
          return Fa.setFieldBool(a, ["KK", "knockout"]);
        },
        get_AL: function (a) {
          return Fa.setFieldBool(a, ["AL", "angle"]);
        },
        get_DST: function (a) {
          return Fa.setFieldBool(a, ["DST", "distance"]);
        },
        get_TP: function (a) {
          return Fa.setFieldBool(a, ["TP", "type"]);
        }
      };
      var bp = {
        __properties__: {
          get_POS: "get_POS",
          get_N: "get_N"
        },
        get_N: function (a) {
          return Fa.setFieldBool(a, ["N", "name"]);
        },
        get_POS: function (a) {
          return Fa.setFieldBool(a, ["POS", "Position"]);
        }
      };
      var Mp = {
        __properties__: {
          get_M3D: "get_M3D"
        },
        get_M3D: function (a) {
          return Fa.setFieldBool(a, ["M3D", "Matrix3D"]);
        }
      };
      function bo() {
        this.renderer = new tb(h.game.stage.context3D);
      }
      g["flxanimate.display.FlxAnimateFilterRenderer"] = bo;
      bo.__name__ = "flxanimate.display.FlxAnimateFilterRenderer";
      bo.prototype = {
        applyFilter: function (a, b, c) {
          if (b == null || b.length == 0) {
            return a;
          }
          this.renderer.__setBlendMode(10);
          this.renderer.__worldAlpha = 1;
          if (this.renderer.__worldTransform == null) {
            this.renderer.__worldTransform = new za();
            this.renderer.__worldColorTransform = new Lb();
          }
          c = new T(Math.ceil(c.width), Math.ceil(c.height), true, 0);
          var d = c.clone();
          var e = d.clone();
          c.copyPixels(a, a.rect, new lb((c.width - a.width) * 0.5, (c.height - a.height) * 0.5));
          this.renderer.__setBlendMode(10);
          this.renderer.__worldAlpha = 1;
          this.renderer.__worldTransform.identity();
          this.renderer.__worldColorTransform.__identity();
          var f = null;
          for (a = 0; a < b.length;) {
            var k = b[a];
            ++a;
            if (k.__preserveObject) {
              this.renderer.__setRenderTarget(e);
              this.renderer.__renderFilterPass(c, this.renderer.__defaultDisplayShader, k.__smooth);
            }
            for (var h = 0, n = k.__numShaderPasses; h < n;) {
              f = h++;
              f = k.__initShader(this.renderer, f, k.__preserveObject ? e : null);
              this.renderer.__setBlendMode(k.__shaderBlendMode);
              this.renderer.__setRenderTarget(d);
              this.renderer.__renderFilterPass(c, f, k.__smooth);
              f = c;
              c = d;
              d = f;
            }
            k.__renderDirty = false;
          }
          d.dispose();
          e.dispose();
          if (f != null) {
            f.dispose();
          }
          return c;
        },
        graphicstoBitmapData: function (a) {
          B.render(a, this.renderer.__softwareRenderer);
          var b = a.__bitmap;
          a.__bitmap = null;
          a.__renderTransform.identity();
          return b;
        },
        __class__: bo
      };
      function ne() {
        this.c_Transform = null;
        this.renderDirty = true;
      }
      g["flxanimate.effects.FlxColorEffect"] = ne;
      ne.__name__ = "flxanimate.effects.FlxColorEffect";
      ne.prototype = {
        process: function () {},
        __create: function () {
          if (!this.renderDirty) {
            return this.c_Transform;
          }
          if (this.c_Transform == null) {
            this.c_Transform = new Lb();
          }
          this.process();
          this.renderDirty = false;
          return this.c_Transform;
        },
        __class__: ne
      };
      function Jl(a) {
        ne.call(this);
        this.set_colorTransform(a);
      }
      g["flxanimate.effects.FlxAdvanced"] = Jl;
      Jl.__name__ = "flxanimate.effects.FlxAdvanced";
      Jl.__super__ = ne;
      Jl.prototype = q(ne.prototype, {
        set_colorTransform: function (a) {
          return this.c_Transform = a;
        },
        __class__: Jl,
        __properties__: {
          set_colorTransform: "set_colorTransform"
        }
      });
      function Kl(a) {
        ne.call(this);
        this.set_alpha(a);
      }
      g["flxanimate.effects.FlxAlpha"] = Kl;
      Kl.__name__ = "flxanimate.effects.FlxAlpha";
      Kl.__super__ = ne;
      Kl.prototype = q(ne.prototype, {
        process: function () {
          this.c_Transform.alphaMultiplier = this.alpha;
        },
        set_alpha: function (a) {
          if (this.alpha != a) {
            this.renderDirty = true;
          }
          return this.alpha = a;
        },
        __class__: Kl,
        __properties__: {
          set_alpha: "set_alpha"
        }
      });
      function Ll(a) {
        ne.call(this);
        this.set_brightness(a);
      }
      g["flxanimate.effects.FlxBrightness"] = Ll;
      Ll.__name__ = "flxanimate.effects.FlxBrightness";
      Ll.__super__ = ne;
      Ll.prototype = q(ne.prototype, {
        process: function () {
          this.c_Transform.redMultiplier = this.c_Transform.greenMultiplier = this.c_Transform.blueMultiplier = 1 - Math.abs(this.brightness);
          if (this.brightness >= 0) {
            this.c_Transform.redOffset = this.c_Transform.greenOffset = this.c_Transform.blueOffset = this.brightness * 255;
          }
        },
        set_brightness: function (a) {
          if (this.brightness != a) {
            this.renderDirty = true;
          }
          return this.brightness = a;
        },
        __class__: Ll,
        __properties__: {
          set_brightness: "set_brightness"
        }
      });
      function Ml(a, b) {
        ne.call(this);
        b = Math.round(b * 255);
        this.set_tint(a & 16777215 | (b > 255 ? 255 : b < 0 ? 0 : b) << 24);
      }
      g["flxanimate.effects.FlxTint"] = Ml;
      Ml.__name__ = "flxanimate.effects.FlxTint";
      Ml.__super__ = ne;
      Ml.prototype = q(ne.prototype, {
        process: function () {
          var a = (this.tint >> 24 & 255) / 255;
          var b = 1 - a;
          this.c_Transform.redMultiplier = b;
          this.c_Transform.redOffset = Math.round((this.tint >> 16 & 255) * a);
          this.c_Transform.greenMultiplier = b;
          this.c_Transform.greenOffset = Math.round((this.tint >> 8 & 255) * a);
          this.c_Transform.blueMultiplier = b;
          this.c_Transform.blueOffset = Math.round((this.tint & 255) * a);
        },
        set_tint: function (a) {
          if (this.tint != a) {
            this.renderDirty = true;
          }
          return this.tint = a;
        },
        __class__: Ml,
        __properties__: {
          set_tint: "set_tint"
        }
      });
      function oe() {
        this.__leftExtension = this.__bottomExtension = 0;
        this.__needSecondBitmapData = true;
        this.__numShaderPasses = 0;
        this.__preserveObject = false;
        this.__rightExtension = 0;
        this.__shaderBlendMode = 10;
        this.__topExtension = 0;
        this.__smooth = true;
      }
      g["openfl.filters.BitmapFilter"] = oe;
      oe.__name__ = "openfl.filters.BitmapFilter";
      oe.prototype = {
        clone: function () {
          return new oe();
        },
        __applyFilter: function (a, b, c, d) {
          return b;
        },
        __initShader: function (a, b, c) {
          return null;
        },
        __class__: oe
      };
      function nc(a) {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}";
        }
        ge.call(this, a);
        this.__isGenerated = true;
        this.__initGL();
      }
      g["openfl.filters.BitmapFilterShader"] = nc;
      nc.__name__ = "openfl.filters.BitmapFilterShader";
      nc.__super__ = ge;
      nc.prototype = q(ge.prototype, {
        __class__: nc
      });
      function qf() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec4 uColorH;\r\n\t\tuniform vec4 uColorS;\r\n\t\tuniform int knockout;\r\n\t\tuniform sampler2D sourceBitmap;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\t\tvoid main(void) {\n\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\r\n\t\tvec4 highlight = texture2D(openfl_Texture, textureCoords.zw);\r\n\t\thighlight.rgb = vec3(1., 1., 1.) * highlight.a;\r\n\t\tvec4 shadow = texture2D(openfl_Texture, textureCoords.xy);\r\n\r\n\t\tshadow.rgb = vec3(1., 1., 1.) * shadow.a;\r\n\r\n\t\tvec4 a = highlight;\r\n\r\n\t\thighlight = mix(highlight, vec4(0.), shadow.a);\r\n\t\t\r\n\t\tshadow = mix(shadow, vec4(0.), a.a);\r\n\r\n\t\tvec4 bevel = (uColorS * shadow) + (uColorH * highlight);\r\n\r\n\t\tvec4 src = texture2D(sourceBitmap, openfl_TextureCoordv);\r\n\t\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec2 offset;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\ntextureCoords = vec4(openfl_TextureCoord - offset / openfl_TextureSize, openfl_TextureCoord + offset / openfl_TextureSize);\n\n\t\t}";
        }
        nc.call(this);
        this.uColorH.value = [0, 0, 0, 0];
        this.uColorS.value = [0, 0, 0, 0];
        this.offset.value = [0, 0];
        this.knockout.value = [0];
        this.__isGenerated = true;
        this.__initGL();
      }
      g["flxanimate.filters._BevelFilter.BevelShader"] = qf;
      qf.__name__ = "flxanimate.filters._BevelFilter.BevelShader";
      qf.__super__ = nc;
      qf.prototype = q(nc.prototype, {
        __class__: qf
      });
      function Nl() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\r\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec4 uColorH;\r\n\t\tuniform vec4 uColorS;\r\n\t\tuniform int knockout;\r\n\t\tuniform sampler2D sourceBitmap;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\r\n\r\n\t\tvoid main(void) {\r\n\t\t\t\r\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\r\n\t\tvec4 highlight = texture2D(openfl_Texture, textureCoords.zw);\r\n\t\thighlight.rgb = vec3(1., 1., 1.) * highlight.a;\r\n\t\tvec4 shadow = texture2D(openfl_Texture, textureCoords.xy);\r\n\r\n\t\tshadow.rgb = vec3(1., 1., 1.) * shadow.a;\r\n\r\n\t\tvec4 a = highlight;\r\n\r\n\t\thighlight = mix(highlight, vec4(0.), shadow.a);\r\n\t\t\r\n\t\tshadow = mix(shadow, vec4(0.), a.a);\r\n\r\n\t\tvec4 bevel = (uColorS * shadow) + (uColorH * highlight);\r\n\r\n\t\tvec4 src = texture2D(sourceBitmap, openfl_TextureCoordv);\r\n\t\n\r\n\r\n\t\t\tif (knockout == 0)\r\n\t\t\t\tgl_FragColor = src + bevel * (1.0 - src.a);\r\n\t\t\telse\r\n\t\t\t\tgl_FragColor = bevel * (1.0 - src.a);\r\n\t\t}\r\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec2 offset;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\ntextureCoords = vec4(openfl_TextureCoord - offset / openfl_TextureSize, openfl_TextureCoord + offset / openfl_TextureSize);\n\n\n\t\t}";
        }
        qf.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      g["flxanimate.filters._BevelFilter.CombineShader"] = Nl;
      Nl.__name__ = "flxanimate.filters._BevelFilter.CombineShader";
      Nl.__super__ = qf;
      Nl.prototype = q(qf.prototype, {
        __class__: Nl
      });
      var yp = {
        _new: function (a) {
          return {};
        }
      };
      function Ol() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\r\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec4 uColorH;\r\n\t\tuniform vec4 uColorS;\r\n\t\tuniform int knockout;\r\n\t\tuniform sampler2D sourceBitmap;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\r\n\r\n\t\tvoid main(void) {\r\n\r\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\r\n\t\tvec4 highlight = texture2D(openfl_Texture, textureCoords.zw);\r\n\t\thighlight.rgb = vec3(1., 1., 1.) * highlight.a;\r\n\t\tvec4 shadow = texture2D(openfl_Texture, textureCoords.xy);\r\n\r\n\t\tshadow.rgb = vec3(1., 1., 1.) * shadow.a;\r\n\r\n\t\tvec4 a = highlight;\r\n\r\n\t\thighlight = mix(highlight, vec4(0.), shadow.a);\r\n\t\t\r\n\t\tshadow = mix(shadow, vec4(0.), a.a);\r\n\r\n\t\tvec4 bevel = (uColorS * shadow) + (uColorH * highlight);\r\n\r\n\t\tvec4 src = texture2D(sourceBitmap, openfl_TextureCoordv);\r\n\t\n\r\n\t\t\t\r\n\t\t\tif (knockout == 0)\r\n\t\t\t\tgl_FragColor = src + bevel;\r\n\t\t\telse\r\n\t\t\t\tgl_FragColor = bevel;\r\n\t\t}\r\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec2 offset;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\ntextureCoords = vec4(openfl_TextureCoord - offset / openfl_TextureSize, openfl_TextureCoord + offset / openfl_TextureSize);\n\n\n\t\t}";
        }
        qf.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      g["flxanimate.filters._BevelFilter.FullCombineShader"] = Ol;
      Ol.__name__ = "flxanimate.filters._BevelFilter.FullCombineShader";
      Ol.__super__ = qf;
      Ol.prototype = q(qf.prototype, {
        __class__: Ol
      });
      function Pl() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\r\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec4 uColorH;\r\n\t\tuniform vec4 uColorS;\r\n\t\tuniform int knockout;\r\n\t\tuniform sampler2D sourceBitmap;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\r\n\r\n\t\tvoid main(void) {\r\n\t\t\t\r\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\r\n\t\tvec4 highlight = texture2D(openfl_Texture, textureCoords.zw);\r\n\t\thighlight.rgb = vec3(1., 1., 1.) * highlight.a;\r\n\t\tvec4 shadow = texture2D(openfl_Texture, textureCoords.xy);\r\n\r\n\t\tshadow.rgb = vec3(1., 1., 1.) * shadow.a;\r\n\r\n\t\tvec4 a = highlight;\r\n\r\n\t\thighlight = mix(highlight, vec4(0.), shadow.a);\r\n\t\t\r\n\t\tshadow = mix(shadow, vec4(0.), a.a);\r\n\r\n\t\tvec4 bevel = (uColorS * shadow) + (uColorH * highlight);\r\n\r\n\t\tvec4 src = texture2D(sourceBitmap, openfl_TextureCoordv);\r\n\t\n\r\n\r\n\t\t\tif (knockout == 0)\r\n\t\t\t\tgl_FragColor = vec4((src.rgb * (1.0 - bevel.a)) + (bevel.rgb * src.a), src.a);\r\n\t\t\telse\r\n\t\t\t\tgl_FragColor = bevel * src.a;\r\n\t\t}\r\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec2 offset;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\ntextureCoords = vec4(openfl_TextureCoord - offset / openfl_TextureSize, openfl_TextureCoord + offset / openfl_TextureSize);\n\n\n\t\t}";
        }
        qf.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      g["flxanimate.filters._BevelFilter.InnerCombineShader"] = Pl;
      Pl.__name__ = "flxanimate.filters._BevelFilter.InnerCombineShader";
      Pl.__super__ = qf;
      Pl.prototype = q(qf.prototype, {
        __class__: Pl
      });
      function Cf(a, b, c, d, e, f, k, h, n, g, p, l) {
        if (l == null) {
          l = false;
        }
        if (p == null) {
          p = "inner";
        }
        if (g == null) {
          g = 1;
        }
        if (n == null) {
          n = 1;
        }
        if (h == null) {
          h = 4;
        }
        if (k == null) {
          k = 4;
        }
        if (f == null) {
          f = 1;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 16777215;
        }
        if (b == null) {
          b = 45;
        }
        if (a == null) {
          a = 4;
        }
        oe.call(this);
        this.__offsetY = this.__offsetX = 0;
        this.__distance = a;
        this.__angle = b;
        this.__highlightColor = c;
        this.__highlightAlpha = d;
        this.__shadowColor = e;
        this.__shadowAlpha = f;
        this.__blurX = k;
        this.__blurY = h;
        this.__strength = n;
        this.__quality = g;
        this.__type = p;
        this.__knockout = l;
        this.__updateSize();
        this.__renderDirty = this.__preserveObject = this.__needSecondBitmapData = true;
      }
      g["flxanimate.filters.BevelFilter"] = Cf;
      Cf.__name__ = "flxanimate.filters.BevelFilter";
      Cf.__super__ = oe;
      Cf.prototype = q(oe.prototype, {
        clone: function () {
          return new Cf(this.__distance, this.__angle, this.__highlightColor, this.__highlightAlpha, this.__shadowColor, this.__shadowAlpha, this.__blurX, this.__blurY, this.__strength, this.__quality, this.__type, this.__knockout);
        },
        __initShader: function (a, b, c) {
          if (b < this.__horizontalPasses + this.__verticalPasses) {
            a = Ed.__blurAlphaShader;
            if (b < this.__horizontalPasses) {
              c = Math.pow(0.5, b >> 1) * 0.5;
              a.uRadius.value[0] = this.get_blurX() * c;
              a.uRadius.value[1] = 0;
            } else {
              c = Math.pow(0.5, b - this.__horizontalPasses >> 1) * 0.5;
              a.uRadius.value[0] = 0;
              a.uRadius.value[1] = this.get_blurY() * c;
            }
            a.uColor.value[3] = 1;
            a.uStrength.value[0] = b == this.__horizontalPasses + this.__verticalPasses - 1 ? this.__strength : 1;
            return a;
          }
          switch (Np.fromString(this.__type)) {
            case 0:
              a = Cf.__fullCombineShader;
              break;
            case 1:
              a = Cf.__innerCombineShader;
              break;
            case 2:
              a = Cf.__combineShader;
              break;
            default:
              a = null;
          }
          if (a != null) {
            a.sourceBitmap.input = c;
            a.uColorH.value[0] = (this.get_highlightColor() >> 16 & 255) / 255;
            a.uColorH.value[1] = (this.get_highlightColor() >> 8 & 255) / 255;
            a.uColorH.value[2] = (this.get_highlightColor() & 255) / 255;
            a.uColorH.value[3] = this.get_highlightAlpha();
            a.uColorS.value[0] = (this.get_shadowColor() >> 16 & 255) / 255;
            a.uColorS.value[1] = (this.get_shadowColor() >> 8 & 255) / 255;
            a.uColorS.value[2] = (this.get_shadowColor() & 255) / 255;
            a.uColorS.value[3] = this.get_shadowAlpha();
            a.knockout.value[0] = this.__knockout ? 1 : 0;
            a.offset.value[0] = this.__offsetX;
            a.offset.value[1] = this.__offsetY;
          }
          return a;
        },
        __updateSize: function () {
          var a = this.get_type() == "inner";
          this.__offsetX = this.__distance * Math.cos(this.__angle * Math.PI / 180) | 0;
          this.__offsetY = this.__distance * Math.sin(this.__angle * Math.PI / 180) | 0;
          this.__bottomExtension = this.__topExtension = a ? 0 : Math.ceil(Math.abs(this.__offsetY) + this.__blurY);
          this.__rightExtension = this.__leftExtension = a ? 0 : Math.ceil(Math.abs(this.__offsetX) + this.__blurX);
          this.__calculateNumShaderPasses();
        },
        __calculateNumShaderPasses: function () {
          this.__horizontalPasses = this.__blurX <= 0 ? 0 : Math.round(this.__quality / 4 * this.__blurX) + 1;
          this.__verticalPasses = this.__blurY <= 0 ? 0 : Math.round(this.__quality / 4 * this.__blurY) + 1;
          this.__numShaderPasses = this.__horizontalPasses + this.__verticalPasses + 1;
        },
        get_blurX: function () {
          return this.__blurX;
        },
        get_blurY: function () {
          return this.__blurY;
        },
        get_highlightAlpha: function () {
          return this.__highlightAlpha;
        },
        get_highlightColor: function () {
          return this.__highlightColor;
        },
        get_shadowAlpha: function () {
          return this.__shadowAlpha;
        },
        get_shadowColor: function () {
          return this.__shadowColor;
        },
        get_type: function () {
          return this.__type;
        },
        __class__: Cf,
        __properties__: {
          get_type: "get_type",
          get_shadowColor: "get_shadowColor",
          get_shadowAlpha: "get_shadowAlpha",
          get_highlightColor: "get_highlightColor",
          get_highlightAlpha: "get_highlightAlpha",
          get_blurY: "get_blurY",
          get_blurX: "get_blurX"
        }
      });
      function wd() {
        ob.call(this, null);
        this.parents = [];
      }
      g["flxanimate.frames.FlxAnimateFrames"] = wd;
      wd.__name__ = "flxanimate.frames.FlxAnimateFrames";
      wd.fromTextureAtlas = function (a) {
        var b = new wd();
        if (wd.zip != null || Kc.extension(a) == "zip") {
          h.log.advanced("Zip Stuff isn't supported on Html5 since it can't transform bytes into an image", xa.ERROR, true);
          return null;
        }
        var c = [];
        for (var d = 0, e = Q.list("TEXT"); d < e.length;) {
          var f = e[d];
          ++d;
          if (w.startsWith(f, "" + a + "/spritemap")) {
            c.push(f);
          }
        }
        d = c;
        if (d.length > 1) {
          d.sort(function (a, b) {
            a = v.parseInt(Kc.withoutDirectory(a).charAt(9));
            b = v.parseInt(Kc.withoutDirectory(b).charAt(9));
            if (isNaN(a) || isNaN(b)) {
              return 0;
            } else {
              return a - b;
            }
          });
        }
        f = [];
        for (c = 0; c < d.length;) {
          e = d[c];
          ++c;
          e = Q.getText(e);
          if (r.cca(e, 0) == 65279) {
            e = e.substring(1);
          }
          e = JSON.parse(e);
          f.push({
            image: Q.getBitmapData("" + a + "/" + e.meta.image),
            json: e
          });
        }
        for (c = 0; c < f.length;) {
          var k = f[c];
          ++c;
          if (k.image == null) {
            h.log.advanced("the image called \"" + k.json.meta.image + "\" does not exist in Path " + a + ", maybe you changed the image Path somewhere else?", xa.ERROR, true);
          } else {
            var t = h.bitmap.add(k.image);
            var n = ob.findFrame(t);
            if (n == null) {
              n = new wd();
              d = 0;
              e = k.json.ATLAS.SPRITES;
              while (d < e.length) {
                var g = e[d];
                ++d;
                n.pushFrame(wd.textureAtlasHelper(t, g.SPRITE, k.json.meta));
              }
            }
            t.addFrameCollection(n);
            b.animateConcat(n);
          }
        }
        if (b.frames == []) {
          h.log.advanced("the Frames parsing couldn't parse any of the frames, it's completely empty! \n Maybe you misspelled the Path?", xa.ERROR, true);
          return null;
        } else {
          return b;
        }
      };
      wd.fromSparrow = function (a, b) {
        if (typeof a == "string" && !Q.exists(a)) {
          return null;
        }
        var c = typeof a == "string" ? ea.parse(Q.getText(a)).firstElement() : a.firstElement();
        if (c.nodeType != ea.Document && c.nodeType != ea.Element) {
          throw G.thrown("Invalid nodeType " + (c.nodeType == null ? "null" : mb.toString(c.nodeType)));
        }
        var d = c;
        if (b == null) {
          if (typeof a == "string") {
            b = Kc.directory(a) + Kb.resolve(d, "imagePath");
          } else {
            return null;
          }
        }
        b = h.bitmap.add(b);
        if (b == null) {
          return null;
        }
        a = ob.findFrame(b);
        if (a != null) {
          return a;
        }
        a = new ob(b);
        b = 0;
        for (d = dc.resolve(d, "SubTexture"); b < d.length;) {
          var e = d[b];
          ++b;
          var f = cc.resolve(e, "width");
          var k = Kb.resolve(e, "name");
          var t = cc.resolve(e, "frameX");
          var n = f ? Kb.resolve(e, "width") : Kb.resolve(e, "w");
          var g = f ? Kb.resolve(e, "height") : Kb.resolve(e, "h");
          var p = cc.resolve(e, "rotated") && Kb.resolve(e, "rotated") == "true";
          f = cc.resolve(e, "flipX") && Kb.resolve(e, "flipX") == "true";
          var l = cc.resolve(e, "flipY") && Kb.resolve(e, "flipY") == "true";
          var L = parseFloat(Kb.resolve(e, "x"));
          var m = parseFloat(Kb.resolve(e, "y"));
          c = parseFloat(n);
          g = parseFloat(g);
          if (g == null) {
            g = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (L == null) {
            L = 0;
          }
          n = Ha._pool.get();
          if (g == null) {
            g = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (L == null) {
            L = 0;
          }
          n.x = L;
          n.y = m;
          n.width = c;
          n.height = g;
          n._inPool = false;
          m = t ? new Ha(v.parseInt(Kb.resolve(e, "frameX")), v.parseInt(Kb.resolve(e, "frameY")), v.parseInt(Kb.resolve(e, "frameWidth")), v.parseInt(Kb.resolve(e, "frameHeight"))) : new Ha(0, 0, n.width == 0 ? 1 : n.width, n.height == 0 ? 1 : n.height);
          if (n.width == 0 || n.height == 0) {
            a.addEmptyFrame(m);
          } else {
            e = p ? -90 : 0;
            c = -m.x;
            g = -m.y;
            if (g == null) {
              g = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (c == null) {
              c = 0;
            }
            c = W.pool.get().set(c, g);
            c._inPool = false;
            L = m.width;
            g = m.height;
            if (g == null) {
              g = 0;
            }
            if (L == null) {
              L = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (L == null) {
              L = 0;
            }
            g = W.pool.get().set(L, g);
            g._inPool = false;
            if (p && !t) {
              t = m.height;
              p = m.width;
              if (p == null) {
                p = 0;
              }
              if (t == null) {
                t = 0;
              }
              g.set_x(t);
              g.set_y(p);
            }
            a.addAtlasFrame(n, g, c, k, e, f, l);
          }
        }
        return a;
      };
      wd.fromAnimateAtlas = function (a, b) {
        var c = new wd();
        b = h.bitmap.add(b);
        var d = ob.findFrame(b);
        if (d == null) {
          d = new wd();
          for (var e = 0, f = a.ATLAS.SPRITES; e < f.length;) {
            var k = f[e];
            ++e;
            d.pushFrame(wd.textureAtlasHelper(b, k.SPRITE, a.meta));
          }
        }
        b.addFrameCollection(d);
        c.animateConcat(d);
        if (c.frames == []) {
          h.log.advanced("the Frames parsing couldn't parse any of the frames, it's completely empty! \n Maybe you misspelled the Path?", xa.ERROR, true);
          return null;
        } else {
          return c;
        }
      };
      wd.textureAtlasHelper = function (a, b, c) {
        var d = b.rotated ? b.h : b.w;
        c = b.rotated ? b.w : b.h;
        a = new pb(a);
        a.name = b.name;
        var e = a.sourceSize;
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        e.set_x(d);
        e.set_y(c);
        a.set_frame(new Ha(b.x, b.y, b.w, b.h));
        if (b.rotated) {
          a.angle = -90;
        }
        return a;
      };
      wd.texturePackerHelper = function (a, b, c) {
        var d = b.rotated;
        var e = b.sourceSize.w;
        var f = b.sourceSize.h;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        f = W.pool.get().set(e, f);
        f._inPool = false;
        var k = f;
        e = b.spriteSourceSize.x;
        f = b.spriteSourceSize.y;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        f = W.pool.get().set(e, f);
        f._inPool = false;
        e = 0;
        if (d) {
          var h = b.frame.x;
          var n = b.frame.y;
          d = b.frame.h;
          var g = b.frame.w;
          if (g == null) {
            g = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (h == null) {
            h = 0;
          }
          b = Ha._pool.get();
          if (g == null) {
            g = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (h == null) {
            h = 0;
          }
          b.x = h;
          b.y = n;
          b.width = d;
          b.height = g;
          b._inPool = false;
          e = -90;
        } else {
          h = b.frame.x;
          n = b.frame.y;
          d = b.frame.w;
          g = b.frame.h;
          if (g == null) {
            g = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (h == null) {
            h = 0;
          }
          b = Ha._pool.get();
          if (g == null) {
            g = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (n == null) {
            n = 0;
          }
          if (h == null) {
            h = 0;
          }
          b.x = h;
          b.y = n;
          b.width = d;
          b.height = g;
          b._inPool = false;
        }
        c.addAtlasFrame(b, k, f, a, e);
      };
      wd.__super__ = ob;
      wd.prototype = q(ob.prototype, {
        animateConcat: function (a) {
          if (this.parents.indexOf(a.parent) == -1) {
            this.parents.push(a.parent);
          }
          var b = 0;
          for (a = a.frames; b < a.length;) {
            var c = a[b];
            ++b;
            this.frames.push(c);
            this.framesByName.h[c.name] = c;
          }
          return this;
        },
        __class__: wd
      });
      function Ql(a) {
        if (a != null && a.get_length() == 16) {
          this.rawData = a.concat(null);
        } else {
          this.rawData = ab.toFloatVector(null, null, null, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
        }
      }
      g["openfl.geom.Matrix3D"] = Ql;
      Ql.__name__ = "openfl.geom.Matrix3D";
      Ql.prototype = {
        append: function (a) {
          var b = this.rawData.get(0);
          var c = this.rawData.get(4);
          var d = this.rawData.get(8);
          var e = this.rawData.get(12);
          var f = this.rawData.get(1);
          var k = this.rawData.get(5);
          var h = this.rawData.get(9);
          var n = this.rawData.get(13);
          var g = this.rawData.get(2);
          var p = this.rawData.get(6);
          var l = this.rawData.get(10);
          var m = this.rawData.get(14);
          var v = this.rawData.get(3);
          var q = this.rawData.get(7);
          var w = this.rawData.get(11);
          var u = this.rawData.get(15);
          var r = a.rawData.get(0);
          var z = a.rawData.get(4);
          var ba = a.rawData.get(8);
          var J = a.rawData.get(12);
          var y = a.rawData.get(1);
          var B = a.rawData.get(5);
          var A = a.rawData.get(9);
          var D = a.rawData.get(13);
          var C = a.rawData.get(2);
          var x = a.rawData.get(6);
          var F = a.rawData.get(10);
          var G = a.rawData.get(14);
          var H = a.rawData.get(3);
          var la = a.rawData.get(7);
          var N = a.rawData.get(11);
          a = a.rawData.get(15);
          this.rawData.set(0, b * r + f * z + g * ba + v * J);
          this.rawData.set(1, b * y + f * B + g * A + v * D);
          this.rawData.set(2, b * C + f * x + g * F + v * G);
          this.rawData.set(3, b * H + f * la + g * N + v * a);
          this.rawData.set(4, c * r + k * z + p * ba + q * J);
          this.rawData.set(5, c * y + k * B + p * A + q * D);
          this.rawData.set(6, c * C + k * x + p * F + q * G);
          this.rawData.set(7, c * H + k * la + p * N + q * a);
          this.rawData.set(8, d * r + h * z + l * ba + w * J);
          this.rawData.set(9, d * y + h * B + l * A + w * D);
          this.rawData.set(10, d * C + h * x + l * F + w * G);
          this.rawData.set(11, d * H + h * la + l * N + w * a);
          this.rawData.set(12, e * r + n * z + m * ba + u * J);
          this.rawData.set(13, e * y + n * B + m * A + u * D);
          this.rawData.set(14, e * C + n * x + m * F + u * G);
          this.rawData.set(15, e * H + n * la + m * N + u * a);
        },
        appendTranslation: function (a, b, c) {
          var d = this.rawData;
          d.set(12, d.get(12) + a);
          d = this.rawData;
          d.set(13, d.get(13) + b);
          d = this.rawData;
          d.set(14, d.get(14) + c);
        },
        copyRawDataFrom: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          if (c) {
            this.transpose();
          }
          for (var d = 0, e = a.get_length() - b; d < e;) {
            var f = d++;
            this.rawData.set(f, a.get(f + b));
          }
          if (c) {
            this.transpose();
          }
        },
        identity: function () {
          this.rawData = ab.toFloatVector(null, null, null, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
        },
        transpose: function () {
          var a = this.rawData.copy();
          this.rawData.set(1, a.get(4));
          this.rawData.set(2, a.get(8));
          this.rawData.set(3, a.get(12));
          this.rawData.set(4, a.get(1));
          this.rawData.set(6, a.get(9));
          this.rawData.set(7, a.get(13));
          this.rawData.set(8, a.get(2));
          this.rawData.set(9, a.get(6));
          this.rawData.set(11, a.get(14));
          this.rawData.set(12, a.get(3));
          this.rawData.set(13, a.get(7));
          this.rawData.set(14, a.get(11));
        },
        __class__: Ql
      };
      function Bj() {}
      g["flxanimate.motion.AdjustColor"] = Bj;
      Bj.__name__ = "flxanimate.motion.AdjustColor";
      Bj.prototype = {
        set_brightness: function (a) {
          if (this.m_brightnessMatrix == null) {
            this.m_brightnessMatrix = new Ee();
          }
          if (a != 0) {
            this.m_brightnessMatrix.setBrightnessMatrix(a);
          }
          return a;
        },
        set_contrast: function (a) {
          var b = a > 0 ? Bj.s_arrayOfDeltaIndex[a | 0] * 127 + 127 : a / 100 * 127 + 127;
          if (this.m_contrastMatrix == null) {
            this.m_contrastMatrix = new Ee();
          }
          this.m_contrastMatrix.setContrastMatrix(b);
          return a;
        },
        set_saturation: function (a) {
          var b = a > 0 ? 1 + a * 3 / 100 : a / 100 + 1;
          if (this.m_saturationMatrix == null) {
            this.m_saturationMatrix = new Ee();
          }
          this.m_saturationMatrix.setSaturationMatrix(b);
          return a;
        },
        set_hue: function (a) {
          if (this.m_hueMatrix == null) {
            this.m_hueMatrix = new Ee();
          }
          if (a != 0) {
            this.m_hueMatrix.setHueMatrix(a * Math.PI / 180);
          }
          return a;
        },
        allValuesAreSet: function () {
          return [this.m_brightnessMatrix, this.m_contrastMatrix, this.m_saturationMatrix, this.m_hueMatrix].indexOf(null) == -1;
        },
        calculateFinalFlatArray: function () {
          if (this.calculateFinalMatrix()) {
            return this.m_finalMatrix.getFlatArray();
          } else {
            return null;
          }
        },
        calculateFinalMatrix: function () {
          if (!this.allValuesAreSet()) {
            return false;
          }
          this.m_finalMatrix = new Ee();
          this.m_finalMatrix.multiply(this.m_brightnessMatrix);
          this.m_finalMatrix.multiply(this.m_contrastMatrix);
          this.m_finalMatrix.multiply(this.m_saturationMatrix);
          this.m_finalMatrix.multiply(this.m_hueMatrix);
          return true;
        },
        __class__: Bj,
        __properties__: {
          set_hue: "set_hue",
          set_saturation: "set_saturation",
          set_contrast: "set_contrast",
          set_brightness: "set_brightness"
        }
      };
      function Ef(a, b) {
        this.create(a, b);
      }
      g["flxanimate.motion.DynamicMatrix"] = Ef;
      Ef.__name__ = "flxanimate.motion.DynamicMatrix";
      Ef.prototype = {
        create: function (a, b) {
          if (!(a <= 0) && !(b <= 0)) {
            this.m_width = a;
            this.m_height = b;
            this.m_matrix = ab.toNullVector(null, b, true);
            for (var c = 0; c < b;) {
              var d = c++;
              this.m_matrix.set(d, ab.toFloatVector(null, a, true));
              for (var e = 0, f = a; e < f;) {
                var k = e++;
                this.m_matrix.get(d).set(k, 0);
              }
            }
          }
        },
        destroy: function () {
          this.m_matrix = null;
        },
        getWidth: function () {
          return this.m_width;
        },
        getHeight: function () {
          return this.m_height;
        },
        getValue: function (a, b) {
          var c = 0;
          if (a >= 0 && a < this.m_height && b >= 0 && b <= this.m_width) {
            c = this.m_matrix.get(a).get(b);
          }
          return c;
        },
        setValue: function (a, b, c) {
          if (a >= 0 && a < this.m_height && b >= 0 && b <= this.m_width) {
            this.m_matrix.get(a).set(b, c);
          }
        },
        loadIdentity: function () {
          if (this.m_matrix != null) {
            for (var a = 0, b = this.m_height; a < b;) {
              var c = a++;
              for (var d = 0, e = this.m_width; d < e;) {
                var f = d++;
                this.m_matrix.get(c).set(f, c == f ? 1 : 0);
              }
            }
          }
        },
        multiply: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (this.m_matrix == null || a == null) {
            return false;
          }
          var c = a.getHeight();
          var d = a.getWidth();
          var e = b == Ef.MATRIX_ORDER_APPEND ? d : a.getWidth();
          b = b == Ef.MATRIX_ORDER_APPEND ? c : this.m_height;
          if (e != b) {
            return false;
          }
          var f = new Ef(e, b);
          for (var k = 0, h = b; k < h;) {
            var n = k++;
            for (var g = 0, p = e; g < p;) {
              var l = g++;
              var m = 0;
              for (var v = 0, q = 0; v < Math.max(this.m_height, c) && q < Math.max(this.m_width, d);) {
                m += a.getValue(v, l) * this.m_matrix.get(n).get(q);
                ++v;
                ++q;
              }
              f.setValue(n, l, m);
            }
          }
          this.destroy();
          this.create(e, b);
          k = 0;
          for (h = c; k < h;) {
            n = k++;
            g = 0;
            p = this.m_width;
            while (g < p) {
              l = g++;
              this.m_matrix.get(n).set(l, f.getValue(n, l));
            }
          }
          return true;
        },
        multiplyNumber: function (a) {
          if (this.m_matrix == null) {
            return false;
          }
          for (var b = 0, c = this.m_height; b < c;) {
            var d = b++;
            for (var e = 0, f = this.m_width; e < f;) {
              var k = e++;
              var h = this.m_matrix.get(d);
              h.set(k, h.get(k) * a);
            }
          }
          return true;
        },
        add: function (a) {
          if (this.m_matrix == null || a == null) {
            return false;
          }
          var b = a.getHeight();
          var c = a.getWidth();
          if (this.m_width != c || b != this.m_height) {
            return false;
          }
          b = 0;
          for (c = this.m_height; b < c;) {
            var d = b++;
            for (var e = 0, f = this.m_width; e < f;) {
              var k = e++;
              var h = k;
              var n = this.m_matrix.get(d);
              n.set(h, n.get(h) + a.getValue(d, k));
            }
          }
          return true;
        },
        __class__: Ef
      };
      function Ee() {
        this.create(5, 5);
        this.loadIdentity();
      }
      g["flxanimate.motion.ColorMatrix"] = Ee;
      Ee.__name__ = "flxanimate.motion.ColorMatrix";
      Ee.__super__ = Ef;
      Ee.prototype = q(Ef.prototype, {
        setBrightnessMatrix: function (a) {
          if (this.m_matrix != null) {
            this.m_matrix.get(0).set(4, a);
            this.m_matrix.get(1).set(4, a);
            this.m_matrix.get(2).set(4, a);
          }
        },
        setContrastMatrix: function (a) {
          if (this.m_matrix != null) {
            var b = (127 - a) * 0.5;
            a /= 127;
            this.m_matrix.get(0).set(0, a);
            this.m_matrix.get(1).set(1, a);
            this.m_matrix.get(2).set(2, a);
            this.setBrightnessMatrix(b);
          }
        },
        setSaturationMatrix: function (a) {
          if (this.m_matrix != null) {
            var b = 1 - a;
            var c = b * Ee.lumR;
            this.m_matrix.get(0).set(0, c + a);
            this.m_matrix.get(1).set(0, c);
            this.m_matrix.get(2).set(0, c);
            c = b * Ee.lumG;
            this.m_matrix.get(0).set(1, c);
            this.m_matrix.get(1).set(1, c + a);
            this.m_matrix.get(2).set(1, c);
            c = b * Ee.lumB;
            this.m_matrix.get(0).set(2, c);
            this.m_matrix.get(1).set(2, c);
            this.m_matrix.get(2).set(2, c + a);
          }
        },
        setHueMatrix: function (a) {
          if (this.m_matrix != null) {
            this.loadIdentity();
            var b = new Ef(3, 3);
            var c = new Ef(3, 3);
            var d = new Ef(3, 3);
            var e = Math.cos(a);
            a = Math.sin(a);
            b.setValue(0, 0, 0.213);
            b.setValue(1, 0, 0.213);
            b.setValue(2, 0, 0.213);
            b.setValue(0, 1, 0.715);
            b.setValue(1, 1, 0.715);
            b.setValue(2, 1, 0.715);
            b.setValue(0, 2, 0.072);
            b.setValue(1, 2, 0.072);
            b.setValue(2, 2, 0.072);
            c.setValue(0, 0, 0.787);
            c.setValue(1, 0, -0.213);
            c.setValue(2, 0, -0.213);
            c.setValue(0, 1, -0.715);
            c.setValue(1, 1, 0.28500000000000003);
            c.setValue(2, 1, -0.715);
            c.setValue(0, 2, -0.072);
            c.setValue(1, 2, -0.072);
            c.setValue(2, 2, 0.928);
            c.multiplyNumber(e);
            d.setValue(0, 0, -0.213);
            d.setValue(1, 0, 0.14300000000000002);
            d.setValue(2, 0, -0.787);
            d.setValue(0, 1, -0.715);
            d.setValue(1, 1, 0.14);
            d.setValue(2, 1, 0.715);
            d.setValue(0, 2, 0.928);
            d.setValue(1, 2, -0.283);
            d.setValue(2, 2, 0.072);
            d.multiplyNumber(a);
            b.add(c);
            b.add(d);
            this.m_matrix.get(0).set(0, b.getValue(0, 0));
            this.m_matrix.get(0).set(1, b.getValue(0, 1));
            this.m_matrix.get(0).set(2, b.getValue(0, 2));
            this.m_matrix.get(1).set(0, b.getValue(1, 0));
            this.m_matrix.get(1).set(1, b.getValue(1, 1));
            this.m_matrix.get(1).set(2, b.getValue(1, 2));
            this.m_matrix.get(2).set(0, b.getValue(2, 0));
            this.m_matrix.get(2).set(1, b.getValue(2, 1));
            this.m_matrix.get(2).set(2, b.getValue(2, 2));
          }
        },
        getFlatArray: function () {
          if (this.m_matrix == null) {
            return null;
          }
          var a = 0;
          var b = [];
          b[a] = this.m_matrix.get(0).get(0);
          ++a;
          b[a] = this.m_matrix.get(0).get(1);
          ++a;
          b[a] = this.m_matrix.get(0).get(2);
          ++a;
          b[a] = this.m_matrix.get(0).get(3);
          ++a;
          b[a] = this.m_matrix.get(0).get(4);
          ++a;
          b[a] = this.m_matrix.get(1).get(0);
          ++a;
          b[a] = this.m_matrix.get(1).get(1);
          ++a;
          b[a] = this.m_matrix.get(1).get(2);
          ++a;
          b[a] = this.m_matrix.get(1).get(3);
          ++a;
          b[a] = this.m_matrix.get(1).get(4);
          ++a;
          b[a] = this.m_matrix.get(2).get(0);
          ++a;
          b[a] = this.m_matrix.get(2).get(1);
          ++a;
          b[a] = this.m_matrix.get(2).get(2);
          ++a;
          b[a] = this.m_matrix.get(2).get(3);
          ++a;
          b[a] = this.m_matrix.get(2).get(4);
          ++a;
          b[a] = this.m_matrix.get(3).get(0);
          ++a;
          b[a] = this.m_matrix.get(3).get(1);
          ++a;
          b[a] = this.m_matrix.get(3).get(2);
          ++a;
          b[a] = this.m_matrix.get(3).get(3);
          ++a;
          b[a] = this.m_matrix.get(3).get(4);
          return b;
        },
        __class__: Ee
      });
      function Il() {}
      g["flxanimate.zip.Zip"] = Il;
      Il.__name__ = "flxanimate.zip.Zip";
      Il.readZip = function (a) {
        return new ji(new Cj(a)).read();
      };
      Il.unzip = function (a) {
        for (var b = a.h; b != null;) {
          var c = b.item;
          b = b.next;
          if (c.compressed) {
            c.data = fo.decompress(c.data);
            c.compressed = false;
            c.dataSize = c.fileSize;
          }
        }
        return a;
      };
      var Ff = z["haxe.StackItem"] = {
        __ename__: "haxe.StackItem",
        __constructs__: null,
        CFunction: {
          _hx_name: "CFunction",
          _hx_index: 0,
          __enum__: "haxe.StackItem",
          toString: p
        },
        Module: (u = function (a) {
          return {
            _hx_index: 1,
            m: a,
            __enum__: "haxe.StackItem",
            toString: p
          };
        }, u._hx_name = "Module", u.__params__ = ["m"], u),
        FilePos: (u = function (a, b, c, d) {
          return {
            _hx_index: 2,
            s: a,
            file: b,
            line: c,
            column: d,
            __enum__: "haxe.StackItem",
            toString: p
          };
        }, u._hx_name = "FilePos", u.__params__ = ["s", "file", "line", "column"], u),
        Method: (u = function (a, b) {
          return {
            _hx_index: 3,
            classname: a,
            method: b,
            __enum__: "haxe.StackItem",
            toString: p
          };
        }, u._hx_name = "Method", u.__params__ = ["classname", "method"], u),
        LocalFunction: (u = function (a) {
          return {
            _hx_index: 4,
            v: a,
            __enum__: "haxe.StackItem",
            toString: p
          };
        }, u._hx_name = "LocalFunction", u.__params__ = ["v"], u)
      };
      Ff.__constructs__ = [Ff.CFunction, Ff.Module, Ff.FilePos, Ff.Method, Ff.LocalFunction];
      var Ug = {
        callStack: function () {
          return Pa.toHaxe(Pa.callStack());
        },
        exceptionStack: function (a) {
          if (a == null) {
            a = false;
          }
          var b = Pa.toHaxe(Pa.exceptionStack());
          if (a) {
            return b;
          } else {
            return Ug.subtract(b, Ug.callStack());
          }
        },
        toString: function (a) {
          var b = new Ab();
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            b.b += "\nCalled from ";
            Ug.itemToString(b, d);
          }
          return b.b;
        },
        subtract: function (a, b) {
          var c = -1;
          for (var d = -1; ++d < a.length;) {
            for (var e = 0, f = b.length; e < f;) {
              var k = e++;
              if (Ug.equalItems(a[d], b[k])) {
                if (c < 0) {
                  c = d;
                }
                ++d;
                if (d >= a.length) {
                  break;
                }
              } else {
                c = -1;
              }
            }
            if (c >= 0) {
              break;
            }
          }
          if (c >= 0) {
            return a.slice(0, c);
          } else {
            return a;
          }
        },
        equalItems: function (a, b) {
          if (a == null) {
            if (b == null) {
              return true;
            } else {
              return false;
            }
          }
          switch (a._hx_index) {
            case 0:
              if (b == null) {
                return false;
              } else if (b._hx_index == 0) {
                return true;
              } else {
                return false;
              }
            case 1:
              if (b == null) {
                return false;
              } else if (b._hx_index == 1) {
                return a.m == b.m;
              } else {
                return false;
              }
            case 2:
              if (b == null) {
                return false;
              }
              if (b._hx_index == 2) {
                var c = b.s;
                var d = b.line;
                var e = b.column;
                var f = a.column;
                var k = a.line;
                var h = a.s;
                if (a.file == b.file && k == d && f == e) {
                  return Ug.equalItems(h, c);
                } else {
                  return false;
                }
              }
              return false;
            case 3:
              if (b == null) {
                return false;
              } else if (b._hx_index == 3) {
                c = b.method;
                d = a.method;
                if (a.classname == b.classname) {
                  return d == c;
                } else {
                  return false;
                }
              } else {
                return false;
              }
            case 4:
              if (b == null) {
                return false;
              } else if (b._hx_index == 4) {
                return a.v == b.v;
              } else {
                return false;
              }
          }
        },
        itemToString: function (a, b) {
          switch (b._hx_index) {
            case 0:
              a.b += "a C function";
              break;
            case 1:
              b = b.m;
              a.b += "module ";
              a.b += b == null ? "null" : "" + b;
              break;
            case 2:
              var c = b.s;
              var d = b.file;
              var e = b.line;
              b = b.column;
              if (c != null) {
                Ug.itemToString(a, c);
                a.b += " (";
              }
              a.b += d == null ? "null" : "" + d;
              a.b += " line ";
              a.b += e == null ? "null" : "" + e;
              if (b != null) {
                a.b += " column ";
                a.b += b == null ? "null" : "" + b;
              }
              if (c != null) {
                a.b += ")";
              }
              break;
            case 3:
              c = b.classname;
              b = b.method;
              a.b += v.string(c == null ? "<unknown>" : c);
              a.b += ".";
              a.b += b == null ? "null" : "" + b;
              break;
            case 4:
              b = b.v;
              a.b += "local function #";
              a.b += b == null ? "null" : "" + b;
          }
        }
      };
      function G(a, b, c) {
        Error.call(this, a);
        this.message = a;
        this.__previousException = b;
        this.__nativeException = c ?? this;
        this.__skipStack = 0;
        a = Error.prepareStackTrace;
        Error.prepareStackTrace = function (a) {
          return a.stack;
        };
        if (c instanceof Error) {
          this.stack = c.stack;
        } else {
          c = null;
          if (Error.captureStackTrace) {
            Error.captureStackTrace(this, G);
            c = this;
          } else {
            c = Error();
            if (typeof c.stack == "undefined") {
              try {
                throw c;
              } catch (d) {}
              this.__skipStack++;
            }
          }
          this.stack = c.stack;
        }
        Error.prepareStackTrace = a;
      }
      g["haxe.Exception"] = G;
      G.__name__ = "haxe.Exception";
      G.caught = function (a) {
        if (a instanceof G) {
          return a;
        } else if (a instanceof Error) {
          return new G(a.message, null, a);
        } else {
          return new Dj(a, null, a);
        }
      };
      G.thrown = function (a) {
        if (a instanceof G) {
          return a.get_native();
        }
        if (a instanceof Error) {
          return a;
        }
        a = new Dj(a);
        a.__skipStack++;
        return a;
      };
      G.__super__ = Error;
      G.prototype = q(Error.prototype, {
        unwrap: function () {
          return this.__nativeException;
        },
        toString: function () {
          return this.get_message();
        },
        __shiftStack: function () {
          this.__skipStack++;
        },
        get_message: function () {
          return this.message;
        },
        get_native: function () {
          return this.__nativeException;
        },
        get_stack: function () {
          var a = this.__exceptionStack;
          if (a == null) {
            a = Pa.toHaxe(Pa.normalize(this.stack), this.__skipStack);
            this.setProperty("__exceptionStack", a);
          }
          return a;
        },
        setProperty: function (a, b) {
          try {
            Object.defineProperty(this, a, {
              value: b
            });
          } catch (c) {
            this[a] = b;
          }
        },
        __class__: G,
        __properties__: {
          get_native: "get_native",
          get_stack: "get_stack",
          get_message: "get_message"
        }
      });
      function vb(a, b) {
        this.high = a;
        this.low = b;
      }
      g["haxe._Int64.___Int64"] = vb;
      vb.__name__ = "haxe._Int64.___Int64";
      vb.prototype = {
        __class__: vb
      };
      function Pa() {}
      g["haxe.NativeStackTrace"] = Pa;
      Pa.__name__ = "haxe.NativeStackTrace";
      Pa.saveStack = function (a) {
        Pa.lastError = a;
      };
      Pa.callStack = function () {
        var a = Error("");
        var b = Pa.tryHaxeStack(a);
        if (typeof b == "undefined") {
          try {
            throw a;
          } catch (c) {}
          b = a.stack;
        }
        return Pa.normalize(b, 2);
      };
      Pa.exceptionStack = function () {
        return Pa.normalize(Pa.tryHaxeStack(Pa.lastError));
      };
      Pa.toHaxe = function (a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          return [];
        }
        if (typeof a == "string") {
          a = a.split("\n");
          if (a[0] == "Error") {
            a.shift();
          }
          var c = [];
          for (var d = 0, e = a.length; d < e;) {
            var f = d++;
            if (!(b > f)) {
              var k = a[f];
              f = k.match(/^    at ([$A-Za-z0-9_. ]+) \(([^)]+):([0-9]+):([0-9]+)\)$/);
              if (f != null) {
                k = f[1].split(".");
                if (k[0] == "$hxClasses") {
                  k.shift();
                }
                var h = k.pop();
                var n = f[2];
                var g = v.parseInt(f[3]);
                f = v.parseInt(f[4]);
                c.push(Ff.FilePos(h == "Anonymous function" ? Ff.LocalFunction() : h == "Global code" ? null : Ff.Method(k.join("."), h), n, g, f));
              } else {
                c.push(Ff.Module(w.trim(k)));
              }
            }
          }
          return c;
        }
        if (b > 0 && Array.isArray(a)) {
          return a.slice(b);
        } else {
          return a;
        }
      };
      Pa.tryHaxeStack = function (a) {
        if (a == null) {
          return [];
        }
        var b = Error.prepareStackTrace;
        Error.prepareStackTrace = Pa.prepareHxStackTrace;
        a = a.stack;
        Error.prepareStackTrace = b;
        return a;
      };
      Pa.prepareHxStackTrace = function (a, b) {
        a = [];
        for (var c = 0; c < b.length;) {
          var d = b[c];
          ++c;
          if (Pa.wrapCallSite != null) {
            d = Pa.wrapCallSite(d);
          }
          var e = null;
          var f = d.getFunctionName();
          if (f != null) {
            var k = f.lastIndexOf(".");
            if (k >= 0) {
              e = f.substring(0, k);
              f = f.substring(k + 1);
              e = Ff.Method(e, f);
            } else {
              e = Ff.Method(null, f);
            }
          }
          f = d.getFileName();
          k = f == null ? -1 : f.indexOf("file:");
          if (Pa.wrapCallSite != null && k > 0) {
            f = f.substring(k + 6);
          }
          a.push(Ff.FilePos(e, f, d.getLineNumber(), d.getColumnNumber()));
        }
        return a;
      };
      Pa.normalize = function (a, b) {
        if (b == null) {
          b = 0;
        }
        if (Array.isArray(a) && b > 0) {
          return a.slice(b);
        }
        if (typeof a == "string") {
          switch (a.substring(0, 6)) {
            case "Error\n":
            case "Error:":
              ++b;
          }
          return Pa.skipLines(a, b);
        }
        return a;
      };
      Pa.skipLines = function (a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (b > 0) {
          c = a.indexOf("\n", c);
          if (c < 0) {
            return "";
          } else {
            return Pa.skipLines(a, --b, c + 1);
          }
        } else {
          return a.substring(c);
        }
      };
      function Ze() {}
      g["haxe.Resource"] = Ze;
      Ze.__name__ = "haxe.Resource";
      Ze.getString = function (a) {
        for (var b = 0, c = Ze.content; b < c.length;) {
          var d = c[b];
          ++b;
          if (d.name == a) {
            return d.str ?? ki.decode(d.data).toString();
          }
        }
        return null;
      };
      function me() {
        this.buf = new Ab();
        this.cache = [];
        this.useCache = me.USE_CACHE;
        this.useEnumIndex = me.USE_ENUM_INDEX;
        this.shash = new ua();
        this.scount = 0;
      }
      g["haxe.Serializer"] = me;
      me.__name__ = "haxe.Serializer";
      me.run = function (a) {
        var b = new me();
        b.serialize(a);
        return b.toString();
      };
      me.prototype = {
        toString: function () {
          return this.buf.b;
        },
        serializeString: function (a) {
          var b = this.shash.h[a];
          if (b != null) {
            this.buf.b += "R";
            this.buf.b += b == null ? "null" : "" + b;
          } else {
            this.shash.h[a] = this.scount++;
            this.buf.b += "y";
            a = encodeURIComponent(a);
            this.buf.b += v.string(a.length);
            this.buf.b += ":";
            this.buf.b += a == null ? "null" : "" + a;
          }
        },
        serializeRef: function (a) {
          var b = typeof a;
          for (var c = 0, d = this.cache.length; c < d;) {
            var e = c++;
            var f = this.cache[e];
            if (typeof f == b && f == a) {
              this.buf.b += "r";
              this.buf.b += e == null ? "null" : "" + e;
              return true;
            }
          }
          this.cache.push(a);
          return false;
        },
        serializeFields: function (a) {
          for (var b = 0, c = ja.fields(a); b < c.length;) {
            var d = c[b];
            ++b;
            this.serializeString(d);
            this.serialize(ja.field(a, d));
          }
          this.buf.b += "g";
        },
        serialize: function (a) {
          var b = yb.typeof(a);
          switch (b._hx_index) {
            case 0:
              this.buf.b += "n";
              break;
            case 1:
              if (a == 0) {
                this.buf.b += "z";
                break;
              }
              this.buf.b += "i";
              this.buf.b += a == null ? "null" : "" + a;
              break;
            case 2:
              if (isNaN(a)) {
                this.buf.b += "k";
              } else if (isFinite(a)) {
                this.buf.b += "d";
                this.buf.b += a == null ? "null" : "" + a;
              } else {
                this.buf.b += a < 0 ? "m" : "p";
              }
              break;
            case 3:
              this.buf.b += a ? "t" : "f";
              break;
            case 4:
              if (va.__instanceof(a, Vi)) {
                a = a.__name__;
                this.buf.b += "A";
                this.serializeString(a);
              } else if (va.__instanceof(a, xp)) {
                this.buf.b += "B";
                this.serializeString(a.__ename__);
              } else if (!this.useCache || !this.serializeRef(a)) {
                this.buf.b += "o";
                this.serializeFields(a);
              }
              break;
            case 5:
              throw G.thrown("Cannot serialize function");
            case 6:
              b = b.c;
              if (b == String) {
                this.serializeString(a);
                break;
              }
              if (this.useCache && this.serializeRef(a)) {
                break;
              }
              switch (b) {
                case Array:
                  var c = 0;
                  this.buf.b += "a";
                  for (var d = 0, e = a.length; d < e;) {
                    b = d++;
                    if (a[b] == null) {
                      ++c;
                    } else {
                      if (c > 0) {
                        if (c == 1) {
                          this.buf.b += "n";
                        } else {
                          this.buf.b += "u";
                          this.buf.b += c == null ? "null" : "" + c;
                        }
                        c = 0;
                      }
                      this.serialize(a[b]);
                    }
                  }
                  if (c > 0) {
                    if (c == 1) {
                      this.buf.b += "n";
                    } else {
                      this.buf.b += "u";
                      this.buf.b += c == null ? "null" : "" + c;
                    }
                  }
                  this.buf.b += "h";
                  break;
                case Date:
                  this.buf.b += "v";
                  this.buf.b += v.string(a.getTime());
                  break;
                case wc:
                  this.buf.b += "q";
                  for (b = a.keys(); b.hasNext();) {
                    c = b.next();
                    this.buf.b += ":";
                    this.buf.b += c == null ? "null" : "" + c;
                    this.serialize(a.h[c]);
                  }
                  this.buf.b += "h";
                  break;
                case jb:
                  this.buf.b += "l";
                  for (a = a.h; a != null;) {
                    b = a.item;
                    a = a.next;
                    this.serialize(b);
                  }
                  this.buf.b += "h";
                  break;
                case la:
                  this.buf.b += "M";
                  for (b = a.keys(); b.hasNext();) {
                    c = b.next();
                    var f = ja.field(c, "__id__");
                    ja.deleteField(c, "__id__");
                    this.serialize(c);
                    c.__id__ = f;
                    this.serialize(a.h[c.__id__]);
                  }
                  this.buf.b += "h";
                  break;
                case ua:
                  this.buf.b += "b";
                  c = Object.keys(a.h);
                  f = c.length;
                  for (d = 0; d < f;) {
                    b = c[d++];
                    this.serializeString(b);
                    this.serialize(a.h[b]);
                  }
                  this.buf.b += "h";
                  break;
                case Yb:
                  this.buf.b += "s";
                  this.buf.b += v.string(Math.ceil(a.length * 8 / 6));
                  this.buf.b += ":";
                  b = 0;
                  c = a.length - 2;
                  f = me.BASE64_CODES;
                  if (f == null) {
                    f = Array(me.BASE64.length);
                    d = 0;
                    for (e = me.BASE64.length; d < e;) {
                      var k = d++;
                      f[k] = r.cca(me.BASE64, k);
                    }
                    me.BASE64_CODES = f;
                  }
                  while (b < c) {
                    d = a.b[b++];
                    e = a.b[b++];
                    k = a.b[b++];
                    this.buf.b += String.fromCodePoint(f[d >> 2]);
                    this.buf.b += String.fromCodePoint(f[(d << 4 | e >> 4) & 63]);
                    this.buf.b += String.fromCodePoint(f[(e << 2 | k >> 6) & 63]);
                    this.buf.b += String.fromCodePoint(f[k & 63]);
                  }
                  if (b == c) {
                    d = a.b[b++];
                    e = a.b[b++];
                    this.buf.b += String.fromCodePoint(f[d >> 2]);
                    this.buf.b += String.fromCodePoint(f[(d << 4 | e >> 4) & 63]);
                    this.buf.b += String.fromCodePoint(f[e << 2 & 63]);
                  } else if (b == c + 1) {
                    d = a.b[b++];
                    this.buf.b += String.fromCodePoint(f[d >> 2]);
                    this.buf.b += String.fromCodePoint(f[d << 4 & 63]);
                  }
                  break;
                default:
                  if (this.useCache) {
                    this.cache.pop();
                  }
                  if (a.hxSerialize != null) {
                    this.buf.b += "C";
                    this.serializeString(b.__name__);
                    if (this.useCache) {
                      this.cache.push(a);
                    }
                    a.hxSerialize(this);
                    this.buf.b += "g";
                  } else {
                    this.buf.b += "c";
                    this.serializeString(b.__name__);
                    if (this.useCache) {
                      this.cache.push(a);
                    }
                    this.serializeFields(a);
                  }
              }
              break;
            case 7:
              b = b.e;
              if (this.useCache) {
                if (this.serializeRef(a)) {
                  break;
                }
                this.cache.pop();
              }
              this.buf.b += v.string(this.useEnumIndex ? "j" : "w");
              this.serializeString(b.__ename__);
              if (this.useEnumIndex) {
                this.buf.b += ":";
                this.buf.b += v.string(a._hx_index);
              } else {
                b = a;
                this.serializeString(z[b.__enum__].__constructs__[b._hx_index]._hx_name);
              }
              this.buf.b += ":";
              c = yb.enumParameters(a);
              this.buf.b += v.string(c.length);
              for (b = 0; b < c.length;) {
                f = c[b];
                ++b;
                this.serialize(f);
              }
              if (this.useCache) {
                this.cache.push(a);
              }
              break;
            default:
              throw G.thrown("Cannot serialize " + v.string(a));
          }
        },
        __class__: me
      };
      function gg(a) {
        var b = this;
        this.id = setInterval(function () {
          b.run();
        }, a);
      }
      g["haxe.Timer"] = gg;
      gg.__name__ = "haxe.Timer";
      gg.delay = function (a, b) {
        var c = new gg(b);
        c.run = function () {
          c.stop();
          a();
        };
        return c;
      };
      gg.prototype = {
        stop: function () {
          if (this.id != null) {
            clearInterval(this.id);
            this.id = null;
          }
        },
        run: function () {},
        __class__: gg
      };
      function Rl() {}
      g["haxe._Unserializer.DefaultResolver"] = Rl;
      Rl.__name__ = "haxe._Unserializer.DefaultResolver";
      Rl.prototype = {
        resolveClass: function (a) {
          return g[a];
        },
        resolveEnum: function (a) {
          return z[a];
        },
        __class__: Rl
      };
      function $d(a) {
        this.buf = a;
        this.length = this.buf.length;
        this.pos = 0;
        this.scache = [];
        this.cache = [];
        a = $d.DEFAULT_RESOLVER;
        if (a == null) {
          a = new Rl();
          $d.DEFAULT_RESOLVER = a;
        }
        this.resolver = a;
      }
      g["haxe.Unserializer"] = $d;
      $d.__name__ = "haxe.Unserializer";
      $d.initCodes = function () {
        var a = [];
        for (var b = 0, c = $d.BASE64.length; b < c;) {
          var d = b++;
          a[$d.BASE64.charCodeAt(d)] = d;
        }
        return a;
      };
      $d.run = function (a) {
        return new $d(a).unserialize();
      };
      $d.prototype = {
        setResolver: function (a) {
          if (a == null) {
            if (li.instance == null) {
              li.instance = new li();
            }
            this.resolver = li.instance;
          } else {
            this.resolver = a;
          }
        },
        readDigits: function () {
          var a = 0;
          var b = false;
          var c = this.pos;
          while (true) {
            var d = this.buf.charCodeAt(this.pos);
            if (d != d) {
              break;
            }
            if (d == 45) {
              if (this.pos != c) {
                break;
              }
              b = true;
            } else {
              if (d < 48 || d > 57) {
                break;
              }
              a = a * 10 + (d - 48);
            }
            this.pos++;
          }
          if (b) {
            a *= -1;
          }
          return a;
        },
        readFloat: function () {
          var a = this.pos;
          for (;;) {
            var b = this.buf.charCodeAt(this.pos);
            if (b != b) {
              break;
            }
            if (b >= 43 && b < 58 || b == 101 || b == 69) {
              this.pos++;
            } else {
              break;
            }
          }
          return parseFloat(r.substr(this.buf, a, this.pos - a));
        },
        unserializeObject: function (a) {
          while (true) {
            if (this.pos >= this.length) {
              throw G.thrown("Invalid object");
            }
            if (this.buf.charCodeAt(this.pos) == 103) {
              break;
            }
            var b = this.unserialize();
            if (typeof b != "string") {
              throw G.thrown("Invalid object key");
            }
            var c = this.unserialize();
            a[b] = c;
          }
          this.pos++;
        },
        unserializeEnum: function (a, b) {
          if (this.buf.charCodeAt(this.pos++) != 58) {
            throw G.thrown("Invalid enum format");
          }
          var c = this.readDigits();
          if (c == 0) {
            return yb.createEnum(a, b);
          }
          var d = [];
          for (; c-- > 0;) {
            d.push(this.unserialize());
          }
          return yb.createEnum(a, b, d);
        },
        unserialize: function () {
          switch (this.buf.charCodeAt(this.pos++)) {
            case 65:
              var a = this.unserialize();
              var b = this.resolver.resolveClass(a);
              if (b == null) {
                throw G.thrown("Class not found " + a);
              }
              return b;
            case 66:
              a = this.unserialize();
              b = this.resolver.resolveEnum(a);
              if (b == null) {
                throw G.thrown("Enum not found " + a);
              }
              return b;
            case 67:
              a = this.unserialize();
              b = this.resolver.resolveClass(a);
              if (b == null) {
                throw G.thrown("Class not found " + a);
              }
              b = Object.create(b.prototype);
              this.cache.push(b);
              b.hxUnserialize(this);
              if (this.buf.charCodeAt(this.pos++) != 103) {
                throw G.thrown("Invalid custom data");
              }
              return b;
            case 77:
              a = new la();
              this.cache.push(a);
              var c;
              for (; this.buf.charCodeAt(this.pos) != 104;) {
                b = this.unserialize();
                a.set(b, this.unserialize());
              }
              this.pos++;
              return a;
            case 82:
              a = this.readDigits();
              if (a < 0 || a >= this.scache.length) {
                throw G.thrown("Invalid string reference");
              }
              return this.scache[a];
            case 97:
              b = [];
              for (this.cache.push(b);;) {
                c = this.buf.charCodeAt(this.pos);
                if (c == 104) {
                  this.pos++;
                  break;
                }
                if (c == 117) {
                  this.pos++;
                  a = this.readDigits();
                  b[b.length + a - 1] = null;
                } else {
                  b.push(this.unserialize());
                }
              }
              return b;
            case 98:
              a = new ua();
              for (this.cache.push(a); this.buf.charCodeAt(this.pos) != 104;) {
                b = this.unserialize();
                c = this.unserialize();
                a.h[b] = c;
              }
              this.pos++;
              return a;
            case 99:
              a = this.unserialize();
              b = this.resolver.resolveClass(a);
              if (b == null) {
                throw G.thrown("Class not found " + a);
              }
              b = Object.create(b.prototype);
              this.cache.push(b);
              this.unserializeObject(b);
              return b;
            case 100:
              return this.readFloat();
            case 102:
              return false;
            case 105:
              return this.readDigits();
            case 106:
              a = this.unserialize();
              c = this.resolver.resolveEnum(a);
              if (c == null) {
                throw G.thrown("Enum not found " + a);
              }
              this.pos++;
              var d = this.readDigits();
              var e = c.__constructs__;
              var f = Array(e.length);
              for (var k = 0, h = e.length; k < h;) {
                b = k++;
                f[b] = e[b]._hx_name;
              }
              b = f[d];
              if (b == null) {
                throw G.thrown("Unknown enum index " + a + "@" + d);
              }
              b = this.unserializeEnum(c, b);
              this.cache.push(b);
              return b;
            case 107:
              return NaN;
            case 108:
              b = new jb();
              for (this.cache.push(b); this.buf.charCodeAt(this.pos) != 104;) {
                b.add(this.unserialize());
              }
              this.pos++;
              return b;
            case 109:
              return -Infinity;
            case 110:
              return null;
            case 111:
              b = {};
              this.cache.push(b);
              this.unserializeObject(b);
              return b;
            case 112:
              return Infinity;
            case 113:
              a = new wc();
              this.cache.push(a);
              for (c = this.buf.charCodeAt(this.pos++); c == 58;) {
                b = this.readDigits();
                c = this.unserialize();
                a.h[b] = c;
                c = this.buf.charCodeAt(this.pos++);
              }
              if (c != 104) {
                throw G.thrown("Invalid IntMap format");
              }
              return a;
            case 114:
              a = this.readDigits();
              if (a < 0 || a >= this.cache.length) {
                throw G.thrown("Invalid reference");
              }
              return this.cache[a];
            case 115:
              a = this.readDigits();
              c = this.buf;
              if (this.buf.charCodeAt(this.pos++) != 58 || this.length - this.pos < a) {
                throw G.thrown("Invalid bytes length");
              }
              d = $d.CODES;
              if (d == null) {
                d = $d.initCodes();
                $d.CODES = d;
              }
              b = this.pos;
              e = a & 3;
              f = b + (a - e);
              k = new Yb(new ArrayBuffer((a >> 2) * 3 + (e >= 2 ? e - 1 : 0)));
              for (h = 0; b < f;) {
                var n = d[c.charCodeAt(b++)];
                var g = d[c.charCodeAt(b++)];
                k.b[h++] = (n << 2 | g >> 4) & 255;
                n = d[c.charCodeAt(b++)];
                k.b[h++] = (g << 4 | n >> 2) & 255;
                g = d[c.charCodeAt(b++)];
                k.b[h++] = (n << 6 | g) & 255;
              }
              if (e >= 2) {
                n = d[c.charCodeAt(b++)];
                g = d[c.charCodeAt(b++)];
                k.b[h++] = (n << 2 | g >> 4) & 255;
                if (e == 3) {
                  n = d[c.charCodeAt(b++)];
                  k.b[h++] = (g << 4 | n >> 2) & 255;
                }
              }
              this.pos += a;
              this.cache.push(k);
              return k;
            case 116:
              return true;
            case 118:
              if (this.buf.charCodeAt(this.pos) >= 48 && this.buf.charCodeAt(this.pos) <= 57 && this.buf.charCodeAt(this.pos + 1) >= 48 && this.buf.charCodeAt(this.pos + 1) <= 57 && this.buf.charCodeAt(this.pos + 2) >= 48 && this.buf.charCodeAt(this.pos + 2) <= 57 && this.buf.charCodeAt(this.pos + 3) >= 48 && this.buf.charCodeAt(this.pos + 3) <= 57 && this.buf.charCodeAt(this.pos + 4) == 45) {
                b = r.strDate(r.substr(this.buf, this.pos, 19));
                this.pos += 19;
              } else {
                b = new Date(this.readFloat());
              }
              this.cache.push(b);
              return b;
            case 119:
              a = this.unserialize();
              c = this.resolver.resolveEnum(a);
              if (c == null) {
                throw G.thrown("Enum not found " + a);
              }
              b = this.unserializeEnum(c, this.unserialize());
              this.cache.push(b);
              return b;
            case 120:
              throw G.thrown(this.unserialize());
            case 121:
              a = this.readDigits();
              if (this.buf.charCodeAt(this.pos++) != 58 || this.length - this.pos < a) {
                throw G.thrown("Invalid string length");
              }
              b = r.substr(this.buf, this.pos, a);
              this.pos += a;
              b = decodeURIComponent(b.split("+").join(" "));
              this.scache.push(b);
              return b;
            case 122:
              return 0;
          }
          this.pos--;
          throw G.thrown("Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos);
        },
        __class__: $d
      };
      function li() {}
      g["haxe._Unserializer.NullResolver"] = li;
      li.__name__ = "haxe._Unserializer.NullResolver";
      li.prototype = {
        resolveClass: function (a) {
          return null;
        },
        resolveEnum: function (a) {
          return null;
        },
        __class__: li
      };
      function go(a) {
        this.__b = "";
      }
      g["haxe.Utf8"] = go;
      go.__name__ = "haxe.Utf8";
      go.prototype = {
        __class__: go
      };
      function Dj(a, b, c) {
        G.call(this, String(a), b, c);
        this.value = a;
        this.__skipStack++;
      }
      g["haxe.ValueException"] = Dj;
      Dj.__name__ = "haxe.ValueException";
      Dj.__super__ = G;
      Dj.prototype = q(G.prototype, {
        unwrap: function () {
          return this.value;
        },
        __class__: Dj
      });
      function mi() {
        this.a1 = 1;
        this.a2 = 0;
      }
      g["haxe.crypto.Adler32"] = mi;
      mi.__name__ = "haxe.crypto.Adler32";
      mi.read = function (a) {
        var b = new mi();
        var c = a.readByte();
        var d = a.readByte();
        var e = a.readByte();
        a = a.readByte();
        b.a1 = e << 8 | a;
        b.a2 = c << 8 | d;
        return b;
      };
      mi.prototype = {
        update: function (a, b, c) {
          var d = this.a1;
          var e = this.a2;
          var f = b;
          for (b += c; f < b;) {
            c = f++;
            d = (d + a.b[c]) % 65521;
            e = (e + d) % 65521;
          }
          this.a1 = d;
          this.a2 = e;
        },
        equals: function (a) {
          if (a.a1 == this.a1) {
            return a.a2 == this.a2;
          } else {
            return false;
          }
        },
        __class__: mi
      };
      function ki() {}
      g["haxe.crypto.Base64"] = ki;
      ki.__name__ = "haxe.crypto.Base64";
      ki.decode = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b) {
          while (r.cca(a, a.length - 1) == 61) {
            a = r.substr(a, 0, -1);
          }
        }
        return new ho(ki.BYTES).decodeBytes(Yb.ofString(a));
      };
      function ho(a) {
        for (var b = a.length, c = 1; b > 1 << c;) {
          ++c;
        }
        if (c > 8 || b != 1 << c) {
          throw G.thrown("BaseCode : base length must be a power of two.");
        }
        this.base = a;
        this.nbits = c;
      }
      g["haxe.crypto.BaseCode"] = ho;
      ho.__name__ = "haxe.crypto.BaseCode";
      ho.prototype = {
        initTable: function () {
          var a = [];
          for (var b = 0; b < 256;) {
            var c = b++;
            a[c] = -1;
          }
          b = 0;
          for (var d = this.base.length; b < d;) {
            c = b++;
            a[this.base.b[c]] = c;
          }
          this.tbl = a;
        },
        decodeBytes: function (a) {
          var b = this.nbits;
          if (this.tbl == null) {
            this.initTable();
          }
          var c = this.tbl;
          for (var d = a.length * b >> 3, e = new Yb(new ArrayBuffer(d)), f = 0, k = 0, h = 0, n = 0; n < d;) {
            while (k < 8) {
              k += b;
              f <<= b;
              var g = c[a.b[h++]];
              if (g == -1) {
                throw G.thrown("BaseCode : invalid encoded char");
              }
              f |= g;
            }
            k -= 8;
            e.b[n++] = f >> k & 255;
          }
          return e;
        },
        __class__: ho
      };
      function Yc() {}
      g["haxe.ds.ArraySort"] = Yc;
      Yc.__name__ = "haxe.ds.ArraySort";
      Yc.sort = function (a, b) {
        Yc.rec(a, b, 0, a.length);
      };
      Yc.rec = function (a, b, c, d) {
        var e = c + d >> 1;
        if (d - c < 12) {
          if (!(d <= c)) {
            for (e = c + 1; e < d;) {
              for (var f = e++; f > c;) {
                if (b(a[f], a[f - 1]) < 0) {
                  Yc.swap(a, f - 1, f);
                } else {
                  break;
                }
                --f;
              }
            }
          }
        } else {
          Yc.rec(a, b, c, e);
          Yc.rec(a, b, e, d);
          Yc.doMerge(a, b, c, e, d, e - c, d - e);
        }
      };
      Yc.doMerge = function (a, b, c, d, e, f, k) {
        if (f != 0 && k != 0) {
          if (f + k == 2) {
            if (b(a[d], a[c]) < 0) {
              Yc.swap(a, d, c);
            }
          } else {
            if (f > k) {
              var h = f >> 1;
              var n = c + h;
              var g = Yc.lower(a, b, d, e, n);
              var p = g - d;
            } else {
              p = k >> 1;
              g = d + p;
              n = Yc.upper(a, b, c, d, g);
              h = n - c;
            }
            Yc.rotate(a, b, n, d, g);
            d = n + p;
            Yc.doMerge(a, b, c, n, d, h, p);
            Yc.doMerge(a, b, d, g, e, f - h, k - p);
          }
        }
      };
      Yc.rotate = function (a, b, c, d, e) {
        if (c != d && d != e) {
          for (b = Yc.gcd(e - c, d - c); b-- != 0;) {
            var f = a[c + b];
            var k = d - c;
            var h = c + b;
            for (var n = c + b + k; n != c + b;) {
              a[h] = a[n];
              h = n;
              n = e - n > k ? n + k : c + (k - (e - n));
            }
            a[h] = f;
          }
        }
      };
      Yc.gcd = function (a, b) {
        while (b != 0) {
          var c = a % b;
          a = b;
          b = c;
        }
        return a;
      };
      Yc.upper = function (a, b, c, d, e) {
        d -= c;
        var f;
        var k;
        for (; d > 0;) {
          f = d >> 1;
          k = c + f;
          if (b(a[e], a[k]) < 0) {
            d = f;
          } else {
            c = k + 1;
            d = d - f - 1;
          }
        }
        return c;
      };
      Yc.lower = function (a, b, c, d, e) {
        d -= c;
        var f;
        var k;
        for (; d > 0;) {
          f = d >> 1;
          k = c + f;
          if (b(a[k], a[e]) < 0) {
            c = k + 1;
            d = d - f - 1;
          } else {
            d = f;
          }
        }
        return c;
      };
      Yc.swap = function (a, b, c) {
        var d = a[b];
        a[b] = a[c];
        a[c] = d;
      };
      function Ej() {}
      g["haxe.ds.BalancedTree"] = Ej;
      Ej.__name__ = "haxe.ds.BalancedTree";
      Ej.__interfaces__ = [gc];
      Ej.prototype = {
        set: function (a, b) {
          this.root = this.setLoop(a, b, this.root);
        },
        get: function (a) {
          for (var b = this.root; b != null;) {
            var c = this.compare(a, b.key);
            if (c == 0) {
              return b.value;
            }
            b = c < 0 ? b.left : b.right;
          }
          return null;
        },
        remove: function (a) {
          try {
            this.root = this.removeLoop(a, this.root);
            return true;
          } catch (b) {
            Pa.lastError = b;
            if (typeof G.caught(b).unwrap() == "string") {
              return false;
            }
            throw b;
          }
        },
        keys: function () {
          var a = [];
          this.keysLoop(this.root, a);
          return new Qf(a);
        },
        setLoop: function (a, b, c) {
          if (c == null) {
            return new pe(null, a, b, null);
          }
          var d = this.compare(a, c.key);
          if (d == 0) {
            return new pe(c.left, a, b, c.right, c == null ? 0 : c._height);
          }
          if (d < 0) {
            a = this.setLoop(a, b, c.left);
            return this.balance(a, c.key, c.value, c.right);
          }
          a = this.setLoop(a, b, c.right);
          return this.balance(c.left, c.key, c.value, a);
        },
        removeLoop: function (a, b) {
          if (b == null) {
            throw G.thrown("Not_found");
          }
          var c = this.compare(a, b.key);
          if (c == 0) {
            return this.merge(b.left, b.right);
          } else if (c < 0) {
            return this.balance(this.removeLoop(a, b.left), b.key, b.value, b.right);
          } else {
            return this.balance(b.left, b.key, b.value, this.removeLoop(a, b.right));
          }
        },
        keysLoop: function (a, b) {
          if (a != null) {
            this.keysLoop(a.left, b);
            b.push(a.key);
            this.keysLoop(a.right, b);
          }
        },
        merge: function (a, b) {
          if (a == null) {
            return b;
          }
          if (b == null) {
            return a;
          }
          var c = this.minBinding(b);
          return this.balance(a, c.key, c.value, this.removeMinBinding(b));
        },
        minBinding: function (a) {
          if (a == null) {
            throw G.thrown("Not_found");
          }
          if (a.left == null) {
            return a;
          } else {
            return this.minBinding(a.left);
          }
        },
        removeMinBinding: function (a) {
          if (a.left == null) {
            return a.right;
          } else {
            return this.balance(this.removeMinBinding(a.left), a.key, a.value, a.right);
          }
        },
        balance: function (a, b, c, d) {
          var e = a == null ? 0 : a._height;
          var f = d == null ? 0 : d._height;
          if (e > f + 2) {
            e = a.left;
            f = a.right;
            if ((e == null ? 0 : e._height) >= (f == null ? 0 : f._height)) {
              return new pe(a.left, a.key, a.value, new pe(a.right, b, c, d));
            } else {
              return new pe(new pe(a.left, a.key, a.value, a.right.left), a.right.key, a.right.value, new pe(a.right.right, b, c, d));
            }
          } else if (f > e + 2) {
            e = d.right;
            f = d.left;
            if ((e == null ? 0 : e._height) > (f == null ? 0 : f._height)) {
              return new pe(new pe(a, b, c, d.left), d.key, d.value, d.right);
            } else {
              return new pe(new pe(a, b, c, d.left.left), d.left.key, d.left.value, new pe(d.left.right, d.key, d.value, d.right));
            }
          } else {
            return new pe(a, b, c, d, (e > f ? e : f) + 1);
          }
        },
        compare: function (a, b) {
          return ja.compare(a, b);
        },
        __class__: Ej
      };
      function pe(a, b, c, d, e) {
        if (e == null) {
          e = -1;
        }
        this.left = a;
        this.key = b;
        this.value = c;
        this.right = d;
        if (e == -1) {
          a = this.left;
          b = this.right;
          a = (a == null ? 0 : a._height) > (b == null ? 0 : b._height) ? this.left : this.right;
          this._height = (a == null ? 0 : a._height) + 1;
        } else {
          this._height = e;
        }
      }
      g["haxe.ds.TreeNode"] = pe;
      pe.__name__ = "haxe.ds.TreeNode";
      pe.prototype = {
        __class__: pe
      };
      function nj() {}
      g["haxe.ds.EnumValueMap"] = nj;
      nj.__name__ = "haxe.ds.EnumValueMap";
      nj.__interfaces__ = [gc];
      nj.__super__ = Ej;
      nj.prototype = q(Ej.prototype, {
        compare: function (a, b) {
          var c = a._hx_index - b._hx_index;
          if (c != 0) {
            return c;
          }
          a = yb.enumParameters(a);
          b = yb.enumParameters(b);
          if (a.length == 0 && b.length == 0) {
            return 0;
          } else {
            return this.compareArgs(a, b);
          }
        },
        compareArgs: function (a, b) {
          var c = a.length - b.length;
          if (c != 0) {
            return c;
          }
          c = 0;
          for (var d = a.length; c < d;) {
            var e = c++;
            e = this.compareArg(a[e], b[e]);
            if (e != 0) {
              return e;
            }
          }
          return 0;
        },
        compareArg: function (a, b) {
          if (ja.isEnumValue(a) && ja.isEnumValue(b)) {
            return this.compare(a, b);
          } else if (a instanceof Array && b instanceof Array) {
            return this.compareArgs(a, b);
          } else {
            return ja.compare(a, b);
          }
        },
        __class__: nj
      });
      function wc() {
        this.h = {};
      }
      g["haxe.ds.IntMap"] = wc;
      wc.__name__ = "haxe.ds.IntMap";
      wc.__interfaces__ = [gc];
      wc.prototype = {
        set: function (a, b) {
          this.h[a] = b;
        },
        get: function (a) {
          return this.h[a];
        },
        remove: function (a) {
          if (!this.h.hasOwnProperty(a)) {
            return false;
          }
          delete this.h[a];
          return true;
        },
        keys: function () {
          var a = [];
          var b;
          for (b in this.h) {
            if (this.h.hasOwnProperty(b)) {
              a.push(+b);
            }
          }
          return new Qf(a);
        },
        iterator: function () {
          return {
            ref: this.h,
            it: this.keys(),
            hasNext: function () {
              return this.it.hasNext();
            },
            next: function () {
              var a = this.it.next();
              return this.ref[a];
            }
          };
        },
        __class__: wc
      };
      function jk(a, b) {
        this.item = a;
        this.next = b;
      }
      g["haxe.ds._List.ListNode"] = jk;
      jk.__name__ = "haxe.ds._List.ListNode";
      jk.prototype = {
        __class__: jk
      };
      function kn(a) {
        this.head = a;
      }
      g["haxe.ds._List.ListIterator"] = kn;
      kn.__name__ = "haxe.ds._List.ListIterator";
      kn.prototype = {
        hasNext: function () {
          return this.head != null;
        },
        next: function () {
          var a = this.head.item;
          this.head = this.head.next;
          return a;
        },
        __class__: kn
      };
      function ua() {
        this.h = Object.create(null);
      }
      g["haxe.ds.StringMap"] = ua;
      ua.__name__ = "haxe.ds.StringMap";
      ua.__interfaces__ = [gc];
      ua.createCopy = function (a) {
        var b = new ua();
        var c;
        for (c in a) {
          b.h[c] = a[c];
        }
        return b;
      };
      ua.prototype = {
        get: function (a) {
          return this.h[a];
        },
        set: function (a, b) {
          this.h[a] = b;
        },
        remove: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.h, a)) {
            delete this.h[a];
            return true;
          } else {
            return false;
          }
        },
        keys: function () {
          return new rk(this.h);
        },
        __class__: ua
      };
      function rk(a) {
        this.h = a;
        this.keys = Object.keys(a);
        this.length = this.keys.length;
        this.current = 0;
      }
      g["haxe.ds._StringMap.StringMapKeyIterator"] = rk;
      rk.__name__ = "haxe.ds._StringMap.StringMapKeyIterator";
      rk.prototype = {
        hasNext: function () {
          return this.current < this.length;
        },
        next: function () {
          return this.keys[this.current++];
        },
        __class__: rk
      };
      function ni(a, b, c) {
        G.call(this, a, b);
        this.posInfos = c == null ? {
          fileName: "(unknown)",
          lineNumber: 0,
          className: "(unknown)",
          methodName: "(unknown)"
        } : c;
        this.__skipStack++;
      }
      g["haxe.exceptions.PosException"] = ni;
      ni.__name__ = "haxe.exceptions.PosException";
      ni.__super__ = G;
      ni.prototype = q(G.prototype, {
        toString: function () {
          return "" + G.prototype.toString.call(this) + " in " + this.posInfos.className + "." + this.posInfos.methodName + " at " + this.posInfos.fileName + ":" + this.posInfos.lineNumber;
        },
        __class__: ni
      });
      function Sl(a, b, c) {
        if (a == null) {
          a = "Not implemented";
        }
        ni.call(this, a, b, c);
        this.__skipStack++;
      }
      g["haxe.exceptions.NotImplementedException"] = Sl;
      Sl.__name__ = "haxe.exceptions.NotImplementedException";
      Sl.__super__ = ni;
      Sl.prototype = q(ni.prototype, {
        __class__: Sl
      });
      function Tl() {
        this.size = this.pos = 0;
      }
      g["haxe.io.BytesBuffer"] = Tl;
      Tl.__name__ = "haxe.io.BytesBuffer";
      Tl.prototype = {
        addByte: function (a) {
          if (this.pos == this.size) {
            this.grow(1);
          }
          this.view.setUint8(this.pos++, a);
        },
        add: function (a) {
          if (this.pos + a.length > this.size) {
            this.grow(a.length);
          }
          if (this.size != 0) {
            var b = new Uint8Array(a.b.buffer, a.b.byteOffset, a.length);
            this.u8.set(b, this.pos);
            this.pos += a.length;
          }
        },
        addBytes: function (a, b, c) {
          if (b < 0 || c < 0 || b + c > a.length) {
            throw G.thrown(Af.OutsideBounds);
          }
          if (this.pos + c > this.size) {
            this.grow(c);
          }
          if (this.size != 0) {
            a = new Uint8Array(a.b.buffer, a.b.byteOffset + b, c);
            this.u8.set(a, this.pos);
            this.pos += c;
          }
        },
        grow: function (a) {
          var b = this.pos + a;
          for (a = this.size == 0 ? 16 : this.size; a < b;) {
            a = a * 3 >> 1;
          }
          b = new ArrayBuffer(a);
          var c = new Uint8Array(b);
          if (this.size > 0) {
            c.set(this.u8);
          }
          this.size = a;
          this.buffer = b;
          this.u8 = c;
          this.view = new DataView(this.buffer);
        },
        getBytes: function () {
          if (this.size == 0) {
            return new Yb(new ArrayBuffer(0));
          }
          var a = new Yb(this.buffer);
          a.length = this.pos;
          return a;
        },
        __class__: Tl
      };
      function Ul() {}
      g["haxe.io.Input"] = Ul;
      Ul.__name__ = "haxe.io.Input";
      Ul.prototype = {
        readByte: function () {
          throw new Sl(null, null, {
            fileName: "haxe/io/Input.hx",
            lineNumber: 53,
            className: "haxe.io.Input",
            methodName: "readByte"
          });
        },
        readBytes: function (a, b, c) {
          var d = c;
          var e = a.b;
          if (b < 0 || c < 0 || b + c > a.length) {
            throw G.thrown(Af.OutsideBounds);
          }
          try {
            while (d > 0) {
              e[b] = this.readByte();
              ++b;
              --d;
            }
          } catch (f) {
            Pa.lastError = f;
            if (!(G.caught(f).unwrap() instanceof Fj)) {
              throw f;
            }
          }
          return c - d;
        },
        readFullBytes: function (a, b, c) {
          while (c > 0) {
            var d = this.readBytes(a, b, c);
            if (d == 0) {
              throw G.thrown(Af.Blocked);
            }
            b += d;
            c -= d;
          }
        },
        read: function (a) {
          var b = new Yb(new ArrayBuffer(a));
          var c = 0;
          for (; a > 0;) {
            var d = this.readBytes(b, c, a);
            if (d == 0) {
              throw G.thrown(Af.Blocked);
            }
            c += d;
            a -= d;
          }
          return b;
        },
        readInt16: function () {
          var a = this.readByte();
          var b = this.readByte();
          a = this.bigEndian ? b | a << 8 : a | b << 8;
          if ((a & 32768) != 0) {
            return a - 65536;
          } else {
            return a;
          }
        },
        readUInt16: function () {
          var a = this.readByte();
          var b = this.readByte();
          if (this.bigEndian) {
            return b | a << 8;
          } else {
            return a | b << 8;
          }
        },
        readInt32: function () {
          var a = this.readByte();
          var b = this.readByte();
          var c = this.readByte();
          var d = this.readByte();
          if (this.bigEndian) {
            return d | c << 8 | b << 16 | a << 24;
          } else {
            return a | b << 8 | c << 16 | d << 24;
          }
        },
        readString: function (a, b) {
          var c = new Yb(new ArrayBuffer(a));
          this.readFullBytes(c, 0, a);
          return c.getString(0, a, b);
        },
        __class__: Ul
      };
      function Cj(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (c == null) {
          c = a.length - b;
        }
        if (b < 0 || c < 0 || b + c > a.length) {
          throw G.thrown(Af.OutsideBounds);
        }
        this.b = a.b;
        this.pos = b;
        this.totlen = this.len = c;
      }
      g["haxe.io.BytesInput"] = Cj;
      Cj.__name__ = "haxe.io.BytesInput";
      Cj.__super__ = Ul;
      Cj.prototype = q(Ul.prototype, {
        readByte: function () {
          if (this.len == 0) {
            throw G.thrown(new Fj());
          }
          this.len--;
          return this.b[this.pos++];
        },
        readBytes: function (a, b, c) {
          if (b < 0 || c < 0 || b + c > a.length) {
            throw G.thrown(Af.OutsideBounds);
          }
          if (this.len == 0 && c > 0) {
            throw G.thrown(new Fj());
          }
          if (this.len < c) {
            c = this.len;
          }
          var d = this.b;
          a = a.b;
          for (var e = 0, f = c; e < f;) {
            var k = e++;
            a[b + k] = d[this.pos + k];
          }
          this.pos += c;
          this.len -= c;
          return c;
        },
        __class__: Cj
      });
      var up = z["haxe.io.Encoding"] = {
        __ename__: "haxe.io.Encoding",
        __constructs__: null,
        UTF8: {
          _hx_name: "UTF8",
          _hx_index: 0,
          __enum__: "haxe.io.Encoding",
          toString: p
        },
        RawNative: {
          _hx_name: "RawNative",
          _hx_index: 1,
          __enum__: "haxe.io.Encoding",
          toString: p
        }
      };
      up.__constructs__ = [up.UTF8, up.RawNative];
      function Fj() {}
      g["haxe.io.Eof"] = Fj;
      Fj.__name__ = "haxe.io.Eof";
      Fj.prototype = {
        toString: function () {
          return "Eof";
        },
        __class__: Fj
      };
      var Af = z["haxe.io.Error"] = {
        __ename__: "haxe.io.Error",
        __constructs__: null,
        Blocked: {
          _hx_name: "Blocked",
          _hx_index: 0,
          __enum__: "haxe.io.Error",
          toString: p
        },
        Overflow: {
          _hx_name: "Overflow",
          _hx_index: 1,
          __enum__: "haxe.io.Error",
          toString: p
        },
        OutsideBounds: {
          _hx_name: "OutsideBounds",
          _hx_index: 2,
          __enum__: "haxe.io.Error",
          toString: p
        },
        Custom: (u = function (a) {
          return {
            _hx_index: 3,
            e: a,
            __enum__: "haxe.io.Error",
            toString: p
          };
        }, u._hx_name = "Custom", u.__params__ = ["e"], u)
      };
      Af.__constructs__ = [Af.Blocked, Af.Overflow, Af.OutsideBounds, Af.Custom];
      var Op = {
        fromBytes: function (a, b, c) {
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = a.length - b >> 2;
          }
          return new Float32Array(a.b.bufferValue, b, c);
        }
      };
      function Kc(a) {
        switch (a) {
          case ".":
          case "..":
            this.dir = a;
            this.file = "";
            return;
        }
        var b = a.lastIndexOf("/");
        var c = a.lastIndexOf("\\");
        if (b < c) {
          this.dir = r.substr(a, 0, c);
          a = r.substr(a, c + 1, null);
          this.backslash = true;
        } else if (c < b) {
          this.dir = r.substr(a, 0, b);
          a = r.substr(a, b + 1, null);
        } else {
          this.dir = null;
        }
        b = a.lastIndexOf(".");
        if (b != -1) {
          this.ext = r.substr(a, b + 1, null);
          this.file = r.substr(a, 0, b);
        } else {
          this.ext = null;
          this.file = a;
        }
      }
      g["haxe.io.Path"] = Kc;
      Kc.__name__ = "haxe.io.Path";
      Kc.withoutDirectory = function (a) {
        a = new Kc(a);
        a.dir = null;
        return a.toString();
      };
      Kc.directory = function (a) {
        a = new Kc(a);
        if (a.dir == null) {
          return "";
        } else {
          return a.dir;
        }
      };
      Kc.extension = function (a) {
        a = new Kc(a);
        if (a.ext == null) {
          return "";
        } else {
          return a.ext;
        }
      };
      Kc.prototype = {
        toString: function () {
          return (this.dir == null ? "" : this.dir + (this.backslash ? "\\" : "/")) + this.file + (this.ext == null ? "" : "." + this.ext);
        },
        __class__: Kc
      };
      function Qf(a) {
        this.current = 0;
        this.array = a;
      }
      g["haxe.iterators.ArrayIterator"] = Qf;
      Qf.__name__ = "haxe.iterators.ArrayIterator";
      Qf.prototype = {
        hasNext: function () {
          return this.current < this.array.length;
        },
        next: function () {
          return this.array[this.current++];
        },
        __class__: Qf
      };
      function ln(a) {
        this.current = 0;
        this.array = a;
      }
      g["haxe.iterators.ArrayKeyValueIterator"] = ln;
      ln.__name__ = "haxe.iterators.ArrayKeyValueIterator";
      ln.prototype = {
        hasNext: function () {
          return this.current < this.array.length;
        },
        next: function () {
          return {
            value: this.array[this.current],
            key: this.current++
          };
        },
        __class__: ln
      };
      function dp(a) {
        this.map = a;
        this.keys = a.keys();
      }
      g["haxe.iterators.MapKeyValueIterator"] = dp;
      dp.__name__ = "haxe.iterators.MapKeyValueIterator";
      dp.prototype = {
        hasNext: function () {
          return this.keys.hasNext();
        },
        next: function () {
          var a = this.keys.next();
          return {
            value: this.map.get(a),
            key: a
          };
        },
        __class__: dp
      };
      var Db = {
        resolve: function (a, b) {
          var c = a.elementsNamed(b).next();
          if (c == null) {
            if (a.nodeType == ea.Document) {
              a = "Document";
            } else {
              if (a.nodeType != ea.Element) {
                throw G.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
              }
              a = a.nodeName;
            }
            throw G.thrown(a + " is missing element " + b);
          }
          if (c.nodeType != ea.Document && c.nodeType != ea.Element) {
            throw G.thrown("Invalid nodeType " + (c.nodeType == null ? "null" : mb.toString(c.nodeType)));
          }
          return c;
        }
      };
      var Kb = {
        resolve: function (a, b) {
          if (a.nodeType == ea.Document) {
            throw G.thrown("Cannot access document attribute " + b);
          }
          var c = a.get(b);
          if (c == null) {
            if (a.nodeType != ea.Element) {
              throw G.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
            }
            throw G.thrown(a.nodeName + " is missing attribute " + b);
          }
          return c;
        }
      };
      var cc = {
        resolve: function (a, b) {
          if (a.nodeType == ea.Document) {
            throw G.thrown("Cannot access document attribute " + b);
          }
          return a.exists(b);
        }
      };
      var fb = {
        resolve: function (a, b) {
          return a.elementsNamed(b).hasNext();
        }
      };
      var dc = {
        resolve: function (a, b) {
          var c = [];
          for (a = a.elementsNamed(b); a.hasNext();) {
            b = a.next();
            if (b.nodeType != ea.Document && b.nodeType != ea.Element) {
              throw G.thrown("Invalid nodeType " + (b.nodeType == null ? "null" : mb.toString(b.nodeType)));
            }
            c.push(b);
          }
          return c;
        }
      };
      function hd(a, b, c) {
        this.xml = b;
        this.message = a;
        this.position = c;
        this.lineNumber = 1;
        for (a = this.positionAtLine = 0; a < c;) {
          var d = a++;
          d = b.charCodeAt(d);
          if (d == 10) {
            this.lineNumber++;
            this.positionAtLine = 0;
          } else if (d != 13) {
            this.positionAtLine++;
          }
        }
      }
      g["haxe.xml.XmlParserException"] = hd;
      hd.__name__ = "haxe.xml.XmlParserException";
      hd.prototype = {
        toString: function () {
          return va.getClass(this).__name__ + ": " + this.message + " at line " + this.lineNumber + " char " + this.positionAtLine;
        },
        __class__: hd
      };
      function Ag() {}
      g["haxe.xml.Parser"] = Ag;
      Ag.__name__ = "haxe.xml.Parser";
      Ag.parse = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = ea.createDocument();
        Ag.doParse(a, b, 0, c);
        return c;
      };
      Ag.doParse = function (a, b, c, d) {
        if (c == null) {
          c = 0;
        }
        var e = null;
        for (var f = 1, k = 1, h = null, n = 0, g = 0, p = 0, l = new Ab(), m = 1, q = -1; c < a.length;) {
          var w = a.charCodeAt(c);
          switch (f) {
            case 0:
              switch (w) {
                case 9:
                case 10:
                case 13:
                case 32:
                  break;
                default:
                  f = k;
                  continue;
              }
              break;
            case 1:
              if (w == 60) {
                f = 0;
                k = 2;
              } else {
                n = c;
                f = 13;
                continue;
              }
              break;
            case 2:
              switch (w) {
                case 33:
                  if (a.charCodeAt(c + 1) == 91) {
                    c += 2;
                    if (r.substr(a, c, 6).toUpperCase() != "CDATA[") {
                      throw G.thrown(new hd("Expected <![CDATA[", a, c));
                    }
                    c += 5;
                    f = 17;
                  } else if (a.charCodeAt(c + 1) == 68 || a.charCodeAt(c + 1) == 100) {
                    if (r.substr(a, c + 2, 6).toUpperCase() != "OCTYPE") {
                      throw G.thrown(new hd("Expected <!DOCTYPE", a, c));
                    }
                    c += 8;
                    f = 16;
                  } else {
                    if (a.charCodeAt(c + 1) != 45 || a.charCodeAt(c + 2) != 45) {
                      throw G.thrown(new hd("Expected <!--", a, c));
                    }
                    c += 2;
                    f = 15;
                  }
                  n = c + 1;
                  break;
                case 47:
                  if (d == null) {
                    throw G.thrown(new hd("Expected node name", a, c));
                  }
                  n = c + 1;
                  f = 0;
                  k = 10;
                  break;
                case 63:
                  f = 14;
                  n = c;
                  break;
                default:
                  f = 3;
                  n = c;
                  continue;
              }
              break;
            case 3:
              if ((!(w >= 97) || !(w <= 122)) && (!(w >= 65) || !(w <= 90)) && (!(w >= 48) || !(w <= 57)) && w != 58 && w != 46 && w != 95 && w != 45) {
                if (c == n) {
                  throw G.thrown(new hd("Expected node name", a, c));
                }
                e = ea.createElement(r.substr(a, n, c - n));
                d.addChild(e);
                ++g;
                f = 0;
                k = 4;
                continue;
              }
              break;
            case 4:
              switch (w) {
                case 47:
                  f = 11;
                  break;
                case 62:
                  f = 9;
                  break;
                default:
                  f = 5;
                  n = c;
                  continue;
              }
              break;
            case 5:
              if ((!(w >= 97) || !(w <= 122)) && (!(w >= 65) || !(w <= 90)) && (!(w >= 48) || !(w <= 57)) && w != 58 && w != 46 && w != 95 && w != 45) {
                if (n == c) {
                  throw G.thrown(new hd("Expected attribute name", a, c));
                }
                h = r.substr(a, n, c - n);
                if (e.exists(h)) {
                  throw G.thrown(new hd("Duplicate attribute [" + h + "]", a, c));
                }
                f = 0;
                k = 6;
                continue;
              }
              break;
            case 6:
              if (w == 61) {
                f = 0;
                k = 7;
              } else {
                throw G.thrown(new hd("Expected =", a, c));
              }
              break;
            case 7:
              switch (w) {
                case 34:
                case 39:
                  l = new Ab();
                  f = 8;
                  n = c + 1;
                  q = w;
                  break;
                default:
                  throw G.thrown(new hd("Expected \"", a, c));
              }
              break;
            case 8:
              switch (w) {
                case 38:
                  m = c - n;
                  l.b += m == null ? r.substr(a, n, null) : r.substr(a, n, m);
                  f = 18;
                  m = 8;
                  n = c + 1;
                  break;
                case 60:
                case 62:
                  if (b) {
                    throw G.thrown(new hd("Invalid unescaped " + String.fromCodePoint(w) + " in attribute value", a, c));
                  }
                  if (w == q) {
                    k = c - n;
                    l.b += k == null ? r.substr(a, n, null) : r.substr(a, n, k);
                    k = l.b;
                    l = new Ab();
                    e.set(h, k);
                    f = 0;
                    k = 4;
                  }
                  break;
                default:
                  if (w == q) {
                    k = c - n;
                    l.b += k == null ? r.substr(a, n, null) : r.substr(a, n, k);
                    k = l.b;
                    l = new Ab();
                    e.set(h, k);
                    f = 0;
                    k = 4;
                  }
              }
              break;
            case 9:
              n = c = Ag.doParse(a, b, c, e);
              f = 1;
              break;
            case 10:
              if ((!(w >= 97) || !(w <= 122)) && (!(w >= 65) || !(w <= 90)) && (!(w >= 48) || !(w <= 57)) && w != 58 && w != 46 && w != 95 && w != 45) {
                if (n == c) {
                  throw G.thrown(new hd("Expected node name", a, c));
                }
                k = r.substr(a, n, c - n);
                if (d == null || d.nodeType != 0) {
                  throw G.thrown(new hd("Unexpected </" + k + ">, tag is not open", a, c));
                }
                if (d.nodeType != ea.Element) {
                  throw G.thrown("Bad node type, expected Element but found " + (d.nodeType == null ? "null" : mb.toString(d.nodeType)));
                }
                if (k != d.nodeName) {
                  if (d.nodeType != ea.Element) {
                    throw G.thrown("Bad node type, expected Element but found " + (d.nodeType == null ? "null" : mb.toString(d.nodeType)));
                  }
                  throw G.thrown(new hd("Expected </" + d.nodeName + ">", a, c));
                }
                f = 0;
                k = 12;
                continue;
              }
              break;
            case 11:
              if (w == 62) {
                f = 1;
              } else {
                throw G.thrown(new hd("Expected >", a, c));
              }
              break;
            case 12:
              if (w == 62) {
                if (g == 0) {
                  d.addChild(ea.createPCData(""));
                }
                return c;
              }
              throw G.thrown(new hd("Expected >", a, c));
            case 13:
              if (w == 60) {
                k = c - n;
                l.b += k == null ? r.substr(a, n, null) : r.substr(a, n, k);
                k = ea.createPCData(l.b);
                l = new Ab();
                d.addChild(k);
                ++g;
                f = 0;
                k = 2;
              } else if (w == 38) {
                m = c - n;
                l.b += m == null ? r.substr(a, n, null) : r.substr(a, n, m);
                f = 18;
                m = 13;
                n = c + 1;
              }
              break;
            case 14:
              if (w == 63 && a.charCodeAt(c + 1) == 62) {
                ++c;
                f = r.substr(a, n + 1, c - n - 2);
                d.addChild(ea.createProcessingInstruction(f));
                ++g;
                f = 1;
              }
              break;
            case 15:
              if (w == 45 && a.charCodeAt(c + 1) == 45 && a.charCodeAt(c + 2) == 62) {
                d.addChild(ea.createComment(r.substr(a, n, c - n)));
                ++g;
                c += 2;
                f = 1;
              }
              break;
            case 16:
              if (w == 91) {
                ++p;
              } else if (w == 93) {
                --p;
              } else if (w == 62 && p == 0) {
                d.addChild(ea.createDocType(r.substr(a, n, c - n)));
                ++g;
                f = 1;
              }
              break;
            case 17:
              if (w == 93 && a.charCodeAt(c + 1) == 93 && a.charCodeAt(c + 2) == 62) {
                f = ea.createCData(r.substr(a, n, c - n));
                d.addChild(f);
                ++g;
                c += 2;
                f = 1;
              }
              break;
            case 18:
              if (w == 59) {
                n = r.substr(a, n, c - n);
                if (n.charCodeAt(0) == 35) {
                  n = n.charCodeAt(1) == 120 ? v.parseInt("0" + r.substr(n, 1, n.length - 1)) : v.parseInt(r.substr(n, 1, n.length - 1));
                  l.b += String.fromCodePoint(n);
                } else if (Object.prototype.hasOwnProperty.call(Ag.escapes.h, n)) {
                  l.b += v.string(Ag.escapes.h[n]);
                } else {
                  if (b) {
                    throw G.thrown(new hd("Undefined entity: " + n, a, c));
                  }
                  l.b += v.string("&" + n + ";");
                }
                n = c + 1;
                f = m;
              } else if ((!(w >= 97) || !(w <= 122)) && (!(w >= 65) || !(w <= 90)) && (!(w >= 48) || !(w <= 57)) && w != 58 && w != 46 && w != 95 && w != 45 && w != 35) {
                if (b) {
                  throw G.thrown(new hd("Invalid character in entity: " + String.fromCodePoint(w), a, c));
                }
                l.b += String.fromCodePoint(38);
                f = c - n;
                l.b += f == null ? r.substr(a, n, null) : r.substr(a, n, f);
                --c;
                n = c + 1;
                f = m;
              }
          }
          ++c;
        }
        if (f == 1) {
          n = c;
          f = 13;
        }
        if (f == 13) {
          if (d.nodeType == 0) {
            if (d.nodeType != ea.Element) {
              throw G.thrown("Bad node type, expected Element but found " + (d.nodeType == null ? "null" : mb.toString(d.nodeType)));
            }
            throw G.thrown(new hd("Unclosed node <" + d.nodeName + ">", a, c));
          }
          if (c != n || g == 0) {
            m = c - n;
            l.b += m == null ? r.substr(a, n, null) : r.substr(a, n, m);
            d.addChild(ea.createPCData(l.b));
          }
          return c;
        }
        if (!b && f == 18 && m == 13) {
          l.b += String.fromCodePoint(38);
          m = c - n;
          l.b += m == null ? r.substr(a, n, null) : r.substr(a, n, m);
          d.addChild(ea.createPCData(l.b));
          return c;
        }
        throw G.thrown(new hd("Unexpected end", a, c));
      };
      function Bg(a) {
        this.output = new Ab();
        this.pretty = a;
      }
      g["haxe.xml.Printer"] = Bg;
      Bg.__name__ = "haxe.xml.Printer";
      Bg.print = function (a, b) {
        if (b == null) {
          b = false;
        }
        b = new Bg(b);
        b.writeNode(a, "");
        return b.output.b;
      };
      Bg.prototype = {
        writeNode: function (a, b) {
          switch (a.nodeType) {
            case 0:
              this.output.b += v.string(b + "<");
              if (a.nodeType != ea.Element) {
                throw G.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
              }
              this.output.b += v.string(a.nodeName);
              for (var c = a.attributes(); c.hasNext();) {
                var d = c.next();
                this.output.b += v.string(" " + d + "=\"");
                d = w.htmlEscape(a.get(d), true);
                this.output.b += v.string(d);
                this.output.b += "\"";
              }
              if (this.hasChildren(a)) {
                this.output.b += ">";
                if (this.pretty) {
                  this.output.b += "\n";
                }
                if (a.nodeType != ea.Document && a.nodeType != ea.Element) {
                  throw G.thrown("Bad node type, expected Element or Document but found " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
                }
                c = 0;
                for (d = a.children; c < d.length;) {
                  var e = d[c++];
                  this.writeNode(e, this.pretty ? b + "\t" : b);
                }
                this.output.b += v.string(b + "</");
                if (a.nodeType != ea.Element) {
                  throw G.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
                }
                this.output.b += v.string(a.nodeName);
                this.output.b += ">";
              } else {
                this.output.b += "/>";
              }
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 1:
              if (a.nodeType == ea.Document || a.nodeType == ea.Element) {
                throw G.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
              }
              a = a.nodeValue;
              if (a.length != 0) {
                d = b + w.htmlEscape(a);
                this.output.b += v.string(d);
                if (this.pretty) {
                  this.output.b += "\n";
                }
              }
              break;
            case 2:
              this.output.b += v.string(b + "<![CDATA[");
              if (a.nodeType == ea.Document || a.nodeType == ea.Element) {
                throw G.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
              }
              this.output.b += v.string(a.nodeValue);
              this.output.b += "]]>";
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 3:
              if (a.nodeType == ea.Document || a.nodeType == ea.Element) {
                throw G.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
              }
              a = a.nodeValue;
              a = a.replace(/[\n\r\t]+/g, "");
              this.output.b += b == null ? "null" : "" + b;
              d = w.trim("<!--" + a + "-->");
              this.output.b += v.string(d);
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 4:
              if (a.nodeType == ea.Document || a.nodeType == ea.Element) {
                throw G.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
              }
              this.output.b += v.string("<!DOCTYPE " + a.nodeValue + ">");
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 5:
              if (a.nodeType == ea.Document || a.nodeType == ea.Element) {
                throw G.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
              }
              this.output.b += v.string("<?" + a.nodeValue + "?>");
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 6:
              if (a.nodeType != ea.Document && a.nodeType != ea.Element) {
                throw G.thrown("Bad node type, expected Element or Document but found " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
              }
              c = 0;
              for (d = a.children; c < d.length;) {
                e = d[c++];
                this.writeNode(e, b);
              }
          }
        },
        hasChildren: function (a) {
          if (a.nodeType != ea.Document && a.nodeType != ea.Element) {
            throw G.thrown("Bad node type, expected Element or Document but found " + (a.nodeType == null ? "null" : mb.toString(a.nodeType)));
          }
          var b = 0;
          for (a = a.children; b < a.length;) {
            var c = a[b++];
            switch (c.nodeType) {
              case 0:
              case 1:
                return true;
              case 2:
              case 3:
                if (c.nodeType == ea.Document || c.nodeType == ea.Element) {
                  throw G.thrown("Bad node type, unexpected " + (c.nodeType == null ? "null" : mb.toString(c.nodeType)));
                }
                if (w.ltrim(c.nodeValue).length != 0) {
                  return true;
                }
            }
          }
          return false;
        },
        __class__: Bg
      };
      var oi = z["haxe.zip.ExtraField"] = {
        __ename__: "haxe.zip.ExtraField",
        __constructs__: null,
        FUnknown: (u = function (a, b) {
          return {
            _hx_index: 0,
            tag: a,
            bytes: b,
            __enum__: "haxe.zip.ExtraField",
            toString: p
          };
        }, u._hx_name = "FUnknown", u.__params__ = ["tag", "bytes"], u),
        FInfoZipUnicodePath: (u = function (a, b) {
          return {
            _hx_index: 1,
            name: a,
            crc: b,
            __enum__: "haxe.zip.ExtraField",
            toString: p
          };
        }, u._hx_name = "FInfoZipUnicodePath", u.__params__ = ["name", "crc"], u),
        FUtf8: {
          _hx_name: "FUtf8",
          _hx_index: 2,
          __enum__: "haxe.zip.ExtraField",
          toString: p
        }
      };
      oi.__constructs__ = [oi.FUnknown, oi.FInfoZipUnicodePath, oi.FUtf8];
      var Gf = z["haxe.zip.Huffman"] = {
        __ename__: "haxe.zip.Huffman",
        __constructs__: null,
        Found: (u = function (a) {
          return {
            _hx_index: 0,
            i: a,
            __enum__: "haxe.zip.Huffman",
            toString: p
          };
        }, u._hx_name = "Found", u.__params__ = ["i"], u),
        NeedBit: (u = function (a, b) {
          return {
            _hx_index: 1,
            left: a,
            right: b,
            __enum__: "haxe.zip.Huffman",
            toString: p
          };
        }, u._hx_name = "NeedBit", u.__params__ = ["left", "right"], u),
        NeedBits: (u = function (a, b) {
          return {
            _hx_index: 2,
            n: a,
            table: b,
            __enum__: "haxe.zip.Huffman",
            toString: p
          };
        }, u._hx_name = "NeedBits", u.__params__ = ["n", "table"], u)
      };
      Gf.__constructs__ = [Gf.Found, Gf.NeedBit, Gf.NeedBits];
      function io() {}
      g["haxe.zip.HuffTools"] = io;
      io.__name__ = "haxe.zip.HuffTools";
      io.prototype = {
        treeDepth: function (a) {
          switch (a._hx_index) {
            case 0:
              return 0;
            case 1:
              var b = a.right;
              a = this.treeDepth(a.left);
              b = this.treeDepth(b);
              return 1 + (a < b ? a : b);
            case 2:
              throw G.thrown("assert");
          }
        },
        treeCompress: function (a) {
          var b = this.treeDepth(a);
          if (b == 0) {
            return a;
          }
          if (b == 1) {
            if (a._hx_index == 1) {
              b = a.right;
              return Gf.NeedBit(this.treeCompress(a.left), this.treeCompress(b));
            }
            throw G.thrown("assert");
          }
          var c = [];
          for (var d = 0, e = 1 << b; d < e;) {
            d++;
            c.push(Gf.Found(-1));
          }
          this.treeWalk(c, 0, 0, b, a);
          return Gf.NeedBits(b, c);
        },
        treeWalk: function (a, b, c, d, e) {
          if (e._hx_index == 1) {
            var f = e.left;
            var k = e.right;
            if (d > 0) {
              this.treeWalk(a, b, c + 1, d - 1, f);
              this.treeWalk(a, b | 1 << c, c + 1, d - 1, k);
            } else {
              a[b] = this.treeCompress(e);
            }
          } else {
            a[b] = this.treeCompress(e);
          }
        },
        treeMake: function (a, b, c, d) {
          if (d > b) {
            throw G.thrown("Invalid huffman");
          }
          var e = c << 5 | d;
          if (a.h.hasOwnProperty(e)) {
            return Gf.Found(a.h[e]);
          }
          c <<= 1;
          ++d;
          return Gf.NeedBit(this.treeMake(a, b, c, d), this.treeMake(a, b, c | 1, d));
        },
        make: function (a, b, c, d) {
          if (c == 1) {
            return Gf.NeedBit(Gf.Found(0), Gf.Found(0));
          }
          var e = [];
          var f = [];
          if (d > 32) {
            throw G.thrown("Invalid huffman");
          }
          for (var k = 0, h = d; k < h;) {
            k++;
            e.push(0);
            f.push(0);
          }
          k = 0;
          for (h = c; k < h;) {
            var n = k++;
            n = a[n + b];
            if (n >= d) {
              throw G.thrown("Invalid huffman");
            }
            e[n]++;
          }
          var g = 0;
          k = 1;
          for (h = d - 1; k < h;) {
            n = k++;
            g = g + e[n] << 1;
            f[n] = g;
          }
          e = new wc();
          k = 0;
          for (h = c; k < h;) {
            n = k++;
            c = a[n + b];
            if (c != 0) {
              g = f[c - 1];
              f[c - 1] = g + 1;
              e.h[g << 5 | c] = n;
            }
          }
          return this.treeCompress(Gf.NeedBit(this.treeMake(e, d, 0, 1), this.treeMake(e, d, 1, 1)));
        },
        __class__: io
      };
      function jo(a) {
        this.buffer = new Yb(new ArrayBuffer(65536));
        this.pos = 0;
        if (a) {
          this.crc = new mi();
        }
      }
      g["haxe.zip._InflateImpl.Window"] = jo;
      jo.__name__ = "haxe.zip._InflateImpl.Window";
      jo.prototype = {
        slide: function () {
          if (this.crc != null) {
            this.crc.update(this.buffer, 0, 32768);
          }
          var a = new Yb(new ArrayBuffer(65536));
          this.pos -= 32768;
          a.blit(0, this.buffer, 32768, this.pos);
          this.buffer = a;
        },
        addBytes: function (a, b, c) {
          if (this.pos + c > 65536) {
            this.slide();
          }
          this.buffer.blit(this.pos, a, b, c);
          this.pos += c;
        },
        addByte: function (a) {
          if (this.pos == 65536) {
            this.slide();
          }
          this.buffer.b[this.pos] = a & 255;
          this.pos++;
        },
        getLastChar: function () {
          return this.buffer.b[this.pos - 1];
        },
        available: function () {
          return this.pos;
        },
        checksum: function () {
          if (this.crc != null) {
            this.crc.update(this.buffer, 0, this.pos);
          }
          return this.crc;
        },
        __class__: jo
      };
      var Sc = z["haxe.zip._InflateImpl.State"] = {
        __ename__: "haxe.zip._InflateImpl.State",
        __constructs__: null,
        Head: {
          _hx_name: "Head",
          _hx_index: 0,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Block: {
          _hx_name: "Block",
          _hx_index: 1,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        CData: {
          _hx_name: "CData",
          _hx_index: 2,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Flat: {
          _hx_name: "Flat",
          _hx_index: 3,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Crc: {
          _hx_name: "Crc",
          _hx_index: 4,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Dist: {
          _hx_name: "Dist",
          _hx_index: 5,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        DistOne: {
          _hx_name: "DistOne",
          _hx_index: 6,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Done: {
          _hx_name: "Done",
          _hx_index: 7,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        }
      };
      Sc.__constructs__ = [Sc.Head, Sc.Block, Sc.CData, Sc.Flat, Sc.Crc, Sc.Dist, Sc.DistOne, Sc.Done];
      function Fd(a, b, c) {
        if (c == null) {
          c = true;
        }
        if (b == null) {
          b = true;
        }
        this.isFinal = false;
        this.htools = new io();
        this.huffman = this.buildFixedHuffman();
        this.huffdist = null;
        this.dist = this.len = 0;
        this.state = b ? Sc.Head : Sc.Block;
        this.input = a;
        this.needed = this.nbits = this.bits = 0;
        this.output = null;
        this.outpos = 0;
        this.lengths = [];
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.window = new jo(c);
      }
      g["haxe.zip.InflateImpl"] = Fd;
      Fd.__name__ = "haxe.zip.InflateImpl";
      Fd.prototype = {
        buildFixedHuffman: function () {
          if (Fd.FIXED_HUFFMAN != null) {
            return Fd.FIXED_HUFFMAN;
          }
          var a = [];
          for (var b = 0; b < 288;) {
            var c = b++;
            a.push(c <= 143 ? 8 : c <= 255 ? 9 : c <= 279 ? 7 : 8);
          }
          Fd.FIXED_HUFFMAN = this.htools.make(a, 0, 288, 10);
          return Fd.FIXED_HUFFMAN;
        },
        readBytes: function (a, b, c) {
          this.needed = c;
          this.outpos = b;
          this.output = a;
          if (c > 0) {
            while (this.inflateLoop());
          }
          return c - this.needed;
        },
        getBits: function (a) {
          while (this.nbits < a) {
            this.bits |= this.input.readByte() << this.nbits;
            this.nbits += 8;
          }
          var b = this.bits & (1 << a) - 1;
          this.nbits -= a;
          this.bits >>= a;
          return b;
        },
        getBit: function () {
          if (this.nbits == 0) {
            this.nbits = 8;
            this.bits = this.input.readByte();
          }
          var a = (this.bits & 1) == 1;
          this.nbits--;
          this.bits >>= 1;
          return a;
        },
        getRevBits: function (a) {
          if (a == 0) {
            return 0;
          } else if (this.getBit()) {
            return 1 << a - 1 | this.getRevBits(a - 1);
          } else {
            return this.getRevBits(a - 1);
          }
        },
        resetBits: function () {
          this.nbits = this.bits = 0;
        },
        addBytes: function (a, b, c) {
          this.window.addBytes(a, b, c);
          this.output.blit(this.outpos, a, b, c);
          this.needed -= c;
          this.outpos += c;
        },
        addByte: function (a) {
          this.window.addByte(a);
          this.output.b[this.outpos] = a & 255;
          this.needed--;
          this.outpos++;
        },
        addDistOne: function (a) {
          var b = this.window.getLastChar();
          for (var c = 0; c < a;) {
            c++;
            this.addByte(b);
          }
        },
        addDist: function (a, b) {
          this.addBytes(this.window.buffer, this.window.pos - a, b);
        },
        applyHuffman: function (a) {
          switch (a._hx_index) {
            case 0:
              var b = a.i;
              return b;
            case 1:
              b = a.left;
              a = a.right;
              return this.applyHuffman(this.getBit() ? a : b);
            case 2:
              b = a.n;
              return this.applyHuffman(a.table[this.getBits(b)]);
          }
        },
        inflateLengths: function (a, b) {
          for (var c = 0, d = 0; c < b;) {
            var e = this.applyHuffman(this.huffman);
            switch (e) {
              case 0:
              case 1:
              case 2:
              case 3:
              case 4:
              case 5:
              case 6:
              case 7:
              case 8:
              case 9:
              case 10:
              case 11:
              case 12:
              case 13:
              case 14:
              case 15:
                d = e;
                a[c] = e;
                ++c;
                break;
              case 16:
                e = c + 3 + this.getBits(2);
                if (e > b) {
                  throw G.thrown("Invalid data");
                }
                while (c < e) {
                  a[c] = d;
                  ++c;
                }
                break;
              case 17:
                c += 3 + this.getBits(3);
                if (c > b) {
                  throw G.thrown("Invalid data");
                }
                break;
              case 18:
                c += 11 + this.getBits(7);
                if (c > b) {
                  throw G.thrown("Invalid data");
                }
                break;
              default:
                throw G.thrown("Invalid data");
            }
          }
        },
        inflateLoop: function () {
          switch (this.state._hx_index) {
            case 0:
              var a = this.input.readByte();
              if ((a & 15) != 8) {
                throw G.thrown("Invalid data");
              }
              var b = this.input.readByte();
              var c = (b & 32) != 0;
              if (((a << 8) + b) % 31 != 0) {
                throw G.thrown("Invalid data");
              }
              if (c) {
                throw G.thrown("Unsupported dictionary");
              }
              this.state = Sc.Block;
              return true;
            case 1:
              this.isFinal = this.getBit();
              switch (this.getBits(2)) {
                case 0:
                  this.len = this.input.readUInt16();
                  if (this.input.readUInt16() != 65535 - this.len) {
                    throw G.thrown("Invalid data");
                  }
                  this.state = Sc.Flat;
                  a = this.inflateLoop();
                  this.resetBits();
                  return a;
                case 1:
                  this.huffman = this.buildFixedHuffman();
                  this.huffdist = null;
                  this.state = Sc.CData;
                  return true;
                case 2:
                  a = this.getBits(5) + 257;
                  b = this.getBits(5) + 1;
                  var d = this.getBits(4) + 4;
                  c = 0;
                  for (var e = d; c < e;) {
                    var f = c++;
                    this.lengths[Fd.CODE_LENGTHS_POS[f]] = this.getBits(3);
                  }
                  c = d;
                  for (e = 19; c < e;) {
                    f = c++;
                    this.lengths[Fd.CODE_LENGTHS_POS[f]] = 0;
                  }
                  this.huffman = this.htools.make(this.lengths, 0, 19, 8);
                  d = [];
                  c = 0;
                  for (e = a + b; c < e;) {
                    c++;
                    d.push(0);
                  }
                  this.inflateLengths(d, a + b);
                  this.huffdist = this.htools.make(d, a, b, 16);
                  this.huffman = this.htools.make(d, 0, a, 16);
                  this.state = Sc.CData;
                  return true;
                default:
                  throw G.thrown("Invalid data");
              }
            case 2:
              b = this.applyHuffman(this.huffman);
              if (b < 256) {
                this.addByte(b);
                return this.needed > 0;
              }
              if (b == 256) {
                this.state = this.isFinal ? Sc.Crc : Sc.Block;
              } else {
                b -= 257;
                a = Fd.LEN_EXTRA_BITS_TBL[b];
                if (a == -1) {
                  throw G.thrown("Invalid data");
                }
                this.len = Fd.LEN_BASE_VAL_TBL[b] + this.getBits(a);
                b = this.huffdist == null ? this.getRevBits(5) : this.applyHuffman(this.huffdist);
                a = Fd.DIST_EXTRA_BITS_TBL[b];
                if (a == -1) {
                  throw G.thrown("Invalid data");
                }
                this.dist = Fd.DIST_BASE_VAL_TBL[b] + this.getBits(a);
                if (this.dist > this.window.available()) {
                  throw G.thrown("Invalid data");
                }
                this.state = this.dist == 1 ? Sc.DistOne : Sc.Dist;
              }
              return true;
            case 3:
              a = this.len < this.needed ? this.len : this.needed;
              b = this.input.read(a);
              this.len -= a;
              this.addBytes(b, 0, a);
              if (this.len == 0) {
                this.state = this.isFinal ? Sc.Crc : Sc.Block;
              }
              return this.needed > 0;
            case 4:
              a = this.window.checksum();
              if (a == null) {
                this.state = Sc.Done;
                return true;
              }
              b = mi.read(this.input);
              if (!a.equals(b)) {
                throw G.thrown("Invalid CRC");
              }
              this.state = Sc.Done;
              return true;
            case 5:
              while (this.len > 0 && this.needed > 0) {
                a = this.len < this.dist ? this.len : this.dist;
                a = this.needed < a ? this.needed : a;
                this.addDist(this.dist, a);
                this.len -= a;
              }
              if (this.len == 0) {
                this.state = Sc.CData;
              }
              return this.needed > 0;
            case 6:
              a = this.len < this.needed ? this.len : this.needed;
              this.addDistOne(a);
              this.len -= a;
              if (this.len == 0) {
                this.state = Sc.CData;
              }
              return this.needed > 0;
            case 7:
              return false;
          }
        },
        __class__: Fd
      };
      function ji(a) {
        this.i = a;
      }
      g["haxe.zip.Reader"] = ji;
      ji.__name__ = "haxe.zip.Reader";
      ji.readZip = function (a) {
        return new ji(a).read();
      };
      ji.prototype = {
        readZipDate: function () {
          var a = this.i.readUInt16();
          var b = a >> 11 & 31;
          var c = a >> 5 & 63;
          a &= 31;
          var d = this.i.readUInt16();
          return new Date((d >> 9) + 1980, (d >> 5 & 15) - 1, d & 31, b, c, a << 1);
        },
        readExtraFields: function (a) {
          var b = new jb();
          for (; a > 0;) {
            if (a < 4) {
              throw G.thrown("Invalid extra fields data");
            }
            var c = this.i.readUInt16();
            var d = this.i.readUInt16();
            if (a < d) {
              throw G.thrown("Invalid extra fields data");
            }
            if (c == 28789) {
              var e = this.i.readByte();
              if (e != 1) {
                var f = new Tl();
                f.addByte(e);
                f.add(this.i.read(d - 1));
                b.add(oi.FUnknown(c, f.getBytes()));
              } else {
                c = this.i.readInt32();
                e = this.i.read(d - 5).toString();
                b.add(oi.FInfoZipUnicodePath(e, c));
              }
            } else {
              b.add(oi.FUnknown(c, this.i.read(d)));
            }
            a -= 4 + d;
          }
          return b;
        },
        readEntryHeader: function () {
          var a = this.i;
          var b = a.readInt32();
          if (b == 33639248 || b == 101010256) {
            return null;
          }
          if (b != 67324752) {
            throw G.thrown("Invalid Zip Data");
          }
          a.readUInt16();
          b = a.readUInt16();
          var c = (b & 2048) != 0;
          if ((b & 63473) != 0) {
            throw G.thrown("Unsupported flags " + b);
          }
          var d = a.readUInt16();
          var e = d != 0;
          if (e && d != 8) {
            throw G.thrown("Unsupported compression " + d);
          }
          d = this.readZipDate();
          var f = a.readInt32();
          var k = a.readInt32();
          var h = a.readInt32();
          var n = a.readInt16();
          var g = a.readInt16();
          a = a.readString(n);
          g = this.readExtraFields(g);
          if (c) {
            g.push(oi.FUtf8);
          }
          if ((b & 8) != 0) {
            f = null;
          }
          return {
            fileName: a,
            fileSize: h,
            fileTime: d,
            compressed: e,
            dataSize: k,
            data: null,
            crc32: f,
            extraFields: g
          };
        },
        read: function () {
          var a = new jb();
          var b = null;
          while (true) {
            var c = this.readEntryHeader();
            if (c == null) {
              break;
            }
            if (c.crc32 == null) {
              if (c.compressed) {
                if (b == null) {
                  b = new Yb(new ArrayBuffer(65536));
                }
                var d = new Tl();
                var e = new Fd(this.i, false, false);
                while (true) {
                  var f = e.readBytes(b, 0, 65536);
                  d.addBytes(b, 0, f);
                  if (f < 65536) {
                    break;
                  }
                }
                c.data = d.getBytes();
              } else {
                c.data = this.i.read(c.dataSize);
              }
              c.crc32 = this.i.readInt32();
              if (c.crc32 == 134695760) {
                c.crc32 = this.i.readInt32();
              }
              c.dataSize = this.i.readInt32();
              c.fileSize = this.i.readInt32();
              c.dataSize = c.fileSize;
              c.compressed = false;
            } else {
              c.data = this.i.read(c.dataSize);
            }
            a.add(c);
          }
          return a;
        },
        __class__: ji
      };
      function qg() {}
      g["js.Browser"] = qg;
      qg.__name__ = "js.Browser";
      qg.__properties__ = {
        get_supported: "get_supported"
      };
      qg.get_supported = function () {
        if (typeof window != "undefined" && typeof window.location != "undefined") {
          return typeof window.location.protocol == "string";
        } else {
          return false;
        }
      };
      qg.getLocalStorage = function () {
        try {
          var a = window.localStorage;
          a.getItem("");
          if (a.length == 0) {
            var b = "_hx_" + Math.random();
            a.setItem(b, b);
            a.removeItem(b);
          }
          return a;
        } catch (c) {
          Pa.lastError = c;
          return null;
        }
      };
      function ep() {}
      g["js.html._CanvasElement.CanvasUtil"] = ep;
      ep.__name__ = "js.html._CanvasElement.CanvasUtil";
      ep.getContextWebGL = function (a, b) {
        var c = a.getContext("webgl", b);
        if (c != null) {
          return c;
        }
        c = a.getContext("experimental-webgl", b);
        return c ?? null;
      };
      function fp() {}
      g["js.lib._ArrayBuffer.ArrayBufferCompat"] = fp;
      fp.__name__ = "js.lib._ArrayBuffer.ArrayBufferCompat";
      fp.sliceImpl = function (a, b) {
        a = new Uint8Array(this, a, b == null ? null : b - a);
        b = new Uint8Array(a.byteLength);
        b.set(a);
        return b.buffer;
      };
      function gn() {
        this.connected = true;
        this.buttons = [];
        this.axes = [];
      }
      g["lime._internal.backend.html5.GameDeviceData"] = gn;
      gn.__name__ = "lime._internal.backend.html5.GameDeviceData";
      gn.prototype = {
        __class__: gn
      };
      function lo(a) {
        this.parent = a;
        this.id = -1;
        this.gain = 1;
        this.position = new ko();
      }
      g["lime._internal.backend.html5.HTML5AudioSource"] = lo;
      lo.__name__ = "lime._internal.backend.html5.HTML5AudioSource";
      lo.prototype = {
        dispose: function () {},
        init: function () {},
        play: function () {
          if (!this.playing && this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            this.playing = true;
            var a = this.getCurrentTime();
            this.completed = false;
            var b = this.parent.buffer.__srcHowl._volume;
            this.parent.buffer.__srcHowl._volume = this.parent.get_gain();
            this.id = this.parent.buffer.__srcHowl.play();
            this.parent.buffer.__srcHowl._volume = b;
            this.setPosition(this.parent.get_position());
            this.parent.buffer.__srcHowl.on("end", m(this, this.howl_onEnd), this.id);
            this.setCurrentTime(a);
          }
        },
        stop: function () {
          this.playing = false;
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            this.parent.buffer.__srcHowl.stop(this.id);
            this.parent.buffer.__srcHowl.off("end", m(this, this.howl_onEnd), this.id);
          }
        },
        howl_onEnd: function () {
          this.playing = false;
          if (this.loops > 0) {
            this.loops--;
            this.stop();
            this.play();
          } else {
            if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
              this.parent.buffer.__srcHowl.stop(this.id);
              this.parent.buffer.__srcHowl.off("end", m(this, this.howl_onEnd), this.id);
            }
            this.completed = true;
            this.parent.onComplete.dispatch();
          }
        },
        getCurrentTime: function () {
          if (this.id == -1) {
            return 0;
          }
          if (this.completed) {
            return this.getLength();
          }
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            var a = (this.parent.buffer.__srcHowl.seek(this.id) * 1000 | 0) - this.parent.offset;
            if (a < 0) {
              return 0;
            } else {
              return a;
            }
          }
          return 0;
        },
        setCurrentTime: function (a) {
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            var b = (a + this.parent.offset) / 1000;
            if (b < 0) {
              b = 0;
            }
            this.parent.buffer.__srcHowl.seek(b, this.id);
          }
          return a;
        },
        getGain: function () {
          return this.gain;
        },
        setGain: function (a) {
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null && this.id != -1) {
            this.parent.buffer.__srcHowl.volume(a, this.id);
          }
          return this.gain = a;
        },
        getLength: function () {
          if (this.length != 0) {
            return this.length;
          } else if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            return this.parent.buffer.__srcHowl.duration() * 1000 | 0;
          } else {
            return 0;
          }
        },
        setLength: function (a) {
          return this.length = a;
        },
        setLoops: function (a) {
          return this.loops = a;
        },
        getPitch: function () {
          return this.parent.buffer.__srcHowl.rate();
        },
        setPitch: function (a) {
          this.parent.buffer.__srcHowl.rate(a);
          return this.getPitch();
        },
        getPosition: function () {
          return this.position;
        },
        setPosition: function (a) {
          this.position.x = a.x;
          this.position.y = a.y;
          this.position.z = a.z;
          this.position.w = a.w;
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null && this.parent.buffer.__srcHowl.pos != null) {
            this.parent.buffer.__srcHowl.pos(this.position.x, this.position.y, this.position.z, this.id);
          }
          return this.position;
        },
        __class__: lo
      };
      function Oa() {
        this.validStatus0 = new V("Tizen", "gi").match(window.navigator.userAgent);
      }
      g["lime._internal.backend.html5.HTML5HTTPRequest"] = Oa;
      Oa.__name__ = "lime._internal.backend.html5.HTML5HTTPRequest";
      Oa.loadImage = function (a) {
        var b = new Id();
        if (Oa.activeRequests < Oa.requestLimit) {
          Oa.activeRequests++;
          Oa.__loadImage(a, b, 0);
        } else {
          Oa.requestQueue.add({
            instance: null,
            uri: a,
            promise: b,
            type: "IMAGE",
            options: 0
          });
        }
        return b.future;
      };
      Oa.loadImageFromBytes = function (a, b) {
        var c = URL.createObjectURL(new Blob([a.b.bufferValue], {
          type: b
        }));
        if (c != null) {
          a = new Id();
          if (Oa.activeRequests < Oa.requestLimit) {
            Oa.activeRequests++;
            Oa.__loadImage(c, a, 1);
          } else {
            Oa.requestQueue.add({
              instance: null,
              uri: c,
              promise: a,
              type: "IMAGE",
              options: 1
            });
          }
          return a.future;
        } else {
          return Oa.loadImage("data:" + b + ";base64," + Yf.encode(a));
        }
      };
      Oa.processQueue = function () {
        if (Oa.activeRequests < Oa.requestLimit && Oa.requestQueue.length > 0) {
          Oa.activeRequests++;
          var a = Oa.requestQueue.pop();
          switch (a.type) {
            case "BINARY":
              a.instance.__loadData(a.uri, a.promise);
              break;
            case "IMAGE":
              Oa.__loadImage(a.uri, a.promise, a.options);
              break;
            case "TEXT":
              a.instance.__loadText(a.uri, a.promise);
              break;
            default:
              Oa.activeRequests--;
          }
        }
      };
      Oa.__fixHostname = function (a) {
        if (a == null) {
          return "";
        } else {
          return a;
        }
      };
      Oa.__fixPort = function (a, b) {
        if (a == null || a == "") {
          switch (b) {
            case "ftp:":
              return "21";
            case "gopher:":
              return "70";
            case "http:":
              return "80";
            case "https:":
              return "443";
            case "ws:":
              return "80";
            case "wss:":
              return "443";
            default:
              return "";
          }
        }
        return a;
      };
      Oa.__fixProtocol = function (a) {
        if (a == null || a == "") {
          return "http:";
        } else {
          return a;
        }
      };
      Oa.__isInMemoryURI = function (a) {
        if (w.startsWith(a, "data:")) {
          return true;
        } else {
          return w.startsWith(a, "blob:");
        }
      };
      Oa.__isSameOrigin = function (a) {
        if (a == null || a == "" || Oa.__isInMemoryURI(a)) {
          return true;
        }
        if (Oa.originElement == null) {
          Oa.originElement = window.document.createElement("a");
          Oa.originHostname = Oa.__fixHostname(E.location.hostname);
          Oa.originProtocol = Oa.__fixProtocol(E.location.protocol);
          Oa.originPort = Oa.__fixPort(E.location.port, Oa.originProtocol);
        }
        var b = Oa.originElement;
        b.href = a;
        if (b.hostname == "") {
          b.href = b.href;
        }
        var c = Oa.__fixHostname(b.hostname);
        a = Oa.__fixProtocol(b.protocol);
        b = Oa.__fixPort(b.port, a);
        c = c == "" || c == Oa.originHostname;
        b = b == "" || b == Oa.originPort;
        if (a != "file:" && c) {
          return b;
        } else {
          return false;
        }
      };
      Oa.__loadImage = function (a, b, c) {
        var d = new window.Image();
        if (!Oa.__isSameOrigin(a)) {
          d.crossOrigin = "Anonymous";
        }
        if (Oa.supportsImageProgress == null) {
          Oa.supportsImageProgress = "onprogress" in d;
        }
        if (Oa.supportsImageProgress || Oa.__isInMemoryURI(a)) {
          d.addEventListener("load", function (e) {
            Oa.__revokeBlobURI(a, c);
            e = new rg(null, d.width, d.height);
            e.__srcImage = d;
            Oa.activeRequests--;
            Oa.processQueue();
            b.complete(new Cb(e));
          }, false);
          d.addEventListener("progress", function (a) {
            b.progress(a.loaded, a.total);
          }, false);
          d.addEventListener("error", function (d) {
            Oa.__revokeBlobURI(a, c);
            Oa.activeRequests--;
            Oa.processQueue();
            b.error(new pi(d.detail, null));
          }, false);
          d.src = a;
        } else {
          var e = new XMLHttpRequest();
          e.onload = function (a) {
            Oa.activeRequests--;
            Oa.processQueue();
            new Cb().__fromBytes(Yb.ofData(e.response), function (a) {
              b.complete(a);
            });
          };
          e.onerror = function (a) {
            b.error(new pi(a.message, null));
          };
          e.onprogress = function (a) {
            if (a.lengthComputable) {
              b.progress(a.loaded, a.total);
            }
          };
          e.open("GET", a, true);
          e.responseType = "arraybuffer";
          e.overrideMimeType("text/plain; charset=x-user-defined");
          e.send(null);
        }
      };
      Oa.__revokeBlobURI = function (a, b) {
        if ((b & 1) != 0) {
          URL.revokeObjectURL(a);
        }
      };
      Oa.prototype = {
        init: function (a) {
          this.parent = a;
        },
        load: function (a, b, c) {
          this.request = new XMLHttpRequest();
          if (this.parent.method == "POST") {
            this.request.upload.addEventListener("progress", b, false);
          } else {
            this.request.addEventListener("progress", b, false);
          }
          this.request.onreadystatechange = c;
          b = "";
          if (this.parent.data == null) {
            c = Object.keys(this.parent.formData.h);
            for (var d = c.length, e = 0; e < d;) {
              var f = c[e++];
              if (b.length > 0) {
                b += "&";
              }
              var k = this.parent.formData.h[f];
              if (f.indexOf("[]") > -1 && k instanceof Array) {
                var h = [];
                for (k = M(k); k.hasNext();) {
                  var n = k.next();
                  h.push(encodeURIComponent(n));
                }
                h = h.join("&amp;" + f + "=");
                b += encodeURIComponent(f) + "=" + h;
              } else {
                h = encodeURIComponent(f) + "=";
                f = v.string(k);
                b += h + encodeURIComponent(f);
              }
            }
            if (this.parent.method == "GET" && b != "") {
              a = a.indexOf("?") > -1 ? a + ("&" + b) : a + ("?" + b);
              b = "";
            }
          }
          this.request.open(v.string(this.parent.method), a, true);
          if (this.parent.timeout > 0) {
            this.request.timeout = this.parent.timeout;
          }
          if (this.binary) {
            this.request.responseType = "arraybuffer";
          }
          a = null;
          h = 0;
          for (c = this.parent.headers; h < c.length;) {
            d = c[h];
            ++h;
            if (d.name == "Content-Type") {
              a = d.value;
            } else {
              this.request.setRequestHeader(d.name, d.value);
            }
          }
          if (this.parent.contentType != null) {
            a = this.parent.contentType;
          }
          if (a == null) {
            if (this.parent.data != null) {
              a = "application/octet-stream";
            } else if (b != "") {
              a = "application/x-www-form-urlencoded";
            }
          }
          if (a != null) {
            this.request.setRequestHeader("Content-Type", a);
          }
          if (this.parent.withCredentials) {
            this.request.withCredentials = true;
          }
          if (this.parent.data != null) {
            this.request.send(this.parent.data.b.bufferValue);
          } else {
            this.request.send(b);
          }
        },
        loadData: function (a) {
          var b = new Id();
          if (Oa.activeRequests < Oa.requestLimit) {
            Oa.activeRequests++;
            this.__loadData(a, b);
          } else {
            Oa.requestQueue.add({
              instance: this,
              uri: a,
              promise: b,
              type: "BINARY",
              options: 0
            });
          }
          return b.future;
        },
        loadText: function (a) {
          var b = new Id();
          if (Oa.activeRequests < Oa.requestLimit) {
            Oa.activeRequests++;
            this.__loadText(a, b);
          } else {
            Oa.requestQueue.add({
              instance: this,
              uri: a,
              promise: b,
              type: "TEXT",
              options: 0
            });
          }
          return b.future;
        },
        processResponse: function () {
          if (this.parent.enableResponseHeaders) {
            this.parent.responseHeaders = [];
            var a;
            var b;
            for (var c = 0, d = this.request.getAllResponseHeaders().split("\n"); c < d.length;) {
              b = d[c];
              ++c;
              a = w.trim(r.substr(b, 0, b.indexOf(":")));
              b = w.trim(r.substr(b, b.indexOf(":") + 1, null));
              if (a != "") {
                this.parent.responseHeaders.push(new Vl(a, b));
              }
            }
          }
          this.parent.responseStatus = this.request.status;
        },
        __loadData: function (a, b) {
          var c = this;
          this.binary = true;
          this.load(a, function (a) {
            b.progress(a.loaded, a.total);
          }, function (a) {
            if (c.request.readyState == 4) {
              a = null;
              if (c.request.responseType == "") {
                if (c.request.responseText != null) {
                  a = Yb.ofString(c.request.responseText);
                }
              } else if (c.request.response != null) {
                a = Yb.ofData(c.request.response);
              }
              if (c.request.status != null && (c.request.status >= 200 && c.request.status < 400 || c.validStatus0 && c.request.status == 0)) {
                c.processResponse();
                b.complete(a);
              } else {
                c.processResponse();
                b.error(new pi(c.request.status, a));
              }
              c.request = null;
              Oa.activeRequests--;
              Oa.processQueue();
            }
          });
        },
        __loadText: function (a, b) {
          var c = this;
          this.binary = false;
          this.load(a, function (a) {
            b.progress(a.loaded, a.total);
          }, function (a) {
            if (c.request.readyState == 4) {
              if (c.request.status != null && (c.request.status >= 200 && c.request.status < 400 || c.validStatus0 && c.request.status == 0)) {
                c.processResponse();
                b.complete(c.request.responseText);
              } else {
                c.processResponse();
                b.error(new pi(c.request.status, c.request.responseText));
              }
              c.request = null;
              Oa.activeRequests--;
              Oa.processQueue();
            }
          });
        },
        __class__: Oa
      };
      function Za(a) {
        this.imeCompositionActive = false;
        this.unusedTouchesPool = new jb();
        this.scale = 1;
        this.currentTouches = new wc();
        this.parent = a;
        this.cursor = Qb.DEFAULT;
        this.cacheMouseY = this.cacheMouseX = 0;
        var b = a.__attributes;
        if (!Object.prototype.hasOwnProperty.call(b, "context")) {
          b.context = {};
        }
        this.renderType = b.context.type;
        if (Object.prototype.hasOwnProperty.call(b, "element")) {
          a.element = b.element;
        }
        var c = a.element;
        if (Object.prototype.hasOwnProperty.call(b, "allowHighDPI") && b.allowHighDPI && this.renderType != "dom") {
          this.scale = window.devicePixelRatio;
        }
        a.__scale = this.scale;
        this.setWidth = Object.prototype.hasOwnProperty.call(b, "width") ? b.width : 0;
        this.setHeight = Object.prototype.hasOwnProperty.call(b, "height") ? b.height : 0;
        a.__width = this.setWidth;
        a.__height = this.setHeight;
        a.id = Za.windowID++;
        if (c instanceof HTMLCanvasElement) {
          this.canvas = c;
        } else if (this.renderType == "dom") {
          this.div = window.document.createElement("div");
        } else {
          this.canvas = window.document.createElement("canvas");
        }
        if (this.canvas != null) {
          var d = this.canvas.style;
          d.setProperty("-webkit-transform", "translateZ(0)", null);
          d.setProperty("transform", "translateZ(0)", null);
        } else if (this.div != null) {
          d = this.div.style;
          d.setProperty("-webkit-transform", "translate3D(0,0,0)", null);
          d.setProperty("transform", "translate3D(0,0,0)", null);
          d.position = "relative";
          d.overflow = "hidden";
          d.setProperty("-webkit-user-select", "none", null);
          d.setProperty("-moz-user-select", "none", null);
          d.setProperty("-ms-user-select", "none", null);
          d.setProperty("-o-user-select", "none", null);
        }
        if (a.__width == 0 && a.__height == 0) {
          if (c != null) {
            a.__width = c.clientWidth;
            a.__height = c.clientHeight;
          } else {
            a.__width = window.innerWidth;
            a.__height = window.innerHeight;
          }
          this.cacheElementWidth = a.__width;
          this.cacheElementHeight = a.__height;
          this.resizeElement = true;
        }
        if (this.canvas != null) {
          this.canvas.width = Math.round(a.__width * this.scale);
          this.canvas.height = Math.round(a.__height * this.scale);
          this.canvas.style.width = a.__width + "px";
          this.canvas.style.height = a.__height + "px";
        } else {
          this.div.style.width = a.__width + "px";
          this.div.style.height = a.__height + "px";
        }
        if (Object.prototype.hasOwnProperty.call(b, "resizable") && b.resizable || !Object.prototype.hasOwnProperty.call(b, "width") && this.setWidth == 0 && this.setHeight == 0) {
          a.__resizable = true;
        }
        this.updateSize();
        if (c != null) {
          if (this.canvas != null) {
            if (c != this.canvas) {
              c.appendChild(this.canvas);
            }
          } else {
            c.appendChild(this.div);
          }
          b = "mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");
          for (d = 0; d < b.length;) {
            var e = b[d];
            ++d;
            c.addEventListener(e, m(this, this.handleMouseEvent), true);
          }
          c.addEventListener("contextmenu", m(this, this.handleContextMenuEvent), true);
          c.addEventListener("dragstart", m(this, this.handleDragEvent), true);
          c.addEventListener("dragover", m(this, this.handleDragEvent), true);
          c.addEventListener("drop", m(this, this.handleDragEvent), true);
          c.addEventListener("touchstart", m(this, this.handleTouchEvent), true);
          c.addEventListener("touchmove", m(this, this.handleTouchEvent), true);
          c.addEventListener("touchend", m(this, this.handleTouchEvent), true);
          c.addEventListener("touchcancel", m(this, this.handleTouchEvent), true);
          c.addEventListener("gamepadconnected", m(this, this.handleGamepadEvent), true);
          c.addEventListener("gamepaddisconnected", m(this, this.handleGamepadEvent), true);
        }
        this.createContext();
        if (a.context.type == "webgl") {
          this.canvas.addEventListener("webglcontextlost", m(this, this.handleContextEvent), false);
          this.canvas.addEventListener("webglcontextrestored", m(this, this.handleContextEvent), false);
        }
      }
      g["lime._internal.backend.html5.HTML5Window"] = Za;
      Za.__name__ = "lime._internal.backend.html5.HTML5Window";
      Za.prototype = {
        close: function () {
          var a = this.parent.element;
          if (a != null) {
            if (this.canvas != null) {
              if (a != this.canvas) {
                a.removeChild(this.canvas);
              }
              this.canvas = null;
            } else if (this.div != null) {
              a.removeChild(this.div);
              this.div = null;
            }
            for (var b = "mousedown mouseenter mouseleave mousemove mouseup wheel".split(" "), c = 0; c < b.length;) {
              var d = b[c];
              ++c;
              a.removeEventListener(d, m(this, this.handleMouseEvent), true);
            }
            a.removeEventListener("contextmenu", m(this, this.handleContextMenuEvent), true);
            a.removeEventListener("dragstart", m(this, this.handleDragEvent), true);
            a.removeEventListener("dragover", m(this, this.handleDragEvent), true);
            a.removeEventListener("drop", m(this, this.handleDragEvent), true);
            a.removeEventListener("touchstart", m(this, this.handleTouchEvent), true);
            a.removeEventListener("touchmove", m(this, this.handleTouchEvent), true);
            a.removeEventListener("touchend", m(this, this.handleTouchEvent), true);
            a.removeEventListener("touchcancel", m(this, this.handleTouchEvent), true);
            a.removeEventListener("gamepadconnected", m(this, this.handleGamepadEvent), true);
            a.removeEventListener("gamepaddisconnected", m(this, this.handleGamepadEvent), true);
          }
          this.parent.application.__removeWindow(this.parent);
        },
        createContext: function () {
          var a = new mo();
          var b = this.parent.__attributes.context;
          a.window = this.parent;
          a.attributes = b;
          if (this.div != null) {
            a.dom = this.div;
            a.type = "dom";
            a.version = "";
          } else if (this.canvas != null) {
            var c = null;
            var d = this.renderType == "canvas";
            var e = this.renderType == "opengl" || this.renderType == "opengles" || this.renderType == "webgl";
            var f = !Object.prototype.hasOwnProperty.call(b, "version") || b.version != "1";
            var k = false;
            if (e || !d && (!Object.prototype.hasOwnProperty.call(b, "hardware") || b.hardware)) {
              d = Object.prototype.hasOwnProperty.call(b, "background") && b.background == null;
              e = Object.prototype.hasOwnProperty.call(b, "colorDepth") ? b.colorDepth : 16;
              var h = Object.prototype.hasOwnProperty.call(b, "antialiasing") && b.antialiasing > 0;
              var n = Object.prototype.hasOwnProperty.call(b, "depth") ? b.depth : true;
              b = Object.prototype.hasOwnProperty.call(b, "stencil") && b.stencil;
              b = {
                alpha: d || e > 16,
                antialias: h,
                depth: n,
                premultipliedAlpha: true,
                stencil: b,
                preserveDrawingBuffer: false,
                failIfMajorPerformanceCaveat: false
              };
              d = ["webgl", "experimental-webgl"];
              if (f) {
                d.unshift("webgl2");
              }
              for (f = 0; f < d.length && (e = d[f], ++f, c = this.canvas.getContext(e, b), c != null && e == "webgl2" && (k = true), c == null););
            }
            if (c == null) {
              a.canvas2D = this.canvas.getContext("2d");
              a.type = "canvas";
              a.version = "";
            } else {
              a.webgl = Xc.fromWebGL2RenderContext(c);
              if (k) {
                a.webgl2 = c;
              }
              if (sg.context == null) {
                sg.context = c;
                sg.type = "webgl";
                sg.version = k ? 2 : 1;
              }
              a.type = "webgl";
              a.version = k ? "2" : "1";
            }
          }
          this.parent.context = a;
        },
        focusTextInput: function () {
          var a = this;
          if (!this.__focusPending) {
            this.__focusPending = true;
            gg.delay(function () {
              a.__focusPending = false;
              if (a.textInputEnabled) {
                Za.textInput.focus();
              }
            }, 20);
          }
        },
        getFrameRate: function () {
          if (this.parent.application == null) {
            return 0;
          } else if (this.parent.application.__backend.framePeriod < 0) {
            return 60;
          } else if (this.parent.application.__backend.framePeriod == 1000) {
            return 0;
          } else {
            return 1000 / this.parent.application.__backend.framePeriod;
          }
        },
        handleContextEvent: function (a) {
          switch (a.type) {
            case "webglcontextlost":
              if (a.cancelable) {
                a.preventDefault();
              }
              this.parent.context = null;
              this.parent.onRenderContextLost.dispatch();
              break;
            case "webglcontextrestored":
              this.createContext();
              this.parent.onRenderContextRestored.dispatch(this.parent.context);
          }
        },
        handleContextMenuEvent: function (a) {
          if ((this.parent.onMouseUp.canceled || this.parent.onMouseDown.canceled) && a.cancelable) {
            a.preventDefault();
          }
        },
        handleCutOrCopyEvent: function (a) {
          var b = ic.get_text();
          if (b == null) {
            b = "";
          }
          a.clipboardData.setData("text/plain", b);
          if (a.cancelable) {
            a.preventDefault();
          }
        },
        handleDragEvent: function (a) {
          switch (a.type) {
            case "dragover":
              a.preventDefault();
              return false;
            case "dragstart":
              if (va.__cast(a.target, HTMLElement).nodeName.toLowerCase() == "img" && a.cancelable) {
                a.preventDefault();
                return false;
              }
              break;
            case "drop":
              if (a.dataTransfer != null && a.dataTransfer.files.length > 0) {
                this.parent.onDropFile.dispatch(a.dataTransfer.files);
                a.preventDefault();
                return false;
              }
          }
          return true;
        },
        handleFocusEvent: function (a) {
          if (this.textInputEnabled && (a.relatedTarget == null || this.isDescendent(a.relatedTarget))) {
            this.focusTextInput();
          }
        },
        handleFullscreenEvent: function (a) {
          if ((document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement) != null) {
            this.isFullscreen = true;
            this.parent.__fullscreen = true;
            if (this.requestedFullscreen) {
              this.requestedFullscreen = false;
              this.parent.onFullscreen.dispatch();
            }
          } else {
            this.isFullscreen = false;
            this.parent.__fullscreen = false;
            this.parent.onRestore.dispatch();
            a = ["fullscreenchange", "mozfullscreenchange", "webkitfullscreenchange", "MSFullscreenChange"];
            var b = ["fullscreenerror", "mozfullscreenerror", "webkitfullscreenerror", "MSFullscreenError"];
            for (var c = 0, d = a.length; c < d;) {
              var e = c++;
              window.document.removeEventListener(a[e], m(this, this.handleFullscreenEvent), false);
              window.document.removeEventListener(b[e], m(this, this.handleFullscreenEvent), false);
            }
          }
        },
        handleGamepadEvent: function (a) {
          switch (a.type) {
            case "gamepadconnected":
              Mc.__connect(a.gamepad.index);
              if (a.gamepad.mapping == "standard") {
                Qc.__connect(a.gamepad.index);
              }
              break;
            case "gamepaddisconnected":
              Mc.__disconnect(a.gamepad.index);
              Qc.__disconnect(a.gamepad.index);
          }
        },
        handleInputEvent: function (a) {
          if (!this.imeCompositionActive && Za.textInput.value != Za.dummyCharacter) {
            a = w.replace(Za.textInput.value, Za.dummyCharacter, "");
            if (a.length > 0) {
              this.parent.onTextInput.dispatch(a);
            }
            Za.textInput.value = Za.dummyCharacter;
          }
        },
        handleMouseEvent: function (a) {
          if (a.type != "wheel") {
            if (this.parent.element != null) {
              if (this.canvas != null) {
                var b = this.canvas.getBoundingClientRect();
                var c = this.parent.__width / b.width * (a.clientX - b.left);
                b = this.parent.__height / b.height * (a.clientY - b.top);
              } else if (this.div != null) {
                b = this.div.getBoundingClientRect();
                c = a.clientX - b.left;
                b = a.clientY - b.top;
              } else {
                b = this.parent.element.getBoundingClientRect();
                c = this.parent.__width / b.width * (a.clientX - b.left);
                b = this.parent.__height / b.height * (a.clientY - b.top);
              }
            } else {
              c = a.clientX;
              b = a.clientY;
            }
            switch (a.type) {
              case "mousedown":
                if (a.currentTarget == this.parent.element) {
                  window.addEventListener("mouseup", m(this, this.handleMouseEvent));
                }
                this.parent.clickCount = a.detail;
                this.parent.onMouseDown.dispatch(c, b, a.button);
                this.parent.clickCount = 0;
                if (this.parent.onMouseDown.canceled && a.cancelable) {
                  a.preventDefault();
                }
                break;
              case "mouseenter":
                if (a.target == this.parent.element) {
                  this.parent.onEnter.dispatch();
                  if (this.parent.onEnter.canceled && a.cancelable) {
                    a.preventDefault();
                  }
                }
                break;
              case "mouseleave":
                if (a.target == this.parent.element) {
                  this.parent.onLeave.dispatch();
                  if (this.parent.onLeave.canceled && a.cancelable) {
                    a.preventDefault();
                  }
                }
                break;
              case "mousemove":
                if (c != this.cacheMouseX || b != this.cacheMouseY) {
                  this.parent.onMouseMove.dispatch(c, b);
                  this.parent.onMouseMoveRelative.dispatch(c - this.cacheMouseX, b - this.cacheMouseY);
                  if ((this.parent.onMouseMove.canceled || this.parent.onMouseMoveRelative.canceled) && a.cancelable) {
                    a.preventDefault();
                  }
                }
                break;
              case "mouseup":
                window.removeEventListener("mouseup", m(this, this.handleMouseEvent));
                if (a.currentTarget == this.parent.element) {
                  a.stopPropagation();
                }
                this.parent.clickCount = a.detail;
                this.parent.onMouseUp.dispatch(c, b, a.button);
                this.parent.clickCount = 0;
                if (this.parent.onMouseUp.canceled && a.cancelable) {
                  a.preventDefault();
                }
            }
            this.cacheMouseX = c;
            this.cacheMouseY = b;
          } else {
            switch (a.deltaMode) {
              case 0:
                c = Vg.PIXELS;
                break;
              case 1:
                c = Vg.LINES;
                break;
              case 2:
                c = Vg.PAGES;
                break;
              default:
                c = Vg.UNKNOWN;
            }
            this.parent.onMouseWheel.dispatch(a.deltaX, -a.deltaY, c);
            if (this.parent.onMouseWheel.canceled && a.cancelable) {
              a.preventDefault();
            }
          }
        },
        handlePasteEvent: function (a) {
          if (a.clipboardData.types.indexOf("text/plain") > -1) {
            var b = a.clipboardData.getData("text/plain");
            ic.set_text(b);
            if (this.textInputEnabled) {
              this.parent.onTextInput.dispatch(b);
            }
            if (a.cancelable) {
              a.preventDefault();
            }
          }
        },
        handleResizeEvent: function (a) {
          this.primaryTouch = null;
          this.updateSize();
        },
        handleTouchEvent: function (a) {
          if (a.cancelable) {
            a.preventDefault();
          }
          var b = null;
          if (this.parent.element != null) {
            b = this.canvas != null ? this.canvas.getBoundingClientRect() : this.div != null ? this.div.getBoundingClientRect() : this.parent.element.getBoundingClientRect();
          }
          var c = this.setWidth;
          var d = this.setHeight;
          if (c == 0 || d == 0) {
            if (b != null) {
              c = b.width;
              d = b.height;
            } else {
              d = c = 1;
            }
          }
          var e;
          for (var f, k, h, n, g = 0, p = a.changedTouches; g < p.length;) {
            var l = p[g];
            ++g;
            if (b != null) {
              f = c / b.width * (l.clientX - b.left);
              k = d / b.height * (l.clientY - b.top);
            } else {
              f = l.clientX;
              k = l.clientY;
            }
            if (a.type == "touchstart") {
              e = this.unusedTouchesPool.pop();
              if (e == null) {
                e = new Dc(f / c, k / d, l.identifier, 0, 0, l.force, this.parent.id);
              } else {
                e.x = f / c;
                e.y = k / d;
                e.id = l.identifier;
                e.dx = 0;
                e.dy = 0;
                e.pressure = l.force;
                e.device = this.parent.id;
              }
              this.currentTouches.h[l.identifier] = e;
              Dc.onStart.dispatch(e);
              if (this.primaryTouch == null) {
                this.primaryTouch = e;
              }
              if (e == this.primaryTouch) {
                this.parent.onMouseDown.dispatch(f, k, 0);
              }
            } else {
              e = this.currentTouches.h[l.identifier];
              if (e != null) {
                h = e.x;
                n = e.y;
                e.x = f / c;
                e.y = k / d;
                e.dx = e.x - h;
                e.dy = e.y - n;
                e.pressure = l.force;
                switch (a.type) {
                  case "touchcancel":
                    Dc.onCancel.dispatch(e);
                    this.currentTouches.remove(l.identifier);
                    this.unusedTouchesPool.add(e);
                    if (e == this.primaryTouch) {
                      this.primaryTouch = null;
                    }
                    break;
                  case "touchend":
                    Dc.onEnd.dispatch(e);
                    this.currentTouches.remove(l.identifier);
                    this.unusedTouchesPool.add(e);
                    if (e == this.primaryTouch) {
                      this.parent.onMouseUp.dispatch(f, k, 0);
                      this.primaryTouch = null;
                    }
                    break;
                  case "touchmove":
                    Dc.onMove.dispatch(e);
                    if (e == this.primaryTouch) {
                      this.parent.onMouseMove.dispatch(f, k);
                    }
                }
              }
            }
          }
        },
        isDescendent: function (a) {
          if (a == this.parent.element) {
            return true;
          }
          while (a != null) {
            if (a.parentNode == this.parent.element) {
              return true;
            }
            a = a.parentNode;
          }
          return false;
        },
        setClipboard: function (a) {
          if (Za.textArea == null) {
            Za.textArea = window.document.createElement("textarea");
            Za.textArea.style.height = "0px";
            Za.textArea.style.left = "-100px";
            Za.textArea.style.opacity = "0";
            Za.textArea.style.position = "fixed";
            Za.textArea.style.top = "-100px";
            Za.textArea.style.width = "0px";
            window.document.body.appendChild(Za.textArea);
          }
          Za.textArea.value = a;
          Za.textArea.focus();
          Za.textArea.select();
          if (window.document.queryCommandEnabled("copy")) {
            window.document.execCommand("copy");
          }
          if (this.textInputEnabled) {
            this.focusTextInput();
          }
        },
        setCursor: function (a) {
          if (this.cursor != a) {
            if (a == null) {
              this.parent.element.style.cursor = "none";
            } else {
              switch (a._hx_index) {
                case 0:
                  var b = "default";
                  break;
                case 1:
                  b = "crosshair";
                  break;
                case 3:
                  b = "move";
                  break;
                case 4:
                  b = "pointer";
                  break;
                case 5:
                  b = "nesw-resize";
                  break;
                case 6:
                  b = "ns-resize";
                  break;
                case 7:
                  b = "nwse-resize";
                  break;
                case 8:
                  b = "ew-resize";
                  break;
                case 9:
                  b = "text";
                  break;
                case 10:
                  b = "wait";
                  break;
                case 11:
                  b = "wait";
                  break;
                default:
                  b = "auto";
              }
              this.parent.element.style.cursor = b;
            }
            this.cursor = a;
          }
          return this.cursor;
        },
        setFrameRate: function (a) {
          if (this.parent.application != null) {
            if (a >= 60) {
              if (this.parent == this.parent.application.__window) {
                this.parent.application.__backend.framePeriod = -1;
              }
            } else if (a > 0) {
              if (this.parent == this.parent.application.__window) {
                this.parent.application.__backend.framePeriod = 1000 / a;
              }
            } else if (this.parent == this.parent.application.__window) {
              this.parent.application.__backend.framePeriod = 1000;
            }
          }
          return a;
        },
        setFullscreen: function (a) {
          if (a) {
            if (!this.requestedFullscreen && !this.isFullscreen) {
              this.requestedFullscreen = true;
              u = this.parent.element;
              if (m(u, u.requestFullscreen)) {
                document.addEventListener("fullscreenchange", m(this, this.handleFullscreenEvent), false);
                document.addEventListener("fullscreenerror", m(this, this.handleFullscreenEvent), false);
                this.parent.element.requestFullscreen();
              } else if (this.parent.element.mozRequestFullScreen) {
                document.addEventListener("mozfullscreenchange", m(this, this.handleFullscreenEvent), false);
                document.addEventListener("mozfullscreenerror", m(this, this.handleFullscreenEvent), false);
                this.parent.element.mozRequestFullScreen();
              } else if (this.parent.element.webkitRequestFullscreen) {
                document.addEventListener("webkitfullscreenchange", m(this, this.handleFullscreenEvent), false);
                document.addEventListener("webkitfullscreenerror", m(this, this.handleFullscreenEvent), false);
                this.parent.element.webkitRequestFullscreen();
              } else if (this.parent.element.msRequestFullscreen) {
                document.addEventListener("MSFullscreenChange", m(this, this.handleFullscreenEvent), false);
                document.addEventListener("MSFullscreenError", m(this, this.handleFullscreenEvent), false);
                this.parent.element.msRequestFullscreen();
              }
            }
          } else if (this.isFullscreen) {
            this.requestedFullscreen = false;
            if (document.exitFullscreen) {
              document.exitFullscreen();
            } else if (document.mozCancelFullScreen) {
              document.mozCancelFullScreen();
            } else if (document.webkitExitFullscreen) {
              document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) {
              document.msExitFullscreen();
            }
          }
          return a;
        },
        setTextInputEnabled: function (a) {
          if (a) {
            if (Za.textInput == null) {
              Za.textInput = window.document.createElement("input");
              var b = E.navigator.userAgent.indexOf("Android") >= 0 ? "password" : "text";
              Za.textInput.type = b;
              Za.textInput.style.position = "absolute";
              Za.textInput.style.opacity = "0";
              Za.textInput.style.color = "transparent";
              Za.textInput.value = Za.dummyCharacter;
              Za.textInput.autocapitalize = "off";
              Za.textInput.autocorrect = "off";
              Za.textInput.autocomplete = "off";
              Za.textInput.style.left = "0px";
              Za.textInput.style.top = "50%";
              if (new V("(iPad|iPhone|iPod).*OS 8_", "gi").match(window.navigator.userAgent)) {
                Za.textInput.style.fontSize = "0px";
                Za.textInput.style.width = "0px";
                Za.textInput.style.height = "0px";
              } else {
                Za.textInput.style.width = "1px";
                Za.textInput.style.height = "1px";
              }
              Za.textInput.style.pointerEvents = "none";
              Za.textInput.style.zIndex = "-10000000";
            }
            if (Za.textInput.parentNode == null) {
              this.parent.element.appendChild(Za.textInput);
            }
            if (!this.textInputEnabled) {
              Za.textInput.addEventListener("input", m(this, this.handleInputEvent), true);
              Za.textInput.addEventListener("blur", m(this, this.handleFocusEvent), true);
              Za.textInput.addEventListener("cut", m(this, this.handleCutOrCopyEvent), true);
              Za.textInput.addEventListener("copy", m(this, this.handleCutOrCopyEvent), true);
              Za.textInput.addEventListener("paste", m(this, this.handlePasteEvent), true);
              Za.textInput.addEventListener("compositionstart", m(this, this.handleCompositionstartEvent), true);
              Za.textInput.addEventListener("compositionend", m(this, this.handleCompositionendEvent), true);
            }
            Za.textInput.focus();
            Za.textInput.select();
          } else if (Za.textInput != null) {
            Za.textInput.blur();
            Za.textInput.removeEventListener("input", m(this, this.handleInputEvent), true);
            Za.textInput.removeEventListener("blur", m(this, this.handleFocusEvent), true);
            Za.textInput.removeEventListener("cut", m(this, this.handleCutOrCopyEvent), true);
            Za.textInput.removeEventListener("copy", m(this, this.handleCutOrCopyEvent), true);
            Za.textInput.removeEventListener("paste", m(this, this.handlePasteEvent), true);
            Za.textInput.removeEventListener("compositionstart", m(this, this.handleCompositionstartEvent), true);
            Za.textInput.removeEventListener("compositionend", m(this, this.handleCompositionendEvent), true);
          }
          return this.textInputEnabled = a;
        },
        setTextInputRect: function (a) {
          return this.textInputRect = a;
        },
        handleCompositionstartEvent: function (a) {
          this.imeCompositionActive = true;
        },
        handleCompositionendEvent: function (a) {
          this.imeCompositionActive = false;
          this.handleInputEvent(a);
        },
        updateSize: function () {
          if (this.parent.__resizable) {
            if (this.parent.element != null) {
              var a = this.parent.element.clientWidth;
              var b = this.parent.element.clientHeight;
            } else {
              a = window.innerWidth;
              b = window.innerHeight;
            }
            if (a != this.cacheElementWidth || b != this.cacheElementHeight) {
              this.cacheElementWidth = a;
              this.cacheElementHeight = b;
              var c = this.resizeElement || this.setWidth == 0 && this.setHeight == 0;
              if (this.parent.element != null && (this.div == null || this.div != null && c)) {
                if (c) {
                  if (this.parent.__width != a || this.parent.__height != b) {
                    this.parent.__width = a;
                    this.parent.__height = b;
                    if (this.canvas != null) {
                      if (this.parent.element != this.canvas) {
                        this.canvas.width = Math.round(a * this.scale);
                        this.canvas.height = Math.round(b * this.scale);
                        this.canvas.style.width = a + "px";
                        this.canvas.style.height = b + "px";
                      }
                    } else {
                      this.div.style.width = a + "px";
                      this.div.style.height = b + "px";
                    }
                    this.parent.onResize.dispatch(a, b);
                  }
                } else {
                  c = this.setWidth != 0 ? a / this.setWidth : 1;
                  var d = this.setHeight != 0 ? b / this.setHeight : 1;
                  var e = a;
                  var f = b;
                  var k = 0;
                  var h = 0;
                  if (c < d) {
                    f = Math.floor(this.setHeight * c);
                    h = Math.floor((b - f) / 2);
                  } else {
                    e = Math.floor(this.setWidth * d);
                    k = Math.floor((a - e) / 2);
                  }
                  if (this.canvas != null) {
                    if (this.parent.element != this.canvas) {
                      this.canvas.style.width = e + "px";
                      this.canvas.style.height = f + "px";
                      this.canvas.style.marginLeft = k + "px";
                      this.canvas.style.marginTop = h + "px";
                    }
                  } else {
                    this.div.style.width = e + "px";
                    this.div.style.height = f + "px";
                    this.div.style.marginLeft = k + "px";
                    this.div.style.marginTop = h + "px";
                  }
                }
              }
            }
          }
        },
        __class__: Za
      };
      function Yf() {}
      g["lime._internal.format.Base64"] = Yf;
      Yf.__name__ = "lime._internal.format.Base64";
      Yf.encode = function (a) {
        var b = [];
        var c = Yf.DICTIONARY;
        var d = Yf.EXTENDED_DICTIONARY;
        var e = a.length;
        var f = Math.floor(e / 3);
        var k = f * 2;
        b.length = Math.ceil(e / 3) * 2;
        var h = 0;
        for (var n = 0, g; n < k;) {
          g = a.b[h] << 16 | a.b[h + 1] << 8 | a.b[h + 2];
          b[n] = d[g >> 12 & 4095];
          b[n + 1] = d[g & 4095];
          h += 3;
          n += 2;
        }
        switch (e - f * 3) {
          case 1:
            g = a.b[h] << 16;
            b[n] = d[g >> 12 & 4095];
            b[n + 1] = "==";
            break;
          case 2:
            g = a.b[h] << 16 | a.b[h + 1] << 8;
            b[n] = d[g >> 12 & 4095];
            b[n + 1] = c[g >> 6 & 63] + "=";
        }
        return b.join("");
      };
      function fo() {}
      g["lime._internal.format.Deflate"] = fo;
      fo.__name__ = "lime._internal.format.Deflate";
      fo.decompress = function (a) {
        a = pako.inflateRaw(a.b.bufferValue);
        return Yb.ofData(a);
      };
      function gp() {}
      g["lime._internal.format.GZip"] = gp;
      gp.__name__ = "lime._internal.format.GZip";
      gp.decompress = function (a) {
        a = pako.ungzip(a.b.bufferValue);
        return Yb.ofData(a);
      };
      function hp() {}
      g["lime._internal.format.LZMA"] = hp;
      hp.__name__ = "lime._internal.format.LZMA";
      hp.decompress = function (a) {
        return null;
      };
      function ip() {}
      g["lime._internal.format.Zlib"] = ip;
      ip.__name__ = "lime._internal.format.Zlib";
      ip.decompress = function (a) {
        a = pako.inflate(a.b.bufferValue);
        return Yb.ofData(a);
      };
      function Ya() {}
      g["lime._internal.graphics.ImageCanvasUtil"] = Ya;
      Ya.__name__ = "lime._internal.graphics.ImageCanvasUtil";
      Ya.colorTransform = function (a, b, c) {
        Ya.convertToData(a);
        zc.colorTransform(a, b, c);
      };
      Ya.convertToCanvas = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = a.buffer;
        if (c.__srcImage != null) {
          if (c.__srcCanvas == null) {
            Ya.createCanvas(a, c.__srcImage.width, c.__srcImage.height);
            c.__srcContext.drawImage(c.__srcImage, 0, 0);
          }
          c.__srcImage = null;
        } else if (c.__srcCanvas == null && c.data != null) {
          a.set_transparent(true);
          Ya.createCanvas(a, c.width, c.height);
          Ya.createImageData(a);
          c.__srcContext.putImageData(c.__srcImageData, 0, 0);
        } else if (a.type == Gd.DATA && c.__srcImageData != null && a.dirty) {
          c.__srcContext.putImageData(c.__srcImageData, 0, 0);
          a.dirty = false;
        }
        if (b) {
          c.data = null;
          c.__srcImageData = null;
        } else if (c.data == null && c.__srcImageData != null) {
          c.data = c.__srcImageData.data;
        }
        a.type = Gd.CANVAS;
      };
      Ya.convertToData = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = a.buffer;
        if (c.__srcImage != null) {
          Ya.convertToCanvas(a);
        }
        if (c.__srcCanvas != null && c.data == null) {
          Ya.createImageData(a);
          if (a.type == Gd.CANVAS) {
            a.dirty = false;
          }
        } else if (a.type == Gd.CANVAS && c.__srcCanvas != null && a.dirty) {
          if (c.__srcImageData == null) {
            Ya.createImageData(a);
          } else {
            c.__srcImageData = c.__srcContext.getImageData(0, 0, c.width, c.height);
            var d = c.__srcImageData.data.buffer;
            d = d != null ? new Uint8Array(d) : null;
            c.data = d;
          }
          a.dirty = false;
        }
        if (b) {
          a.buffer.__srcCanvas = null;
          a.buffer.__srcContext = null;
        }
        a.type = Gd.DATA;
      };
      Ya.copyChannel = function (a, b, c, d, e, f) {
        Ya.convertToData(b);
        Ya.convertToData(a);
        zc.copyChannel(a, b, c, d, e, f);
      };
      Ya.copyPixels = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (d != null && !(d.x >= a.width) && !(d.y >= a.height) && c != null && !(c.width < 1) && !(c.height < 1)) {
          if (e != null && e.get_transparent()) {
            if (f == null) {
              f = new Xh();
            }
            b = b.clone();
            b.copyChannel(e, new Ie(c.x + f.x, c.y + f.y, c.width, c.height), new Xh(c.x, c.y), qi.ALPHA, qi.ALPHA);
          }
          Ya.convertToCanvas(a, true);
          if (!k) {
            if (a.get_transparent() && b.get_transparent()) {
              a.buffer.__srcContext.clearRect(d.x + a.offsetX, d.y + a.offsetY, c.width + a.offsetX, c.height + a.offsetY);
            }
          }
          Ya.convertToCanvas(b);
          if (b.buffer.get_src() != null) {
            a.buffer.__srcContext.globalCompositeOperation = "source-over";
            a.buffer.__srcContext.drawImage(b.buffer.get_src(), c.x + b.offsetX | 0, c.y + b.offsetY | 0, c.width | 0, c.height | 0, d.x + a.offsetX | 0, d.y + a.offsetY | 0, c.width | 0, c.height | 0);
          }
          a.dirty = true;
          a.version++;
        }
      };
      Ya.createCanvas = function (a, b, c) {
        var d = a.buffer;
        if (d.__srcCanvas == null) {
          d.__srcCanvas = window.document.createElement("canvas");
          d.__srcCanvas.width = b;
          d.__srcCanvas.height = c;
          if (a.get_transparent()) {
            d.__srcContext = d.__srcCanvas.getContext("2d");
          } else {
            if (!a.get_transparent()) {
              d.__srcCanvas.setAttribute("moz-opaque", "true");
            }
            d.__srcContext = d.__srcCanvas.getContext("2d", {
              alpha: false
            });
          }
        }
      };
      Ya.createImageData = function (a) {
        a = a.buffer;
        if (a.__srcImageData == null) {
          if (a.data == null) {
            a.__srcImageData = a.__srcContext.getImageData(0, 0, a.width, a.height);
          } else {
            a.__srcImageData = a.__srcContext.createImageData(a.width, a.height);
            a.__srcImageData.data.set(a.data);
          }
          var b = a.__srcImageData.data.buffer;
          b = b != null ? new Uint8Array(b) : null;
          a.data = b;
        }
      };
      Ya.fillRect = function (a, b, c, d) {
        Ya.convertToCanvas(a);
        if (d == 1) {
          d = c >> 16 & 255;
          var e = c >> 8 & 255;
          var f = c & 255;
          c = a.get_transparent() ? c >> 24 & 255 : 255;
        } else {
          d = c >> 24 & 255;
          e = c >> 16 & 255;
          f = c >> 8 & 255;
          c = a.get_transparent() ? c & 255 : 255;
        }
        if (b.x == 0 && b.y == 0 && b.width == a.width && b.height == a.height && a.get_transparent() && c == 0) {
          a.buffer.__srcCanvas.width = a.buffer.width;
        } else {
          if (c < 255) {
            a.buffer.__srcContext.clearRect(b.x + a.offsetX, b.y + a.offsetY, b.width + a.offsetX, b.height + a.offsetY);
          }
          if (c > 0) {
            a.buffer.__srcContext.fillStyle = "rgba(" + d + ", " + e + ", " + f + ", " + c / 255 + ")";
            a.buffer.__srcContext.fillRect(b.x + a.offsetX, b.y + a.offsetY, b.width + a.offsetX, b.height + a.offsetY);
          }
          a.dirty = true;
          a.version++;
        }
      };
      Ya.getPixel32 = function (a, b, c, d) {
        Ya.convertToData(a);
        return zc.getPixel32(a, b, c, d);
      };
      Ya.setPixel = function (a, b, c, d, e) {
        Ya.convertToData(a);
        zc.setPixel(a, b, c, d, e);
      };
      Ya.setPixel32 = function (a, b, c, d, e) {
        Ya.convertToData(a);
        zc.setPixel32(a, b, c, d, e);
      };
      Ya.sync = function (a, b) {
        if (a != null) {
          if (a.type != Gd.CANVAS || a.buffer.__srcCanvas == null && a.buffer.data == null) {
            if (a.type == Gd.DATA) {
              Ya.convertToData(a, b);
            }
          } else {
            Ya.convertToCanvas(a, b);
          }
        }
      };
      function zc() {}
      g["lime._internal.graphics.ImageDataUtil"] = zc;
      zc.__name__ = "lime._internal.graphics.ImageDataUtil";
      zc.colorTransform = function (a, b, c) {
        var d = a.buffer.data;
        if (d != null) {
          var e = a.buffer.format;
          var f = a.buffer.premultiplied;
          b = new tg(a, b);
          var k = od.getAlphaTable(c);
          var h = od.getRedTable(c);
          var n = od.getGreenTable(c);
          c = od.getBlueTable(c);
          var g;
          var p;
          for (var l = 0, m = 0, v = b.height; m < v;) {
            g = m++;
            g = b.byteOffset + b.stride * g;
            for (var w = 0, q = b.width; w < q;) {
              p = w++;
              p = g + p * 4;
              var u = e;
              var r = f;
              if (r == null) {
                r = false;
              }
              if (u == null) {
                u = 0;
              }
              switch (u) {
                case 0:
                  l = (d[p] & 255) << 24 | (d[p + 1] & 255) << 16 | (d[p + 2] & 255) << 8 | d[p + 3] & 255;
                  break;
                case 1:
                  l = (d[p + 1] & 255) << 24 | (d[p + 2] & 255) << 16 | (d[p + 3] & 255) << 8 | d[p] & 255;
                  break;
                case 2:
                  l = (d[p + 2] & 255) << 24 | (d[p + 1] & 255) << 16 | (d[p] & 255) << 8 | d[p + 3] & 255;
              }
              if (r && (l & 255) != 0 && (l & 255) != 255) {
                S.unmult = 255 / (l & 255);
                l = (S.__clamp[Math.round((l >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((l >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((l >>> 8 & 255) * S.unmult)] & 255) << 8 | l & 255;
              }
              l = (h[l >>> 24 & 255] & 255) << 24 | (n[l >>> 16 & 255] & 255) << 16 | (c[l >>> 8 & 255] & 255) << 8 | k[l & 255] & 255;
              u = e;
              r = f;
              if (r == null) {
                r = false;
              }
              if (u == null) {
                u = 0;
              }
              if (r) {
                if ((l & 255) == 0) {
                  if (l != 0) {
                    l = 0;
                  }
                } else if ((l & 255) != 255) {
                  S.a16 = S.__alpha16[l & 255];
                  l = ((l >>> 24 & 255) * S.a16 >> 16 & 255) << 24 | ((l >>> 16 & 255) * S.a16 >> 16 & 255) << 16 | ((l >>> 8 & 255) * S.a16 >> 16 & 255) << 8 | l & 255;
                }
              }
              switch (u) {
                case 0:
                  d[p] = l >>> 24 & 255;
                  d[p + 1] = l >>> 16 & 255;
                  d[p + 2] = l >>> 8 & 255;
                  d[p + 3] = l & 255;
                  break;
                case 1:
                  d[p] = l & 255;
                  d[p + 1] = l >>> 24 & 255;
                  d[p + 2] = l >>> 16 & 255;
                  d[p + 3] = l >>> 8 & 255;
                  break;
                case 2:
                  d[p] = l >>> 8 & 255;
                  d[p + 1] = l >>> 16 & 255;
                  d[p + 2] = l >>> 24 & 255;
                  d[p + 3] = l & 255;
              }
            }
          }
          a.dirty = true;
          a.version++;
        }
      };
      zc.copyChannel = function (a, b, c, d, e, f) {
        switch (f._hx_index) {
          case 0:
            var k = 0;
            break;
          case 1:
            k = 1;
            break;
          case 2:
            k = 2;
            break;
          case 3:
            k = 3;
        }
        switch (e._hx_index) {
          case 0:
            var h = 0;
            break;
          case 1:
            h = 1;
            break;
          case 2:
            h = 2;
            break;
          case 3:
            h = 3;
        }
        e = b.buffer.data;
        f = a.buffer.data;
        if (e != null && f != null) {
          c = new tg(b, c);
          d = new tg(a, new Ie(d.x, d.y, c.width, c.height));
          var n = b.buffer.format;
          var g = a.buffer.format;
          b = b.buffer.premultiplied;
          var p = a.buffer.premultiplied;
          var l;
          var m;
          for (var v = 0, w = 0, q = 0, u = 0, r = d.height; u < r;) {
            m = u++;
            l = c.byteOffset + c.stride * m;
            m = d.byteOffset + d.stride * m;
            for (var z = 0, ba = d.width; z < ba;) {
              z++;
              var J = n;
              var y = b;
              if (y == null) {
                y = false;
              }
              if (J == null) {
                J = 0;
              }
              switch (J) {
                case 0:
                  v = (e[l] & 255) << 24 | (e[l + 1] & 255) << 16 | (e[l + 2] & 255) << 8 | e[l + 3] & 255;
                  break;
                case 1:
                  v = (e[l + 1] & 255) << 24 | (e[l + 2] & 255) << 16 | (e[l + 3] & 255) << 8 | e[l] & 255;
                  break;
                case 2:
                  v = (e[l + 2] & 255) << 24 | (e[l + 1] & 255) << 16 | (e[l] & 255) << 8 | e[l + 3] & 255;
              }
              if (y && (v & 255) != 0 && (v & 255) != 255) {
                S.unmult = 255 / (v & 255);
                v = (S.__clamp[Math.round((v >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((v >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((v >>> 8 & 255) * S.unmult)] & 255) << 8 | v & 255;
              }
              J = g;
              y = p;
              if (y == null) {
                y = false;
              }
              if (J == null) {
                J = 0;
              }
              switch (J) {
                case 0:
                  w = (f[m] & 255) << 24 | (f[m + 1] & 255) << 16 | (f[m + 2] & 255) << 8 | f[m + 3] & 255;
                  break;
                case 1:
                  w = (f[m + 1] & 255) << 24 | (f[m + 2] & 255) << 16 | (f[m + 3] & 255) << 8 | f[m] & 255;
                  break;
                case 2:
                  w = (f[m + 2] & 255) << 24 | (f[m + 1] & 255) << 16 | (f[m] & 255) << 8 | f[m + 3] & 255;
              }
              if (y && (w & 255) != 0 && (w & 255) != 255) {
                S.unmult = 255 / (w & 255);
                w = (S.__clamp[Math.round((w >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((w >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((w >>> 8 & 255) * S.unmult)] & 255) << 8 | w & 255;
              }
              switch (h) {
                case 0:
                  q = v >>> 24 & 255;
                  break;
                case 1:
                  q = v >>> 16 & 255;
                  break;
                case 2:
                  q = v >>> 8 & 255;
                  break;
                case 3:
                  q = v & 255;
              }
              switch (k) {
                case 0:
                  w = (q & 255) << 24 | (w >>> 16 & 255) << 16 | (w >>> 8 & 255) << 8 | w & 255;
                  break;
                case 1:
                  w = (w >>> 24 & 255) << 24 | (q & 255) << 16 | (w >>> 8 & 255) << 8 | w & 255;
                  break;
                case 2:
                  w = (w >>> 24 & 255) << 24 | (w >>> 16 & 255) << 16 | (q & 255) << 8 | w & 255;
                  break;
                case 3:
                  w = (w >>> 24 & 255) << 24 | (w >>> 16 & 255) << 16 | (w >>> 8 & 255) << 8 | q & 255;
              }
              J = g;
              y = p;
              if (y == null) {
                y = false;
              }
              if (J == null) {
                J = 0;
              }
              if (y) {
                if ((w & 255) == 0) {
                  if (w != 0) {
                    w = 0;
                  }
                } else if ((w & 255) != 255) {
                  S.a16 = S.__alpha16[w & 255];
                  w = ((w >>> 24 & 255) * S.a16 >> 16 & 255) << 24 | ((w >>> 16 & 255) * S.a16 >> 16 & 255) << 16 | ((w >>> 8 & 255) * S.a16 >> 16 & 255) << 8 | w & 255;
                }
              }
              switch (J) {
                case 0:
                  f[m] = w >>> 24 & 255;
                  f[m + 1] = w >>> 16 & 255;
                  f[m + 2] = w >>> 8 & 255;
                  f[m + 3] = w & 255;
                  break;
                case 1:
                  f[m] = w & 255;
                  f[m + 1] = w >>> 24 & 255;
                  f[m + 2] = w >>> 16 & 255;
                  f[m + 3] = w >>> 8 & 255;
                  break;
                case 2:
                  f[m] = w >>> 8 & 255;
                  f[m + 1] = w >>> 16 & 255;
                  f[m + 2] = w >>> 24 & 255;
                  f[m + 3] = w & 255;
              }
              l += 4;
              m += 4;
            }
          }
          a.dirty = true;
          a.version++;
        }
      };
      zc.copyPixels = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (a.width == b.width && a.height == b.height && c.width == b.width && c.height == b.height && c.x == 0 && c.y == 0 && d.x == 0 && d.y == 0 && e == null && f == null && k == 0 && a.get_format() == b.get_format()) {
          a.buffer.data.set(b.buffer.data);
        } else {
          var h = b.buffer.data;
          var n = a.buffer.data;
          if (h == null || n == null) {
            return;
          }
          c = new tg(b, c);
          var g = new Ie(d.x, d.y, c.width, c.height);
          g = new tg(a, g);
          var p = b.buffer.format;
          var l = a.buffer.format;
          var m = 0;
          var v = 0;
          var w = b.buffer.premultiplied;
          var q = a.buffer.premultiplied;
          var u = b.buffer.bitsPerPixel / 8 | 0;
          var r = a.buffer.bitsPerPixel / 8 | 0;
          var z = e != null && e.get_transparent();
          var ba = k || z && !a.get_transparent() || !k && !a.get_transparent() && b.get_transparent();
          if (z) {
            r = e.buffer.data;
            b = e.buffer.format;
            k = 0;
            e = new tg(e, new Ie(c.x + (f == null ? 0 : f.x), c.y + (f == null ? 0 : f.y), c.width, c.height));
            g.clip(d.x | 0, d.y | 0, e.width, e.height);
            if (ba) {
              ba = 0;
              u = g.height;
              while (ba < u) {
                z = ba++;
                d = c.byteOffset + c.stride * z;
                f = g.byteOffset + g.stride * z;
                z = e.byteOffset + e.stride * z;
                D = 0;
                C = g.width;
                while (D < C) {
                  D++;
                  var J = p;
                  var y = w;
                  if (y == null) {
                    y = false;
                  }
                  if (J == null) {
                    J = 0;
                  }
                  switch (J) {
                    case 0:
                      m = (h[d] & 255) << 24 | (h[d + 1] & 255) << 16 | (h[d + 2] & 255) << 8 | h[d + 3] & 255;
                      break;
                    case 1:
                      m = (h[d + 1] & 255) << 24 | (h[d + 2] & 255) << 16 | (h[d + 3] & 255) << 8 | h[d] & 255;
                      break;
                    case 2:
                      m = (h[d + 2] & 255) << 24 | (h[d + 1] & 255) << 16 | (h[d] & 255) << 8 | h[d + 3] & 255;
                  }
                  if (y && (m & 255) != 0 && (m & 255) != 255) {
                    S.unmult = 255 / (m & 255);
                    m = (S.__clamp[Math.round((m >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((m >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((m >>> 8 & 255) * S.unmult)] & 255) << 8 | m & 255;
                  }
                  J = l;
                  y = q;
                  if (y == null) {
                    y = false;
                  }
                  if (J == null) {
                    J = 0;
                  }
                  switch (J) {
                    case 0:
                      v = (n[f] & 255) << 24 | (n[f + 1] & 255) << 16 | (n[f + 2] & 255) << 8 | n[f + 3] & 255;
                      break;
                    case 1:
                      v = (n[f + 1] & 255) << 24 | (n[f + 2] & 255) << 16 | (n[f + 3] & 255) << 8 | n[f] & 255;
                      break;
                    case 2:
                      v = (n[f + 2] & 255) << 24 | (n[f + 1] & 255) << 16 | (n[f] & 255) << 8 | n[f + 3] & 255;
                  }
                  if (y && (v & 255) != 0 && (v & 255) != 255) {
                    S.unmult = 255 / (v & 255);
                    v = (S.__clamp[Math.round((v >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((v >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((v >>> 8 & 255) * S.unmult)] & 255) << 8 | v & 255;
                  }
                  J = b;
                  y = false;
                  if (y == null) {
                    y = false;
                  }
                  if (J == null) {
                    J = 0;
                  }
                  switch (J) {
                    case 0:
                      k = (r[z] & 255) << 24 | (r[z + 1] & 255) << 16 | (r[z + 2] & 255) << 8 | r[z + 3] & 255;
                      break;
                    case 1:
                      k = (r[z + 1] & 255) << 24 | (r[z + 2] & 255) << 16 | (r[z + 3] & 255) << 8 | r[z] & 255;
                      break;
                    case 2:
                      k = (r[z + 2] & 255) << 24 | (r[z + 1] & 255) << 16 | (r[z] & 255) << 8 | r[z + 3] & 255;
                  }
                  if (y && (k & 255) != 0 && (k & 255) != 255) {
                    S.unmult = 255 / (k & 255);
                    k = (S.__clamp[Math.round((k >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((k >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((k >>> 8 & 255) * S.unmult)] & 255) << 8 | k & 255;
                  }
                  y = (k & 255) / 255 * ((m & 255) / 255);
                  if (y > 0) {
                    var B = (v & 255) / 255;
                    var A = 1 - y;
                    J = y + B * A;
                    x = S.__clamp[Math.round(((m >>> 24 & 255) * y + (v >>> 24 & 255) * B * A) / J)];
                    v = (x & 255) << 24 | (v >>> 16 & 255) << 16 | (v >>> 8 & 255) << 8 | v & 255;
                    x = S.__clamp[Math.round(((m >>> 16 & 255) * y + (v >>> 16 & 255) * B * A) / J)];
                    v = (v >>> 24 & 255) << 24 | (x & 255) << 16 | (v >>> 8 & 255) << 8 | v & 255;
                    y = S.__clamp[Math.round(((m >>> 8 & 255) * y + (v >>> 8 & 255) * B * A) / J)];
                    v = (v >>> 24 & 255) << 24 | (v >>> 16 & 255) << 16 | (y & 255) << 8 | v & 255;
                    J = S.__clamp[Math.round(J * 255)];
                    v = (v >>> 24 & 255) << 24 | (v >>> 16 & 255) << 16 | (v >>> 8 & 255) << 8 | J & 255;
                    J = l;
                    y = q;
                    if (y == null) {
                      y = false;
                    }
                    if (J == null) {
                      J = 0;
                    }
                    if (y) {
                      if ((v & 255) == 0) {
                        if (v != 0) {
                          v = 0;
                        }
                      } else if ((v & 255) != 255) {
                        S.a16 = S.__alpha16[v & 255];
                        v = ((v >>> 24 & 255) * S.a16 >> 16 & 255) << 24 | ((v >>> 16 & 255) * S.a16 >> 16 & 255) << 16 | ((v >>> 8 & 255) * S.a16 >> 16 & 255) << 8 | v & 255;
                      }
                    }
                    switch (J) {
                      case 0:
                        n[f] = v >>> 24 & 255;
                        n[f + 1] = v >>> 16 & 255;
                        n[f + 2] = v >>> 8 & 255;
                        n[f + 3] = v & 255;
                        break;
                      case 1:
                        n[f] = v & 255;
                        n[f + 1] = v >>> 24 & 255;
                        n[f + 2] = v >>> 16 & 255;
                        n[f + 3] = v >>> 8 & 255;
                        break;
                      case 2:
                        n[f] = v >>> 8 & 255;
                        n[f + 1] = v >>> 16 & 255;
                        n[f + 2] = v >>> 24 & 255;
                        n[f + 3] = v & 255;
                    }
                  }
                  d += 4;
                  f += 4;
                  z += 4;
                }
              }
            } else {
              ba = 0;
              u = g.height;
              while (ba < u) {
                z = ba++;
                d = c.byteOffset + c.stride * z;
                f = g.byteOffset + g.stride * z;
                z = e.byteOffset + e.stride * z;
                D = 0;
                C = g.width;
                while (D < C) {
                  D++;
                  J = p;
                  y = w;
                  if (y == null) {
                    y = false;
                  }
                  if (J == null) {
                    J = 0;
                  }
                  switch (J) {
                    case 0:
                      m = (h[d] & 255) << 24 | (h[d + 1] & 255) << 16 | (h[d + 2] & 255) << 8 | h[d + 3] & 255;
                      break;
                    case 1:
                      m = (h[d + 1] & 255) << 24 | (h[d + 2] & 255) << 16 | (h[d + 3] & 255) << 8 | h[d] & 255;
                      break;
                    case 2:
                      m = (h[d + 2] & 255) << 24 | (h[d + 1] & 255) << 16 | (h[d] & 255) << 8 | h[d + 3] & 255;
                  }
                  if (y && (m & 255) != 0 && (m & 255) != 255) {
                    S.unmult = 255 / (m & 255);
                    m = (S.__clamp[Math.round((m >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((m >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((m >>> 8 & 255) * S.unmult)] & 255) << 8 | m & 255;
                  }
                  J = b;
                  y = false;
                  if (y == null) {
                    y = false;
                  }
                  if (J == null) {
                    J = 0;
                  }
                  switch (J) {
                    case 0:
                      k = (r[z] & 255) << 24 | (r[z + 1] & 255) << 16 | (r[z + 2] & 255) << 8 | r[z + 3] & 255;
                      break;
                    case 1:
                      k = (r[z + 1] & 255) << 24 | (r[z + 2] & 255) << 16 | (r[z + 3] & 255) << 8 | r[z] & 255;
                      break;
                    case 2:
                      k = (r[z + 2] & 255) << 24 | (r[z + 1] & 255) << 16 | (r[z] & 255) << 8 | r[z + 3] & 255;
                  }
                  if (y && (k & 255) != 0 && (k & 255) != 255) {
                    S.unmult = 255 / (k & 255);
                    k = (S.__clamp[Math.round((k >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((k >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((k >>> 8 & 255) * S.unmult)] & 255) << 8 | k & 255;
                  }
                  x = Math.round((k & 255) / 255 * (m & 255));
                  m = (m >>> 24 & 255) << 24 | (m >>> 16 & 255) << 16 | (m >>> 8 & 255) << 8 | x & 255;
                  J = l;
                  y = q;
                  if (y == null) {
                    y = false;
                  }
                  if (J == null) {
                    J = 0;
                  }
                  if (y) {
                    if ((m & 255) == 0) {
                      if (m != 0) {
                        m = 0;
                      }
                    } else if ((m & 255) != 255) {
                      S.a16 = S.__alpha16[m & 255];
                      m = ((m >>> 24 & 255) * S.a16 >> 16 & 255) << 24 | ((m >>> 16 & 255) * S.a16 >> 16 & 255) << 16 | ((m >>> 8 & 255) * S.a16 >> 16 & 255) << 8 | m & 255;
                    }
                  }
                  switch (J) {
                    case 0:
                      n[f] = m >>> 24 & 255;
                      n[f + 1] = m >>> 16 & 255;
                      n[f + 2] = m >>> 8 & 255;
                      n[f + 3] = m & 255;
                      break;
                    case 1:
                      n[f] = m & 255;
                      n[f + 1] = m >>> 24 & 255;
                      n[f + 2] = m >>> 16 & 255;
                      n[f + 3] = m >>> 8 & 255;
                      break;
                    case 2:
                      n[f] = m >>> 8 & 255;
                      n[f + 1] = m >>> 16 & 255;
                      n[f + 2] = m >>> 24 & 255;
                      n[f + 3] = m & 255;
                  }
                  d += 4;
                  f += 4;
                  z += 4;
                }
              }
            }
          } else if (ba) {
            ba = 0;
            u = g.height;
            while (ba < u) {
              z = ba++;
              d = c.byteOffset + c.stride * z;
              f = g.byteOffset + g.stride * z;
              for (var D = 0, C = g.width; D < C;) {
                D++;
                J = p;
                y = w;
                if (y == null) {
                  y = false;
                }
                if (J == null) {
                  J = 0;
                }
                switch (J) {
                  case 0:
                    m = (h[d] & 255) << 24 | (h[d + 1] & 255) << 16 | (h[d + 2] & 255) << 8 | h[d + 3] & 255;
                    break;
                  case 1:
                    m = (h[d + 1] & 255) << 24 | (h[d + 2] & 255) << 16 | (h[d + 3] & 255) << 8 | h[d] & 255;
                    break;
                  case 2:
                    m = (h[d + 2] & 255) << 24 | (h[d + 1] & 255) << 16 | (h[d] & 255) << 8 | h[d + 3] & 255;
                }
                if (y && (m & 255) != 0 && (m & 255) != 255) {
                  S.unmult = 255 / (m & 255);
                  m = (S.__clamp[Math.round((m >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((m >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((m >>> 8 & 255) * S.unmult)] & 255) << 8 | m & 255;
                }
                J = l;
                y = q;
                if (y == null) {
                  y = false;
                }
                if (J == null) {
                  J = 0;
                }
                switch (J) {
                  case 0:
                    v = (n[f] & 255) << 24 | (n[f + 1] & 255) << 16 | (n[f + 2] & 255) << 8 | n[f + 3] & 255;
                    break;
                  case 1:
                    v = (n[f + 1] & 255) << 24 | (n[f + 2] & 255) << 16 | (n[f + 3] & 255) << 8 | n[f] & 255;
                    break;
                  case 2:
                    v = (n[f + 2] & 255) << 24 | (n[f + 1] & 255) << 16 | (n[f] & 255) << 8 | n[f + 3] & 255;
                }
                if (y && (v & 255) != 0 && (v & 255) != 255) {
                  S.unmult = 255 / (v & 255);
                  v = (S.__clamp[Math.round((v >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((v >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((v >>> 8 & 255) * S.unmult)] & 255) << 8 | v & 255;
                }
                y = (m & 255) / 255;
                B = (v & 255) / 255;
                A = 1 - y;
                J = y + B * A;
                if (J == 0) {
                  v = 0;
                } else {
                  var x = S.__clamp[Math.round(((m >>> 24 & 255) * y + (v >>> 24 & 255) * B * A) / J)];
                  v = (x & 255) << 24 | (v >>> 16 & 255) << 16 | (v >>> 8 & 255) << 8 | v & 255;
                  x = S.__clamp[Math.round(((m >>> 16 & 255) * y + (v >>> 16 & 255) * B * A) / J)];
                  v = (v >>> 24 & 255) << 24 | (x & 255) << 16 | (v >>> 8 & 255) << 8 | v & 255;
                  y = S.__clamp[Math.round(((m >>> 8 & 255) * y + (v >>> 8 & 255) * B * A) / J)];
                  v = (v >>> 24 & 255) << 24 | (v >>> 16 & 255) << 16 | (y & 255) << 8 | v & 255;
                  J = S.__clamp[Math.round(J * 255)];
                  v = (v >>> 24 & 255) << 24 | (v >>> 16 & 255) << 16 | (v >>> 8 & 255) << 8 | J & 255;
                }
                J = l;
                y = q;
                if (y == null) {
                  y = false;
                }
                if (J == null) {
                  J = 0;
                }
                if (y) {
                  if ((v & 255) == 0) {
                    if (v != 0) {
                      v = 0;
                    }
                  } else if ((v & 255) != 255) {
                    S.a16 = S.__alpha16[v & 255];
                    v = ((v >>> 24 & 255) * S.a16 >> 16 & 255) << 24 | ((v >>> 16 & 255) * S.a16 >> 16 & 255) << 16 | ((v >>> 8 & 255) * S.a16 >> 16 & 255) << 8 | v & 255;
                  }
                }
                switch (J) {
                  case 0:
                    n[f] = v >>> 24 & 255;
                    n[f + 1] = v >>> 16 & 255;
                    n[f + 2] = v >>> 8 & 255;
                    n[f + 3] = v & 255;
                    break;
                  case 1:
                    n[f] = v & 255;
                    n[f + 1] = v >>> 24 & 255;
                    n[f + 2] = v >>> 16 & 255;
                    n[f + 3] = v >>> 8 & 255;
                    break;
                  case 2:
                    n[f] = v >>> 8 & 255;
                    n[f + 1] = v >>> 16 & 255;
                    n[f + 2] = v >>> 24 & 255;
                    n[f + 3] = v & 255;
                }
                d += 4;
                f += 4;
              }
            }
          } else if (p == l && w == q && u == r) {
            ba = 0;
            u = g.height;
            while (ba < u) {
              z = ba++;
              d = c.byteOffset + c.stride * z;
              f = g.byteOffset + g.stride * z;
              n.set(h.subarray(d, d + g.width * r), f);
            }
          } else {
            ba = 0;
            u = g.height;
            while (ba < u) {
              z = ba++;
              d = c.byteOffset + c.stride * z;
              f = g.byteOffset + g.stride * z;
              D = 0;
              C = g.width;
              while (D < C) {
                D++;
                J = p;
                y = w;
                if (y == null) {
                  y = false;
                }
                if (J == null) {
                  J = 0;
                }
                switch (J) {
                  case 0:
                    m = (h[d] & 255) << 24 | (h[d + 1] & 255) << 16 | (h[d + 2] & 255) << 8 | h[d + 3] & 255;
                    break;
                  case 1:
                    m = (h[d + 1] & 255) << 24 | (h[d + 2] & 255) << 16 | (h[d + 3] & 255) << 8 | h[d] & 255;
                    break;
                  case 2:
                    m = (h[d + 2] & 255) << 24 | (h[d + 1] & 255) << 16 | (h[d] & 255) << 8 | h[d + 3] & 255;
                }
                if (y && (m & 255) != 0 && (m & 255) != 255) {
                  S.unmult = 255 / (m & 255);
                  m = (S.__clamp[Math.round((m >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((m >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((m >>> 8 & 255) * S.unmult)] & 255) << 8 | m & 255;
                }
                J = l;
                y = q;
                if (y == null) {
                  y = false;
                }
                if (J == null) {
                  J = 0;
                }
                if (y) {
                  if ((m & 255) == 0) {
                    if (m != 0) {
                      m = 0;
                    }
                  } else if ((m & 255) != 255) {
                    S.a16 = S.__alpha16[m & 255];
                    m = ((m >>> 24 & 255) * S.a16 >> 16 & 255) << 24 | ((m >>> 16 & 255) * S.a16 >> 16 & 255) << 16 | ((m >>> 8 & 255) * S.a16 >> 16 & 255) << 8 | m & 255;
                  }
                }
                switch (J) {
                  case 0:
                    n[f] = m >>> 24 & 255;
                    n[f + 1] = m >>> 16 & 255;
                    n[f + 2] = m >>> 8 & 255;
                    n[f + 3] = m & 255;
                    break;
                  case 1:
                    n[f] = m & 255;
                    n[f + 1] = m >>> 24 & 255;
                    n[f + 2] = m >>> 16 & 255;
                    n[f + 3] = m >>> 8 & 255;
                    break;
                  case 2:
                    n[f] = m >>> 8 & 255;
                    n[f + 1] = m >>> 16 & 255;
                    n[f + 2] = m >>> 24 & 255;
                    n[f + 3] = m & 255;
                }
                d += 4;
                f += 4;
              }
            }
          }
        }
        a.dirty = true;
        a.version++;
      };
      zc.fillRect = function (a, b, c, d) {
        switch (d) {
          case 1:
            c = (c >>> 16 & 255) << 24 | (c >>> 8 & 255) << 16 | (c & 255) << 8 | c >>> 24 & 255;
            break;
          case 2:
            c = (c >>> 8 & 255) << 24 | (c >>> 16 & 255) << 16 | (c >>> 24 & 255) << 8 | c & 255;
        }
        if (!a.get_transparent()) {
          c = (c >>> 24 & 255) << 24 | (c >>> 16 & 255) << 16 | (c >>> 8 & 255) << 8 | 255;
        }
        var e = a.buffer.data;
        if (e != null) {
          d = a.buffer.format;
          var f = a.buffer.premultiplied;
          if (f) {
            if ((c & 255) == 0) {
              if (c != 0) {
                c = 0;
              }
            } else if ((c & 255) != 255) {
              S.a16 = S.__alpha16[c & 255];
              c = ((c >>> 24 & 255) * S.a16 >> 16 & 255) << 24 | ((c >>> 16 & 255) * S.a16 >> 16 & 255) << 16 | ((c >>> 8 & 255) * S.a16 >> 16 & 255) << 8 | c & 255;
            }
          }
          b = new tg(a, b);
          var k;
          for (var h = 0, n = b.height; h < n;) {
            f = h++;
            k = b.byteOffset + b.stride * f;
            for (var g = 0, p = b.width; g < p;) {
              f = g++;
              var l = k + f * 4;
              var m = d;
              f = false;
              if (f == null) {
                f = false;
              }
              if (m == null) {
                m = 0;
              }
              if (f) {
                if ((c & 255) == 0) {
                  if (c != 0) {
                    c = 0;
                  }
                } else if ((c & 255) != 255) {
                  S.a16 = S.__alpha16[c & 255];
                  c = ((c >>> 24 & 255) * S.a16 >> 16 & 255) << 24 | ((c >>> 16 & 255) * S.a16 >> 16 & 255) << 16 | ((c >>> 8 & 255) * S.a16 >> 16 & 255) << 8 | c & 255;
                }
              }
              switch (m) {
                case 0:
                  e[l] = c >>> 24 & 255;
                  e[l + 1] = c >>> 16 & 255;
                  e[l + 2] = c >>> 8 & 255;
                  e[l + 3] = c & 255;
                  break;
                case 1:
                  e[l] = c & 255;
                  e[l + 1] = c >>> 24 & 255;
                  e[l + 2] = c >>> 16 & 255;
                  e[l + 3] = c >>> 8 & 255;
                  break;
                case 2:
                  e[l] = c >>> 8 & 255;
                  e[l + 1] = c >>> 16 & 255;
                  e[l + 2] = c >>> 24 & 255;
                  e[l + 3] = c & 255;
              }
            }
          }
          a.dirty = true;
          a.version++;
        }
      };
      zc.gaussianBlur = function (a, b, c, d, e, f, k, h, n) {
        if (k == null) {
          k = 1;
        }
        if (f == null) {
          f = 4;
        }
        if (e == null) {
          e = 4;
        }
        if (h = a.get_premultiplied()) {
          a.set_premultiplied(false);
        }
        qe.blur(a, b, c, d, e, f, k);
        a.dirty = true;
        a.version++;
        if (h) {
          a.set_premultiplied(true);
        }
        return a;
      };
      zc.getPixel32 = function (a, b, c, d) {
        var e = 0;
        var f = a.buffer.data;
        b = (c + a.offsetY) * 4 * a.buffer.width + (b + a.offsetX) * 4;
        c = a.buffer.format;
        a = a.buffer.premultiplied;
        if (a == null) {
          a = false;
        }
        if (c == null) {
          c = 0;
        }
        switch (c) {
          case 0:
            e = (f[b] & 255) << 24 | (f[b + 1] & 255) << 16 | (f[b + 2] & 255) << 8 | f[b + 3] & 255;
            break;
          case 1:
            e = (f[b + 1] & 255) << 24 | (f[b + 2] & 255) << 16 | (f[b + 3] & 255) << 8 | f[b] & 255;
            break;
          case 2:
            e = (f[b + 2] & 255) << 24 | (f[b + 1] & 255) << 16 | (f[b] & 255) << 8 | f[b + 3] & 255;
        }
        if (a && (e & 255) != 0 && (e & 255) != 255) {
          S.unmult = 255 / (e & 255);
          e = (S.__clamp[Math.round((e >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((e >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((e >>> 8 & 255) * S.unmult)] & 255) << 8 | e & 255;
        }
        switch (d) {
          case 1:
            return (e & 255) << 24 | (e >>> 24 & 255) << 16 | (e >>> 16 & 255) << 8 | e >>> 8 & 255;
          case 2:
            return (e >>> 8 & 255) << 24 | (e >>> 16 & 255) << 16 | (e >>> 24 & 255) << 8 | e & 255;
          default:
            return e;
        }
      };
      zc.multiplyAlpha = function (a) {
        var b = a.buffer.data;
        if (b != null && a.buffer.transparent) {
          var c = a.buffer.format;
          for (var d = 0, e = 0, f = b.length / 4 | 0; e < f;) {
            var k = e++;
            var h = k * 4;
            var n = c;
            var g = false;
            if (g == null) {
              g = false;
            }
            if (n == null) {
              n = 0;
            }
            switch (n) {
              case 0:
                d = (b[h] & 255) << 24 | (b[h + 1] & 255) << 16 | (b[h + 2] & 255) << 8 | b[h + 3] & 255;
                break;
              case 1:
                d = (b[h + 1] & 255) << 24 | (b[h + 2] & 255) << 16 | (b[h + 3] & 255) << 8 | b[h] & 255;
                break;
              case 2:
                d = (b[h + 2] & 255) << 24 | (b[h + 1] & 255) << 16 | (b[h] & 255) << 8 | b[h + 3] & 255;
            }
            if (g && (d & 255) != 0 && (d & 255) != 255) {
              S.unmult = 255 / (d & 255);
              d = (S.__clamp[Math.round((d >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((d >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((d >>> 8 & 255) * S.unmult)] & 255) << 8 | d & 255;
            }
            k *= 4;
            h = c;
            n = true;
            if (n == null) {
              n = false;
            }
            if (h == null) {
              h = 0;
            }
            if (n) {
              if ((d & 255) == 0) {
                if (d != 0) {
                  d = 0;
                }
              } else if ((d & 255) != 255) {
                S.a16 = S.__alpha16[d & 255];
                d = ((d >>> 24 & 255) * S.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * S.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * S.a16 >> 16 & 255) << 8 | d & 255;
              }
            }
            switch (h) {
              case 0:
                b[k] = d >>> 24 & 255;
                b[k + 1] = d >>> 16 & 255;
                b[k + 2] = d >>> 8 & 255;
                b[k + 3] = d & 255;
                break;
              case 1:
                b[k] = d & 255;
                b[k + 1] = d >>> 24 & 255;
                b[k + 2] = d >>> 16 & 255;
                b[k + 3] = d >>> 8 & 255;
                break;
              case 2:
                b[k] = d >>> 8 & 255;
                b[k + 1] = d >>> 16 & 255;
                b[k + 2] = d >>> 24 & 255;
                b[k + 3] = d & 255;
            }
          }
          a.buffer.premultiplied = true;
          a.dirty = true;
          a.version++;
        }
      };
      zc.setFormat = function (a, b) {
        var c = a.buffer.data;
        if (c != null) {
          var d = c.length / 4 | 0;
          switch (a.get_format()) {
            case 0:
              var e = 0;
              var f = 1;
              var k = 2;
              var h = 3;
              break;
            case 1:
              e = 1;
              f = 2;
              k = 3;
              h = 0;
              break;
            case 2:
              e = 2;
              f = 1;
              k = 0;
              h = 3;
          }
          switch (b) {
            case 0:
              var n = 0;
              var g = 1;
              var p = 2;
              var l = 3;
              break;
            case 1:
              n = 1;
              g = 2;
              p = 3;
              l = 0;
              break;
            case 2:
              n = 2;
              g = 1;
              p = 0;
              l = 3;
          }
          for (var m = 0; m < d;) {
            var v = m++ * 4;
            var w = c[v + e];
            var q = c[v + f];
            var u = c[v + k];
            var r = c[v + h];
            c[v + n] = w;
            c[v + g] = q;
            c[v + p] = u;
            c[v + l] = r;
          }
          a.buffer.format = b;
          a.dirty = true;
          a.version++;
        }
      };
      zc.setPixel = function (a, b, c, d, e) {
        switch (e) {
          case 1:
            d = (d >>> 16 & 255) << 24 | (d >>> 8 & 255) << 16 | (d & 255) << 8 | d >>> 24 & 255;
            break;
          case 2:
            d = (d >>> 8 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 24 & 255) << 8 | d & 255;
        }
        var f = 0;
        var k = a.buffer.data;
        var h = (c + a.offsetY) * 4 * a.buffer.width + (b + a.offsetX) * 4;
        e = a.buffer.format;
        var n = a.buffer.premultiplied;
        if (n == null) {
          n = false;
        }
        if (e == null) {
          e = 0;
        }
        switch (e) {
          case 0:
            f = (k[h] & 255) << 24 | (k[h + 1] & 255) << 16 | (k[h + 2] & 255) << 8 | k[h + 3] & 255;
            break;
          case 1:
            f = (k[h + 1] & 255) << 24 | (k[h + 2] & 255) << 16 | (k[h + 3] & 255) << 8 | k[h] & 255;
            break;
          case 2:
            f = (k[h + 2] & 255) << 24 | (k[h + 1] & 255) << 16 | (k[h] & 255) << 8 | k[h + 3] & 255;
        }
        if (n && (f & 255) != 0 && (f & 255) != 255) {
          S.unmult = 255 / (f & 255);
          f = (S.__clamp[Math.round((f >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((f >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((f >>> 8 & 255) * S.unmult)] & 255) << 8 | f & 255;
        }
        d = (d >>> 24 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 8 & 255) << 8 | f & 255;
        k = a.buffer.data;
        h = (c + a.offsetY) * 4 * a.buffer.width + (b + a.offsetX) * 4;
        e = a.buffer.format;
        n = a.buffer.premultiplied;
        if (n == null) {
          n = false;
        }
        if (e == null) {
          e = 0;
        }
        if (n) {
          if ((d & 255) == 0) {
            if (d != 0) {
              d = 0;
            }
          } else if ((d & 255) != 255) {
            S.a16 = S.__alpha16[d & 255];
            d = ((d >>> 24 & 255) * S.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * S.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * S.a16 >> 16 & 255) << 8 | d & 255;
          }
        }
        switch (e) {
          case 0:
            k[h] = d >>> 24 & 255;
            k[h + 1] = d >>> 16 & 255;
            k[h + 2] = d >>> 8 & 255;
            k[h + 3] = d & 255;
            break;
          case 1:
            k[h] = d & 255;
            k[h + 1] = d >>> 24 & 255;
            k[h + 2] = d >>> 16 & 255;
            k[h + 3] = d >>> 8 & 255;
            break;
          case 2:
            k[h] = d >>> 8 & 255;
            k[h + 1] = d >>> 16 & 255;
            k[h + 2] = d >>> 24 & 255;
            k[h + 3] = d & 255;
        }
        a.dirty = true;
        a.version++;
      };
      zc.setPixel32 = function (a, b, c, d, e) {
        switch (e) {
          case 1:
            d = (d >>> 16 & 255) << 24 | (d >>> 8 & 255) << 16 | (d & 255) << 8 | d >>> 24 & 255;
            break;
          case 2:
            d = (d >>> 8 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 24 & 255) << 8 | d & 255;
        }
        if (!a.get_transparent()) {
          d = (d >>> 24 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 8 & 255) << 8 | 255;
        }
        var f = a.buffer.data;
        b = (c + a.offsetY) * 4 * a.buffer.width + (b + a.offsetX) * 4;
        e = a.buffer.format;
        c = a.buffer.premultiplied;
        if (c == null) {
          c = false;
        }
        if (e == null) {
          e = 0;
        }
        if (c) {
          if ((d & 255) == 0) {
            if (d != 0) {
              d = 0;
            }
          } else if ((d & 255) != 255) {
            S.a16 = S.__alpha16[d & 255];
            d = ((d >>> 24 & 255) * S.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * S.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * S.a16 >> 16 & 255) << 8 | d & 255;
          }
        }
        switch (e) {
          case 0:
            f[b] = d >>> 24 & 255;
            f[b + 1] = d >>> 16 & 255;
            f[b + 2] = d >>> 8 & 255;
            f[b + 3] = d & 255;
            break;
          case 1:
            f[b] = d & 255;
            f[b + 1] = d >>> 24 & 255;
            f[b + 2] = d >>> 16 & 255;
            f[b + 3] = d >>> 8 & 255;
            break;
          case 2:
            f[b] = d >>> 8 & 255;
            f[b + 1] = d >>> 16 & 255;
            f[b + 2] = d >>> 24 & 255;
            f[b + 3] = d & 255;
        }
        a.dirty = true;
        a.version++;
      };
      zc.unmultiplyAlpha = function (a) {
        var b = a.buffer.data;
        if (b != null) {
          var c = a.buffer.format;
          for (var d = 0, e = 0, f = b.length / 4 | 0; e < f;) {
            var k = e++;
            var h = k * 4;
            var n = c;
            var g = true;
            if (g == null) {
              g = false;
            }
            if (n == null) {
              n = 0;
            }
            switch (n) {
              case 0:
                d = (b[h] & 255) << 24 | (b[h + 1] & 255) << 16 | (b[h + 2] & 255) << 8 | b[h + 3] & 255;
                break;
              case 1:
                d = (b[h + 1] & 255) << 24 | (b[h + 2] & 255) << 16 | (b[h + 3] & 255) << 8 | b[h] & 255;
                break;
              case 2:
                d = (b[h + 2] & 255) << 24 | (b[h + 1] & 255) << 16 | (b[h] & 255) << 8 | b[h + 3] & 255;
            }
            if (g && (d & 255) != 0 && (d & 255) != 255) {
              S.unmult = 255 / (d & 255);
              d = (S.__clamp[Math.round((d >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((d >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((d >>> 8 & 255) * S.unmult)] & 255) << 8 | d & 255;
            }
            k *= 4;
            h = c;
            n = false;
            if (n == null) {
              n = false;
            }
            if (h == null) {
              h = 0;
            }
            if (n) {
              if ((d & 255) == 0) {
                if (d != 0) {
                  d = 0;
                }
              } else if ((d & 255) != 255) {
                S.a16 = S.__alpha16[d & 255];
                d = ((d >>> 24 & 255) * S.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * S.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * S.a16 >> 16 & 255) << 8 | d & 255;
              }
            }
            switch (h) {
              case 0:
                b[k] = d >>> 24 & 255;
                b[k + 1] = d >>> 16 & 255;
                b[k + 2] = d >>> 8 & 255;
                b[k + 3] = d & 255;
                break;
              case 1:
                b[k] = d & 255;
                b[k + 1] = d >>> 24 & 255;
                b[k + 2] = d >>> 16 & 255;
                b[k + 3] = d >>> 8 & 255;
                break;
              case 2:
                b[k] = d >>> 8 & 255;
                b[k + 1] = d >>> 16 & 255;
                b[k + 2] = d >>> 24 & 255;
                b[k + 3] = d & 255;
            }
          }
          a.buffer.premultiplied = false;
          a.dirty = true;
          a.version++;
        }
      };
      function tg(a, b) {
        this.image = a;
        if (b == null) {
          this.rect = a.get_rect();
        } else {
          if (b.x < 0) {
            b.x = 0;
          }
          if (b.y < 0) {
            b.y = 0;
          }
          if (b.x + b.width > a.width) {
            b.width = a.width - b.x;
          }
          if (b.y + b.height > a.height) {
            b.height = a.height - b.y;
          }
          if (b.width < 0) {
            b.width = 0;
          }
          if (b.height < 0) {
            b.height = 0;
          }
          this.rect = b;
        }
        this.stride = a.buffer.get_stride();
        this.__update();
      }
      g["lime._internal.graphics._ImageDataUtil.ImageDataView"] = tg;
      tg.__name__ = "lime._internal.graphics._ImageDataUtil.ImageDataView";
      tg.prototype = {
        clip: function (a, b, c, d) {
          if (this.tempRect == null) {
            this.tempRect = new Ie();
          }
          this.tempRect.setTo(a, b, c, d);
          this.rect.intersection(this.tempRect, this.rect);
          this.__update();
        },
        __update: function () {
          this.x = Math.ceil(this.rect.x);
          this.y = Math.ceil(this.rect.y);
          this.width = Math.floor(this.rect.width);
          this.height = Math.floor(this.rect.height);
          this.byteOffset = this.stride * (this.y + this.image.offsetY) + (this.x + this.image.offsetX) * 4;
        },
        __class__: tg
      };
      function qe() {}
      g["lime._internal.graphics.StackBlur"] = qe;
      qe.__name__ = "lime._internal.graphics.StackBlur";
      qe.blur = function (a, b, c, d, e, f, k) {
        a.copyPixels(b, c, d);
        qe.__stackBlurCanvasRGBA(a, c.width | 0, c.height | 0, e, f, k);
      };
      qe.__stackBlurCanvasRGBA = function (a, b, c, d, e, f) {
        d = Math.round(d) >> 1;
        e = Math.round(e) >> 1;
        if (qe.MUL_TABLE != null && (d >= qe.MUL_TABLE.length && (d = qe.MUL_TABLE.length - 1), e >= qe.MUL_TABLE.length && (e = qe.MUL_TABLE.length - 1), !(d < 0) && !(e < 0))) {
          if (f < 1) {
            f = 1;
          }
          if (f > 3) {
            f = 3;
          }
          a = a.get_data();
          var k;
          var h = d + d + 1;
          var n = e + e + 1;
          var g = b - 1;
          var p = c - 1;
          var l = d + 1;
          var m = e + 1;
          var v = new ri();
          var w = v;
          var q = 1;
          for (var u = h; q < u;) {
            q++;
            w = w.n = new ri();
          }
          w.n = v;
          var r = h = new ri();
          q = 1;
          for (u = n; q < u;) {
            q++;
            r = r.n = new ri();
          }
          r.n = h;
          var z = qe.MUL_TABLE[d];
          var J = qe.SHG_TABLE[d];
          var ba = qe.MUL_TABLE[e];
          var y = qe.SHG_TABLE[e];
          for (; f > 0;) {
            --f;
            var B = k = 0;
            var A = z;
            var D = J;
            var C = c;
            do {
              var x = a[k];
              n = l * x;
              var F = a[k + 1];
              var G = l * F;
              var H = a[k + 2];
              var la = l * H;
              q = a[k + 3];
              var N = l * q;
              w = v;
              r = l;
              do {
                w.r = x;
                w.g = F;
                w.b = H;
                w.a = q;
                w = w.n;
              } while (--r > -1);
              q = 1;
              for (u = l; q < u;) {
                r = q++;
                r = k + ((g < r ? g : r) << 2);
                n += w.r = a[r];
                G += w.g = a[r + 1];
                la += w.b = a[r + 2];
                N += w.a = a[r + 3];
                w = w.n;
              }
              u = v;
              w = 0;
              for (q = b; w < q;) {
                r = w++;
                a[k++] = n * A >>> D;
                a[k++] = G * A >>> D;
                a[k++] = la * A >>> D;
                a[k++] = N * A >>> D;
                r = r + d + 1;
                r = B + (r < g ? r : g) << 2;
                n -= u.r - (u.r = a[r]);
                G -= u.g - (u.g = a[r + 1]);
                la -= u.b - (u.b = a[r + 2]);
                N -= u.a - (u.a = a[r + 3]);
                u = u.n;
              }
              B += b;
            } while (--C > 0);
            A = ba;
            D = y;
            C = 0;
            for (B = b; C < B;) {
              w = C++;
              k = w << 2;
              x = a[k];
              n = m * x;
              F = a[k + 1];
              G = m * F;
              H = a[k + 2];
              la = m * H;
              q = a[k + 3];
              N = m * q;
              r = h;
              k = 0;
              for (u = m; k < u;) {
                k++;
                r.r = x;
                r.g = F;
                r.b = H;
                r.a = q;
                r = r.n;
              }
              q = b;
              u = 1;
              for (x = e + 1; u < x;) {
                F = u++;
                k = q + w << 2;
                n += r.r = a[k];
                G += r.g = a[k + 1];
                la += r.b = a[k + 2];
                N += r.a = a[k + 3];
                r = r.n;
                if (F < p) {
                  q += b;
                }
              }
              k = w;
              u = h;
              if (f > 0) {
                x = 0;
                F = c;
                while (x < F) {
                  H = x++;
                  r = k << 2;
                  q = N * A >>> D;
                  a[r + 3] = q;
                  if (q > 0) {
                    a[r] = n * A >>> D;
                    a[r + 1] = G * A >>> D;
                    a[r + 2] = la * A >>> D;
                  } else {
                    a[r] = a[r + 1] = a[r + 2] = 0;
                  }
                  r = H + m;
                  r = w + (r < p ? r : p) * b << 2;
                  n -= u.r - (u.r = a[r]);
                  G -= u.g - (u.g = a[r + 1]);
                  la -= u.b - (u.b = a[r + 2]);
                  N -= u.a - (u.a = a[r + 3]);
                  u = u.n;
                  k += b;
                }
              } else {
                for (var ha = 0, ja = c; ha < ja;) {
                  var O = ha++;
                  r = k << 2;
                  q = N * A >>> D;
                  a[r + 3] = q;
                  if (q > 0) {
                    q = 255 / q;
                    x = (n * A >>> D) * q | 0;
                    F = (G * A >>> D) * q | 0;
                    H = (la * A >>> D) * q | 0;
                    a[r] = x > 255 ? 255 : x;
                    a[r + 1] = F > 255 ? 255 : F;
                    a[r + 2] = H > 255 ? 255 : H;
                  } else {
                    a[r] = a[r + 1] = a[r + 2] = 0;
                  }
                  r = O + m;
                  r = w + (r < p ? r : p) * b << 2;
                  n -= u.r - (u.r = a[r]);
                  G -= u.g - (u.g = a[r + 1]);
                  la -= u.b - (u.b = a[r + 2]);
                  N -= u.a - (u.a = a[r + 3]);
                  u = u.n;
                  k += b;
                }
              }
            }
          }
        }
      };
      function ri() {
        this.a = this.b = this.g = this.r = 0;
        this.n = null;
      }
      g["lime._internal.graphics.BlurStack"] = ri;
      ri.__name__ = "lime._internal.graphics.BlurStack";
      ri.prototype = {
        __class__: ri
      };
      function Bb(a, b) {
        if (b == null) {
          b = false;
        }
        if (a != null) {
          if (b) {
            b = new Id();
            b.future = this;
            be.queue({
              promise: b,
              work: a
            });
          } else {
            try {
              this.value = a();
              this.isComplete = true;
            } catch (c) {
              Pa.lastError = c;
              this.error = G.caught(c).unwrap();
              this.isError = true;
            }
          }
        }
      }
      g["lime.app.Future"] = Bb;
      Bb.__name__ = "lime.app.Future";
      Bb.withError = function (a) {
        var b = new Bb();
        b.isError = true;
        b.error = a;
        return b;
      };
      Bb.withValue = function (a) {
        var b = new Bb();
        b.isComplete = true;
        b.value = a;
        return b;
      };
      Bb.prototype = {
        onComplete: function (a) {
          if (a != null) {
            if (this.isComplete) {
              a(this.value);
            } else if (!this.isError) {
              if (this.__completeListeners == null) {
                this.__completeListeners = [];
              }
              this.__completeListeners.push(a);
            }
          }
          return this;
        },
        onError: function (a) {
          if (a != null) {
            if (this.isError) {
              a(this.error);
            } else if (!this.isComplete) {
              if (this.__errorListeners == null) {
                this.__errorListeners = [];
              }
              this.__errorListeners.push(a);
            }
          }
          return this;
        },
        onProgress: function (a) {
          if (a != null) {
            if (this.__progressListeners == null) {
              this.__progressListeners = [];
            }
            this.__progressListeners.push(a);
          }
          return this;
        },
        then: function (a) {
          if (this.isComplete) {
            return a(this.value);
          }
          if (this.isError) {
            var b = new Bb();
            b.isError = true;
            b.error = this.error;
            return b;
          }
          var c = new Id();
          this.onError(m(c, c.error));
          this.onProgress(m(c, c.progress));
          this.onComplete(function (b) {
            b = a(b);
            b.onError(m(c, c.error));
            b.onComplete(m(c, c.complete));
          });
          return c.future;
        },
        __class__: Bb
      };
      function be() {}
      g["lime.app._Future.FutureWork"] = be;
      be.__name__ = "lime.app._Future.FutureWork";
      be.queue = function (a) {
        if (be.threadPool == null) {
          be.threadPool = new no();
          be.threadPool.doWork.add(be.threadPool_doWork);
          be.threadPool.onComplete.add(be.threadPool_onComplete);
          be.threadPool.onError.add(be.threadPool_onError);
        }
        be.threadPool.queue(a);
      };
      be.threadPool_doWork = function (a) {
        try {
          var b = a.work();
          be.threadPool.sendComplete({
            promise: a.promise,
            result: b
          });
        } catch (c) {
          Pa.lastError = c;
          b = G.caught(c).unwrap();
          be.threadPool.sendError({
            promise: a.promise,
            error: b
          });
        }
      };
      be.threadPool_onComplete = function (a) {
        a.promise.complete(a.result);
      };
      be.threadPool_onError = function (a) {
        a.promise.error(a.error);
      };
      function Id() {
        this.future = new Bb();
      }
      g["lime.app.Promise"] = Id;
      Id.__name__ = "lime.app.Promise";
      Id.prototype = {
        complete: function (a) {
          if (!this.future.isError && (this.future.isComplete = true, this.future.value = a, this.future.__completeListeners != null)) {
            for (var b = 0, c = this.future.__completeListeners; b < c.length;) {
              var d = c[b];
              ++b;
              d(a);
            }
            this.future.__completeListeners = null;
          }
          return this;
        },
        completeWith: function (a) {
          a.onComplete(m(this, this.complete));
          a.onError(m(this, this.error));
          a.onProgress(m(this, this.progress));
          return this;
        },
        error: function (a) {
          if (!this.future.isComplete && (this.future.isError = true, this.future.error = a, this.future.__errorListeners != null)) {
            for (var b = 0, c = this.future.__errorListeners; b < c.length;) {
              var d = c[b];
              ++b;
              d(a);
            }
            this.future.__errorListeners = null;
          }
          return this;
        },
        progress: function (a, b) {
          if (!this.future.isError && !this.future.isComplete && this.future.__progressListeners != null) {
            for (var c = 0, d = this.future.__progressListeners; c < d.length;) {
              var e = d[c];
              ++c;
              e(a, b);
            }
          }
          return this;
        },
        __class__: Id
      };
      function si() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_Dynamic_Void"] = si;
      si.__name__ = "lime.app._Event_Dynamic_Void";
      si.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: si
      };
      function oo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_Float_Float_Float_Void"] = oo;
      oo.__name__ = "lime.app._Event_Float_Float_Float_Void";
      oo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b, c) {
          this.canceled = false;
          for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled););
        },
        __class__: oo
      };
      function po() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_Float_Float_Int_Void"] = po;
      po.__name__ = "lime.app._Event_Float_Float_Int_Void";
      po.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b, c) {
          this.canceled = false;
          for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled););
        },
        __class__: po
      };
      function Gj() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_Float_Float_Void"] = Gj;
      Gj.__name__ = "lime.app._Event_Float_Float_Void";
      Gj.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: Gj
      };
      function qo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_Float_Float_lime_ui_MouseButton_Void"] = qo;
      qo.__name__ = "lime.app._Event_Float_Float_lime_ui_MouseButton_Void";
      qo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b, c) {
          this.canceled = false;
          for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled););
        },
        __class__: qo
      };
      function ro() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void"] = ro;
      ro.__name__ = "lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void";
      ro.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b, c) {
          this.canceled = false;
          for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled););
        },
        __class__: ro
      };
      function so() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_Int_Float_Float_Void"] = so;
      so.__name__ = "lime.app._Event_Int_Float_Float_Void";
      so.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        __class__: so
      };
      function to() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_Int_Float_Void"] = to;
      to.__name__ = "lime.app._Event_Int_Float_Void";
      to.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: to
      };
      function Wl() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_Int_Int_Void"] = Wl;
      Wl.__name__ = "lime.app._Event_Int_Int_Void";
      Wl.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: Wl
      };
      function fh() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_Int_Void"] = fh;
      fh.__name__ = "lime.app._Event_Int_Void";
      fh.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: fh
      };
      function uo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_Int_lime_ui_JoystickHatPosition_Void"] = uo;
      uo.__name__ = "lime.app._Event_Int_lime_ui_JoystickHatPosition_Void";
      uo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        __class__: uo
      };
      function vo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_String_Int_Int_Void"] = vo;
      vo.__name__ = "lime.app._Event_String_Int_Int_Void";
      vo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        __class__: vo
      };
      function Hj() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_String_Void"] = Hj;
      Hj.__name__ = "lime.app._Event_String_Void";
      Hj.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        has: function (a) {
          for (var b = 0, c = this.__listeners; b < c.length;) {
            var d = c[b];
            ++b;
            if (d == a) {
              return true;
            }
          }
          return false;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: Hj
      };
      function Tc() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_Void_Void"] = Tc;
      Tc.__name__ = "lime.app._Event_Void_Void";
      Tc.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        has: function (a) {
          for (var b = 0, c = this.__listeners; b < c.length;) {
            var d = c[b];
            ++b;
            if (d == a) {
              return true;
            }
          }
          return false;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function () {
          this.canceled = false;
          for (var a = this.__listeners, b = this.__repeat, c = 0; c < a.length && (a[c](), b[c] ? ++c : this.remove(a[c]), !this.canceled););
        },
        __class__: Tc
      };
      function Xl() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_lime_graphics_RenderContext_Void"] = Xl;
      Xl.__name__ = "lime.app._Event_lime_graphics_RenderContext_Void";
      Xl.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: Xl
      };
      function wo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_lime_ui_GamepadAxis_Float_Void"] = wo;
      wo.__name__ = "lime.app._Event_lime_ui_GamepadAxis_Float_Void";
      wo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: wo
      };
      function Yl() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_lime_ui_GamepadButton_Void"] = Yl;
      Yl.__name__ = "lime.app._Event_lime_ui_GamepadButton_Void";
      Yl.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: Yl
      };
      function xo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_lime_ui_Gamepad_Void"] = xo;
      xo.__name__ = "lime.app._Event_lime_ui_Gamepad_Void";
      xo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: xo
      };
      function yo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_lime_ui_Joystick_Void"] = yo;
      yo.__name__ = "lime.app._Event_lime_ui_Joystick_Void";
      yo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: yo
      };
      function Zl() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"] = Zl;
      Zl.__name__ = "lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void";
      Zl.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: Zl
      };
      function ti() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_lime_ui_Touch_Void"] = ti;
      ti.__name__ = "lime.app._Event_lime_ui_Touch_Void";
      ti.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: ti
      };
      function hn() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      g["lime.app._Event_lime_ui_Window_Void"] = hn;
      hn.__name__ = "lime.app._Event_lime_ui_Window_Void";
      hn.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: hn
      };
      function Cb(a, b, c, d, e, f, k) {
        if (e == null) {
          e = -1;
        }
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        this.offsetX = b;
        this.offsetY = c;
        this.width = d;
        this.height = e;
        this.version = 0;
        if (k == null) {
          k = Gd.CANVAS;
        }
        this.type = k;
        if (a == null) {
          if (d > 0 && e > 0) {
            switch (this.type._hx_index) {
              case 0:
                this.buffer = new rg(null, d, e);
                Ya.createCanvas(this, d, e);
                if (f != null && f != 0) {
                  this.fillRect(new Ie(0, 0, d, e), f);
                }
                break;
              case 1:
                a = d * e * 4;
                a = a != null ? new Uint8Array(a) : null;
                this.buffer = new rg(a, d, e);
                if (f != null && f != 0) {
                  this.fillRect(new Ie(0, 0, d, e), f);
                }
            }
          }
        } else {
          this.__fromImageBuffer(a);
        }
      }
      g["lime.graphics.Image"] = Cb;
      Cb.__name__ = "lime.graphics.Image";
      Cb.fromCanvas = function (a) {
        if (a == null) {
          return null;
        }
        var b = new rg(null, a.width, a.height);
        b.set_src(a);
        a = new Cb(b);
        a.type = Gd.CANVAS;
        return a;
      };
      Cb.fromFile = function (a) {
        if (a == null) {
          return null;
        }
        var b = new Cb();
        if (b.__fromFile(a)) {
          return b;
        } else {
          return null;
        }
      };
      Cb.loadFromBase64 = function (a, b) {
        if (a == null || b == null) {
          return Bb.withValue(null);
        } else {
          return Oa.loadImage("data:" + b + ";base64," + a);
        }
      };
      Cb.loadFromBytes = function (a) {
        if (a == null) {
          return Bb.withValue(null);
        }
        if (Cb.__isPNG(a)) {
          var b = "image/png";
        } else if (Cb.__isJPG(a)) {
          b = "image/jpeg";
        } else if (Cb.__isGIF(a)) {
          b = "image/gif";
        } else if (Cb.__isWebP(a)) {
          b = "image/webp";
        } else {
          return Bb.withValue(null);
        }
        return Oa.loadImageFromBytes(a, b);
      };
      Cb.loadFromFile = function (a) {
        if (a == null) {
          return Bb.withValue(null);
        } else {
          return Oa.loadImage(a);
        }
      };
      Cb.__isGIF = function (a) {
        if (a == null || a.length < 6) {
          return false;
        }
        a = a.getString(0, 6);
        if (a != "GIF87a") {
          return a == "GIF89a";
        } else {
          return true;
        }
      };
      Cb.__isJPG = function (a) {
        if (a == null || a.length < 4) {
          return false;
        } else if (a.b[0] == 255 && a.b[1] == 216 && a.b[a.length - 2] == 255) {
          return a.b[a.length - 1] == 217;
        } else {
          return false;
        }
      };
      Cb.__isPNG = function (a) {
        if (a == null || a.length < 8) {
          return false;
        } else if (a.b[0] == 137 && a.b[1] == 80 && a.b[2] == 78 && a.b[3] == 71 && a.b[4] == 13 && a.b[5] == 10 && a.b[6] == 26) {
          return a.b[7] == 10;
        } else {
          return false;
        }
      };
      Cb.__isWebP = function (a) {
        if (a == null || a.length < 16) {
          return false;
        } else if (a.getString(0, 4) == "RIFF") {
          return a.getString(8, 4) == "WEBP";
        } else {
          return false;
        }
      };
      Cb.prototype = {
        clone: function () {
          if (this.buffer != null) {
            if (this.type == Gd.CANVAS) {
              Ya.convertToCanvas(this);
            } else {
              Ya.convertToData(this);
            }
            var a = new Cb(this.buffer.clone(), this.offsetX, this.offsetY, this.width, this.height, null, this.type);
            a.version = this.version;
            return a;
          }
          return new Cb(null, this.offsetX, this.offsetY, this.width, this.height, null, this.type);
        },
        colorTransform: function (a, b) {
          a = this.__clipRect(a);
          if (this.buffer != null && a != null) {
            switch (this.type._hx_index) {
              case 0:
                Ya.colorTransform(this, a, b);
                break;
              case 1:
                Ya.convertToData(this);
                zc.colorTransform(this, a, b);
                break;
              case 2:
                a.offset(this.offsetX, this.offsetY);
                this.buffer.__srcBitmapData.colorTransform(a.__toFlashRectangle(), od.__toFlashColorTransform(b));
            }
          }
        },
        copyChannel: function (a, b, c, d, e) {
          b = this.__clipRect(b);
          if (this.buffer != null && b != null && (e != qi.ALPHA || !!this.get_transparent()) && !(b.width <= 0) && !(b.height <= 0)) {
            if (b.x + b.width > a.width) {
              b.width = a.width - b.x;
            }
            if (b.y + b.height > a.height) {
              b.height = a.height - b.y;
            }
            switch (this.type._hx_index) {
              case 0:
                Ya.copyChannel(this, a, b, c, d, e);
                break;
              case 1:
                Ya.convertToData(this);
                Ya.convertToData(a);
                zc.copyChannel(this, a, b, c, d, e);
                break;
              case 2:
                switch (d._hx_index) {
                  case 0:
                    var f = 1;
                    break;
                  case 1:
                    f = 2;
                    break;
                  case 2:
                    f = 4;
                    break;
                  case 3:
                    f = 8;
                }
                switch (e._hx_index) {
                  case 0:
                    var k = 1;
                    break;
                  case 1:
                    k = 2;
                    break;
                  case 2:
                    k = 4;
                    break;
                  case 3:
                    k = 8;
                }
                b.offset(a.offsetX, a.offsetY);
                c.offset(this.offsetX, this.offsetY);
                this.buffer.__srcBitmapData.copyChannel(a.buffer.get_src(), b.__toFlashRectangle(), c.__toFlashPoint(), f, k);
            }
          }
        },
        copyPixels: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (this.buffer != null && a != null && !(b.width <= 0) && !(b.height <= 0) && !(this.width <= 0) && !(this.height <= 0)) {
            if (b.x + b.width > a.width) {
              b.width = a.width - b.x;
            }
            if (b.y + b.height > a.height) {
              b.height = a.height - b.y;
            }
            if (b.x < 0) {
              b.width += b.x;
              b.x = 0;
            }
            if (b.y < 0) {
              b.height += b.y;
              b.y = 0;
            }
            if (c.x + b.width > this.width) {
              b.width = this.width - c.x;
            }
            if (c.y + b.height > this.height) {
              b.height = this.height - c.y;
            }
            if (c.x < 0) {
              b.width += c.x;
              b.x -= c.x;
              c.x = 0;
            }
            if (c.y < 0) {
              b.height += c.y;
              b.y -= c.y;
              c.y = 0;
            }
            if (a == this && c.x < b.get_right() && c.y < b.get_bottom()) {
              a = this.clone();
            }
            if (d == a && (e == null || e.x == 0 && e.y == 0)) {
              e = d = null;
            }
            switch (this.type._hx_index) {
              case 0:
                if (d != null) {
                  Ya.convertToData(this);
                  Ya.convertToData(a);
                  if (d != null) {
                    Ya.convertToData(d);
                  }
                  zc.copyPixels(this, a, b, c, d, e, f);
                } else {
                  Ya.convertToCanvas(this);
                  Ya.convertToCanvas(a);
                  Ya.copyPixels(this, a, b, c, d, e, f);
                }
                break;
              case 1:
                Ya.convertToData(this);
                Ya.convertToData(a);
                if (d != null) {
                  Ya.convertToData(d);
                }
                zc.copyPixels(this, a, b, c, d, e, f);
                break;
              case 2:
                b.offset(a.offsetX, a.offsetY);
                c.offset(this.offsetX, this.offsetY);
                if (d != null && e != null) {
                  e.offset(d.offsetX, d.offsetY);
                }
                this.buffer.__srcBitmapData.copyPixels(a.buffer.__srcBitmapData, b.__toFlashRectangle(), c.__toFlashPoint(), d != null ? d.buffer.get_src() : null, e != null ? e.__toFlashPoint() : null, f);
            }
          }
        },
        fillRect: function (a, b, c) {
          a = this.__clipRect(a);
          if (this.buffer != null && a != null) {
            switch (this.type._hx_index) {
              case 0:
                Ya.fillRect(this, a, b, c);
                break;
              case 1:
                Ya.convertToData(this);
                if (this.buffer.data.length == 0) {
                  break;
                }
                zc.fillRect(this, a, b, c);
                break;
              case 2:
                a.offset(this.offsetX, this.offsetY);
                if (c == null) {
                  b = (b & 255) << 24 | (b >>> 24 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 8 & 255;
                } else {
                  switch (c) {
                    case 1:
                      break;
                    case 2:
                      b = (b & 255) << 24 | (b >>> 8 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 24 & 255;
                      break;
                    default:
                      b = (b & 255) << 24 | (b >>> 24 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 8 & 255;
                  }
                }
                this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(), b);
            }
          }
        },
        getPixel32: function (a, b, c) {
          if (this.buffer == null || a < 0 || b < 0 || a >= this.width || b >= this.height) {
            return 0;
          }
          switch (this.type._hx_index) {
            case 0:
              return Ya.getPixel32(this, a, b, c);
            case 1:
              Ya.convertToData(this);
              return zc.getPixel32(this, a, b, c);
            case 2:
              a = this.buffer.__srcBitmapData.getPixel32(a + this.offsetX, b + this.offsetY);
              if (c == null) {
                return (a >>> 16 & 255) << 24 | (a >>> 8 & 255) << 16 | (a & 255) << 8 | a >>> 24 & 255;
              }
              switch (c) {
                case 1:
                  return a;
                case 2:
                  return (a & 255) << 24 | (a >>> 8 & 255) << 16 | (a >>> 16 & 255) << 8 | a >>> 24 & 255;
                default:
                  return (a >>> 16 & 255) << 24 | (a >>> 8 & 255) << 16 | (a & 255) << 8 | a >>> 24 & 255;
              }
            default:
              return 0;
          }
        },
        setPixel: function (a, b, c, d) {
          if (this.buffer != null && !(a < 0) && !(b < 0) && !(a >= this.width) && !(b >= this.height)) {
            switch (this.type._hx_index) {
              case 0:
                Ya.setPixel(this, a, b, c, d);
                break;
              case 1:
                Ya.convertToData(this);
                zc.setPixel(this, a, b, c, d);
                break;
              case 2:
                if (d == null) {
                  c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                } else {
                  switch (d) {
                    case 1:
                      break;
                    case 2:
                      c = (c & 255) << 24 | (c >>> 8 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 24 & 255;
                      break;
                    default:
                      c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                  }
                }
                this.buffer.__srcBitmapData.setPixel(a + this.offsetX, b + this.offsetX, c);
            }
          }
        },
        setPixel32: function (a, b, c, d) {
          if (this.buffer != null && !(a < 0) && !(b < 0) && !(a >= this.width) && !(b >= this.height)) {
            switch (this.type._hx_index) {
              case 0:
                Ya.setPixel32(this, a, b, c, d);
                break;
              case 1:
                Ya.convertToData(this);
                zc.setPixel32(this, a, b, c, d);
                break;
              case 2:
                if (d == null) {
                  c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                } else {
                  switch (d) {
                    case 1:
                      break;
                    case 2:
                      c = (c & 255) << 24 | (c >>> 8 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 24 & 255;
                      break;
                    default:
                      c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                  }
                }
                this.buffer.__srcBitmapData.setPixel32(a + this.offsetX, b + this.offsetY, c);
            }
          }
        },
        __clipRect: function (a) {
          if (a == null || a.x < 0 && (a.width -= -a.x, a.x = 0, a.x + a.width <= 0) || a.y < 0 && (a.height -= -a.y, a.y = 0, a.y + a.height <= 0) || a.x + a.width >= this.width && (a.width -= a.x + a.width - this.width, a.width <= 0) || a.y + a.height >= this.height && (a.height -= a.y + a.height - this.height, a.height <= 0)) {
            return null;
          } else {
            return a;
          }
        },
        __fromBase64: function (a, b, c) {
          var d = this;
          var e = new window.Image();
          e.addEventListener("load", function (a) {
            d.buffer = new rg(null, e.width, e.height);
            d.buffer.__srcImage = e;
            d.offsetX = 0;
            d.offsetY = 0;
            d.width = d.buffer.width;
            d.height = d.buffer.height;
            if (c != null) {
              c(d);
            }
          }, false);
          e.src = "data:" + b + ";base64," + a;
        },
        __fromBytes: function (a, b) {
          if (Cb.__isPNG(a)) {
            var c = "image/png";
          } else if (Cb.__isJPG(a)) {
            c = "image/jpeg";
          } else if (Cb.__isGIF(a)) {
            c = "image/gif";
          } else {
            return false;
          }
          this.__fromBase64(Yf.encode(a), c, b);
          return true;
        },
        __fromFile: function (a, b, c) {
          var d = this;
          var e = new window.Image();
          if (!Oa.__isSameOrigin(a)) {
            e.crossOrigin = "Anonymous";
          }
          e.onload = function (a) {
            d.buffer = new rg(null, e.width, e.height);
            d.buffer.__srcImage = e;
            d.width = e.width;
            d.height = e.height;
            if (b != null) {
              b(d);
            }
          };
          e.onerror = function (a) {
            if (c != null) {
              c();
            }
          };
          e.src = a;
          return true;
        },
        __fromImageBuffer: function (a) {
          this.buffer = a;
          if (a != null) {
            if (this.width == -1) {
              this.width = a.width;
            }
            if (this.height == -1) {
              this.height = a.height;
            }
          }
        },
        get_data: function () {
          if (this.buffer.data == null && this.buffer.width > 0 && this.buffer.height > 0) {
            Ya.convertToData(this);
          }
          return this.buffer.data;
        },
        set_data: function (a) {
          return this.buffer.data = a;
        },
        get_format: function () {
          return this.buffer.format;
        },
        set_format: function (a) {
          if (this.buffer.format != a && this.type._hx_index == 1) {
            zc.setFormat(this, a);
          }
          return this.buffer.format = a;
        },
        get_premultiplied: function () {
          return this.buffer.premultiplied;
        },
        set_premultiplied: function (a) {
          if (a && !this.buffer.premultiplied) {
            switch (this.type._hx_index) {
              case 0:
              case 1:
                Ya.convertToData(this);
                zc.multiplyAlpha(this);
            }
          } else if (!a && this.buffer.premultiplied && this.type._hx_index == 1) {
            Ya.convertToData(this);
            zc.unmultiplyAlpha(this);
          }
          return a;
        },
        get_rect: function () {
          return new Ie(0, 0, this.width, this.height);
        },
        get_src: function () {
          if (this.buffer.__srcCanvas == null && (this.buffer.data != null || this.type == Gd.DATA)) {
            Ya.convertToCanvas(this);
          }
          return this.buffer.get_src();
        },
        get_transparent: function () {
          if (this.buffer == null) {
            return false;
          } else {
            return this.buffer.transparent;
          }
        },
        set_transparent: function (a) {
          if (this.buffer == null) {
            return false;
          } else {
            return this.buffer.transparent = a;
          }
        },
        __class__: Cb,
        __properties__: {
          set_transparent: "set_transparent",
          get_transparent: "get_transparent",
          get_src: "get_src",
          get_rect: "get_rect",
          set_premultiplied: "set_premultiplied",
          get_premultiplied: "get_premultiplied",
          set_format: "set_format",
          get_format: "get_format",
          set_data: "set_data",
          get_data: "get_data"
        }
      };
      function rg(a, b, c, d, e) {
        if (d == null) {
          d = 32;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        this.data = a;
        this.width = b;
        this.height = c;
        this.bitsPerPixel = d;
        this.format = e == null ? 0 : e;
        this.premultiplied = false;
        this.transparent = true;
      }
      g["lime.graphics.ImageBuffer"] = rg;
      rg.__name__ = "lime.graphics.ImageBuffer";
      rg.prototype = {
        clone: function () {
          var a = new rg(this.data, this.width, this.height, this.bitsPerPixel);
          if (this.data != null) {
            var b = this.data.byteLength;
            var c = null;
            var d = null;
            var e = null;
            var f = null;
            var k = null;
            b = b != null ? new Uint8Array(b) : c != null ? new Uint8Array(c) : d != null ? new Uint8Array(d.__array) : e != null ? new Uint8Array(e) : f != null ? k == null ? new Uint8Array(f, 0) : new Uint8Array(f, 0, k) : null;
            a.data = b;
            d = c = b = null;
            e = this.data;
            k = f = null;
            b = b != null ? new Uint8Array(b) : c != null ? new Uint8Array(c) : d != null ? new Uint8Array(d.__array) : e != null ? new Uint8Array(e) : f != null ? k == null ? new Uint8Array(f, 0) : new Uint8Array(f, 0, k) : null;
            a.data.set(b);
          } else if (this.__srcImageData != null) {
            a.__srcCanvas = window.document.createElement("canvas");
            a.__srcContext = a.__srcCanvas.getContext("2d");
            a.__srcCanvas.width = this.__srcImageData.width;
            a.__srcCanvas.height = this.__srcImageData.height;
            a.__srcImageData = a.__srcContext.createImageData(this.__srcImageData.width, this.__srcImageData.height);
            b = new Uint8ClampedArray(this.__srcImageData.data);
            a.__srcImageData.data.set(b);
          } else if (this.__srcCanvas != null) {
            a.__srcCanvas = window.document.createElement("canvas");
            a.__srcContext = a.__srcCanvas.getContext("2d");
            a.__srcCanvas.width = this.__srcCanvas.width;
            a.__srcCanvas.height = this.__srcCanvas.height;
            a.__srcContext.drawImage(this.__srcCanvas, 0, 0);
          } else {
            a.__srcImage = this.__srcImage;
          }
          a.bitsPerPixel = this.bitsPerPixel;
          a.format = this.format;
          a.premultiplied = this.premultiplied;
          a.transparent = this.transparent;
          return a;
        },
        get_src: function () {
          return this.__srcImage ?? this.__srcCanvas;
        },
        set_src: function (a) {
          if (a instanceof Image) {
            this.__srcImage = a;
          } else if (a instanceof HTMLCanvasElement) {
            this.__srcCanvas = a;
            this.__srcContext = this.__srcCanvas.getContext("2d");
          }
          return a;
        },
        get_stride: function () {
          return this.width * (this.bitsPerPixel / 8 | 0);
        },
        __class__: rg,
        __properties__: {
          get_stride: "get_stride",
          set_src: "set_src",
          get_src: "get_src"
        }
      };
      var qi = z["lime.graphics.ImageChannel"] = {
        __ename__: "lime.graphics.ImageChannel",
        __constructs__: null,
        RED: {
          _hx_name: "RED",
          _hx_index: 0,
          __enum__: "lime.graphics.ImageChannel",
          toString: p
        },
        GREEN: {
          _hx_name: "GREEN",
          _hx_index: 1,
          __enum__: "lime.graphics.ImageChannel",
          toString: p
        },
        BLUE: {
          _hx_name: "BLUE",
          _hx_index: 2,
          __enum__: "lime.graphics.ImageChannel",
          toString: p
        },
        ALPHA: {
          _hx_name: "ALPHA",
          _hx_index: 3,
          __enum__: "lime.graphics.ImageChannel",
          toString: p
        }
      };
      qi.__constructs__ = [qi.RED, qi.GREEN, qi.BLUE, qi.ALPHA];
      var Gd = z["lime.graphics.ImageType"] = {
        __ename__: "lime.graphics.ImageType",
        __constructs__: null,
        CANVAS: {
          _hx_name: "CANVAS",
          _hx_index: 0,
          __enum__: "lime.graphics.ImageType",
          toString: p
        },
        DATA: {
          _hx_name: "DATA",
          _hx_index: 1,
          __enum__: "lime.graphics.ImageType",
          toString: p
        },
        FLASH: {
          _hx_name: "FLASH",
          _hx_index: 2,
          __enum__: "lime.graphics.ImageType",
          toString: p
        },
        CUSTOM: {
          _hx_name: "CUSTOM",
          _hx_index: 3,
          __enum__: "lime.graphics.ImageType",
          toString: p
        }
      };
      Gd.__constructs__ = [Gd.CANVAS, Gd.DATA, Gd.FLASH, Gd.CUSTOM];
      function mo() {}
      g["lime.graphics.RenderContext"] = mo;
      mo.__name__ = "lime.graphics.RenderContext";
      mo.prototype = {
        __class__: mo
      };
      var Pp = {
        uniform2fv: function (a, b, c, d, e) {
          if (d != null) {
            a.uniform2fv(b, c, d, e);
          } else {
            a.uniform2fv(b, c);
          }
        }
      };
      var Xc = {
        bufferData: function (a, b, c, d) {
          a.bufferData(b, c, d);
        },
        texImage2D: function (a, b, c, d, e, f, k, h, n, g) {
          if (h != null) {
            a.texImage2D(b, c, d, e, f, k, h, n, g);
          } else {
            a.texImage2D(b, c, d, e, f, k);
          }
        },
        uniformMatrix2fv: function (a, b, c, d) {
          a.uniformMatrix2fv(b, c, d);
        },
        uniformMatrix3fv: function (a, b, c, d) {
          a.uniformMatrix3fv(b, c, d);
        },
        uniformMatrix4fv: function (a, b, c, d) {
          a.uniformMatrix4fv(b, c, d);
        },
        fromWebGL2RenderContext: function (a) {
          return a;
        }
      };
      function jp(a) {}
      g["lime.graphics.cairo.Cairo"] = jp;
      jp.__name__ = "lime.graphics.cairo.Cairo";
      jp.prototype = {
        clip: function () {},
        identityMatrix: function () {},
        newPath: function () {},
        paint: function () {},
        rectangle: function (a, b, c, d) {},
        restore: function () {},
        save: function () {},
        setOperator: function (a) {
          return a;
        },
        setSourceRGB: function (a, b, c) {},
        set_matrix: function (a) {
          return a;
        },
        __class__: jp,
        __properties__: {
          set_matrix: "set_matrix"
        }
      };
      var Hp = {
        flush: function (a) {}
      };
      function sg() {}
      g["lime.graphics.opengl.GL"] = sg;
      sg.__name__ = "lime.graphics.opengl.GL";
      function kp() {
        this.STACK_UNDERFLOW = 1284;
        this.STACK_OVERFLOW = 1283;
        this.CONTEXT_FLAG_DEBUG_BIT = 2;
        this.DEBUG_OUTPUT = 37600;
        this.DEBUG_SEVERITY_LOW = 37192;
        this.DEBUG_SEVERITY_MEDIUM = 37191;
        this.DEBUG_SEVERITY_HIGH = 37190;
        this.DEBUG_LOGGED_MESSAGES = 37189;
        this.MAX_DEBUG_LOGGED_MESSAGES = 37188;
        this.MAX_DEBUG_MESSAGE_LENGTH = 37187;
        this.MAX_LABEL_LENGTH = 33512;
        this.SAMPLER = 33510;
        this.QUERY = 33507;
        this.PROGRAM = 33506;
        this.SHADER = 33505;
        this.BUFFER = 33504;
        this.DEBUG_GROUP_STACK_DEPTH = 33389;
        this.MAX_DEBUG_GROUP_STACK_DEPTH = 33388;
        this.DEBUG_SEVERITY_NOTIFICATION = 33387;
        this.DEBUG_TYPE_POP_GROUP = 33386;
        this.DEBUG_TYPE_PUSH_GROUP = 33385;
        this.DEBUG_TYPE_MARKER = 33384;
        this.DEBUG_TYPE_OTHER = 33361;
        this.DEBUG_TYPE_PERFORMANCE = 33360;
        this.DEBUG_TYPE_PORTABILITY = 33359;
        this.DEBUG_TYPE_UNDEFINED_BEHAVIOR = 33358;
        this.DEBUG_TYPE_DEPRECATED_BEHAVIOR = 33357;
        this.DEBUG_TYPE_ERROR = 33356;
        this.DEBUG_SOURCE_OTHER = 33355;
        this.DEBUG_SOURCE_APPLICATION = 33354;
        this.DEBUG_SOURCE_THIRD_PARTY = 33353;
        this.DEBUG_SOURCE_SHADER_COMPILER = 33352;
        this.DEBUG_SOURCE_WINDOW_SYSTEM = 33351;
        this.DEBUG_SOURCE_API = 33350;
        this.DEBUG_CALLBACK_USER_PARAM = 33349;
        this.DEBUG_CALLBACK_FUNCTION = 33348;
        this.DEBUG_NEXT_LOGGED_MESSAGE_LENGTH = 33347;
        this.DEBUG_OUTPUT_SYNCHRONOUS = 33346;
      }
      g["lime.graphics.opengl.ext.KHR_debug"] = kp;
      kp.__name__ = "lime.graphics.opengl.ext.KHR_debug";
      kp.prototype = {
        __class__: kp
      };
      var od = {
        getAlphaTable: function (a) {
          if (od.__alphaTable == null) {
            od.__alphaTable = new Uint8Array(256);
          }
          od.__alphaTable[0] = 0;
          for (var b = 1; b < 256;) {
            var c = b++;
            var d = Math.floor(c * a[18] + a[19] * 255);
            if (d > 255) {
              d = 255;
            }
            if (d < 0) {
              d = 0;
            }
            od.__alphaTable[c] = d;
          }
          return od.__alphaTable;
        },
        getBlueTable: function (a) {
          if (od.__blueTable == null) {
            od.__blueTable = new Uint8Array(256);
          }
          var b;
          for (var c = 0; c < 256;) {
            var d = c++;
            b = Math.floor(d * a[12] + a[14] * 255);
            if (b > 255) {
              b = 255;
            }
            if (b < 0) {
              b = 0;
            }
            od.__blueTable[d] = b;
          }
          return od.__blueTable;
        },
        getGreenTable: function (a) {
          if (od.__greenTable == null) {
            od.__greenTable = new Uint8Array(256);
          }
          var b;
          for (var c = 0; c < 256;) {
            var d = c++;
            b = Math.floor(d * a[6] + a[9] * 255);
            if (b > 255) {
              b = 255;
            }
            if (b < 0) {
              b = 0;
            }
            od.__greenTable[d] = b;
          }
          return od.__greenTable;
        },
        getRedTable: function (a) {
          if (od.__redTable == null) {
            od.__redTable = new Uint8Array(256);
          }
          var b;
          for (var c = 0; c < 256;) {
            var d = c++;
            b = Math.floor(d * a[0] + a[4] * 255);
            if (b > 255) {
              b = 255;
            }
            if (b < 0) {
              b = 0;
            }
            od.__redTable[d] = b;
          }
          return od.__redTable;
        },
        __toFlashColorTransform: function (a) {
          return null;
        }
      };
      var kb = {
        _new: function (a) {
          if (a == null || a.length != 16) {
            a = kb.__identity;
            a = a != null ? new Float32Array(a) : null;
          }
          return a;
        },
        append: function (a, b) {
          var c = a[0];
          var d = a[4];
          var e = a[8];
          var f = a[12];
          var k = a[1];
          var h = a[5];
          var n = a[9];
          var g = a[13];
          var p = a[2];
          var l = a[6];
          var m = a[10];
          var v = a[14];
          var w = a[3];
          var q = a[7];
          var u = a[11];
          var r = a[15];
          var z = kb.get(b, 0);
          var J = kb.get(b, 4);
          var ba = kb.get(b, 8);
          var y = kb.get(b, 12);
          var A = kb.get(b, 1);
          var B = kb.get(b, 5);
          var D = kb.get(b, 9);
          var C = kb.get(b, 13);
          var x = kb.get(b, 2);
          var F = kb.get(b, 6);
          var G = kb.get(b, 10);
          var H = kb.get(b, 14);
          var la = kb.get(b, 3);
          var N = kb.get(b, 7);
          var ha = kb.get(b, 11);
          b = kb.get(b, 15);
          a[0] = c * z + k * J + p * ba + w * y;
          a[1] = c * A + k * B + p * D + w * C;
          a[2] = c * x + k * F + p * G + w * H;
          a[3] = c * la + k * N + p * ha + w * b;
          a[4] = d * z + h * J + l * ba + q * y;
          a[5] = d * A + h * B + l * D + q * C;
          a[6] = d * x + h * F + l * G + q * H;
          a[7] = d * la + h * N + l * ha + q * b;
          a[8] = e * z + n * J + m * ba + u * y;
          a[9] = e * A + n * B + m * D + u * C;
          a[10] = e * x + n * F + m * G + u * H;
          a[11] = e * la + n * N + m * ha + u * b;
          a[12] = f * z + g * J + v * ba + r * y;
          a[13] = f * A + g * B + v * D + r * C;
          a[14] = f * x + g * F + v * G + r * H;
          a[15] = f * la + g * N + v * ha + r * b;
        },
        createOrtho: function (a, b, c, d, e, f, k) {
          var h = 1 / (c - b);
          var n = 1 / (e - d);
          var g = 1 / (k - f);
          a[0] = h * 2;
          a[1] = 0;
          a[2] = 0;
          a[3] = 0;
          a[4] = 0;
          a[5] = n * 2;
          a[6] = 0;
          a[7] = 0;
          a[8] = 0;
          a[9] = 0;
          a[10] = g * -2;
          a[11] = 0;
          a[12] = -(b + c) * h;
          a[13] = -(d + e) * n;
          a[14] = -(f + k) * g;
          a[15] = 1;
        },
        identity: function (a) {
          a[0] = 1;
          a[1] = 0;
          a[2] = 0;
          a[3] = 0;
          a[4] = 0;
          a[5] = 1;
          a[6] = 0;
          a[7] = 0;
          a[8] = 0;
          a[9] = 0;
          a[10] = 1;
          a[11] = 0;
          a[12] = 0;
          a[13] = 0;
          a[14] = 0;
          a[15] = 1;
        },
        get: function (a, b) {
          return a[b];
        },
        set: function (a, b, c) {
          return a[b] = c;
        }
      };
      var S = {};
      function Ie(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
        this.width = c;
        this.height = d;
      }
      g["lime.math.Rectangle"] = Ie;
      Ie.__name__ = "lime.math.Rectangle";
      Ie.prototype = {
        intersection: function (a, b) {
          if (b == null) {
            b = new Ie();
          }
          var c = this.x < a.x ? a.x : this.x;
          var d = this.get_right() > a.get_right() ? a.get_right() : this.get_right();
          if (d <= c) {
            b.setEmpty();
            return b;
          }
          var e = this.y < a.y ? a.y : this.y;
          a = this.get_bottom() > a.get_bottom() ? a.get_bottom() : this.get_bottom();
          if (a <= e) {
            b.setEmpty();
            return b;
          }
          b.x = c;
          b.y = e;
          b.width = d - c;
          b.height = a - e;
          return b;
        },
        offset: function (a, b) {
          this.x += a;
          this.y += b;
        },
        setEmpty: function () {
          this.x = this.y = this.width = this.height = 0;
        },
        setTo: function (a, b, c, d) {
          this.x = a;
          this.y = b;
          this.width = c;
          this.height = d;
        },
        __toFlashRectangle: function () {
          return null;
        },
        get_bottom: function () {
          return this.y + this.height;
        },
        get_right: function () {
          return this.x + this.width;
        },
        __class__: Ie,
        __properties__: {
          get_right: "get_right",
          get_bottom: "get_bottom"
        }
      };
      function ko(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.w = d;
        this.x = a;
        this.y = b;
        this.z = c;
      }
      g["lime.math.Vector4"] = ko;
      ko.__name__ = "lime.math.Vector4";
      ko.prototype = {
        __class__: ko
      };
      function Zc() {}
      g["lime.media.AudioBuffer"] = Zc;
      Zc.__name__ = "lime.media.AudioBuffer";
      Zc.fromBytes = function (a) {
        if (a == null) {
          return null;
        }
        var b = new Zc();
        b.set_src(new Howl({
          src: ["data:" + Zc.__getCodec(a) + ";base64," + Yf.encode(a)],
          html5: true,
          preload: false
        }));
        return b;
      };
      Zc.fromFile = function (a) {
        if (a == null) {
          return null;
        }
        var b = new Zc();
        b.__srcHowl = new Howl({
          src: [a],
          preload: false
        });
        return b;
      };
      Zc.fromFiles = function (a) {
        var b = new Zc();
        b.__srcHowl = new Howl({
          src: a,
          preload: false
        });
        return b;
      };
      Zc.loadFromFile = function (a) {
        var b = new Id();
        var c = Zc.fromFile(a);
        if (c != null) {
          if (c != null) {
            c.__srcHowl.on("load", function () {
              b.complete(c);
            });
            c.__srcHowl.on("loaderror", function (a, c) {
              b.error(c);
            });
            c.__srcHowl.load();
          }
        } else {
          b.error(null);
        }
        return b.future;
      };
      Zc.loadFromFiles = function (a) {
        var b = new Id();
        var c = Zc.fromFiles(a);
        if (c != null) {
          c.__srcHowl.on("load", function () {
            b.complete(c);
          });
          c.__srcHowl.on("loaderror", function () {
            b.error(null);
          });
          c.__srcHowl.load();
        } else {
          b.error(null);
        }
        return b.future;
      };
      Zc.__getCodec = function (a) {
        switch (a.getString(0, 4)) {
          case "OggS":
            return "audio/ogg";
          case "RIFF":
            if (a.getString(8, 4) == "WAVE") {
              return "audio/wav";
            }
            var b = a.b[1];
            var c = a.b[2];
            switch (a.b[0]) {
              case 73:
                if (b == 68 && c == 51) {
                  return "audio/mp3";
                }
                break;
              case 255:
                switch (b) {
                  case 243:
                  case 250:
                  case 251:
                    return "audio/mp3";
                }
            }
            break;
          case "fLaC":
            return "audio/flac";
          default:
            b = a.b[1];
            c = a.b[2];
            switch (a.b[0]) {
              case 73:
                if (b == 68 && c == 51) {
                  return "audio/mp3";
                }
                break;
              case 255:
                switch (b) {
                  case 243:
                  case 250:
                  case 251:
                    return "audio/mp3";
                }
            }
        }
        Va.error("Unsupported sound format", {
          fileName: "lime/media/AudioBuffer.hx",
          lineNumber: 362,
          className: "lime.media.AudioBuffer",
          methodName: "__getCodec"
        });
        return null;
      };
      Zc.prototype = {
        get_src: function () {
          return this.__srcHowl;
        },
        set_src: function (a) {
          return this.__srcHowl = a;
        },
        __class__: Zc,
        __properties__: {
          set_src: "set_src",
          get_src: "get_src"
        }
      };
      function Ao(a) {
        if (a != "custom") {
          if (a == null || a == "web") {
            try {
              window.AudioContext = window.AudioContext || window.webkitAudioContext;
              this.web = new window.AudioContext();
              this.type = "web";
            } catch (b) {
              Pa.lastError = b;
            }
          }
          if (this.web == null && a != "web") {
            this.html5 = new zo();
            this.type = "html5";
          }
        } else {
          this.type = "custom";
        }
      }
      g["lime.media.AudioContext"] = Ao;
      Ao.__name__ = "lime.media.AudioContext";
      Ao.prototype = {
        __class__: Ao
      };
      function cg() {}
      g["lime.media.AudioManager"] = cg;
      cg.__name__ = "lime.media.AudioManager";
      cg.init = function (a) {
        if (cg.context == null) {
          if (a == null && (cg.context = new Ao(), a = cg.context, a.type == "openal")) {
            var b = a.openal;
            var c = b.openDevice();
            c = b.createContext(c);
            b.makeContextCurrent(c);
            b.processContext(c);
          }
          cg.context = a;
        }
      };
      function Bo(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (b == null) {
          b = 0;
        }
        this.onComplete = new Tc();
        this.buffer = a;
        this.offset = b;
        this.__backend = new lo(this);
        if (c != null && c != 0) {
          this.set_length(c);
        }
        this.set_loops(d);
        if (a != null) {
          this.init();
        }
      }
      g["lime.media.AudioSource"] = Bo;
      Bo.__name__ = "lime.media.AudioSource";
      Bo.prototype = {
        dispose: function () {
          this.__backend.dispose();
        },
        init: function () {
          this.__backend.init();
        },
        play: function () {
          this.__backend.play();
        },
        stop: function () {
          this.__backend.stop();
        },
        get_currentTime: function () {
          return this.__backend.getCurrentTime();
        },
        set_currentTime: function (a) {
          return this.__backend.setCurrentTime(a);
        },
        get_gain: function () {
          return this.__backend.getGain();
        },
        set_gain: function (a) {
          return this.__backend.setGain(a);
        },
        set_length: function (a) {
          return this.__backend.setLength(a);
        },
        set_loops: function (a) {
          return this.__backend.setLoops(a);
        },
        set_pitch: function (a) {
          return this.__backend.setPitch(a);
        },
        get_position: function () {
          return this.__backend.getPosition();
        },
        set_position: function (a) {
          return this.__backend.setPosition(a);
        },
        __class__: Bo,
        __properties__: {
          set_pitch: "set_pitch",
          set_loops: "set_loops",
          set_length: "set_length",
          set_position: "set_position",
          get_position: "get_position",
          set_gain: "set_gain",
          get_gain: "get_gain",
          set_currentTime: "set_currentTime",
          get_currentTime: "get_currentTime"
        }
      };
      function zo() {}
      g["lime.media.HTML5AudioContext"] = zo;
      zo.__name__ = "lime.media.HTML5AudioContext";
      zo.prototype = {
        __class__: zo
      };
      function lp() {}
      g["lime.media.OpenALAudioContext"] = lp;
      lp.__name__ = "lime.media.OpenALAudioContext";
      lp.prototype = {
        createContext: function (a, b) {
          return Wg.createContext(a, b);
        },
        makeContextCurrent: function (a) {
          return Wg.makeContextCurrent(a);
        },
        openDevice: function (a) {
          return Wg.openDevice(a);
        },
        processContext: function (a) {
          Wg.processContext(a);
        },
        __class__: lp
      };
      function Wg() {}
      g["lime.media.openal.ALC"] = Wg;
      Wg.__name__ = "lime.media.openal.ALC";
      Wg.createContext = function (a, b) {
        return null;
      };
      Wg.makeContextCurrent = function (a) {
        return false;
      };
      Wg.openDevice = function (a) {
        return null;
      };
      Wg.processContext = function (a) {};
      function $l() {}
      g["lime.net._IHTTPRequest"] = $l;
      $l.__name__ = "lime.net._IHTTPRequest";
      $l.__isInterface__ = true;
      $l.prototype = {
        __class__: $l
      };
      function Hf(a) {
        this.uri = a;
        this.contentType = "application/x-www-form-urlencoded";
        this.followRedirects = true;
        this.enableResponseHeaders = false;
        this.formData = new ua();
        this.headers = [];
        this.method = "GET";
        this.timeout = 30000;
        this.withCredentials = false;
        this.manageCookies = true;
        this.__backend = new Oa();
        this.__backend.init(this);
      }
      g["lime.net._HTTPRequest.AbstractHTTPRequest"] = Hf;
      Hf.__name__ = "lime.net._HTTPRequest.AbstractHTTPRequest";
      Hf.__interfaces__ = [$l];
      Hf.prototype = {
        __class__: Hf
      };
      function Xg(a) {
        Hf.call(this, a);
      }
      g["lime.net._HTTPRequest_Bytes"] = Xg;
      Xg.__name__ = "lime.net._HTTPRequest_Bytes";
      Xg.__super__ = Hf;
      Xg.prototype = q(Hf.prototype, {
        fromBytes: function (a) {
          return a;
        },
        load: function (a) {
          var b = this;
          if (a != null) {
            this.uri = a;
          }
          var c = new Id();
          a = this.__backend.loadData(this.uri);
          a.onProgress(m(c, c.progress));
          a.onError(function (a) {
            b.responseData = a.responseData;
            c.error(a.error);
          });
          a.onComplete(function (a) {
            b.responseData = b.fromBytes(a);
            c.complete(b.responseData);
          });
          return c.future;
        },
        __class__: Xg
      });
      function ui(a) {
        Hf.call(this, a);
      }
      g["lime.net._HTTPRequest_String"] = ui;
      ui.__name__ = "lime.net._HTTPRequest_String";
      ui.__super__ = Hf;
      ui.prototype = q(Hf.prototype, {
        load: function (a) {
          var b = this;
          if (a != null) {
            this.uri = a;
          }
          var c = new Id();
          a = this.__backend.loadText(this.uri);
          a.onProgress(m(c, c.progress));
          a.onError(function (a) {
            b.responseData = a.responseData;
            c.error(a.error);
          });
          a.onComplete(function (a) {
            b.responseData = a;
            c.complete(b.responseData);
          });
          return c.future;
        },
        __class__: ui
      });
      function pi(a, b) {
        this.error = a;
        this.responseData = b;
      }
      g["lime.net._HTTPRequestErrorResponse"] = pi;
      pi.__name__ = "lime.net._HTTPRequestErrorResponse";
      pi.prototype = {
        __class__: pi
      };
      function Vl(a, b) {
        if (b == null) {
          b = "";
        }
        this.name = a;
        this.value = b;
      }
      g["lime.net.HTTPRequestHeader"] = Vl;
      Vl.__name__ = "lime.net.HTTPRequestHeader";
      Vl.prototype = {
        __class__: Vl
      };
      function am(a) {
        Hf.call(this, a);
      }
      g["lime.net._HTTPRequest_lime_utils_Bytes"] = am;
      am.__name__ = "lime.net._HTTPRequest_lime_utils_Bytes";
      am.__super__ = Xg;
      am.prototype = q(Xg.prototype, {
        fromBytes: function (a) {
          return Ah.fromBytes(a);
        },
        __class__: am
      });
      function bm(a) {
        Hf.call(this, a);
      }
      g["lime.net._HTTPRequest_openfl_utils_ByteArray"] = bm;
      bm.__name__ = "lime.net._HTTPRequest_openfl_utils_ByteArray";
      bm.__super__ = Xg;
      bm.prototype = q(Xg.prototype, {
        fromBytes: function (a) {
          return Ne.fromBytes(a);
        },
        __class__: bm
      });
      function ic() {}
      g["lime.system.Clipboard"] = ic;
      ic.__name__ = "lime.system.Clipboard";
      ic.__properties__ = {
        set_text: "set_text",
        get_text: "get_text"
      };
      ic.__update = function () {
        var a = ic._text;
        ic._text = a;
        ic.__updated = true;
        if (ic._text != a) {
          ic.onUpdate.dispatch();
        }
      };
      ic.get_text = function () {
        ic.__update();
        return ic._text;
      };
      ic.set_text = function (a) {
        var b = ic._text;
        ic._text = a;
        var c = ia.current.__window;
        if (c != null) {
          c.__backend.setClipboard(a);
        }
        if (ic._text != b) {
          ic.onUpdate.dispatch();
        }
        return a;
      };
      var il = z["lime.system.Endian"] = {
        __ename__: "lime.system.Endian",
        __constructs__: null,
        LITTLE_ENDIAN: {
          _hx_name: "LITTLE_ENDIAN",
          _hx_index: 0,
          __enum__: "lime.system.Endian",
          toString: p
        },
        BIG_ENDIAN: {
          _hx_name: "BIG_ENDIAN",
          _hx_index: 1,
          __enum__: "lime.system.Endian",
          toString: p
        }
      };
      il.__constructs__ = [il.LITTLE_ENDIAN, il.BIG_ENDIAN];
      function He(a, b) {
        this.onUpdate = new oo();
        this.type = a;
        this.id = b;
      }
      g["lime.system.Sensor"] = He;
      He.__name__ = "lime.system.Sensor";
      He.getSensors = function (a) {
        if (a == null) {
          return He.sensors.slice();
        }
        var b = [];
        for (var c = 0, d = He.sensors; c < d.length;) {
          var e = d[c];
          ++c;
          if (e.type == a) {
            b.push(e);
          }
        }
        return b;
      };
      He.registerSensor = function (a, b) {
        a = new He(a, b);
        He.sensors.push(a);
        return He.sensorByID.h[b] = a;
      };
      He.prototype = {
        __class__: He
      };
      var Vo = z["lime.system.SensorType"] = {
        __ename__: "lime.system.SensorType",
        __constructs__: null,
        ACCELEROMETER: {
          _hx_name: "ACCELEROMETER",
          _hx_index: 0,
          __enum__: "lime.system.SensorType",
          toString: p
        }
      };
      Vo.__constructs__ = [Vo.ACCELEROMETER];
      function $c() {}
      g["lime.system.System"] = $c;
      $c.__name__ = "lime.system.System";
      $c.__properties__ = {
        get_endianness: "get_endianness"
      };
      $c.embed = x.lime.embed = function (a, b, c, d, e) {
        if ($c.__applicationEntryPoint != null && Object.prototype.hasOwnProperty.call($c.__applicationEntryPoint.h, a)) {
          var f = typeof b == "string" ? window.document.getElementById(b) : b == null ? window.document.createElement("div") : b;
          if (f == null) {
            window.console.log("[lime.embed] ERROR: Cannot find target element: " + v.string(b));
          } else {
            if (c == null) {
              c = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (e == null) {
              e = {};
            }
            if (Object.prototype.hasOwnProperty.call(e, "background") && typeof e.background == "string") {
              b = w.replace(v.string(e.background), "#", "");
              if (b.indexOf("0x") > -1) {
                e.background = v.parseInt(b);
              } else {
                e.background = v.parseInt("0x" + b);
              }
            }
            e.element = f;
            e.width = c;
            e.height = d;
            $c.__applicationEntryPoint.h[a](e);
          }
        }
      };
      $c.exit = function (a) {
        var b = ia.current;
        if (b != null && (b.onExit.dispatch(a), b.onExit.canceled)) {
          return;
        }
        if (b != null && b.__window != null) {
          b.__window.close();
        }
      };
      $c.getTimer = function () {
        return window.performance.now() | 0;
      };
      $c.openURL = function (a, b) {
        if (b == null) {
          b = "_blank";
        }
        if (a != null) {
          window.open(a, b);
        }
      };
      $c.__registerEntryPoint = function (a, b) {
        if ($c.__applicationEntryPoint == null) {
          $c.__applicationEntryPoint = new ua();
        }
        $c.__applicationEntryPoint.h[a] = b;
      };
      $c.get_endianness = function () {
        if ($c.__endianness == null) {
          var a = new ArrayBuffer(2);
          var b = null;
          var c = null;
          var d = null;
          var e = null;
          var f = null;
          var k = b = b != null ? new Uint8Array(b) : c != null ? new Uint8Array(c) : d != null ? new Uint8Array(d.__array) : e != null ? new Uint8Array(e) : a != null ? f == null ? new Uint8Array(a, 0) : new Uint8Array(a, 0, f) : null;
          f = e = d = c = b = null;
          b = b != null ? new Uint16Array(b) : c != null ? new Uint16Array(c) : d != null ? new Uint16Array(d.__array) : e != null ? new Uint16Array(e) : a != null ? f == null ? new Uint16Array(a, 0) : new Uint16Array(a, 0, f) : null;
          k[0] = 170;
          k[1] = 187;
          $c.__endianness = b[0] == 43707 ? il.BIG_ENDIAN : il.LITTLE_ENDIAN;
        }
        return $c.__endianness;
      };
      function no(a, b) {
        if (b == null) {
          b = 1;
        }
        if (a == null) {
          a = 0;
        }
        this.onRun = new si();
        this.onError = new si();
        this.onComplete = new si();
        this.doWork = new si();
        this.minThreads = a;
        this.maxThreads = b;
        this.currentThreads = 0;
      }
      g["lime.system.ThreadPool"] = no;
      no.__name__ = "lime.system.ThreadPool";
      no.prototype = {
        queue: function (a) {
          this.runWork(a);
        },
        sendComplete: function (a) {
          this.onComplete.dispatch(a);
        },
        sendError: function (a) {
          this.onError.dispatch(a);
        },
        runWork: function (a) {
          this.onRun.dispatch(a);
          this.doWork.dispatch(a);
        },
        __class__: no
      };
      function Co() {
        this.onSave = new Hj();
        this.onCancel = new Tc();
      }
      g["lime.ui.FileDialog"] = Co;
      Co.__name__ = "lime.ui.FileDialog";
      Co.prototype = {
        save: function (a, b, c, d, e) {
          if (e == null) {
            e = "application/octet-stream";
          }
          if (a == null) {
            this.onCancel.dispatch();
            return false;
          }
          b = "";
          if (Cb.__isPNG(a)) {
            e = "image/png";
            b = ".png";
          } else if (Cb.__isJPG(a)) {
            e = "image/jpeg";
            b = ".jpg";
          } else if (Cb.__isGIF(a)) {
            e = "image/gif";
            b = ".gif";
          } else if (Cb.__isWebP(a)) {
            e = "image/webp";
            b = ".webp";
          }
          c = c != null ? Kc.withoutDirectory(c) : "download" + b;
          b = a.b.bufferValue;
          b = b.slice(0, a.length);
          window.saveAs(new Blob([b], {
            type: e
          }), c, true);
          this.onSave.dispatch(c);
          return true;
        },
        __class__: Co
      };
      function Qc(a) {
        this.onDisconnect = new Tc();
        this.onButtonUp = new Yl();
        this.onButtonDown = new Yl();
        this.onAxisMove = new wo();
        this.id = a;
        this.connected = true;
      }
      g["lime.ui.Gamepad"] = Qc;
      Qc.__name__ = "lime.ui.Gamepad";
      Qc.__connect = function (a) {
        if (!Qc.devices.h.hasOwnProperty(a)) {
          var b = new Qc(a);
          Qc.devices.h[a] = b;
          Qc.onConnect.dispatch(b);
        }
      };
      Qc.__disconnect = function (a) {
        var b = Qc.devices.h[a];
        if (b != null) {
          b.connected = false;
        }
        Qc.devices.remove(a);
        if (b != null) {
          b.onDisconnect.dispatch();
        }
      };
      Qc.prototype = {
        __class__: Qc
      };
      function Mc(a) {
        this.onTrackballMove = new so();
        this.onHatMove = new uo();
        this.onDisconnect = new Tc();
        this.onButtonUp = new fh();
        this.onButtonDown = new fh();
        this.onAxisMove = new to();
        this.id = a;
        this.connected = true;
      }
      g["lime.ui.Joystick"] = Mc;
      Mc.__name__ = "lime.ui.Joystick";
      Mc.__connect = function (a) {
        if (!Mc.devices.h.hasOwnProperty(a)) {
          var b = new Mc(a);
          Mc.devices.h[a] = b;
          Mc.onConnect.dispatch(b);
        }
      };
      Mc.__disconnect = function (a) {
        var b = Mc.devices.h[a];
        if (b != null) {
          b.connected = false;
        }
        Mc.devices.remove(a);
        if (b != null) {
          b.onDisconnect.dispatch();
        }
      };
      Mc.__getDeviceData = function () {
        var a = null;
        try {
          a = navigator.getGamepads ? navigator.getGamepads() : navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : null;
        } catch (b) {
          Pa.lastError = b;
        }
        return a;
      };
      Mc.prototype = {
        __class__: Mc
      };
      var Ob = {
        __properties__: {
          get_shiftKey: "get_shiftKey",
          get_metaKey: "get_metaKey",
          get_ctrlKey: "get_ctrlKey",
          get_altKey: "get_altKey"
        },
        get_altKey: function (a) {
          if ((a & 256) <= 0) {
            return (a & 512) > 0;
          } else {
            return true;
          }
        },
        get_ctrlKey: function (a) {
          if ((a & 64) <= 0) {
            return (a & 128) > 0;
          } else {
            return true;
          }
        },
        get_metaKey: function (a) {
          if ((a & 1024) <= 0) {
            return (a & 2048) > 0;
          } else {
            return true;
          }
        },
        get_shiftKey: function (a) {
          if ((a & 1) <= 0) {
            return (a & 2) > 0;
          } else {
            return true;
          }
        }
      };
      var Qb = z["lime.ui.MouseCursor"] = {
        __ename__: "lime.ui.MouseCursor",
        __constructs__: null,
        ARROW: {
          _hx_name: "ARROW",
          _hx_index: 0,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        CROSSHAIR: {
          _hx_name: "CROSSHAIR",
          _hx_index: 1,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        DEFAULT: {
          _hx_name: "DEFAULT",
          _hx_index: 2,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        MOVE: {
          _hx_name: "MOVE",
          _hx_index: 3,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        POINTER: {
          _hx_name: "POINTER",
          _hx_index: 4,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        RESIZE_NESW: {
          _hx_name: "RESIZE_NESW",
          _hx_index: 5,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        RESIZE_NS: {
          _hx_name: "RESIZE_NS",
          _hx_index: 6,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        RESIZE_NWSE: {
          _hx_name: "RESIZE_NWSE",
          _hx_index: 7,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        RESIZE_WE: {
          _hx_name: "RESIZE_WE",
          _hx_index: 8,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        TEXT: {
          _hx_name: "TEXT",
          _hx_index: 9,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        WAIT: {
          _hx_name: "WAIT",
          _hx_index: 10,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        WAIT_ARROW: {
          _hx_name: "WAIT_ARROW",
          _hx_index: 11,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        CUSTOM: {
          _hx_name: "CUSTOM",
          _hx_index: 12,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        }
      };
      Qb.__constructs__ = [Qb.ARROW, Qb.CROSSHAIR, Qb.DEFAULT, Qb.MOVE, Qb.POINTER, Qb.RESIZE_NESW, Qb.RESIZE_NS, Qb.RESIZE_NWSE, Qb.RESIZE_WE, Qb.TEXT, Qb.WAIT, Qb.WAIT_ARROW, Qb.CUSTOM];
      var Vg = z["lime.ui.MouseWheelMode"] = {
        __ename__: "lime.ui.MouseWheelMode",
        __constructs__: null,
        PIXELS: {
          _hx_name: "PIXELS",
          _hx_index: 0,
          __enum__: "lime.ui.MouseWheelMode",
          toString: p
        },
        LINES: {
          _hx_name: "LINES",
          _hx_index: 1,
          __enum__: "lime.ui.MouseWheelMode",
          toString: p
        },
        PAGES: {
          _hx_name: "PAGES",
          _hx_index: 2,
          __enum__: "lime.ui.MouseWheelMode",
          toString: p
        },
        UNKNOWN: {
          _hx_name: "UNKNOWN",
          _hx_index: 3,
          __enum__: "lime.ui.MouseWheelMode",
          toString: p
        }
      };
      Vg.__constructs__ = [Vg.PIXELS, Vg.LINES, Vg.PAGES, Vg.UNKNOWN];
      function Dc(a, b, c, d, e, f, k) {
        this.x = a;
        this.y = b;
        this.id = c;
        this.dx = d;
        this.dy = e;
        this.pressure = f;
        this.device = k;
      }
      g["lime.ui.Touch"] = Dc;
      Dc.__name__ = "lime.ui.Touch";
      Dc.prototype = {
        __class__: Dc
      };
      function vi(a, b) {
        this.clickCount = 0;
        this.onTextInput = new Hj();
        this.onTextEdit = new vo();
        this.onRestore = new Tc();
        this.onResize = new Wl();
        this.onRenderContextRestored = new Xl();
        this.onRenderContextLost = new Tc();
        this.onRender = new Xl();
        this.onMove = new Gj();
        this.onMouseWheel = new ro();
        this.onMouseUp = new po();
        this.onMouseMoveRelative = new Gj();
        this.onMouseMove = new Gj();
        this.onMouseDown = new qo();
        this.onMinimize = new Tc();
        this.onLeave = new Tc();
        this.onKeyUp = new Zl();
        this.onKeyDown = new Zl();
        this.onFullscreen = new Tc();
        this.onFocusOut = new Tc();
        this.onFocusIn = new Tc();
        this.onExpose = new Tc();
        this.onEnter = new Tc();
        this.onDropFile = new Hj();
        this.onDeactivate = new Tc();
        this.onClose = new Tc();
        this.onActivate = new Tc();
        this.application = a;
        this.__attributes = b ?? {};
        if (Object.prototype.hasOwnProperty.call(this.__attributes, "parameters")) {
          this.parameters = this.__attributes.parameters;
        }
        this.__height = this.__width = 0;
        this.__fullscreen = false;
        this.__scale = 1;
        this.__y = this.__x = 0;
        this.__title = Object.prototype.hasOwnProperty.call(this.__attributes, "title") ? this.__attributes.title : "";
        this.id = -1;
        this.__backend = new Za(this);
      }
      g["lime.ui.Window"] = vi;
      vi.__name__ = "lime.ui.Window";
      vi.prototype = {
        close: function () {
          this.__backend.close();
        },
        set_cursor: function (a) {
          return this.__backend.setCursor(a);
        },
        set_fullscreen: function (a) {
          return this.__fullscreen = this.__backend.setFullscreen(a);
        },
        setTextInputRect: function (a) {
          return this.__backend.setTextInputRect(a);
        },
        __class__: vi,
        __properties__: {
          set_fullscreen: "set_fullscreen",
          set_cursor: "set_cursor"
        }
      };
      function If() {
        this.data = new ua();
        this.paths = [];
      }
      g["lime.utils.AssetBundle"] = If;
      If.__name__ = "lime.utils.AssetBundle";
      If.fromBytes = function (a) {
        a = new Cj(a);
        return If.__extractBundle(a);
      };
      If.loadFromBytes = function (a) {
        return Bb.withValue(If.fromBytes(a));
      };
      If.loadFromFile = function (a) {
        return Ah.loadFromFile(a).then(If.loadFromBytes);
      };
      If.__extractBundle = function (a) {
        var b = ji.readZip(a);
        a = new If();
        for (b = b.h; b != null;) {
          var c = b.item;
          b = b.next;
          if (c.compressed) {
            var d = a.data;
            var e = c.fileName;
            var f = Ah.decompress(c.data, cm.DEFLATE);
            d.h[e] = f;
          } else {
            a.data.h[c.fileName] = c.data;
          }
          a.paths.push(c.fileName);
        }
        return a;
      };
      If.prototype = {
        __class__: If
      };
      function Do() {
        this.enabled = true;
        this.audio = new ua();
        this.font = new ua();
        this.image = new ua();
        this.version = 334434;
      }
      g["lime.utils.AssetCache"] = Do;
      Do.__name__ = "lime.utils.AssetCache";
      Do.prototype = {
        exists: function (a, b) {
          if ((b == "IMAGE" || b == null) && Object.prototype.hasOwnProperty.call(this.image.h, a) || (b == "FONT" || b == null) && Object.prototype.hasOwnProperty.call(this.font.h, a) || (b == "SOUND" || b == "MUSIC" || b == null) && Object.prototype.hasOwnProperty.call(this.audio.h, a)) {
            return true;
          } else {
            return false;
          }
        },
        set: function (a, b, c) {
          switch (b) {
            case "FONT":
              this.font.h[a] = c;
              break;
            case "IMAGE":
              if (!(c instanceof Cb)) {
                throw G.thrown("Cannot cache non-Image asset: " + v.string(c) + " as Image");
              }
              this.image.h[a] = c;
              break;
            case "MUSIC":
            case "SOUND":
              if (!(c instanceof Zc)) {
                throw G.thrown("Cannot cache non-AudioBuffer asset: " + v.string(c) + " as AudioBuffer");
              }
              this.audio.h[a] = c;
              break;
            default:
              throw G.thrown(b + " assets are not cachable");
          }
        },
        clear: function (a) {
          if (a == null) {
            this.audio = new ua();
            this.font = new ua();
            this.image = new ua();
          } else {
            var b = this.audio.h;
            b = Object.keys(b);
            for (var c = b.length, d = 0; d < c;) {
              var e = b[d++];
              if (w.startsWith(e, a)) {
                var f = this.audio;
                if (Object.prototype.hasOwnProperty.call(f.h, e)) {
                  delete f.h[e];
                }
              }
            }
            b = this.font.h;
            b = Object.keys(b);
            c = b.length;
            for (d = 0; d < c;) {
              e = b[d++];
              if (w.startsWith(e, a)) {
                f = this.font;
                if (Object.prototype.hasOwnProperty.call(f.h, e)) {
                  delete f.h[e];
                }
              }
            }
            b = this.image.h;
            b = Object.keys(b);
            c = b.length;
            for (d = 0; d < c;) {
              e = b[d++];
              if (w.startsWith(e, a)) {
                f = this.image;
                if (Object.prototype.hasOwnProperty.call(f.h, e)) {
                  delete f.h[e];
                }
              }
            }
          }
        },
        __class__: Do
      };
      function hc() {
        this.types = new ua();
        this.sizes = new ua();
        this.preload = new ua();
        this.paths = new ua();
        this.pathGroups = new ua();
        this.classTypes = new ua();
        this.cachedText = new ua();
        this.cachedImages = new ua();
        this.cachedFonts = new ua();
        this.cachedBytes = new ua();
        this.cachedAudioBuffers = new ua();
        this.onChange = new Tc();
        this.bytesTotal = this.bytesLoaded = 0;
      }
      g["lime.utils.AssetLibrary"] = hc;
      hc.__name__ = "lime.utils.AssetLibrary";
      hc.fromBundle = function (a) {
        if (Object.prototype.hasOwnProperty.call(a.data.h, "library.json")) {
          var b = Rd.fromBytes(a.data.h["library.json"]);
          if (b != null) {
            if (b.libraryType == null) {
              var c = new hc();
            } else {
              c = g[b.libraryType];
              if (c != null) {
                c = yb.createInstance(c, b.libraryArgs);
              } else {
                Va.warn("Could not find library type: " + b.libraryType, {
                  fileName: "lime/utils/AssetLibrary.hx",
                  lineNumber: 122,
                  className: "lime.utils.AssetLibrary",
                  methodName: "fromBundle"
                });
                return null;
              }
            }
            c.__fromBundle(a, b);
            return c;
          }
        } else {
          c = new hc();
          c.__fromBundle(a);
          return c;
        }
        return null;
      };
      hc.fromManifest = function (a) {
        if (a == null) {
          return null;
        }
        if (a.libraryType == null) {
          var b = new hc();
        } else {
          b = g[a.libraryType];
          if (b != null) {
            b = yb.createInstance(b, a.libraryArgs);
          } else {
            Va.warn("Could not find library type: " + a.libraryType, {
              fileName: "lime/utils/AssetLibrary.hx",
              lineNumber: 160,
              className: "lime.utils.AssetLibrary",
              methodName: "fromManifest"
            });
            return null;
          }
        }
        b.__fromManifest(a);
        return b;
      };
      hc.prototype = {
        exists: function (a, b) {
          b = b != null ? va.__cast(b, String) : null;
          a = this.types.h[a];
          if (a == null || a != b && (b != "SOUND" && b != "MUSIC" || a != "MUSIC" && a != "SOUND") && b != "BINARY" && b != null && (a != "BINARY" || b != "TEXT")) {
            return false;
          } else {
            return true;
          }
        },
        getAsset: function (a, b) {
          switch (b) {
            case "BINARY":
              return this.getBytes(a);
            case "FONT":
              return this.getFont(a);
            case "IMAGE":
              return this.getImage(a);
            case "MUSIC":
            case "SOUND":
              return this.getAudioBuffer(a);
            case "TEMPLATE":
              throw G.thrown("Not sure how to get template: " + a);
            case "TEXT":
              return this.getText(a);
            default:
              throw G.thrown("Unknown asset type: " + b);
          }
        },
        getAudioBuffer: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a)) {
            return this.cachedAudioBuffers.h[a];
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return Zc.fromBytes(va.__cast(yb.createInstance(this.classTypes.h[a], []), Yb));
          } else {
            return Zc.fromFile(this.getPath(a));
          }
        },
        getBytes: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a)) {
            return this.cachedBytes.h[a];
          }
          if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) {
            var b = Ah.ofString(this.cachedText.h[a]);
            return this.cachedBytes.h[a] = b;
          }
          if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return va.__cast(yb.createInstance(this.classTypes.h[a], []), Yb);
          } else {
            return Ah.fromFile(this.getPath(a));
          }
        },
        getFont: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a)) {
            return this.cachedFonts.h[a];
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return va.__cast(yb.createInstance(this.classTypes.h[a], []), Ja);
          } else {
            return Ja.fromFile(this.getPath(a));
          }
        },
        getImage: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedImages.h, a)) {
            return this.cachedImages.h[a];
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return va.__cast(yb.createInstance(this.classTypes.h[a], []), Cb);
          } else {
            return Cb.fromFile(this.getPath(a));
          }
        },
        getPath: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.paths.h, a)) {
            return this.paths.h[a];
          } else if (Object.prototype.hasOwnProperty.call(this.pathGroups.h, a)) {
            return this.pathGroups.h[a][0];
          } else {
            return null;
          }
        },
        getText: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) {
            return this.cachedText.h[a];
          }
          a = this.getBytes(a);
          if (a == null) {
            return null;
          } else {
            return a.getString(0, a.length);
          }
        },
        isLocal: function (a, b) {
          if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return true;
          }
          b = va.__cast(b, String);
          if (b == null) {
            if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) || Object.prototype.hasOwnProperty.call(this.cachedText.h, a) || Object.prototype.hasOwnProperty.call(this.cachedImages.h, a) || Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a)) {
              return true;
            } else {
              return Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a);
            }
          }
          switch (b) {
            case "FONT":
              return Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a);
            case "IMAGE":
              return Object.prototype.hasOwnProperty.call(this.cachedImages.h, a);
            case "MUSIC":
            case "SOUND":
              return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a);
            default:
              if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a)) {
                return true;
              } else {
                return Object.prototype.hasOwnProperty.call(this.cachedText.h, a);
              }
          }
        },
        list: function (a) {
          var b = a != null ? va.__cast(a, String) : null;
          var c = [];
          var d = Object.keys(this.types.h);
          for (var e = d.length, f = 0; f < e;) {
            var k = d[f++];
            if (b == null || this.exists(k, a)) {
              c.push(k);
            }
          }
          return c;
        },
        loadAsset: function (a, b) {
          switch (b) {
            case "BINARY":
              return this.loadBytes(a);
            case "FONT":
              return this.loadFont(a);
            case "IMAGE":
              return this.loadImage(a);
            case "MUSIC":
            case "SOUND":
              return this.loadAudioBuffer(a);
            case "TEMPLATE":
              throw G.thrown("Not sure how to load template: " + a);
            case "TEXT":
              return this.loadText(a);
            default:
              throw G.thrown("Unknown asset type: " + b);
          }
        },
        load: function () {
          if (this.loaded) {
            return Bb.withValue(this);
          }
          if (this.promise == null) {
            this.promise = new Id();
            this.bytesLoadedCache = new ua();
            this.assetsLoaded = 0;
            this.assetsTotal = 1;
            var a = Object.keys(this.preload.h);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              if (this.preload.h[d]) {
                Va.verbose("Preloading asset: " + d + " [" + this.types.h[d] + "]", {
                  fileName: "lime/utils/AssetLibrary.hx",
                  lineNumber: 408,
                  className: "lime.utils.AssetLibrary",
                  methodName: "load"
                });
                var e = this.types.h[d];
                if (e != null) {
                  switch (e) {
                    case "BINARY":
                      this.assetsTotal++;
                      e = this.loadBytes(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].load_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadBytes_onComplete(a[0], c);
                        };
                      }([d], [this]));
                      break;
                    case "FONT":
                      this.assetsTotal++;
                      e = this.loadFont(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].load_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadFont_onComplete(a[0], c);
                        };
                      }([d], [this]));
                      break;
                    case "IMAGE":
                      this.assetsTotal++;
                      e = this.loadImage(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].load_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadImage_onComplete(a[0], c);
                        };
                      }([d], [this]));
                      break;
                    case "MUSIC":
                    case "SOUND":
                      this.assetsTotal++;
                      e = this.loadAudioBuffer(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].loadAudioBuffer_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadAudioBuffer_onComplete(a[0], c);
                        };
                      }([d], [this]));
                      break;
                    case "TEXT":
                      this.assetsTotal++;
                      e = this.loadText(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].load_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadText_onComplete(a[0], c);
                        };
                      }([d], [this]));
                  }
                }
              }
            }
            this.__assetLoaded(null);
          }
          return this.promise.future;
        },
        loadAudioBuffer: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a)) {
            return Bb.withValue(this.cachedAudioBuffers.h[a]);
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return Bb.withValue(Zc.fromBytes(va.__cast(yb.createInstance(this.classTypes.h[a], []), Yb)));
          } else if (Object.prototype.hasOwnProperty.call(this.pathGroups.h, a)) {
            return Zc.loadFromFiles(this.pathGroups.h[a]);
          } else {
            return Zc.loadFromFile(this.paths.h[a]);
          }
        },
        loadBytes: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a)) {
            return Bb.withValue(this.cachedBytes.h[a]);
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return Bb.withValue(yb.createInstance(this.classTypes.h[a], []));
          } else {
            return Ah.loadFromFile(this.getPath(a));
          }
        },
        loadFont: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a)) {
            return Bb.withValue(this.cachedFonts.h[a]);
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            a = yb.createInstance(this.classTypes.h[a], []);
            return a.__loadFromName(a.name);
          } else {
            return Ja.loadFromName(this.getPath(a));
          }
        },
        loadImage: function (a) {
          var b = this;
          if (Object.prototype.hasOwnProperty.call(this.cachedImages.h, a)) {
            return Bb.withValue(this.cachedImages.h[a]);
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return Bb.withValue(yb.createInstance(this.classTypes.h[a], []));
          } else if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a)) {
            return Cb.loadFromBytes(this.cachedBytes.h[a]).then(function (c) {
              var d = b.cachedBytes;
              if (Object.prototype.hasOwnProperty.call(d.h, a)) {
                delete d.h[a];
              }
              b.cachedImages.h[a] = c;
              return Bb.withValue(c);
            });
          } else {
            return Cb.loadFromFile(this.getPath(a));
          }
        },
        loadText: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) {
            return Bb.withValue(this.cachedText.h[a]);
          }
          if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) || Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            var b = this.getBytes(a);
            if (b == null) {
              return Bb.withValue(null);
            }
            b = b.getString(0, b.length);
            this.cachedText.h[a] = b;
            return Bb.withValue(b);
          }
          return new ui().load(this.getPath(a));
        },
        unload: function () {
          this.cachedBytes.h = Object.create(null);
          this.cachedFonts.h = Object.create(null);
          this.cachedImages.h = Object.create(null);
          this.cachedAudioBuffers.h = Object.create(null);
          this.cachedText.h = Object.create(null);
        },
        __assetLoaded: function (a) {
          this.assetsLoaded++;
          if (a != null) {
            Va.verbose("Loaded asset: " + a + " [" + this.types.h[a] + "] (" + (this.assetsLoaded - 1) + "/" + (this.assetsTotal - 1) + ")", {
              fileName: "lime/utils/AssetLibrary.hx",
              lineNumber: 637,
              className: "lime.utils.AssetLibrary",
              methodName: "__assetLoaded"
            });
          }
          if (a != null) {
            var b = Object.prototype.hasOwnProperty.call(this.sizes.h, a) ? this.sizes.h[a] : 0;
            if (Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h, a)) {
              var c = this.bytesLoadedCache.h[a];
              if (c < b) {
                this.bytesLoaded += b - c;
              }
            } else {
              this.bytesLoaded += b;
            }
            this.bytesLoadedCache.h[a] = b;
          }
          if (this.assetsLoaded < this.assetsTotal) {
            this.promise.progress(this.bytesLoaded, this.bytesTotal);
          } else {
            this.loaded = true;
            this.promise.progress(this.bytesTotal, this.bytesTotal);
            this.promise.complete(this);
          }
        },
        __cacheBreak: function (a) {
          return sa.__cacheBreak(a);
        },
        __fromBundle: function (a, b) {
          if (b != null) {
            var c = 0;
            for (b = b.assets; c < b.length;) {
              var d = b[c];
              ++c;
              var e = Object.prototype.hasOwnProperty.call(d, "id") ? d.id : d.path;
              var f = a.data.h[d.path];
              if (Object.prototype.hasOwnProperty.call(d, "type")) {
                var k = d.type;
                if (k == "TEXT") {
                  this.cachedText.h[e] = f != null ? v.string(f) : null;
                } else {
                  this.cachedBytes.h[e] = f;
                }
                this.types.h[e] = d.type;
              } else {
                this.cachedBytes.h[e] = f;
                this.types.h[e] = "BINARY";
              }
            }
          } else {
            c = 0;
            b = a.paths;
            while (c < b.length) {
              e = b[c];
              ++c;
              this.cachedBytes.h[e] = a.data.h[e];
              this.types.h[e] = "BINARY";
            }
          }
        },
        __fromManifest: function (a) {
          var b = a.version >= 2;
          var c = a.rootPath;
          if (c == null) {
            c = "";
          }
          if (c != "") {
            c += "/";
          }
          for (var d = 0, e = a.assets; d < e.length;) {
            var f = e[d];
            ++d;
            var k = b && Object.prototype.hasOwnProperty.call(f, "size") ? f.size : 100;
            var h = Object.prototype.hasOwnProperty.call(f, "id") ? f.id : f.path;
            if (Object.prototype.hasOwnProperty.call(f, "path")) {
              var n = this.paths;
              var p = this.__cacheBreak(this.__resolvePath(c + v.string(ja.field(f, "path"))));
              n.h[h] = p;
            }
            if (Object.prototype.hasOwnProperty.call(f, "pathGroup")) {
              n = ja.field(f, "pathGroup");
              p = 0;
              for (var m = n.length; p < m;) {
                var l = p++;
                n[l] = this.__cacheBreak(this.__resolvePath(c + n[l]));
              }
              this.pathGroups.h[h] = n;
            }
            this.sizes.h[h] = k;
            this.types.h[h] = f.type;
            if (Object.prototype.hasOwnProperty.call(f, "preload")) {
              this.preload.h[h] = ja.field(f, "preload");
            }
            if (Object.prototype.hasOwnProperty.call(f, "className")) {
              k = ja.field(f, "className");
              k = g[k];
              this.classTypes.h[h] = k;
            }
          }
          d = this.bytesTotal = 0;
          for (e = a.assets; d < e.length;) {
            f = e[d];
            ++d;
            h = Object.prototype.hasOwnProperty.call(f, "id") ? f.id : f.path;
            if (Object.prototype.hasOwnProperty.call(this.preload.h, h) && this.preload.h[h] && Object.prototype.hasOwnProperty.call(this.sizes.h, h)) {
              this.bytesTotal += this.sizes.h[h];
            }
          }
        },
        __resolvePath: function (a) {
          a = w.replace(a, "\\", "/");
          var b = a.indexOf(":");
          if (w.startsWith(a, "http") && b > 0) {
            b += 3;
            a = r.substr(a, 0, b) + w.replace(r.substr(a, b, null), "//", "/");
          } else {
            a = w.replace(a, "//", "/");
          }
          if (a.indexOf("./") > -1) {
            a = a.split("/");
            b = [];
            for (var c = 0, d = a.length; c < d;) {
              var e = c++;
              if (a[e] == "..") {
                if (e == 0 || b[e - 1] == "..") {
                  b.push("..");
                } else {
                  b.pop();
                }
              } else if (a[e] == ".") {
                if (e == 0) {
                  b.push(".");
                }
              } else {
                b.push(a[e]);
              }
            }
            a = b.join("/");
          }
          return a;
        },
        loadAudioBuffer_onComplete: function (a, b) {
          this.cachedAudioBuffers.h[a] = b;
          if (Object.prototype.hasOwnProperty.call(this.pathGroups.h, a)) {
            var c = this.pathGroups.h[a];
            var d = Object.keys(this.pathGroups.h);
            for (var e = d.length, f = 0; f < e;) {
              var k = d[f++];
              if (k != a) {
                for (var h = 0; h < c.length;) {
                  var n = c[h];
                  ++h;
                  if (this.pathGroups.h[k].indexOf(n) > -1) {
                    this.cachedAudioBuffers.h[k] = b;
                    break;
                  }
                }
              }
            }
          }
          this.__assetLoaded(a);
        },
        loadAudioBuffer_onError: function (a, b) {
          if (b != null && b != "") {
            Va.warn("Could not load \"" + a + "\": " + v.string(b), {
              fileName: "lime/utils/AssetLibrary.hx",
              lineNumber: 883,
              className: "lime.utils.AssetLibrary",
              methodName: "loadAudioBuffer_onError"
            });
          } else {
            Va.warn("Could not load \"" + a + "\"", {
              fileName: "lime/utils/AssetLibrary.hx",
              lineNumber: 887,
              className: "lime.utils.AssetLibrary",
              methodName: "loadAudioBuffer_onError"
            });
          }
          this.loadAudioBuffer_onComplete(a, new Zc());
        },
        loadBytes_onComplete: function (a, b) {
          this.cachedBytes.h[a] = b;
          this.__assetLoaded(a);
        },
        loadFont_onComplete: function (a, b) {
          this.cachedFonts.h[a] = b;
          this.__assetLoaded(a);
        },
        loadImage_onComplete: function (a, b) {
          this.cachedImages.h[a] = b;
          this.__assetLoaded(a);
        },
        loadText_onComplete: function (a, b) {
          this.cachedText.h[a] = b;
          this.__assetLoaded(a);
        },
        load_onError: function (a, b) {
          if (b != null && b != "") {
            this.promise.error("Error loading asset \"" + a + "\": " + v.string(b));
          } else {
            this.promise.error("Error loading asset \"" + a + "\"");
          }
        },
        load_onProgress: function (a, b, c) {
          if (b > 0) {
            var d = this.sizes.h[a];
            if (c > 0) {
              b /= c;
              if (b > 1) {
                b = 1;
              }
              b = Math.floor(b * d);
            } else if (b > d) {
              b = d;
            }
            if (Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h, a)) {
              d = this.bytesLoadedCache.h[a];
              if (b != d) {
                this.bytesLoaded += b - d;
              }
            } else {
              this.bytesLoaded += b;
            }
            this.bytesLoadedCache.h[a] = b;
            this.promise.progress(this.bytesLoaded, this.bytesTotal);
          }
        },
        __class__: hc
      };
      function Rd() {
        this.assets = [];
        this.libraryArgs = [];
        this.version = 2;
      }
      g["lime.utils.AssetManifest"] = Rd;
      Rd.__name__ = "lime.utils.AssetManifest";
      Rd.fromBytes = function (a, b) {
        if (a != null) {
          return Rd.parse(a.getString(0, a.length), b);
        } else {
          return null;
        }
      };
      Rd.loadFromFile = function (a, b) {
        a = Rd.__resolvePath(a);
        b = Rd.__resolveRootPath(b, a);
        if (a == null) {
          return null;
        } else {
          return Ah.loadFromFile(a).then(function (a) {
            return Bb.withValue(Rd.fromBytes(a, b));
          });
        }
      };
      Rd.parse = function (a, b) {
        if (a == null || a == "") {
          return null;
        }
        a = JSON.parse(a);
        var c = new Rd();
        if (Object.prototype.hasOwnProperty.call(a, "name")) {
          c.name = a.name;
        }
        if (Object.prototype.hasOwnProperty.call(a, "libraryType")) {
          c.libraryType = a.libraryType;
        }
        if (Object.prototype.hasOwnProperty.call(a, "libraryArgs")) {
          c.libraryArgs = a.libraryArgs;
        }
        if (Object.prototype.hasOwnProperty.call(a, "assets")) {
          var d = a.assets;
          if (Object.prototype.hasOwnProperty.call(a, "version") && a.version <= 2) {
            c.assets = $d.run(d);
          } else {
            c.assets = d;
          }
        }
        if (Object.prototype.hasOwnProperty.call(a, "rootPath")) {
          c.rootPath = a.rootPath;
        }
        if (b != null && b != "") {
          c.rootPath = c.rootPath == null || c.rootPath == "" ? b : b + "/" + c.rootPath;
        }
        return c;
      };
      Rd.__resolvePath = function (a) {
        if (a == null) {
          return null;
        }
        var b = a.indexOf("?");
        var c = b > -1 ? r.substr(a, 0, b) : a;
        for (c = w.replace(c, "\\", "/"); w.endsWith(c, "/");) {
          c = r.substr(c, 0, c.length - 1);
        }
        if (w.endsWith(c, ".bundle")) {
          if (b > -1) {
            return c + "/library.json" + r.substr(a, b, null);
          } else {
            return c + "/library.json";
          }
        } else {
          return a;
        }
      };
      Rd.__resolveRootPath = function (a, b) {
        if (a != null) {
          return a;
        }
        a = b.indexOf("?");
        a = a > -1 ? r.substr(b, 0, a) : b;
        for (a = w.replace(a, "\\", "/"); w.endsWith(a, "/");) {
          if (a == "/") {
            return a;
          }
          a = r.substr(a, 0, a.length - 1);
        }
        if (w.endsWith(a, ".bundle")) {
          return a;
        } else {
          return Kc.directory(a);
        }
      };
      Rd.prototype = {
        __class__: Rd
      };
      function sa() {}
      g["lime.utils.Assets"] = sa;
      sa.__name__ = "lime.utils.Assets";
      sa.exists = function (a, b) {
        if (b == null) {
          b = "BINARY";
        }
        var c = a.indexOf(":");
        var d = a.substring(0, c);
        a = a.substring(c + 1);
        d = sa.getLibrary(d);
        if (d != null) {
          return d.exists(a, b);
        } else {
          return false;
        }
      };
      sa.getAsset = function (a, b, c) {
        if (c && sa.cache.enabled) {
          switch (b) {
            case "FONT":
              var d = sa.cache.font.h[a];
              if (d != null) {
                return d;
              }
              break;
            case "IMAGE":
              d = sa.cache.image.h[a];
              if (sa.isValidImage(d)) {
                return d;
              }
              break;
            case "MUSIC":
            case "SOUND":
              d = sa.cache.audio.h[a];
              if (sa.isValidAudio(d)) {
                return d;
              }
              break;
            case "TEMPLATE":
              throw G.thrown("Not sure how to get template: " + a);
            case "BINARY":
            case "TEXT":
              c = false;
              break;
            default:
              return null;
          }
        }
        var e = a.indexOf(":");
        d = a.substring(0, e);
        e = a.substring(e + 1);
        var f = sa.getLibrary(d);
        if (f != null) {
          if (f.exists(e, b)) {
            if (f.isLocal(e, b)) {
              d = f.getAsset(e, b);
              if (c && sa.cache.enabled) {
                sa.cache.set(a, b, d);
              }
              return d;
            }
            Va.error(b + " asset \"" + a + "\" exists, but only asynchronously", {
              fileName: "lime/utils/Assets.hx",
              lineNumber: 133,
              className: "lime.utils.Assets",
              methodName: "getAsset"
            });
          } else {
            Va.error("There is no " + b + " asset with an ID of \"" + a + "\"", {
              fileName: "lime/utils/Assets.hx",
              lineNumber: 138,
              className: "lime.utils.Assets",
              methodName: "getAsset"
            });
          }
        } else {
          Va.error(sa.__libraryNotFound(d), {
            fileName: "lime/utils/Assets.hx",
            lineNumber: 143,
            className: "lime.utils.Assets",
            methodName: "getAsset"
          });
        }
        return null;
      };
      sa.getAudioBuffer = function (a, b) {
        if (b == null) {
          b = true;
        }
        return sa.getAsset(a, "SOUND", b);
      };
      sa.getBytes = function (a) {
        return sa.getAsset(a, "BINARY", false);
      };
      sa.getFont = function (a, b) {
        if (b == null) {
          b = true;
        }
        return sa.getAsset(a, "FONT", b);
      };
      sa.getImage = function (a, b) {
        if (b == null) {
          b = true;
        }
        return sa.getAsset(a, "IMAGE", b);
      };
      sa.getLibrary = function (a) {
        if (a == null || a == "") {
          a = "default";
        }
        return sa.libraries.h[a];
      };
      sa.getText = function (a) {
        return sa.getAsset(a, "TEXT", false);
      };
      sa.hasLibrary = function (a) {
        if (a == null || a == "") {
          a = "default";
        }
        return Object.prototype.hasOwnProperty.call(sa.libraries.h, a);
      };
      sa.isLocal = function (a, b, c) {
        if (c == null) {
          c = true;
        }
        if (c && sa.cache.enabled && sa.cache.exists(a, b)) {
          return true;
        }
        var d = a.indexOf(":");
        c = a.substring(0, d);
        a = a.substring(d + 1);
        c = sa.getLibrary(c);
        if (c != null) {
          return c.isLocal(a, b);
        } else {
          return false;
        }
      };
      sa.isValidAudio = function (a) {
        return a != null;
      };
      sa.isValidImage = function (a) {
        if (a != null) {
          return a.buffer != null;
        } else {
          return false;
        }
      };
      sa.list = function (a) {
        var b = [];
        var c = sa.libraries.h;
        var d = Object.keys(c);
        for (var e = d.length, f = 0; f < e;) {
          var k = c[d[f++]].list(a);
          if (k != null) {
            b = b.concat(k);
          }
        }
        return b;
      };
      sa.loadAsset = function (a, b, c) {
        if (c && sa.cache.enabled) {
          switch (b) {
            case "FONT":
              var d = sa.cache.font.h[a];
              if (d != null) {
                return Bb.withValue(d);
              }
              break;
            case "IMAGE":
              d = sa.cache.image.h[a];
              if (sa.isValidImage(d)) {
                return Bb.withValue(d);
              }
              break;
            case "MUSIC":
            case "SOUND":
              d = sa.cache.audio.h[a];
              if (sa.isValidAudio(d)) {
                return Bb.withValue(d);
              }
              break;
            case "TEMPLATE":
              throw G.thrown("Not sure how to get template: " + a);
            case "BINARY":
            case "TEXT":
              c = false;
              break;
            default:
              return null;
          }
        }
        var e = a.indexOf(":");
        d = a.substring(0, e);
        e = a.substring(e + 1);
        var f = sa.getLibrary(d);
        if (f != null) {
          if (f.exists(e, b)) {
            d = f.loadAsset(e, b);
            if (c && sa.cache.enabled) {
              d.onComplete(function (c) {
                sa.cache.set(a, b, c);
              });
            }
            return d;
          }
          return Bb.withError("There is no " + b + " asset with an ID of \"" + a + "\"");
        }
        return Bb.withError(sa.__libraryNotFound(d));
      };
      sa.loadAudioBuffer = function (a, b) {
        if (b == null) {
          b = true;
        }
        return sa.loadAsset(a, "SOUND", b);
      };
      sa.loadLibrary = function (a) {
        var b = new Id();
        var c = sa.getLibrary(a);
        if (c != null) {
          return c.load();
        }
        c = a;
        var d = null;
        if (Object.prototype.hasOwnProperty.call(sa.bundlePaths.h, a)) {
          If.loadFromFile(sa.bundlePaths.h[a]).onComplete(function (c) {
            if (c == null) {
              b.error("Cannot load bundle for library \"" + a + "\"");
            } else {
              c = hc.fromBundle(c);
              if (c == null) {
                b.error("Cannot open library \"" + a + "\"");
              } else {
                sa.libraries.h[a] = c;
                c.onChange.add((u = sa.onChange, m(u, u.dispatch)));
                b.completeWith(c.load());
              }
            }
          }).onError(function (c) {
            b.error("There is no asset library with an ID of \"" + a + "\"");
          });
        } else {
          if (Object.prototype.hasOwnProperty.call(sa.libraryPaths.h, a)) {
            c = sa.libraryPaths.h[a];
            d = Kc.directory(c);
          } else {
            if (w.endsWith(c, ".bundle")) {
              d = c;
              c += "/library.json";
            } else {
              d = Kc.directory(c);
            }
            c = sa.__cacheBreak(c);
          }
          Rd.loadFromFile(c, d).onComplete(function (c) {
            if (c == null) {
              b.error("Cannot parse asset manifest for library \"" + a + "\"");
            } else {
              c = hc.fromManifest(c);
              if (c == null) {
                b.error("Cannot open library \"" + a + "\"");
              } else {
                sa.libraries.h[a] = c;
                c.onChange.add((u = sa.onChange, m(u, u.dispatch)));
                b.completeWith(c.load());
              }
            }
          }).onError(function (c) {
            b.error("There is no asset library with an ID of \"" + a + "\"");
          });
        }
        return b.future;
      };
      sa.registerLibrary = function (a, b) {
        if (a == null || a == "") {
          a = "default";
        }
        if (Object.prototype.hasOwnProperty.call(sa.libraries.h, a)) {
          if (sa.libraries.h[a] == b) {
            return;
          }
          sa.unloadLibrary(a);
        }
        if (b != null) {
          b.onChange.add(sa.library_onChange);
        }
        sa.libraries.h[a] = b;
      };
      sa.unloadLibrary = function (a) {
        if (a == null || a == "") {
          a = "default";
        }
        var b = sa.libraries.h[a];
        if (b != null) {
          sa.cache.clear(a + ":");
          b.onChange.remove(sa.library_onChange);
          b.unload();
        }
        b = sa.libraries;
        if (Object.prototype.hasOwnProperty.call(b.h, a)) {
          delete b.h[a];
        }
      };
      sa.__cacheBreak = function (a) {
        if (sa.cache.version > 0) {
          a = a.indexOf("?") > -1 ? a + ("&" + sa.cache.version) : a + ("?" + sa.cache.version);
        }
        return a;
      };
      sa.__libraryNotFound = function (a) {
        if (a == null || a == "") {
          a = "default";
        }
        if (ia.current == null || ia.current.__preloader == null || ia.current.__preloader.complete) {
          return "There is no asset library named \"" + a + "\"";
        } else {
          return "There is no asset library named \"" + a + "\", or it is not yet preloaded";
        }
      };
      sa.library_onChange = function () {
        sa.cache.clear();
        sa.onChange.dispatch();
      };
      function Eo(a, b) {
        this.bytes = a;
        this.offset = b;
      }
      g["lime.utils.BytePointerData"] = Eo;
      Eo.__name__ = "lime.utils.BytePointerData";
      Eo.prototype = {
        __class__: Eo
      };
      var Ah = {
        _new: function (a, b) {
          return new Yb(b);
        },
        decompress: function (a, b) {
          switch (b._hx_index) {
            case 0:
              return fo.decompress(a);
            case 1:
              return gp.decompress(a);
            case 2:
              return hp.decompress(a);
            case 3:
              return ip.decompress(a);
          }
        },
        fromBytes: function (a) {
          if (a == null) {
            return null;
          } else {
            return Ah._new(a.length, a.b.bufferValue);
          }
        },
        fromFile: function (a) {
          return null;
        },
        loadFromFile: function (a) {
          return new am().load(a);
        },
        ofString: function (a) {
          a = Yb.ofString(a);
          return Ah._new(a.length, a.b.bufferValue);
        }
      };
      var cm = z["lime.utils.CompressionAlgorithm"] = {
        __ename__: "lime.utils.CompressionAlgorithm",
        __constructs__: null,
        DEFLATE: {
          _hx_name: "DEFLATE",
          _hx_index: 0,
          __enum__: "lime.utils.CompressionAlgorithm",
          toString: p
        },
        GZIP: {
          _hx_name: "GZIP",
          _hx_index: 1,
          __enum__: "lime.utils.CompressionAlgorithm",
          toString: p
        },
        LZMA: {
          _hx_name: "LZMA",
          _hx_index: 2,
          __enum__: "lime.utils.CompressionAlgorithm",
          toString: p
        },
        ZLIB: {
          _hx_name: "ZLIB",
          _hx_index: 3,
          __enum__: "lime.utils.CompressionAlgorithm",
          toString: p
        }
      };
      cm.__constructs__ = [cm.DEFLATE, cm.GZIP, cm.LZMA, cm.ZLIB];
      var bj = {
        toArrayBufferView: function (a) {
          return a;
        }
      };
      function Va() {}
      g["lime.utils.Log"] = Va;
      Va.__name__ = "lime.utils.Log";
      Va.debug = function (a, b) {
        if (Va.level >= 4) {
          console.debug("[" + b.className + "] " + v.string(a));
        }
      };
      Va.error = function (a, b) {
        if (Va.level >= 1) {
          a = "[" + b.className + "] ERROR: " + v.string(a);
          if (Va.throwErrors) {
            throw G.thrown(a);
          }
          console.error(a);
        }
      };
      Va.info = function (a, b) {
        if (Va.level >= 3) {
          console.info("[" + b.className + "] " + v.string(a));
        }
      };
      Va.verbose = function (a, b) {
        if (Va.level >= 5) {
          a = "[" + b.className + "] " + v.string(a);
          console.log(a);
        }
      };
      Va.warn = function (a, b) {
        if (Va.level >= 2) {
          console.warn("[" + b.className + "] WARNING: " + v.string(a));
        }
      };
      function jn() {
        this.bytesTotalCache = new ua();
        this.bytesLoadedCache2 = new ua();
        this.bytesLoadedCache = new la();
        this.onProgress = new Wl();
        this.onComplete = new Tc();
        this.bytesTotal = this.bytesLoaded = 0;
        this.libraries = [];
        this.libraryNames = [];
        this.onProgress.add(m(this, this.update));
      }
      g["lime.utils.Preloader"] = jn;
      jn.__name__ = "lime.utils.Preloader";
      jn.prototype = {
        addLibrary: function (a) {
          this.libraries.push(a);
        },
        addLibraryName: function (a) {
          if (this.libraryNames.indexOf(a) == -1) {
            this.libraryNames.push(a);
          }
        },
        load: function () {
          var a = this;
          for (var b = 0, c = this.libraries; b < c.length;) {
            var d = c[b];
            ++b;
            this.bytesTotal += d.bytesTotal;
          }
          this.loadedLibraries = -1;
          this.preloadStarted = false;
          b = 0;
          for (c = this.libraries; b < c.length;) {
            d = [c[b]];
            ++b;
            Va.verbose("Preloading asset library", {
              fileName: "lime/utils/Preloader.hx",
              lineNumber: 134,
              className: "lime.utils.Preloader",
              methodName: "load"
            });
            d[0].load().onProgress(function (b) {
              return function (c, d) {
                a.bytesLoaded = a.bytesLoadedCache.h.__keys__[b[0].__id__] == null ? a.bytesLoaded + c : a.bytesLoaded + (c - a.bytesLoadedCache.h[b[0].__id__]);
                a.bytesLoadedCache.set(b[0], c);
                if (!a.simulateProgress) {
                  a.onProgress.dispatch(a.bytesLoaded, a.bytesTotal);
                }
              };
            }(d)).onComplete(function (b) {
              return function (c) {
                a.bytesLoaded = a.bytesLoadedCache.h.__keys__[b[0].__id__] == null ? a.bytesLoaded + b[0].bytesTotal : a.bytesLoaded + ((b[0].bytesTotal | 0) - a.bytesLoadedCache.h[b[0].__id__]);
                a.loadedAssetLibrary();
              };
            }(d)).onError(function () {
              return function (a) {
                Va.error(a, {
                  fileName: "lime/utils/Preloader.hx",
                  lineNumber: 170,
                  className: "lime.utils.Preloader",
                  methodName: "load"
                });
              };
            }());
          }
          b = 0;
          for (c = this.libraryNames; b < c.length;) {
            ++b;
            this.bytesTotal += 200;
          }
          this.loadedLibraries++;
          this.preloadStarted = true;
          this.updateProgress();
        },
        loadedAssetLibrary: function (a) {
          this.loadedLibraries++;
          var b = this.loadedLibraries;
          if (!this.preloadStarted) {
            ++b;
          }
          var c = this.libraries.length + this.libraryNames.length;
          if (a != null) {
            Va.verbose("Loaded asset library: " + a + " [" + b + "/" + c + "]", {
              fileName: "lime/utils/Preloader.hx",
              lineNumber: 197,
              className: "lime.utils.Preloader",
              methodName: "loadedAssetLibrary"
            });
          } else {
            Va.verbose("Loaded asset library [" + b + "/" + c + "]", {
              fileName: "lime/utils/Preloader.hx",
              lineNumber: 201,
              className: "lime.utils.Preloader",
              methodName: "loadedAssetLibrary"
            });
          }
          this.updateProgress();
        },
        start: function () {
          if (!this.complete && !this.simulateProgress && !!this.preloadComplete) {
            this.complete = true;
            this.onComplete.dispatch();
          }
        },
        update: function (a, b) {},
        updateProgress: function () {
          var a = this;
          if (!this.simulateProgress) {
            this.onProgress.dispatch(this.bytesLoaded, this.bytesTotal);
          }
          if (this.loadedLibraries == this.libraries.length && !this.initLibraryNames) {
            this.initLibraryNames = true;
            for (var b = 0, c = this.libraryNames; b < c.length;) {
              var d = [c[b]];
              ++b;
              Va.verbose("Preloading asset library: " + d[0], {
                fileName: "lime/utils/Preloader.hx",
                lineNumber: 239,
                className: "lime.utils.Preloader",
                methodName: "updateProgress"
              });
              sa.loadLibrary(d[0]).onProgress(function (b) {
                return function (c, d) {
                  if (d > 0) {
                    if (!Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h, b[0])) {
                      a.bytesTotalCache.h[b[0]] = d;
                      a.bytesTotal += d - 200;
                    }
                    if (c > d) {
                      c = d;
                    }
                    if (Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h, b[0])) {
                      a.bytesLoaded += c - a.bytesLoadedCache2.h[b[0]];
                    } else {
                      a.bytesLoaded += c;
                    }
                    a.bytesLoadedCache2.h[b[0]] = c;
                    if (!a.simulateProgress) {
                      a.onProgress.dispatch(a.bytesLoaded, a.bytesTotal);
                    }
                  }
                };
              }(d)).onComplete(function (b) {
                return function (c) {
                  c = 200;
                  if (Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h, b[0])) {
                    c = a.bytesTotalCache.h[b[0]];
                  }
                  if (Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h, b[0])) {
                    a.bytesLoaded += c - a.bytesLoadedCache2.h[b[0]];
                  } else {
                    a.bytesLoaded += c;
                  }
                  a.loadedAssetLibrary(b[0]);
                };
              }(d)).onError(function () {
                return function (a) {
                  Va.error(a, {
                    fileName: "lime/utils/Preloader.hx",
                    lineNumber: 293,
                    className: "lime.utils.Preloader",
                    methodName: "updateProgress"
                  });
                };
              }());
            }
          }
          if (!this.simulateProgress && this.loadedLibraries == this.libraries.length + this.libraryNames.length) {
            if (!this.preloadComplete) {
              this.preloadComplete = true;
              Va.verbose("Preload complete", {
                fileName: "lime/utils/Preloader.hx",
                lineNumber: 306,
                className: "lime.utils.Preloader",
                methodName: "updateProgress"
              });
            }
            this.start();
          }
        },
        __class__: jn
      };
      var Jf = z["objects.Alignment"] = {
        __ename__: "objects.Alignment",
        __constructs__: null,
        LEFT: {
          _hx_name: "LEFT",
          _hx_index: 0,
          __enum__: "objects.Alignment",
          toString: p
        },
        CENTERED: {
          _hx_name: "CENTERED",
          _hx_index: 1,
          __enum__: "objects.Alignment",
          toString: p
        },
        RIGHT: {
          _hx_name: "RIGHT",
          _hx_index: 2,
          __enum__: "objects.Alignment",
          toString: p
        }
      };
      Jf.__constructs__ = [Jf.LEFT, Jf.CENTERED, Jf.RIGHT];
      function Gb(a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (c == null) {
          c = "";
        }
        var e = 0;
        var f = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = W.pool.get().set(e, f);
        e._inPool = false;
        this.startPosition = e;
        e = 20;
        f = 120;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = W.pool.get().set(e, f);
        e._inPool = false;
        this.distancePerItem = e;
        this.rows = 0;
        this.scaleX = this.scaleY = 1;
        this.alignment = Jf.LEFT;
        this.changeX = this.changeY = true;
        this.targetY = 0;
        this.isMenuItem = false;
        this.letters = [];
        this.bold = false;
        La.call(this, a, b);
        this.startPosition.set_x(a);
        this.startPosition.set_y(b);
        this.bold = d;
        this.set_text(c);
      }
      g["objects.Alphabet"] = Gb;
      Gb.__name__ = "objects.Alphabet";
      Gb.__super__ = La;
      Gb.prototype = q(La.prototype, {
        set_alignment: function (a) {
          this.alignment = a;
          this.updateAlignment();
          return a;
        },
        updateAlignment: function () {
          for (var a = 0, b = this.letters; a < b.length;) {
            var c = b[a];
            ++a;
            switch (this.alignment._hx_index) {
              case 1:
                var d = c.rowWidth / 2;
                break;
              case 2:
                d = c.rowWidth;
                break;
              default:
                d = 0;
            }
            c.offset.set_x(c.offset.x - c.alignOffset);
            c.alignOffset = d * this.scale.x;
            c.offset.set_x(c.offset.x + c.alignOffset);
          }
        },
        set_text: function (a) {
          a = w.replace(a, "\\n", "\n");
          this.clearLetters();
          this.createLetters(a);
          this.updateAlignment();
          return this.text = a;
        },
        clearLetters: function () {
          for (var a = this.letters.length; a > 0;) {
            --a;
            var b = this.letters[a];
            if (b != null) {
              b.kill();
              r.remove(this.letters, b);
              this.remove(b);
            }
          }
          this.letters = [];
          this.rows = 0;
        },
        setScale: function (a, b) {
          var c = this.scale.x;
          var d = this.scale.y;
          if (b == null) {
            b = a;
          }
          this.scaleX = a;
          this.scaleY = b;
          this.scale.set_x(a);
          this.scale.set_y(b);
          this.softReloadLetters(a / c, b / d);
        },
        set_scaleX: function (a) {
          if (a == this.scaleX) {
            return a;
          }
          var b = a / this.scale.x;
          this.scale.set_x(a);
          this.scaleX = a;
          this.softReloadLetters(b, 1);
          return a;
        },
        softReloadLetters: function (a, b) {
          if (a == null) {
            a = 1;
          }
          if (b == null) {
            b = a;
          }
          for (var c = 0, d = this.letters; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              e.setupAlphaCharacter((e.x - this.x) * a + this.x, (e.y - this.y) * b + this.y);
            }
          }
        },
        update: function (a) {
          if (this.isMenuItem) {
            var b = Math.exp(-a * 9.6);
            if (this.changeX) {
              var c = this.targetY * this.distancePerItem.x + this.startPosition.x;
              this.set_x(c + b * (this.x - c));
            }
            if (this.changeY) {
              c = this.targetY * 1.3 * this.distancePerItem.y + this.startPosition.y;
              this.set_y(c + b * (this.y - c));
            }
          }
          La.prototype.update.call(this, a);
        },
        snapToPosition: function () {
          if (this.isMenuItem) {
            if (this.changeX) {
              this.set_x(this.targetY * this.distancePerItem.x + this.startPosition.x);
            }
            if (this.changeY) {
              this.set_y(this.targetY * 1.3 * this.distancePerItem.y + this.startPosition.y);
            }
          }
        },
        createLetters: function (a) {
          var b = 0;
          var c = 0;
          var d = [];
          var e = this.rows = 0;
          for (a = a.split(""); e < a.length;) {
            var f = a[e];
            ++e;
            if (f != "\n") {
              var k = f == " " || this.bold && f == "_";
              if (k) {
                ++b;
              }
              rf.isTypeAlphabet(f.toLowerCase());
              if (!!Object.prototype.hasOwnProperty.call(rf.allLetters.h, f.toLowerCase()) && (!this.bold || !k)) {
                if (b > 0) {
                  c += b * 28 * this.scaleX;
                  d[this.rows] = c;
                  if (!this.bold && c >= h.width * 0.65) {
                    c = 0;
                    this.rows++;
                  }
                }
                b = 0;
                k = true;
                if (k == null) {
                  k = false;
                }
                k = this.group.recycle(rf, null, k, true);
                k.scale.set_x(this.scaleX);
                k.scale.set_y(this.scaleY);
                k.rowWidth = 0;
                k.setupAlphaCharacter(c, this.rows * Gb.Y_PER_ROW * this.scale.y, f, this.bold);
                k.parent = this;
                k.row = this.rows;
                f = 0;
                if (!this.bold) {
                  f = 2;
                }
                c += k.get_width() + (k.letterOffset[0] + f) * this.scale.x;
                d[this.rows] = c;
                this.add(k);
                this.letters.push(k);
              }
            } else {
              c = 0;
              this.rows++;
            }
          }
          e = 0;
          for (a = this.letters; e < a.length;) {
            k = a[e];
            ++e;
            k.rowWidth = d[k.row];
          }
          if (this.letters.length > 0) {
            this.rows++;
          }
        },
        __class__: Gb,
        __properties__: q(La.prototype.__properties__, {
          set_scaleX: "set_scaleX",
          set_alignment: "set_alignment",
          set_text: "set_text"
        })
      });
      function rf() {
        this.curLetter = null;
        this.character = "?";
        this.row = this.rowWidth = 0;
        this.letterOffset = [0, 0];
        this.alignOffset = 0;
        F.call(this, this.x, this.y);
        this.set_image("alphabet");
        this.set_antialiasing(y.data.antialiasing);
      }
      g["objects.AlphaCharacter"] = rf;
      rf.__name__ = "objects.AlphaCharacter";
      rf.isTypeAlphabet = function (a) {
        a = a.charCodeAt(0);
        if (a >= 65 && a <= 90 || a >= 97 && a <= 122 || a >= 192 && a <= 214 || a >= 216 && a <= 246) {
          return true;
        } else if (a >= 248) {
          return a <= 255;
        } else {
          return false;
        }
      };
      rf.__super__ = F;
      rf.prototype = q(F.prototype, {
        setupAlphaCharacter: function (a, b, c, d) {
          this.set_x(a);
          this.set_y(b);
          if (this.parent != null) {
            if (d == null) {
              d = this.parent.bold;
            }
            this.scale.set_x(this.parent.scaleX);
            this.scale.set_y(this.parent.scaleY);
          }
          if (c != null) {
            this.character = c;
            this.curLetter = null;
            a = this.character.toLowerCase();
            if (Object.prototype.hasOwnProperty.call(rf.allLetters.h, a)) {
              this.curLetter = rf.allLetters.h[a];
            } else {
              this.curLetter = rf.allLetters.h["?"];
            }
            d = d ? " bold" : rf.isTypeAlphabet(a) ? a != this.character ? " uppercase" : " lowercase" : " normal";
            if (this.curLetter != null && this.curLetter.anim != null) {
              a = this.curLetter.anim;
            }
            a += d;
            this.animation.addByPrefix(a, a, 24);
            this.animation.play(a, true);
            if (this.animation._curAnim == null) {
              if (d != " bold") {
                d = " normal";
              }
              a = "question" + d;
              this.animation.addByPrefix(a, a, 24);
              this.animation.play(a, true);
            }
          }
          this.updateHitbox();
        },
        set_image: function (a) {
          if (this.frames == null) {
            this.image = a;
            var b = null;
            var c = D.image(a, b, true);
            this.set_frames(ob.fromSparrow(c, D.getPath("images/" + a + ".xml", null, b)));
            return a;
          }
          var d = null;
          if (this.animation != null) {
            d = this.animation.get_name();
          }
          this.image = a;
          b = null;
          c = D.image(a, b, true);
          this.set_frames(ob.fromSparrow(c, D.getPath("images/" + a + ".xml", null, b)));
          this.scale.set_x(this.parent.scaleX);
          this.scale.set_y(this.parent.scaleY);
          this.alignOffset = 0;
          if (d != null) {
            this.animation.addByPrefix(d, d, 24);
            this.animation.play(d, true);
            this.updateHitbox();
          }
          return a;
        },
        updateLetterOffset: function () {
          if (this.animation._curAnim == null) {
            zb.trace(this.character, {
              fileName: "source/objects/Alphabet.hx",
              lineNumber: 449,
              className: "objects.AlphaCharacter",
              methodName: "updateLetterOffset"
            });
          } else {
            var a = 110;
            if (w.endsWith(this.animation._curAnim.name, "bold")) {
              if (this.curLetter != null && this.curLetter.offsetsBold != null) {
                this.letterOffset[0] = this.curLetter.offsetsBold[0];
                this.letterOffset[1] = this.curLetter.offsetsBold[1];
              }
              a = 70;
            } else if (this.curLetter != null && this.curLetter.offsets != null) {
              this.letterOffset[0] = this.curLetter.offsets[0];
              this.letterOffset[1] = this.curLetter.offsets[1];
            }
            a *= this.scale.y;
            this.offset.set_x(this.offset.x + this.letterOffset[0] * this.scale.x);
            this.offset.set_y(this.offset.y + (this.letterOffset[1] * this.scale.y - (a - this.get_height())));
          }
        },
        updateHitbox: function () {
          F.prototype.updateHitbox.call(this);
          this.updateLetterOffset();
        },
        __class__: rf,
        __properties__: q(F.prototype.__properties__, {
          set_image: "set_image"
        })
      });
      function Yg(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        this.copyVisible = false;
        this.copyAngle = this.copyAlpha = true;
        this.alphaMult = 1;
        this.xAdd = this.yAdd = this.angleAdd = 0;
        F.call(this);
        if (b != null) {
          var e = D.image(a, c, true);
          this.set_frames(ob.fromSparrow(e, D.getPath("images/" + a + ".xml", null, c)));
          this.animation.addByPrefix("idle", b, 24, d);
          this.animation.play("idle");
        } else if (a != null) {
          this.loadGraphic(D.image(a));
        }
        this.set_antialiasing(y.data.antialiasing);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      g["objects.AttachedSprite"] = Yg;
      Yg.__name__ = "objects.AttachedSprite";
      Yg.__super__ = F;
      Yg.prototype = q(F.prototype, {
        update: function (a) {
          F.prototype.update.call(this, a);
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x + this.xAdd, this.sprTracker.y + this.yAdd);
            a = this.scrollFactor;
            var b = this.sprTracker.scrollFactor.x;
            var c = this.sprTracker.scrollFactor.y;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            if (this.copyAngle) {
              this.set_angle(this.sprTracker.angle + this.angleAdd);
            }
            if (this.copyAlpha) {
              this.set_alpha(this.sprTracker.alpha * this.alphaMult);
            }
            if (this.copyVisible) {
              this.set_visible(this.sprTracker.visible);
            }
          }
        },
        __class__: Yg
      });
      function wi(a, b, c, d, e) {
        if (e == null) {
          e = 1;
        }
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = "";
        }
        this.copyAlpha = false;
        this.copyVisible = true;
        this.offsetX = this.offsetY = 0;
        Gb.call(this, 0, 0, a, d);
        this.setScale(e);
        this.isMenuItem = false;
        this.offsetX = b;
        this.offsetY = c;
      }
      g["objects.AttachedText"] = wi;
      wi.__name__ = "objects.AttachedText";
      wi.__super__ = Gb;
      wi.prototype = q(Gb.prototype, {
        update: function (a) {
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x + this.offsetX, this.sprTracker.y + this.offsetY);
            if (this.copyVisible) {
              this.set_visible(this.sprTracker.visible);
            }
            if (this.copyAlpha) {
              this.set_alpha(this.sprTracker.alpha);
            }
          }
          Gb.prototype.update.call(this, a);
        },
        __class__: wi
      });
      function pd(a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (e == null) {
          e = 1;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        F.call(this, b, c);
        if (f != null) {
          b = D.image(a, null, true);
          this.set_frames(ob.fromSparrow(b, D.getPath("images/" + a + ".xml", null, null)));
          a = 0;
          b = f.length;
          while (a < b) {
            c = a++;
            c = f[c];
            this.animation.addByPrefix(c, c, 24, k);
            if (this.idleAnim == null) {
              this.idleAnim = c;
              this.animation.play(c);
            }
          }
        } else {
          if (a != null) {
            this.loadGraphic(D.image(a));
          }
          this.set_active(false);
        }
        f = this.scrollFactor;
        b = d;
        c = e;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        f.set_x(b);
        f.set_y(c);
        this.set_antialiasing(y.data.antialiasing);
      }
      g["objects.BGSprite"] = pd;
      pd.__name__ = "objects.BGSprite";
      pd.__super__ = F;
      pd.prototype = q(F.prototype, {
        __class__: pd
      });
      function Bh(a, b, c, d, e, f) {
        if (f == null) {
          f = 1;
        }
        if (e == null) {
          e = 0;
        }
        if (c == null) {
          c = "healthBar";
        }
        this.enabled = true;
        var k = 3;
        var h = 3;
        if (h == null) {
          h = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (h == null) {
          h = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (h == null) {
          h = 0;
        }
        if (k == null) {
          k = 0;
        }
        k = W.pool.get().set(k, h);
        k._inPool = false;
        this.barOffset = k;
        this.barWidth = this.barHeight = 1;
        this.barCenter = 0;
        this.leftToRight = true;
        this.bounds = {
          min: 0,
          max: 1
        };
        this.percent = 0;
        this.valueFunction = null;
        La.call(this, a, b);
        this.valueFunction = d;
        this.setBounds(e, f);
        this.bg = new F().loadGraphic(D.image(c));
        this.bg.set_antialiasing(y.data.antialiasing);
        this.set_barWidth(this.bg.get_width() - 6 | 0);
        this.set_barHeight(this.bg.get_height() - 6 | 0);
        this.leftBar = new F().makeGraphic(this.bg.get_width() | 0, this.bg.get_height() | 0, -1);
        this.leftBar.set_antialiasing(this.set_antialiasing(y.data.antialiasing));
        this.rightBar = new F().makeGraphic(this.bg.get_width() | 0, this.bg.get_height() | 0, -1);
        this.rightBar.set_color(-16777216);
        this.rightBar.set_antialiasing(y.data.antialiasing);
        this.add(this.leftBar);
        this.add(this.rightBar);
        this.add(this.bg);
        this.regenerateClips();
      }
      g["objects.Bar"] = Bh;
      Bh.__name__ = "objects.Bar";
      Bh.__super__ = La;
      Bh.prototype = q(La.prototype, {
        update: function (a) {
          if (this.enabled) {
            if (this.valueFunction != null) {
              var b = this.valueFunction();
              var c = this.bounds.min;
              var d = this.bounds.max;
              b = c != null && b < c ? c : b;
              d = bc.remapToRange(d != null && b > d ? d : b, this.bounds.min, this.bounds.max, 0, 100);
              this.set_percent(d ?? 0);
            } else {
              this.set_percent(0);
            }
          }
          La.prototype.update.call(this, a);
        },
        setBounds: function (a, b) {
          this.bounds.min = a;
          this.bounds.max = b;
        },
        setColors: function (a, b) {
          if (a != null) {
            this.leftBar.set_color(a);
          }
          if (b != null) {
            this.rightBar.set_color(b);
          }
        },
        updateBar: function () {
          if (this.leftBar != null && this.rightBar != null) {
            this.leftBar.setPosition(this.bg.x, this.bg.y);
            this.rightBar.setPosition(this.bg.x, this.bg.y);
            var a = this.leftToRight ? this.percent / 100 * this.barWidth : (1 - this.percent / 100) * this.barWidth;
            this.leftBar.clipRect.width = a;
            this.leftBar.clipRect.height = this.barHeight;
            this.leftBar.clipRect.x = this.barOffset.x;
            this.leftBar.clipRect.y = this.barOffset.y;
            this.rightBar.clipRect.width = this.barWidth - a;
            this.rightBar.clipRect.height = this.barHeight;
            this.rightBar.clipRect.x = this.barOffset.x + a;
            this.rightBar.clipRect.y = this.barOffset.y;
            this.barCenter = this.leftBar.x + a + this.barOffset.x;
            this.leftBar.set_clipRect(this.leftBar.clipRect);
            this.rightBar.set_clipRect(this.rightBar.clipRect);
          }
        },
        regenerateClips: function () {
          if (this.leftBar != null) {
            this.leftBar.setGraphicSize(this.bg.get_width() | 0, this.bg.get_height() | 0);
            this.leftBar.updateHitbox();
            this.leftBar.set_clipRect(new Ha(0, 0, this.bg.get_width() | 0, this.bg.get_height() | 0));
          }
          if (this.rightBar != null) {
            this.rightBar.setGraphicSize(this.bg.get_width() | 0, this.bg.get_height() | 0);
            this.rightBar.updateHitbox();
            this.rightBar.set_clipRect(new Ha(0, 0, this.bg.get_width() | 0, this.bg.get_height() | 0));
          }
          this.updateBar();
        },
        set_percent: function (a) {
          var b = false;
          if (a != this.percent) {
            b = true;
          }
          this.percent = a;
          if (b) {
            this.updateBar();
          }
          return a;
        },
        set_leftToRight: function (a) {
          this.leftToRight = a;
          this.updateBar();
          return a;
        },
        set_barWidth: function (a) {
          this.barWidth = a;
          this.regenerateClips();
          return a;
        },
        set_barHeight: function (a) {
          this.barHeight = a;
          this.regenerateClips();
          return a;
        },
        __class__: Bh,
        __properties__: q(La.prototype.__properties__, {
          set_barHeight: "set_barHeight",
          set_barWidth: "set_barWidth",
          set_leftToRight: "set_leftToRight",
          set_percent: "set_percent"
        })
      });
      function id(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = "bf";
        }
        this.isAnimateAtlas = false;
        this.settingCharacterUp = true;
        this.danceEveryNumBeats = 2;
        this.danced = false;
        this.editorIsPlayer = null;
        this.noAntialiasing = this.originalFlipX = false;
        this.jsonScale = 1;
        this.vocalsFile = this.imageFile = "";
        this.hasMissAnimations = false;
        this.healthColorArray = [255, 0, 0];
        this.cameraPosition = [0, 0];
        this.positionArray = [0, 0];
        this.animationsArray = [];
        this.healthIcon = "face";
        this.danceIdle = this.skipDance = false;
        this.idleSuffix = "";
        this.singDuration = 4;
        this.stunned = false;
        this.animationNotes = [];
        this.specialAnim = false;
        this.holdTimer = this.heyTimer = 0;
        this.curCharacter = id.DEFAULT_CHARACTER;
        this.debugMode = this.isPlayer = false;
        F.call(this, a, b);
        this.animation = new lh(this);
        this.animOffsets = new ua();
        this.curCharacter = c;
        this.isPlayer = d;
        a = D.getPath("characters/" + this.curCharacter + ".json", "TEXT", null, true);
        if (!Q.exists(a)) {
          a = "characters/" + id.DEFAULT_CHARACTER + ".json";
          if (a == null) {
            a = "";
          }
          a = "assets/shared/" + a;
          this.set_color(-16777216);
          this.set_alpha(0.6);
        }
        try {
          this.loadCharacterFile(JSON.parse(Q.getText(a)));
        } catch (e) {
          Pa.lastError = e;
          a = G.caught(e).unwrap();
          zb.trace("Error loading character file of \"" + c + "\": " + v.string(a), {
            fileName: "source/objects/Character.hx",
            lineNumber: 121,
            className: "objects.Character",
            methodName: "new"
          });
        }
        if (Object.prototype.hasOwnProperty.call(this.animOffsets.h, "singLEFTmiss") || Object.prototype.hasOwnProperty.call(this.animOffsets.h, "singDOWNmiss") || Object.prototype.hasOwnProperty.call(this.animOffsets.h, "singUPmiss") || Object.prototype.hasOwnProperty.call(this.animOffsets.h, "singRIGHTmiss")) {
          this.hasMissAnimations = true;
        }
        this.recalculateDanceIdle();
        this.dance();
        if (this.curCharacter == "pico-speaker") {
          this.skipDance = true;
          this.loadMappedAnims();
          this.playAnim("shoot1");
        }
      }
      g["objects.Character"] = id;
      id.__name__ = "objects.Character";
      id.__super__ = F;
      id.prototype = q(F.prototype, {
        loadCharacterFile: function (a) {
          this.isAnimateAtlas = false;
          var b = D.getPath("images/" + v.string(a.image) + "/Animation.json", "TEXT", null, true);
          if (Q.exists(b)) {
            this.isAnimateAtlas = true;
          }
          b = this.scale;
          var c = 1;
          var d = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          this.updateHitbox();
          if (this.isAnimateAtlas) {
            this.atlas = new hi();
            this.atlas.showPivot = false;
            try {
              D.loadAnimateAtlas(this.atlas, a.image);
            } catch (n) {
              Pa.lastError = n;
              b = G.caught(n).unwrap();
              h.log.advanced("Could not load atlas " + v.string(a.image) + ": " + v.string(b), xa.WARNING, true);
            }
          } else {
            this.set_frames(D.getAtlas(a.image));
          }
          this.imageFile = a.image;
          this.jsonScale = a.scale;
          if (a.scale != 1) {
            b = this.scale;
            d = c = this.jsonScale;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
            this.updateHitbox();
          }
          this.positionArray = a.position;
          this.cameraPosition = a.camera_position;
          this.healthIcon = a.healthicon;
          this.singDuration = a.sing_duration;
          this.set_flipX(a.flip_x != this.isPlayer);
          this.healthColorArray = a.healthbar_colors != null && a.healthbar_colors.length > 2 ? a.healthbar_colors : [161, 161, 161];
          this.vocalsFile = a.vocals_file ?? "";
          this.originalFlipX = a.flip_x == 1;
          this.editorIsPlayer = a._editor_isPlayer;
          this.noAntialiasing = a.no_antialiasing == 1;
          this.set_antialiasing(y.data.antialiasing && !this.noAntialiasing);
          this.animationsArray = a.animations;
          if (this.animationsArray != null && this.animationsArray.length > 0) {
            a = 0;
            b = this.animationsArray;
            while (a < b.length) {
              c = b[a];
              ++a;
              d = "" + c.anim;
              var e = "" + c.name;
              var f = c.fps;
              var k = c.loop;
              var t = c.indices;
              if (this.isAnimateAtlas) {
                if (t != null && t.length > 0) {
                  this.atlas.anim.addBySymbolIndices(d, e, t, f, k);
                } else {
                  this.atlas.anim.addBySymbol(d, e, f, k);
                }
              } else if (t != null && t.length > 0) {
                this.animation.addByIndices(d, e, t, "", f, k);
              } else {
                this.animation.addByPrefix(d, e, f, k);
              }
              if (c.offsets != null && c.offsets.length > 1) {
                this.addOffset(c.anim, c.offsets[0], c.offsets[1]);
              } else {
                this.addOffset(c.anim, 0, 0);
              }
            }
          }
          if (this.isAnimateAtlas) {
            this.copyAtlasValues();
          }
        },
        update: function (a) {
          if (this.isAnimateAtlas) {
            this.atlas.update(a);
          }
          if (!this.debugMode && (!!this.isAnimateAtlas || this.animation._curAnim != null) && (!this.isAnimateAtlas || this.atlas.anim.get_curSymbol() != null)) {
            if (this.heyTimer > 0) {
              this.heyTimer -= a * (A.instance != null ? A.instance.playbackRate : 1);
              if (this.heyTimer <= 0) {
                var b = "";
                if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
                  b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
                }
                b = b ?? "";
                if (!!this.specialAnim && (b == "hey" || b == "cheer")) {
                  this.specialAnim = false;
                  this.dance();
                }
                this.heyTimer = 0;
              }
            } else if (this.specialAnim && this.isAnimationFinished()) {
              this.specialAnim = false;
              this.dance();
            } else {
              b = "";
              if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
                b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
              }
              if (w.endsWith(b ?? "", "miss") && this.isAnimationFinished()) {
                this.dance();
                this.finishAnimation();
              }
            }
            if (this.curCharacter == "pico-speaker" && (this.animationNotes.length > 0 && O.songPosition > this.animationNotes[0][0] && (b = 1, this.animationNotes[0][1] > 2 && (b = 3), b += h.random.int(0, 1), this.playAnim("shoot" + b, true), this.animationNotes.shift()), this.isAnimationFinished())) {
              b = "";
              if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
                b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
              }
              this.playAnim(b ?? "", false, false, this.animation._curAnim.frames.length - 3);
            }
            b = "";
            if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
              b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
            }
            if (w.startsWith(b ?? "", "sing")) {
              this.holdTimer += a;
            } else if (this.isPlayer) {
              this.holdTimer = 0;
            }
            if (!this.isPlayer && this.holdTimer >= 0.0011 / (h.sound.music != null ? h.sound.music._pitch : 1) * O.stepCrochet * this.singDuration) {
              this.dance();
              this.holdTimer = 0;
            }
            b = "";
            if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
              b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
            }
            b = b ?? "";
            if (this.isAnimationFinished() && Object.prototype.hasOwnProperty.call(this.animOffsets.h, "" + b + "-loop")) {
              this.playAnim("" + b + "-loop");
            }
          }
          F.prototype.update.call(this, a);
        },
        isAnimationFinished: function () {
          if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() == null : this.animation._curAnim == null) {
            return false;
          } else if (this.isAnimateAtlas) {
            return this.atlas.anim.get_finished();
          } else {
            return this.animation._curAnim.finished;
          }
        },
        finishAnimation: function () {
          if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
            if (this.isAnimateAtlas) {
              this.atlas.anim.set_curFrame(this.atlas.anim.get_length() - 1);
            } else {
              this.animation._curAnim.finish();
            }
          }
        },
        set_animPaused: function (a) {
          if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() == null : this.animation._curAnim == null) {
            return a;
          }
          if (this.isAnimateAtlas) {
            if (a) {
              this.atlas.anim.pause();
            } else {
              this.atlas.anim.resume();
            }
          } else {
            this.animation._curAnim.paused = a;
          }
          return a;
        },
        dance: function () {
          if (!this.debugMode && !this.skipDance && !this.specialAnim) {
            if (this.danceIdle) {
              if (this.danced = !this.danced) {
                this.playAnim("danceRight" + this.idleSuffix);
              } else {
                this.playAnim("danceLeft" + this.idleSuffix);
              }
            } else if (Object.prototype.hasOwnProperty.call(this.animOffsets.h, "idle" + this.idleSuffix)) {
              this.playAnim("idle" + this.idleSuffix);
            }
          }
        },
        playAnim: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          this.specialAnim = false;
          if (this.isAnimateAtlas) {
            this.atlas.anim.play(a, b, c, d);
          } else {
            this.animation.play(a, b, c, d);
          }
          if (Object.prototype.hasOwnProperty.call(this.animOffsets.h, a)) {
            d = this.animOffsets.h[a];
            b = this.offset;
            c = d[0];
            d = d[1];
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
          }
          if (w.startsWith(this.curCharacter, "gf-") || this.curCharacter == "gf") {
            if (a == "singLEFT") {
              this.danced = true;
            } else if (a == "singRIGHT") {
              this.danced = false;
            }
            if (a == "singUP" || a == "singDOWN") {
              this.danced = !this.danced;
            }
          }
        },
        loadMappedAnims: function () {
          try {
            var a = A.SONG.song;
            var b = new V("[~&\\\\;:<>#]", "");
            var c = new V("[.,'\"%?!]", "");
            var d = b.split(w.replace(a, " ", "-")).join("-");
            var e = Md.loadFromJson("picospeaker", c.split(d).join("").toLowerCase()).notes;
            for (a = 0; a < e.length;) {
              var f = e[a];
              ++a;
              b = 0;
              for (var k = f.sectionNotes; b < k.length;) {
                var h = k[b];
                ++b;
                this.animationNotes.push(h);
              }
            }
            Ij.animationNotes = this.animationNotes;
            this.animationNotes.sort(m(this, this.sortAnims));
          } catch (n) {
            Pa.lastError = n;
          }
        },
        sortAnims: function (a, b) {
          a = a[0];
          b = b[0];
          var c = 0;
          if (a < b) {
            c = -1;
          } else if (a > b) {
            c = 1;
          }
          return c;
        },
        recalculateDanceIdle: function () {
          var a = this.danceIdle;
          this.danceIdle = Object.prototype.hasOwnProperty.call(this.animOffsets.h, "danceLeft" + this.idleSuffix) && Object.prototype.hasOwnProperty.call(this.animOffsets.h, "danceRight" + this.idleSuffix);
          if (this.settingCharacterUp) {
            this.danceEveryNumBeats = this.danceIdle ? 1 : 2;
          } else if (a != this.danceIdle) {
            a = this.danceEveryNumBeats;
            a = this.danceIdle ? a / 2 : a * 2;
            this.danceEveryNumBeats = Math.round(Math.max(a, 1));
          }
          this.settingCharacterUp = false;
        },
        addOffset: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          this.animOffsets.h[a] = [b, c];
        },
        draw: function () {
          if (this.isAnimateAtlas) {
            this.copyAtlasValues();
            this.atlas.draw();
          } else {
            F.prototype.draw.call(this);
          }
        },
        copyAtlasValues: function () {
          this.atlas.set_cameras(this.get_cameras());
          this.atlas.scrollFactor = this.scrollFactor;
          this.atlas.scale = this.scale;
          this.atlas.offset = this.offset;
          this.atlas.origin = this.origin;
          this.atlas.set_x(this.x);
          this.atlas.set_y(this.y);
          this.atlas.set_angle(this.angle);
          this.atlas.set_alpha(this.alpha);
          this.atlas.set_visible(this.visible);
          this.atlas.set_flipX(this.flipX);
          this.atlas.set_flipY(this.flipY);
          this.atlas.shader = this.shader;
          this.atlas.set_antialiasing(this.antialiasing);
          this.atlas.colorTransform = this.colorTransform;
          this.atlas.set_color(this.color);
        },
        destroy: function () {
          F.prototype.destroy.call(this);
          this.destroyAtlas();
        },
        destroyAtlas: function () {
          if (this.atlas != null) {
            this.atlas = ca.destroy(this.atlas);
          }
        },
        __class__: id,
        __properties__: q(F.prototype.__properties__, {
          set_animPaused: "set_animPaused"
        })
      });
      function Jj(a, b, c) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.offsetX = this.offsetY = 0;
        this.copyAlpha = true;
        F.call(this, a, b);
        a = D.image("checkboxanim", null, true);
        this.set_frames(ob.fromSparrow(a, D.getPath("images/checkboxanim.xml", null, null)));
        this.animation.addByPrefix("unchecked", "checkbox0", 24, false);
        this.animation.addByPrefix("unchecking", "checkbox anim reverse", 24, false);
        this.animation.addByPrefix("checking", "checkbox anim0", 24, false);
        this.animation.addByPrefix("checked", "checkbox finish", 24, false);
        this.set_antialiasing(y.data.antialiasing);
        this.setGraphicSize(this.get_width() * 0.9 | 0);
        this.updateHitbox();
        this.animationFinished(c ? "checking" : "unchecking");
        this.animation.finishCallback = m(this, this.animationFinished);
        this.set_daValue(c);
      }
      g["objects.CheckboxThingie"] = Jj;
      Jj.__name__ = "objects.CheckboxThingie";
      Jj.__super__ = F;
      Jj.prototype = q(F.prototype, {
        update: function (a) {
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x - 130 + this.offsetX, this.sprTracker.y + 30 + this.offsetY);
            if (this.copyAlpha) {
              this.set_alpha(this.sprTracker.alpha);
            }
          }
          F.prototype.update.call(this, a);
        },
        set_daValue: function (a) {
          if (a) {
            if (this.animation._curAnim.name != "checked" && this.animation._curAnim.name != "checking") {
              this.animation.play("checking", true);
              var b = this.offset;
              var c = 34;
              var d = 25;
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              b.set_x(c);
              b.set_y(d);
            }
          } else if (this.animation._curAnim.name != "unchecked" && this.animation._curAnim.name != "unchecking") {
            this.animation.play("unchecking", true);
            b = this.offset;
            c = 25;
            d = 28;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
          }
          return a;
        },
        animationFinished: function (a) {
          switch (a) {
            case "checking":
              this.animation.play("checked", true);
              a = this.offset;
              var b = 3;
              var c = 12;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              a.set_x(b);
              a.set_y(c);
              break;
            case "unchecking":
              this.animation.play("unchecked", true);
              a = this.offset;
              b = 0;
              c = 2;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              a.set_x(b);
              a.set_y(c);
          }
        },
        __class__: Jj,
        __properties__: q(F.prototype.__properties__, {
          set_daValue: "set_daValue"
        })
      });
      function Kf(a, b, c) {
        if (c == null) {
          c = true;
        }
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = "bf";
        }
        this.iconOffsets = [0, 0];
        this.char = "";
        this.isOldIcon = this.isPlayer = false;
        F.call(this);
        this.isOldIcon = a == "bf-old";
        this.isPlayer = b;
        this.changeIcon(a, c);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      g["objects.HealthIcon"] = Kf;
      Kf.__name__ = "objects.HealthIcon";
      Kf.__super__ = F;
      Kf.prototype = q(F.prototype, {
        update: function (a) {
          F.prototype.update.call(this, a);
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x + this.sprTracker.get_width() + 12, this.sprTracker.y - 30);
          }
        },
        changeIcon: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (this.char != a) {
            var c = "icons/" + a;
            if (!D.fileExists("images/" + c + ".png", "IMAGE")) {
              c = "icons/icon-" + a;
            }
            if (!D.fileExists("images/" + c + ".png", "IMAGE")) {
              c = "icons/icon-face";
            }
            b = D.image(c, null, b);
            this.loadGraphic(b, true, Math.floor(b.width / 2), Math.floor(b.height));
            this.iconOffsets[0] = (this.get_width() - 150) / 2;
            this.iconOffsets[1] = (this.get_height() - 150) / 2;
            this.updateHitbox();
            this.animation.add(a, [0, 1], 0, false, this.isPlayer);
            this.animation.play(a);
            this.char = a;
            if (w.endsWith(a, "-pixel")) {
              this.set_antialiasing(false);
            } else {
              this.set_antialiasing(y.data.antialiasing);
            }
          }
        },
        updateHitbox: function () {
          F.prototype.updateHitbox.call(this);
          this.offset.set_x(this.iconOffsets[0]);
          this.offset.set_y(this.iconOffsets[1]);
        },
        getCharacter: function () {
          return this.char;
        },
        __class__: Kf
      });
      function re(a, b) {
        if (b == null) {
          b = "bf";
        }
        this.hasConfirmAnimation = false;
        F.call(this, a);
        this.set_antialiasing(y.data.antialiasing);
        this.changeCharacter(b);
      }
      g["objects.MenuCharacter"] = re;
      re.__name__ = "objects.MenuCharacter";
      re.__super__ = F;
      re.prototype = q(F.prototype, {
        changeCharacter: function (a) {
          if (a == null) {
            a = "bf";
          }
          if (a == null) {
            a = "";
          }
          if (a != this.character) {
            this.character = a;
            this.set_visible(true);
            var b = this.scale;
            var c = 1;
            var d = 1;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
            this.updateHitbox();
            this.hasConfirmAnimation = false;
            if (a == null) {
              a = "images/menucharacters/" + a + ".json";
              if (a == null) {
                a = "";
              }
              a = "assets/shared/" + a;
              if (!Q.exists(a)) {
                a = "images/menucharacters/" + re.DEFAULT_CHARACTER + ".json";
                if (a == null) {
                  a = "";
                }
                a = "assets/shared/" + a;
              }
              a = Q.getText(a);
              a = JSON.parse(a);
              b = "menucharacters/" + a.image;
              c = null;
              d = D.image(b, c, true);
              this.set_frames(ob.fromSparrow(d, D.getPath("images/" + b + ".xml", null, c)));
              this.animation.addByPrefix("idle", a.idle_anim, 24);
              b = a.confirm_anim;
              if (b != null && b.length > 0 && b != a.idle_anim) {
                this.animation.addByPrefix("confirm", b, 24, false);
                if (this.animation._animations.h.confirm != null) {
                  this.hasConfirmAnimation = true;
                }
              }
              this.set_flipX(a.flipX == 1);
              if (a.scale != 1) {
                b = this.scale;
                d = c = a.scale;
                if (d == null) {
                  d = 0;
                }
                if (c == null) {
                  c = 0;
                }
                b.set_x(c);
                b.set_y(d);
                this.updateHitbox();
              }
              b = this.offset;
              c = a.position[0];
              d = a.position[1];
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              b.set_x(c);
              b.set_y(d);
              this.animation.play("idle");
            } else if (a == "") {
              this.set_visible(false);
            } else {
              a = "images/menucharacters/" + a + ".json";
              if (a == null) {
                a = "";
              }
              a = "assets/shared/" + a;
              if (!Q.exists(a)) {
                a = "images/menucharacters/" + re.DEFAULT_CHARACTER + ".json";
                if (a == null) {
                  a = "";
                }
                a = "assets/shared/" + a;
              }
              a = Q.getText(a);
              a = JSON.parse(a);
              b = "menucharacters/" + a.image;
              c = null;
              d = D.image(b, c, true);
              this.set_frames(ob.fromSparrow(d, D.getPath("images/" + b + ".xml", null, c)));
              this.animation.addByPrefix("idle", a.idle_anim, 24);
              b = a.confirm_anim;
              if (b != null && b.length > 0 && b != a.idle_anim) {
                this.animation.addByPrefix("confirm", b, 24, false);
                if (this.animation._animations.h.confirm != null) {
                  this.hasConfirmAnimation = true;
                }
              }
              this.set_flipX(a.flipX == 1);
              if (a.scale != 1) {
                b = this.scale;
                d = c = a.scale;
                if (d == null) {
                  d = 0;
                }
                if (c == null) {
                  c = 0;
                }
                b.set_x(c);
                b.set_y(d);
                this.updateHitbox();
              }
              b = this.offset;
              c = a.position[0];
              d = a.position[1];
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              b.set_x(c);
              b.set_y(d);
              this.animation.play("idle");
            }
          }
        },
        __class__: re
      });
      function Kj(a, b, c) {
        if (c == null) {
          c = "";
        }
        this.flashes_ps = 6;
        this._flashColor = -13369345;
        this._flashingElapsed = 0;
        this.isFlashing = false;
        this.targetY = 0;
        F.call(this, a, b);
        this.loadGraphic(D.image("storymenu/" + c));
        this.set_antialiasing(y.data.antialiasing);
      }
      g["objects.MenuItem"] = Kj;
      Kj.__name__ = "objects.MenuItem";
      Kj.__super__ = F;
      Kj.prototype = q(F.prototype, {
        set_isFlashing: function (a) {
          if (a == null) {
            a = true;
          }
          this.isFlashing = a;
          this._flashingElapsed = 0;
          this.set_color(this.isFlashing ? this._flashColor : -1);
          return this.isFlashing;
        },
        update: function (a) {
          F.prototype.update.call(this, a);
          var b = this.targetY * 120 + 480;
          this.set_y(b + Math.exp(-a * 10.2) * (this.y - b));
          if (this.isFlashing) {
            this._flashingElapsed += a;
            this.set_color(Math.floor(this._flashingElapsed * h.updateFramerate * this.flashes_ps) % 2 == 0 ? this._flashColor : -1);
          }
        },
        __class__: Kj,
        __properties__: q(F.prototype.__properties__, {
          set_isFlashing: "set_isFlashing"
        })
      });
      function dm(a) {
        this.playbackRate = 1;
        this.holdPitchTime = 0;
        this.playbackSymbols = [];
        this.playingMusic = false;
        Qa.call(this);
        this.instance = a;
        a = h.width * 0.7;
        this.songBG = new F(a - 6, 0).makeGraphic(1, 100, -16777216);
        this.songBG.set_alpha(0.6);
        this.add(this.songBG);
        this.playbackBG = new F(a - 6, 0).makeGraphic(1, 100, -16777216);
        this.playbackBG.set_alpha(0.6);
        this.add(this.playbackBG);
        this.songTxt = new U(h.width * 0.7, 5, 0, "", 32);
        this.songTxt.setFormat("assets/fonts/vcr.ttf", 32, -1, "right");
        this.add(this.songTxt);
        this.timeTxt = new U(a, this.songTxt.y + 60, 0, "", 32);
        this.timeTxt.setFormat("assets/fonts/vcr.ttf", 32, -1, "right");
        this.add(this.timeTxt);
        a = new U();
        a.setFormat("assets/fonts/vcr.ttf", 32, -1, "center");
        a.set_text("^");
        a.set_visible(false);
        this.playbackSymbols.push(a);
        this.add(a);
        a = new U();
        a.setFormat("assets/fonts/vcr.ttf", 32, -1, "center");
        a.set_text("^");
        a.set_flipY(true);
        a.set_visible(false);
        this.playbackSymbols.push(a);
        this.add(a);
        this.progressBar = new Jg(this.timeTxt.x, this.timeTxt.y + this.timeTxt.get_height(), Bd.LEFT_TO_RIGHT, this.timeTxt.get_width() | 0, 8, null, "", 0, Infinity);
        this.progressBar.createFilledBar(-1, -16777216);
        this.add(this.progressBar);
        this.playbackTxt = new U(h.width * 0.6, 20, 0, "", 32);
        this.playbackTxt.setFormat("assets/fonts/vcr.ttf", 32, -1);
        this.add(this.playbackTxt);
        this.switchPlayMusic();
      }
      g["objects.MusicPlayer"] = dm;
      dm.__name__ = "objects.MusicPlayer";
      dm.__super__ = Qa;
      dm.prototype = q(Qa.prototype, {
        update: function (a) {
          Qa.prototype.update.call(this, a);
          if (this.playingMusic) {
            if (this.get_paused() && !this.wasPlaying) {
              this.songTxt.set_text("PLAYING: " + this.instance.songs[Ta.curSelected].songName + " (PAUSED)");
            } else {
              this.songTxt.set_text("PLAYING: " + this.instance.songs[Ta.curSelected].songName);
            }
            this.positionSong();
            if (this.instance.get_controls().get_UI_LEFT_P()) {
              if (this.get_playing()) {
                this.wasPlaying = true;
              }
              this.pauseOrResume();
              this.curTime = h.sound.music._time - 1000;
              this.instance.holdTime = 0;
              if (this.curTime < 0) {
                this.curTime = 0;
              }
              h.sound.music.set_time(this.curTime);
              if (Ta.vocals != null) {
                Ta.vocals.set_time(this.curTime);
              }
            }
            if (this.instance.get_controls().get_UI_RIGHT_P()) {
              if (this.get_playing()) {
                this.wasPlaying = true;
              }
              this.pauseOrResume();
              this.curTime = h.sound.music._time + 1000;
              this.instance.holdTime = 0;
              if (this.curTime > h.sound.music._length) {
                this.curTime = h.sound.music._length;
              }
              h.sound.music.set_time(this.curTime);
              if (Ta.vocals != null) {
                Ta.vocals.set_time(this.curTime);
              }
            }
            this.updateTimeTxt();
            if (this.instance.get_controls().get_UI_LEFT() || this.instance.get_controls().get_UI_RIGHT()) {
              this.instance.holdTime += a;
              if (this.instance.holdTime > 0.5) {
                this.curTime += a * 40000 * (this.instance.get_controls().get_UI_LEFT() ? -1 : 1);
              }
              var b = Math.abs(this.curTime - h.sound.music._time);
              if (this.curTime + b > h.sound.music._length) {
                this.curTime = h.sound.music._length;
              } else if (this.curTime - b < 0) {
                this.curTime = 0;
              }
              h.sound.music.set_time(this.curTime);
              if (Ta.vocals != null) {
                Ta.vocals.set_time(this.curTime);
              }
              this.updateTimeTxt();
            }
            if (this.instance.get_controls().get_UI_LEFT_R() || this.instance.get_controls().get_UI_RIGHT_R()) {
              h.sound.music.set_time(this.curTime);
              if (Ta.vocals != null) {
                Ta.vocals.set_time(this.curTime);
              }
              if (this.wasPlaying) {
                this.pauseOrResume(true);
                this.wasPlaying = false;
              }
              this.updateTimeTxt();
            }
            if (this.instance.get_controls().get_UI_UP_P()) {
              this.holdPitchTime = 0;
              this.set_playbackRate(this.playbackRate + 0.05);
              this.setPlaybackRate();
            } else if (this.instance.get_controls().get_UI_DOWN_P()) {
              this.holdPitchTime = 0;
              this.set_playbackRate(this.playbackRate - 0.05);
              this.setPlaybackRate();
            }
            if (this.instance.get_controls().get_UI_DOWN() || this.instance.get_controls().get_UI_UP()) {
              this.holdPitchTime += a;
              if (this.holdPitchTime > 0.6) {
                this.set_playbackRate(this.playbackRate + (this.instance.get_controls().get_UI_UP() ? 1 : -1) * 0.05);
                this.setPlaybackRate();
              }
            }
            if (Ta.vocals != null && h.sound.music._time > 5) {
              b = Math.abs(h.sound.music._time - Ta.vocals._time);
              if (b >= 5 && !this.get_paused()) {
                this.pauseOrResume();
                Ta.vocals.set_time(h.sound.music._time);
                this.pauseOrResume(true);
              }
            }
            this.updatePlaybackTxt();
            if (this.instance.get_controls().get_RESET()) {
              this.set_playbackRate(1);
              this.setPlaybackRate();
              h.sound.music.set_time(0);
              if (Ta.vocals != null) {
                Ta.vocals.set_time(0);
              }
              this.updateTimeTxt();
            }
          }
        },
        pauseOrResume: function (a) {
          if (a == null) {
            a = false;
          }
          if (a) {
            h.sound.music.resume();
            if (Ta.vocals != null) {
              Ta.vocals.resume();
            }
          } else {
            h.sound.music.pause();
            if (Ta.vocals != null) {
              Ta.vocals.pause();
            }
          }
          this.positionSong();
        },
        switchPlayMusic: function () {
          h.autoPause = !this.playingMusic && y.data.autoPause;
          this.set_active(this.set_visible(this.playingMusic));
          this.instance.scoreBG.set_visible(this.instance.diffText.set_visible(this.instance.scoreText.set_visible(!this.playingMusic)));
          this.songTxt.set_visible(this.timeTxt.set_visible(this.songBG.set_visible(this.playbackTxt.set_visible(this.playbackBG.set_visible(this.progressBar.set_visible(this.playingMusic))))));
          for (var a = 0, b = this.playbackSymbols; a < b.length;) {
            var c = b[a];
            ++a;
            c.set_visible(this.playingMusic);
          }
          this.holdPitchTime = 0;
          this.instance.holdTime = 0;
          this.set_playbackRate(1);
          this.updatePlaybackTxt();
          if (this.playingMusic) {
            this.instance.bottomText.set_text("Press SPACE to Pause / Press ESCAPE to Exit / Press R to Reset the Song");
            this.positionSong();
            this.progressBar.setRange(0, h.sound.music._length);
            this.progressBar.setParent(h.sound.music, "time");
            this.progressBar.set_numDivisions(1600);
            this.updateTimeTxt();
          } else {
            this.progressBar.setRange(0, Infinity);
            this.progressBar.setParent(null, "");
            this.progressBar.set_numDivisions(0);
            this.instance.bottomText.set_text(this.instance.bottomString);
            this.instance.positionHighscore();
          }
          this.progressBar.updateBar();
        },
        updatePlaybackTxt: function () {
          var a = this.playbackRate;
          if (typeof a == "number" && (a | 0) === a) {
            a = this.playbackRate + ".00";
          } else {
            a = v.string(this.playbackRate);
            if (a.split(".")[1].length < 2) {
              a += "0";
            }
          }
          this.playbackTxt.set_text(a + "x");
        },
        positionSong: function () {
          var a = this.instance.songs[Ta.curSelected].songName.length;
          var b = a < 5;
          this.songTxt.set_x(h.width - this.songTxt.get_width() - 6);
          if (b) {
            var c = this.songTxt;
            c.set_x(c.x - (a * 10 - a));
          }
          this.songBG.scale.set_x(h.width - this.songTxt.x + 12);
          if (b) {
            c = this.songBG;
            c.scale.set_x(c.scale.x + a * 6);
          }
          this.songBG.set_x(h.width - this.songBG.scale.x / 2);
          this.timeTxt.set_x(this.songBG.x + this.songBG.get_width() / 2 | 0);
          c = this.timeTxt;
          c.set_x(c.x - this.timeTxt.get_width() / 2);
          if (b) {
            c = this.timeTxt;
            c.set_x(c.x - (a - 5));
          }
          this.playbackBG.scale.set_x(this.playbackTxt.get_width() + 30);
          this.playbackBG.set_x(this.songBG.x - this.songBG.scale.x / 2);
          c = this.playbackBG;
          c.set_x(c.x - this.playbackBG.scale.x);
          this.playbackTxt.set_x(this.playbackBG.x - this.playbackTxt.get_width() / 2);
          this.playbackTxt.set_y(this.playbackTxt.get_height());
          this.progressBar.setGraphicSize(this.songTxt.get_width() | 0, 5);
          this.progressBar.set_y(this.songTxt.y + this.songTxt.get_height() + 10);
          this.progressBar.set_x(this.songTxt.x + this.songTxt.get_width() / 2 - 15);
          if (b) {
            c = this.progressBar;
            c.scale.set_x(c.scale.x + a / 2);
            c = this.progressBar;
            c.set_x(c.x - (a - 10));
          }
          a = this.playbackSymbols[0];
          a.set_x(this.playbackTxt.x + this.playbackTxt.get_width() / 2 - 10);
          a.set_y(this.playbackTxt.y);
          a.set_y(a.y - this.playbackTxt.get_height());
          a = this.playbackSymbols[1];
          a.set_x(this.playbackTxt.x + this.playbackTxt.get_width() / 2 - 10);
          a.set_y(this.playbackTxt.y);
          a.set_y(a.y + this.playbackTxt.get_height());
        },
        updateTimeTxt: function () {
          var a = Ub.formatTime(h.sound.music._time / 1000, false) + " / " + Ub.formatTime(h.sound.music._length / 1000, false);
          this.timeTxt.set_text("< " + a + " >");
        },
        setPlaybackRate: function () {
          h.sound.music.set_pitch(this.playbackRate);
          if (Ta.vocals != null) {
            Ta.vocals.set_pitch(this.playbackRate);
          }
        },
        get_playing: function () {
          return h.sound.music._channel != null;
        },
        get_paused: function () {
          return h.sound.music._paused;
        },
        set_playbackRate: function (a) {
          a = bc.roundDecimal(a, 2);
          if (a > 3) {
            a = 3;
          } else if (a <= 0.25) {
            a = 0.25;
          }
          return this.playbackRate = a;
        },
        __class__: dm,
        __properties__: q(Qa.prototype.__properties__, {
          set_playbackRate: "set_playbackRate",
          get_paused: "get_paused",
          get_playing: "get_playing"
        })
      });
      function Na(a, b, c, d, e, f) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = false;
        }
        this.correctionOffset = 0;
        this.originalHeight = 6;
        this._lastNoteOffX = 0;
        this.hitsound = "hitsound";
        this.hitsoundChartEditor = true;
        this.hitsoundDisabled = false;
        this.distance = 2000;
        this.noAnimation = this.noMissAnimation = this.hitCausesMiss = false;
        this.texture = null;
        this.ratingDisabled = false;
        this.ratingMod = 0;
        this.rating = "unknown";
        this.missHealth = 0.0475;
        this.hitHealth = 0.023;
        this.copyX = this.copyY = this.copyAngle = this.copyAlpha = true;
        this.multAlpha = this.multSpeed = 1;
        this.offsetX = this.offsetY = this.offsetAngle = 0;
        var k = A.SONG != null ? A.SONG.disableNoteRGB != 1 : true;
        this.noteSplashData = {
          disabled: false,
          texture: null,
          antialiasing: !A.get_isPixelStage(),
          useGlobalShader: false,
          useRGBShader: k,
          r: -1,
          g: -1,
          b: -1,
          a: y.data.splashAlpha
        };
        this.lowPriority = false;
        this.earlyHitMult = this.lateHitMult = 1;
        this.gfNote = false;
        this.animSuffix = "";
        this.inEditor = false;
        this.eventVal1 = this.eventVal2 = "";
        this.eventLength = 0;
        this.eventName = "";
        this.noteType = null;
        this.isSustainNote = false;
        this.sustainLength = 0;
        this.blockHit = false;
        this.tail = [];
        this.mustPress = this.canBeHit = this.tooLate = this.wasGoodHit = this.missed = this.ignoreNote = this.hitByOpponent = this.spawned = false;
        this.strumTime = this.noteData = 0;
        F.call(this);
        this.animation = new lh(this);
        this.set_antialiasing(y.data.antialiasing);
        if (f == null) {
          f = A.instance;
        }
        if (c == null) {
          c = this;
        }
        this.prevNote = c;
        this.isSustainNote = d;
        this.inEditor = e;
        this.set_moves(false);
        this.set_x(this.x + ((y.data.middleScroll ? A.STRUM_X_MIDDLESCROLL : A.STRUM_X) + 50));
        this.set_y(this.y - 2000);
        this.strumTime = a;
        if (!e) {
          this.strumTime += y.data.noteOffset;
        }
        this.noteData = b;
        if (b > -1) {
          this.set_texture("");
          this.rgbShader = new em(this, Na.initializeGlobalRGBShader(b));
          if (A.SONG != null && A.SONG.disableNoteRGB) {
            this.rgbShader.set_enabled(false);
          }
          this.set_x(this.x + Na.swagWidth * b);
          if (!this.isSustainNote && b < Na.colArray.length) {
            this.animation.play(Na.colArray[b % Na.colArray.length] + "Scroll");
          }
        }
        if (c != null) {
          c.nextNote = this;
        }
        if (this.isSustainNote && c != null) {
          this.set_alpha(0.6);
          this.multAlpha = 0.6;
          this.hitsoundDisabled = true;
          if (y.data.downScroll) {
            this.set_flipY(true);
          }
          this.offsetX += this.get_width() / 2;
          this.copyAngle = false;
          this.animation.play(Na.colArray[b % Na.colArray.length] + "holdend");
          this.updateHitbox();
          this.offsetX -= this.get_width() / 2;
          if (A.get_isPixelStage()) {
            this.offsetX += 30;
          }
          if (c.isSustainNote) {
            c.animation.play(Na.colArray[c.noteData % Na.colArray.length] + "hold");
            c.scale.set_y(O.stepCrochet / 100 * c.scale.y * 1.05);
            if (f != null && f.songSpeed != null) {
              c.scale.set_y(c.scale.y * f.songSpeed);
            }
            if (A.get_isPixelStage()) {
              c.scale.set_y(c.scale.y * 1.19);
              c.scale.set_y(c.scale.y * (6 / this.get_height()));
            }
            c.updateHitbox();
          }
          if (A.get_isPixelStage()) {
            this.scale.set_y(this.scale.y * A.daPixelZoom);
            this.updateHitbox();
          }
          this.earlyHitMult = 0;
        } else if (!this.isSustainNote) {
          this.centerOffsets();
          a = this.origin;
          b = this.frameWidth * 0.5;
          c = this.frameHeight * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
        }
        this.set_x(this.x + this.offsetX);
      }
      g["objects.Note"] = Na;
      Na.__name__ = "objects.Note";
      Na.initializeGlobalRGBShader = function (a) {
        if (Na.globalRgbShaders[a] == null) {
          var b = new fm();
          Na.globalRgbShaders[a] = b;
          var c = A.get_isPixelStage() ? y.data.arrowRGBPixel[a] : y.data.arrowRGB[a];
          if (a > -1 && a <= c.length) {
            b.set_r(c[0]);
            b.set_g(c[1]);
            b.set_b(c[2]);
          }
        }
        return Na.globalRgbShaders[a];
      };
      Na.getNoteSkinPostfix = function () {
        var a = "";
        if (y.data.noteSkin != y.defaultData.noteSkin) {
          a = "-" + w.replace(w.trim(y.data.noteSkin).toLowerCase(), " ", "_");
        }
        return a;
      };
      Na.__super__ = F;
      Na.prototype = q(F.prototype, {
        resizeByRatio: function (a) {
          if (this.isSustainNote && this.animation._curAnim != null && !w.endsWith(this.animation._curAnim.name, "end")) {
            this.scale.set_y(this.scale.y * a);
            this.updateHitbox();
          }
        },
        set_texture: function (a) {
          if (this.texture != a) {
            this.reloadNote(a);
          }
          return this.texture = a;
        },
        defaultRGB: function () {
          var a = y.data.arrowRGB[this.noteData];
          if (A.get_isPixelStage()) {
            a = y.data.arrowRGBPixel[this.noteData];
          }
          if (this.noteData > -1 && this.noteData <= a.length) {
            this.rgbShader.set_r(a[0]);
            this.rgbShader.set_g(a[1]);
            this.rgbShader.set_b(a[2]);
          }
        },
        set_noteType: function (a) {
          this.noteSplashData.texture = A.SONG != null ? A.SONG.splashSkin : "noteSplashes";
          this.defaultRGB();
          if (this.noteData > -1 && this.noteType != a) {
            switch (a) {
              case "Alt Animation":
                this.animSuffix = "-alt";
                break;
              case "GF Sing":
                this.gfNote = true;
                break;
              case "Hurt Note":
                this.ignoreNote = this.mustPress;
                this.rgbShader.set_r(-15724528);
                this.rgbShader.set_g(-65536);
                this.rgbShader.set_b(-6750174);
                this.noteSplashData.r = -65536;
                this.noteSplashData.g = -15724528;
                this.noteSplashData.texture = "noteSplashes/noteSplashes-electric";
                this.lowPriority = true;
                this.missHealth = this.isSustainNote ? 0.25 : 0.1;
                this.hitCausesMiss = true;
                this.hitsound = "cancelMenu";
                this.hitsoundChartEditor = false;
                break;
              case "No Animation":
                this.noMissAnimation = this.noAnimation = true;
            }
            if (this.hitsound != "hitsound" && y.data.hitsoundVolume > 0) {
              D.sound(this.hitsound);
            }
            this.noteType = a;
          }
          return a;
        },
        reloadNote: function (a, b) {
          if (b == null) {
            b = "";
          }
          if (a == null) {
            a = "";
          }
          if (a == null) {
            a = "";
          }
          if (b == null) {
            b = "";
          }
          var c = a + b;
          if (a.length < 1 && (c = A.SONG != null ? A.SONG.arrowSkin : null, c == null || c.length < 1)) {
            c = Na.defaultNoteSkin + b;
          }
          a = null;
          if (this.animation._curAnim != null) {
            a = this.animation._curAnim.name;
          }
          var d = c;
          b = this.scale.y;
          var e = Na.getNoteSkinPostfix();
          var f = c + e;
          var k = A.get_isPixelStage() ? "pixelUI/" : "";
          if (f == Na._lastValidChecked || D.fileExists("images/" + k + f + ".png", "IMAGE")) {
            c = f;
            Na._lastValidChecked = f;
          } else {
            e = "";
          }
          if (A.get_isPixelStage()) {
            if (this.isSustainNote) {
              c = D.image("pixelUI/" + d + "ENDS" + e);
              this.loadGraphic(c, true, Math.floor(c.width / 4), Math.floor(c.height / 2));
              this.originalHeight = c.height / 2;
            } else {
              c = D.image("pixelUI/" + d + e);
              this.loadGraphic(c, true, Math.floor(c.width / 4), Math.floor(c.height / 5));
            }
            this.setGraphicSize(this.get_width() * A.daPixelZoom | 0);
            this.loadPixelNoteAnims();
            this.set_antialiasing(false);
            if (this.isSustainNote) {
              this.offsetX += this._lastNoteOffX;
              this._lastNoteOffX = (this.get_width() - 7) * (A.daPixelZoom / 2);
              this.offsetX -= this._lastNoteOffX;
            }
          } else {
            d = D.image(c, null, true);
            this.set_frames(ob.fromSparrow(d, D.getPath("images/" + c + ".xml", null, null)));
            this.loadNoteAnims();
            if (!this.isSustainNote) {
              this.centerOffsets();
              c = this.origin;
              d = this.frameWidth * 0.5;
              e = this.frameHeight * 0.5;
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.set_x(d);
              c.set_y(e);
            }
          }
          if (this.isSustainNote) {
            this.scale.set_y(b);
          }
          this.updateHitbox();
          if (a != null) {
            this.animation.play(a, true);
          }
        },
        loadNoteAnims: function () {
          if (this.isSustainNote) {
            this.attemptToAddAnimationByPrefix("purpleholdend", "pruple end hold", 24, true);
            this.animation.addByPrefix(Na.colArray[this.noteData] + "holdend", Na.colArray[this.noteData] + " hold end", 24, true);
            this.animation.addByPrefix(Na.colArray[this.noteData] + "hold", Na.colArray[this.noteData] + " hold piece", 24, true);
          } else {
            this.animation.addByPrefix(Na.colArray[this.noteData] + "Scroll", Na.colArray[this.noteData] + "0");
          }
          this.setGraphicSize(this.get_width() * 0.7 | 0);
          this.updateHitbox();
        },
        loadPixelNoteAnims: function () {
          if (this.isSustainNote) {
            this.animation.add(Na.colArray[this.noteData] + "holdend", [this.noteData + 4], 24, true);
            this.animation.add(Na.colArray[this.noteData] + "hold", [this.noteData], 24, true);
          } else {
            this.animation.add(Na.colArray[this.noteData] + "Scroll", [this.noteData + 4], 24, true);
          }
        },
        attemptToAddAnimationByPrefix: function (a, b, c, d) {
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = 24;
          }
          var e = [];
          this.animation.findByPrefix(e, b);
          if (!(e.length < 1)) {
            this.animation.addByPrefix(a, b, c, d);
          }
        },
        update: function (a) {
          F.prototype.update.call(this, a);
          if (this.mustPress) {
            this.canBeHit = this.strumTime > O.songPosition - O.safeZoneOffset * this.lateHitMult && this.strumTime < O.songPosition + O.safeZoneOffset * this.earlyHitMult;
            if (this.strumTime < O.songPosition - O.safeZoneOffset && !this.wasGoodHit) {
              this.tooLate = true;
            }
          } else {
            this.canBeHit = false;
            if (this.strumTime < O.songPosition + O.safeZoneOffset * this.earlyHitMult && (this.isSustainNote && this.prevNote.wasGoodHit || this.strumTime <= O.songPosition)) {
              this.wasGoodHit = true;
            }
          }
          if (this.tooLate && !this.inEditor && this.alpha > 0.3) {
            this.set_alpha(0.3);
          }
        },
        destroy: function () {
          F.prototype.destroy.call(this);
          Na._lastValidChecked = "";
        },
        followStrumNote: function (a, b, c) {
          if (c == null) {
            c = 1;
          }
          b = a.x;
          var d = a.y;
          var e = a.angle;
          var f = a.alpha;
          var k = a.direction;
          this.distance = (O.songPosition - this.strumTime) * 0.45 * c * this.multSpeed;
          if (!a.downScroll) {
            this.distance *= -1;
          }
          c = k * Math.PI / 180;
          if (this.copyAngle) {
            this.set_angle(k - 90 + e + this.offsetAngle);
          }
          if (this.copyAlpha) {
            this.set_alpha(f * this.multAlpha);
          }
          if (this.copyX) {
            this.set_x(b + this.offsetX + Math.cos(c) * this.distance);
          }
          if (this.copyY) {
            this.set_y(d + this.offsetY + this.correctionOffset + Math.sin(c) * this.distance);
            if (a.downScroll && this.isSustainNote) {
              if (A.get_isPixelStage()) {
                this.set_y(this.y - A.daPixelZoom * 9.5);
              }
              this.set_y(this.y - (this.frameHeight * this.scale.y - Na.swagWidth / 2));
            }
          }
        },
        clipToStrumNote: function (a) {
          var b = a.y + this.offsetY + Na.swagWidth / 2;
          if (this.isSustainNote && (this.mustPress || !this.ignoreNote) && (!this.mustPress || this.wasGoodHit || this.prevNote.wasGoodHit && !this.canBeHit)) {
            var c = this.clipRect;
            if (c == null) {
              c = new Ha(0, 0, this.frameWidth, this.frameHeight);
            }
            if (a.downScroll) {
              if (this.y - this.offset.y * this.scale.y + this.get_height() >= b) {
                c.width = this.frameWidth;
                c.height = (b - this.y) / this.scale.y;
                c.y = this.frameHeight - c.height;
              }
            } else if (this.y + this.offset.y * this.scale.y <= b) {
              c.y = (b - this.y) / this.scale.y;
              c.width = this.get_width() / this.scale.x;
              c.height = this.get_height() / this.scale.y - c.y;
            }
            this.set_clipRect(c);
          }
        },
        set_clipRect: function (a) {
          this.clipRect = a;
          if (this.frames != null) {
            this.set_frame(this.frames.frames[this.animation.frameIndex]);
          }
          return a;
        },
        __class__: Na,
        __properties__: q(F.prototype.__properties__, {
          set_texture: "set_texture",
          set_noteType: "set_noteType"
        })
      });
      function ec(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.maxAnims = 2;
        this._textureLoaded = this._configLoaded = null;
        F.call(this, a, b);
        this.animation = new lh(this);
        a = A.SONG.splashSkin != null && A.SONG.splashSkin.length > 0 ? A.SONG.splashSkin : ec.defaultNoteSplash + ec.getSplashSkinPostfix();
        this.rgbShader = new Fo();
        this.shader = this.rgbShader.shader;
        ec.precacheConfig(a);
        this._configLoaded = a;
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      g["objects.NoteSplash"] = ec;
      ec.__name__ = "objects.NoteSplash";
      ec.getSplashSkinPostfix = function () {
        var a = "";
        if (y.data.splashSkin != y.defaultData.splashSkin) {
          a = "-" + w.replace(w.trim(y.data.splashSkin).toLowerCase(), " ", "_");
        }
        return a;
      };
      ec.precacheConfig = function (a) {
        if (Object.prototype.hasOwnProperty.call(ec.configs.h, a)) {
          return ec.configs.h[a];
        }
        var b = D.getPath("images/" + a + ".txt", "TEXT", null, true);
        var c = null;
        if (Q.exists(b)) {
          c = Q.getText(b);
        }
        if (c != null) {
          var d = w.trim(c).split("\n");
          b = 0;
          for (c = d.length; b < c;) {
            var e = b++;
            d[e] = w.trim(d[e]);
          }
        } else {
          d = [];
        }
        if (d.length < 1) {
          return null;
        }
        var f = d[1].split(" ");
        var k = [];
        b = 2;
        for (c = d.length; b < c;) {
          e = b++;
          e = d[e].split(" ");
          k.push([parseFloat(e[0]), parseFloat(e[1])]);
        }
        b = {
          anim: d[0],
          minFps: v.parseInt(f[0]),
          maxFps: v.parseInt(f[1]),
          offsets: k
        };
        return ec.configs.h[a] = b;
      };
      ec.__super__ = F;
      ec.prototype = q(F.prototype, {
        destroy: function () {
          ec.configs.h = Object.create(null);
          F.prototype.destroy.call(this);
        },
        setupNoteSplash: function (a, b, c, d) {
          if (c == null) {
            c = 0;
          }
          this.setPosition(a - Na.swagWidth * 0.95, b - Na.swagWidth);
          ec.aliveTime = 0;
          a = d != null && d.noteSplashData.texture != null ? d.noteSplashData.texture : A.SONG.splashSkin != null && A.SONG.splashSkin.length > 0 ? A.SONG.splashSkin : ec.defaultNoteSplash + ec.getSplashSkinPostfix();
          var e = this._textureLoaded != a ? this.loadAnims(a) : ec.precacheConfig(this._configLoaded);
          b = null;
          if ((d == null || !!d.noteSplashData.useRGBShader) && (A.SONG == null || !A.SONG.disableNoteRGB)) {
            if (d == null || d.noteSplashData.useGlobalShader) {
              b = Na.globalRgbShaders[c];
            } else {
              if (d.noteSplashData.r != -1) {
                d.rgbShader.set_r(d.noteSplashData.r);
              }
              if (d.noteSplashData.g != -1) {
                d.rgbShader.set_g(d.noteSplashData.g);
              }
              if (d.noteSplashData.b != -1) {
                d.rgbShader.set_b(d.noteSplashData.b);
              }
              b = d.rgbShader.parent;
            }
          }
          this.set_alpha(y.data.splashAlpha);
          if (d != null) {
            this.set_alpha(d.noteSplashData.a);
          }
          this.rgbShader.copyValues(b);
          if (d != null) {
            this.set_antialiasing(d.noteSplashData.antialiasing);
          }
          if (!!A.get_isPixelStage() || !y.data.antialiasing) {
            this.set_antialiasing(false);
          }
          this._textureLoaded = a;
          d = this.offset;
          b = a = 10;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          d.set_x(a);
          d.set_y(b);
          d = h.random.int(1, this.maxAnims);
          this.animation.play("note" + c + "-" + d, true);
          a = 22;
          b = 26;
          if (e != null) {
            c = e.offsets[bc.wrap(c + (d - 1) * Na.colArray.length, 0, e.offsets.length - 1)];
            this.offset.set_x(this.offset.x + c[0]);
            this.offset.set_y(this.offset.y + c[1]);
            a = e.minFps;
            b = e.maxFps;
          } else {
            this.offset.set_x(this.offset.x + -58);
            this.offset.set_y(this.offset.y + -55);
          }
          if (this.animation._curAnim != null) {
            this.animation._curAnim.set_frameRate(h.random.int(a, b));
          }
        },
        loadAnims: function (a, b) {
          this.maxAnims = 0;
          var c = null;
          var d = D.image(a, c, true);
          this.set_frames(ob.fromSparrow(d, D.getPath("images/" + a + ".xml", null, c)));
          if (this.frames == null) {
            a = ec.defaultNoteSplash + ec.getSplashSkinPostfix();
            c = null;
            d = D.image(a, c, true);
            this.set_frames(ob.fromSparrow(d, D.getPath("images/" + a + ".xml", null, c)));
            if (this.frames == null) {
              a = ec.defaultNoteSplash;
              c = null;
              d = D.image(a, c, true);
              this.set_frames(ob.fromSparrow(d, D.getPath("images/" + a + ".xml", null, c)));
            }
          }
          c = ec.precacheConfig(a);
          this._configLoaded = a;
          for (b == null && (b = c != null ? c.anim : "note splash");;) {
            a = this.maxAnims + 1;
            d = 0;
            for (var e = Na.colArray.length; d < e;) {
              var f = d++;
              if (!this.addAnimAndCheck("note" + f + "-" + a, "" + b + " " + Na.colArray[f] + " " + a, 24, false)) {
                return c;
              }
            }
            this.maxAnims++;
          }
        },
        addAnimAndCheck: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 24;
          }
          var e = [];
          this.animation.findByPrefix(e, b);
          if (e.length < 1) {
            return false;
          }
          this.animation.addByPrefix(a, b, c, d);
          return true;
        },
        update: function (a) {
          ec.aliveTime += a;
          if (this.animation._curAnim != null && this.animation._curAnim.finished || this.animation._curAnim == null && ec.aliveTime >= ec.buggedKillTime) {
            this.kill();
          }
          F.prototype.update.call(this, a);
        },
        __class__: ec
      });
      function Fo() {
        this.shader = new gm();
        this.shader.r.value = [0, 0, 0];
        this.shader.g.value = [0, 0, 0];
        this.shader.b.value = [0, 0, 0];
        this.shader.mult.value = [1];
        var a = 1;
        if (A.get_isPixelStage()) {
          a = A.daPixelZoom;
        }
        this.shader.uBlocksize.value = [a, a];
      }
      g["objects.PixelSplashShaderRef"] = Fo;
      Fo.__name__ = "objects.PixelSplashShaderRef";
      Fo.prototype = {
        copyValues: function (a) {
          var b = false;
          if (a != null) {
            b = true;
          }
          if (b) {
            this.shader.r.value[0] = a.shader.r.value[0];
            this.shader.g.value[0] = a.shader.g.value[0];
            this.shader.b.value[0] = a.shader.b.value[0];
            this.shader.r.value[1] = a.shader.r.value[1];
            this.shader.g.value[1] = a.shader.g.value[1];
            this.shader.b.value[1] = a.shader.b.value[1];
            this.shader.r.value[2] = a.shader.r.value[2];
            this.shader.g.value[2] = a.shader.g.value[2];
            this.shader.b.value[2] = a.shader.b.value[2];
            this.shader.mult.value[0] = a.shader.mult.value[0];
          } else {
            this.shader.mult.value[0] = 0;
          }
        },
        __class__: Fo
      };
      function gm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\n\n\t\t#pragma header\n\t\t\n\t\tuniform vec3 r;\n\t\tuniform vec3 g;\n\t\tuniform vec3 b;\n\t\tuniform float mult;\n\t\tuniform vec2 uBlocksize;\n\n\t\tvec4 flixel_texture2DCustom(sampler2D bitmap, vec2 coord) {\n\t\t\tvec2 blocks = openfl_TextureSize / uBlocksize;\n\t\t\tvec4 color = flixel_texture2D(bitmap, floor(coord * blocks) / blocks);\n\t\t\tif (!hasTransform) {\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif(color.a == 0.0 || mult == 0.0) {\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tvec4 newColor = color;\n\t\t\tnewColor.rgb = min(color.r * r + color.g * g + color.b * b, vec3(1.0));\n\t\t\tnewColor.a = color.a;\n\t\t\t\n\t\t\tcolor = mix(color, newColor, mult);\n\t\t\t\n\t\t\tif(color.a > 0.0) {\n\t\t\t\treturn vec4(color.rgb, color.a);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = flixel_texture2DCustom(bitmap, openfl_TextureCoordv);\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\t\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\t\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\t\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        Wd.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      g["objects.PixelSplashShader"] = gm;
      gm.__name__ = "objects.PixelSplashShader";
      gm.__super__ = Wd;
      gm.prototype = q(Wd.prototype, {
        __class__: gm
      });
      function ug(a, b, c, d) {
        this.useRGBShader = true;
        this.texture = null;
        this.sustainReduce = true;
        this.downScroll = false;
        this.direction = 90;
        this.resetAnim = this.noteData = 0;
        this.animation = new lh(this);
        this.rgbShader = new em(this, Na.initializeGlobalRGBShader(c));
        this.rgbShader.set_enabled(false);
        if (A.SONG != null && A.SONG.disableNoteRGB) {
          this.useRGBShader = false;
        }
        var e = y.data.arrowRGB[c];
        if (A.get_isPixelStage()) {
          e = y.data.arrowRGBPixel[c];
        }
        if (c <= e.length) {
          this.rgbShader.set_r(e[0]);
          this.rgbShader.set_g(e[1]);
          this.rgbShader.set_b(e[2]);
        }
        this.player = d;
        this.noteData = c;
        F.call(this, a, b);
        a = A.SONG != null && A.SONG.arrowSkin != null && A.SONG.arrowSkin.length > 1 ? A.SONG.arrowSkin : Na.defaultNoteSkin;
        b = a + Na.getNoteSkinPostfix();
        if (D.fileExists("images/" + b + ".png", "IMAGE")) {
          a = b;
        }
        this.set_texture(a);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      g["objects.StrumNote"] = ug;
      ug.__name__ = "objects.StrumNote";
      ug.__super__ = F;
      ug.prototype = q(F.prototype, {
        set_texture: function (a) {
          if (this.texture != a) {
            this.texture = a;
            this.reloadNote();
          }
          return a;
        },
        reloadNote: function () {
          var a = null;
          if (this.animation._curAnim != null) {
            a = this.animation._curAnim.name;
          }
          if (A.get_isPixelStage()) {
            this.loadGraphic(D.image("pixelUI/" + this.texture));
            this.set_width(this.get_width() / 4);
            this.set_height(this.get_height() / 5);
            this.loadGraphic(D.image("pixelUI/" + this.texture), true, Math.floor(this.get_width()), Math.floor(this.get_height()));
            this.set_antialiasing(false);
            this.setGraphicSize(this.get_width() * A.daPixelZoom | 0);
            this.animation.add("green", [6]);
            this.animation.add("red", [7]);
            this.animation.add("blue", [5]);
            this.animation.add("purple", [4]);
            switch (Math.abs(this.noteData) % 4) {
              case 0:
                this.animation.add("static", [0]);
                this.animation.add("pressed", [4, 8], 12, false);
                this.animation.add("confirm", [12, 16], 24, false);
                break;
              case 1:
                this.animation.add("static", [1]);
                this.animation.add("pressed", [5, 9], 12, false);
                this.animation.add("confirm", [13, 17], 24, false);
                break;
              case 2:
                this.animation.add("static", [2]);
                this.animation.add("pressed", [6, 10], 12, false);
                this.animation.add("confirm", [14, 18], 12, false);
                break;
              case 3:
                this.animation.add("static", [3]);
                this.animation.add("pressed", [7, 11], 12, false);
                this.animation.add("confirm", [15, 19], 24, false);
            }
          } else {
            var b = this.texture;
            var c = D.image(b, null, true);
            this.set_frames(ob.fromSparrow(c, D.getPath("images/" + b + ".xml", null, null)));
            this.animation.addByPrefix("green", "arrowUP");
            this.animation.addByPrefix("blue", "arrowDOWN");
            this.animation.addByPrefix("purple", "arrowLEFT");
            this.animation.addByPrefix("red", "arrowRIGHT");
            this.set_antialiasing(y.data.antialiasing);
            this.setGraphicSize(this.get_width() * 0.7 | 0);
            switch (Math.abs(this.noteData) % 4) {
              case 0:
                this.animation.addByPrefix("static", "arrowLEFT");
                this.animation.addByPrefix("pressed", "left press", 24, false);
                this.animation.addByPrefix("confirm", "left confirm", 24, false);
                break;
              case 1:
                this.animation.addByPrefix("static", "arrowDOWN");
                this.animation.addByPrefix("pressed", "down press", 24, false);
                this.animation.addByPrefix("confirm", "down confirm", 24, false);
                break;
              case 2:
                this.animation.addByPrefix("static", "arrowUP");
                this.animation.addByPrefix("pressed", "up press", 24, false);
                this.animation.addByPrefix("confirm", "up confirm", 24, false);
                break;
              case 3:
                this.animation.addByPrefix("static", "arrowRIGHT");
                this.animation.addByPrefix("pressed", "right press", 24, false);
                this.animation.addByPrefix("confirm", "right confirm", 24, false);
            }
          }
          this.updateHitbox();
          if (a != null) {
            this.playAnim(a, true);
          }
        },
        postAddedToGroup: function () {
          this.playAnim("static");
          this.set_x(this.x + Na.swagWidth * this.noteData);
          this.set_x(this.x + 50);
          this.set_x(this.x + h.width / 2 * this.player);
          this.ID = this.noteData;
        },
        update: function (a) {
          if (this.resetAnim > 0) {
            this.resetAnim -= a;
            if (this.resetAnim <= 0) {
              this.playAnim("static");
              this.resetAnim = 0;
            }
          }
          F.prototype.update.call(this, a);
        },
        playAnim: function (a, b) {
          if (b == null) {
            b = false;
          }
          this.animation.play(a, b);
          if (this.animation._curAnim != null) {
            this.centerOffsets();
            a = this.origin;
            b = this.frameWidth * 0.5;
            var c = this.frameHeight * 0.5;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
          }
          if (this.useRGBShader) {
            this.rgbShader.set_enabled(this.animation._curAnim != null && this.animation._curAnim.name != "static");
          }
        },
        __class__: ug,
        __properties__: q(F.prototype.__properties__, {
          set_texture: "set_texture"
        })
      });
      function Rh(a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0.05;
        }
        if (c == null) {
          c = "";
        }
        this._timeToUpdate = 0;
        this._curLetter = -1;
        this.volume = 1;
        this.sound = "dialogue";
        this.delay = 0.05;
        this.finishedText = false;
        this.onFinish = null;
        Gb.call(this, a, b, c, e);
        this.delay = d;
      }
      g["objects.TypedAlphabet"] = Rh;
      Rh.__name__ = "objects.TypedAlphabet";
      Rh.__super__ = Gb;
      Rh.prototype = q(Gb.prototype, {
        set_text: function (a) {
          Gb.prototype.set_text.call(this, a);
          this.resetDialogue();
          return a;
        },
        update: function (a) {
          if (!this.finishedText) {
            var b = false;
            for (this._timeToUpdate += a; this._timeToUpdate >= this.delay;) {
              this.showCharacterUpTo(this._curLetter + 1);
              if (!b && this.sound != "" && (this.delay > 0.025 || this._curLetter % 2 == 0)) {
                h.sound.play(D.sound(this.sound), this.volume);
              }
              b = true;
              this._curLetter++;
              if (this._curLetter >= this.letters.length - 1) {
                this.finishedText = true;
                if (this.onFinish != null) {
                  this.onFinish();
                }
                this._timeToUpdate = 0;
                break;
              }
              this._timeToUpdate = 0;
            }
          }
          Gb.prototype.update.call(this, a);
        },
        showCharacterUpTo: function (a) {
          var b = this._curLetter;
          if (b < 0) {
            b = 0;
          }
          for (a += 1; b < a;) {
            var c = b++;
            if (this.letters[c] != null) {
              this.letters[c].set_visible(true);
            }
          }
        },
        resetDialogue: function () {
          this._curLetter = -1;
          this.finishedText = false;
          for (var a = this._timeToUpdate = 0, b = this.letters; a < b.length;) {
            var c = b[a];
            ++a;
            c.set_visible(false);
          }
        },
        finishText: function () {
          if (!this.finishedText) {
            this.showCharacterUpTo(this.letters.length - 1);
            if (this.sound != "") {
              h.sound.play(D.sound(this.sound), this.volume);
            }
            this.finishedText = true;
            if (this.onFinish != null) {
              this.onFinish();
            }
            this._timeToUpdate = 0;
          }
        },
        __class__: Rh
      });
      function oa() {}
      g["openfl.Lib"] = oa;
      oa.__name__ = "openfl.Lib";
      oa.__properties__ = {
        get_current: "get_current"
      };
      oa.getTimer = function () {
        return $c.getTimer();
      };
      oa.getURL = function (a, b) {
        oa.navigateToURL(a, b);
      };
      oa.navigateToURL = function (a, b) {
        if (b == null) {
          b = "_blank";
        }
        var c = a.url;
        if (yb.typeof(a.data) == Bc.TObject) {
          var d = "";
          for (var e = ja.fields(a.data), f = 0; f < e.length;) {
            var k = e[f];
            ++f;
            if (d.length > 0) {
              d += "&";
            }
            var h = encodeURIComponent(k) + "=";
            k = v.string(ja.field(a.data, k));
            d += h + encodeURIComponent(k);
          }
          c = c.indexOf("?") > -1 ? c + ("&" + d) : c + ("?" + d);
        }
        $c.openURL(c, b);
      };
      oa.setTimeout = function (a, b, c) {
        var d = ++oa.__lastTimerID;
        var e = oa.__timers;
        b = gg.delay(function () {
          oa.__timers.remove(d);
          a.apply(a, c == null ? [] : c);
        }, b);
        e.h[d] = b;
        return d;
      };
      oa.get_current = function () {
        if (yd.current == null) {
          yd.current = new Lj();
        }
        return yd.current;
      };
      function vg() {}
      g["openfl._Vector.IVector"] = vg;
      vg.__name__ = "openfl._Vector.IVector";
      vg.__isInterface__ = true;
      vg.prototype = {
        __class__: vg
      };
      function hm(a, b, c) {
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (c == null) {
          c = [];
        }
        this.__array = c;
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      g["openfl._Vector.BoolVector"] = hm;
      hm.__name__ = "openfl._Vector.BoolVector";
      hm.__interfaces__ = [vg];
      hm.prototype = {
        toJSON: function () {
          return this.__array;
        },
        set_length: function (a) {
          if (!this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                var c = b++;
                this.__array[c] = false;
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: hm,
        __properties__: {
          set_length: "set_length"
        }
      };
      function Rf(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (d) {
          this.__array = [];
          if (c != null) {
            d = 0;
            for (var e = c.length; d < e;) {
              var f = d++;
              this.__array[f] = c[f];
            }
          }
        } else {
          if (c == null) {
            c = [];
          }
          this.__array = c;
        }
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      g["openfl._Vector.FloatVector"] = Rf;
      Rf.__name__ = "openfl._Vector.FloatVector";
      Rf.__interfaces__ = [vg];
      Rf.prototype = {
        concat: function (a) {
          if (a == null) {
            return new Rf(0, false, this.__array.slice());
          } else if (a.__array.length > 0) {
            return new Rf(0, false, this.__array.concat(a.__array));
          } else {
            return new Rf(0, false, this.__array.slice());
          }
        },
        copy: function () {
          return new Rf(0, this.fixed, this.__array.slice());
        },
        get: function (a) {
          return this.__array[a];
        },
        insertAt: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            this.__array.splice(a, 0, b);
          }
        },
        push: function (a) {
          if (this.fixed) {
            return this.__array.length;
          } else {
            return this.__array.push(a);
          }
        },
        set: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            return this.__array[a] = b;
          } else {
            return b;
          }
        },
        splice: function (a, b) {
          return new Rf(0, false, this.__array.splice(a, b));
        },
        toJSON: function () {
          return this.__array;
        },
        get_length: function () {
          return this.__array.length;
        },
        set_length: function (a) {
          if (a != this.__array.length && !this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                var c = b++;
                this.__array[c] = 0;
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: Rf,
        __properties__: {
          set_length: "set_length",
          get_length: "get_length"
        }
      };
      function im(a, b, c) {
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (c == null) {
          c = [];
        }
        this.__array = c;
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      g["openfl._Vector.FunctionVector"] = im;
      im.__name__ = "openfl._Vector.FunctionVector";
      im.__interfaces__ = [vg];
      im.prototype = {
        toJSON: function () {
          return this.__array;
        },
        set_length: function (a) {
          if (!this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                var c = b++;
                this.__array[c] = null;
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: im,
        __properties__: {
          set_length: "set_length"
        }
      };
      function Lh(a, b, c) {
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (c == null) {
          c = [];
        }
        this.__array = c;
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      g["openfl._Vector.IntVector"] = Lh;
      Lh.__name__ = "openfl._Vector.IntVector";
      Lh.__interfaces__ = [vg];
      Lh.prototype = {
        get: function (a) {
          return this.__array[a];
        },
        insertAt: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            this.__array.splice(a, 0, b);
          }
        },
        iterator: function () {
          return new Qf(this.__array);
        },
        push: function (a) {
          if (this.fixed) {
            return this.__array.length;
          } else {
            return this.__array.push(a);
          }
        },
        set: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            return this.__array[a] = b;
          } else {
            return b;
          }
        },
        splice: function (a, b) {
          return new Lh(0, false, this.__array.splice(a, b));
        },
        toJSON: function () {
          return this.__array;
        },
        get_length: function () {
          return this.__array.length;
        },
        set_length: function (a) {
          if (!this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                var c = b++;
                this.__array[c] = 0;
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: Lh,
        __properties__: {
          set_length: "set_length",
          get_length: "get_length"
        }
      };
      function hh(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (d) {
          this.__array = [];
          if (c != null) {
            d = 0;
            for (var e = c.length; d < e;) {
              var f = d++;
              this.__array[f] = c[f];
            }
          }
        } else {
          if (c == null) {
            c = [];
          }
          this.__array = c;
        }
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      g["openfl._Vector.ObjectVector"] = hh;
      hh.__name__ = "openfl._Vector.ObjectVector";
      hh.__interfaces__ = [vg];
      hh.prototype = {
        get: function (a) {
          return this.__array[a];
        },
        indexOf: function (a, b) {
          if (b == null) {
            b = 0;
          }
          for (var c = this.__array.length; b < c;) {
            var d = b++;
            if (this.__array[d] == a) {
              return d;
            }
          }
          return -1;
        },
        insertAt: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            this.__array.splice(a, 0, b);
          }
        },
        iterator: function () {
          return new Qf(this.__array);
        },
        push: function (a) {
          if (this.fixed) {
            return this.__array.length;
          } else {
            return this.__array.push(a);
          }
        },
        removeAt: function (a) {
          if (!this.fixed || a < this.__array.length) {
            return this.__array.splice(a, 1)[0];
          } else {
            return null;
          }
        },
        set: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            return this.__array[a] = b;
          } else {
            return b;
          }
        },
        splice: function (a, b) {
          return new hh(0, false, this.__array.splice(a, b));
        },
        toJSON: function () {
          return this.__array;
        },
        unshift: function (a) {
          if (!this.fixed) {
            this.__array.unshift(a);
          }
        },
        get_length: function () {
          return this.__array.length;
        },
        set_length: function (a) {
          if (!this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                b++;
                this.__array.push(null);
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: hh,
        __properties__: {
          set_length: "set_length",
          get_length: "get_length"
        }
      };
      function Ji() {
        ia.call(this);
        if (yd.application == null) {
          yd.application = this;
        }
        if (yd.current == null) {
          yd.current = new Lj();
        }
        yd.current.__loaderInfo = Lf.create(null);
        yd.current.__loaderInfo.content = yd.current;
      }
      g["openfl.display.Application"] = Ji;
      Ji.__name__ = "openfl.display.Application";
      Ji.__super__ = ia;
      Ji.prototype = q(ia.prototype, {
        createWindow: function (a) {
          var b = new Mj(this, a);
          this.__windows.push(b);
          this.__windowByID.h[b.id] = b;
          var c = this;
          b.onClose.add(function () {
            c.__onWindowClose(b);
          }, false, -10000);
          if (this.__window == null) {
            this.__window = b;
            b.onActivate.add(m(this, this.onWindowActivate));
            b.onRenderContextLost.add(m(this, this.onRenderContextLost));
            b.onRenderContextRestored.add(m(this, this.onRenderContextRestored));
            b.onDeactivate.add(m(this, this.onWindowDeactivate));
            b.onDropFile.add(m(this, this.onWindowDropFile));
            b.onEnter.add(m(this, this.onWindowEnter));
            b.onExpose.add(m(this, this.onWindowExpose));
            b.onFocusIn.add(m(this, this.onWindowFocusIn));
            b.onFocusOut.add(m(this, this.onWindowFocusOut));
            b.onFullscreen.add(m(this, this.onWindowFullscreen));
            b.onKeyDown.add(m(this, this.onKeyDown));
            b.onKeyUp.add(m(this, this.onKeyUp));
            b.onLeave.add(m(this, this.onWindowLeave));
            b.onMinimize.add(m(this, this.onWindowMinimize));
            b.onMouseDown.add(m(this, this.onMouseDown));
            b.onMouseMove.add(m(this, this.onMouseMove));
            b.onMouseMoveRelative.add(m(this, this.onMouseMoveRelative));
            b.onMouseUp.add(m(this, this.onMouseUp));
            b.onMouseWheel.add(m(this, this.onMouseWheel));
            b.onMove.add(m(this, this.onWindowMove));
            b.onRender.add(m(this, this.render));
            b.onResize.add(m(this, this.onWindowResize));
            b.onRestore.add(m(this, this.onWindowRestore));
            b.onTextEdit.add(m(this, this.onTextEdit));
            b.onTextInput.add(m(this, this.onTextInput));
            this.onWindowCreate();
          }
          this.onCreateWindow.dispatch(b);
          return b;
        },
        exec: function () {
          return ia.prototype.exec.call(this);
        },
        __checkForAllWindowsClosed: function () {
          if (!(this.__windows.length > 0)) {
            ia.prototype.__checkForAllWindowsClosed.call(this);
          }
        },
        __onModuleExit: function (a) {
          if (!this.onExit.canceled) {
            if (yd.application == this) {
              yd.application = null;
            }
            ia.prototype.__onModuleExit.call(this, a);
          }
        },
        __class__: Ji
      });
      function Nc(a, b, c) {
        if (c == null) {
          c = false;
        }
        wa.call(this);
        this.__drawableType = 2;
        this.__bitmapData = a;
        this.pixelSnapping = b;
        this.smoothing = c;
        if (b == null) {
          this.pixelSnapping = 1;
        }
      }
      g["openfl.display.Bitmap"] = Nc;
      Nc.__name__ = "openfl.display.Bitmap";
      Nc.__super__ = wa;
      Nc.prototype = q(wa.prototype, {
        __enterFrame: function (a) {
          if (this.__bitmapData != null && this.__bitmapData.image != null && this.__bitmapData.image.version != this.__imageVersion && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
        },
        __getBounds: function (a, b) {
          var c = da.__pool.get();
          if (this.__bitmapData != null) {
            c.setTo(0, 0, this.__bitmapData.width, this.__bitmapData.height);
          } else {
            c.setTo(0, 0, 0, 0);
          }
          c.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          da.__pool.release(c);
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || this.__bitmapData == null || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          this.__getRenderTransform();
          var k = this.__renderTransform;
          var h = k.a * k.d - k.b * k.c;
          c = h == 0 ? -k.tx : 1 / h * (k.c * (k.ty - b) + k.d * (a - k.tx));
          k = this.__renderTransform;
          h = k.a * k.d - k.b * k.c;
          a = h == 0 ? -k.ty : 1 / h * (k.a * (b - k.ty) + k.b * (k.tx - a));
          if (c > 0 && a > 0 && c <= this.__bitmapData.width && a <= this.__bitmapData.height) {
            if (this.__scrollRect != null && !this.__scrollRect.contains(c, a)) {
              return false;
            }
            if (d != null && !e) {
              d.push(f);
            }
            return true;
          }
          return false;
        },
        __hitTestMask: function (a, b) {
          if (this.__bitmapData == null) {
            return false;
          }
          this.__getRenderTransform();
          var c = this.__renderTransform;
          var d = c.a * c.d - c.b * c.c;
          var e = d == 0 ? -c.tx : 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx));
          c = this.__renderTransform;
          d = c.a * c.d - c.b * c.c;
          a = d == 0 ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a));
          if (e > 0 && a > 0 && e <= this.__bitmapData.width && a <= this.__bitmapData.height) {
            return true;
          } else {
            return false;
          }
        },
        get_bitmapData: function () {
          return this.__bitmapData;
        },
        set_bitmapData: function (a) {
          this.__bitmapData = a;
          this.smoothing = false;
          if (!this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          this.__imageVersion = -1;
          return this.__bitmapData;
        },
        set_height: function (a) {
          if (this.__bitmapData != null) {
            this.set_scaleY(a / this.__bitmapData.height);
          } else {
            this.set_scaleY(0);
          }
          return a;
        },
        set_width: function (a) {
          if (this.__bitmapData != null) {
            this.set_scaleX(a / this.__bitmapData.width);
          } else {
            this.set_scaleX(0);
          }
          return a;
        },
        __class__: Nc,
        __properties__: q(wa.prototype.__properties__, {
          set_bitmapData: "set_bitmapData",
          get_bitmapData: "get_bitmapData"
        })
      });
      function ce() {
        pa.call(this);
        this.__allowSmoothing = true;
        this.__pixelRatio = 1;
        this.__tempColorTransform = new Lb();
        this.__worldAlpha = 1;
      }
      g["openfl.display.DisplayObjectRenderer"] = ce;
      ce.__name__ = "openfl.display.DisplayObjectRenderer";
      ce.__super__ = pa;
      ce.prototype = q(pa.prototype, {
        __clear: function () {},
        __getAlpha: function (a) {
          return a * this.__worldAlpha;
        },
        __popMaskObject: function (a, b) {},
        __pushMaskObject: function (a, b) {},
        __render: function (a) {},
        __renderEvent: function (a) {
          if (a.__customRenderEvent != null && a.__renderable) {
            a.__customRenderEvent.allowSmoothing = this.__allowSmoothing;
            a.__customRenderEvent.objectMatrix.copyFrom(a.__renderTransform);
            a.__customRenderEvent.objectColorTransform.__copyFrom(a.__worldColorTransform);
            a.__customRenderEvent.renderer = this;
            switch (this.__type) {
              case "cairo":
                a.__customRenderEvent.type = "renderCairo";
                break;
              case "canvas":
                a.__customRenderEvent.type = "renderCanvas";
                break;
              case "dom":
                a.__customRenderEvent.type = a.stage != null && a.__worldVisible ? "renderDOM" : "clearDOM";
                break;
              case "opengl":
                if (!this.__cleared) {
                  this.__clear();
                }
                this.setShader(a.__worldShader);
                this.__context3D.__flushGL();
                a.__customRenderEvent.type = "renderOpenGL";
                break;
              default:
                return;
            }
            this.__setBlendMode(a.__worldBlendMode);
            this.__pushMaskObject(a);
            a.dispatchEvent(a.__customRenderEvent);
            this.__popMaskObject(a);
            if (this.__type == "opengl") {
              this.setViewport();
            }
          }
        },
        __resize: function (a, b) {},
        __setBlendMode: function (a) {},
        __shouldCacheHardware: function (a, b) {
          if (a == null) {
            return null;
          }
          switch (a.__drawableType) {
            case 4:
            case 5:
              if (b == 1) {
                return true;
              }
              b = this.__shouldCacheHardware_DisplayObject(a, b);
              if (b == 1) {
                return true;
              }
              if (a.__children != null) {
                var c = 0;
                for (a = a.__children; c < a.length;) {
                  var d = a[c];
                  ++c;
                  b = this.__shouldCacheHardware_DisplayObject(d, b);
                  if (b == 1) {
                    return true;
                  }
                }
              }
              return b;
            case 7:
              if (b == 1) {
                return true;
              } else {
                return false;
              }
            case 9:
              return true;
            default:
              return this.__shouldCacheHardware_DisplayObject(a, b);
          }
        },
        __shouldCacheHardware_DisplayObject: function (a, b) {
          if (b == 1 || a.__filters != null) {
            return true;
          } else if (b == 0 || a.__graphics != null && !oc.isCompatible(a.__graphics)) {
            return false;
          } else {
            return null;
          }
        },
        __updateCacheBitmap: function (a, b) {
          if (a == null) {
            return false;
          }
          switch (a.__drawableType) {
            case 2:
              var c = a;
              if (c.__bitmapData == null || c.__filters == null && this.__type == "opengl" && c.__cacheBitmap == null) {
                return false;
              }
              b = c.__bitmapData.image != null && c.__bitmapData.image.version != c.__imageVersion;
              break;
            case 7:
              var d = a;
              if (d.__filters == null && this.__type == "opengl" && d.__cacheBitmap == null && !d.__domRender) {
                return false;
              }
              if (b) {
                d.__renderDirty = true;
              }
              b = b || d.__dirty;
              break;
            case 9:
              if (a.__filters == null && this.__type == "opengl" && a.__cacheBitmap == null) {
                return false;
              }
          }
          if (a.__isCacheBitmapRender) {
            return false;
          }
          d = Lb.__pool.get();
          d.__copyFrom(a.__worldColorTransform);
          if (this.__worldColorTransform != null) {
            d.__combine(this.__worldColorTransform);
          }
          var e = false;
          if (a.get_cacheAsBitmap() || this.__type != "opengl" && !d.__isDefault(true)) {
            e = null;
            var f = (b = a.__cacheBitmap == null || a.__renderDirty && (b || a.__children != null && a.__children.length > 0) || a.opaqueBackground != a.__cacheBitmapBackground) || a.__graphics != null && a.__graphics.__softwareDirty || !a.__cacheBitmapColorTransform.__equals(d, true);
            var k = b || a.__graphics != null && a.__graphics.__hardwareDirty;
            var h = this.__type;
            if (f || k) {
              if (h == "opengl" && this.__shouldCacheHardware(a, null) == 0) {
                h = "canvas";
              }
              if (!!f && (h == "canvas" || h == "cairo")) {
                b = true;
              }
              if (k && h == "opengl") {
                b = true;
              }
            }
            f = b || !a.__cacheBitmap.__worldTransform.equals(a.__worldTransform);
            c = a.__filters != null;
            if (this.__type == "dom" && !c) {
              return false;
            }
            if (c && !b) {
              for (var n = 0, g = a.__filters; n < g.length;) {
                var p = g[n];
                ++n;
                if (p.__renderDirty) {
                  b = true;
                  break;
                }
              }
            }
            if (a.__cacheBitmapMatrix == null) {
              a.__cacheBitmapMatrix = new za();
            }
            n = a.__cacheAsBitmapMatrix ?? a.__renderTransform;
            if (!b && (n.a != a.__cacheBitmapMatrix.a || n.b != a.__cacheBitmapMatrix.b || n.c != a.__cacheBitmapMatrix.c || n.d != a.__cacheBitmapMatrix.d)) {
              b = true;
            }
            if (!b && this.__type != "opengl" && a.__cacheBitmapData != null && a.__cacheBitmapData.image != null && a.__cacheBitmapData.image.version < a.__cacheBitmapData.__textureVersion) {
              b = true;
            }
            if (!b) {
              for (k = a; k != null;) {
                if (k.get_scrollRect() != null) {
                  f = true;
                  break;
                }
                k = k.parent;
              }
            }
            a.__cacheBitmapMatrix.copyFrom(n);
            a.__cacheBitmapMatrix.tx = 0;
            var l = k = a.__cacheBitmapMatrix.ty = 0;
            var m = 0;
            var v = 0;
            var w = p = 0;
            g = this.__pixelRatio;
            if (f || b) {
              e = da.__pool.get();
              a.__getFilterBounds(e, a.__cacheBitmapMatrix);
              m = e.width > 0 ? Math.ceil((e.width + 1) * g) : 0;
              v = e.height > 0 ? Math.ceil((e.height + 1) * g) : 0;
              p = e.x > 0 ? Math.ceil(e.x) : Math.floor(e.x);
              w = e.y > 0 ? Math.ceil(e.y) : Math.floor(e.y);
              if (a.__cacheBitmapData != null) {
                if (m > a.__cacheBitmapData.width || v > a.__cacheBitmapData.height) {
                  k = Math.ceil(Math.max(m * 1.25, a.__cacheBitmapData.width));
                  l = Math.ceil(Math.max(v * 1.25, a.__cacheBitmapData.height));
                  b = true;
                } else {
                  k = a.__cacheBitmapData.width;
                  l = a.__cacheBitmapData.height;
                }
              } else {
                k = m;
                l = v;
              }
            }
            if (b) {
              f = true;
              a.__cacheBitmapBackground = a.opaqueBackground;
              if (m >= 0.5 && v >= 0.5) {
                var q = a.opaqueBackground != null && (k != m || l != v);
                var u = a.opaqueBackground != null ? a.opaqueBackground | -16777216 : 0;
                var r = q ? 0 : u;
                var z = this.__type == "opengl";
                if (a.__cacheBitmapData == null || k > a.__cacheBitmapData.width || l > a.__cacheBitmapData.height) {
                  a.__cacheBitmapData = new T(k, l, true, r);
                  if (a.__cacheBitmap == null) {
                    a.__cacheBitmap = new Nc();
                  }
                  a.__cacheBitmap.__bitmapData = a.__cacheBitmapData;
                  a.__cacheBitmapRenderer = null;
                } else {
                  a.__cacheBitmapData.__fillRect(a.__cacheBitmapData.rect, r, z);
                }
                if (q) {
                  e.setTo(0, 0, m, v);
                  a.__cacheBitmapData.__fillRect(e, u, z);
                }
              } else {
                Lb.__pool.release(d);
                a.__cacheBitmap = null;
                a.__cacheBitmapData = null;
                a.__cacheBitmapData2 = null;
                a.__cacheBitmapData3 = null;
                a.__cacheBitmapRenderer = null;
                if (a.__drawableType == 7) {
                  d = a;
                  if (d.__cacheBitmap != null) {
                    d.__cacheBitmap.__renderTransform.tx -= d.__offsetX * g;
                    d.__cacheBitmap.__renderTransform.ty -= d.__offsetY * g;
                  }
                }
                return true;
              }
            } else {
              a.__cacheBitmapData = a.__cacheBitmap.get_bitmapData();
              a.__cacheBitmapData2 = null;
              a.__cacheBitmapData3 = null;
            }
            if (f || b) {
              a.__cacheBitmap.__worldTransform.copyFrom(a.__worldTransform);
              if (n == a.__renderTransform) {
                a.__cacheBitmap.__renderTransform.identity();
                a.__cacheBitmap.__renderTransform.scale(1 / g, 1 / g);
                a.__cacheBitmap.__renderTransform.tx = a.__renderTransform.tx + p;
                a.__cacheBitmap.__renderTransform.ty = a.__renderTransform.ty + w;
              } else {
                a.__cacheBitmap.__renderTransform.copyFrom(a.__cacheBitmapMatrix);
                a.__cacheBitmap.__renderTransform.invert();
                a.__cacheBitmap.__renderTransform.concat(a.__renderTransform);
                a.__cacheBitmap.__renderTransform.a *= 1 / g;
                a.__cacheBitmap.__renderTransform.d *= 1 / g;
                a.__cacheBitmap.__renderTransform.tx += p;
                a.__cacheBitmap.__renderTransform.ty += w;
              }
            }
            a.__cacheBitmap.smoothing = this.__allowSmoothing;
            a.__cacheBitmap.__renderable = a.__renderable;
            a.__cacheBitmap.__worldAlpha = a.__worldAlpha;
            a.__cacheBitmap.__worldBlendMode = a.__worldBlendMode;
            a.__cacheBitmap.__worldShader = a.__worldShader;
            a.__cacheBitmap.set_mask(a.__mask);
            if (b) {
              if (a.__cacheBitmapRenderer == null || h != a.__cacheBitmapRenderer.__type) {
                if (h == "opengl") {
                  a.__cacheBitmapRenderer = new tb(va.__cast(this, tb).__context3D, a.__cacheBitmapData);
                } else {
                  if (a.__cacheBitmapData.image == null) {
                    a.__cacheBitmapData = new T(k, l, true, a.opaqueBackground != null ? a.opaqueBackground | -16777216 : 0);
                    a.__cacheBitmap.__bitmapData = a.__cacheBitmapData;
                  }
                  Ya.convertToCanvas(a.__cacheBitmapData.image);
                  a.__cacheBitmapRenderer = new lg(a.__cacheBitmapData.image.buffer.__srcContext);
                }
                a.__cacheBitmapRenderer.__worldTransform = new za();
                a.__cacheBitmapRenderer.__worldColorTransform = new Lb();
              }
              if (a.__cacheBitmapColorTransform == null) {
                a.__cacheBitmapColorTransform = new Lb();
              }
              a.__cacheBitmapRenderer.__stage = a.stage;
              a.__cacheBitmapRenderer.__allowSmoothing = this.__allowSmoothing;
              a.__cacheBitmapRenderer.__setBlendMode(10);
              a.__cacheBitmapRenderer.__worldAlpha = 1 / a.__worldAlpha;
              a.__cacheBitmapRenderer.__worldTransform.copyFrom(a.__renderTransform);
              a.__cacheBitmapRenderer.__worldTransform.invert();
              a.__cacheBitmapRenderer.__worldTransform.concat(a.__cacheBitmapMatrix);
              a.__cacheBitmapRenderer.__worldTransform.tx -= p;
              a.__cacheBitmapRenderer.__worldTransform.ty -= w;
              a.__cacheBitmapRenderer.__worldTransform.scale(g, g);
              a.__cacheBitmapRenderer.__pixelRatio = g;
              a.__cacheBitmapRenderer.__worldColorTransform.__copyFrom(d);
              a.__cacheBitmapRenderer.__worldColorTransform.__invert();
              a.__isCacheBitmapRender = true;
              if (a.__cacheBitmapRenderer.__type == "opengl") {
                q = a.__cacheBitmapRenderer;
                u = q.__context3D;
                r = u.__state.renderToTexture;
                z = u.__state.renderToTextureDepthStencil;
                var J = u.__state.renderToTextureAntiAlias;
                var ba = u.__state.renderToTextureSurfaceSelector;
                var y = this.__blendMode;
                this.__suspendClipAndMask();
                q.__copyShader(this);
                a.__cacheBitmapData.__setUVRect(u, 0, 0, m, v);
                q.__setRenderTarget(a.__cacheBitmapData);
                if (a.__cacheBitmapData.image != null) {
                  a.__cacheBitmapData.__textureVersion = a.__cacheBitmapData.image.version + 1;
                }
                a.__cacheBitmapData.__drawGL(a, q);
                if (c) {
                  var A = false;
                  n = 0;
                  for (g = a.__filters; n < g.length;) {
                    p = g[n];
                    ++n;
                    if (p.__preserveObject) {
                      A = true;
                    }
                  }
                  c = a.__cacheBitmapData;
                  w = null;
                  if (a.__cacheBitmapData2 == null || k > a.__cacheBitmapData2.width || l > a.__cacheBitmapData2.height) {
                    a.__cacheBitmapData2 = new T(k, l, true, 0);
                  } else {
                    a.__cacheBitmapData2.fillRect(a.__cacheBitmapData2.rect, 0);
                    if (a.__cacheBitmapData2.image != null) {
                      a.__cacheBitmapData2.__textureVersion = a.__cacheBitmapData2.image.version + 1;
                    }
                  }
                  a.__cacheBitmapData2.__setUVRect(u, 0, 0, m, v);
                  h = a.__cacheBitmapData2;
                  if (A) {
                    if (a.__cacheBitmapData3 == null || k > a.__cacheBitmapData3.width || l > a.__cacheBitmapData3.height) {
                      a.__cacheBitmapData3 = new T(k, l, true, 0);
                    } else {
                      a.__cacheBitmapData3.fillRect(a.__cacheBitmapData3.rect, 0);
                      if (a.__cacheBitmapData3.image != null) {
                        a.__cacheBitmapData3.__textureVersion = a.__cacheBitmapData3.image.version + 1;
                      }
                    }
                    a.__cacheBitmapData3.__setUVRect(u, 0, 0, m, v);
                    w = a.__cacheBitmapData3;
                  }
                  q.__setBlendMode(10);
                  q.__worldAlpha = 1;
                  q.__worldTransform.identity();
                  q.__worldColorTransform.__identity();
                  n = 0;
                  for (g = a.__filters; n < g.length;) {
                    p = g[n];
                    ++n;
                    if (p.__preserveObject) {
                      q.__setRenderTarget(w);
                      q.__renderFilterPass(c, q.__defaultDisplayShader, p.__smooth);
                    }
                    l = 0;
                    for (m = p.__numShaderPasses; l < m;) {
                      k = l++;
                      k = p.__initShader(q, k, p.__preserveObject ? w : null);
                      q.__setBlendMode(p.__shaderBlendMode);
                      q.__setRenderTarget(h);
                      q.__renderFilterPass(c, k, p.__smooth);
                      k = c;
                      c = h;
                      h = k;
                    }
                    p.__renderDirty = false;
                  }
                  a.__cacheBitmap.__bitmapData = c;
                }
                this.__blendMode = 10;
                this.__setBlendMode(y);
                this.__copyShader(q);
                if (r != null) {
                  u.setRenderToTexture(r, z, J, ba);
                } else {
                  u.setRenderToBackBuffer();
                }
                this.__resumeClipAndMask(q);
                this.setViewport();
                a.__cacheBitmapColorTransform.__copyFrom(d);
              } else {
                a.__cacheBitmapData.__drawCanvas(a, a.__cacheBitmapRenderer);
                if (c) {
                  A = m = false;
                  n = 0;
                  for (g = a.__filters; n < g.length;) {
                    p = g[n];
                    ++n;
                    if (p.__needSecondBitmapData) {
                      m = true;
                    }
                    if (p.__preserveObject) {
                      A = true;
                    }
                  }
                  c = a.__cacheBitmapData;
                  w = null;
                  if (m) {
                    if (a.__cacheBitmapData2 == null || a.__cacheBitmapData2.image == null || k > a.__cacheBitmapData2.width || l > a.__cacheBitmapData2.height) {
                      a.__cacheBitmapData2 = new T(k, l, true, 0);
                    } else {
                      a.__cacheBitmapData2.fillRect(a.__cacheBitmapData2.rect, 0);
                    }
                    h = a.__cacheBitmapData2;
                  } else {
                    h = c;
                  }
                  if (A) {
                    if (a.__cacheBitmapData3 == null || a.__cacheBitmapData3.image == null || k > a.__cacheBitmapData3.width || l > a.__cacheBitmapData3.height) {
                      a.__cacheBitmapData3 = new T(k, l, true, 0);
                    } else {
                      a.__cacheBitmapData3.fillRect(a.__cacheBitmapData3.rect, 0);
                    }
                    w = a.__cacheBitmapData3;
                  }
                  if (a.__tempPoint == null) {
                    a.__tempPoint = new lb();
                  }
                  l = a.__tempPoint;
                  n = 0;
                  for (g = a.__filters; n < g.length;) {
                    p = g[n];
                    ++n;
                    if (p.__preserveObject) {
                      w.copyPixels(c, c.rect, l);
                    }
                    k = p.__applyFilter(h, c, c.rect, l);
                    if (p.__preserveObject) {
                      k.draw(w, null, a.__objectTransform != null ? a.__objectTransform.__colorTransform : null);
                    }
                    p.__renderDirty = false;
                    if (m && k == h) {
                      k = c;
                      c = h;
                      h = k;
                    }
                  }
                  if (a.__cacheBitmapData != c) {
                    k = a.__cacheBitmapData;
                    a.__cacheBitmapData = c;
                    a.__cacheBitmapData2 = k;
                    a.__cacheBitmap.__bitmapData = a.__cacheBitmapData;
                    a.__cacheBitmapRenderer = null;
                  }
                  a.__cacheBitmap.__imageVersion = a.__cacheBitmapData.__textureVersion;
                }
                a.__cacheBitmapColorTransform.__copyFrom(d);
                if (!a.__cacheBitmapColorTransform.__isDefault(true)) {
                  a.__cacheBitmapColorTransform.alphaMultiplier = 1;
                  a.__cacheBitmapData.colorTransform(a.__cacheBitmapData.rect, a.__cacheBitmapColorTransform);
                }
              }
              a.__isCacheBitmapRender = false;
            }
            if (f || b) {
              da.__pool.release(e);
            }
            e = f;
          } else if (a.__cacheBitmap != null) {
            if (this.__type == "dom") {
              this.__renderDrawableClear(a.__cacheBitmap);
            }
            a.__cacheBitmap = null;
            a.__cacheBitmapData = null;
            a.__cacheBitmapData2 = null;
            a.__cacheBitmapData3 = null;
            a.__cacheBitmapColorTransform = null;
            a.__cacheBitmapRenderer = null;
            e = true;
          }
          Lb.__pool.release(d);
          if (e && a.__drawableType == 7) {
            d = a;
            if (d.__cacheBitmap != null) {
              d.__cacheBitmap.__renderTransform.tx -= d.__offsetX;
              d.__cacheBitmap.__renderTransform.ty -= d.__offsetY;
            }
          }
          return e;
        },
        __class__: ce
      });
      function jm(a) {
        ce.call(this);
      }
      g["openfl.display.CairoRenderer"] = jm;
      jm.__name__ = "openfl.display.CairoRenderer";
      jm.__super__ = ce;
      jm.prototype = q(ce.prototype, {
        applyMatrix: function (a, b) {
          if (b == null) {
            b = this.cairo;
          }
          this.__matrix.copyFrom(a);
          if (this.cairo == b && this.__worldTransform != null) {
            this.__matrix.concat(this.__worldTransform);
          }
          this.__matrix3.a = this.__matrix.a;
          this.__matrix3.b = this.__matrix.b;
          this.__matrix3.c = this.__matrix.c;
          this.__matrix3.d = this.__matrix.d;
          if (this.__roundPixels) {
            this.__matrix3.tx = Math.round(this.__matrix.tx);
            this.__matrix3.ty = Math.round(this.__matrix.ty);
          } else {
            this.__matrix3.tx = this.__matrix.tx;
            this.__matrix3.ty = this.__matrix.ty;
          }
          b.set_matrix(this.__matrix3);
        },
        __clear: function () {
          if (this.cairo != null && (this.cairo.identityMatrix(), this.__stage != null && this.__stage.__clearBeforeRender)) {
            var a = this.__blendMode;
            this.__setBlendMode(10);
            this.cairo.setSourceRGB(this.__stage.__colorSplit[0], this.__stage.__colorSplit[1], this.__stage.__colorSplit[2]);
            this.cairo.paint();
            this.__setBlendMode(a);
          }
        },
        __popMask: function () {
          this.cairo.restore();
        },
        __popMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (!a.__isCacheBitmapRender && a.__mask != null) {
            this.__popMask();
          }
          if (b && a.__scrollRect != null) {
            this.__popMaskRect();
          }
        },
        __popMaskRect: function () {
          this.cairo.restore();
        },
        __pushMask: function (a) {
          this.cairo.save();
          this.applyMatrix(a.__renderTransform, this.cairo);
          this.cairo.newPath();
          this.__renderDrawableMask(a);
          this.cairo.clip();
        },
        __pushMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b && a.__scrollRect != null) {
            this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
          }
          if (!a.__isCacheBitmapRender && a.__mask != null) {
            this.__pushMask(a.__mask);
          }
        },
        __pushMaskRect: function (a, b) {
          this.cairo.save();
          this.applyMatrix(b, this.cairo);
          this.cairo.newPath();
          this.cairo.rectangle(a.x, a.y, a.width, a.height);
          this.cairo.clip();
        },
        __render: function (a) {
          if (this.cairo != null) {
            this.__renderDrawable(a);
          }
        },
        __renderDrawable: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 6:
                if (!!a.__renderable && !(a.__worldAlpha <= 0) && a.__currentState != null) {
                  this.__pushMaskObject(a);
                  this.__renderDrawable(a.__currentState);
                  this.__popMaskObject(a);
                  this.__renderEvent(a);
                }
            }
          }
        },
        __renderDrawableMask: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 2:
                this.cairo.rectangle(0, 0, a.get_width(), a.get_height());
                break;
              case 6:
                this.__renderDrawableMask(a.__currentState);
            }
          }
        },
        __setBlendMode: function (a) {
          if (this.__overrideBlendMode != null) {
            a = this.__overrideBlendMode;
          }
          if (this.__blendMode != a) {
            this.__blendMode = a;
            this.__setBlendModeCairo(this.cairo, a);
          }
        },
        __setBlendModeCairo: function (a, b) {
          switch (b) {
            case 0:
              a.setOperator(12);
              break;
            case 2:
              a.setOperator(17);
              break;
            case 3:
              a.setOperator(23);
              break;
            case 5:
              a.setOperator(21);
              break;
            case 7:
              a.setOperator(2);
              break;
            case 8:
              a.setOperator(18);
              break;
            case 9:
              a.setOperator(14);
              break;
            case 11:
              a.setOperator(16);
              break;
            case 12:
              a.setOperator(15);
              break;
            default:
              a.setOperator(2);
          }
        },
        __class__: jm
      });
      function lg(a) {
        ce.call(this);
        this.context = a;
        this.__tempMatrix = new za();
        this.__type = "canvas";
      }
      g["openfl.display.CanvasRenderer"] = lg;
      lg.__name__ = "openfl.display.CanvasRenderer";
      lg.__super__ = ce;
      lg.prototype = q(ce.prototype, {
        applySmoothing: function (a, b) {
          a.imageSmoothingEnabled = b;
        },
        setTransform: function (a, b) {
          if (b == null) {
            b = this.context;
          } else if (this.context == b && this.__worldTransform != null) {
            this.__tempMatrix.copyFrom(a);
            this.__tempMatrix.concat(this.__worldTransform);
            a = this.__tempMatrix;
          }
          if (this.__roundPixels) {
            b.setTransform(a.a, a.b, a.c, a.d, a.tx | 0, a.ty | 0);
          } else {
            b.setTransform(a.a, a.b, a.c, a.d, a.tx, a.ty);
          }
        },
        __clear: function () {
          if (this.__stage != null) {
            var a = this.__blendMode;
            this.__blendMode = null;
            this.__setBlendMode(10);
            this.context.setTransform(1, 0, 0, 1, 0, 0);
            this.context.globalAlpha = 1;
            if (!this.__stage.__transparent && this.__stage.__clearBeforeRender) {
              this.context.fillStyle = this.__stage.__colorString;
              this.context.fillRect(0, 0, this.__stage.stageWidth * this.__stage.window.__scale, this.__stage.stageHeight * this.__stage.window.__scale);
            } else if (this.__stage.__transparent && this.__stage.__clearBeforeRender) {
              this.context.clearRect(0, 0, this.__stage.stageWidth * this.__stage.window.__scale, this.__stage.stageHeight * this.__stage.window.__scale);
            }
            this.__setBlendMode(a);
          }
        },
        __popMask: function () {
          this.context.restore();
        },
        __popMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (!a.__isCacheBitmapRender && a.__mask != null) {
            this.__popMask();
          }
          if (b && a.__scrollRect != null) {
            this.__popMaskRect();
          }
        },
        __popMaskRect: function () {
          this.context.restore();
        },
        __pushMask: function (a) {
          this.context.save();
          this.setTransform(a.__renderTransform, this.context);
          this.context.beginPath();
          this.__renderDrawableMask(a);
          this.context.closePath();
          this.context.clip();
        },
        __pushMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b && a.__scrollRect != null) {
            this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
          }
          if (!a.__isCacheBitmapRender && a.__mask != null) {
            this.__pushMask(a.__mask);
          }
        },
        __pushMaskRect: function (a, b) {
          this.context.save();
          this.setTransform(b, this.context);
          this.context.beginPath();
          this.context.rect(a.x, a.y, a.width, a.height);
          this.context.clip();
        },
        __render: function (a) {
          this.__renderDrawable(a);
        },
        __renderDrawable: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 0:
                km.renderDrawable(a, this);
                break;
              case 2:
                Nj.renderDrawable(a, this);
                break;
              case 3:
                Ch.renderDrawable(a, this);
                break;
              case 4:
              case 5:
                lm.renderDrawable(a, this);
                break;
              case 6:
                mm.renderDrawable(a, this);
                break;
              case 7:
                aa.renderDrawable(a, this);
                break;
              case 8:
                Dh.renderDrawable(a, this);
                break;
              case 9:
                wg.renderDrawable(a, this);
            }
          }
        },
        __renderDrawableMask: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 0:
                km.renderDrawableMask(a, this);
                break;
              case 2:
                Nj.renderDrawableMask(a, this);
                break;
              case 3:
                Ch.renderDrawableMask(a, this);
                break;
              case 4:
              case 5:
                lm.renderDrawableMask(a, this);
                break;
              case 6:
                mm.renderDrawableMask(a, this);
                break;
              case 7:
                aa.renderDrawableMask(a, this);
                break;
              case 8:
                Dh.renderDrawableMask(a, this);
                break;
              case 9:
                wg.renderDrawableMask(a, this);
            }
          }
        },
        __setBlendMode: function (a) {
          if (this.__overrideBlendMode != null) {
            a = this.__overrideBlendMode;
          }
          if (this.__blendMode != a) {
            this.__blendMode = a;
            this.__setBlendModeContext(this.context, a);
          }
        },
        __setBlendModeContext: function (a, b) {
          switch (b) {
            case 0:
              a.globalCompositeOperation = "lighter";
              break;
            case 2:
              a.globalCompositeOperation = "darken";
              break;
            case 3:
              a.globalCompositeOperation = "difference";
              break;
            case 5:
              a.globalCompositeOperation = "hard-light";
              break;
            case 8:
              a.globalCompositeOperation = "lighten";
              break;
            case 9:
              a.globalCompositeOperation = "multiply";
              break;
            case 11:
              a.globalCompositeOperation = "overlay";
              break;
            case 12:
              a.globalCompositeOperation = "screen";
              break;
            default:
              a.globalCompositeOperation = "source-over";
          }
        },
        __class__: lg
      });
      var Qp = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "none";
            case 1:
              return "round";
            case 2:
              return "square";
            default:
              return null;
          }
        }
      };
      function nm(a) {
        wa.call(this);
        this.__drawableType = 10;
        this.__element = a;
      }
      g["openfl.display.DOMElement"] = nm;
      nm.__name__ = "openfl.display.DOMElement";
      nm.__super__ = wa;
      nm.prototype = q(wa.prototype, {
        __class__: nm
      });
      function Oj(a) {
        ce.call(this);
        this.element = a;
        wa.__supportDOM = true;
        a = window.getComputedStyle(document.documentElement, "");
        a = (Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/) || a.OLink === "" && ["", "o"])[1];
        "WebKit|Moz|MS|O".match(new RegExp("(" + a + ")", "i"));
        a[0].toUpperCase();
        a.substr(1);
        this.__vendorPrefix = a;
        this.__transformProperty = a == "webkit" ? "-webkit-transform" : "transform";
        this.__transformOriginProperty = a == "webkit" ? "-webkit-transform-origin" : "transform-origin";
        this.__clipRects = [];
        this.__z = this.__numClipRects = 0;
        this.__type = "dom";
        this.__canvasRenderer = new lg(null);
        this.__canvasRenderer.__isDOM = true;
      }
      g["openfl.display.DOMRenderer"] = Oj;
      Oj.__name__ = "openfl.display.DOMRenderer";
      Oj.__super__ = ce;
      Oj.prototype = q(ce.prototype, {
        __applyStyle: function (a, b, c, d) {
          var e = a.__style;
          if (b && a.__renderTransformChanged) {
            b = a.__renderTransform;
            var f = this.__roundPixels;
            if (f == null) {
              f = false;
            }
            e.setProperty(this.__transformProperty, f ? "matrix3d(" + b.a + ", " + b.b + ", 0, 0, " + b.c + ", " + b.d + ", 0, 0, 0, 0, 1, 0, " + (b.tx | 0) + ", " + (b.ty | 0) + ", 0, 1)" : "matrix3d(" + b.a + ", " + b.b + ", 0, 0, " + b.c + ", " + b.d + ", 0, 0, 0, 0, 1, 0, " + b.tx + ", " + b.ty + ", 0, 1)", null);
          }
          if (a.__worldZ != ++this.__z) {
            a.__worldZ = this.__z;
            e.setProperty("z-index", a.__worldZ == null ? "null" : "" + a.__worldZ, null);
          }
          if (c && a.__worldAlphaChanged) {
            if (a.__worldAlpha < 1) {
              e.setProperty("opacity", a.__worldAlpha == null ? "null" : "" + a.__worldAlpha, null);
            } else {
              e.removeProperty("opacity");
            }
          }
          if (d && a.__worldClipChanged) {
            if (a.__worldClip == null) {
              e.removeProperty("clip");
            } else {
              a = a.__worldClip;
              e.setProperty("clip", "rect(" + a.y + "px, " + a.get_right() + "px, " + a.get_bottom() + "px, " + a.x + "px)", null);
            }
          }
        },
        __initializeElement: function (a, b) {
          var c = a.__style = b.style;
          c.setProperty("position", "absolute", null);
          c.setProperty("top", "0", null);
          c.setProperty("left", "0", null);
          c.setProperty(this.__transformOriginProperty, "0 0 0", null);
          this.element.appendChild(b);
          a.__worldAlphaChanged = true;
          a.__renderTransformChanged = true;
          a.__worldVisibleChanged = true;
          a.__worldClipChanged = true;
          a.__worldClip = null;
          a.__worldZ = -1;
        },
        __popMask: function () {
          this.__popMaskRect();
        },
        __popMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a.__mask != null) {
            this.__popMask();
          }
          if (b && a.__scrollRect != null) {
            this.__popMaskRect();
          }
        },
        __popMaskRect: function () {
          if (this.__numClipRects > 0) {
            this.__numClipRects--;
            this.__currentClipRect = this.__numClipRects > 0 ? this.__clipRects[this.__numClipRects - 1] : null;
          }
        },
        __pushMask: function (a) {
          this.__pushMaskRect(a.getBounds(a), a.__renderTransform);
        },
        __pushMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b && a.__scrollRect != null) {
            this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
          }
          if (a.__mask != null) {
            this.__pushMask(a.__mask);
          }
        },
        __pushMaskRect: function (a, b) {
          if (this.__numClipRects == this.__clipRects.length) {
            this.__clipRects[this.__numClipRects] = new da();
          }
          var c = this.__clipRects[this.__numClipRects];
          a.__transform(c, b);
          if (this.__numClipRects > 0) {
            a = this.__clipRects[this.__numClipRects - 1];
            c.__contract(a.x, a.y, a.width, a.height);
          }
          if (c.height < 0) {
            c.height = 0;
          }
          if (c.width < 0) {
            c.width = 0;
          }
          this.__currentClipRect = c;
          this.__numClipRects++;
        },
        __render: function (a) {
          this.element.style.background = this.__stage.__transparent ? "none" : this.__stage.__colorString;
          this.__z = 1;
          this.__renderDrawable(a);
        },
        __renderDrawable: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 2:
                uc.renderDrawable(a, this);
                break;
              case 3:
                de.renderDrawable(a, this);
                break;
              case 4:
              case 5:
                om.renderDrawable(a, this);
                break;
              case 6:
                pm.renderDrawable(a, this);
                break;
              case 7:
                Zg.renderDrawable(a, this);
                break;
              case 8:
                xg.renderDrawable(a, this);
                break;
              case 9:
                $g.renderDrawable(a, this);
                break;
              case 10:
                if (a.stage != null && a.__worldVisible && a.__renderable) {
                  if (!a.__active) {
                    this.__initializeElement(a, a.__element);
                    a.__active = true;
                  }
                  this.__updateClip(a);
                  this.__applyStyle(a, true, true, true);
                } else if (a.__active) {
                  this.element.removeChild(a.__element);
                  a.__active = false;
                }
                de.renderDrawable(a, this);
            }
          }
        },
        __renderDrawableClear: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 2:
                uc.renderDrawableClear(a, this);
                break;
              case 3:
                de.renderDrawableClear(a, this);
                break;
              case 4:
              case 5:
                om.renderDrawableClear(a, this);
                break;
              case 6:
                pm.renderDrawableClear(a, this);
                break;
              case 7:
                Zg.renderDrawableClear(a, this);
                break;
              case 8:
                xg.renderDrawableClear(a, this);
                break;
              case 9:
                $g.renderDrawableClear(a, this);
            }
          }
        },
        __setBlendMode: function (a) {
          if (this.__overrideBlendMode != null) {
            a = this.__overrideBlendMode;
          }
          if (this.__blendMode != a) {
            this.__blendMode = a;
          }
        },
        __updateClip: function (a) {
          if (this.__currentClipRect == null) {
            a.__worldClipChanged = a.__worldClip != null;
            a.__worldClip = null;
          } else {
            if (a.__worldClip == null) {
              a.__worldClip = new da();
            }
            var b = da.__pool.get();
            var c = za.__pool.get();
            c.copyFrom(a.__renderTransform);
            c.invert();
            this.__currentClipRect.__transform(b, c);
            if (b.equals(a.__worldClip)) {
              a.__worldClipChanged = false;
            } else {
              a.__worldClip.copyFrom(b);
              a.__worldClipChanged = true;
            }
            da.__pool.release(b);
            za.__pool.release(c);
          }
        },
        __class__: Oj
      });
      function qm(a) {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}";
        }
        ge.call(this, a);
        this.__isGenerated = true;
        this.__initGL();
      }
      g["openfl.display.DisplayObjectShader"] = qm;
      qm.__name__ = "openfl.display.DisplayObjectShader";
      qm.__super__ = ge;
      qm.prototype = q(ge.prototype, {
        __class__: qm
      });
      function Go(a, b) {
        pa.call(this);
        this.name = a;
        this.frame = b;
      }
      g["openfl.display.FrameLabel"] = Go;
      Go.__name__ = "openfl.display.FrameLabel";
      Go.__super__ = pa;
      Go.prototype = q(pa.prototype, {
        __class__: Go
      });
      function fe(a) {
        this.__dirty = true;
        this.__owner = a;
        this.__commands = new ee();
        this.__positionY = this.__positionX = this.__strokePadding = 0;
        this.__renderTransform = new za();
        this.__usedShaderBuffers = new jb();
        this.__worldTransform = new za();
        this.__height = this.__width = 0;
        this.__bitmapScale = 1;
        this.__shaderBufferPool = new bb(function () {
          return new rm();
        });
        this.moveTo(0, 0);
      }
      g["openfl.display.Graphics"] = fe;
      fe.__name__ = "openfl.display.Graphics";
      fe.prototype = {
        beginFill: function (a, b) {
          if (b == null) {
            b = 1;
          }
          if (a == null) {
            a = 0;
          }
          this.__commands.beginFill(a & 16777215, b);
          if (b > 0) {
            this.__visible = true;
          }
        },
        beginGradientFill: function (a, b, c, d, e, f, k, h) {
          if (h == null) {
            h = 0;
          }
          if (k == null) {
            k = 1;
          }
          if (f == null) {
            f = 0;
          }
          if (b != null && b.length != 0) {
            if (c == null) {
              c = [];
              for (var n = 0, t = b.length; n < t;) {
                n++;
                c.push(1);
              }
            }
            if (d == null) {
              d = [];
              n = 0;
              t = b.length;
              while (n < t) {
                var g = n++;
                d.push(Math.ceil(g / (b.length - 1) * 255));
              }
            }
            if (!(c.length < b.length) && !(d.length < b.length)) {
              this.__commands.beginGradientFill(a, b, c, d, e, f, k, h);
              n = 0;
              while (n < c.length) {
                a = c[n];
                ++n;
                if (a > 0) {
                  this.__visible = true;
                  break;
                }
              }
            }
          }
        },
        beginShaderFill: function (a, b) {
          if (a != null) {
            b = this.__shaderBufferPool.get();
            this.__usedShaderBuffers.add(b);
            b.update(a);
            this.__commands.beginShaderFill(b);
          }
        },
        clear: function () {
          for (var a = this.__usedShaderBuffers.h; a != null;) {
            var b = a.item;
            a = a.next;
            this.__shaderBufferPool.release(b);
          }
          this.__usedShaderBuffers.clear();
          this.__commands.clear();
          this.__strokePadding = 0;
          if (this.__bounds != null) {
            this.set___dirty(true);
            this.__transformDirty = true;
            this.__bounds = null;
          }
          this.__visible = false;
          this.__positionY = this.__positionX = 0;
          this.moveTo(0, 0);
        },
        cubicCurveTo: function (a, b, c, d, e, f) {
          var k = this.__findExtrema(this.__positionX, a, c, e);
          var h = this.__findExtrema(this.__positionY, b, d, f);
          this.__inflateBounds(k.min - this.__strokePadding, h.min - this.__strokePadding);
          this.__inflateBounds(k.max + this.__strokePadding, h.max + this.__strokePadding);
          this.__positionX = e;
          this.__positionY = f;
          this.__commands.cubicCurveTo(a, b, c, d, e, f);
          this.set___dirty(true);
        },
        curveTo: function (a, b, c, d) {
          this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
          this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding);
          var e = a < c && a > this.__positionX || a > c && a < this.__positionX ? c : this.__calculateBezierQuadPoint((this.__positionX - a) / (this.__positionX - a * 2 + c), this.__positionX, a, c);
          var f = b < d && b > this.__positionY || b > d && b < this.__positionY ? d : this.__calculateBezierQuadPoint((this.__positionY - b) / (this.__positionY - b * 2 + d), this.__positionY, b, d);
          this.__inflateBounds(e - this.__strokePadding, f - this.__strokePadding);
          this.__inflateBounds(e + this.__strokePadding, f + this.__strokePadding);
          this.__positionX = c;
          this.__positionY = d;
          this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
          this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding);
          this.__commands.curveTo(a, b, c, d);
          this.set___dirty(true);
        },
        drawCircle: function (a, b, c) {
          if (!(c <= 0)) {
            this.__inflateBounds(a - c - this.__strokePadding, b - c - this.__strokePadding);
            this.__inflateBounds(a + c + this.__strokePadding, b + c + this.__strokePadding);
            this.__commands.drawCircle(a, b, c);
            this.set___dirty(true);
          }
        },
        drawPath: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          var d = 0;
          if (c == 1) {
            this.__commands.windingNonZero();
          }
          a = a.iterator();
          a: while (a.hasNext()) {
            switch (a.next()) {
              case 1:
                this.moveTo(b.get(d), b.get(d + 1));
                d += 2;
                break;
              case 2:
                this.lineTo(b.get(d), b.get(d + 1));
                d += 2;
                break;
              case 3:
                this.curveTo(b.get(d), b.get(d + 1), b.get(d + 2), b.get(d + 3));
                d += 4;
                break;
              case 4:
                this.moveTo(b.get(d + 2), b.get(d + 3));
                break a;
              case 5:
                this.lineTo(b.get(d + 2), b.get(d + 3));
                break a;
              case 6:
                this.cubicCurveTo(b.get(d), b.get(d + 1), b.get(d + 2), b.get(d + 3), b.get(d + 4), b.get(d + 5));
                d += 6;
            }
          }
        },
        drawQuads: function (a, b, c) {
          if (a != null) {
            var d = b != null;
            var e = false;
            var f = false;
            var k = d ? b.get_length() : Math.floor(a.get_length() / 4);
            if (k != 0) {
              if (c != null) {
                if (c.get_length() >= k * 6) {
                  f = e = true;
                } else if (c.get_length() >= k * 4) {
                  e = true;
                } else if (c.get_length() >= k * 2) {
                  f = true;
                }
              }
              for (var h = da.__pool.get(), n = za.__pool.get(), g = Infinity, p = Infinity, l = -Infinity, m = -Infinity, v, w = 0; w < k;) {
                var q = w++;
                v = d ? b.get(q) * 4 : q * 4;
                if (!(v < 0)) {
                  h.setTo(0, 0, a.get(v + 2), a.get(v + 3));
                  if (!(h.width <= 0) && !(h.height <= 0)) {
                    if (e && f) {
                      v = q * 6;
                      n.setTo(c.get(v), c.get(v + 1), c.get(v + 2), c.get(v + 3), c.get(v + 4), c.get(v + 5));
                    } else if (e) {
                      v = q * 4;
                      n.setTo(c.get(v), c.get(v + 1), c.get(v + 2), c.get(v + 3), h.x, h.y);
                    } else if (f) {
                      v = q * 2;
                      n.tx = c.get(v);
                      n.ty = c.get(v + 1);
                    } else {
                      n.tx = h.x;
                      n.ty = h.y;
                    }
                    h.__transform(h, n);
                    if (g > h.x) {
                      g = h.x;
                    }
                    if (p > h.y) {
                      p = h.y;
                    }
                    if (l < h.get_right()) {
                      l = h.get_right();
                    }
                    if (m < h.get_bottom()) {
                      m = h.get_bottom();
                    }
                  }
                }
              }
              this.__inflateBounds(g, p);
              this.__inflateBounds(l, m);
              this.__commands.drawQuads(a, b, c);
              this.set___dirty(true);
              this.__visible = true;
              da.__pool.release(h);
              za.__pool.release(n);
            }
          }
        },
        drawRect: function (a, b, c, d) {
          if (c != 0 || d != 0) {
            var e = c < 0 ? -1 : 1;
            var f = d < 0 ? -1 : 1;
            this.__inflateBounds(a - this.__strokePadding * e, b - this.__strokePadding * f);
            this.__inflateBounds(a + c + this.__strokePadding * e, b + d + this.__strokePadding * f);
            this.__commands.drawRect(a, b, c, d);
            this.set___dirty(true);
          }
        },
        drawTriangles: function (a, b, c, d) {
          if (d == null) {
            d = 1;
          }
          if (a != null && a.get_length() != 0) {
            var e = a.get_length() / 2 | 0;
            if (b == null) {
              if (e % 3 != 0) {
                throw new Mh("Not enough vertices to close a triangle.");
              }
              b = ab.toIntVector(null);
              for (var f = 0, k = e; f < k;) {
                var h = f++;
                b.push(h);
              }
            }
            if (d == null) {
              d = 1;
            }
            var n = Infinity;
            var g = Infinity;
            var p = -Infinity;
            var l = -Infinity;
            f = 0;
            for (k = e; f < k;) {
              h = f++;
              e = a.get(h * 2);
              h = a.get(h * 2 + 1);
              if (n > e) {
                n = e;
              }
              if (g > h) {
                g = h;
              }
              if (p < e) {
                p = e;
              }
              if (l < h) {
                l = h;
              }
            }
            this.__inflateBounds(n, g);
            this.__inflateBounds(p, l);
            this.__commands.drawTriangles(a, b, c, d);
            this.set___dirty(true);
            this.__visible = true;
          }
        },
        endFill: function () {
          this.__commands.endFill();
        },
        lineStyle: function (a, b, c, d, e, f, k, h) {
          if (h == null) {
            h = 3;
          }
          if (e == null) {
            e = 2;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 1;
          }
          if (b == null) {
            b = 0;
          }
          if (f == null) {
            f = 1;
          }
          if (k == null) {
            k = 2;
          }
          if (a != null) {
            if (k == 1) {
              if (a > this.__strokePadding) {
                this.__strokePadding = Math.ceil(a);
              }
            } else if (a / 2 > this.__strokePadding) {
              this.__strokePadding = Math.ceil(a / 2);
            }
          }
          this.__commands.lineStyle(a, b, c, d, e, f, k, h);
          if (a != null) {
            this.__visible = true;
          }
        },
        lineTo: function (a, b) {
          if (isFinite(a) && isFinite(b)) {
            this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
            this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding);
            this.__positionX = a;
            this.__positionY = b;
            this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
            this.__inflateBounds(this.__positionX + this.__strokePadding * 2, this.__positionY + this.__strokePadding);
            this.__commands.lineTo(a, b);
            this.set___dirty(true);
          }
        },
        moveTo: function (a, b) {
          this.__positionX = a;
          this.__positionY = b;
          this.__commands.moveTo(a, b);
        },
        overrideBlendMode: function (a) {
          if (a == null) {
            a = 10;
          }
          this.__commands.overrideBlendMode(a);
        },
        __calculateBezierCubicPoint: function (a, b, c, d, e) {
          var f = 1 - a;
          return b * f * f * f + c * 3 * a * f * f + d * 3 * f * a * a + e * a * a * a;
        },
        __calculateBezierQuadPoint: function (a, b, c, d) {
          var e = 1 - a;
          return e * e * b + e * 2 * a * c + a * a * d;
        },
        __cleanup: function () {
          if (this.__bounds != null && this.__canvas != null) {
            this.set___dirty(true);
            this.__transformDirty = true;
          }
          this.__context = this.__canvas = this.__bitmap = null;
        },
        __getBounds: function (a, b) {
          if (this.__bounds != null) {
            var c = da.__pool.get();
            this.__bounds.__transform(c, b);
            a.__expand(c.x, c.y, c.width, c.height);
            da.__pool.release(c);
          }
        },
        __hitTest: function (a, b, c, d) {
          if (this.__bounds == null) {
            return false;
          }
          var e = d.a * d.d - d.b * d.c;
          var f = e == 0 ? -d.tx : 1 / e * (d.c * (d.ty - b) + d.d * (a - d.tx));
          e = d.a * d.d - d.b * d.c;
          a = e == 0 ? -d.ty : 1 / e * (d.a * (b - d.ty) + d.b * (d.tx - a));
          if (f > this.__bounds.x && a > this.__bounds.y && this.__bounds.contains(f, a)) {
            if (c) {
              return B.hitTest(this, f, a);
            } else {
              return true;
            }
          } else {
            return false;
          }
        },
        __findExtrema: function (a, b, c, d) {
          var e = [];
          if ((!(b < d) || !(b > a)) && (!(b > d) || !(b < a)) || (!(c < d) || !(c > a)) && (!(c > d) || !(c < a))) {
            var f = -a + b * 3 + d - c * 3;
            var k = a * 2 - b * 4 + c * 2;
            var h = b - a;
            var n = k * k - f * 4 * h;
            if (f == 0) {
              f = -h / k;
              if (f > 0 && f < 1) {
                e.push(this.__calculateBezierCubicPoint(f, a, b, c, d));
              }
            } else if (n >= 0) {
              h = (-k + Math.sqrt(n)) / (f * 2);
              f = (-k - Math.sqrt(n)) / (f * 2);
              if (h > 0 && h < 1) {
                e.push(this.__calculateBezierCubicPoint(h, a, b, c, d));
              }
              if (f > 0 && f < 1) {
                e.push(this.__calculateBezierCubicPoint(f, a, b, c, d));
              }
            }
          }
          b = a;
          e.push(d);
          for (d = 0; d < e.length;) {
            c = e[d];
            ++d;
            if (c < b) {
              b = c;
            }
            if (c > a) {
              a = c;
            }
          }
          return {
            min: b,
            max: a
          };
        },
        __inflateBounds: function (a, b) {
          if (this.__bounds == null) {
            this.__bounds = new da(a, b, 0, 0);
            this.__transformDirty = true;
          } else {
            if (a < this.__bounds.x) {
              this.__bounds.width += this.__bounds.x - a;
              this.__bounds.x = a;
              this.__transformDirty = true;
            }
            if (b < this.__bounds.y) {
              this.__bounds.height += this.__bounds.y - b;
              this.__bounds.y = b;
              this.__transformDirty = true;
            }
            if (a > this.__bounds.x + this.__bounds.width) {
              this.__bounds.width = a - this.__bounds.x;
            }
            if (b > this.__bounds.y + this.__bounds.height) {
              this.__bounds.height = b - this.__bounds.y;
            }
          }
        },
        __update: function (a, b) {
          if (this.__bounds != null && !(this.__bounds.width <= 0) && !(this.__bounds.height <= 0)) {
            var c = this.__owner.__renderTransform;
            if (c != null) {
              var d = b;
              var e = b;
              if (this.__owner.__worldScale9Grid == null) {
                d = c.b == 0 ? Math.abs(c.a) : Math.sqrt(c.a * c.a + c.b * c.b);
                e = c.c == 0 ? Math.abs(c.d) : Math.sqrt(c.c * c.c + c.d * c.d);
                if (a != null) {
                  d = a.b == 0 ? d * a.a : d * Math.sqrt(a.a * a.a + a.b * a.b);
                  e = a.c == 0 ? e * a.d : e * Math.sqrt(a.c * a.c + a.d * a.d);
                }
              }
              a = this.__bounds.width * d;
              e *= this.__bounds.height;
              if (a < 1 || e < 1) {
                if (this.__width >= 1 || this.__height >= 1) {
                  this.set___dirty(true);
                }
                this.__height = this.__width = 0;
              } else {
                if (fe.maxTextureWidth != null && a > fe.maxTextureWidth) {
                  a = fe.maxTextureWidth;
                }
                if (fe.maxTextureWidth != null && e > fe.maxTextureHeight) {
                  e = fe.maxTextureHeight;
                }
                if (this.__owner.__worldScale9Grid != null) {
                  this.__renderTransform.a = b;
                  this.__renderTransform.d = b;
                  d = 1 / b;
                  var f = 1 / b;
                } else {
                  this.__renderTransform.a = a / this.__bounds.width;
                  this.__renderTransform.d = e / this.__bounds.height;
                  d = 1 / this.__renderTransform.a;
                  f = 1 / this.__renderTransform.d;
                }
                this.__worldTransform.a = d * c.a;
                this.__worldTransform.b = d * c.b;
                this.__worldTransform.c = f * c.c;
                this.__worldTransform.d = f * c.d;
                f = this.__bounds.x;
                var k = this.__bounds.y;
                d = f * c.a + k * c.c + c.tx;
                c = f * c.b + k * c.d + c.ty;
                if (b > 1) {
                  b = 1 / b;
                  this.__worldTransform.tx = Math.round(d / b) * b;
                  this.__worldTransform.ty = Math.round(c / b) * b;
                } else {
                  this.__worldTransform.tx = Math.round(d);
                  this.__worldTransform.ty = Math.round(c);
                }
                b = this.__worldTransform;
                f = b.a * b.d - b.b * b.c;
                this.__renderTransform.tx = f == 0 ? -b.tx : 1 / f * (b.c * (b.ty - c) + b.d * (d - b.tx));
                b = this.__worldTransform;
                f = b.a * b.d - b.b * b.c;
                this.__renderTransform.ty = f == 0 ? -b.ty : 1 / f * (b.a * (c - b.ty) + b.b * (b.tx - d));
                a = Math.ceil(a + 1);
                e = Math.ceil(e + 1);
                if (a != this.__width || e != this.__height) {
                  this.set___dirty(true);
                }
                this.__width = a;
                this.__height = e;
              }
            }
          }
        },
        set___dirty: function (a) {
          if (a && this.__owner != null) {
            var b = this.__owner;
            if (!b.__renderDirty) {
              b.__renderDirty = true;
              b.__setParentRenderDirty();
            }
          }
          if (a) {
            this.__hardwareDirty = this.__softwareDirty = true;
          }
          return this.__dirty = a;
        },
        __class__: fe,
        __properties__: {
          set___dirty: "set___dirty"
        }
      };
      function Ho() {}
      g["openfl.display.ITileContainer"] = Ho;
      Ho.__name__ = "openfl.display.ITileContainer";
      Ho.__isInterface__ = true;
      var Rp = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "bevel";
            case 1:
              return "miter";
            case 2:
              return "round";
            default:
              return null;
          }
        }
      };
      function Io() {
        gb.call(this);
        this.__drawableType = 4;
        this.contentLoaderInfo = Lf.create(this);
        this.uncaughtErrorEvents = this.contentLoaderInfo.uncaughtErrorEvents;
        this.__unloaded = true;
      }
      g["openfl.display.Loader"] = Io;
      Io.__name__ = "openfl.display.Loader";
      Io.__super__ = gb;
      Io.prototype = q(gb.prototype, {
        addChild: function (a) {
          throw new Pb("Error #2069: The Loader class does not implement this method.", 2069);
        },
        addChildAt: function (a, b) {
          throw new Pb("Error #2069: The Loader class does not implement this method.", 2069);
        },
        removeChild: function (a) {
          if (a == this.content) {
            return gb.prototype.removeChild.call(this, this.content);
          }
          throw new Pb("Error #2069: The Loader class does not implement this method.", 2069);
        },
        removeChildAt: function (a) {
          throw new Pb("Error #2069: The Loader class does not implement this method.", 2069);
        },
        __class__: Io
      });
      function Lf() {
        pa.call(this);
        this.applicationDomain = xi.currentDomain;
        this.bytesTotal = this.bytesLoaded = 0;
        this.childAllowsParent = true;
        this.parameters = {};
      }
      g["openfl.display.LoaderInfo"] = Lf;
      Lf.__name__ = "openfl.display.LoaderInfo";
      Lf.create = function (a) {
        var b = new Lf();
        b.uncaughtErrorEvents = new sm();
        if (a != null) {
          b.loader = a;
        } else {
          b.url = Lf.__rootURL;
        }
        return b;
      };
      Lf.__super__ = pa;
      Lf.prototype = q(pa.prototype, {
        __complete: function () {
          if (!this.__completed) {
            if (this.bytesLoaded < this.bytesTotal) {
              this.bytesLoaded = this.bytesTotal;
            }
            this.__update(this.bytesLoaded, this.bytesTotal);
            this.__completed = true;
            this.dispatchEvent(new Ga("complete"));
          }
        },
        __update: function (a, b) {
          this.bytesLoaded = a;
          this.bytesTotal = b;
          this.dispatchEvent(new yi("progress", false, false, a, b));
        },
        __class__: Lf
      });
      function Lj() {
        Ua.call(this);
        this.__enabled = true;
      }
      g["openfl.display.MovieClip"] = Lj;
      Lj.__name__ = "openfl.display.MovieClip";
      Lj.__super__ = Ua;
      Lj.prototype = q(Ua.prototype, {
        __enterFrame: function (a) {
          if (this.__timeline != null) {
            this.__timeline.__enterFrame(a);
          }
          for (var b = 0, c = this.__children; b < c.length;) {
            var d = c[b];
            ++b;
            d.__enterFrame(a);
          }
        },
        __tabTest: function (a) {
          if (this.__enabled) {
            Ua.prototype.__tabTest.call(this, a);
          }
        },
        __class__: Lj
      });
      function tb(a, b) {
        ce.call(this);
        this.__context3D = a;
        this.__context = a.__context;
        this.__gl = this.gl = a.__context.webgl;
        this.__defaultRenderTarget = b;
        this.__flipped = this.__defaultRenderTarget == null;
        if (fe.maxTextureWidth == null) {
          fe.maxTextureWidth = fe.maxTextureHeight = this.__gl.getParameter(this.__gl.MAX_TEXTURE_SIZE);
        }
        this.__matrix = kb._new();
        this.__values = [];
        this.__softwareRenderer = new lg(null);
        this.__type = "opengl";
        this.__setBlendMode(10);
        this.__context3D.__setGLBlend(true);
        this.__clipRects = [];
        this.__maskObjects = [];
        this.__numClipRects = 0;
        this.__projection = kb._new();
        this.__projectionFlipped = kb._new();
        this.__stencilReference = 0;
        this.__tempRect = new da();
        this.__defaultDisplayShader = new qm();
        this.__defaultGraphicsShader = new ph();
        this.__defaultShader = this.__defaultDisplayShader;
        this.__initShader(this.__defaultShader);
        this.__scrollRectMasks = new bb(function () {
          return new og();
        });
        this.__maskShader = new Eh();
      }
      g["openfl.display.OpenGLRenderer"] = tb;
      tb.__name__ = "openfl.display.OpenGLRenderer";
      tb.__super__ = ce;
      tb.prototype = q(ce.prototype, {
        applyAlpha: function (a) {
          tb.__alphaValue[0] = a * this.__worldAlpha;
          if (this.__currentShaderBuffer != null) {
            this.__currentShaderBuffer.addFloatOverride("openfl_Alpha", tb.__alphaValue);
          } else if (this.__currentShader != null && this.__currentShader.__alpha != null) {
            this.__currentShader.__alpha.value = tb.__alphaValue;
          }
        },
        applyBitmapData: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          if (this.__currentShaderBuffer != null) {
            if (a != null) {
              tb.__textureSizeValue[0] = a.__textureWidth;
              tb.__textureSizeValue[1] = a.__textureHeight;
              this.__currentShaderBuffer.addFloatOverride("openfl_TextureSize", tb.__textureSizeValue);
            }
          } else if (this.__currentShader != null) {
            if (this.__currentShader.__bitmap != null) {
              this.__currentShader.__bitmap.input = a;
              this.__currentShader.__bitmap.filter = b && this.__allowSmoothing ? 4 : 5;
              this.__currentShader.__bitmap.mipFilter = 2;
              this.__currentShader.__bitmap.wrap = c ? 2 : 0;
            }
            if (this.__currentShader.__texture != null) {
              this.__currentShader.__texture.input = a;
              this.__currentShader.__texture.filter = b && this.__allowSmoothing ? 4 : 5;
              this.__currentShader.__texture.mipFilter = 2;
              this.__currentShader.__texture.wrap = c ? 2 : 0;
            }
            if (this.__currentShader.__textureSize != null) {
              if (a != null) {
                tb.__textureSizeValue[0] = a.__textureWidth;
                tb.__textureSizeValue[1] = a.__textureHeight;
                this.__currentShader.__textureSize.value = tb.__textureSizeValue;
              } else {
                this.__currentShader.__textureSize.value = null;
              }
            }
          }
        },
        applyColorTransform: function (a) {
          var b = a != null && !a.__isDefault(true);
          this.applyHasColorTransform(b);
          if (b) {
            a.__setArrays(tb.__colorMultipliersValue, tb.__colorOffsetsValue);
            if (this.__currentShaderBuffer != null) {
              this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier", tb.__colorMultipliersValue);
              this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset", tb.__colorOffsetsValue);
            } else if (this.__currentShader != null) {
              if (this.__currentShader.__colorMultiplier != null) {
                this.__currentShader.__colorMultiplier.value = tb.__colorMultipliersValue;
              }
              if (this.__currentShader.__colorOffset != null) {
                this.__currentShader.__colorOffset.value = tb.__colorOffsetsValue;
              }
            }
          } else if (this.__currentShaderBuffer != null) {
            this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier", tb.__emptyColorValue);
            this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset", tb.__emptyColorValue);
          } else if (this.__currentShader != null) {
            if (this.__currentShader.__colorMultiplier != null) {
              this.__currentShader.__colorMultiplier.value = tb.__emptyColorValue;
            }
            if (this.__currentShader.__colorOffset != null) {
              this.__currentShader.__colorOffset.value = tb.__emptyColorValue;
            }
          }
        },
        applyHasColorTransform: function (a) {
          tb.__hasColorTransformValue[0] = a;
          if (this.__currentShaderBuffer != null) {
            this.__currentShaderBuffer.addBoolOverride("openfl_HasColorTransform", tb.__hasColorTransformValue);
          } else if (this.__currentShader != null && this.__currentShader.__hasColorTransform != null) {
            this.__currentShader.__hasColorTransform.value = tb.__hasColorTransformValue;
          }
        },
        applyMatrix: function (a) {
          if (this.__currentShaderBuffer != null) {
            this.__currentShaderBuffer.addFloatOverride("openfl_Matrix", a);
          } else if (this.__currentShader != null && this.__currentShader.__matrix != null) {
            this.__currentShader.__matrix.value = a;
          }
        },
        setShader: function (a) {
          this.__currentShaderBuffer = null;
          if (this.__currentShader != a) {
            if (a == null) {
              this.__currentShader = null;
              this.__context3D.setProgram(null);
            } else {
              this.__currentShader = a;
              this.__initShader(a);
              this.__context3D.setProgram(a.program);
              this.__context3D.__flushGLProgram();
              this.__currentShader.__enable();
              this.__context3D.__state.shader = a;
            }
          }
        },
        setViewport: function () {
          this.__gl.viewport(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight);
        },
        updateShader: function () {
          if (this.__currentShader != null) {
            if (this.__currentShader.__position != null) {
              this.__currentShader.__position.__useArray = true;
            }
            if (this.__currentShader.__textureCoord != null) {
              this.__currentShader.__textureCoord.__useArray = true;
            }
            this.__context3D.setProgram(this.__currentShader.program);
            this.__context3D.__flushGLProgram();
            this.__context3D.__flushGLTextures();
            this.__currentShader.__update();
          }
        },
        useAlphaArray: function () {
          if (this.__currentShader != null && this.__currentShader.__alpha != null) {
            this.__currentShader.__alpha.__useArray = true;
          }
        },
        useColorTransformArray: function () {
          if (this.__currentShader != null) {
            if (this.__currentShader.__colorMultiplier != null) {
              this.__currentShader.__colorMultiplier.__useArray = true;
            }
            if (this.__currentShader.__colorOffset != null) {
              this.__currentShader.__colorOffset.__useArray = true;
            }
          }
        },
        __clear: function () {
          if (this.__stage == null || this.__stage.__transparent) {
            this.__context3D.clear(0, 0, 0, 0, 0, 0, 1);
          } else {
            this.__context3D.clear(this.__stage.__colorSplit[0], this.__stage.__colorSplit[1], this.__stage.__colorSplit[2], 1, 0, 0, 1);
          }
          this.__cleared = true;
        },
        __clearShader: function () {
          if (this.__currentShader != null) {
            if (this.__currentShaderBuffer == null) {
              if (this.__currentShader.__bitmap != null) {
                this.__currentShader.__bitmap.input = null;
              }
            } else {
              this.__currentShaderBuffer.clearOverride();
            }
            if (this.__currentShader.__texture != null) {
              this.__currentShader.__texture.input = null;
            }
            if (this.__currentShader.__textureSize != null) {
              this.__currentShader.__textureSize.value = null;
            }
            if (this.__currentShader.__hasColorTransform != null) {
              this.__currentShader.__hasColorTransform.value = null;
            }
            if (this.__currentShader.__position != null) {
              this.__currentShader.__position.value = null;
            }
            if (this.__currentShader.__matrix != null) {
              this.__currentShader.__matrix.value = null;
            }
            this.__currentShader.__clearUseArray();
          }
        },
        __copyShader: function (a) {
          this.__currentShader = a.__currentShader;
          this.__currentShaderBuffer = a.__currentShaderBuffer;
          this.__currentDisplayShader = a.__currentDisplayShader;
          this.__currentGraphicsShader = a.__currentGraphicsShader;
        },
        __getMatrix: function (a, b) {
          var c = za.__pool.get();
          c.copyFrom(a);
          c.concat(this.__worldTransform);
          if (b == 0 || b == 1 && c.b == 0 && c.c == 0 && c.a < 1.001 && c.a > 0.999 && c.d < 1.001 && c.d > 0.999) {
            c.tx = Math.round(c.tx);
            c.ty = Math.round(c.ty);
          }
          kb.identity(this.__matrix);
          kb.set(this.__matrix, 0, c.a);
          kb.set(this.__matrix, 1, c.b);
          kb.set(this.__matrix, 4, c.c);
          kb.set(this.__matrix, 5, c.d);
          kb.set(this.__matrix, 12, c.tx);
          kb.set(this.__matrix, 13, c.ty);
          kb.append(this.__matrix, this.__flipped ? this.__projectionFlipped : this.__projection);
          this.__values[0] = kb.get(this.__matrix, 0);
          this.__values[1] = kb.get(this.__matrix, 1);
          this.__values[2] = kb.get(this.__matrix, 2);
          this.__values[3] = kb.get(this.__matrix, 3);
          this.__values[4] = kb.get(this.__matrix, 4);
          this.__values[5] = kb.get(this.__matrix, 5);
          this.__values[6] = kb.get(this.__matrix, 6);
          this.__values[7] = kb.get(this.__matrix, 7);
          this.__values[8] = kb.get(this.__matrix, 8);
          this.__values[9] = kb.get(this.__matrix, 9);
          this.__values[10] = kb.get(this.__matrix, 10);
          this.__values[11] = kb.get(this.__matrix, 11);
          this.__values[12] = kb.get(this.__matrix, 12);
          this.__values[13] = kb.get(this.__matrix, 13);
          this.__values[14] = kb.get(this.__matrix, 14);
          this.__values[15] = kb.get(this.__matrix, 15);
          za.__pool.release(c);
          return this.__values;
        },
        __initShader: function (a) {
          if (a != null) {
            if (a.__context == null) {
              a.__context = this.__context3D;
              a.__init();
            }
            return a;
          } else {
            return this.__defaultShader;
          }
        },
        __initDisplayShader: function (a) {
          if (a != null) {
            if (a.__context == null) {
              a.__context = this.__context3D;
              a.__init();
            }
            return a;
          } else {
            return this.__defaultDisplayShader;
          }
        },
        __initGraphicsShader: function (a) {
          if (a != null) {
            if (a.__context == null) {
              a.__context = this.__context3D;
              a.__init();
            }
            return a;
          } else {
            return this.__defaultGraphicsShader;
          }
        },
        __initShaderBuffer: function (a) {
          if (a != null) {
            return this.__initGraphicsShader(a.shader);
          } else {
            return this.__defaultGraphicsShader;
          }
        },
        __popMask: function () {
          if (this.__stencilReference != 0) {
            var a = this.__maskObjects.pop();
            if (this.__stencilReference > 1) {
              this.__context3D.setStencilActions(2, 1, 0, 0, 5);
              this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 255);
              this.__context3D.setColorMask(false, false, false, false);
              this.__renderDrawableMask(a);
              this.__stencilReference--;
              this.__context3D.setStencilActions(2, 1, 5, 5, 5);
              this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0);
              this.__context3D.setColorMask(true, true, true, true);
            } else {
              this.__stencilReference = 0;
              this.__context3D.setStencilActions();
              this.__context3D.setStencilReferenceValue(0, 0, 0);
            }
          }
        },
        __popMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a.__mask != null) {
            this.__popMask();
          }
          if (b && a.__scrollRect != null) {
            if (a.__renderTransform.b != 0 || a.__renderTransform.c != 0) {
              this.__scrollRectMasks.release(this.__maskObjects[this.__maskObjects.length - 1]);
              this.__popMask();
            } else {
              this.__popMaskRect();
            }
          }
        },
        __popMaskRect: function () {
          if (this.__numClipRects > 0) {
            this.__numClipRects--;
            if (this.__numClipRects > 0) {
              this.__scissorRect(this.__clipRects[this.__numClipRects - 1]);
            } else {
              this.__scissorRect();
            }
          }
        },
        __pushMask: function (a) {
          if (this.__stencilReference == 0) {
            this.__context3D.clear(0, 0, 0, 0, 0, 0, 4);
            this.__updatedStencil = true;
          }
          this.__context3D.setStencilActions(2, 1, 2, 5, 5);
          this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 255);
          this.__context3D.setColorMask(false, false, false, false);
          this.__renderDrawableMask(a);
          this.__maskObjects.push(a);
          this.__stencilReference++;
          this.__context3D.setStencilActions(2, 1, 5, 5, 5);
          this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0);
          this.__context3D.setColorMask(true, true, true, true);
        },
        __pushMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b && a.__scrollRect != null) {
            if (a.__renderTransform.b != 0 || a.__renderTransform.c != 0) {
              b = this.__scrollRectMasks.get();
              b.get_graphics().clear();
              b.get_graphics().beginFill(65280);
              b.get_graphics().drawRect(a.__scrollRect.x, a.__scrollRect.y, a.__scrollRect.width, a.__scrollRect.height);
              b.__renderTransform.copyFrom(a.__renderTransform);
              this.__pushMask(b);
            } else {
              this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
            }
          }
          if (a.__mask != null) {
            this.__pushMask(a.__mask);
          }
        },
        __pushMaskRect: function (a, b) {
          if (this.__numClipRects == this.__clipRects.length) {
            this.__clipRects[this.__numClipRects] = new da();
          }
          var c = za.__pool.get();
          c.copyFrom(b);
          c.concat(this.__worldTransform);
          b = this.__clipRects[this.__numClipRects];
          a.__transform(b, c);
          if (this.__numClipRects > 0) {
            a = this.__clipRects[this.__numClipRects - 1];
            b.__contract(a.x, a.y, a.width, a.height);
          }
          if (b.height < 0) {
            b.height = 0;
          }
          if (b.width < 0) {
            b.width = 0;
          }
          za.__pool.release(c);
          this.__scissorRect(b);
          this.__numClipRects++;
        },
        __render: function (a) {
          this.__context3D.setColorMask(true, true, true, true);
          this.__context3D.setCulling(3);
          this.__context3D.setDepthTest(false, 0);
          this.__context3D.setStencilActions();
          this.__context3D.setStencilReferenceValue(0, 0, 0);
          this.__context3D.setScissorRectangle(null);
          this.__blendMode = null;
          this.__setBlendMode(10);
          if (this.__defaultRenderTarget == null) {
            tb.__scissorRectangle.setTo(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight);
            this.__context3D.setScissorRectangle(tb.__scissorRectangle);
            this.__upscaled = this.__worldTransform.a != 1 || this.__worldTransform.d != 1;
            this.__renderDrawable(a);
            if (this.__offsetX > 0 || this.__offsetY > 0) {
              if (this.__offsetX > 0) {
                tb.__scissorRectangle.setTo(0, 0, this.__offsetX, this.__height);
                this.__context3D.setScissorRectangle(tb.__scissorRectangle);
                this.__context3D.__flushGL();
                this.__gl.clearColor(0, 0, 0, 1);
                this.__gl.clear(this.__gl.COLOR_BUFFER_BIT);
                tb.__scissorRectangle.setTo(this.__offsetX + this.__displayWidth, 0, this.__width, this.__height);
                this.__context3D.setScissorRectangle(tb.__scissorRectangle);
                this.__context3D.__flushGL();
                this.__gl.clearColor(0, 0, 0, 1);
                this.__gl.clear(this.__gl.COLOR_BUFFER_BIT);
              }
              if (this.__offsetY > 0) {
                tb.__scissorRectangle.setTo(0, 0, this.__width, this.__offsetY);
                this.__context3D.setScissorRectangle(tb.__scissorRectangle);
                this.__context3D.__flushGL();
                this.__gl.clearColor(0, 0, 0, 1);
                this.__gl.clear(this.__gl.COLOR_BUFFER_BIT);
                tb.__scissorRectangle.setTo(0, this.__offsetY + this.__displayHeight, this.__width, this.__height);
                this.__context3D.setScissorRectangle(tb.__scissorRectangle);
                this.__context3D.__flushGL();
                this.__gl.clearColor(0, 0, 0, 1);
                this.__gl.clear(this.__gl.COLOR_BUFFER_BIT);
              }
              this.__context3D.setScissorRectangle(null);
            }
          } else {
            tb.__scissorRectangle.setTo(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight);
            this.__context3D.setScissorRectangle(tb.__scissorRectangle);
            var b = a.__mask;
            var c = a.__scrollRect;
            a.__mask = null;
            a.__scrollRect = null;
            this.__renderDrawable(a);
            a.__mask = b;
            a.__scrollRect = c;
          }
          this.__context3D.present();
        },
        __renderDrawable: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 0:
                tm.renderDrawable(a, this);
                break;
              case 2:
                Qe.renderDrawable(a, this);
                break;
              case 3:
                Fh.renderDrawable(a, this);
                break;
              case 4:
              case 5:
                um.renderDrawable(a, this);
                break;
              case 6:
                vm.renderDrawable(a, this);
                break;
              case 7:
                yg.renderDrawable(a, this);
                break;
              case 8:
                Re.renderDrawable(a, this);
                break;
              case 9:
                Y.renderDrawable(a, this);
            }
          }
        },
        __renderDrawableMask: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 0:
                tm.renderDrawableMask(a, this);
                break;
              case 2:
                Qe.renderDrawableMask(a, this);
                break;
              case 3:
                Fh.renderDrawableMask(a, this);
                break;
              case 4:
              case 5:
                um.renderDrawableMask(a, this);
                break;
              case 6:
                vm.renderDrawableMask(a, this);
                break;
              case 7:
                yg.renderDrawableMask(a, this);
                break;
              case 8:
                Re.renderDrawableMask(a, this);
                break;
              case 9:
                Y.renderDrawableMask(a, this);
            }
          }
        },
        __renderFilterPass: function (a, b, c, d) {
          if (d == null) {
            d = true;
          }
          if (a != null && b != null && this.__defaultRenderTarget != null) {
            var e = this.__context3D.__state.renderToTexture;
            var f = this.__context3D.__state.renderToTextureDepthStencil;
            var k = this.__context3D.__state.renderToTextureAntiAlias;
            var h = this.__context3D.__state.renderToTextureSurfaceSelector;
            this.__context3D.setRenderToTexture(this.__defaultRenderTarget.getTexture(this.__context3D), false);
            if (d) {
              this.__context3D.clear(0, 0, 0, 0, 0, 0, 1);
            }
            b = this.__initShader(b);
            this.setShader(b);
            this.applyAlpha(1);
            this.applyBitmapData(a, c);
            this.applyColorTransform(null);
            this.applyMatrix(this.__getMatrix(a.__renderTransform, 1));
            this.updateShader();
            c = a.getVertexBuffer(this.__context3D);
            if (b.__position != null) {
              this.__context3D.setVertexBufferAt(b.__position.index, c, 0, 3);
            }
            if (b.__textureCoord != null) {
              this.__context3D.setVertexBufferAt(b.__textureCoord.index, c, 3, 2);
            }
            a = a.getIndexBuffer(this.__context3D);
            this.__context3D.drawTriangles(a);
            if (e != null) {
              this.__context3D.setRenderToTexture(e, f, k, h);
            } else {
              this.__context3D.setRenderToBackBuffer();
            }
            this.__clearShader();
          }
        },
        __resize: function (a, b) {
          this.__width = a;
          this.__height = b;
          a = this.__defaultRenderTarget == null ? this.__stage.stageWidth : this.__defaultRenderTarget.width;
          b = this.__defaultRenderTarget == null ? this.__stage.stageHeight : this.__defaultRenderTarget.height;
          if (this.__defaultRenderTarget == null) {
            var c = this.__worldTransform;
            c = Math.round(c.a * 0 + c.c * 0 + c.tx);
          } else {
            c = 0;
          }
          this.__offsetX = c;
          if (this.__defaultRenderTarget == null) {
            c = this.__worldTransform;
            c = Math.round(c.b * 0 + c.d * 0 + c.ty);
          } else {
            c = 0;
          }
          this.__offsetY = c;
          if (this.__defaultRenderTarget == null) {
            c = this.__worldTransform;
            c = Math.round(a * c.a + c.c * 0 + c.tx - this.__offsetX);
          } else {
            c = a;
          }
          this.__displayWidth = c;
          if (this.__defaultRenderTarget == null) {
            c = this.__worldTransform;
            c = Math.round(c.b * 0 + b * c.d + c.ty - this.__offsetY);
          } else {
            c = b;
          }
          this.__displayHeight = c;
          kb.createOrtho(this.__projection, 0, this.__displayWidth + this.__offsetX * 2, 0, this.__displayHeight + this.__offsetY * 2, -1000, 1000);
          kb.createOrtho(this.__projectionFlipped, 0, this.__displayWidth + this.__offsetX * 2, this.__displayHeight + this.__offsetY * 2, 0, -1000, 1000);
        },
        __resumeClipAndMask: function (a) {
          if (this.__stencilReference > 0) {
            this.__context3D.setStencilActions(2, 1, 5, 5, 5);
            this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0);
          } else {
            this.__context3D.setStencilActions();
            this.__context3D.setStencilReferenceValue(0, 0, 0);
          }
          if (this.__numClipRects > 0) {
            this.__scissorRect(this.__clipRects[this.__numClipRects - 1]);
          } else {
            this.__scissorRect();
          }
        },
        __scissorRect: function (a) {
          if (a != null) {
            var b = Math.floor(a.x);
            var c = Math.floor(a.y);
            var d = a.width > 0 ? Math.ceil(a.get_right()) - b : 0;
            var e = a.height > 0 ? Math.ceil(a.get_bottom()) - c : 0;
            if (this.__context3D.__backBufferWantsBestResolution) {
              b = Math.floor(a.x / this.__pixelRatio);
              c = Math.floor(a.y / this.__pixelRatio);
              d = a.width > 0 ? Math.ceil(a.get_right() / this.__pixelRatio) - b : 0;
              e = a.height > 0 ? Math.ceil(a.get_bottom() / this.__pixelRatio) - c : 0;
            }
            if (d < 0) {
              d = 0;
            }
            if (e < 0) {
              e = 0;
            }
            tb.__scissorRectangle.setTo(b, c, d, e);
            this.__context3D.setScissorRectangle(tb.__scissorRectangle);
          } else {
            this.__context3D.setScissorRectangle(null);
          }
        },
        __setBlendMode: function (a) {
          if (this.__overrideBlendMode != null) {
            a = this.__overrideBlendMode;
          }
          if (this.__blendMode != a) {
            this.__blendMode = a;
            switch (a) {
              case 0:
                this.__context3D.setBlendFactors(2, 2);
                break;
              case 9:
                this.__context3D.setBlendFactors(1, 5);
                break;
              case 12:
                this.__context3D.setBlendFactors(2, 6);
                break;
              case 14:
                this.__context3D.setBlendFactors(2, 2);
                this.__context3D.__setGLBlendEquation(this.__gl.FUNC_REVERSE_SUBTRACT);
                break;
              default:
                this.__context3D.setBlendFactors(2, 5);
            }
          }
        },
        __setRenderTarget: function (a) {
          this.__defaultRenderTarget = a;
          this.__flipped = a == null;
          if (a != null) {
            this.__resize(a.width, a.height);
          }
        },
        __setShaderBuffer: function (a) {
          this.setShader(a.shader);
          this.__currentShaderBuffer = a;
        },
        __suspendClipAndMask: function () {
          if (this.__stencilReference > 0) {
            this.__context3D.setStencilActions();
            this.__context3D.setStencilReferenceValue(0, 0, 0);
          }
          if (this.__numClipRects > 0) {
            this.__scissorRect();
          }
        },
        __updateShaderBuffer: function (a) {
          if (this.__currentShader != null && this.__currentShaderBuffer != null) {
            this.__currentShader.__updateFromBuffer(this.__currentShaderBuffer, a);
          }
        },
        __class__: tb
      });
      function hk(a) {
        this.onComplete = new Tc();
        this.display = a;
        if (a != null) {
          a.addEventListener("unload", m(this, this.display_onUnload));
          oa.get_current().addChild(a);
        }
      }
      g["openfl.display.Preloader"] = hk;
      hk.__name__ = "openfl.display.Preloader";
      hk.prototype = {
        start: function () {
          this.ready = true;
          oa.get_current().get_loaderInfo().__complete();
          if (this.display != null) {
            var a = new Ga("complete", true, true);
            this.display.dispatchEvent(a);
            if (!a.isDefaultPrevented()) {
              this.display.dispatchEvent(new Ga("unload"));
            }
          } else if (!this.complete) {
            this.complete = true;
            this.onComplete.dispatch();
          }
        },
        update: function (a, b) {
          oa.get_current().get_loaderInfo().__update(a, b);
          if (this.display != null) {
            this.display.dispatchEvent(new yi("progress", true, true, a, b));
          }
        },
        display_onUnload: function (a) {
          if (this.display != null) {
            this.display.removeEventListener("unload", m(this, this.display_onUnload));
            if (this.display.parent == oa.get_current()) {
              oa.get_current().removeChild(this.display);
            }
            oa.get_current().stage.set_focus(null);
            this.display = null;
          }
          if (this.ready && !this.complete) {
            this.complete = true;
            this.onComplete.dispatch();
          }
        },
        __class__: hk
      };
      function wm() {
        Ua.call(this);
        var a = this.getBackgroundColor();
        var b = 0;
        if ((a >> 16 & 255) * 0.299 + (a >> 8 & 255) * 0.587 + (a & 255) * 0.114 < 70) {
          b = 16777215;
        }
        a = this.getHeight() / 2 - 3.5;
        var c = this.getWidth() - 60;
        this.outline = new og();
        this.outline.get_graphics().beginFill(b, 0.07);
        this.outline.get_graphics().drawRect(0, 0, c, 7);
        this.outline.set_x(30);
        this.outline.set_y(a);
        this.outline.set_alpha(0);
        this.addChild(this.outline);
        this.progress = new og();
        this.progress.get_graphics().beginFill(b, 0.35);
        this.progress.get_graphics().drawRect(0, 0, c - 4, 3);
        this.progress.set_x(32);
        this.progress.set_y(a + 2);
        this.progress.set_scaleX(0);
        this.progress.set_alpha(0);
        this.addChild(this.progress);
        this.startAnimation = oa.getTimer() + 100;
        this.endAnimation = this.startAnimation + 1000;
        this.addEventListener("addedToStage", m(this, this.this_onAddedToStage));
      }
      g["openfl.display.DefaultPreloader"] = wm;
      wm.__name__ = "openfl.display.DefaultPreloader";
      wm.__super__ = Ua;
      wm.prototype = q(Ua.prototype, {
        getBackgroundColor: function () {
          var a = oa.get_current().stage.window.context.attributes;
          if (Object.prototype.hasOwnProperty.call(a, "background") && a.background != null) {
            return a.background;
          } else {
            return 0;
          }
        },
        getHeight: function () {
          var a = oa.get_current().stage.window.__height;
          if (a > 0) {
            return a;
          } else {
            return oa.get_current().stage.stageHeight;
          }
        },
        getWidth: function () {
          var a = oa.get_current().stage.window.__width;
          if (a > 0) {
            return a;
          } else {
            return oa.get_current().stage.stageWidth;
          }
        },
        onInit: function () {
          this.addEventListener("enterFrame", m(this, this.this_onEnterFrame));
        },
        onLoaded: function () {
          this.removeEventListener("enterFrame", m(this, this.this_onEnterFrame));
          this.dispatchEvent(new Ga("unload"));
        },
        onUpdate: function (a, b) {
          var c = 0;
          if (b > 0) {
            c = a / b;
            if (c > 1) {
              c = 1;
            }
          }
          this.progress.set_scaleX(c);
        },
        this_onAddedToStage: function (a) {
          this.removeEventListener("addedToStage", m(this, this.this_onAddedToStage));
          this.onInit();
          this.onUpdate(this.get_loaderInfo().bytesLoaded, this.get_loaderInfo().bytesTotal);
          this.addEventListener("progress", m(this, this.this_onProgress));
          this.addEventListener("complete", m(this, this.this_onComplete));
        },
        this_onComplete: function (a) {
          a.preventDefault();
          this.removeEventListener("progress", m(this, this.this_onProgress));
          this.removeEventListener("complete", m(this, this.this_onComplete));
          this.onLoaded();
        },
        this_onEnterFrame: function (a) {
          a = (oa.getTimer() - this.startAnimation) / (this.endAnimation - this.startAnimation);
          if (a < 0) {
            a = 0;
          }
          if (a > 1) {
            a = 1;
          }
          this.outline.set_alpha(this.progress.set_alpha(a));
        },
        this_onProgress: function (a) {
          this.onUpdate(a.bytesLoaded | 0, a.bytesTotal | 0);
        },
        __class__: wm
      });
      function aj() {
        this.channels = 0;
        this.filter = 5;
        this.index = this.height = 0;
        this.mipFilter = 2;
        this.wrap = this.width = 0;
      }
      g["openfl.display.ShaderInput"] = aj;
      aj.__name__ = "openfl.display.ShaderInput";
      aj.prototype = {
        __disableGL: function (a, b) {
          if (!(b < 0)) {
            a.setTextureAt(b, null);
          }
        },
        __updateGL: function (a, b, c, d, e, f) {
          c = c ?? this.input;
          d = d ?? this.filter;
          e = e ?? this.mipFilter;
          f = f ?? this.wrap;
          if (c != null) {
            a.setTextureAt(b, c.getTexture(a));
            a.setSamplerStateAt(b, f, d, e);
          } else {
            a.setTextureAt(b, null);
          }
        },
        __class__: aj
      };
      function kg() {
        this.index = 0;
      }
      g["openfl.display.ShaderParameter"] = kg;
      kg.__name__ = "openfl.display.ShaderParameter";
      kg.prototype = {
        __disableGL: function (a) {
          if (!(this.index < 0) && !(a = a.gl, this.__isUniform)) {
            for (var b = 0, c = this.__arrayLength; b < c;) {
              var d = b++;
              a.disableVertexAttribArray(this.index + d);
            }
          }
        },
        __updateGL: function (a, b) {
          if (!(this.index < 0)) {
            a = a.gl;
            b = b ?? this.value;
            var c = this.__isBool ? b : null;
            var d = this.__isFloat ? b : null;
            var e = this.__isInt ? b : null;
            if (this.__isUniform) {
              if (b != null && b.length >= this.__length) {
                switch (this.type) {
                  case 0:
                    a.uniform1i(this.index, c[0] ? 1 : 0);
                    break;
                  case 1:
                    a.uniform2i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0);
                    break;
                  case 2:
                    a.uniform3i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0);
                    break;
                  case 3:
                    a.uniform4i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0, c[3] ? 1 : 0);
                    break;
                  case 4:
                    a.uniform1f(this.index, d[0]);
                    break;
                  case 5:
                    a.uniform2f(this.index, d[0], d[1]);
                    break;
                  case 6:
                    a.uniform3f(this.index, d[0], d[1], d[2]);
                    break;
                  case 7:
                    a.uniform4f(this.index, d[0], d[1], d[2], d[3]);
                    break;
                  case 8:
                    a.uniform1i(this.index, e[0]);
                    break;
                  case 9:
                    a.uniform2i(this.index, e[0], e[1]);
                    break;
                  case 10:
                    a.uniform3i(this.index, e[0], e[1], e[2]);
                    break;
                  case 11:
                    a.uniform4i(this.index, e[0], e[1], e[2], e[3]);
                    break;
                  case 12:
                    this.__uniformMatrix[0] = d[0];
                    this.__uniformMatrix[1] = d[1];
                    this.__uniformMatrix[2] = d[2];
                    this.__uniformMatrix[3] = d[3];
                    Xc.uniformMatrix2fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 16:
                    this.__uniformMatrix[0] = d[0];
                    this.__uniformMatrix[1] = d[1];
                    this.__uniformMatrix[2] = d[2];
                    this.__uniformMatrix[3] = d[3];
                    this.__uniformMatrix[4] = d[4];
                    this.__uniformMatrix[5] = d[5];
                    this.__uniformMatrix[6] = d[6];
                    this.__uniformMatrix[7] = d[7];
                    this.__uniformMatrix[8] = d[8];
                    Xc.uniformMatrix3fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 20:
                    this.__uniformMatrix[0] = d[0];
                    this.__uniformMatrix[1] = d[1];
                    this.__uniformMatrix[2] = d[2];
                    this.__uniformMatrix[3] = d[3];
                    this.__uniformMatrix[4] = d[4];
                    this.__uniformMatrix[5] = d[5];
                    this.__uniformMatrix[6] = d[6];
                    this.__uniformMatrix[7] = d[7];
                    this.__uniformMatrix[8] = d[8];
                    this.__uniformMatrix[9] = d[9];
                    this.__uniformMatrix[10] = d[10];
                    this.__uniformMatrix[11] = d[11];
                    this.__uniformMatrix[12] = d[12];
                    this.__uniformMatrix[13] = d[13];
                    this.__uniformMatrix[14] = d[14];
                    this.__uniformMatrix[15] = d[15];
                    Xc.uniformMatrix4fv(a, this.index, false, this.__uniformMatrix);
                }
              } else {
                switch (this.type) {
                  case 4:
                    a.uniform1f(this.index, 0);
                    break;
                  case 5:
                    a.uniform2f(this.index, 0, 0);
                    break;
                  case 6:
                    a.uniform3f(this.index, 0, 0, 0);
                    break;
                  case 7:
                    a.uniform4f(this.index, 0, 0, 0, 0);
                    break;
                  case 0:
                  case 8:
                    a.uniform1i(this.index, 0);
                    break;
                  case 1:
                  case 9:
                    a.uniform2i(this.index, 0, 0);
                    break;
                  case 2:
                  case 10:
                    a.uniform3i(this.index, 0, 0, 0);
                    break;
                  case 3:
                  case 11:
                    a.uniform4i(this.index, 0, 0, 0, 0);
                    break;
                  case 12:
                    this.__uniformMatrix[0] = 0;
                    this.__uniformMatrix[1] = 0;
                    this.__uniformMatrix[2] = 0;
                    this.__uniformMatrix[3] = 0;
                    Xc.uniformMatrix2fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 16:
                    this.__uniformMatrix[0] = 0;
                    this.__uniformMatrix[1] = 0;
                    this.__uniformMatrix[2] = 0;
                    this.__uniformMatrix[3] = 0;
                    this.__uniformMatrix[4] = 0;
                    this.__uniformMatrix[5] = 0;
                    this.__uniformMatrix[6] = 0;
                    this.__uniformMatrix[7] = 0;
                    this.__uniformMatrix[8] = 0;
                    Xc.uniformMatrix3fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 20:
                    this.__uniformMatrix[0] = 0;
                    this.__uniformMatrix[1] = 0;
                    this.__uniformMatrix[2] = 0;
                    this.__uniformMatrix[3] = 0;
                    this.__uniformMatrix[4] = 0;
                    this.__uniformMatrix[5] = 0;
                    this.__uniformMatrix[6] = 0;
                    this.__uniformMatrix[7] = 0;
                    this.__uniformMatrix[8] = 0;
                    this.__uniformMatrix[9] = 0;
                    this.__uniformMatrix[10] = 0;
                    this.__uniformMatrix[11] = 0;
                    this.__uniformMatrix[12] = 0;
                    this.__uniformMatrix[13] = 0;
                    this.__uniformMatrix[14] = 0;
                    this.__uniformMatrix[15] = 0;
                    Xc.uniformMatrix4fv(a, this.index, false, this.__uniformMatrix);
                }
              }
            } else if (this.__useArray || b != null && b.length != this.__length) {
              f = 0;
              k = this.__arrayLength;
              while (f < k) {
                h = f++;
                a.enableVertexAttribArray(this.index + h);
              }
            } else {
              for (var f = 0, k = this.__arrayLength; f < k;) {
                var h = f++;
                a.disableVertexAttribArray(this.index + h);
              }
              if (b != null) {
                switch (this.type) {
                  case 0:
                    a.vertexAttrib1f(this.index, c[0] ? 1 : 0);
                    break;
                  case 1:
                    a.vertexAttrib2f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0);
                    break;
                  case 2:
                    a.vertexAttrib3f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0);
                    break;
                  case 3:
                    a.vertexAttrib4f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0, c[3] ? 1 : 0);
                    break;
                  case 4:
                    a.vertexAttrib1f(this.index, d[0]);
                    break;
                  case 5:
                    a.vertexAttrib2f(this.index, d[0], d[1]);
                    break;
                  case 6:
                    a.vertexAttrib3f(this.index, d[0], d[1], d[2]);
                    break;
                  case 7:
                    a.vertexAttrib4f(this.index, d[0], d[1], d[2], d[3]);
                    break;
                  case 8:
                    a.vertexAttrib1f(this.index, e[0]);
                    break;
                  case 9:
                    a.vertexAttrib2f(this.index, e[0], e[1]);
                    break;
                  case 10:
                    a.vertexAttrib3f(this.index, e[0], e[1], e[2]);
                    break;
                  case 11:
                    a.vertexAttrib4f(this.index, e[0], e[1], e[2], e[3]);
                    break;
                  case 12:
                    a.vertexAttrib2f(this.index + 0, d[0], d[1]);
                    a.vertexAttrib2f(this.index + 1, d[2], d[3]);
                    break;
                  case 16:
                    a.vertexAttrib3f(this.index + 0, d[0], d[1], d[2]);
                    a.vertexAttrib3f(this.index + 1, d[3], d[4], d[5]);
                    a.vertexAttrib3f(this.index + 2, d[6], d[7], d[8]);
                    break;
                  case 20:
                    a.vertexAttrib4f(this.index + 0, d[0], d[1], d[2], d[3]);
                    a.vertexAttrib4f(this.index + 1, d[4], d[5], d[6], d[7]);
                    a.vertexAttrib4f(this.index + 2, d[8], d[9], d[10], d[11]);
                    a.vertexAttrib4f(this.index + 3, d[12], d[13], d[14], d[15]);
                }
              } else {
                switch (this.type) {
                  case 0:
                  case 4:
                  case 8:
                    a.vertexAttrib1f(this.index, 0);
                    break;
                  case 1:
                  case 5:
                  case 9:
                    a.vertexAttrib2f(this.index, 0, 0);
                    break;
                  case 2:
                  case 6:
                  case 10:
                    a.vertexAttrib3f(this.index, 0, 0, 0);
                    break;
                  case 3:
                  case 7:
                  case 11:
                    a.vertexAttrib4f(this.index, 0, 0, 0, 0);
                    break;
                  case 12:
                    a.vertexAttrib2f(this.index + 0, 0, 0);
                    a.vertexAttrib2f(this.index + 1, 0, 0);
                    break;
                  case 16:
                    a.vertexAttrib3f(this.index + 0, 0, 0, 0);
                    a.vertexAttrib3f(this.index + 1, 0, 0, 0);
                    a.vertexAttrib3f(this.index + 2, 0, 0, 0);
                    break;
                  case 20:
                    a.vertexAttrib4f(this.index + 0, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 1, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 2, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 3, 0, 0, 0, 0);
                }
              }
            }
          }
        },
        __updateGLFromBuffer: function (a, b, c, d, e) {
          if (!(this.index < 0)) {
            a = a.gl;
            if (this.__isUniform) {
              if (d >= this.__length) {
                switch (this.type) {
                  case 4:
                    a.uniform1f(this.index, b[c]);
                    break;
                  case 5:
                    a.uniform2f(this.index, b[c], b[c + 1]);
                    break;
                  case 6:
                    a.uniform3f(this.index, b[c], b[c + 1], b[c + 2]);
                    break;
                  case 7:
                    a.uniform4f(this.index, b[c], b[c + 1], b[c + 2], b[c + 3]);
                    break;
                  case 0:
                  case 8:
                    a.uniform1i(this.index, b[c] | 0);
                    break;
                  case 1:
                  case 9:
                    a.uniform2i(this.index, b[c] | 0, b[c + 1] | 0);
                    break;
                  case 2:
                  case 10:
                    a.uniform3i(this.index, b[c] | 0, b[c + 1] | 0, b[c + 2] | 0);
                    break;
                  case 3:
                  case 11:
                    a.uniform4i(this.index, b[c] | 0, b[c + 1] | 0, b[c + 2] | 0, b[c + 3] | 0);
                    break;
                  case 12:
                    this.__uniformMatrix[0] = b[c];
                    this.__uniformMatrix[1] = b[c + 1];
                    this.__uniformMatrix[2] = b[c + 2];
                    this.__uniformMatrix[3] = b[c + 3];
                    Xc.uniformMatrix2fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 16:
                    this.__uniformMatrix[0] = b[c];
                    this.__uniformMatrix[1] = b[c + 1];
                    this.__uniformMatrix[2] = b[c + 2];
                    this.__uniformMatrix[3] = b[c + 3];
                    this.__uniformMatrix[4] = b[c + 4];
                    this.__uniformMatrix[5] = b[c + 5];
                    this.__uniformMatrix[6] = b[c + 6];
                    this.__uniformMatrix[7] = b[c + 7];
                    this.__uniformMatrix[8] = b[c + 8];
                    Xc.uniformMatrix3fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 20:
                    this.__uniformMatrix[0] = b[c];
                    this.__uniformMatrix[1] = b[c + 1];
                    this.__uniformMatrix[2] = b[c + 2];
                    this.__uniformMatrix[3] = b[c + 3];
                    this.__uniformMatrix[4] = b[c + 4];
                    this.__uniformMatrix[5] = b[c + 5];
                    this.__uniformMatrix[6] = b[c + 6];
                    this.__uniformMatrix[7] = b[c + 7];
                    this.__uniformMatrix[8] = b[c + 8];
                    this.__uniformMatrix[9] = b[c + 9];
                    this.__uniformMatrix[10] = b[c + 10];
                    this.__uniformMatrix[11] = b[c + 11];
                    this.__uniformMatrix[12] = b[c + 12];
                    this.__uniformMatrix[13] = b[c + 13];
                    this.__uniformMatrix[14] = b[c + 14];
                    this.__uniformMatrix[15] = b[c + 15];
                    Xc.uniformMatrix4fv(a, this.index, false, this.__uniformMatrix);
                }
              }
            } else if (this.__internal || d != 0 && d != this.__length) {
              b = a.FLOAT;
              if (this.__isBool) {
                b = a.INT;
              } else if (this.__isInt) {
                b = a.INT;
              }
              f = 0;
              for (k = this.__arrayLength; f < k;) {
                h = f++;
                a.enableVertexAttribArray(this.index + h);
              }
              if (d > 0) {
                f = 0;
                k = this.__arrayLength;
                while (f < k) {
                  h = f++;
                  a.vertexAttribPointer(this.index + h, this.__length, b, false, this.__length * 4, (c + e * this.__length + h * this.__arrayLength) * 4);
                }
              }
            } else {
              for (var f = 0, k = this.__arrayLength; f < k;) {
                var h = f++;
                a.disableVertexAttribArray(this.index + h);
              }
              if (d > 0) {
                switch (this.type) {
                  case 0:
                  case 4:
                  case 8:
                    a.vertexAttrib1f(this.index, b[c]);
                    break;
                  case 1:
                  case 5:
                  case 9:
                    a.vertexAttrib2f(this.index, b[c], b[c + 1]);
                    break;
                  case 2:
                  case 6:
                  case 10:
                    a.vertexAttrib3f(this.index, b[c], b[c + 1], b[c + 2]);
                    break;
                  case 3:
                  case 7:
                  case 11:
                    a.vertexAttrib4f(this.index, b[c], b[c + 1], b[c + 2], b[c + 3]);
                    break;
                  case 12:
                    a.vertexAttrib2f(this.index + 0, b[c], b[c + 1]);
                    a.vertexAttrib2f(this.index + 1, b[c + 2], b[c + 2 + 1]);
                    break;
                  case 16:
                    a.vertexAttrib3f(this.index + 0, b[c], b[c + 1], b[c + 2]);
                    a.vertexAttrib3f(this.index + 1, b[c + 3], b[c + 3 + 1], b[c + 3 + 2]);
                    a.vertexAttrib3f(this.index + 2, b[c + 6], b[c + 6 + 1], b[c + 6 + 2]);
                    break;
                  case 20:
                    a.vertexAttrib4f(this.index + 0, b[c], b[c + 1], b[c + 2], b[c + 3]);
                    a.vertexAttrib4f(this.index + 1, b[c + 4], b[c + 4 + 1], b[c + 4 + 2], b[c + 4 + 3]);
                    a.vertexAttrib4f(this.index + 2, b[c + 8], b[c + 8 + 1], b[c + 8 + 2], b[c + 8 + 3]);
                    a.vertexAttrib4f(this.index + 3, b[c + 12], b[c + 12 + 1], b[c + 12 + 2], b[c + 12 + 3]);
                }
              } else {
                switch (this.type) {
                  case 0:
                  case 4:
                  case 8:
                    a.vertexAttrib1f(this.index, 0);
                    break;
                  case 1:
                  case 5:
                  case 9:
                    a.vertexAttrib2f(this.index, 0, 0);
                    break;
                  case 2:
                  case 6:
                  case 10:
                    a.vertexAttrib3f(this.index, 0, 0, 0);
                    break;
                  case 3:
                  case 7:
                  case 11:
                    a.vertexAttrib4f(this.index, 0, 0, 0, 0);
                    break;
                  case 12:
                    a.vertexAttrib2f(this.index + 0, 0, 0);
                    a.vertexAttrib2f(this.index + 1, 0, 0);
                    break;
                  case 16:
                    a.vertexAttrib3f(this.index + 0, 0, 0, 0);
                    a.vertexAttrib3f(this.index + 1, 0, 0, 0);
                    a.vertexAttrib3f(this.index + 2, 0, 0, 0);
                    break;
                  case 20:
                    a.vertexAttrib4f(this.index + 0, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 1, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 2, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 3, 0, 0, 0, 0);
                }
              }
            }
          }
        },
        set_name: function (a) {
          this.__internal = w.startsWith(a, "openfl_");
          return this.name = a;
        },
        __class__: kg,
        __properties__: {
          set_name: "set_name"
        }
      };
      function og() {
        wa.call(this);
        this.__drawableType = 3;
      }
      g["openfl.display.Shape"] = og;
      og.__name__ = "openfl.display.Shape";
      og.__super__ = wa;
      og.prototype = q(wa.prototype, {
        get_graphics: function () {
          if (this.__graphics == null) {
            this.__graphics = new fe(this);
          }
          return this.__graphics;
        },
        __class__: og,
        __properties__: q(wa.prototype.__properties__, {
          get_graphics: "get_graphics"
        })
      });
      function zi(a, b, c, d) {
        Ca.call(this);
        this.__drawableType = 6;
        this.enabled = true;
        this.trackAsMenu = false;
        this.useHandCursor = true;
        this.__upState = a ?? new wa();
        this.__overState = b;
        this.__downState = c;
        this.set_hitTestState(d ?? new wa());
        this.addEventListener("mouseDown", m(this, this.__this_onMouseDown));
        this.addEventListener("mouseOut", m(this, this.__this_onMouseOut));
        this.addEventListener("mouseOver", m(this, this.__this_onMouseOver));
        this.addEventListener("mouseUp", m(this, this.__this_onMouseUp));
        this.__tabEnabled = true;
        this.set___currentState(this.__upState);
        if (zi.__constructor != null) {
          a = zi.__constructor;
          zi.__constructor = null;
          a(this);
        }
      }
      g["openfl.display.SimpleButton"] = zi;
      zi.__name__ = "openfl.display.SimpleButton";
      zi.__super__ = Ca;
      zi.prototype = q(Ca.prototype, {
        __getBounds: function (a, b) {
          Ca.prototype.__getBounds.call(this, a, b);
          var c = za.__pool.get();
          var d = this.__currentState.__transform;
          c.a = d.a * b.a + d.b * b.c;
          c.b = d.a * b.b + d.b * b.d;
          c.c = d.c * b.a + d.d * b.c;
          c.d = d.c * b.b + d.d * b.d;
          c.tx = d.tx * b.a + d.ty * b.c + b.tx;
          c.ty = d.tx * b.b + d.ty * b.d + b.ty;
          this.__currentState.__getBounds(a, c);
          za.__pool.release(c);
        },
        __getRenderBounds: function (a, b) {
          if (this.__scrollRect != null) {
            Ca.prototype.__getRenderBounds.call(this, a, b);
          } else {
            Ca.prototype.__getBounds.call(this, a, b);
            var c = za.__pool.get();
            var d = this.__currentState.__transform;
            c.a = d.a * b.a + d.b * b.c;
            c.b = d.a * b.b + d.b * b.d;
            c.c = d.c * b.a + d.d * b.c;
            c.d = d.c * b.b + d.d * b.d;
            c.tx = d.tx * b.a + d.ty * b.c + b.tx;
            c.ty = d.tx * b.b + d.ty * b.d + b.ty;
            this.__currentState.__getRenderBounds(a, c);
            za.__pool.release(c);
          }
        },
        __getCursor: function () {
          if (this.useHandCursor && !this.__ignoreEvent && this.enabled) {
            return "button";
          } else {
            return null;
          }
        },
        __hitTest: function (a, b, c, d, e, f) {
          var k = false;
          if (this.get_hitTestState() != null) {
            if (this.get_hitTestState().__hitTest(a, b, c, d, e, f)) {
              if (d != null) {
                if (d.length == 0) {
                  d[0] = f;
                } else {
                  d[d.length - 1] = f;
                }
              }
              k = !e || this.mouseEnabled;
            }
          } else if (this.__currentState != null) {
            if (!f.get_visible() || this.__isMask || e && !this.mouseEnabled || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
              k = false;
            } else if (this.__currentState.__hitTest(a, b, c, d, e, f)) {
              k = e;
            }
          }
          if (d != null) {
            while (d.length > 1 && d[d.length - 1] == d[d.length - 2]) {
              d.pop();
            }
          }
          return k;
        },
        __hitTestMask: function (a, b) {
          var c = false;
          if (this.__currentState.__hitTestMask(a, b)) {
            c = true;
          }
          return c;
        },
        __setStageReference: function (a) {
          Ca.prototype.__setStageReference.call(this, a);
          if (this.__currentState != null) {
            this.__currentState.__setStageReference(a);
          }
          if (this.get_hitTestState() != null && this.get_hitTestState() != this.__currentState) {
            this.get_hitTestState().__setStageReference(a);
          }
        },
        __setTransformDirty: function () {
          Ca.prototype.__setTransformDirty.call(this);
          if (this.__currentState != null) {
            this.__currentState.__setTransformDirty();
          }
          if (this.get_hitTestState() != null && this.get_hitTestState() != this.__currentState) {
            this.get_hitTestState().__setTransformDirty();
          }
        },
        __update: function (a, b) {
          Ca.prototype.__update.call(this, a, b);
          if (b) {
            if (this.__currentState != null) {
              this.__currentState.__update(a, true);
            }
            if (this.get_hitTestState() != null && this.get_hitTestState() != this.__currentState) {
              this.get_hitTestState().__update(a, true);
            }
          }
        },
        __updateTransforms: function (a) {
          Ca.prototype.__updateTransforms.call(this, a);
          if (this.__currentState != null) {
            this.__currentState.__updateTransforms();
          }
          if (this.get_hitTestState() != null && this.get_hitTestState() != this.__currentState) {
            this.get_hitTestState().__updateTransforms();
          }
        },
        get_downState: function () {
          return this.__downState;
        },
        get_hitTestState: function () {
          return this.__hitTestState;
        },
        set_hitTestState: function (a) {
          if (this.__hitTestState != null && this.__hitTestState != a && this.__hitTestState != this.get_downState() && this.__hitTestState != this.get_upState() && this.__hitTestState != this.get_overState()) {
            this.__hitTestState.__renderParent = null;
          }
          if (a != null) {
            a.__renderParent = this;
            if (!a.__renderDirty) {
              a.__renderDirty = true;
              a.__setParentRenderDirty();
            }
          }
          return this.__hitTestState = a;
        },
        get_overState: function () {
          return this.__overState;
        },
        get_upState: function () {
          return this.__upState;
        },
        set___currentState: function (a) {
          if (this.__currentState != null && this.__currentState != this.get_hitTestState()) {
            this.__currentState.__renderParent = null;
          }
          if (a != null && a.parent != null) {
            a.parent.removeChild(a);
          }
          if (wa.__supportDOM && this.__previousStates == null) {
            this.__previousStates = ab.toObjectVector(null);
          }
          if (a != this.__currentState) {
            if (wa.__supportDOM) {
              if (this.__currentState != null) {
                this.__currentState.__setStageReference(null);
                this.__previousStates.push(this.__currentState);
              }
              var b = this.__previousStates.indexOf(a, 0);
              if (b > -1) {
                var c = this.__previousStates;
                c.__tempIndex = b;
                b = 0;
                for (var d = []; b < d.length;) {
                  var e = d[b++];
                  c.insertAt(c.__tempIndex, e);
                  c.__tempIndex++;
                }
                c.splice(c.__tempIndex, 1);
              }
            }
            if (a != null) {
              a.__renderParent = this;
              if (!a.__renderDirty) {
                a.__renderDirty = true;
                a.__setParentRenderDirty();
              }
            }
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__currentState = a;
        },
        __this_onMouseDown: function (a) {
          if (this.enabled) {
            this.set___currentState(this.get_downState());
          }
        },
        __this_onMouseOut: function (a) {
          this.__ignoreEvent = false;
          if (this.get_upState() != this.__currentState) {
            this.set___currentState(this.get_upState());
          }
        },
        __this_onMouseOver: function (a) {
          if (a.buttonDown) {
            this.__ignoreEvent = true;
          }
          if (this.get_overState() != this.__currentState && this.get_overState() != null && !this.__ignoreEvent && this.enabled) {
            this.set___currentState(this.get_overState());
          }
        },
        __this_onMouseUp: function (a) {
          this.__ignoreEvent = false;
          if (this.enabled && this.get_overState() != null) {
            this.set___currentState(this.get_overState());
          } else {
            this.set___currentState(this.get_upState());
          }
        },
        __class__: zi,
        __properties__: q(Ca.prototype.__properties__, {
          set___currentState: "set___currentState",
          get_upState: "get_upState",
          get_overState: "get_overState",
          set_hitTestState: "set_hitTestState",
          get_hitTestState: "get_hitTestState",
          get_downState: "get_downState"
        })
      });
      function Ai(a, b) {
        gb.call(this);
        this.__drawableType = 5;
        this.set_name(null);
        this.__color = -1;
        this.__colorSplit = [255, 255, 255];
        this.__colorString = "#FFFFFF";
        this.__contentsScaleFactor = 1;
        this.__deltaTime = this.__currentTabOrderIndex = 0;
        this.__displayState = 2;
        this.__logicalHeight = this.__logicalWidth = this.__lastClickTime = this.__mouseY = this.__mouseX = 0;
        this.__displayMatrix = new za();
        this.__displayRect = new da();
        this.__renderDirty = true;
        this.stage3Ds = ab.toObjectVector(null);
        this.stage3Ds.push(new Gh(this));
        this.stage3Ds.push(new Gh(this));
        this.stage3Ds.push(new Gh(this));
        this.stage3Ds.push(new Gh(this));
        this.stage = this;
        this.align = 6;
        this.allowsFullScreenInteractive = this.allowsFullScreen = true;
        this.__quality = 1;
        this.__scaleMode = 2;
        this.showDefaultContextMenu = true;
        this.softKeyboardRect = new da();
        this.stageFocusRect = true;
        this.__macKeyboard = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent) || /Mac/.test(navigator.platform);
        this.__clearBeforeRender = true;
        this.__forceRender = false;
        this.__stack = [];
        this.__rollOutStack = [];
        this.__mouseOutStack = [];
        this.__touchData = new wc();
        if (oa.get_current().__loaderInfo == null) {
          oa.get_current().__loaderInfo = Lf.create(null);
          oa.get_current().__loaderInfo.content = oa.get_current();
        }
        this.__uncaughtErrorEvents = oa.get_current().__loaderInfo.uncaughtErrorEvents;
        this.application = a.application;
        this.window = a;
        this.set_color(b);
        this.__contentsScaleFactor = a.__scale;
        this.__wasFullscreen = a.__fullscreen;
        this.__resize();
        if (oa.get_current().stage == null) {
          this.stage.addChild(oa.get_current());
        }
      }
      g["openfl.display.Stage"] = Ai;
      Ai.__name__ = "openfl.display.Stage";
      Ai.__interfaces__ = [H];
      Ai.__super__ = gb;
      Ai.prototype = q(gb.prototype, {
        __broadcastEvent: function (a) {
          if (Object.prototype.hasOwnProperty.call(wa.__broadcastEvents.h, a.type)) {
            for (var b = wa.__broadcastEvents.h[a.type], c = 0; c < b.length;) {
              var d = b[c];
              ++c;
              if (d.stage == this || d.stage == null) {
                if (this.__uncaughtErrorEvents.__enabled) {
                  try {
                    d.__dispatch(a);
                  } catch (e) {
                    Pa.lastError = e;
                    d = G.caught(e).unwrap();
                    this.__handleError(d);
                  }
                } else {
                  d.__dispatch(a);
                }
              }
            }
          }
        },
        __createRenderer: function () {
          var a = this.window.__width * this.window.__scale | 0;
          var b = this.window.__height * this.window.__scale | 0;
          switch (this.window.context.type) {
            case "canvas":
              this.__renderer = new lg(this.window.context.canvas2D);
              break;
            case "dom":
              this.__renderer = new Oj(this.window.context.dom);
              break;
            case "opengl":
            case "opengles":
            case "webgl":
              this.context3D = new Hb(this);
              this.context3D.configureBackBuffer(this.stageWidth, this.stageHeight, 0, true, true, true);
              this.context3D.present();
              this.__renderer = new tb(this.context3D);
          }
          if (this.__renderer != null) {
            var c = this.get_quality();
            this.__renderer.__allowSmoothing = c != 2;
            this.__renderer.__pixelRatio = this.window.__scale;
            this.__renderer.__worldTransform = this.__displayMatrix;
            this.__renderer.__stage = this;
            this.__renderer.__resize(a, b);
          }
        },
        __dispatchEvent: function (a) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              var b = gb.prototype.__dispatchEvent.call(this, a);
            } catch (c) {
              Pa.lastError = c;
              a = G.caught(c).unwrap();
              this.__handleError(a);
              b = false;
            }
          } else {
            b = gb.prototype.__dispatchEvent.call(this, a);
          }
          return b;
        },
        __dispatchPendingMouseEvent: function () {
          if (this.__pendingMouseEvent) {
            this.__onMouse("mouseMove", this.__pendingMouseX, this.__pendingMouseY, 0);
            this.__pendingMouseEvent = false;
          }
        },
        __dispatchStack: function (a, b) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              var c = b.length;
              if (c == 0) {
                a.eventPhase = 2;
                var d = a.target;
                d.__dispatch(a);
              } else {
                a.eventPhase = 1;
                a.target = b[b.length - 1];
                for (var e = 0, f = c - 1; e < f;) {
                  var k = e++;
                  b[k].__dispatch(a);
                  if (a.__isCanceled) {
                    return;
                  }
                }
                a.eventPhase = 2;
                d = a.target;
                d.__dispatch(a);
                if (!a.__isCanceled && a.bubbles) {
                  a.eventPhase = 3;
                  k = c - 2;
                  while (k >= 0) {
                    b[k].__dispatch(a);
                    if (a.__isCanceled) {
                      break;
                    }
                    --k;
                  }
                }
              }
            } catch (t) {
              Pa.lastError = t;
              a = G.caught(t).unwrap();
              this.__handleError(a);
            }
          } else {
            c = b.length;
            if (c == 0) {
              a.eventPhase = 2;
              d = a.target;
              d.__dispatch(a);
            } else {
              a.eventPhase = 1;
              a.target = b[b.length - 1];
              e = 0;
              for (f = c - 1; e < f;) {
                k = e++;
                b[k].__dispatch(a);
                if (a.__isCanceled) {
                  return;
                }
              }
              a.eventPhase = 2;
              d = a.target;
              d.__dispatch(a);
              if (!a.__isCanceled && a.bubbles) {
                a.eventPhase = 3;
                k = c - 2;
                while (k >= 0) {
                  b[k].__dispatch(a);
                  if (a.__isCanceled) {
                    break;
                  }
                  --k;
                }
              }
            }
          }
        },
        __dispatchTarget: function (a, b) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              return a.__dispatchEvent(b);
            } catch (c) {
              Pa.lastError = c;
              a = G.caught(c).unwrap();
              this.__handleError(a);
              return false;
            }
          } else {
            return a.__dispatchEvent(b);
          }
        },
        __drag: function (a) {
          var b = this.__dragObject.parent;
          if (b != null) {
            b = b.__getWorldTransform();
            var c = b.a * b.d - b.b * b.c;
            if (c == 0) {
              a.x = -b.tx;
              a.y = -b.ty;
            } else {
              var d = 1 / c * (b.c * (b.ty - a.y) + b.d * (a.x - b.tx));
              a.y = 1 / c * (b.a * (a.y - b.ty) + b.b * (b.tx - a.x));
              a.x = d;
            }
          }
          b = a.x + this.__dragOffsetX;
          a = a.y + this.__dragOffsetY;
          if (this.__dragBounds != null) {
            if (b < this.__dragBounds.x) {
              b = this.__dragBounds.x;
            } else if (b > this.__dragBounds.get_right()) {
              b = this.__dragBounds.get_right();
            }
            if (a < this.__dragBounds.y) {
              a = this.__dragBounds.y;
            } else if (a > this.__dragBounds.get_bottom()) {
              a = this.__dragBounds.get_bottom();
            }
          }
          this.__dragObject.set_x(b);
          this.__dragObject.set_y(a);
        },
        __getInteractive: function (a) {
          if (a != null) {
            a.push(this);
          }
          return true;
        },
        __globalToLocal: function (a, b) {
          if (a != b) {
            b.copyFrom(a);
          }
          return b;
        },
        __handleError: function (a) {
          var b = new xm("uncaughtError", true, true, a);
          try {
            oa.get_current().__loaderInfo.uncaughtErrorEvents.dispatchEvent(b);
          } catch (d) {
            Pa.lastError = d;
          }
          if (!b.__preventDefault) {
            b = Ug.toString(Ug.exceptionStack());
            console.log(b);
            b = v.string(a);
            console.log(b);
            try {
              if (a != null && Object.prototype.hasOwnProperty.call(a, "stack") && a.stack != null && a.stack != "") {
                console.log(a.stack);
                a.stack = a.stack;
              } else {
                var c = Ug.toString(Ug.callStack());
                console.log(c);
              }
            } catch (d) {
              Pa.lastError = d;
            }
            throw a;
          }
        },
        __onKey: function (a, b, c) {
          this.__dispatchPendingMouseEvent();
          Sb.__altKey = Ob.get_altKey(c);
          Sb.__commandKey = Ob.get_metaKey(c);
          Sb.__controlKey = Ob.get_ctrlKey(c) && !Ob.get_metaKey(c);
          Sb.__ctrlKey = Ob.get_ctrlKey(c);
          Sb.__shiftKey = Ob.get_shiftKey(c);
          var d = [];
          if (this.__focus == null) {
            this.__getInteractive(d);
          } else {
            this.__focus.__getInteractive(d);
          }
          if (d.length > 0) {
            switch (b) {
              case 1073741908:
              case 1073741909:
              case 1073741910:
              case 1073741911:
              case 1073741912:
              case 1073741913:
              case 1073741914:
              case 1073741915:
              case 1073741916:
              case 1073741917:
              case 1073741918:
              case 1073741919:
              case 1073741920:
              case 1073741921:
              case 1073741922:
              case 1073741923:
              case 1073742044:
                var e = 3;
                break;
              case 1073742048:
              case 1073742049:
              case 1073742050:
              case 1073742051:
                e = 1;
                break;
              case 1073742052:
              case 1073742053:
              case 1073742054:
              case 1073742055:
                e = 2;
                break;
              default:
                e = 0;
            }
            switch (b) {
              case 8:
                b = 8;
                break;
              case 9:
                b = 9;
                break;
              case 13:
                b = 13;
                break;
              case 27:
                b = 27;
                break;
              case 32:
                b = 32;
                break;
              case 33:
                b = 49;
                break;
              case 34:
                b = 222;
                break;
              case 35:
                b = 51;
                break;
              case 36:
                b = 52;
                break;
              case 37:
                b = 53;
                break;
              case 38:
                b = 55;
                break;
              case 39:
                b = 222;
                break;
              case 40:
                b = 57;
                break;
              case 41:
                b = 48;
                break;
              case 42:
                b = 56;
                break;
              case 44:
                b = 188;
                break;
              case 45:
                b = 189;
                break;
              case 46:
                b = 190;
                break;
              case 47:
                b = 191;
                break;
              case 48:
                b = 48;
                break;
              case 49:
                b = 49;
                break;
              case 50:
                b = 50;
                break;
              case 51:
                b = 51;
                break;
              case 52:
                b = 52;
                break;
              case 53:
                b = 53;
                break;
              case 54:
                b = 54;
                break;
              case 55:
                b = 55;
                break;
              case 56:
                b = 56;
                break;
              case 57:
                b = 57;
                break;
              case 58:
                b = 186;
                break;
              case 59:
                b = 186;
                break;
              case 60:
                b = 60;
                break;
              case 61:
                b = 187;
                break;
              case 62:
                b = 190;
                break;
              case 63:
                b = 191;
                break;
              case 64:
                b = 50;
                break;
              case 91:
                b = 219;
                break;
              case 92:
                b = 220;
                break;
              case 93:
                b = 221;
                break;
              case 94:
                b = 54;
                break;
              case 95:
                b = 189;
                break;
              case 96:
                b = 192;
                break;
              case 97:
                b = 65;
                break;
              case 98:
                b = 66;
                break;
              case 99:
                b = 67;
                break;
              case 100:
                b = 68;
                break;
              case 101:
                b = 69;
                break;
              case 102:
                b = 70;
                break;
              case 103:
                b = 71;
                break;
              case 104:
                b = 72;
                break;
              case 105:
                b = 73;
                break;
              case 106:
                b = 74;
                break;
              case 107:
                b = 75;
                break;
              case 108:
                b = 76;
                break;
              case 109:
                b = 77;
                break;
              case 110:
                b = 78;
                break;
              case 111:
                b = 79;
                break;
              case 112:
                b = 80;
                break;
              case 113:
                b = 81;
                break;
              case 114:
                b = 82;
                break;
              case 115:
                b = 83;
                break;
              case 116:
                b = 84;
                break;
              case 117:
                b = 85;
                break;
              case 118:
                b = 86;
                break;
              case 119:
                b = 87;
                break;
              case 120:
                b = 88;
                break;
              case 121:
                b = 89;
                break;
              case 122:
                b = 90;
                break;
              case 127:
                b = 46;
                break;
              case 1073741881:
                b = 20;
                break;
              case 1073741882:
                b = 112;
                break;
              case 1073741883:
                b = 113;
                break;
              case 1073741884:
                b = 114;
                break;
              case 1073741885:
                b = 115;
                break;
              case 1073741886:
                b = 116;
                break;
              case 1073741887:
                b = 117;
                break;
              case 1073741888:
                b = 118;
                break;
              case 1073741889:
                b = 119;
                break;
              case 1073741890:
                b = 120;
                break;
              case 1073741891:
                b = 121;
                break;
              case 1073741892:
                b = 122;
                break;
              case 1073741893:
                b = 123;
                break;
              case 1073741894:
                b = 301;
                break;
              case 1073741895:
                b = 145;
                break;
              case 1073741896:
                b = 19;
                break;
              case 1073741897:
                b = 45;
                break;
              case 1073741898:
                b = 36;
                break;
              case 1073741899:
                b = 33;
                break;
              case 1073741901:
                b = 35;
                break;
              case 1073741902:
                b = 34;
                break;
              case 1073741903:
                b = 39;
                break;
              case 1073741904:
                b = 37;
                break;
              case 1073741905:
                b = 40;
                break;
              case 1073741906:
                b = 38;
                break;
              case 1073741907:
                b = 144;
                break;
              case 1073741908:
                b = 111;
                break;
              case 1073741909:
                b = 106;
                break;
              case 1073741910:
                b = 109;
                break;
              case 1073741911:
                b = 107;
                break;
              case 1073741912:
                b = 13;
                break;
              case 1073741913:
                b = 97;
                break;
              case 1073741914:
                b = 98;
                break;
              case 1073741915:
                b = 99;
                break;
              case 1073741916:
                b = 100;
                break;
              case 1073741917:
                b = 101;
                break;
              case 1073741918:
                b = 102;
                break;
              case 1073741919:
                b = 103;
                break;
              case 1073741920:
                b = 104;
                break;
              case 1073741921:
                b = 105;
                break;
              case 1073741922:
                b = 96;
                break;
              case 1073741923:
                b = 110;
                break;
              case 1073741925:
                b = 302;
                break;
              case 1073741928:
                b = 124;
                break;
              case 1073741929:
                b = 125;
                break;
              case 1073741930:
                b = 126;
                break;
              case 1073741982:
                b = 13;
                break;
              case 1073742044:
                b = 110;
                break;
              case 1073742048:
                b = 17;
                break;
              case 1073742049:
                b = 16;
                break;
              case 1073742050:
                b = 18;
                break;
              case 1073742051:
                b = 15;
                break;
              case 1073742052:
                b = 17;
                break;
              case 1073742053:
                b = 16;
                break;
              case 1073742054:
                b = 18;
                break;
              case 1073742055:
                b = 15;
            }
            var f = mp.__getCharCode(b, Ob.get_shiftKey(c));
            if (a == "keyUp" && (b == 32 || b == 13) && this.__focus instanceof Ua) {
              var k = va.__cast(this.__focus, Ua);
              if (k.get_buttonMode() && k.focusRect == 1) {
                var h = lb.__pool.get();
                var n = lb.__pool.get();
                n.x = this.__mouseX;
                n.y = this.__mouseY;
                k = Sb.__create("click", 0, this.__mouseX, this.__mouseY, k.__globalToLocal(n, h), k);
                this.__dispatchStack(k, d);
                if (k.__updateAfterEventFlag) {
                  this.__renderAfterEvent();
                }
                lb.__pool.release(n);
                lb.__pool.release(h);
              }
            }
            e = new ym(a, true, true, f, b, e, this.__macKeyboard ? Ob.get_ctrlKey(c) || Ob.get_metaKey(c) : Ob.get_ctrlKey(c), Ob.get_altKey(c), Ob.get_shiftKey(c), Ob.get_ctrlKey(c), Ob.get_metaKey(c));
            d.reverse();
            this.__dispatchStack(e, d);
            if (e.__preventDefault) {
              if (a == "keyDown") {
                this.window.onKeyDown.cancel();
              } else {
                this.window.onKeyUp.cancel();
              }
            } else if (a == "keyDown" && b == 9) {
              d = [];
              this.__tabTest(d);
              f = -1;
              a = null;
              b = Ob.get_shiftKey(c) ? -1 : 1;
              if (d.length > 1) {
                Yc.sort(d, function (a, b) {
                  return a.get_tabIndex() - b.get_tabIndex();
                });
                if (d[d.length - 1].get_tabIndex() != -1) {
                  for (n = 0; n < d.length;) {
                    if (d[n].get_tabIndex() > -1) {
                      if (n > 0) {
                        d.splice(0, n);
                      }
                      break;
                    }
                    ++n;
                  }
                }
                if (this.get_focus() != null) {
                  n = this.get_focus();
                  for (h = d.indexOf(n); h == -1 && n != null;) {
                    f = n.parent;
                    if (f != null && f.get_tabChildren()) {
                      n = f.getChildIndex(n);
                      if (n == -1) {
                        n = f;
                        continue;
                      }
                      for (n += b; Ob.get_shiftKey(c) ? n >= 0 : n < f.get_numChildren();) {
                        k = f.getChildAt(n);
                        if (k instanceof Ca && (h = va.__cast(k, Ca), h = d.indexOf(h), h != -1)) {
                          b = 0;
                          break;
                        }
                        n += b;
                      }
                    } else if (Ob.get_shiftKey(c)) {
                      h = d.indexOf(f);
                      if (h != -1) {
                        b = 0;
                      }
                    }
                    n = f;
                  }
                  f = h < 0 ? 0 : h + b;
                } else {
                  f = this.__currentTabOrderIndex;
                }
              } else if (d.length == 1) {
                a = d[0];
                if (this.get_focus() == a) {
                  a = null;
                }
              }
              h = f >= 0 && f < d.length;
              if (d.length == 1 || d.length == 0 && this.get_focus() != null) {
                f = 0;
              } else if (d.length > 1) {
                if (f < 0) {
                  f += d.length;
                }
                f %= d.length;
                a = d[f];
                if (a == this.get_focus()) {
                  f += b;
                  if (f < 0) {
                    f += d.length;
                  }
                  f %= d.length;
                  a = d[f];
                }
              }
              b = null;
              if (this.get_focus() != null) {
                b = new Hh("keyFocusChange", true, true, a, Ob.get_shiftKey(c), 0);
                d = [];
                this.get_focus().__getInteractive(d);
                d.reverse();
                this.__dispatchStack(b, d);
                if (b.isDefaultPrevented()) {
                  this.window.onKeyDown.cancel();
                }
              }
              if (b == null || !b.isDefaultPrevented()) {
                this.__currentTabOrderIndex = f;
                if (a != null) {
                  this.set_focus(a);
                }
                if (h) {
                  this.window.onKeyDown.cancel();
                }
              }
            }
            if (e.__updateAfterEventFlag) {
              this.__renderAfterEvent();
            }
          }
        },
        __onLimeCreateWindow: function (a) {
          if (this.window == a) {
            var b = this;
            a.onActivate.add(function () {
              b.__onLimeWindowActivate(a);
            });
            var c = this;
            a.onClose.add(function () {
              c.__onLimeWindowClose(a);
            }, false, -9000);
            var d = this;
            a.onDeactivate.add(function () {
              d.__onLimeWindowDeactivate(a);
            });
            var e = this;
            function f(b) {
              e.__onLimeWindowDropFile(a, b);
            }
            a.onDropFile.add(f);
            var k = this;
            a.onEnter.add(function () {
              k.__onLimeWindowEnter(a);
            });
            var h = this;
            a.onExpose.add(function () {
              h.__onLimeWindowExpose(a);
            });
            var n = this;
            a.onFocusIn.add(function () {
              n.__onLimeWindowFocusIn(a);
            });
            var g = this;
            a.onFocusOut.add(function () {
              g.__onLimeWindowFocusOut(a);
            });
            var p = this;
            a.onFullscreen.add(function () {
              p.__onLimeWindowFullscreen(a);
            });
            var l = this;
            f = function (b, c) {
              l.__onLimeKeyDown(a, b, c);
            };
            a.onKeyDown.add(f);
            var v = this;
            f = function (b, c) {
              v.__onLimeKeyUp(a, b, c);
            };
            a.onKeyUp.add(f);
            var w = this;
            a.onLeave.add(function () {
              w.__onLimeWindowLeave(a);
            });
            var q = this;
            a.onMinimize.add(function () {
              q.__onLimeWindowMinimize(a);
            });
            var u = this;
            f = function (b, c, d) {
              u.__onLimeMouseDown(a, b, c, d);
            };
            a.onMouseDown.add(f);
            var r = this;
            f = function (b, c) {
              r.__onLimeMouseMove(a, b, c);
            };
            a.onMouseMove.add(f);
            var z = this;
            f = function (b, c) {
              z.__onLimeMouseMoveRelative(a, b, c);
            };
            a.onMouseMoveRelative.add(f);
            var J = this;
            f = function (b, c, d) {
              J.__onLimeMouseUp(a, b, c, d);
            };
            a.onMouseUp.add(f);
            var ba = this;
            f = function (b, c, d) {
              ba.__onLimeMouseWheel(a, b, c, d);
            };
            a.onMouseWheel.add(f);
            var y = this;
            f = function (b, c) {
              y.__onLimeWindowMove(a, b, c);
            };
            a.onMove.add(f);
            a.onRender.add(m(this, this.__onLimeRender));
            a.onRenderContextLost.add(m(this, this.__onLimeRenderContextLost));
            a.onRenderContextRestored.add(m(this, this.__onLimeRenderContextRestored));
            var A = this;
            f = function (b, c) {
              A.__onLimeWindowResize(a, b, c);
            };
            a.onResize.add(f);
            var B = this;
            a.onRestore.add(function () {
              B.__onLimeWindowRestore(a);
            });
            var D = this;
            f = function (b, c, d) {
              D.__onLimeTextEdit(a, b, c, d);
            };
            a.onTextEdit.add(f);
            var C = this;
            f = function (b) {
              C.__onLimeTextInput(a, b);
            };
            a.onTextInput.add(f);
            this.__onLimeWindowCreate(a);
          }
        },
        __onLimeGamepadAxisMove: function (a, b, c) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              sb.__onGamepadAxisMove(a, b, c);
            } catch (d) {
              Pa.lastError = d;
              a = G.caught(d).unwrap();
              this.__handleError(a);
            }
          } else {
            sb.__onGamepadAxisMove(a, b, c);
          }
        },
        __onLimeGamepadButtonDown: function (a, b) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              sb.__onGamepadButtonDown(a, b);
            } catch (c) {
              Pa.lastError = c;
              a = G.caught(c).unwrap();
              this.__handleError(a);
            }
          } else {
            sb.__onGamepadButtonDown(a, b);
          }
        },
        __onLimeGamepadButtonUp: function (a, b) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              sb.__onGamepadButtonUp(a, b);
            } catch (c) {
              Pa.lastError = c;
              a = G.caught(c).unwrap();
              this.__handleError(a);
            }
          } else {
            sb.__onGamepadButtonUp(a, b);
          }
        },
        __onLimeGamepadConnect: function (a) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              sb.__onGamepadConnect(a);
            } catch (k) {
              Pa.lastError = k;
              var b = G.caught(k).unwrap();
              this.__handleError(b);
            }
          } else {
            sb.__onGamepadConnect(a);
          }
          var c = this;
          b = function (b, d) {
            c.__onLimeGamepadAxisMove(a, b, d);
          };
          a.onAxisMove.add(b);
          var d = this;
          b = function (b) {
            d.__onLimeGamepadButtonDown(a, b);
          };
          a.onButtonDown.add(b);
          var e = this;
          b = function (b) {
            e.__onLimeGamepadButtonUp(a, b);
          };
          a.onButtonUp.add(b);
          var f = this;
          a.onDisconnect.add(function () {
            f.__onLimeGamepadDisconnect(a);
          });
        },
        __onLimeGamepadDisconnect: function (a) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              sb.__onGamepadDisconnect(a);
            } catch (b) {
              Pa.lastError = b;
              a = G.caught(b).unwrap();
              this.__handleError(a);
            }
          } else {
            sb.__onGamepadDisconnect(a);
          }
        },
        __onLimeKeyDown: function (a, b, c) {
          if (this.window != null && this.window == a) {
            this.__onKey("keyDown", b, c);
          }
        },
        __onLimeKeyUp: function (a, b, c) {
          if (this.window != null && this.window == a) {
            this.__onKey("keyUp", b, c);
          }
        },
        __onLimeModuleExit: function (a) {
          if (this.window != null) {
            a = new Ga("deactivate");
            this.__broadcastEvent(a);
          }
        },
        __onLimeMouseDown: function (a, b, c, d) {
          if (this.window != null && this.window == a) {
            this.__dispatchPendingMouseEvent();
            switch (d) {
              case 1:
                var e = "middleMouseDown";
                break;
              case 2:
                e = "rightMouseDown";
                break;
              default:
                e = "mouseDown";
            }
            this.__onMouse(e, b * a.__scale | 0, c * a.__scale | 0, d);
            if (!this.showDefaultContextMenu && d == 2) {
              a.onMouseDown.cancel();
            }
          }
        },
        __onLimeMouseMove: function (a, b, c) {
          if (this.window != null && this.window == a) {
            this.__pendingMouseEvent = true;
            this.__pendingMouseX = b * a.__scale | 0;
            this.__pendingMouseY = c * a.__scale | 0;
          }
        },
        __onLimeMouseMoveRelative: function (a, b, c) {},
        __onLimeMouseUp: function (a, b, c, d) {
          if (this.window != null && this.window == a) {
            this.__dispatchPendingMouseEvent();
            switch (d) {
              case 1:
                var e = "middleMouseUp";
                break;
              case 2:
                e = "rightMouseUp";
                break;
              default:
                e = "mouseUp";
            }
            this.__onMouse(e, b * a.__scale | 0, c * a.__scale | 0, d);
            if (!this.showDefaultContextMenu && d == 2) {
              a.onMouseUp.cancel();
            }
          }
        },
        __onLimeMouseWheel: function (a, b, c, d) {
          if (this.window != null && this.window == a) {
            this.__dispatchPendingMouseEvent();
            if (d == Vg.PIXELS) {
              this.__onMouseWheel(b * a.__scale | 0, c * a.__scale | 0, d);
            } else {
              this.__onMouseWheel(b | 0, c | 0, d);
            }
          }
        },
        __renderAfterEvent: function () {
          this.__render(this.window.context);
        },
        __render: function (a) {
          a = false;
          var b = this.__renderer != null && (this.__renderDirty || this.__forceRender);
          if (this.__invalidated && b) {
            this.__invalidated = false;
            var c = new Ga("render");
            this.__broadcastEvent(c);
          }
          this.__update(false, true);
          if (this.__renderer != null) {
            if (this.context3D != null) {
              for (c = this.stage3Ds.iterator(); c.hasNext();) {
                var d = c.next();
                this.context3D.__renderStage3D(d);
              }
              if (this.context3D.__present) {
                b = true;
              }
            }
            if (b) {
              if (this.context3D == null) {
                this.__renderer.__clear();
              }
              this.__renderer.__render(this);
            } else if (this.context3D == null) {
              a = true;
            }
            if (this.context3D != null) {
              if (this.context3D.__present) {
                if (!this.__renderer.__cleared) {
                  this.__renderer.__clear();
                }
                this.context3D.__present = false;
                this.context3D.__cleared = false;
              } else {
                a = true;
              }
            }
            this.__renderer.__cleared = false;
          }
          return a;
        },
        __onLimeRender: function (a) {
          if (!this.__rendering) {
            this.__rendering = true;
            this.__broadcastEvent(new Ga("enterFrame"));
            this.__broadcastEvent(new Ga("frameConstructed"));
            this.__broadcastEvent(new Ga("exitFrame"));
            this.__renderable = true;
            this.__enterFrame(this.__deltaTime);
            this.__deltaTime = 0;
            if (this.__render(a)) {
              this.window.onRender.cancel();
            }
            this.__rendering = false;
          }
        },
        __onLimeRenderContextLost: function () {
          this.context3D = this.__renderer = null;
          for (var a = this.stage3Ds.iterator(); a.hasNext();) {
            a.next().__lostContext();
          }
        },
        __onLimeRenderContextRestored: function (a) {
          this.__createRenderer();
          for (a = this.stage3Ds.iterator(); a.hasNext();) {
            a.next().__restoreContext();
          }
        },
        __onLimeTextEdit: function (a, b, c, d) {},
        __onLimeTextInput: function (a, b) {
          if (this.window != null && this.window == a) {
            var c = [];
            if (this.__focus == null) {
              this.__getInteractive(c);
            } else {
              this.__focus.__getInteractive(c);
            }
            b = new Tf("textInput", true, true, b);
            if (c.length > 0) {
              c.reverse();
              this.__dispatchStack(b, c);
            } else {
              this.__dispatchEvent(b);
            }
            if (b.isDefaultPrevented()) {
              a.onTextInput.cancel();
            }
          }
        },
        __onLimeTouchCancel: function (a) {
          var b = this.__primaryTouch == a;
          if (b) {
            this.__primaryTouch = null;
          }
          this.__onTouch("touchEnd", a, b);
        },
        __onLimeTouchMove: function (a) {
          this.__onTouch("touchMove", a, this.__primaryTouch == a);
        },
        __onLimeTouchEnd: function (a) {
          var b = this.__primaryTouch == a;
          if (b) {
            this.__primaryTouch = null;
          }
          this.__onTouch("touchEnd", a, b);
        },
        __onLimeTouchStart: function (a) {
          if (this.__primaryTouch == null) {
            this.__primaryTouch = a;
          }
          this.__onTouch("touchBegin", a, this.__primaryTouch == a);
        },
        __onLimeUpdate: function (a) {
          this.__deltaTime = a;
          this.__dispatchPendingMouseEvent();
        },
        __onLimeWindowActivate: function (a) {},
        __onLimeWindowClose: function (a) {
          if (this.window == a) {
            this.window = null;
          }
          this.__primaryTouch = null;
          a = new Ga("deactivate");
          this.__broadcastEvent(a);
        },
        __onLimeWindowCreate: function (a) {
          if (this.window != null && this.window == a && a.context != null) {
            this.__createRenderer();
          }
        },
        __onLimeWindowDeactivate: function (a) {},
        __onLimeWindowDropFile: function (a, b) {},
        __onLimeWindowEnter: function (a) {},
        __onLimeWindowExpose: function (a) {
          if (this.window != null && this.window == a) {
            this.__renderDirty = true;
          }
        },
        __onLimeWindowFocusIn: function (a) {
          if (this.window != null && this.window == a) {
            this.__renderDirty = true;
            a = new Ga("activate");
            this.__broadcastEvent(a);
            this.set_focus(this.__cacheFocus);
          }
        },
        __onLimeWindowFocusOut: function (a) {
          if (this.window != null && this.window == a) {
            this.__primaryTouch = null;
            a = new Ga("deactivate");
            this.__broadcastEvent(a);
            a = this.get_focus();
            this.set_focus(null);
            this.__cacheFocus = a;
            Sb.__altKey = false;
            Sb.__commandKey = false;
            Sb.__ctrlKey = false;
            Sb.__shiftKey = false;
          }
        },
        __onLimeWindowFullscreen: function (a) {
          if (this.window != null && this.window == a) {
            this.__resize();
            if (!this.__wasFullscreen) {
              this.__wasFullscreen = true;
              if (this.__displayState == 2) {
                this.__displayState = 1;
              }
              this.__dispatchEvent(new zg("fullScreen", false, false, true, true));
            }
          }
        },
        __onLimeWindowLeave: function (a) {
          if (this.window != null && this.window == a && !Sb.__buttonDown) {
            this.__dispatchPendingMouseEvent();
            a = new Ga("mouseLeave");
            this.__dispatchEvent(a);
          }
        },
        __onLimeWindowMinimize: function (a) {},
        __onLimeWindowMove: function (a, b, c) {},
        __onLimeWindowResize: function (a, b, c) {
          if (this.window != null && this.window == a) {
            this.__resize();
            if (this.__wasFullscreen && !a.__fullscreen) {
              this.__wasFullscreen = false;
              this.__displayState = 2;
              this.__dispatchEvent(new zg("fullScreen", false, false, false, true));
            }
          }
        },
        __onLimeWindowRestore: function (a) {
          if (this.window != null && this.window == a && this.__wasFullscreen && !a.__fullscreen) {
            this.__wasFullscreen = false;
            this.__displayState = 2;
            this.__dispatchEvent(new zg("fullScreen", false, false, false, true));
          }
        },
        __onMouse: function (a, b, c, d) {
          if (!(d > 2)) {
            var e = lb.__pool.get();
            e.setTo(b, c);
            b = this.__displayMatrix;
            c = b.a * b.d - b.b * b.c;
            if (c == 0) {
              e.x = -b.tx;
              e.y = -b.ty;
            } else {
              var f = 1 / c * (b.c * (b.ty - e.y) + b.d * (e.x - b.tx));
              e.y = 1 / c * (b.a * (e.y - b.ty) + b.b * (b.tx - e.x));
              e.x = f;
            }
            this.__mouseX = e.x;
            this.__mouseY = e.y;
            b = [];
            if (this.__hitTest(this.__mouseX, this.__mouseY, true, b, true, this)) {
              f = b[b.length - 1];
            } else {
              f = this;
              b = [this];
            }
            if (f == null) {
              f = this;
            }
            var k = null;
            switch (a) {
              case "middleMouseDown":
                this.__mouseDownMiddle = f;
                break;
              case "middleMouseUp":
                if (this.__mouseDownMiddle == f) {
                  k = "middleClick";
                }
                this.__mouseDownMiddle = null;
                break;
              case "mouseDown":
                if (this.get_focus() != null) {
                  if (this.get_focus() != f) {
                    c = new Hh("mouseFocusChange", true, true, f, false, 0);
                    this.get_focus().dispatchEvent(c);
                    if (!c.isDefaultPrevented()) {
                      if (f.__allowMouseFocus()) {
                        this.set_focus(f);
                      } else {
                        this.set_focus(null);
                      }
                    }
                  }
                } else if (f.__allowMouseFocus()) {
                  this.set_focus(f);
                } else {
                  this.set_focus(null);
                }
                this.__mouseDownLeft = f;
                Sb.__buttonDown = true;
                break;
              case "mouseUp":
                if (this.__mouseDownLeft != null) {
                  Sb.__buttonDown = false;
                  if (this.__mouseDownLeft == f) {
                    k = "click";
                  } else {
                    var h = Sb.__create("releaseOutside", 1, this.__mouseX, this.__mouseY, new lb(this.__mouseX, this.__mouseY), this);
                    this.__mouseDownLeft.dispatchEvent(h);
                  }
                  this.__mouseDownLeft = null;
                }
                break;
              case "rightMouseDown":
                this.__mouseDownRight = f;
                break;
              case "rightMouseUp":
                if (this.__mouseDownRight == f) {
                  k = "rightClick";
                }
                this.__mouseDownRight = null;
            }
            c = lb.__pool.get();
            h = Sb.__create(a, d, this.__mouseX, this.__mouseY, f.__globalToLocal(e, c), f);
            this.__dispatchStack(h, b);
            if (h.__updateAfterEventFlag) {
              this.__renderAfterEvent();
            }
            if (k != null) {
              h = Sb.__create(k, d, this.__mouseX, this.__mouseY, f.__globalToLocal(e, c), f);
              this.__dispatchStack(h, b);
              if (h.__updateAfterEventFlag) {
                this.__renderAfterEvent();
              }
              if (a == "mouseUp" && f.doubleClickEnabled) {
                a = oa.getTimer();
                if (a - this.__lastClickTime < 500 && f == this.__lastClickTarget) {
                  h = Sb.__create("doubleClick", d, this.__mouseX, this.__mouseY, f.__globalToLocal(e, c), f);
                  this.__dispatchStack(h, b);
                  if (h.__updateAfterEventFlag) {
                    this.__renderAfterEvent();
                  }
                  this.__lastClickTime = 0;
                  this.__lastClickTarget = null;
                } else {
                  this.__lastClickTarget = f;
                  this.__lastClickTime = a;
                }
              }
            }
            if (fd.__cursor == "auto" && !fd.__hidden) {
              h = null;
              if (this.__mouseDownLeft != null) {
                h = this.__mouseDownLeft.__getCursor();
              } else {
                for (a = 0; a < b.length;) {
                  h = b[a];
                  ++a;
                  h = h.__getCursor();
                  if (h != null && this.window != null) {
                    this.window.set_cursor(Sp.toLimeCursor(h));
                    break;
                  }
                }
              }
              if (h == null && this.window != null) {
                this.window.set_cursor(Qb.ARROW);
              }
            }
            if (f != this.__mouseOverTarget && this.__mouseOverTarget != null) {
              h = Sb.__create("mouseOut", d, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(e, c), this.__mouseOverTarget);
              this.__dispatchStack(h, this.__mouseOutStack);
              if (h.__updateAfterEventFlag) {
                this.__renderAfterEvent();
              }
            }
            for (a = 0; a < this.__rollOutStack.length;) {
              k = this.__rollOutStack[a];
              if (b.indexOf(k) == -1) {
                r.remove(this.__rollOutStack, k);
                h = Sb.__create("rollOut", d, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(e, c), k);
                h.bubbles = false;
                this.__dispatchTarget(k, h);
                if (h.__updateAfterEventFlag) {
                  this.__renderAfterEvent();
                }
              } else {
                ++a;
              }
            }
            for (a = 0; a < b.length;) {
              k = b[a];
              ++a;
              if (this.__rollOutStack.indexOf(k) == -1 && this.__mouseOverTarget != null) {
                if (k.hasEventListener("rollOver")) {
                  h = Sb.__create("rollOver", d, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(e, c), k);
                  h.bubbles = false;
                  this.__dispatchTarget(k, h);
                  if (h.__updateAfterEventFlag) {
                    this.__renderAfterEvent();
                  }
                }
                if (k.hasEventListener("rollOut") || k.hasEventListener("rollOver")) {
                  this.__rollOutStack.push(k);
                }
              }
            }
            if (f != this.__mouseOverTarget) {
              if (f != null) {
                h = Sb.__create("mouseOver", d, this.__mouseX, this.__mouseY, f.__globalToLocal(e, c), f);
                this.__dispatchStack(h, b);
                if (h.__updateAfterEventFlag) {
                  this.__renderAfterEvent();
                }
              }
              this.__mouseOverTarget = f;
              this.__mouseOutStack = b;
            }
            if (this.__dragObject != null) {
              this.__drag(e);
              d = null;
              if (this.__mouseOverTarget == this.__dragObject) {
                f = this.__dragObject.mouseEnabled;
                a = this.__dragObject.mouseChildren;
                this.__dragObject.mouseEnabled = false;
                this.__dragObject.mouseChildren = false;
                b = [];
                if (this.__hitTest(this.__mouseX, this.__mouseY, true, b, true, this)) {
                  d = b[b.length - 1];
                }
                this.__dragObject.mouseEnabled = f;
                this.__dragObject.mouseChildren = a;
              } else if (this.__mouseOverTarget != this) {
                d = this.__mouseOverTarget;
              }
              this.__dragObject.dropTarget = d;
            }
            lb.__pool.release(e);
            lb.__pool.release(c);
          }
        },
        __onMouseWheel: function (a, b, c) {
          var d = this.__mouseX;
          var e = this.__mouseY;
          a = [];
          if (this.__hitTest(this.__mouseX, this.__mouseY, true, a, true, this)) {
            var f = a[a.length - 1];
          } else {
            f = this;
            a = [this];
          }
          if (f == null) {
            f = this;
          }
          c = lb.__pool.get();
          c.setTo(d, e);
          d = this.__displayMatrix;
          e = d.a * d.d - d.b * d.c;
          if (e == 0) {
            c.x = -d.tx;
            c.y = -d.ty;
          } else {
            var k = 1 / e * (d.c * (d.ty - c.y) + d.d * (c.x - d.tx));
            c.y = 1 / e * (d.a * (c.y - d.ty) + d.b * (d.tx - c.x));
            c.x = k;
          }
          b |= 0;
          b = Sb.__create("mouseWheel", 0, this.__mouseX, this.__mouseY, f.__globalToLocal(c, c), f, b);
          b.cancelable = true;
          this.__dispatchStack(b, a);
          if (b.isDefaultPrevented()) {
            this.window.onMouseWheel.cancel();
          }
          if (b.__updateAfterEventFlag) {
            this.__renderAfterEvent();
          }
          lb.__pool.release(c);
        },
        __onTouch: function (a, b, c) {
          var d = lb.__pool.get();
          d.setTo(Math.round(b.x * this.window.__width * this.window.__scale), Math.round(b.y * this.window.__height * this.window.__scale));
          var e = this.__displayMatrix;
          var f = e.a * e.d - e.b * e.c;
          if (f == 0) {
            d.x = -e.tx;
            d.y = -e.ty;
          } else {
            var k = 1 / f * (e.c * (e.ty - d.y) + e.d * (d.x - e.tx));
            d.y = 1 / f * (e.a * (d.y - e.ty) + e.b * (e.tx - d.x));
            d.x = k;
          }
          e = d.x;
          f = d.y;
          k = [];
          if (this.__hitTest(e, f, false, k, true, this)) {
            var h = k[k.length - 1];
          } else {
            h = this;
            k = [this];
          }
          if (h == null) {
            h = this;
          }
          var n = b.id;
          if (this.__touchData.h.hasOwnProperty(n)) {
            var g = this.__touchData.h[n];
          } else {
            g = Ih.__pool.get();
            g.reset();
            g.touch = b;
            this.__touchData.h[n] = g;
          }
          var p = null;
          var l = false;
          switch (a) {
            case "touchBegin":
              g.touchDownTarget = h;
              break;
            case "touchEnd":
              if (g.touchDownTarget == h) {
                p = "touchTap";
              }
              g.touchDownTarget = null;
              l = true;
          }
          var m = lb.__pool.get();
          a = Ue.__create(a, null, e, f, h.__globalToLocal(d, m), h);
          a.touchPointID = n;
          a.isPrimaryTouchPoint = c;
          a.pressure = b.pressure;
          this.__dispatchStack(a, k);
          if (a.__updateAfterEventFlag) {
            this.__renderAfterEvent();
          }
          if (p != null) {
            a = Ue.__create(p, null, e, f, h.__globalToLocal(d, m), h);
            a.touchPointID = n;
            a.isPrimaryTouchPoint = c;
            a.pressure = b.pressure;
            this.__dispatchStack(a, k);
            if (a.__updateAfterEventFlag) {
              this.__renderAfterEvent();
            }
          }
          p = g.touchOverTarget;
          if (h != p && p != null) {
            a = Ue.__create("touchOut", null, e, f, p.__globalToLocal(d, m), p);
            a.touchPointID = n;
            a.isPrimaryTouchPoint = c;
            a.pressure = b.pressure;
            this.__dispatchTarget(p, a);
            if (a.__updateAfterEventFlag) {
              this.__renderAfterEvent();
            }
          }
          for (var v = g.rollOutStack, w, q = 0; q < v.length;) {
            w = v[q];
            if (k.indexOf(w) == -1) {
              r.remove(v, w);
              a = Ue.__create("touchRollOut", null, e, f, p.__globalToLocal(d, m), p);
              a.touchPointID = n;
              a.isPrimaryTouchPoint = c;
              a.bubbles = false;
              a.pressure = b.pressure;
              this.__dispatchTarget(w, a);
              if (a.__updateAfterEventFlag) {
                this.__renderAfterEvent();
              }
            } else {
              ++q;
            }
          }
          for (q = 0; q < k.length;) {
            w = k[q];
            ++q;
            if (v.indexOf(w) == -1) {
              if (w.hasEventListener("touchRollOver")) {
                a = Ue.__create("touchRollOver", null, e, f, p.__globalToLocal(d, m), w);
                a.touchPointID = n;
                a.isPrimaryTouchPoint = c;
                a.bubbles = false;
                a.pressure = b.pressure;
                this.__dispatchTarget(w, a);
                if (a.__updateAfterEventFlag) {
                  this.__renderAfterEvent();
                }
              }
              if (w.hasEventListener("touchRollOut")) {
                v.push(w);
              }
            }
          }
          if (h != p) {
            if (h != null) {
              a = Ue.__create("touchOver", null, e, f, h.__globalToLocal(d, m), h);
              a.touchPointID = n;
              a.isPrimaryTouchPoint = c;
              a.bubbles = true;
              a.pressure = b.pressure;
              this.__dispatchTarget(h, a);
              if (a.__updateAfterEventFlag) {
                this.__renderAfterEvent();
              }
            }
            g.touchOverTarget = h;
          }
          lb.__pool.release(d);
          lb.__pool.release(m);
          if (l) {
            this.__touchData.remove(n);
            g.reset();
            Ih.__pool.release(g);
          }
        },
        __registerLimeModule: function (a) {
          a.onCreateWindow.add(m(this, this.__onLimeCreateWindow));
          a.onUpdate.add(m(this, this.__onLimeUpdate));
          a.onExit.add(m(this, this.__onLimeModuleExit), false, 0);
          for (a = Qc.devices.iterator(); a.hasNext();) {
            var b = a.next();
            this.__onLimeGamepadConnect(b);
          }
          Qc.onConnect.add(m(this, this.__onLimeGamepadConnect));
          Dc.onStart.add(m(this, this.__onLimeTouchStart));
          Dc.onMove.add(m(this, this.__onLimeTouchMove));
          Dc.onEnd.add(m(this, this.__onLimeTouchEnd));
          Dc.onCancel.add(m(this, this.__onLimeTouchCancel));
        },
        __resize: function () {
          var a = this.stageWidth;
          var b = this.stageHeight;
          var c = this.window.__width * this.window.__scale | 0;
          var d = this.window.__height * this.window.__scale | 0;
          this.__displayMatrix.identity();
          if (this.get_fullScreenSourceRect() != null && this.window.__fullscreen) {
            this.stageWidth = this.get_fullScreenSourceRect().width | 0;
            this.stageHeight = this.get_fullScreenSourceRect().height | 0;
            var e = c / this.stageWidth;
            var f = d / this.stageHeight;
            this.__displayMatrix.translate(-this.get_fullScreenSourceRect().x, -this.get_fullScreenSourceRect().y);
            this.__displayMatrix.scale(e, f);
            this.__displayRect.setTo(this.get_fullScreenSourceRect().get_left(), this.get_fullScreenSourceRect().get_right(), this.get_fullScreenSourceRect().get_top(), this.get_fullScreenSourceRect().get_bottom());
          } else if (this.__logicalWidth == 0 || this.__logicalHeight == 0 || this.get_scaleMode() == 2 || c == 0 || d == 0) {
            this.stageWidth = Math.round(c / this.window.__scale);
            this.stageHeight = Math.round(d / this.window.__scale);
            this.__displayMatrix.scale(this.window.__scale, this.window.__scale);
            this.__displayRect.setTo(0, 0, this.stageWidth, this.stageHeight);
          } else {
            this.stageWidth = this.__logicalWidth;
            this.stageHeight = this.__logicalHeight;
            switch (this.get_scaleMode()) {
              case 0:
                e = c / this.stageWidth;
                f = d / this.stageHeight;
                this.__displayMatrix.scale(e, f);
                this.__displayRect.setTo(0, 0, this.stageWidth, this.stageHeight);
                break;
              case 1:
                e = c / this.stageWidth;
                f = d / this.stageHeight;
                e = Math.max(e, f);
                f = this.stageWidth * e;
                var k = this.stageHeight * e;
                f = this.stageWidth - Math.round((f - c) / e);
                k = this.stageHeight - Math.round((k - d) / e);
                var h = Math.round((this.stageWidth - f) / 2);
                var n = Math.round((this.stageHeight - k) / 2);
                this.__displayMatrix.translate(-h, -n);
                this.__displayMatrix.scale(e, e);
                this.__displayRect.setTo(h, n, f, k);
                break;
              default:
                e = c / this.stageWidth;
                f = d / this.stageHeight;
                e = Math.min(e, f);
                f = this.stageWidth * e;
                k = this.stageHeight * e;
                f = this.stageWidth - Math.round((f - c) / e);
                k = this.stageHeight - Math.round((k - d) / e);
                h = Math.round((this.stageWidth - f) / 2);
                n = Math.round((this.stageHeight - k) / 2);
                this.__displayMatrix.translate(-h, -n);
                this.__displayMatrix.scale(e, e);
                this.__displayRect.setTo(h, n, f, k);
            }
          }
          if (this.context3D != null) {
            this.context3D.configureBackBuffer(this.stageWidth, this.stageHeight, 0, true, true, true);
          }
          for (e = this.stage3Ds.iterator(); e.hasNext();) {
            e.next().__resize(c, d);
          }
          if (this.__renderer != null) {
            this.__renderer.__resize(c, d);
          }
          this.__renderDirty = true;
          if (this.stageWidth != a || this.stageHeight != b) {
            this.__setTransformDirty();
            a = new Ga("resize");
            this.__dispatchEvent(a);
          }
        },
        __setLogicalSize: function (a, b) {
          this.__logicalWidth = a;
          this.__logicalHeight = b;
          this.__resize();
        },
        __unregisterLimeModule: function (a) {
          a.onCreateWindow.remove(m(this, this.__onLimeCreateWindow));
          a.onUpdate.remove(m(this, this.__onLimeUpdate));
          a.onExit.remove(m(this, this.__onLimeModuleExit));
          Qc.onConnect.remove(m(this, this.__onLimeGamepadConnect));
          Dc.onStart.remove(m(this, this.__onLimeTouchStart));
          Dc.onMove.remove(m(this, this.__onLimeTouchMove));
          Dc.onEnd.remove(m(this, this.__onLimeTouchEnd));
          Dc.onCancel.remove(m(this, this.__onLimeTouchCancel));
        },
        __update: function (a, b) {
          if (a) {
            if (this.__transformDirty) {
              gb.prototype.__update.call(this, true, b);
              if (b) {
                this.__transformDirty = false;
              }
            }
          } else if (this.__transformDirty || this.__renderDirty) {
            gb.prototype.__update.call(this, false, b);
            if (b && wa.__supportDOM) {
              this.__wasDirty = true;
            }
          } else if (!this.__renderDirty && this.__wasDirty) {
            gb.prototype.__update.call(this, false, b);
            if (b) {
              this.__wasDirty = false;
            }
          }
        },
        set_color: function (a) {
          if (a == null) {
            this.__transparent = true;
            a = 0;
          } else {
            this.__transparent = false;
          }
          if (this.__color != a) {
            this.__colorSplit[0] = ((a & 16711680) >>> 16) / 255;
            this.__colorSplit[1] = ((a & 65280) >>> 8) / 255;
            this.__colorSplit[2] = (a & 255) / 255;
            this.__colorString = "#" + w.hex(a & 16777215, 6);
            this.__renderDirty = true;
            this.__color = a & 16777215 | -16777216;
          }
          return a;
        },
        get_displayState: function () {
          return this.__displayState;
        },
        set_displayState: function (a) {
          if (this.window != null) {
            if (a == 2) {
              if (this.window.__fullscreen) {
                this.window.set_fullscreen(false);
              }
            } else if (!this.window.__fullscreen) {
              this.window.set_fullscreen(true);
            }
          }
          return this.__displayState = a;
        },
        get_focus: function () {
          return this.__focus;
        },
        set_focus: function (a) {
          if (a != this.__focus) {
            var b = this.__focus;
            this.__cacheFocus = this.__focus = a;
            if (b != null) {
              var c = new Hh("focusOut", true, false, a, false, 0);
              var d = [];
              b.__getInteractive(d);
              d.reverse();
              this.__dispatchStack(c, d);
            }
            if (a != null) {
              c = new Hh("focusIn", true, false, b, false, 0);
              d = [];
              a.__getInteractive(d);
              d.reverse();
              this.__dispatchStack(c, d);
            }
          }
          return a;
        },
        get_frameRate: function () {
          if (this.window != null) {
            return this.window.__backend.getFrameRate();
          } else {
            return 0;
          }
        },
        set_frameRate: function (a) {
          if (this.window != null) {
            return this.window.__backend.setFrameRate(a);
          } else {
            return a;
          }
        },
        get_fullScreenSourceRect: function () {
          if (this.__fullScreenSourceRect == null) {
            return null;
          } else {
            return this.__fullScreenSourceRect.clone();
          }
        },
        set_height: function (a) {
          return this.get_height();
        },
        get_mouseX: function () {
          return this.__mouseX;
        },
        get_mouseY: function () {
          return this.__mouseY;
        },
        get_quality: function () {
          return this.__quality;
        },
        set_rotation: function (a) {
          return 0;
        },
        get_scaleMode: function () {
          return this.__scaleMode;
        },
        set_scaleMode: function (a) {
          if (a != this.__scaleMode) {
            this.__scaleMode = a;
            this.__resize();
          }
          return a;
        },
        set_scaleX: function (a) {
          return 0;
        },
        set_scaleY: function (a) {
          return 0;
        },
        get_tabEnabled: function () {
          return false;
        },
        get_tabIndex: function () {
          return -1;
        },
        set_transform: function (a) {
          return this.get_transform();
        },
        set_width: function (a) {
          return this.get_width();
        },
        set_x: function (a) {
          return 0;
        },
        set_y: function (a) {
          return 0;
        },
        __class__: Ai,
        __properties__: q(gb.prototype.__properties__, {
          set_color: "set_color",
          set_scaleMode: "set_scaleMode",
          get_scaleMode: "get_scaleMode",
          get_quality: "get_quality",
          get_fullScreenSourceRect: "get_fullScreenSourceRect",
          set_frameRate: "set_frameRate",
          get_frameRate: "get_frameRate",
          set_focus: "set_focus",
          get_focus: "get_focus",
          set_displayState: "set_displayState",
          get_displayState: "get_displayState"
        })
      });
      function Gh(a) {
        pa.call(this);
        this.__stage = a;
        this.__height = 0;
        this.__projectionTransform = new Ql();
        this.__renderTransform = new Ql();
        this.__y = this.__x = this.__width = 0;
        this.visible = true;
        if (a.stageWidth > 0 && a.stageHeight > 0) {
          this.__resize(a.stageWidth, a.stageHeight);
        }
      }
      g["openfl.display.Stage3D"] = Gh;
      Gh.__name__ = "openfl.display.Stage3D";
      Gh.__super__ = pa;
      Gh.prototype = q(pa.prototype, {
        __createContext: function () {
          var a = this.__stage;
          var b = a.__renderer;
          if (b.__type == "cairo" || b.__type == "canvas") {
            this.__dispatchError();
          } else if (b.__type == "opengl") {
            this.context3D = new Hb(a, a.context3D.__contextState, this);
            this.__dispatchCreate();
          } else if (b.__type == "dom") {
            if (a.context3D == null) {
              this.__canvas = window.document.createElement("canvas");
              this.__canvas.width = a.stageWidth;
              this.__canvas.height = a.stageHeight;
              var c = a.window.context.attributes;
              var d = Object.prototype.hasOwnProperty.call(c, "background") && c.background == null;
              var e = Object.prototype.hasOwnProperty.call(c, "colorDepth") ? c.colorDepth : 32;
              c = Object.prototype.hasOwnProperty.call(c, "antialiasing") && c.antialiasing > 0;
              this.__webgl = ep.getContextWebGL(this.__canvas, {
                alpha: d || e > 16,
                antialias: c,
                depth: true,
                premultipliedAlpha: true,
                stencil: true,
                preserveDrawingBuffer: false
              });
              if (this.__webgl != null) {
                if (sg.context == null) {
                  sg.context = this.__webgl;
                  sg.type = "webgl";
                  sg.version = 1;
                }
                a.context3D = new Hb(a);
                a.context3D.configureBackBuffer(a.window.__width, a.window.__height, 0, true, true, true);
                a.context3D.present();
                b.element.appendChild(this.__canvas);
                this.__style = this.__canvas.style;
                this.__style.setProperty("position", "absolute", null);
                this.__style.setProperty("top", "0", null);
                this.__style.setProperty("left", "0", null);
                this.__style.setProperty(b.__transformOriginProperty, "0 0 0", null);
                this.__style.setProperty("z-index", "-1", null);
              }
              if (a.context3D != null) {
                this.context3D = new Hb(a, a.context3D.__contextState, this);
              }
              this.__dispatchCreate();
            } else {
              this.__dispatchError();
            }
          }
        },
        __dispatchError: function () {
          this.__contextRequested = false;
          this.dispatchEvent(new Se("error", false, false, "Context3D not available"));
        },
        __dispatchCreate: function () {
          if (this.__contextRequested) {
            this.__contextRequested = false;
            this.dispatchEvent(new Ga("context3DCreate"));
          }
        },
        __lostContext: function () {
          this.__contextLost = true;
          if (this.context3D != null) {
            this.context3D.__dispose();
            this.__contextRequested = true;
          }
        },
        __resize: function (a, b) {
          if (a != this.__width || b != this.__height) {
            if (this.__canvas != null) {
              this.__canvas.width = a;
              this.__canvas.height = b;
            }
            this.__projectionTransform.copyRawDataFrom(ab.toFloatVector(null, null, null, [2 / (a > 0 ? a : 1), 0, 0, 0, 0, -2 / (b > 0 ? b : 1), 0, 0, 0, 0, -0.001, 0, -1, 1, 0, 1]));
            this.__renderTransform.identity();
            this.__renderTransform.appendTranslation(this.__x, this.__y, 0);
            this.__renderTransform.append(this.__projectionTransform);
            this.__width = a;
            this.__height = b;
          }
        },
        __restoreContext: function () {
          this.__contextLost = false;
          this.__createContext();
        },
        get_x: function () {
          return this.__x;
        },
        get_y: function () {
          return this.__y;
        },
        __class__: Gh,
        __properties__: {
          get_y: "get_y",
          get_x: "get_x"
        }
      });
      var Dp = {
        fromString: function (a) {
          switch (a) {
            case "bottom":
              return 0;
            case "bottomLeft":
              return 1;
            case "bottomRight":
              return 2;
            case "left":
              return 3;
            case "right":
              return 4;
            case "top":
              return 5;
            case "topLeft":
              return 6;
            case "topRight":
              return 7;
            default:
              return null;
          }
        }
      };
      function Pj(a, b, c, d, e, f, k, h) {
        if (h == null) {
          h = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 1;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.__id = a;
        this.__matrix = new za();
        if (b != 0) {
          this.set_x(b);
        }
        if (c != 0) {
          this.set_y(c);
        }
        if (d != 1) {
          this.set_scaleX(d);
        }
        if (e != 1) {
          this.set_scaleY(e);
        }
        if (f != 0) {
          this.set_rotation(f);
        }
        this.__dirty = true;
        this.__length = 0;
        this.__originX = k;
        this.__originY = h;
        this.__alpha = 1;
        this.__blendMode = null;
        this.__visible = true;
      }
      g["openfl.display.Tile"] = Pj;
      Pj.__name__ = "openfl.display.Tile";
      Pj.prototype = {
        getBounds: function (a) {
          var b = new da();
          this.__findTileRect(b);
          var c = za.__pool.get();
          if (a != null && a != this) {
            c.copyFrom(this.__getWorldTransform());
            var d = za.__pool.get();
            d.copyFrom(a.__getWorldTransform());
            d.invert();
            c.concat(d);
            za.__pool.release(d);
          } else {
            c.identity();
          }
          this.__getBounds(b, c);
          za.__pool.release(c);
          return b;
        },
        __getBounds: function (a, b) {
          a.__transform(a, b);
        },
        __findTileRect: function (a) {
          if (this.get_tileset() == null) {
            if (this.parent != null) {
              var b = this.parent.__findTileset();
              if (b == null) {
                a.setTo(0, 0, 0, 0);
              } else {
                b = b.getRect(this.get_id());
                if (b == null) {
                  a.setTo(0, 0, 0, 0);
                } else {
                  a.copyFrom(b);
                }
              }
            } else {
              a.setTo(0, 0, 0, 0);
            }
          } else {
            a.copyFrom(this.get_tileset().getRect(this.get_id()));
          }
          a.x = 0;
          a.y = 0;
        },
        __findTileset: function () {
          return this.get_tileset() ?? (this.parent instanceof Qj ? this.parent.get_tileset() : this.parent == null ? null : this.parent.__findTileset());
        },
        __getWorldTransform: function () {
          var a = this.get_matrix().clone();
          if (this.parent != null) {
            a.concat(this.parent.__getWorldTransform());
          }
          return a;
        },
        __setRenderDirty: function () {
          if (!this.__dirty) {
            this.__dirty = true;
            if (this.parent != null) {
              this.parent.__setRenderDirty();
            }
          }
        },
        get_alpha: function () {
          return this.__alpha;
        },
        set_alpha: function (a) {
          if (a != this.__alpha) {
            this.__alpha = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_colorTransform: function () {
          return this.__colorTransform;
        },
        get_height: function () {
          var a = da.__pool.get();
          this.__findTileRect(a);
          this.__getBounds(a, this.get_matrix());
          var b = a.height;
          da.__pool.release(a);
          return b;
        },
        set_height: function (a) {
          var b = da.__pool.get();
          this.__findTileRect(b);
          if (b.height != 0) {
            this.set_scaleY(a / b.height);
          }
          da.__pool.release(b);
          return a;
        },
        get_id: function () {
          return this.__id;
        },
        get_matrix: function () {
          return this.__matrix;
        },
        get_originX: function () {
          return this.__originX;
        },
        set_originX: function (a) {
          if (a != this.__originX) {
            this.__originX = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_originY: function () {
          return this.__originY;
        },
        set_originY: function (a) {
          if (a != this.__originY) {
            this.__originY = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_rotation: function () {
          if (this.__rotation == null) {
            if (this.__matrix.b == 0 && this.__matrix.c == 0) {
              this.__rotationSine = this.__rotation = 0;
              this.__rotationCosine = 1;
            } else {
              var a = Math.atan2(this.__matrix.d, this.__matrix.c) - Math.PI / 2;
              this.__rotation = 180 / Math.PI * a;
              this.__rotationSine = Math.sin(a);
              this.__rotationCosine = Math.cos(a);
            }
          }
          return this.__rotation;
        },
        set_rotation: function (a) {
          if (a != this.__rotation) {
            this.__rotation = a;
            var b = Math.PI / 180 * a;
            this.__rotationSine = Math.sin(b);
            this.__rotationCosine = Math.cos(b);
            b = this.get_scaleX();
            var c = this.get_scaleY();
            this.__matrix.a = this.__rotationCosine * b;
            this.__matrix.b = this.__rotationSine * b;
            this.__matrix.c = -this.__rotationSine * c;
            this.__matrix.d = this.__rotationCosine * c;
            this.__setRenderDirty();
          }
          return a;
        },
        get_scaleX: function () {
          if (this.__scaleX == null) {
            if (this.get_matrix().b == 0) {
              this.__scaleX = this.__matrix.a;
            } else {
              this.__scaleX = Math.sqrt(this.__matrix.a * this.__matrix.a + this.__matrix.b * this.__matrix.b);
            }
          }
          return this.__scaleX;
        },
        set_scaleX: function (a) {
          if (a != this.__scaleX) {
            this.__scaleX = a;
            if (this.__matrix.b == 0) {
              this.__matrix.a = a;
            } else {
              this.get_rotation();
              var b = this.__rotationSine * a;
              this.__matrix.a = this.__rotationCosine * a;
              this.__matrix.b = b;
            }
            this.__setRenderDirty();
          }
          return a;
        },
        get_scaleY: function () {
          if (this.__scaleY == null) {
            this.__scaleY = this.__matrix.c == 0 ? this.get_matrix().d : Math.sqrt(this.__matrix.c * this.__matrix.c + this.__matrix.d * this.__matrix.d);
          }
          return this.__scaleY;
        },
        set_scaleY: function (a) {
          if (a != this.__scaleY) {
            this.__scaleY = a;
            if (this.__matrix.c == 0) {
              this.__matrix.d = a;
            } else {
              this.get_rotation();
              var b = this.__rotationCosine * a;
              this.__matrix.c = -this.__rotationSine * a;
              this.__matrix.d = b;
            }
            this.__setRenderDirty();
          }
          return a;
        },
        get_shader: function () {
          return this.__shader;
        },
        get_tileset: function () {
          return this.__tileset;
        },
        set_tileset: function (a) {
          if (a != this.__tileset) {
            this.__tileset = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_visible: function () {
          return this.__visible;
        },
        get_width: function () {
          var a = da.__pool.get();
          this.__findTileRect(a);
          this.__getBounds(a, this.get_matrix());
          var b = a.width;
          da.__pool.release(a);
          return b;
        },
        set_width: function (a) {
          var b = da.__pool.get();
          this.__findTileRect(b);
          if (b.width != 0) {
            this.set_scaleX(a / b.width);
          }
          da.__pool.release(b);
          return a;
        },
        get_x: function () {
          return this.__matrix.tx;
        },
        set_x: function (a) {
          if (a != this.__matrix.tx) {
            this.__matrix.tx = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_y: function () {
          return this.__matrix.ty;
        },
        set_y: function (a) {
          if (a != this.__matrix.ty) {
            this.__matrix.ty = a;
            this.__setRenderDirty();
          }
          return a;
        },
        __class__: Pj,
        __properties__: {
          set_y: "set_y",
          get_y: "get_y",
          set_x: "set_x",
          get_x: "get_x",
          set_width: "set_width",
          get_width: "get_width",
          get_visible: "get_visible",
          set_tileset: "set_tileset",
          get_tileset: "get_tileset",
          get_shader: "get_shader",
          set_scaleY: "set_scaleY",
          get_scaleY: "get_scaleY",
          set_scaleX: "set_scaleX",
          get_scaleX: "get_scaleX",
          set_rotation: "set_rotation",
          get_rotation: "get_rotation",
          set_originY: "set_originY",
          get_originY: "get_originY",
          set_originX: "set_originX",
          get_originX: "get_originX",
          get_matrix: "get_matrix",
          get_id: "get_id",
          set_height: "set_height",
          get_height: "get_height",
          get_colorTransform: "get_colorTransform",
          set_alpha: "set_alpha",
          get_alpha: "get_alpha"
        }
      };
      function Rj(a, b, c, d, e, f, k) {
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        Pj.call(this, -1, a, b, c, d, e, f, k);
        this.__tiles = [];
        this.__length = 0;
      }
      g["openfl.display.TileContainer"] = Rj;
      Rj.__name__ = "openfl.display.TileContainer";
      Rj.__interfaces__ = [Ho];
      Rj.__super__ = Pj;
      Rj.prototype = q(Pj.prototype, {
        getBounds: function (a) {
          var b = new da();
          var c;
          for (var d = 0, e = this.__tiles; d < e.length;) {
            c = e[d];
            ++d;
            c = c.getBounds(a);
            b.__expand(c.x, c.y, c.width, c.height);
          }
          return b;
        },
        get_height: function () {
          var a = da.__pool.get();
          var b;
          for (var c = 0, d = this.__tiles; c < d.length;) {
            b = d[c];
            ++c;
            b = b.getBounds(this);
            a.__expand(b.x, b.y, b.width, b.height);
          }
          this.__getBounds(a, this.get_matrix());
          c = a.height;
          da.__pool.release(a);
          return c;
        },
        set_height: function (a) {
          var b = da.__pool.get();
          var c;
          for (var d = 0, e = this.__tiles; d < e.length;) {
            c = e[d];
            ++d;
            c = c.getBounds(this);
            b.__expand(c.x, c.y, c.width, c.height);
          }
          if (b.height != 0) {
            this.set_scaleY(a / b.height);
          }
          da.__pool.release(b);
          return a;
        },
        get_width: function () {
          var a = da.__pool.get();
          var b;
          for (var c = 0, d = this.__tiles; c < d.length;) {
            b = d[c];
            ++c;
            b = b.getBounds(this);
            a.__expand(b.x, b.y, b.width, b.height);
          }
          this.__getBounds(a, this.get_matrix());
          c = a.width;
          da.__pool.release(a);
          return c;
        },
        set_width: function (a) {
          var b = da.__pool.get();
          var c;
          for (var d = 0, e = this.__tiles; d < e.length;) {
            c = e[d];
            ++d;
            c = c.getBounds(this);
            b.__expand(c.x, c.y, c.width, c.height);
          }
          if (b.width != 0) {
            this.set_scaleX(a / b.width);
          }
          da.__pool.release(b);
          return a;
        },
        __class__: Rj
      });
      function Qj(a, b, c, d) {
        if (d == null) {
          d = true;
        }
        wa.call(this);
        this.__drawableType = 9;
        this.__tileset = c;
        this.smoothing = d;
        this.tileColorTransformEnabled = this.tileBlendModeEnabled = this.tileAlphaEnabled = true;
        this.__group = new Rj();
        this.__group.set_tileset(c);
        this.__width = a;
        this.__height = b;
      }
      g["openfl.display.Tilemap"] = Qj;
      Qj.__name__ = "openfl.display.Tilemap";
      Qj.__interfaces__ = [Ho];
      Qj.__super__ = wa;
      Qj.prototype = q(wa.prototype, {
        __enterFrame: function (a) {
          if (this.__group.__dirty && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
        },
        __getBounds: function (a, b) {
          var c = da.__pool.get();
          c.setTo(0, 0, this.__width, this.__height);
          c.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          da.__pool.release(c);
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          this.__getRenderTransform();
          var k = this.__renderTransform;
          var h = k.a * k.d - k.b * k.c;
          c = h == 0 ? -k.tx : 1 / h * (k.c * (k.ty - b) + k.d * (a - k.tx));
          k = this.__renderTransform;
          h = k.a * k.d - k.b * k.c;
          a = h == 0 ? -k.ty : 1 / h * (k.a * (b - k.ty) + k.b * (k.tx - a));
          if (c > 0 && a > 0 && c <= this.__width && a <= this.__height) {
            if (d != null && !e) {
              d.push(f);
            }
            return true;
          } else {
            return false;
          }
        },
        get_height: function () {
          return this.__height * Math.abs(this.get_scaleY());
        },
        set_height: function (a) {
          this.__height = a | 0;
          return this.__height * Math.abs(this.get_scaleY());
        },
        get_width: function () {
          return this.__width * Math.abs(this.__scaleX);
        },
        set_width: function (a) {
          this.__width = a | 0;
          return this.__width * Math.abs(this.__scaleX);
        },
        __class__: Qj
      });
      function np(a, b) {
        this.__bitmapData = a;
        this.rectData = ab.toFloatVector(null);
        this.__data = [];
        if (b != null) {
          for (a = 0; a < b.length;) {
            var c = b[a];
            ++a;
            this.addRect(c);
          }
        }
      }
      g["openfl.display.Tileset"] = np;
      np.__name__ = "openfl.display.Tileset";
      np.prototype = {
        addRect: function (a) {
          if (a == null) {
            return -1;
          }
          this.rectData.push(a.x);
          this.rectData.push(a.y);
          this.rectData.push(a.width);
          this.rectData.push(a.height);
          a = new zm(a);
          a.__update(this.__bitmapData);
          this.__data.push(a);
          return this.__data.length - 1;
        },
        getRect: function (a) {
          if (a < this.__data.length && a >= 0) {
            return new da(this.__data[a].x, this.__data[a].y, this.__data[a].width, this.__data[a].height);
          } else {
            return null;
          }
        },
        __class__: np
      };
      function zm(a) {
        if (a != null) {
          this.x = a.x | 0;
          this.y = a.y | 0;
          this.width = a.width | 0;
          this.height = a.height | 0;
        }
      }
      g["openfl.display._Tileset.TileData"] = zm;
      zm.__name__ = "openfl.display._Tileset.TileData";
      zm.prototype = {
        __update: function (a) {
          if (a != null) {
            var b = a.width;
            a = a.height;
            this.__uvX = this.x / b;
            this.__uvY = this.y / a;
            this.__uvWidth = (this.x + this.width) / b;
            this.__uvHeight = (this.y + this.height) / a;
          }
        },
        __class__: zm
      };
      function op() {
        this.__totalFrames = this.__framesLoaded = 1;
        this.__currentLabels = [];
        this.__currentFrame = 1;
        this.__lastFrameUpdate = this.__lastFrameScriptEval = -1;
      }
      g["openfl.display.Timeline"] = op;
      op.__name__ = "openfl.display.Timeline";
      op.prototype = {
        enterFrame: function (a) {},
        __enterFrame: function (a) {
          if (this.__isPlaying) {
            a = this.__getNextFrame(a);
            if (this.__lastFrameScriptEval == a) {
              return;
            }
            if (this.__frameScripts != null) {
              if (a < this.__currentFrame) {
                if (!this.__evaluateFrameScripts(this.__totalFrames)) {
                  return;
                }
                this.__currentFrame = 1;
              }
              if (!this.__evaluateFrameScripts(a)) {
                return;
              }
            } else {
              this.__currentFrame = a;
            }
          }
          this.__updateSymbol(this.__currentFrame);
        },
        __evaluateFrameScripts: function (a) {
          if (this.__frameScripts == null) {
            return true;
          }
          var b = this.__currentFrame;
          for (a += 1; b < a;) {
            var c = b++;
            if (c != this.__lastFrameScriptEval && (this.__currentFrame = this.__lastFrameScriptEval = c, this.__frameScripts.h.hasOwnProperty(c) && (this.__updateSymbol(c), (0, this.__frameScripts.h[c])(this.__scope), this.__currentFrame != c) || !this.__isPlaying)) {
              return false;
            }
          }
          return true;
        },
        __getNextFrame: function (a) {
          if (this.frameRate != null) {
            this.__timeElapsed += a;
            a = this.__currentFrame + Math.floor(this.__timeElapsed / this.__frameTime);
            if (a < 1) {
              a = 1;
            }
            if (a > this.__totalFrames) {
              a = Math.floor((a - 1) % this.__totalFrames) + 1;
            }
            this.__timeElapsed %= this.__frameTime;
          } else {
            a = this.__currentFrame + 1;
            if (a > this.__totalFrames) {
              a = 1;
            }
          }
          return a;
        },
        __updateFrameLabel: function () {
          this.__currentFrameLabel = this.__currentLabel = null;
          for (var a = 0, b = this.__currentLabels; a < b.length;) {
            var c = b[a];
            ++a;
            if (c.frame < this.__currentFrame) {
              this.__currentLabel = c.name;
            } else if (c.frame == this.__currentFrame) {
              this.__currentFrameLabel = this.__currentLabel = c.name;
            } else {
              break;
            }
          }
        },
        __updateSymbol: function (a) {
          if (this.__currentFrame != this.__lastFrameUpdate) {
            this.__updateFrameLabel();
            this.enterFrame(a);
            this.__lastFrameUpdate = this.__currentFrame;
          }
        },
        __class__: op
      };
      function Mj(a, b) {
        vi.call(this, a, b);
        this.stage = new Ai(this, Object.prototype.hasOwnProperty.call(b.context, "background") ? b.context.background : 16777215);
        if (Object.prototype.hasOwnProperty.call(b, "parameters")) {
          try {
            this.stage.get_loaderInfo().parameters = b.parameters;
          } catch (c) {
            Pa.lastError = c;
          }
        }
        this.stage.__setLogicalSize(b.width, b.height);
        if (Object.prototype.hasOwnProperty.call(b, "resizable") && !b.resizable) {
          this.stage.set_scaleMode(3);
        }
        a.addModule(this.stage);
      }
      g["openfl.display.Window"] = Mj;
      Mj.__name__ = "openfl.display.Window";
      Mj.__super__ = vi;
      Mj.prototype = q(vi.prototype, {
        close: function () {
          vi.prototype.close.call(this);
          if (!this.onClose.canceled && this.stage != null) {
            this.application.removeModule(this.stage);
            this.stage = null;
          }
        },
        __class__: Mj
      });
      function Nj() {}
      g["openfl.display._internal.CanvasBitmap"] = Nj;
      Nj.__name__ = "openfl.display._internal.CanvasBitmap";
      Nj.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__bitmapData != null && a.__bitmapData.image != null) {
          a.__imageVersion = a.__bitmapData.image.version;
        }
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(u = b.__getAlpha(a.__worldAlpha), u <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              r = b.context;
              b.setTransform(a.__renderTransform, r);
              var c = a.opaqueBackground;
              r.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")";
              r.fillRect(0, 0, a.get_width(), a.get_height());
              b.__popMaskObject(a);
            }
            if (a.__graphics != null && a.__renderable && (u = b.__getAlpha(a.__worldAlpha), !(u <= 0))) {
              var d = a.__graphics;
              if (d != null) {
                B.render(d, b);
                var e = d.__width;
                var f = d.__height;
                c = d.__canvas;
                if (c != null && d.__visible && e >= 1 && f >= 1) {
                  var k = d.__worldTransform;
                  r = b.context;
                  z = a.__scrollRect;
                  var h = a.__worldScale9Grid;
                  if (z == null || z.width > 0 && z.height > 0) {
                    b.__setBlendMode(a.__worldBlendMode);
                    b.__pushMaskObject(a);
                    r.globalAlpha = u;
                    if (h != null && k.b == 0 && k.c == 0) {
                      var n = b.__pixelRatio;
                      u = za.__pool.get();
                      u.translate(k.tx, k.ty);
                      b.setTransform(u, r);
                      za.__pool.release(u);
                      u = d.__bounds;
                      var g = d.__renderTransform.a / d.__bitmapScale;
                      var p = d.__renderTransform.d / d.__bitmapScale;
                      var l = g * k.a;
                      var m = p * k.d;
                      k = Math.max(1, Math.round(h.x * g));
                      d = Math.round(h.y * p);
                      z = Math.max(1, Math.round((u.get_right() - h.get_right()) * g));
                      var v = Math.round((u.get_bottom() - h.get_bottom()) * p);
                      g = Math.round(h.width * g);
                      h = Math.round(h.height * p);
                      p = Math.round(k / n);
                      var w = Math.round(d / n);
                      var q = Math.round(z / n);
                      n = Math.round(v / n);
                      l = u.width * l - p - q;
                      u = u.height * m - w - n;
                      b.applySmoothing(r, false);
                      if (g != 0 && h != 0) {
                        r.drawImage(c, 0, 0, k, d, 0, 0, p, w);
                        r.drawImage(c, k, 0, g, d, p, 0, l, w);
                        r.drawImage(c, k + g, 0, z, d, p + l, 0, q, w);
                        r.drawImage(c, 0, d, k, h, 0, w, p, u);
                        r.drawImage(c, k, d, g, h, p, w, l, u);
                        r.drawImage(c, k + g, d, z, h, p + l, w, q, u);
                        r.drawImage(c, 0, d + h, k, v, 0, w + u, p, n);
                        r.drawImage(c, k, d + h, g, v, p, w + u, l, n);
                        r.drawImage(c, k + g, d + h, z, v, p + l, w + u, q, n);
                      } else if (g == 0 && h != 0) {
                        f = p + l + q;
                        r.drawImage(c, 0, 0, e, d, 0, 0, f, w);
                        r.drawImage(c, 0, d, e, h, 0, w, f, u);
                        r.drawImage(c, 0, d + h, e, v, 0, w + u, f, n);
                      } else if (h == 0 && g != 0) {
                        e = w + u + n;
                        r.drawImage(c, 0, 0, k, f, 0, 0, p, e);
                        r.drawImage(c, k, 0, g, f, p, 0, l, e);
                        r.drawImage(c, k + g, 0, z, f, p + l, 0, q, e);
                      }
                    } else {
                      b.setTransform(k, r);
                      r.drawImage(c, 0, 0, e, f);
                    }
                    b.__popMaskObject(a);
                  }
                }
              }
            }
          }
          if (a.__renderable) {
            u = b.__getAlpha(a.__worldAlpha);
            if (u > 0 && a.__bitmapData != null && a.__bitmapData.__isValid && a.__bitmapData.readable) {
              r = b.context;
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a, false);
              Ya.convertToCanvas(a.__bitmapData.image);
              r.globalAlpha = u;
              z = a.__scrollRect;
              b.setTransform(a.__renderTransform, r);
              if (!b.__allowSmoothing || !a.smoothing) {
                r.imageSmoothingEnabled = false;
              }
              if (z == null) {
                r.drawImage(a.__bitmapData.image.get_src(), 0, 0, a.__bitmapData.image.width, a.__bitmapData.image.height);
              } else {
                r.drawImage(a.__bitmapData.image.get_src(), z.x, z.y, z.width, z.height, z.x, z.y, z.width, z.height);
              }
              if (!b.__allowSmoothing || !a.smoothing) {
                r.imageSmoothingEnabled = true;
              }
              b.__popMaskObject(a, false);
            }
          }
        } else {
          c = a.__cacheBitmap;
          if (c.__renderable) {
            var u = b.__getAlpha(c.__worldAlpha);
            if (u > 0 && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
              var r = b.context;
              b.__setBlendMode(c.__worldBlendMode);
              b.__pushMaskObject(c, false);
              Ya.convertToCanvas(c.__bitmapData.image);
              r.globalAlpha = u;
              var z = c.__scrollRect;
              b.setTransform(c.__renderTransform, r);
              if (!b.__allowSmoothing || !c.smoothing) {
                r.imageSmoothingEnabled = false;
              }
              if (z == null) {
                r.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height);
              } else {
                r.drawImage(c.__bitmapData.image.get_src(), z.x, z.y, z.width, z.height, z.x, z.y, z.width, z.height);
              }
              if (!b.__allowSmoothing || !c.smoothing) {
                r.imageSmoothingEnabled = true;
              }
              b.__popMaskObject(c, false);
            }
          }
        }
        b.__renderEvent(a);
      };
      Nj.renderDrawableMask = function (a, b) {
        b.context.rect(0, 0, a.get_width(), a.get_height());
      };
      function km() {}
      g["openfl.display._internal.CanvasBitmapData"] = km;
      km.__name__ = "openfl.display._internal.CanvasBitmapData";
      km.renderDrawable = function (a, b) {
        if (a.readable) {
          var c = a.image;
          if (c.type == Gd.DATA) {
            Ya.convertToCanvas(c);
          }
          var d = b.context;
          d.globalAlpha = 1;
          b.setTransform(a.__renderTransform, d);
          d.drawImage(c.get_src(), 0, 0, c.width, c.height);
        }
      };
      km.renderDrawableMask = function (a, b) {};
      function Ch() {}
      g["openfl.display._internal.CanvasDisplayObject"] = Ch;
      Ch.__name__ = "openfl.display._internal.CanvasDisplayObject";
      Ch.renderDrawable = function (a, b) {
        if (a.get_mask() == null || a.get_mask().get_width() > 0 && a.get_mask().get_height() > 0) {
          b.__updateCacheBitmap(a, false);
          if (a.__cacheBitmap != null && !a.__isCacheBitmapRender) {
            var c = a.__cacheBitmap;
            if (c.__renderable) {
              var d = b.__getAlpha(c.__worldAlpha);
              if (d > 0 && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
                var e = b.context;
                b.__setBlendMode(c.__worldBlendMode);
                b.__pushMaskObject(c, false);
                Ya.convertToCanvas(c.__bitmapData.image);
                e.globalAlpha = d;
                var f = c.__scrollRect;
                b.setTransform(c.__renderTransform, e);
                if (!b.__allowSmoothing || !c.smoothing) {
                  e.imageSmoothingEnabled = false;
                }
                if (f == null) {
                  e.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height);
                } else {
                  e.drawImage(c.__bitmapData.image.get_src(), f.x, f.y, f.width, f.height, f.x, f.y, f.width, f.height);
                }
                if (!b.__allowSmoothing || !c.smoothing) {
                  e.imageSmoothingEnabled = true;
                }
                b.__popMaskObject(c, false);
              }
            }
          } else if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(d = b.__getAlpha(a.__worldAlpha), d <= 0 || (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0 && (b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), e = b.context, b.setTransform(a.__renderTransform, e), c = a.opaqueBackground, e.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")", e.fillRect(0, 0, a.get_width(), a.get_height()), b.__popMaskObject(a)), a.__graphics == null || !a.__renderable || (d = b.__getAlpha(a.__worldAlpha), d <= 0)))) {
            var k = a.__graphics;
            if (k != null) {
              B.render(k, b);
              var h = k.__width;
              var n = k.__height;
              c = k.__canvas;
              if (c != null && k.__visible && h >= 1 && n >= 1) {
                var g = k.__worldTransform;
                e = b.context;
                f = a.__scrollRect;
                var p = a.__worldScale9Grid;
                if (f == null || f.width > 0 && f.height > 0) {
                  b.__setBlendMode(a.__worldBlendMode);
                  b.__pushMaskObject(a);
                  e.globalAlpha = d;
                  if (p != null && g.b == 0 && g.c == 0) {
                    var l = b.__pixelRatio;
                    d = za.__pool.get();
                    d.translate(g.tx, g.ty);
                    b.setTransform(d, e);
                    za.__pool.release(d);
                    d = k.__bounds;
                    var m = k.__renderTransform.a / k.__bitmapScale;
                    var v = k.__renderTransform.d / k.__bitmapScale;
                    var w = m * g.a;
                    var q = v * g.d;
                    g = Math.max(1, Math.round(p.x * m));
                    k = Math.round(p.y * v);
                    f = Math.max(1, Math.round((d.get_right() - p.get_right()) * m));
                    var u = Math.round((d.get_bottom() - p.get_bottom()) * v);
                    m = Math.round(p.width * m);
                    p = Math.round(p.height * v);
                    v = Math.round(g / l);
                    var r = Math.round(k / l);
                    var z = Math.round(f / l);
                    l = Math.round(u / l);
                    w = d.width * w - v - z;
                    d = d.height * q - r - l;
                    b.applySmoothing(e, false);
                    if (m != 0 && p != 0) {
                      e.drawImage(c, 0, 0, g, k, 0, 0, v, r);
                      e.drawImage(c, g, 0, m, k, v, 0, w, r);
                      e.drawImage(c, g + m, 0, f, k, v + w, 0, z, r);
                      e.drawImage(c, 0, k, g, p, 0, r, v, d);
                      e.drawImage(c, g, k, m, p, v, r, w, d);
                      e.drawImage(c, g + m, k, f, p, v + w, r, z, d);
                      e.drawImage(c, 0, k + p, g, u, 0, r + d, v, l);
                      e.drawImage(c, g, k + p, m, u, v, r + d, w, l);
                      e.drawImage(c, g + m, k + p, f, u, v + w, r + d, z, l);
                    } else if (m == 0 && p != 0) {
                      n = v + w + z;
                      e.drawImage(c, 0, 0, h, k, 0, 0, n, r);
                      e.drawImage(c, 0, k, h, p, 0, r, n, d);
                      e.drawImage(c, 0, k + p, h, u, 0, r + d, n, l);
                    } else if (p == 0 && m != 0) {
                      h = r + d + l;
                      e.drawImage(c, 0, 0, g, n, 0, 0, v, h);
                      e.drawImage(c, g, 0, m, n, v, 0, w, h);
                      e.drawImage(c, g + m, 0, f, n, v + w, 0, z, h);
                    }
                  } else {
                    b.setTransform(g, e);
                    e.drawImage(c, 0, 0, h, n);
                  }
                  b.__popMaskObject(a);
                }
              }
            }
          }
        }
        b.__renderEvent(a);
      };
      Ch.renderDrawableMask = function (a, b) {
        if (a.__graphics != null) {
          B.renderMask(a.__graphics, b);
        }
      };
      function lm() {}
      g["openfl.display._internal.CanvasDisplayObjectContainer"] = lm;
      lm.__name__ = "openfl.display._internal.CanvasDisplayObjectContainer";
      lm.renderDrawable = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        if (!!a.__renderable && !(a.__worldAlpha <= 0) && (a.get_mask() == null || !(a.get_mask().get_width() <= 0) && !(a.get_mask().get_height() <= 0)) && (Ch.renderDrawable(a, b), a.__cacheBitmap == null || a.__isCacheBitmapRender)) {
          b.__pushMaskObject(a);
          if (b.__stage != null) {
            c = 0;
            for (d = a.__children; c < d.length;) {
              var e = d[c];
              ++c;
              b.__renderDrawable(e);
              e.__renderDirty = false;
            }
            a.__renderDirty = false;
          } else {
            c = 0;
            d = a.__children;
            while (c < d.length) {
              e = d[c];
              ++c;
              b.__renderDrawable(e);
            }
          }
          b.__popMaskObject(a);
        }
      };
      lm.renderDrawableMask = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        if (a.__graphics != null) {
          B.renderMask(a.__graphics, b);
        }
        c = 0;
        for (a = a.__children; c < a.length;) {
          d = a[c];
          ++c;
          b.__renderDrawableMask(d);
        }
      };
      function ee() {
        if (ee.empty == null) {
          this.types = [];
          this.b = [];
          this.i = [];
          this.f = [];
          this.o = [];
          this.ff = [];
          this.ii = [];
          this.copyOnWrite = true;
        } else {
          this.clear();
        }
      }
      g["openfl.display._internal.DrawCommandBuffer"] = ee;
      ee.__name__ = "openfl.display._internal.DrawCommandBuffer";
      ee.prototype = {
        beginBitmapFill: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(ra.BEGIN_BITMAP_FILL);
          this.o.push(a);
          this.o.push(b);
          this.b.push(c);
          this.b.push(d);
        },
        beginFill: function (a, b) {
          this.prepareWrite();
          this.types.push(ra.BEGIN_FILL);
          this.i.push(a);
          this.f.push(b);
        },
        beginGradientFill: function (a, b, c, d, e, f, k, h) {
          this.prepareWrite();
          this.types.push(ra.BEGIN_GRADIENT_FILL);
          this.o.push(a);
          this.ii.push(b);
          this.ff.push(c);
          this.ii.push(d);
          this.o.push(e);
          this.o.push(f);
          this.o.push(k);
          this.f.push(h);
        },
        beginShaderFill: function (a) {
          this.prepareWrite();
          this.types.push(ra.BEGIN_SHADER_FILL);
          this.o.push(a);
        },
        clear: function () {
          this.types = ee.empty.types;
          this.b = ee.empty.b;
          this.i = ee.empty.i;
          this.f = ee.empty.f;
          this.o = ee.empty.o;
          this.ff = ee.empty.ff;
          this.ii = ee.empty.ii;
          this.copyOnWrite = true;
        },
        cubicCurveTo: function (a, b, c, d, e, f) {
          this.prepareWrite();
          this.types.push(ra.CUBIC_CURVE_TO);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
          this.f.push(e);
          this.f.push(f);
        },
        curveTo: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(ra.CURVE_TO);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
        },
        drawCircle: function (a, b, c) {
          this.prepareWrite();
          this.types.push(ra.DRAW_CIRCLE);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
        },
        drawEllipse: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(ra.DRAW_ELLIPSE);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
        },
        drawQuads: function (a, b, c) {
          this.prepareWrite();
          this.types.push(ra.DRAW_QUADS);
          this.o.push(a);
          this.o.push(b);
          this.o.push(c);
        },
        drawRect: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(ra.DRAW_RECT);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
        },
        drawRoundRect: function (a, b, c, d, e, f) {
          this.prepareWrite();
          this.types.push(ra.DRAW_ROUND_RECT);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
          this.f.push(e);
          this.o.push(f);
        },
        drawTriangles: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(ra.DRAW_TRIANGLES);
          this.o.push(a);
          this.o.push(b);
          this.o.push(c);
          this.o.push(d);
        },
        endFill: function () {
          this.prepareWrite();
          this.types.push(ra.END_FILL);
        },
        lineBitmapStyle: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(ra.LINE_BITMAP_STYLE);
          this.o.push(a);
          this.o.push(b);
          this.b.push(c);
          this.b.push(d);
        },
        lineGradientStyle: function (a, b, c, d, e, f, k, h) {
          this.prepareWrite();
          this.types.push(ra.LINE_GRADIENT_STYLE);
          this.o.push(a);
          this.ii.push(b);
          this.ff.push(c);
          this.ii.push(d);
          this.o.push(e);
          this.o.push(f);
          this.o.push(k);
          this.f.push(h);
        },
        lineStyle: function (a, b, c, d, e, f, k, h) {
          this.prepareWrite();
          this.types.push(ra.LINE_STYLE);
          this.o.push(a);
          this.i.push(b);
          this.f.push(c);
          this.b.push(d);
          this.o.push(e);
          this.o.push(f);
          this.o.push(k);
          this.f.push(h);
        },
        lineTo: function (a, b) {
          this.prepareWrite();
          this.types.push(ra.LINE_TO);
          this.f.push(a);
          this.f.push(b);
        },
        moveTo: function (a, b) {
          this.prepareWrite();
          this.types.push(ra.MOVE_TO);
          this.f.push(a);
          this.f.push(b);
        },
        prepareWrite: function () {
          if (this.copyOnWrite) {
            this.types = this.types.slice();
            this.b = this.b.slice();
            this.i = this.i.slice();
            this.f = this.f.slice();
            this.o = this.o.slice();
            this.ff = this.ff.slice();
            this.ii = this.ii.slice();
            this.copyOnWrite = false;
          }
        },
        overrideBlendMode: function (a) {
          this.prepareWrite();
          this.types.push(ra.OVERRIDE_BLEND_MODE);
          this.o.push(a);
        },
        windingEvenOdd: function () {
          this.prepareWrite();
          this.types.push(ra.WINDING_EVEN_ODD);
        },
        windingNonZero: function () {
          this.prepareWrite();
          this.types.push(ra.WINDING_NON_ZERO);
        },
        get_length: function () {
          return this.types.length;
        },
        __class__: ee,
        __properties__: {
          get_length: "get_length"
        }
      };
      function B() {}
      g["openfl.display._internal.CanvasGraphics"] = B;
      B.__name__ = "openfl.display._internal.CanvasGraphics";
      B.closePath = function (a) {
        if (a == null) {
          a = false;
        }
        if (B.context.strokeStyle != null) {
          if (!a) {
            B.context.closePath();
          }
          B.context.stroke();
          if (a) {
            B.context.closePath();
          }
          B.context.beginPath();
        }
      };
      B.createBitmapFill = function (a, b, c) {
        Ya.convertToCanvas(a.image);
        B.setSmoothing(c);
        return B.context.createPattern(a.image.get_src(), b ? "repeat" : "no-repeat");
      };
      B.createGradientPattern = function (a, b, c, d, e, f, k, h) {
        f = null;
        k = false;
        if (e == null) {
          e = za.__pool.get();
          e.identity();
          k = true;
        }
        switch (a) {
          case 0:
            f = B.context.createLinearGradient(-819.2, 0, 819.2, 0);
            B.pendingMatrix = e.clone();
            B.inversePendingMatrix = e.clone();
            B.inversePendingMatrix.invert();
            break;
          case 1:
            if (h > 1) {
              h = 1;
            } else if (h < -1) {
              h = -1;
            }
            f = B.context.createRadialGradient(h * 819.2, 0, 0, 0, 0, 819.2);
            B.pendingMatrix = e.clone();
            B.inversePendingMatrix = e.clone();
            B.inversePendingMatrix.invert();
        }
        var n;
        var t;
        var g;
        for (var l = 0, p = b.length; l < p;) {
          g = l++;
          n = b[g];
          a = c[g];
          h = (n & 16711680) >>> 16;
          t = (n & 65280) >>> 8;
          n &= 255;
          g = d[g] / 255;
          if (g < 0) {
            g = 0;
          }
          if (g > 1) {
            g = 1;
          }
          f.addColorStop(g, "rgba(" + h + ", " + t + ", " + n + ", " + a + ")");
        }
        if (k) {
          za.__pool.release(e);
        }
        return f;
      };
      B.createTempPatternCanvas = function (a, b, c, d) {
        var e = window.document.createElement("canvas");
        var f = e.getContext("2d");
        e.width = c;
        e.height = d;
        a = a.image.get_src();
        f.fillStyle = f.createPattern(a, b ? "repeat" : "no-repeat");
        f.beginPath();
        f.moveTo(0, 0);
        f.lineTo(0, d);
        f.lineTo(c, d);
        f.lineTo(c, 0);
        f.lineTo(0, 0);
        f.closePath();
        if (!B.hitTesting) {
          f.fill(B.windingRule);
        }
        return e;
      };
      B.drawRoundRect = function (a, b, c, d, e, f) {
        if (f == null) {
          f = e;
        }
        e *= 0.5;
        f *= 0.5;
        if (e > c / 2) {
          e = c / 2;
        }
        if (f > d / 2) {
          f = d / 2;
        }
        c = a + c;
        d = b + d;
        var k = -e + e * 0.7071067811865476;
        var h = -e + e * 0.41421356237309503;
        var n = -f + f * 0.7071067811865476;
        var g = -f + f * 0.41421356237309503;
        B.context.moveTo(c, d - f);
        B.context.quadraticCurveTo(c, d + g, c + k, d + n);
        B.context.quadraticCurveTo(c + h, d, c - e, d);
        B.context.lineTo(a + e, d);
        B.context.quadraticCurveTo(a - h, d, a - k, d + n);
        B.context.quadraticCurveTo(a, d + g, a, d - f);
        B.context.lineTo(a, b + f);
        B.context.quadraticCurveTo(a, b - g, a - k, b - n);
        B.context.quadraticCurveTo(a - h, b, a + e, b);
        B.context.lineTo(c - e, b);
        B.context.quadraticCurveTo(c + h, b, c + k, b - n);
        B.context.quadraticCurveTo(c, b - g, c, b + f);
        B.context.lineTo(c, d - f);
      };
      B.endFill = function () {
        B.context.beginPath();
        B.playCommands(B.fillCommands, false);
        B.fillCommands.clear();
      };
      B.endStroke = function () {
        B.context.beginPath();
        B.playCommands(B.strokeCommands, true);
        B.context.closePath();
        B.strokeCommands.clear();
      };
      B.hitTest = function (a, b, c) {
        B.bounds = a.__bounds;
        B.graphics = a;
        if (a.__commands.get_length() == 0 || B.bounds == null || B.bounds.width <= 0 || B.bounds.height <= 0) {
          return false;
        }
        B.hitTesting = true;
        var d = a.__renderTransform;
        var e = b * d.b + c * d.d + d.ty;
        b = b * d.a + c * d.c + d.tx - (B.bounds.x * d.a + B.bounds.y * d.c + d.tx);
        c = e - (B.bounds.x * d.b + B.bounds.y * d.d + d.ty);
        e = a.__canvas;
        var f = a.__context;
        a.__canvas = B.hitTestCanvas;
        a.__context = B.hitTestContext;
        B.context = a.__context;
        B.context.setTransform(d.a, d.b, d.c, d.d, d.tx, d.ty);
        B.fillCommands.clear();
        B.strokeCommands.clear();
        B.hasFill = false;
        B.hasStroke = false;
        B.bitmapFill = null;
        B.bitmapRepeat = false;
        B.windingRule = "evenodd";
        d = new Zf(a.__commands);
        for (var k = 0, h = a.__commands.types; k < h.length;) {
          var n = h[k];
          ++k;
          switch (n._hx_index) {
            case 0:
            case 1:
            case 2:
            case 3:
              B.endFill();
              if (B.hasFill && B.context.isPointInPath(b, c, B.windingRule)) {
                d.destroy();
                a.__canvas = e;
                a.__context = f;
                return true;
              }
              B.endStroke();
              if (B.hasStroke && B.context.isPointInStroke(b, c)) {
                d.destroy();
                a.__canvas = e;
                a.__context = f;
                return true;
              }
              if (n == ra.BEGIN_BITMAP_FILL) {
                switch (d.prev._hx_index) {
                  case 0:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 1:
                    d.iPos += 1;
                    d.fPos += 1;
                    break;
                  case 2:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 3:
                    d.oPos += 1;
                    break;
                  case 4:
                    d.fPos += 6;
                    break;
                  case 5:
                    d.fPos += 4;
                    break;
                  case 6:
                    d.fPos += 3;
                    break;
                  case 7:
                    d.fPos += 4;
                    break;
                  case 8:
                    d.oPos += 3;
                    break;
                  case 9:
                    d.fPos += 4;
                    break;
                  case 10:
                    d.fPos += 5;
                    d.oPos += 1;
                    break;
                  case 12:
                    d.oPos += 4;
                    break;
                  case 14:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 15:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 16:
                    d.oPos += 4;
                    d.iPos += 1;
                    d.fPos += 2;
                    d.bPos += 1;
                    break;
                  case 17:
                    d.fPos += 2;
                    break;
                  case 18:
                    d.fPos += 2;
                    break;
                  case 19:
                    d.oPos += 1;
                    break;
                  case 20:
                    d.oPos += 1;
                }
                d.prev = ra.BEGIN_BITMAP_FILL;
                n = d;
                B.fillCommands.beginBitmapFill(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.b[n.bPos], n.buffer.b[n.bPos + 1]);
                B.strokeCommands.beginBitmapFill(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.b[n.bPos], n.buffer.b[n.bPos + 1]);
              } else if (n == ra.BEGIN_GRADIENT_FILL) {
                switch (d.prev._hx_index) {
                  case 0:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 1:
                    d.iPos += 1;
                    d.fPos += 1;
                    break;
                  case 2:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 3:
                    d.oPos += 1;
                    break;
                  case 4:
                    d.fPos += 6;
                    break;
                  case 5:
                    d.fPos += 4;
                    break;
                  case 6:
                    d.fPos += 3;
                    break;
                  case 7:
                    d.fPos += 4;
                    break;
                  case 8:
                    d.oPos += 3;
                    break;
                  case 9:
                    d.fPos += 4;
                    break;
                  case 10:
                    d.fPos += 5;
                    d.oPos += 1;
                    break;
                  case 12:
                    d.oPos += 4;
                    break;
                  case 14:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 15:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 16:
                    d.oPos += 4;
                    d.iPos += 1;
                    d.fPos += 2;
                    d.bPos += 1;
                    break;
                  case 17:
                    d.fPos += 2;
                    break;
                  case 18:
                    d.fPos += 2;
                    break;
                  case 19:
                    d.oPos += 1;
                    break;
                  case 20:
                    d.oPos += 1;
                }
                d.prev = ra.BEGIN_GRADIENT_FILL;
                n = d;
                B.fillCommands.beginGradientFill(n.buffer.o[n.oPos], n.buffer.ii[n.iiPos], n.buffer.ff[n.ffPos], n.buffer.ii[n.iiPos + 1], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos]);
                B.strokeCommands.beginGradientFill(n.buffer.o[n.oPos], n.buffer.ii[n.iiPos], n.buffer.ff[n.ffPos], n.buffer.ii[n.iiPos + 1], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos]);
              } else if (n == ra.BEGIN_SHADER_FILL) {
                switch (d.prev._hx_index) {
                  case 0:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 1:
                    d.iPos += 1;
                    d.fPos += 1;
                    break;
                  case 2:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 3:
                    d.oPos += 1;
                    break;
                  case 4:
                    d.fPos += 6;
                    break;
                  case 5:
                    d.fPos += 4;
                    break;
                  case 6:
                    d.fPos += 3;
                    break;
                  case 7:
                    d.fPos += 4;
                    break;
                  case 8:
                    d.oPos += 3;
                    break;
                  case 9:
                    d.fPos += 4;
                    break;
                  case 10:
                    d.fPos += 5;
                    d.oPos += 1;
                    break;
                  case 12:
                    d.oPos += 4;
                    break;
                  case 14:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 15:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 16:
                    d.oPos += 4;
                    d.iPos += 1;
                    d.fPos += 2;
                    d.bPos += 1;
                    break;
                  case 17:
                    d.fPos += 2;
                    break;
                  case 18:
                    d.fPos += 2;
                    break;
                  case 19:
                    d.oPos += 1;
                    break;
                  case 20:
                    d.oPos += 1;
                }
                d.prev = ra.BEGIN_SHADER_FILL;
                n = d;
                B.fillCommands.beginShaderFill(n.buffer.o[n.oPos]);
                B.strokeCommands.beginShaderFill(n.buffer.o[n.oPos]);
              } else {
                switch (d.prev._hx_index) {
                  case 0:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 1:
                    d.iPos += 1;
                    d.fPos += 1;
                    break;
                  case 2:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 3:
                    d.oPos += 1;
                    break;
                  case 4:
                    d.fPos += 6;
                    break;
                  case 5:
                    d.fPos += 4;
                    break;
                  case 6:
                    d.fPos += 3;
                    break;
                  case 7:
                    d.fPos += 4;
                    break;
                  case 8:
                    d.oPos += 3;
                    break;
                  case 9:
                    d.fPos += 4;
                    break;
                  case 10:
                    d.fPos += 5;
                    d.oPos += 1;
                    break;
                  case 12:
                    d.oPos += 4;
                    break;
                  case 14:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 15:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 16:
                    d.oPos += 4;
                    d.iPos += 1;
                    d.fPos += 2;
                    d.bPos += 1;
                    break;
                  case 17:
                    d.fPos += 2;
                    break;
                  case 18:
                    d.fPos += 2;
                    break;
                  case 19:
                    d.oPos += 1;
                    break;
                  case 20:
                    d.oPos += 1;
                }
                d.prev = ra.BEGIN_FILL;
                n = d;
                B.fillCommands.beginFill(n.buffer.i[n.iPos], 1);
                B.strokeCommands.beginFill(n.buffer.i[n.iPos], 1);
              }
              break;
            case 4:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = ra.CUBIC_CURVE_TO;
              n = d;
              B.fillCommands.cubicCurveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.f[n.fPos + 5]);
              B.strokeCommands.cubicCurveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.f[n.fPos + 5]);
              break;
            case 5:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = ra.CURVE_TO;
              n = d;
              B.fillCommands.curveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
              B.strokeCommands.curveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
              break;
            case 6:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = ra.DRAW_CIRCLE;
              n = d;
              B.fillCommands.drawCircle(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2]);
              B.strokeCommands.drawCircle(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2]);
              break;
            case 7:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = ra.DRAW_ELLIPSE;
              n = d;
              B.fillCommands.drawEllipse(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
              B.strokeCommands.drawEllipse(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
              break;
            case 9:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = ra.DRAW_RECT;
              n = d;
              B.fillCommands.drawRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
              B.strokeCommands.drawRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
              break;
            case 10:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = ra.DRAW_ROUND_RECT;
              n = d;
              B.fillCommands.drawRoundRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.o[n.oPos]);
              B.strokeCommands.drawRoundRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.o[n.oPos]);
              break;
            case 13:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = ra.END_FILL;
              B.endFill();
              if (B.hasFill && B.context.isPointInPath(b, c, B.windingRule)) {
                d.destroy();
                a.__canvas = e;
                a.__context = f;
                return true;
              }
              B.endStroke();
              if (B.hasStroke && B.context.isPointInStroke(b, c)) {
                d.destroy();
                a.__canvas = e;
                a.__context = f;
                return true;
              }
              B.hasFill = false;
              B.bitmapFill = null;
              break;
            case 14:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = ra.LINE_BITMAP_STYLE;
              n = d;
              B.strokeCommands.lineBitmapStyle(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.b[n.bPos], n.buffer.b[n.bPos + 1]);
              break;
            case 15:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = ra.LINE_GRADIENT_STYLE;
              n = d;
              B.strokeCommands.lineGradientStyle(n.buffer.o[n.oPos], n.buffer.ii[n.iiPos], n.buffer.ff[n.ffPos], n.buffer.ii[n.iiPos + 1], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos]);
              break;
            case 16:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = ra.LINE_STYLE;
              n = d;
              B.strokeCommands.lineStyle(n.buffer.o[n.oPos], n.buffer.i[n.iPos], 1, n.buffer.b[n.bPos], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos + 1]);
              break;
            case 17:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = ra.LINE_TO;
              n = d;
              B.fillCommands.lineTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
              B.strokeCommands.lineTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
              break;
            case 18:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = ra.MOVE_TO;
              n = d;
              B.fillCommands.moveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
              B.strokeCommands.moveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
              break;
            case 21:
              B.windingRule = "evenodd";
              break;
            case 22:
              B.windingRule = "nonzero";
              break;
            default:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = n;
          }
        }
        k = false;
        if (B.fillCommands.get_length() > 0) {
          B.endFill();
        }
        if (B.hasFill && B.context.isPointInPath(b, c, B.windingRule)) {
          k = true;
        }
        if (B.strokeCommands.get_length() > 0) {
          B.endStroke();
        }
        if (B.hasStroke && B.context.isPointInStroke(b, c)) {
          k = true;
        }
        d.destroy();
        a.__canvas = e;
        a.__context = f;
        return k;
      };
      B.normalizeUVT = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = -Infinity;
        for (var d, e = a.get_length(), f = 1, k = e + 1; f < k;) {
          d = f++;
          if (!b || d % 3 != 0) {
            d = a.get(d - 1);
            if (c < d) {
              c = d;
            }
          }
        }
        if (!b) {
          return {
            max: c,
            uvt: a
          };
        }
        var h = ab.toFloatVector(null);
        f = 1;
        for (k = e + 1; f < k;) {
          d = f++;
          if (!b || d % 3 != 0) {
            h.push(a.get(d - 1));
          }
        }
        return {
          max: c,
          uvt: h
        };
      };
      B.playCommands = function (a, b) {
        if (b == null) {
          b = false;
        }
        B.bounds = B.graphics.__bounds;
        var c = B.bounds.x;
        var d = B.bounds.y;
        var e = 0;
        var f = 0;
        var k = false;
        var h = 0;
        var n = 0;
        var g = false;
        B.windingRule = "evenodd";
        B.setSmoothing(true);
        var p = false;
        var l = new Zf(a);
        var m;
        var v;
        var q;
        var u = null;
        var r = null;
        var z = 0;
        var J = a.types;
        a: while (z < J.length) {
          var ba = J[z];
          ++z;
          switch (ba._hx_index) {
            case 0:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.BEGIN_BITMAP_FILL;
              var y = l;
              B.bitmapFill = y.buffer.o[y.oPos];
              B.context.fillStyle = B.createBitmapFill(y.buffer.o[y.oPos], y.buffer.b[y.bPos], y.buffer.b[y.bPos + 1]);
              B.hasFill = true;
              if (y.buffer.o[y.oPos + 1] != null) {
                B.pendingMatrix = y.buffer.o[y.oPos + 1];
                B.inversePendingMatrix = y.buffer.o[y.oPos + 1].clone();
                B.inversePendingMatrix.invert();
              } else {
                B.pendingMatrix = null;
                B.inversePendingMatrix = null;
              }
              break;
            case 1:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.BEGIN_FILL;
              var A = l;
              if (A.buffer.f[A.fPos] < 0.005) {
                B.hasFill = false;
              } else {
                if (A.buffer.f[A.fPos] == 1) {
                  var D = w.hex(A.buffer.i[A.iPos] & 16777215, 6);
                  B.context.fillStyle = "#" + D;
                } else {
                  var C = (A.buffer.i[A.iPos] & 16711680) >>> 16;
                  var x = (A.buffer.i[A.iPos] & 65280) >>> 8;
                  var F = A.buffer.i[A.iPos] & 255;
                  B.context.fillStyle = "rgba(" + C + ", " + x + ", " + F + ", " + A.buffer.f[A.fPos] + ")";
                }
                B.bitmapFill = null;
                B.setSmoothing(true);
                B.hasFill = true;
              }
              break;
            case 2:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.BEGIN_GRADIENT_FILL;
              var G = l;
              B.context.fillStyle = B.createGradientPattern(G.buffer.o[G.oPos], G.buffer.ii[G.iiPos], G.buffer.ff[G.ffPos], G.buffer.ii[G.iiPos + 1], G.buffer.o[G.oPos + 1], G.buffer.o[G.oPos + 2], G.buffer.o[G.oPos + 3], G.buffer.f[G.fPos]);
              B.bitmapFill = null;
              B.setSmoothing(true);
              B.hasFill = true;
              break;
            case 3:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.BEGIN_SHADER_FILL;
              var H = l;
              var la = H.buffer.o[H.oPos];
              if (la.inputCount > 0) {
                B.bitmapFill = la.inputs[0];
                B.context.fillStyle = B.createBitmapFill(B.bitmapFill, la.inputWrap[0] != 0, la.inputFilter[0] != 5);
                B.hasFill = true;
                B.pendingMatrix = null;
                B.inversePendingMatrix = null;
              }
              break;
            case 4:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.CUBIC_CURVE_TO;
              var N = l;
              p = true;
              B.context.bezierCurveTo(N.buffer.f[N.fPos] - c, N.buffer.f[N.fPos + 1] - d, N.buffer.f[N.fPos + 2] - c, N.buffer.f[N.fPos + 3] - d, N.buffer.f[N.fPos + 4] - c, N.buffer.f[N.fPos + 5] - d);
              break;
            case 5:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.CURVE_TO;
              var ha = l;
              p = true;
              B.context.quadraticCurveTo(ha.buffer.f[ha.fPos] - c, ha.buffer.f[ha.fPos + 1] - d, ha.buffer.f[ha.fPos + 2] - c, ha.buffer.f[ha.fPos + 3] - d);
              break;
            case 6:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.DRAW_CIRCLE;
              var ja = l;
              p = true;
              B.context.moveTo(ja.buffer.f[ja.fPos] - c + ja.buffer.f[ja.fPos + 2], ja.buffer.f[ja.fPos + 1] - d);
              B.context.arc(ja.buffer.f[ja.fPos] - c, ja.buffer.f[ja.fPos + 1] - d, ja.buffer.f[ja.fPos + 2], 0, Math.PI * 2, true);
              break;
            case 7:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.DRAW_ELLIPSE;
              var O = l;
              p = true;
              var ia = O.buffer.f[O.fPos];
              var E = O.buffer.f[O.fPos + 1];
              var I = O.buffer.f[O.fPos + 2];
              var P = O.buffer.f[O.fPos + 3];
              ia -= c;
              E -= d;
              var S = I / 2 * 0.5522848;
              var M = P / 2 * 0.5522848;
              var T = ia + I;
              var U = E + P;
              var wa = ia + I / 2;
              var Ab = E + P / 2;
              B.context.moveTo(ia, Ab);
              B.context.bezierCurveTo(ia, Ab - M, wa - S, E, wa, E);
              B.context.bezierCurveTo(wa + S, E, T, Ab - M, T, Ab);
              B.context.bezierCurveTo(T, Ab + M, wa + S, U, wa, U);
              B.context.bezierCurveTo(wa - S, U, ia, Ab + M, ia, Ab);
              break;
            case 8:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.DRAW_QUADS;
              var ea = l;
              var R = ea.buffer.o[ea.oPos];
              var yb = ea.buffer.o[ea.oPos + 1];
              var Q = ea.buffer.o[ea.oPos + 2];
              var Y = yb != null;
              var Z = false;
              var aa = false;
              var ca = Y ? yb.get_length() : Math.floor(R.get_length() / 4);
              if (ca == 0) {
                return;
              }
              if (Q != null) {
                if (Q.get_length() >= ca * 6) {
                  aa = Z = true;
                } else if (Q.get_length() >= ca * 4) {
                  Z = true;
                } else if (Q.get_length() >= ca * 2) {
                  aa = true;
                }
              }
              var pa = da.__pool.get();
              var W = za.__pool.get();
              var fa = B.graphics.__renderTransform;
              B.context.save();
              for (var ka = 0, Ca = ca; ka < Ca;) {
                var Bc = ka++;
                var ma = Y ? yb.get(Bc) * 4 : Bc * 4;
                if (!(ma < 0) && !(pa.setTo(R.get(ma), R.get(ma + 1), R.get(ma + 2), R.get(ma + 3)), pa.width <= 0 || pa.height <= 0)) {
                  if (Z && aa) {
                    var X = Bc * 6;
                    W.setTo(Q.get(X), Q.get(X + 1), Q.get(X + 2), Q.get(X + 3), Q.get(X + 4), Q.get(X + 5));
                  } else if (Z) {
                    X = Bc * 4;
                    W.setTo(Q.get(X), Q.get(X + 1), Q.get(X + 2), Q.get(X + 3), pa.x, pa.y);
                  } else if (aa) {
                    X = Bc * 2;
                    W.tx = Q.get(X);
                    W.ty = Q.get(X + 1);
                  } else {
                    W.tx = pa.x;
                    W.ty = pa.y;
                  }
                  W.tx += e - c;
                  W.ty += f - d;
                  W.concat(fa);
                  B.context.setTransform(W.a, W.b, W.c, W.d, W.tx, W.ty);
                  if (B.bitmapFill != null) {
                    B.context.drawImage(B.bitmapFill.image.get_src(), pa.x, pa.y, pa.width, pa.height, 0, 0, pa.width, pa.height);
                  } else {
                    B.context.fillRect(0, 0, pa.width, pa.height);
                  }
                }
              }
              da.__pool.release(pa);
              za.__pool.release(W);
              B.context.restore();
              break;
            case 9:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.DRAW_RECT;
              var V = l;
              var oa = false;
              if (B.bitmapFill != null && !B.hitTesting) {
                var mb = q = v = m = 0;
                var Ba = true;
                if (B.pendingMatrix != null) {
                  if (B.pendingMatrix.b != 0 || B.pendingMatrix.c != 0) {
                    Ba = false;
                  } else {
                    if (u == null) {
                      u = lb.__pool.get();
                    }
                    if (r == null) {
                      r = lb.__pool.get();
                    }
                    u.setTo(V.buffer.f[V.fPos], V.buffer.f[V.fPos + 1]);
                    var qa = B.inversePendingMatrix;
                    var gb = u.x;
                    var sa = u.y;
                    u.x = gb * qa.a + sa * qa.c + qa.tx;
                    u.y = gb * qa.b + sa * qa.d + qa.ty;
                    r.setTo(V.buffer.f[V.fPos] + V.buffer.f[V.fPos + 2], V.buffer.f[V.fPos + 1] + V.buffer.f[V.fPos + 3]);
                    var na = B.inversePendingMatrix;
                    var ue = r.x;
                    var va = r.y;
                    r.x = ue * na.a + va * na.c + na.tx;
                    r.y = ue * na.b + va * na.d + na.ty;
                    m = u.y;
                    mb = u.x;
                    q = r.y;
                    v = r.x;
                  }
                } else {
                  m = V.buffer.f[V.fPos + 1];
                  mb = V.buffer.f[V.fPos];
                  q = V.buffer.f[V.fPos + 1] + V.buffer.f[V.fPos + 3];
                  v = V.buffer.f[V.fPos] + V.buffer.f[V.fPos + 2];
                }
                if (Ba && m >= 0 && mb >= 0 && v <= B.bitmapFill.width && q <= B.bitmapFill.height) {
                  oa = true;
                  if (!B.hitTesting) {
                    B.context.drawImage(B.bitmapFill.image.get_src(), mb, m, v - mb, q - m, V.buffer.f[V.fPos] - c, V.buffer.f[V.fPos + 1] - d, V.buffer.f[V.fPos + 2], V.buffer.f[V.fPos + 3]);
                  }
                }
              }
              if (!oa) {
                p = true;
                B.context.rect(V.buffer.f[V.fPos] - c, V.buffer.f[V.fPos + 1] - d, V.buffer.f[V.fPos + 2], V.buffer.f[V.fPos + 3]);
              }
              break;
            case 10:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.DRAW_ROUND_RECT;
              var jb = l;
              p = true;
              B.drawRoundRect(jb.buffer.f[jb.fPos] - c, jb.buffer.f[jb.fPos + 1] - d, jb.buffer.f[jb.fPos + 2], jb.buffer.f[jb.fPos + 3], jb.buffer.f[jb.fPos + 4], jb.buffer.o[jb.oPos]);
              break;
            case 12:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.DRAW_TRIANGLES;
              var ta = l;
              var Aa = ta.buffer.o[ta.oPos];
              var Ua = ta.buffer.o[ta.oPos + 1];
              var ua = ta.buffer.o[ta.oPos + 2];
              var xa = null;
              var Da = B.bitmapFill == null;
              if (Da && ua != null) {
                break a;
              }
              if (!Da) {
                if (ua == null) {
                  ua = ab.toFloatVector(null);
                  for (var Ea = 0, Ha = Aa.get_length() / 2 | 0; Ea < Ha;) {
                    var Ga = Ea++;
                    ua.push(Aa.get(Ga * 2) - c / B.bitmapFill.width);
                    ua.push(Aa.get(Ga * 2 + 1) - d / B.bitmapFill.height);
                  }
                }
                var Ia = ua.get_length() != Aa.get_length();
                var Ja = B.normalizeUVT(ua, Ia);
                var Ka = Ja.max;
                ua = Ja.uvt;
                xa = Ka > 1 ? B.createTempPatternCanvas(B.bitmapFill, B.bitmapRepeat, B.bounds.width | 0, B.bounds.height | 0) : B.createTempPatternCanvas(B.bitmapFill, B.bitmapRepeat, B.bitmapFill.width, B.bitmapFill.height);
              }
              for (var Fa = 0, Pa = Ua.get_length(), Ma, Na, Oa, Qa, Ra, Ta, kc, Ya, rb, Sa, Va, Wa, Xa, Za, $a, bb, fb, cb, db, eb, Ic, hb, nb, ob, pb, sb, tb, ub; Fa < Pa;) {
                Ma = Fa;
                Na = Fa + 1;
                Oa = Fa + 2;
                Qa = Ua.get(Ma) * 2;
                Ra = Ua.get(Ma) * 2 + 1;
                Ta = Ua.get(Na) * 2;
                kc = Ua.get(Na) * 2 + 1;
                Ya = Ua.get(Oa) * 2;
                rb = Ua.get(Oa) * 2 + 1;
                Sa = Aa.get(Qa) - c;
                Va = Aa.get(Ra) - d;
                Wa = Aa.get(Ta) - c;
                Xa = Aa.get(kc) - d;
                Za = Aa.get(Ya) - c;
                $a = Aa.get(rb) - d;
                switch (ta.buffer.o[ta.oPos + 3]) {
                  case 0:
                    if ((Wa - Sa) * ($a - Va) - (Xa - Va) * (Za - Sa) < 0) {
                      Fa += 3;
                      continue;
                    }
                    break;
                  case 2:
                    if (!((Wa - Sa) * ($a - Va) - (Xa - Va) * (Za - Sa) < 0)) {
                      Fa += 3;
                      continue;
                    }
                }
                if (Da) {
                  B.context.beginPath();
                  B.context.moveTo(Sa, Va);
                  B.context.lineTo(Wa, Xa);
                  B.context.lineTo(Za, $a);
                  B.context.closePath();
                  if (!B.hitTesting) {
                    B.context.fill(B.windingRule);
                  }
                  Fa += 3;
                } else {
                  bb = ua.get(Qa) * xa.width;
                  cb = ua.get(Ta) * xa.width;
                  eb = ua.get(Ya) * xa.width;
                  fb = ua.get(Ra) * xa.height;
                  db = ua.get(kc) * xa.height;
                  Ic = ua.get(rb) * xa.height;
                  hb = bb * (Ic - db) - cb * Ic + eb * db + (cb - eb) * fb;
                  if (hb == 0) {
                    Fa += 3;
                    B.context.restore();
                  } else {
                    B.context.save();
                    B.context.beginPath();
                    B.context.moveTo(Sa, Va);
                    B.context.lineTo(Wa, Xa);
                    B.context.lineTo(Za, $a);
                    B.context.closePath();
                    B.context.clip();
                    nb = -(fb * (Za - Wa) - db * Za + Ic * Wa + (db - Ic) * Sa) / hb;
                    ob = (db * $a + fb * (Xa - $a) - Ic * Xa + (Ic - db) * Va) / hb;
                    pb = (bb * (Za - Wa) - cb * Za + eb * Wa + (cb - eb) * Sa) / hb;
                    sb = -(cb * $a + bb * (Xa - $a) - eb * Xa + (eb - cb) * Va) / hb;
                    tb = (bb * (Ic * Wa - db * Za) + fb * (cb * Za - eb * Wa) + (eb * db - cb * Ic) * Sa) / hb;
                    ub = (bb * (Ic * Xa - db * $a) + fb * (cb * $a - eb * Xa) + (eb * db - cb * Ic) * Va) / hb;
                    B.context.transform(nb, ob, pb, sb, tb, ub);
                    B.context.drawImage(xa, 0, 0, xa.width, xa.height);
                    B.context.restore();
                    Fa += 3;
                  }
                }
              }
              break;
            case 14:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.LINE_BITMAP_STYLE;
              var qb = l;
              if (b && B.hasStroke) {
                B.closePath(true);
              }
              B.context.moveTo(e - c, f - d);
              B.context.strokeStyle = B.createBitmapFill(qb.buffer.o[qb.oPos], qb.buffer.b[qb.bPos], qb.buffer.b[qb.bPos + 1]);
              B.hasStroke = true;
              break;
            case 15:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.LINE_GRADIENT_STYLE;
              var ib = l;
              if (b && B.hasStroke) {
                B.closePath(true);
              }
              B.context.moveTo(e - c, f - d);
              B.context.strokeStyle = B.createGradientPattern(ib.buffer.o[ib.oPos], ib.buffer.ii[ib.iiPos], ib.buffer.ff[ib.ffPos], ib.buffer.ii[ib.iiPos + 1], ib.buffer.o[ib.oPos + 1], ib.buffer.o[ib.oPos + 2], ib.buffer.o[ib.oPos + 3], ib.buffer.f[ib.fPos]);
              B.setSmoothing(true);
              B.hasStroke = true;
              break;
            case 16:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.LINE_STYLE;
              var La = l;
              if (b && B.hasStroke) {
                B.closePath(true);
              }
              B.context.moveTo(e - c, f - d);
              if (La.buffer.o[La.oPos] == null) {
                B.hasStroke = false;
              } else {
                B.context.lineWidth = La.buffer.o[La.oPos] > 0 ? La.buffer.o[La.oPos] : 1;
                var wb = La.buffer.o[La.oPos + 3] == null ? "round" : (La.buffer.o[La.oPos + 3] == null ? "null" : Rp.toString(La.buffer.o[La.oPos + 3])).toLowerCase();
                B.context.lineJoin = wb;
                var xb = La.buffer.o[La.oPos + 2] == null ? "round" : La.buffer.o[La.oPos + 2] == 0 ? "butt" : (La.buffer.o[La.oPos + 2] == null ? "null" : Qp.toString(La.buffer.o[La.oPos + 2])).toLowerCase();
                B.context.lineCap = xb;
                B.context.miterLimit = La.buffer.f[La.fPos + 1];
                if (La.buffer.f[La.fPos] == 1) {
                  var zb = w.hex(La.buffer.i[La.iPos] & 16777215, 6);
                  B.context.strokeStyle = "#" + zb;
                } else {
                  C = (La.buffer.i[La.iPos] & 16711680) >>> 16;
                  x = (La.buffer.i[La.iPos] & 65280) >>> 8;
                  F = La.buffer.i[La.iPos] & 255;
                  B.context.strokeStyle = "rgba(" + C + ", " + x + ", " + F + ", " + La.buffer.f[La.fPos] + ")";
                }
                B.setSmoothing(true);
                B.hasStroke = true;
              }
              break;
            case 17:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.LINE_TO;
              var vb = l;
              p = true;
              B.context.lineTo(vb.buffer.f[vb.fPos] - c, vb.buffer.f[vb.fPos + 1] - d);
              e = vb.buffer.f[vb.fPos];
              f = vb.buffer.f[vb.fPos + 1];
              if (e == h && f == n) {
                k = true;
              }
              break;
            case 18:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ra.MOVE_TO;
              var kb = l;
              B.context.moveTo(kb.buffer.f[kb.fPos] - c, kb.buffer.f[kb.fPos + 1] - d);
              e = kb.buffer.f[kb.fPos];
              f = kb.buffer.f[kb.fPos + 1];
              if (g && kb.buffer.f[kb.fPos] != h && kb.buffer.f[kb.fPos + 1] != n) {
                k = true;
              }
              h = kb.buffer.f[kb.fPos];
              n = kb.buffer.f[kb.fPos + 1];
              g = true;
              break;
            case 21:
              B.windingRule = "evenodd";
              break;
            case 22:
              B.windingRule = "nonzero";
              break;
            default:
              switch (l.prev._hx_index) {
                case 0:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 1:
                  l.iPos += 1;
                  l.fPos += 1;
                  break;
                case 2:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 3:
                  l.oPos += 1;
                  break;
                case 4:
                  l.fPos += 6;
                  break;
                case 5:
                  l.fPos += 4;
                  break;
                case 6:
                  l.fPos += 3;
                  break;
                case 7:
                  l.fPos += 4;
                  break;
                case 8:
                  l.oPos += 3;
                  break;
                case 9:
                  l.fPos += 4;
                  break;
                case 10:
                  l.fPos += 5;
                  l.oPos += 1;
                  break;
                case 12:
                  l.oPos += 4;
                  break;
                case 14:
                  l.oPos += 2;
                  l.bPos += 2;
                  break;
                case 15:
                  l.oPos += 4;
                  l.iiPos += 2;
                  l.ffPos += 1;
                  l.fPos += 1;
                  break;
                case 16:
                  l.oPos += 4;
                  l.iPos += 1;
                  l.fPos += 2;
                  l.bPos += 1;
                  break;
                case 17:
                  l.fPos += 2;
                  break;
                case 18:
                  l.fPos += 2;
                  break;
                case 19:
                  l.oPos += 1;
                  break;
                case 20:
                  l.oPos += 1;
              }
              l.prev = ba;
          }
        }
        if (u != null) {
          lb.__pool.release(u);
        }
        if (r != null) {
          lb.__pool.release(r);
        }
        l.destroy();
        if (p) {
          if (b && B.hasStroke) {
            if (B.hasFill) {
              if (e != h || f != n) {
                B.context.lineTo(h - c, n - d);
                k = true;
              }
              if (k) {
                B.closePath(true);
              }
            } else if (k && e == h && f == n) {
              B.closePath(true);
            }
            if (!B.hitTesting) {
              B.context.stroke();
            }
          }
          if (!b && (!!B.hasFill || B.bitmapFill != null)) {
            B.context.translate(-B.bounds.x, -B.bounds.y);
            if (B.pendingMatrix != null) {
              B.context.transform(B.pendingMatrix.a, B.pendingMatrix.b, B.pendingMatrix.c, B.pendingMatrix.d, B.pendingMatrix.tx, B.pendingMatrix.ty);
              if (!B.hitTesting) {
                B.context.fill(B.windingRule);
              }
              B.context.transform(B.inversePendingMatrix.a, B.inversePendingMatrix.b, B.inversePendingMatrix.c, B.inversePendingMatrix.d, B.inversePendingMatrix.tx, B.inversePendingMatrix.ty);
            } else if (!B.hitTesting) {
              B.context.fill(B.windingRule);
            }
            B.context.translate(B.bounds.x, B.bounds.y);
            B.context.closePath();
          }
        }
      };
      B.render = function (a, b) {
        a.__update(b.__worldTransform, b.__pixelRatio);
        if (a.__softwareDirty) {
          B.hitTesting = false;
          B.graphics = a;
          B.allowSmoothing = b.__allowSmoothing;
          B.worldAlpha = b.__getAlpha(a.__owner.__worldAlpha);
          B.bounds = a.__bounds;
          var c = a.__width;
          var d = a.__height;
          if (!a.__visible || a.__commands.get_length() == 0 || B.bounds == null || c < 1 || d < 1) {
            a.__canvas = null;
            a.__context = null;
            a.__bitmap = null;
          } else {
            if (a.__canvas == null) {
              a.__canvas = window.document.createElement("canvas");
              a.__context = a.__canvas.getContext("2d");
            }
            B.context = a.__context;
            var e = a.__renderTransform;
            var f = a.__canvas;
            var k = b.__pixelRatio;
            var h = c * k | 0;
            var n = d * k | 0;
            b.__setBlendModeContext(B.context, 10);
            if (b.__isDOM) {
              if (f.width == h && f.height == n) {
                B.context.clearRect(0, 0, h, n);
              } else {
                f.width = h;
                f.height = n;
                f.style.width = c + "px";
                f.style.height = d + "px";
              }
              c = a.__renderTransform;
              B.context.setTransform(c.a * k, c.b * k, c.c * k, c.d * k, c.tx * k, c.ty * k);
            } else {
              if (f.width == h && f.height == n) {
                B.context.closePath();
                B.context.setTransform(1, 0, 0, 1, 0, 0);
                B.context.clearRect(0, 0, h, n);
              } else {
                f.width = c;
                f.height = d;
              }
              B.context.setTransform(e.a, e.b, e.c, e.d, e.tx, e.ty);
            }
            B.fillCommands.clear();
            B.strokeCommands.clear();
            B.hasFill = false;
            B.hasStroke = false;
            B.bitmapFill = null;
            k = B.bitmapRepeat = false;
            d = c = 0;
            B.windingRule = "evenodd";
            e = new Zf(a.__commands);
            f = 0;
            for (h = a.__commands.types; f < h.length;) {
              n = h[f];
              ++f;
              switch (n._hx_index) {
                case 0:
                case 1:
                case 2:
                case 3:
                  B.endFill();
                  B.endStroke();
                  if (n == ra.BEGIN_BITMAP_FILL) {
                    switch (e.prev._hx_index) {
                      case 0:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 1:
                        e.iPos += 1;
                        e.fPos += 1;
                        break;
                      case 2:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 3:
                        e.oPos += 1;
                        break;
                      case 4:
                        e.fPos += 6;
                        break;
                      case 5:
                        e.fPos += 4;
                        break;
                      case 6:
                        e.fPos += 3;
                        break;
                      case 7:
                        e.fPos += 4;
                        break;
                      case 8:
                        e.oPos += 3;
                        break;
                      case 9:
                        e.fPos += 4;
                        break;
                      case 10:
                        e.fPos += 5;
                        e.oPos += 1;
                        break;
                      case 12:
                        e.oPos += 4;
                        break;
                      case 14:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 15:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 16:
                        e.oPos += 4;
                        e.iPos += 1;
                        e.fPos += 2;
                        e.bPos += 1;
                        break;
                      case 17:
                        e.fPos += 2;
                        break;
                      case 18:
                        e.fPos += 2;
                        break;
                      case 19:
                        e.oPos += 1;
                        break;
                      case 20:
                        e.oPos += 1;
                    }
                    e.prev = ra.BEGIN_BITMAP_FILL;
                    n = e;
                    B.fillCommands.beginBitmapFill(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.b[n.bPos], n.buffer.b[n.bPos + 1]);
                    B.strokeCommands.beginBitmapFill(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.b[n.bPos], n.buffer.b[n.bPos + 1]);
                  } else if (n == ra.BEGIN_GRADIENT_FILL) {
                    switch (e.prev._hx_index) {
                      case 0:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 1:
                        e.iPos += 1;
                        e.fPos += 1;
                        break;
                      case 2:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 3:
                        e.oPos += 1;
                        break;
                      case 4:
                        e.fPos += 6;
                        break;
                      case 5:
                        e.fPos += 4;
                        break;
                      case 6:
                        e.fPos += 3;
                        break;
                      case 7:
                        e.fPos += 4;
                        break;
                      case 8:
                        e.oPos += 3;
                        break;
                      case 9:
                        e.fPos += 4;
                        break;
                      case 10:
                        e.fPos += 5;
                        e.oPos += 1;
                        break;
                      case 12:
                        e.oPos += 4;
                        break;
                      case 14:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 15:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 16:
                        e.oPos += 4;
                        e.iPos += 1;
                        e.fPos += 2;
                        e.bPos += 1;
                        break;
                      case 17:
                        e.fPos += 2;
                        break;
                      case 18:
                        e.fPos += 2;
                        break;
                      case 19:
                        e.oPos += 1;
                        break;
                      case 20:
                        e.oPos += 1;
                    }
                    e.prev = ra.BEGIN_GRADIENT_FILL;
                    n = e;
                    B.fillCommands.beginGradientFill(n.buffer.o[n.oPos], n.buffer.ii[n.iiPos], n.buffer.ff[n.ffPos], n.buffer.ii[n.iiPos + 1], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos]);
                    B.strokeCommands.beginGradientFill(n.buffer.o[n.oPos], n.buffer.ii[n.iiPos], n.buffer.ff[n.ffPos], n.buffer.ii[n.iiPos + 1], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos]);
                  } else if (n == ra.BEGIN_SHADER_FILL) {
                    switch (e.prev._hx_index) {
                      case 0:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 1:
                        e.iPos += 1;
                        e.fPos += 1;
                        break;
                      case 2:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 3:
                        e.oPos += 1;
                        break;
                      case 4:
                        e.fPos += 6;
                        break;
                      case 5:
                        e.fPos += 4;
                        break;
                      case 6:
                        e.fPos += 3;
                        break;
                      case 7:
                        e.fPos += 4;
                        break;
                      case 8:
                        e.oPos += 3;
                        break;
                      case 9:
                        e.fPos += 4;
                        break;
                      case 10:
                        e.fPos += 5;
                        e.oPos += 1;
                        break;
                      case 12:
                        e.oPos += 4;
                        break;
                      case 14:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 15:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 16:
                        e.oPos += 4;
                        e.iPos += 1;
                        e.fPos += 2;
                        e.bPos += 1;
                        break;
                      case 17:
                        e.fPos += 2;
                        break;
                      case 18:
                        e.fPos += 2;
                        break;
                      case 19:
                        e.oPos += 1;
                        break;
                      case 20:
                        e.oPos += 1;
                    }
                    e.prev = ra.BEGIN_SHADER_FILL;
                    n = e;
                    B.fillCommands.beginShaderFill(n.buffer.o[n.oPos]);
                    B.strokeCommands.beginShaderFill(n.buffer.o[n.oPos]);
                  } else {
                    switch (e.prev._hx_index) {
                      case 0:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 1:
                        e.iPos += 1;
                        e.fPos += 1;
                        break;
                      case 2:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 3:
                        e.oPos += 1;
                        break;
                      case 4:
                        e.fPos += 6;
                        break;
                      case 5:
                        e.fPos += 4;
                        break;
                      case 6:
                        e.fPos += 3;
                        break;
                      case 7:
                        e.fPos += 4;
                        break;
                      case 8:
                        e.oPos += 3;
                        break;
                      case 9:
                        e.fPos += 4;
                        break;
                      case 10:
                        e.fPos += 5;
                        e.oPos += 1;
                        break;
                      case 12:
                        e.oPos += 4;
                        break;
                      case 14:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 15:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 16:
                        e.oPos += 4;
                        e.iPos += 1;
                        e.fPos += 2;
                        e.bPos += 1;
                        break;
                      case 17:
                        e.fPos += 2;
                        break;
                      case 18:
                        e.fPos += 2;
                        break;
                      case 19:
                        e.oPos += 1;
                        break;
                      case 20:
                        e.oPos += 1;
                    }
                    e.prev = ra.BEGIN_FILL;
                    n = e;
                    B.fillCommands.beginFill(n.buffer.i[n.iPos], n.buffer.f[n.fPos]);
                    B.strokeCommands.beginFill(n.buffer.i[n.iPos], n.buffer.f[n.fPos]);
                  }
                  break;
                case 4:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.CUBIC_CURVE_TO;
                  n = e;
                  B.fillCommands.cubicCurveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.f[n.fPos + 5]);
                  if (k) {
                    B.strokeCommands.cubicCurveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.f[n.fPos + 5]);
                  } else {
                    c = n.buffer.f[n.fPos + 4];
                    d = n.buffer.f[n.fPos + 5];
                  }
                  break;
                case 5:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.CURVE_TO;
                  n = e;
                  B.fillCommands.curveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
                  if (k) {
                    B.strokeCommands.curveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
                  } else {
                    c = n.buffer.f[n.fPos + 2];
                    d = n.buffer.f[n.fPos + 3];
                  }
                  break;
                case 6:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.DRAW_CIRCLE;
                  n = e;
                  B.fillCommands.drawCircle(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2]);
                  if (k) {
                    B.strokeCommands.drawCircle(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2]);
                  }
                  break;
                case 7:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.DRAW_ELLIPSE;
                  n = e;
                  B.fillCommands.drawEllipse(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
                  if (k) {
                    B.strokeCommands.drawEllipse(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
                  }
                  break;
                case 8:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.DRAW_QUADS;
                  n = e;
                  B.fillCommands.drawQuads(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2]);
                  break;
                case 9:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.DRAW_RECT;
                  n = e;
                  B.fillCommands.drawRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
                  if (k) {
                    B.strokeCommands.drawRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3]);
                  }
                  break;
                case 10:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.DRAW_ROUND_RECT;
                  n = e;
                  B.fillCommands.drawRoundRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.o[n.oPos]);
                  if (k) {
                    B.strokeCommands.drawRoundRect(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1], n.buffer.f[n.fPos + 2], n.buffer.f[n.fPos + 3], n.buffer.f[n.fPos + 4], n.buffer.o[n.oPos]);
                  }
                  break;
                case 12:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.DRAW_TRIANGLES;
                  n = e;
                  B.fillCommands.drawTriangles(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3]);
                  break;
                case 13:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.END_FILL;
                  B.endFill();
                  B.endStroke();
                  k = B.hasFill = false;
                  B.bitmapFill = null;
                  d = c = 0;
                  break;
                case 14:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.LINE_BITMAP_STYLE;
                  n = e;
                  if (!k && (c != 0 || d != 0)) {
                    B.strokeCommands.moveTo(c, d);
                    d = c = 0;
                  }
                  k = true;
                  B.strokeCommands.lineBitmapStyle(n.buffer.o[n.oPos], n.buffer.o[n.oPos + 1], n.buffer.b[n.bPos], n.buffer.b[n.bPos + 1]);
                  break;
                case 15:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.LINE_GRADIENT_STYLE;
                  n = e;
                  if (!k && (c != 0 || d != 0)) {
                    B.strokeCommands.moveTo(c, d);
                    d = c = 0;
                  }
                  k = true;
                  B.strokeCommands.lineGradientStyle(n.buffer.o[n.oPos], n.buffer.ii[n.iiPos], n.buffer.ff[n.ffPos], n.buffer.ii[n.iiPos + 1], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos]);
                  break;
                case 16:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.LINE_STYLE;
                  n = e;
                  if (!k && n.buffer.o[n.oPos] != null && (c != 0 || d != 0)) {
                    B.strokeCommands.moveTo(c, d);
                    d = c = 0;
                  }
                  k = n.buffer.o[n.oPos] != null;
                  B.strokeCommands.lineStyle(n.buffer.o[n.oPos], n.buffer.i[n.iPos], n.buffer.f[n.fPos], n.buffer.b[n.bPos], n.buffer.o[n.oPos + 1], n.buffer.o[n.oPos + 2], n.buffer.o[n.oPos + 3], n.buffer.f[n.fPos + 1]);
                  break;
                case 17:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.LINE_TO;
                  n = e;
                  B.fillCommands.lineTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
                  if (k) {
                    B.strokeCommands.lineTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
                  } else {
                    c = n.buffer.f[n.fPos];
                    d = n.buffer.f[n.fPos + 1];
                  }
                  break;
                case 18:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.MOVE_TO;
                  n = e;
                  B.fillCommands.moveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
                  if (k) {
                    B.strokeCommands.moveTo(n.buffer.f[n.fPos], n.buffer.f[n.fPos + 1]);
                  } else {
                    c = n.buffer.f[n.fPos];
                    d = n.buffer.f[n.fPos + 1];
                  }
                  break;
                case 19:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.OVERRIDE_BLEND_MODE;
                  n = e;
                  b.__setBlendModeContext(B.context, n.buffer.o[n.oPos]);
                  break;
                case 21:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.WINDING_EVEN_ODD;
                  B.fillCommands.windingEvenOdd();
                  B.windingRule = "evenodd";
                  break;
                case 22:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = ra.WINDING_NON_ZERO;
                  B.fillCommands.windingNonZero();
                  B.windingRule = "nonzero";
                  break;
                default:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = n;
              }
            }
            if (B.fillCommands.get_length() > 0) {
              B.endFill();
            }
            if (B.strokeCommands.get_length() > 0) {
              B.endStroke();
            }
            e.destroy();
            a.__bitmap = T.fromCanvas(a.__canvas);
          }
          a.__softwareDirty = false;
          a.set___dirty(false);
        }
      };
      B.renderMask = function (a, b) {
        if (a.__commands.get_length() != 0) {
          B.context = b.context;
          b = new Zf(a.__commands);
          var c = 0;
          for (a = a.__commands.types; c < a.length;) {
            var d = a[c];
            ++c;
            switch (d._hx_index) {
              case 4:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = ra.CUBIC_CURVE_TO;
                d = b;
                B.context.bezierCurveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2] - 0, d.buffer.f[d.fPos + 3] - 0, d.buffer.f[d.fPos + 4] - 0, d.buffer.f[d.fPos + 5] - 0);
                break;
              case 5:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = ra.CURVE_TO;
                d = b;
                B.context.quadraticCurveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2] - 0, d.buffer.f[d.fPos + 3] - 0);
                break;
              case 6:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = ra.DRAW_CIRCLE;
                d = b;
                B.context.arc(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], 0, Math.PI * 2, true);
                break;
              case 7:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = ra.DRAW_ELLIPSE;
                var e = b;
                d = e.buffer.f[e.fPos];
                var f = e.buffer.f[e.fPos + 1];
                var k = e.buffer.f[e.fPos + 2];
                var h = e.buffer.f[e.fPos + 3];
                d -= 0;
                f -= 0;
                e = k / 2 * 0.5522848;
                var n = h / 2 * 0.5522848;
                var g = d + k;
                var p = f + h;
                k = d + k / 2;
                h = f + h / 2;
                B.context.moveTo(d, h);
                B.context.bezierCurveTo(d, h - n, k - e, f, k, f);
                B.context.bezierCurveTo(k + e, f, g, h - n, g, h);
                B.context.bezierCurveTo(g, h + n, k + e, p, k, p);
                B.context.bezierCurveTo(k - e, p, d, h + n, d, h);
                break;
              case 9:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = ra.DRAW_RECT;
                d = b;
                B.context.beginPath();
                B.context.rect(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3]);
                B.context.closePath();
                break;
              case 10:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = ra.DRAW_ROUND_RECT;
                d = b;
                B.drawRoundRect(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3], d.buffer.f[d.fPos + 4], d.buffer.o[d.oPos]);
                break;
              case 17:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = ra.LINE_TO;
                d = b;
                B.context.lineTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0);
                break;
              case 18:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = ra.MOVE_TO;
                d = b;
                B.context.moveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0);
                break;
              default:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = d;
            }
          }
          b.destroy();
        }
      };
      B.setSmoothing = function (a) {
        if (!B.allowSmoothing) {
          a = false;
        }
        if (B.context.imageSmoothingEnabled != a) {
          B.context.imageSmoothingEnabled = a;
        }
      };
      function mm() {}
      g["openfl.display._internal.CanvasSimpleButton"] = mm;
      mm.__name__ = "openfl.display._internal.CanvasSimpleButton";
      mm.renderDrawable = function (a, b) {
        if (!!a.__renderable && !(a.__worldAlpha <= 0) && a.__currentState != null) {
          b.__pushMaskObject(a);
          b.__renderDrawable(a.__currentState);
          b.__popMaskObject(a);
          b.__renderEvent(a);
        }
      };
      mm.renderDrawableMask = function (a, b) {
        b.__renderDrawableMask(a.__currentState);
      };
      function aa() {}
      g["openfl.display._internal.CanvasTextField"] = aa;
      aa.__name__ = "openfl.display._internal.CanvasTextField";
      aa.renderDrawable = function (a, b) {
        if (b.__isDOM && !a.__renderedOnCanvasWhileOnDOM) {
          a.__renderedOnCanvasWhileOnDOM = true;
          if (a.get_type() == 1) {
            a.replaceText(0, a.__text.length, a.__text);
          }
          if (a.__isHTML) {
            a.__updateText(Wa.parse(a.__text, a.get_multiline(), a.__styleSheet, a.__textFormat, a.__textEngine.textFormatRanges));
          }
          a.__dirty = true;
          a.__layoutDirty = true;
          if (!a.__renderDirty) {
            a.__renderDirty = true;
            a.__setParentRenderDirty();
          }
        }
        if (a.get_mask() == null || a.get_mask().get_width() > 0 && a.get_mask().get_height() > 0) {
          b.__updateCacheBitmap(a, a.__dirty);
          if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
            var c = a.__textEngine;
            var d = !c.background && !c.border;
            var e = d ? c.textBounds : c.bounds;
            var f = a.__graphics;
            var k = 0;
            if (a.__dirty) {
              a.__updateLayout();
              if (f.__bounds == null) {
                f.__bounds = new da();
              }
              if (a.get_text().length == 0) {
                var h = c.bounds.width - 4;
                var n = a.get_defaultTextFormat().align;
                k = n == 3 ? 0 : n == 4 ? h : h / 2;
                switch (n) {
                  case 0:
                    k += a.get_defaultTextFormat().leftMargin / 2;
                    k -= a.get_defaultTextFormat().rightMargin / 2;
                    k += a.get_defaultTextFormat().indent / 2;
                    k += a.get_defaultTextFormat().blockIndent / 2;
                    break;
                  case 2:
                    k += a.get_defaultTextFormat().leftMargin;
                    k += a.get_defaultTextFormat().indent;
                    k += a.get_defaultTextFormat().blockIndent;
                    break;
                  case 3:
                    k += a.get_defaultTextFormat().leftMargin;
                    k += a.get_defaultTextFormat().indent;
                    k += a.get_defaultTextFormat().blockIndent;
                    break;
                  case 4:
                    k -= a.get_defaultTextFormat().rightMargin;
                }
                if (d) {
                  e.y = c.bounds.y;
                  e.x = k;
                }
              }
              f.__bounds.copyFrom(e);
            }
            n = b.__pixelRatio;
            f.__update(b.__worldTransform, n);
            if (a.__dirty || f.__softwareDirty) {
              h = Math.round(f.__width * n);
              var g = Math.round(f.__height * n);
              if ((c.text == null || c.text == "") && !c.background && !c.border && !c.__hasFocus && (c.type != 1 || !c.selectable) || (c.width <= 0 || c.height <= 0) && c.autoSize != 2) {
                a.__graphics.__canvas = null;
                a.__graphics.__context = null;
                a.__graphics.__bitmap = null;
                a.__graphics.__softwareDirty = false;
                a.__graphics.set___dirty(false);
                a.__dirty = false;
              } else {
                if (a.__graphics.__canvas == null) {
                  a.__graphics.__canvas = window.document.createElement("canvas");
                  a.__graphics.__context = a.__graphics.__canvas.getContext("2d");
                }
                aa.context = f.__context;
                f.__canvas.width = h;
                f.__canvas.height = g;
                if (b.__isDOM) {
                  f.__canvas.style.width = Math.round(h / n) + "px";
                  f.__canvas.style.height = Math.round(g / n) + "px";
                }
                var p = za.__pool.get();
                p.scale(n, n);
                p.concat(f.__renderTransform);
                aa.context.setTransform(p.a, p.b, p.c, p.d, p.tx, p.ty);
                za.__pool.release(p);
                if (aa.clearRect == null) {
                  aa.clearRect = typeof navigator !== "undefined" && typeof navigator.isCocoonJS !== "undefined";
                }
                if (aa.clearRect) {
                  aa.context.clearRect(0, 0, f.__canvas.width, f.__canvas.height);
                }
                if (c.text != null && c.text != "" || c.__hasFocus) {
                  h = c.text;
                  f.__context.imageSmoothingEnabled = !b.__allowSmoothing || c.antiAliasType == 0 && c.sharpness == 400 ? false : true;
                  if (c.border || c.background) {
                    aa.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                    if (c.background) {
                      var l = w.hex(c.backgroundColor & 16777215, 6);
                      aa.context.fillStyle = "#" + l;
                      aa.context.fill();
                    }
                    if (c.border) {
                      aa.context.lineWidth = 1;
                      l = w.hex(c.borderColor & 16777215, 6);
                      aa.context.strokeStyle = "#" + l;
                      aa.context.stroke();
                    }
                  }
                  aa.context.textBaseline = "alphabetic";
                  aa.context.textAlign = "start";
                  g = -a.get_scrollH();
                  var m = d = 0;
                  for (l = a.get_scrollV() - 1; m < l;) {
                    var v = m++;
                    d -= c.lineHeights.get(v);
                  }
                  var q;
                  for (k = c.layoutGroups.iterator(); k.hasNext();) {
                    var u = k.next();
                    if (!(u.lineIndex < a.get_scrollV() - 1)) {
                      if (u.lineIndex > c.get_bottomScrollV() - 1) {
                        break;
                      }
                      p = "#" + w.hex(u.format.color & 16777215, 6);
                      aa.context.font = fc.getFont(u.format);
                      aa.context.fillStyle = p;
                      aa.context.fillText(h.substring(u.startIndex, u.endIndex), u.offsetX + g - e.x, u.offsetY + u.ascent + d - e.y);
                      if (a.__caretIndex > -1 && c.selectable) {
                        if (a.__selectionIndex == a.__caretIndex) {
                          if (a.__showCursor && u.startIndex <= a.__caretIndex && u.endIndex >= a.__caretIndex) {
                            m = q = 0;
                            for (l = a.__caretIndex - u.startIndex; m < l;) {
                              v = m++;
                              if (u.positions.length <= v) {
                                break;
                              }
                              q += u.positions[v];
                            }
                            m = 0;
                            l = a.get_scrollV();
                            for (v = u.lineIndex + 1; l < v;) {
                              var r = l++;
                              m += c.lineHeights.get(r - 1);
                            }
                            aa.context.beginPath();
                            l = w.hex(u.format.color & 16777215, 6);
                            aa.context.strokeStyle = "#" + l;
                            aa.context.moveTo(u.offsetX + q - a.get_scrollH() - e.x, m + 2 - e.y);
                            aa.context.lineWidth = 1;
                            aa.context.lineTo(u.offsetX + q - a.get_scrollH() - e.x, m + fc.getFormatHeight(a.get_defaultTextFormat()) - 1 - e.y);
                            aa.context.stroke();
                            aa.context.closePath();
                          }
                        } else if (u.startIndex <= a.__caretIndex && u.endIndex >= a.__caretIndex || u.startIndex <= a.__selectionIndex && u.endIndex >= a.__selectionIndex || u.startIndex > a.__caretIndex && u.endIndex < a.__selectionIndex || u.startIndex > a.__selectionIndex && u.endIndex < a.__caretIndex) {
                          q = Math.min(a.__selectionIndex, a.__caretIndex) | 0;
                          m = Math.max(a.__selectionIndex, a.__caretIndex) | 0;
                          if (u.startIndex > q) {
                            q = u.startIndex;
                          }
                          if (u.endIndex < m) {
                            m = u.endIndex;
                          }
                          v = a.getCharBoundaries(q);
                          if (m >= u.endIndex) {
                            l = a.getCharBoundaries(u.endIndex - 1);
                            if (l != null) {
                              l.x += l.width + 2;
                            }
                          } else {
                            l = a.getCharBoundaries(m);
                          }
                          if (v != null && l != null) {
                            aa.context.fillStyle = "#000000";
                            aa.context.fillRect(v.x + g - e.x, v.y + d, l.x - v.x, u.height);
                            aa.context.fillStyle = "#FFFFFF";
                            aa.context.fillText(h.substring(q, m), g + v.x - e.x, u.offsetY + u.ascent + d);
                          }
                        }
                      }
                      if (u.format.underline) {
                        aa.context.beginPath();
                        aa.context.strokeStyle = p;
                        aa.context.lineWidth = 1;
                        p = u.offsetX + g - e.x;
                        q = Math.ceil(u.offsetY + d + u.ascent - e.y) + Math.floor(u.ascent * 0.185) + 0.5;
                        aa.context.moveTo(p, q);
                        aa.context.lineTo(p + u.width, q);
                        aa.context.stroke();
                        aa.context.closePath();
                      }
                    }
                  }
                } else {
                  if (c.border || c.background) {
                    if (c.border) {
                      aa.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                    } else {
                      aa.context.rect(0, 0, e.width, e.height);
                    }
                    if (c.background) {
                      l = w.hex(c.backgroundColor & 16777215, 6);
                      aa.context.fillStyle = "#" + l;
                      aa.context.fill();
                    }
                    if (c.border) {
                      aa.context.lineWidth = 1;
                      aa.context.lineCap = "square";
                      l = w.hex(c.borderColor & 16777215, 6);
                      aa.context.strokeStyle = "#" + l;
                      aa.context.stroke();
                    }
                  }
                  if (a.__caretIndex > -1 && c.selectable && a.__showCursor) {
                    g = -a.get_scrollH() + (d ? 0 : k);
                    m = d = 0;
                    for (l = a.get_scrollV() - 1; m < l;) {
                      v = m++;
                      d += c.lineHeights.get(v);
                    }
                    aa.context.beginPath();
                    l = w.hex(a.get_defaultTextFormat().color & 16777215, 6);
                    aa.context.strokeStyle = "#" + l;
                    aa.context.moveTo(g + 2.5, d + 2.5);
                    aa.context.lineWidth = 1;
                    aa.context.lineTo(g + 2.5, d + fc.getFormatHeight(a.get_defaultTextFormat()) - 1);
                    aa.context.stroke();
                    aa.context.closePath();
                  }
                }
                f.__bitmap = T.fromCanvas(a.__graphics.__canvas);
                f.__bitmapScale = n;
                f.__visible = true;
                a.__dirty = false;
                f.__softwareDirty = false;
                f.set___dirty(false);
              }
            }
            d = false;
            if (a.__textEngine.antiAliasType == 0 && a.__textEngine.gridFitType == 1 && (d = b.context.imageSmoothingEnabled)) {
              b.context.imageSmoothingEnabled = false;
            }
            if ((a.opaqueBackground != null || a.__graphics != null) && a.__renderable && (e = b.__getAlpha(a.__worldAlpha), !(e <= 0) && (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0 && (b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), c = b.context, b.setTransform(a.__renderTransform, c), p = a.opaqueBackground, c.fillStyle = "rgb(" + (p >>> 16 & 255) + "," + (p >>> 8 & 255) + "," + (p & 255) + ")", c.fillRect(0, 0, a.get_width(), a.get_height()), b.__popMaskObject(a)), a.__graphics != null && a.__renderable && (e = b.__getAlpha(a.__worldAlpha), !(e <= 0) && (f = a.__graphics, f != null && (B.render(f, b), h = f.__width, g = f.__height, k = f.__canvas, k != null && f.__visible && h >= 1 && g >= 1 && (u = f.__worldTransform, c = b.context, n = a.__scrollRect, r = a.__worldScale9Grid, n == null || n.width > 0 && n.height > 0))))))) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              c.globalAlpha = e;
              if (r != null && u.b == 0 && u.c == 0) {
                n = b.__pixelRatio;
                p = za.__pool.get();
                p.translate(u.tx, u.ty);
                b.setTransform(p, c);
                za.__pool.release(p);
                e = f.__bounds;
                m = f.__renderTransform.a / f.__bitmapScale;
                var z = f.__renderTransform.d / f.__bitmapScale;
                l = m * u.a;
                v = z * u.d;
                f = Math.max(1, Math.round(r.x * m));
                u = Math.round(r.y * z);
                p = Math.max(1, Math.round((e.get_right() - r.get_right()) * m));
                q = Math.round((e.get_bottom() - r.get_bottom()) * z);
                m = Math.round(r.width * m);
                r = Math.round(r.height * z);
                z = Math.round(f / n);
                var J = Math.round(u / n);
                var y = Math.round(p / n);
                n = Math.round(q / n);
                l = e.width * l - z - y;
                e = e.height * v - J - n;
                b.applySmoothing(c, false);
                if (m != 0 && r != 0) {
                  c.drawImage(k, 0, 0, f, u, 0, 0, z, J);
                  c.drawImage(k, f, 0, m, u, z, 0, l, J);
                  c.drawImage(k, f + m, 0, p, u, z + l, 0, y, J);
                  c.drawImage(k, 0, u, f, r, 0, J, z, e);
                  c.drawImage(k, f, u, m, r, z, J, l, e);
                  c.drawImage(k, f + m, u, p, r, z + l, J, y, e);
                  c.drawImage(k, 0, u + r, f, q, 0, J + e, z, n);
                  c.drawImage(k, f, u + r, m, q, z, J + e, l, n);
                  c.drawImage(k, f + m, u + r, p, q, z + l, J + e, y, n);
                } else if (m == 0 && r != 0) {
                  f = z + l + y;
                  c.drawImage(k, 0, 0, h, u, 0, 0, f, J);
                  c.drawImage(k, 0, u, h, r, 0, J, f, e);
                  c.drawImage(k, 0, u + r, h, q, 0, J + e, f, n);
                } else if (r == 0 && m != 0) {
                  e = J + e + n;
                  c.drawImage(k, 0, 0, f, g, 0, 0, z, e);
                  c.drawImage(k, f, 0, m, g, z, 0, l, e);
                  c.drawImage(k, f + m, 0, p, g, z + l, 0, y, e);
                }
              } else {
                b.setTransform(u, c);
                c.drawImage(k, 0, 0, h, g);
              }
              b.__popMaskObject(a);
            }
            if (d) {
              b.context.imageSmoothingEnabled = true;
            }
          } else {
            a = a.__cacheBitmap;
            if (a.__renderable) {
              e = b.__getAlpha(a.__worldAlpha);
              if (e > 0 && a.__bitmapData != null && a.__bitmapData.__isValid && a.__bitmapData.readable) {
                c = b.context;
                b.__setBlendMode(a.__worldBlendMode);
                b.__pushMaskObject(a, false);
                Ya.convertToCanvas(a.__bitmapData.image);
                c.globalAlpha = e;
                n = a.__scrollRect;
                b.setTransform(a.__renderTransform, c);
                if (!b.__allowSmoothing || !a.smoothing) {
                  c.imageSmoothingEnabled = false;
                }
                if (n == null) {
                  c.drawImage(a.__bitmapData.image.get_src(), 0, 0, a.__bitmapData.image.width, a.__bitmapData.image.height);
                } else {
                  c.drawImage(a.__bitmapData.image.get_src(), n.x, n.y, n.width, n.height, n.x, n.y, n.width, n.height);
                }
                if (!b.__allowSmoothing || !a.smoothing) {
                  c.imageSmoothingEnabled = true;
                }
                b.__popMaskObject(a, false);
              }
            }
          }
        }
      };
      aa.renderDrawableMask = function (a, b) {
        Ch.renderDrawableMask(a, b);
      };
      function wg() {}
      g["openfl.display._internal.CanvasTilemap"] = wg;
      wg.__name__ = "openfl.display._internal.CanvasTilemap";
      wg.renderTileContainer = function (a, b, c, d, e, f, k, h, n, g, p, l) {
        var t = b.context;
        var m = b.__roundPixels;
        var v = za.__pool.get();
        var w = a.__tiles;
        var q;
        var K = null;
        var u = 0;
        for (a = a.__length; u < a;) {
          var r = u++;
          var z = w[r];
          v.setTo(1, 0, 0, 1, -z.get_originX(), -z.get_originY());
          v.concat(z.get_matrix());
          v.concat(c);
          if (m) {
            v.tx = Math.round(v.tx);
            v.ty = Math.round(v.ty);
          }
          var J = z.get_tileset() ?? d;
          r = z.get_alpha() * k;
          if ((q = z.get_visible()) && !(r <= 0)) {
            if (!f) {
              r = 1;
            }
            if (h) {
              K = z.__blendMode ?? n;
            }
            if (z.__length > 0) {
              wg.renderTileContainer(z, b, v, J, e, f, r, h, K, g, p, l);
            } else if (J != null) {
              q = z.get_id();
              if (q == -1) {
                z = z.__rect;
                if (z == null || z.width <= 0 || z.height <= 0) {
                  continue;
                }
              } else {
                z = J.__data[q];
                if (z == null) {
                  continue;
                }
                l.setTo(z.x, z.y, z.width, z.height);
                z = l;
              }
              J = J.__bitmapData;
              if (J != null && J.image != null) {
                if (J != g) {
                  if (J.image.buffer.__srcImage == null) {
                    Ya.convertToCanvas(J.image);
                  }
                  p = J.image.get_src();
                  g = J;
                }
                t.globalAlpha = r;
                if (h) {
                  b.__setBlendMode(K);
                }
                b.setTransform(v, t);
                t.drawImage(p, z.x, z.y, z.width, z.height, 0, 0, z.width, z.height);
              }
            }
          }
        }
        za.__pool.release(v);
      };
      wg.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(u = b.__getAlpha(a.__worldAlpha), u <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              r = b.context;
              b.setTransform(a.__renderTransform, r);
              var c = a.opaqueBackground;
              r.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")";
              r.fillRect(0, 0, a.get_width(), a.get_height());
              b.__popMaskObject(a);
            }
            if (a.__graphics != null && a.__renderable && (u = b.__getAlpha(a.__worldAlpha), !(u <= 0))) {
              var d = a.__graphics;
              if (d != null) {
                B.render(d, b);
                var e = d.__width;
                var f = d.__height;
                c = d.__canvas;
                if (c != null && d.__visible && e >= 1 && f >= 1) {
                  var k = d.__worldTransform;
                  r = b.context;
                  z = a.__scrollRect;
                  var h = a.__worldScale9Grid;
                  if (z == null || z.width > 0 && z.height > 0) {
                    b.__setBlendMode(a.__worldBlendMode);
                    b.__pushMaskObject(a);
                    r.globalAlpha = u;
                    if (h != null && k.b == 0 && k.c == 0) {
                      var n = b.__pixelRatio;
                      u = za.__pool.get();
                      u.translate(k.tx, k.ty);
                      b.setTransform(u, r);
                      za.__pool.release(u);
                      u = d.__bounds;
                      var g = d.__renderTransform.a / d.__bitmapScale;
                      var p = d.__renderTransform.d / d.__bitmapScale;
                      var l = g * k.a;
                      var m = p * k.d;
                      k = Math.max(1, Math.round(h.x * g));
                      d = Math.round(h.y * p);
                      z = Math.max(1, Math.round((u.get_right() - h.get_right()) * g));
                      var v = Math.round((u.get_bottom() - h.get_bottom()) * p);
                      g = Math.round(h.width * g);
                      h = Math.round(h.height * p);
                      p = Math.round(k / n);
                      var w = Math.round(d / n);
                      var q = Math.round(z / n);
                      n = Math.round(v / n);
                      l = u.width * l - p - q;
                      u = u.height * m - w - n;
                      b.applySmoothing(r, false);
                      if (g != 0 && h != 0) {
                        r.drawImage(c, 0, 0, k, d, 0, 0, p, w);
                        r.drawImage(c, k, 0, g, d, p, 0, l, w);
                        r.drawImage(c, k + g, 0, z, d, p + l, 0, q, w);
                        r.drawImage(c, 0, d, k, h, 0, w, p, u);
                        r.drawImage(c, k, d, g, h, p, w, l, u);
                        r.drawImage(c, k + g, d, z, h, p + l, w, q, u);
                        r.drawImage(c, 0, d + h, k, v, 0, w + u, p, n);
                        r.drawImage(c, k, d + h, g, v, p, w + u, l, n);
                        r.drawImage(c, k + g, d + h, z, v, p + l, w + u, q, n);
                      } else if (g == 0 && h != 0) {
                        f = p + l + q;
                        r.drawImage(c, 0, 0, e, d, 0, 0, f, w);
                        r.drawImage(c, 0, d, e, h, 0, w, f, u);
                        r.drawImage(c, 0, d + h, e, v, 0, w + u, f, n);
                      } else if (h == 0 && g != 0) {
                        e = w + u + n;
                        r.drawImage(c, 0, 0, k, f, 0, 0, p, e);
                        r.drawImage(c, k, 0, g, f, p, 0, l, e);
                        r.drawImage(c, k + g, 0, z, f, p + l, 0, q, e);
                      }
                    } else {
                      b.setTransform(k, r);
                      r.drawImage(c, 0, 0, e, f);
                    }
                    b.__popMaskObject(a);
                  }
                }
              }
            }
          }
          if (a.__renderable && a.__group.__tiles.length != 0) {
            u = b.__getAlpha(a.__worldAlpha);
            if (!(u <= 0)) {
              r = b.context;
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              c = da.__pool.get();
              c.setTo(0, 0, a.__width, a.__height);
              b.__pushMaskRect(c, a.__renderTransform);
              if (!b.__allowSmoothing || !a.smoothing) {
                r.imageSmoothingEnabled = false;
              }
              wg.renderTileContainer(a.__group, b, a.__renderTransform, a.__tileset, b.__allowSmoothing && a.smoothing, a.tileAlphaEnabled, u, a.tileBlendModeEnabled, a.__worldBlendMode, null, null, c);
              if (!b.__allowSmoothing || !a.smoothing) {
                r.imageSmoothingEnabled = true;
              }
              b.__popMaskRect();
              b.__popMaskObject(a);
              da.__pool.release(c);
            }
          }
        } else {
          c = a.__cacheBitmap;
          if (c.__renderable) {
            var u = b.__getAlpha(c.__worldAlpha);
            if (u > 0 && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
              var r = b.context;
              b.__setBlendMode(c.__worldBlendMode);
              b.__pushMaskObject(c, false);
              Ya.convertToCanvas(c.__bitmapData.image);
              r.globalAlpha = u;
              var z = c.__scrollRect;
              b.setTransform(c.__renderTransform, r);
              if (!b.__allowSmoothing || !c.smoothing) {
                r.imageSmoothingEnabled = false;
              }
              if (z == null) {
                r.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height);
              } else {
                r.drawImage(c.__bitmapData.image.get_src(), z.x, z.y, z.width, z.height, z.x, z.y, z.width, z.height);
              }
              if (!b.__allowSmoothing || !c.smoothing) {
                r.imageSmoothingEnabled = true;
              }
              b.__popMaskObject(c, false);
            }
          }
        }
        b.__renderEvent(a);
      };
      wg.renderDrawableMask = function (a, b) {};
      function Dh() {}
      g["openfl.display._internal.CanvasVideo"] = Dh;
      Dh.__name__ = "openfl.display._internal.CanvasVideo";
      Dh.render = function (a, b) {
        if (a.__renderable && a.__stream != null) {
          var c = b.__getAlpha(a.__worldAlpha);
          if (!(c <= 0)) {
            var d = b.context;
            if (a.__stream.__video != null) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              d.globalAlpha = c;
              c = a.__scrollRect;
              var e = a.smoothing;
              b.setTransform(a.__worldTransform, d);
              if (!e) {
                d.imageSmoothingEnabled = false;
              }
              if (c == null) {
                d.drawImage(a.__stream.__video, 0, 0, a.get_width(), a.get_height());
              } else {
                d.drawImage(a.__stream.__video, c.x, c.y, c.width, c.height, c.x, c.y, c.width, c.height);
              }
              if (!e) {
                d.imageSmoothingEnabled = true;
              }
              b.__popMaskObject(a);
            }
          }
        }
      };
      Dh.renderDrawable = function (a, b) {
        Dh.render(a, b);
        b.__renderEvent(a);
      };
      Dh.renderDrawableMask = function (a, b) {};
      function Qe() {}
      g["openfl.display._internal.Context3DBitmap"] = Qe;
      Qe.__name__ = "openfl.display._internal.Context3DBitmap";
      Qe.render = function (a, b) {
        if (a.__renderable && !(a.__worldAlpha <= 0) && a.__bitmapData != null && a.__bitmapData.__isValid) {
          var c = b.__context3D;
          b.__setBlendMode(a.__worldBlendMode);
          b.__pushMaskObject(a);
          var d = b.__initDisplayShader(a.__worldShader);
          b.setShader(d);
          b.applyBitmapData(a.__bitmapData, b.__allowSmoothing && (a.smoothing || b.__upscaled));
          b.applyMatrix(b.__getMatrix(a.__renderTransform, a.pixelSnapping));
          b.applyAlpha(a.__worldAlpha);
          b.applyColorTransform(a.__worldColorTransform);
          b.updateShader();
          var e = a.__bitmapData.getVertexBuffer(c);
          if (d.__position != null) {
            c.setVertexBufferAt(d.__position.index, e, 0, 3);
          }
          if (d.__textureCoord != null) {
            c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
          }
          d = a.__bitmapData.getIndexBuffer(c);
          c.drawTriangles(d);
          b.__clearShader();
          b.__popMaskObject(a);
        }
      };
      Qe.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__bitmapData != null && a.__bitmapData.image != null) {
          a.__imageVersion = a.__bitmapData.image.version;
        }
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(a.__worldAlpha <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              var c = b.__context3D;
              var d = da.__pool.get();
              d.setTo(0, 0, a.get_width(), a.get_height());
              b.__pushMaskRect(d, a.__renderTransform);
              var e = a.opaqueBackground;
              c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
              b.__popMaskRect();
              b.__popMaskObject(a);
              da.__pool.release(d);
            }
            if (a.__graphics != null) {
              $f.render(a, b);
            }
          }
          Qe.render(a, b);
        } else {
          Qe.render(a.__cacheBitmap, b);
        }
        b.__renderEvent(a);
      };
      Qe.renderDrawableMask = function (a, b) {
        Qe.renderMask(a, b);
      };
      Qe.renderMask = function (a, b) {
        if (a.__bitmapData != null && a.__bitmapData.__isValid) {
          var c = b.__context3D;
          var d = b.__maskShader;
          b.setShader(d);
          b.applyBitmapData(Eh.opaqueBitmapData, true);
          b.applyMatrix(b.__getMatrix(a.__renderTransform, a.pixelSnapping));
          b.updateShader();
          var e = a.__bitmapData.getVertexBuffer(c);
          if (d.__position != null) {
            c.setVertexBufferAt(d.__position.index, e, 0, 3);
          }
          if (d.__textureCoord != null) {
            c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
          }
          a = a.__bitmapData.getIndexBuffer(c);
          c.drawTriangles(a);
          b.__clearShader();
        }
      };
      function tm() {}
      g["openfl.display._internal.Context3DBitmapData"] = tm;
      tm.__name__ = "openfl.display._internal.Context3DBitmapData";
      tm.renderDrawable = function (a, b) {
        var c = b.__context3D;
        b.__setBlendMode(10);
        var d = b.__defaultDisplayShader;
        b.setShader(d);
        b.applyBitmapData(a, b.__upscaled);
        b.applyMatrix(b.__getMatrix(a.__worldTransform, 1));
        b.applyAlpha(a.__worldAlpha);
        b.applyColorTransform(a.__worldColorTransform);
        b.updateShader();
        var e = a.getVertexBuffer(c);
        if (d.__position != null) {
          c.setVertexBufferAt(d.__position.index, e, 0, 3);
        }
        if (d.__textureCoord != null) {
          c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
        }
        a = a.getIndexBuffer(c);
        c.drawTriangles(a);
        b.__clearShader();
      };
      tm.renderDrawableMask = function (a, b) {
        var c = b.__context3D;
        var d = b.__maskShader;
        b.setShader(d);
        b.applyBitmapData(a, b.__upscaled);
        b.applyMatrix(b.__getMatrix(a.__worldTransform, 1));
        b.updateShader();
        var e = a.getVertexBuffer(c);
        if (d.__position != null) {
          c.setVertexBufferAt(d.__position.index, e, 0, 3);
        }
        if (d.__textureCoord != null) {
          c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
        }
        a = a.getIndexBuffer(c);
        c.drawTriangles(a);
        b.__clearShader();
      };
      function Sj(a, b, c, d) {
        this.context3D = a;
        this.elementType = b;
        this.dataPerVertex = d;
        this.vertexCount = this.indexCount = 0;
        this.resize(c);
      }
      g["openfl.display._internal.Context3DBuffer"] = Sj;
      Sj.__name__ = "openfl.display._internal.Context3DBuffer";
      Sj.prototype = {
        flushVertexBufferData: function () {
          if (this.vertexBufferData.length > this.vertexCount) {
            this.vertexCount = this.vertexBufferData.length;
            this.vertexBuffer = this.context3D.createVertexBuffer(this.vertexCount, this.dataPerVertex, 0);
          }
          this.vertexBuffer.uploadFromTypedArray(bj.toArrayBufferView(this.vertexBufferData));
        },
        resize: function (a, b) {
          if (b == null) {
            b = -1;
          }
          this.elementCount = a;
          if (b == -1) {
            b = this.dataPerVertex;
          }
          if (b != this.dataPerVertex) {
            this.vertexBuffer = null;
            this.vertexCount = 0;
            this.dataPerVertex = b;
          }
          var c = 0;
          switch (this.elementType._hx_index) {
            case 0:
              c = a * 4;
              break;
            case 1:
              c = a * 3;
              break;
            case 2:
              c = a * 3;
          }
          b *= c;
          if (this.vertexBufferData == null) {
            var d = c = null;
            var e = null;
            var f = null;
            var k = null;
            this.vertexBufferData = b = b != null ? new Float32Array(b) : c != null ? new Float32Array(c) : d != null ? new Float32Array(d.__array) : e != null ? new Float32Array(e) : f != null ? k == null ? new Float32Array(f, 0) : new Float32Array(f, 0, k) : null;
          } else if (b > this.vertexBufferData.length) {
            a = this.vertexBufferData;
            k = f = e = d = c = null;
            this.vertexBufferData = b = b != null ? new Float32Array(b) : c != null ? new Float32Array(c) : d != null ? new Float32Array(d.__array) : e != null ? new Float32Array(e) : f != null ? k == null ? new Float32Array(f, 0) : new Float32Array(f, 0, k) : null;
            this.vertexBufferData.set(a);
          }
        },
        __class__: Sj
      };
      var Am = z["openfl.display._internal.Context3DElementType"] = {
        __ename__: "openfl.display._internal.Context3DElementType",
        __constructs__: null,
        QUADS: {
          _hx_name: "QUADS",
          _hx_index: 0,
          __enum__: "openfl.display._internal.Context3DElementType",
          toString: p
        },
        TRIANGLES: {
          _hx_name: "TRIANGLES",
          _hx_index: 1,
          __enum__: "openfl.display._internal.Context3DElementType",
          toString: p
        },
        TRIANGLE_INDICES: {
          _hx_name: "TRIANGLE_INDICES",
          _hx_index: 2,
          __enum__: "openfl.display._internal.Context3DElementType",
          toString: p
        }
      };
      Am.__constructs__ = [Am.QUADS, Am.TRIANGLES, Am.TRIANGLE_INDICES];
      function Fh() {}
      g["openfl.display._internal.Context3DDisplayObject"] = Fh;
      Fh.__name__ = "openfl.display._internal.Context3DDisplayObject";
      Fh.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap != null && !a.__isCacheBitmapRender) {
          Qe.render(a.__cacheBitmap, b);
        } else if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(a.__worldAlpha <= 0)) {
          if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
            b.__setBlendMode(a.__worldBlendMode);
            b.__pushMaskObject(a);
            var c = b.__context3D;
            var d = da.__pool.get();
            d.setTo(0, 0, a.get_width(), a.get_height());
            b.__pushMaskRect(d, a.__renderTransform);
            var e = a.opaqueBackground;
            c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
            b.__popMaskRect();
            b.__popMaskObject(a);
            da.__pool.release(d);
          }
          if (a.__graphics != null) {
            $f.render(a, b);
          }
        }
        b.__renderEvent(a);
      };
      Fh.renderDrawableMask = function (a, b) {
        if (a.__graphics != null) {
          $f.renderMask(a, b);
        }
      };
      function um() {}
      g["openfl.display._internal.Context3DDisplayObjectContainer"] = um;
      um.__name__ = "openfl.display._internal.Context3DDisplayObjectContainer";
      um.renderDrawable = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        if (a.__renderable && !(a.__worldAlpha <= 0) && (Fh.renderDrawable(a, b), a.__cacheBitmap == null || a.__isCacheBitmapRender)) {
          if (a.__children.length > 0) {
            b.__pushMaskObject(a);
            if (b.__stage != null) {
              c = 0;
              for (d = a.__children; c < d.length;) {
                var e = d[c];
                ++c;
                b.__renderDrawable(e);
                e.__renderDirty = false;
              }
              a.__renderDirty = false;
            } else {
              c = 0;
              d = a.__children;
              while (c < d.length) {
                e = d[c];
                ++c;
                b.__renderDrawable(e);
              }
            }
          }
          if (a.__children.length > 0) {
            b.__popMaskObject(a);
          }
        }
      };
      um.renderDrawableMask = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        if (a.__graphics != null) {
          $f.renderMask(a, b);
        }
        c = 0;
        for (a = a.__children; c < a.length;) {
          d = a[c];
          ++c;
          b.__renderDrawableMask(d);
        }
      };
      function oc() {}
      g["openfl.display._internal.Context3DGraphics"] = oc;
      oc.__name__ = "openfl.display._internal.Context3DGraphics";
      oc.buildBuffer = function (a, b) {
        var c;
        var d = c = 0;
        var e = 0;
        var f = new Zf(a.__commands);
        b = b.__context3D;
        var k = da.__pool.get();
        var h = za.__pool.get();
        var n = null;
        for (var g = 0, p = a.__commands.types; g < p.length;) {
          var l = p[g];
          ++g;
          switch (l._hx_index) {
            case 0:
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = ra.BEGIN_BITMAP_FILL;
              n = f;
              n = n.buffer.o[n.oPos];
              break;
            case 1:
              n = null;
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = l;
              break;
            case 3:
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = ra.BEGIN_SHADER_FILL;
              n = f;
              l = n.buffer.o[n.oPos];
              n = null;
              if (l != null) {
                for (var m = 0, v = l.inputCount; m < v;) {
                  var w = m++;
                  if (l.inputRefs[w].name == "bitmap") {
                    n = l.inputs[w];
                    break;
                  }
                }
              }
              break;
            case 8:
              if (n != null) {
                switch (f.prev._hx_index) {
                  case 0:
                    f.oPos += 2;
                    f.bPos += 2;
                    break;
                  case 1:
                    f.iPos += 1;
                    f.fPos += 1;
                    break;
                  case 2:
                    f.oPos += 4;
                    f.iiPos += 2;
                    f.ffPos += 1;
                    f.fPos += 1;
                    break;
                  case 3:
                    f.oPos += 1;
                    break;
                  case 4:
                    f.fPos += 6;
                    break;
                  case 5:
                    f.fPos += 4;
                    break;
                  case 6:
                    f.fPos += 3;
                    break;
                  case 7:
                    f.fPos += 4;
                    break;
                  case 8:
                    f.oPos += 3;
                    break;
                  case 9:
                    f.fPos += 4;
                    break;
                  case 10:
                    f.fPos += 5;
                    f.oPos += 1;
                    break;
                  case 12:
                    f.oPos += 4;
                    break;
                  case 14:
                    f.oPos += 2;
                    f.bPos += 2;
                    break;
                  case 15:
                    f.oPos += 4;
                    f.iiPos += 2;
                    f.ffPos += 1;
                    f.fPos += 1;
                    break;
                  case 16:
                    f.oPos += 4;
                    f.iPos += 1;
                    f.fPos += 2;
                    f.bPos += 1;
                    break;
                  case 17:
                    f.fPos += 2;
                    break;
                  case 18:
                    f.fPos += 2;
                    break;
                  case 19:
                    f.oPos += 1;
                    break;
                  case 20:
                    f.oPos += 1;
                }
                f.prev = ra.DRAW_QUADS;
                v = f;
                l = v.buffer.o[v.oPos];
                m = v.buffer.o[v.oPos + 1];
                v = v.buffer.o[v.oPos + 2];
                w = m != null;
                var q = false;
                var u = false;
                var r = w ? m.get_length() : Math.floor(l.get_length() / 4);
                if (r == 0) {
                  return;
                }
                if (v != null) {
                  if (v.get_length() >= r * 6) {
                    u = q = true;
                  } else if (v.get_length() >= r * 4) {
                    q = true;
                  } else if (v.get_length() >= r * 2) {
                    u = true;
                  }
                }
                if (a.__quadBuffer == null) {
                  a.__quadBuffer = new Sj(b, Am.QUADS, r, 4);
                } else {
                  a.__quadBuffer.resize(c + r, 4);
                }
                var z;
                for (var J, y, ba, A, B, D, C, x, F, G, H, N, la, ha = a.__quadBuffer.vertexBufferData, ja = n.width, O = n.height, ia = 0, E = r; ia < E;) {
                  ba = ia++;
                  z = (c + ba) * 16;
                  J = w ? m.get(ba) * 4 : ba * 4;
                  if (!(J < 0)) {
                    k.setTo(l.get(J), l.get(J + 1), l.get(J + 2), l.get(J + 3));
                    J = k.width;
                    y = k.height;
                    if (!(J <= 0) && !(y <= 0)) {
                      if (q && u) {
                        ba *= 6;
                        h.setTo(v.get(ba), v.get(ba + 1), v.get(ba + 2), v.get(ba + 3), v.get(ba + 4), v.get(ba + 5));
                      } else if (q) {
                        ba *= 4;
                        h.setTo(v.get(ba), v.get(ba + 1), v.get(ba + 2), v.get(ba + 3), k.x, k.y);
                      } else if (u) {
                        ba *= 2;
                        h.tx = v.get(ba);
                        h.ty = v.get(ba + 1);
                      } else {
                        h.tx = k.x;
                        h.ty = k.y;
                      }
                      ba = k.x / ja;
                      A = k.y / O;
                      B = k.get_right() / ja;
                      D = k.get_bottom() / O;
                      C = h.a * 0 + h.c * 0 + h.tx;
                      x = h.b * 0 + h.d * 0 + h.ty;
                      F = J * h.a + h.c * 0 + h.tx;
                      G = J * h.b + h.d * 0 + h.ty;
                      H = h.a * 0 + y * h.c + h.tx;
                      N = h.b * 0 + y * h.d + h.ty;
                      la = J * h.a + y * h.c + h.tx;
                      J = J * h.b + y * h.d + h.ty;
                      ha[z] = C;
                      ha[z + 1] = x;
                      ha[z + 2] = ba;
                      ha[z + 3] = A;
                      ha[z + 4] = F;
                      ha[z + 4 + 1] = G;
                      ha[z + 4 + 2] = B;
                      ha[z + 4 + 3] = A;
                      ha[z + 8] = H;
                      ha[z + 8 + 1] = N;
                      ha[z + 8 + 2] = ba;
                      ha[z + 8 + 3] = D;
                      ha[z + 12] = la;
                      ha[z + 12 + 1] = J;
                      ha[z + 12 + 2] = B;
                      ha[z + 12 + 3] = D;
                    }
                  }
                }
                c += r;
              }
              break;
            case 12:
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = ra.DRAW_TRIANGLES;
              v = f;
              l = v.buffer.o[v.oPos];
              m = v.buffer.o[v.oPos + 1];
              v = v.buffer.o[v.oPos + 2];
              w = m != null;
              r = Math.floor(l.get_length() / 2);
              q = w ? m.get_length() : r;
              z = (r = (u = v != null) && v.get_length() >= r * 3) ? 4 : 2;
              ha = r ? 3 : 2;
              ja = z + 2;
              O = r ? e : d;
              oc.resizeVertexBuffer(a, r, O + q * ja);
              ia = r ? a.__vertexBufferDataUVT : a.__vertexBufferData;
              y = 0;
              for (ba = q; y < ba;) {
                A = y++;
                E = O + A * ja;
                J = w ? m.get(A) * 2 : A * 2;
                A = w ? m.get(A) * ha : A * ha;
                if (r) {
                  B = v.get(A + 2);
                  ia[E] = l.get(J) / B;
                  ia[E + 1] = l.get(J + 1) / B;
                  ia[E + 2] = 0;
                  ia[E + 3] = 1 / B;
                } else {
                  ia[E] = l.get(J);
                  ia[E + 1] = l.get(J + 1);
                }
                ia[E + z] = u ? v.get(A) : 0;
                ia[E + z + 1] = u ? v.get(A + 1) : 0;
              }
              if (r) {
                e += q * ja;
              } else {
                d += q * ja;
              }
              break;
            case 13:
              n = null;
              break;
            default:
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = l;
          }
        }
        if (c > 0) {
          a.__quadBuffer.flushVertexBufferData();
        }
        if (d > 0) {
          c = a.__vertexBuffer;
          if (c == null || d > a.__vertexBufferCount) {
            c = b.createVertexBuffer(d, 4, 0);
            a.__vertexBuffer = c;
            a.__vertexBufferCount = d;
          }
          c.uploadFromTypedArray(bj.toArrayBufferView(a.__vertexBufferData));
        }
        if (e > 0) {
          c = a.__vertexBufferUVT;
          if (c == null || e > a.__vertexBufferCountUVT) {
            c = b.createVertexBuffer(e, 6, 0);
            a.__vertexBufferUVT = c;
            a.__vertexBufferCountUVT = e;
          }
          c.uploadFromTypedArray(bj.toArrayBufferView(a.__vertexBufferDataUVT));
        }
        da.__pool.release(k);
        za.__pool.release(h);
      };
      oc.isCompatible = function (a) {
        if (a.__owner.__worldScale9Grid != null) {
          return false;
        }
        var b = new Zf(a.__commands);
        var c = false;
        var d = false;
        var e = false;
        var f = 0;
        for (a = a.__commands.types; f < a.length;) {
          var k = a[f];
          ++f;
          switch (k._hx_index) {
            case 0:
              d = true;
              e = c = false;
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 1:
              d = false;
              c = true;
              e = false;
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 3:
              c = d = false;
              e = true;
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 8:
              if (d || e) {
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = k;
              } else {
                b.destroy();
                return false;
              }
              break;
            case 9:
              if (c) {
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = k;
              } else {
                b.destroy();
                return false;
              }
              break;
            case 12:
              if (d || e) {
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = k;
              } else {
                b.destroy();
                return false;
              }
              break;
            case 13:
              e = c = d = false;
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 18:
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 19:
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            default:
              b.destroy();
              return false;
          }
        }
        b.destroy();
        return true;
      };
      oc.render = function (a, b) {
        if (a.__visible && a.__commands.get_length() != 0) {
          if (a.__bitmap != null && !a.__dirty || !oc.isCompatible(a)) {
            b.__softwareRenderer.__pixelRatio = b.__pixelRatio;
            var c = b.__softwareRenderer.__worldTransform;
            b.__softwareRenderer.__worldTransform = a.__owner.__drawableType == 7 ? za.__identity : b.__worldTransform;
            B.render(a, b.__softwareRenderer);
            b.__softwareRenderer.__worldTransform = c;
          } else {
            a.__bitmap = null;
            a.__update(b.__worldTransform, b.__pixelRatio);
            var d = a.__width;
            var e = a.__height;
            if (a.__bounds != null && d >= 1 && e >= 1) {
              if (a.__hardwareDirty || a.__quadBuffer == null && a.__vertexBuffer == null && a.__vertexBufferUVT == null) {
                oc.buildBuffer(a, b);
              }
              c = new Zf(a.__commands);
              var f = b.__context3D;
              var k = za.__pool.get();
              for (var h = null, n = null, g = false, p = false, l = null, m = 0, v = 0, w = 0, q = 0, u = 0, r = a.__commands.types; u < r.length;) {
                d = r[u];
                ++u;
                switch (d._hx_index) {
                  case 0:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = ra.BEGIN_BITMAP_FILL;
                    p = c;
                    n = p.buffer.o[p.oPos];
                    g = p.buffer.b[p.bPos];
                    p = p.buffer.b[p.bPos + 1];
                    l = h = null;
                    break;
                  case 1:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = ra.BEGIN_FILL;
                    n = c;
                    l = (n.buffer.i[n.iPos] | 0) & 16777215 | (n.buffer.f[n.fPos] * 255 | 0) << 24;
                    n = h = null;
                    break;
                  case 3:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = ra.BEGIN_SHADER_FILL;
                    v = c;
                    h = v.buffer.o[v.oPos];
                    v = 0;
                    n = h == null || h.shader == null || h.shader.__bitmap == null ? null : h.shader.__bitmap.input;
                    l = null;
                    break;
                  case 8:
                    if (n != null) {
                      switch (c.prev._hx_index) {
                        case 0:
                          c.oPos += 2;
                          c.bPos += 2;
                          break;
                        case 1:
                          c.iPos += 1;
                          c.fPos += 1;
                          break;
                        case 2:
                          c.oPos += 4;
                          c.iiPos += 2;
                          c.ffPos += 1;
                          c.fPos += 1;
                          break;
                        case 3:
                          c.oPos += 1;
                          break;
                        case 4:
                          c.fPos += 6;
                          break;
                        case 5:
                          c.fPos += 4;
                          break;
                        case 6:
                          c.fPos += 3;
                          break;
                        case 7:
                          c.fPos += 4;
                          break;
                        case 8:
                          c.oPos += 3;
                          break;
                        case 9:
                          c.fPos += 4;
                          break;
                        case 10:
                          c.fPos += 5;
                          c.oPos += 1;
                          break;
                        case 12:
                          c.oPos += 4;
                          break;
                        case 14:
                          c.oPos += 2;
                          c.bPos += 2;
                          break;
                        case 15:
                          c.oPos += 4;
                          c.iiPos += 2;
                          c.ffPos += 1;
                          c.fPos += 1;
                          break;
                        case 16:
                          c.oPos += 4;
                          c.iPos += 1;
                          c.fPos += 2;
                          c.bPos += 1;
                          break;
                        case 17:
                          c.fPos += 2;
                          break;
                        case 18:
                          c.fPos += 2;
                          break;
                        case 19:
                          c.oPos += 1;
                          break;
                        case 20:
                          c.oPos += 1;
                      }
                      c.prev = ra.DRAW_QUADS;
                      var z = c;
                      d = z.buffer.o[z.oPos];
                      z = z.buffer.o[z.oPos + 1];
                      d = z != null ? z.get_length() : Math.floor(d.get_length() / 4);
                      var J = b.__getMatrix(a.__owner.__renderTransform, 1);
                      if (h == null || oc.maskRender) {
                        z = oc.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                        b.setShader(z);
                        b.applyMatrix(J);
                        b.applyBitmapData(n, p, g);
                        b.applyAlpha(a.__owner.__worldAlpha);
                        b.applyColorTransform(a.__owner.__worldColorTransform);
                        b.updateShader();
                      } else {
                        z = b.__initShaderBuffer(h);
                        b.__setShaderBuffer(h);
                        b.applyMatrix(J);
                        b.applyBitmapData(n, false, g);
                        b.applyAlpha(a.__owner.__worldAlpha);
                        b.applyColorTransform(a.__owner.__worldColorTransform);
                      }
                      for (J = m + d; m < J;) {
                        d = Math.min(J - m, f.__quadIndexBufferElements) | 0;
                        if (d <= 0) {
                          break;
                        }
                        if (h != null && !oc.maskRender) {
                          b.__updateShaderBuffer(v);
                        }
                        if (z.__position != null) {
                          f.setVertexBufferAt(z.__position.index, a.__quadBuffer.vertexBuffer, m * 16, 2);
                        }
                        if (z.__textureCoord != null) {
                          f.setVertexBufferAt(z.__textureCoord.index, a.__quadBuffer.vertexBuffer, m * 16 + 2, 2);
                        }
                        f.drawTriangles(f.__quadIndexBuffer, 0, d * 2);
                        v += d * 4;
                        m += d;
                      }
                      b.__clearShader();
                    }
                    break;
                  case 9:
                    if (l != null) {
                      switch (c.prev._hx_index) {
                        case 0:
                          c.oPos += 2;
                          c.bPos += 2;
                          break;
                        case 1:
                          c.iPos += 1;
                          c.fPos += 1;
                          break;
                        case 2:
                          c.oPos += 4;
                          c.iiPos += 2;
                          c.ffPos += 1;
                          c.fPos += 1;
                          break;
                        case 3:
                          c.oPos += 1;
                          break;
                        case 4:
                          c.fPos += 6;
                          break;
                        case 5:
                          c.fPos += 4;
                          break;
                        case 6:
                          c.fPos += 3;
                          break;
                        case 7:
                          c.fPos += 4;
                          break;
                        case 8:
                          c.oPos += 3;
                          break;
                        case 9:
                          c.fPos += 4;
                          break;
                        case 10:
                          c.fPos += 5;
                          c.oPos += 1;
                          break;
                        case 12:
                          c.oPos += 4;
                          break;
                        case 14:
                          c.oPos += 2;
                          c.bPos += 2;
                          break;
                        case 15:
                          c.oPos += 4;
                          c.iiPos += 2;
                          c.ffPos += 1;
                          c.fPos += 1;
                          break;
                        case 16:
                          c.oPos += 4;
                          c.iPos += 1;
                          c.fPos += 2;
                          c.bPos += 1;
                          break;
                        case 17:
                          c.fPos += 2;
                          break;
                        case 18:
                          c.fPos += 2;
                          break;
                        case 19:
                          c.oPos += 1;
                          break;
                        case 20:
                          c.oPos += 1;
                      }
                      c.prev = ra.DRAW_RECT;
                      var ba = c;
                      z = ba.buffer.f[ba.fPos];
                      J = ba.buffer.f[ba.fPos + 1];
                      d = ba.buffer.f[ba.fPos + 2];
                      e = ba.buffer.f[ba.fPos + 3];
                      ba = l;
                      oc.tempColorTransform.redOffset = ba >>> 16 & 255;
                      oc.tempColorTransform.greenOffset = ba >>> 8 & 255;
                      oc.tempColorTransform.blueOffset = ba & 255;
                      oc.tempColorTransform.__combine(a.__owner.__worldColorTransform);
                      k.identity();
                      k.scale(d, e);
                      k.tx = z;
                      k.ty = J;
                      k.concat(a.__owner.__renderTransform);
                      d = oc.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                      b.setShader(d);
                      b.applyMatrix(b.__getMatrix(k, 1));
                      b.applyBitmapData(oc.blankBitmapData, true, g);
                      b.applyAlpha((ba >>> 24 & 255) / 255 * a.__owner.__worldAlpha);
                      b.applyColorTransform(oc.tempColorTransform);
                      b.updateShader();
                      z = oc.blankBitmapData.getVertexBuffer(f);
                      if (d.__position != null) {
                        f.setVertexBufferAt(d.__position.index, z, 0, 3);
                      }
                      if (d.__textureCoord != null) {
                        f.setVertexBufferAt(d.__textureCoord.index, z, 3, 2);
                      }
                      d = oc.blankBitmapData.getIndexBuffer(f);
                      f.drawTriangles(d);
                      v += 4;
                      b.__clearShader();
                    }
                    break;
                  case 12:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = ra.DRAW_TRIANGLES;
                    e = c;
                    z = e.buffer.o[e.oPos + 1];
                    J = e.buffer.o[e.oPos + 2];
                    d = e.buffer.o[e.oPos + 3];
                    ba = z != null;
                    e = Math.floor(e.buffer.o[e.oPos].get_length() / 2);
                    z = ba ? z.get_length() : e;
                    ba = (J = J != null && J.get_length() >= e * 3) ? 4 : 2;
                    e = ba + 2;
                    var y = J ? a.__vertexBufferUVT : a.__vertexBuffer;
                    var A = J ? q : w;
                    var D = b.__getMatrix(a.__owner.__renderTransform, 1);
                    if (h == null || oc.maskRender) {
                      var C = oc.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                      b.setShader(C);
                      b.applyMatrix(D);
                      b.applyBitmapData(n, p, g);
                      b.applyAlpha(a.__owner.__worldAlpha);
                      b.applyColorTransform(a.__owner.__worldColorTransform);
                      b.updateShader();
                    } else {
                      C = b.__initShaderBuffer(h);
                      b.__setShaderBuffer(h);
                      b.applyMatrix(D);
                      b.applyBitmapData(n, false, g);
                      b.applyAlpha(1);
                      b.applyColorTransform(null);
                      b.__updateShaderBuffer(v);
                    }
                    if (C.__position != null) {
                      f.setVertexBufferAt(C.__position.index, y, A, J ? 4 : 2);
                    }
                    if (C.__textureCoord != null) {
                      f.setVertexBufferAt(C.__textureCoord.index, y, A + ba, 2);
                    }
                    switch (d) {
                      case 0:
                        f.setCulling(0);
                        break;
                      case 1:
                        f.setCulling(3);
                        break;
                      case 2:
                        f.setCulling(1);
                    }
                    f.__drawTriangles(0, z);
                    v += z;
                    if (J) {
                      q += e * z;
                    } else {
                      w += e * z;
                    }
                    switch (d) {
                      case 1:
                      case 2:
                        f.setCulling(0);
                    }
                    b.__clearShader();
                    break;
                  case 13:
                    h = l = n = null;
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = d;
                    f.setCulling(3);
                    break;
                  case 18:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = ra.MOVE_TO;
                    break;
                  case 19:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = ra.OVERRIDE_BLEND_MODE;
                    d = c;
                    b.__setBlendMode(d.buffer.o[d.oPos]);
                    break;
                  default:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = d;
                }
              }
              za.__pool.release(k);
            }
            a.__hardwareDirty = false;
            a.set___dirty(false);
          }
        }
      };
      oc.renderMask = function (a, b) {
        oc.maskRender = true;
        oc.render(a, b);
        oc.maskRender = false;
      };
      oc.resizeVertexBuffer = function (a, b, c) {
        var d = b ? a.__vertexBufferDataUVT : a.__vertexBufferData;
        var e = null;
        if (d == null) {
          var f = e = null;
          var k = null;
          var h = null;
          var n = null;
          e = c = c != null ? new Float32Array(c) : e != null ? new Float32Array(e) : f != null ? new Float32Array(f.__array) : k != null ? new Float32Array(k) : h != null ? n == null ? new Float32Array(h, 0) : new Float32Array(h, 0, n) : null;
        } else if (c > d.length) {
          n = h = k = f = e = null;
          e = c = c != null ? new Float32Array(c) : e != null ? new Float32Array(e) : f != null ? new Float32Array(f.__array) : k != null ? new Float32Array(k) : h != null ? n == null ? new Float32Array(h, 0) : new Float32Array(h, 0, n) : null;
          e.set(d);
        }
        if (e != null) {
          if (b) {
            a.__vertexBufferDataUVT = e;
          } else {
            a.__vertexBufferData = e;
          }
        }
      };
      function Eh() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t\tif (color.a == 0.0) {\n\n\t\t\t\tdiscard;\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = color;\n\n\t\t\t}\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}";
        }
        ge.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      g["openfl.display._internal.Context3DMaskShader"] = Eh;
      Eh.__name__ = "openfl.display._internal.Context3DMaskShader";
      Eh.__super__ = ge;
      Eh.prototype = q(ge.prototype, {
        __class__: Eh
      });
      function $f() {}
      g["openfl.display._internal.Context3DShape"] = $f;
      $f.__name__ = "openfl.display._internal.Context3DShape";
      $f.render = function (a, b) {
        if (a.__renderable && !(a.__worldAlpha <= 0)) {
          var c = a.__graphics;
          if (c != null) {
            b.__setBlendMode(a.__worldBlendMode);
            b.__pushMaskObject(a);
            oc.render(c, b);
            if (c.__bitmap != null && c.__visible) {
              var d = b.__context3D;
              var e = b.__initDisplayShader(a.__worldShader);
              b.setShader(e);
              b.applyBitmapData(c.__bitmap, true);
              var f = za.__pool.get();
              f.scale(1 / c.__bitmapScale, 1 / c.__bitmapScale);
              f.concat(c.__worldTransform);
              b.applyMatrix(b.__getMatrix(f, 1));
              za.__pool.release(f);
              b.applyAlpha(a.__worldAlpha);
              b.applyColorTransform(a.__worldColorTransform);
              b.updateShader();
              f = c.__bitmap.getVertexBuffer(d);
              if (e.__position != null) {
                d.setVertexBufferAt(e.__position.index, f, 0, 3);
              }
              if (e.__textureCoord != null) {
                d.setVertexBufferAt(e.__textureCoord.index, f, 3, 2);
              }
              c = c.__bitmap.getIndexBuffer(d);
              d.drawTriangles(c);
              b.__clearShader();
            }
            b.__popMaskObject(a);
          }
        }
      };
      $f.renderMask = function (a, b) {
        var c = a.__graphics;
        if (c != null && (oc.renderMask(c, b), c.__bitmap != null)) {
          a = b.__context3D;
          var d = b.__maskShader;
          b.setShader(d);
          b.applyBitmapData(c.__bitmap, true);
          b.applyMatrix(b.__getMatrix(c.__worldTransform, 1));
          b.updateShader();
          var e = c.__bitmap.getVertexBuffer(a);
          if (d.__position != null) {
            a.setVertexBufferAt(d.__position.index, e, 0, 3);
          }
          if (d.__textureCoord != null) {
            a.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
          }
          c = c.__bitmap.getIndexBuffer(a);
          a.drawTriangles(c);
          b.__clearShader();
        }
      };
      function vm() {}
      g["openfl.display._internal.Context3DSimpleButton"] = vm;
      vm.__name__ = "openfl.display._internal.Context3DSimpleButton";
      vm.renderDrawable = function (a, b) {
        if (!!a.__renderable && !(a.__worldAlpha <= 0) && a.__currentState != null) {
          b.__pushMaskObject(a);
          b.__renderDrawable(a.__currentState);
          b.__popMaskObject(a);
          b.__renderEvent(a);
        }
      };
      vm.renderDrawableMask = function (a, b) {
        if (a.__currentState != null) {
          b.__renderDrawableMask(a.__currentState);
        }
      };
      function yg() {}
      g["openfl.display._internal.Context3DTextField"] = yg;
      yg.__name__ = "openfl.display._internal.Context3DTextField";
      yg.render = function (a, b) {
        b.__softwareRenderer.__pixelRatio = b.__pixelRatio;
        var c = b.__softwareRenderer;
        b = a.__textEngine;
        var d = !b.background && !b.border;
        var e = d ? b.textBounds : b.bounds;
        var f = a.__graphics;
        var k = 0;
        if (a.__dirty) {
          a.__updateLayout();
          if (f.__bounds == null) {
            f.__bounds = new da();
          }
          if (a.get_text().length == 0) {
            k = b.bounds.width - 4;
            var h = a.get_defaultTextFormat().align;
            k = h == 3 ? 0 : h == 4 ? k : k / 2;
            switch (h) {
              case 0:
                k += a.get_defaultTextFormat().leftMargin / 2;
                k -= a.get_defaultTextFormat().rightMargin / 2;
                k += a.get_defaultTextFormat().indent / 2;
                k += a.get_defaultTextFormat().blockIndent / 2;
                break;
              case 2:
                k += a.get_defaultTextFormat().leftMargin;
                k += a.get_defaultTextFormat().indent;
                k += a.get_defaultTextFormat().blockIndent;
                break;
              case 3:
                k += a.get_defaultTextFormat().leftMargin;
                k += a.get_defaultTextFormat().indent;
                k += a.get_defaultTextFormat().blockIndent;
                break;
              case 4:
                k -= a.get_defaultTextFormat().rightMargin;
            }
            if (d) {
              e.y = b.bounds.y;
              e.x = k;
            }
          }
          f.__bounds.copyFrom(e);
        }
        h = c.__pixelRatio;
        f.__update(c.__worldTransform, h);
        if (a.__dirty || f.__softwareDirty) {
          var n = Math.round(f.__width * h);
          var g = Math.round(f.__height * h);
          if ((b.text == null || b.text == "") && !b.background && !b.border && !b.__hasFocus && (b.type != 1 || !b.selectable) || (b.width <= 0 || b.height <= 0) && b.autoSize != 2) {
            a.__graphics.__canvas = null;
            a.__graphics.__context = null;
            a.__graphics.__bitmap = null;
            a.__graphics.__softwareDirty = false;
            a.__graphics.set___dirty(false);
            a.__dirty = false;
          } else {
            if (a.__graphics.__canvas == null) {
              a.__graphics.__canvas = window.document.createElement("canvas");
              a.__graphics.__context = a.__graphics.__canvas.getContext("2d");
            }
            aa.context = f.__context;
            f.__canvas.width = n;
            f.__canvas.height = g;
            if (c.__isDOM) {
              f.__canvas.style.width = Math.round(n / h) + "px";
              f.__canvas.style.height = Math.round(g / h) + "px";
            }
            n = za.__pool.get();
            n.scale(h, h);
            n.concat(f.__renderTransform);
            aa.context.setTransform(n.a, n.b, n.c, n.d, n.tx, n.ty);
            za.__pool.release(n);
            if (aa.clearRect == null) {
              aa.clearRect = typeof navigator !== "undefined" && typeof navigator.isCocoonJS !== "undefined";
            }
            if (aa.clearRect) {
              aa.context.clearRect(0, 0, f.__canvas.width, f.__canvas.height);
            }
            if (b.text != null && b.text != "" || b.__hasFocus) {
              d = b.text;
              f.__context.imageSmoothingEnabled = !c.__allowSmoothing || b.antiAliasType == 0 && b.sharpness == 400 ? false : true;
              if (b.border || b.background) {
                aa.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                if (b.background) {
                  var p = w.hex(b.backgroundColor & 16777215, 6);
                  aa.context.fillStyle = "#" + p;
                  aa.context.fill();
                }
                if (b.border) {
                  aa.context.lineWidth = 1;
                  p = w.hex(b.borderColor & 16777215, 6);
                  aa.context.strokeStyle = "#" + p;
                  aa.context.stroke();
                }
              }
              aa.context.textBaseline = "alphabetic";
              aa.context.textAlign = "start";
              c = -a.get_scrollH();
              var l = k = 0;
              for (p = a.get_scrollV() - 1; l < p;) {
                var m = l++;
                k -= b.lineHeights.get(m);
              }
              var v;
              for (n = b.layoutGroups.iterator(); n.hasNext();) {
                g = n.next();
                if (!(g.lineIndex < a.get_scrollV() - 1)) {
                  if (g.lineIndex > b.get_bottomScrollV() - 1) {
                    break;
                  }
                  var q = "#" + w.hex(g.format.color & 16777215, 6);
                  aa.context.font = fc.getFont(g.format);
                  aa.context.fillStyle = q;
                  aa.context.fillText(d.substring(g.startIndex, g.endIndex), g.offsetX + c - e.x, g.offsetY + g.ascent + k - e.y);
                  if (a.__caretIndex > -1 && b.selectable) {
                    if (a.__selectionIndex == a.__caretIndex) {
                      if (a.__showCursor && g.startIndex <= a.__caretIndex && g.endIndex >= a.__caretIndex) {
                        l = v = 0;
                        for (p = a.__caretIndex - g.startIndex; l < p;) {
                          m = l++;
                          if (g.positions.length <= m) {
                            break;
                          }
                          v += g.positions[m];
                        }
                        l = 0;
                        p = a.get_scrollV();
                        for (m = g.lineIndex + 1; p < m;) {
                          var u = p++;
                          l += b.lineHeights.get(u - 1);
                        }
                        aa.context.beginPath();
                        p = w.hex(g.format.color & 16777215, 6);
                        aa.context.strokeStyle = "#" + p;
                        aa.context.moveTo(g.offsetX + v - a.get_scrollH() - e.x, l + 2 - e.y);
                        aa.context.lineWidth = 1;
                        aa.context.lineTo(g.offsetX + v - a.get_scrollH() - e.x, l + fc.getFormatHeight(a.get_defaultTextFormat()) - 1 - e.y);
                        aa.context.stroke();
                        aa.context.closePath();
                      }
                    } else if (g.startIndex <= a.__caretIndex && g.endIndex >= a.__caretIndex || g.startIndex <= a.__selectionIndex && g.endIndex >= a.__selectionIndex || g.startIndex > a.__caretIndex && g.endIndex < a.__selectionIndex || g.startIndex > a.__selectionIndex && g.endIndex < a.__caretIndex) {
                      v = Math.min(a.__selectionIndex, a.__caretIndex) | 0;
                      l = Math.max(a.__selectionIndex, a.__caretIndex) | 0;
                      if (g.startIndex > v) {
                        v = g.startIndex;
                      }
                      if (g.endIndex < l) {
                        l = g.endIndex;
                      }
                      m = a.getCharBoundaries(v);
                      if (l >= g.endIndex) {
                        p = a.getCharBoundaries(g.endIndex - 1);
                        if (p != null) {
                          p.x += p.width + 2;
                        }
                      } else {
                        p = a.getCharBoundaries(l);
                      }
                      if (m != null && p != null) {
                        aa.context.fillStyle = "#000000";
                        aa.context.fillRect(m.x + c - e.x, m.y + k, p.x - m.x, g.height);
                        aa.context.fillStyle = "#FFFFFF";
                        aa.context.fillText(d.substring(v, l), c + m.x - e.x, g.offsetY + g.ascent + k);
                      }
                    }
                  }
                  if (g.format.underline) {
                    aa.context.beginPath();
                    aa.context.strokeStyle = q;
                    aa.context.lineWidth = 1;
                    q = g.offsetX + c - e.x;
                    v = Math.ceil(g.offsetY + k + g.ascent - e.y) + Math.floor(g.ascent * 0.185) + 0.5;
                    aa.context.moveTo(q, v);
                    aa.context.lineTo(q + g.width, v);
                    aa.context.stroke();
                    aa.context.closePath();
                  }
                }
              }
            } else {
              if (b.border || b.background) {
                if (b.border) {
                  aa.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                } else {
                  aa.context.rect(0, 0, e.width, e.height);
                }
                if (b.background) {
                  p = w.hex(b.backgroundColor & 16777215, 6);
                  aa.context.fillStyle = "#" + p;
                  aa.context.fill();
                }
                if (b.border) {
                  aa.context.lineWidth = 1;
                  aa.context.lineCap = "square";
                  p = w.hex(b.borderColor & 16777215, 6);
                  aa.context.strokeStyle = "#" + p;
                  aa.context.stroke();
                }
              }
              if (a.__caretIndex > -1 && b.selectable && a.__showCursor) {
                c = -a.get_scrollH() + (d ? 0 : k);
                l = k = 0;
                for (p = a.get_scrollV() - 1; l < p;) {
                  m = l++;
                  k += b.lineHeights.get(m);
                }
                aa.context.beginPath();
                p = w.hex(a.get_defaultTextFormat().color & 16777215, 6);
                aa.context.strokeStyle = "#" + p;
                aa.context.moveTo(c + 2.5, k + 2.5);
                aa.context.lineWidth = 1;
                aa.context.lineTo(c + 2.5, k + fc.getFormatHeight(a.get_defaultTextFormat()) - 1);
                aa.context.stroke();
                aa.context.closePath();
              }
            }
            f.__bitmap = T.fromCanvas(a.__graphics.__canvas);
            f.__bitmapScale = h;
            f.__visible = true;
            a.__dirty = false;
            f.__softwareDirty = false;
            f.set___dirty(false);
          }
        }
        a.__graphics.__hardwareDirty = false;
      };
      yg.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          yg.render(a, b);
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(a.__worldAlpha <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              var c = b.__context3D;
              var d = da.__pool.get();
              d.setTo(0, 0, a.get_width(), a.get_height());
              b.__pushMaskRect(d, a.__renderTransform);
              var e = a.opaqueBackground;
              c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
              b.__popMaskRect();
              b.__popMaskObject(a);
              da.__pool.release(d);
            }
            if (a.__graphics != null) {
              $f.render(a, b);
            }
          }
        } else {
          Qe.render(a.__cacheBitmap, b);
        }
        b.__renderEvent(a);
      };
      yg.renderDrawableMask = function (a, b) {
        yg.renderMask(a, b);
        Fh.renderDrawableMask(a, b);
      };
      yg.renderMask = function (a, b) {
        var c = b.__softwareRenderer;
        b = a.__textEngine;
        var d = !b.background && !b.border;
        var e = d ? b.textBounds : b.bounds;
        var f = a.__graphics;
        var k = 0;
        if (a.__dirty) {
          a.__updateLayout();
          if (f.__bounds == null) {
            f.__bounds = new da();
          }
          if (a.get_text().length == 0) {
            k = b.bounds.width - 4;
            var h = a.get_defaultTextFormat().align;
            k = h == 3 ? 0 : h == 4 ? k : k / 2;
            switch (h) {
              case 0:
                k += a.get_defaultTextFormat().leftMargin / 2;
                k -= a.get_defaultTextFormat().rightMargin / 2;
                k += a.get_defaultTextFormat().indent / 2;
                k += a.get_defaultTextFormat().blockIndent / 2;
                break;
              case 2:
                k += a.get_defaultTextFormat().leftMargin;
                k += a.get_defaultTextFormat().indent;
                k += a.get_defaultTextFormat().blockIndent;
                break;
              case 3:
                k += a.get_defaultTextFormat().leftMargin;
                k += a.get_defaultTextFormat().indent;
                k += a.get_defaultTextFormat().blockIndent;
                break;
              case 4:
                k -= a.get_defaultTextFormat().rightMargin;
            }
            if (d) {
              e.y = b.bounds.y;
              e.x = k;
            }
          }
          f.__bounds.copyFrom(e);
        }
        h = c.__pixelRatio;
        f.__update(c.__worldTransform, h);
        if (a.__dirty || f.__softwareDirty) {
          var n = Math.round(f.__width * h);
          var g = Math.round(f.__height * h);
          if ((b.text == null || b.text == "") && !b.background && !b.border && !b.__hasFocus && (b.type != 1 || !b.selectable) || (b.width <= 0 || b.height <= 0) && b.autoSize != 2) {
            a.__graphics.__canvas = null;
            a.__graphics.__context = null;
            a.__graphics.__bitmap = null;
            a.__graphics.__softwareDirty = false;
            a.__graphics.set___dirty(false);
            a.__dirty = false;
          } else {
            if (a.__graphics.__canvas == null) {
              a.__graphics.__canvas = window.document.createElement("canvas");
              a.__graphics.__context = a.__graphics.__canvas.getContext("2d");
            }
            aa.context = f.__context;
            f.__canvas.width = n;
            f.__canvas.height = g;
            if (c.__isDOM) {
              f.__canvas.style.width = Math.round(n / h) + "px";
              f.__canvas.style.height = Math.round(g / h) + "px";
            }
            n = za.__pool.get();
            n.scale(h, h);
            n.concat(f.__renderTransform);
            aa.context.setTransform(n.a, n.b, n.c, n.d, n.tx, n.ty);
            za.__pool.release(n);
            if (aa.clearRect == null) {
              aa.clearRect = typeof navigator !== "undefined" && typeof navigator.isCocoonJS !== "undefined";
            }
            if (aa.clearRect) {
              aa.context.clearRect(0, 0, f.__canvas.width, f.__canvas.height);
            }
            if (b.text != null && b.text != "" || b.__hasFocus) {
              d = b.text;
              f.__context.imageSmoothingEnabled = !c.__allowSmoothing || b.antiAliasType == 0 && b.sharpness == 400 ? false : true;
              if (b.border || b.background) {
                aa.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                if (b.background) {
                  var p = w.hex(b.backgroundColor & 16777215, 6);
                  aa.context.fillStyle = "#" + p;
                  aa.context.fill();
                }
                if (b.border) {
                  aa.context.lineWidth = 1;
                  p = w.hex(b.borderColor & 16777215, 6);
                  aa.context.strokeStyle = "#" + p;
                  aa.context.stroke();
                }
              }
              aa.context.textBaseline = "alphabetic";
              aa.context.textAlign = "start";
              c = -a.get_scrollH();
              var l = k = 0;
              for (p = a.get_scrollV() - 1; l < p;) {
                var m = l++;
                k -= b.lineHeights.get(m);
              }
              var v;
              for (n = b.layoutGroups.iterator(); n.hasNext();) {
                g = n.next();
                if (!(g.lineIndex < a.get_scrollV() - 1)) {
                  if (g.lineIndex > b.get_bottomScrollV() - 1) {
                    break;
                  }
                  var q = "#" + w.hex(g.format.color & 16777215, 6);
                  aa.context.font = fc.getFont(g.format);
                  aa.context.fillStyle = q;
                  aa.context.fillText(d.substring(g.startIndex, g.endIndex), g.offsetX + c - e.x, g.offsetY + g.ascent + k - e.y);
                  if (a.__caretIndex > -1 && b.selectable) {
                    if (a.__selectionIndex == a.__caretIndex) {
                      if (a.__showCursor && g.startIndex <= a.__caretIndex && g.endIndex >= a.__caretIndex) {
                        l = v = 0;
                        for (p = a.__caretIndex - g.startIndex; l < p;) {
                          m = l++;
                          if (g.positions.length <= m) {
                            break;
                          }
                          v += g.positions[m];
                        }
                        l = 0;
                        p = a.get_scrollV();
                        for (m = g.lineIndex + 1; p < m;) {
                          var u = p++;
                          l += b.lineHeights.get(u - 1);
                        }
                        aa.context.beginPath();
                        p = w.hex(g.format.color & 16777215, 6);
                        aa.context.strokeStyle = "#" + p;
                        aa.context.moveTo(g.offsetX + v - a.get_scrollH() - e.x, l + 2 - e.y);
                        aa.context.lineWidth = 1;
                        aa.context.lineTo(g.offsetX + v - a.get_scrollH() - e.x, l + fc.getFormatHeight(a.get_defaultTextFormat()) - 1 - e.y);
                        aa.context.stroke();
                        aa.context.closePath();
                      }
                    } else if (g.startIndex <= a.__caretIndex && g.endIndex >= a.__caretIndex || g.startIndex <= a.__selectionIndex && g.endIndex >= a.__selectionIndex || g.startIndex > a.__caretIndex && g.endIndex < a.__selectionIndex || g.startIndex > a.__selectionIndex && g.endIndex < a.__caretIndex) {
                      v = Math.min(a.__selectionIndex, a.__caretIndex) | 0;
                      l = Math.max(a.__selectionIndex, a.__caretIndex) | 0;
                      if (g.startIndex > v) {
                        v = g.startIndex;
                      }
                      if (g.endIndex < l) {
                        l = g.endIndex;
                      }
                      m = a.getCharBoundaries(v);
                      if (l >= g.endIndex) {
                        p = a.getCharBoundaries(g.endIndex - 1);
                        if (p != null) {
                          p.x += p.width + 2;
                        }
                      } else {
                        p = a.getCharBoundaries(l);
                      }
                      if (m != null && p != null) {
                        aa.context.fillStyle = "#000000";
                        aa.context.fillRect(m.x + c - e.x, m.y + k, p.x - m.x, g.height);
                        aa.context.fillStyle = "#FFFFFF";
                        aa.context.fillText(d.substring(v, l), c + m.x - e.x, g.offsetY + g.ascent + k);
                      }
                    }
                  }
                  if (g.format.underline) {
                    aa.context.beginPath();
                    aa.context.strokeStyle = q;
                    aa.context.lineWidth = 1;
                    q = g.offsetX + c - e.x;
                    v = Math.ceil(g.offsetY + k + g.ascent - e.y) + Math.floor(g.ascent * 0.185) + 0.5;
                    aa.context.moveTo(q, v);
                    aa.context.lineTo(q + g.width, v);
                    aa.context.stroke();
                    aa.context.closePath();
                  }
                }
              }
            } else {
              if (b.border || b.background) {
                if (b.border) {
                  aa.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                } else {
                  aa.context.rect(0, 0, e.width, e.height);
                }
                if (b.background) {
                  p = w.hex(b.backgroundColor & 16777215, 6);
                  aa.context.fillStyle = "#" + p;
                  aa.context.fill();
                }
                if (b.border) {
                  aa.context.lineWidth = 1;
                  aa.context.lineCap = "square";
                  p = w.hex(b.borderColor & 16777215, 6);
                  aa.context.strokeStyle = "#" + p;
                  aa.context.stroke();
                }
              }
              if (a.__caretIndex > -1 && b.selectable && a.__showCursor) {
                c = -a.get_scrollH() + (d ? 0 : k);
                l = k = 0;
                for (p = a.get_scrollV() - 1; l < p;) {
                  m = l++;
                  k += b.lineHeights.get(m);
                }
                aa.context.beginPath();
                p = w.hex(a.get_defaultTextFormat().color & 16777215, 6);
                aa.context.strokeStyle = "#" + p;
                aa.context.moveTo(c + 2.5, k + 2.5);
                aa.context.lineWidth = 1;
                aa.context.lineTo(c + 2.5, k + fc.getFormatHeight(a.get_defaultTextFormat()) - 1);
                aa.context.stroke();
                aa.context.closePath();
              }
            }
            f.__bitmap = T.fromCanvas(a.__graphics.__canvas);
            f.__bitmapScale = h;
            f.__visible = true;
            a.__dirty = false;
            f.__softwareDirty = false;
            f.set___dirty(false);
          }
        }
        a.__graphics.__hardwareDirty = false;
      };
      function Y() {}
      g["openfl.display._internal.Context3DTilemap"] = Y;
      Y.__name__ = "openfl.display._internal.Context3DTilemap";
      Y.buildBuffer = function (a, b) {
        if (!a.__renderable || a.__group.__tiles.length == 0 || a.__worldAlpha <= 0) {
          a.__group.__dirty = false;
        } else {
          Y.numTiles = 0;
          Y.vertexBufferData = a.__buffer != null ? a.__buffer.vertexBufferData : null;
          Y.vertexDataPosition = 0;
          var c = da.__pool.get();
          var d = za.__pool.get();
          var e = za.__pool.get();
          Y.dataPerVertex = 4;
          if (a.tileAlphaEnabled) {
            Y.dataPerVertex++;
          }
          if (a.tileColorTransformEnabled) {
            Y.dataPerVertex += 8;
          }
          Y.buildBufferTileContainer(a, a.__group, b, e, a.__tileset, a.tileAlphaEnabled, a.__worldAlpha, a.tileColorTransformEnabled, a.__worldColorTransform, null, c, d);
          a.__buffer.flushVertexBufferData();
          da.__pool.release(c);
          za.__pool.release(d);
          za.__pool.release(e);
        }
      };
      Y.buildBufferTileContainer = function (a, b, c, d, e, f, k, h, n, g, p, l, m) {
        if (m == null) {
          m = true;
        }
        var t = za.__pool.get();
        var v = c.__roundPixels;
        var w = b.__tiles;
        var q = null;
        q = function (a) {
          a = a.__tiles;
          var b = 0;
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            if (d.__length > 0) {
              b += q(d);
            } else {
              ++b;
            }
          }
          return b;
        };
        if (m) {
          Y.resizeBuffer(a, Y.numTiles + q(b));
        }
        m = null;
        var u;
        var r;
        var z;
        var K;
        var J;
        var ba;
        var y;
        var L;
        var A;
        var B;
        var D = f ? 5 : 4;
        for (var C = 0; C < w.length;) {
          var x = w[C];
          ++C;
          t.setTo(1, 0, 0, 1, -x.get_originX(), -x.get_originY());
          t.concat(x.get_matrix());
          t.concat(d);
          if (v) {
            t.tx = Math.round(t.tx);
            t.ty = Math.round(t.ty);
          }
          var F = x.get_tileset() ?? e;
          var ya = x.get_alpha() * k;
          var G = x.get_visible();
          x.__dirty = false;
          if (G && !(ya <= 0)) {
            if (h) {
              if (x.get_colorTransform() != null) {
                if (n == null) {
                  m = x.get_colorTransform();
                } else {
                  if (Y.cacheColorTransform == null) {
                    Y.cacheColorTransform = new Lb();
                  }
                  m = Y.cacheColorTransform;
                  m.redMultiplier = n.redMultiplier * x.get_colorTransform().redMultiplier;
                  m.greenMultiplier = n.greenMultiplier * x.get_colorTransform().greenMultiplier;
                  m.blueMultiplier = n.blueMultiplier * x.get_colorTransform().blueMultiplier;
                  m.alphaMultiplier = n.alphaMultiplier * x.get_colorTransform().alphaMultiplier;
                  m.redOffset = n.redOffset + x.get_colorTransform().redOffset;
                  m.greenOffset = n.greenOffset + x.get_colorTransform().greenOffset;
                  m.blueOffset = n.blueOffset + x.get_colorTransform().blueOffset;
                  m.alphaOffset = n.alphaOffset + x.get_colorTransform().alphaOffset;
                }
              } else {
                m = n;
              }
            }
            if (!f) {
              ya = 1;
            }
            if (x.__length > 0) {
              Y.buildBufferTileContainer(a, x, c, t, F, f, ya, h, m, g, p, l, false);
            } else if (F != null && (G = x.get_id(), u = F.__bitmapData, u != null)) {
              if (G == -1) {
                r = x.__rect;
                if (r == null || r.width <= 0 || r.height <= 0) {
                  continue;
                }
                x = r.x / u.width;
                F = r.y / u.height;
                G = r.get_right() / u.width;
                K = r.get_bottom() / u.height;
              } else {
                u = F.__data[G];
                if (u == null) {
                  continue;
                }
                p.setTo(u.x, u.y, u.width, u.height);
                r = p;
                x = u.__uvX;
                F = u.__uvY;
                G = u.__uvWidth;
                K = u.__uvHeight;
              }
              u = r.width;
              z = r.height;
              r = t.a * 0 + t.c * 0 + t.tx;
              J = t.b * 0 + t.d * 0 + t.ty;
              ba = u * t.a + t.c * 0 + t.tx;
              y = u * t.b + t.d * 0 + t.ty;
              L = t.a * 0 + z * t.c + t.tx;
              A = t.b * 0 + z * t.d + t.ty;
              B = u * t.a + z * t.c + t.tx;
              z = u * t.b + z * t.d + t.ty;
              u = Y.vertexDataPosition;
              Y.vertexBufferData[u] = r;
              Y.vertexBufferData[u + 1] = J;
              Y.vertexBufferData[u + 2] = x;
              Y.vertexBufferData[u + 3] = F;
              Y.vertexBufferData[u + Y.dataPerVertex] = ba;
              Y.vertexBufferData[u + Y.dataPerVertex + 1] = y;
              Y.vertexBufferData[u + Y.dataPerVertex + 2] = G;
              Y.vertexBufferData[u + Y.dataPerVertex + 3] = F;
              Y.vertexBufferData[u + Y.dataPerVertex * 2] = L;
              Y.vertexBufferData[u + Y.dataPerVertex * 2 + 1] = A;
              Y.vertexBufferData[u + Y.dataPerVertex * 2 + 2] = x;
              Y.vertexBufferData[u + Y.dataPerVertex * 2 + 3] = K;
              Y.vertexBufferData[u + Y.dataPerVertex * 3] = B;
              Y.vertexBufferData[u + Y.dataPerVertex * 3 + 1] = z;
              Y.vertexBufferData[u + Y.dataPerVertex * 3 + 2] = G;
              Y.vertexBufferData[u + Y.dataPerVertex * 3 + 3] = K;
              if (f) {
                Y.vertexBufferData[u + Y.dataPerVertex * 0 + 4] = ya;
                Y.vertexBufferData[u + Y.dataPerVertex + 4] = ya;
                Y.vertexBufferData[u + Y.dataPerVertex * 2 + 4] = ya;
                Y.vertexBufferData[u + Y.dataPerVertex * 3 + 4] = ya;
              }
              if (h) {
                if (m != null) {
                  for (ya = 0; ya < 4;) {
                    x = ya++;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D] = m.redMultiplier;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D + 1] = m.greenMultiplier;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D + 2] = m.blueMultiplier;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D + 3] = m.alphaMultiplier;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D + 4] = m.redOffset;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D + 5] = m.greenOffset;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D + 6] = m.blueOffset;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D + 7] = m.alphaOffset;
                  }
                } else {
                  for (ya = 0; ya < 4;) {
                    x = ya++;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D] = 1;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D + 1] = 1;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D + 2] = 1;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D + 3] = 1;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D + 4] = 0;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D + 5] = 0;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D + 6] = 0;
                    Y.vertexBufferData[u + Y.dataPerVertex * x + D + 7] = 0;
                  }
                }
              }
              Y.vertexDataPosition += Y.dataPerVertex * 4;
            }
          }
        }
        b.__dirty = false;
        za.__pool.release(t);
      };
      Y.flush = function (a, b, c) {
        if (Y.currentShader == null) {
          Y.currentShader = b.__defaultDisplayShader;
        }
        if (Y.bufferPosition > Y.lastFlushedPosition && Y.currentBitmapData != null && Y.currentShader != null) {
          var d = b.__initDisplayShader(Y.currentShader);
          b.setShader(d);
          b.applyBitmapData(Y.currentBitmapData, a.smoothing);
          b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
          if (a.tileAlphaEnabled) {
            b.useAlphaArray();
          } else {
            b.applyAlpha(a.__worldAlpha);
          }
          if (a.tileBlendModeEnabled) {
            b.__setBlendMode(c);
          }
          if (a.tileColorTransformEnabled) {
            b.applyHasColorTransform(true);
            b.useColorTransformArray();
          } else {
            b.applyColorTransform(a.__worldColorTransform);
          }
          b.updateShader();
          c = a.__buffer.vertexBuffer;
          var e = Y.lastFlushedPosition * Y.dataPerVertex * 4;
          var f;
          for (; Y.lastFlushedPosition < Y.bufferPosition;) {
            f = Math.min(Y.bufferPosition - Y.lastFlushedPosition, Y.context.__quadIndexBufferElements) | 0;
            if (f <= 0) {
              break;
            }
            if (d.__position != null) {
              Y.context.setVertexBufferAt(d.__position.index, c, e, 2);
            }
            if (d.__textureCoord != null) {
              Y.context.setVertexBufferAt(d.__textureCoord.index, c, e + 2, 2);
            }
            if (a.tileAlphaEnabled && d.__alpha != null) {
              Y.context.setVertexBufferAt(d.__alpha.index, c, e + 4, 1);
            }
            if (a.tileColorTransformEnabled) {
              var k = a.tileAlphaEnabled ? 5 : 4;
              if (d.__colorMultiplier != null) {
                Y.context.setVertexBufferAt(d.__colorMultiplier.index, c, e + k, 4);
              }
              if (d.__colorOffset != null) {
                Y.context.setVertexBufferAt(d.__colorOffset.index, c, e + k + 4, 4);
              }
            }
            Y.context.drawTriangles(Y.context.__quadIndexBuffer, 0, f * 2);
            Y.lastFlushedPosition += f;
          }
          b.__clearShader();
        }
        Y.lastUsedBitmapData = Y.currentBitmapData;
        Y.lastUsedShader = Y.currentShader;
      };
      Y.render = function (a, b) {
        if (a.__renderable && !(a.__worldAlpha <= 0) && (Y.context = b.__context3D, Y.buildBuffer(a, b), Y.numTiles != 0)) {
          Y.bufferPosition = 0;
          Y.lastFlushedPosition = 0;
          Y.lastUsedBitmapData = null;
          Y.lastUsedShader = null;
          Y.currentBitmapData = null;
          Y.currentShader = null;
          Y.currentBlendMode = a.__worldBlendMode;
          if (!a.tileBlendModeEnabled) {
            b.__setBlendMode(Y.currentBlendMode);
          }
          b.__pushMaskObject(a);
          var c = da.__pool.get();
          c.setTo(0, 0, a.__width, a.__height);
          b.__pushMaskRect(c, a.__renderTransform);
          Y.renderTileContainer(a, b, a.__group, a.__worldShader, a.__tileset, a.__worldAlpha, a.tileBlendModeEnabled, Y.currentBlendMode, null);
          Y.flush(a, b, Y.currentBlendMode);
          b.__popMaskRect();
          b.__popMaskObject(a);
          da.__pool.release(c);
        }
      };
      Y.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(a.__worldAlpha <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              var c = b.__context3D;
              var d = da.__pool.get();
              d.setTo(0, 0, a.get_width(), a.get_height());
              b.__pushMaskRect(d, a.__renderTransform);
              var e = a.opaqueBackground;
              c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
              b.__popMaskRect();
              b.__popMaskObject(a);
              da.__pool.release(d);
            }
            if (a.__graphics != null) {
              $f.render(a, b);
            }
          }
          Y.render(a, b);
        } else {
          Qe.render(a.__cacheBitmap, b);
        }
        b.__renderEvent(a);
      };
      Y.renderDrawableMask = function (a, b) {
        if (a.opaqueBackground != null || a.__graphics != null) {
          if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0) {
            a.get_height();
          }
          if (a.__graphics != null) {
            $f.renderMask(a, b);
          }
        }
        Y.renderMask(a, b);
      };
      Y.renderTileContainer = function (a, b, c, d, e, f, k, h, n) {
        c = c.__tiles;
        var g;
        var t;
        var l;
        var p;
        var m = null;
        var v;
        for (var w = 0; w < c.length;) {
          g = c[w];
          ++w;
          t = g.get_tileset() ?? e;
          l = g.get_alpha() * f;
          if ((p = g.get_visible()) && !(l <= 0)) {
            p = g.get_shader() ?? d;
            if (k) {
              m = g.__blendMode ?? h;
            }
            if (g.__length > 0) {
              Y.renderTileContainer(a, b, g, p, t, l, k, m, n);
            } else if (t != null && (v = g.get_id(), l = t.__bitmapData, l != null)) {
              if (v == -1) {
                g = g.__rect;
                if (g == null || g.width <= 0 || g.height <= 0) {
                  continue;
                }
              } else {
                g = t.__data[v];
                if (g == null) {
                  continue;
                }
              }
              if (p != Y.currentShader || l != Y.currentBitmapData && Y.currentBitmapData != null || Y.currentBlendMode != m) {
                Y.flush(a, b, Y.currentBlendMode);
              }
              Y.currentBitmapData = l;
              Y.currentShader = p;
              Y.currentBlendMode = m;
              Y.bufferPosition++;
            }
          }
        }
      };
      Y.renderMask = function (a, b) {};
      Y.resizeBuffer = function (a, b) {
        Y.numTiles = b;
        if (a.__buffer == null) {
          a.__buffer = new Sj(Y.context, Am.QUADS, Y.numTiles, Y.dataPerVertex);
        } else {
          a.__buffer.resize(Y.numTiles, Y.dataPerVertex);
        }
        Y.vertexBufferData = a.__buffer.vertexBufferData;
      };
      function Re() {}
      g["openfl.display._internal.Context3DVideo"] = Re;
      Re.__name__ = "openfl.display._internal.Context3DVideo";
      Re.render = function (a, b) {
        if (a.__renderable && !(a.__worldAlpha <= 0) && a.__stream != null && a.__stream.__video != null) {
          var c = b.__context3D;
          var d = c.gl;
          if (a.__getTexture(c) != null) {
            b.__setBlendMode(a.__worldBlendMode);
            b.__pushMaskObject(a);
            var e = b.__initDisplayShader(a.__worldShader);
            b.setShader(e);
            b.applyBitmapData(null, true, false);
            b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
            b.applyAlpha(a.__worldAlpha);
            b.applyColorTransform(a.__worldColorTransform);
            if (e.__textureSize != null) {
              Re.__textureSizeValue[0] = a.__stream != null ? a.__stream.__video.videoWidth : 0;
              Re.__textureSizeValue[1] = a.__stream != null ? a.__stream.__video.videoHeight : 0;
              e.__textureSize.value = Re.__textureSizeValue;
            }
            b.updateShader();
            c.setTextureAt(0, a.__getTexture(c));
            c.__flushGLTextures();
            d.uniform1i(e.__texture.index, 0);
            if (a.smoothing) {
              d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, d.LINEAR);
              d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.LINEAR);
            } else {
              d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, d.NEAREST);
              d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.NEAREST);
            }
            d = a.__getVertexBuffer(c);
            if (e.__position != null) {
              c.setVertexBufferAt(e.__position.index, d, 0, 3);
            }
            if (e.__textureCoord != null) {
              c.setVertexBufferAt(e.__textureCoord.index, d, 3, 2);
            }
            e = a.__getIndexBuffer(c);
            c.drawTriangles(e);
            b.__clearShader();
            b.__popMaskObject(a);
          }
        }
      };
      Re.renderDrawable = function (a, b) {
        Re.render(a, b);
        b.__renderEvent(a);
      };
      Re.renderDrawableMask = function (a, b) {
        Re.renderMask(a, b);
      };
      Re.renderMask = function (a, b) {
        if (a.__stream != null && a.__stream.__video != null) {
          var c = b.__context3D;
          var d = b.__maskShader;
          b.setShader(d);
          b.applyBitmapData(Eh.opaqueBitmapData, true);
          b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
          b.updateShader();
          var e = a.__getVertexBuffer(c);
          if (d.__position != null) {
            c.setVertexBufferAt(d.__position.index, e, 0, 3);
          }
          if (d.__textureCoord != null) {
            c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
          }
          a = a.__getIndexBuffer(c);
          c.drawTriangles(a);
          b.__clearShader();
        }
      };
      function uc() {}
      g["openfl.display._internal.DOMBitmap"] = uc;
      uc.__name__ = "openfl.display._internal.DOMBitmap";
      uc.clear = function (a, b) {
        de.clear(a, b);
        if (a.__image != null) {
          b.element.removeChild(a.__image);
          a.__image = null;
          a.__style = null;
        }
        if (a.__canvas != null) {
          b.element.removeChild(a.__canvas);
          a.__canvas = null;
          a.__style = null;
        }
      };
      uc.renderCanvas = function (a, b) {
        if (a.__image != null) {
          b.element.removeChild(a.__image);
          a.__image = null;
        }
        if (a.__canvas == null) {
          a.__canvas = window.document.createElement("canvas");
          a.__context = a.__canvas.getContext("2d");
          a.__imageVersion = -1;
          if (!b.__allowSmoothing || !a.smoothing) {
            a.__context.imageSmoothingEnabled = false;
          }
          b.__initializeElement(a, a.__canvas);
        }
        if (a.__imageVersion != a.__bitmapData.image.version) {
          Ya.convertToCanvas(a.__bitmapData.image);
          a.__canvas.width = a.__bitmapData.width + 1;
          a.__canvas.width = a.__bitmapData.width;
          a.__canvas.height = a.__bitmapData.height;
          a.__context.drawImage(a.__bitmapData.image.buffer.__srcCanvas, 0, 0);
          a.__imageVersion = a.__bitmapData.image.version;
        }
        b.__updateClip(a);
        b.__applyStyle(a, true, true, true);
      };
      uc.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0) {
            a.get_height();
          }
          var c = a.__graphics;
          if (a.stage != null && a.__worldVisible && a.__renderable && c != null) {
            B.render(c, b.__canvasRenderer);
            if (c.__softwareDirty || a.__worldAlphaChanged || a.__canvas != c.__canvas) {
              if (c.__canvas != null) {
                if (a.__canvas != c.__canvas) {
                  if (a.__canvas != null) {
                    b.element.removeChild(a.__canvas);
                  }
                  a.__canvas = c.__canvas;
                  a.__context = c.__context;
                  b.__initializeElement(a, a.__canvas);
                }
              } else {
                ah.clear(a, b);
              }
            }
            if (a.__canvas != null) {
              b.__pushMaskObject(a);
              var d = a.__renderTransform;
              a.__renderTransform = c.__worldTransform;
              if (c.__transformDirty) {
                c.__transformDirty = false;
                a.__renderTransformChanged = true;
              }
              b.__updateClip(a);
              b.__applyStyle(a, true, true, true);
              a.__renderTransform = d;
              b.__popMaskObject(a);
            }
          } else {
            ah.clear(a, b);
          }
          if (a.stage != null && a.__worldVisible && a.__renderable && a.__bitmapData != null && a.__bitmapData.__isValid && a.__bitmapData.readable) {
            b.__pushMaskObject(a);
            if (a.__bitmapData.image.buffer.__srcImage != null) {
              d = a.__bitmapData.image.buffer.__srcImage.src;
              if (w.startsWith(d, "data:") || w.startsWith(d, "blob:")) {
                uc.renderCanvas(a, b);
              } else {
                uc.renderImage(a, b);
              }
            } else {
              uc.renderCanvas(a, b);
            }
            b.__popMaskObject(a);
          } else {
            uc.clear(a, b);
          }
        } else {
          b.__renderDrawableClear(a);
          a.__cacheBitmap.stage = a.stage;
          c = a.__cacheBitmap;
          if (c.stage != null && c.__worldVisible && c.__renderable && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
            b.__pushMaskObject(c);
            if (c.__bitmapData.image.buffer.__srcImage != null) {
              d = c.__bitmapData.image.buffer.__srcImage.src;
              if (w.startsWith(d, "data:") || w.startsWith(d, "blob:")) {
                uc.renderCanvas(c, b);
              } else {
                uc.renderImage(c, b);
              }
            } else {
              uc.renderCanvas(c, b);
            }
            b.__popMaskObject(c);
          } else {
            uc.clear(c, b);
          }
        }
        b.__renderEvent(a);
      };
      uc.renderDrawableClear = function (a, b) {
        uc.clear(a, b);
      };
      uc.renderImage = function (a, b) {
        if (a.__canvas != null) {
          b.element.removeChild(a.__canvas);
          a.__canvas = null;
        }
        if (a.__image == null) {
          a.__image = window.document.createElement("img");
          a.__image.crossOrigin = "Anonymous";
          a.__image.src = a.__bitmapData.image.buffer.__srcImage.src;
          b.__initializeElement(a, a.__image);
        }
        b.__updateClip(a);
        b.__applyStyle(a, true, true, true);
      };
      function de() {}
      g["openfl.display._internal.DOMDisplayObject"] = de;
      de.__name__ = "openfl.display._internal.DOMDisplayObject";
      de.clear = function (a, b) {
        if (a.__cacheBitmap != null) {
          uc.clear(a.__cacheBitmap, b);
        }
        ah.clear(a, b);
      };
      de.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0) {
            a.get_height();
          }
          var c = a.__graphics;
          if (a.stage != null && a.__worldVisible && a.__renderable && c != null) {
            B.render(c, b.__canvasRenderer);
            if (c.__softwareDirty || a.__worldAlphaChanged || a.__canvas != c.__canvas) {
              if (c.__canvas != null) {
                if (a.__canvas != c.__canvas) {
                  if (a.__canvas != null) {
                    b.element.removeChild(a.__canvas);
                  }
                  a.__canvas = c.__canvas;
                  a.__context = c.__context;
                  b.__initializeElement(a, a.__canvas);
                }
              } else {
                ah.clear(a, b);
              }
            }
            if (a.__canvas != null) {
              b.__pushMaskObject(a);
              var d = a.__renderTransform;
              a.__renderTransform = c.__worldTransform;
              if (c.__transformDirty) {
                c.__transformDirty = false;
                a.__renderTransformChanged = true;
              }
              b.__updateClip(a);
              b.__applyStyle(a, true, true, true);
              a.__renderTransform = d;
              b.__popMaskObject(a);
            }
          } else {
            ah.clear(a, b);
          }
        } else {
          b.__renderDrawableClear(a);
          a.__cacheBitmap.stage = a.stage;
          c = a.__cacheBitmap;
          if (c.stage != null && c.__worldVisible && c.__renderable && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
            b.__pushMaskObject(c);
            if (c.__bitmapData.image.buffer.__srcImage != null) {
              d = c.__bitmapData.image.buffer.__srcImage.src;
              if (w.startsWith(d, "data:") || w.startsWith(d, "blob:")) {
                uc.renderCanvas(c, b);
              } else {
                uc.renderImage(c, b);
              }
            } else {
              uc.renderCanvas(c, b);
            }
            b.__popMaskObject(c);
          } else {
            uc.clear(c, b);
          }
        }
        b.__renderEvent(a);
      };
      de.renderDrawableClear = function (a, b) {
        de.clear(a, b);
      };
      function om() {}
      g["openfl.display._internal.DOMDisplayObjectContainer"] = om;
      om.__name__ = "openfl.display._internal.DOMDisplayObjectContainer";
      om.renderDrawable = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            b.__renderDrawable(d);
          }
        }
        for (c = a.__removedChildren.iterator(); c.hasNext();) {
          d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        de.renderDrawable(a, b);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          b.__pushMaskObject(a);
          if (b.__stage != null) {
            c = 0;
            for (d = a.__children; c < d.length;) {
              e = d[c];
              ++c;
              b.__renderDrawable(e);
              e.__renderDirty = false;
            }
            a.__renderDirty = false;
          } else {
            c = 0;
            d = a.__children;
            while (c < d.length) {
              e = d[c];
              ++c;
              b.__renderDrawable(e);
            }
          }
          b.__popMaskObject(a);
        } else {
          c = 0;
          for (d = a.__children; c < d.length;) {
            var e = d[c];
            ++c;
            b.__renderDrawableClear(e);
          }
          ah.clear(a, b);
          a.__cacheBitmap.stage = a.stage;
        }
      };
      om.renderDrawableClear = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            b.__renderDrawableClear(d);
          }
        }
        for (c = a.__removedChildren.iterator(); c.hasNext();) {
          d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        c = 0;
        for (d = a.__children; c < d.length;) {
          var e = d[c];
          ++c;
          b.__renderDrawableClear(e);
        }
        de.clear(a, b);
      };
      function ah() {}
      g["openfl.display._internal.DOMShape"] = ah;
      ah.__name__ = "openfl.display._internal.DOMShape";
      ah.clear = function (a, b) {
        if (a.__canvas != null) {
          b.element.removeChild(a.__canvas);
          a.__canvas = null;
          a.__style = null;
        }
      };
      function pm() {}
      g["openfl.display._internal.DOMSimpleButton"] = pm;
      pm.__name__ = "openfl.display._internal.DOMSimpleButton";
      pm.renderDrawable = function (a, b) {
        b.__pushMaskObject(a);
        for (var c = a.__previousStates.iterator(); c.hasNext();) {
          var d = c.next();
          b.__renderDrawable(d);
        }
        a.__previousStates.set_length(0);
        if (a.__currentState != null) {
          if (a.__currentState.stage != a.stage) {
            a.__currentState.__setStageReference(a.stage);
          }
          b.__renderDrawable(a.__currentState);
        }
        b.__popMaskObject(a);
        b.__renderEvent(a);
      };
      pm.renderDrawableClear = function (a, b) {
        de.renderDrawableClear(a, b);
      };
      function Zg() {}
      g["openfl.display._internal.DOMTextField"] = Zg;
      Zg.__name__ = "openfl.display._internal.DOMTextField";
      Zg.clear = function (a, b) {
        de.clear(a, b);
        if (a.__div != null) {
          b.element.removeChild(a.__div);
          a.__div = null;
          a.__style = null;
        }
      };
      Zg.renderDrawable = function (a, b) {
        a.__domRender = true;
        b.__updateCacheBitmap(a, a.__forceCachedBitmapUpdate);
        a.__forceCachedBitmapUpdate = false;
        a.__domRender = false;
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if (a.__renderedOnCanvasWhileOnDOM) {
            a.__renderedOnCanvasWhileOnDOM = false;
            if (a.__isHTML && a.__htmlText != null) {
              a.__updateText(a.__htmlText);
              a.__dirty = true;
              a.__layoutDirty = true;
              if (!a.__renderDirty) {
                a.__renderDirty = true;
                a.__setParentRenderDirty();
              }
            }
          }
          var c = a.__textEngine;
          if (a.stage != null && a.__worldVisible && a.__renderable) {
            if (a.__dirty || a.__renderTransformChanged || a.__div == null) {
              if (c.text != "" || c.background || c.border || c.type == 1) {
                a.__updateLayout();
                if (a.__div == null) {
                  a.__div = window.document.createElement("div");
                  b.__initializeElement(a, a.__div);
                  a.__style.setProperty("outline", "none", null);
                  a.__div.addEventListener("input", function (b) {
                    b.preventDefault();
                    if (a.get_htmlText() != a.__div.innerHTML) {
                      a.set_htmlText(a.__div.innerHTML);
                      a.__dirty = false;
                      a.dispatchEvent(new Tf("textInput", false, false, a.get_htmlText()));
                    }
                  }, true);
                }
                if (c.wordWrap) {
                  a.__style.setProperty("word-wrap", "break-word", null);
                } else {
                  a.__style.setProperty("white-space", "nowrap", null);
                }
                a.__style.setProperty("overflow", "hidden", null);
                if (c.selectable) {
                  a.__style.setProperty("cursor", "text", null);
                  a.__style.setProperty("-webkit-user-select", "text", null);
                  a.__style.setProperty("-moz-user-select", "text", null);
                  a.__style.setProperty("-ms-user-select", "text", null);
                  a.__style.setProperty("-o-user-select", "text", null);
                } else {
                  a.__style.setProperty("cursor", "inherit", null);
                }
                a.__div.contentEditable = c.type == 1;
                var d = a.__style;
                if (c.background) {
                  d.setProperty("background-color", "#" + w.hex(c.backgroundColor & 16777215, 6), null);
                } else {
                  d.removeProperty("background-color");
                }
                var e = c.width;
                var f = c.height;
                var k = "";
                if (a.__isHTML) {
                  a.__updateText(Wa.parse(a.__text, a.get_multiline(), a.__styleSheet, a.__textFormat, a.__textEngine.textFormatRanges));
                }
                var h = -a.get_scrollH();
                for (var n = c.layoutGroups.iterator(); n.hasNext();) {
                  var g = n.next();
                  if (!(g.lineIndex < a.get_scrollV() - 1)) {
                    if (g.lineIndex > c.get_bottomScrollV() - 1) {
                      break;
                    }
                    k += "<div style=\"";
                    if (g.format.font != null) {
                      k += "font: " + fc.getFont(g.format) + "; ";
                    }
                    if (g.format.color != null) {
                      k += "color: #" + w.hex(g.format.color & 16777215, 6) + "; ";
                    }
                    if (g.format.underline == 1) {
                      k += "text-decoration: underline; ";
                    }
                    if (g.format.align != null) {
                      switch (g.format.align) {
                        case 0:
                          k += "text-align: center; ";
                          break;
                        case 2:
                          k += "text-align: justify; ";
                          break;
                        case 4:
                          k += "text-align: right; ";
                          break;
                        default:
                          k += "text-align: left; ";
                      }
                    }
                    if (g.format.leftMargin != null) {
                      k += "padding-left: " + g.format.leftMargin * 1 + "px; ";
                    }
                    if (g.format.rightMargin != null) {
                      k += "padding-right: " + g.format.rightMargin * 1 + "px; ";
                    }
                    if (g.format.indent != null) {
                      k += "text-indent: " + g.format.indent * 1 + "px; ";
                    }
                    k += "left: " + (g.offsetX + h) + "px; top: " + (g.offsetY + 0 + 3) + "px; vertical-align: top; position: absolute;\">";
                    if (g.format.url != null && g.format.url != "") {
                      var p = "text-decoration: underline; ";
                      if (g.format.color != null) {
                        p += "color: #" + w.hex(g.format.color & 16777215, 6) + "; ";
                      }
                      k += "<a style='" + p + "' href='" + g.format.url + "' target='" + g.format.target + "'>";
                    }
                    k = a.__isHTML ? k + w.replace(c.text.substring(g.startIndex, g.endIndex), " ", "&nbsp;") : k + w.replace(w.htmlEscape(c.text.substring(g.startIndex, g.endIndex)), " ", "&nbsp;");
                    if (g.format.url != null && g.format.url != "") {
                      k += "</a>";
                    }
                    k += "</div>";
                  }
                }
                if (c.border) {
                  d.setProperty("border", "solid 1px #" + w.hex(c.borderColor & 16777215, 6), null);
                  a.__renderTransform.translate(-1, -1);
                  a.__renderTransformChanged = true;
                  a.__transformDirty = true;
                } else if (d.border != "") {
                  d.removeProperty("border");
                  a.__renderTransformChanged = true;
                }
                d.setProperty("width", e + "px", null);
                d.setProperty("height", f + "px", null);
                a.__div.innerHTML = k;
                a.__dirty = false;
              } else if (a.__div != null) {
                b.element.removeChild(a.__div);
                a.__div = null;
              }
            }
            if (a.__div != null) {
              c = b.__roundPixels;
              b.__roundPixels = true;
              b.__updateClip(a);
              b.__applyStyle(a, true, true, true);
              b.__roundPixels = c;
            }
          } else {
            Zg.clear(a, b);
          }
        } else {
          b.__renderDrawableClear(a);
          a.__cacheBitmap.stage = a.stage;
          c = a.__cacheBitmap;
          if (c.stage != null && c.__worldVisible && c.__renderable && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
            b.__pushMaskObject(c);
            if (c.__bitmapData.image.buffer.__srcImage != null) {
              d = c.__bitmapData.image.buffer.__srcImage.src;
              if (w.startsWith(d, "data:") || w.startsWith(d, "blob:")) {
                uc.renderCanvas(c, b);
              } else {
                uc.renderImage(c, b);
              }
            } else {
              uc.renderCanvas(c, b);
            }
            b.__popMaskObject(c);
          } else {
            uc.clear(c, b);
          }
        }
        b.__renderEvent(a);
      };
      Zg.renderDrawableClear = function (a, b) {
        Zg.clear(a, b);
      };
      function $g() {}
      g["openfl.display._internal.DOMTilemap"] = $g;
      $g.__name__ = "openfl.display._internal.DOMTilemap";
      $g.clear = function (a, b) {
        de.clear(a, b);
        if (a.__canvas != null) {
          b.element.removeChild(a.__canvas);
          a.__canvas = null;
          a.__style = null;
        }
      };
      $g.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if (a.stage != null && a.__worldVisible && a.__renderable && a.__group.__tiles.length > 0) {
            if (a.__canvas == null) {
              a.__canvas = window.document.createElement("canvas");
              a.__context = a.__canvas.getContext("2d");
              b.__initializeElement(a, a.__canvas);
            }
            a.__canvas.width = a.__width;
            a.__canvas.height = a.__height;
            b.__canvasRenderer.context = a.__context;
            var c = a.__renderTransform;
            a.__renderTransform = za.__identity;
            var d = b.__canvasRenderer;
            if ((a.opaqueBackground != null || a.__graphics != null) && a.__renderable) {
              var e = d.__getAlpha(a.__worldAlpha);
              if (!(e <= 0)) {
                if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
                  d.__setBlendMode(a.__worldBlendMode);
                  d.__pushMaskObject(a);
                  var f = d.context;
                  d.setTransform(a.__renderTransform, f);
                  var k = a.opaqueBackground;
                  f.fillStyle = "rgb(" + (k >>> 16 & 255) + "," + (k >>> 8 & 255) + "," + (k & 255) + ")";
                  f.fillRect(0, 0, a.get_width(), a.get_height());
                  d.__popMaskObject(a);
                }
                if (a.__graphics != null && a.__renderable && (e = d.__getAlpha(a.__worldAlpha), !(e <= 0))) {
                  var h = a.__graphics;
                  if (h != null) {
                    B.render(h, d);
                    var n = h.__width;
                    var g = h.__height;
                    k = h.__canvas;
                    if (k != null && h.__visible && n >= 1 && g >= 1) {
                      var p = h.__worldTransform;
                      f = d.context;
                      var l = a.__scrollRect;
                      var m = a.__worldScale9Grid;
                      if (l == null || l.width > 0 && l.height > 0) {
                        d.__setBlendMode(a.__worldBlendMode);
                        d.__pushMaskObject(a);
                        f.globalAlpha = e;
                        if (m != null && p.b == 0 && p.c == 0) {
                          var v = d.__pixelRatio;
                          e = za.__pool.get();
                          e.translate(p.tx, p.ty);
                          d.setTransform(e, f);
                          za.__pool.release(e);
                          e = h.__bounds;
                          var u = h.__renderTransform.a / h.__bitmapScale;
                          var q = h.__renderTransform.d / h.__bitmapScale;
                          var r = u * p.a;
                          var z = q * p.d;
                          p = Math.max(1, Math.round(m.x * u));
                          h = Math.round(m.y * q);
                          l = Math.max(1, Math.round((e.get_right() - m.get_right()) * u));
                          var J = Math.round((e.get_bottom() - m.get_bottom()) * q);
                          u = Math.round(m.width * u);
                          m = Math.round(m.height * q);
                          q = Math.round(p / v);
                          var ba = Math.round(h / v);
                          var y = Math.round(l / v);
                          v = Math.round(J / v);
                          r = e.width * r - q - y;
                          e = e.height * z - ba - v;
                          d.applySmoothing(f, false);
                          if (u != 0 && m != 0) {
                            f.drawImage(k, 0, 0, p, h, 0, 0, q, ba);
                            f.drawImage(k, p, 0, u, h, q, 0, r, ba);
                            f.drawImage(k, p + u, 0, l, h, q + r, 0, y, ba);
                            f.drawImage(k, 0, h, p, m, 0, ba, q, e);
                            f.drawImage(k, p, h, u, m, q, ba, r, e);
                            f.drawImage(k, p + u, h, l, m, q + r, ba, y, e);
                            f.drawImage(k, 0, h + m, p, J, 0, ba + e, q, v);
                            f.drawImage(k, p, h + m, u, J, q, ba + e, r, v);
                            f.drawImage(k, p + u, h + m, l, J, q + r, ba + e, y, v);
                          } else if (u == 0 && m != 0) {
                            g = q + r + y;
                            f.drawImage(k, 0, 0, n, h, 0, 0, g, ba);
                            f.drawImage(k, 0, h, n, m, 0, ba, g, e);
                            f.drawImage(k, 0, h + m, n, J, 0, ba + e, g, v);
                          } else if (m == 0 && u != 0) {
                            n = ba + e + v;
                            f.drawImage(k, 0, 0, p, g, 0, 0, q, n);
                            f.drawImage(k, p, 0, u, g, q, 0, r, n);
                            f.drawImage(k, p + u, 0, l, g, q + r, 0, y, n);
                          }
                        } else {
                          d.setTransform(p, f);
                          f.drawImage(k, 0, 0, n, g);
                        }
                        d.__popMaskObject(a);
                      }
                    }
                  }
                }
              }
            }
            d = b.__canvasRenderer;
            if (a.__renderable && a.__group.__tiles.length != 0) {
              e = d.__getAlpha(a.__worldAlpha);
              if (!(e <= 0)) {
                f = d.context;
                d.__setBlendMode(a.__worldBlendMode);
                d.__pushMaskObject(a);
                k = da.__pool.get();
                k.setTo(0, 0, a.__width, a.__height);
                d.__pushMaskRect(k, a.__renderTransform);
                if (!d.__allowSmoothing || !a.smoothing) {
                  f.imageSmoothingEnabled = false;
                }
                wg.renderTileContainer(a.__group, d, a.__renderTransform, a.__tileset, d.__allowSmoothing && a.smoothing, a.tileAlphaEnabled, e, a.tileBlendModeEnabled, a.__worldBlendMode, null, null, k);
                if (!d.__allowSmoothing || !a.smoothing) {
                  f.imageSmoothingEnabled = true;
                }
                d.__popMaskRect();
                d.__popMaskObject(a);
                da.__pool.release(k);
              }
            }
            a.__renderTransform = c;
            b.__canvasRenderer.context = null;
            b.__updateClip(a);
            b.__applyStyle(a, true, false, true);
          } else {
            $g.clear(a, b);
          }
        } else {
          b.__renderDrawableClear(a);
          a.__cacheBitmap.stage = a.stage;
          c = a.__cacheBitmap;
          if (c.stage != null && c.__worldVisible && c.__renderable && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
            b.__pushMaskObject(c);
            if (c.__bitmapData.image.buffer.__srcImage != null) {
              d = c.__bitmapData.image.buffer.__srcImage.src;
              if (w.startsWith(d, "data:") || w.startsWith(d, "blob:")) {
                uc.renderCanvas(c, b);
              } else {
                uc.renderImage(c, b);
              }
            } else {
              uc.renderCanvas(c, b);
            }
            b.__popMaskObject(c);
          } else {
            uc.clear(c, b);
          }
        }
        b.__renderEvent(a);
      };
      $g.renderDrawableClear = function (a, b) {
        $g.clear(a, b);
      };
      function xg() {}
      g["openfl.display._internal.DOMVideo"] = xg;
      xg.__name__ = "openfl.display._internal.DOMVideo";
      xg.clear = function (a, b) {
        de.clear(a, b);
        if (a.__active) {
          b.element.removeChild(a.__stream.__video);
          a.__active = false;
        }
      };
      xg.render = function (a, b) {
        if (a.stage != null && a.__stream != null && a.__worldVisible && a.__renderable) {
          if (!a.__active) {
            b.__initializeElement(a, a.__stream.__video);
            a.__active = true;
            a.__dirty = true;
          }
          if (a.__dirty) {
            a.__stream.__video.width = a.__width | 0;
            a.__stream.__video.height = a.__height | 0;
            a.__dirty = false;
          }
          b.__updateClip(a);
          b.__applyStyle(a, true, true, true);
        } else {
          xg.clear(a, b);
        }
      };
      xg.renderDrawable = function (a, b) {
        xg.render(a, b);
        b.__renderEvent(a);
      };
      xg.renderDrawableClear = function (a, b) {
        de.renderDrawableClear(a, b);
      };
      function Zf(a) {
        this.buffer = a;
        this.bPos = this.iPos = this.fPos = this.oPos = this.ffPos = this.iiPos = this.tsPos = 0;
        this.prev = ra.UNKNOWN;
      }
      g["openfl.display._internal.DrawCommandReader"] = Zf;
      Zf.__name__ = "openfl.display._internal.DrawCommandReader";
      Zf.prototype = {
        destroy: function () {
          this.buffer = null;
          this.reset();
        },
        reset: function () {
          this.bPos = this.iPos = this.fPos = this.oPos = this.ffPos = this.iiPos = this.tsPos = 0;
        },
        __class__: Zf
      };
      var ra = z["openfl.display._internal.DrawCommandType"] = {
        __ename__: "openfl.display._internal.DrawCommandType",
        __constructs__: null,
        BEGIN_BITMAP_FILL: {
          _hx_name: "BEGIN_BITMAP_FILL",
          _hx_index: 0,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        BEGIN_FILL: {
          _hx_name: "BEGIN_FILL",
          _hx_index: 1,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        BEGIN_GRADIENT_FILL: {
          _hx_name: "BEGIN_GRADIENT_FILL",
          _hx_index: 2,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        BEGIN_SHADER_FILL: {
          _hx_name: "BEGIN_SHADER_FILL",
          _hx_index: 3,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        CUBIC_CURVE_TO: {
          _hx_name: "CUBIC_CURVE_TO",
          _hx_index: 4,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        CURVE_TO: {
          _hx_name: "CURVE_TO",
          _hx_index: 5,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_CIRCLE: {
          _hx_name: "DRAW_CIRCLE",
          _hx_index: 6,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_ELLIPSE: {
          _hx_name: "DRAW_ELLIPSE",
          _hx_index: 7,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_QUADS: {
          _hx_name: "DRAW_QUADS",
          _hx_index: 8,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_RECT: {
          _hx_name: "DRAW_RECT",
          _hx_index: 9,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_ROUND_RECT: {
          _hx_name: "DRAW_ROUND_RECT",
          _hx_index: 10,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_TILES: {
          _hx_name: "DRAW_TILES",
          _hx_index: 11,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_TRIANGLES: {
          _hx_name: "DRAW_TRIANGLES",
          _hx_index: 12,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        END_FILL: {
          _hx_name: "END_FILL",
          _hx_index: 13,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        LINE_BITMAP_STYLE: {
          _hx_name: "LINE_BITMAP_STYLE",
          _hx_index: 14,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        LINE_GRADIENT_STYLE: {
          _hx_name: "LINE_GRADIENT_STYLE",
          _hx_index: 15,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        LINE_STYLE: {
          _hx_name: "LINE_STYLE",
          _hx_index: 16,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        LINE_TO: {
          _hx_name: "LINE_TO",
          _hx_index: 17,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        MOVE_TO: {
          _hx_name: "MOVE_TO",
          _hx_index: 18,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        OVERRIDE_BLEND_MODE: {
          _hx_name: "OVERRIDE_BLEND_MODE",
          _hx_index: 19,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        OVERRIDE_MATRIX: {
          _hx_name: "OVERRIDE_MATRIX",
          _hx_index: 20,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        WINDING_EVEN_ODD: {
          _hx_name: "WINDING_EVEN_ODD",
          _hx_index: 21,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        WINDING_NON_ZERO: {
          _hx_name: "WINDING_NON_ZERO",
          _hx_index: 22,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        UNKNOWN: {
          _hx_name: "UNKNOWN",
          _hx_index: 23,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        }
      };
      ra.__constructs__ = [ra.BEGIN_BITMAP_FILL, ra.BEGIN_FILL, ra.BEGIN_GRADIENT_FILL, ra.BEGIN_SHADER_FILL, ra.CUBIC_CURVE_TO, ra.CURVE_TO, ra.DRAW_CIRCLE, ra.DRAW_ELLIPSE, ra.DRAW_QUADS, ra.DRAW_RECT, ra.DRAW_ROUND_RECT, ra.DRAW_TILES, ra.DRAW_TRIANGLES, ra.END_FILL, ra.LINE_BITMAP_STYLE, ra.LINE_GRADIENT_STYLE, ra.LINE_STYLE, ra.LINE_TO, ra.MOVE_TO, ra.OVERRIDE_BLEND_MODE, ra.OVERRIDE_MATRIX, ra.WINDING_EVEN_ODD, ra.WINDING_NON_ZERO, ra.UNKNOWN];
      function Jh(a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 2;
        }
        if (b == null) {
          b = 5;
        }
        if (a == null) {
          a = 0;
        }
        this.wrap = a;
        this.filter = b;
        this.mipfilter = c;
        this.lodBias = d;
        this.ignoreSampler = e;
        this.centroid = f;
        this.textureAlpha = k;
      }
      g["openfl.display._internal.SamplerState"] = Jh;
      Jh.__name__ = "openfl.display._internal.SamplerState";
      Jh.prototype = {
        clone: function () {
          var a = new Jh(this.wrap, this.filter, this.mipfilter, this.lodBias, this.ignoreSampler, this.centroid, this.textureAlpha);
          a.mipmapGenerated = this.mipmapGenerated;
          return a;
        },
        copyFrom: function (a) {
          if (a != null && !a.ignoreSampler) {
            this.wrap = a.wrap;
            this.filter = a.filter;
            this.mipfilter = a.mipfilter;
            this.lodBias = a.lodBias;
            this.centroid = a.centroid;
            this.textureAlpha = a.textureAlpha;
          }
        },
        equals: function (a) {
          if (a == null) {
            return false;
          } else if (this.wrap == a.wrap && this.filter == a.filter && this.mipfilter == a.mipfilter && this.lodBias == a.lodBias) {
            return this.textureAlpha == a.textureAlpha;
          } else {
            return false;
          }
        },
        __class__: Jh
      };
      function rm() {
        this.inputRefs = [];
        this.inputFilter = [];
        this.inputMipFilter = [];
        this.inputs = [];
        this.inputWrap = [];
        this.overrideIntNames = [];
        this.overrideIntValues = [];
        this.overrideFloatNames = [];
        this.overrideFloatValues = [];
        this.overrideBoolNames = [];
        this.overrideBoolValues = [];
        this.paramLengths = [];
        this.paramPositions = [];
        this.paramRefs_Bool = [];
        this.paramRefs_Float = [];
        this.paramRefs_Int = [];
        this.paramTypes = [];
      }
      g["openfl.display._internal.ShaderBuffer"] = rm;
      rm.__name__ = "openfl.display._internal.ShaderBuffer";
      rm.prototype = {
        addBoolOverride: function (a, b) {
          this.overrideBoolNames[this.overrideBoolCount] = a;
          this.overrideBoolValues[this.overrideBoolCount] = b;
          this.overrideBoolCount++;
        },
        addFloatOverride: function (a, b) {
          this.overrideFloatNames[this.overrideFloatCount] = a;
          this.overrideFloatValues[this.overrideFloatCount] = b;
          this.overrideFloatCount++;
        },
        clearOverride: function () {
          this.overrideBoolCount = this.overrideFloatCount = this.overrideIntCount = 0;
        },
        update: function (a) {
          this.paramIntCount = this.paramFloatCount = this.paramDataLength = this.paramCount = this.paramBoolCount = this.overrideBoolCount = this.overrideFloatCount = this.overrideIntCount = this.inputCount = 0;
          this.shader = null;
          if (a != null) {
            a.__init();
            this.inputCount = a.__inputBitmapData.length;
            var b;
            for (var c = 0, d = this.inputCount; c < d;) {
              var e = c++;
              b = a.__inputBitmapData[e];
              this.inputs[e] = b.input;
              this.inputFilter[e] = b.filter;
              this.inputMipFilter[e] = b.mipFilter;
              this.inputRefs[e] = b;
              this.inputWrap[e] = b.wrap;
            }
            b = a.__paramBool.length;
            var f = a.__paramFloat.length;
            var k = a.__paramInt.length;
            this.paramCount = b + f + k;
            this.paramBoolCount = b;
            this.paramFloatCount = f;
            this.paramIntCount = k;
            var h = 0;
            c = 0;
            for (d = b; c < d;) {
              e = c++;
              var n = a.__paramBool[e];
              this.paramPositions[h] = this.paramDataLength;
              var g = n.value != null ? n.value.length : 0;
              this.paramLengths[h] = g;
              this.paramDataLength += g;
              this.paramTypes[h] = 0;
              this.paramRefs_Bool[e] = n;
              ++h;
            }
            c = 0;
            for (d = f; c < d;) {
              e = c++;
              n = a.__paramFloat[e];
              this.paramPositions[h] = this.paramDataLength;
              g = n.value != null ? n.value.length : 0;
              this.paramLengths[h] = g;
              this.paramDataLength += g;
              this.paramTypes[h] = 1;
              this.paramRefs_Float[e] = n;
              ++h;
            }
            c = 0;
            for (d = k; c < d;) {
              e = c++;
              n = a.__paramInt[e];
              this.paramPositions[h] = this.paramDataLength;
              g = n.value != null ? n.value.length : 0;
              this.paramLengths[h] = g;
              this.paramDataLength += g;
              this.paramTypes[h] = 2;
              this.paramRefs_Int[e] = n;
              ++h;
            }
            if (this.paramDataLength > 0) {
              if (this.paramData == null) {
                c = this.paramDataLength;
                var p = n = h = k = d = null;
                this.paramData = c = c != null ? new Float32Array(c) : d != null ? new Float32Array(d) : k != null ? new Float32Array(k.__array) : h != null ? new Float32Array(h) : n != null ? p == null ? new Float32Array(n, 0) : new Float32Array(n, 0, p) : null;
              } else if (this.paramDataLength > this.paramData.length) {
                c = this.paramDataLength;
                p = n = h = k = d = null;
                c = c != null ? new Float32Array(c) : d != null ? new Float32Array(d) : k != null ? new Float32Array(k.__array) : h != null ? new Float32Array(h) : n != null ? p == null ? new Float32Array(n, 0) : new Float32Array(n, 0, p) : null;
                c.set(this.paramData);
                this.paramData = c;
              }
            }
            c = p = n = h = k = 0;
            for (d = this.paramCount; c < d;) {
              e = c++;
              g = this.paramLengths[e];
              if (e < b) {
                e = this.paramRefs_Bool[k];
                ++k;
                for (var l = 0; l < g;) {
                  var m = l++;
                  this.paramData[p] = e.value[m] ? 1 : 0;
                  ++p;
                }
              } else if (e < b + f) {
                e = this.paramRefs_Float[h];
                ++h;
                l = 0;
                while (l < g) {
                  m = l++;
                  this.paramData[p] = e.value[m];
                  ++p;
                }
              } else {
                e = this.paramRefs_Int[n];
                ++n;
                l = 0;
                while (l < g) {
                  m = l++;
                  this.paramData[p] = e.value[m];
                  ++p;
                }
              }
            }
            this.shader = a;
          }
        },
        __class__: rm
      };
      function Hb(a, b, c) {
        this.driverInfo = "OpenGL (Direct blitting)";
        this.backBufferHeight = this.backBufferWidth = 0;
        pa.call(this);
        this.__stage = a;
        this.__contextState = b;
        this.__stage3D = c;
        this.__context = a.window.context;
        this.gl = this.__context.webgl;
        if (this.__contextState == null) {
          this.__contextState = new Tj();
        }
        this.__state = new Tj();
        var d;
        this.__vertexConstants = new Float32Array(512);
        this.__fragmentConstants = new Float32Array(512);
        var e = null;
        a = [1, 1, 1, 1];
        var f = d = c = b = null;
        this.__positionScale = a = e != null ? new Float32Array(e) : a != null ? new Float32Array(a) : b != null ? new Float32Array(b.__array) : c != null ? new Float32Array(c) : d != null ? f == null ? new Float32Array(d, 0) : new Float32Array(d, 0, f) : null;
        this.__programs = new ua();
        if (Hb.__glMaxViewportDims == -1) {
          Hb.__glMaxViewportDims = this.gl.getParameter(this.gl.MAX_VIEWPORT_DIMS);
        }
        this.maxBackBufferHeight = this.maxBackBufferWidth = Hb.__glMaxViewportDims;
        if (Hb.__glMaxTextureMaxAnisotropy == -1) {
          a = this.gl.getExtension("EXT_texture_filter_anisotropic");
          if (a == null || !Object.prototype.hasOwnProperty.call(a, "MAX_TEXTURE_MAX_ANISOTROPY_EXT")) {
            a = this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic");
          }
          if (a == null || !Object.prototype.hasOwnProperty.call(a, "MAX_TEXTURE_MAX_ANISOTROPY_EXT")) {
            a = this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
          }
          if (a != null) {
            Hb.__glTextureMaxAnisotropy = a.TEXTURE_MAX_ANISOTROPY_EXT;
            Hb.__glMaxTextureMaxAnisotropy = this.gl.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
          } else {
            Hb.__glTextureMaxAnisotropy = 0;
            Hb.__glMaxTextureMaxAnisotropy = 0;
          }
        }
        if (Hb.__glDepthStencil == -1) {
          Hb.__glDepthStencil = this.gl.DEPTH_STENCIL;
        }
        if (Hb.__glMemoryTotalAvailable == -1) {
          a = this.gl.getExtension("NVX_gpu_memory_info");
          if (a != null) {
            Hb.__glMemoryTotalAvailable = a.GPU_MEMORY_INFO_DEDICATED_VIDMEM_NVX;
            Hb.__glMemoryCurrentAvailable = a.GPU_MEMORY_INFO_CURRENT_AVAILABLE_VIDMEM_NVX;
          }
        }
        if (Hb.__driverInfo == null) {
          a = this.gl.getParameter(this.gl.VENDOR);
          b = this.gl.getParameter(this.gl.VERSION);
          c = this.gl.getParameter(this.gl.RENDERER);
          d = this.gl.getParameter(this.gl.SHADING_LANGUAGE_VERSION);
          Hb.__driverInfo = "OpenGL Vendor=" + a + " Version=" + b + " Renderer=" + c + " GLSL=" + d;
        }
        this.driverInfo = Hb.__driverInfo;
        this.__quadIndexBufferElements = 16383;
        e = this.__quadIndexBufferCount = this.__quadIndexBufferElements * 6;
        f = d = c = b = a = null;
        a = e != null ? new Uint16Array(e) : a != null ? new Uint16Array(a) : b != null ? new Uint16Array(b.__array) : c != null ? new Uint16Array(c) : d != null ? f == null ? new Uint16Array(d, 0) : new Uint16Array(d, 0, f) : null;
        d = c = b = 0;
        for (f = this.__quadIndexBufferElements; d < f;) {
          d++;
          a[b] = c;
          a[b + 1] = c + 1;
          a[b + 2] = c + 2;
          a[b + 3] = c + 2;
          a[b + 4] = c + 1;
          a[b + 5] = c + 3;
          b += 6;
          c += 4;
        }
        this.__quadIndexBuffer = this.createIndexBuffer(this.__quadIndexBufferCount);
        this.__quadIndexBuffer.uploadFromTypedArray(a);
      }
      g["openfl.display3D.Context3D"] = Hb;
      Hb.__name__ = "openfl.display3D.Context3D";
      Hb.__super__ = pa;
      Hb.prototype = q(pa.prototype, {
        clear: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = 7;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 1;
          }
          if (d == null) {
            d = 1;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.__flushGLFramebuffer();
          this.__flushGLViewport();
          var h = 0;
          if ((k & 1) != 0) {
            if (this.__state.renderToTexture == null) {
              if (this.__stage.context3D == this && !this.__stage.__renderer.__cleared) {
                this.__stage.__renderer.__cleared = true;
              }
              this.__cleared = true;
            }
            h |= this.gl.COLOR_BUFFER_BIT;
            if (this.__contextState.colorMaskRed != 1 || this.__contextState.colorMaskGreen != 1 || this.__contextState.colorMaskBlue != 1 || this.__contextState.colorMaskAlpha != 1) {
              this.gl.colorMask(true, true, true, true);
              this.__contextState.colorMaskRed = true;
              this.__contextState.colorMaskGreen = true;
              this.__contextState.colorMaskBlue = true;
              this.__contextState.colorMaskAlpha = true;
            }
            this.gl.clearColor(a, b, c, d);
          }
          if ((k & 2) != 0) {
            h |= this.gl.DEPTH_BUFFER_BIT;
            if (this.__contextState.depthMask != 1) {
              this.gl.depthMask(true);
              this.__contextState.depthMask = true;
            }
            this.gl.clearDepth(e);
          }
          if ((k & 4) != 0) {
            h |= this.gl.STENCIL_BUFFER_BIT;
            if (this.__contextState.stencilWriteMask != 255) {
              this.gl.stencilMask(255);
              this.__contextState.stencilWriteMask = 255;
            }
            this.gl.clearStencil(f);
            this.__contextState.stencilWriteMask = 255;
          }
          if (h != 0) {
            this.__setGLScissorTest(false);
            this.gl.clear(h);
          }
        },
        configureBackBuffer: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = true;
          }
          if (e) {
            a = a * this.__stage.window.__scale | 0;
            b = b * this.__stage.window.__scale | 0;
          }
          if (this.__stage3D == null) {
            this.backBufferWidth = a;
            this.backBufferHeight = b;
            this.__backBufferAntiAlias = c;
            this.__state.backBufferEnableDepthAndStencil = d;
            this.__backBufferWantsBestResolution = e;
            this.__backBufferWantsBestResolutionOnBrowserZoom = f;
          } else {
            if (this.__backBufferTexture == null || this.backBufferWidth != a || this.backBufferHeight != b) {
              if (this.__backBufferTexture != null) {
                this.__backBufferTexture.dispose();
              }
              if (this.__frontBufferTexture != null) {
                this.__frontBufferTexture.dispose();
              }
              this.__backBufferTexture = this.createRectangleTexture(a, b, 1, true);
              this.__frontBufferTexture = this.createRectangleTexture(a, b, 1, true);
              if (this.__stage3D.__vertexBuffer == null) {
                this.__stage3D.__vertexBuffer = this.createVertexBuffer(4, 5);
              }
              var k = e ? a : a * this.__stage.window.__scale | 0;
              var h = e ? b : b * this.__stage.window.__scale | 0;
              k = ab.toFloatVector(null, null, null, [k, h, 0, 1, 1, 0, h, 0, 0, 1, k, 0, 0, 1, 0, 0, 0, 0, 0, 0]);
              this.__stage3D.__vertexBuffer.uploadFromVector(k, 0, 20);
              if (this.__stage3D.__indexBuffer == null) {
                this.__stage3D.__indexBuffer = this.createIndexBuffer(6);
                k = ab.toIntVector(null, null, null, [0, 1, 2, 2, 1, 3]);
                this.__stage3D.__indexBuffer.uploadFromVector(k, 0, 6);
              }
            }
            this.backBufferWidth = a;
            this.backBufferHeight = b;
            this.__backBufferAntiAlias = c;
            this.__state.backBufferEnableDepthAndStencil = d;
            this.__backBufferWantsBestResolution = e;
            this.__backBufferWantsBestResolutionOnBrowserZoom = f;
            this.__state.__primaryGLFramebuffer = this.__backBufferTexture.__getGLFramebuffer(d, c, 0);
            this.__frontBufferTexture.__getGLFramebuffer(d, c, 0);
          }
        },
        createIndexBuffer: function (a, b) {
          if (b == null) {
            b = 1;
          }
          return new Jo(this, a, b);
        },
        createProgram: function (a) {
          if (a == null) {
            a = 0;
          }
          return new Ko(this, a);
        },
        createRectangleTexture: function (a, b, c, d) {
          return new Uj(this, a, b, Tp.toString(c), d);
        },
        createVertexBuffer: function (a, b, c) {
          if (c == null) {
            c = 1;
          }
          return new Lo(this, a, b, Ap.toString(c));
        },
        drawTriangles: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = 0;
          }
          if (this.__state.renderToTexture == null) {
            if (this.__stage.context3D != this || this.__stage.__renderer.__cleared) {
              if (!this.__cleared) {
                this.clear(0, 0, 0, 0, 1, 0, 1);
              }
            } else {
              this.__stage.__renderer.__clear();
            }
          }
          this.__flushGL();
          if (this.__state.program != null) {
            this.__state.program.__flush();
          }
          c = c == -1 ? a.__numIndices : c * 3;
          this.__bindGLElementArrayBuffer(a.__id);
          this.gl.drawElements(this.gl.TRIANGLES, c, this.gl.UNSIGNED_SHORT, b * 2);
        },
        present: function () {
          this.setRenderToBackBuffer();
          if (this.__stage3D != null && this.__backBufferTexture != null) {
            if (!this.__cleared) {
              this.clear(0, 0, 0, 0, 1, 0, 1);
            }
            var a = this.__backBufferTexture;
            this.__backBufferTexture = this.__frontBufferTexture;
            this.__frontBufferTexture = a;
            this.__state.__primaryGLFramebuffer = this.__backBufferTexture.__getGLFramebuffer(this.__state.backBufferEnableDepthAndStencil, this.__backBufferAntiAlias, 0);
            this.__cleared = false;
          }
          this.__present = true;
        },
        setBlendFactors: function (a, b) {
          this.setBlendFactorsSeparate(a, b, a, b);
        },
        setBlendFactorsSeparate: function (a, b, c, d) {
          this.__state.blendSourceRGBFactor = a;
          this.__state.blendDestinationRGBFactor = b;
          this.__state.blendSourceAlphaFactor = c;
          this.__state.blendDestinationAlphaFactor = d;
          this.__setGLBlendEquation(this.gl.FUNC_ADD);
        },
        setColorMask: function (a, b, c, d) {
          this.__state.colorMaskRed = a;
          this.__state.colorMaskGreen = b;
          this.__state.colorMaskBlue = c;
          this.__state.colorMaskAlpha = d;
        },
        setCulling: function (a) {
          this.__state.culling = a;
        },
        setDepthTest: function (a, b) {
          this.__state.depthMask = a;
          this.__state.depthCompareMode = b;
        },
        setProgram: function (a) {
          this.__state.program = a;
          this.__state.shader = null;
          if (a != null) {
            for (var b = 0, c = a.__samplerStates.length; b < c;) {
              var d = b++;
              if (this.__state.samplerStates[d] == null) {
                this.__state.samplerStates[d] = a.__samplerStates[d].clone();
              } else {
                this.__state.samplerStates[d].copyFrom(a.__samplerStates[d]);
              }
            }
          }
        },
        setProgramConstantsFromMatrix: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (this.__state.program != null && this.__state.program.__format == 1) {
            this.__flushGLProgram();
            a = new Float32Array(16);
            a[0] = c.rawData.get(0);
            a[1] = c.rawData.get(1);
            a[2] = c.rawData.get(2);
            a[3] = c.rawData.get(3);
            a[4] = c.rawData.get(4);
            a[5] = c.rawData.get(5);
            a[6] = c.rawData.get(6);
            a[7] = c.rawData.get(7);
            a[8] = c.rawData.get(8);
            a[9] = c.rawData.get(9);
            a[10] = c.rawData.get(10);
            a[11] = c.rawData.get(11);
            a[12] = c.rawData.get(12);
            a[13] = c.rawData.get(13);
            a[14] = c.rawData.get(14);
            a[15] = c.rawData.get(15);
            Xc.uniformMatrix4fv(this.gl, b, d, a);
          } else {
            var e = (a = a == 1) ? this.__vertexConstants : this.__fragmentConstants;
            c = c.rawData;
            var f = b * 4;
            if (d) {
              e[f++] = c.get(0);
              e[f++] = c.get(4);
              e[f++] = c.get(8);
              e[f++] = c.get(12);
              e[f++] = c.get(1);
              e[f++] = c.get(5);
              e[f++] = c.get(9);
              e[f++] = c.get(13);
              e[f++] = c.get(2);
              e[f++] = c.get(6);
              e[f++] = c.get(10);
              e[f++] = c.get(14);
              e[f++] = c.get(3);
              e[f++] = c.get(7);
              e[f++] = c.get(11);
            } else {
              e[f++] = c.get(0);
              e[f++] = c.get(1);
              e[f++] = c.get(2);
              e[f++] = c.get(3);
              e[f++] = c.get(4);
              e[f++] = c.get(5);
              e[f++] = c.get(6);
              e[f++] = c.get(7);
              e[f++] = c.get(8);
              e[f++] = c.get(9);
              e[f++] = c.get(10);
              e[f++] = c.get(11);
              e[f++] = c.get(12);
              e[f++] = c.get(13);
              e[f++] = c.get(14);
            }
            e[f++] = c.get(15);
            if (this.__state.program != null) {
              this.__state.program.__markDirty(a, b, 4);
            }
          }
        },
        setRenderToBackBuffer: function () {
          this.__state.renderToTexture = null;
        },
        setRenderToTexture: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          this.__state.renderToTexture = a;
          this.__state.renderToTextureDepthStencil = b;
          this.__state.renderToTextureAntiAlias = c;
          this.__state.renderToTextureSurfaceSelector = d;
        },
        setSamplerStateAt: function (a, b, c, d) {
          if (this.__state.samplerStates[a] == null) {
            this.__state.samplerStates[a] = new Jh();
          }
          a = this.__state.samplerStates[a];
          a.wrap = b;
          a.filter = c;
          a.mipfilter = d;
        },
        setScissorRectangle: function (a) {
          if (a != null) {
            this.__state.scissorEnabled = true;
            this.__state.scissorRectangle.copyFrom(a);
          } else {
            this.__state.scissorEnabled = false;
          }
        },
        setStencilActions: function (a, b, c, d, e) {
          if (e == null) {
            e = 5;
          }
          if (d == null) {
            d = 5;
          }
          if (c == null) {
            c = 5;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 2;
          }
          this.__state.stencilTriangleFace = a;
          this.__state.stencilCompareMode = b;
          this.__state.stencilPass = c;
          this.__state.stencilDepthFail = d;
          this.__state.stencilFail = e;
        },
        setStencilReferenceValue: function (a, b, c) {
          if (c == null) {
            c = 255;
          }
          if (b == null) {
            b = 255;
          }
          this.__state.stencilReferenceValue = a;
          this.__state.stencilReadMask = b;
          this.__state.stencilWriteMask = c;
        },
        setTextureAt: function (a, b) {
          this.__state.textures[a] = b;
        },
        setVertexBufferAt: function (a, b, c, d) {
          if (d == null) {
            d = 4;
          }
          if (c == null) {
            c = 0;
          }
          if (!(a < 0)) {
            if (b == null) {
              this.gl.disableVertexAttribArray(a);
              this.__bindGLArrayBuffer(null);
            } else {
              this.__bindGLArrayBuffer(b.__id);
              this.gl.enableVertexAttribArray(a);
              c *= 4;
              switch (d) {
                case 0:
                  this.gl.vertexAttribPointer(a, 4, this.gl.UNSIGNED_BYTE, true, b.__stride, c);
                  break;
                case 1:
                  this.gl.vertexAttribPointer(a, 1, this.gl.FLOAT, false, b.__stride, c);
                  break;
                case 2:
                  this.gl.vertexAttribPointer(a, 2, this.gl.FLOAT, false, b.__stride, c);
                  break;
                case 3:
                  this.gl.vertexAttribPointer(a, 3, this.gl.FLOAT, false, b.__stride, c);
                  break;
                case 4:
                  this.gl.vertexAttribPointer(a, 4, this.gl.FLOAT, false, b.__stride, c);
                  break;
                default:
                  throw new xd();
              }
            }
          }
        },
        __bindGLArrayBuffer: function (a) {
          if (this.__contextState.__currentGLArrayBuffer != a) {
            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, a);
            this.__contextState.__currentGLArrayBuffer = a;
          }
        },
        __bindGLElementArrayBuffer: function (a) {
          if (this.__contextState.__currentGLElementArrayBuffer != a) {
            this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, a);
            this.__contextState.__currentGLElementArrayBuffer = a;
          }
        },
        __bindGLFramebuffer: function (a) {
          if (this.__contextState.__currentGLFramebuffer != a) {
            this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, a);
            this.__contextState.__currentGLFramebuffer = a;
          }
        },
        __bindGLTexture2D: function (a) {
          this.gl.bindTexture(this.gl.TEXTURE_2D, a);
          this.__contextState.__currentGLTexture2D = a;
        },
        __bindGLTextureCubeMap: function (a) {
          this.gl.bindTexture(this.gl.TEXTURE_CUBE_MAP, a);
          this.__contextState.__currentGLTextureCubeMap = a;
        },
        __dispose: function () {
          this.driverInfo += " (Disposed)";
          if (this.__stage3D != null) {
            this.__stage3D.__indexBuffer = null;
            this.__stage3D.__vertexBuffer = null;
            this.__stage3D = this.__stage3D.context3D = null;
          }
          this.__positionScale = this.__frontBufferTexture = this.__fragmentConstants = this.__renderStage3DProgram = this.__context = this.__backBufferTexture = null;
          this.__present = false;
          this.__vertexConstants = this.__stage = this.__quadIndexBuffer = null;
        },
        __drawTriangles: function (a, b) {
          if (a == null) {
            a = 0;
          }
          if (this.__state.renderToTexture == null) {
            if (this.__stage.context3D != this || this.__stage.__renderer.__cleared) {
              if (!this.__cleared) {
                this.clear(0, 0, 0, 0, 1, 0, 1);
              }
            } else {
              this.__stage.__renderer.__clear();
            }
          }
          this.__flushGL();
          if (this.__state.program != null) {
            this.__state.program.__flush();
          }
          this.gl.drawArrays(this.gl.TRIANGLES, a, b);
        },
        __flushGL: function () {
          this.__flushGLProgram();
          this.__flushGLFramebuffer();
          this.__flushGLViewport();
          this.__flushGLBlend();
          if (this.__contextState.colorMaskRed != this.__state.colorMaskRed || this.__contextState.colorMaskGreen != this.__state.colorMaskGreen || this.__contextState.colorMaskBlue != this.__state.colorMaskBlue || this.__contextState.colorMaskAlpha != this.__state.colorMaskAlpha) {
            this.gl.colorMask(this.__state.colorMaskRed, this.__state.colorMaskGreen, this.__state.colorMaskBlue, this.__state.colorMaskAlpha);
            this.__contextState.colorMaskRed = this.__state.colorMaskRed;
            this.__contextState.colorMaskGreen = this.__state.colorMaskGreen;
            this.__contextState.colorMaskBlue = this.__state.colorMaskBlue;
            this.__contextState.colorMaskAlpha = this.__state.colorMaskAlpha;
          }
          this.__flushGLCulling();
          this.__flushGLDepth();
          this.__flushGLScissor();
          this.__flushGLStencil();
          this.__flushGLTextures();
        },
        __flushGLBlend: function () {
          if (this.__contextState.blendDestinationRGBFactor != this.__state.blendDestinationRGBFactor || this.__contextState.blendSourceRGBFactor != this.__state.blendSourceRGBFactor || this.__contextState.blendDestinationAlphaFactor != this.__state.blendDestinationAlphaFactor || this.__contextState.blendSourceAlphaFactor != this.__state.blendSourceAlphaFactor) {
            this.__setGLBlend(true);
            if (this.__state.blendDestinationRGBFactor == this.__state.blendDestinationAlphaFactor && this.__state.blendSourceRGBFactor == this.__state.blendSourceAlphaFactor) {
              this.gl.blendFunc(this.__getGLBlend(this.__state.blendSourceRGBFactor), this.__getGLBlend(this.__state.blendDestinationRGBFactor));
            } else {
              this.gl.blendFuncSeparate(this.__getGLBlend(this.__state.blendSourceRGBFactor), this.__getGLBlend(this.__state.blendDestinationRGBFactor), this.__getGLBlend(this.__state.blendSourceAlphaFactor), this.__getGLBlend(this.__state.blendDestinationAlphaFactor));
            }
            this.__contextState.blendDestinationRGBFactor = this.__state.blendDestinationRGBFactor;
            this.__contextState.blendSourceRGBFactor = this.__state.blendSourceRGBFactor;
            this.__contextState.blendDestinationAlphaFactor = this.__state.blendDestinationAlphaFactor;
            this.__contextState.blendSourceAlphaFactor = this.__state.blendSourceAlphaFactor;
          }
        },
        __flushGLCulling: function () {
          if (this.__contextState.culling != this.__state.culling) {
            if (this.__state.culling == 3) {
              this.__setGLCullFace(false);
            } else {
              this.__setGLCullFace(true);
              switch (this.__state.culling) {
                case 0:
                  this.gl.cullFace(this.gl.BACK);
                  break;
                case 1:
                  this.gl.cullFace(this.gl.FRONT);
                  break;
                case 2:
                  this.gl.cullFace(this.gl.FRONT_AND_BACK);
                  break;
                case 3:
                  break;
                default:
                  throw new xd();
              }
            }
            this.__contextState.culling = this.__state.culling;
          }
        },
        __flushGLDepth: function () {
          var a = this.__state.depthMask && (this.__state.renderToTexture != null ? this.__state.renderToTextureDepthStencil : this.__state.backBufferEnableDepthAndStencil);
          if (this.__contextState.depthMask != a) {
            this.gl.depthMask(a);
            this.__contextState.depthMask = a;
          }
          if (this.__contextState.depthCompareMode != this.__state.depthCompareMode) {
            switch (this.__state.depthCompareMode) {
              case 0:
                this.gl.depthFunc(this.gl.ALWAYS);
                break;
              case 1:
                this.gl.depthFunc(this.gl.EQUAL);
                break;
              case 2:
                this.gl.depthFunc(this.gl.GREATER);
                break;
              case 3:
                this.gl.depthFunc(this.gl.GEQUAL);
                break;
              case 4:
                this.gl.depthFunc(this.gl.LESS);
                break;
              case 5:
                this.gl.depthFunc(this.gl.LEQUAL);
                break;
              case 6:
                this.gl.depthFunc(this.gl.NEVER);
                break;
              case 7:
                this.gl.depthFunc(this.gl.NOTEQUAL);
                break;
              default:
                throw new xd();
            }
            this.__contextState.depthCompareMode = this.__state.depthCompareMode;
          }
        },
        __flushGLFramebuffer: function () {
          if (this.__state.renderToTexture != null) {
            if (this.__contextState.renderToTexture != this.__state.renderToTexture || this.__contextState.renderToTextureSurfaceSelector != this.__state.renderToTextureSurfaceSelector) {
              var a = this.__state.renderToTexture.__getGLFramebuffer(this.__state.renderToTextureDepthStencil, this.__state.renderToTextureAntiAlias, this.__state.renderToTextureSurfaceSelector);
              this.__bindGLFramebuffer(a);
              this.__contextState.renderToTexture = this.__state.renderToTexture;
              this.__contextState.renderToTextureAntiAlias = this.__state.renderToTextureAntiAlias;
              this.__contextState.renderToTextureDepthStencil = this.__state.renderToTextureDepthStencil;
              this.__contextState.renderToTextureSurfaceSelector = this.__state.renderToTextureSurfaceSelector;
            }
            this.__setGLDepthTest(this.__state.renderToTextureDepthStencil);
            this.__setGLStencilTest(this.__state.renderToTextureDepthStencil);
            this.__setGLFrontFace(true);
          } else {
            if (this.__stage == null && this.backBufferWidth == 0 && this.backBufferHeight == 0) {
              throw new Pb("Context3D backbuffer has not been configured");
            }
            if (this.__contextState.renderToTexture != null || this.__contextState.__currentGLFramebuffer != this.__state.__primaryGLFramebuffer || this.__contextState.backBufferEnableDepthAndStencil != this.__state.backBufferEnableDepthAndStencil) {
              this.__bindGLFramebuffer(this.__state.__primaryGLFramebuffer);
              this.__contextState.renderToTexture = null;
              this.__contextState.backBufferEnableDepthAndStencil = this.__state.backBufferEnableDepthAndStencil;
            }
            this.__setGLDepthTest(this.__state.backBufferEnableDepthAndStencil);
            this.__setGLStencilTest(this.__state.backBufferEnableDepthAndStencil);
            this.__setGLFrontFace(this.__stage.context3D != this);
          }
        },
        __flushGLProgram: function () {
          var a = this.__state.shader;
          var b = this.__state.program;
          if (this.__contextState.shader != a) {
            if (this.__contextState.shader != null) {
              this.__contextState.shader.__disable();
            }
            if (a != null) {
              a.__enable();
            }
            this.__contextState.shader = a;
          }
          if (this.__contextState.program != b) {
            if (this.__contextState.program != null) {
              this.__contextState.program.__disable();
            }
            if (b != null) {
              b.__enable();
            }
            this.__contextState.program = b;
          }
          if (b != null && b.__format == 0) {
            this.__positionScale[1] = this.__stage.context3D == this && this.__state.renderToTexture == null ? 1 : -1;
            b.__setPositionScale(this.__positionScale);
          }
        },
        __flushGLScissor: function () {
          if (this.__state.scissorEnabled) {
            this.__setGLScissorTest(true);
            this.__contextState.scissorEnabled = true;
            var a = this.__state.scissorRectangle.x | 0;
            var b = this.__state.scissorRectangle.y | 0;
            var c = this.__state.scissorRectangle.width | 0;
            var d = this.__state.scissorRectangle.height | 0;
            if (this.__backBufferWantsBestResolution) {
              a = this.__state.scissorRectangle.x * this.__stage.window.__scale | 0;
              b = this.__state.scissorRectangle.y * this.__stage.window.__scale | 0;
              c = this.__state.scissorRectangle.width * this.__stage.window.__scale | 0;
              d = this.__state.scissorRectangle.height * this.__stage.window.__scale | 0;
            }
            if (this.__state.renderToTexture == null && this.__stage3D == null) {
              b = (this.__stage.window.__height * this.__stage.window.__scale | 0) - d - b;
            }
            if (this.__contextState.scissorRectangle.x != a || this.__contextState.scissorRectangle.y != b || this.__contextState.scissorRectangle.width != c || this.__contextState.scissorRectangle.height != d) {
              this.gl.scissor(a, b, c, d);
              this.__contextState.scissorRectangle.setTo(a, b, c, d);
            }
          } else if (this.__contextState.scissorEnabled != this.__state.scissorEnabled) {
            this.__setGLScissorTest(false);
            this.__contextState.scissorEnabled = false;
          }
        },
        __flushGLStencil: function () {
          if (this.__contextState.stencilTriangleFace != this.__state.stencilTriangleFace || this.__contextState.stencilPass != this.__state.stencilPass || this.__contextState.stencilDepthFail != this.__state.stencilDepthFail || this.__contextState.stencilFail != this.__state.stencilFail) {
            this.gl.stencilOpSeparate(this.__getGLTriangleFace(this.__state.stencilTriangleFace), this.__getGLStencilAction(this.__state.stencilFail), this.__getGLStencilAction(this.__state.stencilDepthFail), this.__getGLStencilAction(this.__state.stencilPass));
            this.__contextState.stencilTriangleFace = this.__state.stencilTriangleFace;
            this.__contextState.stencilPass = this.__state.stencilPass;
            this.__contextState.stencilDepthFail = this.__state.stencilDepthFail;
            this.__contextState.stencilFail = this.__state.stencilFail;
          }
          if (this.__contextState.stencilWriteMask != this.__state.stencilWriteMask) {
            this.gl.stencilMask(this.__state.stencilWriteMask);
            this.__contextState.stencilWriteMask = this.__state.stencilWriteMask;
          }
          if (this.__contextState.stencilCompareMode != this.__state.stencilCompareMode || this.__contextState.stencilReferenceValue != this.__state.stencilReferenceValue || this.__contextState.stencilReadMask != this.__state.stencilReadMask) {
            this.gl.stencilFunc(this.__getGLCompareMode(this.__state.stencilCompareMode), this.__state.stencilReferenceValue, this.__state.stencilReadMask);
            this.__contextState.stencilCompareMode = this.__state.stencilCompareMode;
            this.__contextState.stencilReferenceValue = this.__state.stencilReferenceValue;
            this.__contextState.stencilReadMask = this.__state.stencilReadMask;
          }
        },
        __flushGLTextures: function () {
          var a = 0;
          for (var b, c, d = 0, e = this.__state.textures.length; d < e;) {
            var f = d++;
            b = this.__state.textures[f];
            c = this.__state.samplerStates[f];
            if (c == null) {
              this.__state.samplerStates[f] = new Jh();
              c = this.__state.samplerStates[f];
            }
            this.gl.activeTexture(this.gl.TEXTURE0 + a);
            if (b != null) {
              if (b.__textureTarget == this.gl.TEXTURE_2D) {
                this.__bindGLTexture2D(b.__getTexture());
              } else {
                this.__bindGLTextureCubeMap(b.__getTexture());
              }
              this.__contextState.textures[f] = b;
              b.__setSamplerState(c);
            } else {
              this.__bindGLTexture2D(null);
            }
            if (this.__state.program != null && this.__state.program.__format == 0 && c.textureAlpha) {
              this.gl.activeTexture(this.gl.TEXTURE0 + a + 4);
              if (b != null && b.__alphaTexture != null) {
                if (b.__alphaTexture.__textureTarget == this.gl.TEXTURE_2D) {
                  this.__bindGLTexture2D(b.__alphaTexture.__getTexture());
                } else {
                  this.__bindGLTextureCubeMap(b.__alphaTexture.__getTexture());
                }
                b.__alphaTexture.__setSamplerState(c);
                this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[a].location, 1);
              } else {
                this.__bindGLTexture2D(null);
                if (this.__state.program.__agalAlphaSamplerEnabled[a] != null) {
                  this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[a].location, 0);
                }
              }
            }
            ++a;
          }
        },
        __flushGLViewport: function () {
          if (this.__state.renderToTexture == null) {
            if (this.__stage.context3D == this) {
              var a = this.backBufferWidth;
              var b = this.backBufferHeight;
              if (this.__stage3D == null && !this.__backBufferWantsBestResolution) {
                a = this.backBufferWidth * this.__stage.window.__scale | 0;
                b = this.backBufferHeight * this.__stage.window.__scale | 0;
              }
              var c = this.__stage3D == null ? 0 : this.__stage3D.get_x() | 0;
              var d = this.__stage.window.__height * this.__stage.window.__scale - b - (this.__stage3D == null ? 0 : this.__stage3D.get_y()) | 0;
              this.gl.viewport(c, d, a, b);
            } else {
              this.gl.viewport(0, 0, this.backBufferWidth, this.backBufferHeight);
            }
          } else {
            b = a = 0;
            if (this.__state.renderToTexture instanceof Bm) {
              b = this.__state.renderToTexture;
              a = b.__width;
              b = b.__height;
            } else if (this.__state.renderToTexture instanceof Uj) {
              b = this.__state.renderToTexture;
              a = b.__width;
              b = b.__height;
            } else if (this.__state.renderToTexture instanceof Cm) {
              b = this.__state.renderToTexture;
              b = a = b.__size;
            }
            this.gl.viewport(0, 0, a, b);
          }
        },
        __getGLBlend: function (a) {
          switch (a) {
            case 0:
              return this.gl.DST_ALPHA;
            case 1:
              return this.gl.DST_COLOR;
            case 2:
              return this.gl.ONE;
            case 3:
              return this.gl.ONE_MINUS_DST_ALPHA;
            case 4:
              return this.gl.ONE_MINUS_DST_COLOR;
            case 5:
              return this.gl.ONE_MINUS_SRC_ALPHA;
            case 6:
              return this.gl.ONE_MINUS_SRC_COLOR;
            case 7:
              return this.gl.SRC_ALPHA;
            case 8:
              return this.gl.SRC_COLOR;
            case 9:
              return this.gl.ZERO;
            default:
              throw new xd();
          }
        },
        __getGLCompareMode: function (a) {
          switch (a) {
            case 0:
              return this.gl.ALWAYS;
            case 1:
              return this.gl.EQUAL;
            case 2:
              return this.gl.GREATER;
            case 3:
              return this.gl.GEQUAL;
            case 4:
              return this.gl.LESS;
            case 5:
              return this.gl.LEQUAL;
            case 6:
              return this.gl.NEVER;
            case 7:
              return this.gl.NOTEQUAL;
            default:
              return this.gl.EQUAL;
          }
        },
        __getGLStencilAction: function (a) {
          switch (a) {
            case 0:
              return this.gl.DECR;
            case 1:
              return this.gl.DECR_WRAP;
            case 2:
              return this.gl.INCR;
            case 3:
              return this.gl.INCR_WRAP;
            case 4:
              return this.gl.INVERT;
            case 5:
              return this.gl.KEEP;
            case 6:
              return this.gl.REPLACE;
            case 7:
              return this.gl.ZERO;
            default:
              return this.gl.KEEP;
          }
        },
        __getGLTriangleFace: function (a) {
          switch (a) {
            case 0:
              return this.gl.BACK;
            case 1:
              return this.gl.FRONT;
            case 2:
              return this.gl.FRONT_AND_BACK;
            case 3:
              return this.gl.NONE;
            default:
              return this.gl.FRONT_AND_BACK;
          }
        },
        __renderStage3D: function (a) {
          var b = a.context3D;
          if (b != null && b != this && b.__frontBufferTexture != null && a.visible && this.backBufferHeight > 0 && this.backBufferWidth > 0) {
            if (this.__renderStage3DProgram == null) {
              var c = new ta();
              c.assemble(Bp.toString(1), "m44 op, va0, vc0\nmov v0, va1");
              var d = new ta();
              d.assemble(Bp.toString(0), "tex ft1, v0, fs0 <2d,nearest,nomip>\nmov oc, ft1");
              this.__renderStage3DProgram = this.createProgram();
              this.__renderStage3DProgram.upload(c.agalcode, d.agalcode);
            }
            this.setProgram(this.__renderStage3DProgram);
            this.setBlendFactors(2, 9);
            this.setColorMask(true, true, true, true);
            this.setCulling(3);
            this.setDepthTest(false, 0);
            this.setStencilActions();
            this.setStencilReferenceValue(0, 0, 0);
            this.setScissorRectangle(null);
            this.setTextureAt(0, b.__frontBufferTexture);
            this.setVertexBufferAt(0, a.__vertexBuffer, 0, 3);
            this.setVertexBufferAt(1, a.__vertexBuffer, 3, 2);
            this.setProgramConstantsFromMatrix(1, 0, a.__renderTransform, true);
            this.drawTriangles(a.__indexBuffer);
            this.__present = true;
          }
        },
        __setGLBlend: function (a) {
          if (this.__contextState.__enableGLBlend != a) {
            if (a) {
              this.gl.enable(this.gl.BLEND);
            } else {
              this.gl.disable(this.gl.BLEND);
            }
            this.__contextState.__enableGLBlend = a;
          }
        },
        __setGLBlendEquation: function (a) {
          if (this.__contextState.__glBlendEquation != a) {
            this.gl.blendEquation(a);
            this.__contextState.__glBlendEquation = a;
          }
        },
        __setGLCullFace: function (a) {
          if (this.__contextState.__enableGLCullFace != a) {
            if (a) {
              this.gl.enable(this.gl.CULL_FACE);
            } else {
              this.gl.disable(this.gl.CULL_FACE);
            }
            this.__contextState.__enableGLCullFace = a;
          }
        },
        __setGLDepthTest: function (a) {
          if (this.__contextState.__enableGLDepthTest != a) {
            if (a) {
              this.gl.enable(this.gl.DEPTH_TEST);
            } else {
              this.gl.disable(this.gl.DEPTH_TEST);
            }
            this.__contextState.__enableGLDepthTest = a;
          }
        },
        __setGLFrontFace: function (a) {
          if (this.__contextState.__frontFaceGLCCW != a) {
            this.gl.frontFace(a ? this.gl.CCW : this.gl.CW);
            this.__contextState.__frontFaceGLCCW = a;
          }
        },
        __setGLScissorTest: function (a) {
          if (this.__contextState.__enableGLScissorTest != a) {
            if (a) {
              this.gl.enable(this.gl.SCISSOR_TEST);
            } else {
              this.gl.disable(this.gl.SCISSOR_TEST);
            }
            this.__contextState.__enableGLScissorTest = a;
          }
        },
        __setGLStencilTest: function (a) {
          if (this.__contextState.__enableGLStencilTest != a) {
            if (a) {
              this.gl.enable(this.gl.STENCIL_TEST);
            } else {
              this.gl.disable(this.gl.STENCIL_TEST);
            }
            this.__contextState.__enableGLStencilTest = a;
          }
        },
        __class__: Hb
      });
      var Ap = {
        fromString: function (a) {
          switch (a) {
            case "dynamicDraw":
              return 0;
            case "staticDraw":
              return 1;
            default:
              return null;
          }
        },
        toString: function (a) {
          switch (a) {
            case 0:
              return "dynamicDraw";
            case 1:
              return "staticDraw";
            default:
              return null;
          }
        }
      };
      var Bp = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "fragment";
            case 1:
              return "vertex";
            default:
              return null;
          }
        }
      };
      var Tp = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "bgrPacked565";
            case 1:
              return "bgra";
            case 2:
              return "bgraPacked4444";
            case 3:
              return "compressed";
            case 4:
              return "compressedAlpha";
            case 5:
              return "rgbaHalfFloat";
            default:
              return null;
          }
        }
      };
      function Jo(a, b, c) {
        this.__context = a;
        this.__numIndices = b;
        a = this.__context.gl;
        this.__id = a.createBuffer();
        this.__usage = c == 0 ? a.DYNAMIC_DRAW : a.STATIC_DRAW;
      }
      g["openfl.display3D.IndexBuffer3D"] = Jo;
      Jo.__name__ = "openfl.display3D.IndexBuffer3D";
      Jo.prototype = {
        uploadFromTypedArray: function (a, b) {
          if (a != null) {
            b = this.__context.gl;
            this.__context.__bindGLElementArrayBuffer(this.__id);
            Xc.bufferData(b, b.ELEMENT_ARRAY_BUFFER, a, this.__usage);
          }
        },
        uploadFromVector: function (a, b, c) {
          if (a != null) {
            var d = b + c;
            var e = this.__tempUInt16Array;
            if (this.__tempUInt16Array == null || this.__tempUInt16Array.length < c) {
              this.__tempUInt16Array = c != null ? new Uint16Array(c) : null;
              if (e != null) {
                this.__tempUInt16Array.set(e);
              }
            }
            for (c = b; c < d;) {
              e = c++;
              this.__tempUInt16Array[e - b] = a.get(e);
            }
            this.uploadFromTypedArray(this.__tempUInt16Array);
          }
        },
        __class__: Jo
      };
      function Ko(a, b) {
        this.__context = a;
        this.__format = b;
        if (this.__format == 0) {
          this.__agalSamplerUsageMask = 0;
          this.__agalUniforms = new jb();
          this.__agalSamplerUniforms = new jb();
          this.__agalAlphaSamplerUniforms = new jb();
          this.__agalAlphaSamplerEnabled = [];
        } else {
          this.__glslAttribNames = [];
          this.__glslAttribTypes = [];
          this.__glslSamplerNames = [];
          this.__glslUniformLocations = [];
          this.__glslUniformNames = [];
          this.__glslUniformTypes = [];
        }
        this.__samplerStates = [];
      }
      g["openfl.display3D.Program3D"] = Ko;
      Ko.__name__ = "openfl.display3D.Program3D";
      Ko.prototype = {
        upload: function (a, b) {
          if (this.__format == 0) {
            var c = [];
            a = Hd.convertToGLSL(a, null);
            b = Hd.convertToGLSL(b, c);
            if (Va.level == 5) {
              Va.info(a, {
                fileName: "openfl/display3D/Program3D.hx",
                lineNumber: 399,
                className: "openfl.display3D.Program3D",
                methodName: "upload"
              });
              Va.info(b, {
                fileName: "openfl/display3D/Program3D.hx",
                lineNumber: 400,
                className: "openfl.display3D.Program3D",
                methodName: "upload"
              });
            }
            this.__deleteShaders();
            this.__uploadFromGLSL(a, b);
            this.__buildAGALUniformList();
            b = 0;
            for (a = c.length; b < a;) {
              var d = b++;
              this.__samplerStates[d] = c[d];
            }
          }
        },
        __buildAGALUniformList: function () {
          if (this.__format != 1) {
            var a = this.__context.gl;
            this.__agalUniforms.clear();
            this.__agalSamplerUniforms.clear();
            this.__agalAlphaSamplerUniforms.clear();
            this.__agalAlphaSamplerEnabled = [];
            this.__agalSamplerUsageMask = 0;
            var b = a.getProgramParameter(this.__glProgram, a.ACTIVE_UNIFORMS);
            var c = new jb();
            var d = new jb();
            for (var e = 0; e < b;) {
              var f = e++;
              var k = a.getActiveUniform(this.__glProgram, f);
              var h = k.name;
              var n = k.size;
              var g = k.type;
              k = new Dm(this.__context);
              k.name = h;
              k.size = n;
              k.type = g;
              k.location = a.getUniformLocation(this.__glProgram, k.name);
              h = k.name.indexOf("[");
              if (h >= 0) {
                k.name = k.name.substring(0, h);
              }
              switch (k.type) {
                case 35674:
                  k.regCount = 2;
                  break;
                case 35675:
                  k.regCount = 3;
                  break;
                case 35676:
                  k.regCount = 4;
                  break;
                default:
                  k.regCount = 1;
              }
              k.regCount *= k.size;
              this.__agalUniforms.add(k);
              if (k.name == "vcPositionScale") {
                this.__agalPositionScale = k;
              } else if (w.startsWith(k.name, "vc")) {
                k.regIndex = v.parseInt(k.name.substring(2));
                k.regData = this.__context.__vertexConstants;
                c.add(k);
              } else if (w.startsWith(k.name, "fc")) {
                k.regIndex = v.parseInt(k.name.substring(2));
                k.regData = this.__context.__fragmentConstants;
                d.add(k);
              } else if (w.startsWith(k.name, "sampler") && k.name.indexOf("alpha") == -1) {
                k.regIndex = v.parseInt(k.name.substring(7));
                this.__agalSamplerUniforms.add(k);
                h = 0;
                n = k.regCount;
                while (h < n) {
                  g = h++;
                  this.__agalSamplerUsageMask |= 1 << k.regIndex + g;
                }
              } else if (w.startsWith(k.name, "sampler") && w.endsWith(k.name, "_alpha")) {
                h = k.name.indexOf("_") - 7;
                k.regIndex = v.parseInt(k.name.substring(7, 7 + h)) + 4;
                this.__agalAlphaSamplerUniforms.add(k);
              } else if (w.startsWith(k.name, "sampler") && w.endsWith(k.name, "_alphaEnabled")) {
                k.regIndex = v.parseInt(k.name.substring(7));
                this.__agalAlphaSamplerEnabled[k.regIndex] = k;
              }
              if (Va.level == 5) {
                Va.verbose("" + f + " name:" + k.name + " type:" + k.type + " size:" + k.size + " location:" + v.string(k.location), {
                  fileName: "openfl/display3D/Program3D.hx",
                  lineNumber: 577,
                  className: "openfl.display3D.Program3D",
                  methodName: "__buildAGALUniformList"
                });
              }
            }
            this.__agalVertexUniformMap = new Vj(Ve.array(c));
            this.__agalFragmentUniformMap = new Vj(Ve.array(d));
          }
        },
        __deleteShaders: function () {
          var a = this.__context.gl;
          if (this.__glProgram != null) {
            this.__glProgram = null;
          }
          if (this.__glVertexShader != null) {
            a.deleteShader(this.__glVertexShader);
            this.__glVertexShader = null;
          }
          if (this.__glFragmentShader != null) {
            a.deleteShader(this.__glFragmentShader);
            this.__glFragmentShader = null;
          }
        },
        __disable: function () {},
        __enable: function () {
          var a = this.__context.gl;
          a.useProgram(this.__glProgram);
          if (this.__format == 0) {
            this.__agalVertexUniformMap.markAllDirty();
            this.__agalFragmentUniformMap.markAllDirty();
            for (var b = this.__agalSamplerUniforms.h; b != null;) {
              var c = b.item;
              b = b.next;
              if (c.regCount == 1) {
                a.uniform1i(c.location, c.regIndex);
              } else {
                throw new xd("!!! TODO: uniform location on webgl");
              }
            }
            for (b = this.__agalAlphaSamplerUniforms.h; b != null;) {
              c = b.item;
              b = b.next;
              if (c.regCount == 1) {
                a.uniform1i(c.location, c.regIndex);
              } else {
                throw new xd("!!! TODO: uniform location on webgl");
              }
            }
          }
        },
        __flush: function () {
          if (this.__format == 0) {
            this.__agalVertexUniformMap.flush();
            this.__agalFragmentUniformMap.flush();
          }
        },
        __markDirty: function (a, b, c) {
          if (this.__format != 1) {
            if (a) {
              this.__agalVertexUniformMap.markDirty(b, c);
            } else {
              this.__agalFragmentUniformMap.markDirty(b, c);
            }
          }
        },
        __setPositionScale: function (a) {
          if (this.__format != 1 && this.__agalPositionScale != null) {
            this.__context.gl.uniform4fv(this.__agalPositionScale.location, a);
          }
        },
        __uploadFromGLSL: function (a, b) {
          var c = this.__context.gl;
          this.__glVertexSource = a;
          this.__glFragmentSource = b;
          this.__glVertexShader = c.createShader(c.VERTEX_SHADER);
          c.shaderSource(this.__glVertexShader, a);
          c.compileShader(this.__glVertexShader);
          if (c.getShaderParameter(this.__glVertexShader, c.COMPILE_STATUS) == 0) {
            var d = "Error compiling vertex shader\n" + c.getShaderInfoLog(this.__glVertexShader);
            Va.error(d + ("\n" + a), {
              fileName: "openfl/display3D/Program3D.hx",
              lineNumber: 869,
              className: "openfl.display3D.Program3D",
              methodName: "__uploadFromGLSL"
            });
          }
          this.__glFragmentShader = c.createShader(c.FRAGMENT_SHADER);
          c.shaderSource(this.__glFragmentShader, b);
          c.compileShader(this.__glFragmentShader);
          if (c.getShaderParameter(this.__glFragmentShader, c.COMPILE_STATUS) == 0) {
            d = "Error compiling fragment shader\n" + c.getShaderInfoLog(this.__glFragmentShader);
            Va.error(d + ("\n" + b), {
              fileName: "openfl/display3D/Program3D.hx",
              lineNumber: 881,
              className: "openfl.display3D.Program3D",
              methodName: "__uploadFromGLSL"
            });
          }
          this.__glProgram = c.createProgram();
          if (this.__format == 0) {
            for (b = 0; b < 16;) {
              var e = b++;
              d = "va" + e;
              if (a.indexOf(" " + d) != -1) {
                c.bindAttribLocation(this.__glProgram, e, d);
              }
            }
          } else {
            b = 0;
            a = this.__glslAttribNames;
            while (b < a.length) {
              d = a[b];
              ++b;
              if (d.indexOf("Position") > -1 && w.startsWith(d, "openfl_")) {
                c.bindAttribLocation(this.__glProgram, 0, d);
                break;
              }
            }
          }
          c.attachShader(this.__glProgram, this.__glVertexShader);
          c.attachShader(this.__glProgram, this.__glFragmentShader);
          c.linkProgram(this.__glProgram);
          if (c.getProgramParameter(this.__glProgram, c.LINK_STATUS) == 0) {
            d = "Unable to initialize the shader program\n" + c.getProgramInfoLog(this.__glProgram);
            Va.error(d, {
              fileName: "openfl/display3D/Program3D.hx",
              lineNumber: 922,
              className: "openfl.display3D.Program3D",
              methodName: "__uploadFromGLSL"
            });
          }
        },
        __class__: Ko
      };
      function Dm(a) {
        this.context = a;
        this.isDirty = true;
        this.regDataPointer = new Eo(null, 0);
      }
      g["openfl.display3D.Uniform"] = Dm;
      Dm.__name__ = "openfl.display3D.Uniform";
      Dm.prototype = {
        flush: function () {
          var a = this.context.gl;
          var b = this.regIndex * 4;
          switch (this.type) {
            case 35664:
              Pp.uniform2fv(a, this.location, this.regData.subarray(b, b + this.regCount * 2));
              break;
            case 35665:
              var c = this.location;
              b = this.regData.subarray(b, b + this.regCount * 3);
              var d = null;
              if (d != null) {
                a.uniform3fv(c, b, d, null);
              } else {
                a.uniform3fv(c, b);
              }
              break;
            case 35666:
              c = this.location;
              b = this.regData.subarray(b, b + this.regCount * 4);
              d = null;
              if (d != null) {
                a.uniform4fv(c, b, d, null);
              } else {
                a.uniform4fv(c, b);
              }
              break;
            case 35674:
              Xc.uniformMatrix2fv(a, this.location, false, this.regData.subarray(b, b + this.size * 4));
              break;
            case 35675:
              Xc.uniformMatrix3fv(a, this.location, false, this.regData.subarray(b, b + this.size * 9));
              break;
            case 35676:
              Xc.uniformMatrix4fv(a, this.location, false, this.regData.subarray(b, b + this.size * 16));
              break;
            default:
              c = this.location;
              b = this.regData.subarray(b, b + this.regCount * 4);
              d = null;
              if (d != null) {
                a.uniform4fv(c, b, d, null);
              } else {
                a.uniform4fv(c, b);
              }
          }
        },
        __class__: Dm
      };
      function Vj(a) {
        this.__uniforms = a;
        this.__uniforms.sort(function (a, b) {
          return ja.compare(a.regIndex, b.regIndex);
        });
        var b = 0;
        a = 0;
        for (var c = this.__uniforms; a < c.length;) {
          var d = c[a];
          ++a;
          if (d.regIndex + d.regCount > b) {
            b = d.regIndex + d.regCount;
          }
        }
        this.__registerLookup = ab.toObjectVector(null, b);
        a = 0;
        for (c = this.__uniforms; a < c.length;) {
          d = c[a];
          ++a;
          b = 0;
          for (var e = d.regCount; b < e;) {
            var f = b++;
            this.__registerLookup.set(d.regIndex + f, d);
          }
        }
        this.__anyDirty = this.__allDirty = true;
      }
      g["openfl.display3D.UniformMap"] = Vj;
      Vj.__name__ = "openfl.display3D.UniformMap";
      Vj.prototype = {
        flush: function () {
          if (this.__anyDirty) {
            for (var a = 0, b = this.__uniforms; a < b.length;) {
              var c = b[a];
              ++a;
              if (this.__allDirty || c.isDirty) {
                c.flush();
                c.isDirty = false;
              }
            }
            this.__anyDirty = this.__allDirty = false;
          }
        },
        markAllDirty: function () {
          this.__anyDirty = this.__allDirty = true;
        },
        markDirty: function (a, b) {
          if (!this.__allDirty) {
            b = a + b;
            if (b > this.__registerLookup.get_length()) {
              b = this.__registerLookup.get_length();
            }
            while (a < b) {
              var c = this.__registerLookup.get(a);
              if (c != null) {
                this.__anyDirty = c.isDirty = true;
                a = c.regIndex + c.regCount;
              } else {
                ++a;
              }
            }
          }
        },
        __class__: Vj
      };
      function Lo(a, b, c, d) {
        this.__context = a;
        this.__numVertices = b;
        this.__vertexSize = c;
        a = this.__context.gl;
        this.__id = a.createBuffer();
        this.__stride = this.__vertexSize * 4;
        this.__usage = Ap.fromString(d) == 0 ? a.DYNAMIC_DRAW : a.STATIC_DRAW;
      }
      g["openfl.display3D.VertexBuffer3D"] = Lo;
      Lo.__name__ = "openfl.display3D.VertexBuffer3D";
      Lo.prototype = {
        uploadFromTypedArray: function (a, b) {
          if (a != null) {
            b = this.__context.gl;
            this.__context.__bindGLArrayBuffer(this.__id);
            Xc.bufferData(b, b.ARRAY_BUFFER, a, this.__usage);
          }
        },
        uploadFromVector: function (a, b, c) {
          if (a != null) {
            b *= this.__vertexSize;
            var d = c * this.__vertexSize;
            c = b + d;
            var e = this.__tempFloat32Array;
            if (this.__tempFloat32Array == null || this.__tempFloat32Array.length < d) {
              this.__tempFloat32Array = d != null ? new Float32Array(d) : null;
              if (e != null) {
                this.__tempFloat32Array.set(e);
              }
            }
            for (d = b; d < c;) {
              e = d++;
              this.__tempFloat32Array[e - b] = a.get(e);
            }
            this.uploadFromTypedArray(bj.toArrayBufferView(this.__tempFloat32Array));
          }
        },
        __class__: Lo
      };
      function Hd() {}
      g["openfl.display3D._internal.AGALConverter"] = Hd;
      Hd.__name__ = "openfl.display3D._internal.AGALConverter";
      Hd.prefixFromType = function (a, b) {
        switch (a) {
          case 0:
            return "va";
          case 1:
            if (b == ag.VERTEX) {
              return "vc";
            } else {
              return "fc";
            }
          case 2:
            if (b == ag.VERTEX) {
              return "vt";
            } else {
              return "ft";
            }
          case 3:
            return "output_";
          case 4:
            return "v";
          case 5:
            return "sampler";
          default:
            throw new xd("Invalid data!");
        }
      };
      Hd.readUInt64 = function (a) {
        var b = a.readInt();
        a = a.readInt();
        return new vb(a, b);
      };
      Hd.convertToGLSL = function (a, b) {
        a.position = 0;
        a.__endian = 1;
        var c = a.readByte() & 255;
        if (c == 176) {
          return a.readUTF();
        }
        if (c != 160) {
          throw new xd("Magic value must be 0xA0, may not be AGAL");
        }
        var d = a.readInt();
        if (d != 1) {
          throw new xd("Version must be 1");
        }
        if ((a.readByte() & 255) != 161) {
          throw new xd("Shader type ID must be 0xA1");
        }
        c = (a.readByte() & 255) == 0 ? ag.VERTEX : ag.FRAGMENT;
        var e = new Em();
        var f = "";
        while (true) {
          d = a.position;
          if (!kc.gt(Ne.get_length(a), d)) {
            break;
          }
          var h = a.readInt();
          d = a.readUnsignedInt();
          var g = Hd.readUInt64(a);
          var n = Hd.readUInt64(a);
          d = Bi.parse(d, c);
          g = Kh.parse(g, c, d.mask);
          var p = Kh.parse(n, c, d.mask);
          f += "\t";
          switch (h) {
            case 0:
              f += v.string(d.toGLSL() + " = " + g.toGLSL() + "; // mov");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              break;
            case 1:
              f += v.string(d.toGLSL() + " = " + g.toGLSL() + " + " + p.toGLSL() + "; // add");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 2:
              f += v.string(d.toGLSL() + " = " + g.toGLSL() + " - " + p.toGLSL() + "; // sub");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 3:
              f += v.string(d.toGLSL() + " = " + g.toGLSL() + " * " + p.toGLSL() + "; // mul");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 4:
              f += v.string(d.toGLSL() + " = " + g.toGLSL() + " / " + p.toGLSL() + "; // div");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 5:
              f = g.toGLSL().indexOf(".") > -1 ? f + v.string(d.toGLSL() + " = 1.0 / " + g.toGLSL() + "; // rcp") : f + v.string(d.toGLSL() + " = vec4(1) / " + g.toGLSL() + "; // rcp");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              break;
            case 6:
              f += v.string(d.toGLSL() + " = min(" + g.toGLSL() + ", " + p.toGLSL() + "); // min");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 7:
              f += v.string(d.toGLSL() + " = max(" + g.toGLSL() + ", " + p.toGLSL() + "); // max");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 8:
              f += v.string(d.toGLSL() + " = fract(" + g.toGLSL() + "); // frc");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              break;
            case 9:
              f += v.string(d.toGLSL() + " = sqrt(" + g.toGLSL() + "); // sqrt");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              break;
            case 10:
              f += v.string(d.toGLSL() + " = inversesqrt(" + g.toGLSL() + "); // rsq");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              break;
            case 11:
              f += v.string(d.toGLSL() + " = pow(" + g.toGLSL() + ", " + p.toGLSL() + "); // pow");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 12:
              f += v.string(d.toGLSL() + " = log2(" + g.toGLSL() + "); // log");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              break;
            case 13:
              f += v.string(d.toGLSL() + " = exp2(" + g.toGLSL() + "); // exp");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              break;
            case 14:
              f += v.string(d.toGLSL() + " = normalize(" + g.toGLSL() + "); // normalize");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              break;
            case 15:
              f += v.string(d.toGLSL() + " = sin(" + g.toGLSL() + "); // sin");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              break;
            case 16:
              f += v.string(d.toGLSL() + " = cos(" + g.toGLSL() + "); // cos");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              break;
            case 17:
              g.sourceMask = p.sourceMask = 7;
              f += v.string(d.toGLSL() + " = cross(vec3(" + g.toGLSL() + "), vec3(" + p.toGLSL() + ")); // crs");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 18:
              g.sourceMask = p.sourceMask = 7;
              f += v.string(d.toGLSL() + " = vec4(dot(vec3(" + g.toGLSL() + "), vec3(" + p.toGLSL() + ")))" + d.getWriteMask() + "; // dp3");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 19:
              g.sourceMask = p.sourceMask = 15;
              f += v.string(d.toGLSL() + " = vec4(dot(vec4(" + g.toGLSL() + "), vec4(" + p.toGLSL() + ")))" + d.getWriteMask() + "; // dp4");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 20:
              f += v.string(d.toGLSL() + " = abs(" + g.toGLSL() + "); // abs");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              break;
            case 21:
              f += v.string(d.toGLSL() + " = -" + g.toGLSL() + "; // neg");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              break;
            case 22:
              f += v.string(d.toGLSL() + " = clamp(" + g.toGLSL() + ", 0.0, 1.0); // saturate");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              break;
            case 23:
              h = e.getRegisterUsage(p);
              if (h != qa.VECTOR_4 && h != qa.VECTOR_4_ARRAY) {
                f += v.string(d.toGLSL() + " = " + g.toGLSL() + " * mat3(" + p.toGLSL(false) + "); // m33");
                e.addDR(d, qa.VECTOR_4);
                e.addSR(g, qa.VECTOR_4);
                e.addSR(p, qa.MATRIX_4_4);
              } else {
                g.sourceMask = p.sourceMask = 7;
                f += v.string(d.toGLSL() + " = vec3(dot(" + g.toGLSL(true) + "," + p.toGLSL(true, 0) + "), dot(" + g.toGLSL(true) + "," + p.toGLSL(true, 1) + "),dot(" + g.toGLSL(true) + "," + p.toGLSL(true, 2) + ")); // m33");
                e.addDR(d, qa.VECTOR_4);
                e.addSR(g, qa.VECTOR_4);
                e.addSR(p, qa.VECTOR_4, 0);
                e.addSR(p, qa.VECTOR_4, 1);
                e.addSR(p, qa.VECTOR_4, 2);
              }
              break;
            case 24:
              h = e.getRegisterUsage(p);
              if (h != qa.VECTOR_4 && h != qa.VECTOR_4_ARRAY) {
                f += v.string(d.toGLSL() + " = " + g.toGLSL() + " * " + p.toGLSL(false) + "; // m44");
                e.addDR(d, qa.VECTOR_4);
                e.addSR(g, qa.VECTOR_4);
                e.addSR(p, qa.MATRIX_4_4);
              } else {
                g.sourceMask = p.sourceMask = 15;
                f += v.string(d.toGLSL() + " = vec4(dot(" + g.toGLSL(true) + "," + p.toGLSL(true, 0) + "), dot(" + g.toGLSL(true) + "," + p.toGLSL(true, 1) + "), dot(" + g.toGLSL(true) + "," + p.toGLSL(true, 2) + "), dot(" + g.toGLSL(true) + "," + p.toGLSL(true, 3) + ")); // m44");
                e.addDR(d, qa.VECTOR_4);
                e.addSR(g, qa.VECTOR_4);
                e.addSR(p, qa.VECTOR_4, 0);
                e.addSR(p, qa.VECTOR_4, 1);
                e.addSR(p, qa.VECTOR_4, 2);
                e.addSR(p, qa.VECTOR_4, 3);
              }
              break;
            case 25:
              d.mask &= 7;
              h = e.getRegisterUsage(p);
              if (h != qa.VECTOR_4 && h != qa.VECTOR_4_ARRAY) {
                f += v.string(d.toGLSL() + " = " + g.toGLSL() + " * " + p.toGLSL(false) + "; // m34");
                e.addDR(d, qa.VECTOR_4);
                e.addSR(g, qa.VECTOR_4);
                e.addSR(p, qa.MATRIX_4_4);
              } else {
                g.sourceMask = p.sourceMask = 15;
                f += v.string(d.toGLSL() + " = vec3(dot(" + g.toGLSL(true) + "," + p.toGLSL(true, 0) + "), dot(" + g.toGLSL(true) + "," + p.toGLSL(true, 1) + "),dot(" + g.toGLSL(true) + "," + p.toGLSL(true, 2) + ")); // m34");
                e.addDR(d, qa.VECTOR_4);
                e.addSR(g, qa.VECTOR_4);
                e.addSR(p, qa.VECTOR_4, 0);
                e.addSR(p, qa.VECTOR_4, 1);
                e.addSR(p, qa.VECTOR_4, 2);
              }
              break;
            case 39:
              g.sourceMask = 15;
              f += v.string("if (any(lessThan(" + g.toGLSL() + ", vec4(0)))) discard;");
              e.addSR(g, qa.VECTOR_4);
              break;
            case 40:
              p = Ci.parse(n, c);
              switch (p.d) {
                case 0:
                  if (p.t == 2) {
                    g.sourceMask = 3;
                    e.addSaR(p, qa.SAMPLER_2D_ALPHA);
                    f += v.string("if (" + p.toGLSL() + "_alphaEnabled) {\n");
                    f += v.string("\t\t" + d.toGLSL() + " = vec4(texture2D(" + p.toGLSL() + ", " + g.toGLSL() + ").xyz, texture2D(" + p.toGLSL() + "_alpha, " + g.toGLSL() + ").x); // tex + alpha\n");
                    f += "\t} else {\n";
                    f += v.string("\t\t" + d.toGLSL() + " = texture2D(" + p.toGLSL() + ", " + g.toGLSL() + "); // tex\n");
                    f += "\t}";
                  } else {
                    g.sourceMask = 3;
                    e.addSaR(p, qa.SAMPLER_2D);
                    f += v.string(d.toGLSL() + " = texture2D(" + p.toGLSL() + ", " + g.toGLSL() + "); // tex");
                  }
                  break;
                case 1:
                  if (p.t == 2) {
                    g.sourceMask = 7;
                    e.addSaR(p, qa.SAMPLER_CUBE_ALPHA);
                    f += v.string("if (" + p.toGLSL() + "_alphaEnabled) {\n");
                    f += v.string("\t\t" + d.toGLSL() + " = vec4(textureCube(" + p.toGLSL() + ", " + g.toGLSL() + ").xyz, textureCube(" + p.toGLSL() + "_alpha, " + g.toGLSL() + ").x); // tex + alpha\n");
                    f += "\t} else {\n";
                    f += v.string("\t\t" + d.toGLSL() + " = textureCube(" + p.toGLSL() + ", " + g.toGLSL() + "); // tex");
                    f += "\t}";
                  } else {
                    g.sourceMask = 7;
                    f += v.string(d.toGLSL() + " = textureCube(" + p.toGLSL() + ", " + g.toGLSL() + "); // tex");
                    e.addSaR(p, qa.SAMPLER_CUBE);
                  }
              }
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              if (b != null) {
                b[p.n] = p.toSamplerState();
              }
              break;
            case 41:
              g.sourceMask = p.sourceMask = 15;
              f += v.string(d.toGLSL() + " = vec4(greaterThanEqual(" + g.toGLSL() + ", " + p.toGLSL() + "))" + d.getWriteMask() + "; // ste");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 42:
              g.sourceMask = p.sourceMask = 15;
              f += v.string(d.toGLSL() + " = vec4(lessThan(" + g.toGLSL() + ", " + p.toGLSL() + "))" + d.getWriteMask() + "; // slt");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 44:
              g.sourceMask = p.sourceMask = 15;
              f += v.string(d.toGLSL() + " = vec4(equal(" + g.toGLSL() + ", " + p.toGLSL() + "))" + d.getWriteMask() + "; // seq");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            case 45:
              g.sourceMask = p.sourceMask = 15;
              f += v.string(d.toGLSL() + " = vec4(notEqual(" + g.toGLSL() + ", " + p.toGLSL() + "))" + d.getWriteMask() + "; // sne");
              e.addDR(d, qa.VECTOR_4);
              e.addSR(g, qa.VECTOR_4);
              e.addSR(p, qa.VECTOR_4);
              break;
            default:
              throw new xd("Opcode " + h);
          }
          f += "\n";
        }
        if (Hd.limitedProfile == null) {
          d = sg.context.getParameter(7938);
          Hd.limitedProfile = d.indexOf("OpenGL ES") > -1 || d.indexOf("WebGL") > -1;
        }
        a = "" + v.string("// AGAL " + (c == ag.VERTEX ? "vertex" : "fragment") + " shader\n");
        a = Hd.limitedProfile ? a + "#version 100\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n" : a + "#version 120\n";
        a += v.string(e.toGLSL(false));
        if (c == ag.VERTEX) {
          a += "uniform vec4 vcPositionScale;\n";
        }
        a = a + "void main() {\n" + v.string(e.toGLSL(true));
        a += v.string(f);
        if (c == ag.VERTEX) {
          a += "\tgl_Position *= vcPositionScale;\n";
        }
        return a + "}\n";
      };
      function Bi() {}
      g["openfl.display3D._internal._AGALConverter.DestRegister"] = Bi;
      Bi.__name__ = "openfl.display3D._internal._AGALConverter.DestRegister";
      Bi.parse = function (a, b) {
        var c = new Bi();
        c.programType = b;
        c.type = a >>> 24 & 15;
        c.mask = a >>> 16 & 15;
        c.n = a & 65535;
        return c;
      };
      Bi.prototype = {
        getWriteMask: function () {
          var a = ".";
          if ((this.mask & 1) != 0) {
            a += "x";
          }
          if ((this.mask & 2) != 0) {
            a += "y";
          }
          if ((this.mask & 4) != 0) {
            a += "z";
          }
          if ((this.mask & 8) != 0) {
            a += "w";
          }
          return a;
        },
        toGLSL: function (a) {
          if (a == null) {
            a = true;
          }
          var b = this.type == 3 ? this.programType == ag.VERTEX ? "gl_Position" : "gl_FragColor" : Hd.prefixFromType(this.type, this.programType) + this.n;
          if (a && this.mask != 15) {
            b += this.getWriteMask();
          }
          return b;
        },
        __class__: Bi
      };
      var ag = z["openfl.display3D._internal._AGALConverter.ProgramType"] = {
        __ename__: "openfl.display3D._internal._AGALConverter.ProgramType",
        __constructs__: null,
        VERTEX: {
          _hx_name: "VERTEX",
          _hx_index: 0,
          __enum__: "openfl.display3D._internal._AGALConverter.ProgramType",
          toString: p
        },
        FRAGMENT: {
          _hx_name: "FRAGMENT",
          _hx_index: 1,
          __enum__: "openfl.display3D._internal._AGALConverter.ProgramType",
          toString: p
        }
      };
      ag.__constructs__ = [ag.VERTEX, ag.FRAGMENT];
      function Em() {
        this.mEntries = [];
      }
      g["openfl.display3D._internal.RegisterMap"] = Em;
      Em.__name__ = "openfl.display3D._internal.RegisterMap";
      Em.prototype = {
        add: function (a, b, c, d) {
          for (var e = 0, f = this.mEntries; e < f.length;) {
            var h = f[e];
            ++e;
            if (h.type == a && h.name == b && h.number == c) {
              if (h.usage != d) {
                throw new xd("Cannot use register in multiple ways yet (mat4/vec4)");
              }
              return;
            }
          }
          h = new Mo();
          h.type = a;
          h.name = b;
          h.number = c;
          h.usage = d;
          this.mEntries.push(h);
        },
        addDR: function (a, b) {
          this.add(a.type, a.toGLSL(false), a.n, b);
        },
        addSaR: function (a, b) {
          this.add(a.type, a.toGLSL(), a.n, b);
        },
        addSR: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (a.d != 0) {
            this.add(a.itype, Hd.prefixFromType(a.itype, a.programType) + a.n, a.n, qa.VECTOR_4);
            this.add(a.type, Hd.prefixFromType(a.type, a.programType) + a.o, a.o, qa.VECTOR_4_ARRAY);
          } else {
            this.add(a.type, a.toGLSL(false, c), a.n + c, b);
          }
        },
        getRegisterUsage: function (a) {
          if (a.d != 0) {
            return qa.VECTOR_4_ARRAY;
          } else {
            return this.getUsage(a.type, a.toGLSL(false), a.n);
          }
        },
        getUsage: function (a, b, c) {
          for (var d = 0, e = this.mEntries; d < e.length;) {
            var f = e[d];
            ++d;
            if (f.type == a && f.name == b && f.number == c) {
              return f.usage;
            }
          }
          return qa.UNUSED;
        },
        toGLSL: function (a) {
          this.mEntries.sort(function (a, b) {
            return a.number - b.number;
          });
          this.mEntries.sort(function (a, b) {
            return va.__cast(a.type, Ti) - va.__cast(b.type, Ti);
          });
          for (var b = "", c = 0, d = this.mEntries.length; c < d;) {
            var e = c++;
            e = this.mEntries[e];
            if ((!a || e.type == 2) && (!!a || e.type != 2) && e.type != 3) {
              switch (e.type) {
                case 0:
                  b += "attribute ";
                  break;
                case 1:
                  b += "uniform ";
                  break;
                case 2:
                  b += "\t";
                  break;
                case 3:
                  break;
                case 4:
                  b += "varying ";
                  break;
                case 5:
                  b += "uniform ";
                  break;
                default:
                  throw new xd();
              }
              switch (e.usage._hx_index) {
                case 0:
                  Va.info("Missing switch patten: RegisterUsage.UNUSED", {
                    fileName: "openfl/display3D/_internal/AGALConverter.hx",
                    lineNumber: 751,
                    className: "openfl.display3D._internal.RegisterMap",
                    methodName: "toGLSL"
                  });
                  break;
                case 1:
                  b += "vec4 ";
                  break;
                case 2:
                  b += "mat4 ";
                  break;
                case 3:
                  b += "sampler2D ";
                  break;
                case 5:
                  b += "samplerCube ";
                  break;
                case 7:
                  b += "vec4 ";
              }
              if (e.usage == qa.SAMPLER_2D_ALPHA) {
                b += "sampler2D ";
                b += v.string(e.name);
                b += ";\n";
                b += "uniform ";
                b += "sampler2D ";
                b += v.string(e.name + "_alpha");
                b += ";\n";
                b += "uniform ";
                b += "bool ";
                b += v.string(e.name + "_alphaEnabled");
              } else if (e.usage == qa.SAMPLER_CUBE_ALPHA) {
                b += "samplerCube ";
                b += v.string(e.name);
                b += ";\n";
                b += "uniform ";
                b += "samplerCube ";
                b += v.string(e.name + "_alpha");
                b += ";\n";
                b += "uniform ";
                b += "bool ";
                b += v.string(e.name + "_alphaEnabled");
              } else {
                b = e.usage == qa.VECTOR_4_ARRAY ? b + v.string(e.name + "[128]") : b + v.string(e.name);
              }
              b += ";\n";
            }
          }
          return b;
        },
        __class__: Em
      };
      function Mo() {}
      g["openfl.display3D._internal._AGALConverter.RegisterMapEntry"] = Mo;
      Mo.__name__ = "openfl.display3D._internal._AGALConverter.RegisterMapEntry";
      Mo.prototype = {
        __class__: Mo
      };
      var qa = z["openfl.display3D._internal._AGALConverter.RegisterUsage"] = {
        __ename__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
        __constructs__: null,
        UNUSED: {
          _hx_name: "UNUSED",
          _hx_index: 0,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        VECTOR_4: {
          _hx_name: "VECTOR_4",
          _hx_index: 1,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        MATRIX_4_4: {
          _hx_name: "MATRIX_4_4",
          _hx_index: 2,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        SAMPLER_2D: {
          _hx_name: "SAMPLER_2D",
          _hx_index: 3,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        SAMPLER_2D_ALPHA: {
          _hx_name: "SAMPLER_2D_ALPHA",
          _hx_index: 4,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        SAMPLER_CUBE: {
          _hx_name: "SAMPLER_CUBE",
          _hx_index: 5,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        SAMPLER_CUBE_ALPHA: {
          _hx_name: "SAMPLER_CUBE_ALPHA",
          _hx_index: 6,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        VECTOR_4_ARRAY: {
          _hx_name: "VECTOR_4_ARRAY",
          _hx_index: 7,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        }
      };
      qa.__constructs__ = [qa.UNUSED, qa.VECTOR_4, qa.MATRIX_4_4, qa.SAMPLER_2D, qa.SAMPLER_2D_ALPHA, qa.SAMPLER_CUBE, qa.SAMPLER_CUBE_ALPHA, qa.VECTOR_4_ARRAY];
      function Ci() {}
      g["openfl.display3D._internal._AGALConverter.SamplerRegister"] = Ci;
      Ci.__name__ = "openfl.display3D._internal._AGALConverter.SamplerRegister";
      Ci.parse = function (a, b) {
        var c = new Ci();
        c.programType = b;
        b = 60;
        b = b == 0 ? new vb(a.high, a.low) : b < 32 ? new vb(a.high >> b, a.high << 32 - b | a.low >>> b) : new vb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.f = b;
        b = 56;
        b = b == 0 ? new vb(a.high, a.low) : b < 32 ? new vb(a.high >> b, a.high << 32 - b | a.low >>> b) : new vb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.m = b;
        b = 52;
        b = b == 0 ? new vb(a.high, a.low) : b < 32 ? new vb(a.high >> b, a.high << 32 - b | a.low >>> b) : new vb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.w = b;
        b = 48;
        b = b == 0 ? new vb(a.high, a.low) : b < 32 ? new vb(a.high >> b, a.high << 32 - b | a.low >>> b) : new vb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.s = b;
        b = 44;
        b = b == 0 ? new vb(a.high, a.low) : b < 32 ? new vb(a.high >> b, a.high << 32 - b | a.low >>> b) : new vb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.d = b;
        b = 40;
        b = b == 0 ? new vb(a.high, a.low) : b < 32 ? new vb(a.high >> b, a.high << 32 - b | a.low >>> b) : new vb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.t = b;
        b = 32;
        b = b == 0 ? new vb(a.high, a.low) : b < 32 ? new vb(a.high >> b, a.high << 32 - b | a.low >>> b) : new vb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.type = b;
        b = 16;
        b = b == 0 ? new vb(a.high, a.low) : b < 32 ? new vb(a.high >> b, a.high << 32 - b | a.low >>> b) : new vb(a.high >> 31, a.high >> b - 32);
        b = b.low & 255;
        c.b = b;
        b = a.low & 65535;
        c.n = b;
        return c;
      };
      Ci.prototype = {
        toGLSL: function () {
          return Hd.prefixFromType(this.type, this.programType) + this.n;
        },
        toSamplerState: function () {
          switch (this.f) {
            case 0:
              var a = 5;
              break;
            case 1:
              a = 4;
              break;
            default:
              throw new xd();
          }
          switch (this.m) {
            case 0:
              var b = 2;
              break;
            case 1:
              b = 1;
              break;
            case 2:
              b = 0;
              break;
            default:
              throw new xd();
          }
          switch (this.w) {
            case 0:
              var c = 0;
              break;
            case 1:
              c = 2;
              break;
            default:
              throw new xd();
          }
          return new Jh(c, a, b, (this.b << 24 >> 24) / 8, (this.s & 4) == 4, (this.s & 1) == 1, this.t == 2);
        },
        __class__: Ci
      };
      function Kh() {}
      g["openfl.display3D._internal._AGALConverter.SourceRegister"] = Kh;
      Kh.__name__ = "openfl.display3D._internal._AGALConverter.SourceRegister";
      Kh.parse = function (a, b, c) {
        var d = new Kh();
        d.programType = b;
        b = 63;
        b = b == 0 ? new vb(a.high, a.low) : b < 32 ? new vb(a.high >> b, a.high << 32 - b | a.low >>> b) : new vb(a.high >> 31, a.high >> b - 32);
        b = b.low & 1;
        d.d = b;
        b = 48;
        b = b == 0 ? new vb(a.high, a.low) : b < 32 ? new vb(a.high >> b, a.high << 32 - b | a.low >>> b) : new vb(a.high >> 31, a.high >> b - 32);
        b = b.low & 3;
        d.q = b;
        b = 40;
        b = b == 0 ? new vb(a.high, a.low) : b < 32 ? new vb(a.high >> b, a.high << 32 - b | a.low >>> b) : new vb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        d.itype = b;
        b = 32;
        b = b == 0 ? new vb(a.high, a.low) : b < 32 ? new vb(a.high >> b, a.high << 32 - b | a.low >>> b) : new vb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        d.type = b;
        b = 24;
        b = b == 0 ? new vb(a.high, a.low) : b < 32 ? new vb(a.high >> b, a.high << 32 - b | a.low >>> b) : new vb(a.high >> 31, a.high >> b - 32);
        b = b.low & 255;
        d.s = b;
        b = 16;
        b = b == 0 ? new vb(a.high, a.low) : b < 32 ? new vb(a.high >> b, a.high << 32 - b | a.low >>> b) : new vb(a.high >> 31, a.high >> b - 32);
        b = b.low & 255;
        d.o = b;
        b = a.low & 65535;
        d.n = b;
        d.sourceMask = c;
        return d;
      };
      Kh.prototype = {
        toGLSL: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = true;
          }
          if (this.type == 3) {
            if (this.programType == ag.VERTEX) {
              return "gl_Position";
            } else {
              return "gl_FragColor";
            }
          }
          var c = this.s == 228 && this.sourceMask == 15;
          var d = "";
          if (this.type != 5 && !c) {
            if ((this.sourceMask & 1) != 0) {
              switch (this.s & 3) {
                case 0:
                  d += "x";
                  break;
                case 1:
                  d += "y";
                  break;
                case 2:
                  d += "z";
                  break;
                case 3:
                  d += "w";
              }
            }
            if ((this.sourceMask & 2) != 0) {
              switch (this.s >> 2 & 3) {
                case 0:
                  d += "x";
                  break;
                case 1:
                  d += "y";
                  break;
                case 2:
                  d += "z";
                  break;
                case 3:
                  d += "w";
              }
            }
            if ((this.sourceMask & 4) != 0) {
              switch (this.s >> 4 & 3) {
                case 0:
                  d += "x";
                  break;
                case 1:
                  d += "y";
                  break;
                case 2:
                  d += "z";
                  break;
                case 3:
                  d += "w";
              }
            }
            if ((this.sourceMask & 8) != 0) {
              switch (this.s >> 6 & 3) {
                case 0:
                  d += "x";
                  break;
                case 1:
                  d += "y";
                  break;
                case 2:
                  d += "z";
                  break;
                case 3:
                  d += "w";
              }
            }
          }
          c = Hd.prefixFromType(this.type, this.programType);
          if (this.d == 0) {
            c += this.n + b;
          } else {
            c += this.o;
            var e = "";
            switch (this.q) {
              case 0:
                e = "x";
                break;
              case 1:
                e = "y";
                break;
              case 2:
                e = "z";
                break;
              case 3:
                e = "w";
            }
            e = Hd.prefixFromType(this.itype, this.programType) + this.n + "." + e;
            c += "[ int(" + e + ") +" + b + "]";
          }
          if (a && d != "") {
            c += "." + d;
          }
          return c;
        },
        __class__: Kh
      };
      function Tj() {
        this.backBufferEnableDepthAndStencil = false;
        this.blendDestinationAlphaFactor = 9;
        this.blendSourceAlphaFactor = 2;
        this.blendDestinationRGBFactor = 9;
        this.blendSourceRGBFactor = 2;
        this.colorMaskAlpha = this.colorMaskBlue = this.colorMaskGreen = this.colorMaskRed = true;
        this.culling = 3;
        this.depthCompareMode = 4;
        this.depthMask = true;
        this.samplerStates = [];
        this.scissorRectangle = new da();
        this.stencilCompareMode = 0;
        this.stencilPass = this.stencilFail = this.stencilDepthFail = 5;
        this.stencilReadMask = 255;
        this.stencilReferenceValue = 0;
        this.stencilTriangleFace = 2;
        this.stencilWriteMask = 255;
        this.textures = [];
        this.__frontFaceGLCCW = true;
        this.__glBlendEquation = 32774;
      }
      g["openfl.display3D._internal.Context3DState"] = Tj;
      Tj.__name__ = "openfl.display3D._internal.Context3DState";
      Tj.prototype = {
        __class__: Tj
      };
      function Vb(a) {
        pa.call(this);
        this.__context = a;
        var b = this.__context.gl;
        this.__textureID = b.createTexture();
        this.__textureContext = this.__context.__context;
        if (Vb.__supportsBGRA == null) {
          Vb.__textureInternalFormat = b.RGBA;
          Vb.__supportsBGRA = false;
          Vb.__textureFormat = b.RGBA;
          Vb.__compressedFormats = new wc();
          Vb.__compressedFormatsAlpha = new wc();
          a = b.getExtension("WEBGL_compressed_texture_s3tc");
          var c = b.getExtension("WEBGL_compressed_texture_etc1");
          b = b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
          if (a != null) {
            var d = a.COMPRESSED_RGBA_S3TC_DXT1_EXT;
            Vb.__compressedFormats.h[0] = d;
            d = a.COMPRESSED_RGBA_S3TC_DXT5_EXT;
            Vb.__compressedFormatsAlpha.h[0] = d;
          }
          if (c != null) {
            d = c.COMPRESSED_RGB_ETC1_WEBGL;
            Vb.__compressedFormats.h[2] = d;
            d = c.COMPRESSED_RGB_ETC1_WEBGL;
            Vb.__compressedFormatsAlpha.h[2] = d;
          }
          if (b != null) {
            d = b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
            Vb.__compressedFormats.h[1] = d;
            d = b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
            Vb.__compressedFormatsAlpha.h[1] = d;
          }
        }
        this.__internalFormat = Vb.__textureInternalFormat;
        this.__format = Vb.__textureFormat;
      }
      g["openfl.display3D.textures.TextureBase"] = Vb;
      Vb.__name__ = "openfl.display3D.textures.TextureBase";
      Vb.__super__ = pa;
      Vb.prototype = q(pa.prototype, {
        dispose: function () {
          var a = this.__context.gl;
          if (this.__alphaTexture != null) {
            this.__alphaTexture.dispose();
            this.__alphaTexture = null;
          }
          if (this.__textureID != null) {
            a.deleteTexture(this.__textureID);
            this.__textureID = null;
          }
          if (this.__glFramebuffer != null) {
            a.deleteFramebuffer(this.__glFramebuffer);
            this.__glFramebuffer = null;
          }
          if (this.__glDepthRenderbuffer != null) {
            a.deleteRenderbuffer(this.__glDepthRenderbuffer);
            this.__glDepthRenderbuffer = null;
          }
          if (this.__glStencilRenderbuffer != null) {
            a.deleteRenderbuffer(this.__glStencilRenderbuffer);
            this.__glStencilRenderbuffer = null;
          }
        },
        __getGLFramebuffer: function (a, b, c) {
          b = this.__context.gl;
          if (this.__glFramebuffer == null) {
            this.__glFramebuffer = b.createFramebuffer();
            this.__context.__bindGLFramebuffer(this.__glFramebuffer);
            b.framebufferTexture2D(b.FRAMEBUFFER, b.COLOR_ATTACHMENT0, b.TEXTURE_2D, this.__textureID, 0);
            if (this.__context.__enableErrorChecking) {
              c = b.checkFramebufferStatus(b.FRAMEBUFFER);
              if (c != b.FRAMEBUFFER_COMPLETE) {
                Va.warn("Error: Context3D.setRenderToTexture status:" + c + " width:" + this.__width + " height:" + this.__height, {
                  fileName: "openfl/display3D/textures/TextureBase.hx",
                  lineNumber: 201,
                  className: "openfl.display3D.textures.TextureBase",
                  methodName: "__getGLFramebuffer"
                });
              }
            }
          }
          if (a && this.__glDepthRenderbuffer == null) {
            this.__context.__bindGLFramebuffer(this.__glFramebuffer);
            if (Hb.__glDepthStencil != 0) {
              this.__glStencilRenderbuffer = this.__glDepthRenderbuffer = b.createRenderbuffer();
              b.bindRenderbuffer(b.RENDERBUFFER, this.__glDepthRenderbuffer);
              b.renderbufferStorage(b.RENDERBUFFER, Hb.__glDepthStencil, this.__width, this.__height);
              b.framebufferRenderbuffer(b.FRAMEBUFFER, b.DEPTH_STENCIL_ATTACHMENT, b.RENDERBUFFER, this.__glDepthRenderbuffer);
            } else {
              this.__glDepthRenderbuffer = b.createRenderbuffer();
              this.__glStencilRenderbuffer = b.createRenderbuffer();
              b.bindRenderbuffer(b.RENDERBUFFER, this.__glDepthRenderbuffer);
              b.renderbufferStorage(b.RENDERBUFFER, b.DEPTH_COMPONENT16, this.__width, this.__height);
              b.bindRenderbuffer(b.RENDERBUFFER, this.__glStencilRenderbuffer);
              b.renderbufferStorage(b.RENDERBUFFER, b.STENCIL_INDEX8, this.__width, this.__height);
              b.framebufferRenderbuffer(b.FRAMEBUFFER, b.DEPTH_ATTACHMENT, b.RENDERBUFFER, this.__glDepthRenderbuffer);
              b.framebufferRenderbuffer(b.FRAMEBUFFER, b.STENCIL_ATTACHMENT, b.RENDERBUFFER, this.__glStencilRenderbuffer);
            }
            if (this.__context.__enableErrorChecking) {
              c = b.checkFramebufferStatus(b.FRAMEBUFFER);
              if (c != b.FRAMEBUFFER_COMPLETE) {
                Va.warn("Error: Context3D.setRenderToTexture status:" + c + " width:" + this.__width + " height:" + this.__height, {
                  fileName: "openfl/display3D/textures/TextureBase.hx",
                  lineNumber: 239,
                  className: "openfl.display3D.textures.TextureBase",
                  methodName: "__getGLFramebuffer"
                });
              }
            }
            b.bindRenderbuffer(b.RENDERBUFFER, null);
          }
          return this.__glFramebuffer;
        },
        __getImage: function (a) {
          var b = a.image;
          if (!a.__isValid || b == null) {
            return null;
          }
          Ya.sync(b, false);
          a = this.__context.gl;
          if (b.type == Gd.DATA || b.get_premultiplied()) {
            if (!b.get_premultiplied() && b.get_transparent()) {
              a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0);
              b = b.clone();
              b.set_premultiplied(true);
            }
          } else {
            a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
          }
          if (b.get_format() != 0) {
            b = b.clone();
            b.set_format(0);
            b.buffer.premultiplied = true;
          }
          return b;
        },
        __getTexture: function () {
          return this.__textureID;
        },
        __setSamplerState: function (a) {
          if (!a.equals(this.__samplerState)) {
            var b = this.__context.gl;
            if (this.__textureTarget == this.__context.gl.TEXTURE_CUBE_MAP) {
              this.__context.__bindGLTextureCubeMap(this.__textureID);
            } else {
              this.__context.__bindGLTexture2D(this.__textureID);
            }
            var c;
            switch (a.wrap) {
              case 0:
                var d = c = b.CLAMP_TO_EDGE;
                break;
              case 1:
                c = b.CLAMP_TO_EDGE;
                d = b.REPEAT;
                break;
              case 2:
                d = c = b.REPEAT;
                break;
              case 3:
                c = b.REPEAT;
                d = b.CLAMP_TO_EDGE;
                break;
              default:
                throw new Pb("wrap bad enum");
            }
            var e = a.filter == 5 ? b.NEAREST : b.LINEAR;
            switch (a.mipfilter) {
              case 0:
                var f = a.filter == 5 ? b.NEAREST_MIPMAP_LINEAR : b.LINEAR_MIPMAP_LINEAR;
                break;
              case 1:
                f = a.filter == 5 ? b.NEAREST_MIPMAP_NEAREST : b.LINEAR_MIPMAP_NEAREST;
                break;
              case 2:
                f = a.filter == 5 ? b.NEAREST : b.LINEAR;
                break;
              default:
                throw new Pb("mipfiter bad enum");
            }
            b.texParameteri(this.__textureTarget, b.TEXTURE_MIN_FILTER, f);
            b.texParameteri(this.__textureTarget, b.TEXTURE_MAG_FILTER, e);
            b.texParameteri(this.__textureTarget, b.TEXTURE_WRAP_S, c);
            b.texParameteri(this.__textureTarget, b.TEXTURE_WRAP_T, d);
            if (this.__samplerState == null) {
              this.__samplerState = a.clone();
            }
            this.__samplerState.copyFrom(a);
            return true;
          }
          return false;
        },
        __uploadFromImage: function (a) {
          var b = this.__context.gl;
          var c;
          if (this.__textureTarget == b.TEXTURE_2D) {
            if (a.buffer.bitsPerPixel == 1) {
              var d = c = b.ALPHA;
            } else {
              c = Vb.__textureInternalFormat;
              d = Vb.__textureFormat;
            }
            this.__context.__bindGLTexture2D(this.__textureID);
            if (a.type == Gd.DATA || a.get_premultiplied()) {
              if (!a.get_premultiplied() && a.get_transparent()) {
                b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
              }
            } else {
              b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
            }
            if (a.type == Gd.DATA) {
              Xc.texImage2D(b, b.TEXTURE_2D, 0, c, a.buffer.width, a.buffer.height, 0, d, b.UNSIGNED_BYTE, a.get_data());
            } else {
              Xc.texImage2D(b, b.TEXTURE_2D, 0, c, d, b.UNSIGNED_BYTE, a.get_src());
            }
            this.__context.__bindGLTexture2D(null);
          }
        },
        __class__: Vb
      });
      function Cm(a, b, c, d, e) {
        Vb.call(this, a);
        this.__width = this.__height = this.__size = b;
        this.__optimizeForRenderToTexture = d;
        this.__streamingLevels = e;
        this.__textureTarget = this.__context.gl.TEXTURE_CUBE_MAP;
        this.__uploadedSides = 0;
      }
      g["openfl.display3D.textures.CubeTexture"] = Cm;
      Cm.__name__ = "openfl.display3D.textures.CubeTexture";
      Cm.__super__ = Vb;
      Cm.prototype = q(Vb.prototype, {
        __getGLFramebuffer: function (a, b, c) {
          var d = this.__context.gl;
          if (this.__glFramebuffer == null) {
            this.__glFramebuffer = d.createFramebuffer();
            this.__framebufferSurface = -1;
          }
          if (this.__framebufferSurface != c && (this.__framebufferSurface = c, this.__context.__bindGLFramebuffer(this.__glFramebuffer), d.framebufferTexture2D(d.FRAMEBUFFER, d.COLOR_ATTACHMENT0, d.TEXTURE_CUBE_MAP_POSITIVE_X + c, this.__textureID, 0), this.__context.__enableErrorChecking)) {
            var e = d.checkFramebufferStatus(d.FRAMEBUFFER);
            if (e != d.FRAMEBUFFER_COMPLETE) {
              Va.error("Error: Context3D.setRenderToTexture status:" + e + " width:" + this.__width + " height:" + this.__height, {
                fileName: "openfl/display3D/textures/CubeTexture.hx",
                lineNumber: 279,
                className: "openfl.display3D.textures.CubeTexture",
                methodName: "__getGLFramebuffer"
              });
            }
          }
          return Vb.prototype.__getGLFramebuffer.call(this, a, b, c);
        },
        __setSamplerState: function (a) {
          if (Vb.prototype.__setSamplerState.call(this, a)) {
            var b = this.__context.gl;
            if (a.mipfilter != 2 && !this.__samplerState.mipmapGenerated) {
              b.generateMipmap(b.TEXTURE_CUBE_MAP);
              this.__samplerState.mipmapGenerated = true;
            }
            if (Hb.__glMaxTextureMaxAnisotropy != 0) {
              switch (a.filter) {
                case 0:
                  a = 16;
                  break;
                case 1:
                  a = 2;
                  break;
                case 2:
                  a = 4;
                  break;
                case 3:
                  a = 8;
                  break;
                default:
                  a = 1;
              }
              if (a > Hb.__glMaxTextureMaxAnisotropy) {
                a = Hb.__glMaxTextureMaxAnisotropy;
              }
              b.texParameterf(b.TEXTURE_CUBE_MAP, Hb.__glTextureMaxAnisotropy, a);
            }
            return true;
          }
          return false;
        },
        __class__: Cm
      });
      function Uj(a, b, c, d, e) {
        Vb.call(this, a);
        this.__width = b;
        this.__height = c;
        this.__optimizeForRenderToTexture = e;
        this.__textureTarget = this.__context.gl.TEXTURE_2D;
        this.uploadFromTypedArray(null);
        if (e) {
          this.__getGLFramebuffer(true, 0, 0);
        }
      }
      g["openfl.display3D.textures.RectangleTexture"] = Uj;
      Uj.__name__ = "openfl.display3D.textures.RectangleTexture";
      Uj.__super__ = Vb;
      Uj.prototype = q(Vb.prototype, {
        uploadFromBitmapData: function (a) {
          if (a != null && (a = this.__getImage(a), a != null)) {
            if (a.buffer != null && a.buffer.data == null && a.buffer.get_src() != null) {
              var b = this.__context.gl;
              this.__context.__bindGLTexture2D(this.__textureID);
              Xc.texImage2D(b, this.__textureTarget, 0, this.__internalFormat, this.__format, b.UNSIGNED_BYTE, a.buffer.get_src());
              this.__context.__bindGLTexture2D(null);
            } else {
              this.uploadFromTypedArray(a.get_data());
            }
          }
        },
        uploadFromTypedArray: function (a) {
          var b = this.__context.gl;
          this.__context.__bindGLTexture2D(this.__textureID);
          Xc.texImage2D(b, this.__textureTarget, 0, this.__internalFormat, this.__width, this.__height, 0, this.__format, b.UNSIGNED_BYTE, a);
          this.__context.__bindGLTexture2D(null);
        },
        __setSamplerState: function (a) {
          if (Vb.prototype.__setSamplerState.call(this, a)) {
            var b = this.__context.gl;
            if (Hb.__glMaxTextureMaxAnisotropy != 0) {
              switch (a.filter) {
                case 0:
                  a = 16;
                  break;
                case 1:
                  a = 2;
                  break;
                case 2:
                  a = 4;
                  break;
                case 3:
                  a = 8;
                  break;
                default:
                  a = 1;
              }
              if (a > Hb.__glMaxTextureMaxAnisotropy) {
                a = Hb.__glMaxTextureMaxAnisotropy;
              }
              b.texParameterf(b.TEXTURE_2D, Hb.__glTextureMaxAnisotropy, a);
            }
            return true;
          }
          return false;
        },
        __class__: Uj
      });
      function Bm(a, b, c, d, e, f) {
        Vb.call(this, a);
        this.__width = b;
        this.__height = c;
        this.__optimizeForRenderToTexture = e;
        this.__streamingLevels = f;
        a = this.__context.gl;
        this.__textureTarget = a.TEXTURE_2D;
        this.__context.__bindGLTexture2D(this.__textureID);
        Xc.texImage2D(a, this.__textureTarget, 0, this.__internalFormat, this.__width, this.__height, 0, this.__format, a.UNSIGNED_BYTE, null);
        this.__context.__bindGLTexture2D(null);
        if (e) {
          this.__getGLFramebuffer(true, 0, 0);
        }
      }
      g["openfl.display3D.textures.Texture"] = Bm;
      Bm.__name__ = "openfl.display3D.textures.Texture";
      Bm.__super__ = Vb;
      Bm.prototype = q(Vb.prototype, {
        __setSamplerState: function (a) {
          if (Vb.prototype.__setSamplerState.call(this, a)) {
            var b = this.__context.gl;
            if (a.mipfilter != 2 && !this.__samplerState.mipmapGenerated) {
              b.generateMipmap(b.TEXTURE_2D);
              this.__samplerState.mipmapGenerated = true;
            }
            if (Hb.__glMaxTextureMaxAnisotropy != 0) {
              switch (a.filter) {
                case 0:
                  a = 16;
                  break;
                case 1:
                  a = 2;
                  break;
                case 2:
                  a = 4;
                  break;
                case 3:
                  a = 8;
                  break;
                default:
                  a = 1;
              }
              if (a > Hb.__glMaxTextureMaxAnisotropy) {
                a = Hb.__glMaxTextureMaxAnisotropy;
              }
              b.texParameterf(b.TEXTURE_2D, Hb.__glTextureMaxAnisotropy, a);
            }
            return true;
          }
          return false;
        },
        __class__: Bm
      });
      function No(a) {
        Vb.call(this, a);
        this.__textureTarget = this.__context.gl.TEXTURE_2D;
      }
      g["openfl.display3D.textures.VideoTexture"] = No;
      No.__name__ = "openfl.display3D.textures.VideoTexture";
      No.__super__ = Vb;
      No.prototype = q(Vb.prototype, {
        dispose: function () {
          if (this.__netStream != null && this.__netStream.__video != null) {
            this.__netStream.__video.removeEventListener("timeupdate", m(this, this.__onTimeUpdate));
          }
          Vb.prototype.dispose.call(this);
        },
        __onTimeUpdate: function (a) {
          if (this.__netStream != null && this.__netStream.__video.currentTime != this.__cacheTime && this.__netStream.__video.readyState >= 2) {
            this.__textureReady();
          }
        },
        __getTexture: function () {
          if (this.__netStream.__video.currentTime != this.__cacheTime && this.__netStream.__video.readyState >= 2) {
            var a = this.__context.gl;
            this.__context.__bindGLTexture2D(this.__textureID);
            Xc.texImage2D(a, a.TEXTURE_2D, 0, a.RGBA, a.RGBA, a.UNSIGNED_BYTE, this.__netStream.__video);
            this.__cacheTime = this.__netStream.__video.currentTime;
          }
          return this.__textureID;
        },
        __textureReady: function () {
          this.videoWidth = this.__netStream.__video.videoWidth;
          this.videoHeight = this.__netStream.__video.videoHeight;
          var a = new Ga("textureReady");
          this.dispatchEvent(a);
        },
        __class__: No
      });
      function Pb(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = "";
        }
        G.call(this, a);
        this.errorID = b;
        this.name = "Error";
        this.__skipStack++;
      }
      g["openfl.errors.Error"] = Pb;
      Pb.__name__ = "openfl.errors.Error";
      Pb.__super__ = G;
      Pb.prototype = q(G.prototype, {
        toString: function () {
          return this.get_message() ?? "Error";
        },
        __class__: Pb
      });
      function Mh(a) {
        if (a == null) {
          a = "";
        }
        Pb.call(this, a);
        this.name = "ArgumentError";
        this.__skipStack++;
      }
      g["openfl.errors.ArgumentError"] = Mh;
      Mh.__name__ = "openfl.errors.ArgumentError";
      Mh.__super__ = Pb;
      Mh.prototype = q(Pb.prototype, {
        __class__: Mh
      });
      function Di(a) {
        if (a == null) {
          a = "";
        }
        Pb.call(this, a);
        this.name = "IOError";
        this.__skipStack++;
      }
      g["openfl.errors.IOError"] = Di;
      Di.__name__ = "openfl.errors.IOError";
      Di.__super__ = Pb;
      Di.prototype = q(Pb.prototype, {
        __class__: Di
      });
      function tj(a, b) {
        Di.call(this, "End of file was encountered");
        this.name = "EOFError";
        this.errorID = 2030;
        this.__skipStack++;
      }
      g["openfl.errors.EOFError"] = tj;
      tj.__name__ = "openfl.errors.EOFError";
      tj.__super__ = Di;
      tj.prototype = q(Di.prototype, {
        __class__: tj
      });
      function xd(a) {
        if (a == null) {
          a = "";
        }
        Pb.call(this, a, 0);
        this.name = "IllegalOperationError";
        this.__skipStack++;
      }
      g["openfl.errors.IllegalOperationError"] = xd;
      xd.__name__ = "openfl.errors.IllegalOperationError";
      xd.__super__ = Pb;
      xd.prototype = q(Pb.prototype, {
        __class__: xd
      });
      function Mi(a) {
        if (a == null) {
          a = "";
        }
        Pb.call(this, a, 0);
        this.name = "RangeError";
        this.__skipStack++;
      }
      g["openfl.errors.RangeError"] = Mi;
      Mi.__name__ = "openfl.errors.RangeError";
      Mi.__super__ = Pb;
      Mi.prototype = q(Pb.prototype, {
        __class__: Mi
      });
      function Li(a) {
        if (a == null) {
          a = "";
        }
        Pb.call(this, a, 0);
        this.name = "TypeError";
        this.__skipStack++;
      }
      g["openfl.errors.TypeError"] = Li;
      Li.__name__ = "openfl.errors.TypeError";
      Li.__super__ = Pb;
      Li.prototype = q(Pb.prototype, {
        __class__: Li
      });
      function Ga(a, b, c) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        this.type = a;
        this.bubbles = b;
        this.cancelable = c;
        this.eventPhase = 2;
      }
      g["openfl.events.Event"] = Ga;
      Ga.__name__ = "openfl.events.Event";
      Ga.prototype = {
        isDefaultPrevented: function () {
          return this.__preventDefault;
        },
        preventDefault: function () {
          if (this.cancelable) {
            this.__preventDefault = true;
          }
        },
        stopImmediatePropagation: function () {
          this.__isCanceledNow = this.__isCanceled = true;
        },
        stopPropagation: function () {
          this.__isCanceled = true;
        },
        __class__: Ga
      };
      function Fm(a, b, c, d, e, f, h) {
        if (h == null) {
          h = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.timestamp = d;
        this.accelerationX = e;
        this.accelerationY = f;
        this.accelerationZ = h;
      }
      g["openfl.events.AccelerometerEvent"] = Fm;
      Fm.__name__ = "openfl.events.AccelerometerEvent";
      Fm.__super__ = Ga;
      Fm.prototype = q(Ga.prototype, {
        __class__: Fm
      });
      function Ei(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.activating = d;
      }
      g["openfl.events.ActivityEvent"] = Ei;
      Ei.__name__ = "openfl.events.ActivityEvent";
      Ei.__super__ = Ga;
      Ei.prototype = q(Ga.prototype, {
        __class__: Ei
      });
      function Tf(a, b, c, d) {
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.text = d;
      }
      g["openfl.events.TextEvent"] = Tf;
      Tf.__name__ = "openfl.events.TextEvent";
      Tf.__super__ = Ga;
      Tf.prototype = q(Ga.prototype, {
        __class__: Tf
      });
      function Se(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Tf.call(this, a, b, c, d);
        this.errorID = e;
      }
      g["openfl.events.ErrorEvent"] = Se;
      Se.__name__ = "openfl.events.ErrorEvent";
      Se.__super__ = Tf;
      Se.prototype = q(Tf.prototype, {
        __class__: Se
      });
      function Ki(a) {
        this.active = false;
        this.reset(a);
      }
      g["openfl.events._EventDispatcher.DispatchIterator"] = Ki;
      Ki.__name__ = "openfl.events._EventDispatcher.DispatchIterator";
      Ki.prototype = {
        copy: function () {
          if (!this.isCopy) {
            this.list = this.list.slice();
            this.isCopy = true;
          }
        },
        hasNext: function () {
          return this.index < this.list.length;
        },
        next: function () {
          return this.list[this.index++];
        },
        remove: function (a, b) {
          if (this.active) {
            if (this.isCopy) {
              b = this.index;
              for (var c = this.list.length; b < c;) {
                var d = b++;
                if (this.list[d] == a) {
                  this.list.splice(d, 1);
                  break;
                }
              }
            } else if (b < this.index) {
              this.index--;
            }
          }
        },
        reset: function (a) {
          this.list = a;
          this.isCopy = false;
          this.index = 0;
        },
        start: function () {
          this.active = true;
        },
        stop: function () {
          this.active = false;
        },
        __class__: Ki
      };
      function gh(a, b, c, d) {
        if (d && gh.supportsWeakReference) {
          this.weakRefCallback = new WeakRef(a);
        } else {
          this.callback = a;
        }
        this.useCapture = b;
        this.priority = c;
        this.useWeakReference = d;
      }
      g["openfl.events._EventDispatcher.Listener"] = gh;
      gh.__name__ = "openfl.events._EventDispatcher.Listener";
      gh.prototype = {
        match: function (a, b) {
          var c = this.callback;
          if (this.weakRefCallback != null && (c = this.weakRefCallback.deref(), c == null)) {
            return false;
          } else if (c == a) {
            return this.useCapture == b;
          } else {
            return false;
          }
        },
        __class__: gh
      };
      function Hh(a, b, c, d, e, f) {
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = false;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.keyCode = f;
        this.shiftKey = e;
        this.relatedObject = d;
      }
      g["openfl.events.FocusEvent"] = Hh;
      Hh.__name__ = "openfl.events.FocusEvent";
      Hh.__super__ = Ga;
      Hh.prototype = q(Ga.prototype, {
        __class__: Hh
      });
      function zg(a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ei.call(this, a, b, c);
        this.fullScreen = d;
        this.interactive = e;
      }
      g["openfl.events.FullScreenEvent"] = zg;
      zg.__name__ = "openfl.events.FullScreenEvent";
      zg.__super__ = Ei;
      zg.prototype = q(Ei.prototype, {
        __class__: zg
      });
      function ai(a, b, c, d) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        Ga.call(this, a, b, c);
        this.device = d;
      }
      g["openfl.events.GameInputEvent"] = ai;
      ai.__name__ = "openfl.events.GameInputEvent";
      ai.__super__ = Ga;
      ai.prototype = q(Ga.prototype, {
        __class__: ai
      });
      function Wj(a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        this.responseHeaders = [];
        this.status = d;
        this.redirected = e;
        Ga.call(this, a, b, c);
      }
      g["openfl.events.HTTPStatusEvent"] = Wj;
      Wj.__name__ = "openfl.events.HTTPStatusEvent";
      Wj.__super__ = Ga;
      Wj.prototype = q(Ga.prototype, {
        __class__: Wj
      });
      function Xj(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        Se.call(this, a, b, c, d, e);
      }
      g["openfl.events.IOErrorEvent"] = Xj;
      Xj.__name__ = "openfl.events.IOErrorEvent";
      Xj.__super__ = Se;
      Xj.prototype = q(Se.prototype, {
        __class__: Xj
      });
      function ym(a, b, c, d, e, f, h, g, n, p, m) {
        if (m == null) {
          m = false;
        }
        if (p == null) {
          p = false;
        }
        if (n == null) {
          n = false;
        }
        if (g == null) {
          g = false;
        }
        if (h == null) {
          h = false;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.charCode = d;
        this.keyCode = e;
        this.keyLocation = f ?? 0;
        this.ctrlKey = h;
        this.altKey = g;
        this.shiftKey = n;
        this.controlKey = p;
        this.commandKey = m;
        this.__updateAfterEventFlag = false;
      }
      g["openfl.events.KeyboardEvent"] = ym;
      ym.__name__ = "openfl.events.KeyboardEvent";
      ym.__super__ = Ga;
      ym.prototype = q(Ga.prototype, {
        __class__: ym
      });
      function Sb(a, b, c, d, e, f, h, g, n, p, m, l, v, u) {
        if (u == null) {
          u = 0;
        }
        if (v == null) {
          v = false;
        }
        if (l == null) {
          l = false;
        }
        if (m == null) {
          m = 0;
        }
        if (p == null) {
          p = false;
        }
        if (n == null) {
          n = false;
        }
        if (g == null) {
          g = false;
        }
        if (h == null) {
          h = false;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        Ga.call(this, a, b, c);
        this.shiftKey = n;
        this.altKey = g;
        this.ctrlKey = h;
        this.bubbles = b;
        this.relatedObject = f;
        this.delta = m;
        this.localX = d;
        this.localY = e;
        this.buttonDown = p;
        this.commandKey = l;
        this.controlKey = v;
        this.clickCount = u;
        this.isRelatedObjectInaccessible = false;
        this.stageY = this.stageX = NaN;
        this.__updateAfterEventFlag = false;
      }
      g["openfl.events.MouseEvent"] = Sb;
      Sb.__name__ = "openfl.events.MouseEvent";
      Sb.__create = function (a, b, c, d, e, f, h) {
        if (h == null) {
          h = 0;
        }
        a = new Sb(a, true, false, e.x, e.y, null, Sb.__ctrlKey, Sb.__altKey, Sb.__shiftKey, Sb.__buttonDown, h, Sb.__commandKey, Sb.__controlKey);
        a.stageX = c;
        a.stageY = d;
        a.target = f;
        return a;
      };
      Sb.__super__ = Ga;
      Sb.prototype = q(Ga.prototype, {
        __class__: Sb
      });
      function Yj(a, b, c, d) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        this.info = d;
        Ga.call(this, a, b, c);
      }
      g["openfl.events.NetStatusEvent"] = Yj;
      Yj.__name__ = "openfl.events.NetStatusEvent";
      Yj.__super__ = Ga;
      Yj.prototype = q(Ga.prototype, {
        __class__: Yj
      });
      function yi(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.bytesLoaded = d;
        this.bytesTotal = e;
      }
      g["openfl.events.ProgressEvent"] = yi;
      yi.__name__ = "openfl.events.ProgressEvent";
      yi.__super__ = Ga;
      yi.prototype = q(Ga.prototype, {
        __class__: yi
      });
      function kk(a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.objectMatrix = d;
        this.objectColorTransform = e;
        this.allowSmoothing = f;
      }
      g["openfl.events.RenderEvent"] = kk;
      kk.__name__ = "openfl.events.RenderEvent";
      kk.__super__ = Ga;
      kk.prototype = q(Ga.prototype, {
        __class__: kk
      });
      function Gm(a, b, c) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ga.call(this, a, b, c);
        this.data = new vd(0);
        this.data.__endian = 1;
        this.position = 0;
      }
      g["openfl.events.SampleDataEvent"] = Gm;
      Gm.__name__ = "openfl.events.SampleDataEvent";
      Gm.__super__ = Ga;
      Gm.prototype = q(Ga.prototype, {
        getBufferSize: function () {
          var a = kc.toFloat(Ne.get_length(this.data)) / kc.toFloat(4) / 2 | 0;
          if (a > 0) {
            if (a != 0 && (a & a - 1) == 0 && a >= 2048 && a <= 8192) {
              this.tempBuffer = new Float32Array(a * 2);
              return a;
            }
            throw new Pb("To be consistent with flash the listener function registered to SampleDataEvent has to provide 2048, 4096 or 8192 samples if targeting HTML5.");
          }
          return 0;
        },
        getSamples: function (a) {
          this.data.position = 0;
          this.tempBuffer = Op.fromBytes(Ne.toBytes(this.data));
          this.leftChannel = a.outputBuffer.getChannelData(0);
          this.rightChannel = a.outputBuffer.getChannelData(1);
          for (var b = a = 0, c = kc.toFloat(Ne.get_length(this.data)) / kc.toFloat(2) | 0; b < c;) {
            var d = b++;
            this.leftChannel[d] = this.tempBuffer[a++];
            this.rightChannel[d] = this.tempBuffer[a++];
          }
        },
        __class__: Gm
      });
      function Hm(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Se.call(this, a, b, c, d, e);
      }
      g["openfl.events.SecurityErrorEvent"] = Hm;
      Hm.__name__ = "openfl.events.SecurityErrorEvent";
      Hm.__super__ = Se;
      Hm.prototype = q(Se.prototype, {
        __class__: Hm
      });
      function Ue(a, b, c, d, e, f, h, g, n, p, m, l, v, u, w, q, r, z, J, ba) {
        if (q == null) {
          q = false;
        }
        if (w == null) {
          w = false;
        }
        if (u == null) {
          u = false;
        }
        if (v == null) {
          v = false;
        }
        if (l == null) {
          l = false;
        }
        if (p == null) {
          p = 0;
        }
        if (n == null) {
          n = 0;
        }
        if (g == null) {
          g = 0;
        }
        if (h == null) {
          h = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        Ga.call(this, a, b, c);
        this.touchPointID = d;
        this.isPrimaryTouchPoint = e;
        this.localX = f;
        this.localY = h;
        this.sizeX = g;
        this.sizeY = n;
        this.pressure = p;
        this.relatedObject = m;
        this.ctrlKey = l;
        this.altKey = v;
        this.shiftKey = u;
        this.commandKey = w;
        this.controlKey = q;
        this.stageY = this.stageX = NaN;
        this.__updateAfterEventFlag = false;
      }
      g["openfl.events.TouchEvent"] = Ue;
      Ue.__name__ = "openfl.events.TouchEvent";
      Ue.__create = function (a, b, c, d, e, f) {
        a = new Ue(a, true, false, 0, true, e.x, e.y, 1, 1, 1);
        a.stageX = c;
        a.stageY = d;
        a.target = f;
        return a;
      };
      Ue.__super__ = Ga;
      Ue.prototype = q(Ga.prototype, {
        __class__: Ue
      });
      function xm(a, b, c, d) {
        if (c == null) {
          c = true;
        }
        if (b == null) {
          b = true;
        }
        Se.call(this, a, b, c);
        this.error = d;
      }
      g["openfl.events.UncaughtErrorEvent"] = xm;
      xm.__name__ = "openfl.events.UncaughtErrorEvent";
      xm.__super__ = Se;
      xm.prototype = q(Se.prototype, {
        __class__: xm
      });
      function sm() {
        pa.call(this);
      }
      g["openfl.events.UncaughtErrorEvents"] = sm;
      sm.__name__ = "openfl.events.UncaughtErrorEvents";
      sm.__super__ = pa;
      sm.prototype = q(pa.prototype, {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          pa.prototype.addEventListener.call(this, a, b, c, d, e);
          if (Object.prototype.hasOwnProperty.call(this.__eventMap.h, "uncaughtError")) {
            this.__enabled = true;
          }
        },
        removeEventListener: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          pa.prototype.removeEventListener.call(this, a, b, c);
          if (!Object.prototype.hasOwnProperty.call(this.__eventMap.h, "uncaughtError")) {
            this.__enabled = false;
          }
        },
        __class__: sm
      });
      var Np = {
        fromString: function (a) {
          switch (a) {
            case "full":
              return 0;
            case "inner":
              return 1;
            case "outer":
              return 2;
            default:
              return null;
          }
        }
      };
      function Im() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "uniform sampler2D openfl_Texture;\n\n\t\tvarying vec2 vBlurCoords[7];\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 sum = vec4(0.0);\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[0]) * 0.00443;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[1]) * 0.05399;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[2]) * 0.24197;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[3]) * 0.39894;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[4]) * 0.24197;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[5]) * 0.05399;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[6]) * 0.00443;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tuniform vec2 uRadius;\n\t\tvarying vec2 vBlurCoords[7];\n\t\tuniform vec2 uTextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\tvec2 r = uRadius / uTextureSize;\n\t\t\tvBlurCoords[0] = openfl_TextureCoord - r;\n\t\t\tvBlurCoords[1] = openfl_TextureCoord - r * 0.75;\n\t\t\tvBlurCoords[2] = openfl_TextureCoord - r * 0.5;\n\t\t\tvBlurCoords[3] = openfl_TextureCoord;\n\t\t\tvBlurCoords[4] = openfl_TextureCoord + r * 0.5;\n\t\t\tvBlurCoords[5] = openfl_TextureCoord + r * 0.75;\n\t\t\tvBlurCoords[6] = openfl_TextureCoord + r;\n\n\t\t}";
        }
        nc.call(this);
        this.uRadius.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      g["openfl.filters._BlurFilter.BlurShader"] = Im;
      Im.__name__ = "openfl.filters._BlurFilter.BlurShader";
      Im.__super__ = nc;
      Im.prototype = q(nc.prototype, {
        __update: function () {
          this.uTextureSize.value = [this.__texture.input.width, this.__texture.input.height];
          nc.prototype.__update.call(this);
        },
        __class__: Im
      });
      function Df(a, b, c) {
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 4;
        }
        if (a == null) {
          a = 4;
        }
        oe.call(this);
        this.set_blurX(a);
        this.set_blurY(b);
        this.set_quality(c);
        this.__needSecondBitmapData = true;
        this.__preserveObject = false;
        this.__renderDirty = true;
      }
      g["openfl.filters.BlurFilter"] = Df;
      Df.__name__ = "openfl.filters.BlurFilter";
      Df.__super__ = oe;
      Df.prototype = q(oe.prototype, {
        clone: function () {
          return new Df(this.__blurX, this.__blurY, this.__quality);
        },
        __applyFilter: function (a, b, c, d) {
          new Date().getTime();
          c = zc.gaussianBlur(a.image, b.image, c.__toLimeRectangle(), d.__toLimeVector2(), this.__blurX, this.__blurY, this.__quality);
          new Date().getTime();
          if (c == a.image) {
            return a;
          } else {
            return b;
          }
        },
        __initShader: function (a, b, c) {
          if (b < this.__horizontalPasses) {
            a = Math.pow(0.5, b >> 1);
            Df.__blurShader.uRadius.value[0] = this.get_blurX() * a;
            Df.__blurShader.uRadius.value[1] = 0;
          } else {
            a = Math.pow(0.5, b - this.__horizontalPasses >> 1);
            Df.__blurShader.uRadius.value[0] = 0;
            Df.__blurShader.uRadius.value[1] = this.get_blurY() * a;
          }
          return Df.__blurShader;
        },
        get_blurX: function () {
          return this.__blurX;
        },
        set_blurX: function (a) {
          if (a != this.__blurX) {
            this.__blurX = a;
            this.__renderDirty = true;
            this.__rightExtension = this.__leftExtension = a > 0 ? Math.ceil(a) : 0;
          }
          return a;
        },
        get_blurY: function () {
          return this.__blurY;
        },
        set_blurY: function (a) {
          if (a != this.__blurY) {
            this.__blurY = a;
            this.__renderDirty = true;
            this.__bottomExtension = this.__topExtension = a > 0 ? Math.ceil(a) : 0;
          }
          return a;
        },
        set_quality: function (a) {
          this.__horizontalPasses = this.__blurX <= 0 ? 0 : Math.round(a / 4 * this.__blurX) + 1;
          this.__verticalPasses = this.__blurY <= 0 ? 0 : Math.round(a / 4 * this.__blurY) + 1;
          this.__numShaderPasses = this.__horizontalPasses + this.__verticalPasses;
          if (a != this.__quality) {
            this.__renderDirty = true;
          }
          return this.__quality = a;
        },
        __class__: Df,
        __properties__: {
          set_quality: "set_quality",
          set_blurY: "set_blurY",
          get_blurY: "get_blurY",
          set_blurX: "set_blurX",
          get_blurX: "get_blurX"
        }
      });
      function Zj() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\t\tuniform sampler2D openfl_Texture;\n\n\t\tuniform mat4 uMultipliers;\n\t\tuniform vec4 uOffsets;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t\tif (color.a == 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t} else {\n\n\t\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\t\t\t\tcolor = uOffsets + color * uMultipliers;\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a, color.a);\n\n\t\t\t}\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\n\t\t}";
        }
        nc.call(this);
        this.uMultipliers.value = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
        this.uOffsets.value = [0, 0, 0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      g["openfl.filters._ColorMatrixFilter.ColorMatrixShader"] = Zj;
      Zj.__name__ = "openfl.filters._ColorMatrixFilter.ColorMatrixShader";
      Zj.__super__ = nc;
      Zj.prototype = q(nc.prototype, {
        init: function (a) {
          var b = this.uMultipliers.value;
          var c = this.uOffsets.value;
          b[0] = a[0];
          b[1] = a[1];
          b[2] = a[2];
          b[3] = a[3];
          b[4] = a[5];
          b[5] = a[6];
          b[6] = a[7];
          b[7] = a[8];
          b[8] = a[10];
          b[9] = a[11];
          b[10] = a[12];
          b[11] = a[13];
          b[12] = a[15];
          b[13] = a[16];
          b[14] = a[17];
          b[15] = a[18];
          c[0] = a[4] / 255;
          c[1] = a[9] / 255;
          c[2] = a[14] / 255;
          c[3] = a[19] / 255;
        },
        __class__: Zj
      });
      function Tg(a) {
        oe.call(this);
        this.set_matrix(a);
        this.__numShaderPasses = 1;
        this.__needSecondBitmapData = false;
      }
      g["openfl.filters.ColorMatrixFilter"] = Tg;
      Tg.__name__ = "openfl.filters.ColorMatrixFilter";
      Tg.__super__ = oe;
      Tg.prototype = q(oe.prototype, {
        clone: function () {
          return new Tg(this.__matrix);
        },
        __applyFilter: function (a, b, c, d) {
          var e = b.image;
          var f = a.image;
          Ya.convertToData(e);
          Ya.convertToData(f);
          var h = e.get_data();
          var g = f.get_data();
          var n = d.x - c.x | 0;
          d = d.y - c.y | 0;
          b = b.width * 4;
          var p = a.width * 4;
          var m = e.buffer.format;
          var l = f.buffer.format;
          e = e.buffer.premultiplied;
          f = f.buffer.premultiplied;
          for (var v = 0, u = 0, w, q, r = c.y | 0, z = c.height | 0; r < z;) {
            var J = r++;
            for (var ba = c.x | 0, y = c.width | 0; ba < y;) {
              q = ba++;
              w = J * b + q * 4;
              q = (J + n) * p + (q + d) * 4;
              var A = m;
              var D = e;
              if (D == null) {
                D = false;
              }
              if (A == null) {
                A = 0;
              }
              switch (A) {
                case 0:
                  v = (h[w] & 255) << 24 | (h[w + 1] & 255) << 16 | (h[w + 2] & 255) << 8 | h[w + 3] & 255;
                  break;
                case 1:
                  v = (h[w + 1] & 255) << 24 | (h[w + 2] & 255) << 16 | (h[w + 3] & 255) << 8 | h[w] & 255;
                  break;
                case 2:
                  v = (h[w + 2] & 255) << 24 | (h[w + 1] & 255) << 16 | (h[w] & 255) << 8 | h[w + 3] & 255;
              }
              if (D && (v & 255) != 0 && (v & 255) != 255) {
                S.unmult = 255 / (v & 255);
                v = (S.__clamp[Math.round((v >>> 24 & 255) * S.unmult)] & 255) << 24 | (S.__clamp[Math.round((v >>> 16 & 255) * S.unmult)] & 255) << 16 | (S.__clamp[Math.round((v >>> 8 & 255) * S.unmult)] & 255) << 8 | v & 255;
              }
              if ((v & 255) == 0) {
                u = 0;
              } else {
                u = ((Math.max(0, Math.min(this.__matrix[0] * (v >>> 24 & 255) + this.__matrix[1] * (v >>> 16 & 255) + this.__matrix[2] * (v >>> 8 & 255) + this.__matrix[3] * (v & 255) + this.__matrix[4], 255)) | 0) & 255) << 24 | (u >>> 16 & 255) << 16 | (u >>> 8 & 255) << 8 | u & 255;
                u = (u >>> 24 & 255) << 24 | ((Math.max(0, Math.min(this.__matrix[5] * (v >>> 24 & 255) + this.__matrix[6] * (v >>> 16 & 255) + this.__matrix[7] * (v >>> 8 & 255) + this.__matrix[8] * (v & 255) + this.__matrix[9], 255)) | 0) & 255) << 16 | (u >>> 8 & 255) << 8 | u & 255;
                u = (u >>> 24 & 255) << 24 | (u >>> 16 & 255) << 16 | ((Math.max(0, Math.min(this.__matrix[10] * (v >>> 24 & 255) + this.__matrix[11] * (v >>> 16 & 255) + this.__matrix[12] * (v >>> 8 & 255) + this.__matrix[13] * (v & 255) + this.__matrix[14], 255)) | 0) & 255) << 8 | u & 255;
                u = (u >>> 24 & 255) << 24 | (u >>> 16 & 255) << 16 | (u >>> 8 & 255) << 8 | (Math.max(0, Math.min(this.__matrix[15] * (v >>> 24 & 255) + this.__matrix[16] * (v >>> 16 & 255) + this.__matrix[17] * (v >>> 8 & 255) + this.__matrix[18] * (v & 255) + this.__matrix[19], 255)) | 0) & 255;
              }
              w = l;
              A = f;
              if (A == null) {
                A = false;
              }
              if (w == null) {
                w = 0;
              }
              if (A) {
                if ((u & 255) == 0) {
                  if (u != 0) {
                    u = 0;
                  }
                } else if ((u & 255) != 255) {
                  S.a16 = S.__alpha16[u & 255];
                  u = ((u >>> 24 & 255) * S.a16 >> 16 & 255) << 24 | ((u >>> 16 & 255) * S.a16 >> 16 & 255) << 16 | ((u >>> 8 & 255) * S.a16 >> 16 & 255) << 8 | u & 255;
                }
              }
              switch (w) {
                case 0:
                  g[q] = u >>> 24 & 255;
                  g[q + 1] = u >>> 16 & 255;
                  g[q + 2] = u >>> 8 & 255;
                  g[q + 3] = u & 255;
                  break;
                case 1:
                  g[q] = u & 255;
                  g[q + 1] = u >>> 24 & 255;
                  g[q + 2] = u >>> 16 & 255;
                  g[q + 3] = u >>> 8 & 255;
                  break;
                case 2:
                  g[q] = u >>> 8 & 255;
                  g[q + 1] = u >>> 16 & 255;
                  g[q + 2] = u >>> 24 & 255;
                  g[q + 3] = u & 255;
              }
            }
          }
          a.image.dirty = true;
          return a;
        },
        __initShader: function (a, b, c) {
          Tg.__colorMatrixShader.init(this.get_matrix());
          return Tg.__colorMatrixShader;
        },
        get_matrix: function () {
          return this.__matrix;
        },
        set_matrix: function (a) {
          if (a == null) {
            a = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0];
          }
          return this.__matrix = a;
        },
        __class__: Tg,
        __properties__: {
          set_matrix: "set_matrix",
          get_matrix: "get_matrix"
        }
      });
      function Jm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec4 uColor;\n\t\tuniform float uStrength;\n\t\tvarying vec2 vTexCoord;\n\t\tvarying vec2 vBlurCoords[6];\n\n\t\tvoid main(void)\n\t\t{\n            vec4 texel = texture2D(openfl_Texture, vTexCoord);\n\n            vec3 contributions = vec3(0.00443, 0.05399, 0.24197);\n            vec3 top = vec3(\n                texture2D(openfl_Texture, vBlurCoords[0]).a,\n                texture2D(openfl_Texture, vBlurCoords[1]).a,\n                texture2D(openfl_Texture, vBlurCoords[2]).a\n            );\n            vec3 bottom = vec3(\n                texture2D(openfl_Texture, vBlurCoords[3]).a,\n                texture2D(openfl_Texture, vBlurCoords[4]).a,\n                texture2D(openfl_Texture, vBlurCoords[5]).a\n            );\n\n            float a = texel.a * 0.39894;\n\t\t\ta += dot(top, contributions.xyz);\n            a += dot(bottom, contributions.zyx);\n\n\t\t\tgl_FragColor = uColor * clamp(a * uStrength, 0.0, 1.0);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tuniform vec2 uRadius;\n\t\tvarying vec2 vTexCoord;\n\t\tvarying vec2 vBlurCoords[6];\n\n\t\tvoid main(void) {\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\tvTexCoord = openfl_TextureCoord;\n\n\t\t\tvec3 offset = vec3(0.5, 0.75, 1.0);\n\t\t\tvec2 r = uRadius / openfl_TextureSize;\n\t\t\tvBlurCoords[0] = openfl_TextureCoord - r * offset.z;\n\t\t\tvBlurCoords[1] = openfl_TextureCoord - r * offset.y;\n\t\t\tvBlurCoords[2] = openfl_TextureCoord - r * offset.x;\n\t\t\tvBlurCoords[3] = openfl_TextureCoord + r * offset.x;\n\t\t\tvBlurCoords[4] = openfl_TextureCoord + r * offset.y;\n\t\t\tvBlurCoords[5] = openfl_TextureCoord + r * offset.z;\n\t\t}\n\t";
        }
        nc.call(this);
        this.uRadius.value = [0, 0];
        this.uColor.value = [0, 0, 0, 0];
        this.uStrength.value = [1];
        this.__isGenerated = true;
        this.__initGL();
      }
      g["openfl.filters._GlowFilter.BlurAlphaShader"] = Jm;
      Jm.__name__ = "openfl.filters._GlowFilter.BlurAlphaShader";
      Jm.__super__ = nc;
      Jm.prototype = q(nc.prototype, {
        __class__: Jm
      });
      function Km() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = glow * (1.0 - src.a);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t";
        }
        nc.call(this);
        this.offset.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      g["openfl.filters._GlowFilter.CombineKnockoutShader"] = Km;
      Km.__name__ = "openfl.filters._GlowFilter.CombineKnockoutShader";
      Km.__super__ = nc;
      Km.prototype = q(nc.prototype, {
        __class__: Km
      });
      function Lm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = src + glow * (1.0 - src.a);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t";
        }
        nc.call(this);
        this.offset.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      g["openfl.filters._GlowFilter.CombineShader"] = Lm;
      Lm.__name__ = "openfl.filters._GlowFilter.CombineShader";
      Lm.__super__ = nc;
      Lm.prototype = q(nc.prototype, {
        __class__: Lm
      });
      function Mm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = glow * src.a;\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t";
        }
        nc.call(this);
        this.offset.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      g["openfl.filters._GlowFilter.InnerCombineKnockoutShader"] = Mm;
      Mm.__name__ = "openfl.filters._GlowFilter.InnerCombineKnockoutShader";
      Mm.__super__ = nc;
      Mm.prototype = q(nc.prototype, {
        __class__: Mm
      });
      function Nm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = vec4((src.rgb * (1.0 - glow.a)) + (glow.rgb * src.a), src.a);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t";
        }
        nc.call(this);
        this.offset.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      g["openfl.filters._GlowFilter.InnerCombineShader"] = Nm;
      Nm.__name__ = "openfl.filters._GlowFilter.InnerCombineShader";
      Nm.__super__ = nc;
      Nm.prototype = q(nc.prototype, {
        __class__: Nm
      });
      function Om() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tvarying vec2 vTexCoord;\n\n\t\tvoid main(void) {\n\t\t\tvec4 texel = texture2D(openfl_Texture, vTexCoord);\n\t\t\tgl_FragColor = vec4(texel.rgb, 1.0 - texel.a);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tvarying vec2 vTexCoord;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\tvTexCoord = openfl_TextureCoord;\n\t\t}\n\t";
        }
        nc.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      g["openfl.filters._GlowFilter.InvertAlphaShader"] = Om;
      Om.__name__ = "openfl.filters._GlowFilter.InvertAlphaShader";
      Om.__super__ = nc;
      Om.prototype = q(nc.prototype, {
        __class__: Om
      });
      function Ed(a, b, c, d, e, f, h, g) {
        if (g == null) {
          g = false;
        }
        if (h == null) {
          h = false;
        }
        if (f == null) {
          f = 1;
        }
        if (e == null) {
          e = 2;
        }
        if (d == null) {
          d = 6;
        }
        if (c == null) {
          c = 6;
        }
        if (b == null) {
          b = 1;
        }
        if (a == null) {
          a = 16711680;
        }
        oe.call(this);
        this.__color = a;
        this.__alpha = b;
        this.__blurX = c;
        this.__blurY = d;
        this.__strength = e;
        this.__inner = h;
        this.__knockout = g;
        this.__quality = f;
        this.__updateSize();
        this.__renderDirty = this.__preserveObject = this.__needSecondBitmapData = true;
      }
      g["openfl.filters.GlowFilter"] = Ed;
      Ed.__name__ = "openfl.filters.GlowFilter";
      Ed.__super__ = oe;
      Ed.prototype = q(oe.prototype, {
        clone: function () {
          return new Ed(this.__color, this.__alpha, this.__blurX, this.__blurY, this.__strength, this.__quality, this.__inner, this.__knockout);
        },
        __applyFilter: function (a, b, c, d) {
          var e = this.__color >> 16 & 255;
          var f = this.__color >> 8 & 255;
          var h = this.__color & 255;
          c = zc.gaussianBlur(a.image, b.image, c.__toLimeRectangle(), d.__toLimeVector2(), this.__blurX, this.__blurY, this.__quality, this.__strength);
          c.colorTransform(c.get_rect(), new Lb(0, 0, 0, this.__alpha, e, f, h, 0).__toLimeColorMatrix());
          if (c == a.image) {
            return a;
          } else {
            return b;
          }
        },
        __initShader: function (a, b, c) {
          if (this.__inner && b == 0) {
            return Ed.__invertAlphaShader;
          }
          a = b - (this.__inner ? 1 : 0);
          b = this.__horizontalPasses + this.__verticalPasses;
          if (a < b) {
            var d = Ed.__blurAlphaShader;
            if (a < this.__horizontalPasses) {
              c = Math.pow(0.5, a >> 1) * 0.5;
              d.uRadius.value[0] = this.get_blurX() * c;
              d.uRadius.value[1] = 0;
            } else {
              c = Math.pow(0.5, a - this.__horizontalPasses >> 1) * 0.5;
              d.uRadius.value[0] = 0;
              d.uRadius.value[1] = this.get_blurY() * c;
            }
            d.uColor.value[0] = (this.get_color() >> 16 & 255) / 255;
            d.uColor.value[1] = (this.get_color() >> 8 & 255) / 255;
            d.uColor.value[2] = (this.get_color() & 255) / 255;
            d.uColor.value[3] = this.get_alpha();
            d.uStrength.value[0] = a == b - 1 ? this.__strength : 1;
            return d;
          }
          if (this.__inner) {
            if (this.__knockout) {
              d = Ed.__innerCombineKnockoutShader;
              d.sourceBitmap.input = c;
              d.offset.value[0] = 0;
              d.offset.value[1] = 0;
              return d;
            }
            d = Ed.__innerCombineShader;
          } else {
            if (this.__knockout) {
              d = Ed.__combineKnockoutShader;
              d.sourceBitmap.input = c;
              d.offset.value[0] = 0;
              d.offset.value[1] = 0;
              return d;
            }
            d = Ed.__combineShader;
          }
          d.sourceBitmap.input = c;
          d.offset.value[0] = 0;
          d.offset.value[1] = 0;
          return d;
        },
        __updateSize: function () {
          this.__rightExtension = this.__leftExtension = this.__blurX > 0 ? Math.ceil(this.__blurX * 1.5) : 0;
          this.__bottomExtension = this.__topExtension = this.__blurY > 0 ? Math.ceil(this.__blurY * 1.5) : 0;
          this.__calculateNumShaderPasses();
        },
        __calculateNumShaderPasses: function () {
          this.__horizontalPasses = this.__blurX <= 0 ? 0 : Math.round(this.__quality / 4 * this.__blurX) + 1;
          this.__verticalPasses = this.__blurY <= 0 ? 0 : Math.round(this.__quality / 4 * this.__blurY) + 1;
          this.__numShaderPasses = this.__horizontalPasses + this.__verticalPasses + (this.__inner ? 2 : 1);
        },
        get_alpha: function () {
          return this.__alpha;
        },
        get_blurX: function () {
          return this.__blurX;
        },
        get_blurY: function () {
          return this.__blurY;
        },
        get_color: function () {
          return this.__color;
        },
        __class__: Ed,
        __properties__: {
          get_color: "get_color",
          get_blurY: "get_blurY",
          get_blurX: "get_blurX",
          get_alpha: "get_alpha"
        }
      });
      function lk(a) {
        this.__colorTransform = new Lb();
        this.concatenatedColorTransform = new Lb();
        this.pixelBounds = new da();
        this.__displayObject = a;
        this.__hasMatrix = true;
      }
      g["openfl.geom.Transform"] = lk;
      lk.__name__ = "openfl.geom.Transform";
      lk.prototype = {
        get_colorTransform: function () {
          return this.__colorTransform.__clone();
        },
        set_colorTransform: function (a) {
          if (!this.__colorTransform.__equals(a, false)) {
            this.__colorTransform.__copyFrom(a);
            if (a != null) {
              this.__displayObject.set_alpha(a.alphaMultiplier);
            }
            a = this.__displayObject;
            if (!a.__renderDirty) {
              a.__renderDirty = true;
              a.__setParentRenderDirty();
            }
          }
          return this.__colorTransform;
        },
        get_matrix: function () {
          if (this.__hasMatrix) {
            return this.__displayObject.__transform.clone();
          } else {
            return null;
          }
        },
        set_matrix: function (a) {
          if (a == null) {
            this.__hasMatrix = false;
            return null;
          }
          this.__hasMatrix = true;
          this.__hasMatrix3D = false;
          if (this.__displayObject != null) {
            this.__setTransform(a.a, a.b, a.c, a.d, a.tx, a.ty);
          }
          return a;
        },
        __setTransform: function (a, b, c, d, e, f) {
          if (this.__displayObject != null) {
            var h = this.__displayObject.__transform;
            if (h.a != a || h.b != b || h.c != c || h.d != d || h.tx != e || h.ty != f) {
              var g = b == 0 ? a : Math.sqrt(a * a + b * b);
              var n = c == 0 ? d : Math.sqrt(c * c + d * d);
              this.__displayObject.__scaleX = g;
              this.__displayObject.__scaleY = n;
              g = 180 / Math.PI * Math.atan2(d, c) - 90;
              if (g != this.__displayObject.__rotation) {
                this.__displayObject.__rotation = g;
                g *= Math.PI / 180;
                this.__displayObject.__rotationSine = Math.sin(g);
                this.__displayObject.__rotationCosine = Math.cos(g);
              }
              h.a = a;
              h.b = b;
              h.c = c;
              h.d = d;
              h.tx = e;
              h.ty = f;
              this.__displayObject.__setTransformDirty();
            }
          }
        },
        __class__: lk,
        __properties__: {
          set_matrix: "set_matrix",
          get_matrix: "get_matrix",
          set_colorTransform: "set_colorTransform",
          get_colorTransform: "get_colorTransform"
        }
      };
      function Oo() {}
      g["openfl.media.ID3Info"] = Oo;
      Oo.__name__ = "openfl.media.ID3Info";
      Oo.prototype = {
        __class__: Oo
      };
      function ng(a, b) {
        this.__webAudioContext = null;
        this.__urlLoading = false;
        pa.call(this, this);
        this.bytesTotal = this.bytesLoaded = 0;
        this.isBuffering = false;
        this.url = null;
        if (a != null) {
          this.load(a, b);
        }
        if (a == null && cg.context != null && cg.context.type == "web") {
          this.__webAudioContext = cg.context.web;
        }
      }
      g["openfl.media.Sound"] = ng;
      ng.__name__ = "openfl.media.Sound";
      ng.fromAudioBuffer = function (a) {
        var b = new ng();
        b.__buffer = a;
        return b;
      };
      ng.__super__ = pa;
      ng.prototype = q(pa.prototype, {
        load: function (a, b) {
          var c = this;
          this.url = a.url;
          this.__urlLoading = true;
          a = sa.getLibrary("default");
          if (a != null && Object.prototype.hasOwnProperty.call(a.cachedAudioBuffers.h, this.url)) {
            this.AudioBuffer_onURLLoad(a.cachedAudioBuffers.h[this.url]);
          } else {
            Zc.loadFromFile(this.url).onComplete(m(this, this.AudioBuffer_onURLLoad)).onError(function (a) {
              c.AudioBuffer_onURLLoad(null);
            });
          }
        },
        play: function (a, b, c) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (se.__soundChannels.length >= 32) {
            return null;
          }
          c = c == null ? new mg() : c.clone();
          var d = se.__soundTransform.pan + c.pan;
          if (d > 1) {
            d = 1;
          }
          if (d < -1) {
            d = -1;
          }
          var e = se.__soundTransform.volume * c.volume;
          var f = new Bo(this.__buffer);
          f.offset = a | 0;
          if (b > 1) {
            f.set_loops(b - 1);
          }
          f.set_gain(e);
          a = f.get_position();
          a.x = d;
          a.z = Math.sqrt(1 - Math.pow(d, 2)) * -1;
          f.set_position(a);
          c = new Pm(this, this.__urlLoading ? null : f, c);
          if (this.__urlLoading) {
            this.__pendingAudioSource = f;
            this.__pendingSoundChannel = c;
          } else if (this.__buffer == null && this.__webAudioContext != null) {
            c.__startSampleData();
          }
          return c;
        },
        get_id3: function () {
          return new Oo();
        },
        get_length: function () {
          if (this.__buffer != null) {
            return this.__buffer.get_src().duration() * 1000 | 0;
          } else {
            return 0;
          }
        },
        AudioBuffer_onURLLoad: function (a) {
          this.__urlLoading = false;
          if (a == null) {
            this.dispatchEvent(new Xj("ioError"));
          } else {
            this.__buffer = a;
            this.dispatchEvent(new Ga("complete"));
            if (this.__pendingSoundChannel != null) {
              this.__pendingAudioSource.buffer = this.__buffer;
              this.__pendingAudioSource.init();
              this.__pendingSoundChannel.__initAudioSource(this.__pendingAudioSource);
            }
          }
          this.__pendingAudioSource = this.__pendingSoundChannel = null;
        },
        __class__: ng,
        __properties__: {
          get_length: "get_length",
          get_id3: "get_id3"
        }
      });
      function Pm(a, b, c) {
        this.__firstRun = true;
        pa.call(this, this);
        this.__sound = a;
        this.rightPeak = this.leftPeak = 1;
        this.__soundTransform = c ?? new mg();
        this.__initAudioSource(b);
        se.__registerSoundChannel(this);
      }
      g["openfl.media.SoundChannel"] = Pm;
      Pm.__name__ = "openfl.media.SoundChannel";
      Pm.__super__ = pa;
      Pm.prototype = q(pa.prototype, {
        stop: function () {
          se.__unregisterSoundChannel(this);
          if (this.__isValid) {
            if (this.__processor != null) {
              this.__processor.disconnect();
              this.__processor = this.__processor.onaudioprocess = null;
            }
            this.__audioSource.stop();
            this.__dispose();
          }
        },
        __dispose: function () {
          if (this.__isValid) {
            this.__audioSource.onComplete.remove(m(this, this.audioSource_onComplete));
            this.__audioSource.dispose();
            this.__audioSource = null;
            this.__isValid = false;
          }
        },
        __startSampleData: function () {
          var a = this;
          var b = this.__sound.__webAudioContext;
          if (b != null) {
            this.__sampleDataEvent = new Gm("sampleData");
            this.__sound.dispatchEvent(this.__sampleDataEvent);
            var c = this.__sampleDataEvent.getBufferSize();
            if (c == 0) {
              oa.setTimeout(function () {
                a.stop();
                a.dispatchEvent(new Ga("soundComplete"));
              }, 1);
            } else {
              this.__processor = b.createScriptProcessor(c, 0, 2);
              this.__processor.connect(b.destination);
              this.__processor.onaudioprocess = m(this, this.onSample);
              b.resume();
            }
          }
        },
        __updateTransform: function () {
          this.set_soundTransform(this.get_soundTransform());
        },
        __initAudioSource: function (a) {
          this.__audioSource = a;
          if (this.__audioSource != null) {
            this.__audioSource.onComplete.add(m(this, this.audioSource_onComplete));
            this.__isValid = true;
            this.__audioSource.play();
          }
        },
        get_position: function () {
          if (this.__isValid) {
            return this.__audioSource.get_currentTime() + this.__audioSource.offset;
          } else {
            return 0;
          }
        },
        set_position: function (a) {
          if (!this.__isValid) {
            return 0;
          }
          this.__audioSource.set_currentTime((a | 0) - this.__audioSource.offset);
          return a;
        },
        get_soundTransform: function () {
          return this.__soundTransform.clone();
        },
        set_soundTransform: function (a) {
          if (a != null) {
            this.__soundTransform.pan = a.pan;
            this.__soundTransform.volume = a.volume;
            var b = se.__soundTransform.pan + this.__soundTransform.pan;
            if (b < -1) {
              b = -1;
            }
            if (b > 1) {
              b = 1;
            }
            var c = se.__soundTransform.volume * this.__soundTransform.volume;
            if (this.__isValid) {
              this.__audioSource.set_gain(c);
              c = this.__audioSource.get_position();
              c.x = b;
              c.z = Math.sqrt(1 - Math.pow(b, 2)) * -1;
              this.__audioSource.set_position(c);
            }
          }
          return a;
        },
        audioSource_onComplete: function () {
          se.__unregisterSoundChannel(this);
          this.__dispose();
          this.dispatchEvent(new Ga("soundComplete"));
        },
        onSample: function (a) {
          if (this.__firstRun) {
            var b = true;
            this.__firstRun = false;
          } else {
            Ne.set_length(this.__sampleDataEvent.data, 0);
            this.__sound.dispatchEvent(this.__sampleDataEvent);
            b = kc.gt(Ne.get_length(this.__sampleDataEvent.data), 0);
          }
          if (b) {
            this.__sampleDataEvent.getSamples(a);
          } else {
            this.stop();
            this.dispatchEvent(new Ga("soundComplete"));
          }
        },
        __class__: Pm,
        __properties__: {
          set_soundTransform: "set_soundTransform",
          get_soundTransform: "get_soundTransform",
          set_position: "set_position",
          get_position: "get_position"
        }
      });
      function Cp() {}
      g["openfl.media.SoundLoaderContext"] = Cp;
      Cp.__name__ = "openfl.media.SoundLoaderContext";
      function mg(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 1;
        }
        this.volume = a;
        this.pan = b;
        this.rightToRight = this.rightToLeft = this.leftToRight = this.leftToLeft = 0;
      }
      g["openfl.media.SoundTransform"] = mg;
      mg.__name__ = "openfl.media.SoundTransform";
      mg.prototype = {
        clone: function () {
          return new mg(this.volume, this.pan);
        },
        __class__: mg
      };
      function se() {}
      g["openfl.media.SoundMixer"] = se;
      se.__name__ = "openfl.media.SoundMixer";
      se.__registerSoundChannel = function (a) {
        se.__soundChannels.push(a);
      };
      se.__unregisterSoundChannel = function (a) {
        r.remove(se.__soundChannels, a);
      };
      function ok(a, b) {
        if (b == null) {
          b = 240;
        }
        if (a == null) {
          a = 320;
        }
        wa.call(this);
        this.__drawableType = 8;
        this.__width = a;
        this.__height = b;
        this.__textureTime = -1;
        this.smoothing = false;
        this.deblocking = 0;
      }
      g["openfl.media.Video"] = ok;
      ok.__name__ = "openfl.media.Video";
      ok.__super__ = wa;
      ok.prototype = q(wa.prototype, {
        attachNetStream: function (a) {
          this.__stream = a;
          if (this.__stream != null && this.__stream.__video != null && !this.__stream.__closed) {
            this.__stream.__video.play();
          }
        },
        __enterFrame: function (a) {
          if (this.__renderable && this.__stream != null && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
        },
        __getBounds: function (a, b) {
          var c = da.__pool.get();
          c.setTo(0, 0, this.__width, this.__height);
          c.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          da.__pool.release(c);
        },
        __getIndexBuffer: function (a) {
          if (this.__indexBuffer == null || this.__indexBufferContext != a.__context) {
            this.__indexBufferData = new Uint16Array(6);
            this.__indexBufferData[0] = 0;
            this.__indexBufferData[1] = 1;
            this.__indexBufferData[2] = 2;
            this.__indexBufferData[3] = 2;
            this.__indexBufferData[4] = 1;
            this.__indexBufferData[5] = 3;
            this.__indexBufferContext = a.__context;
            this.__indexBuffer = a.createIndexBuffer(6);
            this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData);
          }
          return this.__indexBuffer;
        },
        __getTexture: function (a) {
          if (this.__stream == null || this.__stream.__video == null) {
            return null;
          }
          var b = a.__context.webgl;
          var c = b.RGBA;
          var d = b.RGBA;
          if (!this.__stream.__closed && this.__stream.__video.currentTime != this.__textureTime) {
            if (this.__texture == null) {
              this.__texture = a.createRectangleTexture(this.__stream.__video.videoWidth, this.__stream.__video.videoHeight, 1, false);
            }
            a.__bindGLTexture2D(this.__texture.__textureID);
            Xc.texImage2D(b, b.TEXTURE_2D, 0, c, d, b.UNSIGNED_BYTE, this.__stream.__video);
            this.__textureTime = this.__stream.__video.currentTime;
          }
          return this.__texture;
        },
        __getVertexBuffer: function (a) {
          if (this.__vertexBuffer == null || this.__vertexBufferContext != a.__context || this.__currentWidth != this.get_width() || this.__currentHeight != this.get_height()) {
            this.__currentWidth = this.get_width();
            this.__currentHeight = this.get_height();
            this.__vertexBufferData = new Float32Array(20);
            this.__vertexBufferData[0] = this.get_width();
            this.__vertexBufferData[1] = this.get_height();
            this.__vertexBufferData[3] = 1;
            this.__vertexBufferData[4] = 1;
            this.__vertexBufferData[6] = this.get_height();
            this.__vertexBufferData[9] = 1;
            this.__vertexBufferData[10] = this.get_width();
            this.__vertexBufferData[13] = 1;
            this.__vertexBufferContext = a.__context;
            this.__vertexBuffer = a.createVertexBuffer(3, 5);
            this.__vertexBuffer.uploadFromTypedArray(bj.toArrayBufferView(this.__vertexBufferData));
          }
          return this.__vertexBuffer;
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          this.__getRenderTransform();
          var h = this.__renderTransform;
          var g = h.a * h.d - h.b * h.c;
          c = g == 0 ? -h.tx : 1 / g * (h.c * (h.ty - b) + h.d * (a - h.tx));
          h = this.__renderTransform;
          g = h.a * h.d - h.b * h.c;
          a = g == 0 ? -h.ty : 1 / g * (h.a * (b - h.ty) + h.b * (h.tx - a));
          if (c > 0 && a > 0 && c <= this.__width && a <= this.__height) {
            if (d != null && !e) {
              d.push(f);
            }
            return true;
          } else {
            return false;
          }
        },
        __hitTestMask: function (a, b) {
          var c = lb.__pool.get();
          c.setTo(a, b);
          this.__globalToLocal(c, c);
          a = c.x > 0 && c.y > 0 && c.x <= this.__width && c.y <= this.__height;
          lb.__pool.release(c);
          return a;
        },
        get_height: function () {
          return this.__height * this.get_scaleY();
        },
        set_height: function (a) {
          if (this.get_scaleY() != 1 || a != this.__height) {
            this.__setTransformDirty();
            this.__dirty = true;
          }
          this.set_scaleY(1);
          return this.__height = a;
        },
        get_width: function () {
          return this.__width * this.__scaleX;
        },
        set_width: function (a) {
          if (this.__scaleX != 1 || this.__width != a) {
            this.__setTransformDirty();
            this.__dirty = true;
          }
          this.set_scaleX(1);
          return this.__width = a;
        },
        __class__: ok
      });
      function Fi(a, b, c) {
        this.description = a;
        this.extension = b;
        this.macType = c;
      }
      g["openfl.net.FileFilter"] = Fi;
      Fi.__name__ = "openfl.net.FileFilter";
      Fi.prototype = {
        __class__: Fi
      };
      function Fe() {
        pa.call(this);
        this.__inputControl = window.document.createElement("input");
        this.__inputControl.setAttribute("type", "file");
        this.__inputControl.onclick = function (a) {
          a.cancelBubble = true;
          a.stopPropagation();
        };
      }
      g["openfl.net.FileReference"] = Fe;
      Fe.__name__ = "openfl.net.FileReference";
      Fe.__super__ = pa;
      Fe.prototype = q(pa.prototype, {
        browse: function (a) {
          var b = this;
          var c = this.__path = this.__data = null;
          if (a != null) {
            c = [];
            for (var d = 0; d < a.length;) {
              var e = a[d];
              ++d;
              c.push(w.replace(w.replace(e.extension, "*.", "."), ";", ","));
            }
            c = c.join(",");
          }
          if (c != null) {
            this.__inputControl.setAttribute("accept", c);
          } else {
            this.__inputControl.removeAttribute("accept");
          }
          this.__inputControl.onchange = function () {
            if (b.__inputControl.files.length == 0) {
              b.dispatchEvent(new Ga("cancel"));
            } else {
              var a = b.__inputControl.files[0];
              var c = new Date(a.lastModified);
              b.modificationDate = c;
              b.creationDate = b.get_modificationDate();
              b.size = a.size;
              c = Kc.extension(a.name);
              b.type = "." + c;
              b.name = Kc.withoutDirectory(a.name);
              b.__path = a.name;
              b.dispatchEvent(new Ga("select"));
            }
          };
          this.__inputControl.click();
          return true;
        },
        save: function (a, b) {
          this.__path = this.__data = null;
          if (a != null) {
            if (a instanceof vd) {
              this.__data = a;
            } else {
              this.__data = new vd(0);
              this.__data.writeUTFBytes(v.string(a));
            }
            a = new Co();
            a.onCancel.add(m(this, this.saveFileDialog_onCancel));
            a.onSave.add(m(this, this.saveFileDialog_onSave));
            a.save(this.__data, b != null ? Kc.extension(b) : null, b);
          }
        },
        saveFileDialog_onCancel: function () {
          this.dispatchEvent(new Ga("cancel"));
        },
        saveFileDialog_onSave: function (a) {
          var b = this;
          gg.delay(function () {
            b.dispatchEvent(new Ga("complete"));
          }, 1);
        },
        get_modificationDate: function () {
          return this.modificationDate;
        },
        __class__: Fe,
        __properties__: {
          get_modificationDate: "get_modificationDate"
        }
      });
      function pk() {
        pa.call(this);
      }
      g["openfl.net.NetConnection"] = pk;
      pk.__name__ = "openfl.net.NetConnection";
      pk.__super__ = pa;
      pk.prototype = q(pa.prototype, {
        connect: function (a, b, c, d, e, f) {
          if (a != null) {
            throw G.thrown("Error: Can only connect in \"HTTP streaming\" mode");
          }
          this.dispatchEvent(new Yj("netStatus", false, true, {
            code: "NetConnection.Connect.Success"
          }));
        },
        __class__: pk
      });
      function qk(a, b) {
        pa.call(this);
        this.__connection = a;
        this.__soundTransform = new mg();
        this.__video = window.document.createElement("video");
        this.__video.setAttribute("playsinline", "");
        this.__video.setAttribute("webkit-playsinline", "");
        this.__video.setAttribute("crossorigin", "anonymous");
        this.__video.addEventListener("error", m(this, this.video_onError), false);
        this.__video.addEventListener("waiting", m(this, this.video_onWaiting), false);
        this.__video.addEventListener("ended", m(this, this.video_onEnd), false);
        this.__video.addEventListener("pause", m(this, this.video_onPause), false);
        this.__video.addEventListener("seeking", m(this, this.video_onSeeking), false);
        this.__video.addEventListener("playing", m(this, this.video_onPlaying), false);
        this.__video.addEventListener("timeupdate", m(this, this.video_onTimeUpdate), false);
        this.__video.addEventListener("loadstart", m(this, this.video_onLoadStart), false);
        this.__video.addEventListener("stalled", m(this, this.video_onStalled), false);
        this.__video.addEventListener("durationchanged", m(this, this.video_onDurationChanged), false);
        this.__video.addEventListener("canplay", m(this, this.video_onCanPlay), false);
        this.__video.addEventListener("canplaythrough", m(this, this.video_onCanPlayThrough), false);
        this.__video.addEventListener("loadedmetadata", m(this, this.video_onLoadMetaData), false);
      }
      g["openfl.net.NetStream"] = qk;
      qk.__name__ = "openfl.net.NetStream";
      qk.__super__ = pa;
      qk.prototype = q(pa.prototype, {
        close: function () {
          if (this.__video != null) {
            this.__closed = true;
            this.__video.pause();
            this.__video.src = "";
            this.time = 0;
          }
        },
        dispose: function () {
          this.close();
          this.__video = null;
        },
        play: function (a, b, c, d, e, f) {
          if (this.__video != null) {
            this.__video.volume = se.__soundTransform.volume * this.__soundTransform.volume;
            if (typeof a == "string") {
              this.__video.src = a;
            } else {
              this.__video.srcObject = a;
            }
            this.__video.play();
          }
        },
        __dispatchStatus: function (a) {
          a = new Yj("netStatus", false, false, {
            code: a
          });
          this.__connection.dispatchEvent(a);
          this.dispatchEvent(a);
        },
        __playStatus: function (a) {
          if (this.__video != null && this.client != null) {
            try {
              var b = this.client.onPlayStatus;
              b({
                code: a,
                duration: this.__video.duration,
                position: this.__video.currentTime,
                speed: this.__video.playbackRate,
                start: this.__video.startTime
              });
            } catch (c) {
              Pa.lastError = c;
            }
          }
        },
        video_onCanPlay: function (a) {
          this.__playStatus("NetStream.Play.canplay");
        },
        video_onCanPlayThrough: function (a) {
          this.__playStatus("NetStream.Play.canplaythrough");
        },
        video_onDurationChanged: function (a) {
          this.__playStatus("NetStream.Play.durationchanged");
        },
        video_onEnd: function (a) {
          this.__dispatchStatus("NetStream.Play.Stop");
          this.__dispatchStatus("NetStream.Play.Complete");
          this.__playStatus("NetStream.Play.Complete");
        },
        video_onError: function (a) {
          this.__dispatchStatus("NetStream.Play.Stop");
          this.__playStatus("NetStream.Play.error");
        },
        video_onLoadMetaData: function (a) {
          if (this.__video != null && this.client != null) {
            try {
              var b = this.client.onMetaData;
              b({
                width: this.__video.videoWidth,
                height: this.__video.videoHeight,
                duration: this.__video.duration
              });
            } catch (c) {
              Pa.lastError = c;
            }
          }
        },
        video_onLoadStart: function (a) {
          this.__playStatus("NetStream.Play.loadstart");
        },
        video_onPause: function (a) {
          this.__playStatus("NetStream.Play.pause");
        },
        video_onPlaying: function (a) {
          this.__dispatchStatus("NetStream.Play.Start");
          this.__playStatus("NetStream.Play.playing");
        },
        video_onSeeking: function (a) {
          this.__playStatus("NetStream.Play.seeking");
          this.__dispatchStatus("NetStream.Seek.Complete");
        },
        video_onStalled: function (a) {
          this.__playStatus("NetStream.Play.stalled");
        },
        video_onTimeUpdate: function (a) {
          if (this.__video != null) {
            this.time = this.__video.currentTime;
            this.__playStatus("NetStream.Play.timeupdate");
          }
        },
        video_onWaiting: function (a) {
          this.__playStatus("NetStream.Play.waiting");
        },
        __class__: qk
      });
      function Po(a) {
        pa.call(this);
        this.bytesTotal = this.bytesLoaded = 0;
        this.dataFormat = 1;
        if (a != null) {
          this.load(a);
        }
      }
      g["openfl.net.URLLoader"] = Po;
      Po.__name__ = "openfl.net.URLLoader";
      Po.__super__ = pa;
      Po.prototype = q(pa.prototype, {
        load: function (a) {
          var b = this;
          var c = new Ga("open");
          this.dispatchEvent(c);
          if (this.dataFormat == 0) {
            c = new bm();
            this.__prepareRequest(c, a);
            c.load().onProgress(m(this, this.httpRequest_onProgress)).onError(m(this, this.httpRequest_onError)).onComplete(function (a) {
              b.__dispatchResponseStatus();
              b.__dispatchStatus();
              b.data = a;
              a = new Ga("complete");
              b.dispatchEvent(a);
            });
          } else {
            c = new ui();
            this.__prepareRequest(c, a);
            c.load().onProgress(m(this, this.httpRequest_onProgress)).onError(m(this, this.httpRequest_onError)).onComplete(function (a) {
              b.__dispatchResponseStatus();
              b.__dispatchStatus();
              b.data = a;
              a = new Ga("complete");
              b.dispatchEvent(a);
            });
          }
        },
        __dispatchResponseStatus: function () {
          var a = new Wj("httpResponseStatus", false, false, this.__httpRequest.responseStatus);
          a.responseURL = this.__httpRequest.uri;
          var b = [];
          if (this.__httpRequest.enableResponseHeaders && this.__httpRequest.responseHeaders != null) {
            for (var c = 0, d = this.__httpRequest.responseHeaders; c < d.length;) {
              var e = d[c];
              ++c;
              b.push(new Qo(e.name, e.value));
            }
          }
          a.responseHeaders = b;
          this.dispatchEvent(a);
        },
        __dispatchStatus: function () {
          var a = new Wj("httpStatus", false, false, this.__httpRequest.responseStatus);
          this.dispatchEvent(a);
        },
        __prepareRequest: function (a, b) {
          this.__httpRequest = a;
          this.__httpRequest.uri = b.url;
          this.__httpRequest.method = b.method;
          if (b.data != null) {
            if (yb.typeof(b.data) == Bc.TObject) {
              var c = ja.fields(b.data);
              for (a = 0; a < c.length;) {
                var d = c[a];
                ++a;
                this.__httpRequest.formData.h[d] = ja.field(b.data, d);
              }
            } else {
              this.__httpRequest.data = b.data instanceof Yb ? b.data : Yb.ofString(v.string(b.data));
            }
          }
          this.__httpRequest.contentType = b.contentType;
          if (b.requestHeaders != null) {
            a = 0;
            c = b.requestHeaders;
            while (a < c.length) {
              d = c[a];
              ++a;
              this.__httpRequest.headers.push(new Vl(d.name, d.value));
            }
          }
          this.__httpRequest.followRedirects = b.followRedirects;
          this.__httpRequest.timeout = b.idleTimeout | 0;
          this.__httpRequest.manageCookies = b.manageCookies;
          this.__httpRequest.userAgent = b.userAgent;
          this.__httpRequest.enableResponseHeaders = true;
        },
        httpRequest_onError: function (a) {
          this.__dispatchResponseStatus();
          this.__dispatchStatus();
          if (this.__httpRequest instanceof Xg) {
            this.data = this.__httpRequest.responseData;
          } else if (this.__httpRequest instanceof ui) {
            this.data = this.__httpRequest.responseData;
          }
          var b = a == 403 ? new Hm("securityError") : new Xj("ioError");
          b.text = v.string(a);
          this.dispatchEvent(b);
        },
        httpRequest_onProgress: function (a, b) {
          var c = new yi("progress");
          c.bytesLoaded = a;
          c.bytesTotal = b;
          this.dispatchEvent(c);
        },
        __class__: Po
      });
      function Sh(a) {
        if (a != null) {
          this.url = a;
        }
        this.contentType = null;
        this.followRedirects = bh.followRedirects;
        this.idleTimeout = bh.idleTimeout > 0 ? bh.idleTimeout : 30000;
        this.manageCookies = bh.manageCookies;
        this.method = "GET";
        this.requestHeaders = [];
        this.userAgent = bh.userAgent;
      }
      g["openfl.net.URLRequest"] = Sh;
      Sh.__name__ = "openfl.net.URLRequest";
      Sh.prototype = {
        __class__: Sh
      };
      function bh() {}
      g["openfl.net.URLRequestDefaults"] = bh;
      bh.__name__ = "openfl.net.URLRequestDefaults";
      function Qo(a, b) {
        if (b == null) {
          b = "";
        }
        if (a == null) {
          a = "";
        }
        this.name = a;
        this.value = b;
      }
      g["openfl.net.URLRequestHeader"] = Qo;
      Qo.__name__ = "openfl.net.URLRequestHeader";
      Qo.prototype = {
        __class__: Qo
      };
      function mc() {
        pa.call(this);
        mc.initialize();
        this.__interval = 0;
        this.__muted = false;
        this.setRequestedUpdateInterval(mc.defaultInterval);
      }
      g["openfl.sensors.Accelerometer"] = mc;
      mc.__name__ = "openfl.sensors.Accelerometer";
      mc.__properties__ = {
        get_isSupported: "get_isSupported"
      };
      mc.initialize = function () {
        if (!mc.initialized) {
          var a = He.getSensors(Vo.ACCELEROMETER);
          if (a.length > 0) {
            a[0].onUpdate.add(mc.accelerometer_onUpdate);
            mc.supported = true;
          }
          mc.initialized = true;
        }
      };
      mc.accelerometer_onUpdate = function (a, b, c) {
        mc.currentX = a;
        mc.currentY = b;
        mc.currentZ = c;
      };
      mc.get_isSupported = function () {
        mc.initialize();
        return mc.supported;
      };
      mc.__super__ = pa;
      mc.prototype = q(pa.prototype, {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          pa.prototype.addEventListener.call(this, a, b, c, d, e);
          this.update();
        },
        setRequestedUpdateInterval: function (a) {
          this.__interval = a;
          if (this.__interval < 0) {
            throw new Mh();
          }
          if (this.__interval == 0) {
            this.__interval = mc.defaultInterval;
          }
          if (this.__timer != null) {
            this.__timer.stop();
            this.__timer = null;
          }
          if (mc.supported && !this.get_muted()) {
            this.__timer = new gg(this.__interval);
            this.__timer.run = m(this, this.update);
          }
        },
        update: function () {
          var a = new Fm("update");
          a.timestamp = new Date().getTime() / 1000;
          a.accelerationX = mc.currentX;
          a.accelerationY = mc.currentY;
          a.accelerationZ = mc.currentZ;
          this.dispatchEvent(a);
        },
        get_muted: function () {
          return this.__muted;
        },
        __class__: mc,
        __properties__: {
          get_muted: "get_muted"
        }
      });
      function xi(a) {
        this.parentDomain = a ?? xi.currentDomain;
      }
      g["openfl.system.ApplicationDomain"] = xi;
      xi.__name__ = "openfl.system.ApplicationDomain";
      xi.prototype = {
        __class__: xi
      };
      function Si() {}
      g["openfl.system.System"] = Si;
      Si.__name__ = "openfl.system.System";
      Si.__properties__ = {
        get_totalMemory: "get_totalMemory"
      };
      Si.gc = function () {};
      Si.get_totalMemory = function () {
        if (window.performance && window.performance.memory) {
          return window.performance.memory.usedJSHeapSize;
        } else {
          return 0;
        }
      };
      function Ro() {
        pa.call(this);
        this.clear();
      }
      g["openfl.text.StyleSheet"] = Ro;
      Ro.__name__ = "openfl.text.StyleSheet";
      Ro.__super__ = pa;
      Ro.prototype = q(pa.prototype, {
        clear: function () {
          this.__styleNamesDirty = false;
          this.__styleNames = null;
          this.__styles = new ua();
        },
        __applyStyle: function (a, b) {
          a = a.toLowerCase();
          if (Object.prototype.hasOwnProperty.call(this.__styles.h, a)) {
            this.__applyStyleObject(this.__styles.h[a], b);
          }
        },
        __applyStyleObject: function (a, b) {
          if (a != null) {
            var c = new V("[0-9A-Fa-f]+", "");
            var d = new V("[0-9]+", "");
            var e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "color")) {
              e = lf.__get(a, "color");
              e = c.match(e == null ? null : v.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.color = v.parseInt("0x" + c.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "fontFamily")) {
              e = lf.__get(a, "fontFamily");
              b.font = this.__parseFont(e == null ? null : v.string(e));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "fontSize")) {
              e = lf.__get(a, "fontSize");
              e = d.match(e == null ? null : v.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.size = v.parseInt(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "fontStyle")) {
              switch (lf.__get(a, "fontStyle")) {
                case "italic":
                  b.italic = true;
                  break;
                case "normal":
                  b.italic = false;
              }
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "fontWeight")) {
              switch (lf.__get(a, "fontWeight")) {
                case "bold":
                  b.bold = true;
                  break;
                case "normal":
                  b.bold = false;
              }
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "leading")) {
              e = lf.__get(a, "leading");
              e = d.match(e == null ? null : v.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.leading = v.parseInt(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "letterSpacing")) {
              e = lf.__get(a, "letterSpacing");
              e = d.match(e == null ? null : v.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.letterSpacing = parseFloat(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "marginLeft")) {
              e = lf.__get(a, "marginLeft");
              e = d.match(e == null ? null : v.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.leftMargin = v.parseInt(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "marginRight")) {
              e = lf.__get(a, "marginRight");
              e = d.match(e == null ? null : v.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.rightMargin = v.parseInt(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "textAlign")) {
              switch (lf.__get(a, "textAlign")) {
                case "center":
                  b.align = 0;
                  break;
                case "justify":
                  b.align = 2;
                  break;
                case "left":
                  b.align = 3;
                  break;
                case "right":
                  b.align = 4;
              }
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "textDecoration")) {
              switch (lf.__get(a, "textDecoration")) {
                case "none":
                  b.underline = false;
                  break;
                case "underline":
                  b.underline = true;
              }
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "textIndent")) {
              e = lf.__get(a, "textIndent");
              e = d.match(e == null ? null : v.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.blockIndent = v.parseInt(d.matched(0));
            }
          }
        },
        __parseFont: function (a) {
          if (a == null) {
            return null;
          }
          if (a.indexOf(",") > -1) {
            a = r.substr(a, 0, a.indexOf(","));
          }
          switch (a) {
            case "mono":
              return "_typewriter";
            case "sans-serif":
              return "_sans";
            case "serif":
              return "_serif";
            default:
              return a;
          }
        },
        __class__: Ro
      });
      function ld(a, b, c, d, e, f, h, g, n, p, m, l, v) {
        this.font = a;
        this.size = b;
        this.color = c;
        this.bold = d;
        this.italic = e;
        this.underline = f;
        this.url = h;
        this.target = g;
        this.align = n;
        this.leftMargin = p;
        this.rightMargin = m;
        this.indent = l;
        this.leading = v;
      }
      g["openfl.text.TextFormat"] = ld;
      ld.__name__ = "openfl.text.TextFormat";
      ld.prototype = {
        clone: function () {
          var a = new ld(this.font, this.size, this.color, this.bold, this.italic, this.underline, this.url, this.target);
          a.align = this.align;
          a.leftMargin = this.leftMargin;
          a.rightMargin = this.rightMargin;
          a.indent = this.indent;
          a.leading = this.leading;
          a.blockIndent = this.blockIndent;
          a.bullet = this.bullet;
          a.kerning = this.kerning;
          a.letterSpacing = this.letterSpacing;
          a.tabStops = this.tabStops;
          a.__ascent = this.__ascent;
          a.__descent = this.__descent;
          a.__cacheKey = this.__toCacheKey();
          return a;
        },
        __merge: function (a) {
          if (a.font != null) {
            this.font = a.font;
          }
          if (a.size != null) {
            this.size = a.size;
          }
          if (a.color != null) {
            this.color = a.color;
          }
          if (a.bold != null) {
            this.bold = a.bold;
          }
          if (a.italic != null) {
            this.italic = a.italic;
          }
          if (a.underline != null) {
            this.underline = a.underline;
          }
          if (a.url != null) {
            this.url = a.url;
          }
          if (a.target != null) {
            this.target = a.target;
          }
          if (a.align != null) {
            this.align = a.align;
          }
          if (a.leftMargin != null) {
            this.leftMargin = a.leftMargin;
          }
          if (a.rightMargin != null) {
            this.rightMargin = a.rightMargin;
          }
          if (a.indent != null) {
            this.indent = a.indent;
          }
          if (a.leading != null) {
            this.leading = a.leading;
          }
          if (a.blockIndent != null) {
            this.blockIndent = a.blockIndent;
          }
          if (a.bullet != null) {
            this.bullet = a.bullet;
          }
          if (a.kerning != null) {
            this.kerning = a.kerning;
          }
          if (a.letterSpacing != null) {
            this.letterSpacing = a.letterSpacing;
          }
          if (a.tabStops != null) {
            this.tabStops = a.tabStops;
          }
          if (a.__ascent != null) {
            this.__ascent = a.__ascent;
          }
          if (a.__descent != null) {
            this.__descent = a.__descent;
          }
          this.__toCacheKey();
        },
        __toCacheKey: function () {
          return this.__cacheKey = "" + this.font + this.size + v.string(this.bold) + v.string(this.italic);
        },
        __class__: ld
      };
      var Up = {
        fromString: function (a) {
          switch (a) {
            case "center":
              return 0;
            case "end":
              return 1;
            case "justify":
              return 2;
            case "left":
              return 3;
            case "right":
              return 4;
            case "start":
              return 5;
            default:
              return null;
          }
        }
      };
      function ak(a, b) {
        this.__collisions = [];
        this.__wordMap = new wc();
        this.set(a, b);
      }
      g["openfl.text._internal.CacheMeasurement"] = ak;
      ak.__name__ = "openfl.text._internal.CacheMeasurement";
      ak.prototype = {
        set: function (a, b) {
          this.__addCollision(a, b);
        },
        get: function (a) {
          if (this.__collisions.length > 1) {
            return this.__wordMap.h[this.__collisions.indexOf(a)];
          } else {
            return this.__wordMap.h[0];
          }
        },
        __addCollision: function (a, b) {
          if (!this.exists(a)) {
            var c = this.__wordMap;
            a = this.__collisions.push(a) - 1;
            c.h[a] = b;
          }
        },
        exists: function (a) {
          if (this.__collisions.length == 0) {
            return false;
          } else {
            return this.__collisions.indexOf(a) > -1;
          }
        },
        __class__: ak
      };
      function Wa() {}
      g["openfl.text._internal.HTMLParser"] = Wa;
      Wa.__name__ = "openfl.text._internal.HTMLParser";
      Wa.parse = function (a, b, c, d, e) {
        a = b ? a.replace(Wa.__regexBreakTag.r, "\n") : a.replace(Wa.__regexBreakTag.r, "");
        a = a.replace(Wa.__regexEntities[5].r, " ");
        a = Wa.__regexCharEntity.map(a, function (a) {
          var b = a.matched(1);
          var c = a.matched(2);
          if (b != null && (b = v.parseInt(b), b != null)) {
            return String.fromCodePoint(b);
          } else if (c != null && (c = v.parseInt("0" + c), c != null)) {
            return String.fromCodePoint(c);
          } else {
            return a.matched(0);
          }
        });
        var f = a.split("<");
        if (f.length == 1) {
          a = w.htmlUnescape(a.replace(Wa.__regexHTMLTag.r, ""));
          if (e.get_length() > 1) {
            var h = e.get_length() - 1;
            e.__tempIndex = 1;
            for (var g = 0, n = []; g < n.length;) {
              var p = n[g++];
              e.insertAt(e.__tempIndex, p);
              e.__tempIndex++;
            }
            e.splice(e.__tempIndex, h);
          }
          b = e.get(0);
          b.format = d;
          b.start = 0;
          b.end = a.length;
        } else {
          h = e.get_length();
          g = e.__tempIndex = 0;
          for (n = []; g < n.length;) {
            p = n[g++];
            e.insertAt(e.__tempIndex, p);
            e.__tempIndex++;
          }
          e.splice(e.__tempIndex, h);
          a = "";
          h = [d.clone()];
          g = [];
          p = false;
          for (n = 0; n < f.length;) {
            var m = f[n];
            ++n;
            if (m != "") {
              var l = r.substr(m, 0, 1) == "/";
              var u = m.indexOf(">");
              var q = u + 1;
              var z = m.indexOf(" ");
              z = m.substring(l ? 1 : 0, z > -1 && z < u ? z : u).toLowerCase();
              if (l) {
                if (g.length != 0 && z == g[g.length - 1]) {
                  g.pop();
                  h.pop();
                  l = h[h.length - 1].clone();
                  if ((z == "p" || z == "li") && e.get_length() > 0) {
                    if (b) {
                      a += "\n";
                    }
                    p = true;
                  }
                  if (q < m.length) {
                    p = w.htmlUnescape(r.substr(m, q, null));
                    e.push(new Ud(l, a.length, a.length + p.length));
                    a += p;
                    p = false;
                  }
                }
              } else {
                l = h[h.length - 1].clone();
                if (u > -1) {
                  if (c != null) {
                    c.__applyStyle(z, l);
                    if (Wa.__regexClass.match(m)) {
                      c.__applyStyle("." + Wa.__getAttributeMatch(Wa.__regexClass), l);
                      c.__applyStyle(z + "." + Wa.__getAttributeMatch(Wa.__regexClass), l);
                    }
                  }
                  switch (z) {
                    case "a":
                      if (c != null) {
                        c.__applyStyle("a:link", l);
                      }
                      if (Wa.__regexHref.match(m)) {
                        l.url = Wa.__getAttributeMatch(Wa.__regexHref);
                      }
                      break;
                    case "b":
                      l.bold = true;
                      break;
                    case "em":
                    case "i":
                      l.italic = true;
                      break;
                    case "font":
                      if (Wa.__regexFace.match(m)) {
                        l.font = Wa.__getAttributeMatch(Wa.__regexFace);
                      }
                      if (Wa.__regexColor.match(m)) {
                        l.color = v.parseInt("0x" + Wa.__getAttributeMatch(Wa.__regexColor));
                      }
                      if (Wa.__regexSize.match(m)) {
                        u = Wa.__getAttributeMatch(Wa.__regexSize);
                        var J = r.cca(u, 0);
                        l.size = J == 43 || J == 45 ? (h.length >= 2 ? h[h.length - 2] : d).size + v.parseInt(u) : v.parseInt(u);
                      }
                      break;
                    case "li":
                      if (e.get_length() > 0 && !p) {
                        a += "\n";
                      }
                      u = l.clone();
                      u.underline = false;
                      e.push(new Ud(u, a.length, a.length + 2));
                      a += " ";
                      break;
                    case "p":
                      if (e.get_length() > 0 && !p) {
                        a += "\n";
                      }
                      if (Wa.__regexAlign.match(m)) {
                        u = Wa.__getAttributeMatch(Wa.__regexAlign).toLowerCase();
                        l.align = Up.fromString(u);
                      }
                      break;
                    case "textformat":
                      if (Wa.__regexBlockIndent.match(m)) {
                        l.blockIndent = v.parseInt(Wa.__getAttributeMatch(Wa.__regexBlockIndent));
                      }
                      if (Wa.__regexIndent.match(m)) {
                        l.indent = v.parseInt(Wa.__getAttributeMatch(Wa.__regexIndent));
                      }
                      if (Wa.__regexLeading.match(m)) {
                        l.leading = v.parseInt(Wa.__getAttributeMatch(Wa.__regexLeading));
                      }
                      if (Wa.__regexLeftMargin.match(m)) {
                        l.leftMargin = v.parseInt(Wa.__getAttributeMatch(Wa.__regexLeftMargin));
                      }
                      if (Wa.__regexRightMargin.match(m)) {
                        l.rightMargin = v.parseInt(Wa.__getAttributeMatch(Wa.__regexRightMargin));
                      }
                      if (Wa.__regexTabStops.match(m)) {
                        u = Wa.__getAttributeMatch(Wa.__regexTabStops).split(" ");
                        J = [];
                        for (var ba = 0; ba < u.length;) {
                          var y = u[ba];
                          ++ba;
                          J.push(v.parseInt(y));
                        }
                        l.tabStops = J;
                      }
                      break;
                    case "u":
                      l.underline = true;
                  }
                  h.push(l);
                  g.push(z);
                  if (q < m.length) {
                    p = w.htmlUnescape(m.substring(q));
                    e.push(new Ud(l, a.length, a.length + p.length));
                    a += p;
                    p = false;
                  }
                } else {
                  p = w.htmlUnescape(m);
                  e.push(new Ud(l, a.length, a.length + p.length));
                  a += p;
                  p = false;
                }
              }
            }
          }
          if (e.get_length() == 0) {
            e.push(new Ud(h[0], 0, 0));
          }
        }
        return a;
      };
      Wa.__getAttributeMatch = function (a) {
        return a.matched(2) ?? a.matched(3);
      };
      function Gi() {
        this.__shortWordMap = new ua();
        this.__longWordMap = new ua();
      }
      g["openfl.text._internal.ShapeCache"] = Gi;
      Gi.__name__ = "openfl.text._internal.ShapeCache";
      Gi.hashFunction = function (a) {
        var b = 0;
        var c;
        for (var d = 0, e = a.length; d < e;) {
          c = d++;
          c = r.cca(a, c);
          b = (b << 5) - b + c;
          b |= 0;
        }
        return b;
      };
      Gi.prototype = {
        cache: function (a, b, c) {
          a = a.format.__cacheKey;
          if (c.length > 15) {
            return this.__cacheLongWord(c, a, b);
          } else {
            return this.__cacheShortWord(c, a, b);
          }
        },
        __cacheShortWord: function (a, b, c) {
          if (Object.prototype.hasOwnProperty.call(this.__shortWordMap.h, b)) {
            var d = this.__shortWordMap.h[b];
            if (Object.prototype.hasOwnProperty.call(d.h, a)) {
              return d.h[a];
            }
            var e = c();
            d.h[a] = e;
          } else {
            d = new ua();
            e = c();
            d.h[a] = e;
            this.__shortWordMap.h[b] = d;
          }
          return c();
        },
        __cacheLongWord: function (a, b, c) {
          var d = Gi.hashFunction(a);
          if (Object.prototype.hasOwnProperty.call(this.__longWordMap.h, b)) {
            var e = this.__longWordMap.h[b];
            if (e.h.hasOwnProperty(d)) {
              var f = e.h[d];
              if (f.exists(a)) {
                return f.get(a);
              }
              f.set(a, c());
            } else {
              f = new ak(a, c());
              e.h[d] = f;
            }
          } else {
            e = new wc();
            f = new ak(a, c());
            f.hash = d;
            e.h[d] = f;
            this.__longWordMap.h[b] = e;
          }
          return c();
        },
        __class__: Gi
      };
      function fc(a) {
        this.__shapeCache = new Gi();
        this.textField = a;
        this.height = this.width = 100;
        this.set_text("");
        this.bounds = new da(0, 0, 0, 0);
        this.textBounds = new da(0, 0, 0, 0);
        this.type = 0;
        this.autoSize = 2;
        this.embedFonts = false;
        this.selectable = true;
        this.borderColor = 0;
        this.border = false;
        this.backgroundColor = 16777215;
        this.background = false;
        this.gridFitType = 1;
        this.maxChars = 0;
        this.multiline = false;
        this.numLines = 1;
        this.scrollH = this.sharpness = 0;
        this.set_scrollV(1);
        this.wordWrap = false;
        this.lineAscents = ab.toFloatVector(null);
        this.lineBreaks = ab.toIntVector(null);
        this.lineDescents = ab.toFloatVector(null);
        this.lineLeadings = ab.toFloatVector(null);
        this.lineHeights = ab.toFloatVector(null);
        this.lineWidths = ab.toFloatVector(null);
        this.layoutGroups = ab.toObjectVector(null);
        this.textFormatRanges = ab.toObjectVector(null);
        if (fc.__context == null) {
          fc.__context = window.document.createElement("canvas").getContext("2d");
        }
      }
      g["openfl.text._internal.TextEngine"] = fc;
      fc.__name__ = "openfl.text._internal.TextEngine";
      fc.findFont = function (a) {
        return wb.__fontByName.h[a];
      };
      fc.findFontVariant = function (a) {
        var b = a.font;
        var c = a.bold;
        a = a.italic;
        if (b == null) {
          b = "_serif";
        }
        var d = w.replace(w.replace(b, " Normal", ""), " Regular", "");
        if (c && a && Object.prototype.hasOwnProperty.call(wb.__fontByName.h, d + " Bold Italic")) {
          return fc.findFont(d + " Bold Italic");
        } else if (c && Object.prototype.hasOwnProperty.call(wb.__fontByName.h, d + " Bold")) {
          return fc.findFont(d + " Bold");
        } else if (a && Object.prototype.hasOwnProperty.call(wb.__fontByName.h, d + " Italic")) {
          return fc.findFont(d + " Italic");
        } else {
          return fc.findFont(b);
        }
      };
      fc.getFormatHeight = function (a) {
        var b = fc.getFont(a);
        fc.__context.font = b;
        b = fc.getFontInstance(a);
        if (a.__ascent != null) {
          var c = a.size * a.__ascent;
          b = a.size * a.__descent;
        } else if (b != null && b.unitsPerEM != 0) {
          c = b.ascender / b.unitsPerEM * a.size;
          b = Math.abs(b.descender / b.unitsPerEM * a.size);
        } else {
          c = a.size;
          b = a.size * 0.185;
        }
        return c + b + a.leading;
      };
      fc.getFont = function (a) {
        var b = a.font;
        var c = a.bold;
        var d = a.italic;
        if (b == null) {
          b = "_serif";
        }
        var e = w.replace(w.replace(b, " Normal", ""), " Regular", "");
        if (c && d && Object.prototype.hasOwnProperty.call(wb.__fontByName.h, e + " Bold Italic")) {
          b = e + " Bold Italic";
          d = c = false;
        } else if (c && Object.prototype.hasOwnProperty.call(wb.__fontByName.h, e + " Bold")) {
          b = e + " Bold";
          c = false;
        } else if (d && Object.prototype.hasOwnProperty.call(wb.__fontByName.h, e + " Italic")) {
          b = e + " Italic";
          d = false;
        } else {
          if (c && (b.indexOf(" Bold ") > -1 || w.endsWith(b, " Bold"))) {
            c = false;
          }
          if (d && (b.indexOf(" Italic ") > -1 || w.endsWith(b, " Italic"))) {
            d = false;
          }
        }
        c = (d ? "italic " : "normal ") + "normal " + (c ? "bold " : "normal ");
        c += a.size + "px";
        c += "/" + (a.size + 3) + "px ";
        switch (b) {
          case "_sans":
            a = "sans-serif";
            break;
          case "_serif":
            a = "serif";
            break;
          case "_typewriter":
            a = "monospace";
            break;
          default:
            a = "'" + b.replace(/^[\s'"]+(.*)[\s'"]+$/, "$1") + "'";
        }
        return c += "" + a;
      };
      fc.getFontInstance = function (a) {
        return fc.findFontVariant(a);
      };
      fc.prototype = {
        getBounds: function () {
          var a = this.border ? 1 : 0;
          this.bounds.width = this.width + a;
          this.bounds.height = this.height + a;
          a = this.width;
          var b = this.height;
          var c = this.layoutGroups.get_length() - 1;
          for (var d = 0, e = this.layoutGroups.get_length(); d < e;) {
            var f = d++;
            var h = this.layoutGroups.get(f);
            if (f != c || h.startIndex != h.endIndex || this.type == 1) {
              if (h.offsetX < a) {
                a = h.offsetX;
              }
              if (h.offsetY < b) {
                b = h.offsetY;
              }
            }
          }
          if (a >= this.width) {
            a = 2;
          }
          if (b >= this.height) {
            b = 2;
          }
          this.textBounds.setTo(Math.max(a - 2, 0), Math.max(b - 2, 0), Math.min(this.textWidth + 4, this.bounds.width + 4), Math.min(this.textHeight * 1.185 + 4, this.bounds.height + 4));
        },
        getLineBreaks: function () {
          this.lineBreaks.set_length(0);
          for (var a = -1, b; a < this.text.length;) {
            b = this.text.indexOf("\n", a + 1);
            a = this.text.indexOf("\r", a + 1);
            a = a == -1 ? b : b == -1 ? a : a < b ? a : b;
            if (a > -1) {
              this.lineBreaks.push(a);
            } else {
              break;
            }
          }
        },
        getLineMeasurements: function () {
          this.lineAscents.set_length(0);
          this.lineDescents.set_length(0);
          this.lineLeadings.set_length(0);
          this.lineHeights.set_length(0);
          this.lineWidths.set_length(0);
          var a = 0;
          var b = 0;
          var c = null;
          var d = 0;
          var e = 0;
          this.textHeight = this.textWidth = 0;
          this.numLines = 1;
          this.maxScrollH = 0;
          var f = this.layoutGroups.get_length() - 1;
          for (var h = 0, g = this.layoutGroups.get_length(); h < g;) {
            var n = h++;
            var p = this.layoutGroups.get(n);
            if (n != f || p.startIndex != p.endIndex || this.type == 1) {
              while (p.lineIndex > this.numLines - 1) {
                this.lineAscents.push(a);
                this.lineDescents.push(b);
                this.lineLeadings.push(c ?? 0);
                this.lineHeights.push(d);
                this.lineWidths.push(e);
                b = a = 0;
                c = null;
                e = d = 0;
                this.numLines++;
              }
              a = Math.max(a, p.ascent);
              b = Math.max(b, p.descent);
              c = c == null ? p.leading : Math.max(c, p.leading) | 0;
              d = Math.max(d, p.height);
              e = p.offsetX - 2 + p.width;
              if (e > this.textWidth) {
                this.textWidth = e;
              }
              n = Math.ceil(p.offsetY - 2 + p.ascent + p.descent);
              if (n > this.textHeight) {
                this.textHeight = n;
              }
            }
          }
          if (this.textHeight == 0 && this.textField != null && this.type == 1) {
            a = this.textField.__textFormat;
            b = fc.getFontInstance(a);
            if (a.__ascent != null) {
              f = a.size * a.__ascent;
              h = a.size * a.__descent;
            } else if (b != null && b.unitsPerEM != 0) {
              f = b.ascender / b.unitsPerEM * a.size;
              h = Math.abs(b.descender / b.unitsPerEM * a.size);
            } else {
              f = a.size;
              h = a.size * 0.185;
            }
            c = a.leading;
            a = f;
            b = h;
            this.textHeight = n = Math.ceil(f + h);
          }
          this.lineAscents.push(a);
          this.lineDescents.push(b);
          this.lineLeadings.push(c ?? 0);
          this.lineHeights.push(d);
          this.lineWidths.push(e);
          if (this.numLines == 1 && c > 0) {
            this.textHeight += c;
          }
          if (this.autoSize != 2) {
            switch (this.autoSize) {
              case 0:
              case 1:
              case 3:
                if (!this.wordWrap) {
                  this.width = this.textWidth + 4;
                }
                this.height = this.textHeight + 4;
                this.bottomScrollV = this.numLines;
            }
          }
          this.maxScrollH = this.textWidth > this.width - 4 ? this.textWidth - this.width + 4 | 0 : 0;
          if (this.scrollH > this.maxScrollH) {
            this.scrollH = this.maxScrollH;
          }
        },
        getLayoutGroups: function () {
          var a = this;
          this.layoutGroups.set_length(0);
          if (this.text != null && this.text != "") {
            var b = -1;
            var c = null;
            var d = null;
            var e = Wc.__defaultTextFormat.clone();
            var f = 0;
            var h = 0;
            var g = 0;
            var n = 0;
            var p = 3;
            var m = 0;
            var l = 0;
            var v = 0;
            var u = 0;
            var w = true;
            var q = null;
            var z = null;
            var J = 0;
            var ba = 0;
            var y = 0;
            var A = -2;
            var D = -1;
            var B = this.text.indexOf(" ");
            var x = 0;
            var C = x < this.lineBreaks.get_length() ? this.lineBreaks.get(x) : -1;
            var F = 0;
            var G = 0;
            var H = 0;
            var N = 0;
            function la(b, d, f) {
              function h() {
                var c = [];
                if (a.__useIntAdvances == null) {
                  var e = new V("Trident/7.0", "");
                  a.__useIntAdvances = e.match(E.navigator.userAgent);
                }
                if (a.__useIntAdvances) {
                  var h = 0;
                  e = d;
                  for (var k = f; e < k;) {
                    var l = e++;
                    l = a.measureText(b.substring(d, l + 1));
                    c.push(l - h);
                    h = l;
                  }
                } else {
                  e = d;
                  k = f;
                  while (e < k) {
                    l = e++;
                    if (l < b.length - 1) {
                      h = a.measureText(b.charAt(l + 1));
                      h = a.measureText(r.substr(b, l, 2)) - h;
                    } else {
                      h = fc.__context.measureText(b.charAt(l)).width;
                    }
                    c.push(h);
                  }
                }
                return c;
              }
              if (e.align == 2) {
                return h();
              } else {
                return a.__shapeCache.cache(c, h, b.substring(d, f));
              }
            }
            function ha(a) {
              var b = 0;
              for (var c = 0; c < a.length;) {
                var d = a[c];
                ++c;
                b += d;
              }
              return b;
            }
            function ja() {
              return 2 + v + m + (w ? l : 0);
            }
            function ia() {
              return a.width - 2 - u - ja();
            }
            function O(b, d) {
              if (q == null || q.startIndex != q.endIndex) {
                q = new Qm(c.format, b, d);
                a.layoutGroups.push(q);
              } else {
                q.format = c.format;
                q.startIndex = b;
                q.endIndex = d;
              }
            }
            function I() {
              if (e.__ascent != null) {
                h = e.size * e.__ascent;
                n = e.size * e.__descent;
              } else if (d != null && d.unitsPerEM != 0) {
                h = d.ascender / d.unitsPerEM * e.size;
                n = Math.abs(d.descender / d.unitsPerEM * e.size);
              } else {
                h = e.size;
                n = e.size * 0.185;
              }
              f = e.leading;
              ba = Math.ceil(h + n + f);
              if (ba > y) {
                y = ba;
              }
              if (h > g) {
                g = h;
              }
            }
            function S() {
              w = true;
              p = e.align ?? 3;
              m = e.blockIndent ?? 0;
              l = e.indent ?? 0;
              v = e.leftMargin ?? 0;
              u = e.rightMargin ?? 0;
            }
            function P() {
              if (b < a.textFormatRanges.get_length() - 1) {
                b += 1;
                c = a.textFormatRanges.get(b);
                e.__merge(c.format);
                var f = fc.getFont(e);
                fc.__context.font = f;
                d = fc.getFontInstance(e);
                return true;
              }
              return false;
            }
            function M(d, e) {
              if (d >= e) {
                z = [];
                J = 0;
              } else if (e <= c.end) {
                z = la(a.text, d, e);
                J = ha(z);
              } else {
                var f = d;
                d = c.end;
                var h = 0;
                z = [];
                for (J = 0;;) {
                  if (f != d) {
                    f = la(a.text, f, d);
                    z = z.concat(f);
                  }
                  if (d != e) {
                    if (!P()) {
                      Va.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                        fileName: "openfl/text/_internal/TextEngine.hx",
                        lineNumber: 1117,
                        className: "openfl.text._internal.TextEngine",
                        methodName: "getLayoutGroups"
                      });
                      break;
                    }
                    f = d;
                    d = e < c.end ? e : c.end;
                    ++h;
                  } else {
                    J = ha(z);
                    break;
                  }
                }
                b -= h + 1;
                P();
              }
            }
            function T(b) {
              if (b <= c.end) {
                z = la(a.text, H, b);
                J = ha(z);
                O(H, b);
                q.positions = z;
                var d = F;
                var e = ja();
                q.offsetX = d + e;
                q.ascent = h;
                q.descent = n;
                q.leading = f;
                q.lineIndex = N;
                q.offsetY = G + 2;
                q.width = J;
                q.height = ba;
                F += J;
                if (b == c.end) {
                  q = null;
                  P();
                  I();
                }
              } else {
                while (true) {
                  var k = b < c.end ? b : c.end;
                  if (H != k) {
                    z = la(a.text, H, k);
                    J = ha(z);
                    O(H, k);
                    q.positions = z;
                    d = F;
                    e = ja();
                    q.offsetX = d + e;
                    q.ascent = h;
                    q.descent = n;
                    q.leading = f;
                    q.lineIndex = N;
                    q.offsetY = G + 2;
                    q.width = J;
                    q.height = ba;
                    F += J;
                    H = k;
                  }
                  if (k == c.end) {
                    q = null;
                  }
                  if (k == b) {
                    break;
                  }
                  if (!P()) {
                    Va.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                      fileName: "openfl/text/_internal/TextEngine.hx",
                      lineNumber: 1205,
                      className: "openfl.text._internal.TextEngine",
                      methodName: "getLayoutGroups"
                    });
                    break;
                  }
                  I();
                }
              }
              H = b;
            }
            function wa() {
              I();
              for (var b = a.layoutGroups.get_length(); --b > -1;) {
                var c = a.layoutGroups.get(b);
                if (c.lineIndex < N) {
                  break;
                }
                if (!(c.lineIndex > N)) {
                  c.ascent = g;
                  c.height = y;
                }
              }
              G += y;
              y = g = 0;
              N += 1;
              F = 0;
              w = false;
            }
            function U(b) {
              if (a.width >= 4 && a.wordWrap) {
                var c = z;
                var d = ha(c);
                for (var e = c.length - 1; e >= 0;) {
                  var f = r.cca(a.text, H + e);
                  if (f != 32 && f != 9) {
                    break;
                  }
                  d -= c[e];
                  --e;
                }
                while (c.length > 0 && F + d > ia()) {
                  for (f = e = d = 0; F + f < ia();) {
                    var h = c[e];
                    if (h == 0) {
                      ++e;
                      ++d;
                    } else {
                      f += h;
                      ++e;
                    }
                  }
                  if (e == d) {
                    e = d + 1;
                  } else {
                    while (e > 1 && F + f > ia()) {
                      --e;
                      if (e - d > 0) {
                        M(H, H + e - d);
                        f = J;
                      } else {
                        e = 1;
                        d = 0;
                        M(H, H + 1);
                        f = 0;
                      }
                    }
                  }
                  c = H + e - d;
                  T(c);
                  wa();
                  M(c, b);
                  c = z;
                  d = J;
                }
              }
              T(b);
            }
            P();
            S();
            I();
            for (var Ab, ea = this.text.length + 1; H < ea;) {
              if (C > -1 && (B == -1 || C < B)) {
                if (H <= C) {
                  M(H, C);
                  U(C);
                  q = null;
                } else if (q != null && q.startIndex != q.endIndex) {
                  if (q.endIndex == B) {
                    q.width -= q.positions[q.positions.length - 1];
                  }
                  q = null;
                }
                wa();
                if (c.end == C) {
                  P();
                  I();
                }
                H = C + 1;
                D = C;
                ++x;
                C = x < this.lineBreaks.get_length() ? this.lineBreaks.get(x) : -1;
                S();
              } else if (B > -1) {
                if (q != null && q.startIndex != q.endIndex) {
                  q = null;
                }
                Ab = false;
                while (H < this.text.length) {
                  var Q = -1;
                  if (B == -1) {
                    Q = C;
                  } else {
                    Q = B + 1;
                    if (C > -1 && C < Q) {
                      Q = C;
                    }
                  }
                  if (Q == -1) {
                    Q = this.text.length;
                  }
                  M(H, Q);
                  if (p == 2) {
                    if (z.length > 0 && H == A) {
                      H += 1;
                      var R = z.shift();
                      J -= R;
                      F += R;
                    }
                    if (z.length > 0 && Q == B + 1) {
                      --Q;
                      R = z.pop();
                      J -= R;
                    }
                  }
                  if (this.wordWrap && F + J > ia()) {
                    Ab = true;
                    if (z.length > 0 && Q == B + 1 && F + J - z[z.length - 1] <= ia()) {
                      Ab = false;
                    }
                  }
                  if (Ab) {
                    if (p != 2 && (q != null || this.layoutGroups.get_length() > 0)) {
                      Ab = q;
                      if (Ab == null) {
                        Ab = this.layoutGroups.get(this.layoutGroups.get_length() - 1);
                      }
                      Ab.width -= Ab.positions[Ab.positions.length - 1];
                      Ab.endIndex--;
                    }
                    Ab = this.layoutGroups.get_length() - 1;
                    for (R = 0; Ab >= 0;) {
                      q = this.layoutGroups.get(Ab);
                      if (Ab > 0 && q.startIndex > A) {
                        ++R;
                      } else {
                        break;
                      }
                      --Ab;
                    }
                    if (H == A + 1) {
                      wa();
                    }
                    F = 0;
                    if (R > 0) {
                      Ab = this.layoutGroups.get(this.layoutGroups.get_length() - R).offsetX;
                      R = this.layoutGroups.get_length() - R;
                      for (var yb = this.layoutGroups.get_length(); R < yb;) {
                        var pa = R++;
                        q = this.layoutGroups.get(pa);
                        q.offsetX -= Ab;
                        q.offsetY = G + 2;
                        q.lineIndex = N;
                        F += q.width;
                      }
                    }
                    U(Q);
                    Ab = false;
                  } else if (q != null && H == B && A != B - 1) {
                    if (p != 2) {
                      q.endIndex = B;
                      q.positions = q.positions.concat(z);
                      q.width += J;
                    }
                    F += J;
                    H = Q;
                  } else if (q == null || p == 2) {
                    U(Q);
                    if (Q == this.text.length) {
                      wa();
                    }
                  } else {
                    R = Q < c.end ? Q : c.end;
                    if (R < Q) {
                      z = la(this.text, H, R);
                      J = ha(z);
                    }
                    q.endIndex = R;
                    q.positions = q.positions.concat(z);
                    q.width += J;
                    F += J;
                    if (R == c.end) {
                      q = null;
                      P();
                      I();
                      H = R;
                      if (R != Q) {
                        T(Q);
                      }
                    }
                    if (C == Q) {
                      ++Q;
                    }
                    H = Q;
                    if (Q == this.text.length) {
                      wa();
                      if (C != -1) {
                        D = C;
                        ++x;
                        C = x < this.lineBreaks.get_length() ? this.lineBreaks.get(x) : -1;
                      }
                    }
                  }
                  Q = this.text.indexOf(" ", H);
                  if (C == A) {
                    q.endIndex = C;
                    if (C - q.startIndex - q.positions.length < 0) {
                      q.positions.push(0);
                    }
                    H = C + 1;
                  }
                  A = B;
                  B = Q;
                  if (C > -1 && C <= H && (B > C || B == -1) || H > this.text.length) {
                    break;
                  }
                }
              } else {
                if (H < this.text.length) {
                  M(H, this.text.length);
                  U(this.text.length);
                  wa();
                }
                H += 1;
              }
            }
            if (D == H - 2 && D > -1) {
              O(H - 1, H - 1);
              q.positions = [];
              q.ascent = h;
              q.descent = n;
              q.leading = f;
              q.lineIndex = N;
              q.offsetX = ja();
              q.offsetY = G + 2;
              q.width = 0;
              q.height = ba;
            }
          }
        },
        measureText: function (a) {
          return fc.__context.measureText(a).width;
        },
        restrictText: function (a) {
          if (a == null) {
            return a;
          }
          if (this.__restrictRegexp != null) {
            a = this.__restrictRegexp.split(a).join("");
          }
          return a;
        },
        setTextAlignment: function () {
          var a = -1;
          var b = 0;
          var c;
          var d;
          var e = false;
          for (var f = 0, h = this.layoutGroups.get_length(); f < h;) {
            var g = f++;
            c = this.layoutGroups.get(g);
            if (c.lineIndex != a) {
              a = c.lineIndex;
              b = this.width - 4 - c.format.rightMargin;
              switch (c.format.align) {
                case 0:
                  b = this.lineWidths.get(a) < b ? Math.round((b - this.lineWidths.get(a)) / 2) : 0;
                  break;
                case 2:
                  if (this.lineWidths.get(a) < b) {
                    d = 1;
                    for (var n = g + 1, p = this.layoutGroups.get_length(); n < p;) {
                      var m = n++;
                      if (this.layoutGroups.get(m).lineIndex == a) {
                        if (m == 0 || r.cca(this.text, this.layoutGroups.get(m).startIndex - 1) == 32) {
                          ++d;
                        }
                      } else {
                        break;
                      }
                    }
                    if (d > 1 && (c = this.layoutGroups.get(g + d - 1), n = r.cca(this.text, c.endIndex), c.endIndex < this.text.length && n != 10 && n != 13)) {
                      b = (b - this.lineWidths.get(a)) / (d - 1);
                      e = true;
                      n = 1;
                      do {
                        this.layoutGroups.get(g + n).offsetX += b * n;
                      } while (++n < d);
                    }
                  }
                  b = 0;
                  break;
                case 4:
                  b = this.lineWidths.get(a) < b ? Math.round(b - this.lineWidths.get(a)) : 0;
                  break;
                default:
                  b = 0;
              }
            }
            if (b > 0) {
              c.offsetX += b;
            }
          }
          if (e) {
            this.getLineMeasurements();
          }
        },
        update: function () {
          if (this.text == null || this.textFormatRanges.get_length() == 0) {
            this.lineAscents.set_length(0);
            this.lineBreaks.set_length(0);
            this.lineDescents.set_length(0);
            this.lineLeadings.set_length(0);
            this.lineHeights.set_length(0);
            this.lineWidths.set_length(0);
            this.layoutGroups.set_length(0);
            this.textHeight = this.textWidth = 0;
            this.numLines = 1;
            this.maxScrollH = 0;
            this.bottomScrollV = this.maxScrollV = 1;
          } else {
            this.getLineBreaks();
            this.getLayoutGroups();
            this.getLineMeasurements();
            this.setTextAlignment();
          }
          this.getBounds();
        },
        get_bottomScrollV: function () {
          if (this.numLines == 1 || this.lineHeights == null) {
            return 1;
          }
          var a = this.lineHeights.get_length();
          var b = this.lineLeadings.get_length() == a ? -this.lineLeadings.get(a - 1) : 0;
          for (var c = (this.get_scrollV() > 0 ? this.get_scrollV() : 1) - 1, d = this.lineHeights.get_length(); c < d;) {
            var e = c++;
            var f = this.lineHeights.get(e);
            b += f;
            if (b > this.height - 4) {
              a = e + (b - this.height >= 0 ? 0 : 1);
              break;
            }
          }
          if (a < this.get_scrollV()) {
            return this.get_scrollV();
          } else {
            return a;
          }
        },
        get_maxScrollV: function () {
          if (this.numLines == 1 || this.lineHeights == null) {
            return 1;
          }
          for (var a = this.numLines - 1, b = 0; a >= 0;) {
            b += this.lineHeights.get(a);
            if (b > this.height - 4) {
              a += b - this.height < 0 ? 1 : 2;
              break;
            }
            --a;
          }
          if (a < 1) {
            return 1;
          } else {
            return a;
          }
        },
        get_scrollV: function () {
          if (this.numLines == 1 || this.lineHeights == null) {
            return 1;
          }
          var a = this.get_maxScrollV();
          if (this.scrollV > a) {
            return a;
          } else {
            return this.scrollV;
          }
        },
        set_scrollV: function (a) {
          if (a < 1) {
            a = 1;
          } else if (a > this.get_maxScrollV()) {
            a = this.get_maxScrollV();
          }
          return this.scrollV = a;
        },
        set_text: function (a) {
          return this.text = a;
        },
        __class__: fc,
        __properties__: {
          set_text: "set_text",
          set_scrollV: "set_scrollV",
          get_scrollV: "get_scrollV",
          get_maxScrollV: "get_maxScrollV",
          get_bottomScrollV: "get_bottomScrollV"
        }
      };
      function Ud(a, b, c) {
        this.format = a;
        this.start = b;
        this.end = c;
      }
      g["openfl.text._internal.TextFormatRange"] = Ud;
      Ud.__name__ = "openfl.text._internal.TextFormatRange";
      Ud.prototype = {
        __class__: Ud
      };
      function Qm(a, b, c) {
        this.format = a;
        this.startIndex = b;
        this.endIndex = c;
      }
      g["openfl.text._internal.TextLayoutGroup"] = Qm;
      Qm.__name__ = "openfl.text._internal.TextLayoutGroup";
      Qm.prototype = {
        __class__: Qm
      };
      function Me(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        pa.call(this);
        this.device = a;
        this.id = b;
        this.minValue = c;
        this.maxValue = d;
        this.value = e;
      }
      g["openfl.ui.GameInputControl"] = Me;
      Me.__name__ = "openfl.ui.GameInputControl";
      Me.__super__ = pa;
      Me.prototype = q(pa.prototype, {
        __class__: Me
      });
      function Kn(a, b) {
        this.__controls = [];
        this.__button = new wc();
        this.__axis = new wc();
        this.id = a;
        this.name = b;
        a = new Me(this, "AXIS_0", -1, 1);
        this.__axis.h[0] = a;
        this.__controls.push(a);
        a = new Me(this, "AXIS_1", -1, 1);
        this.__axis.h[1] = a;
        this.__controls.push(a);
        a = new Me(this, "AXIS_2", -1, 1);
        this.__axis.h[2] = a;
        this.__controls.push(a);
        a = new Me(this, "AXIS_3", -1, 1);
        this.__axis.h[3] = a;
        this.__controls.push(a);
        a = new Me(this, "AXIS_4", -1, 1);
        this.__axis.h[4] = a;
        this.__controls.push(a);
        a = new Me(this, "AXIS_5", -1, 1);
        this.__axis.h[5] = a;
        this.__controls.push(a);
        for (b = 0; b < 15;) {
          var c = b++;
          a = new Me(this, "BUTTON_" + c, 0, 1);
          this.__button.h[c] = a;
          this.__controls.push(a);
        }
      }
      g["openfl.ui.GameInputDevice"] = Kn;
      Kn.__name__ = "openfl.ui.GameInputDevice";
      Kn.prototype = {
        getControlAt: function (a) {
          if (a >= 0 && a < this.__controls.length) {
            return this.__controls[a];
          } else {
            return null;
          }
        },
        get_numControls: function () {
          return this.__controls.length;
        },
        __class__: Kn,
        __properties__: {
          get_numControls: "get_numControls"
        }
      };
      function mp() {}
      g["openfl.ui.Keyboard"] = mp;
      mp.__name__ = "openfl.ui.Keyboard";
      mp.__getCharCode = function (a, b) {
        if (b == null) {
          b = false;
        }
        if (b) {
          switch (a) {
            case 48:
              return 41;
            case 49:
              return 33;
            case 50:
              return 64;
            case 51:
              return 35;
            case 52:
              return 36;
            case 53:
              return 37;
            case 54:
              return 94;
            case 55:
              return 38;
            case 56:
              return 42;
            case 57:
              return 40;
            case 186:
              return 58;
            case 187:
              return 43;
            case 188:
              return 60;
            case 189:
              return 95;
            case 190:
              return 62;
            case 191:
              return 63;
            case 192:
              return 126;
            case 219:
              return 123;
            case 220:
              return 124;
            case 221:
              return 125;
            case 222:
              return 34;
          }
          if (a >= 65 && a <= 90) {
            return a - 65 + 65;
          }
        } else {
          switch (a) {
            case 8:
              return 8;
            case 9:
              return 9;
            case 13:
              return 13;
            case 27:
              return 27;
            case 32:
              return 32;
            case 186:
              return 59;
            case 187:
              return 61;
            case 188:
              return 44;
            case 189:
              return 45;
            case 190:
              return 46;
            case 191:
              return 47;
            case 192:
              return 96;
            case 219:
              return 91;
            case 220:
              return 92;
            case 221:
              return 93;
            case 222:
              return 39;
          }
          if (a >= 48 && a <= 57) {
            return a - 48 + 48;
          }
          if (a >= 65 && a <= 90) {
            return a - 65 + 97;
          }
        }
        if (a >= 96 && a <= 105) {
          return a - 96 + 48;
        }
        switch (a) {
          case 8:
            return 8;
          case 13:
            return 13;
          case 46:
            return 127;
          case 106:
            return 42;
          case 107:
            return 43;
          case 108:
            return 44;
          case 110:
            return 45;
          case 111:
            return 46;
        }
        return 0;
      };
      function fd() {}
      g["openfl.ui.Mouse"] = fd;
      fd.__name__ = "openfl.ui.Mouse";
      fd.__properties__ = {
        set_cursor: "set_cursor"
      };
      fd.hide = function () {
        fd.__hidden = true;
        for (var a = 0, b = ia.current.__windows; a < b.length;) {
          var c = b[a];
          ++a;
          c.set_cursor(null);
        }
      };
      fd.show = function () {
        fd.__hidden = false;
        var a = fd.__cursor;
        fd.__cursor = null;
        fd.set_cursor(a);
      };
      fd.set_cursor = function (a) {
        if (a == null) {
          a = "auto";
        }
        var b = null;
        switch (a) {
          case "arrow":
            b = Qb.ARROW;
            break;
          case "button":
            b = Qb.POINTER;
            break;
          case "crosshair":
            b = Qb.CROSSHAIR;
            break;
          case "custom":
            b = Qb.CUSTOM;
            break;
          case "hand":
            b = Qb.MOVE;
            break;
          case "ibeam":
            b = Qb.TEXT;
            break;
          case "resize_nesw":
            b = Qb.RESIZE_NESW;
            break;
          case "resize_ns":
            b = Qb.RESIZE_NS;
            break;
          case "resize_nwse":
            b = Qb.RESIZE_NWSE;
            break;
          case "resize_we":
            b = Qb.RESIZE_WE;
            break;
          case "wait":
            b = Qb.WAIT;
            break;
          case "waitarrow":
            b = Qb.WAIT_ARROW;
        }
        if (b != null && !fd.__hidden) {
          for (var c = 0, d = ia.current.__windows; c < d.length;) {
            var e = d[c];
            ++c;
            e.set_cursor(b);
          }
        }
        return fd.__cursor = a;
      };
      var Sp = {
        toLimeCursor: function (a) {
          switch (a) {
            case "arrow":
              return Qb.ARROW;
            case "auto":
              return Qb.DEFAULT;
            case "button":
              return Qb.POINTER;
            case "crosshair":
              return Qb.CROSSHAIR;
            case "custom":
              return Qb.CUSTOM;
            case "hand":
              return Qb.MOVE;
            case "ibeam":
              return Qb.TEXT;
            case "resize_nesw":
              return Qb.RESIZE_NESW;
            case "resize_ns":
              return Qb.RESIZE_NS;
            case "resize_nwse":
              return Qb.RESIZE_NWSE;
            case "resize_we":
              return Qb.RESIZE_WE;
            case "wait":
              return Qb.WAIT;
            case "waitarrow":
              return Qb.WAIT_ARROW;
            default:
              return Qb.DEFAULT;
          }
        }
      };
      function di() {}
      g["openfl.ui.Multitouch"] = di;
      di.__name__ = "openfl.ui.Multitouch";
      function ta(a) {
        if (a == null) {
          a = false;
        }
        this.debugEnabled = a;
        if (!ta.initialized) {
          ta.init();
        }
      }
      g["openfl.utils.AGALMiniAssembler"] = ta;
      ta.__name__ = "openfl.utils.AGALMiniAssembler";
      ta.init = function () {
        ta.initialized = true;
        var a = ta.OPMAP;
        var b = new Eb("mov", 2, 0, 0);
        a.h.mov = b;
        a = ta.OPMAP;
        b = new Eb("add", 3, 1, 0);
        a.h.add = b;
        a = ta.OPMAP;
        b = new Eb("sub", 3, 2, 0);
        a.h.sub = b;
        a = ta.OPMAP;
        b = new Eb("mul", 3, 3, 0);
        a.h.mul = b;
        a = ta.OPMAP;
        b = new Eb("div", 3, 4, 0);
        a.h.div = b;
        a = ta.OPMAP;
        b = new Eb("rcp", 2, 5, 0);
        a.h.rcp = b;
        a = ta.OPMAP;
        b = new Eb("min", 3, 6, 0);
        a.h.min = b;
        a = ta.OPMAP;
        b = new Eb("max", 3, 7, 0);
        a.h.max = b;
        a = ta.OPMAP;
        b = new Eb("frc", 2, 8, 0);
        a.h.frc = b;
        a = ta.OPMAP;
        b = new Eb("sqt", 2, 9, 0);
        a.h.sqt = b;
        a = ta.OPMAP;
        b = new Eb("rsq", 2, 10, 0);
        a.h.rsq = b;
        a = ta.OPMAP;
        b = new Eb("pow", 3, 11, 0);
        a.h.pow = b;
        a = ta.OPMAP;
        b = new Eb("log", 2, 12, 0);
        a.h.log = b;
        a = ta.OPMAP;
        b = new Eb("exp", 2, 13, 0);
        a.h.exp = b;
        a = ta.OPMAP;
        b = new Eb("nrm", 2, 14, 0);
        a.h.nrm = b;
        a = ta.OPMAP;
        b = new Eb("sin", 2, 15, 0);
        a.h.sin = b;
        a = ta.OPMAP;
        b = new Eb("cos", 2, 16, 0);
        a.h.cos = b;
        a = ta.OPMAP;
        b = new Eb("crs", 3, 17, 0);
        a.h.crs = b;
        a = ta.OPMAP;
        b = new Eb("dp3", 3, 18, 0);
        a.h.dp3 = b;
        a = ta.OPMAP;
        b = new Eb("dp4", 3, 19, 0);
        a.h.dp4 = b;
        a = ta.OPMAP;
        b = new Eb("abs", 2, 20, 0);
        a.h.abs = b;
        a = ta.OPMAP;
        b = new Eb("neg", 2, 21, 0);
        a.h.neg = b;
        a = ta.OPMAP;
        b = new Eb("sat", 2, 22, 0);
        a.h.sat = b;
        a = ta.OPMAP;
        b = new Eb("m33", 3, 23, 16);
        a.h.m33 = b;
        a = ta.OPMAP;
        b = new Eb("m44", 3, 24, 16);
        a.h.m44 = b;
        a = ta.OPMAP;
        b = new Eb("m34", 3, 25, 16);
        a.h.m34 = b;
        a = ta.OPMAP;
        b = new Eb("ddx", 2, 26, 288);
        a.h.ddx = b;
        a = ta.OPMAP;
        b = new Eb("ddy", 2, 27, 288);
        a.h.ddy = b;
        a = ta.OPMAP;
        b = new Eb("ife", 2, 28, 897);
        a.h.ife = b;
        a = ta.OPMAP;
        b = new Eb("ine", 2, 29, 897);
        a.h.ine = b;
        a = ta.OPMAP;
        b = new Eb("ifg", 2, 30, 897);
        a.h.ifg = b;
        a = ta.OPMAP;
        b = new Eb("ifl", 2, 31, 897);
        a.h.ifl = b;
        a = ta.OPMAP;
        b = new Eb("els", 0, 32, 1921);
        a.h.els = b;
        a = ta.OPMAP;
        b = new Eb("eif", 0, 33, 1409);
        a.h.eif = b;
        a = ta.OPMAP;
        b = new Eb("kil", 1, 39, 160);
        a.h.kil = b;
        a = ta.OPMAP;
        b = new Eb("tex", 3, 40, 40);
        a.h.tex = b;
        a = ta.OPMAP;
        b = new Eb("sge", 3, 41, 0);
        a.h.sge = b;
        a = ta.OPMAP;
        b = new Eb("slt", 3, 42, 0);
        a.h.slt = b;
        a = ta.OPMAP;
        b = new Eb("sgn", 2, 43, 0);
        a.h.sgn = b;
        a = ta.OPMAP;
        b = new Eb("seq", 3, 44, 0);
        a.h.seq = b;
        a = ta.OPMAP;
        b = new Eb("sne", 3, 45, 0);
        a.h.sne = b;
        a = ta.SAMPLEMAP;
        b = new vc("rgba", 8, 0);
        a.h.rgba = b;
        a = ta.SAMPLEMAP;
        b = new vc("compressed", 8, 1);
        a.h.compressed = b;
        a = ta.SAMPLEMAP;
        b = new vc("compressedalpha", 8, 2);
        a.h.compressedalpha = b;
        a = ta.SAMPLEMAP;
        b = new vc("dxt1", 8, 1);
        a.h.dxt1 = b;
        a = ta.SAMPLEMAP;
        b = new vc("dxt5", 8, 2);
        a.h.dxt5 = b;
        a = ta.SAMPLEMAP;
        b = new vc("video", 8, 3);
        a.h.video = b;
        a = ta.SAMPLEMAP;
        b = new vc("2d", 12, 0);
        a.h["2d"] = b;
        a = ta.SAMPLEMAP;
        b = new vc("3d", 12, 2);
        a.h["3d"] = b;
        a = ta.SAMPLEMAP;
        b = new vc("cube", 12, 1);
        a.h.cube = b;
        a = ta.SAMPLEMAP;
        b = new vc("mipnearest", 24, 1);
        a.h.mipnearest = b;
        a = ta.SAMPLEMAP;
        b = new vc("miplinear", 24, 2);
        a.h.miplinear = b;
        a = ta.SAMPLEMAP;
        b = new vc("mipnone", 24, 0);
        a.h.mipnone = b;
        a = ta.SAMPLEMAP;
        b = new vc("nomip", 24, 0);
        a.h.nomip = b;
        a = ta.SAMPLEMAP;
        b = new vc("nearest", 28, 0);
        a.h.nearest = b;
        a = ta.SAMPLEMAP;
        b = new vc("linear", 28, 1);
        a.h.linear = b;
        a = ta.SAMPLEMAP;
        b = new vc("anisotropic2x", 28, 2);
        a.h.anisotropic2x = b;
        a = ta.SAMPLEMAP;
        b = new vc("anisotropic4x", 28, 3);
        a.h.anisotropic4x = b;
        a = ta.SAMPLEMAP;
        b = new vc("anisotropic8x", 28, 4);
        a.h.anisotropic8x = b;
        a = ta.SAMPLEMAP;
        b = new vc("anisotropic16x", 28, 5);
        a.h.anisotropic16x = b;
        a = ta.SAMPLEMAP;
        b = new vc("centroid", 16, 1);
        a.h.centroid = b;
        a = ta.SAMPLEMAP;
        b = new vc("single", 16, 2);
        a.h.single = b;
        a = ta.SAMPLEMAP;
        b = new vc("ignoresampler", 16, 4);
        a.h.ignoresampler = b;
        a = ta.SAMPLEMAP;
        b = new vc("repeat", 20, 1);
        a.h.repeat = b;
        a = ta.SAMPLEMAP;
        b = new vc("wrap", 20, 1);
        a.h.wrap = b;
        a = ta.SAMPLEMAP;
        b = new vc("clamp", 20, 0);
        a.h.clamp = b;
        a = ta.SAMPLEMAP;
        b = new vc("clamp_u_repeat_v", 20, 2);
        a.h.clamp_u_repeat_v = b;
        a = ta.SAMPLEMAP;
        b = new vc("repeat_u_clamp_v", 20, 3);
        a.h.repeat_u_clamp_v = b;
      };
      ta.prototype = {
        assemble: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 1;
          }
          var e = oa.getTimer();
          this.agalcode = new vd(0);
          this.error = "";
          var f = false;
          if (a == "fragment") {
            f = true;
          } else if (a != "vertex") {
            this.error = "ERROR: mode needs to be \"fragment\" or \"vertex\" but is \"" + a + "\".";
          }
          this.agalcode.__endian = 1;
          this.agalcode.writeByte(160);
          this.agalcode.writeUnsignedInt(c);
          this.agalcode.writeByte(161);
          this.agalcode.writeByte(f ? 1 : 0);
          this.initregmap(c, d);
          a = w.replace(b, "\r", "\n").split("\n");
          b = 0;
          d = a.length;
          var h = new V("<.*>", "g");
          var g = new V("([\\w\\.\\-\\+]+)", "gi");
          var n = new V("^\\w{3}", "ig");
          var p = new V("vc\\[([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw](\\+\\d{1,3})?)?\\](\\.[xyzw]{1,4})?|([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw]{1,4})?", "gi");
          var m = new V("\\[.*\\]", "ig");
          var l = new V("^\\b[A-Za-z]{1,3}", "ig");
          var q = new V("\\d+", "");
          var u = new V("(\\.[xyzw]{1,4})", "");
          var z = new V("[A-Za-z]{1,3}", "ig");
          var J = new V("(\\.[xyzw]{1,1})", "");
          var ba = new V("\\+\\d{1,3}", "ig");
          for (var y = 0; y < d && this.error == "";) {
            var A = w.trim(a[y]);
            var B = A.indexOf("//");
            if (B != -1) {
              A = r.substr(A, 0, B);
            }
            var D = h.match(A) ? h.matchedPos().pos : -1;
            B = null;
            if (D != -1) {
              B = this.match(r.substr(A, D, null), g);
              A = r.substr(A, 0, D);
            }
            var C = null;
            if (n.match(A)) {
              D = n.matched(0);
              C = ta.OPMAP.h[D];
            }
            if (C == null) {
              if (A.length >= 3) {
                Va.warn("warning: bad line " + y + ": " + a[y], {
                  fileName: "openfl/utils/AGALMiniAssembler.hx",
                  lineNumber: 262,
                  className: "openfl.utils.AGALMiniAssembler",
                  methodName: "assemble"
                });
              }
            } else {
              if (this.debugEnabled) {
                Va.info(C, {
                  fileName: "openfl/utils/AGALMiniAssembler.hx",
                  lineNumber: 272,
                  className: "openfl.utils.AGALMiniAssembler",
                  methodName: "assemble"
                });
              }
              if (C == null) {
                if (A.length >= 3) {
                  Va.warn("warning: bad line " + y + ": " + a[y], {
                    fileName: "openfl/utils/AGALMiniAssembler.hx",
                    lineNumber: 279,
                    className: "openfl.utils.AGALMiniAssembler",
                    methodName: "assemble"
                  });
                }
              } else {
                A = r.substr(A, A.indexOf(C.name) + C.name.length, null);
                if ((C.flags & 256) != 0 && c < 2) {
                  this.error = "error: opcode requires version 2.";
                  break;
                }
                if ((C.flags & 64) != 0 && f) {
                  this.error = "error: opcode is only allowed in vertex programs.";
                  break;
                }
                if ((C.flags & 32) != 0 && !f) {
                  this.error = "error: opcode is only allowed in fragment programs.";
                  break;
                }
                if (this.verbose) {
                  Va.info("emit opcode=" + v.string(C), {
                    fileName: "openfl/utils/AGALMiniAssembler.hx",
                    lineNumber: 308,
                    className: "openfl.utils.AGALMiniAssembler",
                    methodName: "assemble"
                  });
                }
                this.agalcode.writeUnsignedInt(C.emitCode);
                ++b;
                if (b > 4096) {
                  this.error = "error: too many opcodes. maximum is 4096.";
                  break;
                }
                var x = this.match(A, p);
                if (x.length != C.numRegister) {
                  this.error = "error: wrong number of operands. found " + x.length + " but expected " + C.numRegister + ".";
                  break;
                }
                var F = false;
                var G = 160;
                A = 0;
                for (D = x.length; A < D;) {
                  var H = A++;
                  var N = false;
                  var la = this.match(x[H], m);
                  if (la.length > 0) {
                    x[H] = w.replace(x[H], la[0], "0");
                    if (this.verbose) {
                      Va.info("IS REL", {
                        fileName: "openfl/utils/AGALMiniAssembler.hx",
                        lineNumber: 344,
                        className: "openfl.utils.AGALMiniAssembler",
                        methodName: "assemble"
                      });
                    }
                    N = true;
                  }
                  var ha = this.match(x[H], l);
                  if (ha.length == 0) {
                    this.error = "error: could not parse operand " + H + " (" + x[H] + ").";
                    F = true;
                    break;
                  }
                  var ja = ta.REGMAP.h[ha[0]];
                  if (this.debugEnabled) {
                    Va.info(ja, {
                      fileName: "openfl/utils/AGALMiniAssembler.hx",
                      lineNumber: 363,
                      className: "openfl.utils.AGALMiniAssembler",
                      methodName: "assemble"
                    });
                  }
                  if (ja == null) {
                    this.error = "error: could not find register name for operand " + H + " (" + x[H] + ").";
                    F = true;
                    break;
                  }
                  if (f) {
                    if ((ja.flags & 32) == 0) {
                      this.error = "error: register operand " + H + " (" + x[H] + ") only allowed in vertex programs.";
                      F = true;
                      break;
                    }
                    if (N) {
                      this.error = "error: register operand " + H + " (" + x[H] + ") relative adressing not allowed in fragment programs.";
                      F = true;
                      break;
                    }
                  } else if ((ja.flags & 64) == 0) {
                    this.error = "error: register operand " + H + " (" + x[H] + ") only allowed in fragment programs.";
                    F = true;
                    break;
                  }
                  x[H] = r.substr(x[H], x[H].indexOf(ja.name) + ja.name.length, null);
                  var ia = N ? this.match(la[0], q) : this.match(x[H], q);
                  ha = 0;
                  if (ia.length > 0) {
                    ha = v.parseInt(ia[0]);
                  }
                  if (kc.gt(ha, ja.range)) {
                    A = ja.range + 1;
                    this.error = "error: register operand " + H + " (" + x[H] + ") index exceeds limit of " + (A == null ? "null" : v.string(kc.toFloat(A))) + ".";
                    F = true;
                    break;
                  }
                  var O = this.match(x[H], u);
                  var E = H == 0 && (C.flags & 128) == 0;
                  var Q = H == 2 && (C.flags & 8) != 0;
                  var Ab = 0;
                  var I = 0;
                  var P = 0;
                  if (E && N) {
                    this.error = "error: relative can not be destination";
                    F = true;
                    break;
                  }
                  if (O.length > 0) {
                    var M = ia = 0;
                    for (var S = O[0].length, R = 1; R < S;) {
                      M = r.cca(O[0], R) - 120;
                      if (kc.gt(M, 2)) {
                        M = 3;
                      }
                      ia = E ? ia | 1 << M : ia | M << (R - 1 << 1);
                      ++R;
                    }
                    if (!E) {
                      while (R <= 4) {
                        ia |= M << (R - 1 << 1);
                        ++R;
                      }
                    }
                  } else {
                    ia = E ? 15 : 228;
                  }
                  if (N) {
                    O = this.match(la[0], z);
                    Ab = ta.REGMAP.h[O[0]];
                    if (Ab == null) {
                      this.error = "error: bad index register";
                      F = true;
                      break;
                    }
                    Ab = Ab.emitCode;
                    M = this.match(la[0], J);
                    if (M.length == 0) {
                      this.error = "error: bad index register select";
                      F = true;
                      break;
                    }
                    I = r.cca(M[0], 1) - 120;
                    if (kc.gt(I, 2)) {
                      I = 3;
                    }
                    la = this.match(la[0], ba);
                    if (la.length > 0) {
                      P = v.parseInt(la[0]);
                    }
                    if (P < 0 || P > 255) {
                      this.error = "error: index offset " + P + " out of bounds. [0..255]";
                      F = true;
                      break;
                    }
                    if (this.verbose) {
                      Va.info("RELATIVE: type=" + Ab + "==" + O[0] + " sel=" + (I == null ? "null" : v.string(kc.toFloat(I))) + "==" + M[0] + " idx=" + (ha == null ? "null" : v.string(kc.toFloat(ha))) + " offset=" + P, {
                        fileName: "openfl/utils/AGALMiniAssembler.hx",
                        lineNumber: 518,
                        className: "openfl.utils.AGALMiniAssembler",
                        methodName: "assemble"
                      });
                    }
                  }
                  if (this.verbose) {
                    Va.info("  emit argcode=" + v.string(ja) + "[" + (ha == null ? "null" : v.string(kc.toFloat(ha))) + "][" + ia + "]", {
                      fileName: "openfl/utils/AGALMiniAssembler.hx",
                      lineNumber: 525,
                      className: "openfl.utils.AGALMiniAssembler",
                      methodName: "assemble"
                    });
                  }
                  if (E) {
                    this.agalcode.writeShort(ha);
                    this.agalcode.writeByte(ia);
                    this.agalcode.writeByte(ja.emitCode);
                    G -= 32;
                  } else {
                    if (Q) {
                      if (this.verbose) {
                        Va.info("  emit sampler", {
                          fileName: "openfl/utils/AGALMiniAssembler.hx",
                          lineNumber: 541,
                          className: "openfl.utils.AGALMiniAssembler",
                          methodName: "assemble"
                        });
                      }
                      H = 5;
                      la = N = 0;
                      for (ja = B == null ? 0 : B.length; la < ja;) {
                        ia = la++;
                        if (this.verbose) {
                          Va.info("    opt: " + B[ia], {
                            fileName: "openfl/utils/AGALMiniAssembler.hx",
                            lineNumber: 552,
                            className: "openfl.utils.AGALMiniAssembler",
                            methodName: "assemble"
                          });
                        }
                        E = ta.SAMPLEMAP.h[B[ia]];
                        if (E == null) {
                          N = parseFloat(B[ia]);
                          if (this.verbose) {
                            Va.info("    bias: " + N, {
                              fileName: "openfl/utils/AGALMiniAssembler.hx",
                              lineNumber: 565,
                              className: "openfl.utils.AGALMiniAssembler",
                              methodName: "assemble"
                            });
                          }
                        } else {
                          if (E.flag != 16) {
                            H &= ~(15 << E.flag);
                          }
                          H |= E.mask << E.flag;
                        }
                      }
                      this.agalcode.writeShort(ha);
                      this.agalcode.writeByte(N * 8 | 0);
                      this.agalcode.writeByte(0);
                      this.agalcode.writeUnsignedInt(H);
                      if (this.verbose) {
                        Va.info("    bits: " + (H - 5), {
                          fileName: "openfl/utils/AGALMiniAssembler.hx",
                          lineNumber: 586,
                          className: "openfl.utils.AGALMiniAssembler",
                          methodName: "assemble"
                        });
                      }
                    } else {
                      if (H == 0) {
                        this.agalcode.writeUnsignedInt(0);
                        G -= 32;
                      }
                      this.agalcode.writeShort(ha);
                      this.agalcode.writeByte(P);
                      this.agalcode.writeByte(ia);
                      this.agalcode.writeByte(ja.emitCode);
                      this.agalcode.writeByte(Ab);
                      this.agalcode.writeShort(N ? I | 32768 : 0);
                    }
                    G -= 64;
                  }
                }
                for (A = 0; A < G;) {
                  this.agalcode.writeByte(0);
                  A += 8;
                }
                if (F) {
                  break;
                }
              }
            }
            ++y;
          }
          if (this.error != "") {
            this.error += "\n  at line " + y + " " + a[y];
            Ne.set_length(this.agalcode, 0);
            Va.info(this.error, {
              fileName: "openfl/utils/AGALMiniAssembler.hx",
              lineNumber: 631,
              className: "openfl.utils.AGALMiniAssembler",
              methodName: "assemble"
            });
          }
          if (this.debugEnabled) {
            c = "generated bytecode:";
            f = Ne.get_length(this.agalcode);
            A = 0;
            for (D = f; A < D;) {
              f = A++;
              if (f % 16 == 0) {
                c += "\n";
              }
              if (f % 4 == 0) {
                c += " ";
              }
              f = w.hex(this.agalcode.b[f], 2);
              if (f.length < 2) {
                f = "0" + f;
              }
              c += f;
            }
            Va.info(c, {
              fileName: "openfl/utils/AGALMiniAssembler.hx",
              lineNumber: 662,
              className: "openfl.utils.AGALMiniAssembler",
              methodName: "assemble"
            });
          }
          if (this.verbose) {
            Va.info("AGALMiniAssembler.assemble time: " + (oa.getTimer() - e) / 1000 + "s", {
              fileName: "openfl/utils/AGALMiniAssembler.hx",
              lineNumber: 667,
              className: "openfl.utils.AGALMiniAssembler",
              methodName: "assemble"
            });
          }
          return this.agalcode;
        },
        initregmap: function (a, b) {
          var c = ta.REGMAP;
          var d = new Ge("va", "vertex attribute", 0, b ? 1024 : a == 1 || a == 2 ? 7 : 15, 66);
          c.h.va = d;
          c = ta.REGMAP;
          d = new Ge("vc", "vertex constant", 1, b ? 1024 : a == 1 ? 127 : 249, 66);
          c.h.vc = d;
          c = ta.REGMAP;
          d = new Ge("vt", "vertex temporary", 2, b ? 1024 : a == 1 ? 7 : 25, 67);
          c.h.vt = d;
          c = ta.REGMAP;
          d = new Ge("vo", "vertex output", 3, b ? 1024 : 0, 65);
          c.h.vo = d;
          c = ta.REGMAP;
          d = new Ge("vi", "varying", 4, b ? 1024 : a == 1 ? 7 : 9, 99);
          c.h.vi = d;
          c = ta.REGMAP;
          d = new Ge("fc", "fragment constant", 1, b ? 1024 : a == 1 ? 27 : a == 2 ? 63 : 199, 34);
          c.h.fc = d;
          c = ta.REGMAP;
          d = new Ge("ft", "fragment temporary", 2, b ? 1024 : a == 1 ? 7 : 25, 35);
          c.h.ft = d;
          c = ta.REGMAP;
          d = new Ge("fs", "texture sampler", 5, b ? 1024 : 7, 34);
          c.h.fs = d;
          c = ta.REGMAP;
          d = new Ge("fo", "fragment output", 3, b ? 1024 : a == 1 ? 0 : 3, 33);
          c.h.fo = d;
          c = ta.REGMAP;
          d = new Ge("fd", "fragment depth output", 6, b ? 1024 : a == 1 ? -1 : 0, 33);
          c.h.fd = d;
          c = ta.REGMAP;
          d = new Ge("iid", "instance id", 7, b ? 1024 : 0, 66);
          c.h.iid = d;
          d = ta.REGMAP.h.vo;
          ta.REGMAP.h.op = d;
          d = ta.REGMAP.h.vi;
          ta.REGMAP.h.i = d;
          d = ta.REGMAP.h.vi;
          ta.REGMAP.h.v = d;
          d = ta.REGMAP.h.fo;
          ta.REGMAP.h.oc = d;
          d = ta.REGMAP.h.fd;
          ta.REGMAP.h.od = d;
          d = ta.REGMAP.h.vi;
          ta.REGMAP.h.fi = d;
        },
        match: function (a, b) {
          var c = [];
          for (var d = 0; b.matchSub(a, d);) {
            d = b.matched(0);
            c.push(d);
            d = b.matchedPos().pos + d.length;
          }
          return c;
        },
        __class__: ta
      };
      function Eb(a, b, c, d) {
        this.name = a;
        this.numRegister = b;
        this.emitCode = c;
        this.flags = d;
      }
      g["openfl.utils._AGALMiniAssembler.OpCode"] = Eb;
      Eb.__name__ = "openfl.utils._AGALMiniAssembler.OpCode";
      Eb.prototype = {
        __class__: Eb
      };
      function Ge(a, b, c, d, e) {
        this.name = a;
        this.longName = b;
        this.emitCode = c;
        this.range = d;
        this.flags = e;
      }
      g["openfl.utils._AGALMiniAssembler.Register"] = Ge;
      Ge.__name__ = "openfl.utils._AGALMiniAssembler.Register";
      Ge.prototype = {
        toString: function () {
          return "[Register name=\"" + this.name + "\", longName=\"" + this.longName + "\", emitCode=" + (this.emitCode == null ? "null" : v.string(kc.toFloat(this.emitCode))) + ", range=" + (this.range == null ? "null" : v.string(kc.toFloat(this.range))) + ", flags=" + (this.flags == null ? "null" : v.string(kc.toFloat(this.flags))) + "]";
        },
        __class__: Ge
      };
      function vc(a, b, c) {
        this.name = a;
        this.flag = b;
        this.mask = c;
      }
      g["openfl.utils._AGALMiniAssembler.Sampler"] = vc;
      vc.__name__ = "openfl.utils._AGALMiniAssembler.Sampler";
      vc.prototype = {
        __class__: vc
      };
      function Rm() {}
      g["openfl.utils.IAssetCache"] = Rm;
      Rm.__name__ = "openfl.utils.IAssetCache";
      Rm.__isInterface__ = true;
      Rm.prototype = {
        __class__: Rm,
        __properties__: {
          get_enabled: "get_enabled"
        }
      };
      function Sm() {
        this.__enabled = true;
        this.bitmapData = new ua();
        this.font = new ua();
        this.sound = new ua();
      }
      g["openfl.utils.AssetCache"] = Sm;
      Sm.__name__ = "openfl.utils.AssetCache";
      Sm.__interfaces__ = [Rm];
      Sm.prototype = {
        getBitmapData: function (a) {
          return this.bitmapData.h[a];
        },
        getFont: function (a) {
          return this.font.h[a];
        },
        getSound: function (a) {
          return this.sound.h[a];
        },
        hasBitmapData: function (a) {
          return Object.prototype.hasOwnProperty.call(this.bitmapData.h, a);
        },
        hasFont: function (a) {
          return Object.prototype.hasOwnProperty.call(this.font.h, a);
        },
        hasSound: function (a) {
          return Object.prototype.hasOwnProperty.call(this.sound.h, a);
        },
        removeBitmapData: function (a) {
          var b = sa.cache.image;
          if (Object.prototype.hasOwnProperty.call(b.h, a)) {
            delete b.h[a];
          }
          b = this.bitmapData;
          if (Object.prototype.hasOwnProperty.call(b.h, a)) {
            delete b.h[a];
            return true;
          } else {
            return false;
          }
        },
        setBitmapData: function (a, b) {
          this.bitmapData.h[a] = b;
        },
        setFont: function (a, b) {
          this.font.h[a] = b;
        },
        setSound: function (a, b) {
          this.sound.h[a] = b;
        },
        get_enabled: function () {
          return this.__enabled;
        },
        __class__: Sm,
        __properties__: {
          get_enabled: "get_enabled"
        }
      };
      function Mf() {
        hc.call(this);
      }
      g["openfl.utils.AssetLibrary"] = Mf;
      Mf.__name__ = "openfl.utils.AssetLibrary";
      Mf.fromBundle = function (a) {
        a = hc.fromBundle(a);
        if (a != null) {
          if (a instanceof Mf) {
            return a;
          }
          var b = new Mf();
          b.__proxy = a;
          return b;
        }
        return null;
      };
      Mf.fromManifest = function (a) {
        a = hc.fromManifest(a);
        if (a != null) {
          if (a instanceof Mf) {
            return a;
          }
          var b = new Mf();
          b.__proxy = a;
          return b;
        }
        return null;
      };
      Mf.__super__ = hc;
      Mf.prototype = q(hc.prototype, {
        bind: function (a, b) {
          return false;
        },
        exists: function (a, b) {
          if (this.__proxy != null) {
            return this.__proxy.exists(a, b);
          } else {
            return hc.prototype.exists.call(this, a, b);
          }
        },
        getAsset: function (a, b) {
          if (this.__proxy != null) {
            return this.__proxy.getAsset(a, b);
          } else {
            return hc.prototype.getAsset.call(this, a, b);
          }
        },
        getAudioBuffer: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getAudioBuffer(a);
          } else {
            return hc.prototype.getAudioBuffer.call(this, a);
          }
        },
        getBytes: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getBytes(a);
          } else {
            return hc.prototype.getBytes.call(this, a);
          }
        },
        getFont: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getFont(a);
          } else {
            return hc.prototype.getFont.call(this, a);
          }
        },
        getImage: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getImage(a);
          } else {
            return hc.prototype.getImage.call(this, a);
          }
        },
        getPath: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getPath(a);
          } else {
            return hc.prototype.getPath.call(this, a);
          }
        },
        getText: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getText(a);
          } else {
            return hc.prototype.getText.call(this, a);
          }
        },
        isLocal: function (a, b) {
          if (this.__proxy != null) {
            return this.__proxy.isLocal(a, b);
          } else {
            return hc.prototype.isLocal.call(this, a, b);
          }
        },
        list: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.list(a);
          } else {
            return hc.prototype.list.call(this, a);
          }
        },
        loadAsset: function (a, b) {
          if (this.__proxy != null) {
            return this.__proxy.loadAsset(a, b);
          } else {
            return hc.prototype.loadAsset.call(this, a, b);
          }
        },
        load: function () {
          if (this.__proxy != null) {
            return this.__proxy.load();
          } else {
            return hc.prototype.load.call(this);
          }
        },
        loadAudioBuffer: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadAudioBuffer(a);
          } else {
            return hc.prototype.loadAudioBuffer.call(this, a);
          }
        },
        loadBytes: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadBytes(a);
          } else {
            return hc.prototype.loadBytes.call(this, a);
          }
        },
        loadFont: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadFont(a);
          } else {
            return hc.prototype.loadFont.call(this, a);
          }
        },
        loadImage: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadImage(a);
          } else {
            return hc.prototype.loadImage.call(this, a);
          }
        },
        loadText: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadText(a);
          } else {
            return hc.prototype.loadText.call(this, a);
          }
        },
        unload: function () {
          if (this.__proxy != null) {
            this.__proxy.unload();
          } else {
            hc.prototype.unload.call(this);
          }
        },
        __class__: Mf
      });
      function Q() {}
      g["openfl.utils.Assets"] = Q;
      Q.__name__ = "openfl.utils.Assets";
      Q.addEventListener = function (a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (!sa.onChange.has(Q.LimeAssets_onChange)) {
          sa.onChange.add(Q.LimeAssets_onChange);
        }
        Q.dispatcher.addEventListener(a, b, c, d, e);
      };
      Q.dispatchEvent = function (a) {
        return Q.dispatcher.dispatchEvent(a);
      };
      Q.exists = function (a, b) {
        return sa.exists(a, b);
      };
      Q.getBitmapData = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b && Q.cache.get_enabled() && Q.cache.hasBitmapData(a)) {
          var c = Q.cache.getBitmapData(a);
          if (Q.isValidBitmapData(c)) {
            return c;
          }
        }
        c = sa.getImage(a, false);
        if (c != null) {
          c = T.fromImage(c);
          if (b && Q.cache.get_enabled()) {
            Q.cache.setBitmapData(a, c);
          }
          return c;
        } else {
          return null;
        }
      };
      Q.getBytes = function (a) {
        return Ne.fromLimeBytes(sa.getBytes(a));
      };
      Q.getFont = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b && Q.cache.get_enabled() && Q.cache.hasFont(a)) {
          return Q.cache.getFont(a);
        }
        var c = sa.getFont(a, false);
        if (c != null) {
          var d = new wb();
          d.__fromLimeFont(c);
          if (b && Q.cache.get_enabled()) {
            Q.cache.setFont(a, d);
          }
          return d;
        }
        return new wb();
      };
      Q.getLibrary = function (a) {
        return sa.getLibrary(a);
      };
      Q.getSound = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b && Q.cache.get_enabled() && Q.cache.hasSound(a)) {
          var c = Q.cache.getSound(a);
          if (Q.isValidSound(c)) {
            return c;
          }
        }
        c = sa.getAudioBuffer(a, false);
        if (c != null) {
          c = ng.fromAudioBuffer(c);
          if (b && Q.cache.get_enabled()) {
            Q.cache.setSound(a, c);
          }
          return c;
        } else {
          return null;
        }
      };
      Q.getText = function (a) {
        return sa.getText(a);
      };
      Q.hasLibrary = function (a) {
        return sa.hasLibrary(a);
      };
      Q.isValidBitmapData = function (a) {
        return a != null && a.image != null;
      };
      Q.isValidSound = function (a) {
        return true;
      };
      Q.list = function (a) {
        return sa.list(a);
      };
      Q.loadLibrary = function (a) {
        return sa.loadLibrary(a).then(function (b) {
          var c = null;
          if (b != null) {
            if (b instanceof Mf) {
              c = b;
            } else {
              c = sa.libraries;
              if (Object.prototype.hasOwnProperty.call(c.h, a)) {
                delete c.h[a];
              }
              c = new Mf();
              c.__proxy = b;
              sa.registerLibrary(a, c);
            }
          }
          return Bb.withValue(c);
        });
      };
      Q.loadSound = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b == null) {
          b = true;
        }
        var c = new Id();
        sa.loadAudioBuffer(a, b).onComplete(function (d) {
          if (d != null) {
            d = ng.fromAudioBuffer(d);
            if (b && Q.cache.get_enabled()) {
              Q.cache.setSound(a, d);
            }
            c.complete(d);
          } else {
            c.error("[Assets] Could not load Sound \"" + a + "\"");
          }
        }).onError(m(c, c.error)).onProgress(m(c, c.progress));
        return c.future;
      };
      Q.LimeAssets_onChange = function () {
        Q.dispatchEvent(new Ga("change"));
      };
      var Ne = {
        __properties__: {
          set_length: "set_length",
          get_length: "get_length"
        },
        fromBytes: function (a) {
          if (a == null) {
            return null;
          } else if (a instanceof vd) {
            return a;
          } else {
            return vd.fromBytes(a);
          }
        },
        fromLimeBytes: function (a) {
          return Ne.fromBytes(a);
        },
        toBytes: function (a) {
          return a;
        },
        get_length: function (a) {
          if (a == null) {
            return 0;
          } else {
            return a.length;
          }
        },
        set_length: function (a, b) {
          if (b >= 0) {
            a.__resize(b);
            if (b < a.position) {
              a.position = b;
            }
          }
          return a.length = b;
        }
      };
      var lf = {
        __get: function (a, b) {
          if (a == null || b == null) {
            return null;
          }
          if (Object.prototype.hasOwnProperty.call(a, b)) {
            return ja.field(a, b);
          }
          if (a instanceof gb) {
            var c = a.getChildByName(b);
            if (c != null) {
              return c;
            }
          }
          return ja.getProperty(a, b);
        },
        __eq: function (a, b) {
          return a == b;
        }
      };
      function Tm() {}
      g["haxe.lang.Iterator"] = Tm;
      Tm.__name__ = "haxe.lang.Iterator";
      Tm.__isInterface__ = true;
      Tm.prototype = {
        __class__: Tm
      };
      function Um() {}
      g["haxe.lang.Iterable"] = Um;
      Um.__name__ = "haxe.lang.Iterable";
      Um.__isInterface__ = true;
      Um.prototype = {
        __class__: Um
      };
      function yd() {}
      g["openfl.utils._internal.Lib"] = yd;
      yd.__name__ = "openfl.utils._internal.Lib";
      function Ih() {
        this.rollOutStack = [];
      }
      g["openfl.utils._internal.TouchData"] = Ih;
      Ih.__name__ = "openfl.utils._internal.TouchData";
      Ih.prototype = {
        reset: function () {
          this.touchOverTarget = this.touchDownTarget = this.touch = null;
          this.rollOutStack.splice(0, this.rollOutStack.length);
        },
        __class__: Ih
      };
      function te() {
        this.MAX_KEYBIND_WIDTH = 320;
        this.holdingEsc = 0;
        this.bindingKey = false;
        this.holdTime = this.holdValue = 0;
        this.nextAccept = 5;
        this.curSelected = 0;
        this.curOption = null;
        db.call(this);
        if (this.title == null) {
          this.title = "Options";
        }
        if (this.rpcTitle == null) {
          this.rpcTitle = "Options Menu";
        }
        this.bg = new F().loadGraphic(D.image("menuDesat"));
        this.bg.set_color(-1412611);
        var a = this.bg;
        a.set_x((h.width - a.get_width()) / 2);
        a.set_y((h.height - a.get_height()) / 2);
        this.bg.set_antialiasing(y.data.antialiasing);
        this.add(this.bg);
        this.grpOptions = new Qa();
        this.add(this.grpOptions);
        this.grpTexts = new Qa();
        this.add(this.grpTexts);
        this.checkboxGroup = new Qa();
        this.add(this.checkboxGroup);
        this.descBox = new F().makeGraphic(1, 1, -16777216);
        this.descBox.set_alpha(0.6);
        this.add(this.descBox);
        a = new Gb(75, 45, this.title, true);
        a.setScale(0.6);
        a.set_alpha(0.4);
        this.add(a);
        this.descText = new U(50, 600, 1180, "", 32);
        this.descText.setFormat("assets/fonts/vcr.ttf", 32, -1, "center", Sa.OUTLINE, -16777216);
        a = this.descText.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        this.descText.set_borderSize(2.4);
        this.add(this.descText);
        a = 0;
        for (var b = this.optionsArray.length; a < b;) {
          var c = a++;
          var d = new Gb(290, 260, this.optionsArray[c].name, false);
          d.isMenuItem = true;
          d.targetY = c;
          this.grpOptions.add(d);
          if (this.optionsArray[c].get_type() == "bool") {
            var e = new Jj(d.x - 105, d.y, v.string(this.optionsArray[c].getValue()) == "true");
            e.sprTracker = d;
            e.ID = c;
            this.checkboxGroup.add(e);
          } else {
            d.set_x(d.x - 80);
            d.startPosition.set_x(d.startPosition.x - 80);
            e = new wi("" + v.string(this.optionsArray[c].getValue()), d.get_width() + 60);
            e.sprTracker = d;
            e.copyAlpha = true;
            e.ID = c;
            this.grpTexts.add(e);
            this.optionsArray[c].child = e;
          }
          this.updateTextFrom(this.optionsArray[c]);
        }
        this.changeSelection();
        this.reloadCheckboxes();
      }
      g["options.BaseOptionsMenu"] = te;
      te.__name__ = "options.BaseOptionsMenu";
      te.__super__ = db;
      te.prototype = q(db.prototype, {
        addOption: function (a) {
          if (this.optionsArray == null || this.optionsArray.length < 1) {
            this.optionsArray = [];
          }
          this.optionsArray.push(a);
          return a;
        },
        update: function (a) {
          db.prototype.update.call(this, a);
          if (this.bindingKey) {
            this.bindingKeyUpdate(a);
          } else {
            if (Aa.instance.get_UI_UP_P()) {
              this.changeSelection(-1);
            }
            if (Aa.instance.get_UI_DOWN_P()) {
              this.changeSelection(1);
            }
            if (Aa.instance.get_BACK()) {
              this.close();
              h.sound.play(D.sound("cancelMenu"));
            }
            if (this.nextAccept <= 0) {
              if (this.curOption.get_type() == "bool") {
                if (Aa.instance.get_ACCEPT()) {
                  h.sound.play(D.sound("scrollMenu"));
                  this.curOption.setValue(this.curOption.getValue() == 1 ? false : true);
                  this.curOption.change();
                  this.reloadCheckboxes();
                }
              } else if (this.curOption.get_type() == "keybind") {
                if (Aa.instance.get_ACCEPT()) {
                  this.bindingBlack = new F().makeGraphic(1, 1, -1);
                  a = this.bindingBlack.scale;
                  var b = h.width;
                  var c = h.height;
                  if (c == null) {
                    c = 0;
                  }
                  if (b == null) {
                    b = 0;
                  }
                  a.set_x(b);
                  a.set_y(c);
                  this.bindingBlack.updateHitbox();
                  this.bindingBlack.set_alpha(0);
                  Da.tween(this.bindingBlack, {
                    alpha: 0.6
                  }, 0.35, {
                    ease: Xa.linear
                  });
                  this.add(this.bindingBlack);
                  this.bindingText = new Gb(h.width / 2, 160, "Rebinding " + this.curOption.name, false);
                  this.bindingText.set_alignment(Jf.CENTERED);
                  this.add(this.bindingText);
                  this.bindingText2 = new Gb(h.width / 2, 340, "Hold ESC to Cancel\nHold Backspace to Delete", true);
                  this.bindingText2.set_alignment(Jf.CENTERED);
                  this.add(this.bindingText2);
                  this.bindingKey = true;
                  this.holdingEsc = 0;
                  y.toggleVolumeKeys(false);
                  h.sound.play(D.sound("scrollMenu"));
                }
              } else if (Aa.instance.get_UI_LEFT() || Aa.instance.get_UI_RIGHT()) {
                b = Aa.instance.get_UI_LEFT_P() || Aa.instance.get_UI_RIGHT_P();
                if (this.holdTime > 0.5 || b) {
                  if (b) {
                    b = null;
                    if (this.curOption.get_type() != "string") {
                      b = Aa.instance.get_UI_LEFT() ? -this.curOption.changeValue : this.curOption.changeValue;
                    }
                    switch (this.curOption.get_type()) {
                      case "float":
                      case "int":
                      case "percent":
                        this.holdValue = this.curOption.getValue() + b;
                        if (this.holdValue < this.curOption.minValue) {
                          this.holdValue = this.curOption.minValue;
                        } else if (this.holdValue > this.curOption.maxValue) {
                          this.holdValue = this.curOption.maxValue;
                        }
                        switch (this.curOption.get_type()) {
                          case "int":
                            this.holdValue = Math.round(this.holdValue);
                            this.curOption.setValue(this.holdValue);
                            break;
                          case "float":
                          case "percent":
                            this.holdValue = bc.roundDecimal(this.holdValue, this.curOption.decimals);
                            this.curOption.setValue(this.holdValue);
                        }
                        break;
                      case "string":
                        b = this.curOption.curOption;
                        if (Aa.instance.get_UI_LEFT_P()) {
                          --b;
                        } else {
                          ++b;
                        }
                        if (b < 0) {
                          b = this.curOption.options.length - 1;
                        } else if (b >= this.curOption.options.length) {
                          b = 0;
                        }
                        this.curOption.curOption = b;
                        this.curOption.setValue(this.curOption.options[b]);
                    }
                    this.updateTextFrom(this.curOption);
                    this.curOption.change();
                    h.sound.play(D.sound("scrollMenu"));
                  } else if (this.curOption.get_type() != "string") {
                    this.holdValue += this.curOption.scrollSpeed * a * (Aa.instance.get_UI_LEFT() ? -1 : 1);
                    if (this.holdValue < this.curOption.minValue) {
                      this.holdValue = this.curOption.minValue;
                    } else if (this.holdValue > this.curOption.maxValue) {
                      this.holdValue = this.curOption.maxValue;
                    }
                    switch (this.curOption.get_type()) {
                      case "int":
                        this.curOption.setValue(Math.round(this.holdValue));
                        break;
                      case "float":
                      case "percent":
                        this.curOption.setValue(bc.roundDecimal(this.holdValue, this.curOption.decimals));
                    }
                    this.updateTextFrom(this.curOption);
                    this.curOption.change();
                  }
                }
                if (this.curOption.get_type() != "string") {
                  this.holdTime += a;
                }
              } else if (Aa.instance.get_UI_LEFT_R() || Aa.instance.get_UI_RIGHT_R()) {
                if (this.holdTime > 0.5) {
                  h.sound.play(D.sound("scrollMenu"));
                }
                this.holdTime = 0;
              }
              if (Aa.instance.get_RESET()) {
                a = this.optionsArray[this.curSelected];
                if (a.get_type() != "keybind") {
                  a.setValue(a.defaultValue);
                  if (a.get_type() != "bool") {
                    if (a.get_type() == "string") {
                      a.curOption = a.options.indexOf(a.getValue());
                    }
                    this.updateTextFrom(a);
                  }
                } else {
                  a.setValue(Aa.instance.controllerMode ? a.defaultKeys.gamepad : a.defaultKeys.keyboard);
                  this.updateBind(null, a);
                }
                a.change();
                h.sound.play(D.sound("cancelMenu"));
                this.reloadCheckboxes();
              }
            }
            if (this.nextAccept > 0) {
              --this.nextAccept;
            }
          }
        },
        bindingKeyUpdate: function (a) {
          var b = h.keys.pressed;
          if (b.keyManager.checkStatusUnsafe(27, b.status) || h.gamepads.anyHasState(1, 1)) {
            this.holdingEsc += a;
            if (this.holdingEsc > 0.5) {
              h.sound.play(D.sound("cancelMenu"));
              this.closeBinding();
            }
          } else {
            b = h.keys.pressed;
            if (b.keyManager.checkStatusUnsafe(8, b.status) || h.gamepads.anyHasState(6, 1)) {
              this.holdingEsc += a;
              if (this.holdingEsc > 0.5) {
                if (Aa.instance.controllerMode) {
                  this.curOption.keys.gamepad = eg.toStringMap.h[-1];
                } else {
                  this.curOption.keys.keyboard = eg.toStringMap.h[-1];
                }
                this.updateBind(Aa.instance.controllerMode ? Sd.getGamepadName(-1) : Sd.getKeyName(-1));
                h.sound.play(D.sound("cancelMenu"));
                this.closeBinding();
              }
            } else {
              this.holdingEsc = 0;
              a = false;
              if (!Aa.instance.controllerMode) {
                if (h.keys.justPressed.get_ANY() || h.keys.justReleased.get_ANY()) {
                  var c = va.__cast(h.keys.firstJustPressed(), Ti);
                  var d = va.__cast(h.keys.firstJustReleased(), Ti);
                  if (c != -1 && c != 27 && c != 8) {
                    a = true;
                    this.curOption.keys.keyboard = Dg.toStringMap.h[c];
                  } else if (d != -1 && (d == 27 || d == 8)) {
                    a = true;
                    this.curOption.keys.keyboard = Dg.toStringMap.h[d];
                  }
                }
              } else if (h.gamepads.anyHasState(-2, 2) || h.gamepads.anyHasState(17, 2) || h.gamepads.anyHasState(18, 2) || h.gamepads.anyHasState(-2, -1)) {
                d = c = -1;
                if (h.gamepads.anyHasState(17, 2)) {
                  c = 17;
                } else if (h.gamepads.anyHasState(18, 2)) {
                  c = 18;
                } else {
                  b = 0;
                  for (var e = h.gamepads.get_numActiveGamepads(); b < e;) {
                    var f = b++;
                    f = h.gamepads._activeGamepads[f];
                    if (f != null && (c = f.firstJustPressedRawID(), c = c < 0 ? c : f.mapping.getID(c), d = f.firstJustReleasedRawID(), d = d < 0 ? d : f.mapping.getID(d), c != -1 || d != -1)) {
                      break;
                    }
                  }
                }
                if (c != -1 && c != 6 && c != 1) {
                  a = true;
                  this.curOption.keys.gamepad = eg.toStringMap.h[c];
                } else if (d != -1 && (d == 6 || d == 1)) {
                  a = true;
                  this.curOption.keys.gamepad = eg.toStringMap.h[d];
                }
              }
              if (a) {
                if (Aa.instance.controllerMode) {
                  if (this.curOption.keys.gamepad == null) {
                    this.curOption.keys.gamepad = "NONE";
                  }
                  this.curOption.setValue(this.curOption.keys.gamepad);
                  a = this.curOption.keys.gamepad;
                  a = a.toUpperCase();
                  a = Sd.getGamepadName(Object.prototype.hasOwnProperty.call(eg.fromStringMap.h, a) ? eg.fromStringMap.h[a] : -1);
                } else {
                  if (this.curOption.keys.keyboard == null) {
                    this.curOption.keys.keyboard = "NONE";
                  }
                  this.curOption.setValue(this.curOption.keys.keyboard);
                  a = this.curOption.keys.keyboard;
                  a = a.toUpperCase();
                  a = Sd.getKeyName(Object.prototype.hasOwnProperty.call(Dg.fromStringMap.h, a) ? Dg.fromStringMap.h[a] : -1);
                }
                this.updateBind(a);
                h.sound.play(D.sound("confirmMenu"));
                this.closeBinding();
              }
            }
          }
        },
        updateBind: function (a, b) {
          if (b == null) {
            b = this.curOption;
          }
          if (a == null) {
            a = b.getValue();
            if (a == null) {
              a = "NONE";
            }
            if (Aa.instance.controllerMode) {
              var c = a.toUpperCase();
              a = Sd.getGamepadName(Object.prototype.hasOwnProperty.call(eg.fromStringMap.h, c) ? eg.fromStringMap.h[c] : -1);
            } else {
              c = a.toUpperCase();
              a = Sd.getKeyName(Object.prototype.hasOwnProperty.call(Dg.fromStringMap.h, c) ? Dg.fromStringMap.h[c] : -1);
            }
          }
          c = b.child;
          a = new wi(a, c.offsetX);
          a.sprTracker = c.sprTracker;
          a.copyAlpha = true;
          a.ID = c.ID;
          this.playstationCheck(a);
          a.set_scaleX(Math.min(1, this.MAX_KEYBIND_WIDTH / a.get_width()));
          a.set_x(c.x);
          a.set_y(c.y);
          b.child = a;
          this.grpTexts.insert(this.grpTexts.members.indexOf(c), a);
          this.grpTexts.remove(c);
          c.destroy();
        },
        playstationCheck: function (a) {
          if (Aa.instance.controllerMode) {
            var b = h.gamepads.firstActive;
            var c = a.letters[0];
            if ((b != null ? b.detectedModel : rc.UNKNOWN) == rc.PS4) {
              switch (a.text) {
                case "[":
                case "]":
                  c.set_image("alphabet_playstation");
                  c.updateHitbox();
                  c.offset.set_x(c.offset.x + 4);
                  c.offset.set_y(c.offset.y - 5);
              }
            }
          }
        },
        closeBinding: function () {
          this.bindingKey = false;
          this.bindingBlack.destroy();
          this.remove(this.bindingBlack);
          this.bindingText.destroy();
          this.remove(this.bindingText);
          this.bindingText2.destroy();
          this.remove(this.bindingText2);
          y.toggleVolumeKeys(true);
        },
        updateTextFrom: function (a) {
          if (a.get_type() == "keybind") {
            this.updateBind(null, a);
          } else {
            var b = a.displayFormat;
            var c = a.getValue();
            if (a.get_type() == "percent") {
              c *= 100;
            }
            var d = a.defaultValue;
            a.set_text(w.replace(w.replace(b, "%v", c), "%d", d));
          }
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.optionsArray.length - 1;
          } else if (this.curSelected >= this.optionsArray.length) {
            this.curSelected = 0;
          }
          this.descText.set_text(this.optionsArray[this.curSelected].description);
          a = this.descText;
          var b = 16;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((h.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((h.height - a.get_height()) / 2);
          }
          a = this.descText;
          a.set_y(a.y + 270);
          b = a = 0;
          for (var c = this.grpOptions.members; b < c.length;) {
            var d = c[b];
            ++b;
            d.targetY = a - this.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
            }
          }
          for (a = new tc(this.grpTexts.members, null); a.hasNext();) {
            b = a.next();
            b.set_alpha(0.6);
            if (b.ID == this.curSelected) {
              b.set_alpha(1);
            }
          }
          this.descBox.setPosition(this.descText.x - 10, this.descText.y - 10);
          this.descBox.setGraphicSize(this.descText.get_width() + 20 | 0, this.descText.get_height() + 25 | 0);
          this.descBox.updateHitbox();
          this.curOption = this.optionsArray[this.curSelected];
          h.sound.play(D.sound("scrollMenu"));
        },
        reloadCheckboxes: function () {
          for (var a = new tc(this.checkboxGroup.members, null); a.hasNext();) {
            var b = a.next();
            b.set_daValue(v.string(this.optionsArray[b.ID].getValue()) == "true");
          }
        },
        __class__: te
      });
      function ch() {
        this.timeForMoving = 0.1;
        this.holdingEsc = 0;
        this.binding = false;
        this.lastID = 0;
        this.onKeyboardMode = true;
        this.keyboardColor = -9334019;
        this.gamepadColor = -167532;
        this.options = [[true, "NOTES"], [true, "Left", "note_left", "Note Left"], [true, "Down", "note_down", "Note Down"], [true, "Up", "note_up", "Note Up"], [true, "Right", "note_right", "Note Right"], [true], [true, "UI"], [true, "Left", "ui_left", "UI Left"], [true, "Down", "ui_down", "UI Down"], [true, "Up", "ui_up", "UI Up"], [true, "Right", "ui_right", "UI Right"], [true], [true, "Reset", "reset", "Reset"], [true, "Accept", "accept", "Accept"], [true, "Back", "back", "Back"], [true, "Pause", "pause", "Pause"], [false], [false, "VOLUME"], [false, "Mute", "volume_mute", "Volume Mute"], [false, "Up", "volume_up", "Volume Up"], [false, "Down", "volume_down", "Volume Down"], [false], [false, "DEBUG"], [false, "Key 1", "debug_1", "Debug Key #1"], [false, "Key 2", "debug_2", "Debug Key #2"]];
        this.curAlt = false;
        this.curSelected = 0;
        db.call(this);
        this.options.push([true]);
        this.options.push([true]);
        this.options.push([true, ch.defaultKey]);
        this.bg = new F().loadGraphic(D.image("menuDesat"));
        this.bg.set_color(this.keyboardColor);
        this.bg.set_antialiasing(y.data.antialiasing);
        var a = this.bg;
        a.set_x((h.width - a.get_width()) / 2);
        a.set_y((h.height - a.get_height()) / 2);
        this.add(this.bg);
        a = new $i(oh.createGrid(80, 80, 160, 160, true, 872415231, 0));
        var b = a.velocity;
        var c = 40;
        var d = 40;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        b.set_x(c);
        b.set_y(d);
        a.set_alpha(0);
        Da.tween(a, {
          alpha: 1
        }, 0.5, {
          ease: Xa.quadOut
        });
        this.add(a);
        this.grpDisplay = new Qa();
        this.add(this.grpDisplay);
        this.grpOptions = new Qa();
        this.add(this.grpOptions);
        this.grpBlacks = new Qa();
        this.add(this.grpBlacks);
        this.selectSpr = new Yg();
        this.selectSpr.makeGraphic(250, 78, -1);
        this.selectSpr.copyAlpha = false;
        this.selectSpr.set_alpha(0.75);
        this.add(this.selectSpr);
        this.grpBinds = new Qa();
        this.add(this.grpBinds);
        this.controllerSpr = new F(50, 40).loadGraphic(D.image("controllertype"), true, 82, 60);
        this.controllerSpr.set_antialiasing(y.data.antialiasing);
        this.controllerSpr.animation.add("keyboard", [0], 1, false);
        this.controllerSpr.animation.add("gamepad", [1], 1, false);
        this.add(this.controllerSpr);
        a = new Gb(60, 90, "CTRL", false);
        a.set_alignment(Jf.CENTERED);
        a.setScale(0.4);
        this.add(a);
        this.createTexts();
      }
      g["options.ControlsSubState"] = ch;
      ch.__name__ = "options.ControlsSubState";
      ch.__super__ = db;
      ch.prototype = q(db.prototype, {
        createTexts: function () {
          this.curOptions = [];
          this.curOptionsValid = [];
          this.grpDisplay.forEachAlive(function (a) {
            a.destroy();
          });
          this.grpBlacks.forEachAlive(function (a) {
            a.destroy();
          });
          this.grpOptions.forEachAlive(function (a) {
            a.destroy();
          });
          this.grpBinds.forEachAlive(function (a) {
            a.destroy();
          });
          this.grpDisplay.clear();
          this.grpBlacks.clear();
          this.grpOptions.clear();
          this.grpBinds.clear();
          for (var a = 0, b = 0, c = this.options.length; b < c;) {
            var d = b++;
            var e = this.options[d];
            if (e[0] || this.onKeyboardMode) {
              if (e.length > 1) {
                var f = e.length < 3;
                var k = e[1] == ch.defaultKey;
                k = f && !k;
                var g = new Gb(200, 300, e[1], !k);
                g.isMenuItem = true;
                g.changeX = false;
                g.distancePerItem.set_y(60);
                g.targetY = a;
                if (k) {
                  this.grpDisplay.add(g);
                } else {
                  this.grpOptions.add(g);
                  this.curOptions.push(d);
                  this.curOptionsValid.push(a);
                }
                this.lastID = g.ID = a;
                if (f) {
                  this.addCenteredText(g, e, a);
                } else {
                  this.addKeyText(g, e, a);
                }
                g.snapToPosition();
                g.set_y(g.y + h.height * 2);
              }
              ++a;
            }
          }
          this.updateText();
        },
        addCenteredText: function (a, b, c) {
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((h.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((h.height - a.get_height()) / 2);
          }
          a.set_y(a.y - 55);
          a.startPosition.set_y(a.startPosition.y - 55);
        },
        addKeyText: function (a, b, c) {
          for (c = 0; c < 2;) {
            var d = c++;
            var e = 350 + d * 300;
            if (this.onKeyboardMode) {
              var f = y.keyBinds.h[b[2]];
              d = Sd.getKeyName(f[d] ?? -1);
            } else {
              f = y.gamepadBinds.h[b[2]];
              d = Sd.getGamepadName(f[d] ?? -1);
            }
            d = new Gb(e + 210, 248, d, false);
            d.isMenuItem = true;
            d.changeX = false;
            d.distancePerItem.set_y(60);
            d.targetY = a.targetY;
            d.ID = Math.floor(this.grpBinds.length / 2);
            d.snapToPosition();
            d.set_y(d.y + h.height * 2);
            this.grpBinds.add(d);
            this.playstationCheck(d);
            d.set_scaleX(Math.min(1, 230 / d.get_width()));
            d = new Yg();
            d.makeGraphic(250, 78, -16777216);
            d.alphaMult = 0.4;
            d.sprTracker = a;
            d.yAdd = -6;
            d.xAdd = e;
            this.grpBlacks.add(d);
          }
        },
        playstationCheck: function (a) {
          if (!this.onKeyboardMode) {
            var b = h.gamepads.firstActive;
            var c = a.letters[0];
            if ((b != null ? b.detectedModel : rc.UNKNOWN) == rc.PS4) {
              switch (a.text) {
                case "[":
                case "]":
                  c.set_image("alphabet_playstation");
                  c.updateHitbox();
                  c.offset.set_x(c.offset.x + 4);
                  c.offset.set_y(c.offset.y - 5);
              }
            }
          }
        },
        updateBind: function (a, b) {
          var c = this.grpBinds.members[a];
          b = new Gb(350 + a % 2 * 300, 248, b, false);
          b.isMenuItem = true;
          b.changeX = false;
          b.distancePerItem.set_y(60);
          b.targetY = c.targetY;
          b.ID = c.ID;
          b.set_x(c.x);
          b.set_y(c.y);
          this.playstationCheck(b);
          b.set_scaleX(Math.min(1, 230 / b.get_width()));
          c.kill();
          this.grpBinds.remove(c);
          this.grpBinds.insert(a, b);
          c.destroy();
        },
        update: function (a) {
          if (this.timeForMoving > 0) {
            this.timeForMoving = Math.max(0, this.timeForMoving - a);
          } else if (this.binding) {
            var b = this.curAlt ? 1 : 0;
            var c = this.options[this.curOptions[this.curSelected]];
            p = h.keys.pressed;
            if (p.keyManager.checkStatusUnsafe(27, p.status) || h.gamepads.anyHasState(1, 1)) {
              this.holdingEsc += a;
              if (this.holdingEsc > 0.5) {
                h.sound.play(D.sound("cancelMenu"));
                this.closeBinding();
              }
            } else {
              p = h.keys.pressed;
              if (p.keyManager.checkStatusUnsafe(8, p.status) || h.gamepads.anyHasState(6, 1)) {
                this.holdingEsc += a;
                if (this.holdingEsc > 0.5) {
                  y.keyBinds.h[c[2]][b] = -1;
                  y.clearInvalidKeys(c[2]);
                  this.updateBind(Math.floor(this.curSelected * 2) + b, this.onKeyboardMode ? Sd.getKeyName(-1) : Sd.getGamepadName(-1));
                  h.sound.play(D.sound("cancelMenu"));
                  this.closeBinding();
                }
              } else {
                this.holdingEsc = 0;
                p = false;
                var d = y.keyBinds.h[c[2]];
                c = y.gamepadBinds.h[c[2]];
                if (this.onKeyboardMode) {
                  if (h.keys.justPressed.get_ANY() || h.keys.justReleased.get_ANY()) {
                    var e = h.keys.firstJustPressed();
                    var f = h.keys.firstJustReleased();
                    if (e > -1 && e != 27 && e != 8) {
                      d[b] = e;
                      p = true;
                    } else if (f > -1 && (f == 27 || f == 8)) {
                      d[b] = f;
                      p = true;
                    }
                  }
                } else if (h.gamepads.anyHasState(-2, 2) || h.gamepads.anyHasState(17, 2) || h.gamepads.anyHasState(18, 2) || h.gamepads.anyHasState(-2, -1)) {
                  f = e = -1;
                  if (h.gamepads.anyHasState(17, 2)) {
                    e = 17;
                  } else if (h.gamepads.anyHasState(18, 2)) {
                    e = 18;
                  } else {
                    for (var k = 0, g = h.gamepads.get_numActiveGamepads(); k < g;) {
                      var n = k++;
                      n = h.gamepads._activeGamepads[n];
                      if (n != null && (e = n.firstJustPressedRawID(), e = e < 0 ? e : n.mapping.getID(e), f = n.firstJustReleasedRawID(), f = f < 0 ? f : n.mapping.getID(f), e == null && (e = -1), f == null && (f = -1), e != -1 || f != -1)) {
                        break;
                      }
                    }
                  }
                  if (e != -1 && e != 6 && e != 1) {
                    c[b] = e;
                    p = true;
                  } else if (f != -1 && (f == 6 || f == 1)) {
                    c[b] = f;
                    p = true;
                  }
                }
                if (p) {
                  if (this.onKeyboardMode) {
                    if (d[b] == d[1 - b]) {
                      d[1 - b] = -1;
                    }
                  } else if (c[b] == c[1 - b]) {
                    c[1 - b] = -1;
                  }
                  b = this.options[this.curOptions[this.curSelected]][2];
                  y.clearInvalidKeys(b);
                  if (this.onKeyboardMode) {
                    p = y.keyBinds.h[b];
                    p = Sd.getKeyName(p[0] ?? -1);
                  } else {
                    p = y.gamepadBinds.h[b];
                    p = Sd.getGamepadName(p[0] ?? -1);
                  }
                  this.updateBind(Math.floor(this.curSelected * 2), p);
                  if (this.onKeyboardMode) {
                    p = y.keyBinds.h[b];
                    p = Sd.getKeyName(p[1] ?? -1);
                  } else {
                    p = y.gamepadBinds.h[b];
                    p = Sd.getGamepadName(p[1] ?? -1);
                  }
                  this.updateBind(Math.floor(this.curSelected * 2) + 1, p);
                  h.sound.play(D.sound("confirmMenu"));
                  this.closeBinding();
                }
              }
            }
          } else {
            var p = h.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(27, p.status) || h.gamepads.anyHasState(1, 2)) {
              this.close();
              return;
            }
            p = h.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(17, p.status) || h.gamepads.anyHasState(4, 2) || h.gamepads.anyHasState(5, 2)) {
              this.swapMode();
            }
            p = h.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(37, p.status)) {
              b = true;
            } else {
              p = h.keys.justPressed;
              b = p.keyManager.checkStatusUnsafe(39, p.status);
            }
            if (b || h.gamepads.anyHasState(13, 2) || h.gamepads.anyHasState(14, 2) || h.gamepads.anyHasState(37, 2) || h.gamepads.anyHasState(35, 2)) {
              this.updateAlt(true);
            }
            p = h.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(38, p.status) || h.gamepads.anyHasState(11, 2) || h.gamepads.anyHasState(34, 2)) {
              this.updateText(-1);
            } else {
              p = h.keys.justPressed;
              if (p.keyManager.checkStatusUnsafe(40, p.status) || h.gamepads.anyHasState(12, 2) || h.gamepads.anyHasState(36, 2)) {
                this.updateText(1);
              }
            }
            p = h.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(13, p.status) || h.gamepads.anyHasState(7, 2) || h.gamepads.anyHasState(0, 2)) {
              if (this.options[this.curOptions[this.curSelected]][1] != ch.defaultKey) {
                this.bindingBlack = new F().makeGraphic(1, 1, -1);
                b = this.bindingBlack.scale;
                p = h.width;
                d = h.height;
                if (d == null) {
                  d = 0;
                }
                if (p == null) {
                  p = 0;
                }
                b.set_x(p);
                b.set_y(d);
                this.bindingBlack.updateHitbox();
                this.bindingBlack.set_alpha(0);
                Da.tween(this.bindingBlack, {
                  alpha: 0.6
                }, 0.35, {
                  ease: Xa.linear
                });
                this.add(this.bindingBlack);
                this.bindingText = new Gb(h.width / 2, 160, "Rebinding " + this.options[this.curOptions[this.curSelected]][3], false);
                this.bindingText.set_alignment(Jf.CENTERED);
                this.add(this.bindingText);
                this.bindingText2 = new Gb(h.width / 2, 340, "Hold ESC to Cancel\nHold Backspace to Delete", true);
                this.bindingText2.set_alignment(Jf.CENTERED);
                this.add(this.bindingText2);
                this.binding = true;
                this.holdingEsc = 0;
                y.toggleVolumeKeys(false);
                h.sound.play(D.sound("scrollMenu"));
              } else {
                y.resetKeys(!this.onKeyboardMode);
                y.reloadVolumeKeys();
                b = this.curSelected;
                this.createTexts();
                this.curSelected = b;
                this.updateText();
                h.sound.play(D.sound("cancelMenu"));
              }
            }
          }
          db.prototype.update.call(this, a);
        },
        closeBinding: function () {
          this.binding = false;
          this.bindingBlack.destroy();
          this.remove(this.bindingBlack);
          this.bindingText.destroy();
          this.remove(this.bindingText);
          this.bindingText2.destroy();
          this.remove(this.bindingText2);
          y.reloadVolumeKeys();
        },
        updateText: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = this;
          if (a != 0) {
            this.curSelected += a;
            if (this.curSelected < 0) {
              this.curSelected = this.curOptions.length - 1;
            } else if (this.curSelected >= this.curOptions.length) {
              this.curSelected = 0;
            }
          }
          var c = this.curOptionsValid[this.curSelected];
          var d = 0;
          if (c < 3) {
            d = 3 - c;
          } else if (c > this.lastID - 4) {
            d = this.lastID - 4 - c;
          }
          this.grpDisplay.forEachAlive(function (a) {
            a.targetY = a.ID - c - d;
          });
          this.grpOptions.forEachAlive(function (a) {
            a.targetY = a.ID - c - d;
            a.set_alpha(a.ID - c == 0 ? 1 : 0.6);
          });
          this.grpBinds.forEachAlive(function (a) {
            var c = b.grpOptions.members[a.ID];
            a.targetY = c.targetY;
            a.set_alpha(c.alpha);
          });
          this.updateAlt();
          h.sound.play(D.sound("scrollMenu"));
        },
        swapMode: function () {
          if (this.colorTween != null) {
            this.colorTween.destroy();
          }
          this.colorTween = Da.color(this.bg, 0.5, this.bg.color, this.onKeyboardMode ? this.gamepadColor : this.keyboardColor, {
            ease: Xa.linear
          });
          this.onKeyboardMode = !this.onKeyboardMode;
          this.curSelected = 0;
          this.curAlt = false;
          this.controllerSpr.animation.play(this.onKeyboardMode ? "keyboard" : "gamepad");
          this.createTexts();
        },
        updateAlt: function (a) {
          if (a == null) {
            a = false;
          }
          if (a) {
            this.curAlt = !this.curAlt;
            h.sound.play(D.sound("scrollMenu"));
          }
          this.selectSpr.sprTracker = this.grpBlacks.members[Math.floor(this.curSelected * 2) + (this.curAlt ? 1 : 0)];
          this.selectSpr.set_visible(this.selectSpr.sprTracker != null);
        },
        __class__: ch
      });
      function Vm() {
        this.title = "Gameplay Settings";
        this.rpcTitle = "Gameplay Settings Menu";
        var a = new pc("Downscroll", "If checked, notes go Down instead of Up, simple enough.", "downScroll", "bool");
        this.addOption(a);
        a = new pc("Middlescroll", "If checked, your notes get centered.", "middleScroll", "bool");
        this.addOption(a);
        a = new pc("Opponent Notes", "If unchecked, opponent notes get hidden.", "opponentStrums", "bool");
        this.addOption(a);
        a = new pc("Ghost Tapping", "If checked, you won't get misses from pressing keys\nwhile there are no notes able to be hit.", "ghostTapping", "bool");
        this.addOption(a);
        a = new pc("Auto Pause", "If checked, the game automatically pauses if the screen isn't on focus.", "autoPause", "bool");
        this.addOption(a);
        a.onChange = m(this, this.onChangeAutoPause);
        a = new pc("Disable Reset Button", "If checked, pressing Reset won't do anything.", "noReset", "bool");
        this.addOption(a);
        a = new pc("Hitsound Volume", "Funny notes does \"Tick!\" when you hit them.", "hitsoundVolume", "percent");
        this.addOption(a);
        a.scrollSpeed = 1.6;
        a.minValue = 0;
        a.maxValue = 1;
        a.changeValue = 0.1;
        a.decimals = 1;
        a.onChange = m(this, this.onChangeHitsoundVolume);
        a = new pc("Rating Offset", "Changes how late/early you have to hit for a \"Sick!\"\nHigher values mean you have to hit later.", "ratingOffset", "int");
        a.displayFormat = "%vms";
        a.scrollSpeed = 20;
        a.minValue = -30;
        a.maxValue = 30;
        this.addOption(a);
        a = new pc("Sick! Hit Window", "Changes the amount of time you have\nfor hitting a \"Sick!\" in milliseconds.", "sickWindow", "int");
        a.displayFormat = "%vms";
        a.scrollSpeed = 15;
        a.minValue = 15;
        a.maxValue = 45;
        this.addOption(a);
        a = new pc("Good Hit Window", "Changes the amount of time you have\nfor hitting a \"Good\" in milliseconds.", "goodWindow", "int");
        a.displayFormat = "%vms";
        a.scrollSpeed = 30;
        a.minValue = 15;
        a.maxValue = 90;
        this.addOption(a);
        a = new pc("Bad Hit Window", "Changes the amount of time you have\nfor hitting a \"Bad\" in milliseconds.", "badWindow", "int");
        a.displayFormat = "%vms";
        a.scrollSpeed = 60;
        a.minValue = 15;
        a.maxValue = 135;
        this.addOption(a);
        a = new pc("Safe Frames", "Changes how many frames you have for\nhitting a note earlier or late.", "safeFrames", "float");
        a.scrollSpeed = 5;
        a.minValue = 2;
        a.maxValue = 10;
        a.changeValue = 0.1;
        this.addOption(a);
        a = new pc("Sustains as One Note", "If checked, Hold Notes can't be pressed if you miss,\nand count as a single Hit/Miss.\nUncheck this if you prefer the old Input System.", "guitarHeroSustains", "bool");
        this.addOption(a);
        te.call(this);
      }
      g["options.GameplaySettingsSubState"] = Vm;
      Vm.__name__ = "options.GameplaySettingsSubState";
      Vm.__super__ = te;
      Vm.prototype = q(te.prototype, {
        onChangeHitsoundVolume: function () {
          h.sound.play(D.sound("hitsound"), y.data.hitsoundVolume);
        },
        onChangeAutoPause: function () {
          h.autoPause = y.data.autoPause;
        },
        __class__: Vm
      });
      function Wm() {
        this.boyfriend = null;
        var a = this;
        this.title = "Graphics";
        this.rpcTitle = "Graphics Settings Menu";
        this.boyfriend = new id(840, 170, "bf", true);
        this.boyfriend.setGraphicSize(this.boyfriend.get_width() * 0.75 | 0);
        this.boyfriend.updateHitbox();
        this.boyfriend.dance();
        this.boyfriend.animation.finishCallback = function (b) {
          a.boyfriend.dance();
        };
        this.boyfriend.set_visible(false);
        var b = new pc("Low Quality", "If checked, disables some background details,\ndecreases loading times and improves performance.", "lowQuality", "bool");
        this.addOption(b);
        b = new pc("Anti-Aliasing", "If unchecked, disables anti-aliasing, increases performance\nat the cost of sharper visuals.", "antialiasing", "bool");
        b.onChange = m(this, this.onChangeAntiAliasing);
        this.addOption(b);
        this.antialiasingOption = this.optionsArray.length - 1;
        b = new pc("Shaders", "If unchecked, disables shaders.\nIt's used for some visual effects, and also CPU intensive for weaker PCs.", "shaders", "bool");
        this.addOption(b);
        b = new pc("GPU Caching", "If checked, allows the GPU to be used for caching textures, decreasing RAM usage.\nDon't turn this on if you have a shitty Graphics Card.", "cacheOnGPU", "bool");
        this.addOption(b);
        te.call(this);
        this.insert(1, this.boyfriend);
      }
      g["options.GraphicsSettingsSubState"] = Wm;
      Wm.__name__ = "options.GraphicsSettingsSubState";
      Wm.__super__ = te;
      Wm.prototype = q(te.prototype, {
        onChangeAntiAliasing: function () {
          for (var a = 0, b = this.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c instanceof F && !(c instanceof U)) {
              c.set_antialiasing(y.data.antialiasing);
            }
          }
        },
        onChangeFramerate: function () {
          if (y.data.framerate > h.drawFramerate) {
            h.set_updateFramerate(y.data.framerate);
            h.set_drawFramerate(y.data.framerate);
          } else {
            h.set_drawFramerate(y.data.framerate);
            h.set_updateFramerate(y.data.framerate);
          }
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          te.prototype.changeSelection.call(this, a);
          this.boyfriend.set_visible(this.antialiasingOption == this.curSelected);
        },
        __class__: Wm
      });
      function Xm(a, b) {
        this.lastBeatHit = -1;
        var c = 0;
        var d = 0;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        d = W.pool.get().set(c, d);
        d._inPool = false;
        this.startComboOffset = d;
        d = c = 0;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        d = W.pool.get().set(c, d);
        d._inPool = false;
        this.startMousePos = d;
        this.holdingObjectType = null;
        this.onComboMenu = true;
        this.holdTime = 0;
        this._lastControllerMode = false;
        this.delayMax = 500;
        this.delayMin = -500;
        this.barPercent = 0;
        this.stageDirectory = "week1";
        P.call(this, a, b);
      }
      g["options.NoteOffsetState"] = Xm;
      Xm.__name__ = "options.NoteOffsetState";
      Xm.__super__ = P;
      Xm.prototype = q(P.prototype, {
        create: function () {
          var a = this;
          this.camGame = this.initPsychCamera();
          this.camHUD = new Tb();
          this.camHUD.bgColor &= 16777215;
          this.camHUD.bgColor |= 0;
          h.cameras.add(this.camHUD, false);
          this.camOther = new Tb();
          this.camOther.bgColor &= 16777215;
          this.camOther.bgColor |= 0;
          h.cameras.add(this.camOther, false);
          var b = h.camera.scroll;
          var c = 120;
          var d = 130;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          this.persistentUpdate = true;
          h.sound.pause();
          D.setCurrentLevel(this.stageDirectory);
          new bk();
          b = this.gf = new id(400, 130, "gf");
          b.set_x(b.x + this.gf.positionArray[0]);
          b = this.gf;
          b.set_y(b.y + this.gf.positionArray[1]);
          b = this.gf.scrollFactor;
          d = c = 0.95;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.boyfriend = new id(770, 100, "bf", true);
          b.set_x(b.x + this.boyfriend.positionArray[0]);
          b = this.boyfriend;
          b.set_y(b.y + this.boyfriend.positionArray[1]);
          this.add(this.gf);
          this.add(this.boyfriend);
          b = this.coolText = new U(0, 0, 0, "", 32);
          b.set_x((h.width - b.get_width()) / 2);
          b.set_y((h.height - b.get_height()) / 2);
          this.coolText.set_x(h.width * 0.35);
          this.rating = new F().loadGraphic(D.image("sick"));
          this.rating.set_cameras([this.camHUD]);
          this.rating.set_antialiasing(y.data.antialiasing);
          this.rating.setGraphicSize(this.rating.get_width() * 0.7 | 0);
          this.rating.updateHitbox();
          this.add(this.rating);
          this.comboNums = new La();
          this.comboNums.set_cameras([this.camHUD]);
          this.add(this.comboNums);
          b = [];
          b.push(h.random.int(0, 9));
          b.push(h.random.int(0, 9));
          b.push(h.random.int(0, 9));
          for (d = c = 0; d < b.length;) {
            var e = b[d];
            ++d;
            e = new F(c * 43).loadGraphic(D.image("num" + e));
            e.set_cameras([this.camHUD]);
            e.set_antialiasing(y.data.antialiasing);
            e.setGraphicSize(e.get_width() * 0.5 | 0);
            e.updateHitbox();
            this.comboNums.add(e);
            ++c;
          }
          this.dumbTexts = new Qa();
          this.dumbTexts.set_cameras([this.camHUD]);
          this.add(this.dumbTexts);
          this.createTexts();
          this.repositionCombo();
          this.beatText = new Gb(0, 0, "Beat Hit!", true);
          this.beatText.setScale(0.6, 0.6);
          b = this.beatText;
          b.set_x(b.x + 260);
          this.beatText.set_alpha(0);
          this.beatText.acceleration.set_y(250);
          this.beatText.set_visible(false);
          this.add(this.beatText);
          this.timeTxt = new U(0, 600, h.width, "", 32);
          this.timeTxt.setFormat("assets/fonts/vcr.ttf", 32, -1, "center", Sa.OUTLINE, -16777216);
          b = this.timeTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.timeTxt.set_borderSize(2);
          this.timeTxt.set_visible(false);
          this.timeTxt.set_cameras([this.camHUD]);
          this.barPercent = y.data.noteOffset;
          this.updateNoteDelay();
          this.timeBar = new Bh(0, this.timeTxt.y + this.timeTxt.get_height() / 3, "healthBar", function () {
            return a.barPercent;
          }, this.delayMin, this.delayMax);
          b = this.timeBar.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          b = this.timeBar;
          c = 1;
          if (c == null) {
            c = 17;
          }
          if (c == 1 || c == 17) {
            b.set_x((h.width - b.get_width()) / 2);
          }
          if (c == 16 || c == 17) {
            b.set_y((h.height - b.get_height()) / 2);
          }
          this.timeBar.set_visible(false);
          this.timeBar.set_cameras([this.camHUD]);
          this.timeBar.leftBar.set_color(-16711936);
          this.add(this.timeBar);
          this.add(this.timeTxt);
          c = new F().makeGraphic(h.width, 40, -16777216);
          b = c.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          c.set_alpha(0.6);
          c.set_cameras([this.camHUD]);
          this.add(c);
          this.changeModeText = new U(0, 4, h.width, "", 32);
          this.changeModeText.setFormat("assets/fonts/vcr.ttf", 32, -1, "center");
          b = this.changeModeText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.changeModeText.set_cameras([this.camHUD]);
          this.add(this.changeModeText);
          this.controllerPointer = new Wh(0, 0, 20, {
            thickness: 0
          }, -1);
          b = this.controllerPointer.offset;
          d = c = 20;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.controllerPointer;
          b.set_x((h.width - b.get_width()) / 2);
          b.set_y((h.height - b.get_height()) / 2);
          this.controllerPointer.set_alpha(0.6);
          this.controllerPointer.set_cameras([this.camHUD]);
          this.add(this.controllerPointer);
          this.updateMode();
          this._lastControllerMode = true;
          O.set_bpm(128);
          b = h.sound;
          c = D.returnSound("music", "offsetSong", null);
          b.playMusic(c, 1, true);
          P.prototype.create.call(this);
        },
        update: function (a) {
          var b = 1;
          var c = h.keys.pressed;
          if (c.keyManager.checkStatusUnsafe(16, c.status) || h.gamepads.anyHasState(4, 1)) {
            b = this.onComboMenu ? 10 : 3;
          }
          if (h.gamepads.anyHasState(-2, 2)) {
            this.get_controls().controllerMode = true;
          } else if (h.mouse._leftButton.current == 2) {
            this.get_controls().controllerMode = false;
          }
          if (this.get_controls().controllerMode != this._lastControllerMode) {
            h.mouse.set_visible(!this.get_controls().controllerMode);
            this.controllerPointer.set_visible(this.get_controls().controllerMode);
            if (this.get_controls().controllerMode) {
              c = h.mouse.getScreenPosition(this.camHUD);
              this.controllerPointer.set_x(c.x);
              this.controllerPointer.set_y(c.y);
            }
            this.updateMode();
            this._lastControllerMode = this.get_controls().controllerMode;
          }
          if (this.onComboMenu) {
            if (h.keys.justPressed.get_ANY() || h.gamepads.anyHasState(-2, 2)) {
              if (this.get_controls().controllerMode) {
                var d = [h.gamepads.anyHasState(13, 2), h.gamepads.anyHasState(14, 2), h.gamepads.anyHasState(11, 2), h.gamepads.anyHasState(12, 2), h.gamepads.anyHasState(41, 2), h.gamepads.anyHasState(39, 2), h.gamepads.anyHasState(38, 2), h.gamepads.anyHasState(40, 2)];
              } else {
                c = h.keys.justPressed;
                var e = c.keyManager.checkStatusUnsafe(37, c.status);
                c = h.keys.justPressed;
                d = c.keyManager.checkStatusUnsafe(39, c.status);
                c = h.keys.justPressed;
                var f = c.keyManager.checkStatusUnsafe(38, c.status);
                c = h.keys.justPressed;
                var k = c.keyManager.checkStatusUnsafe(40, c.status);
                c = h.keys.justPressed;
                var g = c.keyManager.checkStatusUnsafe(65, c.status);
                c = h.keys.justPressed;
                var n = c.keyManager.checkStatusUnsafe(68, c.status);
                c = h.keys.justPressed;
                var p = c.keyManager.checkStatusUnsafe(87, c.status);
                c = h.keys.justPressed;
                d = [e, d, f, k, g, n, p, c.keyManager.checkStatusUnsafe(83, c.status)];
              }
              if (d.indexOf(true) != -1) {
                c = 0;
                for (e = d.length; c < e;) {
                  f = c++;
                  if (d[f]) {
                    switch (f) {
                      case 0:
                        y.data.comboOffset[0] -= b;
                        break;
                      case 1:
                        y.data.comboOffset[0] += b;
                        break;
                      case 2:
                        y.data.comboOffset[1] += b;
                        break;
                      case 3:
                        y.data.comboOffset[1] -= b;
                        break;
                      case 4:
                        y.data.comboOffset[2] -= b;
                        break;
                      case 5:
                        y.data.comboOffset[2] += b;
                        break;
                      case 6:
                        y.data.comboOffset[3] += b;
                        break;
                      case 7:
                        y.data.comboOffset[3] -= b;
                    }
                  }
                }
                this.repositionCombo();
              }
            }
            f = b = 0;
            e = c = d = false;
            if (this.get_controls().controllerMode) {
              c = 0;
              for (e = h.gamepads.getActiveGamepads(); c < e.length && !(d = e[c], ++c, b = d.getAnalogXAxisValue(d.mapping.getAnalogStick(19)), f = d.getYAxisRaw(d.mapping.getAnalogStick(19)), d = b != 0 || f != 0););
              this.controllerPointer.set_x(Math.max(0, Math.min(h.width, this.controllerPointer.x + b * 1000 * a)));
              this.controllerPointer.set_y(Math.max(0, Math.min(h.height, this.controllerPointer.y + f * 1000 * a)));
              c = !h.gamepads.anyHasState(7, 2) && this.get_controls().get_ACCEPT();
              e = !h.gamepads.anyHasState(7, -1) && this.get_controls().justReleased("accept");
            }
            if (h.mouse._leftButton.current == 2 || c) {
              this.holdingObjectType = null;
              if (this.get_controls().controllerMode) {
                this.controllerPointer.getScreenPosition(this.startMousePos, this.camHUD);
              } else {
                h.mouse.getScreenPosition(this.camHUD, this.startMousePos);
              }
              if (this.startMousePos.x - this.comboNums.x >= 0 && this.startMousePos.x - this.comboNums.x <= this.comboNums.get_width() && this.startMousePos.y - this.comboNums.y >= 0 && this.startMousePos.y - this.comboNums.y <= this.comboNums.get_height()) {
                this.holdingObjectType = true;
                this.startComboOffset.set_x(y.data.comboOffset[2]);
                this.startComboOffset.set_y(y.data.comboOffset[3]);
              } else if (this.startMousePos.x - this.rating.x >= 0 && this.startMousePos.x - this.rating.x <= this.rating.get_width() && this.startMousePos.y - this.rating.y >= 0 && this.startMousePos.y - this.rating.y <= this.rating.get_height()) {
                this.holdingObjectType = false;
                this.startComboOffset.set_x(y.data.comboOffset[0]);
                this.startComboOffset.set_y(y.data.comboOffset[1]);
              }
            }
            if (h.mouse._leftButton.current == -1 || e) {
              this.holdingObjectType = null;
            }
            if (this.holdingObjectType != null && (c = h.mouse, c._prevX != c.x || c._prevY != c.y || d)) {
              c = this.get_controls().controllerMode ? this.controllerPointer.getScreenPosition(null, this.camHUD) : h.mouse.getScreenPosition(this.camHUD);
              b = this.holdingObjectType ? 2 : 0;
              y.data.comboOffset[b] = Math.round(c.x - this.startMousePos.x + this.startComboOffset.x);
              y.data.comboOffset[b + 1] = -Math.round(c.y - this.startMousePos.y - this.startComboOffset.y);
              this.repositionCombo();
            }
            if (this.get_controls().get_RESET()) {
              c = 0;
              for (e = y.data.comboOffset.length; c < e;) {
                f = c++;
                y.data.comboOffset[f] = 0;
              }
              this.repositionCombo();
            }
          } else {
            if (this.get_controls().get_UI_LEFT_P()) {
              this.barPercent = Math.max(this.delayMin, Math.min(y.data.noteOffset - 1, this.delayMax));
              this.updateNoteDelay();
            } else if (this.get_controls().get_UI_RIGHT_P()) {
              this.barPercent = Math.max(this.delayMin, Math.min(y.data.noteOffset + 1, this.delayMax));
              this.updateNoteDelay();
            }
            c = 1;
            if (this.get_controls().get_UI_LEFT() || this.get_controls().get_UI_RIGHT()) {
              this.holdTime += a;
              if (this.get_controls().get_UI_LEFT()) {
                c = -1;
              }
            }
            if (this.get_controls().get_UI_LEFT_R() || this.get_controls().get_UI_RIGHT_R()) {
              this.holdTime = 0;
            }
            if (this.holdTime > 0.5) {
              this.barPercent += b * 100 * a * c;
              this.barPercent = Math.max(this.delayMin, Math.min(this.barPercent, this.delayMax));
              this.updateNoteDelay();
            }
            if (this.get_controls().get_RESET()) {
              this.barPercent = this.holdTime = 0;
              this.updateNoteDelay();
            }
          }
          if (!this.get_controls().controllerMode && this.get_controls().get_ACCEPT() || this.get_controls().controllerMode && h.gamepads.anyHasState(7, 2)) {
            this.onComboMenu = !this.onComboMenu;
            this.updateMode();
          }
          if (this.get_controls().get_BACK()) {
            if (this.zoomTween != null) {
              this.zoomTween.cancel();
            }
            if (this.beatTween != null) {
              this.beatTween.cancel();
            }
            this.persistentUpdate = false;
            P.switchState(new jd());
            if (jd.onPlayState) {
              if (y.data.pauseMusic != "None") {
                b = h.sound;
                e = y.data.pauseMusic;
                d = new V("[~&\\\\;:<>#]", "");
                c = new V("[.,'\"%?!]", "");
                e = d.split(w.replace(e, " ", "-")).join("-");
                c = D.returnSound("music", c.split(e).join("").toLowerCase(), null);
                b.playMusic(c);
              } else {
                h.sound.music.set_volume(0);
              }
            } else {
              b = h.sound;
              c = D.returnSound("music", "freakyMenu", null);
              b.playMusic(c);
            }
            h.mouse.set_visible(false);
          }
          O.songPosition = h.sound.music._time;
          P.prototype.update.call(this, a);
        },
        beatHit: function () {
          var a = this;
          P.prototype.beatHit.call(this);
          if (this.lastBeatHit != this.curBeat) {
            if (this.curBeat % 2 == 0) {
              this.boyfriend.dance();
              this.gf.dance();
            }
            if (this.curBeat % 4 == 2) {
              h.camera.set_zoom(1.15);
              if (this.zoomTween != null) {
                this.zoomTween.cancel();
              }
              this.zoomTween = Da.tween(h.camera, {
                zoom: 1
              }, 1, {
                ease: Xa.circOut,
                onComplete: function (b) {
                  a.zoomTween = null;
                }
              });
              this.beatText.set_alpha(1);
              this.beatText.set_y(320);
              this.beatText.velocity.set_y(-150);
              if (this.beatTween != null) {
                this.beatTween.cancel();
              }
              this.beatTween = Da.tween(this.beatText, {
                alpha: 0
              }, 1, {
                ease: Xa.sineIn,
                onComplete: function (b) {
                  a.beatTween = null;
                }
              });
            }
            this.lastBeatHit = this.curBeat;
          }
        },
        repositionCombo: function () {
          var a = this.rating;
          a.set_x((h.width - a.get_width()) / 2);
          a.set_y((h.height - a.get_height()) / 2);
          this.rating.set_x(this.coolText.x - 40 + y.data.comboOffset[0]);
          a = this.rating;
          a.set_y(a.y - (60 + y.data.comboOffset[1]));
          a = this.comboNums;
          a.set_x((h.width - a.get_width()) / 2);
          a.set_y((h.height - a.get_height()) / 2);
          this.comboNums.set_x(this.coolText.x - 90 + y.data.comboOffset[2]);
          a = this.comboNums;
          a.set_y(a.y + (80 - y.data.comboOffset[3]));
          this.reloadTexts();
        },
        createTexts: function () {
          var a = new U(10, 48, 0, "", 24);
          a.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", Sa.OUTLINE, -16777216);
          var b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_borderSize(2);
          this.dumbTexts.add(a);
          a.set_cameras([this.camHUD]);
          a = new U(10, 78, 0, "", 24);
          a.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", Sa.OUTLINE, -16777216);
          b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_borderSize(2);
          this.dumbTexts.add(a);
          a.set_cameras([this.camHUD]);
          a = new U(10, 108, 0, "", 24);
          a.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", Sa.OUTLINE, -16777216);
          b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_borderSize(2);
          this.dumbTexts.add(a);
          a.set_cameras([this.camHUD]);
          a.set_y(a.y + 24);
          a = new U(10, 138, 0, "", 24);
          a.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", Sa.OUTLINE, -16777216);
          b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_borderSize(2);
          this.dumbTexts.add(a);
          a.set_cameras([this.camHUD]);
          a.set_y(a.y + 24);
        },
        reloadTexts: function () {
          for (var a = 0, b = this.dumbTexts.length; a < b;) {
            var c = a++;
            switch (c) {
              case 0:
                this.dumbTexts.members[c].set_text("Rating Offset:");
                break;
              case 1:
                this.dumbTexts.members[c].set_text("[" + y.data.comboOffset[0] + ", " + y.data.comboOffset[1] + "]");
                break;
              case 2:
                this.dumbTexts.members[c].set_text("Numbers Offset:");
                break;
              case 3:
                this.dumbTexts.members[c].set_text("[" + y.data.comboOffset[2] + ", " + y.data.comboOffset[3] + "]");
            }
          }
        },
        updateNoteDelay: function () {
          y.data.noteOffset = Math.round(this.barPercent);
          this.timeTxt.set_text("Current offset: " + Math.floor(this.barPercent) + " ms");
        },
        updateMode: function () {
          this.rating.set_visible(this.onComboMenu);
          this.comboNums.set_visible(this.onComboMenu);
          this.dumbTexts.set_visible(this.onComboMenu);
          this.timeBar.set_visible(!this.onComboMenu);
          this.timeTxt.set_visible(!this.onComboMenu);
          this.beatText.set_visible(!this.onComboMenu);
          this.controllerPointer.set_visible(false);
          h.mouse.set_visible(false);
          if (this.onComboMenu) {
            h.mouse.set_visible(!this.get_controls().controllerMode);
            this.controllerPointer.set_visible(this.get_controls().controllerMode);
          }
          var a = this.onComboMenu ? "Combo Offset" : "Note/Beat Delay";
          var b = this.get_controls().controllerMode ? "(Press Start to Switch)" : "(Press Accept to Switch)";
          this.changeModeText.set_text("< " + a.toUpperCase() + " " + b.toUpperCase() + " >");
        },
        __class__: Xm
      });
      function Ym() {
        var a = new wc();
        a.h[48] = "0";
        a.h[49] = "1";
        a.h[50] = "2";
        a.h[51] = "3";
        a.h[52] = "4";
        a.h[53] = "5";
        a.h[54] = "6";
        a.h[55] = "7";
        a.h[56] = "8";
        a.h[57] = "9";
        a.h[96] = "0";
        a.h[97] = "1";
        a.h[98] = "2";
        a.h[99] = "3";
        a.h[100] = "4";
        a.h[101] = "5";
        a.h[102] = "6";
        a.h[103] = "7";
        a.h[104] = "8";
        a.h[105] = "9";
        a.h[65] = "A";
        a.h[66] = "B";
        a.h[67] = "C";
        a.h[68] = "D";
        a.h[69] = "E";
        a.h[70] = "F";
        this.allowedTypeKeys = a;
        this._lastControllerMode = this.changingNote = false;
        this.hexTypeVisibleTimer = 0;
        this.hexTypeNum = -1;
        this.onPixel = false;
        this.curSelectedMode = this.curSelectedNote = 0;
        this.onModeColumn = true;
        db.call(this);
        a = new F().loadGraphic(D.image("menuDesat"));
        a.set_color(-1412611);
        a.set_x((h.width - a.get_width()) / 2);
        a.set_y((h.height - a.get_height()) / 2);
        a.set_antialiasing(y.data.antialiasing);
        this.add(a);
        a = new $i(oh.createGrid(80, 80, 160, 160, true, 872415231, 0));
        var b = a.velocity;
        var c = 40;
        var d = 40;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        b.set_x(c);
        b.set_y(d);
        a.set_alpha(0);
        Da.tween(a, {
          alpha: 1
        }, 0.5, {
          ease: Xa.quadOut
        });
        this.add(a);
        this.modeBG = new F(215, 85).makeGraphic(315, 115, -16777216);
        this.modeBG.set_visible(false);
        this.modeBG.set_alpha(0.4);
        this.add(this.modeBG);
        this.notesBG = new F(140, 190).makeGraphic(480, 125, -16777216);
        this.notesBG.set_visible(false);
        this.notesBG.set_alpha(0.4);
        this.add(this.notesBG);
        this.modeNotes = new Qa();
        this.add(this.modeNotes);
        this.myNotes = new Qa();
        this.add(this.myNotes);
        a = new F(720).makeGraphic(h.width - 720, h.height, -16777216);
        a.set_alpha(0.25);
        this.add(a);
        a = new F(750, 160).makeGraphic(h.width - 780, 540, -16777216);
        a.set_alpha(0.25);
        this.add(a);
        a = new Gb(50, 86, "CTRL", false);
        a.set_alignment(Jf.CENTERED);
        a.setScale(0.4);
        this.add(a);
        this.copyButton = new F(760, 50).loadGraphic(D.image("noteColorMenu/copy"));
        this.copyButton.set_alpha(0.6);
        this.add(this.copyButton);
        this.pasteButton = new F(1180, 50).loadGraphic(D.image("noteColorMenu/paste"));
        this.pasteButton.set_alpha(0.6);
        this.add(this.pasteButton);
        this.colorGradient = sd.createGradientFlxSprite(60, 360, [-1, -16777216]);
        this.colorGradient.setPosition(780, 200);
        this.add(this.colorGradient);
        this.colorGradientSelector = new F(770, 200).makeGraphic(80, 10, -1);
        this.colorGradientSelector.offset.set_y(5);
        this.add(this.colorGradientSelector);
        this.colorPalette = new F(820, 580).loadGraphic(D.image("noteColorMenu/palette", null, false));
        b = this.colorPalette.scale;
        d = c = 20;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        b.set_x(c);
        b.set_y(d);
        this.colorPalette.updateHitbox();
        this.colorPalette.set_antialiasing(false);
        this.add(this.colorPalette);
        this.colorWheel = new F(860, 200).loadGraphic(D.image("noteColorMenu/colorWheel"));
        this.colorWheel.setGraphicSize(360, 360);
        this.colorWheel.updateHitbox();
        this.add(this.colorWheel);
        this.colorWheelSelector = new Wh(0, 0, 8, {
          thickness: 0
        }, -1);
        b = this.colorWheelSelector.offset;
        d = c = 8;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        b.set_x(c);
        b.set_y(d);
        this.colorWheelSelector.set_alpha(0.6);
        this.add(this.colorWheelSelector);
        this.alphabetR = this.makeColorAlphabet(880, 90);
        this.add(this.alphabetR);
        this.alphabetG = this.makeColorAlphabet(980, 90);
        this.add(this.alphabetG);
        this.alphabetB = this.makeColorAlphabet(1080, 90);
        this.add(this.alphabetB);
        this.alphabetHex = this.makeColorAlphabet(980, 35);
        this.add(this.alphabetHex);
        this.hexTypeLine = new F(0, 20).makeGraphic(5, 62, -1);
        this.hexTypeLine.set_visible(false);
        this.add(this.hexTypeLine);
        this.spawnNotes();
        this.updateNotes(true);
        h.sound.play(D.sound("scrollMenu"), 0.6);
        a = new U(20, 660, 0, "Press RELOAD to Reset the selected Note Part.", 16);
        a.setFormat("assets/fonts/vcr.ttf", 16, -1, "left", Sa.OUTLINE, -16777216);
        a.set_borderSize(2);
        this.add(a);
        this.tipTxt = new U(20, 684, 0, "", 16);
        this.tipTxt.setFormat("assets/fonts/vcr.ttf", 16, -1, "left", Sa.OUTLINE, -16777216);
        this.tipTxt.set_borderSize(2);
        this.add(this.tipTxt);
        this.updateTip();
        this.controllerPointer = new Wh(0, 0, 20, {
          thickness: 0
        }, -1);
        b = this.controllerPointer.offset;
        d = c = 20;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        b.set_x(c);
        b.set_y(d);
        a = this.controllerPointer;
        a.set_x((h.width - a.get_width()) / 2);
        a.set_y((h.height - a.get_height()) / 2);
        this.controllerPointer.set_alpha(0.6);
        this.add(this.controllerPointer);
        h.mouse.set_visible(!Aa.instance.controllerMode);
        this.controllerPointer.set_visible(Aa.instance.controllerMode);
        this._lastControllerMode = Aa.instance.controllerMode;
      }
      g["options.NotesSubState"] = Ym;
      Ym.__name__ = "options.NotesSubState";
      Ym.__super__ = db;
      Ym.prototype = q(db.prototype, {
        updateTip: function () {
          this.tipTxt.set_text("Hold " + (Aa.instance.controllerMode ? "Left Shoulder Button" : "Shift") + " + Press RESET key to fully reset the selected Note.");
        },
        update: function (a) {
          var b = this;
          if (Aa.instance.get_BACK()) {
            h.mouse.set_visible(false);
            h.sound.play(D.sound("cancelMenu"));
            this.close();
          } else {
            db.prototype.update.call(this, a);
            if (h.gamepads.anyHasState(-2, 2)) {
              Aa.instance.controllerMode = true;
            } else {
              if (h.mouse._leftButton.current != 2) {
                var c = h.mouse;
                var d = c.screenX - c._prevScreenX != 0;
              } else {
                d = true;
              }
              if (d) {
                c = true;
              } else {
                c = h.mouse;
                c = c.screenY - c._prevScreenY != 0;
              }
              if (c) {
                Aa.instance.controllerMode = false;
              }
            }
            var e = false;
            if (Aa.instance.controllerMode != this._lastControllerMode) {
              h.mouse.set_visible(!Aa.instance.controllerMode);
              this.controllerPointer.set_visible(Aa.instance.controllerMode);
              if (Aa.instance.controllerMode) {
                this.controllerPointer.set_x(h.mouse.x);
                this.controllerPointer.set_y(h.mouse.y);
                e = true;
              }
              this._lastControllerMode = Aa.instance.controllerMode;
              this.updateTip();
            }
            var f = 0;
            var k = 0;
            d = false;
            if (Aa.instance.controllerMode && (e || h.gamepads.anyInput())) {
              var g = 0;
              for (c = h.gamepads.getActiveGamepads(); g < c.length && !(d = c[g], ++g, f = d.getAnalogXAxisValue(d.mapping.getAnalogStick(19)), k = d.getYAxisRaw(d.mapping.getAnalogStick(19)), d = f != 0 || k != 0););
              this.controllerPointer.set_x(Math.max(0, Math.min(h.width, this.controllerPointer.x + f * 1000 * a)));
              this.controllerPointer.set_y(Math.max(0, Math.min(h.height, this.controllerPointer.y + k * 1000 * a)));
            }
            g = Aa.instance.controllerMode && Aa.instance.get_ACCEPT();
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(17, c.status)) {
              this.onPixel = !this.onPixel;
              this.spawnNotes();
              this.updateNotes(true);
              h.sound.play(D.sound("scrollMenu"), 0.6);
            }
            if (this.hexTypeNum > -1) {
              e = va.__cast(h.keys.firstJustPressed(), Ti);
              this.hexTypeVisibleTimer += a;
              a = false;
              c = h.keys.justPressed;
              if (a = c.keyManager.checkStatusUnsafe(37, c.status)) {
                this.hexTypeNum--;
              } else {
                c = h.keys.justPressed;
                if (a = c.keyManager.checkStatusUnsafe(39, c.status)) {
                  this.hexTypeNum++;
                } else if (this.allowedTypeKeys.h.hasOwnProperty(e)) {
                  a = this.alphabetHex.text;
                  c = a.substring(0, this.hexTypeNum) + this.allowedTypeKeys.h[e] + a.substring(this.hexTypeNum + 1);
                  a = eb.fromString("#" + c);
                  this.setShaderColor(a);
                  this._storedColor = this.getShaderColor();
                  this.updateColors();
                  this.hexTypeNum++;
                  a = true;
                } else {
                  c = h.keys.justPressed;
                  if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                    this.hexTypeNum = -1;
                  }
                }
              }
              c = false;
              if (a) {
                if (this.hexTypeNum > 5) {
                  this.hexTypeNum = -1;
                  c = true;
                  this.hexTypeLine.set_visible(false);
                } else {
                  if (this.hexTypeNum < 0) {
                    this.hexTypeNum = 0;
                  } else if (this.hexTypeNum > 5) {
                    this.hexTypeNum = 5;
                  }
                  this.centerHexTypeLine();
                  this.hexTypeLine.set_visible(true);
                }
                h.sound.play(D.sound("scrollMenu"), 0.6);
              }
              if (!c) {
                this.hexTypeLine.set_visible(Math.floor(this.hexTypeVisibleTimer * 2) % 2 == 0);
              }
            } else {
              a = 0;
              if (f == 0 && !e) {
                if (Aa.instance.get_UI_LEFT_P()) {
                  a = -1;
                } else if (Aa.instance.get_UI_RIGHT_P()) {
                  a = 1;
                }
              }
              if (k == 0 && !e && (!!Aa.instance.get_UI_UP_P() || !!Aa.instance.get_UI_DOWN_P())) {
                this.onModeColumn = !this.onModeColumn;
                this.modeBG.set_visible(this.onModeColumn);
                this.notesBG.set_visible(!this.onModeColumn);
              }
              if (a != 0) {
                if (this.onModeColumn) {
                  this.changeSelectionMode(a);
                } else {
                  this.changeSelectionNote(a);
                }
              }
              this.hexTypeLine.set_visible(false);
            }
            c = h.mouse;
            d = c._prevX != c.x || c._prevY != c.y || d;
            a = h.mouse._leftButton.current == 2 || g;
            if (d) {
              this.copyButton.set_alpha(0.6);
              this.pasteButton.set_alpha(0.6);
            }
            if (this.pointerOverlaps(this.copyButton)) {
              this.copyButton.set_alpha(1);
              if (a) {
                g = this.getShaderColor();
                e = c = false;
                if (e == null) {
                  e = true;
                }
                if (c == null) {
                  c = true;
                }
                c = c ? w.hex(g >> 24 & 255, 2) : "";
                ic.set_text((e ? "0x" : "") + c + w.hex(g >> 16 & 255, 2) + w.hex(g >> 8 & 255, 2) + w.hex(g & 255, 2));
                h.sound.play(D.sound("scrollMenu"), 0.6);
                zb.trace("copied: " + ic.get_text(), {
                  fileName: "source/options/NotesSubState.hx",
                  lineNumber: 339,
                  className: "options.NotesSubState",
                  methodName: "update"
                });
              }
              this.hexTypeNum = -1;
            } else if (this.pointerOverlaps(this.pasteButton)) {
              this.pasteButton.set_alpha(1);
              if (a) {
                g = w.replace(w.replace(w.trim(ic.get_text()).toUpperCase(), "#", ""), "0x", "");
                c = eb.fromString("#" + g);
                if (c != null && g.length == 6) {
                  this.setShaderColor(c);
                  h.sound.play(D.sound("scrollMenu"), 0.6);
                  this._storedColor = this.getShaderColor();
                  this.updateColors();
                } else {
                  h.sound.play(D.sound("cancelMenu"), 0.6);
                }
              }
              this.hexTypeNum = -1;
            }
            if (a) {
              this.hexTypeNum = -1;
              if (this.pointerOverlaps(this.modeNotes)) {
                this.modeNotes.forEachAlive(function (a) {
                  if (b.curSelectedMode != a.ID && b.pointerOverlaps(a)) {
                    b.modeBG.set_visible(b.notesBG.set_visible(false));
                    b.curSelectedMode = a.ID;
                    b.onModeColumn = true;
                    b.updateNotes();
                    h.sound.play(D.sound("scrollMenu"), 0.6);
                  }
                });
              } else if (this.pointerOverlaps(this.myNotes)) {
                this.myNotes.forEachAlive(function (a) {
                  if (b.curSelectedNote != a.ID && b.pointerOverlaps(a)) {
                    b.modeBG.set_visible(b.notesBG.set_visible(false));
                    b.curSelectedNote = a.ID;
                    b.onModeColumn = false;
                    b.bigNote.rgbShader.parent = Na.globalRgbShaders[a.ID];
                    b.bigNote.shader = Na.globalRgbShaders[a.ID].shader;
                    b.updateNotes();
                    h.sound.play(D.sound("scrollMenu"), 0.6);
                  }
                });
              } else if (this.pointerOverlaps(this.colorWheel)) {
                this._storedColor = this.getShaderColor();
                this.holdingOnObj = this.colorWheel;
              } else if (this.pointerOverlaps(this.colorGradient)) {
                this._storedColor = this.getShaderColor();
                this.holdingOnObj = this.colorGradient;
              } else if (this.pointerOverlaps(this.colorPalette)) {
                this.setShaderColor(this.colorPalette.get_pixels().getPixel32((this.pointerX() - this.colorPalette.x) / this.colorPalette.scale.x | 0, (this.pointerY() - this.colorPalette.y) / this.colorPalette.scale.y | 0));
                h.sound.play(D.sound("scrollMenu"), 0.6);
                this.updateColors();
              } else if (this.pointerOverlaps(this.skinNote)) {
                this.onPixel = !this.onPixel;
                this.spawnNotes();
                this.updateNotes(true);
                h.sound.play(D.sound("scrollMenu"), 0.6);
              } else if (this.pointerY() >= this.hexTypeLine.y && this.pointerY() < this.hexTypeLine.y + this.hexTypeLine.get_height() && Math.abs(this.pointerX() - 1000) <= 84) {
                g = this.hexTypeNum = 0;
                for (c = this.alphabetHex.letters; g < c.length;) {
                  e = c[g];
                  ++g;
                  if (e.x - e.offset.x + e.get_width() <= this.pointerX()) {
                    this.hexTypeNum++;
                  } else {
                    break;
                  }
                }
                if (this.hexTypeNum > 5) {
                  this.hexTypeNum = 5;
                }
                this.hexTypeLine.set_visible(true);
                this.centerHexTypeLine();
              } else {
                this.holdingOnObj = null;
              }
            }
            if (this.holdingOnObj != null) {
              if (h.mouse._leftButton.current == -1 || Aa.instance.controllerMode && Aa.instance.justReleased("accept")) {
                this.holdingOnObj = null;
                this._storedColor = this.getShaderColor();
                this.updateColors();
                h.sound.play(D.sound("scrollMenu"), 0.6);
              } else if (d || a) {
                if (this.holdingOnObj == this.colorGradient) {
                  g = (this.pointerY() - this.colorGradient.y) / this.colorGradient.get_height();
                  g = g < 0 ? 0 : g;
                  a = 1 - (g > 1 ? 1 : g);
                  this._storedColor &= 16777215;
                  g = this._storedColor |= 16777216;
                  if (Math.max((g >> 16 & 255) / 255, Math.max((g >> 8 & 255) / 255, (g & 255) / 255)) == 0) {
                    d = eb._new();
                    c = 1;
                    if (c == null) {
                      c = 1;
                    }
                    g = Math.round(a * 255);
                    d = d & -16711681 | (g > 255 ? 255 : g < 0 ? 0 : g) << 16;
                    g = Math.round(a * 255);
                    d = d & -65281 | (g > 255 ? 255 : g < 0 ? 0 : g) << 8;
                    g = Math.round(a * 255);
                    d = d & -256 | (g > 255 ? 255 : g < 0 ? 0 : g);
                    g = Math.round(c * 255);
                    this.setShaderColor(d & 16777215 | (g > 255 ? 255 : g < 0 ? 0 : g) << 24);
                  } else {
                    c = eb.get_hue(this._storedColor);
                    g = this._storedColor;
                    this.setShaderColor(eb.fromHSB(c, (Math.max((g >> 16 & 255) / 255, Math.max((g >> 8 & 255) / 255, (g & 255) / 255)) - Math.min((g >> 16 & 255) / 255, Math.min((g >> 8 & 255) / 255, (g & 255) / 255))) / Math.max((g >> 16 & 255) / 255, Math.max((g >> 8 & 255) / 255, (g & 255) / 255)), a));
                  }
                  this.updateColors(this._storedColor);
                } else if (this.holdingOnObj == this.colorWheel) {
                  d = this.colorWheel.x + this.colorWheel.get_width() / 2;
                  c = this.colorWheel.y + this.colorWheel.get_height() / 2;
                  if (c == null) {
                    c = 0;
                  }
                  if (d == null) {
                    d = 0;
                  }
                  g = c;
                  if (g == null) {
                    g = 0;
                  }
                  if (d == null) {
                    d = 0;
                  }
                  c = g;
                  if (c == null) {
                    c = 0;
                  }
                  if (d == null) {
                    d = 0;
                  }
                  g = W.pool.get().set(d, c);
                  g._inPool = false;
                  a = this.pointerFlxPoint();
                  d = g.x - a.x;
                  c = g.y - a.y;
                  e = true;
                  if (e == null) {
                    e = false;
                  }
                  d = bc.wrap(bc.wrap((e ? 180 / Math.PI * Math.atan2(c, d) : Math.atan2(c, d)) | 0, 0, 360) - 90, 0, 360);
                  e = g.x - a.x;
                  a = g.y - a.y;
                  c = g;
                  if (c._weak) {
                    c.put();
                  }
                  g = Math.sqrt(e * e + a * a) / this.colorWheel.get_width() * 2;
                  g = g < 0 ? 0 : g;
                  a = g > 1 ? 1 : g;
                  if (a != 0) {
                    g = this._storedColor;
                    this.setShaderColor(eb.fromHSB(d, a, Math.max((g >> 16 & 255) / 255, Math.max((g >> 8 & 255) / 255, (g & 255) / 255))));
                  } else {
                    g = this._storedColor;
                    e = Math.max((g >> 16 & 255) / 255, Math.max((g >> 8 & 255) / 255, (g & 255) / 255));
                    g = this._storedColor;
                    a = Math.max((g >> 16 & 255) / 255, Math.max((g >> 8 & 255) / 255, (g & 255) / 255));
                    g = this._storedColor;
                    f = Math.max((g >> 16 & 255) / 255, Math.max((g >> 8 & 255) / 255, (g & 255) / 255));
                    d = eb._new();
                    c = 1;
                    if (c == null) {
                      c = 1;
                    }
                    g = Math.round(e * 255);
                    d = d & -16711681 | (g > 255 ? 255 : g < 0 ? 0 : g) << 16;
                    g = Math.round(a * 255);
                    d = d & -65281 | (g > 255 ? 255 : g < 0 ? 0 : g) << 8;
                    g = Math.round(f * 255);
                    d = d & -256 | (g > 255 ? 255 : g < 0 ? 0 : g);
                    g = Math.round(c * 255);
                    this.setShaderColor(d & 16777215 | (g > 255 ? 255 : g < 0 ? 0 : g) << 24);
                  }
                  this.updateColors();
                }
              }
            } else if (Aa.instance.get_RESET() && this.hexTypeNum < 0) {
              c = h.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(16, c.status) || h.gamepads.anyHasState(4, 2)) {
                g = this.myNotes.members[this.curSelectedNote].rgbShader;
                d = this.onPixel ? y.defaultData.arrowRGBPixel[this.curSelectedNote][0] : y.defaultData.arrowRGB[this.curSelectedNote][0];
                this.getShader().set_r(g.set_r(d));
                this.dataArray[this.curSelectedNote][0] = d;
                g = this.myNotes.members[this.curSelectedNote].rgbShader;
                d = this.onPixel ? y.defaultData.arrowRGBPixel[this.curSelectedNote][1] : y.defaultData.arrowRGB[this.curSelectedNote][1];
                this.getShader().set_g(g.set_g(d));
                this.dataArray[this.curSelectedNote][1] = d;
                g = this.myNotes.members[this.curSelectedNote].rgbShader;
                d = this.onPixel ? y.defaultData.arrowRGBPixel[this.curSelectedNote][2] : y.defaultData.arrowRGB[this.curSelectedNote][2];
                this.getShader().set_b(g.set_b(d));
                this.dataArray[this.curSelectedNote][2] = d;
              }
              this.setShaderColor(this.onPixel ? y.defaultData.arrowRGBPixel[this.curSelectedNote][this.curSelectedMode] : y.defaultData.arrowRGB[this.curSelectedNote][this.curSelectedMode]);
              h.sound.play(D.sound("cancelMenu"), 0.6);
              this.updateColors();
            }
          }
        },
        pointerOverlaps: function (a) {
          if (Aa.instance.controllerMode) {
            return h.overlap(this.controllerPointer, a);
          } else {
            return h.mouse.overlaps(a);
          }
        },
        pointerX: function () {
          if (Aa.instance.controllerMode) {
            return this.controllerPointer.x;
          } else {
            return h.mouse.x;
          }
        },
        pointerY: function () {
          if (Aa.instance.controllerMode) {
            return this.controllerPointer.y;
          } else {
            return h.mouse.y;
          }
        },
        pointerFlxPoint: function () {
          if (Aa.instance.controllerMode) {
            return this.controllerPointer.getScreenPosition();
          } else {
            return h.mouse.getScreenPosition();
          }
        },
        centerHexTypeLine: function () {
          if (this.hexTypeNum > 0) {
            var a = this.alphabetHex.letters[this.hexTypeNum - 1];
            this.hexTypeLine.set_x(a.x - a.offset.x + a.get_width());
          } else {
            a = this.alphabetHex.letters[0];
            this.hexTypeLine.set_x(a.x - a.offset.x);
          }
          a = this.hexTypeLine;
          a.set_x(a.x + this.hexTypeLine.get_width());
          this.hexTypeVisibleTimer = 0;
        },
        changeSelectionMode: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelectedMode += a;
          if (this.curSelectedMode < 0) {
            this.curSelectedMode = 2;
          }
          if (this.curSelectedMode >= 3) {
            this.curSelectedMode = 0;
          }
          this.modeBG.set_visible(true);
          this.notesBG.set_visible(false);
          this.updateNotes();
          h.sound.play(D.sound("scrollMenu"));
        },
        changeSelectionNote: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelectedNote += a;
          if (this.curSelectedNote < 0) {
            this.curSelectedNote = this.dataArray.length - 1;
          }
          if (this.curSelectedNote >= this.dataArray.length) {
            this.curSelectedNote = 0;
          }
          this.modeBG.set_visible(false);
          this.notesBG.set_visible(true);
          this.bigNote.rgbShader.parent = Na.globalRgbShaders[this.curSelectedNote];
          this.bigNote.shader = Na.globalRgbShaders[this.curSelectedNote].shader;
          this.updateNotes();
          h.sound.play(D.sound("scrollMenu"));
        },
        makeColorAlphabet: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          a = new Gb(a, b, "", true);
          a.set_alignment(Jf.CENTERED);
          a.setScale(0.6);
          this.add(a);
          return a;
        },
        spawnNotes: function () {
          this.dataArray = this.onPixel ? y.data.arrowRGBPixel : y.data.arrowRGB;
          if (this.onPixel) {
            A.stageUI = "pixel";
          }
          this.modeNotes.forEachAlive(function (a) {
            a.kill();
            a.destroy();
          });
          this.myNotes.forEachAlive(function (a) {
            a.kill();
            a.destroy();
          });
          this.modeNotes.clear();
          this.myNotes.clear();
          if (this.skinNote != null) {
            this.remove(this.skinNote);
            this.skinNote.destroy();
          }
          if (this.bigNote != null) {
            this.remove(this.bigNote);
            this.bigNote.destroy();
          }
          var a = this.onPixel ? 160 : 17;
          this.skinNote = new F(48, 24).loadGraphic(D.image("noteColorMenu/" + (this.onPixel ? "note" : "notePixel")), true, a, a);
          this.skinNote.set_antialiasing(y.data.antialiasing);
          this.skinNote.setGraphicSize(68);
          this.skinNote.updateHitbox();
          this.skinNote.animation.add("anim", [0], 24, true);
          this.skinNote.animation.play("anim", true);
          if (!this.onPixel) {
            this.skinNote.set_antialiasing(false);
          }
          this.add(this.skinNote);
          a = this.onPixel ? 17 : 160;
          var b = new F(230, 100).loadGraphic(D.image("noteColorMenu/" + (this.onPixel ? "notePixel" : "note")), true, a, a);
          b.set_antialiasing(y.data.antialiasing);
          b.setGraphicSize(85);
          b.updateHitbox();
          b.animation.add("anim", [0], 24, true);
          b.animation.play("anim", true);
          b.ID = 0;
          if (this.onPixel) {
            b.set_antialiasing(false);
          }
          this.modeNotes.add(b);
          b = new F(330, 100).loadGraphic(D.image("noteColorMenu/" + (this.onPixel ? "notePixel" : "note")), true, a, a);
          b.set_antialiasing(y.data.antialiasing);
          b.setGraphicSize(85);
          b.updateHitbox();
          b.animation.add("anim", [1], 24, true);
          b.animation.play("anim", true);
          b.ID = 1;
          if (this.onPixel) {
            b.set_antialiasing(false);
          }
          this.modeNotes.add(b);
          b = new F(430, 100).loadGraphic(D.image("noteColorMenu/" + (this.onPixel ? "notePixel" : "note")), true, a, a);
          b.set_antialiasing(y.data.antialiasing);
          b.setGraphicSize(85);
          b.updateHitbox();
          b.animation.add("anim", [2], 24, true);
          b.animation.play("anim", true);
          b.ID = 2;
          if (this.onPixel) {
            b.set_antialiasing(false);
          }
          this.modeNotes.add(b);
          Na.globalRgbShaders = [];
          a = 0;
          for (var c = this.dataArray.length; a < c;) {
            var d = a++;
            Na.initializeGlobalRGBShader(d);
            b = new ug(150 + 480 / this.dataArray.length * d, 200, d, 0);
            b.useRGBShader = true;
            b.setGraphicSize(102);
            b.updateHitbox();
            b.ID = d;
            this.myNotes.add(b);
          }
          this.bigNote = new Na(0, 0, null, false, true);
          this.bigNote.setPosition(250, 325);
          this.bigNote.setGraphicSize(250);
          this.bigNote.updateHitbox();
          this.bigNote.rgbShader.parent = Na.globalRgbShaders[this.curSelectedNote];
          this.bigNote.shader = Na.globalRgbShaders[this.curSelectedNote].shader;
          a = 0;
          for (c = Na.colArray.length; a < c;) {
            d = a++;
            if (this.onPixel) {
              this.bigNote.animation.add("note" + d, [d + 4], 24, true);
            } else {
              this.bigNote.animation.addByPrefix("note" + d, Na.colArray[d] + "0", 24, true);
            }
          }
          this.insert(this.members.indexOf(this.myNotes) + 1, this.bigNote);
          this._storedColor = this.getShaderColor();
          A.stageUI = "normal";
        },
        updateNotes: function (a) {
          if (a == null) {
            a = false;
          }
          for (var b = new tc(this.modeNotes.members, null); b.hasNext();) {
            var c = b.next();
            c.set_alpha(this.curSelectedMode == c.ID ? 1 : 0.6);
          }
          for (b = new tc(this.myNotes.members, null); b.hasNext();) {
            c = b.next();
            var d = this.curSelectedNote == c.ID ? "confirm" : "pressed";
            c.set_alpha(this.curSelectedNote == c.ID ? 1 : 0.6);
            if (c.animation._curAnim == null || c.animation._curAnim.name != d) {
              c.playAnim(d, true);
            }
            if (a) {
              c.animation._curAnim.finish();
            }
          }
          this.bigNote.animation.play("note" + this.curSelectedNote, true);
          this.updateColors();
        },
        updateColors: function (a) {
          var b = this.getShaderColor();
          a = a == null ? this.getShaderColor() : a;
          this.alphabetR.set_text(v.string(b >> 16 & 255));
          this.alphabetG.set_text(v.string(b >> 8 & 255));
          this.alphabetB.set_text(v.string(b & 255));
          var c = this.alphabetHex;
          var d = false;
          var e = false;
          if (e == null) {
            e = true;
          }
          if (d == null) {
            d = true;
          }
          d = d ? w.hex(b >> 24 & 255, 2) : "";
          c.set_text((e ? "0x" : "") + d + w.hex(b >> 16 & 255, 2) + w.hex(b >> 8 & 255, 2) + w.hex(b & 255, 2));
          c = 0;
          for (e = this.alphabetHex.letters; c < e.length;) {
            d = e[c];
            ++c;
            d.set_color(b);
          }
          this.colorWheel.set_color(eb.fromHSB(0, 0, Math.max((b >> 16 & 255) / 255, Math.max((b >> 8 & 255) / 255, (b & 255) / 255))));
          this.colorWheelSelector.setPosition(this.colorWheel.x + this.colorWheel.get_width() / 2, this.colorWheel.y + this.colorWheel.get_height() / 2);
          if (Math.max((a >> 16 & 255) / 255, Math.max((a >> 8 & 255) / 255, (a & 255) / 255)) != 0) {
            c = eb.get_hue(a) * Math.PI / 180;
            e = this.colorWheelSelector;
            e.set_x(e.x + Math.sin(c) * this.colorWheel.get_width() / 2 * ((Math.max((a >> 16 & 255) / 255, Math.max((a >> 8 & 255) / 255, (a & 255) / 255)) - Math.min((a >> 16 & 255) / 255, Math.min((a >> 8 & 255) / 255, (a & 255) / 255))) / Math.max((a >> 16 & 255) / 255, Math.max((a >> 8 & 255) / 255, (a & 255) / 255))));
            e = this.colorWheelSelector;
            e.set_y(e.y - Math.cos(c) * this.colorWheel.get_height() / 2 * ((Math.max((a >> 16 & 255) / 255, Math.max((a >> 8 & 255) / 255, (a & 255) / 255)) - Math.min((a >> 16 & 255) / 255, Math.min((a >> 8 & 255) / 255, (a & 255) / 255))) / Math.max((a >> 16 & 255) / 255, Math.max((a >> 8 & 255) / 255, (a & 255) / 255))));
          }
          this.colorGradientSelector.set_y(this.colorGradient.y + this.colorGradient.get_height() * (1 - Math.max((b >> 16 & 255) / 255, Math.max((b >> 8 & 255) / 255, (b & 255) / 255))));
          a = this.myNotes.members[this.curSelectedNote].rgbShader;
          switch (this.curSelectedMode) {
            case 0:
              this.getShader().set_r(a.set_r(b));
              break;
            case 1:
              this.getShader().set_g(a.set_g(b));
              break;
            case 2:
              this.getShader().set_b(a.set_b(b));
          }
        },
        setShaderColor: function (a) {
          this.dataArray[this.curSelectedNote][this.curSelectedMode] = a;
        },
        getShaderColor: function () {
          return this.dataArray[this.curSelectedNote][this.curSelectedMode];
        },
        getShader: function () {
          return Na.globalRgbShaders[this.curSelectedNote];
        },
        __class__: Ym
      });
      function pc(a, b, c, d, e) {
        if (d == null) {
          d = "bool";
        }
        if (b == null) {
          b = "";
        }
        this.defaultKeys = this.keys = null;
        this.name = "Unknown";
        this.description = "";
        this.displayFormat = "%v";
        this.decimals = 1;
        this.minValue = this.maxValue = null;
        this.changeValue = 1;
        this.options = null;
        this.curOption = 0;
        this.variable = this.defaultValue = null;
        this.scrollSpeed = 50;
        this.type = "bool";
        this.onChange = null;
        this.name = a;
        this.description = b;
        this.variable = c;
        this.type = d;
        this.options = e;
        if (this.get_type() != "keybind") {
          this.defaultValue = ja.getProperty(y.defaultData, c);
        }
        switch (d) {
          case "bool":
            if (this.defaultValue == null) {
              this.defaultValue = false;
            }
            break;
          case "float":
          case "int":
            if (this.defaultValue == null) {
              this.defaultValue = 0;
            }
            break;
          case "keybind":
            this.defaultValue = "";
            this.defaultKeys = {
              gamepad: "NONE",
              keyboard: "NONE"
            };
            this.keys = {
              gamepad: "NONE",
              keyboard: "NONE"
            };
            break;
          case "percent":
            if (this.defaultValue == null) {
              this.defaultValue = 1;
            }
            this.displayFormat = "%v%";
            this.changeValue = 0.01;
            this.minValue = 0;
            this.maxValue = 1;
            this.scrollSpeed = 0.5;
            this.decimals = 2;
            break;
          case "string":
            if (this.defaultValue == null) {
              this.defaultValue = "";
            }
            if (e.length > 0) {
              this.defaultValue = e[0];
            }
        }
        try {
          if (this.getValue() == null) {
            this.setValue(this.defaultValue);
          }
          if (d == "string") {
            var f = e.indexOf(this.getValue());
            if (f > -1) {
              this.curOption = f;
            }
          }
        } catch (k) {}
      }
      g["options.Option"] = pc;
      pc.__name__ = "options.Option";
      pc.prototype = {
        change: function () {
          if (this.onChange != null) {
            this.onChange();
          }
        },
        getValue: function () {
          var a = ja.getProperty(y.data, this.variable);
          if (this.get_type() == "keybind") {
            if (Aa.instance.controllerMode) {
              return a.gamepad;
            } else {
              return a.keyboard;
            }
          } else {
            return a;
          }
        },
        setValue: function (a) {
          if (this.get_type() == "keybind") {
            var b = ja.getProperty(y.data, this.variable);
            if (Aa.instance.controllerMode) {
              b.gamepad = a;
            } else {
              b.keyboard = a;
            }
          } else {
            ja.setProperty(y.data, this.variable, a);
          }
        },
        set_text: function (a) {
          if (a == null) {
            a = "";
          }
          if (this.child != null) {
            this.child.set_text(a);
          }
          return null;
        },
        get_type: function () {
          var a = "bool";
          switch (w.trim(this.type.toLowerCase())) {
            case "fl":
              a = "float";
              break;
            case "integer":
              a = "int";
              break;
            case "key":
            case "keybind":
              a = "keybind";
              break;
            case "str":
              a = "string";
              break;
            case "float":
            case "int":
            case "percent":
            case "string":
              a = this.type;
          }
          return this.type = a;
        },
        __class__: pc,
        __properties__: {
          set_text: "set_text",
          get_type: "get_type"
        }
      };
      function jd(a, b) {
        this.options = "Note Colors;Controls;Adjust Delay and Combo;Graphics;Visuals and UI;Gameplay".split(";");
        P.call(this, a, b);
      }
      g["options.OptionsState"] = jd;
      jd.__name__ = "options.OptionsState";
      jd.__super__ = P;
      jd.prototype = q(P.prototype, {
        openSelectedSubstate: function (a) {
          switch (a) {
            case "Adjust Delay and Combo":
              P.switchState(new Xm());
              break;
            case "Controls":
              this.openSubState(new ch());
              break;
            case "Gameplay":
              this.openSubState(new Vm());
              break;
            case "Graphics":
              this.openSubState(new Wm());
              break;
            case "Note Colors":
              this.openSubState(new Ym());
              break;
            case "Visuals and UI":
              this.openSubState(new Zm());
          }
        },
        create: function () {
          var a = new F().loadGraphic(D.image("menuDesat"));
          a.set_antialiasing(y.data.antialiasing);
          a.set_color(-1412611);
          a.updateHitbox();
          a.set_x((h.width - a.get_width()) / 2);
          a.set_y((h.height - a.get_height()) / 2);
          this.add(a);
          this.grpOptions = new Qa();
          this.add(this.grpOptions);
          a = 0;
          for (var b = this.options.length; a < b;) {
            var c = a++;
            var d = new Gb(0, 0, this.options[c], true);
            d.set_x((h.width - d.get_width()) / 2);
            d.set_y((h.height - d.get_height()) / 2);
            d.set_y(d.y + ((c - this.options.length / 2) * 100 + 50));
            this.grpOptions.add(d);
          }
          this.selectorLeft = new Gb(0, 0, ">", true);
          this.add(this.selectorLeft);
          this.selectorRight = new Gb(0, 0, "<", true);
          this.add(this.selectorRight);
          this.changeSelection();
          y.saveSettings();
          P.prototype.create.call(this);
        },
        closeSubState: function () {
          P.prototype.closeSubState.call(this);
          y.saveSettings();
        },
        update: function (a) {
          P.prototype.update.call(this, a);
          if (this.get_controls().get_UI_UP_P()) {
            this.changeSelection(-1);
          }
          if (this.get_controls().get_UI_DOWN_P()) {
            this.changeSelection(1);
          }
          if (this.get_controls().get_BACK()) {
            h.sound.play(D.sound("cancelMenu"));
            if (jd.onPlayState) {
              we.loadDirectory(A.SONG);
              P.switchState(qc.getNextState(new A(), false));
              h.sound.music.set_volume(0);
            } else {
              P.switchState(new Ac());
            }
          } else if (this.get_controls().get_ACCEPT()) {
            this.openSelectedSubstate(this.options[jd.curSelected]);
          }
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          jd.curSelected += a;
          if (jd.curSelected < 0) {
            jd.curSelected = this.options.length - 1;
          }
          if (jd.curSelected >= this.options.length) {
            jd.curSelected = 0;
          }
          for (var b = a = 0, c = this.grpOptions.members; b < c.length;) {
            var d = c[b];
            ++b;
            d.targetY = a - jd.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
              this.selectorLeft.set_x(d.x - 63);
              this.selectorLeft.set_y(d.y);
              this.selectorRight.set_x(d.x + d.get_width() + 15);
              this.selectorRight.set_y(d.y);
            }
          }
          h.sound.play(D.sound("scrollMenu"));
        },
        destroy: function () {
          y.loadPrefs();
          P.prototype.destroy.call(this);
        },
        __class__: jd
      });
      function Zm() {
        this.changedMusic = false;
        this.noteY = 90;
        this.notesTween = [];
        this.noteOptionID = -1;
        this.title = "Visuals and UI";
        this.rpcTitle = "Visuals & UI Settings Menu";
        this.notes = new Qa();
        for (var a = 0, b = Na.colArray.length; a < b;) {
          var c = a++;
          var d = new ug(370 + 560 / Na.colArray.length * c, -200, c, 0);
          d.centerOffsets();
          var e = d.origin;
          c = d.frameWidth * 0.5;
          var f = d.frameHeight * 0.5;
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = 0;
          }
          e.set_x(c);
          e.set_y(f);
          d.playAnim("static");
          this.notes.add(d);
        }
        a = null;
        if (a == null) {
          a = "assets/shared/";
        }
        a = w.trim(a);
        if (!w.endsWith(a, "/")) {
          a += "/";
        }
        if (!w.startsWith(a, "assets/")) {
          a = "assets/" + a;
        }
        d = [];
        e = [];
        e.push(a + "images/noteSkins/list.txt");
        a += "images/noteSkins/list.txt";
        if (e.indexOf(a) != -1) {
          r.remove(e, a);
          e.splice(0, 0, a);
        }
        for (a = 0; a < e.length;) {
          b = e[a];
          ++a;
          c = null;
          if (Q.exists(b)) {
            c = Q.getText(b);
          }
          if (c != null) {
            f = w.trim(c).split("\n");
            b = 0;
            for (var h = f.length; b < h;) {
              c = b++;
              f[c] = w.trim(f[c]);
            }
            b = f;
          } else {
            b = [];
          }
          for (c = 0; c < b.length;) {
            f = b[c];
            ++c;
            if (d.indexOf(f) == -1 && f.length > 0) {
              d.push(f);
            }
          }
        }
        a = d;
        if (a.length > 0) {
          if (a.indexOf(y.data.noteSkin) == -1) {
            y.data.noteSkin = y.defaultData.noteSkin;
          }
          a.splice(0, 0, y.defaultData.noteSkin);
          a = new pc("Note Skins:", "Select your prefered Note skin.", "noteSkin", "string", a);
          this.addOption(a);
          a.onChange = m(this, this.onChangeNoteSkin);
          this.noteOptionID = this.optionsArray.length - 1;
        }
        a = null;
        if (a == null) {
          a = "assets/shared/";
        }
        a = w.trim(a);
        if (!w.endsWith(a, "/")) {
          a += "/";
        }
        if (!w.startsWith(a, "assets/")) {
          a = "assets/" + a;
        }
        d = [];
        e = [];
        e.push(a + "images/noteSplashes/list.txt");
        a += "images/noteSplashes/list.txt";
        if (e.indexOf(a) != -1) {
          r.remove(e, a);
          e.splice(0, 0, a);
        }
        for (a = 0; a < e.length;) {
          b = e[a];
          ++a;
          c = null;
          if (Q.exists(b)) {
            c = Q.getText(b);
          }
          if (c != null) {
            f = w.trim(c).split("\n");
            b = 0;
            for (h = f.length; b < h;) {
              c = b++;
              f[c] = w.trim(f[c]);
            }
            b = f;
          } else {
            b = [];
          }
          for (c = 0; c < b.length;) {
            f = b[c];
            ++c;
            if (d.indexOf(f) == -1 && f.length > 0) {
              d.push(f);
            }
          }
        }
        a = d;
        if (a.length > 0) {
          if (a.indexOf(y.data.splashSkin) == -1) {
            y.data.splashSkin = y.defaultData.splashSkin;
          }
          a.splice(0, 0, y.defaultData.splashSkin);
          a = new pc("Note Splashes:", "Select your prefered Note Splash variation or turn it off.", "splashSkin", "string", a);
          this.addOption(a);
        }
        a = new pc("Note Splash Opacity", "How much transparent should the Note Splashes be.", "splashAlpha", "percent");
        a.scrollSpeed = 1.6;
        a.minValue = 0;
        a.maxValue = 1;
        a.changeValue = 0.1;
        a.decimals = 1;
        this.addOption(a);
        a = new pc("Hide HUD", "If checked, hides most HUD elements.", "hideHud", "bool");
        this.addOption(a);
        a = new pc("Time Bar:", "What should the Time Bar display?", "timeBarType", "string", ["Time Left", "Time Elapsed", "Song Name", "Disabled"]);
        this.addOption(a);
        a = new pc("Flashing Lights", "Uncheck this if you're sensitive to flashing lights!", "flashing", "bool");
        this.addOption(a);
        a = new pc("Camera Zooms", "If unchecked, the camera won't zoom in on a beat hit.", "camZooms", "bool");
        this.addOption(a);
        a = new pc("Score Text Zoom on Hit", "If unchecked, disables the Score text zooming\neverytime you hit a note.", "scoreZoom", "bool");
        this.addOption(a);
        a = new pc("Health Bar Opacity", "How much transparent should the health bar and icons be.", "healthBarAlpha", "percent");
        a.scrollSpeed = 1.6;
        a.minValue = 0;
        a.maxValue = 1;
        a.changeValue = 0.1;
        a.decimals = 1;
        this.addOption(a);
        a = new pc("FPS Counter", "If unchecked, hides FPS Counter.", "showFPS", "bool");
        this.addOption(a);
        a.onChange = m(this, this.onChangeFPSCounter);
        a = new pc("Pause Screen Song:", "What song do you prefer for the Pause Screen?", "pauseMusic", "string", ["None", "Breakfast", "Tea Time"]);
        this.addOption(a);
        a.onChange = m(this, this.onChangePauseMusic);
        a = new pc("Combo Stacking", "If unchecked, Ratings and Combo won't stack, saving on System Memory and making them easier to read", "comboStacking", "bool");
        this.addOption(a);
        te.call(this);
        this.add(this.notes);
      }
      g["options.VisualsUISubState"] = Zm;
      Zm.__name__ = "options.VisualsUISubState";
      Zm.__super__ = te;
      Zm.prototype = q(te.prototype, {
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          te.prototype.changeSelection.call(this, a);
          if (!(this.noteOptionID < 0)) {
            a = 0;
            for (var b = Na.colArray.length; a < b;) {
              var c = a++;
              var d = this.notes.members[c];
              if (this.notesTween[c] != null) {
                this.notesTween[c].cancel();
              }
              this.notesTween[c] = this.curSelected == this.noteOptionID ? Da.tween(d, {
                y: this.noteY
              }, Math.abs(d.y / (200 + this.noteY)) / 3, {
                ease: Xa.quadInOut
              }) : Da.tween(d, {
                y: -200
              }, Math.abs(d.y / (200 + this.noteY)) / 3, {
                ease: Xa.quadInOut
              });
            }
          }
        },
        onChangePauseMusic: function () {
          if (y.data.pauseMusic == "None") {
            h.sound.music.set_volume(0);
          } else {
            var a = h.sound;
            var b = y.data.pauseMusic;
            var c = new V("[~&\\\\;:<>#]", "");
            var d = new V("[.,'\"%?!]", "");
            b = c.split(w.replace(b, " ", "-")).join("-");
            d = D.returnSound("music", d.split(b).join("").toLowerCase(), null);
            a.playMusic(d);
          }
          this.changedMusic = true;
        },
        onChangeNoteSkin: function () {
          var a = this;
          this.notes.forEachAlive(function (b) {
            a.changeNoteSkin(b);
            b.centerOffsets();
            var c = b.origin;
            var d = b.frameWidth * 0.5;
            b = b.frameHeight * 0.5;
            if (b == null) {
              b = 0;
            }
            if (d == null) {
              d = 0;
            }
            c.set_x(d);
            c.set_y(b);
          });
        },
        changeNoteSkin: function (a) {
          var b = Na.defaultNoteSkin;
          var c = b + Na.getNoteSkinPostfix();
          if (D.fileExists("images/" + c + ".png", "IMAGE")) {
            b = c;
          }
          a.set_texture(b);
          a.reloadNote();
          a.playAnim("static");
        },
        destroy: function () {
          if (this.changedMusic && !jd.onPlayState) {
            var a = h.sound;
            var b = D.returnSound("music", "freakyMenu", null);
            a.playMusic(b, 1, true);
          }
          te.prototype.destroy.call(this);
        },
        onChangeFPSCounter: function () {
          if (Wb.fpsVar != null) {
            Wb.fpsVar.set_visible(y.data.showFPS);
          }
        },
        __class__: Zm
      });
      function Uc(a) {
        Uc.$name = a;
        db.call(this);
        this.set_cameras([h.cameras.list[h.cameras.list.length - 1]]);
      }
      g["psychlua.CustomSubstate"] = Uc;
      Uc.__name__ = "psychlua.CustomSubstate";
      Uc.openCustomSubstate = function (a, b) {
        if (b == null) {
          b = false;
        }
        if (b) {
          h.camera.set_followLerp(0);
          A.instance.persistentUpdate = false;
          A.instance.persistentDraw = true;
          A.instance.paused = true;
          if (h.sound.music != null) {
            h.sound.music.pause();
            A.instance.vocals.pause();
          }
        }
        A.instance.openSubState(new Uc(a));
        A.instance.setOnHScript("customSubstate", Uc.instance);
        A.instance.setOnHScript("customSubstateName", a);
      };
      Uc.closeCustomSubstate = function () {
        if (Uc.instance != null) {
          A.instance.closeSubState();
          Uc.instance = null;
          return true;
        } else {
          return false;
        }
      };
      Uc.insertToCustomSubstate = function (a, b) {
        if (b == null) {
          b = -1;
        }
        if (Uc.instance != null && (a = va.__cast(A.instance.variables.h[a], $b), a != null)) {
          if (b < 0) {
            Uc.instance.add(a);
          } else {
            Uc.instance.insert(b, a);
          }
          return true;
        } else {
          return false;
        }
      };
      Uc.__super__ = db;
      Uc.prototype = q(db.prototype, {
        create: function () {
          Uc.instance = this;
          A.instance.callOnScripts("onCustomSubstateCreate", [Uc.$name]);
          db.prototype.create.call(this);
          A.instance.callOnScripts("onCustomSubstateCreatePost", [Uc.$name]);
        },
        update: function (a) {
          A.instance.callOnScripts("onCustomSubstateUpdate", [Uc.$name, a]);
          db.prototype.update.call(this, a);
          A.instance.callOnScripts("onCustomSubstateUpdatePost", [Uc.$name, a]);
        },
        destroy: function () {
          A.instance.callOnScripts("onCustomSubstateDestroy", [Uc.$name]);
          Uc.$name = "unnamed";
          A.instance.setOnHScript("customSubstate", null);
          A.instance.setOnHScript("customSubstateName", Uc.$name);
          db.prototype.destroy.call(this);
        },
        __class__: Uc
      });
      function Fb() {}
      g["psychlua.LuaUtils"] = Fb;
      Fb.__name__ = "psychlua.LuaUtils";
      Fb.setVarInArray = function (a, b, c, d) {
        if (d == null) {
          d = false;
        }
        var e = b.split("[");
        if (e.length > 1) {
          b = null;
          if (Object.prototype.hasOwnProperty.call(A.instance.variables.h, e[0])) {
            a = A.instance.variables.h[e[0]];
            if (a != null) {
              b = a;
            }
          } else {
            b = ja.getProperty(a, e[0]);
          }
          a = 1;
          for (d = e.length; a < d;) {
            var f = a++;
            var h = r.substr(e[f], 0, e[f].length - 1);
            if (f >= e.length - 1) {
              b[h] = c;
            } else {
              b = b[h];
            }
          }
          return b;
        }
        if (d && Fb.isMap(a)) {
          a.set(b, c);
          return c;
        }
        if (Object.prototype.hasOwnProperty.call(A.instance.variables.h, b)) {
          return A.instance.variables.h[b] = c;
        }
        ja.setProperty(a, b, c);
        return c;
      };
      Fb.getVarInArray = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        var d = b.split("[");
        if (d.length > 1) {
          b = null;
          if (Object.prototype.hasOwnProperty.call(A.instance.variables.h, d[0])) {
            c = A.instance.variables.h[d[0]];
            if (c != null) {
              b = c;
            }
          } else {
            b = ja.getProperty(a, d[0]);
          }
          a = 1;
          for (c = d.length; a < c;) {
            var e = a++;
            e = r.substr(d[e], 0, d[e].length - 1);
            b = b[e];
          }
          return b;
        }
        if (c && Fb.isMap(a)) {
          return a.get(b);
        } else if (Object.prototype.hasOwnProperty.call(A.instance.variables.h, b) && (c = A.instance.variables.h[b], c != null)) {
          return c;
        } else {
          return ja.getProperty(a, b);
        }
      };
      Fb.isMap = function (a) {
        if (a.exists != null && a.keyValueIterator != null) {
          return true;
        } else {
          return false;
        }
      };
      Fb.getPropertyLoop = function (a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = true;
        }
        if (b == null) {
          b = true;
        }
        b = Fb.getObjectDirectly(a[0], b);
        var e = a.length;
        if (c) {
          e = a.length - 1;
        }
        for (c = 1; c < e;) {
          var f = c++;
          b = Fb.getVarInArray(b, a[f], d);
        }
        return b;
      };
      Fb.getObjectDirectly = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        switch (a) {
          case "game":
          case "instance":
          case "this":
            return A.instance;
          default:
            b = A.instance.getLuaObject(a, b);
            if (b == null) {
              b = Fb.getVarInArray(A.instance.isDead ? Lc.instance : A.instance, a, c);
            }
            return b;
        }
      };
      function pp() {
        this.hue = 0;
        this.shader = new $m();
        this.shader.uTime.value = [0, 0, 0];
        this.shader.awesomeOutline.value = [false];
      }
      g["shaders.ColorSwap"] = pp;
      pp.__name__ = "shaders.ColorSwap";
      pp.prototype = {
        set_hue: function (a) {
          this.hue = a;
          return this.shader.uTime.value[0] = this.hue;
        },
        __class__: pp,
        __properties__: {
          set_hue: "set_hue"
        }
      };
      function $m() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\n\t\tuniform vec3 uTime;\n\t\tuniform bool awesomeOutline;\n\n\t\tconst float offset = 1.0 / 128.0;\n\t\tvec3 normalizeColor(vec3 color)\n\t\t{\n\t\t\treturn vec3(\n\t\t\t\tcolor[0] / 255.0,\n\t\t\t\tcolor[1] / 255.0,\n\t\t\t\tcolor[2] / 255.0\n\t\t\t);\n\t\t}\n\n\t\tvec3 rgb2hsv(vec3 c)\n\t\t{\n\t\t\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\t\t\tvec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n\t\t\tvec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n\t\t\tfloat d = q.x - min(q.w, q.y);\n\t\t\tfloat e = 1.0e-10;\n\t\t\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n\t\t}\n\n\t\tvec3 hsv2rgb(vec3 c)\n\t\t{\n\t\t\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\t\t\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\t\t\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n\t\t}\n\n\t\tvoid main()\n\t\t{\n\t\t\tvec4 color = flixel_texture2D(bitmap, openfl_TextureCoordv);\n\n\t\t\tvec4 swagColor = vec4(rgb2hsv(vec3(color[0], color[1], color[2])), color[3]);\n\n\t\t\t// [0] is the hue???\n\t\t\tswagColor[0] = swagColor[0] + uTime[0];\n\t\t\tswagColor[1] = swagColor[1] + uTime[1];\n\t\t\tswagColor[2] = swagColor[2] * (1.0 + uTime[2]);\n\t\t\t\n\t\t\tif(swagColor[1] < 0.0)\n\t\t\t{\n\t\t\t\tswagColor[1] = 0.0;\n\t\t\t}\n\t\t\telse if(swagColor[1] > 1.0)\n\t\t\t{\n\t\t\t\tswagColor[1] = 1.0;\n\t\t\t}\n\n\t\t\tcolor = vec4(hsv2rgb(vec3(swagColor[0], swagColor[1], swagColor[2])), swagColor[3]);\n\n\t\t\tif (awesomeOutline)\n\t\t\t{\n\t\t\t\t // Outline bullshit?\n\t\t\t\tvec2 size = vec2(3, 3);\n\n\t\t\t\tif (color.a <= 0.5) {\n\t\t\t\t\tfloat w = size.x / openfl_TextureSize.x;\n\t\t\t\t\tfloat h = size.y / openfl_TextureSize.y;\n\t\t\t\t\t\n\t\t\t\t\tif (flixel_texture2D(bitmap, vec2(openfl_TextureCoordv.x + w, openfl_TextureCoordv.y)).a != 0.\n\t\t\t\t\t|| flixel_texture2D(bitmap, vec2(openfl_TextureCoordv.x - w, openfl_TextureCoordv.y)).a != 0.\n\t\t\t\t\t|| flixel_texture2D(bitmap, vec2(openfl_TextureCoordv.x, openfl_TextureCoordv.y + h)).a != 0.\n\t\t\t\t\t|| flixel_texture2D(bitmap, vec2(openfl_TextureCoordv.x, openfl_TextureCoordv.y - h)).a != 0.)\n\t\t\t\t\t\tcolor = vec4(1.0, 1.0, 1.0, 1.0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tgl_FragColor = color;\n\n\t\t\t/* \n\t\t\tif (color.a > 0.5)\n\t\t\t\tgl_FragColor = color;\n\t\t\telse\n\t\t\t{\n\t\t\t\tfloat a = flixel_texture2D(bitmap, vec2(openfl_TextureCoordv + offset, openfl_TextureCoordv.y)).a +\n\t\t\t\t\t\t  flixel_texture2D(bitmap, vec2(openfl_TextureCoordv, openfl_TextureCoordv.y - offset)).a +\n\t\t\t\t\t\t  flixel_texture2D(bitmap, vec2(openfl_TextureCoordv - offset, openfl_TextureCoordv.y)).a +\n\t\t\t\t\t\t  flixel_texture2D(bitmap, vec2(openfl_TextureCoordv, openfl_TextureCoordv.y + offset)).a;\n\t\t\t\tif (color.a < 1.0 && a > 0.0)\n\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 0.8);\n\t\t\t\telse\n\t\t\t\t\tgl_FragColor = color;\n\t\t\t} */\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\t\tif (openfl_HasColorTransform) {\n\t\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\t\t\t}\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        Wd.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      g["shaders.ColorSwapShader"] = $m;
      $m.__name__ = "shaders.ColorSwapShader";
      $m.__super__ = Wd;
      $m.prototype = q(Wd.prototype, {
        __class__: $m
      });
      function fm() {
        this.shader = new an();
        this.set_r(-65536);
        this.set_g(-16711936);
        this.set_b(-16776961);
        this.set_mult(1);
      }
      g["shaders.RGBPalette"] = fm;
      fm.__name__ = "shaders.RGBPalette";
      fm.prototype = {
        set_r: function (a) {
          this.r = a;
          this.shader.r.value = [(a >> 16 & 255) / 255, (a >> 8 & 255) / 255, (a & 255) / 255];
          return a;
        },
        set_g: function (a) {
          this.g = a;
          this.shader.g.value = [(a >> 16 & 255) / 255, (a >> 8 & 255) / 255, (a & 255) / 255];
          return a;
        },
        set_b: function (a) {
          this.b = a;
          this.shader.b.value = [(a >> 16 & 255) / 255, (a >> 8 & 255) / 255, (a & 255) / 255];
          return a;
        },
        set_mult: function (a) {
          a = a < 0 ? 0 : a;
          this.mult = a > 1 ? 1 : a;
          this.shader.mult.value = [this.mult];
          return this.mult;
        },
        __class__: fm,
        __properties__: {
          set_mult: "set_mult",
          set_b: "set_b",
          set_g: "set_g",
          set_r: "set_r"
        }
      };
      function em(a, b) {
        this.enabled = this.allowNew = true;
        this.parent = b;
        this._owner = a;
        this._original = b;
        a.shader = b.shader;
        this.r = this.parent.r;
        this.set_g(this.parent.g);
        this.set_b(this.parent.b);
        this.set_mult(this.parent.mult);
      }
      g["shaders.RGBShaderReference"] = em;
      em.__name__ = "shaders.RGBShaderReference";
      em.prototype = {
        set_r: function (a) {
          if (this.allowNew && a != this._original.r) {
            this.cloneOriginal();
          }
          return this.r = this.parent.set_r(a);
        },
        set_g: function (a) {
          if (this.allowNew && a != this._original.g) {
            this.cloneOriginal();
          }
          return this.g = this.parent.set_g(a);
        },
        set_b: function (a) {
          if (this.allowNew && a != this._original.b) {
            this.cloneOriginal();
          }
          return this.b = this.parent.set_b(a);
        },
        set_mult: function (a) {
          if (this.allowNew && a != this._original.mult) {
            this.cloneOriginal();
          }
          return this.mult = this.parent.set_mult(a);
        },
        set_enabled: function (a) {
          this._owner.shader = a ? this.parent.shader : null;
          return this.enabled = a;
        },
        cloneOriginal: function () {
          if (this.allowNew) {
            this.allowNew = false;
            if (this._original == this.parent) {
              this.parent = new fm();
              this.parent.set_r(this._original.r);
              this.parent.set_g(this._original.g);
              this.parent.set_b(this._original.b);
              this.parent.set_mult(this._original.mult);
              this._owner.shader = this.parent.shader;
            }
          }
        },
        __class__: em,
        __properties__: {
          set_enabled: "set_enabled",
          set_mult: "set_mult",
          set_b: "set_b",
          set_g: "set_g",
          set_r: "set_r"
        }
      };
      function an() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\n\n\t\t#pragma header\n\t\t\n\t\tuniform vec3 r;\n\t\tuniform vec3 g;\n\t\tuniform vec3 b;\n\t\tuniform float mult;\n\n\t\tvec4 flixel_texture2DCustom(sampler2D bitmap, vec2 coord) {\n\t\t\tvec4 color = flixel_texture2D(bitmap, coord);\n\t\t\tif (!hasTransform || color.a == 0.0 || mult == 0.0) {\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tvec4 newColor = color;\n\t\t\tnewColor.rgb = min(color.r * r + color.g * g + color.b * b, vec3(1.0));\n\t\t\tnewColor.a = color.a;\n\t\t\t\n\t\t\tcolor = mix(color, newColor, mult);\n\t\t\t\n\t\t\tif(color.a > 0.0) {\n\t\t\t\treturn vec4(color.rgb, color.a);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = flixel_texture2DCustom(bitmap, openfl_TextureCoordv);\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\t\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\t\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\t\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        Wd.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      g["shaders.RGBPaletteShader"] = an;
      an.__name__ = "shaders.RGBPaletteShader";
      an.__super__ = Wd;
      an.prototype = q(Wd.prototype, {
        __class__: an
      });
      function bn(a, b) {
        this.moveTween = null;
        this.holdTime = 0;
        this.quitting = false;
        this.offsetThing = -75;
        this.creditsStuff = [];
        this.iconArray = [];
        this.curSelected = -1;
        P.call(this, a, b);
      }
      g["states.CreditsState"] = bn;
      bn.__name__ = "states.CreditsState";
      bn.__super__ = P;
      bn.prototype = q(P.prototype, {
        create: function () {
          this.persistentUpdate = true;
          this.bg = new F().loadGraphic(D.image("menuDesat"));
          this.bg.set_antialiasing(y.data.antialiasing);
          this.add(this.bg);
          var a = this.bg;
          a.set_x((h.width - a.get_width()) / 2);
          a.set_y((h.height - a.get_height()) / 2);
          this.grpOptions = new Qa();
          this.add(this.grpOptions);
          a = D.getPath("data/credits.txt", "TEXT", null);
          if (Q.exists(a)) {
            var b = Q.getText(a).split("\n");
            for (a = 0; a < b.length;) {
              var c = b[a];
              ++a;
              c = w.replace(c, "\\n", "\n").split("::");
              if (c.length >= 5) {
                c.push("");
              }
              this.creditsStuff.push(c);
            }
            this.creditsStuff.push([""]);
          }
          b = [["Psych Engine Team"], ["Shadow Mario", "shadowmario", "Main Programmer and Head of Psych Engine", "https://ko-fi.com/shadowmario", "444444"], ["Riveren", "riveren", "Main Artist/Animator of Psych Engine", "https://twitter.com/riverennn", "14967B"], [""], ["Former Engine Members"], ["bb-panzu", "bb", "Ex-Programmer of Psych Engine", "https://twitter.com/bbsub3", "3E813A"], ["shubs", "", "Ex-Programmer of Psych Engine\nI don't support them.", "", "A1A1A1"], [""], ["Engine Contributors"], ["CrowPlexus", "crowplexus", "Input System v3, Major Help and Other PRs", "https://twitter.com/crowplexus", "A1A1A1"], ["Keoiki", "keoiki", "Note Splash Animations and Latin Alphabet", "https://twitter.com/Keoiki_", "D2D2D2"], ["SqirraRNG", "sqirra", "Crash Handler and Base code for\nChart Editor's Waveform", "https://twitter.com/gedehari", "E1843A"], ["EliteMasterEric", "mastereric", "Runtime Shaders support", "https://twitter.com/EliteMasterEric", "FFBD40"], ["PolybiusProxy", "proxy", ".MP4 Video Loader Library (hxCodec)", "https://twitter.com/polybiusproxy", "DCD294"], ["Tahir", "tahir", "Implementing & Maintaining SScript and Other PRs", "https://twitter.com/tahirk618", "A04397"], ["iFlicky", "flicky", "Composer of Psync and Tea Time\nMade the Dialogue Sounds", "https://twitter.com/flicky_i", "9E29CF"], ["KadeDev", "kade", "Fixed some issues on Chart Editor and Other PRs", "https://twitter.com/kade0912", "64A250"], ["superpowers04", "superpowers04", "LUA JIT Fork", "https://twitter.com/superpowers04", "B957ED"], ["CheemsAndFriends", "face", "Creator of FlxAnimate\n(Icon will be added later, merry christmas!)", "https://twitter.com/CheemsnFriendos", "A1A1A1"], [""], ["Funkin' Crew"], ["ninjamuffin99", "ninjamuffin99", "Programmer of Friday Night Funkin'", "https://twitter.com/ninja_muffin99", "CF2D2D"], ["PhantomArcade", "phantomarcade", "Animator of Friday Night Funkin'", "https://twitter.com/PhantomArcade3K", "FADC45"], ["evilsk8r", "evilsk8r", "Artist of Friday Night Funkin'", "https://twitter.com/evilsk8r", "5ABD4B"], ["kawaisprite", "kawaisprite", "Composer of Friday Night Funkin'", "https://twitter.com/kawaisprite", "378FC7"]];
          for (a = 0; a < b.length;) {
            c = b[a];
            ++a;
            this.creditsStuff.push(c);
          }
          a = 0;
          for (b = this.creditsStuff.length; a < b;) {
            c = a++;
            var d = !this.unselectableCheck(c);
            var e = new Gb(h.width / 2, 300, this.creditsStuff[c][0], !d);
            e.isMenuItem = true;
            e.targetY = c;
            e.changeX = false;
            e.snapToPosition();
            this.grpOptions.add(e);
            if (d) {
              if (this.creditsStuff[c][5] != null) {
                Kd.currentModDirectory = this.creditsStuff[c][5];
              }
              d = "credits/missing_icon";
              if (this.creditsStuff[c][1] != null && this.creditsStuff[c][1].length > 0) {
                var f = "credits/" + this.creditsStuff[c][1];
                if (D.fileExists("images/" + f + ".png", "IMAGE")) {
                  d = f;
                } else if (D.fileExists("images/" + f + "-pixel.png", "IMAGE")) {
                  d = f + "-pixel";
                }
              }
              f = new Yg(d);
              if (w.endsWith(d, "-pixel")) {
                f.set_antialiasing(false);
              }
              f.xAdd = e.get_width() + 10;
              f.sprTracker = e;
              this.iconArray.push(f);
              this.add(f);
              Kd.currentModDirectory = "";
              if (this.curSelected == -1) {
                this.curSelected = c;
              }
            } else {
              e.set_alignment(Jf.CENTERED);
            }
          }
          this.descBox = new Yg();
          this.descBox.makeGraphic(1, 1, -16777216);
          this.descBox.xAdd = -10;
          this.descBox.yAdd = -10;
          this.descBox.alphaMult = 0.6;
          this.descBox.set_alpha(0.6);
          this.add(this.descBox);
          this.descText = new U(50, h.height + this.offsetThing - 25, 1180, "", 32);
          this.descText.setFormat("assets/fonts/vcr.ttf", 32, -1, "center");
          a = this.descText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.descBox.sprTracker = this.descText;
          this.add(this.descText);
          a = this.bg;
          c = this.creditsStuff[this.curSelected][4];
          b = new V("[\t\n\r]", "");
          c = w.trim(b.split(c).join(""));
          if (w.startsWith(c, "0x")) {
            c = c.substring(c.length - 6);
          }
          b = eb.fromString(c);
          if (b == null) {
            b = eb.fromString("#" + c);
          }
          a.set_color(b ?? -1);
          this.intendedColor = this.bg.color;
          this.changeSelection();
          P.prototype.create.call(this);
        },
        update: function (a) {
          if (h.sound.music._volume < 0.7) {
            var b = h.sound.music;
            b.set_volume(b._volume + h.elapsed * 0.5);
          }
          if (!this.quitting) {
            if (this.creditsStuff.length > 1) {
              b = 1;
              var c = h.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(16, c.status)) {
                b = 3;
              }
              c = this.get_controls().get_UI_UP_P();
              var d = this.get_controls().get_UI_DOWN_P();
              if (c) {
                this.changeSelection(-b);
                this.holdTime = 0;
              }
              if (d) {
                this.changeSelection(b);
                this.holdTime = 0;
              }
              if (this.get_controls().get_UI_DOWN() || this.get_controls().get_UI_UP()) {
                c = Math.floor((this.holdTime - 0.5) * 10);
                this.holdTime += a;
                d = Math.floor((this.holdTime - 0.5) * 10);
                if (this.holdTime > 0.5 && d - c > 0) {
                  this.changeSelection((d - c) * (this.get_controls().get_UI_UP() ? -b : b));
                }
              }
            }
            if (this.get_controls().get_ACCEPT() && (this.creditsStuff[this.curSelected][3] == null || this.creditsStuff[this.curSelected][3].length > 4)) {
              b = this.creditsStuff[this.curSelected][3];
              if (!new V("^.\\w+?:/*", "").match(b)) {
                b = "https://" + b;
              }
              oa.getURL(new Sh(b), "_blank");
            }
            if (this.get_controls().get_BACK()) {
              if (this.colorTween != null) {
                this.colorTween.cancel();
              }
              h.sound.play(D.sound("cancelMenu"));
              P.switchState(new Ac());
              this.quitting = true;
            }
          }
          b = 0;
          for (c = this.grpOptions.members; b < c.length;) {
            d = c[b];
            ++b;
            if (!d.bold) {
              var e = Math.exp(-a * 12);
              if (d.targetY == 0) {
                var f = d.x;
                var k = 1;
                if (k == null) {
                  k = 17;
                }
                if (k == 1 || k == 17) {
                  d.set_x((h.width - d.get_width()) / 2);
                }
                if (k == 16 || k == 17) {
                  d.set_y((h.height - d.get_height()) / 2);
                }
                k = d.x - 70;
                d.set_x(k + e * (f - k));
              } else {
                f = 200 + Math.abs(d.targetY) * -40;
                d.set_x(f + e * (d.x - f));
              }
            }
          }
          P.prototype.update.call(this, a);
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = this;
          h.sound.play(D.sound("scrollMenu"), 0.4);
          do {
            this.curSelected += a;
            if (this.curSelected < 0) {
              this.curSelected = this.creditsStuff.length - 1;
            }
            if (this.curSelected >= this.creditsStuff.length) {
              this.curSelected = 0;
            }
          } while (this.unselectableCheck(this.curSelected));
          a = this.creditsStuff[this.curSelected][4];
          var c = new V("[\t\n\r]", "");
          a = w.trim(c.split(a).join(""));
          if (w.startsWith(a, "0x")) {
            a = a.substring(a.length - 6);
          }
          c = eb.fromString(a);
          if (c == null) {
            c = eb.fromString("#" + a);
          }
          a = c ?? -1;
          if (a != this.intendedColor) {
            if (this.colorTween != null) {
              this.colorTween.cancel();
            }
            this.intendedColor = a;
            this.colorTween = Da.color(this.bg, 1, this.bg.color, this.intendedColor, {
              onComplete: function (a) {
                b.colorTween = null;
              }
            });
          }
          c = a = 0;
          for (var d = this.grpOptions.members; c < d.length;) {
            var e = d[c];
            ++c;
            e.targetY = a - this.curSelected;
            if (!this.unselectableCheck(a++)) {
              e.set_alpha(0.6);
              if (e.targetY == 0) {
                e.set_alpha(1);
              }
            }
          }
          this.descText.set_text(this.creditsStuff[this.curSelected][2]);
          this.descText.set_y(h.height - this.descText.get_height() + this.offsetThing - 60);
          if (this.moveTween != null) {
            this.moveTween.cancel();
          }
          this.moveTween = Da.tween(this.descText, {
            y: this.descText.y + 75
          }, 0.25, {
            ease: Xa.sineOut
          });
          this.descBox.setGraphicSize(this.descText.get_width() + 20 | 0, this.descText.get_height() + 25 | 0);
          this.descBox.updateHitbox();
        },
        unselectableCheck: function (a) {
          return this.creditsStuff[a].length <= 1;
        },
        __class__: bn
      });
      function dh(a, b) {
        P.call(this, a, b);
      }
      g["states.FlashingState"] = dh;
      dh.__name__ = "states.FlashingState";
      dh.__super__ = P;
      dh.prototype = q(P.prototype, {
        create: function () {
          P.prototype.create.call(this);
          var a = new F().makeGraphic(h.width, h.height, -16777216);
          this.add(a);
          this.warnText = new U(0, 0, h.width, "Hey, watch out!\n\n\t\t\tThis Mod contains some flashing lights!\n\n\t\t\tPress ENTER to disable them now or go to Options Menu.\n\n\t\t\tPress ESCAPE to ignore this message.\n\n\t\t\tYou've been warned!", 32);
          this.warnText.setFormat("VCR OSD Mono", 32, -1, "center");
          a = this.warnText;
          var b = 16;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((h.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((h.height - a.get_height()) / 2);
          }
          this.add(this.warnText);
        },
        update: function (a) {
          if (!dh.leftState) {
            var b = this.get_controls().get_BACK();
            if (this.get_controls().get_ACCEPT() || b) {
              dh.leftState = true;
              Rb.skipNextTransIn = true;
              Rb.skipNextTransOut = true;
              if (b) {
                h.sound.play(D.sound("cancelMenu"));
                Da.tween(this.warnText, {
                  alpha: 0
                }, 1, {
                  onComplete: function (a) {
                    P.switchState(new yc());
                  }
                });
              } else {
                y.data.flashing = false;
                y.saveSettings();
                h.sound.play(D.sound("confirmMenu"));
                gd.flicker(this.warnText, 1, 0.1, false, true, function (a) {
                  new Ec().start(0.5, function (a) {
                    P.switchState(new yc());
                  });
                });
              }
            }
          }
          P.prototype.update.call(this, a);
        },
        __class__: dh
      });
      function Ta(a, b) {
        this._lastVisibles = [];
        this._drawDistance = 4;
        this.holdTime = 0;
        this.instPlaying = -1;
        this.iconArray = [];
        this.curPlaying = false;
        this.lerpScore = this.lerpRating = this.intendedScore = this.intendedRating = 0;
        this.curDifficulty = -1;
        this.lerpSelected = 0;
        this.songs = [];
        P.call(this, a, b);
      }
      g["states.FreeplayState"] = Ta;
      Ta.__name__ = "states.FreeplayState";
      Ta.destroyFreeplayVocals = function () {
        if (Ta.vocals != null) {
          var a = Ta.vocals;
          a.cleanup(a.autoDestroy, true);
          Ta.vocals.destroy();
        }
        Ta.vocals = null;
      };
      Ta.__super__ = P;
      Ta.prototype = q(P.prototype, {
        create: function () {
          D.clearStoredMemory();
          D.clearUnusedMemory();
          this.persistentUpdate = true;
          A.isStoryMode = false;
          ib.reloadWeekFiles(false);
          for (var a = 0, b = ib.weeksList.length; a < b;) {
            var c = a++;
            if (!this.weekIsLocked(ib.weeksList[c])) {
              var d = ib.weeksLoaded.h[ib.weeksList[c]];
              var e = [];
              var f = [];
              for (var k = 0, g = d.songs.length; k < g;) {
                var n = k++;
                e.push(d.songs[n][0]);
                f.push(d.songs[n][1]);
              }
              ib.setDirectoryFromWeek(d);
              e = 0;
              for (d = d.songs; e < d.length;) {
                k = d[e];
                ++e;
                var p = k[2];
                if (p == null || p.length < 3) {
                  p = [146, 113, 253];
                }
                f = k[0];
                k = k[1];
                g = p[0];
                n = p[1];
                p = p[2];
                var m = eb._new();
                var l = 255;
                if (l == null) {
                  l = 255;
                }
                m &= -16711681;
                m |= (g > 255 ? 255 : g < 0 ? 0 : g) << 16;
                m &= -65281;
                m |= (n > 255 ? 255 : n < 0 ? 0 : n) << 8;
                m &= -256;
                m |= p > 255 ? 255 : p < 0 ? 0 : p;
                m &= 16777215;
                m |= (l > 255 ? 255 : l < 0 ? 0 : l) << 24;
                this.addSong(f, c, k, m);
              }
            }
          }
          Kd.loadTopMod();
          this.bg = new F().loadGraphic(D.image("menuDesat"));
          this.bg.set_antialiasing(y.data.antialiasing);
          this.add(this.bg);
          a = this.bg;
          a.set_x((h.width - a.get_width()) / 2);
          a.set_y((h.height - a.get_height()) / 2);
          this.grpSongs = new Qa();
          this.add(this.grpSongs);
          a = 0;
          for (b = this.songs.length; a < b;) {
            c = a++;
            e = new Gb(90, 320, this.songs[c].songName, true);
            e.targetY = c;
            this.grpSongs.add(e);
            e.set_scaleX(Math.min(1, 980 / e.get_width()));
            e.snapToPosition();
            Kd.currentModDirectory = this.songs[c].folder;
            c = new Kf(this.songs[c].songCharacter);
            c.sprTracker = e;
            e.set_visible(e.set_active(e.isMenuItem = false));
            c.set_visible(c.set_active(false));
            this.iconArray.push(c);
            this.add(c);
          }
          ib.setDirectoryFromWeek();
          this.scoreText = new U(h.width * 0.7, 5, 0, "", 32);
          this.scoreText.setFormat("assets/fonts/vcr.ttf", 32, -1, "right");
          this.scoreBG = new F(this.scoreText.x - 6, 0).makeGraphic(1, 66, -16777216);
          this.scoreBG.set_alpha(0.6);
          this.add(this.scoreBG);
          this.diffText = new U(this.scoreText.x, this.scoreText.y + 36, 0, "", 24);
          this.diffText.set_font(this.scoreText._font);
          this.add(this.diffText);
          this.add(this.scoreText);
          this.missingTextBG = new F().makeGraphic(h.width, h.height, -16777216);
          this.missingTextBG.set_alpha(0.6);
          this.missingTextBG.set_visible(false);
          this.add(this.missingTextBG);
          this.missingText = new U(50, 0, h.width - 100, "", 24);
          this.missingText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", Sa.OUTLINE, -16777216);
          a = this.missingText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.missingText.set_visible(false);
          this.add(this.missingText);
          if (Ta.curSelected >= this.songs.length) {
            Ta.curSelected = 0;
          }
          this.bg.set_color(this.songs[Ta.curSelected].color);
          this.intendedColor = this.bg.color;
          this.lerpSelected = Ta.curSelected;
          this.curDifficulty = Math.round(Math.max(0, nb.defaultList.indexOf(Ta.lastDifficultyName)));
          this.bottomBG = new F(0, h.height - 26).makeGraphic(h.width, 26, -16777216);
          this.bottomBG.set_alpha(0.6);
          this.add(this.bottomBG);
          this.bottomString = "Press RESET to Reset your Score and Accuracy.";
          this.bottomText = new U(this.bottomBG.x, this.bottomBG.y + 4, h.width, "Press RESET to Reset your Score and Accuracy.", 16);
          this.bottomText.setFormat("assets/fonts/vcr.ttf", 16, -1, "center");
          a = this.bottomText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.bottomText);
          this.player = new dm(this);
          this.add(this.player);
          this.changeSelection();
          this.updateTexts();
          P.prototype.create.call(this);
        },
        closeSubState: function () {
          this.changeSelection(0, false);
          this.persistentUpdate = true;
          P.prototype.closeSubState.call(this);
        },
        addSong: function (a, b, c, d) {
          this.songs.push(new So(a, b, c, d));
        },
        weekIsLocked: function (a) {
          a = ib.weeksLoaded.h[a];
          if (!a.startUnlocked && a.weekBefore.length > 0) {
            if (Object.prototype.hasOwnProperty.call(Jb.weekCompleted.h, a.weekBefore)) {
              return !Jb.weekCompleted.h[a.weekBefore];
            } else {
              return true;
            }
          } else {
            return false;
          }
        },
        update: function (a) {
          if (h.sound.music._volume < 0.7) {
            var b = h.sound.music;
            b.set_volume(b._volume + h.elapsed * 0.5);
          }
          b = this.intendedScore;
          this.lerpScore = Math.floor(b + Math.exp(-a * 24) * (this.lerpScore - b));
          b = this.intendedRating;
          this.lerpRating = b + Math.exp(-a * 12) * (this.lerpRating - b);
          if (Math.abs(this.lerpScore - this.intendedScore) <= 10) {
            this.lerpScore = this.intendedScore;
          }
          if (Math.abs(this.lerpRating - this.intendedRating) <= 0.01) {
            this.lerpRating = this.intendedRating;
          }
          var c = v.string(Ni.floorDecimal(this.lerpRating * 100, 2)).split(".");
          for (c.length < 2 && c.push(""); c[1].length < 2;) {
            c[1] += "0";
          }
          b = 1;
          var d = h.keys.pressed;
          if (d.keyManager.checkStatusUnsafe(16, d.status)) {
            b = 3;
          }
          if (!this.player.playingMusic) {
            this.scoreText.set_text("PERSONAL BEST: " + this.lerpScore + " (" + c.join(".") + "%)");
            this.positionHighscore();
            if (this.songs.length > 1) {
              d = h.keys.justPressed;
              if (d.keyManager.checkStatusUnsafe(36, d.status)) {
                Ta.curSelected = 0;
                this.changeSelection();
                this.holdTime = 0;
              } else {
                d = h.keys.justPressed;
                if (d.keyManager.checkStatusUnsafe(35, d.status)) {
                  Ta.curSelected = this.songs.length - 1;
                  this.changeSelection();
                  this.holdTime = 0;
                }
              }
              if (this.get_controls().get_UI_UP_P()) {
                this.changeSelection(-b);
                this.holdTime = 0;
              }
              if (this.get_controls().get_UI_DOWN_P()) {
                this.changeSelection(b);
                this.holdTime = 0;
              }
              if (this.get_controls().get_UI_DOWN() || this.get_controls().get_UI_UP()) {
                d = Math.floor((this.holdTime - 0.5) * 10);
                this.holdTime += a;
                c = Math.floor((this.holdTime - 0.5) * 10);
                if (this.holdTime > 0.5 && c - d > 0) {
                  this.changeSelection((c - d) * (this.get_controls().get_UI_UP() ? -b : b));
                }
              }
              if (h.mouse.wheel != 0) {
                h.sound.play(D.sound("scrollMenu"), 0.2);
                this.changeSelection(-b * h.mouse.wheel, false);
              }
            }
            if (this.get_controls().get_UI_LEFT_P()) {
              this.changeDiff(-1);
              b = this.curDifficulty;
              this.songs[Ta.curSelected].lastDifficulty = nb.list[b == null ? A.storyDifficulty : b];
            } else if (this.get_controls().get_UI_RIGHT_P()) {
              this.changeDiff(1);
              b = this.curDifficulty;
              this.songs[Ta.curSelected].lastDifficulty = nb.list[b == null ? A.storyDifficulty : b];
            }
          }
          if (this.get_controls().get_BACK()) {
            if (this.player.playingMusic) {
              d = h.sound.music;
              d.cleanup(d.autoDestroy, true);
              Ta.destroyFreeplayVocals();
              h.sound.music.set_volume(0);
              this.instPlaying = -1;
              this.player.playingMusic = false;
              this.player.switchPlayMusic();
              b = h.sound;
              d = D.returnSound("music", "freakyMenu", null);
              b.playMusic(d, 0);
              Da.tween(h.sound.music, {
                volume: 1
              }, 1);
            } else {
              this.persistentUpdate = false;
              if (this.colorTween != null) {
                this.colorTween.cancel();
              }
              h.sound.play(D.sound("cancelMenu"));
              P.switchState(new Ac());
            }
          }
          if (this.get_controls().get_ACCEPT() && !this.player.playingMusic) {
            this.persistentUpdate = false;
            d = this.songs[Ta.curSelected].songName;
            c = new V("[~&\\\\;:<>#]", "");
            b = new V("[.,'\"%?!]", "");
            d = c.split(w.replace(d, " ", "-")).join("-");
            b = b.split(d).join("").toLowerCase();
            d = $a.formatSong(b, this.curDifficulty);
            zb.trace(d, {
              fileName: "source/states/FreeplayState.hx",
              lineNumber: 376,
              className: "states.FreeplayState",
              methodName: "update"
            });
            try {
              A.SONG = Md.loadFromJson(d, b);
              A.isStoryMode = false;
              A.storyDifficulty = this.curDifficulty;
              zb.trace("CURRENT WEEK: " + ib.getWeekFileName(), {
                fileName: "source/states/FreeplayState.hx",
                lineNumber: 384,
                className: "states.FreeplayState",
                methodName: "update"
              });
              if (this.colorTween != null) {
                this.colorTween.cancel();
              }
            } catch (e) {
              Pa.lastError = e;
              b = G.caught(e).unwrap();
              zb.trace("ERROR! " + v.string(b), {
                fileName: "source/states/FreeplayState.hx",
                lineNumber: 392,
                className: "states.FreeplayState",
                methodName: "update"
              });
              b = b.toString();
              if (w.startsWith(b, "[file_contents,assets/data/")) {
                b = "Missing file: " + b.substring(34, b.length - 1);
              }
              this.missingText.set_text("ERROR WHILE LOADING CHART:\n" + b);
              d = this.missingText;
              b = 16;
              if (b == null) {
                b = 17;
              }
              if (b == 1 || b == 17) {
                d.set_x((h.width - d.get_width()) / 2);
              }
              if (b == 16 || b == 17) {
                d.set_y((h.height - d.get_height()) / 2);
              }
              this.missingText.set_visible(true);
              this.missingTextBG.set_visible(true);
              h.sound.play(D.sound("cancelMenu"));
              this.updateTexts(a);
              P.prototype.update.call(this, a);
              return;
            }
            P.switchState(qc.getNextState(new A(), false));
            h.sound.music.set_volume(0);
            Ta.destroyFreeplayVocals();
          } else if (this.get_controls().get_RESET() && !this.player.playingMusic) {
            this.persistentUpdate = false;
            this.openSubState(new ck(this.songs[Ta.curSelected].songName, this.curDifficulty, this.songs[Ta.curSelected].songCharacter));
            h.sound.play(D.sound("scrollMenu"));
          }
          this.updateTexts(a);
          P.prototype.update.call(this, a);
        },
        changeDiff: function (a) {
          if (a == null) {
            a = 0;
          }
          if (!this.player.playingMusic) {
            this.curDifficulty += a;
            if (this.curDifficulty < 0) {
              this.curDifficulty = nb.list.length - 1;
            }
            if (this.curDifficulty >= nb.list.length) {
              this.curDifficulty = 0;
            }
            this.intendedScore = $a.getScore(this.songs[Ta.curSelected].songName, this.curDifficulty);
            this.intendedRating = $a.getRating(this.songs[Ta.curSelected].songName, this.curDifficulty);
            a = this.curDifficulty;
            Ta.lastDifficultyName = nb.list[a == null ? A.storyDifficulty : a];
            if (nb.list.length > 1) {
              this.diffText.set_text("< " + Ta.lastDifficultyName.toUpperCase() + " >");
            } else {
              this.diffText.set_text(Ta.lastDifficultyName.toUpperCase());
            }
            this.positionHighscore();
            this.missingText.set_visible(false);
            this.missingTextBG.set_visible(false);
          }
        },
        changeSelection: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a == null) {
            a = 0;
          }
          var c = this;
          if (!this.player.playingMusic) {
            var d = this.curDifficulty;
            this.songs[Ta.curSelected].lastDifficulty = nb.list[d == null ? A.storyDifficulty : d];
            if (b) {
              h.sound.play(D.sound("scrollMenu"), 0.4);
            }
            b = nb.list;
            Ta.curSelected += a;
            if (Ta.curSelected < 0) {
              Ta.curSelected = this.songs.length - 1;
            }
            if (Ta.curSelected >= this.songs.length) {
              Ta.curSelected = 0;
            }
            a = this.songs[Ta.curSelected].color;
            if (a != this.intendedColor) {
              if (this.colorTween != null) {
                this.colorTween.cancel();
              }
              this.intendedColor = a;
              this.colorTween = Da.color(this.bg, 1, this.bg.color, this.intendedColor, {
                onComplete: function (a) {
                  c.colorTween = null;
                }
              });
            }
            d = a = 0;
            for (var e = this.iconArray.length; d < e;) {
              var f = d++;
              this.iconArray[f].set_alpha(0.6);
            }
            this.iconArray[Ta.curSelected].set_alpha(1);
            d = 0;
            for (e = this.grpSongs.members; d < e.length;) {
              f = e[d];
              ++d;
              ++a;
              f.set_alpha(0.6);
              if (f.targetY == Ta.curSelected) {
                f.set_alpha(1);
              }
            }
            Kd.currentModDirectory = this.songs[Ta.curSelected].folder;
            A.storyWeek = this.songs[Ta.curSelected].week;
            a = null;
            if (a == null) {
              a = ib.getCurrentWeek();
            }
            a = a.difficulties;
            if (a != null && a.length > 0) {
              a = w.trim(a).split(",");
              for (f = a.length - 1; f > 0;) {
                if (a[f] != null) {
                  a[f] = w.trim(a[f]);
                  if (a[f].length < 1) {
                    r.remove(a, a[f]);
                  }
                }
                --f;
              }
              if (a.length > 0 && a[0].length > 0) {
                nb.list = a;
              }
            } else {
              nb.list = nb.defaultList.slice();
            }
            a = this.songs[Ta.curSelected].lastDifficulty;
            d = nb.list.indexOf(Ta.lastDifficultyName);
            if (a != null && b.indexOf(a) == -1 && nb.list.indexOf(a) != -1) {
              this.curDifficulty = Math.round(Math.max(0, nb.list.indexOf(a)));
            } else if (d > -1) {
              this.curDifficulty = d;
            } else if (nb.list.indexOf(nb.defaultDifficulty) != -1) {
              this.curDifficulty = Math.round(Math.max(0, nb.defaultList.indexOf(nb.defaultDifficulty)));
            } else {
              this.curDifficulty = 0;
            }
            this.changeDiff();
            d = this.curDifficulty;
            this.songs[Ta.curSelected].lastDifficulty = nb.list[d == null ? A.storyDifficulty : d];
          }
        },
        _updateSongLastDifficulty: function () {
          var a = this.curDifficulty;
          this.songs[Ta.curSelected].lastDifficulty = nb.list[a == null ? A.storyDifficulty : a];
        },
        positionHighscore: function () {
          this.scoreText.set_x(h.width - this.scoreText.get_width() - 6);
          this.scoreBG.scale.set_x(h.width - this.scoreText.x + 6);
          this.scoreBG.set_x(h.width - this.scoreBG.scale.x / 2);
          this.diffText.set_x(this.scoreBG.x + this.scoreBG.get_width() / 2 | 0);
          var a = this.diffText;
          a.set_x(a.x - this.diffText.get_width() / 2);
        },
        updateTexts: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = Ta.curSelected;
          this.lerpSelected = b + Math.exp(-a * 9.6) * (this.lerpSelected - b);
          a = 0;
          for (b = this._lastVisibles; a < b.length;) {
            var c = b[a];
            ++a;
            this.grpSongs.members[c].set_visible(this.grpSongs.members[c].set_active(false));
            this.iconArray[c].set_visible(this.iconArray[c].set_active(false));
          }
          this._lastVisibles = [];
          b = Math.round(Math.max(0, Math.min(this.songs.length, this.lerpSelected + this._drawDistance)));
          for (a = Math.round(Math.max(0, Math.min(this.songs.length, this.lerpSelected - this._drawDistance))); a < b;) {
            c = a++;
            var d = this.grpSongs.members[c];
            d.set_visible(d.set_active(true));
            d.set_x((d.targetY - this.lerpSelected) * d.distancePerItem.x + d.startPosition.x);
            d.set_y((d.targetY - this.lerpSelected) * 1.3 * d.distancePerItem.y + d.startPosition.y);
            d = this.iconArray[c];
            d.set_visible(d.set_active(true));
            this._lastVisibles.push(c);
          }
        },
        destroy: function () {
          P.prototype.destroy.call(this);
          h.autoPause = y.data.autoPause;
          if (h.sound.music._channel == null) {
            var a = h.sound;
            var b = D.returnSound("music", "freakyMenu", null);
            a.playMusic(b);
          }
        },
        __class__: Ta
      });
      function So(a, b, c, d) {
        this.lastDifficulty = null;
        this.folder = "";
        this.color = -7179779;
        this.songName = a;
        this.week = b;
        this.songCharacter = c;
        this.color = d;
        this.folder = Kd.currentModDirectory;
        if (this.folder == null) {
          this.folder = "";
        }
      }
      g["states.SongMetadata"] = So;
      So.__name__ = "states.SongMetadata";
      So.prototype = {
        __class__: So
      };
      function qc(a, b, c) {
        this.targetShit = 0;
        this.stopMusic = false;
        P.call(this);
        this.target = a;
        this.stopMusic = b;
        this.directory = c;
      }
      g["states.LoadingState"] = qc;
      qc.__name__ = "states.LoadingState";
      qc.getSongPath = function () {
        return "songs:assets/songs/" + w.replace(A.SONG.song.toLowerCase(), " ", "-") + "/Inst.mp3";
      };
      qc.getVocalPath = function () {
        return "songs:assets/songs/" + w.replace(A.SONG.song.toLowerCase(), " ", "-") + "/Voices.mp3";
      };
      qc.loadAndSwitchState = function (a, b) {
        if (b == null) {
          b = false;
        }
        P.switchState(qc.getNextState(a, b));
      };
      qc.getNextState = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = "shared";
        var d = we.forceNextDirectory;
        we.forceNextDirectory = null;
        if (d != null && d.length > 0 && d != "") {
          c = d;
        }
        D.setCurrentLevel(c);
        zb.trace("Setting asset folder to " + c, {
          fileName: "source/states/LoadingState.hx",
          lineNumber: 162,
          className: "states.LoadingState",
          methodName: "getNextState"
        });
        d = false;
        if (A.SONG != null) {
          d = qc.isSoundLoaded(qc.getSongPath()) && (!A.SONG.needsVoices || qc.isSoundLoaded(qc.getVocalPath())) && qc.isLibraryLoaded("shared") && qc.isLibraryLoaded(c);
        }
        if (!d) {
          return new qc(a, b, c);
        }
        if (b && h.sound.music != null) {
          b = h.sound.music;
          b.cleanup(b.autoDestroy, true);
        }
        return a;
      };
      qc.isSoundLoaded = function (a) {
        return Q.cache.hasSound(a);
      };
      qc.isLibraryLoaded = function (a) {
        return Q.getLibrary(a) != null;
      };
      qc.initSongsManifest = function () {
        var a = new Id();
        var b = sa.getLibrary("songs");
        if (b != null) {
          return Bb.withValue(b);
        }
        b = "songs";
        var c = null;
        c = sa.libraryPaths;
        if (Object.prototype.hasOwnProperty.call(c.h, "songs")) {
          b = c.h.songs;
          c = Kc.directory(b);
        } else {
          if (w.endsWith(b, ".bundle")) {
            c = b;
            b += "/library.json";
          } else {
            c = Kc.directory(b);
          }
          b = sa.__cacheBreak(b);
        }
        Rd.loadFromFile(b, c).onComplete(function (b) {
          if (b == null) {
            a.error("Cannot parse asset manifest for library \"songs\"");
          } else {
            b = hc.fromManifest(b);
            if (b == null) {
              a.error("Cannot open library \"songs\"");
            } else {
              sa.libraries.h.songs = b;
              b.onChange.add((u = sa.onChange, m(u, u.dispatch)));
              a.completeWith(Bb.withValue(b));
            }
          }
        }).onError(function (b) {
          a.error("There is no asset library with an ID of \"songs\"");
        });
        return a.future;
      };
      qc.__super__ = P;
      qc.prototype = q(P.prototype, {
        create: function () {
          var a = this;
          var b = new F(0, 0).makeGraphic(h.width, h.height, -3473587);
          b.set_antialiasing(y.data.antialiasing);
          this.add(b);
          this.funkay = new F(0, 0).loadGraphic(D.getPath("images/funkay.png", "IMAGE"));
          this.funkay.setGraphicSize(0, h.height);
          this.funkay.updateHitbox();
          this.add(this.funkay);
          this.funkay.set_antialiasing(y.data.antialiasing);
          b = this.funkay.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          b = this.funkay;
          b.set_x((h.width - b.get_width()) / 2);
          b.set_y((h.height - b.get_height()) / 2);
          b = this.loadBar = new F(0, h.height - 20).makeGraphic(h.width, 10, -59694);
          var c = 1;
          if (c == null) {
            c = 17;
          }
          if (c == 1 || c == 17) {
            b.set_x((h.width - b.get_width()) / 2);
          }
          if (c == 16 || c == 17) {
            b.set_y((h.height - b.get_height()) / 2);
          }
          this.add(this.loadBar);
          qc.initSongsManifest().onComplete(function (b) {
            a.callbacks = new To(m(a, a.onLoad));
            var c = a.callbacks.add("introComplete");
            if (A.SONG != null) {
              a.checkLoadSong(qc.getSongPath());
              if (A.SONG.needsVoices) {
                a.checkLoadSong(qc.getVocalPath());
              }
            }
            if (a.directory != null && a.directory.length > 0 && a.directory != "shared") {
              a.checkLibrary(a.directory);
            }
            h.camera.fade(h.camera.bgColor, 0.5, true);
            new Ec().start(1.5, function (a) {
              c();
            });
          });
        },
        checkLoadSong: function (a) {
          if (!Q.cache.hasSound(a)) {
            Q.getLibrary("songs");
            a.split(":").pop();
            var b = this.callbacks.add("song:" + a);
            Q.loadSound(a).onComplete(function (a) {
              b();
            });
          }
        },
        checkLibrary: function (a) {
          zb.trace(Q.hasLibrary(a), {
            fileName: "source/states/LoadingState.hx",
            lineNumber: 96,
            className: "states.LoadingState",
            methodName: "checkLibrary"
          });
          if (Q.getLibrary(a) == null) {
            if (!Object.prototype.hasOwnProperty.call(sa.libraryPaths.h, a)) {
              throw new G("Missing library: " + a);
            }
            var b = this.callbacks.add("library:" + a);
            Q.loadLibrary(a).onComplete(function (a) {
              b();
            });
          }
        },
        update: function (a) {
          P.prototype.update.call(this, a);
          this.funkay.setGraphicSize(h.width * 0.88 + (this.funkay.get_width() - h.width * 0.88) * 0.9 | 0);
          this.funkay.updateHitbox();
          if (this.get_controls().get_ACCEPT()) {
            this.funkay.setGraphicSize(this.funkay.get_width() + 60 | 0);
            this.funkay.updateHitbox();
          }
          if (this.callbacks != null) {
            this.targetShit = bc.remapToRange(this.callbacks.numRemaining / this.callbacks.length, 1, 0, 0, 1);
            a = this.loadBar;
            a.scale.set_x(a.scale.x + (this.targetShit - this.loadBar.scale.x) * 0.5);
          }
        },
        onLoad: function () {
          if (this.stopMusic && h.sound.music != null) {
            var a = h.sound.music;
            a.cleanup(a.autoDestroy, true);
          }
          P.switchState(this.target);
        },
        destroy: function () {
          P.prototype.destroy.call(this);
          this.callbacks = null;
        },
        __class__: qc
      });

  function To(_0x2f96c5, _0x1f55d7) {
    this.fired = [];
    this.unfired = new ua();
    this.length = this.numRemaining = 0;
    this.logId = null;
    this.callback = _0x2f96c5;
    this.logId = _0x1f55d7;
  }
  g["states.MultiCallback"] = To;
  To.__name__ = "states.MultiCallback";
  To.prototype = {
    add: function (_0x91ac06) {
      if (_0x91ac06 == null) {
        _0x91ac06 = "untitled";
      }
      var _0x5031bb = this;
      _0x91ac06 = "" + this.length + ":" + _0x91ac06;
      this.length++;
      this.numRemaining++;
      var _0x57e9e9 = null;
      _0x57e9e9 = function () {
        if (Object.prototype.hasOwnProperty.call(_0x5031bb.unfired.h, _0x91ac06)) {
          var _0x5375b2 = _0x5031bb.unfired;
          if (Object.prototype.hasOwnProperty.call(_0x5375b2.h, _0x91ac06)) {
            delete _0x5375b2.h[_0x91ac06];
          }
          _0x5031bb.fired.push(_0x91ac06);
          _0x5031bb.numRemaining--;
          if (_0x5031bb.logId != null && _0x5031bb.logId != null) {
            zb.trace("" + _0x5031bb.logId + ": fired " + (_0x91ac06 + ", " + _0x5031bb.numRemaining + " remaining"), {
              fileName: "source/states/LoadingState.hx",
              lineNumber: 316,
              className: "states.MultiCallback",
              methodName: "log"
            });
          }
          if (_0x5031bb.numRemaining == 0) {
            if (_0x5031bb.logId != null && _0x5031bb.logId != null) {
              zb.trace("" + _0x5031bb.logId + ": all callbacks fired", {
                fileName: "source/states/LoadingState.hx",
                lineNumber: 316,
                className: "states.MultiCallback",
                methodName: "log"
              });
            }
            _0x5031bb.callback();
          }
        } else if (_0x5031bb.logId != null) {
          zb.trace("" + _0x5031bb.logId + ": already fired " + _0x91ac06, {
            fileName: "source/states/LoadingState.hx",
            lineNumber: 316,
            className: "states.MultiCallback",
            methodName: "log"
          });
        }
      };
      return this.unfired.h[_0x91ac06] = _0x57e9e9;
    },
    __class__: To
  };


  function Ac(_0x58c76c, _0x106081) {
    this.selectedSomethin = !1;
    this.optionShit = ["freeplay", "credits", "options"];
    P.call(this, _0x58c76c, _0x106081);
  }
  g["states.MainMenuState"] = Ac;
  Ac.__name__ = "states.MainMenuState";
  Ac.__super__ = P;
  Ac.prototype = q(P.prototype, {
    create: function () {
      Kd.loadTopMod();
      this.transIn = Rb.defaultTransIn;
      this.transOut = Rb.defaultTransOut;
      this.persistentUpdate = this.persistentDraw = !0;
      var _0x174e27 = Math.max(0.25 - (this.optionShit.length - 4) * 0.05, 0.1);
      var _0xf92541 = new F(-80).loadGraphic(D.image("menuBG"));
      _0xf92541.set_antialiasing(y.data.antialiasing);
      var _0x31019e = _0xf92541.scrollFactor;
      var _0x3b848b = 0;
      var _0x2dbaaf = _0x174e27;
      if (_0x2dbaaf == null) {
        _0x2dbaaf = 0;
      }
      if (_0x3b848b == null) {
        _0x3b848b = 0;
      }
      _0x31019e.set_x(_0x3b848b);
      _0x31019e.set_y(_0x2dbaaf);
      _0xf92541.setGraphicSize(_0xf92541.get_width() * 1.175 | 0);
      _0xf92541.updateHitbox();
      _0xf92541.set_x((h.width - _0xf92541.get_width()) / 2);
      _0xf92541.set_y((h.height - _0xf92541.get_height()) / 2);
      this.add(_0xf92541);
      this.camFollow = new $b(0, 0, 1, 1);
      this.add(this.camFollow);
      this.magenta = new F(-80).loadGraphic(D.image("menuDesat"));
      this.magenta.set_antialiasing(y.data.antialiasing);
      _0x31019e = this.magenta.scrollFactor;
      _0x3b848b = 0;
      _0x2dbaaf = _0x174e27;
      if (_0x2dbaaf == null) {
        _0x2dbaaf = 0;
      }
      if (_0x3b848b == null) {
        _0x3b848b = 0;
      }
      _0x31019e.set_x(_0x3b848b);
      _0x31019e.set_y(_0x2dbaaf);
      this.magenta.setGraphicSize(this.magenta.get_width() * 1.175 | 0);
      this.magenta.updateHitbox();
      _0x31019e = this.magenta;
      _0x31019e.set_x((h.width - _0x31019e.get_width()) / 2);
      _0x31019e.set_y((h.height - _0x31019e.get_height()) / 2);
      this.magenta.set_visible(!1);
      this.magenta.set_color(-167525);
      this.add(this.magenta);
      this.menuItems = new Qa();
      this.add(this.menuItems);
      _0x174e27 = 0;
      for (_0xf92541 = this.optionShit.length; _0x174e27 < _0xf92541;) {
        _0x31019e = _0x174e27++;
        var _0x3d55a9 = new F(0, _0x31019e * 160 + (108 - (Math.max(this.optionShit.length, 4) - 4) * 80));
        _0x3d55a9.set_antialiasing(y.data.antialiasing);
        _0x3b848b = "mainmenu/menu_" + this.optionShit[_0x31019e];
        _0x2dbaaf = D.image(_0x3b848b, null, !0);
        _0x3d55a9.set_frames(ob.fromSparrow(_0x2dbaaf, D.getPath("images/" + _0x3b848b + ".xml", null, null)));
        _0x3d55a9.animation.addByPrefix("idle", this.optionShit[_0x31019e] + " basic", 24);
        _0x3d55a9.animation.addByPrefix("selected", this.optionShit[_0x31019e] + " white", 24);
        _0x3d55a9.animation.play("idle");
        this.menuItems.add(_0x3d55a9);
        _0x2dbaaf = (this.optionShit.length - 4) * 0.135;
        if (this.optionShit.length < 6) {
          _0x2dbaaf = 0;
        }
        _0x31019e = _0x3d55a9.scrollFactor;
        _0x3b848b = 0;
        if (_0x2dbaaf == null) {
          _0x2dbaaf = 0;
        }
        if (_0x3b848b == null) {
          _0x3b848b = 0;
        }
        _0x31019e.set_x(_0x3b848b);
        _0x31019e.set_y(_0x2dbaaf);
        _0x3d55a9.updateHitbox();
        _0x31019e = 1;
        if (_0x31019e == null) {
          _0x31019e = 17;
        }
        if (_0x31019e == 1 || _0x31019e == 17) {
          _0x3d55a9.set_x((h.width - _0x3d55a9.get_width()) / 2);
        }
        if (_0x31019e == 16 || _0x31019e == 17) {
          _0x3d55a9.set_y((h.height - _0x3d55a9.get_height()) / 2);
        }
      }
      _0x174e27 = new F(5, h.height - 80).loadGraphic(D.image("snokido"));
      _0x31019e = _0x174e27.scrollFactor;
      _0x2dbaaf = _0x3b848b = 0;
      if (_0x2dbaaf == null) {
        _0x2dbaaf = 0;
      }
      if (_0x3b848b == null) {
        _0x3b848b = 0;
      }
      _0x31019e.set_x(_0x3b848b);
      _0x31019e.set_y(_0x2dbaaf);
      _0x174e27.setGraphicSize(_0x174e27.get_width() * 0.7 | 0);
      _0x174e27.updateHitbox();
      _0x174e27.set_antialiasing(y.data.antialiasing);
     
      _0x174e27 = new U(12, h.height - 64, 0, "Psych Engine", 12);
      _0x31019e = _0x174e27.scrollFactor;
      _0x31019e.set_x(0);
      _0x31019e.set_y(0);
      _0x174e27.setFormat("VCR OSD Mono", 16, -1, "left", Sa.OUTLINE, -16777216);
      this.add(_0x174e27);
      _0x174e27 = new U(12, h.height - 44, 0, "Friday Night Funkin'", 12);
      _0x31019e = _0x174e27.scrollFactor;
      _0x31019e.set_x(0);
      _0x31019e.set_y(0);
      _0x174e27.setFormat("VCR OSD Mono", 16, -1, "left", Sa.OUTLINE, -16777216);
      this.add(_0x174e27);
      _0x174e27 = new U(12, h.height - 24, 0, "patched by c1tcher", 12);
      _0x31019e = _0x174e27.scrollFactor;
      _0x31019e.set_x(0);
      _0x31019e.set_y(0);
      _0x174e27.setFormat("VCR OSD Mono", 16, -1, "left", Sa.OUTLINE, -16777216);
      this.add(_0x174e27);
      this.changeItem();
      P.prototype.create.call(this);
      h.camera.follow(this.camFollow, null, 9);
    },
    update: function (_0x40c234) {
      var _0x5bd08f = this;
      if (h.sound.music._volume < 0.8) {
        var _0x4264a1 = h.sound.music;
        _0x4264a1.set_volume(_0x4264a1._volume + _0x40c234 * 0.5);
        if (Ta.vocals != null) {
          _0x4264a1 = Ta.vocals;
          _0x4264a1.set_volume(_0x4264a1._volume + _0x40c234 * 0.5);
        }
      }
      if (!this.selectedSomethin && (this.get_controls().get_UI_UP_P() && this.changeItem(-1), this.get_controls().get_UI_DOWN_P() && this.changeItem(1), this.get_controls().get_BACK() && (this.selectedSomethin = !0, h.sound.play(D.sound("cancelMenu")), P.switchState(new yc())), this.get_controls().get_ACCEPT())) {
        h.sound.play(D.sound("confirmMenu"));
        if (this.optionShit[Ac.curSelected] == "donate") {
          _0x4264a1 = "https://ninja-muffin24.itch.io/funkin";
          if (!new V("^.\\w+?:/*", "").match(_0x4264a1)) {
            _0x4264a1 = "https://" + _0x4264a1;
          }
          oa.getURL(new Sh(_0x4264a1), "_blank");
        } else {
          this.selectedSomethin = !0;
          if (y.data.flashing) {
            gd.flicker(this.magenta, 1.1, 0.15, false);
          }
          gd.flicker(this.menuItems.members[Ac.curSelected], 1, 0.06, !1, !1, function (_0x1bf6bc) {
            switch (_0x5bd08f.optionShit[Ac.curSelected]) {
              case "credits":
                P.switchState(new bn());
                break;
              case "freeplay":
                P.switchState(new Ta());
                break;
              case "options":
                P.switchState(new jd());
                jd.onPlayState = !1;
                if (A.SONG != null) {
                  A.SONG.arrowSkin = null;
                  A.SONG.splashSkin = null;
                  A.stageUI = "normal";
                }
                break;
              case "story_mode":
                P.switchState(new Jb());
            }
          });
          _0x4264a1 = 0;
          for (var _0x2b3490 = this.menuItems.members.length; _0x4264a1 < _0x2b3490;) {
            var _0xbb816d = [_0x4264a1++];
            var _0x1d9bba = {
              alpha: 0
            };
            if (_0xbb816d[0] != Ac.curSelected) {
              Da.tween(this.menuItems.members[_0xbb816d[0]], _0x1d9bba, 0.4, {
                ease: Xa.quadOut,
                onComplete: function (_0x4ee85c) {
                  return function (_0x34b345) {
                    _0x5bd08f.menuItems.members[_0x4ee85c[0]].kill();
                  };
                }(_0xbb816d)
              });
            }
          }
        }
      }
      P.prototype.update.call(this, _0x40c234);
    },
    changeItem: function (_0x368c6d) {
      if (_0x368c6d == null) {
        _0x368c6d = 0;
      }
      h.sound.play(D.sound("scrollMenu"));
      this.menuItems.members[Ac.curSelected].animation.play("idle");
      this.menuItems.members[Ac.curSelected].updateHitbox();
      var _0x374232 = this.menuItems.members[Ac.curSelected];
      var _0xfb0340 = 1;
      if (_0xfb0340 == null) {
        _0xfb0340 = 17;
      }
      if (_0xfb0340 == 1 || _0xfb0340 == 17) {
        _0x374232.set_x((h.width - _0x374232.get_width()) / 2);
      }
      if (_0xfb0340 == 16 || _0xfb0340 == 17) {
        _0x374232.set_y((h.height - _0x374232.get_height()) / 2);
      }
      Ac.curSelected += _0x368c6d;
      if (Ac.curSelected >= this.menuItems.length) {
        Ac.curSelected = 0;
      }
      if (Ac.curSelected < 0) {
        Ac.curSelected = this.menuItems.length - 1;
      }
      this.menuItems.members[Ac.curSelected].animation.play("selected");
      this.menuItems.members[Ac.curSelected].centerOffsets();
      _0x374232 = this.menuItems.members[Ac.curSelected];
      _0xfb0340 = 1;
      if (_0xfb0340 == null) {
        _0xfb0340 = 17;
      }
      if (_0xfb0340 == 1 || _0xfb0340 == 17) {
        _0x374232.set_x((h.width - _0x374232.get_width()) / 2);
      }
      if (_0xfb0340 == 16 || _0xfb0340 == 17) {
        _0x374232.set_y((h.height - _0x374232.get_height()) / 2);
      }
      this.camFollow.setPosition(this.menuItems.members[Ac.curSelected].getGraphicMidpoint().x, this.menuItems.members[Ac.curSelected].getGraphicMidpoint().y - (this.menuItems.length > 4 ? this.menuItems.length * 8 : 0));
    },
    __class__: Ac
  });

      function A(a, b) {
        this.ratingName = "?";
        this.lastStepHit = this.lastBeatHit = -1;
        this.strumsBlocked = [];
        this.showComboNum = this.showRating = true;
        this.showCombo = false;
        this.totalPlayed = this.totalNotesHit = 0;
        this.isDead = this.transitioning = false;
        this.allowDebugKeys = this.iconsAnimations = true;
        this.freezeCamera = false;
        this.canPause = true;
        this.startedCountdown = false;
        this.canReset = true;
        this.skipArrowStartTween = this.paused = false;
        this.eventsPushed = [];
        this.noteTypes = [];
        this.debugNum = 0;
        this.finishTimer = null;
        this.dialogueCount = 0;
        this.zoome = false;
        this.ofs = 5;
        this.yy2 = 496;
        this.xx2 = 758;
        this.yy = 496;
        this.xx = 618;
        this.followChars = true;
        this.useDirectionalCamera = this.mustHit = false;
        this.defaultOpponentStrumY = [];
        this.defaultOpponentStrumX = [];
        this.defaultPlayerStrumY = [];
        this.defaultPlayerStrumX = [];
        this.startCallback = this.endCallback = null;
        this.introSoundsSuffix = "";
        this.boyfriendIdled = false;
        this.boyfriendIdleTime = 0;
        this.keysPressed = [];
        this.boyfriendCameraOffset = this.opponentCameraOffset = this.girlfriendCameraOffset = null;
        this.songLength = 0;
        this.inCutscene = this.skipCountdown = false;
        this.singAnimations = ["singLEFT", "singDOWN", "singUP", "singRIGHT"];
        this.defaultCamZoom = 1.05;
        this.songScore = this.songHits = this.songMisses = 0;
        this.cameraSpeed = 1;
        this.botplaySine = 0;
        this.guitarHeroSustains = this.instakillOnMiss = this.cpuControlled = this.practiceMode = false;
        this.healthGain = this.healthLoss = 1;
        this.updateTime = true;
        this.generatedMusic = this.endingSong = this.startingSong = false;
        this.ratingsData = fg.loadDefault();
        this.combo = this.songPercent = 0;
        this.gfSpeed = this.health = 1;
        this.curSong = "";
        this.camZoomingMult = this.camZoomingDecay = 1;
        this.camZooming = false;
        this.eventNotes = [];
        this.unspawnNotes = [];
        this.dad = this.gf = this.boyfriend = null;
        this.spawnTime = 2000;
        this.playbackRate = 1;
        this.noteKillOffset = 350;
        this.songSpeedType = "multiplicative";
        this.songSpeed = 1;
        this.GF_Y = 130;
        this.GF_X = 400;
        this.BF_Y = this.DAD_X = this.DAD_Y = 100;
        this.BF_X = 770;
        this.variables = new ua();
        this.gfMap = new ua();
        this.dadMap = new ua();
        this.boyfriendMap = new ua();
        this.isCameraOnForcedPos = false;
        P.call(this, a, b);
      }
      g["states.PlayState"] = A;
      A.__name__ = "states.PlayState";
      A.__properties__ = {
        get_isPixelStage: "get_isPixelStage"
      };
      A.get_isPixelStage = function () {
        if (A.stageUI != "pixel") {
          return w.endsWith(A.stageUI, "-pixel");
        } else {
          return true;
        }
      };
      A.sortByTime = function (a, b) {
        a = a.strumTime;
        b = b.strumTime;
        var c = 0;
        if (a < b) {
          c = -1;
        } else if (a > b) {
          c = 1;
        }
        return c;
      };
      A.sortHitNotes = function (a, b) {
        if (a.lowPriority && !b.lowPriority) {
          return 1;
        }
        if (!a.lowPriority && b.lowPriority) {
          return -1;
        }
        a = a.strumTime;
        b = b.strumTime;
        var c = 0;
        if (a < b) {
          c = -1;
        } else if (a > b) {
          c = 1;
        }
        return c;
      };
      A.getKeyFromEvent = function (a, b) {
        if (b != -1) {
          for (var c = 0, d = a.length; c < d;) {
            var e = c++;
            for (var f = Aa.instance.keyboardBinds.h[a[e]], h = 0; h < f.length;) {
              var g = f[h];
              ++h;
              if (b == g) {
                return e;
              }
            }
          }
        }
        return -1;
      };
      A.__super__ = P;
      A.prototype = q(P.prototype, {
        create: function () {
          var a = this;
          D.clearStoredMemory();
          this.startCallback = m(this, this.startCountdown);
          this.endCallback = m(this, this.endSong);
          A.instance = this;
          var b = Te.songName = null;
          b = y.defaultData.gameplaySettings.h.songspeed;
          this.set_playbackRate(Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "songspeed") ? y.data.gameplaySettings.h.songspeed : b);
          this.keysArray = ["note_left", "note_down", "note_up", "note_right"];
          if (h.sound.music != null) {
            b = h.sound.music;
            b.cleanup(b.autoDestroy, true);
          }
          b = null;
          b = y.defaultData.gameplaySettings.h.healthgain;
          this.healthGain = Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "healthgain") ? y.data.gameplaySettings.h.healthgain : b;
          b = null;
          b = y.defaultData.gameplaySettings.h.healthloss;
          this.healthLoss = Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "healthloss") ? y.data.gameplaySettings.h.healthloss : b;
          b = null;
          b = y.defaultData.gameplaySettings.h.instakill;
          this.instakillOnMiss = Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "instakill") ? y.data.gameplaySettings.h.instakill : b;
          b = null;
          b = y.defaultData.gameplaySettings.h.practice;
          this.practiceMode = Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "practice") ? y.data.gameplaySettings.h.practice : b;
          b = null;
          b = y.defaultData.gameplaySettings.h.botplay;
          this.cpuControlled = Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "botplay") ? y.data.gameplaySettings.h.botplay : b;
          this.guitarHeroSustains = y.data.guitarHeroSustains;
          this.camGame = this.initPsychCamera();
          this.camHUD = new Tb();
          this.camOther = new Tb();
          this.camHUD.bgColor &= 16777215;
          this.camHUD.bgColor |= 0;
          this.camOther.bgColor &= 16777215;
          this.camOther.bgColor |= 0;
          this.camGame.set_alpha(1);
          this.camHUD.set_alpha(1);
          this.camOther.set_alpha(1);
          h.cameras.add(this.camHUD, false);
          h.cameras.add(this.camOther, false);
          this.grpNoteSplashes = new Qa();
          this.persistentDraw = this.persistentUpdate = true;
          if (A.SONG == null) {
            A.SONG = Md.loadFromJson("tutorial");
          }
          O.mapBPMChanges(A.SONG);
          O.set_bpm(A.SONG.bpm);
          Lc.resetVariables();
          var c = A.SONG.song;
          var d = new V("[~&\\\\;:<>#]", "");
          b = new V("[.,'\"%?!]", "");
          c = d.split(w.replace(c, " ", "-")).join("-");
          this.curSong = this.songName = b.split(c).join("").toLowerCase();
          if (A.SONG.stage == null || A.SONG.stage.length < 1) {
            A.SONG.stage = we.vanillaSongStage(this.songName);
          }
          A.curStage = A.SONG.stage;
          c = we.getStageFile(A.curStage);
          if (c == null) {
            c = we.dummy();
          }
          this.defaultCamZoom = c.defaultZoom;
          A.stageUI = "normal";
          if (c.stageUI != null && w.trim(c.stageUI).length > 0) {
            A.stageUI = c.stageUI;
          } else if (c.isPixelStage) {
            A.stageUI = "pixel";
          }
          this.BF_X = c.boyfriend[0];
          this.BF_Y = c.boyfriend[1];
          this.GF_X = c.girlfriend[0];
          this.GF_Y = c.girlfriend[1];
          this.DAD_X = c.opponent[0];
          this.DAD_Y = c.opponent[1];
          if (c.camera_speed != null) {
            this.cameraSpeed = c.camera_speed;
          }
          this.boyfriendCameraOffset = c.camera_boyfriend;
          if (this.boyfriendCameraOffset == null) {
            this.boyfriendCameraOffset = [0, 0];
          }
          this.opponentCameraOffset = c.camera_opponent;
          if (this.opponentCameraOffset == null) {
            this.opponentCameraOffset = [0, 0];
          }
          this.girlfriendCameraOffset = c.camera_girlfriend;
          if (this.girlfriendCameraOffset == null) {
            this.girlfriendCameraOffset = [0, 0];
          }
          this.boyfriendGroup = new La(this.BF_X, this.BF_Y);
          this.dadGroup = new La(this.DAD_X, this.DAD_Y);
          this.gfGroup = new La(this.GF_X, this.GF_Y);
          switch (A.curStage) {
            case "factory":
              this.background = new pd("background", -725, -450);
              b = this.background.scale;
              var e = 3.1;
              d = 3;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              b.set_x(e);
              b.set_y(d);
              this.background.updateHitbox();
              this.background.set_cameras([this.get_camera()]);
              this.background.set_color(-16777216);
              this.add(this.background);
              var f = new pd("overlay1", 0, 0);
              f.set_cameras([this.camOther]);
              b = f.scale;
              e = 0.33;
              d = 0.235;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              b.set_x(e);
              b.set_y(d);
              f.updateHitbox();
              f.set_alpha(0.6);
              this.add(f);
              this.END = new pd("END", 0, 0);
              this.END.set_cameras([this.camOther]);
              this.END.set_color(-11513776);
              b = this.END.scale;
              d = e = 0.7;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              b.set_x(e);
              b.set_y(d);
              this.END.updateHitbox();
              b = this.END;
              b.set_x((h.width - b.get_width()) / 2);
              b.set_y((h.height - b.get_height()) / 2);
              this.END.set_alpha(0.00001);
              this.add(this.END);
              b = this.countdown = new F(0, 0);
              d = D.image("countdown", null, true);
              b.set_frames(ob.fromSparrow(d, D.getPath("images/countdown.xml", null, null)));
              this.countdown.set_antialiasing(y.data.antialiasing);
              this.countdown.animation.addByPrefix("idle", "idle", 43, false);
              b = this.countdown.scale;
              d = e = 1.65;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              b.set_x(e);
              b.set_y(d);
              this.countdown.updateHitbox();
              this.countdown.set_cameras([this.camOther]);
              this.add(this.countdown);
              break;
            case "stage":
              new bk();
          }
          if (A.get_isPixelStage()) {
            this.introSoundsSuffix = "-pixel";
          }
          this.add(this.gfGroup);
          this.add(this.dadGroup);
          this.add(this.boyfriendGroup);
          if (!c.hide_girlfriend) {
            if (A.SONG.gfVersion == null || A.SONG.gfVersion.length < 1) {
              A.SONG.gfVersion = "gf";
            }
            this.gf = new id(0, 0, A.SONG.gfVersion);
            this.startCharacterPos(this.gf);
            b = this.gf.scrollFactor;
            d = e = 0.95;
            if (d == null) {
              d = 0;
            }
            if (e == null) {
              e = 0;
            }
            b.set_x(e);
            b.set_y(d);
            this.gfGroup.add(this.gf);
          }
          this.dad = new id(0, 0, A.SONG.player2);
          this.startCharacterPos(this.dad, true);
          this.dadGroup.add(this.dad);
          this.boyfriend = new id(0, 0, A.SONG.player1, true);
          this.startCharacterPos(this.boyfriend);
          this.boyfriendGroup.add(this.boyfriend);
          e = this.girlfriendCameraOffset[0];
          d = this.girlfriendCameraOffset[1];
          if (d == null) {
            d = 0;
          }
          if (e == null) {
            e = 0;
          }
          b = e;
          c = d;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          c = W.pool.get().set(b, c);
          c._inPool = false;
          if (this.gf != null) {
            c.set_x(c.x + (this.gf.getGraphicMidpoint().x + this.gf.cameraPosition[0]));
            c.set_y(c.y + (this.gf.getGraphicMidpoint().y + this.gf.cameraPosition[1]));
          }
          if (w.startsWith(this.dad.curCharacter, "gf")) {
            this.dad.setPosition(this.GF_X, this.GF_Y);
            if (this.gf != null) {
              this.gf.set_visible(false);
            }
          }
          if (A.curStage == "factory") {
            this.spotlight = new pd("spotlightNEW", 325, -300);
            this.spotlight.set_alpha(0.00001);
            b = this.spotlight.scale;
            e = 1;
            d = 1.5;
            if (d == null) {
              d = 0;
            }
            if (e == null) {
              e = 0;
            }
            b.set_x(e);
            b.set_y(d);
            this.spotlight.updateHitbox();
            this.spotlight.set_blend(0);
            this.spotlight.set_angle(-20);
            this.add(this.spotlight);
            this.ending = new F().makeGraphic(5012, 5012, -16777216);
            this.ending.set_cameras([this.camHUD]);
            b = this.ending.scrollFactor;
            d = e = 0;
            if (d == null) {
              d = 0;
            }
            if (e == null) {
              e = 0;
            }
            b.set_x(e);
            b.set_y(d);
            this.ending.set_alpha(0);
            this.add(this.ending);
            this.behind = new F(-1000, -1000).makeGraphic(1280, 720, -16777216);
            b = this.behind.scale;
            d = e = 5;
            if (d == null) {
              d = 0;
            }
            if (e == null) {
              e = 0;
            }
            b.set_x(e);
            b.set_y(d);
            this.behind.updateHitbox();
            this.add(this.behind);
            this.dad.idleSuffix = "-alt";
            this.boyfriend.idleSuffix = "-alt";
          }
          this.stagesFunc(function (a) {
            a.createPost();
          });
          this.comboGroup = new La();
          this.add(this.comboGroup);
          this.noteGroup = new Qa();
          this.add(this.noteGroup);
          this.uiGroup = new La();
          this.add(this.uiGroup);
          O.songPosition = -5000 / O.songPosition;
          d = y.data.timeBarType != "Disabled";
          this.timeTxt = new U(A.STRUM_X + h.width / 2 - 248, 19, 400, "", 32);
          this.timeTxt.setFormat("assets/fonts/vcr.ttf", 32, -1, "center", Sa.OUTLINE, -16777216);
          b = this.timeTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.timeTxt.set_alpha(0);
          this.timeTxt.set_borderSize(2);
          this.timeTxt.set_visible(this.updateTime = d);
          if (y.data.downScroll) {
            this.timeTxt.set_y(h.height - 44);
          }
          if (y.data.timeBarType == "Song Name") {
            this.timeTxt.set_text(A.SONG.song);
          }
          this.timeBar = new Bh(0, this.timeTxt.y + this.timeTxt.get_height() / 4, "timeBar", function () {
            return a.songPercent;
          }, 0, 1);
          b = this.timeBar.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          b = this.timeBar;
          e = 1;
          if (e == null) {
            e = 17;
          }
          if (e == 1 || e == 17) {
            b.set_x((h.width - b.get_width()) / 2);
          }
          if (e == 16 || e == 17) {
            b.set_y((h.height - b.get_height()) / 2);
          }
          this.timeBar.set_alpha(0);
          this.timeBar.set_visible(d);
          this.uiGroup.add(this.timeBar);
          this.uiGroup.add(this.timeTxt);
          this.strumLineNotes = new Qa();
          this.noteGroup.add(this.strumLineNotes);
          if (y.data.timeBarType == "Song Name") {
            this.timeTxt.set_size(24);
            b = this.timeTxt;
            b.set_y(b.y + 3);
          }
          b = new ec(100, 100);
          this.grpNoteSplashes.add(b);
          b.set_alpha(0.000001);
          this.opponentStrums = new Qa();
          this.playerStrums = new Qa();
          this.generateSong(A.SONG.song);
          this.noteGroup.add(this.grpNoteSplashes);
          this.camFollow = new $b(0, 0, 1, 1);
          this.camFollow.setPosition(c.x, c.y);
          c.put();
          if (A.prevCamFollow != null) {
            this.camFollow = A.prevCamFollow;
            A.prevCamFollow = null;
          }
          this.add(this.camFollow);
          h.camera.follow(this.camFollow, tf.LOCKON, 0);
          h.camera.set_zoom(this.defaultCamZoom);
          h.camera.snapToTarget();
          b = h.worldBounds;
          d = c = 0;
          e = h.width;
          f = h.height;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.x = c;
          b.y = d;
          b.width = e;
          b.height = f;
          this.moveCameraSection();
          b = this.healthBar = new Bh(0, h.height * (y.data.downScroll ? 0.11 : 0.89), "healthBar", function () {
            return a.health;
          }, 0, 2);
          e = 1;
          if (e == null) {
            e = 17;
          }
          if (e == 1 || e == 17) {
            b.set_x((h.width - b.get_width()) / 2);
          }
          if (e == 16 || e == 17) {
            b.set_y((h.height - b.get_height()) / 2);
          }
          this.healthBar.set_leftToRight(false);
          b = this.healthBar.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.healthBar.set_visible(!y.data.hideHud);
          this.healthBar.set_alpha(y.data.healthBarAlpha);
          this.reloadHealthBarColors();
          this.uiGroup.add(this.healthBar);
          this.iconP1 = new Kf(this.boyfriend.healthIcon, true);
          this.iconP1.set_y(this.healthBar.y - 75);
          this.iconP1.set_visible(!y.data.hideHud);
          this.iconP1.set_alpha(y.data.healthBarAlpha);
          this.uiGroup.add(this.iconP1);
          this.iconP2 = new Kf(this.dad.healthIcon, false);
          this.iconP2.set_y(this.healthBar.y - 75);
          this.iconP2.set_visible(!y.data.hideHud);
          this.iconP2.set_alpha(y.data.healthBarAlpha);
          this.uiGroup.add(this.iconP2);
          this.scoreTxt = new U(0, this.healthBar.y + 40, h.width, "", 20);
          this.scoreTxt.setFormat("assets/fonts/vcr.ttf", 20, -1, "center", Sa.OUTLINE, -16777216);
          b = this.scoreTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.scoreTxt.set_borderSize(1.25);
          this.scoreTxt.set_visible(!y.data.hideHud);
          this.updateScore(false);
          this.uiGroup.add(this.scoreTxt);
          this.botplayTxt = new U(400, this.timeBar.y + 55, h.width - 800, "BOTPLAY", 32);
          this.botplayTxt.setFormat("assets/fonts/vcr.ttf", 32, -1, "center", Sa.OUTLINE, -16777216);
          b = this.botplayTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.botplayTxt.set_borderSize(1.25);
          this.botplayTxt.set_visible(this.cpuControlled);
          this.uiGroup.add(this.botplayTxt);
          if (y.data.downScroll) {
            this.botplayTxt.set_y(this.timeBar.y - 78);
          }
          this.uiGroup.set_cameras([this.camHUD]);
          this.noteGroup.set_cameras([this.camHUD]);
          this.comboGroup.set_cameras([this.camHUD]);
          this.startingSong = true;
          this.eventsPushed = this.noteTypes = null;
          if (this.eventNotes.length > 1) {
            b = 0;
            for (c = this.eventNotes; b < c.length;) {
              d = c[b];
              ++b;
              d.strumTime -= this.eventEarlyTrigger(d);
            }
            this.eventNotes.sort(A.sortByTime);
          }
          this.startCallback();
          this.RecalculateRating();
          oa.get_current().stage.addEventListener("keyDown", m(this, this.onKeyPress));
          oa.get_current().stage.addEventListener("keyUp", m(this, this.onKeyRelease));
          if (y.data.hitsoundVolume > 0) {
            D.sound("hitsound");
          }
          D.sound("missnote1");
          D.sound("missnote2");
          D.sound("missnote3");
          D.image("alphabet");
          if (Te.songName != null) {
            D.returnSound("music", Te.songName, null);
          } else {
            c = y.data.pauseMusic;
            d = new V("[~&\\\\;:<>#]", "");
            b = new V("[.,'\"%?!]", "");
            c = d.split(w.replace(c, " ", "-")).join("-");
            if (b.split(c).join("").toLowerCase() != "none") {
              c = y.data.pauseMusic;
              d = new V("[~&\\\\;:<>#]", "");
              b = new V("[.,'\"%?!]", "");
              c = d.split(w.replace(c, " ", "-")).join("-");
              D.returnSound("music", b.split(c).join("").toLowerCase(), null);
            }
          }
          this.callOnScripts("onCreatePost");
          this.uiGroup.set_alpha(0.00001);
          this.cacheCountdown();
          this.cachePopUpScore();
          P.prototype.create.call(this);
          D.clearUnusedMemory();
          if (this.eventNotes.length < 1) {
            this.checkEventNote();
          }
        },
        set_songSpeed: function (a) {
          if (this.generatedMusic) {
            var b = a / this.songSpeed;
            if (b != 1) {
              for (var c = 0, d = this.notes.members; c < d.length;) {
                var e = d[c];
                ++c;
                e.resizeByRatio(b);
              }
              c = 0;
              for (d = this.unspawnNotes; c < d.length;) {
                e = d[c];
                ++c;
                e.resizeByRatio(b);
              }
            }
          }
          this.songSpeed = a;
          this.noteKillOffset = Math.max(O.stepCrochet, 350 / this.songSpeed * this.playbackRate);
          return a;
        },
        set_playbackRate: function (a) {
          if (this.generatedMusic) {
            this.vocals.set_pitch(a);
            this.opponentVocals.set_pitch(a);
            h.sound.music.set_pitch(a);
            var b = this.playbackRate / a;
            if (b != 1) {
              for (var c = 0, d = this.notes.members; c < d.length;) {
                var e = d[c];
                ++c;
                e.resizeByRatio(b);
              }
              c = 0;
              for (d = this.unspawnNotes; c < d.length;) {
                e = d[c];
                ++c;
                e.resizeByRatio(b);
              }
            }
          }
          this.playbackRate = a;
          h.animationTimeScale = a;
          O.safeZoneOffset = y.data.safeFrames / 60 * 1000 * a;
          this.setOnScripts("playbackRate", this.playbackRate);
          return this.playbackRate;
        },
        reloadHealthBarColors: function () {
          var a = this.healthBar;
          var b = this.dad.healthColorArray[0];
          var c = this.dad.healthColorArray[1];
          var d = this.dad.healthColorArray[2];
          var e = eb._new();
          var f = 255;
          if (f == null) {
            f = 255;
          }
          e = (e & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16) & -65281 | (c > 255 ? 255 : c < 0 ? 0 : c) << 8;
          e &= -256;
          e |= d > 255 ? 255 : d < 0 ? 0 : d;
          e &= 16777215;
          e |= (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
          b = this.boyfriend.healthColorArray[0];
          c = this.boyfriend.healthColorArray[1];
          d = this.boyfriend.healthColorArray[2];
          var h = eb._new();
          f = 255;
          if (f == null) {
            f = 255;
          }
          h = (h & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16) & -65281 | (c > 255 ? 255 : c < 0 ? 0 : c) << 8;
          h &= -256;
          h |= d > 255 ? 255 : d < 0 ? 0 : d;
          h &= 16777215;
          h |= (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
          a.setColors(e, h);
        },
        addCharacterToList: function (a, b) {
          switch (b) {
            case 0:
              if (!Object.prototype.hasOwnProperty.call(this.boyfriendMap.h, a)) {
                b = new id(0, 0, a, true);
                this.boyfriendMap.h[a] = b;
                this.boyfriendGroup.add(b);
                this.startCharacterPos(b);
                b.set_alpha(0.00001);
              }
              break;
            case 1:
              if (!Object.prototype.hasOwnProperty.call(this.dadMap.h, a)) {
                b = new id(0, 0, a);
                this.dadMap.h[a] = b;
                this.dadGroup.add(b);
                this.startCharacterPos(b, true);
                b.set_alpha(0.00001);
              }
              break;
            case 2:
              if (this.gf != null && !Object.prototype.hasOwnProperty.call(this.gfMap.h, a)) {
                b = new id(0, 0, a);
                var c = b.scrollFactor;
                var d = 0.95;
                var e = 0.95;
                if (e == null) {
                  e = 0;
                }
                if (d == null) {
                  d = 0;
                }
                c.set_x(d);
                c.set_y(e);
                this.gfMap.h[a] = b;
                this.gfGroup.add(b);
                this.startCharacterPos(b);
                b.set_alpha(0.00001);
              }
          }
        },
        getLuaObject: function (a, b) {
          return null;
        },
        startCharacterPos: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (b && w.startsWith(a.curCharacter, "gf")) {
            a.setPosition(this.GF_X, this.GF_Y);
            b = a.scrollFactor;
            var c = 0.95;
            var d = 0.95;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
            a.danceEveryNumBeats = 2;
          }
          a.set_x(a.x + a.positionArray[0]);
          a.set_y(a.y + a.positionArray[1]);
        },
        startVideo: function (a) {
          var b = this;
          this.inCutscene = true;
          var c = D.video(a);
          if (Q.exists(c)) {
            this.videoCurrentlyPlaying = new jc(c);
            this.isVideoCurrentlyPlaying = true;
            this.videoCurrentlyPlaying.finishCallback = function () {
              b.inCutscene = false;
              b.startAndEnd();
            };
          } else {
            h.log.advanced("Couldnt find video file: " + a, xa.WARNING, true);
            this.startAndEnd();
          }
        },
        startAndEnd: function () {
          if (this.endingSong) {
            this.endSong();
          } else {
            this.startCountdown();
          }
        },
        startDialogue: function (a, b) {
          var c = this;
          if (this.psychDialogue == null) {
            if (a.dialogue.length > 0) {
              this.inCutscene = true;
              this.psychDialogue = new ac(a, b);
              a = this.psychDialogue.scrollFactor;
              a.set_x(0);
              a.set_y(0);
              this.psychDialogue.finishThing = this.endingSong ? function () {
                c.psychDialogue = null;
                c.endSong();
              } : function () {
                c.psychDialogue = null;
                c.startCountdown();
              };
              this.psychDialogue.nextDialogueThing = m(this, this.startNextDialogue);
              this.psychDialogue.skipDialogueThing = m(this, this.skipDialogue);
              this.psychDialogue.set_cameras([this.camHUD]);
              this.add(this.psychDialogue);
            } else {
              h.log.advanced("Your dialogue file is badly formatted!", xa.WARNING, true);
              this.startAndEnd();
            }
          }
        },
        cacheCountdown: function () {
          var a = Object.create(null);
          switch (A.stageUI) {
            case "normal":
              var b = ["ready", "set", "go"];
              break;
            case "pixel":
              b = ["" + A.stageUI + "UI/ready-pixel", "" + A.stageUI + "UI/set-pixel", "" + A.stageUI + "UI/date-pixel"];
              break;
            default:
              b = ["" + A.stageUI + "UI/ready", "" + A.stageUI + "UI/set", "" + A.stageUI + "UI/go"];
          }
          a[A.stageUI] = b;
          a = a[A.stageUI];
          for (b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            D.image(c);
          }
          D.sound("intro3" + this.introSoundsSuffix);
          D.sound("intro2" + this.introSoundsSuffix);
          D.sound("intro1" + this.introSoundsSuffix);
          D.sound("introGo" + this.introSoundsSuffix);
        },
        startCountdown: function () {
          var a = this;
          if (this.startedCountdown) {
            this.callOnScripts("onStartCountdown");
            return false;
          }
          A.seenCutscene = true;
          this.inCutscene = false;
          if (this.callOnScripts("onStartCountdown", null, true) != Fb.Function_Stop) {
            if (this.skipCountdown || A.startOnTime > 0) {
              this.skipArrowStartTween = true;
            }
            this.generateStaticArrows(0);
            this.generateStaticArrows(1);
            for (var b = 0, c = this.playerStrums.length; b < c;) {
              var d = b++;
              this.defaultPlayerStrumX[d] = this.playerStrums.members[d].x;
              this.defaultPlayerStrumY[d] = this.playerStrums.members[d].y;
            }
            b = 0;
            for (c = this.opponentStrums.length; b < c;) {
              d = b++;
              this.defaultOpponentStrumX[d] = this.opponentStrums.members[d].x;
              this.defaultOpponentStrumY[d] = this.opponentStrums.members[d].y;
            }
            this.startedCountdown = true;
            O.songPosition = -O.crochet * 5;
            this.setOnScripts("startedCountdown", true);
            this.callOnScripts("onCountdownStarted", null);
            var e = 0;
            if (A.startOnTime > 0) {
              this.clearNotesBefore(A.startOnTime);
              this.setSongTime(A.startOnTime - 350);
              return true;
            }
            if (this.skipCountdown) {
              this.setSongTime(0);
              return true;
            }
            this.moveCameraSection();
            this.startTimer = new Ec().start(O.crochet / 1000 / this.playbackRate, function (b) {
              a.characterBopper(b.loops - b._loopsCounter);
              b = Object.create(null);
              switch (A.stageUI) {
                case "normal":
                  var c = ["ready", "set", "go"];
                  break;
                case "pixel":
                  c = ["" + A.stageUI + "UI/ready-pixel", "" + A.stageUI + "UI/set-pixel", "" + A.stageUI + "UI/date-pixel"];
                  break;
                default:
                  c = ["" + A.stageUI + "UI/ready", "" + A.stageUI + "UI/set", "" + A.stageUI + "UI/go"];
              }
              b[A.stageUI] = c;
              if (y.data.antialiasing) {
                A.get_isPixelStage();
              }
              var d = Sf.THREE;
              switch (e) {
                case 0:
                  a.countdown.animation.play("idle", true);
                  d = Sf.THREE;
                  break;
                case 1:
                  d = Sf.TWO;
                  break;
                case 2:
                  d = Sf.ONE;
                  break;
                case 3:
                  d = Sf.GO;
                  break;
                case 4:
                  a.remove(a.countdown);
                  d = Sf.START;
              }
              a.notes.forEachAlive(function (a) {
                if (y.data.opponentStrums || a.mustPress) {
                  a.copyAlpha = false;
                  a.set_alpha(a.multAlpha);
                  if (y.data.middleScroll && !a.mustPress) {
                    a.set_alpha(a.alpha * 0.35);
                  }
                }
              });
              a.stagesFunc(function (a) {
                a.countdownTick(d, e);
              });
              a.callOnLuas("onCountdownTick", [e]);
              a.callOnHScript("onCountdownTick", [d, e]);
              e += 1;
            }, 5);
          }
          return true;
        },
        createCountdownSprite: function (a, b) {
          var c = this;
          var d = new F().loadGraphic(D.image(a));
          d.set_cameras([this.camHUD]);
          a = d.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          d.updateHitbox();
          if (A.get_isPixelStage()) {
            d.setGraphicSize(d.get_width() * A.daPixelZoom | 0);
          }
          d.set_x((h.width - d.get_width()) / 2);
          d.set_y((h.height - d.get_height()) / 2);
          d.set_antialiasing(b);
          this.insert(this.members.indexOf(this.noteGroup), d);
          Da.tween(d, {
            alpha: 0
          }, O.crochet / 1000, {
            ease: Xa.cubeInOut,
            onComplete: function (a) {
              c.remove(d);
              d.destroy();
            }
          });
          return d;
        },
        addBehindGF: function (a) {
          this.insert(this.members.indexOf(this.gfGroup), a);
        },
        addBehindBF: function (a) {
          this.insert(this.members.indexOf(this.boyfriendGroup), a);
        },
        addBehindDad: function (a) {
          this.insert(this.members.indexOf(this.dadGroup), a);
        },
        clearNotesBefore: function (a) {
          for (var b = this.unspawnNotes.length - 1; b >= 0;) {
            var c = this.unspawnNotes[b];
            if (c.strumTime - 350 < a) {
              c.set_active(false);
              c.set_visible(false);
              c.ignoreNote = true;
              c.kill();
              r.remove(this.unspawnNotes, c);
              c.destroy();
            }
            --b;
          }
          for (b = this.notes.length - 1; b >= 0;) {
            c = this.notes.members[b];
            if (c.strumTime - 350 < a) {
              c.set_active(false);
              c.set_visible(false);
              c.ignoreNote = true;
              this.invalidateNote(c);
            }
            --b;
          }
        },
        updateScore: function (a) {
          if (a == null) {
            a = false;
          }
          if (this.callOnScripts("preUpdateScore", [a], true) != Fb.Function_Stop) {
            var b = this.ratingName;
            if (this.totalPlayed != 0) {
              var c = Ni.floorDecimal(this.ratingPercent * 100, 2);
              b += " (" + c + "%) - " + this.ratingFC;
            }
            this.scoreTxt.set_text("Score: " + this.songScore + (this.instakillOnMiss ? "" : " | Misses: " + this.songMisses) + (" | Rating: " + b) + "\n");
            if (!a && !this.cpuControlled) {
              this.doScoreBop();
            }
            this.callOnScripts("onUpdateScore", [a]);
          }
        },
        fullComboFunction: function () {
          var a = this.ratingsData[0].hits;
          var b = this.ratingsData[1].hits;
          var c = this.ratingsData[2].hits;
          var d = this.ratingsData[3].hits;
          this.ratingFC = "";
          if (this.songMisses == 0) {
            if (c > 0 || d > 0) {
              this.ratingFC = "FC";
            } else if (b > 0) {
              this.ratingFC = "GFC";
            } else if (a > 0) {
              this.ratingFC = "SFC";
            }
          } else {
            this.ratingFC = this.songMisses < 10 ? "SDCB" : "Clear";
          }
        },
        doScoreBop: function () {
          var a = this;
          if (y.data.scoreZoom) {
            if (this.scoreTxtTween != null) {
              this.scoreTxtTween.cancel();
            }
            this.scoreTxt.scale.set_x(1.075);
            this.scoreTxt.scale.set_y(1.075);
            this.scoreTxtTween = Da.tween(this.scoreTxt.scale, {
              x: 1,
              y: 1
            }, 0.2, {
              onComplete: function (b) {
                a.scoreTxtTween = null;
              }
            });
          }
        },
        setSongTime: function (a) {
          if (a < 0) {
            a = 0;
          }
          h.sound.music.pause();
          this.vocals.pause();
          this.opponentVocals.pause();
          h.sound.music.set_time(a);
          h.sound.music.set_pitch(this.playbackRate);
          h.sound.music.play();
          if (O.songPosition <= this.vocals._length) {
            this.vocals.set_time(a);
            this.opponentVocals.set_time(a);
            this.vocals.set_pitch(this.playbackRate);
            this.opponentVocals.set_pitch(this.playbackRate);
          }
          this.vocals.play();
          this.opponentVocals.play();
          O.songPosition = a;
        },
        startNextDialogue: function () {
          this.dialogueCount++;
          this.callOnScripts("onNextDialogue", [this.dialogueCount]);
        },
        skipDialogue: function () {
          this.callOnScripts("onSkipDialogue", [this.dialogueCount]);
        },
        startSong: function () {
          var a = this;
          this.startingSong = false;
          h.sound.playMusic(this.inst._sound, 1, false);
          h.sound.music.set_pitch(this.playbackRate);
          var b = this;
          h.sound.music.onComplete = function () {
            b.finishSong();
          };
          this.vocals.play();
          this.opponentVocals.play();
          if (A.startOnTime > 0) {
            this.setSongTime(A.startOnTime - 500);
          }
          A.startOnTime = 0;
          if (this.paused) {
            h.sound.music.pause();
            this.vocals.pause();
            this.opponentVocals.pause();
          }
          this.songLength = h.sound.music._length;
          Da.tween(this.timeBar, {
            alpha: 1
          }, 0.5, {
            ease: Xa.circOut
          });
          Da.tween(this.timeTxt, {
            alpha: 1
          }, 0.5, {
            ease: Xa.circOut
          });
          Da.tween(this.behind, {
            alpha: 0
          }, 3, {
            ease: Xa.linear
          });
          Da.tween(this.countdown, {
            alpha: 0
          }, 1, {
            ease: Xa.linear
          });
          this.camHUD.set_zoom(3);
          Da.tween(this.camHUD, {
            zoom: 0.9
          }, 3, {
            ease: Xa.smootherStepOut
          });
          this.defaultCamZoom = 0.5;
          Da.tween(this.get_camera(), {
            zoom: 0.5
          }, 3, {
            ease: Xa.smootherStepOut,
            onComplete: function (b) {
              a.defaultCamZoom = 0.5;
            }
          });
          new Ec().start(3, function (b) {
            a.zoome = true;
          });
          this.setOnScripts("songLength", this.songLength);
          this.callOnScripts("onSongStart");
        },
        generateSong: function (a) {
          this.set_songSpeed(A.SONG.speed);
          a = y.defaultData.gameplaySettings.h.scrolltype;
          this.songSpeedType = Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "scrolltype") ? y.data.gameplaySettings.h.scrolltype : a;
          switch (this.songSpeedType) {
            case "constant":
              a = y.defaultData.gameplaySettings.h.scrollspeed;
              this.set_songSpeed(Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "scrollspeed") ? y.data.gameplaySettings.h.scrollspeed : a);
              break;
            case "multiplicative":
              a = y.defaultData.gameplaySettings.h.scrollspeed;
              this.set_songSpeed(A.SONG.speed * (Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "scrollspeed") ? y.data.gameplaySettings.h.scrollspeed : a));
          }
          a = A.SONG;
          O.set_bpm(a.bpm);
          this.vocals = new Zd();
          this.opponentVocals = new Zd();
          try {
            if (a.needsVoices) {
              var b = "songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3";
              this.vocals.loadEmbedded(b ?? "songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3");
              var c = "songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3";
              if (c != null) {
                this.opponentVocals.loadEmbedded(c);
              }
            }
          } catch (qp) {
            Pa.lastError = qp;
          }
          this.vocals.set_pitch(this.playbackRate);
          this.opponentVocals.set_pitch(this.playbackRate);
          h.sound.list.add(this.vocals);
          h.sound.list.add(this.opponentVocals);
          this.inst = new Zd();
          try {
            this.inst.loadEmbedded("songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Inst.mp3");
          } catch (qp) {
            Pa.lastError = qp;
          }
          h.sound.list.add(this.inst);
          this.notes = new Qa();
          this.noteGroup.add(this.notes);
          b = a.notes;
          c = D.getPath("data/" + (this.songName + "/events.json"), "TEXT", null);
          if (Q.exists(c)) {
            var d = Md.loadFromJson("events", this.songName).events;
            for (c = 0; c < d.length;) {
              var e = d[c];
              ++c;
              for (var f = 0, k = e[1].length; f < k;) {
                var g = f++;
                this.makeEvent(e, g);
              }
            }
          }
          for (c = 0; c < b.length;) {
            e = b[c];
            ++c;
            f = 0;
            k = e.sectionNotes;
            while (f < k.length) {
              g = k[f];
              ++f;
              var n = g[0];
              var p = g[1] % 4 | 0;
              var m = g[1] > 3;
              var l = this.unspawnNotes.length > 0 ? this.unspawnNotes[this.unspawnNotes.length - 1 | 0] : null;
              var v = new Na(n, p, l);
              v.mustPress = m;
              v.sustainLength = g[2];
              v.gfNote = e.gfSection && g[1] < 4;
              v.set_noteType(g[3]);
              if (typeof g[3] != "string") {
                v.set_noteType(fa.noteTypeList[g[3]]);
              }
              d = v.scrollFactor;
              d.set_x(0);
              d.set_y(0);
              this.unspawnNotes.push(v);
              l = Math.floor(v.sustainLength / O.stepCrochet);
              if (l > 0) {
                d = 0;
                for (var q = l + 1; d < q;) {
                  var u = d++;
                  l = this.unspawnNotes[this.unspawnNotes.length - 1 | 0];
                  u = new Na(n + O.stepCrochet * u, p, l, true);
                  u.mustPress = m;
                  u.gfNote = e.gfSection && g[1] < 4;
                  u.set_noteType(v.noteType);
                  var r = u.scrollFactor;
                  r.set_x(0);
                  r.set_y(0);
                  u.parent = v;
                  this.unspawnNotes.push(u);
                  v.tail.push(u);
                  u.correctionOffset = v.get_height() / 2;
                  if (A.get_isPixelStage()) {
                    if (l.isSustainNote) {
                      l.scale.set_y(l.scale.y / this.playbackRate);
                      l.updateHitbox();
                    }
                  } else {
                    if (l.isSustainNote) {
                      l.scale.set_y(Na.SUSTAIN_SIZE / l.frameHeight * l.scale.y);
                      l.scale.set_y(l.scale.y / this.playbackRate);
                      l.updateHitbox();
                    }
                    if (y.data.downScroll) {
                      u.correctionOffset = 0;
                    }
                  }
                  if (u.mustPress) {
                    u.set_x(u.x + h.width / 2);
                  } else if (y.data.middleScroll) {
                    u.set_x(u.x + 310);
                    if (p > 1) {
                      u.set_x(u.x + (h.width / 2 + 25));
                    }
                  }
                }
              }
              if (v.mustPress) {
                v.set_x(v.x + h.width / 2);
              } else if (y.data.middleScroll) {
                v.set_x(v.x + 310);
                if (p > 1) {
                  v.set_x(v.x + (h.width / 2 + 25));
                }
              }
              if (this.noteTypes.indexOf(v.noteType) == -1) {
                this.noteTypes.push(v.noteType);
              }
            }
          }
          c = 0;
          for (f = a.events; c < f.length;) {
            e = f[c];
            ++c;
            k = 0;
            d = e[1].length;
            while (k < d) {
              g = k++;
              this.makeEvent(e, g);
            }
          }
          this.unspawnNotes.sort(A.sortByTime);
          this.generatedMusic = true;
        },
        eventPushed: function (a) {
          this.eventPushedUnique(a);
          if (this.eventsPushed.indexOf(a.event) == -1) {
            this.stagesFunc(function (b) {
              b.eventPushed(a);
            });
            this.eventsPushed.push(a.event);
          }
        },
        eventPushedUnique: function (a) {
          switch (a.event) {
            case "Change Character":
              var b = 0;
              switch (a.value1.toLowerCase()) {
                case "0":
                case "dad":
                case "opponent":
                  b = 1;
                  break;
                case "1":
                case "gf":
                case "girlfriend":
                  b = 2;
                  break;
                default:
                  b = 0;
              }
              this.addCharacterToList(a.value2, b);
              break;
            case "Play Sound":
              D.sound(a.value1);
          }
          this.stagesFunc(function (b) {
            b.eventPushedUnique(a);
          });
        },
        eventEarlyTrigger: function (a) {
          var b = this.callOnScripts("eventEarlyTrigger", [a.event, a.value1, a.value2, a.strumTime], true, [], [0]);
          if (b != null && b != 0 && b != Fb.Function_Continue) {
            return b;
          } else if (a.event == "Kill Henchmen") {
            return 280;
          } else {
            return 0;
          }
        },
        makeEvent: function (a, b) {
          a = {
            strumTime: a[0] + y.data.noteOffset,
            event: a[1][b][0],
            value1: a[1][b][1],
            value2: a[1][b][2]
          };
          this.eventNotes.push(a);
          this.eventPushed(a);
          this.callOnScripts("onEventPushed", [a.event, a.value1 ?? "", a.value2 ?? "", a.strumTime]);
        },
        generateStaticArrows: function (a) {
          var b = y.data.middleScroll ? A.STRUM_X_MIDDLESCROLL : A.STRUM_X;
          var c = y.data.downScroll ? h.height - 150 : 50;
          for (var d = 0; d < 4;) {
            var e = d++;
            var f = 1;
            if (a < 1) {
              if (y.data.opponentStrums) {
                if (y.data.middleScroll) {
                  f = 0.35;
                }
              } else {
                f = 0;
              }
            }
            var k = new ug(b, c, e, a);
            k.downScroll = y.data.downScroll;
            if (A.isStoryMode || this.skipArrowStartTween) {
              k.set_alpha(f);
            } else {
              k.set_alpha(0);
              Da.tween(k, {
                alpha: f
              }, 1, {
                ease: Xa.circOut,
                startDelay: 0.5 + e * 0.2
              });
            }
            if (a == 1) {
              this.playerStrums.add(k);
            } else {
              if (y.data.middleScroll) {
                k.set_x(k.x + 310);
                if (e > 1) {
                  k.set_x(k.x + (h.width / 2 + 25));
                }
              }
              this.opponentStrums.add(k);
            }
            this.strumLineNotes.add(k);
            k.postAddedToGroup();
          }
        },
        openSubState: function (a) {
          this.stagesFunc(function (b) {
            b.openSubState(a);
          });
          if (this.paused) {
            if (h.sound.music != null) {
              h.sound.music.pause();
              this.vocals.pause();
              this.opponentVocals.pause();
            }
            Ec.globalManager.forEach(function (a) {
              if (!a.finished) {
                a.active = false;
              }
            });
            Da.globalManager.forEach(function (a) {
              if (!a.finished) {
                a.set_active(false);
              }
            });
          }
          P.prototype.openSubState.call(this, a);
        },
        closeSubState: function () {
          P.prototype.closeSubState.call(this);
          this.stagesFunc(function (a) {
            a.closeSubState();
          });
          if (this.paused) {
            if (h.sound.music != null && !this.startingSong) {
              this.resyncVocals();
            }
            Ec.globalManager.forEach(function (a) {
              if (!a.finished) {
                a.active = true;
              }
            });
            Da.globalManager.forEach(function (a) {
              if (!a.finished) {
                a.set_active(true);
              }
            });
            this.paused = false;
            this.callOnScripts("onResume");
          }
        },
        resyncVocals: function () {
          if (this.finishTimer == null) {
            this.vocals.pause();
            h.sound.music.play();
            O.songPosition = h.sound.music._time;
            if (O.songPosition <= this.vocals._length) {
              this.vocals.set_time(O.songPosition);
            }
            this.vocals.play();
          }
        },
        update: function (a) {
          var b = this;
          if (this.inCutscene || this.paused || this.freezeCamera) {
            h.camera.set_followLerp(0);
          } else {
            h.camera.set_followLerp(this.cameraSpeed * 2.4 * this.playbackRate);
            if (this.startingSong || this.endingSong) {
              var c = false;
            } else {
              c = this.boyfriend;
              var d = "";
              if (c.isAnimateAtlas ? c.atlas.anim.get_curSymbol() != null : c.animation._curAnim != null) {
                d = c.isAnimateAtlas ? c.atlas.anim.lastPlayedAnim : c.animation._curAnim.name;
              }
              c = w.startsWith(d ?? "", "idle");
            }
            if (c) {
              this.boyfriendIdleTime += a;
              if (this.boyfriendIdleTime >= 0.15) {
                this.boyfriendIdled = true;
              }
            } else {
              this.boyfriendIdleTime = 0;
            }
          }
          this.callOnScripts("onUpdate", [a]);
          P.prototype.update.call(this, a);
          this.setOnScripts("curDecStep", this.curDecStep);
          this.setOnScripts("curDecBeat", this.curDecBeat);
          if (this.botplayTxt != null && this.botplayTxt.visible) {
            this.botplaySine += a * 180;
            this.botplayTxt.set_alpha(1 - Math.sin(Math.PI * this.botplaySine / 180));
          }
          if (this.get_controls().get_PAUSE() && this.startedCountdown && this.canPause && this.callOnScripts("onPause", null, true) != Fb.Function_Stop) {
            this.openPauseMenu();
          }
          if (!this.endingSong && !this.inCutscene && !!this.allowDebugKeys) {
            if (this.get_controls().justPressed("debug_1")) {
              this.openChartEditor();
            } else if (this.get_controls().justPressed("debug_2")) {
              this.openCharacterEditor();
            }
          }
          if (this.healthBar.bounds.max != null && this.health > this.healthBar.bounds.max) {
            this.set_health(this.healthBar.bounds.max);
          }
          this.updateIconsScale(a);
          this.updateIconsPosition();
          if (this.startedCountdown && !this.paused) {
            O.songPosition += h.elapsed * 1000 * this.playbackRate;
          }
          if (this.startingSong) {
            if (this.startedCountdown && O.songPosition >= 0) {
              this.startSong();
            } else if (!this.startedCountdown) {
              O.songPosition = -O.crochet * 5;
            }
          } else if (!this.paused && this.updateTime) {
            c = Math.max(0, O.songPosition - y.data.noteOffset);
            this.songPercent = c / this.songLength;
            d = this.songLength - c;
            if (y.data.timeBarType == "Time Elapsed") {
              d = c;
            }
            c = Math.floor(d / 1000);
            if (c < 0) {
              c = 0;
            }
            if (y.data.timeBarType != "Song Name") {
              this.timeTxt.set_text(Ub.formatTime(c, false));
            }
          }
          if (this.camZooming) {
            c = this.defaultCamZoom;
            h.camera.set_zoom(c + Math.exp(-a * 3.125 * this.camZoomingDecay * this.playbackRate) * (h.camera.zoom - c));
            this.camHUD.set_zoom(1 + Math.exp(-a * 3.125 * this.camZoomingDecay * this.playbackRate) * (this.camHUD.zoom - 1));
          }
          if (!y.data.noReset && this.get_controls().get_RESET() && this.canReset && !this.inCutscene && this.startedCountdown && !this.endingSong) {
            this.set_health(0);
            zb.trace("RESET = True", {
              fileName: "source/states/PlayState.hx",
              lineNumber: 1676,
              className: "states.PlayState",
              methodName: "update"
            });
          }
          this.doDeathCheck();
          if (this.unspawnNotes[0] != null) {
            c = this.spawnTime * this.playbackRate;
            if (this.songSpeed < 1) {
              c /= this.songSpeed;
            }
            if (this.unspawnNotes[0].multSpeed < 1) {
              c /= this.unspawnNotes[0].multSpeed;
            }
            while (this.unspawnNotes.length > 0 && this.unspawnNotes[0].strumTime - O.songPosition < c) {
              d = this.unspawnNotes[0];
              this.notes.insert(0, d);
              d.spawned = true;
              this.callOnLuas("onSpawnNote", [this.notes.members.indexOf(d), d.noteData, d.noteType, d.isSustainNote, d.strumTime]);
              this.callOnHScript("onSpawnNote", [d]);
              d = this.unspawnNotes.indexOf(d);
              this.unspawnNotes.splice(d, 1);
            }
          }
          if (this.generatedMusic) {
            if (!this.inCutscene && (this.cpuControlled ? this.playerDance() : this.keysCheck(), this.notes.length > 0)) {
              if (this.startedCountdown) {
                var e = 60 / A.SONG.bpm * 1000;
                this.notes.forEachAlive(function (a) {
                  var c = b.playerStrums;
                  if (!a.mustPress) {
                    c = b.opponentStrums;
                  }
                  c = c.members[a.noteData];
                  a.followStrumNote(c, e, b.songSpeed / b.playbackRate);
                  if (a.mustPress) {
                    if (b.cpuControlled && !a.blockHit && a.canBeHit && (a.isSustainNote || a.strumTime <= O.songPosition)) {
                      b.goodNoteHit(a);
                    }
                  } else if (!!a.wasGoodHit && !a.hitByOpponent && !a.ignoreNote) {
                    b.opponentNoteHit(a);
                  }
                  if (a.isSustainNote && c.sustainReduce) {
                    a.clipToStrumNote(c);
                  }
                  if (O.songPosition - a.strumTime > b.noteKillOffset) {
                    if (!!a.mustPress && !b.cpuControlled && !a.ignoreNote && !b.endingSong && (!!a.tooLate || !a.wasGoodHit)) {
                      b.noteMiss(a);
                    }
                    a.set_active(a.set_visible(false));
                    b.invalidateNote(a);
                  }
                });
              } else {
                this.notes.forEachAlive(function (a) {
                  a.canBeHit = false;
                  a.wasGoodHit = false;
                });
              }
            }
            this.checkEventNote();
          }
          if (this.isVideoCurrentlyPlaying) {
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(13, c.status)) {
              c = true;
            } else {
              c = h.keys.justPressed;
              c = c.keyManager.checkStatusUnsafe(32, c.status);
            }
            if (c) {
              c = true;
            } else {
              c = h.keys.justPressed;
              c = c.keyManager.checkStatusUnsafe(27, c.status);
            }
            if (c) {
              this.videoCurrentlyPlaying.skipVideo();
              this.isVideoCurrentlyPlaying = false;
            }
          }
          if (this.followChars) {
            if (this.mustHit) {
              switch (this.boyfriend.animation._curAnim.name) {
                case "singDOWN":
                case "singDOWN-alt":
                  this.camFollow.setPosition(this.xx2, this.yy2 + this.ofs);
                  break;
                case "singLEFT":
                case "singLEFT-alt":
                  this.camFollow.setPosition(this.xx2 - this.ofs, this.yy2);
                  break;
                case "singRIGHT":
                case "singRIGHT-alt":
                  this.camFollow.setPosition(this.xx2 + this.ofs, this.yy2);
                  break;
                case "singUP":
                case "singUP-alt":
                  this.camFollow.setPosition(this.xx2, this.yy2 - this.ofs);
                  break;
                default:
                  this.camFollow.setPosition(this.xx2, this.yy2);
              }
            } else {
              switch (this.dad.animation._curAnim.name) {
                case "singDOWN":
                case "singDOWN-alt":
                  this.camFollow.setPosition(this.xx, this.yy + this.ofs);
                  break;
                case "singLEFT":
                case "singLEFT-alt":
                  this.camFollow.setPosition(this.xx - this.ofs, this.yy);
                  break;
                case "singRIGHT":
                case "singRIGHT-alt":
                  this.camFollow.setPosition(this.xx + this.ofs, this.yy);
                  break;
                case "singUP":
                case "singUP-alt":
                  this.camFollow.setPosition(this.xx, this.yy - this.ofs);
                  break;
                default:
                  this.camFollow.setPosition(this.xx, this.yy);
              }
            }
          }
          if (this.spotlight.angle == -20) {
            Da.tween(this.spotlight, {
              angle: 20
            }, 3, {
              ease: Xa.smootherStepInOut
            });
            Da.tween(this.spotlight, {
              x: -250
            }, 3, {
              ease: Xa.smootherStepInOut
            });
          } else if (this.spotlight.angle == 20) {
            Da.tween(this.spotlight, {
              angle: -20
            }, 3, {
              ease: Xa.smootherStepInOut
            });
            Da.tween(this.spotlight, {
              x: 1050
            }, 3, {
              ease: Xa.smootherStepInOut
            });
          }
          this.spotlight.updateHitbox();
          this.setOnScripts("cameraX", this.camFollow.x);
          this.setOnScripts("cameraY", this.camFollow.y);
          this.setOnScripts("botPlay", this.cpuControlled);
          this.callOnScripts("onUpdatePost", [a]);
        },
        updateIconsScale: function (a) {
          var b = 1 + Math.exp(-a * 9 * this.playbackRate) * (this.iconP1.scale.x - 1);
          var c = this.iconP1.scale;
          var d = b;
          if (b == null) {
            b = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(b);
          this.iconP1.updateHitbox();
          b = 1 + Math.exp(-a * 9 * this.playbackRate) * (this.iconP2.scale.x - 1);
          c = this.iconP2.scale;
          d = b;
          if (b == null) {
            b = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(b);
          this.iconP2.updateHitbox();
        },
        updateIconsPosition: function () {
          this.iconP1.set_x(this.healthBar.barCenter + (this.iconP1.scale.x * 150 - 150) / 2 - 26);
          this.iconP2.set_x(this.healthBar.barCenter - this.iconP2.scale.x * 150 / 2 - 52);
        },
        set_health: function (a) {
          if (!this.iconsAnimations || this.healthBar == null || !this.healthBar.enabled || this.healthBar.valueFunction == null) {
            return this.health = a;
          }
          this.health = a;
          var b = this.healthBar.valueFunction();
          var c = this.healthBar.bounds.min;
          a = this.healthBar.bounds.max;
          b = c != null && b < c ? c : b;
          a = bc.remapToRange(a != null && b > a ? a : b, this.healthBar.bounds.min, this.healthBar.bounds.max, 0, 100);
          this.healthBar.set_percent(a ?? 0);
          this.iconP1.animation._curAnim.set_curFrame(this.healthBar.percent < 20 ? 1 : 0);
          this.iconP2.animation._curAnim.set_curFrame(this.healthBar.percent > 80 ? 1 : 0);
          return this.health;
        },
        openPauseMenu: function () {
          h.camera.set_followLerp(0);
          this.persistentUpdate = false;
          this.paused = this.persistentDraw = true;
          if (h.sound.music != null) {
            h.sound.music.pause();
            this.vocals.pause();
            this.opponentVocals.pause();
          }
          if (!this.cpuControlled) {
            for (var a = new tc(this.playerStrums.members, null); a.hasNext();) {
              var b = a.next();
              if (b.animation._curAnim != null && b.animation._curAnim.name != "static") {
                b.playAnim("static");
                b.resetAnim = 0;
              }
            }
          }
          this.openSubState(new Te());
        },
        openChartEditor: function () {
          h.camera.set_followLerp(0);
          this.persistentUpdate = false;
          this.paused = true;
          if (h.sound.music != null) {
            var a = h.sound.music;
            a.cleanup(a.autoDestroy, true);
          }
          A.chartingMode = true;
          P.switchState(new fa());
        },
        openCharacterEditor: function () {
          h.camera.set_followLerp(0);
          this.persistentUpdate = false;
          this.paused = true;
          if (h.sound.music != null) {
            var a = h.sound.music;
            a.cleanup(a.autoDestroy, true);
          }
          P.switchState(new dk(A.SONG.player2));
        },
        doDeathCheck: function (a) {
          if (a == null) {
            a = false;
          }
          if ((!a || !this.instakillOnMiss) && !(this.health <= 0) || this.practiceMode || this.isDead || this.callOnScripts("onGameOver", null, true) == Fb.Function_Stop) {
            return false;
          } else {
            h.animationTimeScale = 1;
            this.boyfriend.stunned = true;
            A.deathCounter++;
            this.paused = true;
            a = this.vocals;
            a.cleanup(a.autoDestroy, true);
            a = this.opponentVocals;
            a.cleanup(a.autoDestroy, true);
            a = h.sound.music;
            a.cleanup(a.autoDestroy, true);
            this.persistentDraw = this.persistentUpdate = false;
            ve.clearArray(Ec.globalManager._timers);
            Da.globalManager.clear();
            this.openSubState(new Lc());
            return this.isDead = true;
          }
        },
        checkEventNote: function () {
          while (this.eventNotes.length > 0) {
            var a = this.eventNotes[0].strumTime;
            if (O.songPosition < a) {
              break;
            }
            var b = "";
            if (this.eventNotes[0].value1 != null) {
              b = this.eventNotes[0].value1;
            }
            var c = "";
            if (this.eventNotes[0].value2 != null) {
              c = this.eventNotes[0].value2;
            }
            this.triggerEvent(this.eventNotes[0].event, b, c, a);
            this.eventNotes.shift();
          }
        },
        triggerEvent: function (a, b, c, d) {
          var e = this;
          var f = parseFloat(b);
          var k = parseFloat(c);
          if (isNaN(f)) {
            f = null;
          }
          if (isNaN(k)) {
            k = null;
          }
          switch (a) {
            case "Add Camera Zoom":
              if (y.data.camZooms && h.camera.zoom < 1.35) {
                if (f == null) {
                  f = 0.015;
                }
                if (k == null) {
                  k = 0.03;
                }
                var g = h.camera;
                g.set_zoom(g.zoom + f);
                g = this.camHUD;
                g.set_zoom(g.zoom + k);
              }
              break;
            case "Alt Idle Animation":
              g = this.dad;
              switch (w.trim(b.toLowerCase())) {
                case "bf":
                case "boyfriend":
                  g = this.boyfriend;
                  break;
                case "gf":
                case "girlfriend":
                  g = this.gf;
                  break;
                default:
                  g = this.dad;
              }
              if (g != null) {
                g.idleSuffix = c;
                g.recalculateDanceIdle();
              }
              break;
            case "Camera Follow Pos":
              if (this.camFollow != null && (this.isCameraOnForcedPos = false, f != null || k != null)) {
                this.isCameraOnForcedPos = true;
                if (f == null) {
                  f = 0;
                }
                if (k == null) {
                  k = 0;
                }
                this.camFollow.set_x(f);
                this.camFollow.set_y(k);
              }
              break;
            case "CameraFlash":
              this.camGame.flash(-65665, 1);
              break;
            case "Change Character":
              g = 0;
              switch (w.trim(b.toLowerCase())) {
                case "gf":
                case "girlfriend":
                  g = 2;
                  break;
                case "dad":
                case "opponent":
                  g = 1;
                  break;
                default:
                  g = 0;
              }
              switch (g) {
                case 0:
                  if (this.boyfriend.curCharacter != c) {
                    if (!Object.prototype.hasOwnProperty.call(this.boyfriendMap.h, c)) {
                      this.addCharacterToList(c, g);
                    }
                    g = this.boyfriend.alpha;
                    this.boyfriend.set_alpha(0.00001);
                    this.boyfriend = this.boyfriendMap.h[c];
                    this.boyfriend.set_alpha(g);
                    this.iconP1.changeIcon(this.boyfriend.healthIcon);
                  }
                  this.setOnScripts("boyfriendName", this.boyfriend.curCharacter);
                  break;
                case 1:
                  if (this.dad.curCharacter != c) {
                    if (!Object.prototype.hasOwnProperty.call(this.dadMap.h, c)) {
                      this.addCharacterToList(c, g);
                    }
                    var n = w.startsWith(this.dad.curCharacter, "gf-") || this.dad.curCharacter == "gf";
                    g = this.dad.alpha;
                    this.dad.set_alpha(0.00001);
                    this.dad = this.dadMap.h[c];
                    if (w.startsWith(this.dad.curCharacter, "gf-") || this.dad.curCharacter == "gf") {
                      if (this.gf != null) {
                        this.gf.set_visible(false);
                      }
                    } else if (n && this.gf != null) {
                      this.gf.set_visible(true);
                    }
                    this.dad.set_alpha(g);
                    this.iconP2.changeIcon(this.dad.healthIcon);
                  }
                  this.setOnScripts("dadName", this.dad.curCharacter);
                  break;
                case 2:
                  if (this.gf != null) {
                    if (this.gf.curCharacter != c) {
                      if (!Object.prototype.hasOwnProperty.call(this.gfMap.h, c)) {
                        this.addCharacterToList(c, g);
                      }
                      g = this.gf.alpha;
                      this.gf.set_alpha(0.00001);
                      this.gf = this.gfMap.h[c];
                      this.gf.set_alpha(g);
                    }
                    this.setOnScripts("gfName", this.gf.curCharacter);
                  }
              }
              this.reloadHealthBarColors();
              break;
            case "Change Scroll Speed":
              if (this.songSpeedType != "constant") {
                if (f == null) {
                  f = 1;
                }
                if (k == null) {
                  k = 0;
                }
                g = null;
                g = y.defaultData.gameplaySettings.h.scrollspeed;
                g = A.SONG.speed * (Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "scrollspeed") ? y.data.gameplaySettings.h.scrollspeed : g) * f;
                if (k <= 0) {
                  this.set_songSpeed(g);
                } else {
                  this.songSpeedTween = Da.tween(this, {
                    songSpeed: g
                  }, k / this.playbackRate, {
                    ease: Xa.linear,
                    onComplete: function (a) {
                      e.songSpeedTween = null;
                    }
                  });
                }
              }
              break;
            case "Hey!":
              g = 2;
              switch (w.trim(b.toLowerCase())) {
                case "0":
                case "bf":
                case "boyfriend":
                  g = 0;
                  break;
                case "1":
                case "gf":
                case "girlfriend":
                  g = 1;
              }
              if (k == null || k <= 0) {
                k = 0.6;
              }
              if (g != 0) {
                if (w.startsWith(this.dad.curCharacter, "gf")) {
                  this.dad.playAnim("cheer", true);
                  this.dad.specialAnim = true;
                  this.dad.heyTimer = k;
                } else if (this.gf != null) {
                  this.gf.playAnim("cheer", true);
                  this.gf.specialAnim = true;
                  this.gf.heyTimer = k;
                }
              }
              if (g != 1) {
                this.boyfriend.playAnim("hey", true);
                this.boyfriend.specialAnim = true;
                this.boyfriend.heyTimer = k;
              }
              break;
            case "Play Animation":
              g = this.dad;
              switch (w.trim(c.toLowerCase())) {
                case "bf":
                case "boyfriend":
                  g = this.boyfriend;
                  break;
                case "gf":
                case "girlfriend":
                  g = this.gf;
                  break;
                default:
                  g = this.dad;
              }
              if (g != null) {
                g.playAnim(b, true);
                g.specialAnim = true;
              }
              break;
            case "Play Sound":
              if (k == null) {
                k = 1;
              }
              h.sound.play(D.sound(b), k);
              break;
            case "Screen Shake":
              g = [b, c];
              n = [this.camGame, this.camHUD];
              for (var p = 0, m = n.length; p < m;) {
                var l = p++;
                var u = g[l].split(",");
                var q = 0;
                var r = 0;
                if (u[0] != null) {
                  q = parseFloat(w.trim(u[0]));
                }
                if (u[1] != null) {
                  r = parseFloat(w.trim(u[1]));
                }
                if (isNaN(q)) {
                  q = 0;
                }
                if (isNaN(r)) {
                  r = 0;
                }
                if (q > 0 && r != 0) {
                  n[l].shake(r, q);
                }
              }
              break;
            case "Set Cam Zoom":
              g = parseFloat(b);
              n = parseFloat(c);
              if (c == "") {
                this.defaultCamZoom = g;
              } else {
                if (this.zoomTween != null) {
                  this.zoomTween.cancel();
                }
                this.zoomTween = Da.tween(this.camGame, {
                  zoom: g
                }, n, {
                  ease: Xa.sineInOut,
                  onComplete: function (a) {
                    e.defaultCamZoom = e.camGame.zoom;
                  }
                });
              }
              break;
            case "Set GF Speed":
              if (f == null || f < 1) {
                f = 1;
              }
              this.gfSpeed = Math.round(f);
              break;
            case "Set Property":
              try {
                u = b.split(".");
                if (u.length > 1) {
                  Fb.setVarInArray(Fb.getPropertyLoop(u), u[u.length - 1], c);
                } else {
                  Fb.setVarInArray(this, b, c);
                }
              } catch (wp) {
                Pa.lastError = wp;
                g = G.caught(wp).unwrap();
                n = g.message.indexOf("\n") + 1;
                if (n <= 0) {
                  n = g.message.length;
                }
                h.log.advanced("ERROR (\"Set Property\" Event) - " + v.string(g.message.substr(0, n)), xa.WARNING, true);
              }
              break;
            case "scene":
              this.spotlight.set_alpha(0.5);
              Da.color(this.background, 0.001, this.background.color, -8355712, {
                ease: Xa.linear
              });
              this.camGame.shake(0.01, 0.5);
              h.sound.play(D.sound("Lights_Turn_On"), 0.5);
              this.dad.set_color(-8355712);
              this.boyfriend.set_color(-8355712);
              this.set_health(1);
              this.uiGroup.set_alpha(1);
              this.dad.idleSuffix = "";
              this.boyfriend.idleSuffix = "";
              break;
            case "zoomin":
              this.moveCamera(true);
              Da.tween(this.get_camera(), {
                zoom: 0.6
              }, 0.8, {
                ease: Xa.smootherStepInOut
              });
          }
          this.stagesFunc(function (e) {
            e.eventCalled(a, b, c, f, k, d);
          });
          this.callOnScripts("onEvent", [a, b, c, d]);
        },
        moveCameraSection: function (a) {
          if (a == null) {
            a = this.curSection;
          }
          if (a < 0) {
            a = 0;
          }
          if (A.SONG.notes[a] != null) {
            if (this.gf != null && A.SONG.notes[a].gfSection) {
              this.camFollow.setPosition(this.gf.getMidpoint().x, this.gf.getMidpoint().y);
              a = this.camFollow;
              a.set_x(a.x + (this.gf.cameraPosition[0] + this.girlfriendCameraOffset[0]));
              a = this.camFollow;
              a.set_y(a.y + (this.gf.cameraPosition[1] + this.girlfriendCameraOffset[1]));
              this.tweenCamIn();
              this.callOnScripts("onMoveCamera", ["gf"]);
            } else {
              a = A.SONG.notes[a].mustHitSection != 1;
              this.moveCamera(a);
              this.callOnScripts("onMoveCamera", [a ? "dad" : "boyfriend"]);
            }
          }
        },
        moveCamera: function (a) {
          var b = this;
          if (a) {
            this.camFollow.setPosition(this.dad.getMidpoint().x + 150, this.dad.getMidpoint().y - 100);
            a = this.camFollow;
            a.set_x(a.x + (this.dad.cameraPosition[0] + this.opponentCameraOffset[0]));
            a = this.camFollow;
            a.set_y(a.y + (this.dad.cameraPosition[1] + this.opponentCameraOffset[1]));
            this.tweenCamIn();
          } else {
            this.camFollow.setPosition(this.boyfriend.getMidpoint().x - 100, this.boyfriend.getMidpoint().y - 100);
            a = this.camFollow;
            a.set_x(a.x - (this.boyfriend.cameraPosition[0] - this.boyfriendCameraOffset[0]));
            a = this.camFollow;
            a.set_y(a.y + (this.boyfriend.cameraPosition[1] + this.boyfriendCameraOffset[1]));
            if (this.songName == "tutorial" && this.cameraTwn == null && h.camera.zoom != 1) {
              this.cameraTwn = Da.tween(h.camera, {
                zoom: 1
              }, O.stepCrochet * 4 / 1000, {
                ease: Xa.elasticInOut,
                onComplete: function (a) {
                  b.cameraTwn = null;
                }
              });
            }
          }
        },
        tweenCamIn: function () {
          var a = this;
          if (this.songName == "tutorial" && this.cameraTwn == null && h.camera.zoom != 1.3) {
            this.cameraTwn = Da.tween(h.camera, {
              zoom: 1.3
            }, O.stepCrochet * 4 / 1000, {
              ease: Xa.elasticInOut,
              onComplete: function (b) {
                a.cameraTwn = null;
              }
            });
          }
        },
        finishSong: function (a) {
          if (a == null) {
            a = false;
          }
          var b = this;
          this.updateTime = false;
          h.sound.music.set_volume(0);
          this.vocals.set_volume(0);
          this.vocals.pause();
          this.opponentVocals.set_volume(0);
          this.opponentVocals.pause();
          if (y.data.noteOffset <= 0 || a) {
            this.endVid();
          } else {
            this.finishTimer = new Ec().start(y.data.noteOffset / 1000, function (a) {
              b.endVid();
            });
          }
        },
        endVid: function () {
          var a = this;
          this.endingSong = true;
          Da.tween(this.END, {
            alpha: 1
          }, 5, {
            ease: Xa.smootherStepInOut
          });
          h.sound.play(D.sound("ollie"), 0.5);
          new Ec().start(7, function (b) {
            a.endSong();
          });
        },
        endSong: function () {
          var a = this;
          if (!this.startingSong) {
            this.notes.forEach(function (b) {
              if (b.strumTime < a.songLength - O.safeZoneOffset) {
                a.set_health(a.health - a.healthLoss * 0.05);
              }
            });
            for (var b = 0, c = this.unspawnNotes; b < c.length;) {
              var d = c[b];
              ++b;
              if (d.strumTime < this.songLength - O.safeZoneOffset) {
                this.set_health(this.health - this.healthLoss * 0.05);
              }
            }
            if (this.doDeathCheck()) {
              return false;
            }
          }
          this.timeBar.set_visible(false);
          this.timeTxt.set_visible(false);
          this.canPause = false;
          this.endingSong = true;
          this.updateTime = this.inCutscene = this.camZooming = false;
          A.deathCounter = 0;
          A.seenCutscene = false;
          if (this.callOnScripts("onEndSong", null, true) != Fb.Function_Stop && !this.transitioning) {
            b = this.ratingPercent;
            if (isNaN(b)) {
              b = 0;
            }
            $a.saveScore(A.SONG.song, this.songScore, A.storyDifficulty, b);
            this.set_playbackRate(1);
            if (A.chartingMode) {
              this.openChartEditor();
              return false;
            }
            if (A.isStoryMode) {
              A.campaignScore += this.songScore;
              A.campaignMisses += this.songMisses;
              r.remove(A.storyPlaylist, A.storyPlaylist[0]);
              if (A.storyPlaylist.length <= 0) {
                Kd.loadTopMod();
                b = h.sound;
                c = D.returnSound("music", "freakyMenu", null);
                b.playMusic(c);
                P.switchState(new Jb());
                b = null;
                b = y.defaultData.gameplaySettings.h.practice;
                if (Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "practice") ? y.data.gameplaySettings.h.practice : b) {
                  b = false;
                } else {
                  b = null;
                  b = y.defaultData.gameplaySettings.h.botplay;
                  b = !(Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "botplay") ? y.data.gameplaySettings.h.botplay : b);
                }
                if (b) {
                  Jb.weekCompleted.h[ib.weeksList[A.storyWeek]] = true;
                  $a.saveWeekScore(ib.getWeekFileName(), A.campaignScore, A.storyDifficulty);
                  h.save.data.weekCompleted = Jb.weekCompleted;
                  h.save.flush();
                }
                A.changedDifficulty = false;
              } else {
                b = null;
                if (b == null) {
                  b = A.storyDifficulty;
                }
                d = nb.list[b];
                d = d != nb.defaultDifficulty ? "-" + d : "";
                c = new V("[~&\\\\;:<>#]", "");
                b = new V("[.,'\"%?!]", "");
                var e = c.split(w.replace(d, " ", "-")).join("-");
                d = b.split(e).join("").toLowerCase();
                zb.trace("LOADING NEXT SONG", {
                  fileName: "source/states/PlayState.hx",
                  lineNumber: 2592,
                  className: "states.PlayState",
                  methodName: "endSong"
                });
                e = A.storyPlaylist[0];
                c = new V("[~&\\\\;:<>#]", "");
                b = new V("[.,'\"%?!]", "");
                c = c.split(w.replace(e, " ", "-")).join("-");
                zb.trace(b.split(c).join("").toLowerCase() + d, {
                  fileName: "source/states/PlayState.hx",
                  lineNumber: 2593,
                  className: "states.PlayState",
                  methodName: "endSong"
                });
                Rb.skipNextTransIn = true;
                Rb.skipNextTransOut = true;
                A.prevCamFollow = this.camFollow;
                A.SONG = Md.loadFromJson(A.storyPlaylist[0] + d, A.storyPlaylist[0]);
                b = h.sound.music;
                b.cleanup(b.autoDestroy, true);
                P.switchState(qc.getNextState(new A(), false));
              }
            } else {
              zb.trace("WENT BACK TO FREEPLAY??", {
                fileName: "source/states/PlayState.hx",
                lineNumber: 2607,
                className: "states.PlayState",
                methodName: "endSong"
              });
              Kd.loadTopMod();
              P.switchState(new Ta());
              b = h.sound;
              c = D.returnSound("music", "freakyMenu", null);
              b.playMusic(c);
              A.changedDifficulty = false;
            }
            this.transitioning = true;
          }
          return true;
        },
        KillNotes: function () {
          while (this.notes.length > 0) {
            var a = this.notes.members[0];
            a.set_active(false);
            a.set_visible(false);
            this.invalidateNote(a);
          }
          this.unspawnNotes = [];
          this.eventNotes = [];
        },
        cachePopUpScore: function () {
          var a = "";
          var b = "";
          if (A.stageUI != "normal") {
            a = "" + A.stageUI + "UI/";
            if (A.get_isPixelStage()) {
              b = "-pixel";
            }
          }
          for (var c = 0, d = this.ratingsData; c < d.length;) {
            var e = d[c];
            ++c;
            D.image(a + e.image + b);
          }
          D.image(a + "num0" + b);
          D.image(a + "num1" + b);
          D.image(a + "num2" + b);
          D.image(a + "num3" + b);
          D.image(a + "num4" + b);
          D.image(a + "num5" + b);
          D.image(a + "num6" + b);
          D.image(a + "num7" + b);
          D.image(a + "num8" + b);
          D.image(a + "num9" + b);
        },
        popUpScore: function (a) {
          var b = Math.abs(a.strumTime - O.songPosition + y.data.ratingOffset);
          this.vocals.set_volume(1);
          if (!y.data.comboStacking && this.comboGroup.group.members.length > 0) {
            for (var c = new tc(this.comboGroup.group.members, null); c.hasNext();) {
              var d = c.next();
              d.destroy();
              this.comboGroup.remove(d);
            }
          }
          c = h.width * 0.45;
          var e = new F();
          d = 350;
          var f = O.judgeNote(this.ratingsData, b / this.playbackRate);
          this.totalNotesHit += f.ratingMod;
          a.ratingMod = f.ratingMod;
          if (!a.ratingDisabled) {
            f.hits++;
          }
          a.rating = f.name;
          d = f.score;
          if (f.noteSplash && !a.noteSplashData.disabled) {
            this.spawnNoteSplashOnNote(a);
          }
          if (!this.practiceMode && !this.cpuControlled) {
            this.songScore += d;
            if (!a.ratingDisabled) {
              this.songHits++;
              this.totalPlayed++;
              this.RecalculateRating(false);
            }
          }
          b = a = "";
          d = y.data.antialiasing;
          if (A.stageUI != "normal") {
            a = "" + A.stageUI + "UI/";
            if (A.get_isPixelStage()) {
              b = "-pixel";
            }
            d = !A.get_isPixelStage();
          }
          e.loadGraphic(D.image(a + f.image + b));
          e.set_x((h.width - e.get_width()) / 2);
          e.set_y((h.height - e.get_height()) / 2);
          e.set_x(c - 40);
          e.set_y(e.y - 60);
          e.acceleration.set_y(this.playbackRate * 550 * this.playbackRate);
          e.velocity.set_y(e.velocity.y - h.random.int(140, 175) * this.playbackRate);
          e.velocity.set_x(e.velocity.x - h.random.int(0, 10) * this.playbackRate);
          e.set_visible(!y.data.hideHud && this.showRating);
          e.set_x(e.x + y.data.comboOffset[0]);
          e.set_y(e.y - y.data.comboOffset[1]);
          e.set_antialiasing(d);
          var k = new F().loadGraphic(D.image(a + "combo" + b));
          k.set_x((h.width - k.get_width()) / 2);
          k.set_y((h.height - k.get_height()) / 2);
          k.set_x(c);
          k.acceleration.set_y(h.random.int(200, 300) * this.playbackRate * this.playbackRate);
          k.velocity.set_y(k.velocity.y - h.random.int(140, 160) * this.playbackRate);
          k.set_visible(!y.data.hideHud && this.showCombo);
          k.set_x(k.x + y.data.comboOffset[0]);
          k.set_y(k.y - y.data.comboOffset[1]);
          k.set_antialiasing(d);
          k.set_y(k.y + 60);
          k.velocity.set_x(k.velocity.x + h.random.int(1, 10) * this.playbackRate);
          this.comboGroup.add(e);
          if (A.get_isPixelStage()) {
            e.setGraphicSize(e.get_width() * A.daPixelZoom * 0.85 | 0);
            k.setGraphicSize(k.get_width() * A.daPixelZoom * 0.85 | 0);
          } else {
            e.setGraphicSize(e.get_width() * 0.7 | 0);
            k.setGraphicSize(k.get_width() * 0.7 | 0);
          }
          k.updateHitbox();
          e.updateHitbox();
          f = [];
          if (this.combo >= 1000) {
            f.push(Math.floor(this.combo / 1000) % 10);
          }
          f.push(Math.floor(this.combo / 100) % 10);
          f.push(Math.floor(this.combo / 10) % 10);
          f.push(this.combo % 10);
          var g = 0;
          var n = 0;
          if (this.showCombo) {
            this.comboGroup.add(k);
          }
          for (var p = 0; p < f.length;) {
            var m = f[p];
            ++p;
            m = [new F().loadGraphic(D.image(a + "num" + (m | 0) + b))];
            m[0].set_x((h.width - m[0].get_width()) / 2);
            m[0].set_y((h.height - m[0].get_height()) / 2);
            m[0].set_x(c + g * 43 - 90 + y.data.comboOffset[2]);
            m[0].set_y(m[0].y + (80 - y.data.comboOffset[3]));
            if (A.get_isPixelStage()) {
              m[0].setGraphicSize(m[0].get_width() * A.daPixelZoom | 0);
            } else {
              m[0].setGraphicSize(m[0].get_width() * 0.5 | 0);
            }
            m[0].updateHitbox();
            m[0].acceleration.set_y(h.random.int(200, 300) * this.playbackRate * this.playbackRate);
            m[0].velocity.set_y(m[0].velocity.y - h.random.int(140, 160) * this.playbackRate);
            m[0].velocity.set_x(h.random.float(-5, 5) * this.playbackRate);
            m[0].set_visible(!y.data.hideHud);
            m[0].set_antialiasing(d);
            if (this.showComboNum) {
              this.comboGroup.add(m[0]);
            }
            var l = O.crochet * 0.002;
            Da.tween(m[0], {
              alpha: 0
            }, 0.2 / this.playbackRate, {
              onComplete: function (a) {
                return function (b) {
                  a[0].destroy();
                };
              }(m),
              startDelay: l / this.playbackRate
            });
            ++g;
            if (m[0].x > n) {
              n = m[0].x;
            }
          }
          k.set_x(n + 50);
          Da.tween(e, {
            alpha: 0
          }, 0.2 / this.playbackRate, {
            startDelay: O.crochet * 0.001 / this.playbackRate
          });
          Da.tween(k, {
            alpha: 0
          }, 0.2 / this.playbackRate, {
            onComplete: function (a) {
              k.destroy();
              e.destroy();
            },
            startDelay: O.crochet * 0.002 / this.playbackRate
          });
        },
        onKeyPress: function (a) {
          a = a.keyCode;
          var b = A.getKeyFromEvent(this.keysArray, a);
          if (!this.get_controls().controllerMode) {
            if (h.keys.checkStatus(a, 2)) {
              this.keyPressed(b);
            }
          }
        },
        keyPressed: function (a) {
          if (!this.cpuControlled && !this.paused && !this.inCutscene && !(a < 0) && !(a >= this.playerStrums.length) && !!this.generatedMusic && !this.endingSong && !this.boyfriend.stunned && this.callOnScripts("onKeyPressPre", [a]) != Fb.Function_Stop) {
            var b = O.songPosition;
            if (O.songPosition >= 0) {
              O.songPosition = h.sound.music._time;
            }
            var c = [];
            for (var d = 0, e = this.notes.members; d < e.length;) {
              var f = e[d];
              ++d;
              var k = !this.strumsBlocked[f.noteData] && f.canBeHit && f.mustPress && !f.tooLate && !f.wasGoodHit && !f.blockHit;
              if (f != null && k && !f.isSustainNote && f.noteData == a) {
                c.push(f);
              }
            }
            c.sort(A.sortHitNotes);
            d = !y.data.ghostTapping;
            if (c.length != 0) {
              d = c[0];
              if (c.length > 1) {
                c = c[1];
                if (c.noteData == d.noteData) {
                  if (Math.abs(c.strumTime - d.strumTime) < 1) {
                    this.invalidateNote(c);
                  } else if (c.strumTime < d.strumTime) {
                    d = c;
                  }
                }
              }
              this.goodNoteHit(d);
            } else if (d) {
              this.callOnScripts("onGhostTap", [a]);
              this.noteMissPress(a);
            }
            if (this.keysPressed.indexOf(a) == -1) {
              this.keysPressed.push(a);
            }
            O.songPosition = b;
            b = this.playerStrums.members[a];
            if (this.strumsBlocked[a] != 1 && b != null && b.animation._curAnim.name != "confirm") {
              b.playAnim("pressed");
              b.resetAnim = 0;
            }
            this.callOnScripts("onKeyPress", [a]);
          }
        },
        onKeyRelease: function (a) {
          a = A.getKeyFromEvent(this.keysArray, a.keyCode);
          if (!this.get_controls().controllerMode && a > -1) {
            this.keyReleased(a);
          }
        },
        keyReleased: function (a) {
          if (!this.cpuControlled && !!this.startedCountdown && !this.paused && !(a < 0) && !(a >= this.playerStrums.length) && this.callOnScripts("onKeyReleasePre", [a]) != Fb.Function_Stop) {
            var b = this.playerStrums.members[a];
            if (b != null) {
              b.playAnim("static");
              b.resetAnim = 0;
            }
            this.callOnScripts("onKeyRelease", [a]);
          }
        },
        keysCheck: function () {
          var a = [];
          var b = [];
          var c = [];
          for (var d = 0, e = this.keysArray; d < e.length;) {
            var f = e[d];
            ++d;
            a.push(this.get_controls().pressed(f));
            if (this.get_controls().controllerMode) {
              b.push(this.get_controls().justPressed(f));
              c.push(this.get_controls().justReleased(f));
            }
          }
          if (this.get_controls().controllerMode && b.indexOf(true) != -1) {
            d = 0;
            e = b.length;
            while (d < e) {
              f = d++;
              if (b[f] && this.strumsBlocked[f] != 1) {
                this.keyPressed(f);
              }
            }
          }
          if (this.startedCountdown && !this.inCutscene && !this.boyfriend.stunned && this.generatedMusic) {
            if (this.notes.length > 0) {
              for (b = new tc(this.notes.members, null); b.hasNext();) {
                d = b.next();
                e = d != null && !this.strumsBlocked[d.noteData] && d.canBeHit && d.mustPress && !d.tooLate && !d.wasGoodHit && !d.blockHit;
                if (this.guitarHeroSustains) {
                  e = e && d.parent != null && d.parent.wasGoodHit;
                }
                if (e && d.isSustainNote && a[d.noteData]) {
                  this.goodNoteHit(d);
                }
              }
            }
            if (a.indexOf(true) == -1 || this.endingSong) {
              this.playerDance();
            }
          }
          if ((this.get_controls().controllerMode || this.strumsBlocked.indexOf(true) != -1) && c.indexOf(true) != -1) {
            d = 0;
            e = c.length;
            while (d < e) {
              f = d++;
              if (c[f] || this.strumsBlocked[f] == 1) {
                this.keyReleased(f);
              }
            }
          }
        },
        noteMiss: function (a) {
          var b = this;
          this.notes.forEachAlive(function (c) {
            if (a != c && a.mustPress && a.noteData == c.noteData && a.isSustainNote == c.isSustainNote && Math.abs(a.strumTime - c.strumTime) < 1) {
              b.invalidateNote(c);
            }
          });
          this.noteMissCommon(a.noteData, a);
          var c = this.callOnLuas("noteMiss", [this.notes.members.indexOf(a), a.noteData, a.noteType, a.isSustainNote]);
          if (c != Fb.Function_Stop && c != Fb.Function_StopHScript && c != Fb.Function_StopAll) {
            this.callOnHScript("noteMiss", [a]);
          }
        },
        noteMissPress: function (a) {
          if (a == null) {
            a = 1;
          }
          if (!y.data.ghostTapping) {
            this.noteMissCommon(a);
            h.sound.play(D.sound("missnote" + h.random.int(1, 3), null), h.random.float(0.1, 0.2));
            this.callOnScripts("noteMissPress", [a]);
          }
        },
        noteMissCommon: function (a, b) {
          var c = 0.05;
          if (b != null) {
            c = b.missHealth;
          }
          if (b != null && this.guitarHeroSustains && b.parent == null) {
            if (b.tail.length > 0) {
              b.set_alpha(0.35);
              for (var d = 0, e = b.tail; d < e.length;) {
                var f = e[d];
                ++d;
                f.set_alpha(b.alpha);
                f.missed = true;
                f.canBeHit = false;
                f.ignoreNote = true;
                f.tooLate = true;
              }
              b.missed = true;
              b.canBeHit = false;
              c *= b.tail.length + 1;
            }
            if (b.missed) {
              return;
            }
          }
          if (b != null && this.guitarHeroSustains && b.parent != null && b.isSustainNote) {
            if (b.missed) {
              return;
            }
            e = b.parent;
            if (e.wasGoodHit && e.tail.length > 0) {
              d = 0;
              e = e.tail;
              while (d < e.length) {
                f = e[d];
                ++d;
                if (f != b) {
                  f.missed = true;
                  f.canBeHit = false;
                  f.ignoreNote = true;
                  f.tooLate = true;
                }
              }
            }
          }
          if (this.instakillOnMiss) {
            this.vocals.set_volume(0);
            this.opponentVocals.set_volume(0);
            this.doDeathCheck(true);
          }
          d = this.combo;
          this.combo = 0;
          this.set_health(this.health - c * this.healthLoss);
          if (!this.practiceMode) {
            this.songScore -= 10;
          }
          if (!this.endingSong) {
            this.songMisses++;
          }
          this.totalPlayed++;
          this.RecalculateRating(true);
          c = this.boyfriend;
          if (b != null && b.gfNote || A.SONG.notes[this.curSection] != null && A.SONG.notes[this.curSection].gfSection) {
            c = this.gf;
          }
          if (c != null && (b == null || !b.noMissAnimation) && !!c.hasMissAnimations) {
            e = "";
            if (b != null) {
              e = b.animSuffix;
            }
            c.playAnim(this.singAnimations[Math.abs(Math.min(this.singAnimations.length - 1, a)) | 0] + "miss" + e, true);
            if (c != this.gf && d > 5 && this.gf != null && Object.prototype.hasOwnProperty.call(this.gf.animOffsets.h, "sad")) {
              this.gf.playAnim("sad");
              this.gf.specialAnim = true;
            }
          }
          this.vocals.set_volume(0);
        },
        opponentNoteHit: function (a) {
          var b = this.callOnLuas("opponentNoteHitPre", [this.notes.members.indexOf(a), Math.abs(a.noteData), a.noteType, a.isSustainNote]);
          if (b != Fb.Function_Stop && b != Fb.Function_StopHScript && b != Fb.Function_StopAll) {
            this.callOnHScript("opponentNoteHitPre", [a]);
          }
          if (this.songName != "tutorial") {
            this.camZooming = true;
          }
          if (a.noteType == "Hey!" && Object.prototype.hasOwnProperty.call(this.dad.animOffsets.h, "hey")) {
            this.dad.playAnim("hey", true);
            this.dad.specialAnim = true;
            this.dad.heyTimer = 0.6;
          } else if (!a.noAnimation) {
            var c = a.animSuffix;
            if (A.SONG.notes[this.curSection] != null && A.SONG.notes[this.curSection].altAnim && !A.SONG.notes[this.curSection].gfSection) {
              c = "-alt";
            }
            b = this.dad;
            c = this.singAnimations[Math.abs(Math.min(this.singAnimations.length - 1, a.noteData)) | 0] + c;
            if (a.gfNote) {
              b = this.gf;
            }
            if (b != null) {
              b.playAnim(c, true);
              b.holdTimer = 0;
            }
          }
          this.vocals.set_volume(1);
          this.strumPlayAnim(true, Math.abs(a.noteData) | 0, O.stepCrochet * 1.25 / 1000 / this.playbackRate);
          a.hitByOpponent = true;
          b = this.callOnLuas("opponentNoteHit", [this.notes.members.indexOf(a), Math.abs(a.noteData), a.noteType, a.isSustainNote]);
          if (b != Fb.Function_Stop && b != Fb.Function_StopHScript && b != Fb.Function_StopAll) {
            this.callOnHScript("opponentNoteHit", [a]);
          }
          if (!a.isSustainNote) {
            this.invalidateNote(a);
          }
        },
        goodNoteHit: function (a) {
          if (!a.wasGoodHit && (!this.cpuControlled || !a.ignoreNote)) {
            var b = a.isSustainNote;
            var c = Math.round(Math.abs(a.noteData));
            var d = a.noteType;
            var e = this.callOnLuas("goodNoteHitPre", [this.notes.members.indexOf(a), c, d, b]);
            if (e != Fb.Function_Stop && e != Fb.Function_StopHScript && e != Fb.Function_StopAll) {
              this.callOnHScript("goodNoteHitPre", [a]);
            }
            a.wasGoodHit = true;
            if (y.data.hitsoundVolume > 0 && !a.hitsoundDisabled) {
              h.sound.play(D.sound(a.hitsound), y.data.hitsoundVolume);
            }
            if (a.hitCausesMiss) {
              if (!a.noMissAnimation && a.noteType == "Hurt Note" && Object.prototype.hasOwnProperty.call(this.boyfriend.animOffsets.h, "hurt")) {
                this.boyfriend.playAnim("hurt", true);
                this.boyfriend.specialAnim = true;
              }
              this.noteMiss(a);
              if (!a.noteSplashData.disabled && !a.isSustainNote) {
                this.spawnNoteSplashOnNote(a);
              }
            } else {
              if (!a.noAnimation) {
                e = this.singAnimations[Math.abs(Math.min(this.singAnimations.length - 1, a.noteData)) | 0];
                var f = this.boyfriend;
                var k = "hey";
                if (a.gfNote) {
                  f = this.gf;
                  k = "cheer";
                }
                if (f != null) {
                  f.playAnim(e + a.animSuffix, true);
                  f.holdTimer = 0;
                  if (a.noteType == "Hey!" && Object.prototype.hasOwnProperty.call(f.animOffsets.h, k)) {
                    f.playAnim(k, true);
                    f.specialAnim = true;
                    f.heyTimer = 0.6;
                  }
                }
              }
              if (this.cpuControlled) {
                this.strumPlayAnim(false, Math.abs(a.noteData) | 0, O.stepCrochet * 1.25 / 1000 / this.playbackRate);
              } else {
                e = this.playerStrums.members[a.noteData];
                if (e != null) {
                  e.playAnim("confirm", true);
                }
              }
              this.vocals.set_volume(1);
              if (!a.isSustainNote) {
                this.combo++;
                if (this.combo > 9999) {
                  this.combo = 9999;
                }
                this.popUpScore(a);
              }
              e = true;
              if (this.guitarHeroSustains && a.isSustainNote) {
                e = false;
              }
              if (e) {
                this.set_health(this.health + a.hitHealth * this.healthGain);
              }
              e = this.callOnLuas("goodNoteHit", [this.notes.members.indexOf(a), c, d, b]);
              if (e != Fb.Function_Stop && e != Fb.Function_StopHScript && e != Fb.Function_StopAll) {
                this.callOnHScript("goodNoteHit", [a]);
              }
            }
            if (!a.isSustainNote) {
              this.invalidateNote(a);
            }
          }
        },
        invalidateNote: function (a) {
          a.kill();
          this.notes.remove(a, true);
          a.destroy();
        },
        spawnNoteSplashOnNote: function (a) {
          if (a != null) {
            var b = this.playerStrums.members[a.noteData];
            if (b != null) {
              this.spawnNoteSplash(b.x, b.y, a.noteData, a);
            }
          }
        },
        spawnNoteSplash: function (a, b, c, d) {
          var e = this.grpNoteSplashes.recycle(ec);
          e.setupNoteSplash(a, b, c, d);
          this.grpNoteSplashes.add(e);
        },
        destroy: function () {
          oa.get_current().stage.removeEventListener("keyDown", m(this, this.onKeyPress));
          oa.get_current().stage.removeEventListener("keyUp", m(this, this.onKeyRelease));
          h.animationTimeScale = 1;
          h.sound.music.set_pitch(1);
          Na.globalRgbShaders = [];
          Ri.clearNoteTypesData();
          A.instance = null;
          P.prototype.destroy.call(this);
        },
        stepHit: function () {
          var a = this;
          P.prototype.stepHit.call(this);
          if (Math.abs(h.sound.music._time - (O.songPosition - O.offset)) > 20 || A.SONG.needsVoices && Math.abs(this.vocals._time - (O.songPosition - O.offset)) > 20) {
            this.resyncVocals();
          }
          if (this.curStep != this.lastStepHit) {
            switch (this.curStep) {
              case 740:
                Da.tween(this.ending, {
                  alpha: 1
                }, 3, {
                  ease: Xa.linear,
                  onComplete: function (b) {
                    a.dad.idleSuffix = "-alt";
                    a.boyfriend.idleSuffix = "-alt";
                    a.boyfriend.dance();
                    a.dad.dance();
                    Da.tween(a.uiGroup, {
                      alpha: 0
                    }, 3, {
                      ease: Xa.linear
                    });
                    Da.tween(a.ending, {
                      alpha: 0
                    }, 3, {
                      ease: Xa.linear
                    });
                    a.background.set_color(-16777216);
                    a.dad.set_color(-1);
                    a.boyfriend.set_color(-1);
                    Da.tween(a.spotlight, {
                      alpha: 0
                    }, 0.3, {
                      ease: Xa.linear
                    });
                  }
                });
                break;
              case 900:
                Da.tween(this.behind, {
                  alpha: 1
                }, 17, {
                  ease: Xa.smootherStepInOut
                });
                Da.tween(this.get_camera(), {
                  zoom: 1
                }, 17, {
                  ease: Xa.smootherStepInOut
                });
                break;
              case 969:
                this.zoome = false;
                Da.tween(this.camHUD, {
                  alpha: 0
                }, 1, {
                  ease: Xa.smootherStepOut
                });
            }
            this.lastStepHit = this.curStep;
            this.setOnScripts("curStep", this.curStep);
            this.callOnScripts("onStepHit");
          }
        },
        beatHit: function () {
          if (!(this.lastBeatHit >= this.curBeat)) {
            if (this.generatedMusic) {
              var a = y.data.downScroll ? -1 : 1;
              if (a == null) {
                a = -1;
              }
              var b = ao.byY;
              var c = a;
              this.notes.members.sort(function (a, d) {
                return b(c, a, d);
              });
            }
            a = this.iconP1.scale;
            var d = 1.2;
            var e = 1.2;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            a.set_x(d);
            a.set_y(e);
            a = this.iconP2.scale;
            e = d = 1.2;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            a.set_x(d);
            a.set_y(e);
            this.iconP1.updateHitbox();
            this.iconP2.updateHitbox();
            this.characterBopper(this.curBeat);
            P.prototype.beatHit.call(this);
            this.lastBeatHit = this.curBeat;
            this.setOnScripts("curBeat", this.curBeat);
            this.callOnScripts("onBeatHit");
          }
        },
        characterBopper: function (a) {
          if (this.gf != null && a % Math.round(this.gfSpeed * this.gf.danceEveryNumBeats) == 0) {
            var b = this.gf;
            var c = "";
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              c = b.isAnimateAtlas ? b.atlas.anim.lastPlayedAnim : b.animation._curAnim.name;
            }
            b = !w.startsWith(c ?? "", "sing");
          } else {
            b = false;
          }
          if (b && !this.gf.stunned) {
            this.gf.dance();
          }
          if (this.boyfriend != null && a % this.boyfriend.danceEveryNumBeats == 0) {
            b = this.boyfriend;
            c = "";
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              c = b.isAnimateAtlas ? b.atlas.anim.lastPlayedAnim : b.animation._curAnim.name;
            }
            b = !w.startsWith(c ?? "", "sing");
          } else {
            b = false;
          }
          if (b && !this.boyfriend.stunned) {
            this.boyfriend.dance();
          }
          if (this.dad != null && a % this.dad.danceEveryNumBeats == 0) {
            b = this.dad;
            c = "";
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              c = b.isAnimateAtlas ? b.atlas.anim.lastPlayedAnim : b.animation._curAnim.name;
            }
            b = !w.startsWith(c ?? "", "sing");
          } else {
            b = false;
          }
          if (b && !this.dad.stunned) {
            this.dad.dance();
          }
        },
        playerDance: function () {
          var a = this.boyfriend;
          var b = "";
          if (a.isAnimateAtlas ? a.atlas.anim.get_curSymbol() != null : a.animation._curAnim != null) {
            b = a.isAnimateAtlas ? a.atlas.anim.lastPlayedAnim : a.animation._curAnim.name;
          }
          a = b ?? "";
          if (this.boyfriend.holdTimer > 0.0011 / h.sound.music._pitch * O.stepCrochet * this.boyfriend.singDuration && w.startsWith(a, "sing") && !w.endsWith(a, "miss")) {
            this.boyfriend.dance();
          }
        },
        sectionHit: function () {
          if (A.SONG.notes[this.curSection] != null) {
            if (!!this.generatedMusic && !this.endingSong && !this.isCameraOnForcedPos) {
              this.moveCameraSection();
            }
            if (this.camZooming && h.camera.zoom < 1.35 && y.data.camZooms) {
              var a = h.camera;
              a.set_zoom(a.zoom + this.camZoomingMult * 0.015);
              a = this.camHUD;
              a.set_zoom(a.zoom + this.camZoomingMult * 0.03);
            }
            if (A.SONG.notes[this.curSection].changeBPM) {
              O.set_bpm(A.SONG.notes[this.curSection].bpm);
              this.setOnScripts("curBpm", O.bpm);
              this.setOnScripts("crochet", O.crochet);
              this.setOnScripts("stepCrochet", O.stepCrochet);
            }
            this.mustHit = A.SONG.notes[this.curSection].mustHitSection;
            this.setOnScripts("mustHitSection", A.SONG.notes[this.curSection].mustHitSection);
            this.setOnScripts("altAnim", A.SONG.notes[this.curSection].altAnim);
            this.setOnScripts("gfSection", A.SONG.notes[this.curSection].gfSection);
          }
          P.prototype.sectionHit.call(this);
          this.setOnScripts("curSection", this.curSection);
          this.callOnScripts("onSectionHit");
        },
        callOnScripts: function (a, b, c, d, e) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = [];
          }
          if (d == null) {
            d = [];
          }
          if (e == null) {
            e = [Fb.Function_Continue];
          }
          var f = this.callOnLuas(a, b, c, d, e);
          if (f == null || e.indexOf(f) != -1) {
            f = this.callOnHScript(a, b, c, d, e);
          }
          return f;
        },
        callOnLuas: function (a, b, c, d, e) {
          return Fb.Function_Continue;
        },
        callOnHScript: function (a, b, c, d, e) {
          return Fb.Function_Continue;
        },
        setOnScripts: function (a, b, c) {
          if (c == null) {
            c = [];
          }
          this.setOnLuas(a, b, c);
          this.setOnHScript(a, b, c);
        },
        setOnLuas: function (a, b, c) {},
        setOnHScript: function (a, b, c) {},
        strumPlayAnim: function (a, b, c) {
          a = a ? this.opponentStrums.members[b] : this.playerStrums.members[b];
          if (a != null) {
            a.playAnim("confirm", true);
            a.resetAnim = c;
          }
        },
        RecalculateRating: function (a) {
          if (a == null) {
            a = false;
          }
          this.setOnScripts("score", this.songScore);
          this.setOnScripts("misses", this.songMisses);
          this.setOnScripts("hits", this.songHits);
          this.setOnScripts("combo", this.combo);
          if (this.callOnScripts("onRecalculateRating", null, true) != Fb.Function_Stop) {
            this.ratingName = "?";
            if (this.totalPlayed != 0 && (this.ratingPercent = Math.min(1, Math.max(0, this.totalNotesHit / this.totalPlayed)), this.ratingName = A.ratingStuff[A.ratingStuff.length - 1][0], this.ratingPercent < 1)) {
              for (var b = 0, c = A.ratingStuff.length - 1; b < c;) {
                var d = b++;
                if (this.ratingPercent < A.ratingStuff[d][1]) {
                  this.ratingName = A.ratingStuff[d][0];
                  break;
                }
              }
            }
            this.fullComboFunction();
          }
          this.updateScore(a);
          this.setOnScripts("rating", this.ratingPercent);
          this.setOnScripts("ratingName", this.ratingName);
          this.setOnScripts("ratingFC", this.ratingFC);
        },
        __class__: A,
        __properties__: q(P.prototype.__properties__, {
          set_health: "set_health",
          set_playbackRate: "set_playbackRate",
          set_songSpeed: "set_songSpeed"
        })
      });
      function Jb(a, b) {
        this.lerpScore = this.intendedScore = 0;
        this.movedBack = this.selectedWeek = this.stopspamming = false;
        this.loadedWeeks = [];
        this.curDifficulty = 1;
        P.call(this, a, b);
      }
      g["states.StoryMenuState"] = Jb;
      Jb.__name__ = "states.StoryMenuState";
      Jb.__super__ = P;
      Jb.prototype = q(P.prototype, {
        create: function () {
          D.clearStoredMemory();
          D.clearUnusedMemory();
          A.isStoryMode = true;
          ib.reloadWeekFiles(true);
          if (Jb.curWeek >= ib.weeksList.length) {
            Jb.curWeek = 0;
          }
          this.persistentUpdate = this.persistentDraw = true;
          this.scoreText = new U(10, 10, 0, "SCORE: 49324858", 36);
          this.scoreText.setFormat("VCR OSD Mono", 32);
          this.txtWeekTitle = new U(h.width * 0.7, 10, 0, "", 32);
          this.txtWeekTitle.setFormat("VCR OSD Mono", 32, -1, "right");
          this.txtWeekTitle.set_alpha(0.7);
          var a = new U(0, 10);
          a.set_text("RANK: GREAT");
          a.setFormat("assets/fonts/vcr.ttf", 32);
          a.set_size(this.scoreText._defaultFormat.size | 0);
          var b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((h.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((h.height - a.get_height()) / 2);
          }
          var c = D.image("campaign_menu_UI_assets", null, true);
          c = ob.fromSparrow(c, D.getPath("images/campaign_menu_UI_assets.xml", null, null));
          var d = new F(0, 56).makeGraphic(h.width, 386, -405679);
          this.bgSprite = new F(0, 56);
          this.grpWeekText = new Qa();
          this.add(this.grpWeekText);
          var e = new F().makeGraphic(h.width, 56, -16777216);
          this.add(e);
          this.grpWeekCharacters = new Qa();
          this.grpLocks = new Qa();
          this.add(this.grpLocks);
          for (var f = e = 0, k = ib.weeksList.length; f < k;) {
            var g = f++;
            b = ib.weeksLoaded.h[ib.weeksList[g]];
            var n = this.weekIsLocked(ib.weeksList[g]);
            if (!n || !b.hiddenUntilUnlocked) {
              this.loadedWeeks.push(b);
              ib.setDirectoryFromWeek(b);
              var p = new Kj(0, this.bgSprite.y + 396, ib.weeksList[g]);
              p.set_y(p.y + (p.get_height() + 20) * e);
              p.targetY = e;
              this.grpWeekText.add(p);
              b = 1;
              if (b == null) {
                b = 17;
              }
              if (b == 1 || b == 17) {
                p.set_x((h.width - p.get_width()) / 2);
              }
              if (b == 16 || b == 17) {
                p.set_y((h.height - p.get_height()) / 2);
              }
              if (n) {
                n = new F(p.get_width() + 10 + p.x);
                n.set_antialiasing(y.data.antialiasing);
                n.set_frames(c);
                n.animation.addByPrefix("lock", "lock");
                n.animation.play("lock");
                n.ID = g;
                this.grpLocks.add(n);
              }
              ++e;
            }
          }
          ib.setDirectoryFromWeek(this.loadedWeeks[0]);
          e = this.loadedWeeks[0].weekCharacters;
          f = new re(h.width * 0.25 - 150, e[0]);
          f.set_y(f.y + 70);
          this.grpWeekCharacters.add(f);
          f = new re(h.width * 0.5 - 150, e[1]);
          f.set_y(f.y + 70);
          this.grpWeekCharacters.add(f);
          f = new re(h.width * 0.75 - 150, e[2]);
          f.set_y(f.y + 70);
          this.grpWeekCharacters.add(f);
          this.difficultySelectors = new Qa();
          this.add(this.difficultySelectors);
          this.leftArrow = new F(this.grpWeekText.members[0].x + this.grpWeekText.members[0].get_width() + 10, this.grpWeekText.members[0].y + 10);
          this.leftArrow.set_antialiasing(y.data.antialiasing);
          this.leftArrow.set_frames(c);
          this.leftArrow.animation.addByPrefix("idle", "arrow left");
          this.leftArrow.animation.addByPrefix("press", "arrow push left");
          this.leftArrow.animation.play("idle");
          this.difficultySelectors.add(this.leftArrow);
          nb.list = nb.defaultList.slice();
          if (Jb.lastDifficultyName == "") {
            Jb.lastDifficultyName = nb.defaultDifficulty;
          }
          this.curDifficulty = Math.round(Math.max(0, nb.defaultList.indexOf(Jb.lastDifficultyName)));
          this.sprDifficulty = new F(0, this.leftArrow.y);
          this.sprDifficulty.set_antialiasing(y.data.antialiasing);
          this.difficultySelectors.add(this.sprDifficulty);
          this.rightArrow = new F(this.leftArrow.x + 376, this.leftArrow.y);
          this.rightArrow.set_antialiasing(y.data.antialiasing);
          this.rightArrow.set_frames(c);
          this.rightArrow.animation.addByPrefix("idle", "arrow right");
          this.rightArrow.animation.addByPrefix("press", "arrow push right", 24, false);
          this.rightArrow.animation.play("idle");
          this.difficultySelectors.add(this.rightArrow);
          this.add(d);
          this.add(this.bgSprite);
          this.add(this.grpWeekCharacters);
          c = new F(h.width * 0.07, this.bgSprite.y + 425).loadGraphic(D.image("Menu_Tracks"));
          c.set_antialiasing(y.data.antialiasing);
          this.add(c);
          this.txtTracklist = new U(h.width * 0.05, c.y + 60, 0, "", 32);
          this.txtTracklist.set_alignment("center");
          this.txtTracklist.set_font(a._font);
          this.txtTracklist.set_color(-1747081);
          this.add(this.txtTracklist);
          this.add(this.scoreText);
          this.add(this.txtWeekTitle);
          this.changeWeek();
          this.changeDifficulty();
          P.prototype.create.call(this);
        },
        closeSubState: function () {
          this.persistentUpdate = true;
          this.changeWeek();
          P.prototype.closeSubState.call(this);
        },
        update: function (a) {
          var b = this;
          var c = this.intendedScore;
          this.lerpScore = Math.floor(c + Math.exp(-a * 30) * (this.lerpScore - c));
          if (Math.abs(this.intendedScore - this.lerpScore) < 10) {
            this.lerpScore = this.intendedScore;
          }
          this.scoreText.set_text("WEEK SCORE:" + this.lerpScore);
          if (!this.movedBack && !this.selectedWeek) {
            c = this.get_controls().get_UI_UP_P();
            var d = this.get_controls().get_UI_DOWN_P();
            if (c) {
              this.changeWeek(-1);
              h.sound.play(D.sound("scrollMenu"));
            }
            if (d) {
              this.changeWeek(1);
              h.sound.play(D.sound("scrollMenu"));
            }
            if (h.mouse.wheel != 0) {
              h.sound.play(D.sound("scrollMenu"), 0.4);
              this.changeWeek(-h.mouse.wheel);
              this.changeDifficulty();
            }
            if (this.get_controls().get_UI_RIGHT()) {
              this.rightArrow.animation.play("press");
            } else {
              this.rightArrow.animation.play("idle");
            }
            if (this.get_controls().get_UI_LEFT()) {
              this.leftArrow.animation.play("press");
            } else {
              this.leftArrow.animation.play("idle");
            }
            if (this.get_controls().get_UI_RIGHT_P()) {
              this.changeDifficulty(1);
            } else if (this.get_controls().get_UI_LEFT_P()) {
              this.changeDifficulty(-1);
            } else if (c || d) {
              this.changeDifficulty();
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(17, c.status)) {
              this.persistentUpdate = false;
              this.openSubState(new cn());
            } else if (this.get_controls().get_RESET()) {
              this.persistentUpdate = false;
              this.openSubState(new ck("", this.curDifficulty, "", Jb.curWeek));
            } else if (this.get_controls().get_ACCEPT()) {
              this.selectWeek();
            }
          }
          if (!!this.get_controls().get_BACK() && !this.movedBack && !this.selectedWeek) {
            h.sound.play(D.sound("cancelMenu"));
            this.movedBack = true;
            P.switchState(new Ac());
          }
          P.prototype.update.call(this, a);
          this.grpLocks.forEach(function (a) {
            a.set_y(b.grpWeekText.members[a.ID].y);
            a.set_visible(a.y > h.height / 2);
          });
        },
        selectWeek: function () {
          if (this.weekIsLocked(this.loadedWeeks[Jb.curWeek].fileName)) {
            h.sound.play(D.sound("cancelMenu"));
          } else {
            var a = [];
            var b = this.loadedWeeks[Jb.curWeek].songs;
            for (var c = 0, d = b.length; c < d;) {
              var e = c++;
              a.push(b[e][0]);
            }
            try {
              A.storyPlaylist = a;
              this.selectedWeek = A.isStoryMode = true;
              var f = this.curDifficulty;
              if (f == null) {
                f = A.storyDifficulty;
              }
              var k = nb.list[f];
              k = k != nb.defaultDifficulty ? "-" + k : "";
              var g = new V("[~&\\\\;:<>#]", "");
              var n = new V("[.,'\"%?!]", "");
              var p = g.split(w.replace(k, " ", "-")).join("-");
              var m = n.split(p).join("").toLowerCase();
              if (m == null) {
                m = "";
              }
              A.storyDifficulty = this.curDifficulty;
              A.SONG = Md.loadFromJson(A.storyPlaylist[0].toLowerCase() + m, A.storyPlaylist[0].toLowerCase());
              A.campaignScore = 0;
              A.campaignMisses = 0;
            } catch (l) {
              Pa.lastError = l;
              c = G.caught(l).unwrap();
              zb.trace("ERROR! " + v.string(c), {
                fileName: "source/states/StoryMenuState.hx",
                lineNumber: 303,
                className: "states.StoryMenuState",
                methodName: "selectWeek"
              });
              return;
            }
            if (this.stopspamming == 0) {
              h.sound.play(D.sound("confirmMenu"));
              this.grpWeekText.members[Jb.curWeek].set_isFlashing(true);
              c = 0;
              for (d = this.grpWeekCharacters.members; c < d.length;) {
                a = d[c];
                ++c;
                if (a.character != "" && a.hasConfirmAnimation) {
                  a.animation.play("confirm");
                }
              }
              this.stopspamming = true;
            }
            new Ec().start(1, function (a) {
              a = new A();
              var b = true;
              if (b == null) {
                b = false;
              }
              P.switchState(qc.getNextState(a, b));
              Ta.destroyFreeplayVocals();
            });
          }
        },
        changeDifficulty: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = this;
          this.curDifficulty += a;
          if (this.curDifficulty < 0) {
            this.curDifficulty = nb.list.length - 1;
          }
          if (this.curDifficulty >= nb.list.length) {
            this.curDifficulty = 0;
          }
          ib.setDirectoryFromWeek(this.loadedWeeks[Jb.curWeek]);
          a = this.curDifficulty;
          a = nb.list[a == null ? A.storyDifficulty : a];
          var c = new V("[~&\\\\;:<>#]", "");
          var d = new V("[.,'\"%?!]", "");
          c = c.split(w.replace(a, " ", "-")).join("-");
          d = D.image("menudifficulties/" + d.split(c).join("").toLowerCase());
          if (this.sprDifficulty.graphic != d) {
            this.sprDifficulty.loadGraphic(d);
            this.sprDifficulty.set_x(this.leftArrow.x + 60);
            d = this.sprDifficulty;
            d.set_x(d.x + (308 - this.sprDifficulty.get_width()) / 3);
            this.sprDifficulty.set_alpha(0);
            this.sprDifficulty.set_y(this.leftArrow.y - 15);
            if (this.tweenDifficulty != null) {
              this.tweenDifficulty.cancel();
            }
            this.tweenDifficulty = Da.tween(this.sprDifficulty, {
              y: this.leftArrow.y + 15,
              alpha: 1
            }, 0.07, {
              onComplete: function (a) {
                b.tweenDifficulty = null;
              }
            });
          }
          Jb.lastDifficultyName = a;
          this.intendedScore = $a.getWeekScore(this.loadedWeeks[Jb.curWeek].fileName, this.curDifficulty);
        },
        changeWeek: function (a) {
          if (a == null) {
            a = 0;
          }
          Jb.curWeek += a;
          if (Jb.curWeek >= this.loadedWeeks.length) {
            Jb.curWeek = 0;
          }
          if (Jb.curWeek < 0) {
            Jb.curWeek = this.loadedWeeks.length - 1;
          }
          var b = this.loadedWeeks[Jb.curWeek];
          ib.setDirectoryFromWeek(b);
          this.txtWeekTitle.set_text(b.storyName.toUpperCase());
          this.txtWeekTitle.set_x(h.width - (this.txtWeekTitle.get_width() + 10));
          var c = 0;
          a = !this.weekIsLocked(b.fileName);
          for (var d = 0, e = this.grpWeekText.members; d < e.length;) {
            var f = e[d];
            ++d;
            f.targetY = c - Jb.curWeek;
            if (f.targetY == 0 && a) {
              f.set_alpha(1);
            } else {
              f.set_alpha(0.6);
            }
            ++c;
          }
          this.bgSprite.set_visible(true);
          b = b.weekBackground;
          if (b == null || b.length < 1) {
            this.bgSprite.set_visible(false);
          } else {
            this.bgSprite.loadGraphic(D.image("menubackgrounds/menu_" + b));
          }
          A.storyWeek = Jb.curWeek;
          b = null;
          if (b == null) {
            b = ib.getCurrentWeek();
          }
          b = b.difficulties;
          if (b != null && b.length > 0) {
            b = w.trim(b).split(",");
            for (c = b.length - 1; c > 0;) {
              if (b[c] != null) {
                b[c] = w.trim(b[c]);
                if (b[c].length < 1) {
                  r.remove(b, b[c]);
                }
              }
              --c;
            }
            if (b.length > 0 && b[0].length > 0) {
              nb.list = b;
            }
          } else {
            nb.list = nb.defaultList.slice();
          }
          this.difficultySelectors.set_visible(a);
          if (nb.list.indexOf(nb.defaultDifficulty) != -1) {
            this.curDifficulty = Math.round(Math.max(0, nb.defaultList.indexOf(nb.defaultDifficulty)));
          } else {
            this.curDifficulty = 0;
          }
          a = nb.list.indexOf(Jb.lastDifficultyName);
          if (a > -1) {
            this.curDifficulty = a;
          }
          this.updateText();
        },
        weekIsLocked: function (a) {
          a = ib.weeksLoaded.h[a];
          if (!a.startUnlocked && a.weekBefore.length > 0) {
            if (Object.prototype.hasOwnProperty.call(Jb.weekCompleted.h, a.weekBefore)) {
              return !Jb.weekCompleted.h[a.weekBefore];
            } else {
              return true;
            }
          } else {
            return false;
          }
        },
        updateText: function () {
          var a = this.loadedWeeks[Jb.curWeek].weekCharacters;
          for (var b = 0, c = this.grpWeekCharacters.length; b < c;) {
            var d = b++;
            this.grpWeekCharacters.members[d].changeCharacter(a[d]);
          }
          var e = this.loadedWeeks[Jb.curWeek];
          a = [];
          b = 0;
          for (c = e.songs.length; b < c;) {
            d = b++;
            a.push(e.songs[d][0]);
          }
          this.txtTracklist.set_text("");
          b = 0;
          for (c = a.length; b < c;) {
            d = b++;
            e = this.txtTracklist;
            e.set_text(e.text + (a[d] + "\n"));
          }
          this.txtTracklist.set_text(this.txtTracklist.text.toUpperCase());
          b = this.txtTracklist;
          c = 1;
          if (c == null) {
            c = 17;
          }
          if (c == 1 || c == 17) {
            b.set_x((h.width - b.get_width()) / 2);
          }
          if (c == 16 || c == 17) {
            b.set_y((h.height - b.get_height()) / 2);
          }
          e = this.txtTracklist;
          e.set_x(e.x - h.width * 0.35);
          this.intendedScore = $a.getWeekScore(this.loadedWeeks[Jb.curWeek].fileName, this.curDifficulty);
        },
        __class__: Jb
      });
      function yc(a, b) {
        this.skippedIntro = this.increaseVolume = false;
        this.titleTimer = this.sickBeats = 0;
        this.transitioning = this.newTitle = false;
        this.swagShader = null;
        this.mustUpdate = this.danceLeft = false;
        this.curWacky = [];
        this.titleTextAlphas = [1, 0.64];
        this.titleTextColors = [-13369345, -13421620];
        P.call(this, a, b);
      }
      g["states.TitleState"] = yc;
      yc.__name__ = "states.TitleState";
      yc.__super__ = P;
      yc.prototype = q(P.prototype, {
        create: function () {
          var a = this;
          D.clearStoredMemory();
          Kd.loadTopMod();
          h.fixedTimestep = false;
          h.game.focusLostFramerate = 60;
          h.keys.preventDefaultKeys = [9];
          this.curWacky = h.random.getObject_Array_String(this.getIntroTextShit());
          P.prototype.create.call(this);
          var b = h.save;
          var c = oa.get_current().stage.application.meta.h.company;
          b.bind("anemaniac", "" + c + "/" + Jd.validate(oa.get_current().stage.application.meta.h.file));
          y.loadPrefs();
          $a.load();
          this.titleJSON = Ph.parse(D.getTextFromFile("images/gfDanceTitle.json"));
          if (!yc.initialized) {
            if (h.save.data != null && h.save.data.fullscreen) {
              h.set_fullscreen(h.save.data.fullscreen);
            }
            this.persistentDraw = this.persistentUpdate = true;
          }
          if (h.save.data.weekCompleted != null) {
            Jb.weekCompleted = h.save.data.weekCompleted;
          }
          h.mouse.set_visible(false);
          if (h.save.data.flashing != null || dh.leftState) {
            if (yc.initialized) {
              this.startIntro();
            } else {
              new Ec().start(1, function (b) {
                a.startIntro();
              });
            }
          } else {
            Rb.skipNextTransIn = true;
            Rb.skipNextTransOut = true;
            P.switchState(new dh());
          }
        },
        startIntro: function () {
          if (!yc.initialized && h.sound.music == null) {
            var a = h.sound;
            var b = D.returnSound("music", "freakyMenu", null);
            a.playMusic(b, 0);
          }
          O.set_bpm(this.titleJSON.bpm);
          this.persistentUpdate = true;
          a = new F();
          a.set_antialiasing(y.data.antialiasing);
          if (this.titleJSON.backgroundSprite != null && this.titleJSON.backgroundSprite.length > 0 && this.titleJSON.backgroundSprite != "none") {
            a.loadGraphic(D.image(this.titleJSON.backgroundSprite));
          } else {
            a.makeGraphic(h.width, h.height, -16777216);
          }
          this.add(a);
          a = this.titleText = new F(this.titleJSON.startx, this.titleJSON.starty);
          b = D.image("titleEnter", null, true);
          a.set_frames(ob.fromSparrow(b, D.getPath("images/titleEnter.xml", null, null)));
          a = [];
          this.titleText.animation.findByPrefix(a, "ENTER IDLE");
          this.titleText.animation.findByPrefix(a, "ENTER FREEZE");
          if (a.length > 0) {
            this.newTitle = true;
            this.titleText.animation.addByPrefix("idle", "ENTER IDLE", 24);
            this.titleText.animation.addByPrefix("press", y.data.flashing ? "ENTER PRESSED" : "ENTER FREEZE", 24);
          } else {
            this.newTitle = false;
            this.titleText.animation.addByPrefix("idle", "Press Enter to Begin", 24);
            this.titleText.animation.addByPrefix("press", "ENTER PRESSED", 24);
          }
          this.titleText.animation.play("idle");
          this.titleText.updateHitbox();
          this.add(this.titleText);
          a = new F().loadGraphic(D.image("logo"));
          a.set_antialiasing(y.data.antialiasing);
          a.set_x((h.width - a.get_width()) / 2);
          a.set_y((h.height - a.get_height()) / 2);
          this.credGroup = new Qa();
          this.add(this.credGroup);
          this.textGroup = new Qa();
          this.blackScreen = new F().makeGraphic(h.width, h.height, -16777216);
          this.credGroup.add(this.blackScreen);
          a = this.credTextShit = new Gb(0, 0, "", true);
          a.set_x((h.width - a.get_width()) / 2);
          a.set_y((h.height - a.get_height()) / 2);
          this.credTextShit.set_visible(false);
          this.ngSpr = new F(0, h.height * 0.52).loadGraphic(D.image("newgrounds_logo"));
          this.add(this.ngSpr);
          this.ngSpr.set_visible(false);
          this.ngSpr.setGraphicSize(this.ngSpr.get_width() * 0.8 | 0);
          this.ngSpr.updateHitbox();
          a = this.ngSpr;
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((h.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((h.height - a.get_height()) / 2);
          }
          this.ngSpr.set_antialiasing(y.data.antialiasing);
          if (yc.initialized) {
            this.skipIntro();
          } else {
            yc.initialized = true;
          }
          D.clearUnusedMemory();
        },
        getIntroTextShit: function () {
          for (var a = Q.getText(D.getPath("data/introText.txt", "TEXT", null)).split("\n"), b = [], c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            b.push(d.split("--"));
          }
          return b;
        },
        update: function (a) {
          if (h.sound.music != null) {
            O.songPosition = h.sound.music._time;
          }
          var b = h.keys.justPressed;
          var c = b.keyManager.checkStatusUnsafe(13, b.status) || this.get_controls().get_ACCEPT();
          var d = h.gamepads.lastActive;
          if (d != null) {
            b = d.justPressed;
            d = b.gamepad;
            b = b.status;
            var e = d.mapping.getRawID(7);
            d = d.buttons[e];
            if (b = d != null && d.hasState(b)) {
              c = true;
            }
          }
          if (this.newTitle) {
            d = a < 0 ? 0 : a;
            this.titleTimer += d > 1 ? 1 : d;
            if (this.titleTimer > 2) {
              this.titleTimer -= 2;
            }
          }
          if (yc.initialized && !this.transitioning && this.skippedIntro) {
            if (this.newTitle && !c) {
              d = this.titleTimer;
              if (d >= 1) {
                d = -d + 2;
              }
              d = d <= 0.5 ? d * d * 2 : 1 - --d * d * 2;
              b = this.titleText;
              var f = this.titleTextColors[0];
              var k = this.titleTextColors[1];
              var g = d;
              if (g == null) {
                g = 0.5;
              }
              e = ((k >> 16 & 255) - (f >> 16 & 255)) * g + (f >> 16 & 255) | 0;
              var n = ((k >> 8 & 255) - (f >> 8 & 255)) * g + (f >> 8 & 255) | 0;
              var p = ((k & 255) - (f & 255)) * g + (f & 255) | 0;
              k = ((k >> 24 & 255) - (f >> 24 & 255)) * g + (f >> 24 & 255) | 0;
              if (k == null) {
                k = 255;
              }
              f = eb._new();
              if (k == null) {
                k = 255;
              }
              f = (f & -16711681 | (e > 255 ? 255 : e < 0 ? 0 : e) << 16) & -65281 | (n > 255 ? 255 : n < 0 ? 0 : n) << 8;
              f &= -256;
              f |= p > 255 ? 255 : p < 0 ? 0 : p;
              f &= 16777215;
              f |= (k > 255 ? 255 : k < 0 ? 0 : k) << 24;
              b.set_color(f);
              b = this.titleTextAlphas[0];
              this.titleText.set_alpha(b + d * (this.titleTextAlphas[1] - b));
            }
            if (c) {
              this.titleText.set_color(-1);
              this.titleText.set_alpha(1);
              if (this.titleText != null) {
                this.titleText.animation.play("press");
              }
              h.camera.flash(y.data.flashing ? -1 : 1291845631, 1);
              h.sound.play(D.sound("confirmMenu"), 0.7);
              this.transitioning = true;
              new Ec().start(1, function (a) {
                P.switchState(new Ac());
                yc.closedState = true;
              });
            }
          }
          if (yc.initialized && c && !this.skippedIntro) {
            this.skipIntro();
          }
          if (this.swagShader != null) {
            if (this.get_controls().get_UI_LEFT()) {
              c = this.swagShader;
              c.set_hue(c.hue - a * 0.1);
            }
            if (this.get_controls().get_UI_RIGHT()) {
              c = this.swagShader;
              c.set_hue(c.hue + a * 0.1);
            }
          }
          P.prototype.update.call(this, a);
        },
        createCoolText: function (a, b) {
          if (b == null) {
            b = 0;
          }
          for (var c = 0, d = a.length; c < d;) {
            var e = c++;
            var f = new Gb(0, 0, a[e], true);
            var k = 1;
            if (k == null) {
              k = 17;
            }
            if (k == 1 || k == 17) {
              f.set_x((h.width - f.get_width()) / 2);
            }
            if (k == 16 || k == 17) {
              f.set_y((h.height - f.get_height()) / 2);
            }
            f.set_y(f.y + (e * 60 + 200 + b));
            if (this.credGroup != null && this.textGroup != null) {
              this.credGroup.add(f);
              this.textGroup.add(f);
            }
          }
        },
        addMoreText: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (this.textGroup != null && this.credGroup != null) {
            a = new Gb(0, 0, a, true);
            var c = 1;
            if (c == null) {
              c = 17;
            }
            if (c == 1 || c == 17) {
              a.set_x((h.width - a.get_width()) / 2);
            }
            if (c == 16 || c == 17) {
              a.set_y((h.height - a.get_height()) / 2);
            }
            a.set_y(a.y + (this.textGroup.length * 60 + 200 + b));
            this.credGroup.add(a);
            this.textGroup.add(a);
          }
        },
        deleteCoolText: function () {
          while (this.textGroup.members.length > 0) {
            this.credGroup.remove(this.textGroup.members[0], true);
            this.textGroup.remove(this.textGroup.members[0], true);
          }
        },
        beatHit: function () {
          P.prototype.beatHit.call(this);
          if (!yc.closedState) {
            this.sickBeats++;
            switch (this.sickBeats) {
              case 1:
                var a = h.sound;
                var b = D.returnSound("music", "freakyMenu", null);
                a.playMusic(b, 0);
                a = h.sound.music;
                b = 4;
                var c = 0;
                var d = 0.7;
                if (d == null) {
                  d = 1;
                }
                if (c == null) {
                  c = 0;
                }
                if (b == null) {
                  b = 1;
                }
                if (a._channel == null) {
                  a.play();
                }
                if (a.fadeTween != null) {
                  a.fadeTween.cancel();
                }
                a.fadeTween = Da.num(c, d, b, {
                  onComplete: null
                }, m(a, a.volumeTween));
                break;
              case 2:
                this.createCoolText(["ninjamuffin99", "phantomArcade", "kawaisprite", "evilsk8er"]);
                break;
              case 4:
                this.addMoreText("present");
                break;
              case 5:
                this.deleteCoolText();
                break;
              case 6:
                this.createCoolText(["In association", "with"], -40);
                break;
              case 8:
                this.addMoreText("newgrounds", -40);
                this.ngSpr.set_visible(true);
                break;
              case 9:
                this.deleteCoolText();
                this.ngSpr.set_visible(false);
                break;
              case 10:
                this.createCoolText([this.curWacky[0]]);
                break;
              case 12:
                this.addMoreText(this.curWacky[1]);
                break;
              case 13:
                this.deleteCoolText();
                break;
              case 14:
                this.addMoreText("Friday");
                break;
              case 15:
                this.addMoreText("Night");
                break;
              case 16:
                this.addMoreText("Funkin");
                break;
              case 17:
                this.skipIntro();
            }
          }
        },
        skipIntro: function () {
          if (!this.skippedIntro) {
            this.remove(this.ngSpr);
            this.remove(this.credGroup);
            h.camera.flash(-1, 4);
            this.skippedIntro = true;
          }
        },
        __class__: yc
      });
      function dk(a, b) {
        if (b == null) {
          b = true;
        }
        this.characterList = [];
        this.assetFolder = "week1";
        this.undoOffsets = null;
        this.holdingArrowsTime = this.holdingArrowsElapsed = this.holdingFrameTime = this.holdingFrameElapsed = 0;
        this.ghostAlpha = 0.6;
        this.curAnim = 0;
        this.anims = null;
        this._goToPlayState = true;
        this._char = null;
        this.copiedOffset = [0, 0];
        var c = 0;
        var d = 0;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        d = W.pool.get().set(c, d);
        d._inPool = false;
        d._weak = true;
        this.bfPosition = d;
        d = c = 0;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        d = W.pool.get().set(c, d);
        d._inPool = false;
        d._weak = true;
        this.dadPosition = d;
        this.isAnimateSprite = false;
        this._char = a;
        this._goToPlayState = b;
        if (this._char == null) {
          this._char = id.DEFAULT_CHARACTER;
        }
        P.call(this);
      }
      g["states.editors.CharacterEditorState"] = dk;
      dk.__name__ = "states.editors.CharacterEditorState";
      dk.__super__ = P;
      dk.prototype = q(P.prototype, {
        create: function () {
          if (y.data.cacheOnGPU) {
            D.clearStoredMemory();
          }
          var a = h.sound.music;
          a.cleanup(a.autoDestroy, true);
          this.camEditor = this.initPsychCamera();
          this.camHUD = new Tb();
          this.camHUD.bgColor &= 16777215;
          this.camHUD.bgColor |= 0;
          h.cameras.add(this.camHUD, false);
          var b = D.currentLevel;
          D.currentLevel = this.assetFolder;
          a = new pd("stageback", -600, -200, 0.9, 0.9);
          this.add(a);
          a = new pd("stagefront", -650, 600, 0.9, 0.9);
          a.setGraphicSize(a.get_width() * 1.1 | 0);
          a.updateHitbox();
          this.add(a);
          a = this.dadPosition;
          var c = 100;
          var d = 100;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          a = this.bfPosition;
          c = 770;
          d = 100;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          D.currentLevel = b;
          this.animsTxtGroup = new Qa();
          this.silhouettes = new La();
          this.add(this.silhouettes);
          b = new F(this.dadPosition.x, this.dadPosition.y).loadGraphic(D.image("editors/silhouetteDad"));
          b.set_antialiasing(y.data.antialiasing);
          b.set_active(false);
          a = b.offset;
          c = -4;
          d = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          this.silhouettes.add(b);
          b = new F(this.bfPosition.x, this.bfPosition.y + 350).loadGraphic(D.image("editors/silhouetteBF"));
          b.set_antialiasing(y.data.antialiasing);
          b.set_active(false);
          a = b.offset;
          c = -6;
          d = 2;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          this.silhouettes.add(b);
          this.silhouettes.set_alpha(0.25);
          this.ghost = new F();
          this.ghost.set_visible(false);
          this.ghost.set_alpha(this.ghostAlpha);
          this.add(this.ghost);
          this.addCharacter();
          this.cameraFollowPointer = new F().loadGraphic(Zb.fromClass(gi));
          this.cameraFollowPointer.setGraphicSize(40, 40);
          this.cameraFollowPointer.updateHitbox();
          this.add(this.cameraFollowPointer);
          this.healthBar = new Bh(30, h.height - 75);
          a = this.healthBar.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.healthBar);
          this.healthBar.set_cameras([this.camHUD]);
          this.healthIcon = new Kf(this.character.healthIcon, false, false);
          this.healthIcon.set_y(h.height - 150);
          this.add(this.healthIcon);
          this.healthIcon.set_cameras([this.camHUD]);
          this.animsTxtGroup.set_cameras([this.camHUD]);
          this.add(this.animsTxtGroup);
          b = new U(h.width - 300, h.height - 24, 300, "Press F1 for Help", 16);
          b.set_cameras([this.camHUD]);
          b.setFormat(null, 16, -1, "right", Sa.OUTLINE_FAST, -16777216);
          b.set_borderColor(-16777216);
          a = b.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          b.set_borderSize(1);
          b.set_active(false);
          this.add(b);
          this.cameraZoomText = new U(0, 50, 200, "Zoom: 1x");
          this.cameraZoomText.setFormat(null, 16, -1, "center", Sa.OUTLINE_FAST, -16777216);
          a = this.cameraZoomText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.cameraZoomText.set_borderSize(1);
          a = this.cameraZoomText;
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((h.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((h.height - a.get_height()) / 2);
          }
          this.cameraZoomText.set_cameras([this.camHUD]);
          this.add(this.cameraZoomText);
          this.frameAdvanceText = new U(0, 75, 350, "");
          this.frameAdvanceText.setFormat(null, 16, -1, "center", Sa.OUTLINE_FAST, -16777216);
          a = this.frameAdvanceText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.frameAdvanceText.set_borderSize(1);
          a = this.frameAdvanceText;
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((h.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((h.height - a.get_height()) / 2);
          }
          this.frameAdvanceText.set_cameras([this.camHUD]);
          this.add(this.frameAdvanceText);
          this.addHelpScreen();
          h.mouse.set_visible(true);
          h.camera.set_zoom(1);
          this.makeUIMenu();
          a = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
          b = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
          this.cameraFollowPointer.setPosition(a, b);
          h.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - h.width / 2);
          h.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - h.height / 2);
          this.healthColorStepperR.set_value(this.character.healthColorArray[0]);
          this.healthColorStepperG.set_value(this.character.healthColorArray[1]);
          this.healthColorStepperB.set_value(this.character.healthColorArray[2]);
          a = this.healthBar.leftBar;
          b = this.healthBar.rightBar;
          c = this.character.healthColorArray[0];
          d = this.character.healthColorArray[1];
          var e = this.character.healthColorArray[2];
          var f = eb._new();
          var k = 255;
          if (k == null) {
            k = 255;
          }
          f = (f & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (d > 255 ? 255 : d < 0 ? 0 : d) << 8;
          f &= -256;
          f |= e > 255 ? 255 : e < 0 ? 0 : e;
          f &= 16777215;
          f |= (k > 255 ? 255 : k < 0 ? 0 : k) << 24;
          a.set_color(b.set_color(f));
          this.healthIcon.changeIcon(this.character.healthIcon, false);
          this.character.finishAnimation();
          if (y.data.cacheOnGPU) {
            D.clearUnusedMemory();
          }
          P.prototype.create.call(this);
        },
        addHelpScreen: function () {
          this.helpBg = new F().makeGraphic(1, 1, -16777216);
          var a = this.helpBg.scale;
          var b = h.width;
          var c = h.height;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this.helpBg.updateHitbox();
          this.helpBg.set_alpha(0.6);
          this.helpBg.set_cameras([this.camHUD]);
          this.helpBg.set_active(this.helpBg.set_visible(false));
          this.add(this.helpBg);
          b = "CAMERA;\t\t;E/Q - Camera Zoom In/Out;\t\t;J/K/L/I - Move Camera;\t\t;R - Reset Camera Zoom;\t\t;;\t\t;CHARACTER;\t\t;Ctrl + R - Reset Current Offset;\t\t;Ctrl + C - Copy Current Offset;\t\t;Ctrl + V - Paste Copied Offset on Current Animation;\t\t;Ctrl + Z - Undo Last Paste or Reset;\t\t;W/S - Previous/Next Animation;\t\t;Space - Replay Animation;\t\t;Arrow Keys/Mouse & Right Click - Move Offset;\t\t;A/D - Frame Advance (Back/Forward);\t\t;;\t\t;OTHER;\t\t;F12 - Toggle Silhouettes;\t\t;Hold Shift - Move Offsets 10x faster and Camera 4x faster;\t\t;Hold Control - Move camera 4x slower".split(";");
          this.helpTexts = new La();
          this.helpTexts.set_cameras([this.camHUD]);
          c = 0;
          for (var d = b.length; c < d;) {
            var e = c++;
            if (!(b[e].length < 2)) {
              var f = new U(0, 0, 600, b[e], 16);
              f.setFormat(null, 16, -1, "center", Sa.OUTLINE_FAST, -16777216);
              f.set_borderColor(-16777216);
              a = f.scrollFactor;
              a.set_x(0);
              a.set_y(0);
              f.set_borderSize(1);
              f.set_x((h.width - f.get_width()) / 2);
              f.set_y((h.height - f.get_height()) / 2);
              this.add(f);
              f.set_y(f.y + (e - b.length / 2) * 16);
              f.set_active(false);
              this.helpTexts.add(f);
            }
          }
          this.helpTexts.set_active(this.helpTexts.set_visible(false));
          this.add(this.helpTexts);
        },
        addCharacter: function (a) {
          if (a == null) {
            a = false;
          }
          var b = -1;
          if (this.character != null) {
            b = this.members.indexOf(this.character);
            this.remove(this.character);
            this.character.destroy();
          }
          if (a) {
            var c = this.character.isPlayer;
          } else {
            c = this._char;
            c = (c == "bf" || !!w.startsWith(c, "bf-") || !!w.endsWith(c, "-player") || !!w.endsWith(c, "-dead")) && !w.endsWith(c, "-opponent") && !w.startsWith(c, "gf-") && !w.endsWith(c, "-gf") && c != "gf";
          }
          this.character = new id(0, 0, this._char, c);
          if (!a && this.character.editorIsPlayer != null && c != this.character.editorIsPlayer) {
            this.character.isPlayer = !this.character.isPlayer;
            this.character.set_flipX(this.character.originalFlipX != this.character.isPlayer);
            if (this.check_player != null) {
              this.check_player.set_checked(this.character.isPlayer);
            }
          }
          this.character.debugMode = true;
          if (b > -1) {
            this.insert(b, this.character);
          } else {
            this.add(this.character);
          }
          if (this.character == null || this.character.isPlayer) {
            if (this.character == null) {
              c = this._char;
              a = c != "bf" && !w.startsWith(c, "bf-") && !w.endsWith(c, "-player") && !w.endsWith(c, "-dead") || w.endsWith(c, "-opponent") || w.startsWith(c, "gf-") || w.endsWith(c, "-gf") || c == "gf";
            } else {
              a = false;
            }
          } else {
            a = true;
          }
          if (a) {
            this.character.setPosition(this.dadPosition.x, this.dadPosition.y);
          } else {
            this.character.setPosition(this.bfPosition.x, this.bfPosition.y);
          }
          a = this.character;
          a.set_x(a.x + this.character.positionArray[0]);
          a = this.character;
          a.set_y(a.y + this.character.positionArray[1]);
          this.anims = this.character.animationsArray;
          if (this.anims.length > 0) {
            this.character.playAnim(this.anims[0].anim, true);
          }
          this.curAnim = 0;
          for (a = new tc(this.animsTxtGroup.members, null); a.hasNext();) {
            c = a.next();
            c.kill();
          }
          c = b = 0;
          for (var d = this.anims; c < d.length;) {
            var e = d[c];
            ++c;
            a = this.animsTxtGroup.recycle(U);
            a.set_x(10);
            a.set_y(32 + b * 20);
            a.set_fieldWidth(400);
            a.set_fieldHeight(20);
            a.set_text(e.anim + ": " + v.string(e.offsets));
            a.setFormat(null, 16, -1, "left", Sa.OUTLINE_FAST, -16777216);
            e = a.scrollFactor;
            e.set_x(0);
            e.set_y(0);
            a.set_borderSize(1);
            this.animsTxtGroup.add(a);
            ++b;
          }
          b = 0;
          for (a = new tc(this.animsTxtGroup.members, null); a.hasNext();) {
            c = a.next();
            c.set_color(-1);
            if (b == this.curAnim) {
              c.set_color(-16711936);
            }
            ++b;
          }
          if (this.animationDropDown != null) {
            this.reloadAnimationDropDown();
          }
          if (this.healthBar != null && this.healthIcon != null) {
            this.healthColorStepperR.set_value(this.character.healthColorArray[0]);
            this.healthColorStepperG.set_value(this.character.healthColorArray[1]);
            this.healthColorStepperB.set_value(this.character.healthColorArray[2]);
            a = this.healthBar.leftBar;
            b = this.healthBar.rightBar;
            c = this.character.healthColorArray[0];
            d = this.character.healthColorArray[1];
            e = this.character.healthColorArray[2];
            var f = eb._new();
            var h = 255;
            if (h == null) {
              h = 255;
            }
            f = (f & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (d > 255 ? 255 : d < 0 ? 0 : d) << 8;
            f &= -256;
            f |= e > 255 ? 255 : e < 0 ? 0 : e;
            f &= 16777215;
            f |= (h > 255 ? 255 : h < 0 ? 0 : h) << 24;
            a.set_color(b.set_color(f));
            this.healthIcon.changeIcon(this.character.healthIcon, false);
          }
        },
        makeUIMenu: function () {
          var a = [{
            name: "Ghost",
            label: "Ghost"
          }, {
            name: "Settings",
            label: "Settings"
          }];
          this.UI_box = new je(null, null, a, null, true);
          this.UI_box.set_cameras([this.camHUD]);
          this.UI_box.resize(250, 120);
          this.UI_box.set_x(h.width - 275);
          this.UI_box.set_y(25);
          a = this.UI_box.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          a = [{
            name: "Character",
            label: "Character"
          }, {
            name: "Animations",
            label: "Animations"
          }];
          this.UI_characterbox = new je(null, null, a, null, true);
          this.UI_characterbox.set_cameras([this.camHUD]);
          this.UI_characterbox.resize(350, 280);
          this.UI_characterbox.set_x(this.UI_box.x - 100);
          this.UI_characterbox.set_y(this.UI_box.y + this.UI_box.get_height());
          a = this.UI_characterbox.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.UI_characterbox);
          this.add(this.UI_box);
          this.addGhostUI();
          this.addSettingsUI();
          this.addAnimationsUI();
          this.addCharacterUI();
          this.UI_box.set_selected_tab_id("Settings");
          this.UI_characterbox.set_selected_tab_id("Character");
        },
        addGhostUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_box);
          b.name = "Ghost";
          var c = new qb(25, 15, "Make Ghost", function () {
            var b = a.character;
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              b = a.anims[a.curAnim];
              if (a.character.isAnimateAtlas) {
                if (b != null) {
                  if (a.animateGhost == null) {
                    a.animateGhost = new hi(a.ghost.x, a.ghost.y);
                    a.animateGhost.showPivot = false;
                    a.insert(a.members.indexOf(a.ghost), a.animateGhost);
                    a.animateGhost.set_active(false);
                  }
                  if (a.animateGhost == null || a.animateGhostImage != a.character.imageFile) {
                    D.loadAnimateAtlas(a.animateGhost, a.character.imageFile);
                  }
                  if (b.indices != null && b.indices.length > 0) {
                    a.animateGhost.anim.addBySymbolIndices("anim", b.name, b.indices, 0, false);
                  } else {
                    a.animateGhost.anim.addBySymbol("anim", b.name, 0, false);
                  }
                  a.animateGhost.anim.play("anim", true, false, a.character.atlas.anim.get_curFrame());
                  a.animateGhost.anim.pause();
                  a.animateGhostImage = a.character.imageFile;
                }
              } else {
                a.ghost.loadGraphic(a.character.graphic);
                a.ghost.frames.frames = a.character.frames.frames;
                a.ghost.animation.copyFrom(a.character.animation);
                a.ghost.animation.play(a.character.animation._curAnim.name, true, false, a.character.animation._curAnim.curFrame);
                b = a.ghost.animation;
                if (b._curAnim != null) {
                  b._curAnim.pause();
                }
              }
              b = a.character.isAnimateAtlas ? a.animateGhost : a.ghost;
              if (b != null) {
                b.setPosition(a.character.x, a.character.y);
                b.set_antialiasing(a.character.antialiasing);
                b.set_flipX(a.character.flipX);
                b.set_alpha(a.ghostAlpha);
                var c = b.scale;
                var d = a.character.scale.x;
                var e = a.character.scale.y;
                if (e == null) {
                  e = 0;
                }
                if (d == null) {
                  d = 0;
                }
                c.set_x(d);
                c.set_y(e);
                b.updateHitbox();
                c = b.offset;
                d = a.character.offset.x;
                e = a.character.offset.y;
                if (e == null) {
                  e = 0;
                }
                if (d == null) {
                  d = 0;
                }
                c.set_x(d);
                c.set_y(e);
                b.set_visible(true);
                b = b == a.animateGhost ? a.ghost : a.animateGhost;
                if (b != null) {
                  b.set_visible(false);
                }
              }
              zb.trace("created ghost image", {
                fileName: "source/states/editors/CharacterEditorState.hx",
                lineNumber: 349,
                className: "states.editors.CharacterEditorState",
                methodName: "addGhostUI"
              });
            }
          });
          var d = new xb(20 + c.x + c.get_width(), c.y, null, null, "Highlight Ghost", 100);
          d.callback = function () {
            var b = d.checked ? 125 : 0;
            a.ghost.colorTransform.redOffset = b;
            a.ghost.colorTransform.greenOffset = b;
            a.ghost.colorTransform.blueOffset = b;
            if (a.animateGhost != null) {
              a.animateGhost.colorTransform.redOffset = b;
              a.animateGhost.colorTransform.greenOffset = b;
              a.animateGhost.colorTransform.blueOffset = b;
            }
          };
          var e = new th(this, "ghostAlpha", 10, c.y + 25, 0, 1, 210, null, 5, -1, -16777216);
          e.nameLabel.set_text("Opacity:");
          e.decimals = 2;
          e.callback = function (b) {
            a.ghost.set_alpha(a.ghostAlpha);
            if (a.animateGhost != null) {
              a.animateGhost.set_alpha(a.ghostAlpha);
            }
          };
          e.value = this.ghostAlpha;
          b.add(c);
          b.add(d);
          b.add(e);
          this.UI_box.addGroup(b);
        },
        addSettingsUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_box);
          b.name = "Settings";
          this.check_player = new xb(10, 60, null, null, "Playable Character", 100);
          this.check_player.set_checked(this.character.isPlayer);
          this.check_player.callback = function () {
            a.character.isPlayer = !a.character.isPlayer;
            a.character.set_flipX(!a.character.flipX);
            if (a.character == null || a.character.isPlayer) {
              if (a.character == null) {
                var b = a._char;
                b = b != "bf" && !w.startsWith(b, "bf-") && !w.endsWith(b, "-player") && !w.endsWith(b, "-dead") || w.endsWith(b, "-opponent") || w.startsWith(b, "gf-") || w.endsWith(b, "-gf") || b == "gf";
              } else {
                b = false;
              }
            } else {
              b = true;
            }
            if (b) {
              a.character.setPosition(a.dadPosition.x, a.dadPosition.y);
            } else {
              a.character.setPosition(a.bfPosition.x, a.bfPosition.y);
            }
            b = a.character;
            b.set_x(b.x + a.character.positionArray[0]);
            b = a.character;
            b.set_y(b.y + a.character.positionArray[1]);
            b = false;
            if (b == null) {
              b = true;
            }
            var c = a.character.isPlayer ? a.character.getMidpoint().x - 100 - a.character.cameraPosition[0] : a.character.getMidpoint().x + 150 + a.character.cameraPosition[0];
            var d = a.character.getMidpoint().y - 100 + a.character.cameraPosition[1];
            a.cameraFollowPointer.setPosition(c, d);
            if (b) {
              h.camera.scroll.set_x(a.cameraFollowPointer.getMidpoint().x - h.width / 2);
              h.camera.scroll.set_y(a.cameraFollowPointer.getMidpoint().y - h.height / 2);
            }
          };
          var c = new qb(140, 20, "Reload Char", function () {
            a.addCharacter(true);
            var b = a.character.isPlayer ? a.character.getMidpoint().x - 100 - a.character.cameraPosition[0] : a.character.getMidpoint().x + 150 + a.character.cameraPosition[0];
            var c = a.character.getMidpoint().y - 100 + a.character.cameraPosition[1];
            a.cameraFollowPointer.setPosition(b, c);
            h.camera.scroll.set_x(a.cameraFollowPointer.getMidpoint().x - h.width / 2);
            h.camera.scroll.set_y(a.cameraFollowPointer.getMidpoint().y - h.height / 2);
            a.reloadCharacterOptions();
            a.reloadCharacterDropDown();
          });
          var d = new qb(140, 50, "Load Template", function () {
            a.character.loadCharacterFile({
              animations: [{
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "idle",
                indices: [],
                name: "BF idle dance"
              }, {
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "singLEFT",
                indices: [],
                name: "BF NOTE LEFT0"
              }, {
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "singDOWN",
                indices: [],
                name: "BF NOTE DOWN0"
              }, {
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "singUP",
                indices: [],
                name: "BF NOTE UP0"
              }, {
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "singRIGHT",
                indices: [],
                name: "BF NOTE RIGHT0"
              }],
              no_antialiasing: false,
              flip_x: false,
              healthicon: "face",
              image: "characters/BOYFRIEND",
              sing_duration: 4,
              scale: 1,
              healthbar_colors: [161, 161, 161],
              camera_position: [0, 0],
              position: [0, 0],
              vocals_file: null
            });
            a.character.set_color(-1);
            a.character.set_alpha(1);
            a.anims = a.character.animationsArray;
            if (a.anims.length > 0) {
              a.character.playAnim(a.anims[0].anim, true);
            }
            a.curAnim = 0;
            for (var b = new tc(a.animsTxtGroup.members, null); b.hasNext();) {
              var c = b.next();
              c.kill();
            }
            var d = 0;
            c = 0;
            for (var g = a.anims; c < g.length;) {
              var n = g[c];
              ++c;
              b = a.animsTxtGroup.recycle(U);
              b.set_x(10);
              b.set_y(32 + d * 20);
              b.set_fieldWidth(400);
              b.set_fieldHeight(20);
              b.set_text(n.anim + ": " + v.string(n.offsets));
              b.setFormat(null, 16, -1, "left", Sa.OUTLINE_FAST, -16777216);
              n = b.scrollFactor;
              n.set_x(0);
              n.set_y(0);
              b.set_borderSize(1);
              a.animsTxtGroup.add(b);
              ++d;
            }
            d = 0;
            for (b = new tc(a.animsTxtGroup.members, null); b.hasNext();) {
              c = b.next();
              c.set_color(-1);
              if (d == a.curAnim) {
                c.set_color(-16711936);
              }
              ++d;
            }
            if (a.animationDropDown != null) {
              a.reloadAnimationDropDown();
            }
            a.reloadCharacterOptions();
            if (a.character == null || a.character.isPlayer) {
              if (a.character == null) {
                b = a._char;
                b = b != "bf" && !w.startsWith(b, "bf-") && !w.endsWith(b, "-player") && !w.endsWith(b, "-dead") || w.endsWith(b, "-opponent") || w.startsWith(b, "gf-") || w.endsWith(b, "-gf") || b == "gf";
              } else {
                b = false;
              }
            } else {
              b = true;
            }
            if (b) {
              a.character.setPosition(a.dadPosition.x, a.dadPosition.y);
            } else {
              a.character.setPosition(a.bfPosition.x, a.bfPosition.y);
            }
            b = a.character;
            b.set_x(b.x + a.character.positionArray[0]);
            b = a.character;
            b.set_y(b.y + a.character.positionArray[1]);
            b = a.character.isPlayer ? a.character.getMidpoint().x - 100 - a.character.cameraPosition[0] : a.character.getMidpoint().x + 150 + a.character.cameraPosition[0];
            d = a.character.getMidpoint().y - 100 + a.character.cameraPosition[1];
            a.cameraFollowPointer.setPosition(b, d);
            h.camera.scroll.set_x(a.cameraFollowPointer.getMidpoint().x - h.width / 2);
            h.camera.scroll.set_y(a.cameraFollowPointer.getMidpoint().y - h.height / 2);
            a.reloadCharacterDropDown();
            a.healthColorStepperR.set_value(a.character.healthColorArray[0]);
            a.healthColorStepperG.set_value(a.character.healthColorArray[1]);
            a.healthColorStepperB.set_value(a.character.healthColorArray[2]);
            b = a.healthBar.leftBar;
            d = a.healthBar.rightBar;
            c = a.character.healthColorArray[0];
            g = a.character.healthColorArray[1];
            n = a.character.healthColorArray[2];
            var p = eb._new();
            var m = 255;
            if (m == null) {
              m = 255;
            }
            p = (p & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (g > 255 ? 255 : g < 0 ? 0 : g) << 8;
            p &= -256;
            p |= n > 255 ? 255 : n < 0 ? 0 : n;
            p &= 16777215;
            p |= (m > 255 ? 255 : m < 0 ? 0 : m) << 24;
            b.set_color(d.set_color(p));
            a.healthIcon.changeIcon(a.character.healthIcon, false);
          });
          d.set_color(-65536);
          d.label.set_color(-1);
          this.charDropDown = new sc(10, 30, sc.makeStrIdLabelArray([""], true), function (b) {
            b = a.characterList[v.parseInt(b)];
            if (b != null && !(b.length < 1)) {
              var c = D.getPath("characters/" + b + ".json", "TEXT", null, true);
              if (Q.exists(c)) {
                a._char = b;
                a.check_player.set_checked(a.character.isPlayer);
                a.addCharacter();
                a.reloadCharacterOptions();
                a.reloadCharacterDropDown();
                b = a.character.isPlayer ? a.character.getMidpoint().x - 100 - a.character.cameraPosition[0] : a.character.getMidpoint().x + 150 + a.character.cameraPosition[0];
                c = a.character.getMidpoint().y - 100 + a.character.cameraPosition[1];
                a.cameraFollowPointer.setPosition(b, c);
                h.camera.scroll.set_x(a.cameraFollowPointer.getMidpoint().x - h.width / 2);
                h.camera.scroll.set_y(a.cameraFollowPointer.getMidpoint().y - h.height / 2);
              } else {
                a.reloadCharacterDropDown();
                h.sound.play(D.sound("cancelMenu"));
              }
            }
          });
          this.reloadCharacterDropDown();
          this.charDropDown.set_selectedLabel(this._char);
          b.add(new U(this.charDropDown.x, this.charDropDown.y - 18, 0, "Character:"));
          b.add(this.check_player);
          b.add(c);
          b.add(d);
          b.add(this.charDropDown);
          this.UI_box.addGroup(b);
        },
        addAnimationsUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_box);
          b.name = "Animations";
          this.animationInputText = new ub(15, 85, 80, "", 8);
          this.animationNameInputText = new ub(this.animationInputText.x, this.animationInputText.y + 35, 150, "", 8);
          this.animationIndicesInputText = new ub(this.animationNameInputText.x, this.animationNameInputText.y + 40, 250, "", 8);
          this.animationFramerate = new Ib(this.animationInputText.x + 170, this.animationInputText.y, 1, 24, 0, 240, 0);
          this.animationLoopCheckBox = new xb(this.animationNameInputText.x + 170, this.animationNameInputText.y - 1, null, null, "Should it Loop?", 100);
          this.animationDropDown = new sc(15, this.animationInputText.y - 55, sc.makeStrIdLabelArray([""], true), function (b) {
            b = v.parseInt(b);
            b = a.character.animationsArray[b];
            a.animationInputText.set_text(b.anim);
            a.animationNameInputText.set_text(b.name);
            a.animationLoopCheckBox.set_checked(b.loop);
            a.animationFramerate.set_value(b.fps);
            b = b.indices.toString();
            a.animationIndicesInputText.set_text(r.substr(b, 1, b.length - 2));
          });
          var c = new qb(70, this.animationIndicesInputText.y + 60, "Add/Update", function () {
            var b = [];
            var c = w.trim(a.animationIndicesInputText.text).split(",");
            if (c.length > 1) {
              for (var d = 0, e = c.length; d < e;) {
                var f = d++;
                var h = v.parseInt(c[f]);
                if (c[f] != null && c[f] != "" && !isNaN(h) && h > -1) {
                  b.push(h);
                }
              }
            }
            h = [0, 0];
            d = 0;
            for (e = a.character.animationsArray; d < e.length;) {
              c = e[d];
              ++d;
              if (a.animationInputText.text == c.anim) {
                h = c.offsets;
                if (Object.prototype.hasOwnProperty.call(a.character.animOffsets.h, a.animationInputText.text)) {
                  if (a.character.isAnimateAtlas) {
                    f = a.animationInputText.text;
                    var k = a.character.atlas.anim.animsMap;
                    if (Object.prototype.hasOwnProperty.call(k.h, f)) {
                      delete k.h[f];
                    }
                  } else {
                    a.character.animation.remove(a.animationInputText.text);
                  }
                }
                r.remove(a.character.animationsArray, c);
              }
            }
            f = {
              offsets: [0, 0],
              loop: false,
              fps: 24,
              anim: a.animationInputText.text,
              indices: [],
              name: a.animationNameInputText.text
            };
            f.fps = Math.round(a.animationFramerate.value);
            f.loop = a.animationLoopCheckBox.checked;
            f.indices = b;
            f.offsets = h;
            a.addAnimation(f.anim, f.name, f.fps, f.loop, f.indices);
            a.character.animationsArray.push(f);
            a.anims = a.character.animationsArray;
            if (a.anims.length > 0) {
              a.character.playAnim(a.anims[0].anim, true);
            }
            a.curAnim = 0;
            for (b = new tc(a.animsTxtGroup.members, null); b.hasNext();) {
              d = b.next();
              d.kill();
            }
            d = h = 0;
            for (e = a.anims; d < e.length;) {
              c = e[d];
              ++d;
              b = a.animsTxtGroup.recycle(U);
              b.set_x(10);
              b.set_y(32 + h * 20);
              b.set_fieldWidth(400);
              b.set_fieldHeight(20);
              b.set_text(c.anim + ": " + v.string(c.offsets));
              b.setFormat(null, 16, -1, "left", Sa.OUTLINE_FAST, -16777216);
              c = b.scrollFactor;
              c.set_x(0);
              c.set_y(0);
              b.set_borderSize(1);
              a.animsTxtGroup.add(b);
              ++h;
            }
            h = 0;
            for (b = new tc(a.animsTxtGroup.members, null); b.hasNext();) {
              d = b.next();
              d.set_color(-1);
              if (h == a.curAnim) {
                d.set_color(-16711936);
              }
              ++h;
            }
            if (a.animationDropDown != null) {
              a.reloadAnimationDropDown();
            }
            a.curAnim = Math.max(0, a.character.animationsArray.indexOf(f)) | 0;
            a.character.playAnim(f.anim, true);
            zb.trace("Added/Updated animation: " + a.animationInputText.text, {
              fileName: "source/states/editors/CharacterEditorState.hx",
              lineNumber: 568,
              className: "states.editors.CharacterEditorState",
              methodName: "addAnimationsUI"
            });
          });
          var d = new qb(180, this.animationIndicesInputText.y + 60, "Remove", function () {
            for (var b = 0, c = a.character.animationsArray; b < c.length;) {
              var d = c[b];
              ++b;
              if (a.animationInputText.text == d.anim) {
                b = false;
                c = d.anim;
                var e = a.character;
                var f = "";
                if (e.isAnimateAtlas ? e.atlas.anim.get_curSymbol() != null : e.animation._curAnim != null) {
                  f = e.isAnimateAtlas ? e.atlas.anim.lastPlayedAnim : e.animation._curAnim.name;
                }
                if (c == (f ?? "")) {
                  b = true;
                }
                if (Object.prototype.hasOwnProperty.call(a.character.animOffsets.h, d.anim)) {
                  if (a.character.isAnimateAtlas) {
                    c = d.anim;
                    e = a.character.atlas.anim.animsMap;
                    if (Object.prototype.hasOwnProperty.call(e.h, c)) {
                      delete e.h[c];
                    }
                  } else {
                    a.character.animation.remove(d.anim);
                  }
                  c = d.anim;
                  e = a.character.animOffsets;
                  if (Object.prototype.hasOwnProperty.call(e.h, c)) {
                    delete e.h[c];
                  }
                  r.remove(a.character.animationsArray, d);
                }
                if (b && a.character.animationsArray.length > 0) {
                  a.curAnim = bc.wrap(a.curAnim, 0, a.anims.length - 1);
                  a.character.playAnim(a.anims[a.curAnim].anim, true);
                  d = 0;
                  b = new tc(a.animsTxtGroup.members, null);
                  while (b.hasNext()) {
                    c = b.next();
                    c.set_color(-1);
                    if (d == a.curAnim) {
                      c.set_color(-16711936);
                    }
                    ++d;
                  }
                }
                a.anims = a.character.animationsArray;
                if (a.anims.length > 0) {
                  a.character.playAnim(a.anims[0].anim, true);
                }
                a.curAnim = 0;
                for (d = new tc(a.animsTxtGroup.members, null); d.hasNext();) {
                  d.next().kill();
                }
                b = d = 0;
                for (c = a.anims; b < c.length;) {
                  f = c[b];
                  ++b;
                  e = a.animsTxtGroup.recycle(U);
                  e.set_x(10);
                  e.set_y(32 + d * 20);
                  e.set_fieldWidth(400);
                  e.set_fieldHeight(20);
                  e.set_text(f.anim + ": " + v.string(f.offsets));
                  e.setFormat(null, 16, -1, "left", Sa.OUTLINE_FAST, -16777216);
                  f = e.scrollFactor;
                  f.set_x(0);
                  f.set_y(0);
                  e.set_borderSize(1);
                  a.animsTxtGroup.add(e);
                  ++d;
                }
                d = 0;
                for (b = new tc(a.animsTxtGroup.members, null); b.hasNext();) {
                  c = b.next();
                  c.set_color(-1);
                  if (d == a.curAnim) {
                    c.set_color(-16711936);
                  }
                  ++d;
                }
                if (a.animationDropDown != null) {
                  a.reloadAnimationDropDown();
                }
                zb.trace("Removed animation: " + a.animationInputText.text, {
                  fileName: "source/states/editors/CharacterEditorState.hx",
                  lineNumber: 596,
                  className: "states.editors.CharacterEditorState",
                  methodName: "addAnimationsUI"
                });
                break;
              }
            }
          });
          this.anims = this.character.animationsArray;
          if (this.anims.length > 0) {
            this.character.playAnim(this.anims[0].anim, true);
          }
          this.curAnim = 0;
          for (var e = new tc(this.animsTxtGroup.members, null); e.hasNext();) {
            var f = e.next();
            f.kill();
          }
          var h = 0;
          f = 0;
          for (var g = this.anims; f < g.length;) {
            var n = g[f];
            ++f;
            e = this.animsTxtGroup.recycle(U);
            e.set_x(10);
            e.set_y(32 + h * 20);
            e.set_fieldWidth(400);
            e.set_fieldHeight(20);
            e.set_text(n.anim + ": " + v.string(n.offsets));
            e.setFormat(null, 16, -1, "left", Sa.OUTLINE_FAST, -16777216);
            n = e.scrollFactor;
            n.set_x(0);
            n.set_y(0);
            e.set_borderSize(1);
            this.animsTxtGroup.add(e);
            ++h;
          }
          h = 0;
          for (e = new tc(this.animsTxtGroup.members, null); e.hasNext();) {
            f = e.next();
            f.set_color(-1);
            if (h == this.curAnim) {
              f.set_color(-16711936);
            }
            ++h;
          }
          if (this.animationDropDown != null) {
            this.reloadAnimationDropDown();
          }
          this.animationDropDown.set_selectedLabel(this.anims[0] != null ? this.anims[0].anim : "");
          b.add(new U(this.animationDropDown.x, this.animationDropDown.y - 18, 0, "Animations:"));
          b.add(new U(this.animationInputText.x, this.animationInputText.y - 18, 0, "Animation name:"));
          b.add(new U(this.animationFramerate.x, this.animationFramerate.y - 18, 0, "Framerate:"));
          b.add(new U(this.animationNameInputText.x, this.animationNameInputText.y - 18, 0, "Animation Symbol Name/Tag:"));
          b.add(new U(this.animationIndicesInputText.x, this.animationIndicesInputText.y - 18, 0, "ADVANCED - Animation Indices:"));
          b.add(this.animationInputText);
          b.add(this.animationNameInputText);
          b.add(this.animationIndicesInputText);
          b.add(this.animationFramerate);
          b.add(this.animationLoopCheckBox);
          b.add(c);
          b.add(d);
          b.add(this.animationDropDown);
          this.UI_characterbox.addGroup(b);
        },
        addCharacterUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_box);
          b.name = "Character";
          this.imageInputText = new ub(15, 30, 200, this.character.imageFile, 8);
          var c = new qb(this.imageInputText.x + 210, this.imageInputText.y - 3, "Reload Image", function () {
            var b = a.character;
            var c = "";
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              c = b.isAnimateAtlas ? b.atlas.anim.lastPlayedAnim : b.animation._curAnim.name;
            }
            c = c ?? "";
            a.character.imageFile = a.imageInputText.text;
            a.reloadCharacterImage();
            b = a.character;
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              a.character.playAnim(c, true);
            }
          });
          var d = new qb(c.x, c.y + 30, "Get Icon Color", function () {
            var b = a.healthIcon;
            var c = new wc();
            for (var d = 0, e = b.frameWidth; d < e;) {
              var h = d++;
              for (var g = 0, l = b.frameHeight; g < l;) {
                var p = g++;
                p = b.get_pixels().getPixel32(h, p);
                if (p != 0) {
                  if (c.h.hasOwnProperty(p)) {
                    c.h[p] += 1;
                  } else if (c.h[p] != -13520687) {
                    c.h[p] = 1;
                  }
                }
              }
            }
            d = b = 0;
            c.h[-16777216] = 0;
            for (e = c.keys(); e.hasNext();) {
              h = e.next();
              if (c.h[h] >= b) {
                b = c.h[h];
                d = h;
              }
            }
            new wc();
            c = eb._new(d);
            a.character.healthColorArray[0] = c >> 16 & 255;
            a.character.healthColorArray[1] = c >> 8 & 255;
            a.character.healthColorArray[2] = c & 255;
            a.healthColorStepperR.set_value(a.character.healthColorArray[0]);
            a.healthColorStepperG.set_value(a.character.healthColorArray[1]);
            a.healthColorStepperB.set_value(a.character.healthColorArray[2]);
            c = a.healthBar.leftBar;
            b = a.healthBar.rightBar;
            d = a.character.healthColorArray[0];
            e = a.character.healthColorArray[1];
            h = a.character.healthColorArray[2];
            g = eb._new();
            l = 255;
            if (l == null) {
              l = 255;
            }
            g = (g & -16711681 | (d > 255 ? 255 : d < 0 ? 0 : d) << 16) & -65281 | (e > 255 ? 255 : e < 0 ? 0 : e) << 8;
            g &= -256;
            g |= h > 255 ? 255 : h < 0 ? 0 : h;
            g &= 16777215;
            g |= (l > 255 ? 255 : l < 0 ? 0 : l) << 24;
            c.set_color(b.set_color(g));
            a.healthIcon.changeIcon(a.character.healthIcon, false);
          });
          this.healthIconInputText = new ub(15, this.imageInputText.y + 35, 75, this.healthIcon.getCharacter(), 8);
          this.vocalsInputText = new ub(15, this.healthIconInputText.y + 35, 75, this.character.vocalsFile ?? "", 8);
          this.singDurationStepper = new Ib(15, this.vocalsInputText.y + 45, 0.1, 4, 0, 999, 1);
          this.scaleStepper = new Ib(15, this.singDurationStepper.y + 40, 0.1, 1, 0.05, 10, 1);
          this.flipXCheckBox = new xb(this.singDurationStepper.x + 80, this.singDurationStepper.y, null, null, "Flip X", 50);
          this.flipXCheckBox.set_checked(this.character.flipX);
          if (this.character.isPlayer) {
            this.flipXCheckBox.set_checked(!this.flipXCheckBox.checked);
          }
          this.flipXCheckBox.callback = function () {
            a.character.originalFlipX = !a.character.originalFlipX;
            a.character.set_flipX(a.character.originalFlipX != a.character.isPlayer);
          };
          this.noAntialiasingCheckBox = new xb(this.flipXCheckBox.x, this.flipXCheckBox.y + 40, null, null, "No Antialiasing", 80);
          this.noAntialiasingCheckBox.set_checked(this.character.noAntialiasing);
          this.noAntialiasingCheckBox.callback = function () {
            a.character.set_antialiasing(false);
            if (!a.noAntialiasingCheckBox.checked && y.data.antialiasing) {
              a.character.set_antialiasing(true);
            }
            a.character.noAntialiasing = a.noAntialiasingCheckBox.checked;
          };
          this.positionXStepper = new Ib(this.flipXCheckBox.x + 110, this.flipXCheckBox.y, 10, this.character.positionArray[0], -9000, 9000, 0);
          this.positionYStepper = new Ib(this.positionXStepper.x + 60, this.positionXStepper.y, 10, this.character.positionArray[1], -9000, 9000, 0);
          this.positionCameraXStepper = new Ib(this.positionXStepper.x, this.positionXStepper.y + 40, 10, this.character.cameraPosition[0], -9000, 9000, 0);
          this.positionCameraYStepper = new Ib(this.positionYStepper.x, this.positionYStepper.y + 40, 10, this.character.cameraPosition[1], -9000, 9000, 0);
          var e = new qb(c.x, this.noAntialiasingCheckBox.y + 40, "Save Character", function () {
            a.saveCharacter();
          });
          this.healthColorStepperR = new Ib(this.singDurationStepper.x, e.y, 20, this.character.healthColorArray[0], 0, 255, 0);
          this.healthColorStepperG = new Ib(this.singDurationStepper.x + 65, e.y, 20, this.character.healthColorArray[1], 0, 255, 0);
          this.healthColorStepperB = new Ib(this.singDurationStepper.x + 130, e.y, 20, this.character.healthColorArray[2], 0, 255, 0);
          b.add(new U(15, this.imageInputText.y - 18, 0, "Image file name:"));
          b.add(new U(15, this.healthIconInputText.y - 18, 0, "Health icon name:"));
          b.add(new U(15, this.vocalsInputText.y - 18, 0, "Vocals File Postfix:"));
          b.add(new U(15, this.singDurationStepper.y - 18, 0, "Sing Animation length:"));
          b.add(new U(15, this.scaleStepper.y - 18, 0, "Scale:"));
          b.add(new U(this.positionXStepper.x, this.positionXStepper.y - 18, 0, "Character X/Y:"));
          b.add(new U(this.positionCameraXStepper.x, this.positionCameraXStepper.y - 18, 0, "Camera X/Y:"));
          b.add(new U(this.healthColorStepperR.x, this.healthColorStepperR.y - 18, 0, "Health bar R/G/B:"));
          b.add(this.imageInputText);
          b.add(c);
          b.add(d);
          b.add(this.healthIconInputText);
          b.add(this.vocalsInputText);
          b.add(this.singDurationStepper);
          b.add(this.scaleStepper);
          b.add(this.flipXCheckBox);
          b.add(this.noAntialiasingCheckBox);
          b.add(this.positionXStepper);
          b.add(this.positionYStepper);
          b.add(this.positionCameraXStepper);
          b.add(this.positionCameraYStepper);
          b.add(this.healthColorStepperR);
          b.add(this.healthColorStepperG);
          b.add(this.healthColorStepperB);
          b.add(e);
          this.UI_characterbox.addGroup(b);
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" || a == "change_numeric_stepper") {
            if (b instanceof ub) {
              if (b == this.healthIconInputText) {
                this.healthIcon.getCharacter();
                this.healthIcon.changeIcon(this.healthIconInputText.text, false);
                this.character.healthIcon = this.healthIconInputText.text;
                this.healthIcon.getCharacter();
              } else if (b == this.vocalsInputText) {
                this.character.vocalsFile = this.vocalsInputText.text;
              } else if (b == this.imageInputText) {
                this.character.imageFile = this.imageInputText.text;
              }
            } else if (b instanceof Ib) {
              if (b == this.scaleStepper) {
                this.reloadCharacterImage();
                this.character.jsonScale = b.value;
                a = this.character.scale;
                c = b = this.character.jsonScale;
                if (c == null) {
                  c = 0;
                }
                if (b == null) {
                  b = 0;
                }
                a.set_x(b);
                a.set_y(c);
                this.character.updateHitbox();
                a = false;
                if (a == null) {
                  a = true;
                }
                b = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
                c = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
                this.cameraFollowPointer.setPosition(b, c);
                if (a) {
                  h.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - h.width / 2);
                  h.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - h.height / 2);
                }
              } else if (b == this.positionXStepper) {
                this.character.positionArray[0] = this.positionXStepper.value;
                if (this.character == null || this.character.isPlayer) {
                  if (this.character == null) {
                    a = this._char;
                    a = a != "bf" && !w.startsWith(a, "bf-") && !w.endsWith(a, "-player") && !w.endsWith(a, "-dead") || w.endsWith(a, "-opponent") || w.startsWith(a, "gf-") || w.endsWith(a, "-gf") || a == "gf";
                  } else {
                    a = false;
                  }
                } else {
                  a = true;
                }
                if (a) {
                  this.character.setPosition(this.dadPosition.x, this.dadPosition.y);
                } else {
                  this.character.setPosition(this.bfPosition.x, this.bfPosition.y);
                }
                a = this.character;
                a.set_x(a.x + this.character.positionArray[0]);
                a = this.character;
                a.set_y(a.y + this.character.positionArray[1]);
              } else if (b == this.positionYStepper) {
                this.character.positionArray[1] = this.positionYStepper.value;
                if (this.character == null || this.character.isPlayer) {
                  if (this.character == null) {
                    a = this._char;
                    a = a != "bf" && !w.startsWith(a, "bf-") && !w.endsWith(a, "-player") && !w.endsWith(a, "-dead") || w.endsWith(a, "-opponent") || w.startsWith(a, "gf-") || w.endsWith(a, "-gf") || a == "gf";
                  } else {
                    a = false;
                  }
                } else {
                  a = true;
                }
                if (a) {
                  this.character.setPosition(this.dadPosition.x, this.dadPosition.y);
                } else {
                  this.character.setPosition(this.bfPosition.x, this.bfPosition.y);
                }
                a = this.character;
                a.set_x(a.x + this.character.positionArray[0]);
                a = this.character;
                a.set_y(a.y + this.character.positionArray[1]);
              } else if (b == this.singDurationStepper) {
                this.character.singDuration = this.singDurationStepper.value;
              } else if (b == this.positionCameraXStepper) {
                this.character.cameraPosition[0] = this.positionCameraXStepper.value;
                b = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
                c = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
                this.cameraFollowPointer.setPosition(b, c);
                h.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - h.width / 2);
                h.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - h.height / 2);
              } else if (b == this.positionCameraYStepper) {
                this.character.cameraPosition[1] = this.positionCameraYStepper.value;
                b = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
                c = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
                this.cameraFollowPointer.setPosition(b, c);
                h.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - h.width / 2);
                h.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - h.height / 2);
              } else if (b == this.healthColorStepperR) {
                this.character.healthColorArray[0] = Math.round(this.healthColorStepperR.value);
                this.healthColorStepperR.set_value(this.character.healthColorArray[0]);
                this.healthColorStepperG.set_value(this.character.healthColorArray[1]);
                this.healthColorStepperB.set_value(this.character.healthColorArray[2]);
                a = this.healthBar.leftBar;
                b = this.healthBar.rightBar;
                c = this.character.healthColorArray[0];
                d = this.character.healthColorArray[1];
                var e = this.character.healthColorArray[2];
                var f = eb._new();
                var k = 255;
                if (k == null) {
                  k = 255;
                }
                f = (f & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (d > 255 ? 255 : d < 0 ? 0 : d) << 8;
                f &= -256;
                f |= e > 255 ? 255 : e < 0 ? 0 : e;
                f &= 16777215;
                f |= (k > 255 ? 255 : k < 0 ? 0 : k) << 24;
                a.set_color(b.set_color(f));
                this.healthIcon.changeIcon(this.character.healthIcon, false);
              } else if (b == this.healthColorStepperG) {
                this.character.healthColorArray[1] = Math.round(this.healthColorStepperG.value);
                this.healthColorStepperR.set_value(this.character.healthColorArray[0]);
                this.healthColorStepperG.set_value(this.character.healthColorArray[1]);
                this.healthColorStepperB.set_value(this.character.healthColorArray[2]);
                a = this.healthBar.leftBar;
                b = this.healthBar.rightBar;
                c = this.character.healthColorArray[0];
                d = this.character.healthColorArray[1];
                e = this.character.healthColorArray[2];
                f = eb._new();
                k = 255;
                if (k == null) {
                  k = 255;
                }
                f &= -16711681;
                f = (f | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (d > 255 ? 255 : d < 0 ? 0 : d) << 8;
                f &= -256;
                f |= e > 255 ? 255 : e < 0 ? 0 : e;
                f &= 16777215;
                f |= (k > 255 ? 255 : k < 0 ? 0 : k) << 24;
                a.set_color(b.set_color(f));
                this.healthIcon.changeIcon(this.character.healthIcon, false);
              } else if (b == this.healthColorStepperB) {
                this.character.healthColorArray[2] = Math.round(this.healthColorStepperB.value);
                this.healthColorStepperR.set_value(this.character.healthColorArray[0]);
                this.healthColorStepperG.set_value(this.character.healthColorArray[1]);
                this.healthColorStepperB.set_value(this.character.healthColorArray[2]);
                a = this.healthBar.leftBar;
                b = this.healthBar.rightBar;
                c = this.character.healthColorArray[0];
                d = this.character.healthColorArray[1];
                e = this.character.healthColorArray[2];
                f = eb._new();
                k = 255;
                if (k == null) {
                  k = 255;
                }
                f &= -16711681;
                f = (f | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (d > 255 ? 255 : d < 0 ? 0 : d) << 8;
                f &= -256;
                f |= e > 255 ? 255 : e < 0 ? 0 : e;
                f &= 16777215;
                f |= (k > 255 ? 255 : k < 0 ? 0 : k) << 24;
                a.set_color(b.set_color(f));
                this.healthIcon.changeIcon(this.character.healthIcon, false);
              }
            }
          }
        },
        reloadCharacterImage: function () {
          var a = this.character;
          var b = "";
          if (a.isAnimateAtlas ? a.atlas.anim.get_curSymbol() != null : a.animation._curAnim != null) {
            b = a.isAnimateAtlas ? a.atlas.anim.lastPlayedAnim : a.animation._curAnim.name;
          }
          a = b ?? "";
          b = this.character.animationsArray.slice();
          this.character.destroyAtlas();
          this.character.isAnimateAtlas = false;
          this.character.set_color(-1);
          this.character.set_alpha(1);
          if (D.fileExists("images/" + this.character.imageFile + "/Animation.json", "TEXT")) {
            this.character.atlas = new hi();
            this.character.atlas.showPivot = false;
            try {
              D.loadAnimateAtlas(this.character.atlas, this.character.imageFile);
            } catch (k) {
              Pa.lastError = k;
              var c = G.caught(k).unwrap();
              h.log.advanced("Could not load atlas " + this.character.imageFile + ": " + v.string(c), xa.WARNING, true);
            }
            this.character.isAnimateAtlas = true;
          } else if (D.fileExists("images/" + this.character.imageFile + ".txt", "TEXT")) {
            c = this.character;
            var d = this.character.imageFile;
            var e = null;
            var f = D.image(d, e, true);
            c.set_frames(ob.fromSpriteSheetPacker(f, D.getPath("images/" + d + ".txt", null, e)));
          } else if (D.fileExists("images/" + this.character.imageFile + ".json", "TEXT")) {
            c = this.character;
            d = this.character.imageFile;
            e = null;
            f = D.image(d, e, true);
            c.set_frames(ob.fromTexturePackerJson(f, D.getPath("images/" + d + ".json", null, e)));
          } else {
            c = this.character;
            d = this.character.imageFile;
            e = null;
            f = D.image(d, e, true);
            c.set_frames(ob.fromSparrow(f, D.getPath("images/" + d + ".xml", null, e)));
          }
          for (c = 0; c < b.length;) {
            d = b[c];
            ++c;
            this.addAnimation("" + d.anim, "" + d.name, d.fps, d.loop, d.indices);
          }
          if (b.length > 0) {
            if (a != "") {
              this.character.playAnim(a, true);
            } else {
              this.character.dance();
            }
          }
        },
        reloadCharacterOptions: function () {
          if (this.UI_characterbox != null) {
            this.check_player.set_checked(this.character.isPlayer);
            this.imageInputText.set_text(this.character.imageFile);
            this.healthIconInputText.set_text(this.character.healthIcon);
            this.vocalsInputText.set_text(this.character.vocalsFile ?? "");
            this.singDurationStepper.set_value(this.character.singDuration);
            this.scaleStepper.set_value(this.character.jsonScale);
            this.flipXCheckBox.set_checked(this.character.originalFlipX);
            this.noAntialiasingCheckBox.set_checked(this.character.noAntialiasing);
            this.positionXStepper.set_value(this.character.positionArray[0]);
            this.positionYStepper.set_value(this.character.positionArray[1]);
            this.positionCameraXStepper.set_value(this.character.cameraPosition[0]);
            this.positionCameraYStepper.set_value(this.character.cameraPosition[1]);
            this.reloadAnimationDropDown();
            this.healthColorStepperR.set_value(this.character.healthColorArray[0]);
            this.healthColorStepperG.set_value(this.character.healthColorArray[1]);
            this.healthColorStepperB.set_value(this.character.healthColorArray[2]);
            var a = this.healthBar.leftBar;
            var b = this.healthBar.rightBar;
            var c = this.character.healthColorArray[0];
            var d = this.character.healthColorArray[1];
            var e = this.character.healthColorArray[2];
            var f = eb._new();
            var h = 255;
            if (h == null) {
              h = 255;
            }
            f = (f & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (d > 255 ? 255 : d < 0 ? 0 : d) << 8;
            f &= -256;
            f |= e > 255 ? 255 : e < 0 ? 0 : e;
            f &= 16777215;
            f |= (h > 255 ? 255 : h < 0 ? 0 : h) << 24;
            a.set_color(b.set_color(f));
            this.healthIcon.changeIcon(this.character.healthIcon, false);
          }
        },
        update: function (a) {
          P.prototype.update.call(this, a);
          if (this.animationInputText.hasFocus || this.animationNameInputText.hasFocus || this.animationIndicesInputText.hasFocus || this.imageInputText.hasFocus || this.healthIconInputText.hasFocus || this.vocalsInputText.hasFocus) {
            y.toggleVolumeKeys(false);
          } else {
            y.toggleVolumeKeys(true);
            var b = 1;
            var c = 1;
            var d = 1;
            var e = h.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(16, e.status)) {
              b = 4;
              d = 10;
            }
            e = h.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(17, e.status)) {
              c = 0.25;
            }
            e = h.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(74, e.status)) {
              var f = h.camera;
              f.scroll.set_x(f.scroll.x - a * 500 * b * c);
            }
            e = h.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(75, e.status)) {
              f = h.camera;
              f.scroll.set_y(f.scroll.y + a * 500 * b * c);
            }
            e = h.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(76, e.status)) {
              f = h.camera;
              f.scroll.set_x(f.scroll.x + a * 500 * b * c);
            }
            e = h.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(73, e.status)) {
              f = h.camera;
              f.scroll.set_y(f.scroll.y - a * 500 * b * c);
            }
            var k = h.camera.zoom;
            e = h.keys.justPressed;
            if (e.keyManager.checkStatusUnsafe(82, e.status)) {
              e = h.keys.pressed;
              var g = !e.keyManager.checkStatusUnsafe(17, e.status);
            } else {
              g = false;
            }
            if (g) {
              h.camera.set_zoom(1);
            } else {
              e = h.keys.pressed;
              if (e.keyManager.checkStatusUnsafe(69, e.status) && h.camera.zoom < 3) {
                f = h.camera;
                f.set_zoom(f.zoom + a * h.camera.zoom * b * c);
                if (h.camera.zoom > 3) {
                  h.camera.set_zoom(3);
                }
              } else {
                e = h.keys.pressed;
                if (e.keyManager.checkStatusUnsafe(81, e.status) && h.camera.zoom > 0.1) {
                  f = h.camera;
                  f.set_zoom(f.zoom - a * h.camera.zoom * b * c);
                  if (h.camera.zoom < 0.1) {
                    h.camera.set_zoom(0.1);
                  }
                }
              }
            }
            if (k != h.camera.zoom) {
              this.cameraZoomText.set_text("Zoom: " + bc.roundDecimal(h.camera.zoom, 2) + "x");
            }
            f = false;
            if (this.anims.length > 1 && (e = h.keys.justPressed, g = e.keyManager.checkStatusUnsafe(87, e.status) ? f = true : false, g ? this.curAnim-- : (e = h.keys.justPressed, g = e.keyManager.checkStatusUnsafe(83, e.status) ? f = true : false, g && this.curAnim++), f)) {
              this.undoOffsets = null;
              this.curAnim = bc.wrap(this.curAnim, 0, this.anims.length - 1);
              this.character.playAnim(this.anims[this.curAnim].anim, true);
              e = 0;
              f = new tc(this.animsTxtGroup.members, null);
              while (f.hasNext()) {
                g = f.next();
                g.set_color(-1);
                if (e == this.curAnim) {
                  g.set_color(-16711936);
                }
                ++e;
              }
            }
            f = false;
            e = h.keys.justPressed;
            g = e.keyManager.checkStatusUnsafe(37, e.status);
            e = h.keys.justPressed;
            c = e.keyManager.checkStatusUnsafe(39, e.status);
            e = h.keys.justPressed;
            k = e.keyManager.checkStatusUnsafe(38, e.status);
            e = h.keys.justPressed;
            g = [g, c, k, e.keyManager.checkStatusUnsafe(40, e.status)];
            e = h.keys.pressed;
            c = e.keyManager.checkStatusUnsafe(37, e.status);
            e = h.keys.pressed;
            k = e.keyManager.checkStatusUnsafe(39, e.status);
            e = h.keys.pressed;
            var n = e.keyManager.checkStatusUnsafe(38, e.status);
            e = h.keys.pressed;
            e = [c, k, n, e.keyManager.checkStatusUnsafe(40, e.status)];
            if (g.indexOf(true) != -1) {
              f = this.character;
              f.offset.set_x(f.offset.x + ((g[0] ? 1 : 0) - (g[1] ? 1 : 0)) * d);
              f = this.character;
              f.offset.set_y(f.offset.y + ((g[2] ? 1 : 0) - (g[3] ? 1 : 0)) * d);
              f = true;
            }
            if (e.indexOf(true) != -1) {
              this.holdingArrowsTime += a;
              if (this.holdingArrowsTime > 0.6) {
                for (this.holdingArrowsElapsed += a; this.holdingArrowsElapsed > 0.016666666666666666;) {
                  f = this.character;
                  f.offset.set_x(f.offset.x + ((e[0] ? 1 : 0) - (e[1] ? 1 : 0)) * d);
                  f = this.character;
                  f.offset.set_y(f.offset.y + ((e[2] ? 1 : 0) - (e[3] ? 1 : 0)) * d);
                  this.holdingArrowsElapsed -= 0.016666666666666666;
                  f = true;
                }
              }
            } else {
              this.holdingArrowsTime = 0;
            }
            e = h.mouse._rightButton;
            if (e.current == 1 || e.current == 2) {
              e = h.mouse;
              if (e.screenX - e._prevScreenX == 0) {
                e = h.mouse;
                g = e.screenY - e._prevScreenY != 0;
              } else {
                g = true;
              }
            } else {
              g = false;
            }
            if (g) {
              f = this.character;
              e = h.mouse;
              f.offset.set_x(f.offset.x - (e.screenX - e._prevScreenX));
              f = this.character;
              e = h.mouse;
              f.offset.set_y(f.offset.y - (e.screenY - e._prevScreenY));
              f = true;
            }
            e = h.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(17, e.status)) {
              e = h.keys.justPressed;
              if (e.keyManager.checkStatusUnsafe(67, e.status)) {
                this.copiedOffset[0] = this.character.offset.x;
                this.copiedOffset[1] = this.character.offset.y;
                f = true;
              } else {
                e = h.keys.justPressed;
                if (e.keyManager.checkStatusUnsafe(86, e.status)) {
                  this.undoOffsets = [this.character.offset.x, this.character.offset.y];
                  this.character.offset.set_x(this.copiedOffset[0]);
                  this.character.offset.set_y(this.copiedOffset[1]);
                  f = true;
                } else {
                  e = h.keys.justPressed;
                  if (e.keyManager.checkStatusUnsafe(82, e.status)) {
                    this.undoOffsets = [this.character.offset.x, this.character.offset.y];
                    e = this.character.offset;
                    f = d = 0;
                    if (f == null) {
                      f = 0;
                    }
                    if (d == null) {
                      d = 0;
                    }
                    e.set_x(d);
                    e.set_y(f);
                    f = true;
                  } else {
                    e = h.keys.justPressed;
                    if (e.keyManager.checkStatusUnsafe(90, e.status) && this.undoOffsets != null) {
                      this.character.offset.set_x(this.undoOffsets[0]);
                      this.character.offset.set_y(this.undoOffsets[1]);
                      f = true;
                    }
                  }
                }
              }
            }
            e = this.anims[this.curAnim];
            if (f && e != null && e.offsets != null) {
              e.offsets[0] = this.character.offset.x | 0;
              e.offsets[1] = this.character.offset.y | 0;
              this.animsTxtGroup.members[this.curAnim].set_text(e.anim + ": " + v.string(e.offsets));
              this.character.addOffset(e.anim, this.character.offset.x, this.character.offset.y);
            }
            d = "ERROR: No Animation Found";
            f = -65536;
            e = this.character;
            if (e.isAnimateAtlas ? e.atlas.anim.get_curSymbol() != null : e.animation._curAnim != null) {
              e = h.keys.pressed;
              if (e.keyManager.checkStatusUnsafe(65, e.status)) {
                g = true;
              } else {
                e = h.keys.pressed;
                g = e.keyManager.checkStatusUnsafe(68, e.status);
              }
              if (g) {
                this.holdingFrameTime += a;
                if (this.holdingFrameTime > 0.5) {
                  this.holdingFrameElapsed += a;
                }
              } else {
                this.holdingFrameTime = 0;
              }
              e = h.keys.justPressed;
              if (e.keyManager.checkStatusUnsafe(32, e.status)) {
                e = g = this.character;
                a = "";
                if (e.isAnimateAtlas ? e.atlas.anim.get_curSymbol() != null : e.animation._curAnim != null) {
                  a = e.isAnimateAtlas ? e.atlas.anim.lastPlayedAnim : e.animation._curAnim.name;
                }
                g.playAnim(a ?? "", true);
              }
              if (this.character.isAnimateAtlas) {
                a = this.character.atlas.anim.get_curFrame();
                d = this.character.atlas.anim.get_length();
              } else {
                a = this.character.animation._curAnim.curFrame;
                d = this.character.animation._curAnim.frames.length;
              }
              e = h.keys.justPressed;
              if (e.keyManager.checkStatusUnsafe(65, e.status)) {
                g = true;
              } else {
                e = h.keys.justPressed;
                g = e.keyManager.checkStatusUnsafe(68, e.status);
              }
              if (g || this.holdingFrameTime > 0.5) {
                f = false;
                if (this.holdingFrameTime > 0.5) {
                  e = h.keys.pressed;
                  e = e.keyManager.checkStatusUnsafe(65, e.status);
                } else {
                  e = false;
                }
                if (e) {
                  g = true;
                } else {
                  e = h.keys.justPressed;
                  g = e.keyManager.checkStatusUnsafe(65, e.status);
                }
                if (g) {
                  f = true;
                }
                this.character.set_animPaused(true);
                if (this.holdingFrameTime <= 0.5 || this.holdingFrameElapsed > 0.1) {
                  a = bc.wrap(a + ((f ? -b : b) | 0), 0, d - 1);
                  if (this.character.isAnimateAtlas) {
                    this.character.atlas.anim.set_curFrame(a);
                  } else {
                    this.character.animation._curAnim.set_curFrame(a);
                  }
                  this.holdingFrameElapsed -= 0.1;
                }
              }
              d = "Frames: ( " + a + " / " + (d - 1) + " )";
              f = -1;
            }
            if (d != this.frameAdvanceText.text) {
              this.frameAdvanceText.set_text(d);
            }
            this.frameAdvanceText.set_color(f);
            e = h.keys.justPressed;
            if (e.keyManager.checkStatusUnsafe(123, e.status)) {
              this.silhouettes.set_visible(!this.silhouettes.visible);
            }
            e = h.keys.justPressed;
            if (e.keyManager.checkStatusUnsafe(112, e.status)) {
              g = true;
            } else if (this.helpBg.visible) {
              e = h.keys.justPressed;
              g = e.keyManager.checkStatusUnsafe(27, e.status);
            } else {
              g = false;
            }
            if (g) {
              this.helpBg.set_visible(!this.helpBg.visible);
              this.helpTexts.set_visible(this.helpBg.visible);
            } else {
              e = h.keys.justPressed;
              if (e.keyManager.checkStatusUnsafe(27, e.status)) {
                h.mouse.set_visible(false);
                if (this._goToPlayState) {
                  P.switchState(new A());
                } else {
                  P.switchState(new Nf());
                  g = h.sound;
                  b = D.returnSound("music", "freakyMenu", null);
                  g.playMusic(b);
                }
              }
            }
          }
        },
        loadBG: function () {
          var a = D.currentLevel;
          D.currentLevel = this.assetFolder;
          var b = new pd("stageback", -600, -200, 0.9, 0.9);
          this.add(b);
          b = new pd("stagefront", -650, 600, 0.9, 0.9);
          b.setGraphicSize(b.get_width() * 1.1 | 0);
          b.updateHitbox();
          this.add(b);
          b = this.dadPosition;
          var c = 100;
          var d = 100;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.bfPosition;
          c = 770;
          d = 100;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          D.currentLevel = a;
        },
        updatePointerPos: function (a) {
          if (a == null) {
            a = true;
          }
          var b = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
          var c = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
          this.cameraFollowPointer.setPosition(b, c);
          if (a) {
            h.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - h.width / 2);
            h.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - h.height / 2);
          }
        },
        updateHealthBar: function () {
          this.healthColorStepperR.set_value(this.character.healthColorArray[0]);
          this.healthColorStepperG.set_value(this.character.healthColorArray[1]);
          this.healthColorStepperB.set_value(this.character.healthColorArray[2]);
          var a = this.healthBar.leftBar;
          var b = this.healthBar.rightBar;
          var c = this.character.healthColorArray[0];
          var d = this.character.healthColorArray[1];
          var e = this.character.healthColorArray[2];
          var f = eb._new();
          var h = 255;
          if (h == null) {
            h = 255;
          }
          f = (f & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (d > 255 ? 255 : d < 0 ? 0 : d) << 8;
          f &= -256;
          f |= e > 255 ? 255 : e < 0 ? 0 : e;
          f &= 16777215;
          f |= (h > 255 ? 255 : h < 0 ? 0 : h) << 24;
          a.set_color(b.set_color(f));
          this.healthIcon.changeIcon(this.character.healthIcon, false);
        },
        updatePresence: function () {},
        reloadAnimList: function () {
          this.anims = this.character.animationsArray;
          if (this.anims.length > 0) {
            this.character.playAnim(this.anims[0].anim, true);
          }
          this.curAnim = 0;
          for (var a = new tc(this.animsTxtGroup.members, null); a.hasNext();) {
            var b = a.next();
            b.kill();
          }
          var c = 0;
          b = 0;
          for (var d = this.anims; b < d.length;) {
            var e = d[b];
            ++b;
            a = this.animsTxtGroup.recycle(U);
            a.set_x(10);
            a.set_y(32 + c * 20);
            a.set_fieldWidth(400);
            a.set_fieldHeight(20);
            a.set_text(e.anim + ": " + v.string(e.offsets));
            a.setFormat(null, 16, -1, "left", Sa.OUTLINE_FAST, -16777216);
            e = a.scrollFactor;
            e.set_x(0);
            e.set_y(0);
            a.set_borderSize(1);
            this.animsTxtGroup.add(a);
            ++c;
          }
          c = 0;
          for (a = new tc(this.animsTxtGroup.members, null); a.hasNext();) {
            b = a.next();
            b.set_color(-1);
            if (c == this.curAnim) {
              b.set_color(-16711936);
            }
            ++c;
          }
          if (this.animationDropDown != null) {
            this.reloadAnimationDropDown();
          }
        },
        updateTextColors: function () {
          var a = 0;
          for (var b = new tc(this.animsTxtGroup.members, null); b.hasNext();) {
            var c = b.next();
            c.set_color(-1);
            if (a == this.curAnim) {
              c.set_color(-16711936);
            }
            ++a;
          }
        },
        updateCharacterPositions: function () {
          if (this.character == null || this.character.isPlayer) {
            if (this.character == null) {
              var a = this._char;
              a = a != "bf" && !w.startsWith(a, "bf-") && !w.endsWith(a, "-player") && !w.endsWith(a, "-dead") || w.endsWith(a, "-opponent") || w.startsWith(a, "gf-") || w.endsWith(a, "-gf") || a == "gf";
            } else {
              a = false;
            }
          } else {
            a = true;
          }
          if (a) {
            this.character.setPosition(this.dadPosition.x, this.dadPosition.y);
          } else {
            this.character.setPosition(this.bfPosition.x, this.bfPosition.y);
          }
          a = this.character;
          a.set_x(a.x + this.character.positionArray[0]);
          a = this.character;
          a.set_y(a.y + this.character.positionArray[1]);
        },
        predictCharacterIsNotPlayer: function (a) {
          if (a != "bf" && !w.startsWith(a, "bf-") && !w.endsWith(a, "-player") && !w.endsWith(a, "-dead") || w.endsWith(a, "-opponent") || w.startsWith(a, "gf-") || w.endsWith(a, "-gf")) {
            return true;
          } else {
            return a == "gf";
          }
        },
        addAnimation: function (a, b, c, d, e) {
          if (this.character.isAnimateAtlas) {
            if (e != null && e.length > 0) {
              this.character.atlas.anim.addBySymbolIndices(a, b, e, c, d);
            } else {
              this.character.atlas.anim.addBySymbol(a, b, c, d);
            }
          } else if (e != null && e.length > 0) {
            this.character.animation.addByIndices(a, b, e, "", c, d);
          } else {
            this.character.animation.addByPrefix(a, b, c, d);
          }
          if (!Object.prototype.hasOwnProperty.call(this.character.animOffsets.h, a)) {
            this.character.addOffset(a, 0, 0);
          }
        },
        newAnim: function (a, b) {
          return {
            offsets: [0, 0],
            loop: false,
            fps: 24,
            anim: a,
            indices: [],
            name: b
          };
        },
        reloadCharacterDropDown: function () {
          Object.create(null);
          var a = D.getPath("data/characterList.txt", "TEXT", null);
          var b = null;
          if (Q.exists(a)) {
            b = Q.getText(a);
          }
          if (b != null) {
            a = w.trim(b).split("\n");
            b = 0;
            for (var c = a.length; b < c;) {
              var d = b++;
              a[d] = w.trim(a[d]);
            }
          } else {
            a = [];
          }
          this.characterList = a;
          this.charDropDown.setData(sc.makeStrIdLabelArray(this.characterList, true));
          this.charDropDown.set_selectedLabel(this._char);
        },
        reloadAnimationDropDown: function () {
          var a = [];
          for (var b = 0, c = this.anims; b < c.length;) {
            var d = c[b];
            ++b;
            a.push(d.anim);
          }
          if (a.length < 1) {
            a.push("NO ANIMATIONS");
          }
          this.animationDropDown.setData(sc.makeStrIdLabelArray(a, true));
        },
        onSaveComplete: function (a) {
          if (this._file != null) {
            this._file.removeEventListener("complete", m(this, this.onSaveComplete));
            this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
            this._file.removeEventListener("ioError", m(this, this.onSaveError));
            this._file = null;
            h.log.advanced("Successfully saved file.", xa.NOTICE);
          }
        },
        onSaveCancel: function (a) {
          if (this._file != null) {
            this._file.removeEventListener("complete", m(this, this.onSaveComplete));
            this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
            this._file.removeEventListener("ioError", m(this, this.onSaveError));
            this._file = null;
          }
        },
        onSaveError: function (a) {
          if (this._file != null) {
            this._file.removeEventListener("complete", m(this, this.onSaveComplete));
            this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
            this._file.removeEventListener("ioError", m(this, this.onSaveError));
            this._file = null;
            h.log.advanced("Problem saving file", xa.ERROR, true);
          }
        },
        saveCharacter: function () {
          if (this._file == null) {
            var a = JSON.stringify({
              animations: this.character.animationsArray,
              image: this.character.imageFile,
              scale: this.character.jsonScale,
              sing_duration: this.character.singDuration,
              healthicon: this.character.healthIcon,
              position: this.character.positionArray,
              camera_position: this.character.cameraPosition,
              flip_x: this.character.originalFlipX,
              no_antialiasing: this.character.noAntialiasing,
              healthbar_colors: this.character.healthColorArray,
              vocals_file: this.character.vocalsFile,
              _editor_isPlayer: this.character.isPlayer
            }, null, "\t");
            if (a.length > 0) {
              this._file = new Fe();
              this._file.addEventListener("complete", m(this, this.onSaveComplete));
              this._file.addEventListener("cancel", m(this, this.onSaveCancel));
              this._file.addEventListener("ioError", m(this, this.onSaveError));
              this._file.save(a, "" + this._char + ".json");
            }
          }
        },
        __class__: dk
      });
      function fa(a, b) {
        this.characterFailed = false;
        this.characterData = {
          iconP1: null,
          iconP2: null,
          vocalsP1: null,
          vocalsP2: null
        };
        this.lastWaveformHeight = 0;
        this.wavData = [[[0], [0]], [[0], [0]]];
        this.waveformPrinted = true;
        this.columns = 9;
        this.colorSine = this.lastSecBeats = this.lastSecBeatsNext = 0;
        this.updatedSection = false;
        this.playtestingOnComplete = null;
        this.playtestingTime = 0;
        this.playtesting = false;
        this.sectionToCopy = this.currentType = 0;
        this.check_mute_inst = this.check_mute_vocals = this.check_mute_vocals_opponent = this.check_vortex = this.check_warnings = this.playSoundBf = this.playSoundDad = null;
        this.mouseQuant = false;
        this.text = "";
        this.quantizations = [4, 8, 12, 16, 20, 24, 32, 48, 64, 96, 192];
        this.blockPressWhileScrolling = [];
        this.blockPressWhileTypingOnStepper = [];
        this.blockPressWhileTypingOn = [];
        this.curZoom = 2;
        this.zoomList = [0.25, 0.5, 1, 2, 3, 4, 6, 8, 12, 16, 24];
        this.vocals = this.opponentVocals = null;
        this.playbackSpeed = 1;
        this.curSelectedNote = null;
        this.daquantspot = this.curEventSelected = this.curUndoIndex = this.curRedoIndex = 0;
        this.CAM_OFFSET = 360;
        this.amountSteps = 0;
        this.curSong = "Test";
        this.eventStuff = [["", "Nothing. Yep, that's right."], ["Dadbattle Spotlight", "Used in Dad Battle,\nValue 1: 0/1 = ON/OFF,\n2 = Target Dad\n3 = Target BF"], ["Hey!", "Plays the \"Hey!\" animation from Bopeebo,\nValue 1: BF = Only Boyfriend, GF = Only Girlfriend,\nSomething else = Both.\nValue 2: Custom animation duration,\nleave it blank for 0.6s"], ["Set GF Speed", "Sets GF head bopping speed,\nValue 1: 1 = Normal speed,\n2 = 1/2 speed, 4 = 1/4 speed etc.\nUsed on Fresh during the beatbox parts.\n\nWarning: Value must be integer!"], ["Philly Glow", "Exclusive to Week 3\nValue 1: 0/1/2 = OFF/ON/Reset Gradient\n \nNo, i won't add it to other weeks."], ["Kill Henchmen", "For Mom's songs, don't use this please, i love them :("], ["Add Camera Zoom", "Used on MILF on that one \"hard\" part\nValue 1: Camera zoom add (Default: 0.015)\nValue 2: UI zoom add (Default: 0.03)\nLeave the values blank if you want to use Default."], ["BG Freaks Expression", "Should be used only in \"school\" Stage!"], ["Trigger BG Ghouls", "Should be used only in \"schoolEvil\" Stage!"], ["Play Animation", "Plays an animation on a Character,\nonce the animation is completed,\nthe animation changes to Idle\n\nValue 1: Animation to play.\nValue 2: Character (Dad, BF, GF)"], ["Camera Follow Pos", "Value 1: X\nValue 2: Y\n\nThe camera won't change the follow point\nafter using this, for getting it back\nto normal, leave both values blank."], ["Alt Idle Animation", "Sets a specified suffix after the idle animation name.\nYou can use this to trigger 'idle-alt' if you set\nValue 2 to -alt\n\nValue 1: Character to set (Dad, BF or GF)\nValue 2: New suffix (Leave it blank to disable)"], ["Screen Shake", "Value 1: Camera shake\nValue 2: HUD shake\n\nEvery value works as the following example: \"1, 0.05\".\nThe first number (1) is the duration.\nThe second number (0.05) is the intensity."], ["Change Character", "Value 1: Character to change (Dad, BF, GF)\nValue 2: New character's name"], ["Change Scroll Speed", "Value 1: Scroll Speed Multiplier (1 is default)\nValue 2: Time it takes to change fully in seconds."], ["Set Property", "Value 1: Variable name\nValue 2: New value"], ["Play Sound", "Value 1: Sound file name\nValue 2: Volume (Default: 1), ranges from 0 to 1"]];
        this.redos = [];
        this.undos = [];
        this.curNoteTypes = [];
        this.ignoreWarnings = false;
        P.call(this, a, b);
      }
      g["states.editors.ChartingState"] = fa;
      fa.__name__ = "states.editors.ChartingState";
      fa.__super__ = P;
      fa.prototype = q(P.prototype, {
        create: function () {
          if (A.SONG != null) {
            this._song = A.SONG;
          } else {
            nb.list = nb.defaultList.slice();
            this._song = {
              song: "Test",
              notes: [],
              events: [],
              bpm: 150,
              needsVoices: true,
              player1: "bf",
              player2: "dad",
              gfVersion: "gf",
              speed: 1,
              stage: "stage"
            };
            this.addSection();
            A.SONG = this._song;
          }
          fa.vortex = h.save.data.chart_vortex;
          this.ignoreWarnings = h.save.data.ignoreWarnings;
          var a = new F().loadGraphic(D.image("menuDesat"));
          a.set_antialiasing(y.data.antialiasing);
          var b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_color(-14540254);
          this.add(a);
          this.gridLayer = new Qa();
          this.add(this.gridLayer);
          this.waveformSprite = new F(fa.GRID_SIZE, 0).makeGraphic(1, 1, 16777215);
          this.add(this.waveformSprite);
          a = new F(-fa.GRID_SIZE - 5, -90).loadGraphic(D.image("eventArrow"));
          a.set_antialiasing(y.data.antialiasing);
          this.leftIcon = new Kf("bf");
          this.rightIcon = new Kf("dad");
          b = a.scrollFactor;
          var c = 1;
          var d = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.leftIcon.scrollFactor;
          d = c = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.rightIcon.scrollFactor;
          d = c = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          a.setGraphicSize(30, 30);
          this.leftIcon.setGraphicSize(0, 45);
          this.rightIcon.setGraphicSize(0, 45);
          this.add(a);
          this.add(this.leftIcon);
          this.add(this.rightIcon);
          this.leftIcon.setPosition(fa.GRID_SIZE + 10, -100);
          this.rightIcon.setPosition(fa.GRID_SIZE * 5.2, -100);
          this.curRenderedSustains = new Qa();
          this.curRenderedNotes = new Qa();
          this.curRenderedNoteType = new Qa();
          this.nextRenderedSustains = new Qa();
          this.nextRenderedNotes = new Qa();
          h.mouse.set_visible(true);
          this.updateJsonData();
          a = this._song.song;
          c = new V("[~&\\\\;:<>#]", "");
          b = new V("[.,'\"%?!]", "");
          a = c.split(w.replace(a, " ", "-")).join("-");
          this.currentSongName = b.split(a).join("").toLowerCase();
          this.loadSong();
          this.reloadGridLayer();
          O.set_bpm(this._song.bpm);
          O.mapBPMChanges(this._song);
          if (fa.curSec >= this._song.notes.length) {
            fa.curSec = this._song.notes.length - 1;
          }
          this.bpmTxt = new U(1000, 50, 0, "", 16);
          b = this.bpmTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.bpmTxt);
          this.strumLine = new F(0, 50).makeGraphic(fa.GRID_SIZE * 9 | 0, 4);
          this.add(this.strumLine);
          this.quant = new Yg("chart_quant", "chart_quant");
          this.quant.animation.addByPrefix("q", "chart_quant", 0, false);
          this.quant.animation.play("q", true, false, 0);
          this.quant.sprTracker = this.strumLine;
          this.quant.xAdd = -32;
          this.quant.yAdd = 8;
          this.add(this.quant);
          this.strumLineNotes = new Qa();
          for (a = 0; a < 8;) {
            b = a++;
            b = new ug(fa.GRID_SIZE * (b + 1), this.strumLine.y, b % 4, 0);
            b.setGraphicSize(fa.GRID_SIZE, fa.GRID_SIZE);
            b.updateHitbox();
            b.playAnim("static", true);
            this.strumLineNotes.add(b);
            b = b.scrollFactor;
            d = c = 1;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
          }
          this.add(this.strumLineNotes);
          this.camPos = new $b(0, 0, 1, 1);
          this.camPos.setPosition(this.strumLine.x + this.CAM_OFFSET, this.strumLine.y);
          this.dummyArrow = new F().makeGraphic(fa.GRID_SIZE, fa.GRID_SIZE);
          this.dummyArrow.set_antialiasing(y.data.antialiasing);
          this.add(this.dummyArrow);
          this.UI_box = new je(null, null, [{
            name: "Song",
            label: "Song"
          }, {
            name: "Section",
            label: "Section"
          }, {
            name: "Note",
            label: "Note"
          }, {
            name: "Events",
            label: "Events"
          }, {
            name: "Charting",
            label: "Charting"
          }, {
            name: "Data",
            label: "Data"
          }], null, true);
          this.UI_box.resize(300, 400);
          this.UI_box.set_x(640 + fa.GRID_SIZE / 2);
          this.UI_box.set_y(25);
          b = this.UI_box.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.text = "W/S or Mouse Wheel - Change Conductor's strum time\n\t\t\nA/D - Go to the previous/next section\n\t\t\nLeft/Right - Change Snap\n\t\t\nUp/Down - Change Conductor's Strum Time with Snapping\nLeft Bracket / Right Bracket - Change Song Playback Rate (SHIFT to go Faster)\n\t\t\nALT + Left Bracket / Right Bracket - Reset Song Playback Rate\nHold Shift to move 4x faster\n\t\t\nHold Control and click on an arrow to select it\n\t\t\nZ/X - Zoom in/out\n\t\t\n\n\t\t\nEsc - Test your chart inside Chart Editor\n\t\t\nEnter - Play your chart\n\t\t\nQ/E - Decrease/Increase Note Sustain Length\n\t\t\nSpace - Stop/Resume song";
          c = this.text.split("\n");
          a = 0;
          for (d = c.length; a < d;) {
            b = a++;
            var e = new U(this.UI_box.x, this.UI_box.y + this.UI_box.get_height() + 8, 0, c[b], 16);
            e.set_y(e.y + b * 12);
            e.setFormat("assets/fonts/vcr.ttf", 14, -1, "left");
            b = e.scrollFactor;
            b.set_x(0);
            b.set_y(0);
            this.add(e);
          }
          this.add(this.UI_box);
          this.addSongUI();
          this.addSectionUI();
          this.addNoteUI();
          this.addEventsUI();
          this.addChartingUI();
          this.addDataUI();
          this.updateHeads();
          this.updateWaveform();
          this.add(this.curRenderedSustains);
          this.add(this.curRenderedNotes);
          this.add(this.curRenderedNoteType);
          this.add(this.nextRenderedSustains);
          this.add(this.nextRenderedNotes);
          if (fa.lastSong != this.currentSongName) {
            this.changeSection();
          }
          fa.lastSong = this.currentSongName;
          this.zoomTxt = new U(10, 10, 0, "Zoom: 1 / 1", 16);
          b = this.zoomTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.zoomTxt);
          this.updateGrid();
          P.prototype.create.call(this);
        },
        addSongUI: function () {
          var a = this;
          this.UI_songTitle = new ub(10, 10, 70, this._song.song, 8);
          this.blockPressWhileTypingOn.push(this.UI_songTitle);
          var b = new xb(10, 25, null, null, "Has voice track", 100);
          b.set_checked(this._song.needsVoices);
          b.callback = function () {
            a._song.needsVoices = b.checked;
          };
          var c = new qb(110, 8, "Save", function () {
            a.saveLevel();
          });
          var d = new qb(c.x + 90, c.y, "Reload Audio", function () {
            var b = a.UI_songTitle.text;
            var c = new V("[~&\\\\;:<>#]", "");
            var d = new V("[.,'\"%?!]", "");
            b = c.split(w.replace(b, " ", "-")).join("-");
            d = d.split(b).join("").toLowerCase();
            a.currentSongName = d;
            a.updateJsonData();
            a.loadSong();
            a.updateWaveform();
          });
          var e = new qb(d.x, c.y + 30, "Reload JSON", function () {
            a.openSubState(new Hi("This action will clear current progress.\n\nProceed?", 0, function () {
              a.loadJson(a._song.song.toLowerCase());
            }, null, a.ignoreWarnings));
          });
          var f = new qb(e.x, e.y + 30, "Load Autosave", function () {
            A.SONG = Md.parseJSONshit(h.save.data.autosave);
            P.resetState();
          });
          var k = new qb(f.x, f.y + 30, "Load Events", function () {
            var b = a._song.song;
            var c = new V("[~&\\\\;:<>#]", "");
            var d = new V("[.,'\"%?!]", "");
            b = c.split(w.replace(b, " ", "-")).join("-");
            d = d.split(b).join("").toLowerCase();
            b = D.getPath("data/" + (d + "/events.json"), "TEXT", null);
            if (Q.exists(b)) {
              a.clearEvents();
              d = Md.loadFromJson("events", d);
              a._song.events = d.events;
              a.changeSection(fa.curSec);
            }
          });
          var g = new qb(110, e.y, "Save Events", function () {
            a.saveEvents();
          });
          var n = new qb(320, 310, "Clear events", function () {
            a.openSubState(new Hi("This action will clear current progress.\n\nProceed?", 0, m(a, a.clearEvents), null, a.ignoreWarnings));
          });
          n.set_color(-65536);
          n.label.set_color(-1);
          var p = new qb(320, n.y + 30, "Clear notes", function () {
            a.openSubState(new Hi("This action will clear current progress.\n\nProceed?", 0, function () {
              for (var b = 0, c = a._song.notes.length; b < c;) {
                var d = b++;
                a._song.notes[d].sectionNotes = [];
              }
              a.updateGrid();
            }, null, a.ignoreWarnings));
          });
          p.set_color(-65536);
          p.label.set_color(-1);
          var u = new Ib(10, 70, 1, 1, 1, 400, 3);
          u.set_value(O.bpm);
          u.name = "song_bpm";
          this.blockPressWhileTypingOnStepper.push(u);
          var l = new Ib(10, u.y + 35, 0.1, 1, 0.1, 10, 2);
          l.set_value(this._song.speed);
          l.name = "song_speed";
          this.blockPressWhileTypingOnStepper.push(l);
          var q = "characters/";
          if (q == null) {
            q = "";
          }
          var z = [];
          var J = "assets/shared/";
          if (J == null) {
            J = "assets/shared/";
          }
          J = w.trim(J);
          if (!w.endsWith(J, "/")) {
            J += "/";
          }
          if (!w.startsWith(J, "assets/")) {
            J = "assets/" + J;
          }
          var ba = [];
          var y = [];
          y.push(J + "data/characterList.txt");
          J += "data/characterList.txt";
          if (y.indexOf(J) != -1) {
            r.remove(y, J);
            y.splice(0, 0, J);
          }
          for (J = 0; J < y.length;) {
            q = y[J];
            ++J;
            var B = null;
            if (Q.exists(q)) {
              B = Q.getText(q);
            }
            if (B != null) {
              q = [];
              q = w.trim(B).split("\n");
              B = 0;
              for (var C = q.length; B < C;) {
                var x = B++;
                q[x] = w.trim(q[x]);
              }
            } else {
              q = [];
            }
            for (B = 0; B < q.length;) {
              C = q[B];
              ++B;
              if (ba.indexOf(C) == -1 && C.length > 0) {
                ba.push(C);
              }
            }
          }
          var F = ba;
          for (J = 0; J < F.length;) {
            var H = F[J];
            ++J;
            if (w.trim(H).length > 0) {
              z.push(H);
            }
          }
          z = [];
          H = new sc(10, l.y + 45, sc.makeStrIdLabelArray(F, true), function (b) {
            a._song.player1 = F[v.parseInt(b)];
            a.updateJsonData();
            a.updateHeads();
          });
          H.set_selectedLabel(this._song.player1);
          this.blockPressWhileScrolling.push(H);
          var G = new sc(H.x, H.y + 40, sc.makeStrIdLabelArray(F, true), function (b) {
            a._song.gfVersion = F[v.parseInt(b)];
            a.updateJsonData();
            a.updateHeads();
          });
          G.set_selectedLabel(this._song.gfVersion);
          this.blockPressWhileScrolling.push(G);
          var N = new sc(H.x, G.y + 40, sc.makeStrIdLabelArray(F, true), function (b) {
            a._song.player2 = F[v.parseInt(b)];
            a.updateJsonData();
            a.updateHeads();
          });
          N.set_selectedLabel(this._song.player2);
          this.blockPressWhileScrolling.push(N);
          q = "stages/";
          if (q == null) {
            q = "";
          }
          J = "assets/shared/";
          if (J == null) {
            J = "assets/shared/";
          }
          J = w.trim(J);
          if (!w.endsWith(J, "/")) {
            J += "/";
          }
          if (!w.startsWith(J, "assets/")) {
            J = "assets/" + J;
          }
          ba = [];
          y = [];
          y.push(J + "data/stageList.txt");
          J += "data/stageList.txt";
          if (y.indexOf(J) != -1) {
            r.remove(y, J);
            y.splice(0, 0, J);
          }
          for (J = 0; J < y.length;) {
            q = y[J];
            ++J;
            B = null;
            if (Q.exists(q)) {
              B = Q.getText(q);
            }
            if (B != null) {
              q = [];
              q = w.trim(B).split("\n");
              B = 0;
              C = q.length;
              while (B < C) {
                x = B++;
                q[x] = w.trim(q[x]);
              }
            } else {
              q = [];
            }
            for (B = 0; B < q.length;) {
              C = q[B];
              ++B;
              if (ba.indexOf(C) == -1 && C.length > 0) {
                ba.push(C);
              }
            }
          }
          var la = [];
          for (J = 0; J < ba.length;) {
            y = ba[J];
            ++J;
            if (w.trim(y).length > 0) {
              la.push(y);
            }
            z.push(y);
          }
          if (la.length < 1) {
            la.push("stage");
          }
          this.stageDropDown = new sc(H.x + 140, H.y, sc.makeStrIdLabelArray(la, true), function (b) {
            a._song.stage = la[v.parseInt(b)];
          });
          this.stageDropDown.set_selectedLabel(this._song.stage);
          this.blockPressWhileScrolling.push(this.stageDropDown);
          z = new Ka(null, this.UI_box);
          z.name = "Song";
          z.add(this.UI_songTitle);
          z.add(b);
          z.add(n);
          z.add(p);
          z.add(c);
          z.add(g);
          z.add(d);
          z.add(e);
          z.add(f);
          z.add(k);
          z.add(u);
          z.add(l);
          z.add(new U(u.x, u.y - 15, 0, "Song BPM:"));
          z.add(new U(u.x + 100, u.y - 15, 0, "Song Offset:"));
          z.add(new U(l.x, l.y - 15, 0, "Song Speed:"));
          z.add(new U(N.x, N.y - 15, 0, "Opponent:"));
          z.add(new U(G.x, G.y - 15, 0, "Girlfriend:"));
          z.add(new U(H.x, H.y - 15, 0, "Boyfriend:"));
          z.add(new U(this.stageDropDown.x, this.stageDropDown.y - 15, 0, "Stage:"));
          z.add(N);
          z.add(G);
          z.add(H);
          z.add(this.stageDropDown);
          this.UI_box.addGroup(z);
          this.initPsychCamera().follow(this.camPos, tf.LOCKON, 999);
        },
        addSectionUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_box);
          b.name = "Section";
          this.check_mustHitSection = new xb(10, 15, null, null, "Must hit section", 100);
          this.check_mustHitSection.name = "check_mustHit";
          this.check_mustHitSection.set_checked(this._song.notes[fa.curSec].mustHitSection);
          this.check_gfSection = new xb(10, this.check_mustHitSection.y + 22, null, null, "GF section", 100);
          this.check_gfSection.name = "check_gf";
          this.check_gfSection.set_checked(this._song.notes[fa.curSec].gfSection);
          this.check_altAnim = new xb(this.check_gfSection.x + 120, this.check_gfSection.y, null, null, "Alt Animation", 100);
          this.check_altAnim.set_checked(this._song.notes[fa.curSec].altAnim);
          this.stepperBeats = new Ib(10, 100, 1, 4, 1, 7, 2);
          this.stepperBeats.set_value(this.getSectionBeats());
          this.stepperBeats.name = "section_beats";
          this.blockPressWhileTypingOnStepper.push(this.stepperBeats);
          this.check_altAnim.name = "check_altAnim";
          this.check_changeBPM = new xb(10, this.stepperBeats.y + 30, null, null, "Change BPM", 100);
          this.check_changeBPM.set_checked(this._song.notes[fa.curSec].changeBPM);
          this.check_changeBPM.name = "check_changeBPM";
          this.stepperSectionBPM = new Ib(10, this.check_changeBPM.y + 20, 1, O.bpm, 0, 999, 1);
          if (this.check_changeBPM.checked) {
            this.stepperSectionBPM.set_value(this._song.notes[fa.curSec].bpm);
          } else {
            this.stepperSectionBPM.set_value(O.bpm);
          }
          this.stepperSectionBPM.name = "section_bpm";
          this.blockPressWhileTypingOnStepper.push(this.stepperSectionBPM);
          var c = null;
          var d = null;
          var e = new qb(10, 190, "Copy Section", function () {
            a.notesCopied = [];
            a.sectionToCopy = fa.curSec;
            for (var b = 0, c = a._song.notes[fa.curSec].sectionNotes.length; b < c;) {
              var d = b++;
              a.notesCopied.push(a._song.notes[fa.curSec].sectionNotes[d]);
            }
            var e = a.sectionStartTime();
            var f = a.sectionStartTime(1);
            b = 0;
            for (c = a._song.events; b < c.length;) {
              var h = c[b];
              ++b;
              var k = h[0];
              if (f > h[0] && h[0] >= e) {
                var g = [];
                for (var l = 0, n = h[1].length; l < n;) {
                  d = l++;
                  d = h[1][d];
                  g.push([d[0], d[1], d[2]]);
                }
                a.notesCopied.push([k, -1, g]);
              }
            }
          });
          var f = new qb(e.x + 100, e.y, "Paste Section", function () {
            if (a.notesCopied != null && !(a.notesCopied.length < 1)) {
              var b = O.stepCrochet * 4 * a.getSectionBeats() * (fa.curSec - a.sectionToCopy);
              for (var e = 0, f = a.notesCopied; e < f.length;) {
                var h = f[e];
                ++e;
                var k = h[0] + b;
                if (h[1] < 0) {
                  if (c.checked) {
                    var g = [];
                    for (var l = 0, n = h[2].length; l < n;) {
                      var p = l++;
                      p = h[2][p];
                      g.push([p[0], p[1], p[2]]);
                    }
                    a._song.events.push([k, g]);
                  }
                } else if (d.checked) {
                  h = h[4] != null ? [k, h[1], h[2], h[3], h[4]] : [k, h[1], h[2], h[3]];
                  a._song.notes[fa.curSec].sectionNotes.push(h);
                }
              }
              a.updateGrid();
            }
          });
          var h = new qb(f.x + 100, f.y, "Clear", function () {
            if (d.checked) {
              a._song.notes[fa.curSec].sectionNotes = [];
            }
            if (c.checked) {
              for (var b = a._song.events.length - 1, e = a.sectionStartTime(), f = a.sectionStartTime(1); b > -1;) {
                var h = a._song.events[b];
                if (h != null && f > h[0] && h[0] >= e) {
                  r.remove(a._song.events, h);
                }
                --b;
              }
            }
            a.updateGrid();
            a.updateNoteUI();
          });
          h.set_color(-65536);
          h.label.set_color(-1);
          d = new xb(10, h.y + 25, null, null, "Notes", 100);
          d.set_checked(true);
          c = new xb(d.x + 100, d.y, null, null, "Events", 100);
          c.set_checked(true);
          var g = new qb(10, d.y + 40, "Swap section", function () {
            for (var b = 0, c = a._song.notes[fa.curSec].sectionNotes.length; b < c;) {
              var d = b++;
              var e = a._song.notes[fa.curSec].sectionNotes[d];
              e[1] = (e[1] + 4) % 8;
              a._song.notes[fa.curSec].sectionNotes[d] = e;
            }
            a.updateGrid();
          });
          var n = null;
          var p = new qb(10, g.y + 30, "Copy last section", function () {
            var b = n.value | 0;
            if (b != 0) {
              var c = fa.curSec;
              c = c > b ? c : b;
              for (var d = 0, e = a._song.notes[c - b].sectionNotes; d < e.length;) {
                var f = e[d];
                ++d;
                f = [f[0] + O.stepCrochet * 4 * a.getSectionBeats(c) * b, f[1], f[2], f[3]];
                a._song.notes[c].sectionNotes.push(f);
              }
              f = a.sectionStartTime(-b);
              var h = a.sectionStartTime(-b + 1);
              d = 0;
              for (e = a._song.events; d < e.length;) {
                var k = e[d];
                ++d;
                var g = k[0];
                if (h > k[0] && k[0] >= f) {
                  g += O.stepCrochet * 4 * a.getSectionBeats(c) * b;
                  var l = [];
                  for (var p = 0, m = k[1].length; p < m;) {
                    var v = p++;
                    v = k[1][v];
                    l.push([v[0], v[1], v[2]]);
                  }
                  a._song.events.push([g, l]);
                }
              }
              a.updateGrid();
            }
          });
          p.setGraphicSize(80, 30);
          p.updateHitbox();
          n = new Ib(p.x + 100, p.y, 1, 1, -999, 999, 0);
          this.blockPressWhileTypingOnStepper.push(n);
          var m = new qb(10, p.y + 45, "Duet Notes", function () {
            var b = [];
            for (var c = 0, d = a._song.notes[fa.curSec].sectionNotes; c < d.length;) {
              var e = d[c];
              ++c;
              var f = e[1];
              f = f > 3 ? f - 4 : f + 4;
              b.push([e[0], f, e[2], e[3]]);
            }
            for (c = 0; c < b.length;) {
              d = b[c];
              ++c;
              a._song.notes[fa.curSec].sectionNotes.push(d);
            }
            a.updateGrid();
          });
          var l = new qb(m.x + 100, m.y, "Mirror Notes", function () {
            var b = [];
            for (var c = 0, d = a._song.notes[fa.curSec].sectionNotes; c < d.length;) {
              var e = d[c];
              ++c;
              var f = e[1] % 4;
              f = 3 - f;
              if (e[1] > 3) {
                f += 4;
              }
              e[1] = f;
            }
            for (c = 0; c < b.length;) {
              ++c;
            }
            a.updateGrid();
          });
          b.add(new U(this.stepperBeats.x, this.stepperBeats.y - 15, 0, "Beats per Section:"));
          b.add(this.stepperBeats);
          b.add(this.stepperSectionBPM);
          b.add(this.check_mustHitSection);
          b.add(this.check_gfSection);
          b.add(this.check_altAnim);
          b.add(this.check_changeBPM);
          b.add(e);
          b.add(f);
          b.add(h);
          b.add(d);
          b.add(c);
          b.add(g);
          b.add(n);
          b.add(p);
          b.add(m);
          b.add(l);
          this.UI_box.addGroup(b);
        },
        addNoteUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_box);
          b.name = "Note";
          this.stepperSusLength = new Ib(10, 25, O.stepCrochet / 2, 0, 0, O.stepCrochet * 64);
          this.stepperSusLength.set_value(0);
          this.stepperSusLength.name = "note_susLength";
          this.blockPressWhileTypingOnStepper.push(this.stepperSusLength);
          this.strumTimeInputText = new ub(10, 65, 180, "0");
          b.add(this.strumTimeInputText);
          this.blockPressWhileTypingOn.push(this.strumTimeInputText);
          for (var c = 0; c < fa.noteTypeList.length;) {
            this.curNoteTypes.push(fa.noteTypeList[c]);
            ++c;
          }
          c = this.curNoteTypes.slice();
          for (var d = 1, e = c.length; d < e;) {
            var f = d++;
            c[f] = f + ". " + c[f];
          }
          this.noteTypeDropDown = new sc(10, 105, sc.makeStrIdLabelArray(c, true), function (b) {
            a.currentType = v.parseInt(b);
            if (a.curSelectedNote != null && a.curSelectedNote[1] > -1) {
              a.curSelectedNote[3] = a.curNoteTypes[a.currentType];
              a.updateGrid();
            }
          });
          this.blockPressWhileScrolling.push(this.noteTypeDropDown);
          b.add(new U(10, 10, 0, "Sustain length:"));
          b.add(new U(10, 50, 0, "Strum time (in miliseconds):"));
          b.add(new U(10, 90, 0, "Note type:"));
          b.add(this.stepperSusLength);
          b.add(this.strumTimeInputText);
          b.add(this.noteTypeDropDown);
          this.UI_box.addGroup(b);
        },
        addEventsUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_box);
          b.name = "Events";
          this.descText = new U(20, 200, 0, this.eventStuff[0][0]);
          var c = [];
          for (var d = 0, e = this.eventStuff.length; d < e;) {
            var f = d++;
            c.push(this.eventStuff[f][0]);
          }
          d = new U(20, 30, 0, "Event:");
          b.add(d);
          this.eventDropDown = new sc(20, 50, sc.makeStrIdLabelArray(c, true), function (b) {
            b = v.parseInt(b);
            a.descText.set_text(a.eventStuff[b][1]);
            if (a.curSelectedNote != null && a.eventStuff != null) {
              if (a.curSelectedNote != null && a.curSelectedNote[2] == null) {
                a.curSelectedNote[1][a.curEventSelected][0] = a.eventStuff[b][0];
              }
              a.updateGrid();
            }
          });
          this.blockPressWhileScrolling.push(this.eventDropDown);
          d = new U(20, 90, 0, "Value 1:");
          b.add(d);
          this.value1InputText = new ub(20, 110, 100, "");
          this.blockPressWhileTypingOn.push(this.value1InputText);
          d = new U(20, 130, 0, "Value 2:");
          b.add(d);
          this.value2InputText = new ub(20, 150, 100, "");
          this.blockPressWhileTypingOn.push(this.value2InputText);
          d = new qb(this.eventDropDown.x + this.eventDropDown.get_width() + 10, this.eventDropDown.y, "-", function () {
            if (a.curSelectedNote != null && a.curSelectedNote[2] == null) {
              if (a.curSelectedNote[1].length < 2) {
                r.remove(a._song.events, a.curSelectedNote);
                a.curSelectedNote = null;
              } else {
                a.curSelectedNote[1].remove(a.curSelectedNote[1][a.curEventSelected]);
              }
              --a.curEventSelected;
              if (a.curEventSelected < 0) {
                a.curEventSelected = 0;
              } else {
                if (a.curSelectedNote != null) {
                  var b = a.curSelectedNote[1];
                  var c = a.curEventSelected >= b.length;
                } else {
                  c = false;
                }
                if (c) {
                  a.curEventSelected = b.length - 1;
                }
              }
              a.changeEventSelected();
              a.updateGrid();
            }
          });
          d.setGraphicSize(d.get_height() | 0, d.get_height() | 0);
          d.updateHitbox();
          d.set_color(-65536);
          d.label.set_color(-1);
          d.label.set_size(12);
          this.setAllLabelsOffset(d, -30, 0);
          b.add(d);
          c = new qb(d.x + d.get_width() + 10, d.y, "+", function () {
            if (a.curSelectedNote != null && a.curSelectedNote[2] == null) {
              a.curSelectedNote[1].push(["", "", ""]);
              a.changeEventSelected(1);
              a.updateGrid();
            }
          });
          c.setGraphicSize(d.get_width() | 0, d.get_height() | 0);
          c.updateHitbox();
          c.set_color(-16744448);
          c.label.set_color(-1);
          c.label.set_size(12);
          this.setAllLabelsOffset(c, -30, 0);
          b.add(c);
          d = new qb(c.x + c.get_width() + 20, c.y, "<", function () {
            a.changeEventSelected(-1);
          });
          d.setGraphicSize(c.get_width() | 0, c.get_height() | 0);
          d.updateHitbox();
          d.label.set_size(12);
          this.setAllLabelsOffset(d, -30, 0);
          b.add(d);
          e = new qb(d.x + d.get_width() + 10, d.y, ">", function () {
            a.changeEventSelected(1);
          });
          e.setGraphicSize(d.get_width() | 0, d.get_height() | 0);
          e.updateHitbox();
          e.label.set_size(12);
          this.setAllLabelsOffset(e, -30, 0);
          b.add(e);
          this.selectedEventText = new U(c.x - 100, c.y + c.get_height() + 6, e.x - c.x + 186, "Selected Event: None");
          this.selectedEventText.set_alignment("center");
          b.add(this.selectedEventText);
          b.add(this.descText);
          b.add(this.value1InputText);
          b.add(this.value2InputText);
          b.add(this.eventDropDown);
          this.UI_box.addGroup(b);
        },
        changeEventSelected: function (a) {
          if (a == null) {
            a = 0;
          }
          if (this.curSelectedNote != null && this.curSelectedNote[2] == null) {
            this.curEventSelected += a;
            if (this.curEventSelected < 0) {
              this.curEventSelected = (this.curSelectedNote[1].length | 0) - 1;
            } else if (this.curEventSelected >= this.curSelectedNote[1].length) {
              this.curEventSelected = 0;
            }
            this.selectedEventText.set_text("Selected Event: " + (this.curEventSelected + 1) + " / " + v.string(this.curSelectedNote[1].length));
          } else {
            this.curEventSelected = 0;
            this.selectedEventText.set_text("Selected Event: None");
          }
          this.updateNoteUI();
        },
        setAllLabelsOffset: function (a, b, c) {
          var d = 0;
          for (a = a.labelOffsets; d < a.length;) {
            var e = a[d];
            ++d;
            var f = b;
            var h = c;
            if (h == null) {
              h = 0;
            }
            if (f == null) {
              f = 0;
            }
            e.set_x(f);
            e.set_y(h);
          }
        },
        addChartingUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_box);
          b.name = "Charting";
          this.check_mute_inst = new xb(10, 280, null, null, "Mute Instrumental (in editor)", 100);
          this.check_mute_inst.set_checked(false);
          this.check_mute_inst.callback = function () {
            var b = a.instVolume.value;
            if (a.check_mute_inst.checked) {
              b = 0;
            }
            h.sound.music.set_volume(b);
          };
          this.mouseScrollingQuant = new xb(10, 190, null, null, "Mouse Scrolling Quantization", 100);
          if (h.save.data.mouseScrollingQuant == null) {
            h.save.data.mouseScrollingQuant = false;
          }
          this.mouseScrollingQuant.set_checked(h.save.data.mouseScrollingQuant);
          this.mouseScrollingQuant.callback = function () {
            h.save.data.mouseScrollingQuant = a.mouseScrollingQuant.checked;
            a.mouseQuant = h.save.data.mouseScrollingQuant;
          };
          this.check_vortex = new xb(10, 160, null, null, "Vortex Editor (BETA)", 100);
          if (h.save.data.chart_vortex == null) {
            h.save.data.chart_vortex = false;
          }
          this.check_vortex.set_checked(h.save.data.chart_vortex);
          this.check_vortex.callback = function () {
            h.save.data.chart_vortex = a.check_vortex.checked;
            fa.vortex = h.save.data.chart_vortex;
            a.reloadGridLayer();
          };
          this.check_warnings = new xb(10, 120, null, null, "Ignore Progress Warnings", 100);
          if (h.save.data.ignoreWarnings == null) {
            h.save.data.ignoreWarnings = false;
          }
          this.check_warnings.set_checked(h.save.data.ignoreWarnings);
          this.check_warnings.callback = function () {
            h.save.data.ignoreWarnings = a.check_warnings.checked;
            a.ignoreWarnings = h.save.data.ignoreWarnings;
          };
          this.check_mute_vocals = new xb(this.check_mute_inst.x, this.check_mute_inst.y + 30, null, null, "Mute Main Vocals (in editor)", 100);
          this.check_mute_vocals.set_checked(false);
          this.check_mute_vocals.callback = function () {
            var b = a.voicesVolume.value;
            if (a.check_mute_vocals.checked) {
              b = 0;
            }
            if (a.vocals != null) {
              a.vocals.set_volume(b);
            }
          };
          this.check_mute_vocals_opponent = new xb(this.check_mute_vocals.x + 120, this.check_mute_vocals.y, null, null, "Mute Opp. Vocals (in editor)", 100);
          this.check_mute_vocals_opponent.set_checked(false);
          this.check_mute_vocals_opponent.callback = function () {
            var b = a.voicesOppVolume.value;
            if (a.check_mute_vocals_opponent.checked) {
              b = 0;
            }
            if (a.opponentVocals != null) {
              a.opponentVocals.set_volume(b);
            }
          };
          this.playSoundBf = new xb(this.check_mute_inst.x, this.check_mute_vocals.y + 30, null, null, "Play Sound (Boyfriend notes)", 100, null, function () {
            h.save.data.chart_playSoundBf = a.playSoundBf.checked;
          });
          if (h.save.data.chart_playSoundBf == null) {
            h.save.data.chart_playSoundBf = false;
          }
          this.playSoundBf.set_checked(h.save.data.chart_playSoundBf);
          this.playSoundDad = new xb(this.check_mute_inst.x + 120, this.playSoundBf.y, null, null, "Play Sound (Opponent notes)", 100, null, function () {
            h.save.data.chart_playSoundDad = a.playSoundDad.checked;
          });
          if (h.save.data.chart_playSoundDad == null) {
            h.save.data.chart_playSoundDad = false;
          }
          this.playSoundDad.set_checked(h.save.data.chart_playSoundDad);
          this.metronome = new xb(10, 15, null, null, "Metronome Enabled", 100, null, function () {
            h.save.data.chart_metronome = a.metronome.checked;
          });
          if (h.save.data.chart_metronome == null) {
            h.save.data.chart_metronome = false;
          }
          this.metronome.set_checked(h.save.data.chart_metronome);
          this.metronomeStepper = new Ib(15, 55, 5, this._song.bpm, 1, 1500, 1);
          this.metronomeOffsetStepper = new Ib(this.metronomeStepper.x + 100, this.metronomeStepper.y, 25, 0, 0, 1000, 1);
          this.blockPressWhileTypingOnStepper.push(this.metronomeStepper);
          this.blockPressWhileTypingOnStepper.push(this.metronomeOffsetStepper);
          this.disableAutoScrolling = new xb(this.metronome.x + 120, this.metronome.y, null, null, "Disable Autoscroll (Not Recommended)", 120, null, function () {
            h.save.data.chart_noAutoScroll = a.disableAutoScrolling.checked;
          });
          if (h.save.data.chart_noAutoScroll == null) {
            h.save.data.chart_noAutoScroll = false;
          }
          this.disableAutoScrolling.set_checked(h.save.data.chart_noAutoScroll);
          this.instVolume = new Ib(this.metronomeStepper.x, 250, 0.1, 1, 0, 1, 1);
          this.instVolume.set_value(h.sound.music._volume);
          this.instVolume.name = "inst_volume";
          this.blockPressWhileTypingOnStepper.push(this.instVolume);
          this.voicesVolume = new Ib(this.instVolume.x + 100, this.instVolume.y, 0.1, 1, 0, 1, 1);
          this.voicesVolume.set_value(this.vocals._volume);
          this.voicesVolume.name = "voices_volume";
          this.blockPressWhileTypingOnStepper.push(this.voicesVolume);
          this.voicesOppVolume = new Ib(this.instVolume.x + 200, this.instVolume.y, 0.1, 1, 0, 1, 1);
          this.voicesOppVolume.set_value(this.vocals._volume);
          this.voicesOppVolume.name = "voices_opp_volume";
          this.blockPressWhileTypingOnStepper.push(this.voicesOppVolume);
          this.sliderRate = new th(this, "playbackSpeed", 120, 120, 0.5, 3, 150, null, 5, -1, -16777216);
          this.sliderRate.nameLabel.set_text("Playback Rate");
          b.add(this.sliderRate);
          b.add(new U(this.metronomeStepper.x, this.metronomeStepper.y - 15, 0, "BPM:"));
          b.add(new U(this.metronomeOffsetStepper.x, this.metronomeOffsetStepper.y - 15, 0, "Offset (ms):"));
          b.add(new U(this.instVolume.x, this.instVolume.y - 15, 0, "Inst Volume"));
          b.add(new U(this.voicesVolume.x, this.voicesVolume.y - 15, 0, "Main Vocals"));
          b.add(new U(this.voicesOppVolume.x, this.voicesOppVolume.y - 15, 0, "Opp. Vocals"));
          b.add(this.metronome);
          b.add(this.disableAutoScrolling);
          b.add(this.metronomeStepper);
          b.add(this.metronomeOffsetStepper);
          b.add(this.instVolume);
          b.add(this.voicesVolume);
          b.add(this.voicesOppVolume);
          b.add(this.check_mute_inst);
          b.add(this.check_mute_vocals);
          b.add(this.check_mute_vocals_opponent);
          b.add(this.check_vortex);
          b.add(this.mouseScrollingQuant);
          b.add(this.check_warnings);
          b.add(this.playSoundBf);
          b.add(this.playSoundDad);
          this.UI_box.addGroup(b);
        },
        addDataUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_box);
          b.name = "Data";
          this.gameOverCharacterInputText = new ub(10, 25, 150, this._song.gameOverChar ?? "", 8);
          this.blockPressWhileTypingOn.push(this.gameOverCharacterInputText);
          this.gameOverSoundInputText = new ub(10, this.gameOverCharacterInputText.y + 35, 150, this._song.gameOverSound ?? "", 8);
          this.blockPressWhileTypingOn.push(this.gameOverSoundInputText);
          this.gameOverLoopInputText = new ub(10, this.gameOverSoundInputText.y + 35, 150, this._song.gameOverLoop ?? "", 8);
          this.blockPressWhileTypingOn.push(this.gameOverLoopInputText);
          this.gameOverEndInputText = new ub(10, this.gameOverLoopInputText.y + 35, 150, this._song.gameOverEnd ?? "", 8);
          this.blockPressWhileTypingOn.push(this.gameOverEndInputText);
          var c = new xb(10, 170, null, null, "Disable Note RGB", 100);
          c.set_checked(this._song.disableNoteRGB == 1);
          c.callback = function () {
            a._song.disableNoteRGB = c.checked;
            a.updateGrid();
          };
          this.noteSkinInputText = new ub(10, 280, 150, this._song.arrowSkin ?? "", 8);
          this.blockPressWhileTypingOn.push(this.noteSkinInputText);
          this.noteSplashesInputText = new ub(this.noteSkinInputText.x, this.noteSkinInputText.y + 35, 150, this._song.splashSkin ?? "", 8);
          this.blockPressWhileTypingOn.push(this.noteSplashesInputText);
          var d = new qb(this.noteSplashesInputText.x + 5, this.noteSplashesInputText.y + 20, "Change Notes", function () {
            a._song.arrowSkin = a.noteSkinInputText.text;
            a.updateGrid();
          });
          b.add(this.gameOverCharacterInputText);
          b.add(this.gameOverSoundInputText);
          b.add(this.gameOverLoopInputText);
          b.add(this.gameOverEndInputText);
          b.add(c);
          b.add(d);
          b.add(this.noteSkinInputText);
          b.add(this.noteSplashesInputText);
          b.add(new U(this.gameOverCharacterInputText.x, this.gameOverCharacterInputText.y - 15, 0, "Game Over Character Name:"));
          b.add(new U(this.gameOverSoundInputText.x, this.gameOverSoundInputText.y - 15, 0, "Game Over Death Sound (sounds/):"));
          b.add(new U(this.gameOverLoopInputText.x, this.gameOverLoopInputText.y - 15, 0, "Game Over Loop Music (music/):"));
          b.add(new U(this.gameOverEndInputText.x, this.gameOverEndInputText.y - 15, 0, "Game Over Retry Music (music/):"));
          b.add(new U(this.noteSkinInputText.x, this.noteSkinInputText.y - 15, 0, "Note Texture:"));
          b.add(new U(this.noteSplashesInputText.x, this.noteSplashesInputText.y - 15, 0, "Note Splashes Texture:"));
          this.UI_box.addGroup(b);
        },
        loadSong: function () {
          if (h.sound.music != null) {
            var a = h.sound.music;
            a.cleanup(a.autoDestroy, true);
          }
          if (this.vocals != null) {
            a = this.vocals;
            a.cleanup(a.autoDestroy, true);
            this.vocals.destroy();
          }
          if (this.opponentVocals != null) {
            a = this.opponentVocals;
            a.cleanup(a.autoDestroy, true);
            this.opponentVocals.destroy();
          }
          this.vocals = new Zd();
          this.opponentVocals = new Zd();
          a = "songs:assets/songs/" + w.replace(this.currentSongName.toLowerCase(), " ", "-") + "/Voices.mp3";
          this.vocals.loadEmbedded(a ?? "songs:assets/songs/" + w.replace(this.currentSongName.toLowerCase(), " ", "-") + "/Voices.mp3");
          this.vocals.autoDestroy = false;
          h.sound.list.add(this.vocals);
          this.opponentVocals = new Zd();
          a = "songs:assets/songs/" + w.replace(this.currentSongName.toLowerCase(), " ", "-") + "/Voices.mp3";
          if (a != null) {
            this.opponentVocals.loadEmbedded(a);
          }
          this.opponentVocals.autoDestroy = false;
          h.sound.list.add(this.opponentVocals);
          this.generateSong();
          h.sound.music.pause();
          O.songPosition = this.sectionStartTime();
          h.sound.music.set_time(O.songPosition);
          a = 0;
          if (this._song.notes.length <= 1) {
            for (zb.trace("first load ever!!", {
              fileName: "source/states/editors/ChartingState.hx",
              lineNumber: 1533,
              className: "states.editors.ChartingState",
              methodName: "loadSong"
            }); a < h.sound.music._length;) {
              this.addSection();
              a += 60 / this._song.bpm * 4000;
            }
          }
        },
        closeSubState: function () {
          if (this.playtesting) {
            h.sound.music.pause();
            h.sound.music.set_time(this.playtestingTime);
            h.sound.music.onComplete = this.playtestingOnComplete;
            if (this.instVolume != null) {
              h.sound.music.set_volume(this.instVolume.value);
            }
            if (this.check_mute_inst != null && this.check_mute_inst.checked) {
              h.sound.music.set_volume(0);
            }
            if (this.vocals != null) {
              this.vocals.pause();
              this.vocals.set_time(this.playtestingTime);
              if (this.voicesVolume != null) {
                this.vocals.set_volume(this.voicesVolume.value);
              }
              if (this.check_mute_vocals != null && this.check_mute_vocals.checked) {
                this.vocals.set_volume(0);
              }
            }
            if (this.opponentVocals != null) {
              this.opponentVocals.pause();
              this.opponentVocals.set_time(this.playtestingTime);
              if (this.voicesOppVolume != null) {
                this.opponentVocals.set_volume(this.voicesOppVolume.value);
              }
              if (this.check_mute_vocals_opponent != null && this.check_mute_vocals_opponent.checked) {
                this.opponentVocals.set_volume(0);
              }
            }
          }
          P.prototype.closeSubState.call(this);
        },
        generateSong: function () {
          var a = this;
          h.sound.playMusic("songs:assets/songs/" + w.replace(this.currentSongName.toLowerCase(), " ", "-") + "/Inst.mp3", 0.6);
          h.sound.music.autoDestroy = false;
          if (this.instVolume != null) {
            h.sound.music.set_volume(this.instVolume.value);
          }
          if (this.check_mute_inst != null && this.check_mute_inst.checked) {
            h.sound.music.set_volume(0);
          }
          h.sound.music.onComplete = function () {
            h.sound.music.pause();
            O.songPosition = 0;
            if (a.vocals != null) {
              a.vocals.pause();
              a.vocals.set_time(0);
            }
            if (a.opponentVocals != null) {
              a.opponentVocals.pause();
              a.opponentVocals.set_time(0);
            }
            a.changeSection();
            fa.curSec = 0;
            a.updateGrid();
            a.updateSectionUI();
            if (a.vocals != null) {
              a.vocals.play();
            }
            if (a.opponentVocals != null) {
              a.opponentVocals.play();
            }
          };
        },
        generateUI: function () {
          while (this.bullshitUI.members.length > 0) {
            this.bullshitUI.remove(this.bullshitUI.members[0], true);
          }
          var a = new U(this.UI_box.x + 20, this.UI_box.y + 20, 0);
          this.bullshitUI.add(a);
        },
        getEvent: function (a, b, c, d) {
          if (a == "click_check_box") {
            switch (b.getLabel().text) {
              case "Alt Animation":
                this._song.notes[fa.curSec].altAnim = b.checked;
                break;
              case "Change BPM":
                this._song.notes[fa.curSec].changeBPM = b.checked;
                h.log.advanced("changed bpm shit", xa.NORMAL);
                break;
              case "GF section":
                this._song.notes[fa.curSec].gfSection = b.checked;
                this.updateGrid();
                this.updateHeads();
                break;
              case "Must hit section":
                this._song.notes[fa.curSec].mustHitSection = b.checked;
                this.updateGrid();
                this.updateHeads();
            }
          } else if (a == "change_numeric_stepper" && b instanceof Ib) {
            switch (b.name) {
              case "inst_volume":
                h.sound.music.set_volume(b.value);
                if (this.check_mute_inst.checked) {
                  h.sound.music.set_volume(0);
                }
                break;
              case "note_susLength":
                if (this.curSelectedNote != null && this.curSelectedNote[2] != null) {
                  this.curSelectedNote[2] = b.value;
                  this.updateGrid();
                }
                break;
              case "section_beats":
                this._song.notes[fa.curSec].sectionBeats = b.value;
                this.reloadGridLayer();
                break;
              case "section_bpm":
                this._song.notes[fa.curSec].bpm = b.value;
                this.updateGrid();
                break;
              case "song_bpm":
                this._song.bpm = b.value;
                O.mapBPMChanges(this._song);
                O.set_bpm(b.value);
                this.stepperSusLength.stepSize = Math.ceil(O.stepCrochet / 2);
                this.updateGrid();
                break;
              case "song_speed":
                this._song.speed = b.value;
                break;
              case "voices_opp_volume":
                this.opponentVocals.set_volume(b.value);
                if (this.check_mute_vocals_opponent.checked) {
                  this.opponentVocals.set_volume(0);
                }
                break;
              case "voices_volume":
                this.vocals.set_volume(b.value);
                if (this.check_mute_vocals.checked) {
                  this.vocals.set_volume(0);
                }
            }
          } else if (a == "change_input_text" && b instanceof ub) {
            if (b == this.noteSplashesInputText) {
              this._song.splashSkin = this.noteSplashesInputText.text;
            } else if (b == this.noteSkinInputText) {
              this._song.arrowSkin = this.noteSkinInputText.text;
            } else if (b == this.gameOverCharacterInputText) {
              this._song.gameOverChar = this.gameOverCharacterInputText.text;
            } else if (b == this.gameOverSoundInputText) {
              this._song.gameOverSound = this.gameOverSoundInputText.text;
            } else if (b == this.gameOverLoopInputText) {
              this._song.gameOverLoop = this.gameOverLoopInputText.text;
            } else if (b == this.gameOverEndInputText) {
              this._song.gameOverEnd = this.gameOverEndInputText.text;
            } else if (this.curSelectedNote != null) {
              if (b == this.value1InputText) {
                if (this.curSelectedNote[1][this.curEventSelected] != null) {
                  this.curSelectedNote[1][this.curEventSelected][1] = this.value1InputText.text;
                  this.updateGrid();
                }
              } else if (b == this.value2InputText) {
                if (this.curSelectedNote[1][this.curEventSelected] != null) {
                  this.curSelectedNote[1][this.curEventSelected][2] = this.value2InputText.text;
                  this.updateGrid();
                }
              } else if (b == this.strumTimeInputText) {
                a = parseFloat(this.strumTimeInputText.text);
                if (isNaN(a)) {
                  a = 0;
                }
                this.curSelectedNote[0] = a;
                this.updateGrid();
              }
            }
          } else if (a == "change_slider" && b instanceof th && b == "playbackSpeed") {
            this.playbackSpeed = this.sliderRate.value | 0;
          }
        },
        sectionStartTime: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = this._song.bpm;
          var c = 0;
          var d = 0;
          for (a = fa.curSec + a; d < a;) {
            var e = d++;
            if (this._song.notes[e] != null) {
              if (this._song.notes[e].changeBPM) {
                b = this._song.notes[e].bpm;
              }
              c += this.getSectionBeats(e) * (60000 / b);
            }
          }
          return c;
        },
        update: function (a) {
          var b = this;
          this.curStep = this.recalculateSteps();
          if (h.sound.music._time < 0) {
            h.sound.music.pause();
            h.sound.music.set_time(0);
          } else if (h.sound.music._time > h.sound.music._length) {
            h.sound.music.pause();
            h.sound.music.set_time(0);
            this.changeSection();
          }
          O.songPosition = h.sound.music._time;
          this._song.song = this.UI_songTitle.text;
          this.strumLineUpdateY();
          this.strumLineNotes.members[0].set_y(this.strumLine.y);
          this.strumLineNotes.members[1].set_y(this.strumLine.y);
          this.strumLineNotes.members[2].set_y(this.strumLine.y);
          this.strumLineNotes.members[3].set_y(this.strumLine.y);
          this.strumLineNotes.members[4].set_y(this.strumLine.y);
          this.strumLineNotes.members[5].set_y(this.strumLine.y);
          this.strumLineNotes.members[6].set_y(this.strumLine.y);
          this.strumLineNotes.members[7].set_y(this.strumLine.y);
          h.mouse.set_visible(true);
          this.camPos.set_y(this.strumLine.y);
          if (!this.disableAutoScrolling.checked) {
            if (Math.ceil(this.strumLine.y) >= this.gridBG.get_height()) {
              if (this._song.notes[fa.curSec + 1] == null) {
                this.addSection();
              }
              this.changeSection(fa.curSec + 1, false);
            } else if (this.strumLine.y < -10) {
              this.changeSection(fa.curSec - 1, false);
            }
          }
          if (h.mouse.x > this.gridBG.x && h.mouse.x < this.gridBG.x + this.gridBG.get_width() && h.mouse.y > this.gridBG.y && h.mouse.y < this.gridBG.y + fa.GRID_SIZE * this.getSectionBeats() * 4 * this.zoomList[this.curZoom]) {
            this.dummyArrow.set_visible(true);
            this.dummyArrow.set_x(Math.floor(h.mouse.x / fa.GRID_SIZE) * fa.GRID_SIZE);
            var c = h.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(16, c.status)) {
              this.dummyArrow.set_y(h.mouse.y);
            } else {
              c = fa.GRID_SIZE / (fa.quantization / 16);
              this.dummyArrow.set_y(Math.floor(h.mouse.y / c) * c);
            }
          } else {
            this.dummyArrow.set_visible(false);
          }
          if (h.mouse._leftButton.current == 2) {
            if (h.mouse.overlaps(this.curRenderedNotes)) {
              this.curRenderedNotes.forEachAlive(function (a) {
                if (h.mouse.overlaps(a)) {
                  var c = h.keys.pressed;
                  if (c.keyManager.checkStatusUnsafe(17, c.status)) {
                    b.selectNote(a);
                  } else {
                    c = h.keys.pressed;
                    if (c.keyManager.checkStatusUnsafe(18, c.status)) {
                      b.selectNote(a);
                      b.curSelectedNote[3] = b.curNoteTypes[b.currentType];
                      b.updateGrid();
                    } else {
                      b.deleteNote(a);
                    }
                  }
                }
              });
            } else if (h.mouse.x > this.gridBG.x && h.mouse.x < this.gridBG.x + this.gridBG.get_width() && h.mouse.y > this.gridBG.y && h.mouse.y < this.gridBG.y + fa.GRID_SIZE * this.getSectionBeats() * 4 * this.zoomList[this.curZoom]) {
              h.log.advanced("added note", xa.NORMAL);
              this.addNote();
            }
          }
          var d = false;
          c = 0;
          for (var e = this.blockPressWhileTypingOn; c < e.length;) {
            var f = e[c];
            ++c;
            if (f.hasFocus) {
              y.toggleVolumeKeys(false);
              d = true;
              break;
            }
          }
          if (!d) {
            c = 0;
            e = this.blockPressWhileTypingOnStepper;
            while (c < e.length) {
              f = e[c];
              ++c;
              if (va.__cast(f.text_field, ub).hasFocus) {
                y.toggleVolumeKeys(false);
                d = true;
                break;
              }
            }
          }
          if (!d) {
            y.toggleVolumeKeys(true);
            c = 0;
            e = this.blockPressWhileScrolling;
            while (c < e.length) {
              f = e[c];
              ++c;
              if (f.dropPanel.visible) {
                d = true;
                break;
              }
            }
          }
          if (d) {
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(13, c.status)) {
              c = 0;
              e = this.blockPressWhileTypingOn.length;
              while (c < e) {
                q = c++;
                if (this.blockPressWhileTypingOn[q].hasFocus) {
                  this.blockPressWhileTypingOn[q].set_hasFocus(false);
                }
              }
            }
          } else {
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(27, c.status)) {
              if (h.sound.music != null) {
                c = h.sound.music;
                c.cleanup(c.autoDestroy, true);
              }
              if (this.vocals != null) {
                this.vocals.pause();
                this.vocals.set_volume(0);
              }
              if (this.opponentVocals != null) {
                this.opponentVocals.pause();
                this.opponentVocals.set_volume(0);
              }
              this.autosaveSong();
              this.playtesting = true;
              this.playtestingTime = O.songPosition;
              this.playtestingOnComplete = h.sound.music.onComplete;
              this.openSubState(new dn(this.playbackSpeed));
            } else {
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                this.autosaveSong();
                h.mouse.set_visible(false);
                A.SONG = this._song;
                c = h.sound.music;
                c.cleanup(c.autoDestroy, true);
                if (this.vocals != null) {
                  c = this.vocals;
                  c.cleanup(c.autoDestroy, true);
                }
                if (this.opponentVocals != null) {
                  c = this.opponentVocals;
                  c.cleanup(c.autoDestroy, true);
                }
                we.loadDirectory(this._song);
                P.switchState(qc.getNextState(new A(), false));
              }
            }
            if (this.curSelectedNote != null && this.curSelectedNote[1] > -1) {
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(69, c.status)) {
                this.changeNoteSustain(O.stepCrochet);
              }
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(81, c.status)) {
                this.changeNoteSustain(-O.stepCrochet);
              }
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(8, c.status)) {
              this.autosaveSong();
              A.chartingMode = false;
              P.switchState(new Nf());
              c = h.sound;
              d = D.returnSound("music", "freakyMenu", null);
              c.playMusic(d);
              h.mouse.set_visible(false);
              return;
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(90, c.status)) {
              c = h.keys.pressed;
              c = c.keyManager.checkStatusUnsafe(17, c.status);
            } else {
              c = false;
            }
            if (c) {
              this.undo();
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(90, c.status) && this.curZoom > 0) {
              c = h.keys.pressed;
              c = !c.keyManager.checkStatusUnsafe(17, c.status);
            } else {
              c = false;
            }
            if (c) {
              --this.curZoom;
              this.updateZoom();
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(88, c.status) && this.curZoom < this.zoomList.length - 1) {
              this.curZoom++;
              this.updateZoom();
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(9, c.status)) {
              c = h.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(16, c.status)) {
                f = this.UI_box;
                f.set_selected_tab(f.get_selected_tab() - 1);
                if (this.UI_box.get_selected_tab() < 0) {
                  this.UI_box.set_selected_tab(2);
                }
              } else {
                f = this.UI_box;
                f.set_selected_tab(f.get_selected_tab() + 1);
                if (this.UI_box.get_selected_tab() >= 3) {
                  this.UI_box.set_selected_tab(0);
                }
              }
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(32, c.status)) {
              if (this.vocals != null) {
                this.vocals.play();
              }
              if (this.opponentVocals != null) {
                this.opponentVocals.play();
              }
              this.pauseAndSetVocalsTime();
              if (h.sound.music._channel == null) {
                h.sound.music.play();
                if (this.vocals != null) {
                  this.vocals.play();
                }
                if (this.opponentVocals != null) {
                  this.opponentVocals.play();
                }
              } else {
                h.sound.music.pause();
              }
            }
            c = h.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(18, c.status)) {
              c = false;
            } else {
              c = h.keys.justPressed;
              c = c.keyManager.checkStatusUnsafe(82, c.status);
            }
            if (c) {
              c = h.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(16, c.status)) {
                this.resetSection(true);
              } else {
                this.resetSection();
              }
            }
            if (h.mouse.wheel != 0) {
              h.sound.music.pause();
              if (this.mouseQuant) {
                e = this.curDecBeat;
                f = fa.quantization / 4;
                var k = 1 / f;
                if (h.mouse.wheel > 0) {
                  c = Math.round(e * f);
                  h.sound.music.set_time(O.beatToSeconds(c / f - k));
                } else {
                  c = Math.round(e * f);
                  h.sound.music.set_time(O.beatToSeconds(c / f + k));
                }
              } else {
                f = h.sound.music;
                f.set_time(f._time - h.mouse.wheel * O.stepCrochet * 0.8);
              }
              this.pauseAndSetVocalsTime();
            }
            c = h.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(87, c.status)) {
              c = true;
            } else {
              c = h.keys.pressed;
              c = c.keyManager.checkStatusUnsafe(83, c.status);
            }
            if (c) {
              h.sound.music.pause();
              f = 1;
              c = h.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(17, c.status)) {
                f = 0.25;
              } else {
                c = h.keys.pressed;
                if (c.keyManager.checkStatusUnsafe(16, c.status)) {
                  f = 4;
                }
              }
              k = h.elapsed * 700 * f;
              f = h.sound.music;
              c = h.keys.pressed;
              f.set_time(f._time + k * (c.keyManager.checkStatusUnsafe(87, c.status) ? -1 : 1));
              this.pauseAndSetVocalsTime();
            }
            if (!fa.vortex) {
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(38, c.status)) {
                c = true;
              } else {
                c = h.keys.justPressed;
                c = c.keyManager.checkStatusUnsafe(40, c.status);
              }
              if (c) {
                h.sound.music.pause();
                this.updateCurStep();
                e = this.curDecBeat;
                f = fa.quantization / 4;
                k = 1 / f;
                c = h.keys.pressed;
                if (c.keyManager.checkStatusUnsafe(38, c.status)) {
                  c = Math.round(e * f);
                  h.sound.music.set_time(O.beatToSeconds(c / f - k));
                } else {
                  c = Math.round(e * f);
                  h.sound.music.set_time(O.beatToSeconds(c / f + k));
                }
              }
            }
            f = this.currentType;
            c = h.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(16, c.status)) {
              f = 3;
            }
            k = O.songPosition;
            if (!d) {
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(39, c.status)) {
                fa.curQuant++;
                if (fa.curQuant > this.quantizations.length - 1) {
                  fa.curQuant = 0;
                }
                fa.quantization = this.quantizations[fa.curQuant];
              }
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(37, c.status)) {
                fa.curQuant--;
                if (fa.curQuant < 0) {
                  fa.curQuant = this.quantizations.length - 1;
                }
                fa.quantization = this.quantizations[fa.curQuant];
              }
              this.quant.animation.play("q", true, false, fa.curQuant);
            }
            if (fa.vortex && !d) {
              c = h.keys.justPressed;
              e = c.keyManager.checkStatusUnsafe(49, c.status);
              c = h.keys.justPressed;
              var g = c.keyManager.checkStatusUnsafe(50, c.status);
              c = h.keys.justPressed;
              q = c.keyManager.checkStatusUnsafe(51, c.status);
              c = h.keys.justPressed;
              var n = c.keyManager.checkStatusUnsafe(52, c.status);
              c = h.keys.justPressed;
              var p = c.keyManager.checkStatusUnsafe(53, c.status);
              c = h.keys.justPressed;
              var m = c.keyManager.checkStatusUnsafe(54, c.status);
              c = h.keys.justPressed;
              var l = c.keyManager.checkStatusUnsafe(55, c.status);
              c = h.keys.justPressed;
              g = [e, g, q, n, p, m, l, c.keyManager.checkStatusUnsafe(56, c.status)];
              if (g.indexOf(true) != -1) {
                c = 0;
                e = g.length;
                while (c < e) {
                  var q = c++;
                  if (g[q]) {
                    this.doANoteThing(k, q, f);
                  }
                }
              }
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(38, c.status)) {
                c = true;
              } else {
                c = h.keys.justPressed;
                c = c.keyManager.checkStatusUnsafe(40, c.status);
              }
              if (c && (h.sound.music.pause(), this.updateCurStep(), e = this.curDecBeat, f = fa.quantization / 4, k = 1 / f, c = h.keys.pressed, c.keyManager.checkStatusUnsafe(38, c.status) ? (c = Math.round(e * f), c = O.beatToSeconds(c / f - k)) : (c = Math.round(e * f), c = O.beatToSeconds(c / f + k)), Da.tween(h.sound.music, {
                time: c
              }, 0.1, {
                ease: Xa.circOut
              }), this.pauseAndSetVocalsTime(), d = 0, this.curSelectedNote != null && (d = this.curSelectedNote[0]), f = this.sectionStartTime(), d = c - f - (d - f), this.curSelectedNote != null && (c = h.keys.pressed, e = c.keyManager.checkStatusUnsafe(49, c.status), c = h.keys.pressed, g = c.keyManager.checkStatusUnsafe(50, c.status), c = h.keys.pressed, q = c.keyManager.checkStatusUnsafe(51, c.status), c = h.keys.pressed, n = c.keyManager.checkStatusUnsafe(52, c.status), c = h.keys.pressed, p = c.keyManager.checkStatusUnsafe(53, c.status), c = h.keys.pressed, m = c.keyManager.checkStatusUnsafe(54, c.status), c = h.keys.pressed, l = c.keyManager.checkStatusUnsafe(55, c.status), c = h.keys.pressed, g = [e, g, q, n, p, m, l, c.keyManager.checkStatusUnsafe(56, c.status)], g.indexOf(true) != -1))) {
                c = 0;
                for (e = g.length; c < e;) {
                  q = c++;
                  if (g[q] && this.curSelectedNote[1] == q) {
                    this.curSelectedNote[2] += d - this.curSelectedNote[2] - O.stepCrochet;
                  }
                }
                this.updateGrid();
                this.updateNoteUI();
              }
            }
            d = 1;
            c = h.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(16, c.status)) {
              d = 4;
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(68, c.status)) {
              this.changeSection(fa.curSec + d);
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(65, c.status)) {
              if (fa.curSec <= 0) {
                this.changeSection(this._song.notes.length - 1);
              } else {
                this.changeSection(fa.curSec - d);
              }
            }
          }
          this.strumLineNotes.set_visible(this.quant.set_visible(fa.vortex));
          if (h.sound.music._time < 0) {
            h.sound.music.pause();
            h.sound.music.set_time(0);
          } else if (h.sound.music._time > h.sound.music._length) {
            h.sound.music.pause();
            h.sound.music.set_time(0);
            this.changeSection();
          }
          O.songPosition = h.sound.music._time;
          this.strumLineUpdateY();
          this.camPos.set_y(this.strumLine.y);
          this.strumLineNotes.members[0].set_y(this.strumLine.y);
          this.strumLineNotes.members[0].set_alpha(h.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[1].set_y(this.strumLine.y);
          this.strumLineNotes.members[1].set_alpha(h.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[2].set_y(this.strumLine.y);
          this.strumLineNotes.members[2].set_alpha(h.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[3].set_y(this.strumLine.y);
          this.strumLineNotes.members[3].set_alpha(h.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[4].set_y(this.strumLine.y);
          this.strumLineNotes.members[4].set_alpha(h.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[5].set_y(this.strumLine.y);
          this.strumLineNotes.members[5].set_alpha(h.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[6].set_y(this.strumLine.y);
          this.strumLineNotes.members[6].set_alpha(h.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[7].set_y(this.strumLine.y);
          this.strumLineNotes.members[7].set_alpha(h.sound.music._channel != null ? 1 : 0.35);
          c = h.keys.pressed;
          f = c.keyManager.checkStatusUnsafe(16, c.status);
          c = h.keys.pressed;
          d = c.keyManager.checkStatusUnsafe(219, c.status);
          c = h.keys.pressed;
          k = c.keyManager.checkStatusUnsafe(221, c.status);
          c = h.keys.justPressed;
          e = c.keyManager.checkStatusUnsafe(219, c.status);
          c = h.keys.justPressed;
          g = c.keyManager.checkStatusUnsafe(221, c.status);
          if (!f && e || f && d) {
            this.playbackSpeed -= 0.01;
          }
          if (!f && g || f && k) {
            this.playbackSpeed += 0.01;
          }
          c = h.keys.pressed;
          if (c.keyManager.checkStatusUnsafe(18, c.status) && (e || g || d || k)) {
            this.playbackSpeed = 1;
          }
          if (this.playbackSpeed <= 0.5) {
            this.playbackSpeed = 0.5;
          }
          if (this.playbackSpeed >= 3) {
            this.playbackSpeed = 3;
          }
          h.sound.music.set_pitch(this.playbackSpeed);
          this.vocals.set_pitch(this.playbackSpeed);
          this.opponentVocals.set_pitch(this.playbackSpeed);
          this.bpmTxt.set_text(v.string(bc.roundDecimal(O.songPosition / 1000, 2)) + " / " + v.string(bc.roundDecimal(h.sound.music._length / 1000, 2)) + "\nSection: " + fa.curSec + "\n\nBeat: " + v.string(this.curDecBeat).substring(0, 4) + "\n\nStep: " + this.curStep + "\n\nBeat Snap: " + fa.quantization + "th");
          var u = [false, false, false, false];
          this.curRenderedNotes.forEachAlive(function (c) {
            c.set_alpha(1);
            if (b.curSelectedNote != null) {
              var d = c.noteData;
              if (d > -1 && c.mustPress != b._song.notes[fa.curSec].mustHitSection) {
                d += 4;
              }
              if (b.curSelectedNote[0] == c.strumTime && (b.curSelectedNote[2] == null && d < 0 || b.curSelectedNote[2] != null && b.curSelectedNote[1] == d)) {
                b.colorSine += a;
                var e = 0.7 + Math.sin(Math.PI * b.colorSine) * 0.3;
                var f = 0.999;
                if (f == null) {
                  f = 1;
                }
                d = eb._new();
                if (f == null) {
                  f = 1;
                }
                var k = Math.round(e * 255);
                d = d & -16711681 | (k > 255 ? 255 : k < 0 ? 0 : k) << 16;
                k = Math.round(e * 255);
                d = d & -65281 | (k > 255 ? 255 : k < 0 ? 0 : k) << 8;
                k = Math.round(e * 255);
                d = d & -256 | (k > 255 ? 255 : k < 0 ? 0 : k);
                k = Math.round(f * 255);
                c.set_color(d & 16777215 | (k > 255 ? 255 : k < 0 ? 0 : k) << 24);
              }
            }
            if (c.strumTime <= O.songPosition) {
              c.set_alpha(0.4);
              if (c.strumTime > b.lastConductorPos && h.sound.music._channel != null && c.noteData > -1) {
                e = c.noteData % 4;
                d = c.noteData;
                if (d > -1 && c.mustPress != b._song.notes[fa.curSec].mustHitSection) {
                  d += 4;
                }
                b.strumLineNotes.members[d].playAnim("confirm", true);
                b.strumLineNotes.members[d].resetAnim = (c.sustainLength / 1000 + 0.15) / b.playbackSpeed;
                if (!u[e] && c.hitsoundChartEditor && (b.playSoundBf.checked && c.mustPress || b.playSoundDad.checked && !c.mustPress)) {
                  d = c.hitsound;
                  if (b._song.player1 == "gf") {
                    d = "GF_" + v.string(e + 1);
                  }
                  d = h.sound.play(D.sound(d));
                  d._transform.pan = c.noteData < 4 ? -0.3 : 0.3;
                  d.updateTransform();
                  u[e] = true;
                }
              }
            }
          });
          if (this.metronome.checked && this.lastConductorPos != O.songPosition) {
            c = 60 / this.metronomeStepper.value;
            if (Math.floor((O.songPosition + this.metronomeOffsetStepper.value) / c / 1000) != Math.floor((this.lastConductorPos + this.metronomeOffsetStepper.value) / c / 1000)) {
              h.sound.play(D.sound("Metronome_Tick"));
            }
          }
          this.lastConductorPos = O.songPosition;
          P.prototype.update.call(this, a);
        },
        pauseAndSetVocalsTime: function () {
          if (this.vocals != null) {
            this.vocals.pause();
            this.vocals.set_time(h.sound.music._time);
          }
          if (this.opponentVocals != null) {
            this.opponentVocals.pause();
            this.opponentVocals.set_time(h.sound.music._time);
          }
        },
        updateZoom: function () {
          var a = this.zoomList[this.curZoom];
          var b = "1 / " + a;
          if (a < 1) {
            b = Math.round(1 / a) + " / 1";
          }
          this.zoomTxt.set_text("Zoom: " + b);
          this.reloadGridLayer();
        },
        destroy: function () {
          Na.globalRgbShaders = [];
          Ri.clearNoteTypesData();
          P.prototype.destroy.call(this);
        },
        reloadGridLayer: function () {
          this.gridLayer.clear();
          this.gridBG = oh.create(1, 1, this.columns, this.getSectionBeats() * 4 * this.zoomList[this.curZoom] | 0);
          this.gridBG.set_antialiasing(false);
          var a = this.gridBG.scale;
          var b = fa.GRID_SIZE;
          var c = fa.GRID_SIZE;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this.gridBG.updateHitbox();
          a = this.gridBG.get_height() | 0;
          b = false;
          if (this.sectionStartTime(1) <= h.sound.music._length) {
            this.nextGridBG = oh.create(1, 1, this.columns, this.getSectionBeats(fa.curSec + 1) * 4 * this.zoomList[this.curZoom] | 0);
            this.nextGridBG.set_antialiasing(false);
            a = this.nextGridBG.scale;
            c = b = fa.GRID_SIZE;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            this.nextGridBG.updateHitbox();
            a = this.gridBG.get_height() + this.nextGridBG.get_height() | 0;
            b = true;
          } else {
            this.nextGridBG = new F().makeGraphic(1, 1, 0);
          }
          this.nextGridBG.set_y(this.gridBG.get_height());
          this.gridLayer.add(this.nextGridBG);
          this.gridLayer.add(this.gridBG);
          if (b) {
            b = new F(0, this.gridBG.get_height()).makeGraphic(1, 1, -16777216);
            b.setGraphicSize(fa.GRID_SIZE * 9 | 0, this.nextGridBG.get_height() | 0);
            b.updateHitbox();
            b.set_antialiasing(false);
            b.set_alpha(0.4);
            this.gridLayer.add(b);
          }
          b = new F(this.gridBG.x + this.gridBG.get_width() - fa.GRID_SIZE * 4).makeGraphic(1, 1, -16777216);
          b.setGraphicSize(2, a);
          b.updateHitbox();
          b.set_antialiasing(false);
          this.gridLayer.add(b);
          b = 1;
          for (c = this.getSectionBeats() | 0; b < c;) {
            var d = b++;
            d = new F(this.gridBG.x, fa.GRID_SIZE * 4 * this.zoomList[this.curZoom] * d).makeGraphic(1, 1, 1157562368);
            d.scale.set_x(this.gridBG.get_width());
            d.updateHitbox();
            if (fa.vortex) {
              this.gridLayer.add(d);
            }
          }
          b = new F(this.gridBG.x + fa.GRID_SIZE).makeGraphic(1, 1, -16777216);
          b.setGraphicSize(2, a);
          b.updateHitbox();
          b.set_antialiasing(false);
          this.gridLayer.add(b);
          this.updateGrid();
          this.lastSecBeats = this.getSectionBeats();
          if (this.sectionStartTime(1) > h.sound.music._length) {
            this.lastSecBeatsNext = 0;
          } else {
            this.getSectionBeats(fa.curSec + 1);
          }
        },
        strumLineUpdateY: function () {
          this.strumLine.set_y(this.getYfromStrum((O.songPosition - this.sectionStartTime()) / (this.zoomList[this.curZoom] % (O.stepCrochet * 16))) / (this.getSectionBeats() / 4));
        },
        updateWaveform: function () {},
        waveformData: function (a, b, c, d, e, f, h) {
          return [[[0], [0]], [[0], [0]]];
        },
        changeNoteSustain: function (a) {
          if (this.curSelectedNote != null && this.curSelectedNote[2] != null) {
            this.curSelectedNote[2] += Math.ceil(a);
            this.curSelectedNote[2] = Math.max(this.curSelectedNote[2], 0);
          }
          this.updateNoteUI();
          this.updateGrid();
        },
        recalculateSteps: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = {
            stepTime: 0,
            songTime: 0,
            bpm: 0
          };
          for (var c = 0, d = O.bpmChangeMap.length; c < d;) {
            var e = c++;
            if (h.sound.music._time > O.bpmChangeMap[e].songTime) {
              b = O.bpmChangeMap[e];
            }
          }
          this.curStep = b.stepTime + Math.floor((h.sound.music._time - b.songTime + a) / O.stepCrochet);
          this.updateBeat();
          return this.curStep;
        },
        resetSection: function (a) {
          if (a == null) {
            a = false;
          }
          this.updateGrid();
          h.sound.music.pause();
          h.sound.music.set_time(this.sectionStartTime());
          if (a) {
            h.sound.music.set_time(0);
            fa.curSec = 0;
          }
          this.pauseAndSetVocalsTime();
          this.updateCurStep();
          this.updateGrid();
          this.updateSectionUI();
          this.updateWaveform();
        },
        changeSection: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a == null) {
            a = 0;
          }
          var c = false;
          if (this._song.notes[a] != null) {
            fa.curSec = a;
            if (b) {
              h.sound.music.pause();
              h.sound.music.set_time(this.sectionStartTime());
              this.pauseAndSetVocalsTime();
              this.updateCurStep();
            }
            a = this.getSectionBeats();
            b = this.getSectionBeats(fa.curSec + 1);
            if (this.sectionStartTime(1) > h.sound.music._length) {
              b = 0;
            }
            if (a != this.lastSecBeats || b != this.lastSecBeatsNext) {
              this.reloadGridLayer();
              c = true;
            } else {
              this.updateGrid();
            }
            this.updateSectionUI();
          } else {
            this.changeSection();
          }
          O.songPosition = h.sound.music._time;
          if (!c) {
            this.updateWaveform();
          }
        },
        updateSectionUI: function () {
          var a = this._song.notes[fa.curSec];
          this.stepperBeats.set_value(this.getSectionBeats());
          this.check_mustHitSection.set_checked(a.mustHitSection);
          this.check_gfSection.set_checked(a.gfSection);
          this.check_altAnim.set_checked(a.altAnim);
          this.check_changeBPM.set_checked(a.changeBPM);
          this.stepperSectionBPM.set_value(a.bpm);
          this.updateHeads();
        },
        updateJsonData: function () {
          var a = this.loadCharacterFile(ja.field(this._song, "player1"));
          this.characterData.iconP1 = this.characterFailed ? "face" : a.healthicon;
          this.characterData.vocalsP1 = a.vocals_file ?? "";
          a = this.loadCharacterFile(ja.field(this._song, "player2"));
          this.characterData.iconP2 = this.characterFailed ? "face" : a.healthicon;
          this.characterData.vocalsP2 = a.vocals_file ?? "";
        },
        updateHeads: function () {
          if (this._song.notes[fa.curSec].mustHitSection) {
            this.leftIcon.changeIcon(this.characterData.iconP1);
            this.rightIcon.changeIcon(this.characterData.iconP2);
          } else {
            this.leftIcon.changeIcon(this.characterData.iconP2);
            this.rightIcon.changeIcon(this.characterData.iconP1);
          }
          if (this._song.notes[fa.curSec].gfSection) {
            this.leftIcon.changeIcon("gf");
          }
        },
        loadCharacterFile: function (a) {
          this.characterFailed = false;
          a = "characters/" + a + ".json";
          if (a == null) {
            a = "";
          }
          a = "assets/shared/" + a;
          if (!Q.exists(a)) {
            a = "characters/" + id.DEFAULT_CHARACTER + ".json";
            if (a == null) {
              a = "";
            }
            a = "assets/shared/" + a;
            this.characterFailed = true;
          }
          a = Q.getText(a);
          return JSON.parse(a);
        },
        updateNoteUI: function () {
          if (this.curSelectedNote != null) {
            if (this.curSelectedNote[2] != null) {
              this.stepperSusLength.set_value(this.curSelectedNote[2]);
              if (this.curSelectedNote[3] != null) {
                this.currentType = this.curNoteTypes.indexOf(this.curSelectedNote[3]);
                if (this.currentType <= 0) {
                  this.noteTypeDropDown.set_selectedLabel("");
                } else {
                  this.noteTypeDropDown.set_selectedLabel(this.currentType + ". " + v.string(this.curSelectedNote[3]));
                }
              }
            } else {
              this.eventDropDown.set_selectedLabel(this.curSelectedNote[1][this.curEventSelected][0]);
              var a = v.parseInt(this.eventDropDown.get_selectedId());
              if (a > 0 && a < this.eventStuff.length) {
                this.descText.set_text(this.eventStuff[a][1]);
              }
              this.value1InputText.set_text(this.curSelectedNote[1][this.curEventSelected][1]);
              this.value2InputText.set_text(this.curSelectedNote[1][this.curEventSelected][2]);
            }
            this.strumTimeInputText.set_text("" + v.string(this.curSelectedNote[0]));
          }
        },
        updateGrid: function () {
          this.curRenderedNotes.forEachAlive(function (a) {
            a.destroy();
          });
          this.curRenderedNotes.clear();
          this.curRenderedSustains.forEachAlive(function (a) {
            a.destroy();
          });
          this.curRenderedSustains.clear();
          this.curRenderedNoteType.forEachAlive(function (a) {
            a.destroy();
          });
          this.curRenderedNoteType.clear();
          this.nextRenderedNotes.forEachAlive(function (a) {
            a.destroy();
          });
          this.nextRenderedNotes.clear();
          this.nextRenderedSustains.forEachAlive(function (a) {
            a.destroy();
          });
          this.nextRenderedSustains.clear();
          if (this._song.notes[fa.curSec].changeBPM && this._song.notes[fa.curSec].bpm > 0) {
            O.set_bpm(this._song.notes[fa.curSec].bpm);
          } else {
            var a = this._song.bpm;
            for (var b = 0, c = fa.curSec; b < c;) {
              var d = b++;
              if (this._song.notes[d].changeBPM) {
                a = this._song.notes[d].bpm;
              }
            }
            O.set_bpm(a);
          }
          var e = this.getSectionBeats();
          b = 0;
          for (c = this._song.notes[fa.curSec].sectionNotes; b < c.length;) {
            d = c[b];
            ++b;
            a = this.setupNoteData(d, false);
            this.curRenderedNotes.add(a);
            if (a.sustainLength > 0) {
              this.curRenderedSustains.add(this.setupSusNote(a, e));
            }
            var f = this.curNoteTypes.indexOf(d[3]);
            var h = "" + f;
            if (f < 0) {
              h = "?";
            }
            f = new ek(0, 0, 100, h, 24);
            f.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", Sa.OUTLINE_FAST, -16777216);
            f.xAdd = -32;
            f.yAdd = 6;
            f.set_borderSize(1);
            f.set_text(v.string(d[1]));
            this.curRenderedNoteType.add(f);
            f.sprTracker = a;
            a.mustPress = this._song.notes[fa.curSec].mustHitSection;
            if (d[1] > 3) {
              a.mustPress = !a.mustPress;
            }
          }
          e = this.sectionStartTime();
          h = this.sectionStartTime(1);
          b = 0;
          for (c = this._song.events; b < c.length;) {
            d = c[b];
            ++b;
            if (h > d[0] && d[0] >= e) {
              a = this.setupNoteData(d, false);
              this.curRenderedNotes.add(a);
              d = "Event: " + a.eventName + " (" + Math.floor(a.strumTime) + " ms)\nValue 1: " + a.eventVal1 + "\nValue 2: " + a.eventVal2;
              if (a.eventLength > 1) {
                d = a.eventLength + " Events:\n" + a.eventName;
              }
              f = new ek(0, 0, 400, d, 12);
              f.setFormat("assets/fonts/vcr.ttf", 12, -1, "right", Sa.OUTLINE_FAST, -16777216);
              f.xAdd = -410;
              f.set_borderSize(1);
              if (a.eventLength > 1) {
                f.yAdd += 8;
              }
              this.curRenderedNoteType.add(f);
              f.sprTracker = a;
            }
          }
          e = this.getSectionBeats(1);
          if (fa.curSec < this._song.notes.length - 1) {
            b = 0;
            c = this._song.notes[fa.curSec + 1].sectionNotes;
            while (b < c.length) {
              d = c[b];
              ++b;
              a = this.setupNoteData(d, true);
              a.set_alpha(0.6);
              this.nextRenderedNotes.add(a);
              if (a.sustainLength > 0) {
                this.nextRenderedSustains.add(this.setupSusNote(a, e));
              }
            }
          }
          e = this.sectionStartTime(1);
          h = this.sectionStartTime(2);
          b = 0;
          for (c = this._song.events; b < c.length;) {
            d = c[b];
            ++b;
            if (h > d[0] && d[0] >= e) {
              a = this.setupNoteData(d, true);
              a.set_alpha(0.6);
              this.nextRenderedNotes.add(a);
            }
          }
        },
        setupNoteData: function (a, b) {
          var c = a[1];
          var d = a[0];
          var e = a[2];
          var f = new Na(d, c % 4, null, null, true);
          if (e != null) {
            if (typeof a[3] != "string") {
              a[3] = this.curNoteTypes[a[3]];
            }
            if (a.length > 3 && (a[3] == null || a[3].length < 1)) {
              r.remove(a, a[3]);
            }
            f.sustainLength = e;
            f.set_noteType(a[3]);
          } else {
            f.loadGraphic(D.image("eventArrow"));
            f.eventName = this.getEventName(a[1]);
            f.eventLength = a[1].length;
            if (a[1].length < 2) {
              f.eventVal1 = a[1][0][1];
              f.eventVal2 = a[1][0][2];
            }
            c = f.noteData = -1;
          }
          f.setGraphicSize(fa.GRID_SIZE, fa.GRID_SIZE);
          f.updateHitbox();
          f.set_x(Math.floor(c * fa.GRID_SIZE) + fa.GRID_SIZE);
          if (b && this._song.notes[fa.curSec].mustHitSection != this._song.notes[fa.curSec + 1].mustHitSection) {
            if (c > 3) {
              f.set_x(f.x - fa.GRID_SIZE * 4);
            } else if (e != null) {
              f.set_x(f.x + fa.GRID_SIZE * 4);
            }
          }
          a = this.getSectionBeats(b ? 1 : 0);
          f.set_y(this.getYfromStrumNotes(d - this.sectionStartTime(), a));
          if (f.y < -150) {
            f.set_y(-150);
          }
          return f;
        },
        getEventName: function (a) {
          var b = "";
          var c = false;
          for (var d = 0, e = a.length; d < e;) {
            var f = d++;
            if (c) {
              b += ", ";
            }
            b += a[f][0];
            c = true;
          }
          return b;
        },
        setupSusNote: function (a, b) {
          b = Math.floor(bc.remapToRange(a.sustainLength, 0, O.stepCrochet * 16, 0, fa.GRID_SIZE * 16 * this.zoomList[this.curZoom]) + fa.GRID_SIZE * this.zoomList[this.curZoom] - fa.GRID_SIZE / 2);
          var c = fa.GRID_SIZE * this.zoomList[this.curZoom] / 2 + fa.GRID_SIZE / 2 | 0;
          if (b < c) {
            b = c;
          }
          if (b < 1) {
            b = 1;
          }
          return new F(a.x + fa.GRID_SIZE * 0.5 - 4, a.y + fa.GRID_SIZE / 2).makeGraphic(8, b);
        },
        addSection: function (a) {
          if (a == null) {
            a = 4;
          }
          this._song.notes.push({
            sectionBeats: a,
            bpm: this._song.bpm,
            changeBPM: false,
            mustHitSection: true,
            gfSection: false,
            sectionNotes: [],
            altAnim: false
          });
        },
        selectNote: function (a) {
          var b = a.noteData;
          if (b > -1) {
            if (a.mustPress != this._song.notes[fa.curSec].mustHitSection) {
              b += 4;
            }
            for (var c = 0, d = this._song.notes[fa.curSec].sectionNotes; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != this.curSelectedNote && e.length > 2 && e[0] == a.strumTime && e[1] == b) {
                this.curSelectedNote = e;
                break;
              }
            }
          } else {
            c = 0;
            d = this._song.events;
            while (c < d.length) {
              e = d[c];
              ++c;
              if (e != this.curSelectedNote && e[0] == a.strumTime) {
                this.curSelectedNote = e;
                this.curEventSelected = (this.curSelectedNote[1].length | 0) - 1;
                break;
              }
            }
          }
          this.changeEventSelected();
          this.updateGrid();
          this.updateNoteUI();
        },
        deleteNote: function (a) {
          var b = a.noteData;
          if (b > -1 && a.mustPress != this._song.notes[fa.curSec].mustHitSection) {
            b += 4;
          }
          if (a.noteData > -1) {
            for (var c = 0, d = this._song.notes[fa.curSec].sectionNotes; c < d.length;) {
              var e = d[c];
              ++c;
              if (e[0] == a.strumTime && e[1] == b) {
                if (e == this.curSelectedNote) {
                  this.curSelectedNote = null;
                }
                r.remove(this._song.notes[fa.curSec].sectionNotes, e);
                break;
              }
            }
          } else {
            c = 0;
            d = this._song.events;
            while (c < d.length) {
              e = d[c];
              ++c;
              if (e[0] == a.strumTime) {
                if (e == this.curSelectedNote) {
                  this.curSelectedNote = null;
                  this.changeEventSelected();
                }
                r.remove(this._song.events, e);
                break;
              }
            }
          }
          this.updateGrid();
        },
        doANoteThing: function (a, b, c) {
          var d = this;
          var e = false;
          if (this.strumLineNotes.members[b].overlaps(this.curRenderedNotes)) {
            this.curRenderedNotes.forEachAlive(function (a) {
              var c = d.strumLineNotes.members[b].x + 1;
              var f = d.strumLine.y + 1;
              if (f == null) {
                f = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (c == null) {
                c = 0;
              }
              c = W.pool.get().set(c, f);
              c._inPool = false;
              if (a.overlapsPoint(c) && a.noteData == b % 4) {
                if (!e) {
                  d.deleteNote(a);
                }
                e = true;
              }
            });
          }
          if (!e) {
            this.addNote(a, b, c);
          }
        },
        clearSong: function () {
          for (var a = 0, b = this._song.notes.length; a < b;) {
            var c = a++;
            this._song.notes[c].sectionNotes = [];
          }
          this.updateGrid();
        },
        addNote: function (a, b, c) {
          var d = this.getStrumTime(this.dummyArrow.y * (this.getSectionBeats() / 4), false) + this.sectionStartTime();
          var e = Math.floor((h.mouse.x - fa.GRID_SIZE) / fa.GRID_SIZE);
          var f = this.currentType;
          if (a != null) {
            d = a;
          }
          if (b != null) {
            e = b;
          }
          if (c != null) {
            f = c;
          }
          if (e > -1) {
            this._song.notes[fa.curSec].sectionNotes.push([d, e, 0, this.curNoteTypes[f]]);
            this.curSelectedNote = this._song.notes[fa.curSec].sectionNotes[this._song.notes[fa.curSec].sectionNotes.length - 1];
          } else {
            a = this.eventStuff[v.parseInt(this.eventDropDown.get_selectedId())][0];
            this._song.events.push([d, [[a, this.value1InputText.text, this.value2InputText.text]]]);
            this.curSelectedNote = this._song.events[this._song.events.length - 1];
            this.curEventSelected = 0;
          }
          this.changeEventSelected();
          a = h.keys.pressed;
          if (a.keyManager.checkStatusUnsafe(17, a.status) && e > -1) {
            this._song.notes[fa.curSec].sectionNotes.push([d, (e + 4) % 8, 0, this.curNoteTypes[f]]);
          }
          this.strumTimeInputText.set_text("" + v.string(this.curSelectedNote[0]));
          this.updateGrid();
          this.updateNoteUI();
        },
        redo: function () {},
        undo: function () {
          this.undos.pop();
        },
        getStrumTime: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this.zoomList[this.curZoom];
          if (!b) {
            c = 1;
          }
          return bc.remapToRange(a, this.gridBG.y, this.gridBG.y + this.gridBG.get_height() * c, 0, O.stepCrochet * 16);
        },
        getYfromStrum: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this.zoomList[this.curZoom];
          if (!b) {
            c = 1;
          }
          return bc.remapToRange(a, 0, O.stepCrochet * 16, this.gridBG.y, this.gridBG.y + this.gridBG.get_height() * c);
        },
        getYfromStrumNotes: function (a, b) {
          return a / (b * 4 * O.stepCrochet) * b * 4 * this.zoomList[this.curZoom] * fa.GRID_SIZE + this.gridBG.y;
        },
        getNotes: function () {
          var a = [];
          for (var b = 0, c = this._song.notes; b < c.length;) {
            var d = c[b];
            ++b;
            a.push(d.sectionNotes);
          }
          return a;
        },
        loadJson: function (a) {
          var b = this;
          try {
            var c = null;
            if (nb.list[c == null ? A.storyDifficulty : c] != nb.defaultDifficulty) {
              c = null;
              if (nb.list[c == null ? A.storyDifficulty : c] == null) {
                A.SONG = Md.loadFromJson(a.toLowerCase(), a.toLowerCase());
              } else {
                c = null;
                A.SONG = Md.loadFromJson(a.toLowerCase() + "-" + nb.list[c == null ? A.storyDifficulty : c], a.toLowerCase());
              }
            } else {
              A.SONG = Md.loadFromJson(a.toLowerCase(), a.toLowerCase());
            }
            P.resetState();
          } catch (d) {
            a = G.caught(d);
            zb.trace("ERROR! " + v.string(a), {
              fileName: "source/states/editors/ChartingState.hx",
              lineNumber: 3386,
              className: "states.editors.ChartingState",
              methodName: "loadJson"
            });
            a = a.toString();
            if (w.startsWith(a, "[file_contents,assets/data/")) {
              a = "Missing file: " + a.substring(27, a.length - 1);
            }
            if (this.missingText == null) {
              this.missingText = new U(50, 0, h.width - 100, "", 24);
              this.missingText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", Sa.OUTLINE, -16777216);
              c = this.missingText.scrollFactor;
              c.set_x(0);
              c.set_y(0);
              this.add(this.missingText);
            } else {
              this.missingTextTimer.cancel();
            }
            this.missingText.set_text("ERROR WHILE LOADING CHART:\n" + a);
            a = this.missingText;
            c = 16;
            if (c == null) {
              c = 17;
            }
            if (c == 1 || c == 17) {
              a.set_x((h.width - a.get_width()) / 2);
            }
            if (c == 16 || c == 17) {
              a.set_y((h.height - a.get_height()) / 2);
            }
            this.missingTextTimer = new Ec().start(5, function (a) {
              b.remove(b.missingText);
              b.missingText.destroy();
            });
            h.sound.play(D.sound("cancelMenu"));
          }
        },
        autosaveSong: function () {
          h.save.data.autosave = JSON.stringify({
            song: this._song
          });
          h.save.flush();
        },
        clearEvents: function () {
          this._song.events = [];
          this.updateGrid();
        },
        saveLevel: function () {
          if (this._song.events != null && this._song.events.length > 1) {
            this._song.events.sort(m(this, this.sortByTime));
          }
          var a = JSON.stringify({
            song: this._song
          }, null, "\t");
          if (a != null && a.length > 0) {
            this._file = new Fe();
            this._file.addEventListener("complete", m(this, this.onSaveComplete));
            this._file.addEventListener("cancel", m(this, this.onSaveCancel));
            this._file.addEventListener("ioError", m(this, this.onSaveError));
            var b = this._file;
            a = w.trim(a);
            var c = this._song.song;
            var d = new V("[~&\\\\;:<>#]", "");
            var e = new V("[.,'\"%?!]", "");
            c = d.split(w.replace(c, " ", "-")).join("-");
            b.save(a, e.split(c).join("").toLowerCase() + ".json");
          }
        },
        sortByTime: function (a, b) {
          a = a[0];
          b = b[0];
          var c = 0;
          if (a < b) {
            c = -1;
          } else if (a > b) {
            c = 1;
          }
          return c;
        },
        saveEvents: function () {
          if (this._song.events != null && this._song.events.length > 1) {
            this._song.events.sort(m(this, this.sortByTime));
          }
          var a = JSON.stringify({
            song: {
              events: this._song.events
            }
          }, null, "\t");
          if (a != null && a.length > 0) {
            this._file = new Fe();
            this._file.addEventListener("complete", m(this, this.onSaveComplete));
            this._file.addEventListener("cancel", m(this, this.onSaveCancel));
            this._file.addEventListener("ioError", m(this, this.onSaveError));
            this._file.save(w.trim(a), "events.json");
          }
        },
        onSaveComplete: function (a) {
          this._file.removeEventListener("complete", m(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", m(this, this.onSaveError));
          this._file = null;
          h.log.advanced("Successfully saved LEVEL DATA.", xa.NOTICE);
        },
        onSaveCancel: function (a) {
          this._file.removeEventListener("complete", m(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", m(this, this.onSaveError));
          this._file = null;
        },
        onSaveError: function (a) {
          this._file.removeEventListener("complete", m(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", m(this, this.onSaveError));
          this._file = null;
          h.log.advanced("Problem saving Level data", xa.ERROR, true);
        },
        getSectionBeats: function (a) {
          if (a == null) {
            a = fa.curSec;
          }
          var b = null;
          if (this._song.notes[a] != null) {
            b = this._song.notes[a].sectionBeats;
          }
          return b ?? 4;
        },
        __class__: fa
      });
      function ek(a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 8;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.xAdd = this.yAdd = 0;
        U.call(this, a, b, c, d, e, f);
      }
      g["states.editors.AttachedFlxText"] = ek;
      ek.__name__ = "states.editors.AttachedFlxText";
      ek.__super__ = U;
      ek.prototype = q(U.prototype, {
        update: function (a) {
          U.prototype.update.call(this, a);
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x + this.xAdd, this.sprTracker.y + this.yAdd);
            this.set_angle(this.sprTracker.angle);
            this.set_alpha(this.sprTracker.alpha);
          }
        },
        __class__: ek
      });
      function Of(a, b) {
        this._file = null;
        this.transitioning = false;
        this.lastTab = "Character";
        this.currentGhosts = 0;
        this.blockPressWhileTypingOn = [];
        this.animationArray = [];
        this.curAnim = 0;
        this.daText = null;
        P.call(this, a, b);
      }
      g["states.editors.DialogueCharacterEditorState"] = Of;
      Of.__name__ = "states.editors.DialogueCharacterEditorState";
      Of.__super__ = P;
      Of.prototype = q(P.prototype, {
        create: function () {
          this.persistentUpdate = this.persistentDraw = true;
          this.camGame = this.initPsychCamera();
          var a = eb._new();
          var b = 0;
          var c = b * 0 + 0.5;
          var d = 1;
          if (d == null) {
            d = 1;
          }
          b = Math.round((b + 0.5) * 255);
          a = a & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16;
          b = Math.round(c * 255);
          a = a & -65281 | (b > 255 ? 255 : b < 0 ? 0 : b) << 8;
          b = 128;
          a = a & -256 | (b > 255 ? 255 : b < 0 ? 0 : b);
          b = Math.round(d * 255);
          this.camGame.bgColor = a & 16777215 | (b > 255 ? 255 : b < 0 ? 0 : b) << 24;
          this.camHUD = new Tb();
          this.camHUD.bgColor &= 16777215;
          this.camHUD.bgColor |= 0;
          h.cameras.add(this.camHUD, false);
          this.mainGroup = new La();
          this.mainGroup.set_cameras([this.camGame]);
          this.hudGroup = new La();
          this.hudGroup.set_cameras([this.camGame]);
          this.add(this.mainGroup);
          this.add(this.hudGroup);
          this.character = new kd();
          a = this.character.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.mainGroup.add(this.character);
          this.ghostLoop = new kd();
          this.ghostLoop.set_alpha(0);
          this.ghostLoop.set_color(-65536);
          this.ghostLoop.isGhost = true;
          this.ghostLoop.jsonFile = this.character.jsonFile;
          this.ghostLoop.set_cameras([this.camGame]);
          this.add(this.ghostLoop);
          this.ghostIdle = new kd();
          this.ghostIdle.set_alpha(0);
          this.ghostIdle.set_color(-16776961);
          this.ghostIdle.isGhost = true;
          this.ghostIdle.jsonFile = this.character.jsonFile;
          this.ghostIdle.set_cameras([this.camGame]);
          this.add(this.ghostIdle);
          this.box = new F(70, 370);
          this.box.set_antialiasing(y.data.antialiasing);
          a = this.box;
          c = D.image("speech_bubble", null, true);
          a.set_frames(ob.fromSparrow(c, D.getPath("images/speech_bubble.xml", null, null)));
          a = this.box.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.box.animation.addByPrefix("normal", "speech bubble normal", 24);
          this.box.animation.addByPrefix("center", "speech bubble middle", 24);
          this.box.animation.play("normal", true);
          this.box.setGraphicSize(this.box.get_width() * 0.9 | 0);
          this.box.updateHitbox();
          this.hudGroup.add(this.box);
          this.tipText = new U(10, 10, h.width - 20, Of.TIP_TEXT_MAIN, 8);
          this.tipText.setFormat("assets/fonts/vcr.ttf", 16, -1, "right", Sa.OUTLINE, -16777216);
          this.tipText.set_cameras([this.camHUD]);
          a = this.tipText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.tipText);
          this.offsetLoopText = new U(10, 10, 0, "", 32);
          this.offsetLoopText.setFormat("assets/fonts/vcr.ttf", 32, -1, "left", Sa.OUTLINE, -16777216);
          this.offsetLoopText.set_cameras([this.camHUD]);
          a = this.offsetLoopText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.offsetLoopText);
          this.offsetLoopText.set_visible(false);
          this.offsetIdleText = new U(10, 46, 0, "", 32);
          this.offsetIdleText.setFormat("assets/fonts/vcr.ttf", 32, -1, "left", Sa.OUTLINE, -16777216);
          this.offsetIdleText.set_cameras([this.camHUD]);
          a = this.offsetIdleText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.offsetIdleText);
          this.offsetIdleText.set_visible(false);
          this.animText = new U(10, 22, h.width - 20, "", 8);
          this.animText.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", Sa.OUTLINE, -16777216);
          a = this.animText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.animText.set_cameras([this.camHUD]);
          this.add(this.animText);
          this.reloadCharacter();
          this.updateTextBox();
          this.daText = new Rh(ac.DEFAULT_TEXT_X, ac.DEFAULT_TEXT_Y, "", 0.05, false);
          this.daText.setScale(0.7);
          this.daText.set_text(Of.DEFAULT_TEXT);
          this.hudGroup.add(this.daText);
          this.addEditorBox();
          h.mouse.set_visible(true);
          this.updateCharTypeBox();
          P.prototype.create.call(this);
        },
        addEditorBox: function () {
          var a = [{
            name: "Character Type",
            label: "Character Type"
          }];
          this.UI_typebox = new je(null, null, a, null, true);
          this.UI_typebox.resize(120, 180);
          this.UI_typebox.set_x(900);
          this.UI_typebox.set_y(h.height - this.UI_typebox.get_height() - 50);
          a = this.UI_typebox.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.UI_typebox.set_camera(this.camHUD);
          this.addTypeUI();
          this.add(this.UI_typebox);
          a = [{
            name: "Animations",
            label: "Animations"
          }, {
            name: "Character",
            label: "Character"
          }];
          this.UI_mainbox = new je(null, null, a, null, true);
          this.UI_mainbox.resize(200, 250);
          this.UI_mainbox.set_x(this.UI_typebox.x + this.UI_typebox.get_width());
          this.UI_mainbox.set_y(h.height - this.UI_mainbox.get_height() - 50);
          a = this.UI_mainbox.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.UI_mainbox.set_camera(this.camHUD);
          this.addAnimationsUI();
          this.addCharacterUI();
          this.add(this.UI_mainbox);
          this.UI_mainbox.set_selected_tab_id("Character");
          this.lastTab = this.UI_mainbox.get_selected_tab_id();
        },
        addTypeUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_typebox);
          b.name = "Character Type";
          this.leftCheckbox = new xb(10, 20, null, null, "Left", 100);
          this.leftCheckbox.callback = function () {
            a.character.jsonFile.dialogue_pos = "left";
            a.updateCharTypeBox();
          };
          this.centerCheckbox = new xb(this.leftCheckbox.x, this.leftCheckbox.y + 40, null, null, "Center", 100);
          this.centerCheckbox.callback = function () {
            a.character.jsonFile.dialogue_pos = "center";
            a.updateCharTypeBox();
          };
          this.rightCheckbox = new xb(this.centerCheckbox.x, this.centerCheckbox.y + 40, null, null, "Right", 100);
          this.rightCheckbox.callback = function () {
            a.character.jsonFile.dialogue_pos = "right";
            a.updateCharTypeBox();
          };
          b.add(this.leftCheckbox);
          b.add(this.centerCheckbox);
          b.add(this.rightCheckbox);
          this.UI_typebox.addGroup(b);
        },
        addAnimationsUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_mainbox);
          b.name = "Animations";
          this.animationDropDown = new sc(10, 30, sc.makeStrIdLabelArray([""], true), function (b) {
            b = a.animationArray[v.parseInt(b)];
            if (Object.prototype.hasOwnProperty.call(a.character.dialogueAnimations.h, b)) {
              a.ghostLoop.playAnim(b);
              a.ghostIdle.playAnim(b, true);
              a.curSelectedAnim = b;
              b = a.character.dialogueAnimations.h[a.curSelectedAnim];
              a.offsetLoopText.set_text("Loop: " + v.string(b.loop_offsets));
              a.offsetIdleText.set_text("Idle: " + v.string(b.idle_offsets));
              a.animationInputText.set_text(b.anim);
              a.loopInputText.set_text(b.loop_name);
              a.idleInputText.set_text(b.idle_name);
            }
          });
          this.animationInputText = new ub(15, 85, 80, "", 8);
          this.blockPressWhileTypingOn.push(this.animationInputText);
          this.loopInputText = new ub(this.animationInputText.x, this.animationInputText.y + 35, 150, "", 8);
          this.blockPressWhileTypingOn.push(this.loopInputText);
          this.idleInputText = new ub(this.loopInputText.x, this.loopInputText.y + 40, 150, "", 8);
          this.blockPressWhileTypingOn.push(this.idleInputText);
          var c = new qb(10, this.idleInputText.y + 30, "Add/Update", function () {
            var b = w.trim(a.animationInputText.text);
            if (Object.prototype.hasOwnProperty.call(a.character.dialogueAnimations.h, b)) {
              for (var c = 0, d = a.character.jsonFile.animations.length; c < d;) {
                var h = c++;
                h = a.character.jsonFile.animations[h];
                if (w.trim(h.anim) == b) {
                  h.loop_name = a.loopInputText.text;
                  h.idle_name = a.idleInputText.text;
                  break;
                }
              }
              a.character.reloadAnimations();
              a.ghostLoop.reloadAnimations();
              a.ghostIdle.reloadAnimations();
              if (a.curSelectedAnim == b) {
                a.ghostLoop.playAnim(b);
                a.ghostIdle.playAnim(b, true);
              }
            } else {
              a.character.jsonFile.animations.push({
                anim: b,
                loop_name: a.loopInputText.text,
                loop_offsets: [0, 0],
                idle_name: a.idleInputText.text,
                idle_offsets: [0, 0]
              });
              b = a.animationDropDown.get_selectedLabel();
              a.character.reloadAnimations();
              a.ghostLoop.reloadAnimations();
              a.ghostIdle.reloadAnimations();
              a.reloadAnimationsDropDown();
              a.animationDropDown.set_selectedLabel(b);
            }
          });
          var d = new qb(100, c.y, "Remove", function () {
            for (var b = 0, c = a.character.jsonFile.animations.length; b < c;) {
              var d = b++;
              d = a.character.jsonFile.animations[d];
              if (d != null && w.trim(d.anim) == w.trim(a.animationInputText.text)) {
                b = a.animationDropDown.get_selectedLabel();
                r.remove(a.character.jsonFile.animations, d);
                a.character.reloadAnimations();
                a.ghostLoop.reloadAnimations();
                a.ghostIdle.reloadAnimations();
                a.reloadAnimationsDropDown();
                if (a.character.jsonFile.animations.length > 0 && b == w.trim(d.anim)) {
                  c = a.character.jsonFile.animations[0].anim;
                  a.ghostLoop.playAnim(c);
                  a.ghostIdle.playAnim(c, true);
                }
                a.animationDropDown.set_selectedLabel(b);
                a.animationInputText.set_text("");
                a.loopInputText.set_text("");
                a.idleInputText.set_text("");
                break;
              }
            }
          });
          b.add(new U(this.animationDropDown.x, this.animationDropDown.y - 18, 0, "Animations:"));
          b.add(new U(this.animationInputText.x, this.animationInputText.y - 18, 0, "Animation name:"));
          b.add(new U(this.loopInputText.x, this.loopInputText.y - 18, 0, "Loop name on .XML file:"));
          b.add(new U(this.idleInputText.x, this.idleInputText.y - 18, 0, "Idle/Finished name on .XML file:"));
          b.add(this.animationInputText);
          b.add(this.loopInputText);
          b.add(this.idleInputText);
          b.add(c);
          b.add(d);
          b.add(this.animationDropDown);
          this.UI_mainbox.addGroup(b);
          this.reloadAnimationsDropDown();
        },
        reloadAnimationsDropDown: function () {
          this.animationArray = [];
          for (var a = 0, b = this.character.jsonFile.animations; a < b.length;) {
            var c = b[a];
            ++a;
            this.animationArray.push(c.anim);
          }
          if (this.animationArray.length < 1) {
            this.animationArray = [""];
          }
          this.animationDropDown.setData(sc.makeStrIdLabelArray(this.animationArray, true));
        },
        addCharacterUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_mainbox);
          b.name = "Character";
          this.imageInputText = new ub(10, 30, 80, this.character.jsonFile.image, 8);
          this.blockPressWhileTypingOn.push(this.imageInputText);
          this.xStepper = new Ib(this.imageInputText.x, this.imageInputText.y + 50, 10, this.character.jsonFile.position[0], -2000, 2000, 0);
          this.yStepper = new Ib(this.imageInputText.x + 80, this.xStepper.y, 10, this.character.jsonFile.position[1], -2000, 2000, 0);
          this.scaleStepper = new Ib(this.imageInputText.x, this.xStepper.y + 50, 0.05, this.character.jsonFile.scale, 0.1, 10, 2);
          var c = new xb(this.scaleStepper.x + 80, this.scaleStepper.y, null, null, "No Antialiasing", 100);
          c.set_checked(this.character.jsonFile.no_antialiasing == 1);
          c.callback = function () {
            a.character.jsonFile.no_antialiasing = c.checked;
            a.character.set_antialiasing(!a.character.jsonFile.no_antialiasing);
          };
          b.add(new U(10, this.imageInputText.y - 18, 0, "Image file name:"));
          b.add(new U(10, this.xStepper.y - 18, 0, "Position Offset:"));
          b.add(new U(10, this.scaleStepper.y - 18, 0, "Scale:"));
          b.add(this.imageInputText);
          b.add(this.xStepper);
          b.add(this.yStepper);
          b.add(this.scaleStepper);
          b.add(c);
          var d = new qb(10, this.scaleStepper.y + 60, "Reload Image", function () {
            a.reloadCharacter();
          });
          var e = new qb(d.x + 100, d.y, "Load Character", function () {
            a.loadCharacter();
          });
          var f = new qb(e.x, d.y - 25, "Save Character", function () {
            a.saveCharacter();
          });
          b.add(d);
          b.add(e);
          b.add(f);
          this.UI_mainbox.addGroup(b);
        },
        updateCharTypeBox: function () {
          this.leftCheckbox.set_checked(false);
          this.centerCheckbox.set_checked(false);
          this.rightCheckbox.set_checked(false);
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              this.centerCheckbox.set_checked(true);
              break;
            case "left":
              this.leftCheckbox.set_checked(true);
              break;
            case "right":
              this.rightCheckbox.set_checked(true);
          }
          this.reloadCharacter();
          this.updateTextBox();
        },
        reloadCharacter: function () {
          for (var a = [this.character, this.ghostLoop, this.ghostIdle], b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            var d = "dialogue/" + this.character.jsonFile.image;
            var e = D.image(d, null, true);
            c.set_frames(ob.fromSparrow(e, D.getPath("images/" + d + ".xml", null, null)));
            c.jsonFile = this.character.jsonFile;
            c.reloadAnimations();
            c.setGraphicSize(c.get_width() * kd.DEFAULT_SCALE * this.character.jsonFile.scale | 0);
            c.updateHitbox();
          }
          this.character.set_x(ac.LEFT_CHAR_X);
          this.character.set_y(ac.DEFAULT_CHAR_Y);
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              this.character.set_x(h.width / 2);
              a = this.character;
              a.set_x(a.x - this.character.get_width() / 2);
              break;
            case "right":
              this.character.set_x(h.width - this.character.get_width() + ac.RIGHT_CHAR_X);
          }
          a = this.character;
          a.set_x(a.x + (this.character.jsonFile.position[0] + this.mainGroup.x));
          a = this.character;
          a.set_y(a.y + (this.character.jsonFile.position[1] + this.mainGroup.y));
          this.character.playAnim(this.character.jsonFile.animations[0].anim);
          if (this.character.jsonFile.animations.length > 0) {
            this.curSelectedAnim = this.character.jsonFile.animations[0].anim;
            a = this.character.dialogueAnimations.h[this.curSelectedAnim];
            this.ghostLoop.playAnim(a.anim);
            this.ghostIdle.playAnim(a.anim, true);
            this.offsetLoopText.set_text("Loop: " + v.string(a.loop_offsets));
            this.offsetIdleText.set_text("Idle: " + v.string(a.idle_offsets));
          }
          this.curAnim = 0;
          this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
        },
        updateTextBox: function () {
          this.box.set_flipX(false);
          var a = "normal";
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              a = "center";
              break;
            case "left":
              this.box.set_flipX(true);
          }
          this.box.animation.play(a, true);
          ac.updateBoxOffsets(this.box);
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b == this.imageInputText) {
            this.character.jsonFile.image = this.imageInputText.text;
          } else if (a == "change_numeric_stepper" && b instanceof Ib) {
            if (b == this.scaleStepper) {
              this.character.jsonFile.scale = this.scaleStepper.value;
              this.reloadCharacter();
            } else if (b == this.xStepper) {
              this.character.jsonFile.position[0] = this.xStepper.value;
              this.reloadCharacter();
            } else if (b == this.yStepper) {
              this.character.jsonFile.position[1] = this.yStepper.value;
              this.reloadCharacter();
            }
          }
        },
        update: function (a) {
          if (!this.transitioning) {
            if (this.character.animation._curAnim != null) {
              if (this.daText.finishedText) {
                if (this.character.animationIsLoop()) {
                  this.character.playAnim(this.character.animation._curAnim.name, true);
                }
              } else if (this.character.animation._curAnim.finished) {
                this.character.animation._curAnim.restart();
              }
            }
            var b = false;
            for (var c = 0, d = this.blockPressWhileTypingOn; c < d.length;) {
              var e = d[c];
              ++c;
              if (e.hasFocus) {
                y.toggleVolumeKeys(false);
                b = true;
                c = h.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                  e.set_hasFocus(false);
                }
                break;
              }
            }
            if (!b && !this.animationDropDown.dropPanel.visible) {
              y.toggleVolumeKeys(true);
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(32, c.status) && this.UI_mainbox.get_selected_tab_id() == "Character") {
                this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim);
                this.daText.resetDialogue();
                this.updateTextBox();
              }
              e = 1;
              var f = 300;
              c = h.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(16, c.status)) {
                f = 1200;
                e = 10;
              }
              b = [1, 1, -1, -1];
              c = h.keys.pressed;
              d = c.keyManager.checkStatusUnsafe(74, c.status);
              c = h.keys.pressed;
              var k = c.keyManager.checkStatusUnsafe(73, c.status);
              c = h.keys.pressed;
              var g = c.keyManager.checkStatusUnsafe(76, c.status);
              c = h.keys.pressed;
              k = [d, k, g, c.keyManager.checkStatusUnsafe(75, c.status)];
              c = 0;
              for (d = k.length; c < d;) {
                g = c++;
                if (k[g]) {
                  if (g % 2 == 1) {
                    var n = this.mainGroup;
                    n.set_y(n.y + f * a * b[g]);
                  } else {
                    n = this.mainGroup;
                    n.set_x(n.x + f * a * b[g]);
                  }
                }
              }
              if (this.UI_mainbox.get_selected_tab_id() == "Animations" && this.curSelectedAnim != null && Object.prototype.hasOwnProperty.call(this.character.dialogueAnimations.h, this.curSelectedAnim)) {
                k = false;
                f = this.character.dialogueAnimations.h[this.curSelectedAnim];
                c = h.keys.justPressed;
                d = c.keyManager.checkStatusUnsafe(65, c.status);
                c = h.keys.justPressed;
                g = c.keyManager.checkStatusUnsafe(87, c.status);
                c = h.keys.justPressed;
                n = c.keyManager.checkStatusUnsafe(68, c.status);
                c = h.keys.justPressed;
                n = [d, g, n, c.keyManager.checkStatusUnsafe(83, c.status)];
                c = h.keys.justPressed;
                d = c.keyManager.checkStatusUnsafe(37, c.status);
                c = h.keys.justPressed;
                g = c.keyManager.checkStatusUnsafe(38, c.status);
                c = h.keys.justPressed;
                var p = c.keyManager.checkStatusUnsafe(39, c.status);
                c = h.keys.justPressed;
                p = [d, g, p, c.keyManager.checkStatusUnsafe(40, c.status)];
                c = 0;
                for (d = n.length; c < d;) {
                  g = c++;
                  if (n[g]) {
                    if (g % 2 == 1) {
                      f.loop_offsets[1] += e * b[g];
                    } else {
                      f.loop_offsets[0] += e * b[g];
                    }
                    k = true;
                  }
                }
                c = 0;
                for (d = p.length; c < d;) {
                  g = c++;
                  if (p[g]) {
                    if (g % 2 == 1) {
                      f.idle_offsets[1] += e * b[g];
                    } else {
                      f.idle_offsets[0] += e * b[g];
                    }
                    k = true;
                  }
                }
                if (k) {
                  this.offsetLoopText.set_text("Loop: " + v.string(f.loop_offsets));
                  this.offsetIdleText.set_text("Idle: " + v.string(f.idle_offsets));
                  b = this.ghostLoop.offset;
                  e = f.loop_offsets[0];
                  c = f.loop_offsets[1];
                  if (c == null) {
                    c = 0;
                  }
                  if (e == null) {
                    e = 0;
                  }
                  b.set_x(e);
                  b.set_y(c);
                  b = this.ghostIdle.offset;
                  e = f.idle_offsets[0];
                  c = f.idle_offsets[1];
                  if (c == null) {
                    c = 0;
                  }
                  if (e == null) {
                    e = 0;
                  }
                  b.set_x(e);
                  b.set_y(c);
                }
              }
              c = h.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(81, c.status) && this.camGame.zoom > 0.1) {
                n = this.camGame;
                n.set_zoom(n.zoom - a * this.camGame.zoom);
                if (this.camGame.zoom < 0.1) {
                  this.camGame.set_zoom(0.1);
                }
              }
              c = h.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(69, c.status) && this.camGame.zoom < 1) {
                n = this.camGame;
                n.set_zoom(n.zoom + a * this.camGame.zoom);
                if (this.camGame.zoom > 1) {
                  this.camGame.set_zoom(1);
                }
              }
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(72, c.status)) {
                if (this.UI_mainbox.get_selected_tab_id() == "Animations") {
                  this.currentGhosts++;
                  if (this.currentGhosts > 2) {
                    this.currentGhosts = 0;
                  }
                  this.ghostLoop.set_visible(this.currentGhosts != 1);
                  this.ghostIdle.set_visible(this.currentGhosts != 2);
                  this.ghostLoop.set_alpha(this.currentGhosts == 2 ? 1 : 0.6);
                  this.ghostIdle.set_alpha(this.currentGhosts == 1 ? 1 : 0.6);
                } else {
                  this.hudGroup.set_visible(!this.hudGroup.visible);
                }
              }
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(82, c.status)) {
                this.camGame.set_zoom(1);
                this.mainGroup.setPosition(0, 0);
                this.hudGroup.set_visible(true);
              }
              if (this.UI_mainbox.get_selected_tab_id() != this.lastTab) {
                if (this.UI_mainbox.get_selected_tab_id() == "Animations") {
                  this.hudGroup.set_alpha(0);
                  this.mainGroup.set_alpha(0);
                  this.ghostLoop.set_alpha(0.6);
                  this.ghostIdle.set_alpha(0.6);
                  this.tipText.set_text(Of.TIP_TEXT_OFFSET);
                  this.offsetLoopText.set_visible(true);
                  this.offsetIdleText.set_visible(true);
                  this.animText.set_visible(false);
                  this.currentGhosts = 0;
                } else {
                  this.hudGroup.set_alpha(1);
                  this.mainGroup.set_alpha(1);
                  this.ghostLoop.set_alpha(0);
                  this.ghostIdle.set_alpha(0);
                  this.tipText.set_text(Of.TIP_TEXT_MAIN);
                  this.offsetLoopText.set_visible(false);
                  this.offsetIdleText.set_visible(false);
                  this.animText.set_visible(true);
                  this.updateTextBox();
                  this.daText.resetDialogue();
                  if (this.curAnim < 0) {
                    this.curAnim = this.character.jsonFile.animations.length - 1;
                  } else if (this.curAnim >= this.character.jsonFile.animations.length) {
                    this.curAnim = 0;
                  }
                  this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim);
                  this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
                }
                this.lastTab = this.UI_mainbox.get_selected_tab_id();
                this.currentGhosts = 0;
              }
              if (this.UI_mainbox.get_selected_tab_id() == "Character" && (b = [1, -1], c = h.keys.justPressed, e = c.keyManager.checkStatusUnsafe(87, c.status), c = h.keys.justPressed, e = [e, c.keyManager.checkStatusUnsafe(83, c.status)], e.indexOf(true) != -1)) {
                c = 0;
                for (d = e.length; c < d;) {
                  g = c++;
                  if (e[g] && this.character.jsonFile.animations.length > 0) {
                    this.curAnim -= b[g];
                    if (this.curAnim < 0) {
                      this.curAnim = this.character.jsonFile.animations.length - 1;
                    } else if (this.curAnim >= this.character.jsonFile.animations.length) {
                      this.curAnim = 0;
                    }
                    f = this.character.jsonFile.animations[this.curAnim].anim;
                    if (Object.prototype.hasOwnProperty.call(this.character.dialogueAnimations.h, f)) {
                      this.character.playAnim(f, this.daText.finishedText);
                    }
                  }
                }
                this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
              }
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(27, c.status)) {
                P.switchState(new Nf());
                b = h.sound;
                e = D.returnSound("music", "freakyMenu", null);
                b.playMusic(e, 1);
                this.transitioning = true;
              }
              this.ghostLoop.setPosition(this.character.x, this.character.y);
              this.ghostIdle.setPosition(this.character.x, this.character.y);
              this.hudGroup.set_x(this.mainGroup.x);
              this.hudGroup.set_y(this.mainGroup.y);
            }
          }
          P.prototype.update.call(this, a);
        },
        loadCharacter: function () {
          var a = new Fi("JSON", "json");
          this._file = new Fe();
          this._file.addEventListener("complete", m(this, this.onLoadComplete));
          this._file.addEventListener("cancel", m(this, this.onLoadCancel));
          this._file.addEventListener("ioError", m(this, this.onLoadError));
          this._file.browse([a]);
        },
        onLoadComplete: function (a) {
          this._file.removeEventListener("complete", m(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", m(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", m(this, this.onLoadError));
          zb.trace("File couldn't be loaded! You aren't on Desktop, are you?", {
            fileName: "source/states/editors/DialogueCharacterEditorState.hx",
            lineNumber: 709,
            className: "states.editors.DialogueCharacterEditorState",
            methodName: "onLoadComplete"
          });
        },
        onLoadCancel: function (a) {
          this._file.removeEventListener("complete", m(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", m(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", m(this, this.onLoadError));
          this._file = null;
          zb.trace("Cancelled file loading.", {
            fileName: "source/states/editors/DialogueCharacterEditorState.hx",
            lineNumber: 722,
            className: "states.editors.DialogueCharacterEditorState",
            methodName: "onLoadCancel"
          });
        },
        onLoadError: function (a) {
          this._file.removeEventListener("complete", m(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", m(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", m(this, this.onLoadError));
          this._file = null;
          zb.trace("Problem loading file", {
            fileName: "source/states/editors/DialogueCharacterEditorState.hx",
            lineNumber: 734,
            className: "states.editors.DialogueCharacterEditorState",
            methodName: "onLoadError"
          });
        },
        saveCharacter: function () {
          var a = JSON.stringify(this.character.jsonFile, null, "\t");
          if (a.length > 0) {
            var b = w.trim(this.imageInputText.text).split("_");
            b = w.replace(b[0].toLowerCase(), " ", "");
            this._file = new Fe();
            this._file.addEventListener("complete", m(this, this.onSaveComplete));
            this._file.addEventListener("cancel", m(this, this.onSaveCancel));
            this._file.addEventListener("ioError", m(this, this.onSaveError));
            this._file.save(a, b + ".json");
          }
        },
        onSaveComplete: function (a) {
          this._file.removeEventListener("complete", m(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", m(this, this.onSaveError));
          this._file = null;
          h.log.advanced("Successfully saved file.", xa.NOTICE);
        },
        onSaveCancel: function (a) {
          this._file.removeEventListener("complete", m(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", m(this, this.onSaveError));
          this._file = null;
        },
        onSaveError: function (a) {
          this._file.removeEventListener("complete", m(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", m(this, this.onSaveError));
          this._file = null;
          h.log.advanced("Problem saving file", xa.ERROR, true);
        },
        ClipboardAdd: function (a) {
          if (a == null) {
            a = "";
          }
          if (w.endsWith(a.toLowerCase(), "v")) {
            a = a.substring(0, a.length - 1);
          }
          return a + w.replace(ic.get_text(), "\n", "");
        },
        __class__: Of
      });
      function Pf(a, b) {
        this._file = null;
        this.transitioning = false;
        this.blockPressWhileTypingOn = [];
        this.curSelected = this.curAnim = 0;
        this.dialogueFile = null;
        P.call(this, a, b);
      }
      g["states.editors.DialogueEditorState"] = Pf;
      Pf.__name__ = "states.editors.DialogueEditorState";
      Pf.__super__ = P;
      Pf.prototype = q(P.prototype, {
        create: function () {
          this.persistentUpdate = this.persistentDraw = true;
          var a = eb._new();
          var b = 0;
          var c = b * 0 + 0.5;
          var d = 1;
          if (d == null) {
            d = 1;
          }
          b = Math.round((b + 0.5) * 255);
          a = a & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16;
          b = Math.round(c * 255);
          a = a & -65281 | (b > 255 ? 255 : b < 0 ? 0 : b) << 8;
          b = 128;
          a = a & -256 | (b > 255 ? 255 : b < 0 ? 0 : b);
          b = Math.round(d * 255);
          h.camera.bgColor = a & 16777215 | (b > 255 ? 255 : b < 0 ? 0 : b) << 24;
          this.defaultLine = {
            portrait: kd.DEFAULT_CHARACTER,
            expression: "talk",
            text: Pf.DEFAULT_TEXT,
            boxState: Pf.DEFAULT_BUBBLETYPE,
            speed: 0.05,
            sound: ""
          };
          this.dialogueFile = {
            dialogue: [this.copyDefaultLine()]
          };
          this.character = new kd();
          a = this.character.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.character);
          this.box = new F(70, 370);
          this.box.set_antialiasing(y.data.antialiasing);
          a = this.box;
          c = D.image("speech_bubble", null, true);
          a.set_frames(ob.fromSparrow(c, D.getPath("images/speech_bubble.xml", null, null)));
          a = this.box.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.box.animation.addByPrefix("normal", "speech bubble normal", 24);
          this.box.animation.addByPrefix("angry", "AHH speech bubble", 24);
          this.box.animation.addByPrefix("center", "speech bubble middle", 24);
          this.box.animation.addByPrefix("center-angry", "AHH Speech Bubble middle", 24);
          this.box.animation.play("normal", true);
          this.box.setGraphicSize(this.box.get_width() * 0.9 | 0);
          this.box.updateHitbox();
          this.add(this.box);
          this.addEditorBox();
          h.mouse.set_visible(true);
          c = new U(10, 10, h.width - 20, "Press O to remove the current dialogue line, Press P to add another line after the current one.", 8);
          c.setFormat("assets/fonts/vcr.ttf", 16, -1, "left", Sa.OUTLINE, -16777216);
          a = c.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(c);
          this.selectedText = new U(10, 32, h.width - 20, "", 8);
          this.selectedText.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", Sa.OUTLINE, -16777216);
          a = this.selectedText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.selectedText);
          this.animText = new U(10, 62, h.width - 20, "", 8);
          this.animText.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", Sa.OUTLINE, -16777216);
          a = this.animText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.animText);
          this.daText = new Rh(ac.DEFAULT_TEXT_X, ac.DEFAULT_TEXT_Y, Pf.DEFAULT_TEXT);
          this.daText.setScale(0.7);
          this.add(this.daText);
          this.changeText();
          P.prototype.create.call(this);
        },
        addEditorBox: function () {
          this.UI_box = new je(null, null, [{
            name: "Dialogue Line",
            label: "Dialogue Line"
          }], null, true);
          this.UI_box.resize(250, 210);
          this.UI_box.set_x(h.width - this.UI_box.get_width() - 10);
          this.UI_box.set_y(10);
          var a = this.UI_box.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.UI_box.set_alpha(0.8);
          this.addDialogueLineUI();
          this.add(this.UI_box);
        },
        addDialogueLineUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_box);
          b.name = "Dialogue Line";
          this.characterInputText = new ub(10, 20, 80, kd.DEFAULT_CHARACTER, 8);
          this.blockPressWhileTypingOn.push(this.characterInputText);
          this.speedStepper = new Ib(10, this.characterInputText.y + 40, 0.005, 0.05, 0, 0.5, 3);
          this.angryCheckbox = new xb(this.speedStepper.x + 120, this.speedStepper.y, null, null, "Angry Textbox", 200);
          this.angryCheckbox.callback = function () {
            a.updateTextBox();
            a.dialogueFile.dialogue[a.curSelected].boxState = a.angryCheckbox.checked ? "angry" : "normal";
          };
          this.soundInputText = new ub(10, this.speedStepper.y + 40, 150, "", 8);
          this.blockPressWhileTypingOn.push(this.soundInputText);
          this.lineInputText = new ub(10, this.soundInputText.y + 35, 200, Pf.DEFAULT_TEXT, 8);
          this.blockPressWhileTypingOn.push(this.lineInputText);
          var c = new qb(20, this.lineInputText.y + 25, "Load Dialogue", function () {
            a.loadDialogue();
          });
          var d = new qb(c.x + 120, c.y, "Save Dialogue", function () {
            a.saveDialogue();
          });
          b.add(new U(10, this.speedStepper.y - 18, 0, "Interval/Speed (ms):"));
          b.add(new U(10, this.characterInputText.y - 18, 0, "Character:"));
          b.add(new U(10, this.soundInputText.y - 18, 0, "Sound file name:"));
          b.add(new U(10, this.lineInputText.y - 18, 0, "Text:"));
          b.add(this.characterInputText);
          b.add(this.angryCheckbox);
          b.add(this.speedStepper);
          b.add(this.soundInputText);
          b.add(this.lineInputText);
          b.add(c);
          b.add(d);
          this.UI_box.addGroup(b);
        },
        copyDefaultLine: function () {
          return {
            portrait: this.defaultLine.portrait,
            expression: this.defaultLine.expression,
            text: this.defaultLine.text,
            boxState: this.defaultLine.boxState,
            speed: this.defaultLine.speed,
            sound: ""
          };
        },
        updateTextBox: function () {
          this.box.set_flipX(false);
          var a = this.angryCheckbox.checked;
          var b = a ? "angry" : "normal";
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              b = a ? "center-angry" : "center";
              break;
            case "left":
              this.box.set_flipX(true);
          }
          this.box.animation.play(b, true);
          ac.updateBoxOffsets(this.box);
        },
        reloadCharacter: function () {
          var a = this.character;
          var b = "dialogue/" + this.character.jsonFile.image;
          var c = D.image(b, null, true);
          a.set_frames(ob.fromSparrow(c, D.getPath("images/" + b + ".xml", null, null)));
          this.character.jsonFile = this.character.jsonFile;
          this.character.reloadAnimations();
          this.character.setGraphicSize(this.character.get_width() * kd.DEFAULT_SCALE * this.character.jsonFile.scale | 0);
          this.character.updateHitbox();
          this.character.set_x(ac.LEFT_CHAR_X);
          this.character.set_y(ac.DEFAULT_CHAR_Y);
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              this.character.set_x(h.width / 2);
              a = this.character;
              a.set_x(a.x - this.character.get_width() / 2);
              break;
            case "right":
              this.character.set_x(h.width - this.character.get_width() + ac.RIGHT_CHAR_X);
          }
          a = this.character;
          a.set_x(a.x + this.character.jsonFile.position[0]);
          a = this.character;
          a.set_y(a.y + this.character.jsonFile.position[1]);
          this.character.playAnim();
          this.characterAnimSpeed();
          if (this.character.animation._curAnim != null && this.character.jsonFile.animations != null) {
            this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
          } else {
            this.animText.set_text("ERROR! NO ANIMATIONS FOUND");
          }
        },
        reloadText: function (a) {
          var b = this.lineInputText.text;
          if (b == null || b.length < 1) {
            b = " ";
          }
          this.daText.set_text(b);
          if (a) {
            this.daText.finishText();
          } else if (this.daText.delay > 0) {
            if (this.character.jsonFile.animations.length > this.curAnim && this.character.jsonFile.animations[this.curAnim] != null) {
              this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim);
            }
            this.characterAnimSpeed();
          }
          this.daText.set_y(ac.DEFAULT_TEXT_Y);
          if (this.daText.rows > 2) {
            a = this.daText;
            a.set_y(a.y - ac.LONG_TEXT_ADD);
          }
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b instanceof ub) {
            if (b == this.characterInputText) {
              this.character.reloadCharacterJson(this.characterInputText.text);
              this.reloadCharacter();
              if (this.character.jsonFile.animations.length > 0) {
                this.curAnim = 0;
                if (this.character.jsonFile.animations.length > this.curAnim && this.character.jsonFile.animations[this.curAnim] != null) {
                  this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim, this.daText.finishedText);
                  this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
                } else {
                  this.animText.set_text("ERROR! NO ANIMATIONS FOUND");
                }
                this.characterAnimSpeed();
              }
              this.dialogueFile.dialogue[this.curSelected].portrait = this.characterInputText.text;
              this.reloadText(false);
              this.updateTextBox();
            } else if (b == this.lineInputText) {
              this.dialogueFile.dialogue[this.curSelected].text = this.lineInputText.text;
              this.daText.set_text(this.lineInputText.text);
              if (this.daText.text == null) {
                this.daText.set_text("");
              }
              this.reloadText(true);
            } else if (b == this.soundInputText) {
              this.daText.finishText();
              this.dialogueFile.dialogue[this.curSelected].sound = this.soundInputText.text;
              this.daText.sound = this.soundInputText.text;
              if (this.daText.sound == null) {
                this.daText.sound = "";
              }
            }
          } else if (a == "change_numeric_stepper" && b == this.speedStepper) {
            this.dialogueFile.dialogue[this.curSelected].speed = this.speedStepper.value;
            if (isNaN(this.dialogueFile.dialogue[this.curSelected].speed) || this.dialogueFile.dialogue[this.curSelected].speed == null || this.dialogueFile.dialogue[this.curSelected].speed < 0.001) {
              this.dialogueFile.dialogue[this.curSelected].speed = 0;
            }
            this.daText.delay = this.dialogueFile.dialogue[this.curSelected].speed;
            this.reloadText(false);
          }
        },
        update: function (a) {
          if (!this.transitioning) {
            if (this.character.animation._curAnim != null) {
              if (this.daText.finishedText) {
                if (this.character.animationIsLoop() && this.character.animation._curAnim.finished) {
                  this.character.playAnim(this.character.animation._curAnim.name, true);
                }
              } else if (this.character.animation._curAnim.finished) {
                this.character.animation._curAnim.restart();
              }
            }
            var b = false;
            for (var c = 0, d = this.blockPressWhileTypingOn; c < d.length;) {
              var e = d[c];
              ++c;
              if (e.hasFocus) {
                y.toggleVolumeKeys(false);
                b = true;
                c = h.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                  if (e == this.lineInputText) {
                    e.set_text(e.text + "\\n");
                    e.set_caretIndex(e.caretIndex + 2);
                  } else {
                    e.set_hasFocus(false);
                  }
                }
                break;
              }
            }
            if (!b) {
              y.toggleVolumeKeys(true);
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(32, c.status)) {
                this.reloadText(false);
              }
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(27, c.status)) {
                P.switchState(new Nf());
                b = h.sound;
                c = D.returnSound("music", "freakyMenu", null);
                b.playMusic(c, 1);
                this.transitioning = true;
              }
              b = [1, -1];
              c = h.keys.justPressed;
              d = c.keyManager.checkStatusUnsafe(87, c.status);
              c = h.keys.justPressed;
              e = [d, c.keyManager.checkStatusUnsafe(83, c.status)];
              c = h.keys.justPressed;
              d = c.keyManager.checkStatusUnsafe(68, c.status);
              c = h.keys.justPressed;
              var f = [d, c.keyManager.checkStatusUnsafe(65, c.status)];
              c = 0;
              for (d = e.length; c < d;) {
                var k = c++;
                if (e[k] && this.character.jsonFile.animations.length > 0) {
                  this.curAnim -= b[k];
                  if (this.curAnim < 0) {
                    this.curAnim = this.character.jsonFile.animations.length - 1;
                  } else if (this.curAnim >= this.character.jsonFile.animations.length) {
                    this.curAnim = 0;
                  }
                  var g = this.character.jsonFile.animations[this.curAnim].anim;
                  if (Object.prototype.hasOwnProperty.call(this.character.dialogueAnimations.h, g)) {
                    this.character.playAnim(g, this.daText.finishedText);
                    this.dialogueFile.dialogue[this.curSelected].expression = g;
                  }
                  this.animText.set_text("Animation: " + g + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
                }
                if (f[k]) {
                  this.changeText(b[k]);
                }
              }
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(79, c.status)) {
                r.remove(this.dialogueFile.dialogue, this.dialogueFile.dialogue[this.curSelected]);
                if (this.dialogueFile.dialogue.length < 1) {
                  b = this.copyDefaultLine();
                  this.dialogueFile.dialogue = [b];
                }
                this.changeText();
              } else {
                c = h.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(80, c.status)) {
                  c = this.dialogueFile.dialogue;
                  b = this.curSelected + 1;
                  d = this.copyDefaultLine();
                  c.splice(b, 0, d);
                  this.changeText(1);
                }
              }
            }
          }
          P.prototype.update.call(this, a);
        },
        changeText: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.dialogueFile.dialogue.length - 1;
          } else if (this.curSelected >= this.dialogueFile.dialogue.length) {
            this.curSelected = 0;
          }
          a = this.dialogueFile.dialogue[this.curSelected];
          this.characterInputText.set_text(a.portrait);
          this.lineInputText.set_text(a.text);
          this.angryCheckbox.set_checked(a.boxState == "angry");
          this.speedStepper.set_value(a.speed);
          if (a.sound == null) {
            a.sound = "";
          }
          this.soundInputText.set_text(a.sound);
          this.daText.delay = this.speedStepper.value;
          this.daText.sound = this.soundInputText.text;
          if (this.daText.sound != null && w.trim(this.daText.sound) == "") {
            this.daText.sound = "dialogue";
          }
          this.curAnim = 0;
          this.character.reloadCharacterJson(this.characterInputText.text);
          this.reloadCharacter();
          this.reloadText(false);
          this.updateTextBox();
          var b = this.character.jsonFile.animations.length;
          if (b > 0) {
            for (var c = 0; c < b;) {
              var d = c++;
              var e = this.character.jsonFile.animations[d];
              if (e != null && e.anim == a.expression) {
                this.curAnim = d;
                break;
              }
            }
            this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim, this.daText.finishedText);
            this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + b + ") - Press W or S to scroll");
          } else {
            this.animText.set_text("ERROR! NO ANIMATIONS FOUND");
          }
          this.characterAnimSpeed();
          this.selectedText.set_text("Line: (" + (this.curSelected + 1) + " / " + this.dialogueFile.dialogue.length + ") - Press A or D to scroll");
        },
        characterAnimSpeed: function () {
          if (this.character.animation._curAnim != null) {
            var a = 24 - (this.speedStepper.value - 0.05) / 5 * 480;
            if (a < 12) {
              a = 12;
            } else if (a > 48) {
              a = 48;
            }
            this.character.animation._curAnim.set_frameRate(a);
          }
        },
        loadDialogue: function () {
          var a = new Fi("JSON", "json");
          this._file = new Fe();
          this._file.addEventListener("complete", m(this, this.onLoadComplete));
          this._file.addEventListener("cancel", m(this, this.onLoadCancel));
          this._file.addEventListener("ioError", m(this, this.onLoadError));
          this._file.browse([a]);
        },
        onLoadComplete: function (a) {
          this._file.removeEventListener("complete", m(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", m(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", m(this, this.onLoadError));
          zb.trace("File couldn't be loaded! You aren't on Desktop, are you?", {
            fileName: "source/states/editors/DialogueEditorState.hx",
            lineNumber: 469,
            className: "states.editors.DialogueEditorState",
            methodName: "onLoadComplete"
          });
        },
        onLoadCancel: function (a) {
          this._file.removeEventListener("complete", m(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", m(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", m(this, this.onLoadError));
          this._file = null;
          zb.trace("Cancelled file loading.", {
            fileName: "source/states/editors/DialogueEditorState.hx",
            lineNumber: 482,
            className: "states.editors.DialogueEditorState",
            methodName: "onLoadCancel"
          });
        },
        onLoadError: function (a) {
          this._file.removeEventListener("complete", m(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", m(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", m(this, this.onLoadError));
          this._file = null;
          zb.trace("Problem loading file", {
            fileName: "source/states/editors/DialogueEditorState.hx",
            lineNumber: 494,
            className: "states.editors.DialogueEditorState",
            methodName: "onLoadError"
          });
        },
        saveDialogue: function () {
          var a = JSON.stringify(this.dialogueFile, null, "\t");
          if (a.length > 0) {
            this._file = new Fe();
            this._file.addEventListener("complete", m(this, this.onSaveComplete));
            this._file.addEventListener("cancel", m(this, this.onSaveCancel));
            this._file.addEventListener("ioError", m(this, this.onSaveError));
            this._file.save(a, "dialogue.json");
          }
        },
        onSaveComplete: function (a) {
          this._file.removeEventListener("complete", m(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", m(this, this.onSaveError));
          this._file = null;
          h.log.advanced("Successfully saved file.", xa.NOTICE);
        },
        onSaveCancel: function (a) {
          this._file.removeEventListener("complete", m(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", m(this, this.onSaveError));
          this._file = null;
        },
        onSaveError: function (a) {
          this._file.removeEventListener("complete", m(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", m(this, this.onSaveError));
          this._file = null;
          h.log.advanced("Problem saving file", xa.ERROR, true);
        },
        __class__: Pf
      });
      function dn(a) {
        this.lastStepHit = this.lastBeatHit = -1;
        this.guitarHeroSustains = false;
        this.startOffset = this.startPos = this.timerToStart = 0;
        this.showComboNum = this.showRating = true;
        this.showCombo = false;
        this.totalPlayed = this.totalNotesHit = 0;
        this.songSpeed = 1;
        this.songHits = this.songMisses = this.songLength = 0;
        this.keysArray = ["note_left", "note_down", "note_up", "note_right"];
        this.lastScore = [];
        this.combo = 0;
        this.ratingsData = fg.loadDefault();
        this.unspawnNotes = [];
        this.playbackRate = 1;
        this.startingSong = true;
        this.spawnTime = 2000;
        this.noteKillOffset = 350;
        this.finishTimer = null;
        db.call(this);
        this.playbackRate = a;
        this.startPos = O.songPosition;
        O.safeZoneOffset = y.data.safeFrames / 60 * 1000 * a;
        O.songPosition -= this.startOffset;
        this.timerToStart = this.startOffset = O.crochet;
        if (h.sound.music != null) {
          a = h.sound.music;
          a.cleanup(a.autoDestroy, true);
        }
        this.cachePopUpScore();
        this.guitarHeroSustains = y.data.guitarHeroSustains;
        if (y.data.hitsoundVolume > 0) {
          D.sound("hitsound");
        }
        var b = new F().loadGraphic(D.image("menuDesat"));
        b.set_antialiasing(y.data.antialiasing);
        a = b.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        b.set_color(-15724528);
        b.set_alpha(0.9);
        this.add(b);
        this.strumLineNotes = new Qa();
        this.add(this.strumLineNotes);
        this.grpNoteSplashes = new Qa();
        this.add(this.grpNoteSplashes);
        a = new ec(100, 100);
        this.grpNoteSplashes.add(a);
        a.set_alpha(0.000001);
        this.opponentStrums = new Qa();
        this.playerStrums = new Qa();
        this.generateStaticArrows(0);
        this.generateStaticArrows(1);
        this.scoreTxt = new U(10, h.height - 50, h.width - 20, "", 20);
        this.scoreTxt.setFormat("assets/fonts/vcr.ttf", 20, -1, "center", Sa.OUTLINE, -16777216);
        a = this.scoreTxt.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        this.scoreTxt.set_borderSize(1.25);
        this.scoreTxt.set_visible(!y.data.hideHud);
        this.add(this.scoreTxt);
        this.dataTxt = new U(10, 580, h.width - 20, "Section: 0", 20);
        this.dataTxt.setFormat("assets/fonts/vcr.ttf", 20, -1, "center", Sa.OUTLINE, -16777216);
        a = this.dataTxt.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        this.dataTxt.set_borderSize(1.25);
        this.add(this.dataTxt);
        b = new U(10, h.height - 24, 0, "Press ESC to Go Back to Chart Editor", 16);
        b.setFormat("assets/fonts/vcr.ttf", 16, -1, "left", Sa.OUTLINE, -16777216);
        b.set_borderSize(2);
        a = b.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        this.add(b);
        h.mouse.set_visible(false);
        this.generateSong(A.SONG.song);
        oa.get_current().stage.addEventListener("keyDown", m(this, this.onKeyPress));
        oa.get_current().stage.addEventListener("keyUp", m(this, this.onKeyRelease));
        this.RecalculateRating();
      }
      g["states.editors.EditorPlayState"] = dn;
      dn.__name__ = "states.editors.EditorPlayState";
      dn.__super__ = db;
      dn.prototype = q(db.prototype, {
        update: function (a) {
          var b = this;
          if (Aa.instance.get_BACK()) {
            var c = true;
          } else {
            c = h.keys.justPressed;
            c = c.keyManager.checkStatusUnsafe(27, c.status);
          }
          if (c) {
            this.endSong();
          } else {
            if (this.startingSong) {
              this.timerToStart -= a * 1000;
              O.songPosition = this.startPos - this.timerToStart;
              if (this.timerToStart < 0) {
                this.startSong();
              }
            } else {
              O.songPosition += a * 1000 * this.playbackRate;
            }
            if (this.unspawnNotes[0] != null) {
              c = this.spawnTime * this.playbackRate;
              if (this.songSpeed < 1) {
                c /= this.songSpeed;
              }
              if (this.unspawnNotes[0].multSpeed < 1) {
                c /= this.unspawnNotes[0].multSpeed;
              }
              while (this.unspawnNotes.length > 0 && this.unspawnNotes[0].strumTime - O.songPosition < c) {
                var d = this.unspawnNotes[0];
                this.notes.insert(0, d);
                d.spawned = true;
                d = this.unspawnNotes.indexOf(d);
                this.unspawnNotes.splice(d, 1);
              }
            }
            this.keysCheck();
            if (this.notes.length > 0) {
              var e = 60 / A.SONG.bpm * 1000;
              this.notes.forEachAlive(function (a) {
                var c = b.playerStrums;
                if (!a.mustPress) {
                  c = b.opponentStrums;
                }
                c = c.members[a.noteData];
                a.followStrumNote(c, e, b.songSpeed / b.playbackRate);
                if (!a.mustPress && !!a.wasGoodHit && !a.hitByOpponent && !a.ignoreNote) {
                  b.opponentNoteHit(a);
                }
                if (a.isSustainNote && c.sustainReduce) {
                  a.clipToStrumNote(c);
                }
                if (O.songPosition - a.strumTime > b.noteKillOffset) {
                  if (!!a.mustPress && !a.ignoreNote && (!!a.tooLate || !a.wasGoodHit)) {
                    b.noteMiss(a);
                  }
                  a.set_active(a.set_visible(false));
                  b.invalidateNote(a);
                }
              });
            }
            c = Ni.floorDecimal((O.songPosition - y.data.noteOffset) / 1000, 1);
            this.dataTxt.set_text("Time: " + c + " / " + this.songLength / 1000 + "\n\t\t\t\t\t\t\nSection: " + this.curSection + "\n\t\t\t\t\t\t\nBeat: " + this.curBeat + "\n\t\t\t\t\t\t\nStep: " + this.curStep);
          }
          db.prototype.update.call(this, a);
        },
        stepHit: function () {
          if (A.SONG.needsVoices && h.sound.music._time >= -y.data.noteOffset) {
            var a = O.songPosition - O.offset;
            var b = this.playbackRate * 20;
            if (Math.abs(h.sound.music._time - a) > b || this.vocals._length > 0 && Math.abs(this.vocals._time - a) > b || this.opponentVocals._length > 0 && Math.abs(this.opponentVocals._time - a) > b) {
              this.resyncVocals();
            }
          }
          db.prototype.stepHit.call(this);
          if (this.curStep != this.lastStepHit) {
            this.lastStepHit = this.curStep;
          }
        },
        beatHit: function () {
          if (!(this.lastBeatHit >= this.curBeat)) {
            var a = y.data.downScroll ? -1 : 1;
            if (a == null) {
              a = -1;
            }
            var b = ao.byY;
            var c = a;
            this.notes.members.sort(function (a, e) {
              return b(c, a, e);
            });
            db.prototype.beatHit.call(this);
            this.lastBeatHit = this.curBeat;
          }
        },
        sectionHit: function () {
          if (A.SONG.notes[this.curSection] != null && A.SONG.notes[this.curSection].changeBPM) {
            O.set_bpm(A.SONG.notes[this.curSection].bpm);
          }
          db.prototype.sectionHit.call(this);
        },
        destroy: function () {
          oa.get_current().stage.removeEventListener("keyDown", m(this, this.onKeyPress));
          oa.get_current().stage.removeEventListener("keyUp", m(this, this.onKeyRelease));
          h.mouse.set_visible(true);
          db.prototype.destroy.call(this);
        },
        startSong: function () {
          this.startingSong = false;
          h.sound.playMusic(this.inst._sound, 1, false);
          h.sound.music.set_time(this.startPos);
          h.sound.music.set_pitch(this.playbackRate);
          h.sound.music.onComplete = m(this, this.finishSong);
          this.vocals.set_volume(1);
          this.vocals.set_time(this.startPos);
          this.vocals.play();
          this.opponentVocals.set_volume(1);
          this.opponentVocals.set_time(this.startPos);
          this.opponentVocals.play();
          this.songLength = h.sound.music._length;
        },
        generateSong: function (a) {
          this.songSpeed = A.SONG.speed;
          a = y.defaultData.gameplaySettings.h.scrolltype;
          switch (Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "scrolltype") ? y.data.gameplaySettings.h.scrolltype : a) {
            case "constant":
              a = y.defaultData.gameplaySettings.h.scrollspeed;
              this.songSpeed = Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "scrollspeed") ? y.data.gameplaySettings.h.scrollspeed : a;
              break;
            case "multiplicative":
              a = y.defaultData.gameplaySettings.h.scrollspeed;
              this.songSpeed = A.SONG.speed * (Object.prototype.hasOwnProperty.call(y.data.gameplaySettings.h, "scrollspeed") ? y.data.gameplaySettings.h.scrollspeed : a);
          }
          this.noteKillOffset = Math.max(O.stepCrochet, 350 / this.songSpeed * this.playbackRate);
          a = A.SONG;
          O.set_bpm(a.bpm);
          this.loadCharacterFile(A.SONG.player1);
          this.loadCharacterFile(A.SONG.player2);
          this.vocals = new Zd();
          this.opponentVocals = new Zd();
          try {
            if (a.needsVoices) {
              var b = "songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3";
              this.vocals.loadEmbedded(b ?? "songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3");
              var c = "songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3";
              if (c != null) {
                this.opponentVocals.loadEmbedded(c);
              }
            }
          } catch (Ep) {
            Pa.lastError = Ep;
          }
          this.vocals.set_volume(0);
          this.opponentVocals.set_volume(0);
          this.vocals.set_pitch(this.playbackRate);
          this.opponentVocals.set_pitch(this.playbackRate);
          h.sound.list.add(this.vocals);
          h.sound.list.add(this.opponentVocals);
          this.inst = new Zd().loadEmbedded("songs:assets/songs/" + w.replace(a.song.toLowerCase(), " ", "-") + "/Inst.mp3");
          h.sound.list.add(this.inst);
          h.sound.music.set_volume(0);
          this.notes = new Qa();
          this.add(this.notes);
          b = a.notes;
          for (c = 0; c < b.length;) {
            a = b[c];
            ++c;
            for (var d = 0, e = a.sectionNotes; d < e.length;) {
              var f = e[d];
              ++d;
              var k = f[0];
              if (!(k < this.startPos)) {
                var g = f[1] % 4 | 0;
                var n = a.mustHitSection;
                if (f[1] > 3) {
                  n = !a.mustHitSection;
                }
                var p = this.unspawnNotes.length > 0 ? this.unspawnNotes[this.unspawnNotes.length - 1 | 0] : null;
                var m = new Na(k, g, p, null, null, this);
                m.mustPress = n;
                m.sustainLength = f[2];
                m.set_noteType(f[3]);
                if (typeof f[3] != "string") {
                  m.set_noteType(fa.noteTypeList[f[3]]);
                }
                p = m.scrollFactor;
                p.set_x(0);
                p.set_y(0);
                this.unspawnNotes.push(m);
                p = Math.floor(m.sustainLength / O.stepCrochet);
                if (p > 0) {
                  f = 0;
                  for (var l = p + 1; f < l;) {
                    var v = f++;
                    p = this.unspawnNotes[this.unspawnNotes.length - 1 | 0];
                    v = new Na(k + O.stepCrochet * v, g, p, true, null, this);
                    v.mustPress = n;
                    v.set_noteType(m.noteType);
                    var q = v.scrollFactor;
                    q.set_x(0);
                    q.set_y(0);
                    v.parent = m;
                    this.unspawnNotes.push(v);
                    m.tail.push(v);
                    v.correctionOffset = m.get_height() / 2;
                    if (A.get_isPixelStage()) {
                      if (p.isSustainNote) {
                        p.scale.set_y(p.scale.y / this.playbackRate);
                        p.updateHitbox();
                      }
                    } else {
                      if (p.isSustainNote) {
                        p.scale.set_y(Na.SUSTAIN_SIZE / p.frameHeight * p.scale.y);
                        p.scale.set_y(p.scale.y / this.playbackRate);
                        p.updateHitbox();
                      }
                      if (y.data.downScroll) {
                        v.correctionOffset = 0;
                      }
                    }
                    if (v.mustPress) {
                      v.set_x(v.x + h.width / 2);
                    } else if (y.data.middleScroll) {
                      v.set_x(v.x + 310);
                      if (g > 1) {
                        v.set_x(v.x + (h.width / 2 + 25));
                      }
                    }
                  }
                }
                if (m.mustPress) {
                  m.set_x(m.x + h.width / 2);
                } else if (y.data.middleScroll) {
                  m.set_x(m.x + 310);
                  if (g > 1) {
                    m.set_x(m.x + (h.width / 2 + 25));
                  }
                }
              }
            }
          }
          this.unspawnNotes.sort(A.sortByTime);
        },
        generateStaticArrows: function (a) {
          var b = y.data.middleScroll ? A.STRUM_X_MIDDLESCROLL : A.STRUM_X;
          var c = y.data.downScroll ? h.height - 150 : 50;
          for (var d = 0; d < 4;) {
            var e = d++;
            var f = 1;
            if (a < 1) {
              if (y.data.opponentStrums) {
                if (y.data.middleScroll) {
                  f = 0.35;
                }
              } else {
                f = 0;
              }
            }
            var k = new ug(b, c, e, a);
            k.downScroll = y.data.downScroll;
            k.set_alpha(f);
            if (a == 1) {
              this.playerStrums.add(k);
            } else {
              if (y.data.middleScroll) {
                k.set_x(k.x + 310);
                if (e > 1) {
                  k.set_x(k.x + (h.width / 2 + 25));
                }
              }
              this.opponentStrums.add(k);
            }
            this.strumLineNotes.add(k);
            k.postAddedToGroup();
          }
        },
        finishSong: function () {
          var a = this;
          if (y.data.noteOffset <= 0) {
            this.endSong();
          } else {
            this.finishTimer = new Ec().start(y.data.noteOffset / 1000, function (b) {
              a.endSong();
            });
          }
        },
        endSong: function () {
          this.vocals.pause();
          this.vocals.destroy();
          this.opponentVocals.pause();
          this.opponentVocals.destroy();
          if (this.finishTimer != null) {
            this.finishTimer.cancel();
            this.finishTimer.destroy();
          }
          this.close();
        },
        cachePopUpScore: function () {
          for (var a = 0, b = this.ratingsData; a < b.length;) {
            var c = b[a];
            ++a;
            D.image(c.image);
          }
          D.image("num0");
          D.image("num1");
          D.image("num2");
          D.image("num3");
          D.image("num4");
          D.image("num5");
          D.image("num6");
          D.image("num7");
          D.image("num8");
          D.image("num9");
        },
        popUpScore: function (a) {
          var b = Math.abs(a.strumTime - O.songPosition + y.data.ratingOffset);
          this.vocals.set_volume(1);
          var c = v.string(this.combo);
          var d = new U(0, 0, 0, c, 32);
          d.set_x((h.width - d.get_width()) / 2);
          d.set_y((h.height - d.get_height()) / 2);
          d.set_x(h.width * 0.35);
          var e = new F();
          b = O.judgeNote(this.ratingsData, b / this.playbackRate);
          this.totalNotesHit += b.ratingMod;
          a.ratingMod = b.ratingMod;
          if (!a.ratingDisabled) {
            b.hits++;
          }
          a.rating = b.name;
          if (b.noteSplash && !a.noteSplashData.disabled) {
            this.spawnNoteSplashOnNote(a);
          }
          if (!a.ratingDisabled) {
            this.songHits++;
            this.totalPlayed++;
            this.RecalculateRating(false);
          }
          e.loadGraphic(D.image("" + b.image));
          e.set_x((h.width - e.get_width()) / 2);
          e.set_y((h.height - e.get_height()) / 2);
          e.set_x(d.x - 40);
          e.set_y(e.y - 60);
          e.acceleration.set_y(this.playbackRate * 550 * this.playbackRate);
          e.velocity.set_y(e.velocity.y - h.random.int(140, 175) * this.playbackRate);
          e.velocity.set_x(e.velocity.x - h.random.int(0, 10) * this.playbackRate);
          e.set_visible(!y.data.hideHud && this.showRating);
          e.set_x(e.x + y.data.comboOffset[0]);
          e.set_y(e.y - y.data.comboOffset[1]);
          var f = new F().loadGraphic(D.image("combo"));
          f.set_x((h.width - f.get_width()) / 2);
          f.set_y((h.height - f.get_height()) / 2);
          f.set_x(d.x);
          f.acceleration.set_y(h.random.int(200, 300) * this.playbackRate * this.playbackRate);
          f.velocity.set_y(f.velocity.y - h.random.int(140, 160) * this.playbackRate);
          f.set_visible(!y.data.hideHud && this.showCombo);
          f.set_x(f.x + y.data.comboOffset[0]);
          f.set_y(f.y - y.data.comboOffset[1]);
          f.set_y(f.y + 60);
          f.velocity.set_x(f.velocity.x + h.random.int(1, 10) * this.playbackRate);
          this.insert(this.members.indexOf(this.strumLineNotes), e);
          if (!y.data.comboStacking) {
            if (this.lastRating != null) {
              this.lastRating.kill();
            }
            this.lastRating = e;
          }
          e.setGraphicSize(e.get_width() * 0.7 | 0);
          e.updateHitbox();
          f.setGraphicSize(f.get_width() * 0.7 | 0);
          f.updateHitbox();
          a = [];
          if (this.combo >= 1000) {
            a.push(Math.floor(this.combo / 1000) % 10);
          }
          a.push(Math.floor(this.combo / 100) % 10);
          a.push(Math.floor(this.combo / 10) % 10);
          a.push(this.combo % 10);
          c = b = 0;
          if (this.showCombo) {
            this.insert(this.members.indexOf(this.strumLineNotes), f);
          }
          if (!y.data.comboStacking) {
            if (this.lastCombo != null) {
              this.lastCombo.kill();
            }
            this.lastCombo = f;
          }
          if (this.lastScore != null) {
            while (this.lastScore.length > 0) {
              this.lastScore[0].kill();
              r.remove(this.lastScore, this.lastScore[0]);
            }
          }
          for (var k = 0; k < a.length;) {
            var g = a[k];
            ++k;
            g = [new F().loadGraphic(D.image("num" + (g | 0)))];
            g[0].set_x((h.width - g[0].get_width()) / 2);
            g[0].set_y((h.height - g[0].get_height()) / 2);
            g[0].set_x(d.x + b * 43 - 90 + y.data.comboOffset[2]);
            g[0].set_y(g[0].y + (80 - y.data.comboOffset[3]));
            if (!y.data.comboStacking) {
              this.lastScore.push(g[0]);
            }
            g[0].setGraphicSize(g[0].get_width() * 0.5 | 0);
            g[0].updateHitbox();
            g[0].acceleration.set_y(h.random.int(200, 300) * this.playbackRate * this.playbackRate);
            g[0].velocity.set_y(g[0].velocity.y - h.random.int(140, 160) * this.playbackRate);
            g[0].velocity.set_x(h.random.float(-5, 5) * this.playbackRate);
            g[0].set_visible(!y.data.hideHud);
            if (this.showComboNum) {
              this.insert(this.members.indexOf(this.strumLineNotes), g[0]);
            }
            var n = O.crochet * 0.002;
            Da.tween(g[0], {
              alpha: 0
            }, 0.2 / this.playbackRate, {
              onComplete: function (a) {
                return function (b) {
                  a[0].destroy();
                };
              }(g),
              startDelay: n / this.playbackRate
            });
            ++b;
            if (g[0].x > c) {
              c = g[0].x;
            }
          }
          f.set_x(c + 50);
          d.set_text(v.string(a));
          Da.tween(e, {
            alpha: 0
          }, 0.2 / this.playbackRate, {
            startDelay: O.crochet * 0.001 / this.playbackRate
          });
          Da.tween(f, {
            alpha: 0
          }, 0.2 / this.playbackRate, {
            onComplete: function (a) {
              d.destroy();
              f.destroy();
              e.destroy();
            },
            startDelay: O.crochet * 0.002 / this.playbackRate
          });
        },
        onKeyPress: function (a) {
          a = a.keyCode;
          var b = A.getKeyFromEvent(this.keysArray, a);
          if (!Aa.instance.controllerMode) {
            if (h.keys.checkStatus(a, 2)) {
              this.keyPressed(b);
            }
          }
        },
        keyPressed: function (a) {
          if (!(a < 0)) {
            var b = O.songPosition;
            if (O.songPosition >= 0) {
              O.songPosition = h.sound.music._time;
            }
            var c = [];
            for (var d = 0, e = this.notes.members; d < e.length;) {
              var f = e[d];
              ++d;
              if (f != null && !!f.canBeHit && !!f.mustPress && !f.tooLate && !f.wasGoodHit && !f.blockHit && !f.isSustainNote && f.noteData == a) {
                c.push(f);
              }
            }
            c.sort(A.sortHitNotes);
            if (c.length != 0) {
              d = c[0];
              if (c.length > 1) {
                c = c[1];
                if (c.noteData == d.noteData) {
                  if (Math.abs(c.strumTime - d.strumTime) < 1) {
                    this.invalidateNote(c);
                  } else if (c.strumTime < d.strumTime) {
                    d = c;
                  }
                }
              }
              this.goodNoteHit(d);
            }
            O.songPosition = b;
            a = this.playerStrums.members[a];
            if (a != null && a.animation._curAnim.name != "confirm") {
              a.playAnim("pressed");
              a.resetAnim = 0;
            }
          }
        },
        onKeyRelease: function (a) {
          a = A.getKeyFromEvent(this.keysArray, a.keyCode);
          if (!Aa.instance.controllerMode && a > -1) {
            this.keyReleased(a);
          }
        },
        keyReleased: function (a) {
          a = this.playerStrums.members[a];
          if (a != null) {
            a.playAnim("static");
            a.resetAnim = 0;
          }
        },
        keysCheck: function () {
          var a = [];
          var b = [];
          var c = [];
          for (var d = 0, e = this.keysArray; d < e.length;) {
            var f = e[d];
            ++d;
            a.push(Aa.instance.pressed(f));
            if (Aa.instance.controllerMode) {
              b.push(Aa.instance.justPressed(f));
              c.push(Aa.instance.justReleased(f));
            }
          }
          if (Aa.instance.controllerMode && b.indexOf(true) != -1) {
            d = 0;
            e = b.length;
            while (d < e) {
              f = d++;
              if (b[f]) {
                this.keyPressed(f);
              }
            }
          }
          if (this.notes.length > 0) {
            for (b = new tc(this.notes.members, null); b.hasNext();) {
              d = b.next();
              e = d != null && d.canBeHit && d.mustPress && !d.tooLate && !d.wasGoodHit && !d.blockHit;
              if (this.guitarHeroSustains) {
                e = e && d.parent != null && d.parent.wasGoodHit;
              }
              if (e && d.isSustainNote && a[d.noteData]) {
                this.goodNoteHit(d);
              }
            }
          }
          if (Aa.instance.controllerMode && c.indexOf(true) != -1) {
            d = 0;
            e = c.length;
            while (d < e) {
              f = d++;
              if (c[f]) {
                this.keyReleased(f);
              }
            }
          }
        },
        opponentNoteHit: function (a) {
          if (A.SONG.needsVoices && this.opponentVocals._length <= 0) {
            this.vocals.set_volume(1);
          }
          var b = this.opponentStrums.members[Math.abs(a.noteData) | 0];
          if (b != null) {
            b.playAnim("confirm", true);
            b.resetAnim = O.stepCrochet * 1.25 / 1000 / this.playbackRate;
          }
          a.hitByOpponent = true;
          if (!a.isSustainNote) {
            this.invalidateNote(a);
          }
        },
        goodNoteHit: function (a) {
          if (!a.wasGoodHit) {
            a.wasGoodHit = true;
            if (y.data.hitsoundVolume > 0 && !a.hitsoundDisabled) {
              h.sound.play(D.sound("hitsound"), y.data.hitsoundVolume);
            }
            if (a.hitCausesMiss) {
              this.noteMiss(a);
              if (!a.noteSplashData.disabled && !a.isSustainNote) {
                this.spawnNoteSplashOnNote(a);
              }
            } else {
              if (!a.isSustainNote) {
                this.combo++;
                if (this.combo > 9999) {
                  this.combo = 9999;
                }
                this.popUpScore(a);
              }
              var b = this.playerStrums.members[a.noteData];
              if (b != null) {
                b.playAnim("confirm", true);
              }
              this.vocals.set_volume(1);
            }
            if (!a.isSustainNote) {
              this.invalidateNote(a);
            }
          }
        },
        noteMiss: function (a) {
          var b = this;
          this.notes.forEachAlive(function (c) {
            if (a != c && a.mustPress && a.noteData == c.noteData && a.isSustainNote == c.isSustainNote && Math.abs(a.strumTime - c.strumTime) < 1) {
              b.invalidateNote(a);
            }
          });
          if (a != null && this.guitarHeroSustains && a.parent == null) {
            if (a.tail.length > 0) {
              a.set_alpha(0.35);
              for (var c = 0, d = a.tail; c < d.length;) {
                var e = d[c];
                ++c;
                e.set_alpha(a.alpha);
                e.missed = true;
                e.canBeHit = false;
                e.ignoreNote = true;
                e.tooLate = true;
              }
              a.missed = true;
              a.canBeHit = false;
            }
            if (a.missed) {
              return;
            }
          }
          if (a != null && this.guitarHeroSustains && a.parent != null && a.isSustainNote) {
            if (a.missed) {
              return;
            }
            d = a.parent;
            if (d.wasGoodHit && d.tail.length > 0) {
              c = 0;
              d = d.tail;
              while (c < d.length) {
                e = d[c];
                ++c;
                if (e != a) {
                  e.missed = true;
                  e.canBeHit = false;
                  e.ignoreNote = true;
                  e.tooLate = true;
                }
              }
            }
          }
          this.songMisses++;
          this.totalPlayed++;
          this.RecalculateRating(true);
          this.vocals.set_volume(0);
          this.combo = 0;
        },
        invalidateNote: function (a) {
          a.kill();
          this.notes.remove(a, true);
          a.destroy();
        },
        spawnNoteSplashOnNote: function (a) {
          if (a != null) {
            var b = this.playerStrums.members[a.noteData];
            if (b != null) {
              this.spawnNoteSplash(b.x, b.y, a.noteData, a);
            }
          }
        },
        spawnNoteSplash: function (a, b, c, d) {
          var e = this.grpNoteSplashes.recycle(ec);
          e.setupNoteSplash(a, b, c, d);
          this.grpNoteSplashes.add(e);
        },
        resyncVocals: function () {
          if (this.finishTimer == null) {
            h.sound.music.play();
            h.sound.music.set_pitch(this.playbackRate);
            O.songPosition = h.sound.music._time;
            if (O.songPosition <= this.vocals._length) {
              this.vocals.set_time(O.songPosition);
              this.vocals.set_pitch(this.playbackRate);
            }
            if (O.songPosition <= this.opponentVocals._length) {
              this.opponentVocals.set_time(O.songPosition);
              this.opponentVocals.set_pitch(this.playbackRate);
            }
            this.vocals.play();
            this.opponentVocals.play();
          }
        },
        RecalculateRating: function (a) {
          if (a == null) {
            a = false;
          }
          if (this.totalPlayed != 0) {
            this.ratingPercent = Math.min(1, Math.max(0, this.totalNotesHit / this.totalPlayed));
          }
          this.fullComboUpdate();
          this.updateScore(a);
        },
        updateScore: function (a) {
          a = "?";
          if (this.totalPlayed != 0) {
            a = "" + Ni.floorDecimal(this.ratingPercent * 100, 2) + "% - " + this.ratingFC;
          }
          this.scoreTxt.set_text("Hits: " + this.songHits + " | Misses: " + this.songMisses + " | Rating: " + a);
        },
        fullComboUpdate: function () {
          var a = this.ratingsData[0].hits;
          var b = this.ratingsData[1].hits;
          var c = this.ratingsData[2].hits;
          var d = this.ratingsData[3].hits;
          this.ratingFC = "Clear";
          if (this.songMisses < 1) {
            if (c > 0 || d > 0) {
              this.ratingFC = "FC";
            } else if (b > 0) {
              this.ratingFC = "GFC";
            } else if (a > 0) {
              this.ratingFC = "SFC";
            }
          } else if (this.songMisses < 10) {
            this.ratingFC = "SDCB";
          }
        },
        loadCharacterFile: function (a) {
          a = "characters/" + a + ".json";
          if (a == null) {
            a = "";
          }
          a = "assets/shared/" + a;
          if (!Q.exists(a)) {
            a = "characters/" + id.DEFAULT_CHARACTER + ".json";
            if (a == null) {
              a = "";
            }
            a = "assets/shared/" + a;
          }
          a = Q.getText(a);
          return JSON.parse(a);
        },
        __class__: dn
      });
      function Nf(a, b) {
        this.curSelected = this.curDirectory = 0;
        this.directories = [null];
        this.options = "Chart Editor;Character Editor;Week Editor;Menu Character Editor;Dialogue Editor;Dialogue Portrait Editor;Note Splash Debug".split(";");
        P.call(this, a, b);
      }
      g["states.editors.MasterEditorMenu"] = Nf;
      Nf.__name__ = "states.editors.MasterEditorMenu";
      Nf.__super__ = P;
      Nf.prototype = q(P.prototype, {
        create: function () {
          h.camera.bgColor = -16777216;
          var a = new F().loadGraphic(D.image("menuDesat"));
          var b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_color(-13290187);
          this.add(a);
          this.grpTexts = new Qa();
          this.add(this.grpTexts);
          a = 0;
          for (b = this.options.length; a < b;) {
            var c = a++;
            var d = new Gb(90, 320, this.options[c], true);
            d.isMenuItem = true;
            d.targetY = c;
            this.grpTexts.add(d);
            d.snapToPosition();
          }
          this.changeSelection();
          h.mouse.set_visible(false);
          P.prototype.create.call(this);
        },
        update: function (a) {
          if (this.get_controls().get_UI_UP_P()) {
            this.changeSelection(-1);
          }
          if (this.get_controls().get_UI_DOWN_P()) {
            this.changeSelection(1);
          }
          if (this.get_controls().get_BACK()) {
            P.switchState(new Ac());
          }
          if (this.get_controls().get_ACCEPT()) {
            switch (this.options[this.curSelected]) {
              case "Character Editor":
                P.switchState(qc.getNextState(new dk(id.DEFAULT_CHARACTER, false), false));
                break;
              case "Chart Editor":
                var b = new fa();
                var c = false;
                if (c == null) {
                  c = false;
                }
                P.switchState(qc.getNextState(b, c));
                break;
              case "Dialogue Editor":
                b = new Pf();
                c = false;
                if (c == null) {
                  c = false;
                }
                P.switchState(qc.getNextState(b, c));
                break;
              case "Dialogue Portrait Editor":
                b = new Of();
                c = false;
                if (c == null) {
                  c = false;
                }
                P.switchState(qc.getNextState(b, c));
                break;
              case "Menu Character Editor":
                P.switchState(new en());
                break;
              case "Note Splash Debug":
                P.switchState(new eh());
                break;
              case "Week Editor":
                P.switchState(new Ia());
            }
            h.sound.music.set_volume(0);
            Ta.destroyFreeplayVocals();
          }
          c = b = 0;
          for (var d = this.grpTexts.members; c < d.length;) {
            var e = d[c];
            ++c;
            e.targetY = b - this.curSelected;
            ++b;
            e.set_alpha(0.6);
            if (e.targetY == 0) {
              e.set_alpha(1);
            }
          }
          P.prototype.update.call(this, a);
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          h.sound.play(D.sound("scrollMenu"), 0.4);
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.options.length - 1;
          }
          if (this.curSelected >= this.options.length) {
            this.curSelected = 0;
          }
        },
        __class__: Nf
      });
      function en(a, b) {
        this._file = null;
        this.curTypeSelected = 0;
        this.blockPressWhileTypingOn = [];
        this.defaultCharacters = ["dad", "bf", "gf"];
        this.characterFile = null;
        P.call(this, a, b);
      }
      g["states.editors.MenuCharacterEditorState"] = en;
      en.__name__ = "states.editors.MenuCharacterEditorState";
      en.__super__ = P;
      en.prototype = q(P.prototype, {
        create: function () {
          this.characterFile = {
            image: "Menu_Dad",
            scale: 1,
            position: [0, 0],
            idle_anim: "M Dad Idle",
            confirm_anim: "M Dad Idle",
            flipX: false
          };
          this.grpWeekCharacters = new Qa();
          var a = new re(h.width * 0.25 - 150, this.defaultCharacters[0]);
          a.set_y(a.y + 70);
          a.set_alpha(0.2);
          this.grpWeekCharacters.add(a);
          a = new re(h.width * 0.5 - 150, this.defaultCharacters[1]);
          a.set_y(a.y + 70);
          a.set_alpha(0.2);
          this.grpWeekCharacters.add(a);
          a = new re(h.width * 0.75 - 150, this.defaultCharacters[2]);
          a.set_y(a.y + 70);
          a.set_alpha(0.2);
          this.grpWeekCharacters.add(a);
          this.add(new F(0, 56).makeGraphic(h.width, 386, -405679));
          this.add(this.grpWeekCharacters);
          this.txtOffsets = new U(20, 10, 0, "[0, 0]", 32);
          this.txtOffsets.setFormat("VCR OSD Mono", 32, -1, "center");
          this.txtOffsets.set_alpha(0.7);
          this.add(this.txtOffsets);
          a = new U(0, 540, h.width, "Arrow Keys - Change Offset (Hold shift for 10x speed)\n\t\t\t\nSpace - Play \"Start Press\" animation (Boyfriend Character Type)", 16);
          a.setFormat("assets/fonts/vcr.ttf", 16, -1, "center");
          var b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(a);
          this.addEditorBox();
          h.mouse.set_visible(true);
          this.updateCharTypeBox();
          P.prototype.create.call(this);
        },
        addEditorBox: function () {
          var a = this;
          var b = [{
            name: "Character Type",
            label: "Character Type"
          }];
          this.UI_typebox = new je(null, null, b, null, true);
          this.UI_typebox.resize(120, 180);
          this.UI_typebox.set_x(100);
          this.UI_typebox.set_y(h.height - this.UI_typebox.get_height() - 50);
          b = this.UI_typebox.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.addTypeUI();
          this.add(this.UI_typebox);
          b = [{
            name: "Character",
            label: "Character"
          }];
          this.UI_mainbox = new je(null, null, b, null, true);
          this.UI_mainbox.resize(240, 180);
          this.UI_mainbox.set_x(h.width - this.UI_mainbox.get_width() - 100);
          this.UI_mainbox.set_y(h.height - this.UI_mainbox.get_height() - 50);
          b = this.UI_mainbox.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.addCharacterUI();
          this.add(this.UI_mainbox);
          var c = new qb(0, 480, "Load Character", function () {
            a.loadCharacter();
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((h.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((h.height - c.get_height()) / 2);
          }
          c.set_x(c.x - 60);
          this.add(c);
          c = new qb(0, 480, "Save Character", function () {
            a.saveCharacter();
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((h.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((h.height - c.get_height()) / 2);
          }
          c.set_x(c.x + 60);
          this.add(c);
        },
        addTypeUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_typebox);
          b.name = "Character Type";
          this.opponentCheckbox = new xb(10, 20, null, null, "Opponent", 100);
          this.opponentCheckbox.callback = function () {
            a.curTypeSelected = 0;
            a.updateCharTypeBox();
          };
          this.boyfriendCheckbox = new xb(this.opponentCheckbox.x, this.opponentCheckbox.y + 40, null, null, "Boyfriend", 100);
          this.boyfriendCheckbox.callback = function () {
            a.curTypeSelected = 1;
            a.updateCharTypeBox();
          };
          this.girlfriendCheckbox = new xb(this.boyfriendCheckbox.x, this.boyfriendCheckbox.y + 40, null, null, "Girlfriend", 100);
          this.girlfriendCheckbox.callback = function () {
            a.curTypeSelected = 2;
            a.updateCharTypeBox();
          };
          b.add(this.opponentCheckbox);
          b.add(this.boyfriendCheckbox);
          b.add(this.girlfriendCheckbox);
          this.UI_typebox.addGroup(b);
        },
        addCharacterUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_mainbox);
          b.name = "Character";
          this.imageInputText = new ub(10, 20, 80, this.characterFile.image, 8);
          this.blockPressWhileTypingOn.push(this.imageInputText);
          this.idleInputText = new ub(10, this.imageInputText.y + 35, 100, this.characterFile.idle_anim, 8);
          this.blockPressWhileTypingOn.push(this.idleInputText);
          this.confirmInputText = new ub(10, this.idleInputText.y + 35, 100, this.characterFile.confirm_anim, 8);
          this.blockPressWhileTypingOn.push(this.confirmInputText);
          this.flipXCheckbox = new xb(10, this.confirmInputText.y + 30, null, null, "Flip X", 100);
          this.flipXCheckbox.callback = function () {
            a.grpWeekCharacters.members[a.curTypeSelected].set_flipX(a.flipXCheckbox.checked);
            a.characterFile.flipX = a.flipXCheckbox.checked;
          };
          var c = new qb(140, this.confirmInputText.y + 30, "Reload Char", function () {
            a.reloadSelectedCharacter();
          });
          this.scaleStepper = new Ib(140, this.imageInputText.y, 0.05, 1, 0.1, 30, 2);
          var d = new U(10, this.confirmInputText.y - 18, 0, "Start Press animation on the .XML:");
          b.add(new U(10, this.imageInputText.y - 18, 0, "Image file name:"));
          b.add(new U(10, this.idleInputText.y - 18, 0, "Idle animation on the .XML:"));
          b.add(new U(this.scaleStepper.x, this.scaleStepper.y - 18, 0, "Scale:"));
          b.add(this.flipXCheckbox);
          b.add(c);
          b.add(d);
          b.add(this.imageInputText);
          b.add(this.idleInputText);
          b.add(this.confirmInputText);
          b.add(this.scaleStepper);
          this.UI_mainbox.addGroup(b);
        },
        updateCharTypeBox: function () {
          this.opponentCheckbox.set_checked(false);
          this.boyfriendCheckbox.set_checked(false);
          this.girlfriendCheckbox.set_checked(false);
          switch (this.curTypeSelected) {
            case 0:
              this.opponentCheckbox.set_checked(true);
              break;
            case 1:
              this.boyfriendCheckbox.set_checked(true);
              break;
            case 2:
              this.girlfriendCheckbox.set_checked(true);
          }
          this.updateCharacters();
        },
        updateCharacters: function () {
          var a = this.grpWeekCharacters.members[0];
          a.set_alpha(0.2);
          a.character = "";
          a.changeCharacter(this.defaultCharacters[0]);
          a = this.grpWeekCharacters.members[1];
          a.set_alpha(0.2);
          a.character = "";
          a.changeCharacter(this.defaultCharacters[1]);
          a = this.grpWeekCharacters.members[2];
          a.set_alpha(0.2);
          a.character = "";
          a.changeCharacter(this.defaultCharacters[2]);
          this.reloadSelectedCharacter();
        },
        reloadSelectedCharacter: function () {
          var a = this.grpWeekCharacters.members[this.curTypeSelected];
          a.set_alpha(1);
          var b = "menucharacters/" + this.characterFile.image;
          var c = D.image(b, null, true);
          a.set_frames(ob.fromSparrow(c, D.getPath("images/" + b + ".xml", null, null)));
          a.animation.addByPrefix("idle", this.characterFile.idle_anim, 24);
          if (this.curTypeSelected == 1) {
            a.animation.addByPrefix("confirm", this.characterFile.confirm_anim, 24, false);
          }
          a.set_flipX(this.characterFile.flipX == 1);
          b = a.scale;
          var d = c = this.characterFile.scale;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          a.updateHitbox();
          a.animation.play("idle");
          this.updateOffset();
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b instanceof ub) {
            if (b == this.imageInputText) {
              this.characterFile.image = this.imageInputText.text;
            } else if (b == this.idleInputText) {
              this.characterFile.idle_anim = this.idleInputText.text;
            } else if (b == this.confirmInputText) {
              this.characterFile.confirm_anim = this.confirmInputText.text;
            }
          } else if (a == "change_numeric_stepper" && b instanceof Ib && b == this.scaleStepper) {
            this.characterFile.scale = this.scaleStepper.value;
            this.reloadSelectedCharacter();
          }
        },
        update: function (a) {
          var b = false;
          for (var c = 0, d = this.blockPressWhileTypingOn; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.hasFocus) {
              y.toggleVolumeKeys(false);
              b = true;
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                e.set_hasFocus(false);
              }
              break;
            }
          }
          if (!b) {
            y.toggleVolumeKeys(true);
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(27, c.status)) {
              P.switchState(new Nf());
              b = h.sound;
              e = D.returnSound("music", "freakyMenu", null);
              b.playMusic(e);
            }
            b = 1;
            c = h.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(16, c.status)) {
              b = 10;
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(37, c.status)) {
              this.characterFile.position[0] += b;
              this.updateOffset();
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(39, c.status)) {
              this.characterFile.position[0] -= b;
              this.updateOffset();
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(38, c.status)) {
              this.characterFile.position[1] += b;
              this.updateOffset();
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(40, c.status)) {
              this.characterFile.position[1] -= b;
              this.updateOffset();
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(32, c.status) && this.curTypeSelected == 1) {
              this.grpWeekCharacters.members[this.curTypeSelected].animation.play("confirm", true);
            }
          }
          b = this.grpWeekCharacters.members[1];
          if (b.animation._curAnim != null && b.animation._curAnim.name == "confirm" && b.animation._curAnim.finished) {
            b.animation.play("idle", true);
          }
          P.prototype.update.call(this, a);
        },
        updateOffset: function () {
          var a = this.grpWeekCharacters.members[this.curTypeSelected].offset;
          var b = this.characterFile.position[0];
          var c = this.characterFile.position[1];
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this.txtOffsets.set_text("" + v.string(this.characterFile.position));
        },
        loadCharacter: function () {
          var a = new Fi("JSON", "json");
          this._file = new Fe();
          this._file.addEventListener("complete", m(this, this.onLoadComplete));
          this._file.addEventListener("cancel", m(this, this.onLoadCancel));
          this._file.addEventListener("ioError", m(this, this.onLoadError));
          this._file.browse([a]);
        },
        onLoadComplete: function (a) {
          this._file.removeEventListener("complete", m(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", m(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", m(this, this.onLoadError));
          zb.trace("File couldn't be loaded! You aren't on Desktop, are you?", {
            fileName: "source/states/editors/MenuCharacterEditorState.hx",
            lineNumber: 353,
            className: "states.editors.MenuCharacterEditorState",
            methodName: "onLoadComplete"
          });
        },
        onLoadCancel: function (a) {
          this._file.removeEventListener("complete", m(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", m(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", m(this, this.onLoadError));
          this._file = null;
          zb.trace("Cancelled file loading.", {
            fileName: "source/states/editors/MenuCharacterEditorState.hx",
            lineNumber: 366,
            className: "states.editors.MenuCharacterEditorState",
            methodName: "onLoadCancel"
          });
        },
        onLoadError: function (a) {
          this._file.removeEventListener("complete", m(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", m(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", m(this, this.onLoadError));
          this._file = null;
          zb.trace("Problem loading file", {
            fileName: "source/states/editors/MenuCharacterEditorState.hx",
            lineNumber: 378,
            className: "states.editors.MenuCharacterEditorState",
            methodName: "onLoadError"
          });
        },
        saveCharacter: function () {
          var a = JSON.stringify(this.characterFile, null, "\t");
          if (a.length > 0) {
            var b = w.trim(this.imageInputText.text).split("_");
            b = w.replace(b[b.length - 1].toLowerCase(), " ", "");
            this._file = new Fe();
            this._file.addEventListener("complete", m(this, this.onSaveComplete));
            this._file.addEventListener("cancel", m(this, this.onSaveCancel));
            this._file.addEventListener("ioError", m(this, this.onSaveError));
            this._file.save(a, b + ".json");
          }
        },
        onSaveComplete: function (a) {
          this._file.removeEventListener("complete", m(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", m(this, this.onSaveError));
          this._file = null;
          h.log.advanced("Successfully saved file.", xa.NOTICE);
        },
        onSaveCancel: function (a) {
          this._file.removeEventListener("complete", m(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", m(this, this.onSaveError));
          this._file = null;
        },
        onSaveError: function (a) {
          this._file.removeEventListener("complete", m(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", m(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", m(this, this.onSaveError));
          this._file = null;
          h.log.advanced("Problem saving file", xa.ERROR, true);
        },
        __class__: en
      });
      function eh(a, b) {
        this.maxAnims = this.maxFrame = 0;
        this.copiedArray = null;
        this.texturePath = "";
        this.textureName = eh.defaultTexture;
        this.visibleTime = this.pressEnterToSave = 0;
        this.curAnim = 1;
        this.selecArr = null;
        this.maxNotes = 4;
        this.curSelected = 0;
        this.forceFrame = -1;
        P.call(this, a, b);
      }
      g["states.editors.NoteSplashDebugState"] = eh;
      eh.__name__ = "states.editors.NoteSplashDebugState";
      eh.__super__ = P;
      eh.prototype = q(P.prototype, {
        create: function () {
          var a = this;
          var b = eb._new();
          var c = 0;
          var d = c * 0 + 0.5;
          var e = 1;
          if (e == null) {
            e = 1;
          }
          c = Math.round((c + 0.5) * 255);
          b = b & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16;
          c = Math.round(d * 255);
          b = b & -65281 | (c > 255 ? 255 : c < 0 ? 0 : c) << 8;
          c = 128;
          b = b & -256 | (c > 255 ? 255 : c < 0 ? 0 : c);
          c = Math.round(e * 255);
          h.camera.bgColor = b & 16777215 | (c > 255 ? 255 : c < 0 ? 0 : c) << 24;
          this.selection = new F(0, 270).makeGraphic(150, 150, -16777216);
          this.selection.set_alpha(0.4);
          this.add(this.selection);
          this.notes = new Qa();
          this.add(this.notes);
          this.splashes = new Qa();
          this.add(this.splashes);
          b = 0;
          for (d = this.maxNotes; b < d;) {
            c = b++;
            e = c * 220 + 240;
            c = new ug(e, 290, c, 0);
            c.set_alpha(0.75);
            c.playAnim("static");
            this.notes.add(c);
            e = new F(e, 290);
            e.setPosition(e.x - Na.swagWidth * 0.95, e.y - Na.swagWidth);
            e.shader = c.rgbShader.parent.shader;
            e.set_antialiasing(y.data.antialiasing);
            this.splashes.add(e);
          }
          b = new U(60, 520, null, "Image Name:", 16);
          this.add(b);
          this.imageInputText = new af(60, 540, 360, eh.defaultTexture, 16);
          this.imageInputText.callback = function (b, c) {
            if (c == "enter") {
              a.imageInputText.set_hasFocus(false);
              a.textureName = b;
              try {
                a.loadFrames();
              } catch (t) {
                Pa.lastError = t;
                c = G.caught(t).unwrap();
                zb.trace("ERROR! " + v.string(c), {
                  fileName: "source/states/editors/NoteSplashDebugState.hx",
                  lineNumber: 83,
                  className: "states.editors.NoteSplashDebugState",
                  methodName: "create"
                });
                a.textureName = eh.defaultTexture;
                a.loadFrames();
                a.missingText.set_text("ERROR WHILE LOADING IMAGE:\n" + b);
                b = a.missingText;
                c = 16;
                if (c == null) {
                  c = 17;
                }
                if (c == 1 || c == 17) {
                  b.set_x((h.width - b.get_width()) / 2);
                }
                if (c == 16 || c == 17) {
                  b.set_y((h.height - b.get_height()) / 2);
                }
                a.missingText.set_visible(true);
                a.missingTextBG.set_visible(true);
                h.sound.play(D.sound("cancelMenu"));
                new Ec().start(2.5, function (b) {
                  a.missingText.set_visible(false);
                  a.missingTextBG.set_visible(false);
                });
              }
            } else {
              zb.trace("changed image to " + b, {
                fileName: "source/states/editors/NoteSplashDebugState.hx",
                lineNumber: 101,
                className: "states.editors.NoteSplashDebugState",
                methodName: "create"
              });
            }
          };
          this.add(this.imageInputText);
          b = new U(60, 640, null, "Animation Name:", 16);
          this.add(b);
          this.nameInputText = new af(60, 660, 360, "", 16);
          this.nameInputText.callback = function (b, c) {
            if (c == "enter") {
              a.nameInputText.set_hasFocus(false);
            } else {
              zb.trace("changed anim name to " + b, {
                fileName: "source/states/editors/NoteSplashDebugState.hx",
                lineNumber: 119,
                className: "states.editors.NoteSplashDebugState",
                methodName: "create"
              });
              a.config.anim = b;
              a.curAnim = 1;
              a.reloadAnims();
            }
          };
          this.add(this.nameInputText);
          this.add(new U(60, 590, 0, "Min/Max Framerate:", 16));
          this.stepperMinFps = new Ib(60, 610, 1, 22, 1, 60, 0);
          this.stepperMinFps.name = "min_fps";
          this.add(this.stepperMinFps);
          this.stepperMaxFps = new Ib(120, 610, 1, 26, 1, 60, 0);
          this.stepperMaxFps.name = "max_fps";
          this.add(this.stepperMaxFps);
          this.offsetsText = new U(300, 150, 680, "", 16);
          this.offsetsText.setFormat("assets/fonts/vcr.ttf", 16, -1, "center", Sa.OUTLINE, -16777216);
          b = this.offsetsText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.offsetsText);
          this.curFrameText = new U(300, 100, 680, "", 16);
          this.curFrameText.setFormat("assets/fonts/vcr.ttf", 16, -1, "center", Sa.OUTLINE, -16777216);
          b = this.curFrameText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.curFrameText);
          this.curAnimText = new U(300, 50, 680, "", 16);
          this.curAnimText.setFormat("assets/fonts/vcr.ttf", 16, -1, "center", Sa.OUTLINE, -16777216);
          b = this.curAnimText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.curAnimText);
          d = new U(0, 520, h.width, "Press SPACE to Reset animation\n\n\t\t\tPress ENTER twice to save to the loaded Note Splash PNG's folder\n\n\t\t\tA/D change selected note - Arrow Keys to change offset (Hold shift for 10x)\n\n\t\t\tCtrl + C/V - Copy & Paste", 16);
          d.setFormat("assets/fonts/vcr.ttf", 16, -1, "center", Sa.OUTLINE, -16777216);
          b = d.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(d);
          this.savedText = new U(0, 340, h.width, "", 24);
          this.savedText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", Sa.OUTLINE, -16777216);
          b = this.savedText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.savedText);
          this.missingTextBG = new F().makeGraphic(h.width, h.height, -16777216);
          this.missingTextBG.set_alpha(0.6);
          this.missingTextBG.set_visible(false);
          this.add(this.missingTextBG);
          this.missingText = new U(50, 0, h.width - 100, "", 24);
          this.missingText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", Sa.OUTLINE, -16777216);
          b = this.missingText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.missingText.set_visible(false);
          this.add(this.missingText);
          this.loadFrames();
          this.changeSelection();
          P.prototype.create.call(this);
          h.mouse.set_visible(true);
        },
        update: function (a) {
          var b = this;
          va.__cast(this.stepperMinFps.text_field, af).set_hasFocus(va.__cast(this.stepperMaxFps.text_field, af).set_hasFocus(false));
          var c = !this.nameInputText.hasFocus && !this.imageInputText.hasFocus;
          if (this.get_controls().get_BACK() && c) {
            P.switchState(new Nf());
            var d = h.sound;
            var e = D.returnSound("music", "freakyMenu", null);
            d.playMusic(e);
            h.mouse.set_visible(false);
          }
          P.prototype.update.call(this, a);
          if (!!c && !(c = h.keys.justPressed, c.keyManager.checkStatusUnsafe(65, c.status) ? this.changeSelection(-1) : (c = h.keys.justPressed, c.keyManager.checkStatusUnsafe(68, c.status) && this.changeSelection(1)), this.maxAnims < 1)) {
            if (this.selecArr != null && (e = d = 0, c = h.keys.justPressed, c.keyManager.checkStatusUnsafe(37, c.status) ? d = -1 : (c = h.keys.justPressed, c.keyManager.checkStatusUnsafe(39, c.status) && (d = 1)), c = h.keys.justPressed, c.keyManager.checkStatusUnsafe(38, c.status) ? e = 1 : (c = h.keys.justPressed, c.keyManager.checkStatusUnsafe(40, c.status) && (e = -1)), c = h.keys.pressed, c.keyManager.checkStatusUnsafe(16, c.status) && (d *= 10, e *= 10), d != 0 || e != 0)) {
              this.selecArr[0] -= d;
              this.selecArr[1] += e;
              this.updateOffsetText();
              c = this.splashes.members[this.curSelected].offset;
              d = 10 + this.selecArr[0];
              e = 10 + this.selecArr[1];
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.set_x(d);
              c.set_y(e);
            }
            c = h.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(17, c.status)) {
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(67, c.status)) {
                c = this.selectedArray();
                if (this.copiedArray == null) {
                  this.copiedArray = [0, 0];
                }
                this.copiedArray[0] = c[0];
                this.copiedArray[1] = c[1];
              } else {
                c = h.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(86, c.status) && this.copiedArray != null) {
                  e = this.selectedArray();
                  e[0] = this.copiedArray[0];
                  e[1] = this.copiedArray[1];
                  c = this.splashes.members[this.curSelected].offset;
                  d = 10 + e[0];
                  e = 10 + e[1];
                  if (e == null) {
                    e = 0;
                  }
                  if (d == null) {
                    d = 0;
                  }
                  c.set_x(d);
                  c.set_y(e);
                  this.updateOffsetText();
                }
              }
            }
            this.pressEnterToSave -= a;
            if (this.visibleTime >= 0) {
              this.visibleTime -= a;
              if (this.visibleTime <= 0) {
                this.savedText.set_visible(false);
              }
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(13, c.status)) {
              this.savedText.set_text("Press ENTER again to save.");
              if (this.pressEnterToSave > 0) {
                this.saveFile();
                h.sound.play(D.sound("confirmMenu"), 0.4);
                this.pressEnterToSave = 0;
                this.visibleTime = 3;
              } else {
                this.visibleTime = this.pressEnterToSave = 0.5;
              }
              this.savedText.set_visible(true);
            }
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(32, c.status)) {
              this.changeAnim();
            } else {
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(83, c.status)) {
                this.changeAnim(-1);
              } else {
                c = h.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(87, c.status)) {
                  this.changeAnim(1);
                }
              }
            }
            a = false;
            c = h.keys.justPressed;
            if (a = c.keyManager.checkStatusUnsafe(81, c.status)) {
              this.forceFrame--;
            } else {
              c = h.keys.justPressed;
              if (a = c.keyManager.checkStatusUnsafe(69, c.status)) {
                this.forceFrame++;
              }
            }
            if (a) {
              if (this.forceFrame < 0) {
                this.forceFrame = 0;
              } else if (this.forceFrame >= this.maxFrame) {
                this.forceFrame = this.maxFrame - 1;
              }
              this.curFrameText.set_text("Force Frame: " + (this.forceFrame + 1) + " / " + this.maxFrame + "\n(Press Q/E to change)");
              this.splashes.forEachAlive(function (a) {
                a.animation._curAnim.paused = true;
                a.animation._curAnim.set_curFrame(b.forceFrame);
              });
            }
          }
        },
        updateOffsetText: function () {
          this.selecArr = this.selectedArray();
          this.offsetsText.set_text(this.selecArr.toString());
        },
        loadFrames: function () {
          var a = this;
          this.texturePath = "noteSplashes/" + this.textureName;
          this.splashes.forEachAlive(function (b) {
            var c = a.texturePath;
            var d = D.image(c, null, true);
            b.set_frames(ob.fromSparrow(d, D.getPath("images/" + c + ".xml", null, null)));
          });
          ec.configs.h = Object.create(null);
          this.config = ec.precacheConfig(this.texturePath);
          if (this.config == null) {
            this.config = ec.precacheConfig(ec.defaultNoteSplash);
          }
          this.nameInputText.set_text(this.config.anim);
          this.stepperMinFps.set_value(this.config.minFps);
          this.stepperMaxFps.set_value(this.config.maxFps);
          this.reloadAnims();
        },
        saveFile: function () {
          this.savedText.set_text("Can't save on this platform, too bad.");
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_numeric_stepper" && b instanceof Ib) {
            switch (b.name) {
              case "max_fps":
                if (b.value < this.stepperMinFps.value) {
                  this.stepperMinFps.set_value(b.value);
                }
                break;
              case "min_fps":
                if (b.value > this.stepperMaxFps.value) {
                  this.stepperMaxFps.set_value(b.value);
                }
            }
            this.config.minFps = this.stepperMinFps.value | 0;
            this.config.maxFps = this.stepperMaxFps.value | 0;
          }
        },
        reloadAnims: function () {
          var a = this;
          var b = true;
          this.splashes.forEachAlive(function (a) {
            a.animation.destroyAnimations();
          });
          for (this.maxAnims = 0; b;) {
            this.splashes.forEachAlive(function (c) {
              return function (d) {
                for (var e = 0, f = Na.colArray.length; e < f;) {
                  var h = e++;
                  var g = "note" + h + "-" + c[0];
                  if (!a.addAnimAndCheck(d, g, "" + a.config.anim + " " + Na.colArray[h] + " " + c[0], 24, false)) {
                    b = false;
                    break;
                  }
                  d.animation.play(g, true);
                }
              };
            }([this.maxAnims + 1]));
            if (b) {
              this.maxAnims++;
            }
          }
          zb.trace("maxAnims: " + this.maxAnims, {
            fileName: "source/states/editors/NoteSplashDebugState.hx",
            lineNumber: 405,
            className: "states.editors.NoteSplashDebugState",
            methodName: "reloadAnims"
          });
          this.changeAnim();
        },
        changeAnim: function (a) {
          if (a == null) {
            a = 0;
          }
          this.maxFrame = 0;
          this.forceFrame = -1;
          if (this.maxAnims > 0) {
            this.curAnim += a;
            if (this.curAnim > this.maxAnims) {
              this.curAnim = 1;
            } else if (this.curAnim < 1) {
              this.curAnim = this.maxAnims;
            }
            this.curAnimText.set_text("Current Animation: " + this.curAnim + " / " + this.maxAnims + "\n(Press W/S to change)");
            this.curFrameText.set_text("Force Frame Disabled\n(Press Q/E to change)");
            a = 0;
            for (var b = this.maxNotes; a < b;) {
              var c = a++;
              var d = this.splashes.members[c];
              d.animation.play("note" + c + "-" + this.curAnim, true);
              if (this.maxFrame < d.animation._curAnim.frames.length) {
                this.maxFrame = d.animation._curAnim.frames.length;
              }
              d.animation._curAnim.set_frameRate(h.random.int(this.config.minFps, this.config.maxFps));
              c = this.selectedArray(c);
              d = d.offset;
              var e = 10 + c[0];
              c = 10 + c[1];
              if (c == null) {
                c = 0;
              }
              if (e == null) {
                e = 0;
              }
              d.set_x(e);
              d.set_y(c);
            }
          } else {
            this.curAnimText.set_text("INVALID ANIMATION NAME");
            this.curFrameText.set_text("");
          }
          this.updateOffsetText();
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = Na.colArray.length;
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = b - 1;
          } else if (this.curSelected >= b) {
            this.curSelected = 0;
          }
          this.selection.set_x(this.curSelected * 220 + 220);
          this.updateOffsetText();
        },
        selectedArray: function (a) {
          if (a == null) {
            a = -1;
          }
          if (a < 0) {
            a = this.curSelected;
          }
          a += (this.curAnim - 1) * Na.colArray.length;
          if (this.config.offsets[a] == null) {
            while (this.config.offsets[a] == null) {
              this.config.offsets.push(this.config.offsets[bc.wrap(a, 0, this.config.offsets.length - 1)].slice());
            }
          }
          return this.config.offsets[bc.wrap(a, 0, this.config.offsets.length - 1)];
        },
        addAnimAndCheck: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 24;
          }
          a.animation.addByPrefix(b, c, d, e);
          return a.animation._animations.h[b] != null;
        },
        destroy: function () {
          P.prototype.destroy.call(this);
        },
        __class__: eh
      });
      function Ia(a) {
        this.blockPressWhileTypingOn = [];
        this.weekFile = null;
        P.call(this);
        this.weekFile = ib.createWeekFile();
        if (a != null) {
          this.weekFile = a;
        } else {
          Ia.weekFileName = "week1";
        }
      }
      g["states.editors.WeekEditorState"] = Ia;
      Ia.__name__ = "states.editors.WeekEditorState";
      Ia.loadWeek = function () {
        var a = new Fi("JSON", "json");
        Ia._file = new Fe();
        Ia._file.addEventListener("complete", Ia.onLoadComplete);
        Ia._file.addEventListener("cancel", Ia.onLoadCancel);
        Ia._file.addEventListener("ioError", Ia.onLoadError);
        Ia._file.browse([a]);
      };
      Ia.onLoadComplete = function (a) {
        Ia._file.removeEventListener("complete", Ia.onLoadComplete);
        Ia._file.removeEventListener("cancel", Ia.onLoadCancel);
        Ia._file.removeEventListener("ioError", Ia.onLoadError);
        zb.trace("File couldn't be loaded! You aren't on Desktop, are you?", {
          fileName: "source/states/editors/WeekEditorState.hx",
          lineNumber: 494,
          className: "states.editors.WeekEditorState",
          methodName: "onLoadComplete"
        });
      };
      Ia.onLoadCancel = function (a) {
        Ia._file.removeEventListener("complete", Ia.onLoadComplete);
        Ia._file.removeEventListener("cancel", Ia.onLoadCancel);
        Ia._file.removeEventListener("ioError", Ia.onLoadError);
        Ia._file = null;
        zb.trace("Cancelled file loading.", {
          fileName: "source/states/editors/WeekEditorState.hx",
          lineNumber: 507,
          className: "states.editors.WeekEditorState",
          methodName: "onLoadCancel"
        });
      };
      Ia.onLoadError = function (a) {
        Ia._file.removeEventListener("complete", Ia.onLoadComplete);
        Ia._file.removeEventListener("cancel", Ia.onLoadCancel);
        Ia._file.removeEventListener("ioError", Ia.onLoadError);
        Ia._file = null;
        zb.trace("Problem loading file", {
          fileName: "source/states/editors/WeekEditorState.hx",
          lineNumber: 519,
          className: "states.editors.WeekEditorState",
          methodName: "onLoadError"
        });
      };
      Ia.saveWeek = function (a) {
        a = JSON.stringify(a, null, "\t");
        if (a.length > 0) {
          Ia._file = new Fe();
          Ia._file.addEventListener("complete", Ia.onSaveComplete);
          Ia._file.addEventListener("cancel", Ia.onSaveCancel);
          Ia._file.addEventListener("ioError", Ia.onSaveError);
          Ia._file.save(a, Ia.weekFileName + ".json");
        }
      };
      Ia.onSaveComplete = function (a) {
        Ia._file.removeEventListener("complete", Ia.onSaveComplete);
        Ia._file.removeEventListener("cancel", Ia.onSaveCancel);
        Ia._file.removeEventListener("ioError", Ia.onSaveError);
        Ia._file = null;
        h.log.advanced("Successfully saved file.", xa.NOTICE);
      };
      Ia.onSaveCancel = function (a) {
        Ia._file.removeEventListener("complete", Ia.onSaveComplete);
        Ia._file.removeEventListener("cancel", Ia.onSaveCancel);
        Ia._file.removeEventListener("ioError", Ia.onSaveError);
        Ia._file = null;
      };
      Ia.onSaveError = function (a) {
        Ia._file.removeEventListener("complete", Ia.onSaveComplete);
        Ia._file.removeEventListener("cancel", Ia.onSaveCancel);
        Ia._file.removeEventListener("ioError", Ia.onSaveError);
        Ia._file = null;
        h.log.advanced("Problem saving file", xa.ERROR, true);
      };
      Ia.__super__ = P;
      Ia.prototype = q(P.prototype, {
        create: function () {
          this.txtWeekTitle = new U(h.width * 0.7, 10, 0, "", 32);
          this.txtWeekTitle.setFormat("VCR OSD Mono", 32, -1, "right");
          this.txtWeekTitle.set_alpha(0.7);
          var a = D.image("campaign_menu_UI_assets", null, true);
          var b = ob.fromSparrow(a, D.getPath("images/campaign_menu_UI_assets.xml", null, null));
          a = new F(0, 56).makeGraphic(h.width, 386, -405679);
          this.bgSprite = new F(0, 56);
          this.bgSprite.set_antialiasing(y.data.antialiasing);
          var c = this.weekThing = new Kj(0, this.bgSprite.y + 396, Ia.weekFileName);
          c.set_y(c.y + (this.weekThing.get_height() + 20));
          this.weekThing.set_antialiasing(y.data.antialiasing);
          this.add(this.weekThing);
          c = new F().makeGraphic(h.width, 56, -16777216);
          this.add(c);
          this.grpWeekCharacters = new Qa();
          this.lock = new F();
          this.lock.set_frames(b);
          this.lock.animation.addByPrefix("lock", "lock");
          this.lock.animation.play("lock");
          this.lock.set_antialiasing(y.data.antialiasing);
          this.add(this.lock);
          this.missingFileText = new U(0, 0, h.width, "");
          this.missingFileText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", Sa.OUTLINE, -16777216);
          this.missingFileText.set_borderSize(2);
          this.missingFileText.set_visible(false);
          this.add(this.missingFileText);
          b = this.weekFile.weekCharacters;
          c = new re(h.width * 0.25 - 150, b[0]);
          c.set_y(c.y + 70);
          this.grpWeekCharacters.add(c);
          c = new re(h.width * 0.5 - 150, b[1]);
          c.set_y(c.y + 70);
          this.grpWeekCharacters.add(c);
          c = new re(h.width * 0.75 - 150, b[2]);
          c.set_y(c.y + 70);
          this.grpWeekCharacters.add(c);
          this.add(a);
          this.add(this.bgSprite);
          this.add(this.grpWeekCharacters);
          a = new F(h.width * 0.07, this.bgSprite.y + 435).loadGraphic(D.image("Menu_Tracks"));
          a.set_antialiasing(y.data.antialiasing);
          this.add(a);
          this.txtTracklist = new U(h.width * 0.05, a.y + 60, 0, "", 32);
          this.txtTracklist.set_alignment("center");
          this.txtTracklist.set_font("assets/fonts/vcr.ttf");
          this.txtTracklist.set_color(-1747081);
          this.add(this.txtTracklist);
          this.add(this.txtWeekTitle);
          this.addEditorBox();
          this.reloadAllShit();
          h.mouse.set_visible(true);
          P.prototype.create.call(this);
        },
        addEditorBox: function () {
          var a = this;
          this.UI_box = new je(null, null, [{
            name: "Week",
            label: "Week"
          }, {
            name: "Other",
            label: "Other"
          }], null, true);
          this.UI_box.resize(250, 375);
          this.UI_box.set_x(h.width - this.UI_box.get_width());
          this.UI_box.set_y(h.height - this.UI_box.get_height());
          var b = this.UI_box.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.addWeekUI();
          this.addOtherUI();
          this.UI_box.set_selected_tab_id("Week");
          this.add(this.UI_box);
          var c = new qb(0, 650, "Load Week", function () {
            Ia.loadWeek();
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((h.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((h.height - c.get_height()) / 2);
          }
          c.set_x(c.x - 120);
          this.add(c);
          c = new qb(0, 650, "Freeplay", function () {
            P.switchState(new fk(a.weekFile));
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((h.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((h.height - c.get_height()) / 2);
          }
          this.add(c);
          c = new qb(0, 650, "Save Week", function () {
            Ia.saveWeek(a.weekFile);
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((h.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((h.height - c.get_height()) / 2);
          }
          c.set_x(c.x + 120);
          this.add(c);
        },
        addWeekUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_box);
          b.name = "Week";
          this.songsInputText = new ub(10, 30, 200, "", 8);
          this.blockPressWhileTypingOn.push(this.songsInputText);
          this.opponentInputText = new ub(10, this.songsInputText.y + 40, 70, "", 8);
          this.blockPressWhileTypingOn.push(this.opponentInputText);
          this.boyfriendInputText = new ub(this.opponentInputText.x + 75, this.opponentInputText.y, 70, "", 8);
          this.blockPressWhileTypingOn.push(this.boyfriendInputText);
          this.girlfriendInputText = new ub(this.boyfriendInputText.x + 75, this.opponentInputText.y, 70, "", 8);
          this.blockPressWhileTypingOn.push(this.girlfriendInputText);
          this.backgroundInputText = new ub(10, this.opponentInputText.y + 40, 120, "", 8);
          this.blockPressWhileTypingOn.push(this.backgroundInputText);
          this.displayNameInputText = new ub(10, this.backgroundInputText.y + 60, 200, "", 8);
          this.blockPressWhileTypingOn.push(this.backgroundInputText);
          this.weekNameInputText = new ub(10, this.displayNameInputText.y + 60, 150, "", 8);
          this.blockPressWhileTypingOn.push(this.weekNameInputText);
          this.weekFileInputText = new ub(10, this.weekNameInputText.y + 40, 100, "", 8);
          this.blockPressWhileTypingOn.push(this.weekFileInputText);
          this.reloadWeekThing();
          this.hideCheckbox = new xb(10, this.weekFileInputText.y + 40, null, null, "Hide Week from Story Mode?", 100);
          this.hideCheckbox.callback = function () {
            a.weekFile.hideStoryMode = a.hideCheckbox.checked;
          };
          b.add(new U(this.songsInputText.x, this.songsInputText.y - 18, 0, "Songs:"));
          b.add(new U(this.opponentInputText.x, this.opponentInputText.y - 18, 0, "Characters:"));
          b.add(new U(this.backgroundInputText.x, this.backgroundInputText.y - 18, 0, "Background Asset:"));
          b.add(new U(this.displayNameInputText.x, this.displayNameInputText.y - 18, 0, "Display Name:"));
          b.add(new U(this.weekNameInputText.x, this.weekNameInputText.y - 18, 0, "Week Name (for Reset Score Menu):"));
          b.add(new U(this.weekFileInputText.x, this.weekFileInputText.y - 18, 0, "Week File:"));
          b.add(this.songsInputText);
          b.add(this.opponentInputText);
          b.add(this.boyfriendInputText);
          b.add(this.girlfriendInputText);
          b.add(this.backgroundInputText);
          b.add(this.displayNameInputText);
          b.add(this.weekNameInputText);
          b.add(this.weekFileInputText);
          b.add(this.hideCheckbox);
          this.UI_box.addGroup(b);
        },
        addOtherUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_box);
          b.name = "Other";
          this.lockedCheckbox = new xb(10, 30, null, null, "Week starts Locked", 100);
          this.lockedCheckbox.callback = function () {
            a.weekFile.startUnlocked = !a.lockedCheckbox.checked;
            a.lock.set_visible(a.lockedCheckbox.checked);
            a.hiddenUntilUnlockCheckbox.set_alpha(0.4 + (a.lockedCheckbox.checked ? 1 : 0) * 0.6);
          };
          this.hiddenUntilUnlockCheckbox = new xb(10, this.lockedCheckbox.y + 25, null, null, "Hidden until Unlocked", 110);
          this.hiddenUntilUnlockCheckbox.callback = function () {
            a.weekFile.hiddenUntilUnlocked = a.hiddenUntilUnlockCheckbox.checked;
          };
          this.hiddenUntilUnlockCheckbox.set_alpha(0.4);
          this.weekBeforeInputText = new ub(10, this.hiddenUntilUnlockCheckbox.y + 55, 100, "", 8);
          this.blockPressWhileTypingOn.push(this.weekBeforeInputText);
          this.difficultiesInputText = new ub(10, this.weekBeforeInputText.y + 60, 200, "", 8);
          this.blockPressWhileTypingOn.push(this.difficultiesInputText);
          b.add(new U(this.weekBeforeInputText.x, this.weekBeforeInputText.y - 28, 0, "Week File name of the Week you have\nto finish for Unlocking:"));
          b.add(new U(this.difficultiesInputText.x, this.difficultiesInputText.y - 20, 0, "Difficulties:"));
          b.add(new U(this.difficultiesInputText.x, this.difficultiesInputText.y + 20, 0, "Default difficulties are \"Easy, Normal, Hard\"\nwithout quotes."));
          b.add(this.weekBeforeInputText);
          b.add(this.difficultiesInputText);
          b.add(this.hiddenUntilUnlockCheckbox);
          b.add(this.lockedCheckbox);
          this.UI_box.addGroup(b);
        },
        reloadAllShit: function () {
          var a = this.weekFile.songs[0][0];
          for (var b = 1, c = this.weekFile.songs.length; b < c;) {
            var d = b++;
            a += ", " + this.weekFile.songs[d][0];
          }
          this.songsInputText.set_text(a);
          this.backgroundInputText.set_text(this.weekFile.weekBackground);
          this.displayNameInputText.set_text(this.weekFile.storyName);
          this.weekNameInputText.set_text(this.weekFile.weekName);
          this.weekFileInputText.set_text(Ia.weekFileName);
          this.opponentInputText.set_text(this.weekFile.weekCharacters[0]);
          this.boyfriendInputText.set_text(this.weekFile.weekCharacters[1]);
          this.girlfriendInputText.set_text(this.weekFile.weekCharacters[2]);
          this.hideCheckbox.set_checked(this.weekFile.hideStoryMode);
          this.weekBeforeInputText.set_text(this.weekFile.weekBefore);
          this.difficultiesInputText.set_text("");
          if (this.weekFile.difficulties != null) {
            this.difficultiesInputText.set_text(this.weekFile.difficulties);
          }
          this.lockedCheckbox.set_checked(!this.weekFile.startUnlocked);
          this.lock.set_visible(this.lockedCheckbox.checked);
          this.hiddenUntilUnlockCheckbox.set_checked(this.weekFile.hiddenUntilUnlocked);
          this.hiddenUntilUnlockCheckbox.set_alpha(0.4 + (this.lockedCheckbox.checked ? 1 : 0) * 0.6);
          this.reloadBG();
          this.reloadWeekThing();
          this.updateText();
        },
        updateText: function () {
          for (var a = 0, b = this.grpWeekCharacters.length; a < b;) {
            var c = a++;
            this.grpWeekCharacters.members[c].changeCharacter(this.weekFile.weekCharacters[c]);
          }
          var d = [];
          a = 0;
          for (b = this.weekFile.songs.length; a < b;) {
            c = a++;
            d.push(this.weekFile.songs[c][0]);
          }
          this.txtTracklist.set_text("");
          a = 0;
          for (b = d.length; a < b;) {
            c = a++;
            var e = this.txtTracklist;
            e.set_text(e.text + (d[c] + "\n"));
          }
          this.txtTracklist.set_text(this.txtTracklist.text.toUpperCase());
          a = this.txtTracklist;
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((h.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((h.height - a.get_height()) / 2);
          }
          e = this.txtTracklist;
          e.set_x(e.x - h.width * 0.35);
          this.txtWeekTitle.set_text(this.weekFile.storyName.toUpperCase());
          this.txtWeekTitle.set_x(h.width - (this.txtWeekTitle.get_width() + 10));
        },
        reloadBG: function () {
          this.bgSprite.set_visible(true);
          var a = this.weekFile.weekBackground;
          var b = true;
          if (a != null && a.length > 0 && Q.exists(D.getPath("images/menubackgrounds/menu_" + a + ".png", "IMAGE"), "IMAGE")) {
            this.bgSprite.loadGraphic(D.image("menubackgrounds/menu_" + a));
            b = false;
          }
          if (b) {
            this.bgSprite.set_visible(false);
          }
        },
        reloadWeekThing: function () {
          this.weekThing.set_visible(true);
          this.missingFileText.set_visible(false);
          var a = w.trim(this.weekFileInputText.text);
          var b = true;
          if (a != null && a.length > 0 && Q.exists(D.getPath("images/storymenu/" + a + ".png", "IMAGE"), "IMAGE")) {
            this.weekThing.loadGraphic(D.image("storymenu/" + a));
            b = false;
          }
          if (b) {
            this.weekThing.set_visible(false);
            this.missingFileText.set_visible(true);
            this.missingFileText.set_text("MISSING FILE: images/storymenu/" + a + ".png");
          }
          this.recalculateStuffPosition();
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b instanceof ub) {
            if (b == this.weekFileInputText) {
              Ia.weekFileName = w.trim(this.weekFileInputText.text);
              this.reloadWeekThing();
            } else if (b == this.opponentInputText || b == this.boyfriendInputText || b == this.girlfriendInputText) {
              this.weekFile.weekCharacters[0] = w.trim(this.opponentInputText.text);
              this.weekFile.weekCharacters[1] = w.trim(this.boyfriendInputText.text);
              this.weekFile.weekCharacters[2] = w.trim(this.girlfriendInputText.text);
              this.updateText();
            } else if (b == this.backgroundInputText) {
              this.weekFile.weekBackground = w.trim(this.backgroundInputText.text);
              this.reloadBG();
            } else if (b == this.displayNameInputText) {
              this.weekFile.storyName = w.trim(this.displayNameInputText.text);
              this.updateText();
            } else if (b == this.weekNameInputText) {
              this.weekFile.weekName = w.trim(this.weekNameInputText.text);
            } else if (b == this.songsInputText) {
              a = w.trim(this.songsInputText.text).split(",");
              b = 0;
              for (c = a.length; b < c;) {
                d = b++;
                a[d] = w.trim(a[d]);
              }
              while (a.length < this.weekFile.songs.length) {
                this.weekFile.songs.pop();
              }
              b = 0;
              for (c = a.length; b < c;) {
                d = b++;
                if (d >= this.weekFile.songs.length) {
                  this.weekFile.songs.push([a[d], "dad", [146, 113, 253]]);
                } else {
                  this.weekFile.songs[d][0] = a[d];
                  if (this.weekFile.songs[d][1] == null || this.weekFile.songs[d][1]) {
                    this.weekFile.songs[d][1] = "dad";
                    this.weekFile.songs[d][2] = [146, 113, 253];
                  }
                }
              }
              this.updateText();
            } else if (b == this.weekBeforeInputText) {
              this.weekFile.weekBefore = w.trim(this.weekBeforeInputText.text);
            } else if (b == this.difficultiesInputText) {
              this.weekFile.difficulties = w.trim(this.difficultiesInputText.text);
            }
          }
        },
        update: function (a) {
          if (Ia.loadedWeek != null) {
            this.weekFile = Ia.loadedWeek;
            Ia.loadedWeek = null;
            this.reloadAllShit();
          }
          var b = false;
          for (var c = 0, d = this.blockPressWhileTypingOn; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.hasFocus) {
              y.toggleVolumeKeys(false);
              b = true;
              c = h.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                e.set_hasFocus(false);
              }
              break;
            }
          }
          if (!b) {
            y.toggleVolumeKeys(true);
            c = h.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(27, c.status)) {
              P.switchState(new Nf());
              b = h.sound;
              e = D.returnSound("music", "freakyMenu", null);
              b.playMusic(e);
            }
          }
          P.prototype.update.call(this, a);
          this.lock.set_y(this.weekThing.y);
          this.missingFileText.set_y(this.weekThing.y + 36);
        },
        recalculateStuffPosition: function () {
          var a = this.weekThing;
          var b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((h.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((h.height - a.get_height()) / 2);
          }
          this.lock.set_x(this.weekThing.get_width() + 10 + this.weekThing.x);
        },
        __class__: Ia
      });
      function fk(a) {
        this.blockPressWhileTypingOn = [];
        this.curSelected = 0;
        this.iconArray = [];
        this.weekFile = null;
        P.call(this);
        this.weekFile = ib.createWeekFile();
        if (a != null) {
          this.weekFile = a;
        }
      }
      g["states.editors.WeekEditorFreeplayState"] = fk;
      fk.__name__ = "states.editors.WeekEditorFreeplayState";
      fk.__super__ = P;
      fk.prototype = q(P.prototype, {
        create: function () {
          this.bg = new F().loadGraphic(D.image("menuDesat"));
          this.bg.set_antialiasing(y.data.antialiasing);
          this.bg.set_color(-1);
          this.add(this.bg);
          this.grpSongs = new Qa();
          this.add(this.grpSongs);
          for (var a = 0, b = this.weekFile.songs.length; a < b;) {
            var c = a++;
            var d = new Gb(90, 320, this.weekFile.songs[c][0], true);
            d.isMenuItem = true;
            d.targetY = c;
            this.grpSongs.add(d);
            d.set_scaleX(Math.min(1, 980 / d.get_width()));
            d.snapToPosition();
            c = new Kf(this.weekFile.songs[c][1]);
            c.sprTracker = d;
            this.iconArray.push(c);
            this.add(c);
          }
          this.addEditorBox();
          this.changeSelection();
          P.prototype.create.call(this);
        },
        addEditorBox: function () {
          var a = this;
          this.UI_box = new je(null, null, [{
            name: "Freeplay",
            label: "Freeplay"
          }], null, true);
          this.UI_box.resize(250, 200);
          this.UI_box.set_x(h.width - this.UI_box.get_width() - 100);
          this.UI_box.set_y(h.height - this.UI_box.get_height() - 60);
          var b = this.UI_box.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.UI_box.set_selected_tab_id("Week");
          this.addFreeplayUI();
          this.add(this.UI_box);
          b = new F(0, 670).makeGraphic(h.width, 50, -16777216);
          b.set_alpha(0.6);
          this.add(b);
          var c = new qb(0, 685, "Load Week", function () {
            Ia.loadWeek();
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((h.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((h.height - c.get_height()) / 2);
          }
          c.set_x(c.x - 120);
          this.add(c);
          c = new qb(0, 685, "Story Mode", function () {
            P.switchState(new Ia(a.weekFile));
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((h.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((h.height - c.get_height()) / 2);
          }
          this.add(c);
          c = new qb(0, 685, "Save Week", function () {
            Ia.saveWeek(a.weekFile);
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((h.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((h.height - c.get_height()) / 2);
          }
          c.set_x(c.x + 120);
          this.add(c);
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b instanceof ub) {
            this.weekFile.songs[this.curSelected][1] = this.iconInputText.text;
            this.iconArray[this.curSelected].changeIcon(this.iconInputText.text);
          } else if (a == "change_numeric_stepper" && b instanceof Ib && (b == this.bgColorStepperR || b == this.bgColorStepperG || b == this.bgColorStepperB)) {
            this.updateBG();
          }
        },
        addFreeplayUI: function () {
          var a = this;
          var b = new Ka(null, this.UI_box);
          b.name = "Freeplay";
          this.bgColorStepperR = new Ib(10, 40, 20, 255, 0, 255, 0);
          this.bgColorStepperG = new Ib(80, 40, 20, 255, 0, 255, 0);
          this.bgColorStepperB = new Ib(150, 40, 20, 255, 0, 255, 0);
          var c = new qb(10, this.bgColorStepperR.y + 25, "Copy Color", function () {
            ic.set_text((a.bg.color >> 16 & 255) + "," + (a.bg.color >> 8 & 255) + "," + (a.bg.color & 255));
          });
          var d = new qb(140, c.y, "Paste Color", function () {
            if (ic.get_text() != null) {
              var b = [];
              var c = w.trim(ic.get_text()).split(",");
              for (var d = 0, e = c.length; d < e;) {
                var h = d++;
                h = v.parseInt(c[h]);
                if (!isNaN(h)) {
                  if (h > 255) {
                    h = 255;
                  } else if (h < 0) {
                    h *= -1;
                  }
                  b.push(h);
                }
              }
              if (b.length > 2) {
                a.bgColorStepperR.set_value(b[0]);
                a.bgColorStepperG.set_value(b[1]);
                a.bgColorStepperB.set_value(b[2]);
                a.updateBG();
              }
            }
          });
          this.iconInputText = new ub(10, this.bgColorStepperR.y + 70, 100, "", 8);
          var e = new xb(10, this.iconInputText.y + 30, null, null, "Hide Week from Freeplay?", 100);
          e.set_checked(this.weekFile.hideFreeplay);
          e.callback = function () {
            a.weekFile.hideFreeplay = e.checked;
          };
          b.add(new U(10, this.bgColorStepperR.y - 18, 0, "Selected background Color R/G/B:"));
          b.add(new U(10, this.iconInputText.y - 18, 0, "Selected icon:"));
          b.add(this.bgColorStepperR);
          b.add(this.bgColorStepperG);
          b.add(this.bgColorStepperB);
          b.add(c);
          b.add(d);
          b.add(this.iconInputText);
          b.add(e);
          this.UI_box.addGroup(b);
        },
        updateBG: function () {
          this.weekFile.songs[this.curSelected][2][0] = Math.round(this.bgColorStepperR.value);
          this.weekFile.songs[this.curSelected][2][1] = Math.round(this.bgColorStepperG.value);
          this.weekFile.songs[this.curSelected][2][2] = Math.round(this.bgColorStepperB.value);
          var a = this.bg;
          var b = this.weekFile.songs[this.curSelected][2][0];
          var c = this.weekFile.songs[this.curSelected][2][1];
          var d = this.weekFile.songs[this.curSelected][2][2];
          var e = eb._new();
          var f = 255;
          if (f == null) {
            f = 255;
          }
          e = (e & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16) & -65281 | (c > 255 ? 255 : c < 0 ? 0 : c) << 8;
          e &= -256;
          e |= d > 255 ? 255 : d < 0 ? 0 : d;
          e &= 16777215;
          e |= (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
          a.set_color(e);
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          h.sound.play(D.sound("scrollMenu"), 0.4);
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.weekFile.songs.length - 1;
          }
          if (this.curSelected >= this.weekFile.songs.length) {
            this.curSelected = 0;
          }
          for (var b = a = 0, c = this.iconArray.length; b < c;) {
            var d = b++;
            this.iconArray[d].set_alpha(0.6);
          }
          this.iconArray[this.curSelected].set_alpha(1);
          b = 0;
          for (c = this.grpSongs.members; b < c.length;) {
            d = c[b];
            ++b;
            d.targetY = a - this.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
            }
          }
          zb.trace(this.weekFile.songs[this.curSelected], {
            fileName: "source/states/editors/WeekEditorState.hx",
            lineNumber: 768,
            className: "states.editors.WeekEditorFreeplayState",
            methodName: "changeSelection"
          });
          this.iconInputText.set_text(this.weekFile.songs[this.curSelected][1]);
          this.bgColorStepperR.set_value(Math.round(this.weekFile.songs[this.curSelected][2][0]));
          this.bgColorStepperG.set_value(Math.round(this.weekFile.songs[this.curSelected][2][1]));
          this.bgColorStepperB.set_value(Math.round(this.weekFile.songs[this.curSelected][2][2]));
          this.updateBG();
        },
        update: function (a) {
          if (Ia.loadedWeek != null) {
            P.prototype.update.call(this, a);
            Rb.skipNextTransIn = true;
            Rb.skipNextTransOut = true;
            P.switchState(new fk(Ia.loadedWeek));
            Ia.loadedWeek = null;
          } else {
            if (this.iconInputText.hasFocus) {
              y.toggleVolumeKeys(false);
              var b = h.keys.justPressed;
              if (b.keyManager.checkStatusUnsafe(13, b.status)) {
                this.iconInputText.set_hasFocus(false);
              }
            } else {
              y.toggleVolumeKeys(true);
              b = h.keys.justPressed;
              if (b.keyManager.checkStatusUnsafe(27, b.status)) {
                P.switchState(new Nf());
                b = h.sound;
                var c = D.returnSound("music", "freakyMenu", null);
                b.playMusic(c);
              }
              if (this.get_controls().get_UI_UP_P()) {
                this.changeSelection(-1);
              }
              if (this.get_controls().get_UI_DOWN_P()) {
                this.changeSelection(1);
              }
            }
            P.prototype.update.call(this, a);
          }
        },
        __class__: fk
      });
      function bk() {
        Nh.call(this);
      }
      g["states.stages.StageWeek1"] = bk;
      bk.__name__ = "states.stages.StageWeek1";
      bk.__super__ = Nh;
      bk.prototype = q(Nh.prototype, {
        create: function () {
          var a = new pd("stageback", -600, -200, 0.9, 0.9);
          this.add(a);
          a = new pd("stagefront", -650, 600, 0.9, 0.9);
          a.setGraphicSize(a.get_width() * 1.1 | 0);
          a.updateHitbox();
          this.add(a);
          if (!y.data.lowQuality) {
            a = new pd("stage_light", -125, -100, 0.9, 0.9);
            a.setGraphicSize(a.get_width() * 1.1 | 0);
            a.updateHitbox();
            this.add(a);
            a = new pd("stage_light", 1225, -100, 0.9, 0.9);
            a.setGraphicSize(a.get_width() * 1.1 | 0);
            a.updateHitbox();
            a.set_flipX(true);
            this.add(a);
            a = new pd("stagecurtains", -500, -300, 1.3, 1.3);
            a.setGraphicSize(a.get_width() * 0.9 | 0);
            a.updateHitbox();
            this.add(a);
          }
        },
        eventPushed: function (a) {
          if (a.event == "Dadbattle Spotlight") {
            this.dadbattleBlack = new pd(null, -800, -400, 0, 0);
            this.dadbattleBlack.makeGraphic(h.width * 2 | 0, h.height * 2 | 0, -16777216);
            this.dadbattleBlack.set_alpha(0.25);
            this.dadbattleBlack.set_visible(false);
            this.add(this.dadbattleBlack);
            this.dadbattleLight = new pd("spotlight", 400, -400);
            this.dadbattleLight.set_alpha(0.375);
            this.dadbattleLight.set_blend(0);
            this.dadbattleLight.set_visible(false);
            this.add(this.dadbattleLight);
            this.dadbattleFog = new fn();
            this.dadbattleFog.set_visible(false);
            this.add(this.dadbattleFog);
          }
        },
        eventCalled: function (a, b, c, d, e, f) {
          var h = this;
          if (a == "Dadbattle Spotlight") {
            if (d == null) {
              d = 0;
            }
            a = Math.round(d);
            switch (a) {
              case 1:
              case 2:
              case 3:
                if (a == 1) {
                  this.dadbattleBlack.set_visible(true);
                  this.dadbattleLight.set_visible(true);
                  this.dadbattleFog.set_visible(true);
                  this.game.defaultCamZoom += 0.12;
                }
                b = this.game.dad;
                if (a > 2) {
                  b = this.game.boyfriend;
                }
                this.dadbattleLight.set_alpha(0);
                new Ec().start(0.12, function (a) {
                  h.dadbattleLight.set_alpha(0.375);
                });
                this.dadbattleLight.setPosition(b.getGraphicMidpoint().x - this.dadbattleLight.get_width() / 2, b.y + b.get_height() - this.dadbattleLight.get_height() + 50);
                Da.tween(this.dadbattleFog, {
                  alpha: 0.7
                }, 1.5, {
                  ease: Xa.quadInOut
                });
                break;
              default:
                this.dadbattleBlack.set_visible(false);
                this.dadbattleLight.set_visible(false);
                this.game.defaultCamZoom -= 0.12;
                Da.tween(this.dadbattleFog, {
                  alpha: 0
                }, 0.7, {
                  onComplete: function (a) {
                    h.dadbattleFog.set_visible(false);
                  }
                });
            }
          }
        },
        __class__: bk
      });
      function fn() {
        La.call(this);
        this.set_alpha(0);
        this.set_blend(0);
        var a = new pd("smoke", -1350, 660 + h.random.float(-20, 20), 1.2, 1.05);
        a.setGraphicSize(a.get_width() * h.random.float(1.1, 1.22) | 0);
        a.updateHitbox();
        a.velocity.set_x(h.random.float(15, 22));
        a.set_active(true);
        a.set_antialiasing(y.data.antialiasing);
        this.add(a);
        a = new pd("smoke", 1750, 660 + h.random.float(-20, 20), 1.2, 1.05);
        a.setGraphicSize(a.get_width() * h.random.float(1.1, 1.22) | 0);
        a.updateHitbox();
        a.velocity.set_x(h.random.float(-15, -22));
        a.set_active(true);
        a.set_flipX(true);
        a.set_antialiasing(y.data.antialiasing);
        this.add(a);
      }
      g["states.stages.objects.DadBattleFog"] = fn;
      fn.__name__ = "states.stages.objects.DadBattleFog";
      fn.__super__ = La;
      fn.prototype = q(La.prototype, {
        __class__: fn
      });
      function Ij(a, b, c) {
        this.tankSpeed = 0.7;
        this.strumTime = 0;
        this.goingRight = c;
        F.call(this, a, b);
        a = D.image("tankmanKilled1", null, true);
        this.set_frames(ob.fromSparrow(a, D.getPath("images/tankmanKilled1.xml", null, null)));
        this.animation.addByPrefix("run", "tankman running", 24, true);
        this.animation.addByPrefix("shot", "John Shot " + h.random.int(1, 2), 24, false);
        this.animation.play("run");
        this.animation._curAnim.set_curFrame(h.random.int(0, this.animation._curAnim.frames.length - 1));
        this.set_antialiasing(y.data.antialiasing);
        c = this.scale;
        b = a = 0.8;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        c.set_x(a);
        c.set_y(b);
        this.updateHitbox();
      }
      g["states.stages.objects.TankmenBG"] = Ij;
      Ij.__name__ = "states.stages.objects.TankmenBG";
      Ij.__super__ = F;
      Ij.prototype = q(F.prototype, {
        update: function (a) {
          F.prototype.update.call(this, a);
          this.set_visible(this.x > h.width * -0.5 && this.x < h.width * 1.2);
          if (this.animation._curAnim.name == "run") {
            a = (O.songPosition - this.strumTime) * this.tankSpeed;
            if (this.goingRight) {
              this.set_x(h.width * 0.02 - this.endingOffset + a);
            } else {
              this.set_x(h.width * 0.74 + this.endingOffset - a);
            }
          } else if (this.animation._curAnim.finished) {
            this.kill();
          }
          if (O.songPosition > this.strumTime) {
            this.animation.play("shot");
            if (this.goingRight) {
              this.offset.set_x(300);
              this.offset.set_y(200);
            }
          }
        },
        __class__: Ij
      });
      function Lc() {
        this.startedDeath = this.isEnding = false;
        this.charX = this.charY = 0;
        this.stageSuffix = "";
        this.moveCamera = this.playingDeathSound = false;
        db.call(this);
      }
      g["substates.GameOverSubstate"] = Lc;
      Lc.__name__ = "substates.GameOverSubstate";
      Lc.resetVariables = function () {
        Lc.characterName = "bf-dead";
        Lc.deathSoundName = "fnf_loss_sfx";
        Lc.loopSoundName = "gameOver";
        Lc.endSoundName = "gameOverEnd";
        var a = A.SONG;
        if (a != null) {
          if (a.gameOverChar != null && w.trim(a.gameOverChar).length > 0) {
            Lc.characterName = a.gameOverChar;
          }
          if (a.gameOverSound != null && w.trim(a.gameOverSound).length > 0) {
            Lc.deathSoundName = a.gameOverSound;
          }
          if (a.gameOverLoop != null && w.trim(a.gameOverLoop).length > 0) {
            Lc.loopSoundName = a.gameOverLoop;
          }
          if (a.gameOverEnd != null && w.trim(a.gameOverEnd).length > 0) {
            Lc.endSoundName = a.gameOverEnd;
          }
        }
      };
      Lc.__super__ = db;
      Lc.prototype = q(db.prototype, {
        create: function () {
          Lc.instance = this;
          O.songPosition = 0;
          var a = this.boyfriend = new id(A.instance.boyfriend.getScreenPosition().x, A.instance.boyfriend.getScreenPosition().y, Lc.characterName, true);
          a.set_x(a.x + (this.boyfriend.positionArray[0] - A.instance.boyfriend.positionArray[0]));
          a = this.boyfriend;
          a.set_y(a.y + (this.boyfriend.positionArray[1] - A.instance.boyfriend.positionArray[1]));
          this.add(this.boyfriend);
          h.sound.play(D.sound(Lc.deathSoundName));
          var b = h.camera.scroll;
          b.set_x(0);
          b.set_y(0);
          h.camera.target = null;
          this.boyfriend.playAnim("firstDeath");
          this.camFollow = new $b(0, 0, 1, 1);
          this.camFollow.setPosition(this.boyfriend.getGraphicMidpoint().x + this.boyfriend.cameraPosition[0], this.boyfriend.getGraphicMidpoint().y + this.boyfriend.cameraPosition[1]);
          a = h.camera;
          var c = h.camera.scroll.x + h.camera.width / 2;
          var d = h.camera.scroll.y + h.camera.height / 2;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          var e = W.pool.get().set(c, d);
          e._inPool = false;
          b = a.scroll;
          c = e.x - a.width * 0.5;
          d = e.y - a.height * 0.5;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          a = e;
          if (a._weak) {
            a.put();
          }
          this.add(this.camFollow);
          A.instance.setOnScripts("inGameOver", true);
          A.instance.callOnScripts("onGameOverStart", []);
          db.prototype.create.call(this);
        },
        update: function (a) {
          var b = this;
          db.prototype.update.call(this, a);
          A.instance.callOnScripts("onUpdate", [a]);
          if (Aa.instance.get_ACCEPT()) {
            this.endBullshit();
          }
          if (Aa.instance.get_BACK()) {
            var c = h.sound.music;
            c.cleanup(c.autoDestroy, true);
            A.deathCounter = 0;
            A.seenCutscene = false;
            A.chartingMode = false;
            Kd.loadTopMod();
            if (A.isStoryMode) {
              P.switchState(new Jb());
            } else {
              P.switchState(new Ta());
            }
            c = h.sound;
            var d = D.returnSound("music", "freakyMenu", null);
            c.playMusic(d);
            A.instance.callOnScripts("onGameOverConfirm", [false]);
          }
          if (this.boyfriend.animation._curAnim != null) {
            if (this.boyfriend.animation._curAnim.name == "firstDeath" && this.boyfriend.animation._curAnim.finished && this.startedDeath) {
              this.boyfriend.playAnim("deathLoop");
            }
            if (this.boyfriend.animation._curAnim.name == "firstDeath") {
              if (this.boyfriend.animation._curAnim.curFrame >= 12 && !this.moveCamera) {
                h.camera.follow(this.camFollow, tf.LOCKON, 0.6);
                this.moveCamera = true;
              }
              if (this.boyfriend.animation._curAnim.finished && !this.playingDeathSound) {
                this.startedDeath = true;
                if (A.SONG.stage == "tank") {
                  this.playingDeathSound = true;
                  this.coolStartDeath(0.2);
                  h.sound.play(D.sound("jeffGameover/jeffGameover-" + h.random.int(1, 25, [])), 1, false, null, true, function () {
                    if (!b.isEnding) {
                      var a = h.sound.music;
                      var c = 0.2;
                      var d = 1;
                      var g = 4;
                      if (g == null) {
                        g = 1;
                      }
                      if (d == null) {
                        d = 0;
                      }
                      if (c == null) {
                        c = 1;
                      }
                      if (a._channel == null) {
                        a.play();
                      }
                      if (a.fadeTween != null) {
                        a.fadeTween.cancel();
                      }
                      a.fadeTween = Da.num(d, g, c, {
                        onComplete: null
                      }, m(a, a.volumeTween));
                    }
                  });
                } else {
                  this.coolStartDeath();
                }
              }
            }
          }
          if (h.sound.music._channel != null) {
            O.songPosition = h.sound.music._time;
          }
          A.instance.callOnScripts("onUpdatePost", [a]);
        },
        coolStartDeath: function (a) {
          if (a == null) {
            a = 1;
          }
          var b = h.sound;
          var c = D.returnSound("music", Lc.loopSoundName, null);
          b.playMusic(c, a);
        },
        endBullshit: function () {
          if (!this.isEnding) {
            this.isEnding = true;
            this.boyfriend.playAnim("deathConfirm", true);
            var a = h.sound.music;
            a.cleanup(a.autoDestroy, true);
            a = h.sound;
            var b = D.returnSound("music", Lc.endSoundName, null);
            a.play(b);
            new Ec().start(0.7, function (a) {
              h.camera.fade(-16777216, 2, false, function () {
                P.resetState();
              });
            });
            A.instance.callOnScripts("onGameOverConfirm", [true]);
          }
        },
        destroy: function () {
          Lc.instance = null;
          db.prototype.destroy.call(this);
        },
        __class__: Lc
      });
      function cn() {
        this.holdTime = this.holdValue = 0;
        this.nextAccept = 5;
        this.optionsArray = [];
        this.curSelected = 0;
        this.curOption = null;
        db.call(this);
        var a = new F().makeGraphic(h.width, h.height, -16777216);
        a.set_alpha(0.6);
        this.add(a);
        this.grpOptions = new Qa();
        this.add(this.grpOptions);
        this.grpTexts = new Qa();
        this.add(this.grpTexts);
        this.checkboxGroup = new Qa();
        this.add(this.checkboxGroup);
        this.getOptions();
        a = 0;
        for (var b = this.optionsArray.length; a < b;) {
          var c = a++;
          var d = new Gb(200, 360, this.optionsArray[c].name, true);
          d.isMenuItem = true;
          d.setScale(0.8);
          d.targetY = c;
          this.grpOptions.add(d);
          if (this.optionsArray[c].type == "bool") {
            d.set_x(d.x + 90);
            d.startPosition.set_x(d.startPosition.x + 90);
            d.snapToPosition();
            var e = new Jj(d.x - 105, d.y, this.optionsArray[c].getValue() == 1);
            e.sprTracker = d;
            e.offsetX -= 20;
            e.offsetY = -52;
            e.ID = c;
            this.checkboxGroup.add(e);
          } else {
            d.snapToPosition();
            e = new wi(v.string(this.optionsArray[c].getValue()), d.get_width() + 40, 0, true, 0.8);
            e.sprTracker = d;
            e.copyAlpha = true;
            e.ID = c;
            this.grpTexts.add(e);
            this.optionsArray[c].setChild(e);
          }
          this.updateTextFrom(this.optionsArray[c]);
        }
        this.changeSelection();
        this.reloadCheckboxes();
      }
      g["substates.GameplayChangersSubstate"] = cn;
      cn.__name__ = "substates.GameplayChangersSubstate";
      cn.__super__ = db;
      cn.prototype = q(db.prototype, {
        getOptions: function () {
          var a = new bg("Scroll Type", "scrolltype", "string", "multiplicative", ["multiplicative", "constant"]);
          this.optionsArray.push(a);
          var b = new bg("Scroll Speed", "scrollspeed", "float", 1);
          b.scrollSpeed = 2;
          b.minValue = 0.35;
          b.changeValue = 0.05;
          b.decimals = 2;
          if (a.getValue() != "constant") {
            b.displayFormat = "%vX";
            b.maxValue = 3;
          } else {
            b.displayFormat = "%v";
            b.maxValue = 6;
          }
          this.optionsArray.push(b);
          b = new bg("Playback Rate", "songspeed", "float", 1);
          b.scrollSpeed = 1;
          b.minValue = 0.5;
          b.maxValue = 3;
          b.changeValue = 0.05;
          b.displayFormat = "%vX";
          b.decimals = 2;
          this.optionsArray.push(b);
          b = new bg("Health Gain Multiplier", "healthgain", "float", 1);
          b.scrollSpeed = 2.5;
          b.minValue = 0;
          b.maxValue = 5;
          b.changeValue = 0.1;
          b.displayFormat = "%vX";
          this.optionsArray.push(b);
          b = new bg("Health Loss Multiplier", "healthloss", "float", 1);
          b.scrollSpeed = 2.5;
          b.minValue = 0.5;
          b.maxValue = 5;
          b.changeValue = 0.1;
          b.displayFormat = "%vX";
          this.optionsArray.push(b);
          this.optionsArray.push(new bg("Instakill on Miss", "instakill", "bool", false));
          this.optionsArray.push(new bg("Practice Mode", "practice", "bool", false));
          this.optionsArray.push(new bg("Botplay", "botplay", "bool", false));
        },
        getOptionByName: function (a) {
          for (var b = 0, c = this.optionsArray; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.name == a) {
              return d;
            }
          }
          return null;
        },
        update: function (a) {
          if (Aa.instance.get_UI_UP_P()) {
            this.changeSelection(-1);
          }
          if (Aa.instance.get_UI_DOWN_P()) {
            this.changeSelection(1);
          }
          if (Aa.instance.get_BACK()) {
            this.close();
            y.saveSettings();
            h.sound.play(D.sound("cancelMenu"));
          }
          if (this.nextAccept <= 0) {
            var b = true;
            if (this.curOption.get_type() != "bool") {
              b = false;
            }
            if (b) {
              if (Aa.instance.get_ACCEPT()) {
                h.sound.play(D.sound("scrollMenu"));
                this.curOption.setValue(this.curOption.getValue() == 1 ? false : true);
                this.curOption.change();
                this.reloadCheckboxes();
              }
            } else if (Aa.instance.get_UI_LEFT() || Aa.instance.get_UI_RIGHT()) {
              b = Aa.instance.get_UI_LEFT_P() || Aa.instance.get_UI_RIGHT_P();
              if (this.holdTime > 0.5 || b) {
                if (b) {
                  b = null;
                  if (this.curOption.get_type() != "string") {
                    b = Aa.instance.get_UI_LEFT() ? -this.curOption.changeValue : this.curOption.changeValue;
                  }
                  switch (this.curOption.get_type()) {
                    case "float":
                    case "int":
                    case "percent":
                      this.holdValue = this.curOption.getValue() + b;
                      if (this.holdValue < this.curOption.minValue) {
                        this.holdValue = this.curOption.minValue;
                      } else if (this.holdValue > this.curOption.maxValue) {
                        this.holdValue = this.curOption.maxValue;
                      }
                      switch (this.curOption.get_type()) {
                        case "int":
                          this.holdValue = Math.round(this.holdValue);
                          this.curOption.setValue(this.holdValue);
                          break;
                        case "float":
                        case "percent":
                          this.holdValue = bc.roundDecimal(this.holdValue, this.curOption.decimals);
                          this.curOption.setValue(this.holdValue);
                      }
                      break;
                    case "string":
                      b = this.curOption.curOption;
                      if (Aa.instance.get_UI_LEFT_P()) {
                        --b;
                      } else {
                        ++b;
                      }
                      if (b < 0) {
                        b = this.curOption.options.length - 1;
                      } else if (b >= this.curOption.options.length) {
                        b = 0;
                      }
                      this.curOption.curOption = b;
                      this.curOption.setValue(this.curOption.options[b]);
                      if (this.curOption.name == "Scroll Type") {
                        b = this.getOptionByName("Scroll Speed");
                        if (b != null) {
                          if (this.curOption.getValue() == "constant") {
                            b.displayFormat = "%v";
                            b.maxValue = 6;
                          } else {
                            b.displayFormat = "%vX";
                            b.maxValue = 3;
                            if (b.getValue() > 3) {
                              b.setValue(3);
                            }
                          }
                          this.updateTextFrom(b);
                        }
                      }
                  }
                  this.updateTextFrom(this.curOption);
                  this.curOption.change();
                  h.sound.play(D.sound("scrollMenu"));
                } else if (this.curOption.get_type() != "string") {
                  this.holdValue = Math.max(this.curOption.minValue, Math.min(this.curOption.maxValue, this.holdValue + this.curOption.scrollSpeed * a * (Aa.instance.get_UI_LEFT() ? -1 : 1)));
                  switch (this.curOption.get_type()) {
                    case "int":
                      this.curOption.setValue(Math.round(this.holdValue));
                      break;
                    case "float":
                    case "percent":
                      this.curOption.setValue(bc.roundDecimal(Math.max(this.curOption.minValue, Math.min(this.curOption.maxValue, this.holdValue + this.curOption.changeValue - this.holdValue % this.curOption.changeValue)), this.curOption.decimals));
                  }
                  this.updateTextFrom(this.curOption);
                  this.curOption.change();
                }
              }
              if (this.curOption.get_type() != "string") {
                this.holdTime += a;
              }
            } else if (Aa.instance.get_UI_LEFT_R() || Aa.instance.get_UI_RIGHT_R()) {
              this.clearHold();
            }
            if (Aa.instance.get_RESET()) {
              b = 0;
              for (var c = this.optionsArray.length; b < c;) {
                var d = b++;
                d = this.optionsArray[d];
                d.setValue(d.defaultValue);
                if (d.get_type() != "bool") {
                  if (d.get_type() == "string") {
                    d.curOption = d.options.indexOf(d.getValue());
                  }
                  this.updateTextFrom(d);
                }
                if (d.name == "Scroll Speed") {
                  d.displayFormat = "%vX";
                  d.maxValue = 3;
                  if (d.getValue() > 3) {
                    d.setValue(3);
                  }
                  this.updateTextFrom(d);
                }
                d.change();
              }
              h.sound.play(D.sound("cancelMenu"));
              this.reloadCheckboxes();
            }
          }
          if (this.nextAccept > 0) {
            --this.nextAccept;
          }
          db.prototype.update.call(this, a);
        },
        updateTextFrom: function (a) {
          var b = a.displayFormat;
          var c = a.getValue();
          if (a.get_type() == "percent") {
            c *= 100;
          }
          var d = a.defaultValue;
          a.set_text(w.replace(w.replace(b, "%v", c), "%d", d));
        },
        clearHold: function () {
          if (this.holdTime > 0.5) {
            h.sound.play(D.sound("scrollMenu"));
          }
          this.holdTime = 0;
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.optionsArray.length - 1;
          }
          if (this.curSelected >= this.optionsArray.length) {
            this.curSelected = 0;
          }
          for (var b = a = 0, c = this.grpOptions.members; b < c.length;) {
            var d = c[b];
            ++b;
            d.targetY = a - this.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
            }
          }
          for (a = new tc(this.grpTexts.members, null); a.hasNext();) {
            b = a.next();
            b.set_alpha(0.6);
            if (b.ID == this.curSelected) {
              b.set_alpha(1);
            }
          }
          this.curOption = this.optionsArray[this.curSelected];
          h.sound.play(D.sound("scrollMenu"));
        },
        reloadCheckboxes: function () {
          for (var a = new tc(this.checkboxGroup.members, null); a.hasNext();) {
            var b = a.next();
            b.set_daValue(this.optionsArray[b.ID].getValue() == 1);
          }
        },
        __class__: cn
      });
      function bg(a, b, c, d, e) {
        if (d == null) {
          d = "null variable value";
        }
        if (c == null) {
          c = "bool";
        }
        this.name = "Unknown";
        this.displayFormat = "%v";
        this.decimals = 1;
        this.minValue = this.maxValue = null;
        this.changeValue = 1;
        this.options = null;
        this.curOption = 0;
        this.variable = this.defaultValue = null;
        this.scrollSpeed = 50;
        this.type = "bool";
        this.onChange = null;
        this.name = a;
        this.variable = b;
        this.type = c;
        this.defaultValue = d;
        this.options = e;
        if (d == "null variable value") {
          switch (c) {
            case "bool":
              d = false;
              break;
            case "float":
            case "int":
              d = 0;
              break;
            case "percent":
              d = 1;
              break;
            case "string":
              d = "";
              if (e.length > 0) {
                d = e[0];
              }
          }
        }
        if (this.getValue() == null) {
          this.setValue(d);
        }
        switch (c) {
          case "percent":
            this.displayFormat = "%v%";
            this.changeValue = 0.01;
            this.minValue = 0;
            this.maxValue = 1;
            this.scrollSpeed = 0.5;
            this.decimals = 2;
            break;
          case "string":
            a = e.indexOf(this.getValue());
            if (a > -1) {
              this.curOption = a;
            }
        }
      }
      g["substates.GameplayOption"] = bg;
      bg.__name__ = "substates.GameplayOption";
      bg.prototype = {
        change: function () {
          if (this.onChange != null) {
            this.onChange();
          }
        },
        getValue: function () {
          return y.data.gameplaySettings.h[this.variable];
        },
        setValue: function (a) {
          y.data.gameplaySettings.h[this.variable] = a;
        },
        set_text: function (a) {
          if (a == null) {
            a = "";
          }
          if (this.child != null) {
            this.child.set_text(a);
          }
          return null;
        },
        get_type: function () {
          var a = "bool";
          switch (w.trim(this.type.toLowerCase())) {
            case "fl":
              a = "float";
              break;
            case "integer":
              a = "int";
              break;
            case "str":
              a = "string";
              break;
            case "float":
            case "int":
            case "percent":
            case "string":
              a = this.type;
          }
          return this.type = a;
        },
        __class__: bg,
        __properties__: {
          set_text: "set_text",
          get_type: "get_type"
        }
      };
      function Te() {
        this.cantUnpause = 0.1;
        this.holdTime = 0;
        this.curTime = Math.max(0, O.songPosition);
        this.curSelected = 0;
        this.difficultyChoices = [];
        this.menuItemsOG = "Resume;Restart Song;Change Difficulty;Options;botplay;Exit to menu".split(";");
        this.menuItems = [];
        db.call(this);
      }
      g["substates.PauseSubState"] = Te;
      Te.__name__ = "substates.PauseSubState";
      Te.restartSong = function (a) {
        if (a == null) {
          a = false;
        }
        A.instance.paused = true;
        h.sound.music.set_volume(0);
        A.instance.vocals.set_volume(0);
        if (a) {
          Rb.skipNextTransIn = true;
          Rb.skipNextTransOut = true;
        }
        P.resetState();
      };
      Te.__super__ = db;
      Te.prototype = q(db.prototype, {
        create: function () {
          if (nb.list.length < 2) {
            r.remove(this.menuItemsOG, "Change Difficulty");
          }
          if (A.chartingMode) {
            this.menuItemsOG.splice(2, 0, "Leave Charting Mode");
            var a = 0;
            if (!A.instance.startingSong) {
              a = 1;
              this.menuItemsOG.splice(3, 0, "Skip Time");
            }
            this.menuItemsOG.splice(3 + a, 0, "End Song");
            this.menuItemsOG.splice(4 + a, 0, "Toggle Practice Mode");
            this.menuItemsOG.splice(5 + a, 0, "Toggle Botplay");
          }
          this.menuItems = this.menuItemsOG;
          a = 0;
          for (var b = nb.list.length; a < b;) {
            var c = a++;
            this.difficultyChoices.push(nb.list[c == null ? A.storyDifficulty : c]);
          }
          this.difficultyChoices.push("BACK");
          this.pauseMusic = new Zd();
          try {
            var d = this.getPauseSong();
            if (d != null) {
              var e = this.pauseMusic;
              var f = D.returnSound("music", d, null);
              e.loadEmbedded(f, true, true);
            }
          } catch (k) {
            Pa.lastError = k;
          }
          this.pauseMusic.set_volume(0);
          this.pauseMusic.play(false, h.random.int(0, this.pauseMusic._length / 2 | 0));
          h.sound.list.add(this.pauseMusic);
          d = new F().makeGraphic(1, 1, -16777216);
          e = d.scale;
          f = h.width;
          a = h.height;
          if (a == null) {
            a = 0;
          }
          if (f == null) {
            f = 0;
          }
          e.set_x(f);
          e.set_y(a);
          d.updateHitbox();
          d.set_alpha(0);
          e = d.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          this.add(d);
          f = new U(20, 15, 0, A.SONG.song, 32);
          e = f.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          f.setFormat("assets/fonts/vcr.ttf", 32);
          f.updateHitbox();
          this.add(f);
          a = null;
          a = new U(20, 47, 0, nb.list[a == null ? A.storyDifficulty : a].toUpperCase(), 32);
          e = a.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          a.setFormat("assets/fonts/vcr.ttf", 32);
          a.updateHitbox();
          this.add(a);
          b = new U(20, 79, 0, "Blueballed: " + A.deathCounter, 32);
          e = b.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          b.setFormat("assets/fonts/vcr.ttf", 32);
          b.updateHitbox();
          this.add(b);
          this.practiceText = new U(20, 116, 0, "PRACTICE MODE", 32);
          e = this.practiceText.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          this.practiceText.setFormat("assets/fonts/vcr.ttf", 32);
          this.practiceText.set_x(h.width - (this.practiceText.get_width() + 20));
          this.practiceText.updateHitbox();
          this.practiceText.set_visible(A.instance.practiceMode);
          this.add(this.practiceText);
          c = new U(20, 116, 0, "CHARTING MODE", 32);
          e = c.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          c.setFormat("assets/fonts/vcr.ttf", 32);
          c.set_x(h.width - (c.get_width() + 20));
          c.set_y(h.height - (c.get_height() + 20));
          c.updateHitbox();
          c.set_visible(A.chartingMode);
          this.add(c);
          b.set_alpha(0);
          a.set_alpha(0);
          f.set_alpha(0);
          f.set_x(h.width - (f.get_width() + 20));
          a.set_x(h.width - (a.get_width() + 20));
          b.set_x(h.width - (b.get_width() + 20));
          Da.tween(d, {
            alpha: 0.6
          }, 0.4, {
            ease: Xa.quartInOut
          });
          Da.tween(f, {
            alpha: 1,
            y: 20
          }, 0.4, {
            ease: Xa.quartInOut,
            startDelay: 0.3
          });
          Da.tween(a, {
            alpha: 1,
            y: a.y + 5
          }, 0.4, {
            ease: Xa.quartInOut,
            startDelay: 0.5
          });
          Da.tween(b, {
            alpha: 1,
            y: b.y + 5
          }, 0.4, {
            ease: Xa.quartInOut,
            startDelay: 0.7
          });
          this.grpMenuShit = new Qa();
          this.add(this.grpMenuShit);
          this.missingTextBG = new F().makeGraphic(1, 1, -16777216);
          e = this.missingTextBG.scale;
          f = h.width;
          a = h.height;
          if (a == null) {
            a = 0;
          }
          if (f == null) {
            f = 0;
          }
          e.set_x(f);
          e.set_y(a);
          this.missingTextBG.updateHitbox();
          this.missingTextBG.set_alpha(0.6);
          this.missingTextBG.set_visible(false);
          this.add(this.missingTextBG);
          this.missingText = new U(50, 0, h.width - 100, "", 24);
          this.missingText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", Sa.OUTLINE, -16777216);
          e = this.missingText.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          this.missingText.set_visible(false);
          this.add(this.missingText);
          this.regenMenu();
          this.set_cameras([h.cameras.list[h.cameras.list.length - 1]]);
          db.prototype.create.call(this);
        },
        getPauseSong: function () {
          if (Te.songName != null) {
            var a = Te.songName;
            var b = new V("[~&\\\\;:<>#]", "");
            var c = new V("[.,'\"%?!]", "");
            a = b.split(w.replace(a, " ", "-")).join("-");
            var d = c.split(a).join("").toLowerCase();
          } else {
            d = "";
          }
          a = y.data.pauseMusic;
          b = new V("[~&\\\\;:<>#]", "");
          c = new V("[.,'\"%?!]", "");
          a = b.split(w.replace(a, " ", "-")).join("-");
          c = c.split(a).join("").toLowerCase();
          if (d == "none" || d != "none" && c == "none") {
            return null;
          } else if (d != "") {
            return d;
          } else {
            return c;
          }
        },
        update: function (a) {
          this.cantUnpause -= a;
          if (this.pauseMusic._volume < 0.5) {
            var b = this.pauseMusic;
            b.set_volume(b._volume + a * 0.01);
          }
          db.prototype.update.call(this, a);
          if (Aa.instance.get_BACK()) {
            this.close();
          } else {
            this.updateSkipTextStuff();
            if (Aa.instance.get_UI_UP_P()) {
              this.changeSelection(-1);
            }
            if (Aa.instance.get_UI_DOWN_P()) {
              this.changeSelection(1);
            }
            b = this.menuItems[this.curSelected];
            if (b == "Skip Time" && (Aa.instance.get_UI_LEFT_P() && (h.sound.play(D.sound("scrollMenu"), 0.4), this.curTime -= 1000, this.holdTime = 0), Aa.instance.get_UI_RIGHT_P() && (h.sound.play(D.sound("scrollMenu"), 0.4), this.curTime += 1000, this.holdTime = 0), Aa.instance.get_UI_LEFT() || Aa.instance.get_UI_RIGHT())) {
              this.holdTime += a;
              if (this.holdTime > 0.5) {
                this.curTime += a * 45000 * (Aa.instance.get_UI_LEFT() ? -1 : 1);
              }
              if (this.curTime >= h.sound.music._length) {
                this.curTime -= h.sound.music._length;
              } else if (this.curTime < 0) {
                this.curTime += h.sound.music._length;
              }
              this.updateSkipTimeText();
            }
            if (Aa.instance.get_ACCEPT() && (this.cantUnpause <= 0 || !Aa.instance.controllerMode)) {
              if (this.menuItems == this.difficultyChoices) {
                try {
                  if (this.menuItems.length - 1 != this.curSelected && this.difficultyChoices.indexOf(b) != -1) {
                    var c = A.SONG.song;
                    var d = $a.formatSong(c, this.curSelected);
                    A.SONG = Md.loadFromJson(d, c);
                    A.storyDifficulty = this.curSelected;
                    P.resetState();
                    h.sound.music.set_volume(0);
                    A.changedDifficulty = true;
                    A.chartingMode = false;
                    return;
                  }
                } catch (e) {
                  Pa.lastError = e;
                  c = G.caught(e).unwrap();
                  zb.trace("ERROR! " + v.string(c), {
                    fileName: "source/substates/PauseSubState.hx",
                    lineNumber: 250,
                    className: "substates.PauseSubState",
                    methodName: "update"
                  });
                  c = c.toString();
                  if (w.startsWith(c, "[file_contents,assets/data/")) {
                    c = "Missing file: " + c.substring(27, c.length - 1);
                  }
                  this.missingText.set_text("ERROR WHILE LOADING CHART:\n" + c);
                  c = this.missingText;
                  d = 16;
                  if (d == null) {
                    d = 17;
                  }
                  if (d == 1 || d == 17) {
                    c.set_x((h.width - c.get_width()) / 2);
                  }
                  if (d == 16 || d == 17) {
                    c.set_y((h.height - c.get_height()) / 2);
                  }
                  this.missingText.set_visible(true);
                  this.missingTextBG.set_visible(true);
                  h.sound.play(D.sound("cancelMenu"));
                  db.prototype.update.call(this, a);
                  return;
                }
                this.menuItems = this.menuItemsOG;
                this.regenMenu();
              }
              switch (b) {
                case "Change Difficulty":
                  this.menuItems = this.difficultyChoices;
                  this.deleteSkipTimeText();
                  this.regenMenu();
                  break;
                case "End Song":
                  this.close();
                  A.instance.notes.clear();
                  A.instance.unspawnNotes = [];
                  A.instance.finishSong(true);
                  break;
                case "Exit to menu":
                  A.deathCounter = 0;
                  A.seenCutscene = false;
                  Kd.loadTopMod();
                  if (A.isStoryMode) {
                    P.switchState(new Jb());
                  } else {
                    P.switchState(new Ta());
                  }
                  a = h.sound;
                  c = D.returnSound("music", "freakyMenu", null);
                  a.playMusic(c);
                  A.changedDifficulty = false;
                  A.chartingMode = false;
                  h.camera.set_followLerp(0);
                  break;
                case "Leave Charting Mode":
                  Te.restartSong();
                  A.chartingMode = false;
                  break;
                case "Options":
                  A.instance.paused = true;
                  A.instance.vocals.set_volume(0);
                  P.switchState(new jd());
                  if (y.data.pauseMusic != "None") {
                    a = h.sound;
                    d = y.data.pauseMusic;
                    b = new V("[~&\\\\;:<>#]", "");
                    c = new V("[.,'\"%?!]", "");
                    d = b.split(w.replace(d, " ", "-")).join("-");
                    c = D.returnSound("music", c.split(d).join("").toLowerCase(), null);
                    a.playMusic(c, this.pauseMusic._volume);
                    h.sound.music.set_time(this.pauseMusic._time);
                  }
                  jd.onPlayState = true;
                  break;
                case "Restart Song":
                  Te.restartSong();
                  break;
                case "Resume":
                  this.close();
                  break;
                case "Skip Time":
                  if (this.curTime < O.songPosition) {
                    A.startOnTime = this.curTime;
                    Te.restartSong(true);
                  } else {
                    if (this.curTime != O.songPosition) {
                      A.instance.clearNotesBefore(this.curTime);
                      A.instance.setSongTime(this.curTime);
                    }
                    this.close();
                  }
                  break;
                case "Toggle Practice Mode":
                  A.instance.practiceMode = !A.instance.practiceMode;
                  A.changedDifficulty = true;
                  this.practiceText.set_visible(A.instance.practiceMode);
                  break;
                case "botplay":
                  A.instance.cpuControlled = !A.instance.cpuControlled;
                  A.changedDifficulty = true;
                  A.instance.botplayTxt.set_visible(A.instance.cpuControlled);
                  A.instance.botplayTxt.set_alpha(1);
                  A.instance.botplaySine = 0;
              }
            }
          }
        },
        deleteSkipTimeText: function () {
          if (this.skipTimeText != null) {
            this.skipTimeText.kill();
            this.remove(this.skipTimeText);
            this.skipTimeText.destroy();
          }
          this.skipTimeTracker = this.skipTimeText = null;
        },
        destroy: function () {
          this.pauseMusic.destroy();
          db.prototype.destroy.call(this);
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelected += a;
          h.sound.play(D.sound("scrollMenu"), 0.4);
          if (this.curSelected < 0) {
            this.curSelected = this.menuItems.length - 1;
          }
          if (this.curSelected >= this.menuItems.length) {
            this.curSelected = 0;
          }
          for (var b = a = 0, c = this.grpMenuShit.members; b < c.length;) {
            var d = c[b];
            ++b;
            d.targetY = a - this.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
              if (d == this.skipTimeTracker) {
                this.curTime = Math.max(0, O.songPosition);
                this.updateSkipTimeText();
              }
            }
          }
          this.missingText.set_visible(false);
          this.missingTextBG.set_visible(false);
        },
        regenMenu: function () {
          for (var a = 0, b = this.grpMenuShit.members.length; a < b;) {
            a++;
            var c = this.grpMenuShit.members[0];
            c.kill();
            this.grpMenuShit.remove(c, true);
            c.destroy();
          }
          a = 0;
          for (b = this.menuItems.length; a < b;) {
            var d = a++;
            c = new Gb(90, 320, this.menuItems[d], true);
            c.isMenuItem = true;
            c.targetY = d;
            this.grpMenuShit.add(c);
            if (this.menuItems[d] == "Skip Time") {
              this.skipTimeText = new U(0, 0, 0, "", 64);
              this.skipTimeText.setFormat("assets/fonts/vcr.ttf", 64, -1, "center", Sa.OUTLINE, -16777216);
              d = this.skipTimeText.scrollFactor;
              d.set_x(0);
              d.set_y(0);
              this.skipTimeText.set_borderSize(2);
              this.skipTimeTracker = c;
              this.add(this.skipTimeText);
              this.updateSkipTextStuff();
              this.updateSkipTimeText();
            }
          }
          this.curSelected = 0;
          this.changeSelection();
        },
        updateSkipTextStuff: function () {
          if (this.skipTimeText != null && this.skipTimeTracker != null) {
            this.skipTimeText.set_x(this.skipTimeTracker.x + this.skipTimeTracker.get_width() + 60);
            this.skipTimeText.set_y(this.skipTimeTracker.y);
            this.skipTimeText.set_visible(this.skipTimeTracker.alpha >= 1);
          }
        },
        updateSkipTimeText: function () {
          this.skipTimeText.set_text(Ub.formatTime(Math.max(0, Math.floor(this.curTime / 1000)), false) + " / " + Ub.formatTime(Math.max(0, Math.floor(h.sound.music._length / 1000)), false));
        },
        __class__: Te
      });
      function Hi(a, b, c, d, e, f, h) {
        if (e == null) {
          e = false;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = "";
        }
        this.cornerSize = 10;
        this.goAnyway = false;
        this.theText = "";
        this.buttons = new F(473.3, 450);
        this.selected = 0;
        var k = this;
        this.selected = b;
        this.okc = c;
        this.cancelc = d;
        this.theText = a;
        this.goAnyway = e;
        a = "OK";
        b = "CANCEL";
        if (f != null) {
          a = f;
        }
        if (h != null) {
          b = h;
        }
        this.buttonAccept = new qb(473.3, 450, a, function () {
          if (k.okc != null) {
            k.okc();
          }
          k.close();
        });
        this.buttonNo = new qb(633.3, 450, b, function () {
          if (k.cancelc != null) {
            k.cancelc();
          }
          k.close();
        });
        db.call(this);
      }
      g["substates.Prompt"] = Hi;
      Hi.__name__ = "substates.Prompt";
      Hi.__super__ = db;
      Hi.prototype = q(db.prototype, {
        create: function () {
          db.prototype.create.call(this);
          if (this.goAnyway) {
            if (this.okc != null) {
              this.okc();
            }
            this.close();
          } else {
            this.panel = new F(0, 0);
            this.panelbg = new F(0, 0);
            this.makeSelectorGraphic(this.panel, 300, 150, -6710887);
            this.makeSelectorGraphic(this.panelbg, 304, 154, -16777216);
            var a = this.panel.scrollFactor;
            a.set_x(0);
            a.set_y(0);
            var b = this.panel;
            b.set_x((h.width - b.get_width()) / 2);
            b.set_y((h.height - b.get_height()) / 2);
            a = this.panelbg.scrollFactor;
            a.set_x(0);
            a.set_y(0);
            b = this.panelbg;
            b.set_x((h.width - b.get_width()) / 2);
            b.set_y((h.height - b.get_height()) / 2);
            this.add(this.panelbg);
            this.add(this.panel);
            this.add(this.buttonAccept);
            this.add(this.buttonNo);
            a = new U(this.buttonNo.get_width() * 2, this.panel.y, 300, this.theText, 16);
            a.set_alignment("center");
            this.add(a);
            a.set_x((h.width - a.get_width()) / 2);
            a.set_y((h.height - a.get_height()) / 2);
            b = this.buttonAccept;
            b.set_x((h.width - b.get_width()) / 2);
            b.set_y((h.height - b.get_height()) / 2);
            b = this.buttonNo;
            b.set_x((h.width - b.get_width()) / 2);
            b.set_y((h.height - b.get_height()) / 2);
            b = this.buttonAccept;
            b.set_x(b.x - this.buttonNo.get_width() / 1.5);
            this.buttonAccept.set_y(this.panel.y + this.panel.get_height() - 30);
            b = this.buttonNo;
            b.set_x(b.x + this.buttonNo.get_width() / 1.5);
            this.buttonNo.set_y(this.panel.y + this.panel.get_height() - 30);
            a = a.scrollFactor;
            a.set_x(0);
            a.set_y(0);
          }
        },
        makeSelectorGraphic: function (a, b, c, d) {
          a.makeGraphic(b, c, d);
          a.get_pixels().fillRect(new da(0, 190, a.get_width(), 5), 0);
          a.get_pixels().fillRect(new da(0, 0, this.cornerSize, this.cornerSize), 0);
          this.drawCircleCornerOnSelector(a, false, false, d);
          a.get_pixels().fillRect(new da(a.get_width() - this.cornerSize, 0, this.cornerSize, this.cornerSize), 0);
          this.drawCircleCornerOnSelector(a, true, false, d);
          a.get_pixels().fillRect(new da(0, a.get_height() - this.cornerSize, this.cornerSize, this.cornerSize), 0);
          this.drawCircleCornerOnSelector(a, false, true, d);
          a.get_pixels().fillRect(new da(a.get_width() - this.cornerSize, a.get_height() - this.cornerSize, this.cornerSize, this.cornerSize), 0);
          this.drawCircleCornerOnSelector(a, true, true, d);
        },
        drawCircleCornerOnSelector: function (a, b, c, d) {
          var e = a.get_width() - this.cornerSize;
          var f = c ? a.get_height() - 1 : 0;
          if (c) {
            f -= 2;
          }
          a.get_pixels().fillRect(new da(b ? e : 1, Math.abs(f - 8) | 0, 10, 3), d);
          if (c) {
            ++f;
          }
          a.get_pixels().fillRect(new da(b ? e : 2, Math.abs(f - 6) | 0, 9, 2), d);
          if (c) {
            ++f;
          }
          a.get_pixels().fillRect(new da(b ? e : 3, Math.abs(f - 5) | 0, 8, 1), d);
          a.get_pixels().fillRect(new da(b ? e : 4, Math.abs(f - 4) | 0, 7, 1), d);
          a.get_pixels().fillRect(new da(b ? e : 5, Math.abs(f - 3) | 0, 6, 1), d);
          a.get_pixels().fillRect(new da(b ? e : 6, Math.abs(f - 2) | 0, 5, 1), d);
          a.get_pixels().fillRect(new da(b ? e : 8, Math.abs(f - 1) | 0, 3, 1), d);
        },
        __class__: Hi
      });
      function ck(a, b, c, d) {
        if (d == null) {
          d = -1;
        }
        this.onYes = false;
        this.alphabetArray = [];
        this.song = a;
        this.difficulty = b;
        this.week = d;
        db.call(this);
        if (d > -1) {
          a = ib.weeksLoaded.h[ib.weeksList[d]].weekName;
        }
        a += " (" + nb.list[b == null ? A.storyDifficulty : b] + ")?";
        this.bg = new F().makeGraphic(h.width, h.height, -16777216);
        this.bg.set_alpha(0);
        b = this.bg.scrollFactor;
        b.set_x(0);
        b.set_y(0);
        this.add(this.bg);
        var e = a.length > 18 ? 0.8 : 1;
        var f = new Gb(0, 180, "Reset the score of", true);
        b = 1;
        if (b == null) {
          b = 17;
        }
        if (b == 1 || b == 17) {
          f.set_x((h.width - f.get_width()) / 2);
        }
        if (b == 16 || b == 17) {
          f.set_y((h.height - f.get_height()) / 2);
        }
        this.alphabetArray.push(f);
        f.set_alpha(0);
        this.add(f);
        a = new Gb(0, f.y + 90, a, true);
        a.set_scaleX(e);
        b = 1;
        if (b == null) {
          b = 17;
        }
        if (b == 1 || b == 17) {
          a.set_x((h.width - a.get_width()) / 2);
        }
        if (b == 16 || b == 17) {
          a.set_y((h.height - a.get_height()) / 2);
        }
        if (d == -1) {
          a.set_x(a.x + e * 60);
        }
        this.alphabetArray.push(a);
        a.set_alpha(0);
        this.add(a);
        if (d == -1) {
          this.icon = new Kf(c);
          this.icon.setGraphicSize(this.icon.get_width() * e | 0);
          this.icon.updateHitbox();
          this.icon.setPosition(a.x - this.icon.get_width() + e * 10, a.y - 30);
          this.icon.set_alpha(0);
          this.add(this.icon);
        }
        c = this.yesText = new Gb(0, a.y + 150, "Yes", true);
        b = 1;
        if (b == null) {
          b = 17;
        }
        if (b == 1 || b == 17) {
          c.set_x((h.width - c.get_width()) / 2);
        }
        if (b == 16 || b == 17) {
          c.set_y((h.height - c.get_height()) / 2);
        }
        c = this.yesText;
        c.set_x(c.x - 200);
        this.add(this.yesText);
        c = this.noText = new Gb(0, a.y + 150, "No", true);
        b = 1;
        if (b == null) {
          b = 17;
        }
        if (b == 1 || b == 17) {
          c.set_x((h.width - c.get_width()) / 2);
        }
        if (b == 16 || b == 17) {
          c.set_y((h.height - c.get_height()) / 2);
        }
        c = this.noText;
        c.set_x(c.x + 200);
        this.add(this.noText);
        this.updateOptions();
      }
      g["substates.ResetScoreSubState"] = ck;
      ck.__name__ = "substates.ResetScoreSubState";
      ck.__super__ = db;
      ck.prototype = q(db.prototype, {
        update: function (a) {
          var b = this.bg;
          b.set_alpha(b.alpha + a * 1.5);
          if (this.bg.alpha > 0.6) {
            this.bg.set_alpha(0.6);
          }
          b = 0;
          for (var c = this.alphabetArray.length; b < c;) {
            var d = b++;
            d = this.alphabetArray[d];
            d.set_alpha(d.alpha + a * 2.5);
          }
          if (this.week == -1) {
            b = this.icon;
            b.set_alpha(b.alpha + a * 2.5);
          }
          if (Aa.instance.get_UI_LEFT_P() || Aa.instance.get_UI_RIGHT_P()) {
            h.sound.play(D.sound("scrollMenu"), 1);
            this.onYes = !this.onYes;
            this.updateOptions();
          }
          if (Aa.instance.get_BACK()) {
            h.sound.play(D.sound("cancelMenu"), 1);
            this.close();
          } else if (Aa.instance.get_ACCEPT()) {
            if (this.onYes) {
              if (this.week == -1) {
                $a.resetSong(this.song, this.difficulty);
              } else {
                $a.resetWeek(ib.weeksList[this.week], this.difficulty);
              }
            }
            h.sound.play(D.sound("cancelMenu"), 1);
            this.close();
          }
          db.prototype.update.call(this, a);
        },
        updateOptions: function () {
          var a = [0.75, 1];
          var b = [0.6, 1.25];
          var c = this.onYes ? 1 : 0;
          this.yesText.set_alpha(b[c]);
          var d = this.yesText.scale;
          var e = a[c];
          var f = a[c];
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          d.set_x(e);
          d.set_y(f);
          this.noText.set_alpha(b[1 - c]);
          d = this.noText.scale;
          e = a[1 - c];
          f = a[1 - c];
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          d.set_x(e);
          d.set_y(f);
          if (this.week == -1) {
            this.icon.animation._curAnim.set_curFrame(c);
          }
        },
        __class__: ck
      });
      function Ph() {}
      g["tjson.TJSON"] = Ph;
      Ph.__name__ = "tjson.TJSON";
      Ph.parse = function (a, b, c) {
        if (b == null) {
          b = "JSON Data";
        }
        return new Uo(a, b, c).doParse();
      };
      function Uo(a, b, c) {
        if (b == null) {
          b = "JSON Data";
        }
        this.json = a;
        this.fileName = b;
        this.currentLine = 1;
        this.lastSymbolQuoted = false;
        this.pos = 0;
        this.floatRegex = new V("^-?[0-9]*\\.[0-9]+$", "");
        this.intRegex = new V("^-?[0-9]+$", "");
        this.strProcessor = c == null ? m(this, this.defaultStringProcessor) : c;
        this.cache = [];
      }
      g["tjson.TJSONParser"] = Uo;
      Uo.__name__ = "tjson.TJSONParser";
      Uo.prototype = {
        doParse: function () {
          try {
            var a = this.getNextSymbol();
            switch (a) {
              case "[":
                return this.doArray();
              case "{":
                return this.doObject();
              default:
                return this.convertSymbolToProperType(a);
            }
          } catch (b) {
            Pa.lastError = b;
            a = G.caught(b).unwrap();
            if (typeof a == "string") {
              throw G.thrown(this.fileName + " on line " + this.currentLine + ": " + a);
            }
            throw b;
          }
        },
        doObject: function () {
          var a = {};
          var b = false;
          for (this.cache.push(a); this.pos < this.json.length;) {
            var c = this.getNextSymbol();
            if (c != "," || this.lastSymbolQuoted) {
              if (c == "}" && !this.lastSymbolQuoted) {
                if (b && a.TJ_unserialize != null) {
                  a.TJ_unserialize();
                }
                return a;
              }
              var d = this.getNextSymbol();
              if (d != ":") {
                throw G.thrown("Expected ':' but got '" + d + "' instead.");
              }
              d = this.getNextSymbol();
              if (c == "_hxcls") {
                a = g[d];
                if (a == null) {
                  throw G.thrown("Invalid class name - " + d);
                }
                a = Object.create(a.prototype);
                this.cache.pop();
                this.cache.push(a);
                b = true;
              } else {
                d = d != "{" || this.lastSymbolQuoted ? d != "[" || this.lastSymbolQuoted ? this.convertSymbolToProperType(d) : this.doArray() : this.doObject();
                a[c] = d;
              }
            }
          }
          throw G.thrown("Unexpected end of file. Expected '}'");
        },
        doArray: function () {
          var a = [];
          var b;
          for (; this.pos < this.json.length;) {
            b = this.getNextSymbol();
            if (b != "," || this.lastSymbolQuoted) {
              if (b != "]" || this.lastSymbolQuoted) {
                b = b != "{" || this.lastSymbolQuoted ? b != "[" || this.lastSymbolQuoted ? this.convertSymbolToProperType(b) : this.doArray() : this.doObject();
              } else {
                return a;
              }
              a.push(b);
            }
          }
          throw G.thrown("Unexpected end of file. Expected ']'");
        },
        convertSymbolToProperType: function (a) {
          if (this.lastSymbolQuoted) {
            if (w.startsWith(a, Ph.OBJECT_REFERENCE_PREFIX)) {
              a = v.parseInt(r.substr(a, Ph.OBJECT_REFERENCE_PREFIX.length, null));
              return this.cache[a];
            } else {
              return a;
            }
          } else if (this.looksLikeFloat(a)) {
            return parseFloat(a);
          } else if (this.looksLikeInt(a)) {
            return v.parseInt(a);
          } else if (a.toLowerCase() == "true") {
            return true;
          } else if (a.toLowerCase() == "false") {
            return false;
          } else if (a.toLowerCase() == "null") {
            return null;
          } else {
            return a;
          }
        },
        looksLikeFloat: function (a) {
          if (this.floatRegex.match(a)) {
            return true;
          } else if (this.intRegex.match(a)) {
            a = this.intRegex.matched(0);
            if (r.cca(a, 0) == 45) {
              return a > "-2147483648";
            } else {
              return a > "2147483647";
            }
          } else {
            return false;
          }
        },
        looksLikeInt: function (a) {
          return this.intRegex.match(a);
        },
        getNextSymbol: function () {
          this.lastSymbolQuoted = false;
          for (var a, b = false, c = "", d = "", e = false, f = false, h = false, g = false; this.pos < this.json.length;) {
            a = this.json.charAt(this.pos++);
            if (a == "\n" && !f) {
              this.currentLine++;
            }
            if (h) {
              if (a == "\n" || a == "\r") {
                h = false;
                this.pos++;
              }
            } else if (g) {
              if (a == "*" && this.json.charAt(this.pos) == "/") {
                g = false;
                this.pos++;
              }
            } else if (b) {
              if (e) {
                e = false;
                if (a == "'" || a == "\"") {
                  d += a;
                  continue;
                }
                if (a == "t") {
                  d += "\t";
                  continue;
                }
                if (a == "n") {
                  d += "\n";
                  continue;
                }
                if (a == "\\") {
                  d += "\\";
                  continue;
                }
                if (a == "r") {
                  d += "\r";
                  continue;
                }
                if (a == "/") {
                  d += "/";
                  continue;
                }
                if (a == "u") {
                  for (var n = a = 0; n < 4;) {
                    n++;
                    if (this.pos >= this.json.length) {
                      throw G.thrown("Unfinished UTF8 character");
                    }
                    var p = r.cca(this.json, this.pos++);
                    a <<= 4;
                    if (p >= 48 && p <= 57) {
                      a += p - 48;
                    } else if (p >= 65 && p <= 70) {
                      a += 10 + p - 65;
                    } else if (p >= 97 && p <= 102) {
                      a += 10 + p - 95;
                    } else {
                      throw G.thrown("Not a hex digit");
                    }
                  }
                  n = new go();
                  n.__b += String.fromCodePoint(a);
                  d += n.__b;
                  continue;
                }
                throw G.thrown("Invalid escape sequence '\\" + a + "'");
              }
              if (a == "\\") {
                e = true;
              } else {
                if (a == c) {
                  return d;
                }
                d += a;
              }
            } else {
              if (a == "/") {
                n = this.json.charAt(this.pos);
                if (n == "/") {
                  h = true;
                  this.pos++;
                  continue;
                } else if (n == "*") {
                  g = true;
                  this.pos++;
                  continue;
                }
              }
              if (f) {
                if (a == " " || a == "\n" || a == "\r" || a == "\t" || a == "," || a == ":" || a == "}" || a == "]") {
                  this.pos--;
                  return d;
                }
                d += a;
              } else if (a != " " && a != "\t" && a != "\n" && a != "\r") {
                if (a == "{" || a == "}" || a == "[" || a == "]" || a == "," || a == ":") {
                  return a;
                }
                if (a == "'" || a == "\"") {
                  b = true;
                  c = a;
                  this.lastSymbolQuoted = true;
                } else {
                  f = true;
                  d = a;
                }
              }
            }
          }
          if (b) {
            throw G.thrown("Unexpected end of data. Expected ( " + c + " )");
          }
          return d;
        },
        defaultStringProcessor: function (a) {
          return a;
        },
        __class__: Uo
      };
      E.$haxeUID |= 0;
      if (typeof performance != "undefined" && typeof performance.now == "function") {
        r.now = performance.now.bind(performance);
      }
      g.Math = Math;
      if (String.fromCodePoint == null) {
        String.fromCodePoint = function (a) {
          if (a < 65536) {
            return String.fromCharCode(a);
          } else {
            return String.fromCharCode((a >> 10) + 55232) + String.fromCharCode((a & 1023) + 56320);
          }
        };
      }
      Object.defineProperty(String.prototype, "__class__", {
        value: g.String = String,
        enumerable: false,
        writable: true
      });
      String.__name__ = "String";
      g.Array = Array;
      Array.__name__ = "Array";
      Date.prototype.__class__ = g.Date = Date;
      Date.__name__ = "Date";
      var Ti = {};
      var Gp = {};
      var rp = Number;
      var Fp = Boolean;
      var Vi = {};
      var xp = {};
      va.__toStr = {}.toString;
      Ze.content = [{
        name: "__ASSET__:bitmap_flixel_system_GraphicLogo",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUdRQUFBQmtDQU1BQUFCSFBHVm1BQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQkRsQk1WRVVBQUFBN1FQODVRZjhEemZzRXp2c0V6UHYzSkUwQXpQKzNTME1EelB3RHpmb0R6Zm9FemZzQXp2ODdRUDg2UVA4elJQLy93akU2UXY4NlFQOER5K2c2UVA4N1FQLy93REgvd0RMMEprNzFKMDcveFRIL3dUTC96RFAxSms3L0lrVC93VEQvd0RIMUprMzFKazczSVVyMEprNEF6di90d0REMEowMy93REgvd3pFRHpQdkFSa1VzWDhmSXZ5Ny93VEQwSmt6L3dESTdRUC8vd2pEL3dUTC93REVMb2tzV2pIUTNTUEU3UWY4RHNTOGticXd2VjlVT20xa0R5KzBDeGFrQ3c0NGhkWjR6VU9NQXZFb0V6ZnNCdjJVQndIUDFKMDRBdVNMbE1Fdi93VExIUWtWYmdqTFB2eThQdVNPWlhUMmZ2aXlQdlNzdG5TcGZ2Q2p2d0RFUHJ5U3Z2aTBlcGlkNmNEZ3Z1aVhLcmR2WEFBQUFOblJTVGxNQXZ6L3ZQNzgvRDc5Zm45OS9IKytmRHo4ZmY3L2ZYKytmWDk4ZmZ3L1BEMS9mbjM4Zjd5L2Z2Nzh2cjkrLzMyOHZyNDlQajgvNUdwWGFBQUFDa1VsRVFWUjQyclhXQlpJYk1SaEU0VjVtWm1ZTTgwSTRzMkE3ekxuL1FVTDBLb285Y2VlWDN3Vys2cG9hU2FvMmJIWkJWaXZyWncwQytidVp4U1dEMk5nNk14RVlnM0FSbU5WbWpMbjVNMm9lb2JWVmc3QVJtTEV5b252NWpIeUU5bUJTWXZlTWJDUmw5dXNSVnlFY3hQbHROdmt4NGdpTVIvZ0l2dzAvUm40RUJpSS93dDg1QjVFWG9jc1h6OHg4NU5uemR6VVg4WTN6YzVUY0NJYXR5RGQ4UmI3eG94ZXRRdDVqb0dSR1hpSjRpbnpEVitRYnZpTGY4Qlg1aHEvSU4zeEZ2dUVyMm5PTnRJOU5JR08ya2ZiMDM0aG1YY05YcEtVWnovQ1ZlVWxYU28xWDUwbStNaWRKYXlYR20zT3lGWVpJWTRiaEtReVJyaG1HcFRCRVdwZ3hERXRoaUxRWU1GQXFaVU9rcFRYWElIcU5VbWVJZE1Nd0xHVlpvajNEY0pSdWlmWU53MUIyOVVjM2N4Z29EQ0dPTUl5b3doQmFEUnNvREVtNzlaTjQreWxpb0RCRU5JYVJTV0VJeldMRStsQmpDUEh0TVNLOXF6RWtiUkVqckRBa2JRY2pyREFrNmRMUmVUYWxWL1ZyUDd5YlRYa3lxZnExSGFKRWpmdEZaNE1oaHloaG8raHFOT1JyeDVtTWdpbkpFSlN3d1pSa0NFcllZRW82QkNWdU1DVWRnaEkzbUpJT1FZa2JUR0ZJRnVVRWd5a01TWHIwWDhacFFVeGhTTnFkcU1FVWhzUVZETHFRRElrb0dHbER5WkNBZ3BIV0w0WVlpbUV3aFNFUkJTT2R3aEJETVF5bU1JVG9Yc1JnQ2tPSURtNEhES1l3eEZjd1NxY3d4RmN3eW1PSW9aaEd3UkJETVkyQ0lZWmlHZ1ZERE1VMENoMDIxK01qei9BUkhuMmVBUkpRSGhZdTRpc1BpdHdJQ2tadUJBVWpONEtDa1IxQndjaU4wREZHZmdRRkl6K0NncEVmUWNGb0dUSXlQdFRmWXFTdFhaSzJ1enpFSjc3WENaTVhtWm9XT1l4c2d2b0dNaVBERXlLWFVaUEVxTWhnRE9RNmhOSjZCanNpQ0QrR3lHQU1wQTNDWUN5RUg2Tzg4a1BnQzUyOVN2ZFRmSXFLQUFBQUFFbEZUa1N1UW1DQw"
      }, {
        name: "__ASSET__:file_flixel_system_VirtualInputData",
        data: "YmFzZSA9IDI2NiA0NiA4NCA4NAp0aHVtYiA9IDI2NiAxMzEgNTIgNTIKYSA9IDAgMCAxMzIgNDUKYiA9IDAgNDYgMTMyIDQ1CmMgPSAwIDkyIDEzMiA0NQpkb3duID0gMCAxMzggMTMyIDQ1CmxlZnQgPSAxMzMgMCAxMzIgNDUKcmlnaHQgPSAxMzMgNDYgMTMyIDQ1CnVwID0gMTMzIDkyIDEzMiA0NQp4ID0gMjY2IDAgMTMyIDQ1CnkgPSAxMzMgMTM4IDEzMiA0NQo"
      }, {
        name: "__ASSET__:bitmap_flixel_system_GraphicVirtualInput",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQVk4QUFBQzNDQVlBQUFEcXhOS1RBQUFBQ1hCSVdYTUFBQTdEQUFBT3d3SEhiNmhrQUFCeVcwbEVRVlI0MnVTWkJXaGNTeGlGYjZSSzhXZDFiNWU2dTd1N1M5emQzVDNWNSs1ZWQxMnBLeG9QUmV2dUVpWG56UStYTU56bHhvRFo2YjZGcnhJN1h5WW4vd3gzRk8wTGdFTTlHZDhNWkl3U2pJRjMwT2pabDY4RWtGTnpuTStkT3pmdzdObXpvMFRDTWx1OHhqZHUzQmpJR0NXWS8xVW5Ndkl4TUNNUG80U1NEKzBhMjYydkREUlYxaEdwWDBVaTVjdEhTUG9VU05qSjJDRUd5a3I2REpUTkhIekpoWmR2MURmOUs0QklFNE9hMTJ4ZkZTY1ZaNUZ3dVk3V3Z2ck9aODZjaWJSWUxJOHNGak1zRnBOZ3pLQnM1dERrTlM0dkw0OWtQQ29ySzBWcGFZbFFLSk95R1hiZGlkUWNSS1prNHhIN0d5blpqQ3d4VUJabHF0bmFOVzdVTnpNZklESkV3R1h4dm5iVENVN1dDU2xmN0VKNERqRE5FeGl3RWpDc0VBdGx6dklHSXBrRHVaQ1RLcS9ybS9ZbDRKY05iRWdHMWllSmhUSURtR3Y2bDQzNmNpVm94V2l0MGtZa1hDNDVPRnY3V2p1em9iM0xaRHFGWGJ0MjRiZmZmc092di80cUZNcmNzMmMzVEtiVElKZkcxcGdON1YxRlJRVzRjT0Vjak1iVE9IMWFMSlI1OGVJRkZCY1hnbHpzc1JNcDJkaVZrQTZzY1FWbUx3Rm1MUllMWmE3M0FCSXpBSExobmZWOHM3Y0NrUW1BWHlqZ0d5SVd5b3hpMmVSQUxuYlFDWTF3NnBkdWlNb0RocTZoUVc1VHlJRmN5SWtYdC9LbGpXTnpDckF1MGFhUUE3azA1S3YrSU5vdzJzNlpNNmRudjM3OUpvbW1kKy9lRXhjdFd0U05ITWlGbkxURjBHd2NibWJ6YWZ6eHgrODB5RzBLT1pBTE9mSE9tbzNEallhMnlXU2lRVzVUeUVIZFFMUytqdTl6SjlKeTRaYVVBU3hZU1lQY3RwQkRVaVpBVHJ5ejFqZHJLeEFZQWZnRTJ4WnlvQTJFbk43M09hRnd3cTJSOEdrQkZ2Z0QvWmZMd2VJQUlQSFRTK1JHamp6MXZrRzVOTHpsSUNSUHo5ZFpmVnZiamgwN0xuTjJkcjVHU3ovem8yNVkzcm1QVUtaKzJBV1V6Und1ZE8zYWRTNDVjYjZPMms1WUxKYUNmZnYyMHZDV2d2Mzc5NEU1NlhhaXRMUzA0UExsaXpTOHBlREtsVXRnVHJ3dlB5Q3NPakZreUJDTUd6ZE9LSU1HRFdwV0o5akdVYkRaQjVpNVdBN2MvSUhrRE9oMmdueGprbWg0eTBGY0N1L2IrSnpvMkdrU3VuV2ZKNVNQTzQ1cnRCUDBod1BEaWFpcHFSNmczSDJxU1BPNi8wSjVWMWs1Z2p6SmovTjFydmQ5K1k2K1J6bDRYYUhuNjhRdWZsdTNhOWZ1aS92Mzd4LzRZZXk4TVpWUld4V1RkNFN5M3lXUUVTQUV5anJyRTYxUTlvNWgweWZkdm4zN1pJY09IZkxJazNOVitFNVVWMWNQZVBldVFwcEtWRlpXS2hVVkZicWRxSzJ0SFZCUlVTbVJieFZEN1lRR3ZoT0JnWUZqVHB3NG9YejY2VTRsSnlkTEtKOS8vcGxDMlI0ZUhrM3FSRTF0ellBblQrVDV0WHY2bEsxejFUdmRUcER2MnpmeStMNTl5L3ZxejRtSlUzZU1pWXA3cVhqNW5sVmNQSTRwTHU1aW9Dd2YvNHNLWlk4ZWw2N2ZDZlVFMUpZSjV5TnFHMkNnVS84eU9SaTJCaStDczhERXN3QzA0NTdIdGF2M1haY0FySldFVGNrTitYNU95MTJ3TWdBSXMvV2RrZzhRbmtzdUlDZlZ0eTExUWRzSm85RklKMzVwK09PUFAzRHc0RUhkVHBTVWxOQ0pYeHJNWmpPdVhyMnE5VzNMZCtLcnI3NkMwVWgzU3YvYStFN3BGTGswMm9uWUZHQVduZm9YeVFFOXVncUxmYUhiQ2ZLbEU3OTNrQndFaE9uNGNwMVl0K2tTNGxQcXNNYkZobmRLN2tCOGFoMjVXSGRDTFVWcjlveHJOUHRuTFNLMlNMTnhFSFR2OFNZb0UrUTJjdVRJd2JTNHhJQUJBOGJVKzY2Tmw0ZU5TY3czeThxM2YvLys0Mm1wODRaT0FTSWt1bE9LekNNbjNyZTF0aE0wQU9YYVBIN0hvVU9IZER0UlhGd3MxZVpCOXg3WHIxL25mZHN5MnJOSFJSTWNIQnpnNHVJQzJlNlV5S21oVHNRa0F6TVd5c1A4RlVCWXpHdVEyN2h4NDRab08wRyszb0h5NEI5S200ZTFyOEZnb0RtQlVXTVNrWkJhSjgyZEVybVFrN1lUanNTdFc3ZDgvdVB1S29EYlNOcnNFOWxPekE1ekZrTExFRmhHZTVtWm1abjNtSm1aK1c2WjZjZmsrRzZaR1V3Ym94ekxkc1R5VE04L3IxeXRxUzdKa2tmcWJOcDVWVjlOelV5ci9VcnBmUFM2YlFBaDJBS21JV3c3SUxmUFAvLzhMbG5tOWZiMjNoSUlCTXprNnhUeWRiL2YrMTIrdVBId1k0SFBlNEhNSk9BNHU5Zkk0Y3Z0dU9xZ0xTQkhOMk8vMDJ0UmVHdkM0VmhOU0NhVE5GU0xZREE0N1pyUXlYZHljcEtHYWhFS2hRcjRkbloyM2djQVo1NTVKc2JIZDhJMllDMlR3OFJFSEIwZEhTWFhoQkF3RG80VEF2LzlQLzc0NHp2bGQ5elQwNVBuNjhBa0s4NjN1N3Y3ZmdBNGJPT3QyRDRRUURhMyszbVN3OEJRQUFjZWZLMjZKbVQveXUxcmQ0QVFkdFUvcm5NeWdiY3pZM243SkR0UjFYeEJZY3RlOTNHeVA1ak5adHNsMzJxZGFHZmM1VGs2a0xkUHhxTlZ6UmQwUkFGZjF3RWRDd0N0emMzQWdFR2EwdEFZRnJTMFNVZDVJcm1DOE5ZRWREbmprWkVSOVBmM1kyQmdRRXNBS2I0bTlQRk5KQklZSFIybHlRQ2lrMi9Bc2l5dUNUUzdhOEkwVGFtdHJmU2E4QnM4VW9rdnNIUDg3YnhsTS8zRmYzYTZ0L3k0WW5BQTRRUkF1T3NndnlZeW1VeDdKWHpIeDc3QVNQVHR2Q1dUeFhrazRyMGx4cFdoclBKVi9FUmoweUxzR0RWSVV4b0RtbHVXcW10Q0JnOGh4SElRZHZVaE9uRG5aZGpuaVQvSVcrdHZQNGkwc0N1ZjB4YXl2YmFZWEdtTzQzaDhxMFRnNHBPeHorOCtrcmZXZTY5RzJyWlFNV3hINGV0R2F1NmdXQWdBSVdiTTJVbHpWb1ZsSVFBSGhCQmlFU1RrbXREa2pCazA2SVJiVzF2UjB0SUNWd3hFNVpDY0N0ZUVMcjVqWTJQWXVYTW4zQjR2RGJGWVRDdGZkK3R1UkFpeFVGWlJ0bTNERk1nS3FOU2FFTUpmVG5YL1BhdnhsMys4VDk1T1BuNENRbGpLR050SzQ3eXowdDY0UDlrWFo1KzVaSVkvUXdrUWNrMVV6UGZHNjFialYzNStuN3h0T25RQ3RxM3l0U2JUT09IWXREZnVGL2JGeVNkV3pwZCtJcjhtQW1Fd1h6RUZkSWR3Z2dWcklpZ3JheDNPT0dwbnNmS21TOUYyNUdGNVczYkptWWd0YmtIRkVIbG5FSmFMUXVGYlJaVVF6U1N4OHFMVDBYYklmbmxiZHZyeGlEWFhWVGluSUNlRjczUFBQVmNQSUtqd05RVU9DdmpDUTBpSE0rN3I2Mk4yQlhlN0grcnE2dUFLZ2xpK2ZMa1daNnl1Q1QxOEdUaFlhU3hZc0FDUlNBUTFOVFdZUDMrK1RyN0JwNTkrZWk2djhwMVpjTWlwNUpyd204bS84VllkTmg3ZWxyZUg3bHVMY0dpN01xYTVzUXNQMzc4K1AyYjkyaGI4Myt2QkdUS1duTlExVVNuZmp6K3R3MEVIdHVYdDVodlh3ckZWdmpXUkx0eDYwL3I4bUgzM2JzR0hIODJRcjFQSTk1bG5ubW1RYTBJNE11Q1pZOEpSK1VLU3pjT3VybTJWT1drVHdrME5VQUhrVHQ1YzBYeGtUVTZFSkt5VjcyRnJFVzZvTCtSNytMcks1eTNrRzRTRWljMWlJY283dmlvQ2g5dnF3TUtGQzVteE1NdW1NK2E5TG1jYzBNbFhCZzVXUjVKdk9CeG1hMGt6WDI5Tm1LY3BsZWNraEwvL0VoOThCRHo3b29CRVkyTVlGNTVqUTFocHZzZGtMb2I3N2xvQVF1SjMvakNBaEkvdHRlUlVmRTM0ZDhSZmZBWDhhSnVBUkVOOUdDZWZZTFBhbUpJTE16RmNlNVhLOXgvK05ZQmt5b2N6VnZsUy93ak9LamRSR0R3cVoyMDVEa0x0VzFBTTh5ODZEV25IaGkrVTRWUnRtODBTQXFITkJ4VG4yM0VNMHBaVlZadE5JcFZLaFJTK2htbEtzTFVIRHlWd0xGNjhtRTZZb2pFemVTeGF0SWpQTlRnM3ZYeGw0R0JyalpzYkpHY0dFc3V5dFBLVmE4SlVUYWtjcDBvRTZIOStMSWhFd29IRWJUZnZpNmFtTHI3RGhyV0RPUEg0aFpENG4vKzM4VCt2Ky93WlFsK3dvNzN5V2hDcGxNZjNxaXYyUlUyNGkrK3djdWtnampyQzQvdmUremJlLzhEWC9PUlVkRTJZcUNrNXhUbnBxenhHNnNOc1VVSEMzdm82SkJyM1g0T0JSVTBWekN2SUNRcDA4UTBKdDBWMUFpVHNOei8yK0s1WmpZSEdTR1dWa2lqRDF6aE55ZFlkUE9qRVpPQlFkaHk1cDJiWndqSXNlQ2lCUTluUlJlR1l6M1VIRHduVE5TVVYxZVdZaVNUdzIzK29GZ1dzTnBMeFQvRGd2U3U5Y1FtQnYvamJVQVZTbzk0Y001a0cvdUZmVkw3WFhiTUFzZGdudVBGNmoyOHlKZkRrY3lGLzg1Y0pFR1pyU2g2Q2VqSjUyWnJ5RVByMXYxZnU2NjQ5VjBzbUwxR3Q1cEhidUVIbCs4K3ZxSHpQUHI2U2VjdndOVWxUa3F2WTBSbzhaT0JZdW5RcENHYnh0YlcxV0xac0dVK0djemVQQm9lcGp5OERCNFBEdkhuekpGOVdTTHhub0dQd2tITnE1MlMycHFUTHVVbGpSUUc4LzZHQXhFbHV0Zkd6ajdaaTNkcEdTUHpUWTBFTURsWFFreGY2K2I3N0FmRDVsd0lTckRadXY3a1YrK3p0OFgzWnJWQkdkdWpqYTZLbWhGMVplYVFkQzNQYWo0UkU3ck5Pb0g4WW1SLzlIeVRhVGowT2NlRi9wMUg1eXNNLzByYkw5NGlEUEw1ZDI0SG9HREt2ZitqeFBXWWo0bFlPWlZHR2s3bWFVdm52bHhBK1Z2TFEwQkFEQnlzTU9pQ3BjYkJWeGJLY3dVT0h3eVFuTFh3bkppWVlPRmhoa0pQVU9KaTlLeFdTZnI3bWEwcWxJR3hVQ0ZZZlFjUVRBaExubnJVTUV1OS9hTHZhQ0h5aERLZXFUeUQ4d3o4SFdWMUE0cFIyaisvblg5ajQwZGJLNWhWaWRtbEtqbE11ZUZnQ2xTQzJwQTBMVHpzZUVvRVh0b0dvMmZZMkpPYXNXSUxSdGN2MWFoNVdaU2tGZDFNdFBIYXp4L2MvM3VGejFMejdtY2QzOFFLTUxtbjFQNy9sUUlIeG1wSSt6VU8ycXFSbXdDc3plUGJnR1R4NEw0VGcxWWhNbm9GRHRxb2twNmFtSmdZT21qYStlNHltcEVIUUhSb0dubnN4aUdMNDg3OEo2UkYwTldnMDBrWkdnUjl2Szg3M2lXZERsYzFiaHE5dG9LWms3NkxLbzZCbEZkbjZKcDhqdU8xMTlma0Y3UlhzdGhLNk0vbUNsbFhrbmMrbStMNzFxZnI4cE0yYUt5VWpOU1Z0em0zbHlwWHk5SGNlN2wvVjQ0RTdPbURPSlIyeENjR0QyM0VWUHJMdHhncEpNMThqTkNVTjBMRkRIbi83anpIRTQ2cU85TktyZy9qeXE3UWNvNzliN0ZSdVR6MGJReUtwOHYzUjFrRjBkNlYzeVQ0VllaYW01S050NWNDWFVheGw1dXUxckw0QitvYW4zazhrZWErMHJxSldUcCtnV3dsZnk4TDhVNC8xK0hadUI0WmpVKzhUYWQ0cnJhdG9KcVdScjVHYWtyYmd3ZllQZSs3UzRmTEs3TDY3dTV0WHprVmpObStFTTI1c2JLUWVvL0MxYlJ2RHc4TzhTcjRHYUI0YU5DVkRLZy9Ic2JCaGJSL1lXaUU4L1dNQm1odS9ybkRTWFZkNVVIaGVzYXdQRGZVcTM2T081RG1nci9WWEh1WnJTdnEyNmtZWHQ3cVo3MXBJZEQzOUNuNllHcEhHZTZWMWxXbmZEQi9RbmxKRW0ydlJ1R1l2ais5clcvSEQ0UjVwdlBmNExsbUl6TVlOUGlvbFVYcFZtS2dwQ1gyVlJ6d2VCdy9VMFpteEF1Rm5lYzlUMmowOVBmSWt0VEZ0S3pwYnRxblk3cEY4ZVUvaE9ScU5xa0hPQUw3K05TVWp6bmtvRmdsdWQwOWtyeWtTeU1QNHhaOWRqc2xzdExKTmptTFg4SFhFZGpkekwrVExZSEx2bmN1UlNVWDFheDZHYVVyU1RlaHZXMTF3a2pMRitsKzZINmYydnltTjkyb3JpRTVRWnh2SWJ3ZzljWlBLOTU3cmNlci9QU2VOOXlyZkxRZjZtYjhNWDhNMEpWbDVhQkxNMlRJWkh4OW5PNGhPamM0dFg1SE1uVHVYRllqTTZLdHdiTm9FYU82a29oN0RRNEFVeWlWZldaR3dBdEVSUU1ocDltdEtHbmFjVzFZY0Y1NXZ1MVhUSERtVjBxZmZkSGdiTm04Y2duQXMvNW04WmpkQnkrWGk2RGpKZG9Oem5xOXk5dVBnZzlxd1laM0wxN2I4WmZIbDNZUlptdEpNTlE4L2lBc0xDeTgrRTM2dzRMVGpFTFZ6MVlTOHl2bGFPVHBoZjN5UDI0eG9OcVYvdDVVSm1wTG1RNEowV215YmNQc3JkL3pJQ29UUFdZSFUxOWV6QXFuU0lUdmtwSXN2SFRJMUdRWVFWaUNTcjc0S3BBd256bTJXcGlRNTZXOWJyVmoyTGU2NFpWOUlEQTRKM0hDSHl2ZFhmMkUvaElQZC9qazcrdm5PYi8wVzExemw4UjNaSWZCenY2THlmZWorL1dEYlB2azY1UTgxbXFRcGlSbTFyU3gvOVIwelhXYThmaEJ1YWtUaTVJMHpyMGZKU1VYbGZKZTJzUlhsajI5RFBSSWIxL3M1dWw0NmZKdWxLV2tNSHFwRGpzVmlyRUFVVFlIMzFFVFlmakZFUTVDNkRCMHdBd1lyRU1tWEFZVVZGSU5oTlZ4cHMweFQwdCsyeXFaNzNmYVA2aXQrNi9lRDdscmdZVHgxbStrTjE5VEF5c1Y4emE5YjgwZ2tlbkhURFFwZjF5bFBuZWw0L2lVQmlZYUdNQzQ4cndiWmJNeGZwZVFZcnlrcGNIUUw1cUVMT3FEZzdMdUFmYzhvdEJQVVZsRERoYWZCRW80UDU2YW5IZzJkdEFVSzd2OGQ0THg3QysyV1gxYjV0aDhGUzlnYXRuM1lCbXBLK2pRUG1mbnl5cFlRVHozVDRUR0F5T2NNSUlRQm1ieWNoMWM2WDJvMmJGa3hnRWkrRENBNk12bFpxQ25wYzhhMlNMc09OZ3UycFNUKysvOXN2UGZoMVB0blhsVDc5RmRmc1FvYjF2WHBGS0I5RWVacDdJNFRzMkJiU3VLZDkyeDgvc1hVK3g5dVZjOStYSGorS3F4YzFxY3QyTm1HYVVvMDI5RW9tTFAxdE9UU015Rmg5UTBCbjNlaEdKZ3BaNzBNR1d3ZGpkUkhOQWptUHZobTAxaHk1b2tlMytFZFFIZi9OSU5qeUhaKzYvRTliZ3RHSWhvMm5KdXBLV2x0VzNHODdMMHpnRkFEb1lPajVzSG50RFZyMXBoUWVaQ0x3cHZPbC9vQkt4QVo4R2pjMmZRZDhUVkFVOUpmZWJRMGRya25zL2VHQkFQRm4vNWxLUDgrRVlkN3I3cWlYL21GTmNpa092VlZIczdNclM3U2hhdXY5UGdta3dLUFBSbVM3OTE3NExFblZMNFAzcjhHOFoyZCtrN0VtNllwbGEwOGZLeUsybE9PQWx0UUVzNXpQeTQ1UHZoanRUOWZmK294MyttcXFEM3lFTGFnUEw3YjNpdzVQdmpteHlyZkl3K3JmbFhZd2tCTlNXaXRQS1JKaDB5SEp5c1FiaWZsVGlGcUNmcWRzUjYrREhqTThKbk5rek1QRWRKUjYrZHJ1S2FrU2ZOZ0crWGhCMVlyYlpSbm5nOVMyRlh3L1I4QlgzOGpJTEhNZFlBMzM5RHFvN3JUeEZkWXVQWG0xV0E3U29LVkJ0dFZIbGc1QVQyOUFoS0xYVkg5c292MTh6VkdVOUlwbURjSHc4Q2YvRnZlSXR3Qk5EMzRYaG5mbE1ob0VLQjk4STNVQUU5OFAyK1IvM2diSmNEM3l2aW1uSTJ5Y01yek5VdFQwbFI1bFBrOE5SRHVYR0pXVCtlM1k4Y09ZMzlYbEd4aE1jT1hCKzc0aDZIMDh6VldVOUlhUEJnMHVycnJYVjBEZWZ2SGYwVlIvT2J2QlpWeDRYRGJkMzdDZkc1REdIMkQ5WGp1SlNoV2JPemYvR05RR1JPcGJkUFRack1ENW1sSzVLVHRuQWNyaVQ5NXpET0t1Q1hBOThwNGZyNDg5R1h5YjN3RVBQbDl6Nkl4bEFUZmUrUDVlVDF0TnVNMEpVZFg4R0FXTEUzNXRlYXlQMDlSbWxrOTcwMnJQSVFROHJOS0M0dW1JU0ROUWsxSmp6T09KL2kzTGxTYmJ1eFhuUVZqdjNQTkk1VUVubjlSdGVuRzl2WVdqdFdsZVppbUtkaysybGJtV1BsVllaQ0pBcjZ6V1ZPU2pzUTBrTk9lejljVVRjbjgvM2FPb0pYaGF4aUVtUDJhVW1IbEVRekFHQVJtSXBnSHpGbklnVUJwdnNJMlVGT3laNVR0bW9LWmNER0lMcm5zVVpvU0lSekQzRVNBbkVyekpSekhEQXVBMTltaUtjMHdlT1FtSjRFNU5lWTQ0OXBJeVQvRWszTUVFQW5BR01LaEFDeW5YTEF6VFZNU1pVOWhoOE1obUlKUUtNZzFVWkp2S0dRUzN4RDU3aUdha3Z5T1U2aXRnekdvclFXc0VwdEVMQ3VGU0FUR0lCd0c3Qko4aFdPV3B1VFF5bTNWSFVzbmdjWHpnSERJakc5NDBUeU1wSktZRG1NQk1jVTFGRFNBYnhDb0NXTWtZRVBCN05XVTVOa0NackpHVkIva1FDNXMxVXdIaXR2Y0hXVUlYNTVhSjk4OVJsTWkwcWsrTEZ3SUJFTzdQMlVMaFlINTg0RlVvbnY2WUpmcmM5ZU5nMUJvOXllWVlaZEQ3UnhXak4yelMxTXFGenkrR292QzdvMytoTHF6MEcxY2ljTHdWd2lVN0N3ejd6N0w1VGZzTTF3VXd6SnpLY3hKTWN4WlEzem5sTG5DVVRyU1Z3ajluNndqMDhuWThQQVdYQTdCWkFDQ2ZyMUk1cFVRUEx5Qm0xMG4xaWh4MG9nSEJyanpTVENuUVFqNHdEZXVGOGswWjhDWXh2MmVJRGJ1SHI1bmhIZHVlMHJiOTQybzF4dVk1b3lzdUdVQ25heXd0Q0taOGkwaXd6Q28xUnJJbFdWUEdvVkNnVmFyemVUa2hHeEVkbGF1V3BITVFNQ1BPSWhMUHA4L1VoUG50VWNEVUMwOW83aHNjZjh1WEF4Qk1BQUJ2MTRrODFJSTd0MUd1VGhVSzY4NGFYUmF6NGdtNURiRFlCZ2VmcitIejZjWHlaUnNVemxFWXE1eU91QXJSOHg3TlRHRXE0a3paNWgzSFp2NThpcE9zZ2hYRFhoeUd4NHJIbWxDc29UTEJwWnltQ3V2MExJdFRocmRVWmlmOEhEZXo4UEFnU3NtWEEzSmJ5MUlscmppV0ZqS1lVNjV0RVk5OWcyWkwrQ3lNd1pEMTFNU3B6TW5wcVhUYVVxbENzR2dIOU0wdHBuUmhMRTlhVzljT1pURVJhNGVlNlp2b3lGSElPTk1UVTBxcGpRemljODNqbXgwVTZuVUVkOUFJT0RLQ3ZxODlwUnN1MFpwL1QreStSOWN2Z3dQNzhQOWUzcVJ6SXVYSVpQdnNySDZGN1pWUHFYVldLUFQvSSs1Ull1eHNSR3VYZ0U1Y3JweVJRODdXYU1xZTM2aHAxeit3blVPK0VyZHVFTzdtaGc1dWVmaHFZTHBBRFE4bDQxK2h6Y2JlZEtmRjZsOWlkS2NpOU9jMTROa1ZiOUdTSDlaNU0xNm5wSnk2Yk5qalFVTXR0bnl0UzAyZlBER0dDRzlFS1gyN0JQTjU0b1huN1VnV1ZYMU83MFVReHhLUHVpN3puNWY3K2VmZjI1di84MFB5eHE2bnBKdEgvUUYyRjhUc3VKck5CcUV3MkZGbEV3bVN6NWZVQlExVVpDSmJ5bzdKZzdpb3B6dEUydEN6dnZMYWFMRnhVVmlzUVRGNGpLcnE2dGFLUlNLa2kwTzRvdGxXUWVXOFI5Ly9ORld5OWNDNUxsaDZ5bko4ajIxSmx5M1E2K1RZS1V3eS9mdmIxbFlLaEtKcnVsRVplYVpVOW5pME91bThBYldrWnJZOFhXY0RyYVZvRldiNWN2WGQ3ejVzTUs3RHh1OC82Z0h5WHI3dnNoWGxkMnN6eXFYRkFQM1lFMzgrdXV2LzdQM0hlQlJWVnZiNzVUMFFpZ0NTZ2dsRUZLNXRDQk54UUpZNzdYM2d0U2Y4bDNGTGxld2dkMFA2OFZlTDFjQnFYWTZBdEpGTUhRcGdVQWdRRG9wWkdiV3Y5Ynp6WWtuTTVra3d5Um5Ub2J6UHMvN0RDbk9lbWU3c3RiZWE1MjlkNUhpRXhXc1YxYzlwV0RwS1pXNyt3UVJoWEpaSUFNQVRRNXRRejlGZE5FVkh3MDVYNFFTMTQ3WEUxR1VrTXNSR1R6UU5EbWhGLzEwNGJXNjRxUHgzYXJvM2JKbFM0eWlkMGU3aTRrRzMwK1VjRFZSeHlIK1pjSTFSRU9HMCthMi9kVjZRMTE4UXB5YXhvOGZyeXNPR2pUSW8wL2NkZGRkTkhYcVZGM3g1cHR2RnIzRUdrVnY5S1pObTVxSVhnQTBaY29VbWpQbkcvcjg4OC9wczg4Kzh5dEZ3OXk1MzlEa3laTnI5SW1XNTk5TjdUdS9xQ3UyYUgyckpEZmkwbXFsVDdEZTdhSzNmZnpkOUxkZUwrcUtjUjJxNnYzdHQ5OWlGTDA5K215a080WVNYVFNZcU4vbC91WEZRNGp1SEViMHQ5NHIzWHpDekNSZVJxOEc0Nk16SjFCS0R1Z0ZaMEQ0cXVJVUdGTHpYcVhNS0hqQTF4QVJQanEwRTZWMm0zNzBPdXo0NnNpZlZmUjI2OWF0Z3ZXdUZyMGpqbStEN2RBSklGNEhQYVg0QzZTL2hZZE83SUNBTmE1UXp6SVZuMWl6Wm8weUU5VUY1TWtsRHI0ZWZlS25uMzVTWnZxNmdJemRpaFVybERFV3ZZNmVQWHRXOFBqS3YvSHBwNTl5SHlkZlZ6MmxtVE5uMXVnVGVTZC9oTU9obnpFbXFrQkI3bklRa1h5T1gxUStJV09NN0N4ZDZXVXRGVGllWFZWdjkrN2RLeFM5ZTNlTTRkVnJ1ZlJ6L041VGltc0RYdjFYNE1DZUo5eDlnb2lDMnJWck40UWJmWWNCVUI5TEpNMEo3K3ozRmNmTThFN1UyeEpCb2ttMGRlclU2UXJKZU1MNCtQZ3JLL1UyYlVWemVsM3A5eFhIekI2RHFYZE15K3IwaGlVa0pBems3K1VBb0VlajI5T1p6bGNUWFR1SzZJWnhSSDhmUTNTZFJoUmIxNDhsc1YzVytTcWFFQjFYcVRjNU9ibTMrRUoxUHRHaFF3Y2FOV3FVMzFjY3c0Y1BwL2J0MjlmcUUwbEpTVFJwMGlTL3J6Z21UcHhJWGJwMHFkVExtL2NHaVQrSVhyVlBEQmt5aEQ3ODhFT2FQMzh1ZmZ2dFFscTRjQUZ6dmtZVVd3dlo5aHg2Ly8zM1pWVlhKNThJajBpaXVQaW4vYjdpYU52eEtRcUxTS3pXSnpwMjdGanBFOUV4U1pUYS9XbS9yemhTdWoxRjBVMnExUnZHL2xIcEUrZkhqcVYrbDVYU3ZTT0pSb3dodW4rMHRodytodGkyZy9wZVdrU3RZMGRYNnhNZ0lpdi9RVjdJdTFSSDh6SXFId0ExTjFucHZ1QVc5SHBvSEwwZDFrNVR2aHJhbHNSMkU1T0ZuSFhXUWo0RWJqai9zZlVpb21BaEQzaWZLbnFEUSttKzJDNzBlbkkvZWp2MUlrMzVhbEpmRXR0OGRwWkh2ZjM3OTQ5bnZXUDVaeVVBS0RVb2toYTI3RVpaY1FQcGVMdkxOT1VodGltMjQ2MWhWZlFPR0RBZ1RuekJrMDl3UTQvNjlPbEROOTEwRTkxNjY2MmE4b1liYmlDeHpiTzBPdnNFejZKSkFxRWt2YkZqeDJyS0VTTkdpRzBacytyMGhqQ0QwdFBUTzZwOWdrL3VKVW1RcjczMkdrMmJOazFUdnZMS0t5UzIrV2dUcjN6Q1lvMm1wczBIa3dTWEMrTEdhMG0yT1lyRXRzVlNkWXc1V1ZmNkJFOG9xdmhFVUhBMHRXNHptRG9sanFhRTVQR2FNcjdMS0JMYlZxdG52WDM3OXEwU0o4SjRFdDBsZFFiMTdMZUhlZzNJMUpROSt1NFMyMXhXYStmUkowQkU1dllNZHQ1QnZFUDFWcTVwclFGQWVpQXZxVFA0ZnViN1JCc0hoMWdpc2dnYm1WN3JEei84RU5LMmJkdUxaUEQ1ZC9icVRTL2ZVRGVBUzBGQjRndUdUelNjM3BTVWxMYmlENFpQR0Q0UkNIRUNSR1RpNVdvUUgyL1FsMy9oQ2hZL21QLzlJTSthUHVhbTNrcjVFRnFTYlM1bjJ4K0lCdEVpbWtUYjh1WExyU0phMk1qMENpMERCdzZNNFo5ZHh2NDhoSS81ZmtRdmV2bE83SUZYWFhWVnRHaGttZ3lmMEVTdnlmQUp3eWNhZFp4UW5FTEl5NmVvbUppWWkvbEMvU3ZrZzBsV2xQOUlQb1NhbkNucmxhN3ZMemJGdG1nUUxhS0paMnlSaXM1R3FsZG9sc0huMzd0UUwzclpJZEp2dWVVVzBXcFdkQm8rMGVCNnpZWlBHRDRSQ0hFQ2FzZGcwU0djYmJyeXhyYkwrUHJOeStWREtwUTNhVWlxYllsdDBjQW5oZlpraEN2NkdydGVaWGFSbUpqWW5KdVBIV0pqWTd1S2t3aDVhZDJuSWFuWVladHBZanN0TGEycDZIRjFDTU1uREo4d2ZLS3VOSHpDelRsNHVkU0VNMk03L3FDcC9FSFR1Zm1vQ2NVVzIwd1IyNkpCSlRhUTlDbzBxMmpSaUdxYkpoZTloazlvb0RjQVlQaUVFU2NNR0RCZ3dJQ0JlcDVWQ0czYm4wMWg5dEtZaVdvTmdheFhEL1RXSjFhdVhKbkNtOTU2YVVtMmVkWmp2R2ZQbmhSbUw0MFpBRDZoNnhqVmxObWJlUnR6QW5NS2N4cnpBeWVuT2I4M3dmazdmZVMvUVlQRFNCcG1XOGJraDIwWmszSnN1LzVGOWwxUGFrcmJ6bitSMkdZTm85WExwanJwM2YwczJmYzhweW5GcHJkNlhaYWdWbzFwRWRhbGpxbld6RStGUEx4czJiS2NaY3VXMHJKbFN6VG1VaExicktIT1k3eHIxNjZIbVRrN2QrNmdIVHUyYTBxeEtiYVpBZUFUdW9oTnZaZ1BNZWN4TStuc2tTbnY0WHl2WHZBZEJ0Uk5HbnZHcEptT1B4OG1PbkE5Y3lEekVvMHBObThpMFNCYVZFNXQ4cWczY3lyUnlVbEVlWTh6SDlPV1l2UEVKSEljbkZvWHZVcGdDR0lHT3htaU1SVzdvc0hxcnRkZE13ZnRtVXVXL0V4OGJJVmZ6bUFTbTdObno2SWxTeGFSYUtsdGpEbG96L3pqajYyMGF0VktXcng0RVMxYXBDM0Y1dXJWcXlnall4dUpsa0R4Q1kxajBvM01yNWhaNUFJKytKSTJiOTVNOHhjc29BOC8rcGhlZmUxMWVuN0tWSHB5NGxQMHhKTVQ2WmxubjZPWFhuNlpwazkvajc3NTVodGF2MzQ5NWVYbFVUWElFaHRpQ3o3Q1NCemJueDdxMlBzSTBZSExpZlpmNGxlS0JzZmVSMGswcVozWlRlK0JLVVI1VHhMbFB1WlhpZ2JSVXBOZVpoQXpoQms2ZVBEZ0RyemplSURXNUYyMy9hKzk5dG80MGFEc2RsYnJyU1p4REYyNmRCRjkrZVVYZmorNFR6U0lGdEdrMXV5U09JWkswRjZ5WklrRWNuOVNOQ2dKeEZXdnViSDVoRWF4cUNmejM4eHRwTUtPSFR2cDA4OCtwd2tQUDBwL3YrRVc2dDMzSXEvNXR4N3BkUEhBeStqK1ljUHA3YmZmcG0zYnRwRUx0b2x0WTBYaUJWUk9IR3pQbUxpVjl0MUd0TzhTZlhEL0hSeU0vN1ZHdElsR2hWWDBIcHRNZFBKUlhWQzBlTkJyZFg0dmxPK1l2dDVxdGE0SFFGZjJQSTl1dmVoOFRYbDV0K1lrdGxuREtuNldlNGhvVXVrMXUvb0VsNHUyeXFtdkVyejF3TGx6NXhCcjh1Z1RmR3o3MWw5L1hTM0JXeGRjdTNZTnNTYVZYblhTY1BlSnJsMjd5bEVzbWpJMU5iVkduOUFnQmcxa3ppTVZ0bS9mVHErK1BvMnUvY2VOM2lRSkw1SkpiN3F3VDE5Ni9QSEhpVSsrSmhlSWxvR29FUWJNVEJQVElxeXcyWktCa3dDUlB1aklRMmxwZVErblRvdEtyN1ZTcjdrY0lPaUQ1Z3BQZWkzYytBM21zNW5lNXZzZTVzMTRvbWZ2c28wUDRic1pJL0hWaC9kcHlwKy9HZzJ4UFgxODF3Rjg2OTVQL0FqaFM2SlRwUlZxbitBVGFwTkxTa3FoRThnZDNYTEhpRWVmc0xGUGxKYVc2VWh2dVdoVzlGYWgyaWZHalJ2WCs4Y2ZmOFFiYjB6REN5OU0wWlJ2dmZVbXhQYXdZY004KzBUREpJMExtZDhDV002OHZxU2tCUCtaOFYvY2VmZDlHRHA4TkdiTm5vUGp4M05BUlBWT3VXWFNBUXVXclZ5RHUrOGJoa3N2dTV6SC9nMjVEd2FpUlRTSk50R0k2bUhBT1FNS1pTZCsyWjd4R05IZVM1Z1g2NE4vWGtHNTZ4NGdkdVlwUkJTbXF0R0dWZXJOZVVRL1BQNVlUWHJmQWtDN1o5eEE5ajhmOG10UHliSC9Sckx2ZlZpMEVBQkZieWd6eU5VbkZpOWVySk5WaDFLNitwTG16NS92MFNka3hxcVhWWWR3NmRLbHRHN2RPbGU5b1dxZmVQZmRkN2xQSWoybHIvM2NVL3BadExqN1JEM0R1YXI1bUp3b0tDeWtEejc4bUFaZGVRMmw5eG5nTjhwcUpDVzFLejMvL1BQU1Z5RVZSR3N3RExqL2orUzZaem9BbXozakVhSTlGK3VIZTYrZ29nMy9RNktOZDJTbUVWR1lVSTRGcnRSNy9HSDk4TmlqVkxUeEFUZTlmRVJDWHdEMHh2OUxsYUN0bDU0U2EzbEVOS24xQnJ2NmhBUkFmU1dQTDJqQmdnVWVmWUp2NzlOVjhwQyt4NFlORzlSNlE1bmhYQ3JxSjVjQjNYdnZ2YVMzbnBKb1V2dEVQY2ViVzVnN21NU3JXdnJzaXkvcHNpdXVsT0N0RzZaMTYwa0pDWWx5d2pIeHRjWWtjR3ErR1FZcVlSYnlCZjJqQUZnQUFraGZETElRUk52T25UdkhLNldLek16TVVmeUg1OVFMUFpIMXdrMHZqKzhFMW91aE42ZkRiTTRDSERaLzZ4UU5yT1VJN3Z4N040aEduckdQVTBvVWFwOGdJdmdLS1FVSTZ3bXMyK3pSSjRpb1hpNXdFdFlYNU1JbFY3MTh0L21EWUZ4enpUWEl6eStFM2U2QXZ5RWFDZ3FLd01mSnUvaEUvVUJtOEFCbU1aUFdyOStBTzdnODllNi8zMGRSY1RIMGhORFFNRFJwMWdMVDMvOElmRHlIY3BsWEVuTzI4ek1vTUhvZVBBTVlCQUU1bUtnejkyV1c0ZWRWZWJYeTE5OEs1WGRoczNrZjdNMXdLTFh1aTVVYU44OEdydmhMTDlXWit3NndudVVIYXVXdkc0N0k3OEpXWWZjNjJabE41S2FYQTlGRllFUTJid3BkOVpRb0R6SG5OVk1DNXFXaWxRbTFUeENSejRuajZOR2pPSExrQ0U2Y09JRjZnd2VmSUNLZkU4ZXBVNmVFS0M0dWJpaTlKdTdOaUUrQXp6dUMzbnBLelpxNStvVFBTU09XK1NPQVlleFhlUDMxYWZqbmd3L2pVT1loZ0VpdjVIRm9qdWdtelhISG5YZmh3UWNmQlBzWUdNUGtzekJqQVJqSncrRndPQWZDQVcvUXRPTklEQm4rUjYxTUcvUTFxUGxRL0xaTGFrMEViMkJ5YWlLaTF2S2xrSWdVdlY0bG9xWnQvbzRodDgrcGxXa0RYZ0JGRE1adkdZV2NRTHl6NGFxWFoyOVdJbW9KK2NKc1ZsWWRPcUdOOVJJRTdBT3RvRUR4aVhvSXh0d01CcC9wQXo3VFJ3S3lKSkg2bU1GNjhBbmY5ZWJtNW9Mci9VSVVGaGFDOXdmVXUxNStkRGVJeDdlbHNvcXkyKzNRQzlRcklQR0pldmpzaVFCV002L2taanhHakI2THI3a1I3aUFDQWJvbnpHYkV4blhBbkxuendSY2g0Y0NCQTVEUHdsd2puKzFjVHg0Q2k5TjF2Qm5aT2lPcWVTSTY5UmlMcEVzK3hONURGaTl0VkRxelZRa1VWZlZTWFZsM3ZVMDdvRlBhYlVpNjhDbnNQVkRteGZzTDdWWDB6cGt6SitLdmNWWldTdEFQM2NkWGdhVStnakdmemluM05NdmR4K0RIUUdYMmhxeXNMRjhEa2dlZjhGMHYzK1FtVCtLQUx3OEMzNnduczI5SklQV3AxenhyMXF4d2VYWFZxdytRKy9qNjhEUVZnTTNNZGl0Vy9vTDdobzNFenAyNzBCalIrb0pZNUJlZVJvOGVQZkQ5OTkrREVjZmNMSi94SEU4ZUNoeUFnK3BPWXNLN0pCSVRQOEVyRzZKSm9EaXhiM3JoRlNTSnhMUzkxVmU5eWhnclpUYWQwVkZyNFBNRmZDdWFCR09aWWN0TVZyNkdsQzU4U0NCcVRhYjYxaXRsSk43dm9PaVZWWlBQQ1lTSVBQcUVubnBLOWFtSmlBWUFXTWNNbjc5Z0laNllPQWxGUmNWb3pJaHAyZ3l0MjhUaCt1dXZCeitoQmtZNGM1M3pzeHJKNDJ4WEhrVTVtNER0RjdsejN6RFlUKytGZ3ZQYVhlYUZEZkpVU3ZOZDc2a2R3T0VKN2p6Mkd1eGxXWC9wYmRQYlM3MU1GZmpaZFFzcW9iK2VFa0FOR2tna1VmRDlBREtUbDhheEJHWHc1VEkrSlJBaWFqQzkzSXVRaEZHcGxadndVbkx6S1lFUWVmQUpuZmFVaUtnK0VzY3FKajcvNGorWSt1SXJNcTRnb2tiUGlJaElKQ1ozeFdPUFA4bTltOWZoeENyNXpPZDI4aUFIRTk1UkRhcUdwWHVSdCtkL29jQWFIT1dsRGZmazRkTk1YZzBpZDU3SlF0N0JyMVI2SStwdkprLzY2eW1KcG9aT0hsS3E0bDNVRXBDaFFFa2dFdlQwbGp3a1VValRXSktIQWxVQzBWNnY5ajBsWDNzYzN6UHg4U2VmNGUxM3B5dnZGekFJNFJKc3E5WVg0SkZISHNGTEw3MEVKNzRub2lTamJIVVdaU0NIQThqTnEzQmo1cEV5NUJRMmh3SmI2Vkh2eTBBZUlYcFJkN3JxelMxelkrYmhJdVRraGYybHQreWtkelpRWS9MUVUwOUprN0lWRVNtN3dzRTNsU0VrSkVSbTh4RHdOWmRuazBBYVhLOGtDVWw0ZlB1YnJKZ1V2ZksxSkJkSklQV2lTZmM5SmUvL3U3WUFsakNqdi8zdWU3ejN3VWNJVkFTekgzZEpTc1hFaVJNeFk4WU1NS0taaTJVTXpzbmtZZktoWVc2MlJtSmZicEliU3lOdlJrS2Z4NkhBV3ZDVFZ6WkVreWVZZkdpWW15MWgySGU4aFJ0TGcvc2hvZWY5ZitrdDNlaWxEVHM4dzY2dm5sS3RlaUYxLy9vSVJKSThwRndqSmF6S0hnZ1JRVllra2tDT0hUdUd1a0kwTmJSZVpjVWtzM3JwZ1NoNlpVVWlDYVNnb01CM3ZicnVLWGwvUmg2QXo1aHRsaTVianVlbnZnVFJRMFFCeTRqSUtNUjNUc1I5OTkySGhRc1hndEdHK2JtWDU0RVpQWStvRm9sSS84ZW5ia3pzL3ppc0lWRVFITjgxQTBYN1B2VFNSc1AwUEtLYWRVRDZrQ2x1VEV3ZkRpbFZRZlR1K3dGRldRdnJUeS9wcmFmVTRHVXJtYlZMRUpGWFNSNVNvNWNadkh5dDlCU1VFcFl1WnZKcXZaSThoSHlWcVBLenloS1dKQkRmb2YrZWtoZjRtSG5adnYzNzhkeVVGNVhIandNZTBVMWljSDZidHVCZCtlQkhzTUc0Vk1iaUhFMGU1QjI5UUZCVUFuWm10NEhONW9VZENOWFE3dW13b0lnNDdNd01rODJDdnBmWnRPc3A2U3A1S0VHWGlDQ3ZzdkdPYjlwejJ6RWVGeGVuaStUaHFsZFdUSzVsTmZtK1BNYnJ2VjU5OTVSOFNJQzNBeGdxNWNrbm5weWtiSzQ4WjlDeTFmbmNCd25IVFRmZEJQRVhHUXNpdXVQY1NoNCtsSzNzWjRxQW9pMXVsT0Ntb0ZtYmRQUzQ3bE5rNTRaNFlhUG1NdERaQ3JaWG5CWnQ3aXpQK2t0djYxVDBHUHc4c2s4NnZMQlJzMTc5OVpUc0RabzgxS1VMbWEzTEppdDVWV2J4OGlvMWV5a0g2U0VZSzFxRk1ucytmdnk0dkZiUkszMmJxS2dvNy9YcXRhZmt1NllubVhqanJYY2dLdzhpT3VkNFFXd2MrT2g5U0JQZGlTZFFOeGhQVzVYazdRYjJqSGZuanFIQXdhbFFJQ1VzYW5hMXJ6TmozL1htWndKWmI3bnowTXZBOGY5VWVkcUtvaTcwd2daNXIxZjducEttWlN1QkJPQ0RCdzlDZG03TFJqd2lncXc0Sk5qSjEwVkZSYnBaZVNoSkx5Y25SeHJSVXJaUzlFcDVTTDZXWUsyMVhnMTZTdDVySXFJUEFIVGR0SGt6Wm44ekYrY3F4TS9iZGVpRTZkT25ZODJhTlpBeGtiRkI3VENldGdMVjhIc252a2RCOWtZb2FCbzcwT2N5a085bHF4cCtMMzhkQ25LMi82WDMvRjVldkg4TmVzbXUvNTVTQXpTZ0pYSElpaU04UEx4eWhTSEJUWUtjbEgvNCtHc3B2ZFR4L1JxMEFhMThabGx4cUZjWW9sY2E1N0tKVVBvMlhoMmNTRVFCMDFOeStiMTBBQ05sSmZuYTYyL0sxemlYMGF4NUM3UTRyeFg0YmhhbEp6YXl0cHNKamJLVkFxcWVSM0xPd0d5TmdnS0wyVlJIRzdXV2dYenJ6eEJWeXlQSGl1VnBMTFhlK25uYWluVFlVeUpIZzVldFpNVVJFUkVoSzR6S29DYUJXWjRNa3NkZXBld2kzNjhieUlkZzdQV0tRM1FwS3c1SkhGTFBsMERzUWEvM21zU2VibnBLM210Nm1va1ovLzBhdTlrbUVaM3psT1N4ZGV0V3ZQUE9PM0RpR2RRTTQya3JteDNZdUwzWWpiL3c3dWU4NENHSU9pOFJDb0lyL3ZUejAxYWlsN0R4anh3My9yTHhLUExRRFZITk8vNmwxNTd0KzQ1NFhmYVVHcnpuSWVVUzZXbklDa1BkTTVDdjVSQkNkU0RXdzB4ZWtwbXNpQ1JSS0hwbHhTR0pSQUt6MHEveFJxc3dVSHBLNnQrNUdzQTFzbXI4aURjREdxaTZnZkNaWjU2QitMZU1rWXdWUE1ONDJrcktLdkdEUG5KaitwMC9JM1hRVktoaHpabFZ4L2V1NzdKVjFVZDE0L3RQZG1QNjllOGo5WklIcStyTlgrRjdtVTMvUGFVR0t3TkpvaUFpSlhGSUlKUGQwRkw2VWI0dnI3cVp5VXZpSUNJbGNVanBTbm95eWhFYjNvNkxhQXFZbnBJS1k1VGpSNHJsdllrTU9ubGV5OWFRZlVCOG1aUjZySXlHdVpvQ2RkQnFGdHZialdIUmJWQUZmMDRCeXJMOTNqQ1hSbml6QzlMY0dCYlZFbFZ3NUF2Z3pLbjYwNnV2bmxLREo0L09uVHRMZ0JOS3owTUNtZlE0SkhGSVVGV1hYSFN4OHBBbmxFU0xrdWhreFNGOUJBbk9hcDNhNjlXcXB5U2t1cHlXZTIxQlFTRyttVHNmQkJoVTBXSzFTZ0tSNXJteW1mUmFHVE9qYktWaVZKZ0ZkWVpzWk52MU9KRHpmVDBlM09kZ1VwMFpGV0ZGblNHSEl4NTZEOGhiNiswVmZWQkQzejBsTkhqWlNub0g4c1NQUEVhcXJEZ2trS2xYSEFyMUVJd2w0TW9tUU5FcXMzaVpzVXVpMDZ0ZWpYdEtDa1l5TVhmZVBBOHJHZ1BOV3Z4ZjB2N29vNC9VWTJZa0Q0VkJwMzRFTXNiVnp2V0RnTi92QlU3OUFoRDh0c004cUdnRHNIOWE3ZHp4RUxCM0tsQ3d0WDcxa3M1NlNocVVyVTZlUENuQlMyYnY4Z1NUOURnOHY2Y09nckZjQUtWc3ZKTS9maWxWYWE5WDF6MGxNNERoUklRRkM3L3pVTG94R0JvU2l2Q0lTSHo0NFlmS2VNcVltUVA0YkN2dlp2SW9Qd29VYks2ZHRpSmZMdHVHSjVpODdkR1Vud1NLZDlkT1c4bFpPNDBKQkk4Z1hmV1VGRFpvOHBCWnNNeE9wZG1zMU9IVng1M0xxMEs5bElFazBhbExWY3IzWlphdi9jcERWejBsd2MxTWJOcTBHUWNPWm9JQUR6UW85My9zM3IwYnYvNzZxMnJzakpXSGRuUk5IbzFaTDlsMTJGUHlvbXlsRXhDUm9kYy9QU1hCVFV3c1dyTEVXR0hVd2laTllpQ1lPWE9tZXV3Q09YbVlkQlNJM1lPeHJ2V1N5VjJ2N250S3RaZXRKUERvQkhYU29pTzVvaVZRZWtwS3llcFdJc0t5NWIvVTRsb0dyVUhCQ0FrTkExOUZyWXlwakowNUlKT0hvNndjc0lUb1ovUk53WERZS3VBSjlnb0hZSUorWmh1eTI5ZnVmYzlEdTU2Uzl6MFBtY0ZhclJib0JSYUxXZm9RTmVxMVdQU2sxeUo2QTZXbjFJdUpuVHQzMXZIV1FnTlJVZEdRbXg0ek1qTFVZeGg0eWFNc0p4K0lQQTh3bWYyZk9Vd1dJS0lGVGgvSmd5ZVVGd0FVekdTOTVHL0ZvaUhJaE5PbkNKNmh0NTZTdzBuUGtINkZ6Rzcxc1BvUURhSkZ5akkxTmJ6bGlTbWQ2SldkNmFJM1VIcEtBNWhZOCt2YU9rNm9ESWFIUjBDd2VQRmk5UmdHWHZMSTM3SVBkQ1liRkJrSHNqWURtY05BcGhCdEtUYkZkbFJiVUVVMlRtNDlDRS9JTzJnQ1NuWUF3ZUVnU3lUSUZNeTBha3V4YVlrQ1FzS0IwZ3ljT0VDdTE1cVN5OHBEWjZ3NWVjaWRFUG41QlZ5L2paTEFMWnZtSkRocFNyRXBUeFRKbm91OHZJSWFUNGs5ZlBnd0I5TmloSWVIU1JKUkFxbW1GSnNoSWNFUURhTGwwS0ZEN2o3Uk9IczBBNWpZOWtkR0hkM0xZQ2ozb1FTcXBubi9nRXdldHFKU25GeXpDMlE3QkVRM1pjWUJVZTJZY1JxeEhjU21LVG9HVko2Sms2dDI4T3FpRko1Z0t6UGh4QjRMcUhRalRNRmxRR2dVczRuR2pHVGJwK0VvM29nVHV5d29MNEVhc2xmQURnV2t0NTZTcWRia0lmWHovZnYzYzVuaUZDY1BPYllqMnNrb2pSZ3RTWU9Ec1ZWS0phSkZUcEN0Vlc5QmdheEFySWlJQ0dkR2FNeHdYbkZZSVVsMzM3NTlybnJsaVNnN0VUWEdubEpQSm5idjNpUENEZGFCd2R6M2tBbkZ4bzBiQTdKc1Jld3dwOEU0VlFLVVpwMUM5bmViVWZUN3J6aHpmQ3NxY2pPWTJ6VmlCczRjK3gyRnY2L0YwVzgzby9SSUxrNVhRTUVaVloxRjlDSzMrQXhLYzgwNCtsc1FDdi9rL3o1bkRXd25WMnRKSHFOZjJmWk9aRzhKUW1tZUdhZkw3V3E5ZE9XVlZ4WTcvdzFiT2IrWTlkVlRzdG1xNm1WQzVSTVMrR1NYck54VndOekZPNWtQOGt6Nk1ETkxJeDZXVFhCc2U3ZG9FQzNTMS9Eb0UxTDdsektSMUpoMzc5N0xLNmNqeU03TzFwU0hEMmVKYmRFZ2VxVVBvZFpMMTExM1hUR1ByL3hiZnFhM25wTHIrSkl6eWNVQWlKT3k0TkhzWTE2NG1jR1FrRkJaZlNxN3plTmtMQkVJSUtKUUxndGtBS0FQL2dIS2ZFUmZuSFkxU0xSeDdYZzlFVVVKdVJ5UndYOTg5UDdJcm5Ud25jdDF4Zis5TjZXSzNpMWJ0c1FvZXZkL25FaU9EVGNTL2RLWGFHVnYvL0tYZnVUWWVCTnQvM2RudGQ1UVY1KzQrdXFyYWZ6NDhicmlvRUdEUFByRVhYZmRSVk9uVHRVVmI3NzVadEZMckZIMFJtL2F0S21KNkFWQVU2Wk1vVGx6dnFIUFAvK2NQdnZzTTc5U05NeWQrdzFObmp5NU9wL293NlNOR3pkUlNscDNMMmlRcjZvbEFMUisvWHB5b25mQXJEeDRHYjBhakJkV1FtYjZ1a0daRFhoN0hRUlM4MTZsekRLNTlyNkdpUERpL0wweTA5ZVAzZ29IM3ZuNVFCVzkzYnAxcTJDOXEwWHYvYThkaEwzd0NDaTByZjk3U21HeGNMQ1dmMDdQZ29BMXJsQ3ZQQlNma0l0dFpDYXFGOGlUU3h4OFBmckVUei85cE16MGRRRVp1eFVyVmloakxIb2RQWHYyck9EeGxYL2owMDgvNVQ1T3ZwNTZTc3ErQkZlZjZNREVvY09Iak5XRWw3UmFneUNRODhlVXNReVU1T0hnalVYenVDNlhkVEFmZU9BN29LZ2Nmb2VVME1Zc0JQYm5BcUtOeituNUNZQmR5RHRxLzAvdmlWSTgrRmtHaWtwdDhEZWtoRGIyNHordy8zaUpxMTRIWDhiek5YL3Z4TXFkWlhodStoN1lDdzRBd1UyQThMYk1PSG5WaUdJckZoUWN6U1hDZlpqMDlpNHMvYU1Vb3JkdDI3WnpSQ3NUYXArUXBmYWlSWXQwRVpDbGhDYkpRYzVyOHVRVHNzOWgxcXhaa01kWC9RMHBvWDMxMVZlUXgybEZHOS95OTdQaUU3dzNZNmI0aFBSRVpzK2VyWXVla3R4ajh2WFhYOHV1Nk9wOG9qV1RkWjZFQWU4Z0J5VUtwS1RweEFXQlVyYXl0bS9mL2tJT0ZxTjUyWjhQZ0ZwSGdoNFpBUHJtRHRCMzkyakxtYmRCYkZQemNKQ3o5bDdJUVdKNFFrSkNMeUlLRm5icTFLbFBGYjB4SWZUSWRmRTBlMEpQK3ZheDNwcHk1Z005eERZMWl3ejJxTGQvLy83eHJIY3MvNndFQUhWckYweUxuNG1sbksrU0tYZDJxcVk4TmlOSmJGUEMrVUZWOUE0WU1DQk9mTUdUVDNBam1QcjA2VU44eVQvZGV1dXRtdktHRzI0UTI4U3o0enI3QkFkRUtXL1JxRkdqYU96WXNacHl4SWdSWWx2R3JEcTlJY3lnOVBUMGptcWY0Tk44cFNSSGZJdzNUWnMyVFZPKzhzb3JZcHM0QWRma0UxT1k5TkxMcjFCeWFqY3ZhTERWK1cwSUFFMmFOSW1jZUQ1UWtvZTVQWU9kZHhEdlVyMlY2NXhyOUxMaTR5VjFCcy9XN2hOdEhCeGlpY2dpYkdSNnJULzg4RU1JeitJdWtqOUkvcDI5ZXRQTHQ4d040RkpRa1BpQzRSTU5wemNsSmFXdCtFTWo5WW0zbVBUVXBNbVVsTnJOQ3hwc2ZVRXNBYUFISG5pQW5IZ3pVSktINmYzMzN3L2lvdzM2c3ROY3dRNDltUC85SU0rYVB1YW0za3B4YkMzSk5wZXo3UTlFZzJnUlRhSnQrZkxsVm5Ga1lTUFRLN1FNSERnd2huOTJHY2U0SVh6azl5TjYwY3NsdFlGWFhYVlZ0R2hrbWd5ZjBFU3ZxUkg2eEhRbVBmN0VrNVNVOGpjdmFMQzFjK1V4WnN3WWNtSjZ3Q1FQWVpjdVhhSmlZbUl1NXN2enJ4Qm5sNW1TT0pJNHRwbzgyNnRYdXI2LzJCVGJva0cwaUNhZXNVVXFPaHVwWHFGWi9pRDU5eTdVaTE0T0V1bTMzSEtMYURVck9nMmZhSEM5NXNib0UwcnllT3p4SnlpUkE2TEJ1ck5sNndzQ00zbW9nd1U3Y2dqUFFMcnl4cmJMK0NyT3k4WHhGWXBqTlNUVnRzUzJhT0JUUW5zeXdoVjlqVjJ2c2dwSlRFeHMzcTVkdXc2eHNiRmRKWEFJdWR6U3B5R3AyR0diYVdJN0xTMnRxZWdSS3ZvTW4vQkV3eWVVc3RXVEUvOUZpY2xkdmFEQkZ1ZTEwcUJzcFpNa3drdm9KanhiYXNmT244ck9uODdOUjAwb3R0aG1pdGdXRFlxZUFOT3IwS3lpUlNPYUZhcTFHRDZoZ2Q1R0RxVmhQblhxQzlRbHVhc1hOTmkwV1FzTkd1WUdEQmd3b00va01ZRko3Nzc3YitxU2xPWUZEVVpGTnlFQThtUWJPVEVoVUozRXBQQzVMRXBoOXRLWWlXb05nYWhYVC9UV0oxYXVYSm5DbTk1NmFVbTJlZFpqdkdmUG5oUm1MNDBaY0Q1QlJIY3dpZmZRR0FuQlM0YUdoaEVBNGowLzVNUWRnWm8wekU4ZnBvY25INmFjSjQ4UVBYWlVXNHBOc2MwYVJxdkxLM1hSKzJ3MjBiUEhpSjdSaU04S3M3M1g2MUtxc21wTWk5Qmp2OE9EWm41UzZPRmx5NWJsTEZ1MmxKWXRXNkl4bDVMWVpnMTFIdU5kdTNZOXpNelp1WE1IN2RpeFhWT0tUYkhOREJpZlVJNG5XYmR1SFNVa3BYbEJnN3poTXZDT0oxR2didHhOT2t3enh4d2pTajVCRk0yTTFKaGk4Mjg1UkdOWmcyaFJPYlhKazk1bmNvbEdseFBkYVNlNlEyT0t6VEZsUktLaERucVZ3QkRFREhZeVJHTXFka1dEMVYydnUyWU8yak9YTFBtWitOZ0t2NXpCSkRabno1NUZTNVlzSXRGUzJ4aHowSjc1eHg5YmFkV3FsYlI0OFNKYXRFaGJpczNWcTFkUlJzWTJFaTJCNEJORUZNTWtQblNTT3NRblVFSmlhaDFvVU1ZS2dGREdqcHlJQ2J6RWtVVkR4eDBqYWlHQlBNZS9GQTNqV1l0b1VqdXpxOTZuVHhMZFl5TzYzYzhVRGFLbEpyM01JR1lJTTNUdzRNRWRlTWZ4QUswWkh4L2YvOXBycjQwVERjcHVaN1hlYWhMSDBLVkxGOUdYWDM3aDk0UDdSSU5vRVUxcXpTNkpZNmdFN1NWTGxrZ2c5eWRGZzVKQVhQV2FHNXRQQ0lnb2swbTlldmVoem9tcGRhREI4OXUwSlFERW15N0ppY3hBT3BMZDVLU2x3b0VKbTB4QW1RTUErWmVpNFRmV1luTmdwR2h6YWpRTDFYcFBoZ0g4Q3ZpWm9pRTN6S05lb1VYSXo5TmZ4VHVnVjNKdzJaL2ZKRzdWNlF0U05HVmhkTnZWMzMzM1hTWnJXTXdPUFZEUnBmSURxSDFDbW52NStZV3cyeDN3TjBSRFFVRVJpTWlqVHpnY2pnbHliRGkvd3M4UURYTExuN3lxOVNxMFZPY1RjbmdpYjliVGxIenNTMTE4UXJDWmlhVEVMZ0JSSFdpd3RLUUVBajZPQms1c0NyVGtZUkdlc1ZVazd3ZUQ5TUhEQUVyTFNub293VmVsMTZyb0xiVG9SMitSMmFOZUN6ZCtnL21QOUcwK0hHMWU3OGtmOVg1NGR4bnVuNzhZZC94M3JxWWMvdDF5aU8xdUQwMGJ3TGZ1L2NTUGxiN2tFb0JSeFNmT25Fa3VLU21GVGlBSEhzb0JpUjU5d21hekpaZVdsdWxJYjdsb1Z2UldvZG9ueG8wYjEvdkhIMy9FRzI5TXd3c3ZUTkdVYjczMUpzVDJzR0hEYXZJSndXb21ldmJvWHNjL0NZTWxKY1VROU92WEQwNnNRYURBdVVRTlpTZCtlVUltVVdRMlVZUk8yT29ZMGRpTWZHSm5ua0pFWWFvYWJaaWk5L1l5b3R0MHdydExhOVQ3RmdDNmFlNDJHbjJNS01uUFBTWHBhNGtXQUlyZVVHYVFxMC93M2N2cTBwRU9TbGRmMHZ6NTh6MzZ4UGJ0MjZWa3BCc3VYYnBVbXN5dWVrUFZQdkh1dSs5eW4wUjZTbC83dWFmMHMyaXAxaWNFMHVobDB1Ky8vMDd0TzNhbVRnbkpCbXVnakpHU1I3WnUzUnFRemZKZ3JudW1BN0Q5TTVNbzRxaCsySkw1LzNZVWsyampYYnBwUkJRbVRFNU83cTNvdmExVVA3eXJoR2pNVG5lOWZHeEdYd0RVOVg5ZW9ySFordWtwaVJiUnBOSWI3T29URWdEMWxUeStvQVVMRm5qMENiNjlUMWZKUS9vZUd6WnNVT3NOWllhbnBxYjJrOHVyN3IzM1h0SmJUMGswdWZxRXdOa0RJUzdEVVZyWGJrYUNxSVV0em10TnlvbkpNbVpPbUJFZ01BdjVpc1JSQUN6MmVpaFpVVjR1SEFmM1ZaSk81QUFWdHJON0x3QjJpeFdpYmVmT25lT1ZVa1ZtWnVZby9zT3JGNzFuY25OUnZHOWZKY3R5Y2tCbnFWZm9xRVl2ais4RTFvc2VkNDNBSnJOK2VrcGJXRXZhemZkQU5QS01mWnhTb2xEN0JCSHB6Mm5OWm84K29VZTljdUdTcTE2K3grTkJNSzY1NWhyb3JhZkV4OGxYNXhQZzhSV1JzOFNYTDc5c1lDMHVackM0dUJDQ0cyKzhFVEptenJGekJGVFBnK3ZhNGkydys1STBEbWZDdm1vcEJtVHZ3OFJJcXVRMStVY1F1V0VsSExzeXppcUoyR0ZXYXQwWEt6WHU4dkx5S3hTOWRKWThuWm1KWTh1WG9pMG51SnVzVk1uVVkwZFF2SG9sOHJkbndNRjZ2WHBmRDNyNU5ybUx3SWh1RVlNRGV1b3BNV05hdFlDQU5WNHFXcGxRK3dRUlFhOXc5WWxHcE5mRXZSbnhDZkFaV05CYlQ0bWI2SzQrb2NZOEp2aHFYWndwTHpPYTRoNG9ZMU5XV2dMQmJiZmRCaWZtTWhGUXlZT1hWTEZnMkpnZzd5bUpZYXkxRk1kdXVBUS9YNTZPcDlJNlZYTFd4ZDF4N09iTDhYNzdwb2pjdWtHdWcvTXllVlF1bVZ1TFZpRVIrYVMzZ0JQREVGc3B2aHQwQ2Q3c2w0Nzd1M1NxNUpUZTNmSDlWWmZqZ1paTlViWnBBK3dsdnVubDJadVZpRnBDdnJCYVVPclFqNDlYQUhDWVRNcVRRYTJnUVBFSm5RWmpJdkxvRTQxQkx6KzZHOFRqMjFKWlJkbnRkdWdFNmhXUXEwOG9tS1UwZ0Z1MWJHR3NNRHl3c0NBZkFpNVpneStEZ3hPekF5MTVDQ3hNMk01aWxLUTBKWW5oMVo2SmFCSnNoU2ZjMDdFTjFsL1dIYkg3ZDNqei9xSkpnVlVKRkdxOTVDV0w5dS9EQTYyYVlueHFJaUtEUE91OUtxNE5QdWpUSFNHN2Q5VDV2UjNWNkowelowNkVqTE42cFFTZDBPRVFUVzdqcThDaTkyQ3M5b2xHcE5mTVIzeUV5NnMrOVZKMTR3dVgwdFhIL0lyYmI3c1ZkcHZOV0dtNFVNYWtJRDhYZ3BFalJ5b2xLeGt6UjhBbER3VjJKaHhla0dmbEU2TUk5OFMzZ1JyL0tRWmV5QWZlTFFReWJhaEV1OGd3ek9xVkFEcDZwTTQyN0NxL1pjSVh2ZmJUcGJqRlNwREVvTWFLQ21CMk9mRDlHZUNFQTVWb0hSNkdaMUlUVUpybGcxN1ZHTnRJWHowbFJaTm4xRTl3azN2UXQyM2JCdTVMeUV5N1BvT3hxU0gwU3VtR2V6NlErOUN0Vm12OTYxVjhRdi9KemhNK1pHTDQ4T0VBMlZFVkJwVEV3U2NyZzY4ay92L3NuUVZNSmNrYWhUOWtmRmdGeHJMdTd1N3VSSjYvZFhkM2QzZDNkM2QzOTJYZERSYVhLOWpsK3V1VGwwcW5jNWViRHJlSExhQlA4cTlNMjZrYStFLy9kYXFxUFgwMjVzUmp1TWx0b2E0V1RsbGxTUXdhVWpuV2I0RUR1a0RpY1h3RVZtZ0NpWW5CeWd0VXNjdkVsTDlFbVMrUzNFemxrZk1mMDl0YjJITTVsMjlISnNleHZYQnRQenlVZ0RzRzRLQWVlQ09GQVV2Tlc4WEcrWlRmWnhUd0hSZ1lxRUN3MUZQS3pXWHg2T3JxSWhLSnNQamlpK05NVGVYbm4zL1dtMWhBeVMxNHZuMTlmVnJZaC9OUkpKd3Y3TkhTMGlMRE8xQysrcGtZcGVKaHFvOFBnV2VVSFAvN24zL0pHMEZYaElINmdsaTBHOEg1K0pNOExkUlg2ak5jaE9KeGNNMWtCSU1EdXN2NU1sbDQzZ0dkMERDWXdXRG5oYXI5ZXdoNXZDaUI3MDVWWHI3WEpjcjVQVk40bnNTa1BlWHkzWHBtTUh5ejFucEtjMGM4T2pvNnRLQVBaNnFpRXJGK2tXVEdTa0NzRkErSlJpcVZRaHhWY1RqZjVxQ3FxZ3BuRVo4cUppdjRXaUFlQnRjREhIUE1NZVN5YWRBMVlaaXFRei9yNmh0UFg0MXQ4UURJK1l4MGhwMW1MNERCVzdFRWJ3OE1mZjUxZlpXOG5RQkYyYlFxMzgvSk1EUXkrSzg2Y3FrTUc5YTZmTC9zVGZCMWF1anpuMDlYOGswYUZKWFRxL3c5cHdoZnV6Mmw0TVdqdmIyZFpESkpiVzJ0NTE2cVBtcHFhbkNtcWhJWUF1Q3JMVTMwMXFoZmVnTkJvdWQ4NUltMnRqWlhRRUx4VVBYeEhQQ2NoUGJRUXc2aXY2K1g4UTcxUVU4OGluRFNTU2VaV1d2UHFxOXdFVlllOHd6MElnL0RRTUpSN1B4clk3QmRzNGtTazlzdytFN3M2MlhtTkpmdk42bmk1eitUZ05QamJnUXp6R2FYcCtRT3N4WGZuMms0RlljU3NmT0pVeVZjaFJLUy9xMmt3NlJKazR5QURDZDVpbE9RZkZWeGFNYVR4cWc5Zk1WVjRlejVWSXFBaU5Pbzg1Ujg0anlBSTQ0NGdubm5tYWJyeG5WMHRMY2dMTFhVVWppZm5QWDAwZmlvUFBMK1l1VXAzcmZndDNzemdROGc1dk0rS28rOHYxaHNrcGZ2VjRsTXNCV3JENzYyZVVwQlZ4Nm00dERRajRURGVCdEt2Z3N0dEJET1oxa1JsT0JNQmZMYmI3LzlwVy95cWpneW1Rd1NEc05YSG9lNE9WdDBHTDRTdkJJRVpIUjZTajZxajNlQjI5VTNOOTU0STlGSUYrTVZrZTVPMHllb0w5UW42aHZuLzk4YjQrSXhqRGZqUEY2WWF3T093dVJtTmQvaW5vZUZubEl1d09TbWlrUENNV3ZXTE14YnU3d0RDWWtTdEpLeEJNUWNtelp0R3RYVjFmejY2Ni82LzVFV0QxVWM0dVhoSk9HUWtLZ1NjWGE0RldkelRQOXZCRVRuQmNEWEFrK3BkQndJZkwvWlpwdXg4My8vYlladHhoWFVab1V4eWRVWDZoUDlMNFVJS3cvS0svQWdtWVE4Z1VjMm9NcWp6TXVYck1OMzVDc1BDejJsZ0NvUERaM0k0MUFpTThNMFJqZ2tLSG83MWt3bUpWL2pLK2c4bWRKNnk5ZVF5d2dtWTAzSDFkQ2FrcTJ1TVJXR2hFT0NvdmJvSFBGVG1IdExRTVJmaVRzQXZuWjRTaVZ3a3FnbWdiTUFMcm5rRW1iT3FORk9zdU5tcUVwdE5WV0hzNzhhRjE5OE1ZTDZSSDFESVVMUG8yZkNWQXlFUlhMRnhTUGYzRUR1cTQ5TmpMam5NVGpKeTdjNlhaenZ3QjhOUk9zL05oRU1YeXp5bEl6WUJaQklsSVRORzdEeE5pUWNtdTZxUkJ5TlJoSDYrL3MxVENRQlVaSTJIb2lTc3hLeTdqRVN5VmpuS1BFYVExTWN4RVVWaUNvT2NUUlRhaFhpcHlySlZFY2FrdEQvcTIzQjhMWEFVeXFCazU1NVAzQ0hoT3V4eHg0am1lZ25PWmhnckVOdDdHaHJ3Y3l1Y2hZRW14ZU5POVVuL0RsQzhmZ3lnUWNiVGkrSHpOQyt4MEh6WkhoaHd5WCtINXN1RjR6bjRiOGk0TmNVSHF3d3Biem8zbFU3VE1wdzJlcExvTGg4bmVYOHJUREh2OWpaNENrcGdqRE1UYkl5U1ZoREtCSU9KV2hWSEJpNEFxSXBzTVpuVUVoUTlOYnNJN0dWYkVETGc5RXZ1MmRvVGNLaGhLeUt3NFVySU9KbUJNUUludG9adkhqWTZTbjV3TjdBYTlxTzQ2Njc3cUtyczgySTY1aUUydGJXMm9UeHlOVG1aWmRkRnVCMVlDK0dSamhzcFhpNmF4Q0R1a1ZxcUJwaW1taXU4UmNPV1hZMkc4OWFBRVc4ck5KL2NzT0xVdmkrSDNQNWJqeTdodHhQZjg2My8vZGYrUHNTczFsdHhnSW9FdVVCOGJYU295azVrVWdFNUhPWU4zUUpoNFo4VE1VaERDa2dTbkJLZmdzdXVLQXFBVCtwcmVSa0xJNTZsa1JQdzFCR09NU3BFSjRLUktLalpDSHVpcEtUc1lUUU5rL0pQNmVDYlV2MkFKcnI2dXB3dG5oSFBrQTZuUnB6UTFWcWsxblBvWDUxdm9lQzJxeTJBN3VyTDhhVmVBeG5yNmhua3BNeDBCcUVHMWVaU2JiK1BYTHR6ZVJpRVhMZEhXUy9yZWVrNmp5TFZFM0JRTmY1ZlVhUWl3US95YnQ4cHp0OGoxbDZKcEdQMzJPd3RabFVORUt5czRQNFYvWDhhM3FlV2U2MFhsMFgvS0pHU3p5bElEd1BWUmRLdmhJTmhieU5XQ3hHTVVoQXRIcGJDWHpSUlJmVlc3enVNeUp2OHFvdWpGRXU0WlBRRlFwSG9ZQjBkblpLNkpTc2xiUjFIMTljRmFQZlUvSWxJSDhBV3dJOU8rKzhNeWVkZUR3dFRRMW9oOW14QXJWRmJlcnJqU09jZDk1NXFLMXFNN0NWK29EaUNCY0pLdTdwaHJmNzhoalVMVnJMQjl1dXhNNWxVVGJzL29VZEU4MDh1T1ljVGxselNReStITWpwdWhGZkpLaDR0UmUrVHJoOE4xNm9sbHMyWG9rTlUxRVdhL21GbFdQTm5MSENIUFplMmVYN2F6S242NEpmSkdpTnB4Uk1JbEdWOGZ2dnYydVl4Q1JWWDVDQWFHeGVNNWlFa1hxVGwxaG81YmhDczY3OFFnTFMzTnlzZmErQ1grZGh2NmZrUjBDK0IzWUFPT0dFRTdqb29vdG9iMnNtTWREUGFJZmFZSWFxMUs4eXg5VkdRVzEyL3V3Ny9DSGNua1R4cjkvTGFFamxNVmlsdW9xYk4xdVJsK3JXNHFGdFZxTnVzVm9NNHRrOC8yNG9MLzNOdUFTKzUzZVYwZUhlbEtVV3FPTGs5VmZrbXEzWDRvSk5WME9DWXRDZnkzTkJWL0I4cmZLVUROL1J2d0o2OVBPMXhGTXluRW9Ra0hlQWpRQ09QZlpZYnJ2dE5xS1JUdUx4NktnZHF0SVFYR2RIcTZuNDFDYXovWWl3a2RxTXdiaXRQSHpEQ0FLczkyTVpiL2RSRkRxdTh4cFMrRWFlNEJZSm11akx3aEV0Wlh3OVNGSG91TTVyVC91L2Q4NlA1MkdacDVRTnhjTk92aFo0U2dFSXlQcEFZbzg5OXNENTdqejViSnBZcE12Y2YxUkFYTVhaYkhZb0VWWmIxQ1lnQWF4bmhHUDhpa2NKdTc3R003RHR6N0RlRDNCdW00VENqV3M2ZFV3QkRVbUMyL1cxQkw3OVdUaTVGWTVvaHZ1akVnbzNudXJSTVFWMHBJUGxhNk9uRkZZZWx2SzF3Rk1LUUVEZUIxWUhHdlc1M2M4Ly81eGxsbG1LcHNaZkdlanZ3M2FJbzdqMjlzWVIxbHh6VGVycjYxRmIxQ2ExelduakIvaEJPTnVxZUh3NUFPZTF3clkvdVhGOGs2YVpsbURvNGtXUWZIOUx3Z05ST0xuRmpWdTc1SXNNODU0VTU1dTEwRlBLRW9xSDdYd3Q4SlJLOVVBMkFsNVliTEhGZU9lZGR6amtrRU9JZEhkb094UFNHZnUyY3hjbmNldnVhamR0RUdkeDF6WXdBQytxVFdvYkhvU1ZoMVVoVGw1WXpoY3ZyUFdVd3NyREowSytBUWhJb3hQYkFiZXBFcnI2NnF0NTlkVlhtVFd6bHJibVJ1TFJicktadjM1YmQzRVFGM0hTYkNxenllRnJyNzBtem9pNzJ1QzBaVnUxQ1JlRTRnR1VXNVNJeTRvblk3S1lKR2hIbFBrUkR5czhKZitjek82eWxzQVhGNHZvaXN2b0YrZmcvdTcyQnY1dDlzTDYrdXV2TlJ1TE1uSzBOamNTaTNhUlRxVVlhZWlaOGpURW9iY25acndOemFZU1J6YmRkRk9BNzhSZGJhQVFoTU5XZ3ltbWxkc2pIcFBMSVp2T01oVHl5UlFWWlhaMVpxNlE3NmoxbE13MDBjcktDbXhCUlVXNXBxY1c0K3VjWXhQZkN2RU54Y01Wa0FlQlZZSGI1Y05vTnBiV29KeDk5dGxNbWppQjlyWW0ybHViNk8ySms4MW1tRnZRdmZVTVBVdlBOSldHSmhhSWl6NURyTmxVNGlpdXdHcml6aEFJeGFNdHh1d3BVR2xCUXA1UUJyTW5RN3FwYytoek9tTmt5cURDQXFHckJISmxNS0cxMDc5NFdPQXBpUlBGZDU3Vkttd2JxZyt6czIxUnMxaXpqUFFMYnd0ZnpYUVMzMUE4dkpzcE9yRVhzRDd3bkdhVG5YTEtLUklScnJqaUNwWmRkaG5pc1c1VkFrcnVxZ3EweHFLazdVNTByZTZoZSttZXVyZWVvZFhpd2tvcnJjVGxsMTh1RHVKaUZsbytCNnducnVKTWlJSWZsS2ttbFV3NzQzL3NuUVdRRkZlNGhkZmRkOUYxeFozRjRaSEYzZDA5bnVDOG9CRXNIdHlKR3c1eDNOMGQ0dklraXR2S2VlZWthcXFhZmp2RW9LYzNOWmM2TlhkdXkvL1Y4Ty85KzByZnV4TVJoM09RZVFwSU9nd1VPZ0JFV3l6WlRLWnRNVVFjelVYUTJBMWlBLy96cm9CRkVwL205QjFsbnQrQnlDTTU2UG9sMFBOem9PTjVvUDA1YXlXYnNpMkdTUEtXbkxMK050N2h3NGNuTzNoakR3SkJObExFSWFENDdsdEczaUN6VDVBZml4Y3Z4dXJWSy9IdXUrL2l6VGZmeEJ0dnZHR3BaUE85OTk3RHFsV3JJQlp1dE9QVUo3aXlLejcrK0dQczNMa0RXN1pzQWZ2V3NXSERCa3NsbTF1M2JvRVl4TUsza0ozNkJOZEVBcGZ5c0l2STh4cjREb1BaSis1MUhWU2ZXZzFET25Ub0VJWU9IUXBPVVJZTEhQTDA4b0tmbno4Q2c0SVJFaHFHc1BCSWhFZEVJU0l5R3BMeUt0TXhuYU56ZFkydU5VdjNsZzNaTXFYVll2TDQ4OGtkUElLR3JVZnd5MGNRZGlnYk5jNENkVThEdFU4QnRTeVNiTWxtalROQTJJR2JDSDdwTUFJZld1MjBvcWd3NlRPa0x6ak1nSmVOTmw4QUE3NmlxUDRXeVdHckpXMUhIcnlKOVBtSFVIYk1xdHQ0SjA2Y21PRGdMWG9BQ0tHQ2JDRXhBMFYyM1RsNGNKWUp4bzRkaTRVTEYwSUJaTjI2dFZpN2RnMjEyaUxKMWxyYVhvRUZDeFpBTElNSEQzYnFFNU1uVDhiczJiUHgwVWNmWWRldUhkaXpaemQyNzdaV3NpbmJIMzc0SVdiTm1vWHg0OGZmeHNzdFNoUDRzaC9FeTNXUkpMc0VEd2JyMXkwUEhvNEVvQW8xaHpwR1FZbHY1ME9WK3dzdnZJQjI3ZG9oSVNGQmJIOUx1bGIzMEFPRzdxbDdHNUpzeW5iVlAwL3NEaDZCY2hKbEF4OVlyZ0NDb0hIYkVQem1sd2paOEJ0Q3RseTBWdXQvbFcwRVBiRlZMQWdjL0k3RGtYOEZFQ2F4b3JqQzd5Z3pjcGtDQ01wTTM0cjRaVjhpWnZOdmlONTIwVklWMnZTcmJLUHMxQzFpUWVsaGJ4dDV3MW1aUkpIM3BuaGp0dDlBRVQzMTc3ZUhpaDBDWXJaY00vSUdtbjFpd0lBQkNpQjZRdE1UTkdiTW1LRUswVkxKcG14enUxT3hvRisvZms1OWdoV3pBZ2c0RUl1bFM1ZGkrZkxsNERMaGxtclpzbVd5amVuVHA0c0ZvMGVQZHVvVENzcHZ2ZldtYllMSDIyKy9DZTZFWi9ZSnl4T0E5dFQ3eUNkeDJqSUQ5QjYxaE1HdUpyQ2JTYTFSUFZSSXlxdE14M1NPenRVMWNKTGVsNjIvUitrT0hnRjgzZjZFc3Y2dEo2bkN0cFg4bW82RzJOaDN2QmRBcU1RKzdSTjBiQ1IxbWFnSzIxWkthRGZxTmw2K1ZCVGg0QTEvNHpRcUhWZXJ5dldCSTV3TVZjU3k4S0NSTjhEc0U4MmJOMWVGYlNzMWF0VElxVTl3a1RwVjJMWlN4NDRkeFFzeWlqZnN3SUVENGVKVjJUUFBQSU1WSzViYm9mVWhCZ2EvNVpnd1lZTEpKMXhhUDNsUjFhaGgxQ3JxRy96OXBHdDFqeEZVZGQzN245RzVnNGMvbHp5WXA2eG5SSEVFUGJMV1BzSGowUS9nRlJrUHNYSHEzUE1BZ2lYbTU2dk1QNm80eWoyeHhqYUJvOXpZZGZDUGljdVBWNzh2dkV2WFFzU3ViR1FldDhHWUVoa2lkdWZBcDF4OThZSkxXVXlYTDVoOWdnT0hHREpraUcwQ3gvMzMzdyt1aHV2VUp6aGJCdXdxdEUzZ21EUnBFcmdzdXBFM2hBcmk3ejFYWmFtcHFWaTBhSkd0eHBTNEo0ZlpKK3hXWjBWU05hZ3UxRkRxR2VvVmFvR2t2TXAwVE9mb1hGMXo5MG5jd2NNM01UR3hDZnRndjlOWDc5U2FHbWR3ZWVCUUY1cDNTbldJU1d4cGFXa05BUVJJL0lOcjZ1QU5LMUZUNHd3dUR4enFRZ3ZMeUpjM01DTWpvejdMZnRReHY4NmpFTGJqRm1xY0FPcWVCR3J6czVaRmtpM1pyS0VXeDdZYjhPc3dEQTVlYnFGWlRiNlFuMC93eldCMUI3ZzhjS2dMalV0dC9LRlBsQ3BWU3VNTUxnOGM2a0p6Vk1SaTR3dG5qZVFQNGpYNlJKTW1UZXd3cHFUdUtyWHE4dkdKL0pNN3VZT0hELzhncS9QcGFBaWIvUmRVNUJrU0E5L2EvUkRRNVNVRTlKaGpyVHEvQU5uMkRBeDM5THRlNGo3TkEvakhWaFdBbjhSS280YVIxemNzQmtXeitpS3QvNHZJR0R6YlVxWDJmUjZ5N1JQc25MZDI3ZHFwNUgyUXg2N3BISytrY2dpY3ZBN0JLMzlBOExvZnJkV0s3eURiWHNWU2IrT3RVNmRPZ256Qm1VK3dKWUlhTldxZ1E0Y082Tnk1czZYU0lLZHNjMVhZUCtzVGVzcUhLa0lGdlFjZmZOQlNEUnc0VUxiMW0rWEg2MC81Wm1abXBoaDlnc3V0SzBCcU1GZDk5WlpLNDBPeXpVVVVuZnJFWFU2ZWxCZmxTd1ZRUVZTb1NTclRNWjJqYzNXTk85a3BBYXpMbU9pOGpXSmpZenV6bjNPbml1MGdEaXFlNEdZM2ZjVEd5aUVPZ0xkVXdIaDlPUFBIbjl1RTF0VWZKTTg1YnpkZXprS3B3MzU0WC9tQzJ5ZnVIVytaTW1YaTVROEYwU2Z1VXNEd29ZS29DQ3FKNmtTTnBaWlF5NmhQSmVWVnBtTTZSK2ZxR2wycmU5Z25rTGlEaHllYnE3NWNycmttbmFZaEhib3g4NC96cVdreEIvVzJ5ckd0RkcxdXB1MEZZaENMbU1TMmVmTm1Iem15Vk1CNEpXOHVjUkRCWTFtczQ1cXd6MzZFWFhpNVNtdjlaczJhaFltUjhuVDdoQ1c4bmdYSkorNUNDOE9maXFBcVU5T293N1NaeHk2OW0xbFpXZGU3ZHUxNnZVK2Z2dGM1dG5hTnJiYnJYYnAwdmRxcVZhdkxiSjFkWVJDN3hza2J1YnFHMHJXNmgrN2xiNE1XaVR0NFNQeVBET1dibnZVNDROaFF6cTRuSlRtU0hOc29QdTNkVlpudkw1dXlMUWF4aUlsUGJDRU96Z0xLSzNucEQ1TG5WYmNMTHl1SnpFNmRPb1U0S2pUSjdSUDNuTmVyd1BuRTMwdU9vQkZGOWFRMk1VRG10R25UOXNia3lWTnlYM3Y5OWJ6Rmk1ZGczcng1bk5MOEhDY1dQSWtubjN3U28wYU54c2lSbzZFWlgvLzV4RmlNR3pjQkdyL3EzcjNIbFVxVksxL2duaWEzZEMvZFUvYzJCQkZYSm5jQW9TTnJsazE1YnFTZnhWazJEZVQ0RHNteDdxV010bVJiREhTVUtreEJEcjZDenV0b2haUXNXVEthQTlMSmNYRng1VlZ4U094dXFYRXY1YkJEbStWa204c3hSSXJIV1NYaDlnbko3Uk4vczdYaFM0VlJQYW5ObkNpUVBXN2MrSnZ2djc4TWVnRng4cFNwSEdONUJKMDZkMEdEQm8xUXQyNDlaRmFyZ1hMbEs2RlNwY3BVRlZTdWtvbDY5ZXFqY2VNbWFObXlqWUlISjB3TVFyLytBL0t5c2hwY1pDRFNlMGhicUY2eUpadnVWb2dOZ2dqL1k4TDV0SlJJNXk5TDU4L2s0S01sa2kzYUxDUGJZbkR3L010NEhmSXl5TnNLR1cwYVdkdytZVDN2djNpdHZBQXFqbnFONHprNWJFSGNXcjU4QldiT25JV2hRNGVoWmF2V3FGQ2hNcEpUMGxDc2VEd2lvd3FqU05GWUNWSFJSVkcwV0p5a3ZNcVVSK0Vpc1VqUEtJbXFtZFdSbGRVSWJkdTI1OFNOVHNqTXJQWXpsMG0vSmx1eUtkdnVWb2c3dVpNN3VWUEJTdDVVRU5XZHM3Vll3YmU5c1dMRkNuWkx6V2NyNDFHOWJJcVUxQXdVS2x3TW5IV0c2SmlpaUNsVURKd096TExpVkN6S2xpMnJRQ0VwcnpJZDB6azZWMUs1QWdtcTE2aU4xcTFiczlWU1A3dHdrU0xhWEJ4VUR6R0loWEluVjdVK3BLMWJ0NWJoNG5KVnJSUnRsalF5L0JYZWMrZk9sYUdxV3F5L3dXc2YvVldmZUJxdnBqK0ZwVld0bEd5YW1mOXR2SGJTM3d3Y29kUTR0cnh5dVRUSXJiZmZmZ2ZqeGs5RWl4YXRrRkdpTkFOQ2NiVWlVRHcyQVlVWUhPTGlreEdma0l3aXhlS1JrSmhDcGZKNGdqNU4rUlNkbzNOMWphNUZiRnlpeWhtRVNxRmE5VnBVVFpiRi83ZFd2aFdEV0Z3VFFOeEJ3NHV6UW9aejk2d2ZOMjNhaUUyYk5sZ3EyWlJ0TWd3eDliMDY1VDF6NXN4dzZzZlRwMC9oMUttVGxrbzJaWnY2czd6bXJpb2ZpK1d3NjdSdjI4dzhPMjlsOE1TOHhTOU95RnQwWVV6MkxJeTQrYktsa2szWkpzTTBzWmlZNzhnN01Ycyt4dCtjYTZsazA4eGJZSDNpendlT3lleW15MzNsbFJtM0ZpMWF6UGRkSGtLVktwbXM4QlBWUGFVV0JDdjRKQVVCUjJCQVlwSzZyaEwxS1RHd0pDSXBPVjFTWG1YR2N4eEJSZmZRdmRpdEZZZmtsSFNPbFZSazY2UWNpaFl0Zm9FQjVDcFpwcmdEaUVYSk9IREhTdnU5RFJzKzFYSUZMbGx2UnphWExYc2ZHelo4QnJFWW5Ob3pQMTVXMnU4ZFAzNFUyN2R2eGZyMW4rR3p6NnlWYk83WXNSMG5UaHlEV083RWE2Z1lmQ2svaWZLM1dBNjd2bUl4OCtiSFBDNTN3U2U5TDQ1RjlGZi9BYy96bGVGeHZwS2xrczBZMnU1emFSekk4dUhHdkFOK1ptWXo3OGlMTDZETmx3K2h3Ym4reUxKWXNpbmJvOGpnNEMzNFB1RjBqQ09ZR3M5cHZqbXpaczNPMWx2cTNicjFRTWxTWmNGSkFBb2FxdVJSdm54NUJRRUdoU1JVcmx4WmxUK1ZERTRtME9lZnpQOStyZTZoZSttZURDYnhLZ2VuOVNxUUlDUWsvRGVPbTE4Vms5aXNHd054QjQ2K0d6ZCtwbVdaYmJFMHRGakVaSFJtVStEb3EwcGJleWlvSW5laHhPQUlJRVplODFPbEwrVlBCVFJ1M0RpWmZiOTFyQmFYOGFqZHNtWExCREdJUlV4R1hyTlBqTTlaOE1DZ1N4UGhmejRUSHVjcXVWUmlFSXVZak14bTN0R1hYa0xqYzROdzM5bitMcFVZeHBERk9XL0I4WWw4a3NvRHFINTg4ei8zdWVlZXoyYXJnNHRBZGtGR3lkSW9IcGVBd2d3YThZbkpiRFdrOG5zeWtsaTVKNmRtSURZK1JaLy9LSzk3Nlo2NmQwSlNDc3VUa0Y2aUpHSnBOemc0VkR1eTNSU2JHTjJ6c081Uk1qaXhIN3VMam1xRlQ3c3NENzF5NVFxUWFhZll4R2lTMzZsVHA0NXEzd1JWM25iUTd0MDdRU1lqcjdHQ1VGa0FONkJweTVlZTl1cW4xNU9UbHQyd1VocHdsRzB5Yk9mOC9pWmlNdklhZk1KSDVhTnZ6VDVlNnRzMjhEaGJ5UmFxOEYxSGpMazFaNC9aSjR5ODNiNGRnZnZPOUxPRmVuNDM2bzY4WnArSXF4S0hqS1lsTEpWczN0a244azIrVkNLN2lmUnV4dlVaTTJhcXhZRzBkRmJnc1FtSWkxZnJRTjFRREJncEdmeWVncFRVRWhMenFYY3BuNko3eTRaYUkveE1SVnBhQ1VSRkYwRlFjSWpXRFFPVkpGYktuZTUyY2xURVZPQW5uM3lTclZVMjdiTzN3RnZhVU9lNm5OblVyUFlYNzdGang3STNidHhnbStDeGVmTW1iVExqNEhXdzZ0T2ZMYWdRYnFHNlVEKzU5aHZRRG5NdUdsT1NiY2VHU2xwLzZXVURyN2ZSSjhRODlPckx1UUhuMk9vNFU5RVdpdnk4RGg2NzhFSytQdUhnYlh4MklPNDczYzhXYW5IK2dUdnl5aWNDd3Z6UitmMWVlT1MzS1hqb3loUU11ZnlVcFpKTjJlNzRWbmVJeGV3VFRycXJ3cW5YbXpadGVrMHYrdlh2UHdpbFNwZFhWNVhHSlZTWm8yTEZpcXJzRVorUXBxNG5mZDZUdkd6SVZteGNDcituZ0M5a01vQVVocmUzenpkaUZLdTcrK29lcmFwTEJiRHBPWDM5K3ZXMkNSeVNBdG5xMWF2QmVmUFBLRmhRL3BMeTRqMTU4cVJkQW9lazdVZTE4WXlaTjRBUzd3ejkzTnJsYnYxNmpTbTk2K0l4cFUvRkFqR0oxMUZabUh4aXh1UFhYNExINllxMlVjaTVtbmpnZjZjNjh3bnhvdjZwdnJaUms3T0RuZkk2ZktML2djZlErWmVoSEZPcUI4L1BPYWIwZVNWTEpac3h0TjNsbDJIb3QvZFJlUGw2bTMzQzNGM2xUL1hoUW9xMzJGV1ZOMnpZQ0wza3A0RnN0allTMkFKSVU0dUEzMU9SbWxaU1FrSmkycjNNeTVac1V1a2FXTmVzTGdhUVF0bmt2Q2hXTWJ1N3IrNSs4UEJqdjJjbXN6bXFBTzBWUEY3SG1qVnJJRFkrWlpRREVDaHBxV2lWblRoeHdsYkJRK01lKy9idE0vSUdVRUhzS3FxbDVuM3YzcjFoc3pFbE1SbDUvUncrb1ZWcWxYM2sydlB3T0ZYUk5nbytXd05EZm53R1pwL2cwaVExSGJ6MVQvYTFqUnFmR1VqZXlVNTVHenpkR0QxL0hRbi96ek0xT2NDVkVnTlpSb25KN0JQbTJWVlIxRGJ1clhMOXFhZWVRYVBHVFpHWXJCYUd4aDZTa2F4dUpWWHVTZWxJVFM4bFdaS1hUZG1PSTRlNnNvb1VpMFZBWU5EM1loV3p1L1Z4ZDVPWDlPMjMzdzZXVXdDd0g2QVhFY2wyK3ZUcGgvVlYrVysrK1dZd0syTmI4bktodWYvSCs4VVhYenl1d2hZdFduaGN1SERKSXpjM3orV2NZcmg0OGJJSGx3Ny9uWmV0dUljTVQyYnlpYUhLNU9UbHF1ZllWc3JsUC9OdkxGNzZoQzE1OHp5ZDh5WjNxK1N4Ny9KcGo1dDVPUzduRk1QaHErYzhFdHVYTmZ1RU1mbFFyUklULzQrOXM0Q09HMG0zOEZlUzJwall6c1RKUWpJdlRwYUhsNW1abVprWkR6MW1abVpZWm1iZVlUejdocFloTVROMHUxbFNWVDM5NXowNWVoNTNwNjJPMi9KczN6bjNxRHF0bEs0OW5icXEvMWExamozdzJMR3h2bFBqcDFoZFdjS3ZCeGhyT1hSd0dLMk5NR29QRVlaYTJKRjJmTjNSYzRZUUxRcUhRNk1IanlpbHpnT2UyczArenI1NUtOLzNIdzlnclNXcnFOVnFqd0Jjd0tuWDY0L2JRM3BWR0lZUEJ4Z2VIcVpTcVdaSkk5RVNTd1JCRUR3NmNXZW1vdGNQUzJVZU16NU0xayt6WkJxZksrOG5HZHFXcmhGaWJ2T1o4SDMvb2JGZWEyM0xyTTRVcVV5dWJ6QXMrUTNQbGZlVE5LRnA2UnFodmEzZUlBZ2VEcUFPOWpQaEw0QzFtZUJNZlFsM2RIQ3J6NFJBQWYzQXF4LytpRWNHeFdLUjhWUGpMQ3l0MHR2VGczQ3RVSW1PT1hweUhpdHJKVGwydEMzWEZnMDV6Nk92dDVlYXI0bG1IeHA0aldnL3k2V3JybmtZWTQ1bWREQ09OY254am9BU1J1MDlvemRhdXBzenhoeU9aMUZhYTdLQzVBd28wbmlIdUgzVlZWZEpvQ3V2MFNiYzF1RHpyckZYOEZ1amI5emdKV3RqVzUrYkQrWDkweno2WmtaeSs4L1l2NDBvbXBLLzQrZ08yUU1TZW1tWkx4cDdPcTg2OUt3Tm5ydDJjR3ZEeXRlVDUvR2FvODlsZjI2d3BXdHNwVGRxSHdiUUN1bzZ5TXdzS1RBYXJXenlNNUdFQzl3OWVqenRRNkt2U2grWW5aMWpZV0VSYThGeFhmbDhvNVRLREwxY2pwenJNVGk0N3hEd0FPRDQyZDA0MkRVUGdadnh3VmpneGVheGgvUTZILy80eHdma21FMjlkcXZmTDlFenRRY0JOODNNSTk5ZjVyZnY5ODROL3RXRnZ3cjUyL2J4cU5vbHlmTjQxQzg5aUh4WWJPa2FvaW1wT2ZvT3BVMTZiY3VzOVFlOCtYNHYzK0M3TDNvdFliNTJtL1BPcXg4amVkNERqbDFDS1N5M2RBMjl0VjRIUUdlc3pHYTMwTXRwOUFEUGp6TEhpdEdobXA2ZW9WU3VjR0I0RUdQbDcxa09IdGhIcUEzQ2MwWUdkNk10R2tSTFJNT0JBL3RSeWxHZTU2MEFMd1o2T0t2b21nZmJHZHlXbDVlSmdtRnV2UEZHVmxkWGFSVlI3Witycjc2YW4vM3NaMmtHWTRVZ2hkNVNxWVJjYzN4OG5FcWxRcXRZWEZ3ayt1NHFGaFlXMnRIcklNaTQyU1hSMDlNVGF5Y3dJUmhhNW50WFBzOTRiWllZajdyekEzbFVjQWtrejZzYWZ1dGVieU9KZDgvL2VZdlhzSVNpS2ZFNzlqd3ZxUmRyYUpsZldibUN1ZG9TTWU1LzU0czVMemhCOGh4ZDFieituaThtaWIrZiswaEwvUnNqbW5URHo0UzJHY3lVckc2MEtiQUhlT3l4c2JGY3ZyQk92cERIY1JURnNrOU95a2M5THZuMWF0UjJoYnZhRmkyZTUxS3FCUFQyOXREZlB6QUFQQTdvMmFYU1ZkYzhaRUNkbTVzamVtZ01Vc09Qd212a3o4NkVLQ3lrV3EwU1RYZXAxK3RNVDArbkd0eTJxMWZxc210cmEwVGZ1OFBBd0FDaVZmN3NUSmlkblVWMFJzc1JwZllyZmFUUksyYmw3alh6MEZxcnVCMm1DSEpmUGYyYkpQSE9xSlJGeld5OFA3WnlDREdWR085ZCtodzNWWDdjY3YraUtZa3dERGZwdGR2aUgwLzlPMG04NlBoVE1iWFQvUnhZNmVQK1J5NG14bGVXTHVkbmxZa1cremVpcWVGbklqUW1lNW1TTVkzTVl5UXk2b3ZQT2VkZy84cnFHdVZTR1NXbEtxRnlnSWhLQVVxNHkyM1I1RWc1TGFKSGIxL2ZDSEFoTU5JMWoxMHlEeG1BeFRpaXpVMUVtNG1JdnJOZkJ0cW1CaEx0dXNaMVhUbFg3bXBsUUJiajZZaDU5UGIyaW5ISWRVV3pYRmRtUzAwTlpHWm1CcW5mam95TXlGMnQvQjM1dVR1aU53UG1JU2J2SWtoUkJoSmVXcnlCU3dzM0VPTlp4eDhmR2Nhb3ZDY2Q4bHZIMzB3U3Y3UDR6eTMzYlkyVndhM3hZSnlpREhSVDhZZmNXUGdCTVI1ei9LRWNXTzBIQ3phMHZQYkU4MG5pdlF1ZjNWYi9vcWtSdE5IdFpVcXJMV1pLUjFyTGxJUm1hL053Z1FlTWpvNld3MUNyV3FWRXRWN0hHc1hJL2o2MHRzSk10ckVLY0Z6SGNVckFBN3U1eHk2WlIyd1lTaW5FRUdSUWpwNUdKZ2F5WlhrbjJvdEJMcGREQm5ENU96SW9SNEVid3ZSb1hXOXNHUEcxUll1WWdoakkrdm82bXpFMU5ZWDhYTkVtcVkzZ0xkck1KZnlGTVE5Qk96TVA0YnRuLzR3a2Z1dkVXNkJtR0ZucTQxWDNmQjR4M3J2OE9jYnJzOXNjak1PbWVxMjEyK2JmejM2WUpGNTcvUG5vV2todXlmRE1lejZSR0Y5WnZweTUrbExyZlJ1TGJxQTNkYVowMzNmR2JKWXBKYzVyUFZPeWpjM09CYzRiSGg3UmdlK3pzbFpFb1pBeVVha2NJQ3VkY3A3TGVzbVhZeWJhb3FrbzdlZ29ONEZpSHNCNVhmUFlBZk13eG5BbUtLV1FBVGg2NWpISkFWbGV6OC9QSTR3UnJTcVJRVmVXZzI2WWpkekJ5OHlqUllpbVZPOGx6NUVQVHF3aDFpR3ZwUlJWS0JTSUlhVTBtYW5FeGlZL203d1c4NUYrMHV2TmVxYlVHRUZLODVBeTFIc1hQMGNNTVl5eHhWSGVPZnBTWXVTREl1K2Uvck50OWgxbkhtZFg3MC9MRTN4NThYSmlQUE5lVDJSa3NZL25IVHB0SE1XZ3pOOU5mV2liQVRRRXRyRmV2Vk9aMGowM1pVb0xyV1pLaUtaRzVqRVcvWHMydFhvZDM2K2pIQVZLU2RrcVVURlMyV3FMdHY4ZHB5SzZBTWU2NXJHTGdibnYrNGhoU1BuS2NSeGtNSmJYMFJlOHNiUzBoTXhDSk9NUTQ0aWU1NHhTU2did3VPUVYzL0YzN0U1ZXNndlJtSno5eEFZaVd2TDV2R2lXV1pRWVIyd3dHeVV2Q2RuVFkrOW1Tb0pRcDkrODlqc0wvNHdZUkl5L3V2QlhlTmRGcnliR1h5OThNTDRiVGp2emFLRFhwdUo3NXorREdFU005MFFycjE1MjBYT0k4WW1GcjhZcnJMYkZVT3ZHZWxNRTVxK2UyWlFwSGR1VUtTMXZ5cFNXdDVNcFdkSFVhS3pZQjRSMStmZnZ5cWtLNGY3QkhNWWd6R1FiRkJZbFk5UUJZSDkzcC9udW1VZGNaNWFTa0F4eVlneENNWXZZUU9ROW1XSEV4aUxsTG5sUEJtb1p2RHRwSG5FZGY2TjhKcHJpa3B1OGx0bUh2Q2VEZFd3c29sL2VLNWZMY3AzMGVyT1RLYVZBdk5yS3B1SjRkWWEvbnY4QU1aNTE0Z21NOUE0aHlBZnIvRTFrSHR2dDAwWU1qRzZxVjg1Snc3bnFJcCtZLytycDdPUEVROW5mdXkrZWRjaDdLZm8xQkdjcVcyRzN4VXRMRFRJbExPZ3RNcVdsZjk1Vy83cng3M2NmS00rRUlaVmFnT2M2Q010Vm5lbTI2emdSRmNiWUFqREk3cUpySHZGS0pyazdUODVBeEVEdWRyZTd5Wjl0RE5JeUNNcnJsWldWcEhGMFBFTVFJNGdOUkhRSVJiK1UzSkovRmh1SC9IeHlqZmIwWmlCVDZuem1FVE15aUE4bFp4K0pXY2VIMHN3NmhLSnBwL1RLN0NJNSs5ZzA2NmlrNmZQTW1ZZGgyM3ozM0taTTZmaGJvR29ZV2R3aVU2ck5icXZ2MEJnYVFldlFCS0hHV0ZDTytqODYyVzhyQUt2SUJycm1JWkN5and4eU1xdVFvekRlYVNwSHVaT1d3VkJtSTdGeDdKWjV4SHMrUkVmQ0xHSzl5WXhEWmlQU2Z3ZjBkanBUU3BGNXRJRzhMdkx1cVQ4bGlmSEtETDh6ODAra3hJNWtIakZMUVlXL20vZ2dTY3lWRi9tdnFVK24zSFJIODVsSE81blNVZ3VaMHN5ZmJWdHZhQnZxTGRkcTlTQUlBL3B5Q21zam9oam9WUmdyekdiYkFzWW9ITmNaQnNwMEh0M0F2Sm1CQ09JNzV1UXFwV2hwbjVSY1VocEhTd0YwS2dNUnlLcXJUWnZqR0JvYVNtMGNqVFZsUGxOcVByZ1oyeFpsYVdzUzd4My9kQnY5bVIxWmJaWGtseGN2STRrdmpIK3JuZjVhV0txYk1sT2EzNVFwWFJCbFNoY21NcVhGZEptUzNscXZBWXExV3RVSmd4QmZnK01vWEtXb0JkSFJFV2F6N2FBQVF4Q0VhMEFSTU93K3VqT1BwSUZvcldXQWswRlk3dDVsWUV0cEhESHNqaTE5RlFNeHhzaGRlNXpKU0ttblZlTklwVW11bDdGTVNUU2xLRnVsWUJJMlBlT2xwQjNWMjZabTBiUVQ1anhlaXpLbGhSU1pVanB6MXNCRXFWUTBzaUREVlM0cXNicEoyaXFqYll2QldvUFJvUU5NQUpyc29Hc2U4WUFzd2ZUWTJKanNrNUFTUzNyajZNQytDY2xBZk4rWEdaTU14akx3dG0wYzZmVm1MMU1TQkRwN2c3Rm9hcTdYdHMwRTJ1ekxFT3IwK3p4U1owcUxqVE9sbERNUERYeS9YQzU3MVZvTjE5Rlk2MkJ4NlBVTWx1eTJ0WUZRRzR3eGc4QVBNbWdlWGZNUWlIbkk4bExacXlCM3l6RTZjQ2VmV3ErWW5CaEhPclN1S2Z1WlV2Wm5Ia0p0ZDdac0pkd3N0NjJ5VlZPOU9sT1prcVZoWUs2QjY0TWdPRkFwbDNTdGJsSEs0a1FNdEJjZEVXYXU3WWN1VmdjUlF4TmhBTGd1bytiUk5ZK083WURlKzNvemtDbTFZaDQ2ZzJVZ3ZXZjAyaGIwdHAwcExaN05UTWsyMG11QnZMWDIxdVdsNVJVLzhEZCtUSlJRWlpMR2FvSXdwRnFyRm9GYmdUeGc2YUpySG50ZmIzWXpKVUZvZHFBTTVKSzZIMnVOYU9yb1RFazVLbjAvdDUrTXhnSSs4TzF5dVZnSy9USUtCMnNWbmdvQVIwak95VlpibVRxQkgxQ3JWbXZBTndHL2F4NWQ4OWo3ZWpPZUtTVjNRTGZMUy9NM2JIRENXV2h2Y0xQbURIcHQyN3d4LzRNTkxqbjV0dnJTdHZscXE2eVZCVTFqcy9PQmo5ZnJ0Y09CZHF3eEFRcUR0ajF5eEZFV1RhOGNNOUcySnFUcVc4TFF0MkVZREFNZkFYeTY2SnJIM3RlYjdVeEpvRTNJMmNDamIzNzFCdDg3LzlrMmM2V3dxVjVyYVp0dnZmRjNOdmlsdVV2YjZNdUtwc3lWMlZKOFBZbEFBejhCdnJ1ZVg1MDAybUJOUkpLcm5MSkRvMFA4ZW8xeXVWZ0FyZ1ZPZGZPT3JubDA5WjRWZEM3elNNOFVtVWVHWU0rZ1NWdWR1YVhRMnBwbVAwNFYrSzlpTWI4LzFCcHRRWmtxRmplaWcyTnJvRnpocnJhMXNkVDlBTDlXb2xxcEtPQS9SZnNPbHF5NjVpR09uUkcwcENWRGNtTXR0eXZ6MEViam9ESmpITW9xMFhRR3ZZQzFtYUN5b0p1YlhZWXlwYWFCZVl3UStJTFcrdnVGdFpWNUhmaG9lc0NFS0F5NEEzTGMxYloxK2dtRE90VktpV0twdkdLdHZRWDRFaEN3TStpYVJ4QUVlSjVMVnVDNkRtRVkwZ2lpMTNXenBOY1Z2YmN2ODZqNjdIUDZNbU1lQTA0UE9tanlPNjZGZUk2YkdiMDlyb2NObXB0ZDFqSWwwZFFFQmlnRC81SFByL2I3UVYySFlZQzJCaXYvc2ZzcnIwSWRVcTJXSTFaTXRWTHVFNjJpdVR2cjJFSHpLQmFMc2xrdUU3TVAwUkJ2M0d1eUFrbFdIbVZGcit6MEZyMjNLL093QzBYdU1uaVVITzZ1MzhYM3Fod25CbzVnWjlacEJHK2hUdTlnSHk3dWJzc2xweno2K3Z2d1ptck55MVpuQVkrKzVkVXg0NitEU1EzVFhKTUZBdUN6MXRyUHo4L05UTllyQlVKdE1CWnNVRUk1cmhEQ2NzZmJvcUZhWEpFTndCVHlxNnZBcDBVckVIVE5Zd2ZOUTU0QmtjOFhHQjdlTHdPM0JMSnlOOTFSeGwvRElkOHh0YlpXa0VmQzBnankxTDlpc2NUQVFMK1lTTHlCcnFPVWE4b0Q5a1dEYUptY25OejhmRzI3MTh6RDkzMGJ0NzJiRnZoKzhTUVBHRG1mdS9TZnl3RnZpQ0Z2WDBkNVRtNll1dzZjeS8xR3p1UFcwa25jVzVZYS9vNkhieXh6ZWVtL3VmUElZWTcwSDJaL2JvQkJyNitqSE1vTmNuVGdEdHh4NUJEZkxuK1hmYmRVR3VyVnhtUXVVeEpOWjRBQktzQ3YrZlg2OFh4aGZjcXZWUWw5SDd4K3JORmdEVTdQUGpsMnJHMTBnRHdldDF6MUtSYnk2MkVZam9wRzBRb1lkZzVkODZqWDY1dzhlWktscFpYSVBHUXZ3WkJRektSREhCTFRvTGZYa3gzVG9rVldGOUVJc2Q1Q1FXWWdIb09EQXhFSE84d0JjamxQVEZlZTVDZDZOejlEWFZ0cjkxS21KRCtYM2ppbjZOTno5U3pYNTIvbER2M0RrWW1jeHdPSHorOG83emQ4VHc3MURuUDl5czMwWERtTkt2Z2tJTXVXTi9UbVNvYlJhOHA4dHZBZGF2MTF6aDIrSTJNalJ6aldJY3Examd3ZnB0Ulg0WE9yMytIUVZXVnk2N3FoWG0wemxpbTFQaHNLZ1NYZzVmbTExY1BGOVh5K1hxOFJCZ0ZHbTQyK1ZJZitzMGJMWGc3VzF3dXNGL0tsU3FYY0Q3eENOQUloTzRLdWVWaWxWRGxlQmxvb0ZPVGhRaEYveEtsVDQweE9Ua1djN2hDbkdCOGZqNjc5WTlFZ1dpVFhTSzR4TjRtYXEweE5wVXdrejdUZ3h6LytLZFBUTS9JVXZvNXlhbXBhcmkwYVJLL2N0U2YxMnFjLy9la2xwWlMwNWIzTVpVcWJmcjhXNERuUGVjNkdabHUxZURNbEJyNDh6bzNYWGNXM2YzNDVsMDVjMlZGKzUyZVhjOVAxVjRrR3ZOa3lOckFrTlQvcFNVOHFTUnRBVnpVRE15Rkh2MUxpMmhzdTU2TW5QOCtISno3UFJ6cEV1ZGJIZi80RmJyamhTa1REd0d5SWFhTFhxOW1NWlVxOUtQLy82d1dhYlJyOERQQUhpd3R6WHJGWVdLc1VWd21Od2FBSTYwV1U2MGIwMEw2MHZSMW91eGdzcGNJeVVzYU9US3hTS2haeXdPOEJuKzV1Q3R6WnNrV2Y1M25maytiL3RHOFdzSTFqUVJnT3VYWWNMamZVcEl4cHlzemN3NFgybUpsUnNDZzRabVkrMFRJek0zWjF6TXl3ekx4ek16NWJjcGJSY2FRODZWZGluSy9XN3pkdjNrdDdlbnJnemp2dlZKWGEyOXVCMkJpR1dRMEFGaEpPVVgyT25SdGNjY1VWOE1namo2aEtnd2NQRm5pUmtYaXQvZjM5TnVLbGZROC8vRENNSHo4T1B2amdBM2ovL2ZmREttS1lNR0VjakJ3NVV2NThPZkxFbURGanpKSW5URjBNMkcvblZDVytsUW54eE5LbFN4MlNKNXpkaVpCMWgwOVZTbTZMRCtIOTZLT1A3Qkt2KzhNZ0JOZGVCTXlDQUdqbTU0VlY3TUlnbFBZUEFNOWJSYUdlT0g3VG95eW9SMUE3RTVLUzE2ZG41a0JCb0FSS0srcWh2S29lS3FvYm9MSzJoVDdQNG5kVVRUTVVsMVZEZGw0aE9OMCtNRnVzTktqY2czcFVaRHJYSTdWbzVjR3k3RExhV0w1OHVUZ1NWVWVqWHk1aDUwdGZhUjFrcVZSNWNCeTNIQUEwczJiTkVrZjY2bWowN0JZdFdpUjhSMGFCdDdTMGREOCtYL3F1ZWUrOTkzQWRaNHVxMXBSR2p4NHQ4Ukk0aU0vNmtPU0ozU3NQYUVBOWx0REFBZXdkMWgwSThRUjJ4QWNsVDZ4ZnNSbEgrb2RVeEF1YVRmMWJRM2lEd2VCKzVGMUd2RnVmL0VuenpmWmZOUlUyRmF3cFdmTndmZXNuemRhWGZ3bjF4UEhiUVhGTjRYSFVZK3YvK2R1eVlmMC8vKzdZdnAxK0trcy9tY1ZwTER3RmdLYXh6cHJvbm50Mzc5TGdQeXRxdG16YXFObTg4Wjh0Tzdadm80cmpZZUlnSnBIdEhMWm81Y0drcHFaMjR1THZiN1RwOS92aDVwdHZEbnZGY2NNTk40RFA1d05pSXJhTWpJdzJBT0JJNmVucFhSSnZibTR1akJneEl1d1Z4OUNoUXlFN094c2szc3pNekhZQU1CSnZWbFpXRSs3N2w0NTFkbmJDVzIrOUJaTW1UWUNwVTZmQWxDbVRVWk1VRXNXYWdySEh3eHR2dkNGVmRRSnZYbDVlQlhsQjlFU014K001WDJKbWZEcXczUmoraXNOMkhZdG0xUjNORTBiMHlnVVNyOW5QUThaTjNyQlhIT25YZThDVWFqd3FyOXdUaVplNmdadFhCRFhyK3FEam8rdWgvYVByRkZkVmZ4L3djNHNnc2RkMVZFK2NSTk9qZU5TVktLeTgyVjlUVXB5UWtaMFBCY0Z5Q0FRQ1dDazBDWlVERHFpZ3FxNlZkSXJmVzZDNHVCaUNaVFdRazE4RVRxY1RZdU1URCtnTmhvMWlrcnVLR0tJVmgzTEp3NEF2WG1WOGZQd3RXRVp2b1YyNFlBcFZWVlV3YU5BZzZPdnJVMVFEQmd3UVl1TW9EY1QxbUcySmlZazM0TXRXUnAwYUNWL0NLamt2anFLcEl4U1MzdTIzMzY2b2JyenhSb3BOeit4b3ZDeUtLUzh2VDBQZTIvRVlqWWJJOUVLQ2ZQcnBwK0c1NTU1VFZFOCsrYVFRT3lFaElZUzNycTdPUzE2UWUwTE9yRE5wZ2FzMGdIbEFERmg2bFpYNTRoZ2h0dGFvUGI0blpMd0dreDdpS3gzZ0daZ00zajZub3ZJTVNCWmk2NDM2WS9MVzF0YW15M241TkJNNEg4bUd1TEdGNEppb3JPTEhGQXF4V1NkM1ZFK2M0a3dHaDNLalBxQ2ZXMWh0dHZVZXIxOUlJbmtGUVFpV1ZrSjVkWU13blZWWjB3alY5YTMwZVp6dnFOcG1LQzJ2Z1VDd0RMTHpBdUJKOVVOOFFoTDFFWnVwT0taWVlreE9aSWcyaFpLSHpvY05PN1IybDh2Vnh6RE1jdHF0QnVFMHkrZEpTVW5YRUJ0MkRtNEEwSk1pZ1RjL1A5OURMeDVweG93WkxJN2s2K21GeEhPK1V4dXYxK3V0dytsQmhyd2dla0tmazVNalBHT0pXZVdlTUVRU2J5UjY0aFNhRnNXZ3JHSWxzQWlUMFdhejFmcTMwKzA5NVBXbFExWk9JZVJpSWluRVpGQmNWb09xaGhKTURtVlZEY0luN1N1cHFJT2k0Z29vQ0pSaWxSRUVYMW9tcExnOG1EU1NEM0ZHNHphODV3NjZOOFVRWXpGaWJBVmJOSGxvY1FxRGlZMk5yVWJUdEtHaE8vRDd2VGlTZmdmbmtoZVRzWlVVeGx5SXNkOGtCbUloSm1KYnVIQ2hnWXhNaWpCZUxVcmYxTlJreDJNdG1QYzZIUTdIZzJyaFRVNU9idXJ1N3JZU0k3SEtQWUdjdGZUM1NNeHE5MFFrOFVhVUowNS9QWlZGeFlwVFdRdFF1eGdtNWkrc1J2WWxwYmdQdWp3K3FzSXhNV1JCV2tZdTRQUTVwR2ZtZ2o4akczQmdDQzZQSC9BOFFDN2dUWmF0aHYrbnAvYUs5N3BTdkRjYnhtb2ptanhJT0Y5dnNkdnREWEZ4Y1cxa2Rob3BrWkhJMkhMaDZPbXM2dkQ3VTB5S1RRekVRa3c0aWpkTG5CSEdxNU14NitpRnhQTXExY0tMblVSNWIyK3ZXYzRwOXdSZWI4Vy9wMG45bm9nczNvanp4T2szclN5SjJGRWw0c0w2UjZqOXVLNnlHZGNyL21FNWJnTm41RGZ5dkhrRGFqUExHVGZGc094NlBMYUpwdERFLzlQNFNMeVc3bUdYa29aS3FvMW9Ba0Vqc3pnQ0Naak41aGFiemRaS3hwZUV4anFua3NlaTJNVEE4M3dwTmw3aWkzUmVsRTZjRW9yRFVaYmY3WFlIcU9NZzRVaXI2bHhLaW9NeEN5bDJZV0doZzNoSW9ieWh6TlRwNFpwU3VZcWZzUUs4VVUrY2hhWkZHVkE4eW83eW9YcFJ3MUh2b2NhaDVwREU3KytKeDNyRmMrM2l0UVlWSjR4b0VzRVMyb2FqcFZRMGZ3R2F2eHhmUmtWRXNUQm1Qc1VtQm9rbjhua2ozeFBZR1RvaXlST1J4aXRLSjVOZUljbGphaFh5c0ZTUk1DZ094YU1zaDRrWGp6SHFyRENpN1QvU0FqQ1QvckszaHdBQUFBQkpSVTVFcmtKZ2dnPT0"
      }, {
        name: "__ASSET__:bitmap_flixel_addons_transition__FlxTransitionSprite_RawGraphicTransTileDiamond",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQWlBQUFBQWdDQVlBQUFBckZzTTFBQUFBQVhOU1IwSUFyczRjNlFBQUFzNUpSRUZVZUp6dDJORnFIRUVNUk5GeC92K2ZOeS9KUzRpaHJWR051cGx6d1dCc2RXbFlyN2VMKy9YNWZDNEFPSXgvUDdpK2h2YitTK281ZnZwQjNmVWNkeStJNm5OMFgweXJ6NUcrRUw5N2pxY3Y0ci9QTVZvQWZrMHVCM0EwbjJ2bUEreC9PNTk0anBVZGllZW9aSFk4eDFURzFHczQ5UjdhNVgvb2NSUVFBQlUrMzN6LzVONmYvQzY1OTg1c01tdnE3SjJzcWIvaDFIdDRzZ2lNbHhBRkJEZ1hCcUkyazlqYmNXYVhEQVlpei9qbHZ3TUtDSEFtREVUUGJES0xnVmpQWmlCZWlBSUMxR0VnYWpPSnZSMW5kc2xnSVBLOC92TGZBUVVFcU1GQTlNd21zeGlJOVd3R0FvK2pnT0JrR0lqYVRHSnZ4NWxkTWhpSVBDNS9LQ0E0RmdhaVp6YVp4VUNzWnpNUWVCMEtDTzdBUU5SbUVuczd6dXlTd1VEa2NmbGpIQVVFVlJpSW50bGtGZ094bnMxQUFBK2pnSndOQTFHYlNlenRPTE5MQmdPUngrV1AxNk9BbkFzRDBUT2J6R0lnMXJNWkNPQmxLQ0QzWUNCcU00bTlIV2QyeVdBZzhyajhnV0VVa0RvTVJNOXNNb3VCV005bUlBQTh5dWtGaElHb3pTVDJkcHpaSllPQnlPUHlCMTdPNlFVRUFBQWN5T2tGNU92UDE4VGVsWjg5c2JjeWs5amJjV2FYaktuWGNPbzl0TXYvRUlBWGNYb0JtZVRybSsrZjNQdVQzeVgzM3BsTlprMmR2Wk0xOVRlY2VnOVBGaEVsQ0JoRUFia0hBMU9iU2V6dE9MTkxCZ09UUi9rQWhsRkF6b1dCNlpsTlpqRXc2OWtNRFBBeUZKQ3pZV0JxTTRtOUhXZDJ5V0JnOGlnZmVEMEtDS293TUQyenlTd0daajJiZ1FFZVJnSEJIUmlZMmt4aWI4ZVpYVElZbUR6S0I4WlJRSEFxREV6UGJES0xnVm5QWm1Ed09oUVFuQXdEVTV0SjdPMDRzMHNHQTVOSCtZQUNBaFJoWUhwbWsxa016SG8yQTRQSFVVQ0FPZ3hNYlNheHQrUE1MaGtNVEI3bFl3TVVFT0JNR0ppZTJXUVdBN09lemNDOEVBVUVPQmNHcGphVDJOdHhacGNNQmliUDY4dkhkU2tnQUdvd01EMnp5U3dHWmoyYmdSbEFBUUZRaFlHcHpTVDJkcHpaSllPQnlUTmVQcTdydW40RDVOWDdQSTd2WFpFQUFBQUFTVVZPUks1Q1lJST0"
      }, {
        name: "__ASSET__:bitmap_flixel_system__FlxPreloader_GraphicLogoCorners",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUVBQUFBQkFDQVFBQUFBQVlMbFZBQUFFT1VsRVFWUjQybHlOaFJFRFFSRERGR2JxdjVzVTlNenNjVGluMFI2dlo5elprSk1SbTBpcmxKSktOTFIwOUdZd0krSTlnM3hYbUNIRkhHbVdMT1NLdFRLMkhNV0ZHMWQ1MW5yTG5ucXA1WXFlaGlVNHBIblR5dDZNY25pRnY4SDFQWjd4UE9NWHIvZlA4Nlc3RFY1dEZIMlFSK281T1NrSk1aRUlST2hWVENweUNsSEs2a245cHJILzFMaUs4a2xCVGtaSy9Nd0l2VXJKM0xtY1V6a21JeUdXa1d2NmZGQlJ5cWs0TStCdEdvYUNjSG1VdHF3dytQLy9jMXFsTm9oMy9YU2NMSVZLRzR2eHlZNmJacm52bloxVTBtS1liS3hiOXlqZkJPZ2lDR04wbC9TWnUxMUxGeWlGRmdoOWtaRGdINHh2V0Q3UW9qRVFUa1BaZ1pEaVZKb0J1djZXQUd6dnIxRnFIYTBXWmxIT0l6SnhEaXEwWlFleXZSWmtzQTFmeFRxR3RyTitXZFlBZzVLRUVkb3RHWlREdVkrdk5uZkZObkpubExURFI2MmNEd3hKWEx3cEJjSVNBeUM5c05zeHg1WXh0MlpFek5hMURzRmlnQ0QxVVFCKzBPQng0QktXYU1YeWIyMThTK1FlTnlrcCtCRXZieEFIMzNwb2Fac0hvbzE1TEJyWkUzYVVQUURZVS8yQ09YcGc5cWl0LzdWenVBNElGd0hrT1Y5YytYQzc5N1lSd3hETDhHQUMwSks5NngvSi83WDVIaXdvQU5lOG9NclB1K3k1MlAzalduTHdRb0FnQVVEOVh2MnRXaks0a1lJRWdPTjNBdHZZcTZuSUFhRTBUZjFiSmdBRUdZQWdsVjg5Vzhmdm93Q01JQlVIb3RsOEVad0FBRXNBbG0wVEdDR01nQ28vclBCTkFURENUUUMzSU15eEgzL2NLK1pveXgyd3RnaVYzM3BmTUNPRGFDV0J6ZDhEeUFBY0J1c1pDSXNSS2dzd0J5SUpnRkEyanYwc0NFb3ZEWFBOY1RSRXpZN2ZSKys3OG9tTTI5bXZMVVQyZ05rbXRDUXVnTW5OMXA0cGdmL1hQaldBaHZtMk9aWW5ibk9CU0NDYTFYRFRzUXd3ZVFHd2w1S0FUMjFySFpjeUFCTkVtNGRRQWtCekYwRXFSdHRiOCt5bHo3dlNFSWpOSDBJdkFQYnFPa2dnVExRSHdRQWxUZHFHU0w1N0FMNzBSTk5QMFZiVnAzN0tsbk5oejRwc1oyL3pJQ1NCUFJsTWVoZ2R2eVRuTDdVNzZERHNCR21qN2VjTmlMbThCWERVQnhZaUs3WFJHN0JjdnhHcTdROFNBTWkwSHhXNlo1THJUd0pIU2RPa0VPSkI0MTVlRjIzdFRMbisvQjlKcXQxcDk3VzdQZ0F3N2dXampMdDR0Y1Y2L2IxdmV5cDM4dFgyVDkyQk9CZ0IrWS9mcmZLWTJsMTlkNVYrRklBUmtnTVl5Y0tqdTJlZXh5eld5TWEyZHZRblNVY1NPTGVlV2lBY3ZCaCtSVEdtZSthNXI3QnlEZmV3ZFV2V2xQeEU0WVY5NnhzbjcyUUhiMHJFYmQ2a3ZZVzVLOGVhY2dWQ0FnYVFqT0RuSWhnY0h5dVc3dDV3eEk3NTJRamVBekwvVG0rZCtjTExnVUI1Z3c2T2ZLamNaWDRIZ1FST1F1QzBCSUtUR0NDWUlRd3NtNDdDbWpVWFFGeVVnczRkZVJQS2p2b053QVZHUUVaWVU2N0lYTmJzZG05emwrakZQZ0Z3dnA5OGJ2M2MvYmpyZVZnTVFJekM2Tm1hK01aVlo0dkw0MGQ3ZEc4OU80Zjk3cVgzN09YUGY3YUxoNlkvK2YvZVM2djBhZVdmR2ZwKy9PUmU0ODh1NmptL05Fdjd2ZDdudDk4YlN4R0tIQlprUkFBQUFBQkpSVTVFcmtKZ2dnPT0"
      }, {
        name: "__ASSET__:bitmap_flixel_addons_transition__TransitionFade_RawGraphicDiagonalGradient",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQVQ0QUFBQ0FDQVlBQUFDU2p3V0JBQUFLT21sRFExQlFhRzkwYjNOb2IzQWdTVU5ESUhCeWIyWnBiR1VBQUVpSm5aWjNWRlRYRm9mUHZYZDZvYzB3RkNsRDc3ME5JTDAzcWRKRVlaZ1pZQ2dERGpNMHNTR2lBaEZGUkFRVlFZSWlCb3lHSXJFaWlvV0FZTUVla0NDZ3hHQVVVVkY1TTdKV2RPWGx2WmVYM3g5bmZXdWZ2ZmM5Wis5OTFyb0FrTHo5dWJ4MFdBcUFOSjZBSCtMbFNvK01pcVpqK3dFTThBQUR6QUJnc2pJekFrSTl3NEJJUGg1dTlFeVJFL2dpQ0lBM2Q4UXJBRGVOdklQb2RQRC9TWnFWd1JlSTBnU0oySUxOeVdTSnVGREVxZG1DRExGOVJzVFUrQlF4d3lneDgwVUhGTEc4bUJNWDJmQ3p6eUk3aTVtZHhtT0xXSHptREhZYVc4dzlJdDZhSmVTSUdQRVhjVkVXbDVNdDRsc2kxa3dWcG5GRi9GWWNtOFpoWmdLQUlvbnRBZzRyU2NTbUlpYnh3MExjUkx3VUFCd3A4U3VPLzRvRm5CeUIrRkp1NlJtNWZHNWlrb0N1eTlLam05bmFNdWplbk94VWprQmdGTVJrcFRENWJMcGJlbG9HazVjTHdPS2RQMHRHWEZ1NnFNaldacmJXMWtibXhtWmZGZXEvYnY1TmlYdTdTSytDUC9jTW92VjlzZjJWWDNvOUFJeFpVVzEyZkxIRjd3V2dZek1BOHZlLzJEUVBBaUFwNmx2N3dGZjNvWW5uSlVrZ3lMQXpNY25PempibWNsakc0b0wrb2YvcDhEZjAxZmVNeGVuK0tBL2RuWlBBRktZSzZPSzZzZEpUMDRWOGVtWUdrOFdoRy8xNWlQOXg0Ritmd3pDRWs4RGhjM2lpaUhEUmxIRjVpYUoyODloY0FUZWRSK2Z5L2xNVC8ySFluN1E0MXlKUkdqNEJhcXd4a0JxZ0F1VFhQb0NpRUFFU2MwQzBBLzNSTjM5OE9CQy92QWpWaWNXNS95em8zN1BDWmVJbGs1djRPYzR0Skl6T0V2S3pGdmZFenhLZ0FRRklBaXBRQUNwQUErZ0NJMkFPYklBOWNBWWV3QmNFZ2pBUUJWWUJGa2dDYVlBUHNrRSsyQWlLUUFuWUFYYURhbEFMR2tBVGFBRW5RQWM0RFM2QXkrQTZ1QUZ1Z3dkZ0JJeUQ1MkFHdkFIekVBUmhJVEpFZ1JRZ1ZVZ0xNb0RNSVFia0NIbEEvbEFJRkFYRlFZa1FEeEpDK2RBbXFBUXFoNnFoT3FnSitoNDZCVjJBcmtLRDBEMW9GSnFDZm9mZXd3aE1ncW13TXF3Tm04QU0yQVgyZzhQZ2xYQWl2QnJPZ3d2aDdYQVZYQThmZzl2aEMvQjErRFk4QWorSFp4R0FFQkVhb29ZWUlRekVEUWxFb3BFRWhJK3NRNHFSU3FRZWFVRzZrRjdrSmpLQ1RDUHZVQmdVQlVWSEdhSHNVZDZvNVNnV2FqVnFIYW9VVlkwNmdtcEg5YUJ1b2taUk02aFBhREphQ1cyQXRrUDdvQ1BSaWVoc2RCRzZFdDJJYmtOZlF0OUdqNlBmWURBWUdrWUhZNFB4eGtSaGtqRnJNS1dZL1poV3pIbk1JR1lNTTR2RlloV3dCbGdIYkNDV2lSVmdpN0I3c2NldzU3QkQySEhzV3h3UnA0b3p4M25pb25FOFhBR3VFbmNVZHhZM2hKdkF6ZU9sOEZwNE8zd2dubzNQeFpmaEcvQmQrQUg4T0g2ZUlFM1FJVGdRd2dqSmhJMkVLa0lMNFJMaEllRVZrVWhVSjlvU2c0bGM0Z1ppRmZFNDhRcHhsUGlPSkVQU0o3bVJZa2hDMG5iU1lkSjUwajNTS3pLWnJFMTJKa2VUQmVUdDVDYnlSZkpqOGxzSmlvU3hoSThFVzJLOVJJMUV1OFNReEF0SnZLU1dwSXZrS3NrOHlVckprNUlEa3ROU2VDbHRLVGNwcHRRNnFScXBVMUxEVXJQU0ZHa3o2VURwTk9sUzZhUFNWNlVuWmJBeTJqSWVNbXlaUXBsRE1oZGx4aWdJUllQaVJtRlJObEVhS0pjbzQxUU1WWWZxUTAybWxsQy9vL1pUWjJSbFpDMWx3MlZ6Wkd0a3o4aU8wQkNhTnMySGxrb3JvNTJnM2FHOWwxT1djNUhqeUcyVGE1RWJrcHVUWHlMdkxNK1JMNVp2bGI4dC8xNkJydUNoa0tLd1U2RkQ0WkVpU2xGZk1WZ3hXL0dBNGlYRjZTWFVKZlpMV0V1S2w1eFljbDhKVnRKWENsRmFvM1JJcVU5cFZsbEYyVXM1UTNtdjhrWGxhUldhaXJOS3NrcUZ5bG1WS1ZXS3FxTXFWN1ZDOVp6cU03b3MzWVdlU3EraTk5Qm4xSlRVdk5XRWFuVnEvV3J6NmpycXk5VUwxRnZWSDJrUU5CZ2FDUm9WR3QwYU01cXFtZ0dhK1pyTm12ZTE4Rm9NclNTdFBWcTlXblBhT3RvUjJsdTBPN1FuZGVSMWZIVHlkSnAxSHVxU2RaMTBWK3ZXNjk3U3crZ3g5RkwwOXV2ZDBJZjFyZlNUOUd2MEJ3eGdBMnNEcnNGK2cwRkR0S0d0SWMrdzNuRFlpR1RrWXBSbDFHdzBha3d6OWpjdU1PNHdmbUdpYVJKdHN0T2sxK1NUcVpWcHFtbUQ2UU16R1ROZnN3S3pMclBmemZYTldlWTE1cmNzeUJhZUZ1c3RPaTFlV2hwWWNpd1BXTjYxb2xnRldHMng2cmI2YUcxanpiZHVzWjZ5MGJTSnM5bG5NOHlnTW9JWXBZd3J0bWhiVjl2MXRxZHQzOWxaMnduc1R0ajlabTlrbjJKLzFINXlxYzVTenRLR3BXTU82ZzVNaHpxSEVVZTZZNXpqUWNjUkp6VW5wbE85MHhObkRXZTJjNlB6aEl1ZVM3TExNWmNYcnFhdWZOYzIxemszTzdlMWJ1ZmRFWGN2OTJMM2ZnOFpqK1VlMVI2UFBkVTlFejJiUFdlOHJMeldlSjMzUm52N2VlLzBIdlpSOW1INU5Qbk0rTnI0cnZYdDhTUDVoZnBWK3ozeDEvZm4rM2NGd0FHK0Fic0NIaTdUV3NaYjFoRUlBbjBDZHdVK0N0SUpXaDMwWXpBbU9DaTRKdmhwaUZsSWZraHZLQ1UwTnZSbzZKc3cxN0N5c0FmTGRaY0xsM2VIUzRiSGhEZUZ6MFc0UjVSSGpFU2FSSzZOdkI2bEdNV042b3pHUm9kSE4wYlBydkJZc1h2RmVJeFZURkhNblpVNkszTldYbDJsdUNwMTFabFl5VmhtN01rNGRGeEUzTkc0RDh4QVpqMXpOdDRuZmwvOERNdU50WWYxbk8zTXJtQlBjUnc0NVp5SkJJZUU4b1RKUklmRVhZbFRTVTVKbFVuVFhEZHVOZmRsc25keWJmSmNTbURLNFpTRjFJalUxalJjV2x6YUtaNE1MNFhYazY2U25wTSttR0dRVVpReHN0cHU5ZTdWTTN3L2ZtTW1sTGt5czFOQUZmMU05UWwxaFp1Rm8xbU9XVFZaYjdQRHMwL21TT2Z3Y3ZweTlYTzM1VTdrZWVaOXV3YTFocldtTzE4dGYyUCs2RnFYdFhYcm9IWHg2N3JYYTZ3dlhEKyt3V3ZEa1kyRWpTa2JmeW93TFNndmVMMHBZbE5Yb1hMaGhzS3h6VjZibTRza2l2aEZ3MXZzdDlSdVJXM2xidTNmWnJGdDc3WlB4ZXppYXlXbUpaVWxIMHBacGRlK01mdW02cHVGN1FuYis4dXN5dzdzd096ZzdiaXowMm5ua1hMcDhyenlzVjBCdTlvcjZCWEZGYTkzeCs2K1dtbFpXYnVIc0VlNFo2VEt2NnB6citiZUhYcy9WQ2RWMzY1eHJXbmRwN1J2Mjc2NS9lejlRd2VjRDdUVUt0ZVcxTDQveUQxNHQ4NnJycjFldTc3eUVPWlExcUduRGVFTnZkOHl2bTFxVkd3c2FmeDRtSGQ0NUVqSWtaNG1tNmFtbzBwSHk1cmhabUh6MUxHWVl6ZStjLyt1czhXb3BhNlYxbHB5SEJ3WEhuLzJmZHozZDA3NG5lZyt5VGpaOG9QV0QvdmFLRzNGN1ZCN2J2dE1SMUxIU0dkVTUrQXAzMVBkWGZaZGJUOGEvM2o0dE5ycG1qT3laOHJPRXM0V25sMDRsM2R1OW56Rytla0xpUmZHdW1PN0gxeU12SGlySjdpbi81TGZwU3VYUFM5ZjdIWHBQWGZGNGNycHEzWlhUMTFqWE91NGJuMjl2YytxciswbnE1L2ErcTM3Mndkc0JqcHYyTjdvR2x3NmVIYklhZWpDVGZlYmwyLzUzTHArZTludHdUdkw3OXdkamhrZXVjdStPM2t2OWQ3TCsxbjM1eDlzZUloK1dQeEk2bEhsWTZYSDlUL3IvZHc2WWoxeVp0Ujl0TzlKNkpNSFk2eXg1NzlrL3ZKaHZQQXArV25saE9wRTA2VDU1T2twejZrYnoxWThHMytlOFh4K3V1aFg2Vi8zdmRCOThjTnZ6ci8xelVUT2pML2t2MXo0dmZTVndxdkRyeTFmZDg4R3pUNStrL1ptZnE3NHJjTGJJKzhZNzNyZlI3eWZtTS8rZ1AxUTlWSHZZOWNudjA4UEY5SVdGdjRGQTVqei9DVjNGblVBQUFSbFNVUkJWSGljN2RSSGtoVkJBRU5Cd2YyUERERXM4RERtbSs1V21jd0lYVUNMOStubDVlVWx3STYrN0xyUFI3d0hUS2NlbitLK0NoL3NweDJlYXZTU1JQaGdMKzN3MUtPWENCL3NwQjJlSWFLWENCL3NvaDJlWWFLWENCL3NvQjJlb2FLWENCK3NyaDJlNGFLWENCK3NyQjJlSWFPWENCK3NxaDJlWWFPWENCK3NxQjJlb2FPWENCK3NwaDJlNGFPWENCK3NwQjJlS2FLWENCK3NvaDJlYWFLWENCK3NvQjJlcWFLWENCL01yaDJlNmFLWENCL01yQjJlS2FPWENCL01xaDJlYWFPWENCL01xQjJlcWFPWENCL01waDJlNmFPWENCL01wQjJlSmFLWENCL01vaDJlWmFLWENCL01vQjJlcGFLWENCK01yaDJlNWFLWENCK01yQjJlSmFPWENCK01xaDJlWmFPWENCK01xQjJlcGFPWENCK01waDJlNWFPWENCK01wQjJlTGFLWENCK01vaDJlYmFLWENCK01vQjJlcmFLWENCKzB0Y096WGZRUzRZT21kbmkyakY0aWZORFNEcysyMFV1RUR4cmE0ZGs2ZW9ud3dkWGE0ZGsrZW9ud3daWGE0Ukc5SDRRUHJ0RU9qK2o5UWZqZ2ZPM3dpTjQvaEEvTzFRNlA2TDFDK09BODdmQ0kzaHVFRDg3UkRvL292VVA0NEhqdDhJamVCNFFQanRVT2oramRRUGpnT08zd2lONk5oQStPMFE2UDZOMUIrT0I1N2ZDSTNwMkVENTdURG8vb1BVRDQ0SEh0OElqZWc0UVBIdE1PaitnOVFmamdmdTN3aU42VGhBL3UwdzZQNkIxQStPQjI3ZkNJM2tHRUQyN1REby9vSFVqNDRHUHQ4SWpld1lRUDN0Y09qK2lkUVBqZ2JlM3dpTjVKaEE5ZTF3NlA2SjFJK09CLzdmQ0kzc21FRC83V0RvL29YVUQ0NExkMmVFVHZJc0lIMzdYREkzb1hFajdvaDBmMExpWjg3SzRkSHRFckVENTIxZzZQNkpVSUg3dHFoMGYwaW9TUEhiWERJM3Bsd3NkdTJ1RVJ2UUVJSHp0cGgwZjBCaUY4N0tJZEh0RWJpUEN4ZzNaNFJHOHd3c2ZxMnVFUnZRRUpIeXRyaDBmMEJpVjhyS29kSHRFYm1QQ3hvblo0Ukc5d3dzZHEydUVSdlFrSUh5dHBoMGYwSmlGOHJLSWRIdEdiaVBDeGduWjRSRzh5d3NmczJ1RVJ2UWtKSHpOcmgwZjBKaVY4ektvZEh0R2JtUEF4bzNaNFJHOXl3c2RzMnVFUnZRVUlIek5waDBmMEZpRjh6S0lkSHRGYmlQQXhnM1o0Ukc4eHdzZm8ydUVSdlFVSkh5TnJoMGYwRmlWOGpLb2RIdEZibVBBeG9uWjRSRzl4d3NkbzJ1RVJ2UTBJSHlOcGgwZjBOaUY4aktJZEh0SGJpUEF4Z25aNFJHOHp3a2RiT3p5aXR5SGhvNmtkSHRIYmxQRFIwZzZQNkcxTStHaG9oMGYwTmlkOFhLMGRIdEZEK0xoVU96eWlSeExoNHpydDhJZ2V2d2dmVjJpSFIvVDRpL0J4dG5aNFJJLy9DQjluYW9kSDlIaVY4SEdXZG5oRWp6Y0pIMmRvaDBmMGVKZndjYlIyZUVTUER3a2ZSMnFIUi9TNGlmQnhsSFo0UkkrYkNSOUhhSWRIOUxpTDhQR3NkbmhFajdzSkg4OW9oMGYwZUlqdzhhaDJlRVNQaHdrZmoyaUhSL1I0aXZCeHIzWjRSSStuQ1IvM2FJZEg5RGlFOEhHcmRuaEVqOE1JSDdkb2gwZjBPSlR3OFpGMmVFU1B3d2tmNzJtSFIvUTRoZkR4bG5aNFJJL1RDQit2YVlkSDlEaVY4UEd2ZG5oRWo5TUpIMzlxaDBmMHVJVHc4Vk03UEtMSFpZU1BwQjhlMGVOU3drYzdQS0xINWI0Qjl1U0dVREtrdjBzQUFBQUFTVVZPUks1Q1lJST0"
      }, {
        name: "__ASSET__:bitmap_flixel_input_mouse__FlxMouse_GraphicCursor",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQWdDQVlBQUFBSVhyZzRBQUFCcFVsRVFWUjQyclRSQTVLRFFSQUY0QnhnYmR1MjdUM0RvckMyelR1dGJkdTJiYU5qZFp4TVh0VXJ6WFIvUHlqYUpzYU5GQ1dHRGdCNUJBSGtFUVJvR1JzaGhEQ2dZV2lJRVNVQVJvemxDQ0VJcEJlVVFtQkVCRUVFQWNXMXpUQzlzQW8rSWNFRUVRVDBUU3pCNmZrNWVBVUdFa0lRMERvd0F5ZVh0M0J5ZWdydS9uNWtFQXdNejZ3QlBmc0hCK0RpNDQwUUFnQzlkdy9QREdSbmR4Y2NQVDBRUWdDWVdka0JkamEzdDhETzNVMStCQVBzdnJ4OUFEdHJHeHRnNCtLTUVjV0E1YTFENE0zaThoSllPanBnUkg2Z1kzZ092cjUvK0pDNWhRWFpFUXp3ZHZ2Z0RIQW1wcWZBMk1ZYUkvSUIzV01MOFB2M0J6aGpFeFBTSXhqQVBUcS9CbUVaR0I0Q1Ewc0xqTWdPREU2dmdLaDA5L1pLUUNRQXlSbDU0T1lmQkNFeHNSQ1ZtQ2kwN0orT0VZbEFhbVlCcU9ycU1hcHBhSWlXU0d5aldDQ3pxSkt4V0UxUEQ3U01qR1JiamhFTUZGUTFNSmFyNnh1d0wvYlI2aTFucVdORHNhQzBvUTA5U0xZRE1TZFY2Z05iVncrZ3dWTElsZjlHa0F1b1ZhTUJzUVJ5K0swR0dVN2xoaGVtNGJTd1lDa1FNOU9xNlRnZlpqZ3RMSmhKeThidlpBWWFBZ0JJUDV2ZHJxV1ZzQUFBQUFCSlJVNUVya0pnZ2c9PQ"
      }, {
        name: "__ASSET__:bitmap_flixel_system__FlxPreloader_GraphicLogoLight",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUVBQUFBQkFDQVlBQUFDcWFYSGVBQUFGT1VsRVFWUjQycjJhQ1E3VE1CUkUyN0t2MStFY1hJUTdjVVQyblVKUXFoZmxFVDBVbVZnYTJXM2NaZWJQLzNiY25rNnZYdjlQbkFmaDlMOXc1L1RpNVdsd093TmZDL1RyeHJaeEFvejc4cnltQkI0bndIamlaOEc0OExwd2crZnhPY2NMME1ROU52bTRybXZ4UFk0Vm9DSnVzaDd2aUhvNFlaOFFsMzNrVFR5aWVkbUxFRWxDREhaQTI5dEVsNFQ5WElnaWdoNURNdVlOZDBDN3dZVHYwQWNhWitHSUdqREMzcERRT0MzZmhIbGN3b1FBSFdIMW01WTIyWGFDaGFBUHEwZHgzaWxBVjJFVHBsL2hMZ0FsaGdTTzZDYngvUUxRdC8waHZTSi9iOVV6SjkzUUtWQk9TQUdhUEdqaWtBYkx4NzRHZUsrb0NVbE84d1lKd0pleTVTRmprdmNuTUxZQUFQSnlna2xkUTRpc0FYdklROXJrSVF3ZWJEeG1MdVNWQ3JrYUlFU21jd2pnSmNWd1ZYZkVJUW9FQ2JHcUQ1VUcxeUI5N1hxQUFDYmZCYy81YnVJUEo2ekdqM2lNR0U0SE84QmtUSm8rVXFFRU1DQU9uT2VRZy9DeXR4Q2toK3VBOHorSVI1TVlFa0RSajJydmZEZkp4Mzk2OEhnRzgrd0Mxd0RhV2RGbVROL2lXSUIvTFh4cGU1Tjlzc0JqUk5sMmdlOEJIUFVBNUVPQWlMNWQ4SGNCSUE5RVhDTGdBdFVCV1g4bjhXc1dRUk1IVWZnZ2I5c3Z5VCs5allFRm1LSG95KzdnSjMxRjMwS2tBQnQzYzhwOWs1OEFlWTBoLzlnMUFQSWlBRmtERVl4T2dkN3hiVGlBM01mMml2Nk1aMHN4bUwrS3Z2SmV4SDhBa1pjUVVRdk9rd0RLZnhjKzUvNEV5TnNCRUljMFFBQ1JWOVVYZVVTUUVFNkoyaGhkZXJPQUtMMGZjRXJNd0FuZytlUUtRV2t5d1VzbGdubkR4TGk1eVFFbUNyUUV4dExuM0ljWXI1MEo4Umx6VTZTL0E3QzZiaGZRcmlBZFlQVktHSW1qZXdIdERCOXJvd1NZN3p2SXUzVjJrTDlVV1lCdXZVemFKYkZiaENRaU1VOEhLVDVtaTVQa0lDOEJpaXpOdVdZM1dBd0xzeHdEdlVhRWhTQ3UxZ0wwSFZYOVdoT25PZkViZ1FSdVZHc0IyaTVSVkRUV2tpUjRxWXZYTWgvNDJuZ0hNSTR2NHpXYjhSTGZKbFJsMS91QUl0K2NFTURSVmlRMWhtZ3NWOTlXK1BJYlgvLzA0UE9FMnpXQVNFdXhZZ2NvQjVZSWx4M0svVFJNSENJUW5mdVA4L2pUTko3eGFRSnp3RTJNY0VuZUVlNVlCU0t2SFhrVEo3cWZWb1EvTFBDUkhpQUlvaWgxdEIyMkNCS2k5Z0ZiQ3NwcTI1WW42cEQvc01MNzMzaTN3SHVBR0N0WGtCcHlnQUJ4OFpJRFBDbWl6bmpUOGxoOFJmcHRBRkZTQ0p3ZzRsa280WGZwQXdSWGVWdWZJaWNCSFBFbDRUZEw4RHh1VUgyQVBFNndJMDVaQVB0SWpER0lQei9nS2gxaFNUQ0pwUnBCand0d3c1WVRuQmFPZmd2UXY3M2ZFTC9nWGlObEpBQUFkZ0hrNVFaRXVBbzZYb3RUNFNEdDIyZWF5R3VsQUo4aHR5VHJxQk41Uk5DS0VJVXdmaG1pMzNLRWdBaXN0Ym9uMTJyaHpSQWtQem5xTTVqck9nRDQzTjRmK0xmQkZvS3hYK09WQTZoZ1NvUVZSSDdMOWhIOUxvSW1aL3ZIZFgvQTBnVVVxRzg0WUlKRjJINk05WHRIYU9oWHBSU2dDNkd2bTd5M3lpMkNpWU52MitSQjdBUnArZitBYUtxcWtFY0U3eHVvQS9UZklHblNRZDdSNzUxZ0M5QVJ0eEFBOG1EN2J0RkVJUThnN2pVZlJPRUxCMlNoTS9td0d1UWxnb1FnTlJocnh3ZjVKajd3WDJMZCtzNFJRRWhpUUJUaUNLZEtIOGZnNnZjSTRQRlZ6OGR4RmNBTkVLWFhXRERodUEwZWVTanE1L2hDa0lzemdvVHpIbFRPbHpQVEFmdWRZQmZFM1NTQUZHTmZkOVQ3SHlMai95NnZQcHVKNjFoTks0Y2pISWlEbkVFQ0JHbDlhTGtCT0s5WHlLVXRIRGxFZ053dGRoUnMyU0FjeFMxRnA0MFhvTVhaSm0xU29BWGNFZlhSQXZRL3Nxc2lCNEdJYkZ3N1FJRGNGc2NYMjduczlwempCV2czZERPUmN4TnY4a2NMME9UN1dwUHJhOGNMTUlEc2JqR09GMkM4TUNaNmNQc0ZMZ2kyUWU0OEVWTUFBQUFBU1VWT1JLNUNZSUk9"
      }, {
        name: "__ASSET__:bitmap_flixel_addons_transition__FlxTransitionSprite_RawGraphicTransTileCircle",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQWlBQUFBQWdDQVlBQUFBckZzTTFBQUFBQVhOU1IwSUFyczRjNlFBQUF2SkpSRUZVZUp6dDNORnUyekFNQmRCNi8vL1Azc01RTEREcU9MSXRVclRPQVlvTmJXS3lXU1BkVVVhWGRWMS9BSW80V3JDV2hKcDdydlp5MStMYzJrZXZUZUdvajZqTjZMYytvamZDOXg2eU51RWxzZmEvQmdRUW9JRUEwSzVLQU9oWis2Z0hBV0JDQWdod1pMWUFjR2Z0MWg2eUFrQkU3YjBlQklCSkNTQlF6OTZiOXU3cGd3Qnd2eEVEUUdUdGJRODJvSWtKSUZCRDZ4dDFsT25EUzBzLzdrR0k3Y0VFZ2hRQ0NMU0xta0I4cXZXdEVhWVBMeVBmZ3hCUmU2OEhBWUFwL2NsdUFBcFpmejR2MkVkZlAxTXYraG85TjZTamEwZHNobnMxSWpkaW16NzhtSUJRVStRRTRsTzlJMWY2eVRnQ2NRUVIzNE1GbUdtWmdGQko5QVRpZGMzbzUvYllsR3gwd0ZBRUVNNWFOeDhSOVhvOHR2ZDFxbXo4bVVjUUdhL1J1dmt6UTVXZkRlaENBS0hWWHVEb0dVVE9YTGZxNHA1NUR3WkFHQUdrdHFqcHczdTlPeDV6ZDgzUm50dnpXZ0NQSUlEVXRBMGVFVUVrNHdpRUdJNUFnSEFDeURYUkU0aFh6VE5mcXlqckhveXNtMEJIdTVjR29Cc0I1THp0Qk9MSlJ0bkVBWGlJNmdFa1l3THhxdnZONXlMcW5ua01BS1NxSGtBQWdJS3FCNURscDk5dnZ6eXErODNuSXVxZWVRd0FwS29lUURJdE8zOS9valBmMzlOZkV3QXVFRUN1eVpqQWZLcjN0RTMvanU5bmxQRDB0SDhiZ0VzRWtKcTJ3U2NpQ0xWYzMyWjdUdFl4WHVZeFp1YlBpcDlUU0NTQTFCWTlnY200QitYSzliS2UyL05hQUk4Z2dOQnFML1QwREVPakhLTkU2TmwzMWRjRWVDQUJoTE9XelVkRXZSNlA3WDJkS3B0KzVpVE5FUkJNU0FDaGtxT3cweU1NWlJ6anVBa1dlTHhsWGYzaVRQalN0MitXdXpiN3U5NmNMZjMwWGhBKzlSSzFHUDNXUS9SQytONUQxaUs4Sk5ZR0V4Qm9FRDJCeVRnQ3lyd0hKZk1vYjdTYnVlSHhURUNnaHRZMzZ0Vk43dTZGWVlRcHpGRVBKakR4UGRpQUppYUFRRDE3YjlxNy8yZWRjUVIwZCszV0hoeEJ4ZlpnQTVxWUFBSWNPYnRJakRLRkVZRCtHekVBbWNCTVNnQUJXaHd0R0QzdWI1Z3RBR1VkUWZXc2ZkU0RJNmdKQ1NCQUpRSlF1eW9CYU1ZanFJemE3ejJrQm9DL0tSRFdBS1A2d3BFQUFBQUFTVVZPUks1Q1lJST0"
      }, {
        name: "__ASSET__:bitmap_flixel_addons_transition_RawGraphicTransTileSquare",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQWlBQUFBQWdDQVlBQUFBckZzTTFBQUFBQVhOU1IwSUFyczRjNlFBQUFUbEpSRUZVZUp6dDNUa1N3akFRUlVHZ3VQK1ZUWVFEQThieU5qTlc5d1drN0w4cUJib1B3M0FEQUxvVEdnRFB5TU1Cb0hOUkVYQVBPbmNrUUFEbzNka1JFRDcrR1FnUUFESTRLd0tNZnhJQ0JJQzNveVBBK0RNU0lBQzVIQlVCeHA5VUJBakFwNzBqd1BqRGhBQUJzdG9yQW93L0pDUkFnRGxiSThENEExOEpFTWh2YlFRWWZ5QXRBUUxMdEVhQThRZVlJVUNvWkdrRUdIK0E1QVFJcmY1RmdQRUg0QzhCVXRPdkNERCtBSlFnUU5hYlJvRHhCNENGSHRFWDJHaTRCWDhuREFDMHF4NGdBRUJCMVo5Z1BIc0FRRUhWQXlTUytBR0FsUVJJVGVJSGdOSUVDSzNFRHdDYkNSQXFFVDhBRnlGQVlCbnhBN0FqQVFMNWlSL2djZ1FJTUVmOEFJY1FJRUJXNGdjdVRJQUFmQkkvY0RBQkFwQ0wrS0VMQWdTQU4vSERhUVFJQUJtSW44NElFQUI2SjM0Q0NCQUFpTk50L0x3QXc0NFVnME5GRTVnQUFBQUFTVVZPUks1Q1lJST0"
      }];
      if (ArrayBuffer.prototype.slice == null) {
        ArrayBuffer.prototype.slice = fp.sliceImpl;
      }
      S.__alpha16 = new Uint32Array(256);
      for (var Ii = 0; Ii < 256;) {
        var gk = Ii++;
        S.__alpha16[gk] = Math.ceil(gk * 257.00392156862745);
      }
      S.__clamp = new Uint8Array(511);
      for (Ii = 0; Ii < 255;) {
        gk = Ii++;
        S.__clamp[gk] = gk;
      }
      for (Ii = 255; Ii < 511;) {
        gk = Ii++;
        S.__clamp[gk] = 255;
      }
      Va.level = 3;
      if (typeof console == "undefined") {
        console = {};
      }
      if (console.log == null) {
        console.log = function () {};
      }
      B.hitTestCanvas = qg.get_supported() ? window.document.createElement("canvas") : null;
      B.hitTestContext = qg.get_supported() ? B.hitTestCanvas.getContext("2d") : null;
      di.maxTouchPoints = 2;
      di.supportedGestures = null;
      di.supportsGestureEvents = false;
      di.inputMode = 2;
      ab.__meta__ = {
        statics: {
          toNullVector: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      wa.__meta__ = {
        fields: {
          __cairo: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          addEventListener: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          removeEventListener: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      wa.__broadcastEvents = new ua();
      wa.__instanceCount = 0;
      wa.__tempStack = new bb(function () {
        return ab.toObjectVector(null);
      }, function (a) {
        a.set_length(0);
      });
      Ea.idEnumerator = 0;
      wb.__fontByName = new ua();
      wb.__registeredFonts = [];
      ea.Element = 0;
      ea.PCData = 1;
      ea.CData = 2;
      ea.Comment = 3;
      ea.DocType = 4;
      ea.ProcessingInstruction = 5;
      ea.Document = 6;
      y.data = new sk(null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null);
      y.defaultData = new sk(null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null);
      y.keyBinds = function (a) {
        a = new ua();
        a.h.note_up = [87, 38];
        a.h.note_left = [65, 37];
        a.h.note_down = [83, 40];
        a.h.note_right = [68, 39];
        a.h.ui_up = [87, 38];
        a.h.ui_left = [65, 37];
        a.h.ui_down = [83, 40];
        a.h.ui_right = [68, 39];
        a.h.accept = [32, 13];
        a.h.back = [8, 27];
        a.h.pause = [13, 27];
        a.h.reset = [82];
        a.h.volume_mute = [48];
        a.h.volume_up = [107, 187];
        a.h.volume_down = [109, 189];
        a.h.debug_1 = [55];
        a.h.debug_2 = [56];
        return a;
      }(this);
      y.gamepadBinds = function (a) {
        a = new ua();
        a.h.note_up = [11, 3];
        a.h.note_left = [13, 2];
        a.h.note_down = [12, 0];
        a.h.note_right = [14, 1];
        a.h.ui_up = [11, 34];
        a.h.ui_left = [13, 37];
        a.h.ui_down = [12, 36];
        a.h.ui_right = [14, 35];
        a.h.accept = [0, 7];
        a.h.back = [1];
        a.h.pause = [7];
        a.h.reset = [6];
        return a;
      }(this);
      O.bpm = 100;
      O.crochet = 60 / O.bpm * 1000;
      O.stepCrochet = O.crochet / 4;
      O.songPosition = 0;
      O.offset = 0;
      O.safeZoneOffset = 0;
      O.bpmChangeMap = [];
      nb.defaultList = ["Easy", "Normal", "Hard"];
      nb.list = [];
      nb.defaultDifficulty = "Normal";
      $a.weekScores = new ua();
      $a.songScores = new ua();
      $a.songRating = new ua();
      Kd.currentModDirectory = "";
      Rb.skipNextTransIn = false;
      Rb.skipNextTransOut = false;
      P.timePassedOnState = 0;
      Ri.noteTypesData = new ua();
      D.dumpExclusions = ["assets/shared/music/freakyMenu.mp3"];
      D.localTrackedAssets = [];
      D.currentTrackedAssets = new ua();
      D.currentTrackedSounds = new ua();
      W.pool = function (a) {
        return new jh(function () {
          return new W(0, 0);
        });
      }(this);
      Ha._pool = function (a) {
        return new jh(function () {
          return new Ha(0, 0, 0, 0);
        });
      }(this);
      za.__meta__ = {
        fields: {
          equals: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      za.__identity = new za();
      za.__pool = new bb(function () {
        return new za();
      }, function (a) {
        a.identity();
      });
      Lb.__pool = new bb(function () {
        return new Lb();
      }, function (a) {
        a.__identity();
      });
      Tb.defaultZoom = 1;
      ib.weeksLoaded = new ua();
      ib.weeksList = [];
      $b.defaultPixelPerfectPosition = false;
      $b.defaultMoves = true;
      F.defaultAntialiasing = false;
      ac.DEFAULT_TEXT_X = 175;
      ac.DEFAULT_TEXT_Y = 460;
      ac.LONG_TEXT_ADD = 24;
      ac.LEFT_CHAR_X = -60;
      ac.RIGHT_CHAR_X = -100;
      ac.DEFAULT_CHAR_Y = 60;
      kd.IDLE_SUFFIX = "-IDLE";
      kd.DEFAULT_CHARACTER = "bf";
      kd.DEFAULT_SCALE = 0.7;
      Ui.sha = "";
      h.autoPause = true;
      h.fixedTimestep = true;
      h.timeScale = 1;
      h.animationTimeScale = 1;
      h.worldDivisions = 6;
      h.VERSION = new Ui(5, 8, 0);
      h.elapsed = 0;
      h.maxElapsed = 0.1;
      h.scaleMode = new Bk();
      h.worldBounds = function (a) {
        a = Ha._pool.get();
        var b = 0;
        var c = 0;
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.x = b;
        a.y = c;
        a.width = d;
        a.height = e;
        a._inPool = false;
        return a;
      }(this);
      h.save = new Jd();
      h.random = new Wi();
      h.swipes = [];
      h.inputs = new qn();
      h.log = new rn();
      h.debugger = new pn();
      h.bitmap = new nn();
      h.cameras = new on();
      h.initialWidth = 0;
      h.initialHeight = 0;
      h.signals = new un();
      jg.muted = true;
      ge.__meta__ = {
        fields: {
          glProgram: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      he.BASE_VERTEX_HEADER = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;";
      he.BASE_VERTEX_BODY = "openfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform)\n\t\t{\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;";
      he.BASE_VERTEX_SOURCE = "#pragma header\n\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\n\t\tvoid main(void)\n\t\t{\n\t\t\t#pragma body\n\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
      he.BASE_FRAGMENT_HEADER = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}";
      he.BASE_FRAGMENT_BODY = "vec4 color = texture2D(bitmap, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0)\n\t\t{\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\telse if (openfl_HasColorTransform)\n\t\t{\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\t\t}";
      he.BASE_FRAGMENT_SOURCE = "#pragma header\n\n\t\tvoid main(void)\n\t\t{\n\t\t\tgl_FragColor = flixel_texture2D(bitmap, openfl_TextureCoordv);\n\t\t}";
      T.__meta__ = {
        fields: {
          image: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __framebufferContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __indexBufferContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __surface: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __textureContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __vertexBufferContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __fromImage: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      T.__tempVector = new Xh();
      xe.resourceType = "image/png";
      xe.resourceName = "__ASSET__:bitmap_flixel_addons_transition__FlxTransitionSprite_RawGraphicTransTileCircle";
      ye.resourceType = "image/png";
      ye.resourceName = "__ASSET__:bitmap_flixel_addons_transition__FlxTransitionSprite_RawGraphicTransTileDiamond";
      ze.resourceType = "image/png";
      ze.resourceName = "__ASSET__:bitmap_flixel_addons_transition_RawGraphicTransTileSquare";
      Ae.resourceType = "image/png";
      Ae.resourceName = "__ASSET__:bitmap_flixel_addons_transition__TransitionFade_RawGraphicDiagonalGradient";
      lb.__pool = new bb(function () {
        return new lb();
      }, function (a) {
        a.setTo(0, 0);
      });
      da.__pool = new bb(function () {
        return new da();
      }, function (a) {
        a.setTo(0, 0, 0, 0);
      });
      Z.bitmapsCreated = 0;
      Z.useSectionCache = true;
      Z._staticPoint = new lb();
      Z._staticRect = new da();
      Z._staticRect2 = new da();
      Z._staticPointZero = new lb(0, 0);
      Z._staticMatrix = new za();
      Z._staticFlxRect = function (a) {
        a = Ha._pool.get();
        var b = 0;
        var c = 0;
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.x = b;
        a.y = c;
        a.width = d;
        a.height = e;
        a._inPool = false;
        return a;
      }(this);
      Z._staticFlxRect2 = function (a) {
        a = Ha._pool.get();
        var b = 0;
        var c = 0;
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.x = b;
        a.y = c;
        a.width = d;
        a.height = e;
        a._inPool = false;
        return a;
      }(this);
      ed._cachedPoint = function (a) {
        var b = 0;
        a = 0;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = W.pool.get().set(b, a);
        a._inPool = false;
        return a;
      }(this);
      lj.CLICK_EVENT = "click_popup";
      md.EXTENSIONS = [".ttf", ".otf"];
      gd._pool = new jh(function () {
        return new gd();
      });
      gd._boundObjects = new la();
      Zb.defaultPersist = false;
      pb._point = new lb();
      pb._rect = new da();
      pb._matrix = new Rc();
      Ld.drawCalls = 0;
      eg.fromStringMap = function (a) {
        a = new ua();
        a.h.ANY = -2;
        a.h.A = 0;
        a.h.B = 1;
        a.h.X = 2;
        a.h.Y = 3;
        a.h.LEFT_SHOULDER = 4;
        a.h.RIGHT_SHOULDER = 5;
        a.h.BACK = 6;
        a.h.START = 7;
        a.h.LEFT_STICK_CLICK = 8;
        a.h.RIGHT_STICK_CLICK = 9;
        a.h.GUIDE = 10;
        a.h.DPAD_UP = 11;
        a.h.DPAD_DOWN = 12;
        a.h.DPAD_LEFT = 13;
        a.h.DPAD_RIGHT = 14;
        a.h.LEFT_TRIGGER_BUTTON = 15;
        a.h.RIGHT_TRIGGER_BUTTON = 16;
        a.h.LEFT_TRIGGER = 17;
        a.h.RIGHT_TRIGGER = 18;
        a.h.LEFT_ANALOG_STICK = 19;
        a.h.RIGHT_ANALOG_STICK = 20;
        a.h.DPAD = 21;
        a.h.TILT_PITCH = 26;
        a.h.TILT_ROLL = 27;
        a.h.POINTER_X = 28;
        a.h.POINTER_Y = 29;
        a.h.EXTRA_0 = 30;
        a.h.EXTRA_1 = 31;
        a.h.EXTRA_2 = 32;
        a.h.EXTRA_3 = 33;
        a.h.LEFT_STICK_DIGITAL_UP = 34;
        a.h.LEFT_STICK_DIGITAL_RIGHT = 35;
        a.h.LEFT_STICK_DIGITAL_DOWN = 36;
        a.h.LEFT_STICK_DIGITAL_LEFT = 37;
        a.h.RIGHT_STICK_DIGITAL_UP = 38;
        a.h.RIGHT_STICK_DIGITAL_RIGHT = 39;
        a.h.RIGHT_STICK_DIGITAL_DOWN = 40;
        a.h.RIGHT_STICK_DIGITAL_LEFT = 41;
        return a;
      }(this);
      eg.toStringMap = function (a) {
        a = new wc();
        a.h[-2] = "ANY";
        a.h[0] = "A";
        a.h[1] = "B";
        a.h[2] = "X";
        a.h[3] = "Y";
        a.h[4] = "LEFT_SHOULDER";
        a.h[5] = "RIGHT_SHOULDER";
        a.h[6] = "BACK";
        a.h[7] = "START";
        a.h[8] = "LEFT_STICK_CLICK";
        a.h[9] = "RIGHT_STICK_CLICK";
        a.h[10] = "GUIDE";
        a.h[11] = "DPAD_UP";
        a.h[12] = "DPAD_DOWN";
        a.h[13] = "DPAD_LEFT";
        a.h[14] = "DPAD_RIGHT";
        a.h[15] = "LEFT_TRIGGER_BUTTON";
        a.h[16] = "RIGHT_TRIGGER_BUTTON";
        a.h[17] = "LEFT_TRIGGER";
        a.h[18] = "RIGHT_TRIGGER";
        a.h[19] = "LEFT_ANALOG_STICK";
        a.h[20] = "RIGHT_ANALOG_STICK";
        a.h[21] = "DPAD";
        a.h[26] = "TILT_PITCH";
        a.h[27] = "TILT_ROLL";
        a.h[28] = "POINTER_X";
        a.h[29] = "POINTER_Y";
        a.h[30] = "EXTRA_0";
        a.h[31] = "EXTRA_1";
        a.h[32] = "EXTRA_2";
        a.h[33] = "EXTRA_3";
        a.h[34] = "LEFT_STICK_DIGITAL_UP";
        a.h[35] = "LEFT_STICK_DIGITAL_RIGHT";
        a.h[36] = "LEFT_STICK_DIGITAL_DOWN";
        a.h[37] = "LEFT_STICK_DIGITAL_LEFT";
        a.h[38] = "RIGHT_STICK_DIGITAL_UP";
        a.h[39] = "RIGHT_STICK_DIGITAL_RIGHT";
        a.h[40] = "RIGHT_STICK_DIGITAL_DOWN";
        a.h[41] = "RIGHT_STICK_DIGITAL_LEFT";
        return a;
      }(this);
      sb.__meta__ = {
        fields: {
          addEventListener: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      sb.numDevices = 0;
      sb.__deviceList = [];
      sb.__instances = [];
      sb.__devices = new la();
      ig._gameInput = new sb();
      ef.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 24,
        down: 25,
        left: 26,
        right: 27
      });
      ef.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 28,
        down: 29,
        left: 30,
        right: 31
      });
      ff.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 21,
        down: 22,
        left: 23,
        right: 24
      });
      ff.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 25,
        down: 26,
        left: 27,
        right: 28
      });
      Cd.REMOTE_DPAD = new Oc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25,
        threshold: 0.5,
        mode: Ng.ONLY_DIGITAL
      });
      Cd.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 26,
        down: 27,
        left: 28,
        right: 29
      });
      Cd.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 26,
        down: 27,
        left: 28,
        right: 29
      });
      gf.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 23,
        down: 24,
        left: 25,
        right: 26
      });
      gf.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 27,
        down: 28,
        left: 29,
        right: 30
      });
      hf.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25
      });
      hf.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 26,
        down: 27,
        left: 28,
        right: 29
      });
      Ce.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 21,
        down: 22,
        left: 23,
        right: 24
      });
      Ce.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 25,
        down: 26,
        left: 27,
        right: 28
      });
      bi.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25
      });
      ci.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25
      });
      jf.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25
      });
      jf.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 26,
        down: 27,
        left: 28,
        right: 29
      });
      Dd.REMOTE_DPAD = new Oc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25,
        threshold: 0.5,
        mode: Ng.ONLY_DIGITAL
      });
      Dd.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 28,
        down: 29,
        left: 30,
        right: 31
      });
      Dd.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 32,
        down: 33,
        left: 34,
        right: 35
      });
      kf.LEFT_ANALOG_STICK = new Oc(0, 1, {
        up: 21,
        down: 22,
        left: 23,
        right: 24
      });
      kf.RIGHT_ANALOG_STICK = new Oc(2, 3, {
        up: 25,
        down: 26,
        left: 27,
        right: 28
      });
      Dg.fromStringMap = function (a) {
        a = new ua();
        a.h.ANY = -2;
        a.h.A = 65;
        a.h.B = 66;
        a.h.C = 67;
        a.h.D = 68;
        a.h.E = 69;
        a.h.F = 70;
        a.h.G = 71;
        a.h.H = 72;
        a.h.I = 73;
        a.h.J = 74;
        a.h.K = 75;
        a.h.L = 76;
        a.h.M = 77;
        a.h.N = 78;
        a.h.O = 79;
        a.h.P = 80;
        a.h.Q = 81;
        a.h.R = 82;
        a.h.S = 83;
        a.h.T = 84;
        a.h.U = 85;
        a.h.V = 86;
        a.h.W = 87;
        a.h.X = 88;
        a.h.Y = 89;
        a.h.Z = 90;
        a.h.ZERO = 48;
        a.h.ONE = 49;
        a.h.TWO = 50;
        a.h.THREE = 51;
        a.h.FOUR = 52;
        a.h.FIVE = 53;
        a.h.SIX = 54;
        a.h.SEVEN = 55;
        a.h.EIGHT = 56;
        a.h.NINE = 57;
        a.h.PAGEUP = 33;
        a.h.PAGEDOWN = 34;
        a.h.HOME = 36;
        a.h.END = 35;
        a.h.INSERT = 45;
        a.h.ESCAPE = 27;
        a.h.MINUS = 189;
        a.h.PLUS = 187;
        a.h.DELETE = 46;
        a.h.BACKSPACE = 8;
        a.h.LBRACKET = 219;
        a.h.RBRACKET = 221;
        a.h.BACKSLASH = 220;
        a.h.CAPSLOCK = 20;
        a.h.SCROLL_LOCK = 145;
        a.h.NUMLOCK = 144;
        a.h.SEMICOLON = 186;
        a.h.QUOTE = 222;
        a.h.ENTER = 13;
        a.h.SHIFT = 16;
        a.h.COMMA = 188;
        a.h.PERIOD = 190;
        a.h.SLASH = 191;
        a.h.GRAVEACCENT = 192;
        a.h.CONTROL = 17;
        a.h.ALT = 18;
        a.h.SPACE = 32;
        a.h.UP = 38;
        a.h.DOWN = 40;
        a.h.LEFT = 37;
        a.h.RIGHT = 39;
        a.h.TAB = 9;
        a.h.WINDOWS = 15;
        a.h.MENU = 302;
        a.h.PRINTSCREEN = 301;
        a.h.BREAK = 19;
        a.h.F1 = 112;
        a.h.F2 = 113;
        a.h.F3 = 114;
        a.h.F4 = 115;
        a.h.F5 = 116;
        a.h.F6 = 117;
        a.h.F7 = 118;
        a.h.F8 = 119;
        a.h.F9 = 120;
        a.h.F10 = 121;
        a.h.F11 = 122;
        a.h.F12 = 123;
        a.h.NUMPADZERO = 96;
        a.h.NUMPADONE = 97;
        a.h.NUMPADTWO = 98;
        a.h.NUMPADTHREE = 99;
        a.h.NUMPADFOUR = 100;
        a.h.NUMPADFIVE = 101;
        a.h.NUMPADSIX = 102;
        a.h.NUMPADSEVEN = 103;
        a.h.NUMPADEIGHT = 104;
        a.h.NUMPADNINE = 105;
        a.h.NUMPADMINUS = 109;
        a.h.NUMPADPLUS = 107;
        a.h.NUMPADPERIOD = 110;
        a.h.NUMPADMULTIPLY = 106;
        a.h.NUMPADSLASH = 111;
        return a;
      }(this);
      Dg.toStringMap = function (a) {
        a = new wc();
        a.h[-2] = "ANY";
        a.h[65] = "A";
        a.h[66] = "B";
        a.h[67] = "C";
        a.h[68] = "D";
        a.h[69] = "E";
        a.h[70] = "F";
        a.h[71] = "G";
        a.h[72] = "H";
        a.h[73] = "I";
        a.h[74] = "J";
        a.h[75] = "K";
        a.h[76] = "L";
        a.h[77] = "M";
        a.h[78] = "N";
        a.h[79] = "O";
        a.h[80] = "P";
        a.h[81] = "Q";
        a.h[82] = "R";
        a.h[83] = "S";
        a.h[84] = "T";
        a.h[85] = "U";
        a.h[86] = "V";
        a.h[87] = "W";
        a.h[88] = "X";
        a.h[89] = "Y";
        a.h[90] = "Z";
        a.h[48] = "ZERO";
        a.h[49] = "ONE";
        a.h[50] = "TWO";
        a.h[51] = "THREE";
        a.h[52] = "FOUR";
        a.h[53] = "FIVE";
        a.h[54] = "SIX";
        a.h[55] = "SEVEN";
        a.h[56] = "EIGHT";
        a.h[57] = "NINE";
        a.h[33] = "PAGEUP";
        a.h[34] = "PAGEDOWN";
        a.h[36] = "HOME";
        a.h[35] = "END";
        a.h[45] = "INSERT";
        a.h[27] = "ESCAPE";
        a.h[189] = "MINUS";
        a.h[187] = "PLUS";
        a.h[46] = "DELETE";
        a.h[8] = "BACKSPACE";
        a.h[219] = "LBRACKET";
        a.h[221] = "RBRACKET";
        a.h[220] = "BACKSLASH";
        a.h[20] = "CAPSLOCK";
        a.h[145] = "SCROLL_LOCK";
        a.h[144] = "NUMLOCK";
        a.h[186] = "SEMICOLON";
        a.h[222] = "QUOTE";
        a.h[13] = "ENTER";
        a.h[16] = "SHIFT";
        a.h[188] = "COMMA";
        a.h[190] = "PERIOD";
        a.h[191] = "SLASH";
        a.h[192] = "GRAVEACCENT";
        a.h[17] = "CONTROL";
        a.h[18] = "ALT";
        a.h[32] = "SPACE";
        a.h[38] = "UP";
        a.h[40] = "DOWN";
        a.h[37] = "LEFT";
        a.h[39] = "RIGHT";
        a.h[9] = "TAB";
        a.h[15] = "WINDOWS";
        a.h[302] = "MENU";
        a.h[301] = "PRINTSCREEN";
        a.h[19] = "BREAK";
        a.h[112] = "F1";
        a.h[113] = "F2";
        a.h[114] = "F3";
        a.h[115] = "F4";
        a.h[116] = "F5";
        a.h[117] = "F6";
        a.h[118] = "F7";
        a.h[119] = "F8";
        a.h[120] = "F9";
        a.h[121] = "F10";
        a.h[122] = "F11";
        a.h[123] = "F12";
        a.h[96] = "NUMPADZERO";
        a.h[97] = "NUMPADONE";
        a.h[98] = "NUMPADTWO";
        a.h[99] = "NUMPADTHREE";
        a.h[100] = "NUMPADFOUR";
        a.h[101] = "NUMPADFIVE";
        a.h[102] = "NUMPADSIX";
        a.h[103] = "NUMPADSEVEN";
        a.h[104] = "NUMPADEIGHT";
        a.h[105] = "NUMPADNINE";
        a.h[109] = "NUMPADMINUS";
        a.h[107] = "NUMPADPLUS";
        a.h[110] = "NUMPADPERIOD";
        a.h[106] = "NUMPADMULTIPLY";
        a.h[111] = "NUMPADSLASH";
        return a;
      }(this);
      Le.resourceType = "image/png";
      Le.resourceName = "__ASSET__:bitmap_flixel_input_mouse__FlxMouse_GraphicCursor";
      Th.maxTouchPoints = 0;
      Yd._point = function (a) {
        var b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = W.pool.get().set(a, b);
        a._inPool = false;
        return a;
      }(this);
      yf.resourceType = "image/png";
      yf.resourceName = "__ASSET__:bitmap_flixel_system_GraphicLogo";
      zf.resourceType = "image/png";
      zf.resourceName = "__ASSET__:bitmap_flixel_system_GraphicVirtualInput";
      vd.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      vd.defaultObjectEncoding = 10;
      Nd.defaultSoundExtension = "ogg";
      Nd.FONT_DEFAULT = "Nokia Cellphone FC Small";
      Nd.FONT_DEBUGGER = "Monsterrat";
      nd._NUM_CACHED_FLX_LIST = 0;
      mf.resourceType = "image/png";
      mf.resourceName = "__ASSET__:bitmap_flixel_system__FlxPreloader_GraphicLogoLight";
      nf.resourceType = "image/png";
      nf.resourceName = "__ASSET__:bitmap_flixel_system__FlxPreloader_GraphicLogoCorners";
      R._NUM_CACHED_QUAD_TREES = 0;
      ei._tooltips = [];
      Oe.windowAmount = 0;
      xa.NORMAL = new xa();
      xa.WARNING = new xa("[WARNING] ", "D9F85C", 12, false, false, false, "flixel/sounds/beep", true);
      xa.ERROR = new xa("[ERROR] ", "FF8888", 12, false, false, false, "flixel/sounds/beep", true);
      xa.NOTICE = new xa("[NOTICE] ", "5CF878", 12, false);
      Xa.PI2 = Math.PI / 2;
      Xa.ELASTIC_PERIOD = 0.4;
      eb.colorLookup = function (a) {
        a = new ua();
        a.h.TRANSPARENT = 0;
        a.h.WHITE = -1;
        a.h.GRAY = -8355712;
        a.h.BLACK = -16777216;
        a.h.GREEN = -16744448;
        a.h.LIME = -16711936;
        a.h.YELLOW = -256;
        a.h.ORANGE = -23296;
        a.h.RED = -65536;
        a.h.PURPLE = -8388480;
        a.h.BLUE = -16776961;
        a.h.BROWN = -7650029;
        a.h.PINK = -16181;
        a.h.MAGENTA = -65281;
        a.h.CYAN = -16711681;
        return a;
      }(this);
      eb.COLOR_REGEX = new V("^(0x|#)(([A-F0-9]{2}){3,4})$", "i");
      Xf.defaultObjectEncoding = 10;
      Hc.flashGfxSprite = new Ua();
      Hc.flashGfx = Hc.flashGfxSprite.get_graphics();
      Vc._pool = new jh(function () {
        return new Vc();
      });
      Cf.__fullCombineShader = new Ol();
      Cf.__innerCombineShader = new Pl();
      Cf.__combineShader = new Nl();
      Bj.s_arrayOfDeltaIndex = [0, 0.01, 0.02, 0.04, 0.05, 0.06, 0.07, 0.08, 0.1, 0.11, 0.12, 0.14, 0.15, 0.16, 0.17, 0.18, 0.2, 0.21, 0.22, 0.24, 0.25, 0.27, 0.28, 0.3, 0.32, 0.34, 0.36, 0.38, 0.4, 0.42, 0.44, 0.46, 0.48, 0.5, 0.53, 0.56, 0.59, 0.62, 0.65, 0.68, 0.71, 0.74, 0.77, 0.8, 0.83, 0.86, 0.89, 0.92, 0.95, 0.98, 1, 1.06, 1.12, 1.18, 1.24, 1.3, 1.36, 1.42, 1.48, 1.54, 1.6, 1.66, 1.72, 1.78, 1.84, 1.9, 1.96, 2, 2.12, 2.25, 2.37, 2.5, 2.62, 2.75, 2.87, 3, 3.2, 3.4, 3.6, 3.8, 4, 4.3, 4.7, 4.9, 5, 5.5, 6, 6.5, 6.8, 7, 7.3, 7.5, 7.8, 8, 8.4, 8.7, 9, 9.4, 9.6, 9.8, 10];
      Ef.MATRIX_ORDER_APPEND = 1;
      Ee.lumR = 0.3086;
      Ee.lumG = 0.6094;
      Ee.lumB = 0.082;
      me.USE_CACHE = false;
      me.USE_ENUM_INDEX = false;
      me.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
      $d.DEFAULT_RESOLVER = new Rl();
      $d.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
      ki.CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
      ki.BYTES = Yb.ofString(ki.CHARS);
      Ag.escapes = function (a) {
        a = new ua();
        a.h.lt = "<";
        a.h.gt = ">";
        a.h.amp = "&";
        a.h.quot = "\"";
        a.h.apos = "'";
        return a;
      }(this);
      Fd.LEN_EXTRA_BITS_TBL = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, -1, -1];
      Fd.LEN_BASE_VAL_TBL = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258];
      Fd.DIST_EXTRA_BITS_TBL = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, -1, -1];
      Fd.DIST_BASE_VAL_TBL = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577];
      Fd.CODE_LENGTHS_POS = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
      Oa.activeRequests = 0;
      Oa.requestLimit = 17;
      Oa.requestQueue = new jb();
      Za.dummyCharacter = "";
      Za.windowID = 0;
      Yf.DICTIONARY = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");
      Yf.EXTENDED_DICTIONARY = function (a) {
        a = [];
        for (var b = 0, c = Yf.DICTIONARY; b < c.length;) {
          var d = c[b];
          ++b;
          for (var e = 0, f = Yf.DICTIONARY; e < f.length;) {
            var h = f[e];
            ++e;
            a.push(d + h);
          }
        }
        return a;
      }(this);
      qe.MUL_TABLE = [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265, 497, 469, 443, 421, 25, 191, 365, 349, 335, 161, 155, 149, 9, 278, 269, 261, 505, 245, 475, 231, 449, 437, 213, 415, 405, 395, 193, 377, 369, 361, 353, 345, 169, 331, 325, 319, 313, 307, 301, 37, 145, 285, 281, 69, 271, 267, 263, 259, 509, 501, 493, 243, 479, 118, 465, 459, 113, 446, 55, 435, 429, 423, 209, 413, 51, 403, 199, 393, 97, 3, 379, 375, 371, 367, 363, 359, 355, 351, 347, 43, 85, 337, 333, 165, 327, 323, 5, 317, 157, 311, 77, 305, 303, 75, 297, 294, 73, 289, 287, 71, 141, 279, 277, 275, 68, 135, 67, 133, 33, 262, 260, 129, 511, 507, 503, 499, 495, 491, 61, 121, 481, 477, 237, 235, 467, 232, 115, 457, 227, 451, 7, 445, 221, 439, 218, 433, 215, 427, 425, 211, 419, 417, 207, 411, 409, 203, 202, 401, 399, 396, 197, 49, 389, 387, 385, 383, 95, 189, 47, 187, 93, 185, 23, 183, 91, 181, 45, 179, 89, 177, 11, 175, 87, 173, 345, 343, 341, 339, 337, 21, 167, 83, 331, 329, 327, 163, 81, 323, 321, 319, 159, 79, 315, 313, 39, 155, 309, 307, 153, 305, 303, 151, 75, 299, 149, 37, 295, 147, 73, 291, 145, 289, 287, 143, 285, 71, 141, 281, 35, 279, 139, 69, 275, 137, 273, 17, 271, 135, 269, 267, 133, 265, 33, 263, 131, 261, 130, 259, 129, 257, 1];
      qe.SHG_TABLE = [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13, 14, 14, 14, 14, 10, 13, 14, 14, 14, 13, 13, 13, 9, 14, 14, 14, 15, 14, 15, 14, 15, 15, 14, 15, 15, 15, 14, 15, 15, 15, 15, 15, 14, 15, 15, 15, 15, 15, 15, 12, 14, 15, 15, 13, 15, 15, 15, 15, 16, 16, 16, 15, 16, 14, 16, 16, 14, 16, 13, 16, 16, 16, 15, 16, 13, 16, 15, 16, 14, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 13, 14, 16, 16, 15, 16, 16, 10, 16, 15, 16, 14, 16, 16, 14, 16, 16, 14, 16, 16, 14, 15, 16, 16, 16, 14, 15, 14, 15, 13, 16, 16, 15, 17, 17, 17, 17, 17, 17, 14, 15, 17, 17, 16, 16, 17, 16, 15, 17, 16, 17, 11, 17, 16, 17, 16, 17, 16, 17, 17, 16, 17, 17, 16, 17, 17, 16, 16, 17, 17, 17, 16, 14, 17, 17, 17, 17, 15, 16, 14, 16, 15, 16, 13, 16, 15, 16, 14, 16, 15, 16, 12, 16, 15, 16, 17, 17, 17, 17, 17, 13, 16, 15, 17, 17, 17, 16, 15, 17, 17, 17, 16, 15, 17, 17, 14, 16, 17, 17, 16, 17, 17, 16, 15, 17, 16, 14, 17, 16, 15, 17, 16, 17, 17, 16, 17, 15, 16, 17, 14, 17, 16, 15, 17, 16, 17, 13, 17, 16, 17, 17, 16, 17, 14, 17, 16, 17, 16, 17, 16, 17, 9];
      kb.__identity = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
      ic.onUpdate = new Tc();
      ic.__updated = false;
      He.sensorByID = new wc();
      He.sensors = [];
      Qc.devices = new wc();
      Qc.onConnect = new xo();
      Mc.devices = new wc();
      Mc.onConnect = new yo();
      Dc.onCancel = new ti();
      Dc.onEnd = new ti();
      Dc.onMove = new ti();
      Dc.onStart = new ti();
      sa.cache = new Do();
      sa.onChange = new Tc();
      sa.bundlePaths = new ua();
      sa.libraries = new ua();
      sa.libraryPaths = new ua();
      Va.throwErrors = true;
      Gb.Y_PER_ROW = 85;
      rf.allLetters = function (a) {
        a = new ua();
        a.h.a = null;
        a.h.b = null;
        a.h.c = null;
        a.h.d = null;
        a.h.e = null;
        a.h.f = null;
        a.h.g = null;
        a.h.h = null;
        a.h.i = null;
        a.h.j = null;
        a.h.k = null;
        a.h.l = null;
        a.h.m = null;
        a.h.n = null;
        a.h.o = null;
        a.h.p = null;
        a.h.q = null;
        a.h.r = null;
        a.h.s = null;
        a.h.t = null;
        a.h.u = null;
        a.h.v = null;
        a.h.w = null;
        a.h.x = null;
        a.h.y = null;
        a.h.z = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = {
          offsetsBold: [0, -11]
        };
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h["0"] = null;
        a.h["1"] = null;
        a.h["2"] = null;
        a.h["3"] = null;
        a.h["4"] = null;
        a.h["5"] = null;
        a.h["6"] = null;
        a.h["7"] = null;
        a.h["8"] = null;
        a.h["9"] = null;
        a.h["&"] = {
          offsetsBold: [0, 2]
        };
        a.h["("] = {
          offsetsBold: [0, 0]
        };
        a.h[")"] = {
          offsetsBold: [0, 0]
        };
        a.h["["] = null;
        a.h["]"] = {
          offsets: [0, -1]
        };
        a.h["*"] = {
          offsets: [0, 28],
          offsetsBold: [0, 40]
        };
        a.h["+"] = {
          offsets: [0, 7],
          offsetsBold: [0, 12]
        };
        a.h["-"] = {
          offsets: [0, 16],
          offsetsBold: [0, 16]
        };
        a.h["<"] = {
          offsetsBold: [0, -2]
        };
        a.h[">"] = {
          offsetsBold: [0, -2]
        };
        a.h["'"] = {
          anim: "apostrophe",
          offsets: [0, 32],
          offsetsBold: [0, 40]
        };
        a.h["\""] = {
          anim: "quote",
          offsets: [0, 32],
          offsetsBold: [0, 40]
        };
        a.h["!"] = {
          anim: "exclamation"
        };
        a.h["?"] = {
          anim: "question"
        };
        a.h["."] = {
          anim: "period"
        };
        a.h[""] = {
          anim: "start quote",
          offsets: [0, 24],
          offsetsBold: [0, 40]
        };
        a.h[""] = {
          anim: "end quote",
          offsets: [0, 24],
          offsetsBold: [0, 40]
        };
        a.h._ = null;
        a.h["#"] = null;
        a.h.$ = null;
        a.h["%"] = null;
        a.h[":"] = {
          offsets: [0, 2],
          offsetsBold: [0, 8]
        };
        a.h[";"] = {
          offsets: [0, -2],
          offsetsBold: [0, 4]
        };
        a.h["@"] = null;
        a.h["^"] = {
          offsets: [0, 28],
          offsetsBold: [0, 38]
        };
        a.h[","] = {
          anim: "comma",
          offsets: [0, -6],
          offsetsBold: [0, -4]
        };
        a.h["\\"] = {
          anim: "back slash",
          offsets: [0, 0]
        };
        a.h["/"] = {
          anim: "forward slash",
          offsets: [0, 0]
        };
        a.h["|"] = null;
        a.h["~"] = {
          offsets: [0, 16],
          offsetsBold: [0, 20]
        };
        a.h[""] = {
          anim: "inverted exclamation",
          offsets: [0, -20],
          offsetsBold: [0, -20]
        };
        a.h[""] = {
          anim: "inverted question",
          offsets: [0, -20],
          offsetsBold: [0, -20]
        };
        a.h["{"] = null;
        a.h["}"] = null;
        a.h[""] = {
          anim: "bullet",
          offsets: [0, 18],
          offsetsBold: [0, 20]
        };
        return a;
      }(this);
      id.DEFAULT_CHARACTER = "bf";
      re.DEFAULT_CHARACTER = "bf";
      Na.globalRgbShaders = [];
      Na.SUSTAIN_SIZE = 44;
      Na.swagWidth = 112;
      Na.colArray = ["purple", "blue", "green", "red"];
      Na.defaultNoteSkin = "noteSkins/NOTE_assets";
      ec.defaultNoteSplash = "noteSplashes/noteSplashes";
      ec.configs = new ua();
      ec.aliveTime = 0;
      ec.buggedKillTime = 0.5;
      oa.__lastTimerID = 0;
      oa.__timers = new wc();
      vg.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      hm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Rf.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      im.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Lh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      hh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Ji.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      ce.__meta__ = {
        fields: {
          __context: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __type: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      jm.__meta__ = {
        fields: {
          cairo: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __matrix3: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          applyMatrix: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __setBlendModeCairo: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      lg.__meta__ = {
        fields: {
          context: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          applySmoothing: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          setTransform: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __setBlendModeContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      nm.__meta__ = {
        fields: {
          __element: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Oj.__meta__ = {
        fields: {
          element: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      fe.__meta__ = {
        fields: {
          overrideBlendMode: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      Lf.__meta__ = {
        statics: {
          create: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        },
        fields: {
          parameters: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Lf.__rootURL = qg.get_supported() ? window.document.URL : "";
      tb.__meta__ = {
        fields: {
          gl: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __gl: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __matrix: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __projection: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __projectionFlipped: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      tb.__alphaValue = [1];
      tb.__colorMultipliersValue = [0, 0, 0, 0];
      tb.__colorOffsetsValue = [0, 0, 0, 0];
      tb.__emptyColorValue = [0, 0, 0, 0];
      tb.__hasColorTransformValue = [false];
      tb.__scissorRectangle = new da();
      tb.__textureSizeValue = [0, 0];
      hk.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          onComplete: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      wm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      aj.__meta__ = {
        fields: {
          index: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          name: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      kg.__meta__ = {
        fields: {
          index: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          name: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      Ai.__meta__ = {
        fields: {
          __broadcastEvent: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __dispatchEvent: {
            SuppressWarnings: [["checkstyle:Dynamic", "checkstyle:LeftCurly"]]
          },
          __dispatchStack: {
            SuppressWarnings: [["checkstyle:Dynamic", "checkstyle:LeftCurly"]]
          },
          __dispatchTarget: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __handleError: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      zm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Mj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Nj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Ch.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      ee.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          o: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      ee.empty = new ee();
      B.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        statics: {
          windingRule: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          createBitmapFill: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          createGradientPattern: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      B.fillCommands = new ee();
      B.strokeCommands = new ee();
      aa.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      wg.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        statics: {
          renderTileContainer: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Dh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Qe.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Sj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Fh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      oc.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      oc.blankBitmapData = new T(1, 1, false, 0);
      oc.tempColorTransform = new Lb(1, 1, 1, 1, 0, 0, 0, 0);
      Eh.opaqueBitmapData = new T(1, 1, false, 0);
      $f.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      yg.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Y.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Re.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Re.__textureSizeValue = [0, 0];
      uc.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      de.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      ah.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Zg.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      $g.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      xg.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Zf.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Jh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      rm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          overrideIntValues: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Hb.__glDepthStencil = -1;
      Hb.__glMaxTextureMaxAnisotropy = -1;
      Hb.__glMaxViewportDims = -1;
      Hb.__glMemoryCurrentAvailable = -1;
      Hb.__glMemoryTotalAvailable = -1;
      Hb.__glTextureMaxAnisotropy = -1;
      Dm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Vj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Hd.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Hd.limitedProfile = true;
      Bi.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Em.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Ci.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Kh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Tj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Vb.__meta__ = {
        fields: {
          __textureContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __getGLFramebuffer: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Ki.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      gh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      gh.supportsWeakReference = Object.prototype.hasOwnProperty.call(E, "WeakRef");
      Df.__blurShader = new Im();
      Zj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Tg.__colorMatrixShader = new Zj();
      Ed.__invertAlphaShader = new Om();
      Ed.__blurAlphaShader = new Jm();
      Ed.__combineShader = new Lm();
      Ed.__innerCombineShader = new Nm();
      Ed.__combineKnockoutShader = new Km();
      Ed.__innerCombineKnockoutShader = new Mm();
      mg.__meta__ = {
        fields: {
          clone: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      se.__soundChannels = [];
      se.__soundTransform = new mg();
      bh.followRedirects = true;
      bh.idleTimeout = 0;
      bh.manageCookies = true;
      mc.currentX = 0;
      mc.currentY = 1;
      mc.currentZ = 0;
      mc.defaultInterval = 34;
      mc.initialized = false;
      mc.supported = false;
      xi.currentDomain = new xi(null);
      ld.__meta__ = {
        fields: {
          clone: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      ak.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Wa.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Wa.__regexAlign = new V("align\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexBreakTag = new V("<br\\s*/?>", "gi");
      Wa.__regexBlockIndent = new V("blockindent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexClass = new V("class\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexColor = new V("color\\s?=\\s?(\"#([^\"]+)\"|'#([^']+)')", "i");
      Wa.__regexEntities = [new V("&quot;", "g"), new V("&apos;", "g"), new V("&amp;", "g"), new V("&lt;", "g"), new V("&gt;", "g"), new V("&nbsp;", "g")];
      Wa.__regexCharEntity = new V("&#(?:([0-9]+)|(x[0-9a-fA-F]+));", "g");
      Wa.__regexFace = new V("face\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexHTMLTag = new V("<.*?>", "g");
      Wa.__regexHref = new V("href\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexIndent = new V(" indent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexLeading = new V("leading\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexLeftMargin = new V("leftmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexRightMargin = new V("rightmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexSize = new V("size\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Wa.__regexTabStops = new V("tabstops\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Gi.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      fc.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Qm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      fd.__cursor = "auto";
      ta.__meta__ = {
        obj: {
          SuppressWarnings: [["checkstyle:ConstantName", "checkstyle:FieldDocComment"]]
        }
      };
      ta.OPMAP = new ua();
      ta.REGMAP = new ua();
      ta.SAMPLEMAP = new ua();
      ta.initialized = false;
      Eb.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Ge.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      vc.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Q.cache = new Sm();
      Q.dispatcher = new pa();
      lf.__meta__ = {
        statics: {
          __get: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      Tm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Um.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      yd.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Ih.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          touch: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Ih.__pool = new bb(function () {
        return new Ih();
      }, function (a) {
        a.reset();
      });
      ch.defaultKey = "Reset to Default Keys";
      jd.curSelected = 0;
      jd.onPlayState = false;
      Uc.$name = "unnamed";
      Fb.Function_Stop = "##PSYCHLUA_FUNCTIONSTOP";
      Fb.Function_Continue = "##PSYCHLUA_FUNCTIONCONTINUE";
      Fb.Function_StopHScript = "##PSYCHLUA_FUNCTIONSTOPHSCRIPT";
      Fb.Function_StopAll = "##PSYCHLUA_FUNCTIONSTOPALL";
      dh.leftState = false;
      Ta.curSelected = 0;
      Ta.lastDifficultyName = nb.defaultDifficulty;
      qc.MIN_TIME = 1;
      Ac.psychEngineVersion = "0.7.3";
      Ac.curSelected = 0;
      A.STRUM_X = 42;
      A.STRUM_X_MIDDLESCROLL = -278;
      A.ratingStuff = [["You Suck!", 0.2], ["Shit", 0.4], ["Bad", 0.5], ["Bruh", 0.6], ["Meh", 0.69], ["Nice", 0.7], ["Good", 0.8], ["Great", 0.9], ["Sick!", 1], ["Perfect!!", 1]];
      A.curStage = "";
      A.stageUI = "normal";
      A.isStoryMode = false;
      A.storyWeek = 0;
      A.storyPlaylist = [];
      A.storyDifficulty = 1;
      A.changedDifficulty = false;
      A.chartingMode = false;
      A.campaignScore = 0;
      A.campaignMisses = 0;
      A.seenCutscene = false;
      A.deathCounter = 0;
      A.daPixelZoom = 6;
      A.startOnTime = 0;
      Jb.weekCompleted = new ua();
      Jb.lastDifficultyName = "";
      Jb.curWeek = 0;
      yc.muteKeys = [48];
      yc.volumeDownKeys = [109, 189];
      yc.volumeUpKeys = [107, 187];
      yc.initialized = false;
      yc.updateVersion = "";
      yc.playJingle = false;
      yc.closedState = false;
      fa.noteTypeList = ";Alt Animation;Hey!;Hurt Note;GF Sing;No Animation".split(";");
      fa.goToPlayState = false;
      fa.curSec = 0;
      fa.lastSection = 0;
      fa.lastSong = "";
      fa.GRID_SIZE = 40;
      fa.quantization = 16;
      fa.curQuant = 3;
      fa.vortex = false;
      Of.TIP_TEXT_MAIN = "JKLI - Move camera (Hold Shift to move 4x faster)\n\t\nQ/E - Zoom out/in\n\t\nR - Reset Camera\n\t\nH - Toggle Speech Bubble\n\t\nSpace - Reset text";
      Of.TIP_TEXT_OFFSET = "JKLI - Move camera (Hold Shift to move 4x faster)\n\t\nQ/E - Zoom out/in\n\t\nR - Reset Camera\n\t\nH - Toggle Ghosts\n\t\nWASD - Move Looping animation offset (Red)\n\t\nArrow Keys - Move Idle/Finished animation offset (Blue)\n\t\nHold Shift to move offsets 10x faster";
      Of.DEFAULT_TEXT = "Lorem ipsum dolor sit amet";
      Pf.DEFAULT_TEXT = "coolswag";
      Pf.DEFAULT_SPEED = 0.05;
      Pf.DEFAULT_BUBBLETYPE = "normal";
      eh.defaultTexture = "noteSplashes";
      Ia.weekFileName = "week1";
      Ia.loadError = false;
      Ij.animationNotes = [];
      Lc.characterName = "bf-dead";
      Lc.deathSoundName = "fnf_loss_sfx";
      Lc.loopSoundName = "gameOver";
      Lc.endSoundName = "gameOverEnd";
      Ph.OBJECT_REFERENCE_PREFIX = "@~obRef#";
      I.main();
    })(typeof x != "undefined" ? x : typeof window != "undefined" ? window : typeof self != "undefined" ? self : this, typeof window != "undefined" ? window : typeof I != "undefined" ? I : typeof self != "undefined" ? self : this);
  };
  na.lime.embed = function (E) {
    var I = {};
    var M = na.lime.$scripts[E];
    if (!M) {
      throw Error("Cannot find project name \"" + E + "\"");
    }
    M(I, x);
    for (var X in I) {
      na[X] = na[X] || I[X];
    }
    if ((M = I.lime || window.lime) && M.embed && this != M.embed) {
      M.embed.apply(M, arguments);
    }
    return I;
  };
  if (typeof define == "function" && define.amd) {
    define([], function () {
      return na.lime;
    });
    define.__amd = define.amd;
    define.amd = null;
  }
})(typeof exports != "undefined" ? exports : typeof define == "function" && define.amd ? {} : typeof window != "undefined" ? window : typeof self != "undefined" ? self : this, typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
(function () {
  function na() {
    this.init();
  }
  na.prototype = {
    init: function () {
      var g = this || x;
      g._counter = 1000;
      g._html5AudioPool = [];
      g.html5PoolSize = 10;
      g._codecs = {};
      g._howls = [];
      g._muted = false;
      g._volume = 1;
      g._canPlayEvent = "canplaythrough";
      g._navigator = typeof window != "undefined" && window.navigator ? window.navigator : null;
      g.masterGain = null;
      g.noAudio = false;
      g.usingWebAudio = true;
      g.autoSuspend = true;
      g.ctx = null;
      g.autoUnlock = true;
      g._setup();
      return g;
    },
    volume: function (p) {
      var m = this || x;
      p = parseFloat(p);
      if (!m.ctx) {
        g();
      }
      if (p !== undefined && p >= 0 && p <= 1) {
        m._volume = p;
        if (m._muted) {
          return m;
        }
        if (m.usingWebAudio) {
          m.masterGain.gain.setValueAtTime(p, x.ctx.currentTime);
        }
        for (var q = 0; q < m._howls.length; q++) {
          if (!m._howls[q]._webAudio) {
            for (var H = m._howls[q]._getSoundIds(), ha = 0; ha < H.length; ha++) {
              var N = m._howls[q]._soundById(H[ha]);
              if (N && N._node) {
                N._node.volume = N._volume * p;
              }
            }
          }
        }
        return m;
      }
      return m._volume;
    },
    mute: function (p) {
      var m = this || x;
      if (!m.ctx) {
        g();
      }
      m._muted = p;
      if (m.usingWebAudio) {
        m.masterGain.gain.setValueAtTime(p ? 0 : m._volume, x.ctx.currentTime);
      }
      for (var q = 0; q < m._howls.length; q++) {
        if (!m._howls[q]._webAudio) {
          for (var H = m._howls[q]._getSoundIds(), ha = 0; ha < H.length; ha++) {
            var N = m._howls[q]._soundById(H[ha]);
            if (N && N._node) {
              N._node.muted = !!p || N._muted;
            }
          }
        }
      }
      return m;
    },
    stop: function () {
      for (var g = this || x, m = 0; m < g._howls.length; m++) {
        g._howls[m].stop();
      }
      return g;
    },
    unload: function () {
      var p = this || x;
      for (var m = p._howls.length - 1; m >= 0; m--) {
        p._howls[m].unload();
      }
      if (p.usingWebAudio && p.ctx && p.ctx.close !== undefined) {
        p.ctx.close();
        p.ctx = null;
        g();
      }
      return p;
    },
    codecs: function (g) {
      return (this || x)._codecs[g.replace(/^x-/, "")];
    },
    _setup: function () {
      var g = this || x;
      g.state = g.ctx ? g.ctx.state || "suspended" : "suspended";
      g._autoSuspend();
      if (!g.usingWebAudio) {
        if (typeof Audio != "undefined") {
          try {
            var m = new Audio();
            if (m.oncanplaythrough === undefined) {
              g._canPlayEvent = "canplay";
            }
          } catch (u) {
            g.noAudio = true;
          }
        } else {
          g.noAudio = true;
        }
      }
      try {
        m = new Audio();
        if (m.muted) {
          g.noAudio = true;
        }
      } catch (u) {}
      if (!g.noAudio) {
        g._setupCodecs();
      }
      return g;
    },
    _setupCodecs: function () {
      var g = this || x;
      var m = null;
      try {
        m = typeof Audio != "undefined" ? new Audio() : null;
      } catch (ia) {
        return g;
      }
      if (!m || typeof m.canPlayType != "function") {
        return g;
      }
      var q = m.canPlayType("audio/mpeg;").replace(/^no$/, "");
      var H = g._navigator ? g._navigator.userAgent : "";
      var ha = H.match(/OPR\/(\d+)/g);
      ha = ha && parseInt(ha[0].split("/")[1], 10) < 33;
      var N = H.indexOf("Safari") !== -1 && H.indexOf("Chrome") === -1;
      H = H.match(/Version\/(.*?) /);
      H = N && H && parseInt(H[1], 10) < 15;
      g._codecs = {
        mp3: !ha && (!!q || !!m.canPlayType("audio/mp3;").replace(/^no$/, "")),
        mpeg: !!q,
        opus: !!m.canPlayType("audio/ogg; codecs=\"opus\"").replace(/^no$/, ""),
        ogg: !!m.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/, ""),
        oga: !!m.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/, ""),
        wav: !!(m.canPlayType("audio/wav; codecs=\"1\"") || m.canPlayType("audio/wav")).replace(/^no$/, ""),
        aac: !!m.canPlayType("audio/aac;").replace(/^no$/, ""),
        caf: !!m.canPlayType("audio/x-caf;").replace(/^no$/, ""),
        m4a: !!(m.canPlayType("audio/x-m4a;") || m.canPlayType("audio/m4a;") || m.canPlayType("audio/aac;")).replace(/^no$/, ""),
        m4b: !!(m.canPlayType("audio/x-m4b;") || m.canPlayType("audio/m4b;") || m.canPlayType("audio/aac;")).replace(/^no$/, ""),
        mp4: !!(m.canPlayType("audio/x-mp4;") || m.canPlayType("audio/mp4;") || m.canPlayType("audio/aac;")).replace(/^no$/, ""),
        weba: !H && !!m.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/, ""),
        webm: !H && !!m.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/, ""),
        dolby: !!m.canPlayType("audio/mp4; codecs=\"ec-3\"").replace(/^no$/, ""),
        flac: !!(m.canPlayType("audio/x-flac;") || m.canPlayType("audio/flac;")).replace(/^no$/, "")
      };
      return g;
    },
    _unlockAudio: function () {
      var g = this || x;
      if (!g._audioUnlocked && g.ctx) {
        g._audioUnlocked = false;
        g.autoUnlock = false;
        if (!g._mobileUnloaded && g.ctx.sampleRate !== 44100) {
          g._mobileUnloaded = true;
          g.unload();
        }
        g._scratchBuffer = g.ctx.createBuffer(1, 1, 22050);
        function m(p) {
          while (g._html5AudioPool.length < g.html5PoolSize) {
            try {
              var q = new Audio();
              q._unlocked = true;
              g._releaseHtml5Audio(q);
            } catch (ue) {
              g.noAudio = true;
              break;
            }
          }
          for (p = 0; p < g._howls.length; p++) {
            if (!g._howls[p]._webAudio) {
              q = g._howls[p]._getSoundIds();
              for (var u = 0; u < q.length; u++) {
                var z = g._howls[p]._soundById(q[u]);
                if (z && z._node && !z._node._unlocked) {
                  z._node._unlocked = true;
                  z._node.load();
                }
              }
            }
          }
          g._autoResume();
          var x = g.ctx.createBufferSource();
          x.buffer = g._scratchBuffer;
          x.connect(g.ctx.destination);
          if (x.start === undefined) {
            x.noteOn(0);
          } else {
            x.start(0);
          }
          if (typeof g.ctx.resume == "function") {
            g.ctx.resume();
          }
          x.onended = function () {
            x.disconnect(0);
            g._audioUnlocked = true;
            document.removeEventListener("touchstart", m, true);
            document.removeEventListener("touchend", m, true);
            document.removeEventListener("click", m, true);
            document.removeEventListener("keydown", m, true);
            for (var p = 0; p < g._howls.length; p++) {
              g._howls[p]._emit("unlock");
            }
          };
        }
        document.addEventListener("touchstart", m, true);
        document.addEventListener("touchend", m, true);
        document.addEventListener("click", m, true);
        document.addEventListener("keydown", m, true);
        return g;
      }
    },
    _obtainHtml5Audio: function () {
      var g = this || x;
      if (g._html5AudioPool.length) {
        return g._html5AudioPool.pop();
      }
      g = new Audio().play();
      if (g && typeof Promise != "undefined" && (g instanceof Promise || typeof g.then == "function")) {
        g.catch(function () {
          console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.");
        });
      }
      return new Audio();
    },
    _releaseHtml5Audio: function (g) {
      var p = this || x;
      if (g._unlocked) {
        p._html5AudioPool.push(g);
      }
      return p;
    },
    _autoSuspend: function () {
      var g = this;
      if (g.autoSuspend && g.ctx && g.ctx.suspend !== undefined && x.usingWebAudio) {
        for (var m = 0; m < g._howls.length; m++) {
          if (g._howls[m]._webAudio) {
            for (var q = 0; q < g._howls[m]._sounds.length; q++) {
              if (!g._howls[m]._sounds[q]._paused) {
                return g;
              }
            }
          }
        }
        if (g._suspendTimer) {
          clearTimeout(g._suspendTimer);
        }
        g._suspendTimer = setTimeout(function () {
          if (g.autoSuspend) {
            g._suspendTimer = null;
            g.state = "suspending";
            function p() {
              g.state = "suspended";
              if (g._resumeAfterSuspend) {
                delete g._resumeAfterSuspend;
                g._autoResume();
              }
            }
            g.ctx.suspend().then(p, p);
          }
        }, 30000);
        return g;
      }
    },
    _autoResume: function () {
      var g = this;
      if (g.ctx && g.ctx.resume !== undefined && x.usingWebAudio) {
        if (g.state === "running" && g.ctx.state !== "interrupted" && g._suspendTimer) {
          clearTimeout(g._suspendTimer);
          g._suspendTimer = null;
        } else if (g.state === "suspended" || g.state === "running" && g.ctx.state === "interrupted") {
          g.ctx.resume().then(function () {
            g.state = "running";
            for (var p = 0; p < g._howls.length; p++) {
              g._howls[p]._emit("resume");
            }
          });
          if (g._suspendTimer) {
            clearTimeout(g._suspendTimer);
            g._suspendTimer = null;
          }
        } else if (g.state === "suspending") {
          g._resumeAfterSuspend = true;
        }
        return g;
      }
    }
  };
  var x = new na();
  function E(g) {
    if (!g.src || g.src.length === 0) {
      console.error("An array of source files must be passed with any new Howl.");
      return;
    }
    this.init(g);
  }
  E.prototype = {
    init: function (p) {
      var m = this;
      if (!x.ctx) {
        g();
      }
      m._autoplay = p.autoplay || false;
      m._format = typeof p.format != "string" ? p.format : [p.format];
      m._html5 = p.html5 || false;
      m._muted = p.mute || false;
      m._loop = p.loop || false;
      m._pool = p.pool || 5;
      m._preload = typeof p.preload != "boolean" && p.preload !== "metadata" || p.preload;
      m._rate = p.rate || 1;
      m._sprite = p.sprite || {};
      m._src = typeof p.src != "string" ? p.src : [p.src];
      m._volume = p.volume !== undefined ? p.volume : 1;
      m._xhr = {
        method: p.xhr && p.xhr.method ? p.xhr.method : "GET",
        headers: p.xhr && p.xhr.headers ? p.xhr.headers : null,
        withCredentials: !!p.xhr && !!p.xhr.withCredentials && p.xhr.withCredentials
      };
      m._duration = 0;
      m._state = "unloaded";
      m._sounds = [];
      m._endTimers = {};
      m._queue = [];
      m._playLock = false;
      m._onend = p.onend ? [{
        fn: p.onend
      }] : [];
      m._onfade = p.onfade ? [{
        fn: p.onfade
      }] : [];
      m._onload = p.onload ? [{
        fn: p.onload
      }] : [];
      m._onloaderror = p.onloaderror ? [{
        fn: p.onloaderror
      }] : [];
      m._onplayerror = p.onplayerror ? [{
        fn: p.onplayerror
      }] : [];
      m._onpause = p.onpause ? [{
        fn: p.onpause
      }] : [];
      m._onplay = p.onplay ? [{
        fn: p.onplay
      }] : [];
      m._onstop = p.onstop ? [{
        fn: p.onstop
      }] : [];
      m._onmute = p.onmute ? [{
        fn: p.onmute
      }] : [];
      m._onvolume = p.onvolume ? [{
        fn: p.onvolume
      }] : [];
      m._onrate = p.onrate ? [{
        fn: p.onrate
      }] : [];
      m._onseek = p.onseek ? [{
        fn: p.onseek
      }] : [];
      m._onunlock = p.onunlock ? [{
        fn: p.onunlock
      }] : [];
      m._onresume = [];
      m._webAudio = x.usingWebAudio && !m._html5;
      if (x.ctx !== undefined && x.ctx && x.autoUnlock) {
        x._unlockAudio();
      }
      x._howls.push(m);
      if (m._autoplay) {
        m._queue.push({
          event: "play",
          action: function () {
            m.play();
          }
        });
      }
      if (m._preload && m._preload !== "none") {
        m.load();
      }
      return m;
    },
    load: function () {
      var g = null;
      if (x.noAudio) {
        this._emit("loaderror", null, "No audio support.");
        return;
      }
      if (typeof this._src == "string") {
        this._src = [this._src];
      }
      for (var m = 0; m < this._src.length; m++) {
        var q;
        if (this._format && this._format[m]) {
          var H = this._format[m];
        } else {
          if (typeof (q = this._src[m]) != "string") {
            this._emit("loaderror", null, "Non-string found in selected audio sources - ignoring.");
            continue;
          }
          if (!(H = /^data:audio\/([^;,]+);/i.exec(q))) {
            H = /\.([^.]+)$/.exec(q.split("?", 1)[0]);
          }
          H &&= H[1].toLowerCase();
        }
        if (!H) {
          console.warn("No file extension was found. Consider using the \"format\" property or specify an extension.");
        }
        if (H && x.codecs(H)) {
          g = this._src[m];
          break;
        }
      }
      if (g) {
        this._src = g;
        this._state = "loading";
        if (window.location.protocol === "https:" && g.slice(0, 5) === "http:") {
          this._html5 = true;
          this._webAudio = false;
        }
        new I(this);
        if (this._webAudio) {
          X(this);
        }
        return this;
      } else {
        this._emit("loaderror", null, "No codec support for selected audio sources.");
        return;
      }
    },
    play: function (g, m) {
      var p = this;
      var q = null;
      if (typeof g == "number") {
        q = g;
        g = null;
      } else {
        if (typeof g == "string" && p._state === "loaded" && !p._sprite[g]) {
          return null;
        }
        if (g === undefined && (g = "__default", !p._playLock)) {
          var z = 0;
          for (var N = 0; N < p._sounds.length; N++) {
            if (p._sounds[N]._paused && !p._sounds[N]._ended) {
              z++;
              q = p._sounds[N]._id;
            }
          }
          if (z === 1) {
            g = null;
          } else {
            q = null;
          }
        }
      }
      var ia = q ? p._soundById(q) : p._inactiveSound();
      if (!ia) {
        return null;
      }
      if (q && !g) {
        g = ia._sprite || "__default";
      }
      if (p._state !== "loaded") {
        ia._sprite = g;
        ia._ended = false;
        var E = ia._id;
        p._queue.push({
          event: "play",
          action: function () {
            p.play(E);
          }
        });
        return E;
      }
      if (q && !ia._paused) {
        if (!m) {
          p._loadQueue("play");
        }
        return ia._id;
      }
      if (p._webAudio) {
        x._autoResume();
      }
      var M = Math.max(0, ia._seek > 0 ? ia._seek : p._sprite[g][0] / 1000);
      var I = Math.max(0, (p._sprite[g][0] + p._sprite[g][1]) / 1000 - M);
      var X = I * 1000 / Math.abs(ia._rate);
      var Ba = p._sprite[g][0] / 1000;
      var na = (p._sprite[g][0] + p._sprite[g][1]) / 1000;
      ia._sprite = g;
      ia._ended = false;
      function gc() {
        ia._paused = false;
        ia._seek = M;
        ia._start = Ba;
        ia._stop = na;
        ia._loop = !!ia._loop || !!p._sprite[g][2];
      }
      if (M >= na) {
        p._ended(ia);
        return;
      }
      var la = ia._node;
      if (p._webAudio) {
        q = function () {
          p._playLock = false;
          gc();
          p._refreshBuffer(ia);
          la.gain.setValueAtTime(ia._muted || p._muted ? 0 : ia._volume, x.ctx.currentTime);
          ia._playStart = x.ctx.currentTime;
          if (la.bufferSource.start === undefined) {
            if (ia._loop) {
              la.bufferSource.noteGrainOn(0, M, 86400);
            } else {
              la.bufferSource.noteGrainOn(0, M, I);
            }
          } else if (ia._loop) {
            la.bufferSource.start(0, M, 86400);
          } else {
            la.bufferSource.start(0, M, I);
          }
          if (X !== Infinity) {
            p._endTimers[ia._id] = setTimeout(p._ended.bind(p, ia), X);
          }
          if (!m) {
            setTimeout(function () {
              p._emit("play", ia._id);
              p._loadQueue();
            }, 0);
          }
        };
        if (x.state === "running" && x.ctx.state !== "interrupted") {
          q();
        } else {
          p._playLock = true;
          p.once("resume", q);
          p._clearTimer(ia._id);
        }
      } else {
        function jb() {
          la.currentTime = M;
          la.muted = ia._muted || p._muted || x._muted || la.muted;
          la.volume = ia._volume * x.volume();
          la.playbackRate = ia._rate;
          try {
            var q = la.play();
            if (q && typeof Promise != "undefined" && (q instanceof Promise || typeof q.then == "function")) {
              p._playLock = true;
              gc();
              q.then(function () {
                p._playLock = false;
                la._unlocked = true;
                if (m) {
                  p._loadQueue();
                } else {
                  p._emit("play", ia._id);
                }
              }).catch(function () {
                p._playLock = false;
                p._emit("playerror", ia._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                ia._ended = true;
                ia._paused = true;
              });
            } else if (!m) {
              p._playLock = false;
              gc();
              p._emit("play", ia._id);
            }
            la.playbackRate = ia._rate;
            if (la.paused) {
              p._emit("playerror", ia._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
              return;
            }
            if (g !== "__default" || ia._loop) {
              p._endTimers[ia._id] = setTimeout(p._ended.bind(p, ia), X);
            } else {
              p._endTimers[ia._id] = function () {
                p._ended(ia);
                la.removeEventListener("ended", p._endTimers[ia._id], false);
              };
              la.addEventListener("ended", p._endTimers[ia._id], false);
            }
          } catch (gb) {
            p._emit("playerror", ia._id, gb);
          }
        }
        if (la.src === "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA") {
          la.src = p._src;
          la.load();
        }
        q = window && window.ejecta || !la.readyState && x._navigator.isCocoonJS;
        if (la.readyState >= 3 || q) {
          jb();
        } else {
          p._playLock = true;
          p._state = "loading";
          function wa() {
            p._state = "loaded";
            jb();
            la.removeEventListener(x._canPlayEvent, wa, false);
          }
          la.addEventListener(x._canPlayEvent, wa, false);
          p._clearTimer(ia._id);
        }
      }
      return ia._id;
    },
    pause: function (g, m) {
      var p = this;
      if (p._state !== "loaded" || p._playLock) {
        p._queue.push({
          event: "pause",
          action: function () {
            p.pause(g);
          }
        });
        return p;
      }
      for (var q = p._getSoundIds(g), z = 0; z < q.length; z++) {
        p._clearTimer(q[z]);
        var x = p._soundById(q[z]);
        if (x && !x._paused && (x._seek = p.seek(q[z]), x._rateSeek = 0, x._paused = true, p._stopFade(q[z]), x._node)) {
          if (p._webAudio) {
            if (!x._node.bufferSource) {
              continue;
            }
            if (x._node.bufferSource.stop === undefined) {
              x._node.bufferSource.noteOff(0);
            } else {
              x._node.bufferSource.stop(0);
            }
            p._cleanBuffer(x._node);
          } else if (!isNaN(x._node.duration) || x._node.duration === Infinity) {
            x._node.pause();
          }
        }
        if (!m) {
          p._emit("pause", x ? x._id : null);
        }
      }
      return p;
    },
    stop: function (g, m) {
      var p = this;
      if (p._state !== "loaded" || p._playLock) {
        p._queue.push({
          event: "stop",
          action: function () {
            p.stop(g);
          }
        });
        return p;
      }
      for (var q = p._getSoundIds(g), z = 0; z < q.length; z++) {
        p._clearTimer(q[z]);
        var x = p._soundById(q[z]);
        if (x) {
          x._seek = x._start || 0;
          x._rateSeek = 0;
          x._paused = true;
          x._ended = true;
          p._stopFade(q[z]);
          if (x._node) {
            if (p._webAudio) {
              if (x._node.bufferSource) {
                if (x._node.bufferSource.stop === undefined) {
                  x._node.bufferSource.noteOff(0);
                } else {
                  x._node.bufferSource.stop(0);
                }
                p._cleanBuffer(x._node);
              }
            } else if (!isNaN(x._node.duration) || x._node.duration === Infinity) {
              x._node.currentTime = x._start || 0;
              x._node.pause();
              if (x._node.duration === Infinity) {
                p._clearSound(x._node);
              }
            }
          }
          if (!m) {
            p._emit("stop", x._id);
          }
        }
      }
      return p;
    },
    mute: function (g, m) {
      var p = this;
      if (p._state !== "loaded" || p._playLock) {
        p._queue.push({
          event: "mute",
          action: function () {
            p.mute(g, m);
          }
        });
        return p;
      }
      if (m === undefined) {
        if (typeof g != "boolean") {
          return p._muted;
        }
        p._muted = g;
      }
      for (var q = p._getSoundIds(m), z = 0; z < q.length; z++) {
        var N = p._soundById(q[z]);
        if (N) {
          N._muted = g;
          if (N._interval) {
            p._stopFade(N._id);
          }
          if (p._webAudio && N._node) {
            N._node.gain.setValueAtTime(g ? 0 : N._volume, x.ctx.currentTime);
          } else if (N._node) {
            N._node.muted = !!x._muted || g;
          }
          p._emit("mute", N._id);
        }
      }
      return p;
    },
    volume: function () {
      var g;
      var m;
      var q = this;
      var H = arguments;
      if (H.length === 0) {
        return q._volume;
      }
      if (H.length === 1 || H.length === 2 && H[1] === undefined) {
        if (q._getSoundIds().indexOf(H[0]) >= 0) {
          m = parseInt(H[0], 10);
        } else {
          g = parseFloat(H[0]);
        }
      } else if (H.length >= 2) {
        g = parseFloat(H[0]);
        m = parseInt(H[1], 10);
      }
      var ha;
      if (g === undefined || !(g >= 0) || !(g <= 1)) {
        ha = m ? q._soundById(m) : q._sounds[0];
        if (ha) {
          return ha._volume;
        } else {
          return 0;
        }
      }
      if (q._state !== "loaded" || q._playLock) {
        q._queue.push({
          event: "volume",
          action: function () {
            q.volume.apply(q, H);
          }
        });
        return q;
      }
      if (m === undefined) {
        q._volume = g;
      }
      m = q._getSoundIds(m);
      for (var N = 0; N < m.length; N++) {
        if (ha = q._soundById(m[N])) {
          ha._volume = g;
          if (!H[2]) {
            q._stopFade(m[N]);
          }
          if (q._webAudio && ha._node && !ha._muted) {
            ha._node.gain.setValueAtTime(g, x.ctx.currentTime);
          } else if (ha._node && !ha._muted) {
            ha._node.volume = g * x.volume();
          }
          q._emit("volume", ha._id);
        }
      }
      return q;
    },
    fade: function (g, m, q, H) {
      var p = this;
      if (p._state !== "loaded" || p._playLock) {
        p._queue.push({
          event: "fade",
          action: function () {
            p.fade(g, m, q, H);
          }
        });
        return p;
      }
      g = Math.min(Math.max(0, parseFloat(g)), 1);
      m = Math.min(Math.max(0, parseFloat(m)), 1);
      q = parseFloat(q);
      p.volume(g, H);
      for (var u = p._getSoundIds(H), z = 0; z < u.length; z++) {
        var E = p._soundById(u[z]);
        if (E) {
          if (!H) {
            p._stopFade(u[z]);
          }
          if (p._webAudio && !E._muted) {
            var M = x.ctx.currentTime;
            var I = M + q / 1000;
            E._volume = g;
            E._node.gain.setValueAtTime(g, M);
            E._node.gain.linearRampToValueAtTime(m, I);
          }
          p._startFadeInterval(E, g, m, q, u[z], H === undefined);
        }
      }
      return p;
    },
    _startFadeInterval: function (g, m, q, x, ha, N) {
      var p = this;
      var u = m;
      var z = q - m;
      ha = Math.abs(z / 0.01);
      ha = Math.max(4, ha > 0 ? x / ha : x);
      var H = Date.now();
      g._fadeTo = q;
      g._interval = setInterval(function () {
        var ha = (Date.now() - H) / x;
        H = Date.now();
        u += z * ha;
        u = Math.round(u * 100) / 100;
        u = z < 0 ? Math.max(q, u) : Math.min(q, u);
        if (p._webAudio) {
          g._volume = u;
        } else {
          p.volume(u, g._id, true);
        }
        if (N) {
          p._volume = u;
        }
        if (q < m && u <= q || q > m && u >= q) {
          clearInterval(g._interval);
          g._interval = null;
          g._fadeTo = null;
          p.volume(q, g._id);
          p._emit("fade", g._id);
        }
      }, ha);
    },
    _stopFade: function (g) {
      var p = this._soundById(g);
      if (p && p._interval) {
        if (this._webAudio) {
          p._node.gain.cancelScheduledValues(x.ctx.currentTime);
        }
        clearInterval(p._interval);
        p._interval = null;
        this.volume(p._fadeTo, g);
        p._fadeTo = null;
        this._emit("fade", g);
      }
      return this;
    },
    loop: function () {
      var g;
      var m;
      var q;
      var x = arguments;
      if (x.length === 0) {
        return this._loop;
      }
      if (x.length === 1) {
        if (typeof x[0] != "boolean") {
          return !!(q = this._soundById(parseInt(x[0], 10))) && q._loop;
        }
        this._loop = g = x[0];
      } else if (x.length === 2) {
        g = x[0];
        m = parseInt(x[1], 10);
      }
      m = this._getSoundIds(m);
      for (x = 0; x < m.length; x++) {
        if (q = this._soundById(m[x])) {
          q._loop = g;
          if (this._webAudio && q._node && q._node.bufferSource) {
            q._node.bufferSource.loop = g;
            if (g) {
              q._node.bufferSource.loopStart = q._start || 0;
              q._node.bufferSource.loopEnd = q._stop;
              if (this.playing(m[x])) {
                this.pause(m[x], true);
                this.play(m[x], true);
              }
            }
          }
        }
      }
      return this;
    },
    rate: function () {
      var g;
      var m;
      var q = this;
      var H = arguments;
      if (H.length === 0) {
        m = q._sounds[0]._id;
      } else if (H.length === 1) {
        if (q._getSoundIds().indexOf(H[0]) >= 0) {
          m = parseInt(H[0], 10);
        } else {
          g = parseFloat(H[0]);
        }
      } else if (H.length === 2) {
        g = parseFloat(H[0]);
        m = parseInt(H[1], 10);
      }
      var ha;
      if (typeof g != "number") {
        ha = q._soundById(m);
        if (ha) {
          return ha._rate;
        } else {
          return q._rate;
        }
      }
      if (q._state !== "loaded" || q._playLock) {
        q._queue.push({
          event: "rate",
          action: function () {
            q.rate.apply(q, H);
          }
        });
        return q;
      }
      if (m === undefined) {
        q._rate = g;
      }
      m = q._getSoundIds(m);
      for (var N = 0; N < m.length; N++) {
        if (ha = q._soundById(m[N])) {
          if (q.playing(m[N])) {
            ha._rateSeek = q.seek(m[N]);
            ha._playStart = q._webAudio ? x.ctx.currentTime : ha._playStart;
          }
          ha._rate = g;
          if (q._webAudio && ha._node && ha._node.bufferSource) {
            ha._node.bufferSource.playbackRate.setValueAtTime(g, x.ctx.currentTime);
          } else if (ha._node) {
            ha._node.playbackRate = g;
          }
          var E = q.seek(m[N]);
          E = ((q._sprite[ha._sprite][0] + q._sprite[ha._sprite][1]) / 1000 - E) * 1000 / Math.abs(ha._rate);
          if (!!q._endTimers[m[N]] || !ha._paused) {
            q._clearTimer(m[N]);
            q._endTimers[m[N]] = setTimeout(q._ended.bind(q, ha), E);
          }
          q._emit("rate", ha._id);
        }
      }
      return q;
    },
    seek: function () {
      var g;
      var m;
      var q = this;
      var H = arguments;
      if (H.length === 0) {
        if (q._sounds.length) {
          m = q._sounds[0]._id;
        }
      } else if (H.length === 1) {
        if (q._getSoundIds().indexOf(H[0]) >= 0) {
          m = parseInt(H[0], 10);
        } else if (q._sounds.length) {
          m = q._sounds[0]._id;
          g = parseFloat(H[0]);
        }
      } else if (H.length === 2) {
        g = parseFloat(H[0]);
        m = parseInt(H[1], 10);
      }
      if (m === undefined) {
        return 0;
      }
      if (typeof g == "number" && (q._state !== "loaded" || q._playLock)) {
        q._queue.push({
          event: "seek",
          action: function () {
            q.seek.apply(q, H);
          }
        });
        return q;
      }
      var E = q._soundById(m);
      if (E) {
        if (typeof g != "number" || !(g >= 0)) {
          if (q._webAudio) {
            g = q.playing(m) ? x.ctx.currentTime - E._playStart : 0;
            return E._seek + ((E._rateSeek ? E._rateSeek - E._seek : 0) + g * Math.abs(E._rate));
          } else {
            return E._node.currentTime;
          }
        }
        var N = q.playing(m);
        if (N) {
          q.pause(m, true);
        }
        E._seek = g;
        E._ended = false;
        q._clearTimer(m);
        if (!q._webAudio && !!E._node && !isNaN(E._node.duration)) {
          E._node.currentTime = g;
        }
        function ia() {
          if (N) {
            q.play(m, true);
          }
          q._emit("seek", m);
        }
        if (N && !q._webAudio) {
          function M() {
            if (q._playLock) {
              setTimeout(M, 0);
            } else {
              ia();
            }
          }
          setTimeout(M, 0);
        } else {
          ia();
        }
      }
      return q;
    },
    playing: function (g) {
      if (typeof g == "number") {
        g = this._soundById(g);
        return !!g && !g._paused;
      }
      for (g = 0; g < this._sounds.length; g++) {
        if (!this._sounds[g]._paused) {
          return true;
        }
      }
      return false;
    },
    duration: function (g) {
      var p = this._duration;
      g = this._soundById(g);
      if (g) {
        p = this._sprite[g._sprite][1] / 1000;
      }
      return p;
    },
    state: function () {
      return this._state;
    },
    unload: function () {
      for (var g = this._sounds, m = 0; m < g.length; m++) {
        if (!g[m]._paused) {
          this.stop(g[m]._id);
        }
        if (!this._webAudio) {
          this._clearSound(g[m]._node);
          g[m]._node.removeEventListener("error", g[m]._errorFn, false);
          g[m]._node.removeEventListener(x._canPlayEvent, g[m]._loadFn, false);
          g[m]._node.removeEventListener("ended", g[m]._endFn, false);
          x._releaseHtml5Audio(g[m]._node);
        }
        delete g[m]._node;
        this._clearTimer(g[m]._id);
      }
      m = x._howls.indexOf(this);
      if (m >= 0) {
        x._howls.splice(m, 1);
      }
      g = true;
      for (m = 0; m < x._howls.length; m++) {
        if (x._howls[m]._src === this._src || this._src.indexOf(x._howls[m]._src) >= 0) {
          g = false;
          break;
        }
      }
      if (M && g) {
        delete M[this._src];
      }
      x.noAudio = false;
      this._state = "unloaded";
      this._sounds = [];
      return null;
    },
    on: function (g, m, q, x) {
      g = this["_on" + g];
      if (typeof m == "function") {
        g.push(x ? {
          id: q,
          fn: m,
          once: x
        } : {
          id: q,
          fn: m
        });
      }
      return this;
    },
    off: function (g, m, q) {
      var p = this["_on" + g];
      if (typeof m == "number") {
        q = m;
        m = null;
      }
      if (m || q) {
        for (g = 0; g < p.length; g++) {
          var u = q === p[g].id;
          if (m === p[g].fn && u || !m && u) {
            p.splice(g, 1);
            break;
          }
        }
      } else if (g) {
        this["_on" + g] = [];
      } else {
        m = Object.keys(this);
        g = 0;
        for (; g < m.length; g++) {
          if (m[g].indexOf("_on") === 0 && Array.isArray(this[m[g]])) {
            this[m[g]] = [];
          }
        }
      }
      return this;
    },
    once: function (g, m, q) {
      this.on(g, m, q, 1);
      return this;
    },
    _emit: function (g, m, q) {
      var p = this["_on" + g];
      for (var u = p.length - 1; u >= 0; u--) {
        if (!p[u].id || p[u].id === m || g === "load") {
          setTimeout(function (g) {
            g.call(this, m, q);
          }.bind(this, p[u].fn), 0);
          if (p[u].once) {
            this.off(g, p[u].fn, p[u].id);
          }
        }
      }
      this._loadQueue(g);
      return this;
    },
    _loadQueue: function (g) {
      if (this._queue.length > 0) {
        var m = this._queue[0];
        if (m.event === g) {
          this._queue.shift();
          this._loadQueue();
        }
        if (!g) {
          m.action();
        }
      }
      return this;
    },
    _ended: function (g) {
      var m = g._sprite;
      if (!this._webAudio && g._node && !g._node.paused && !g._node.ended && g._node.currentTime < g._stop) {
        setTimeout(this._ended.bind(this, g), 100);
        return this;
      }
      m = !!g._loop || !!this._sprite[m][2];
      this._emit("end", g._id);
      if (!this._webAudio && m) {
        this.stop(g._id, true).play(g._id);
      }
      if (this._webAudio && m) {
        this._emit("play", g._id);
        g._seek = g._start || 0;
        g._rateSeek = 0;
        g._playStart = x.ctx.currentTime;
        var p = (g._stop - g._start) * 1000 / Math.abs(g._rate);
        this._endTimers[g._id] = setTimeout(this._ended.bind(this, g), p);
      }
      if (this._webAudio && !m) {
        g._paused = true;
        g._ended = true;
        g._seek = g._start || 0;
        g._rateSeek = 0;
        this._clearTimer(g._id);
        this._cleanBuffer(g._node);
        x._autoSuspend();
      }
      if (!this._webAudio && !m) {
        this.stop(g._id, true);
      }
      return this;
    },
    _clearTimer: function (g) {
      if (this._endTimers[g]) {
        if (typeof this._endTimers[g] != "function") {
          clearTimeout(this._endTimers[g]);
        } else {
          var m = this._soundById(g);
          if (m && m._node) {
            m._node.removeEventListener("ended", this._endTimers[g], false);
          }
        }
        delete this._endTimers[g];
      }
      return this;
    },
    _soundById: function (g) {
      for (var m = 0; m < this._sounds.length; m++) {
        if (g === this._sounds[m]._id) {
          return this._sounds[m];
        }
      }
      return null;
    },
    _inactiveSound: function () {
      this._drain();
      for (var g = 0; g < this._sounds.length; g++) {
        if (this._sounds[g]._ended) {
          return this._sounds[g].reset();
        }
      }
      return new I(this);
    },
    _drain: function () {
      var g = this._pool;
      var m = 0;
      var q;
      if (!(this._sounds.length < g)) {
        for (q = 0; q < this._sounds.length; q++) {
          if (this._sounds[q]._ended) {
            m++;
          }
        }
        for (q = this._sounds.length - 1; q >= 0 && !(m <= g); q--) {
          if (this._sounds[q]._ended) {
            if (this._webAudio && this._sounds[q]._node) {
              this._sounds[q]._node.disconnect(0);
            }
            this._sounds.splice(q, 1);
            m--;
          }
        }
      }
    },
    _getSoundIds: function (g) {
      if (g === undefined) {
        g = [];
        for (var m = 0; m < this._sounds.length; m++) {
          g.push(this._sounds[m]._id);
        }
        return g;
      }
      return [g];
    },
    _refreshBuffer: function (g) {
      g._node.bufferSource = x.ctx.createBufferSource();
      g._node.bufferSource.buffer = M[this._src];
      if (g._panner) {
        g._node.bufferSource.connect(g._panner);
      } else {
        g._node.bufferSource.connect(g._node);
      }
      g._node.bufferSource.loop = g._loop;
      if (g._loop) {
        g._node.bufferSource.loopStart = g._start || 0;
        g._node.bufferSource.loopEnd = g._stop || 0;
      }
      g._node.bufferSource.playbackRate.setValueAtTime(g._rate, x.ctx.currentTime);
      return this;
    },
    _cleanBuffer: function (g) {
      var m = x._navigator && x._navigator.vendor.indexOf("Apple") >= 0;
      if (!g.bufferSource) {
        return this;
      }
      if (x._scratchBuffer && g.bufferSource && (g.bufferSource.onended = null, g.bufferSource.disconnect(0), m)) {
        try {
          g.bufferSource.buffer = x._scratchBuffer;
        } catch (u) {}
      }
      g.bufferSource = null;
      return this;
    },
    _clearSound: function (g) {
      if (!/MSIE |Trident\//.test(x._navigator && x._navigator.userAgent)) {
        g.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA";
      }
    }
  };
  function I(g) {
    this._parent = g;
    this.init();
  }
  I.prototype = {
    init: function () {
      var g = this._parent;
      this._muted = g._muted;
      this._loop = g._loop;
      this._volume = g._volume;
      this._rate = g._rate;
      this._seek = 0;
      this._paused = true;
      this._ended = true;
      this._sprite = "__default";
      this._id = ++x._counter;
      g._sounds.push(this);
      this.create();
      return this;
    },
    create: function () {
      var g = this._parent;
      var m = x._muted || this._muted || this._parent._muted ? 0 : this._volume;
      if (g._webAudio) {
        this._node = x.ctx.createGain === undefined ? x.ctx.createGainNode() : x.ctx.createGain();
        this._node.gain.setValueAtTime(m, x.ctx.currentTime);
        this._node.paused = true;
        this._node.connect(x.masterGain);
      } else if (!x.noAudio) {
        this._node = x._obtainHtml5Audio();
        this._errorFn = this._errorListener.bind(this);
        this._node.addEventListener("error", this._errorFn, false);
        this._loadFn = this._loadListener.bind(this);
        this._node.addEventListener(x._canPlayEvent, this._loadFn, false);
        this._endFn = this._endListener.bind(this);
        this._node.addEventListener("ended", this._endFn, false);
        this._node.src = g._src;
        this._node.preload = g._preload === true ? "auto" : g._preload;
        this._node.volume = m * x.volume();
        this._node.load();
      }
      return this;
    },
    reset: function () {
      var g = this._parent;
      this._muted = g._muted;
      this._loop = g._loop;
      this._volume = g._volume;
      this._rate = g._rate;
      this._seek = 0;
      this._rateSeek = 0;
      this._paused = true;
      this._ended = true;
      this._sprite = "__default";
      this._id = ++x._counter;
      return this;
    },
    _errorListener: function () {
      this._parent._emit("loaderror", this._id, this._node.error ? this._node.error.code : 0);
      this._node.removeEventListener("error", this._errorFn, false);
    },
    _loadListener: function () {
      var g = this._parent;
      g._duration = Math.ceil(this._node.duration * 10) / 10;
      if (Object.keys(g._sprite).length === 0) {
        g._sprite = {
          __default: [0, g._duration * 1000]
        };
      }
      if (g._state !== "loaded") {
        g._state = "loaded";
        g._emit("load");
        g._loadQueue();
      }
      this._node.removeEventListener(x._canPlayEvent, this._loadFn, false);
    },
    _endListener: function () {
      var g = this._parent;
      if (g._duration === Infinity) {
        g._duration = Math.ceil(this._node.duration * 10) / 10;
        if (g._sprite.__default[1] === Infinity) {
          g._sprite.__default[1] = g._duration * 1000;
        }
        g._ended(this);
      }
      this._node.removeEventListener("ended", this._endFn, false);
    }
  };
  var M = {};
  function X(g) {
    var p = g._src;
    if (M[p]) {
      g._duration = M[p].duration;
      m(g);
      return;
    }
    if (/^data:[^;]+;base64,/.test(p)) {
      for (var u = atob(p.split(",")[1]), x = new Uint8Array(u.length), E = 0; E < u.length; ++E) {
        x[E] = u.charCodeAt(E);
      }
      Ba(x.buffer, g);
    } else {
      var N = new XMLHttpRequest();
      N.open(g._xhr.method, p, true);
      N.withCredentials = g._xhr.withCredentials;
      N.responseType = "arraybuffer";
      if (g._xhr.headers) {
        Object.keys(g._xhr.headers).forEach(function (m) {
          N.setRequestHeader(m, g._xhr.headers[m]);
        });
      }
      N.onload = function () {
        var m = (N.status + "")[0];
        if (m !== "0" && m !== "2" && m !== "3") {
          g._emit("loaderror", null, "Failed loading audio file with status: " + N.status + ".");
          return;
        }
        Ba(N.response, g);
      };
      N.onerror = function () {
        if (g._webAudio) {
          g._html5 = true;
          g._webAudio = false;
          g._sounds = [];
          delete M[p];
          g.load();
        }
      };
      q(N);
    }
  }
  function q(g) {
    try {
      g.send();
    } catch (z) {
      g.onerror();
    }
  }
  function Ba(g, q) {
    function p() {
      q._emit("loaderror", null, "Decoding audio data failed.");
    }
    function z(g) {
      if (g && q._sounds.length > 0) {
        M[q._src] = g;
        m(q, g);
      } else {
        p();
      }
    }
    if (typeof Promise != "undefined" && x.ctx.decodeAudioData.length === 1) {
      x.ctx.decodeAudioData(g).then(z).catch(p);
    } else {
      x.ctx.decodeAudioData(g, z, p);
    }
  }
  function m(g, m) {
    if (m && !g._duration) {
      g._duration = m.duration;
    }
    if (Object.keys(g._sprite).length === 0) {
      g._sprite = {
        __default: [0, g._duration * 1000]
      };
    }
    if (g._state !== "loaded") {
      g._state = "loaded";
      g._emit("load");
      g._loadQueue();
    }
  }
  function g() {
    if (x.usingWebAudio) {
      try {
        if (typeof AudioContext != "undefined") {
          x.ctx = new AudioContext();
        } else if (typeof webkitAudioContext != "undefined") {
          x.ctx = new webkitAudioContext();
        } else {
          x.usingWebAudio = false;
        }
      } catch (u) {
        x.usingWebAudio = false;
      }
      if (!x.ctx) {
        x.usingWebAudio = false;
      }
      var g = /iP(hone|od|ad)/.test(x._navigator && x._navigator.platform);
      var m = x._navigator && x._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
      m = m ? parseInt(m[1], 10) : null;
      if (g && m && m < 9) {
        g = /safari/.test(x._navigator && x._navigator.userAgent.toLowerCase());
        if (x._navigator && !g) {
          x.usingWebAudio = false;
        }
      }
      if (x.usingWebAudio) {
        x.masterGain = x.ctx.createGain === undefined ? x.ctx.createGainNode() : x.ctx.createGain();
        x.masterGain.gain.setValueAtTime(x._muted ? 0 : x._volume, x.ctx.currentTime);
        x.masterGain.connect(x.ctx.destination);
      }
      x._setup();
    }
  }
  if (typeof define == "function" && define.amd) {
    define([], function () {
      return {
        Howler: x,
        Howl: E
      };
    });
  }
  if (typeof exports != "undefined") {
    exports.Howler = x;
    exports.Howl = E;
  }
  if (typeof global != "undefined") {
    global.HowlerGlobal = na;
    global.Howler = x;
    global.Howl = E;
    global.Sound = I;
  } else if (typeof window != "undefined") {
    window.HowlerGlobal = na;
    window.Howler = x;
    window.Howl = E;
    window.Sound = I;
  }
})();
(function () {
  HowlerGlobal.prototype._pos = [0, 0, 0];
  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];
  HowlerGlobal.prototype.stereo = function (x) {
    if (!this.ctx || !this.ctx.listener) {
      return this;
    }
    for (var E = this._howls.length - 1; E >= 0; E--) {
      this._howls[E].stereo(x);
    }
    return this;
  };
  HowlerGlobal.prototype.pos = function (x, E, I) {
    if (this.ctx && this.ctx.listener) {
      E = typeof E != "number" ? this._pos[1] : E;
      I = typeof I != "number" ? this._pos[2] : I;
      if (typeof x != "number") {
        return this._pos;
      } else {
        this._pos = [x, E, I];
        if (this.ctx.listener.positionX !== undefined) {
          this.ctx.listener.positionX.setTargetAtTime(this._pos[0], Howler.ctx.currentTime, 0.1);
          this.ctx.listener.positionY.setTargetAtTime(this._pos[1], Howler.ctx.currentTime, 0.1);
          this.ctx.listener.positionZ.setTargetAtTime(this._pos[2], Howler.ctx.currentTime, 0.1);
        } else {
          this.ctx.listener.setPosition(this._pos[0], this._pos[1], this._pos[2]);
        }
        return this;
      }
    } else {
      return this;
    }
  };
  HowlerGlobal.prototype.orientation = function (x, E, I, M, X, q) {
    if (!this.ctx || !this.ctx.listener) {
      return this;
    }
    var na = this._orientation;
    E = typeof E != "number" ? na[1] : E;
    I = typeof I != "number" ? na[2] : I;
    M = typeof M != "number" ? na[3] : M;
    X = typeof X != "number" ? na[4] : X;
    q = typeof q != "number" ? na[5] : q;
    if (typeof x != "number") {
      return na;
    } else {
      this._orientation = [x, E, I, M, X, q];
      if (this.ctx.listener.forwardX !== undefined) {
        this.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.forwardY.setTargetAtTime(E, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.forwardZ.setTargetAtTime(I, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.upX.setTargetAtTime(M, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.upY.setTargetAtTime(X, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.upZ.setTargetAtTime(q, Howler.ctx.currentTime, 0.1);
      } else {
        this.ctx.listener.setOrientation(x, E, I, M, X, q);
      }
      return this;
    }
  };
  Howl.prototype.init = function (x) {
    return function (E) {
      this._orientation = E.orientation || [1, 0, 0];
      this._stereo = E.stereo || null;
      this._pos = E.pos || null;
      this._pannerAttr = {
        coneInnerAngle: E.coneInnerAngle !== undefined ? E.coneInnerAngle : 360,
        coneOuterAngle: E.coneOuterAngle !== undefined ? E.coneOuterAngle : 360,
        coneOuterGain: E.coneOuterGain !== undefined ? E.coneOuterGain : 0,
        distanceModel: E.distanceModel !== undefined ? E.distanceModel : "inverse",
        maxDistance: E.maxDistance !== undefined ? E.maxDistance : 10000,
        panningModel: E.panningModel !== undefined ? E.panningModel : "HRTF",
        refDistance: E.refDistance !== undefined ? E.refDistance : 1,
        rolloffFactor: E.rolloffFactor !== undefined ? E.rolloffFactor : 1
      };
      this._onstereo = E.onstereo ? [{
        fn: E.onstereo
      }] : [];
      this._onpos = E.onpos ? [{
        fn: E.onpos
      }] : [];
      this._onorientation = E.onorientation ? [{
        fn: E.onorientation
      }] : [];
      return x.call(this, E);
    };
  }(Howl.prototype.init);
  Howl.prototype.stereo = function (x, E) {
    var I = this;
    if (!I._webAudio) {
      return I;
    }
    if (I._state !== "loaded") {
      I._queue.push({
        event: "stereo",
        action: function () {
          I.stereo(x, E);
        }
      });
      return I;
    }
    var M = Howler.ctx.createStereoPanner === undefined ? "spatial" : "stereo";
    if (E === undefined) {
      if (typeof x != "number") {
        return I._stereo;
      }
      I._stereo = x;
      I._pos = [x, 0, 0];
    }
    for (var X = I._getSoundIds(E), q = 0; q < X.length; q++) {
      var Ba = I._soundById(X[q]);
      if (Ba) {
        if (typeof x != "number") {
          return Ba._stereo;
        }
        Ba._stereo = x;
        Ba._pos = [x, 0, 0];
        if (Ba._node) {
          Ba._pannerAttr.panningModel = "equalpower";
          if (!Ba._panner || !Ba._panner.pan) {
            na(Ba, M);
          }
          if (M === "spatial") {
            if (Ba._panner.positionX !== undefined) {
              Ba._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);
              Ba._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);
              Ba._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);
            } else {
              Ba._panner.setPosition(x, 0, 0);
            }
          } else {
            Ba._panner.pan.setValueAtTime(x, Howler.ctx.currentTime);
          }
        }
        I._emit("stereo", Ba._id);
      }
    }
    return I;
  };
  Howl.prototype.pos = function (x, E, I, M) {
    var X = this;
    if (!X._webAudio) {
      return X;
    }
    if (X._state !== "loaded") {
      X._queue.push({
        event: "pos",
        action: function () {
          X.pos(x, E, I, M);
        }
      });
      return X;
    }
    E = typeof E != "number" ? 0 : E;
    I = typeof I != "number" ? -0.5 : I;
    if (M === undefined) {
      if (typeof x != "number") {
        return X._pos;
      }
      X._pos = [x, E, I];
    }
    for (var q = X._getSoundIds(M), Ba = 0; Ba < q.length; Ba++) {
      var m = X._soundById(q[Ba]);
      if (m) {
        if (typeof x != "number") {
          return m._pos;
        }
        m._pos = [x, E, I];
        if (m._node) {
          if (!m._panner || !!m._panner.pan) {
            na(m, "spatial");
          }
          if (m._panner.positionX !== undefined) {
            m._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);
            m._panner.positionY.setValueAtTime(E, Howler.ctx.currentTime);
            m._panner.positionZ.setValueAtTime(I, Howler.ctx.currentTime);
          } else {
            m._panner.setPosition(x, E, I);
          }
        }
        X._emit("pos", m._id);
      }
    }
    return X;
  };
  Howl.prototype.orientation = function (x, E, I, M) {
    var X = this;
    if (!X._webAudio) {
      return X;
    }
    if (X._state !== "loaded") {
      X._queue.push({
        event: "orientation",
        action: function () {
          X.orientation(x, E, I, M);
        }
      });
      return X;
    }
    E = typeof E != "number" ? X._orientation[1] : E;
    I = typeof I != "number" ? X._orientation[2] : I;
    if (M === undefined) {
      if (typeof x != "number") {
        return X._orientation;
      }
      X._orientation = [x, E, I];
    }
    for (var q = X._getSoundIds(M), Ba = 0; Ba < q.length; Ba++) {
      var m = X._soundById(q[Ba]);
      if (m) {
        if (typeof x != "number") {
          return m._orientation;
        }
        m._orientation = [x, E, I];
        if (m._node) {
          if (!m._panner) {
            m._pos ||= X._pos || [0, 0, -0.5];
            na(m, "spatial");
          }
          if (m._panner.orientationX !== undefined) {
            m._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);
            m._panner.orientationY.setValueAtTime(E, Howler.ctx.currentTime);
            m._panner.orientationZ.setValueAtTime(I, Howler.ctx.currentTime);
          } else {
            m._panner.setOrientation(x, E, I);
          }
        }
        X._emit("orientation", m._id);
      }
    }
    return X;
  };
  Howl.prototype.pannerAttr = function () {
    var x;
    var E;
    var I = arguments;
    if (!this._webAudio) {
      return this;
    }
    if (I.length === 0) {
      return this._pannerAttr;
    }
    if (I.length === 1) {
      if (typeof I[0] != "object") {
        E = this._soundById(parseInt(I[0], 10));
        if (E) {
          return E._pannerAttr;
        } else {
          return this._pannerAttr;
        }
      }
      var M = I[0];
      if (x === undefined) {
        M.pannerAttr ||= {
          coneInnerAngle: M.coneInnerAngle,
          coneOuterAngle: M.coneOuterAngle,
          coneOuterGain: M.coneOuterGain,
          distanceModel: M.distanceModel,
          maxDistance: M.maxDistance,
          refDistance: M.refDistance,
          rolloffFactor: M.rolloffFactor,
          panningModel: M.panningModel
        };
        this._pannerAttr = {
          coneInnerAngle: M.pannerAttr.coneInnerAngle !== undefined ? M.pannerAttr.coneInnerAngle : this._coneInnerAngle,
          coneOuterAngle: M.pannerAttr.coneOuterAngle !== undefined ? M.pannerAttr.coneOuterAngle : this._coneOuterAngle,
          coneOuterGain: M.pannerAttr.coneOuterGain !== undefined ? M.pannerAttr.coneOuterGain : this._coneOuterGain,
          distanceModel: M.pannerAttr.distanceModel !== undefined ? M.pannerAttr.distanceModel : this._distanceModel,
          maxDistance: M.pannerAttr.maxDistance !== undefined ? M.pannerAttr.maxDistance : this._maxDistance,
          refDistance: M.pannerAttr.refDistance !== undefined ? M.pannerAttr.refDistance : this._refDistance,
          rolloffFactor: M.pannerAttr.rolloffFactor !== undefined ? M.pannerAttr.rolloffFactor : this._rolloffFactor,
          panningModel: M.pannerAttr.panningModel !== undefined ? M.pannerAttr.panningModel : this._panningModel
        };
      }
    } else if (I.length === 2) {
      M = I[0];
      x = parseInt(I[1], 10);
    }
    x = this._getSoundIds(x);
    for (I = 0; I < x.length; I++) {
      if (E = this._soundById(x[I])) {
        var X = E._pannerAttr;
        X = {
          coneInnerAngle: M.coneInnerAngle !== undefined ? M.coneInnerAngle : X.coneInnerAngle,
          coneOuterAngle: M.coneOuterAngle !== undefined ? M.coneOuterAngle : X.coneOuterAngle,
          coneOuterGain: M.coneOuterGain !== undefined ? M.coneOuterGain : X.coneOuterGain,
          distanceModel: M.distanceModel !== undefined ? M.distanceModel : X.distanceModel,
          maxDistance: M.maxDistance !== undefined ? M.maxDistance : X.maxDistance,
          refDistance: M.refDistance !== undefined ? M.refDistance : X.refDistance,
          rolloffFactor: M.rolloffFactor !== undefined ? M.rolloffFactor : X.rolloffFactor,
          panningModel: M.panningModel !== undefined ? M.panningModel : X.panningModel
        };
        var q = E._panner;
        if (!q) {
          E._pos ||= this._pos || [0, 0, -0.5];
          na(E, "spatial");
          q = E._panner;
        }
        q.coneInnerAngle = X.coneInnerAngle;
        q.coneOuterAngle = X.coneOuterAngle;
        q.coneOuterGain = X.coneOuterGain;
        q.distanceModel = X.distanceModel;
        q.maxDistance = X.maxDistance;
        q.refDistance = X.refDistance;
        q.rolloffFactor = X.rolloffFactor;
        q.panningModel = X.panningModel;
      }
    }
    return this;
  };
  Sound.prototype.init = function (x) {
    return function () {
      var E = this._parent;
      this._orientation = E._orientation;
      this._stereo = E._stereo;
      this._pos = E._pos;
      this._pannerAttr = E._pannerAttr;
      x.call(this);
      if (this._stereo) {
        E.stereo(this._stereo);
      } else if (this._pos) {
        E.pos(this._pos[0], this._pos[1], this._pos[2], this._id);
      }
    };
  }(Sound.prototype.init);
  Sound.prototype.reset = function (x) {
    return function () {
      var E = this._parent;
      this._orientation = E._orientation;
      this._stereo = E._stereo;
      this._pos = E._pos;
      this._pannerAttr = E._pannerAttr;
      if (this._stereo) {
        E.stereo(this._stereo);
      } else if (this._pos) {
        E.pos(this._pos[0], this._pos[1], this._pos[2], this._id);
      } else if (this._panner) {
        this._panner.disconnect(0);
        this._panner = undefined;
        E._refreshBuffer(this);
      }
      return x.call(this);
    };
  }(Sound.prototype.reset);
  function na(x, E) {
    if ((E || "spatial") === "spatial") {
      x._panner = Howler.ctx.createPanner();
      x._panner.coneInnerAngle = x._pannerAttr.coneInnerAngle;
      x._panner.coneOuterAngle = x._pannerAttr.coneOuterAngle;
      x._panner.coneOuterGain = x._pannerAttr.coneOuterGain;
      x._panner.distanceModel = x._pannerAttr.distanceModel;
      x._panner.maxDistance = x._pannerAttr.maxDistance;
      x._panner.refDistance = x._pannerAttr.refDistance;
      x._panner.rolloffFactor = x._pannerAttr.rolloffFactor;
      x._panner.panningModel = x._pannerAttr.panningModel;
      if (x._panner.positionX !== undefined) {
        x._panner.positionX.setValueAtTime(x._pos[0], Howler.ctx.currentTime);
        x._panner.positionY.setValueAtTime(x._pos[1], Howler.ctx.currentTime);
        x._panner.positionZ.setValueAtTime(x._pos[2], Howler.ctx.currentTime);
      } else {
        x._panner.setPosition(x._pos[0], x._pos[1], x._pos[2]);
      }
      if (x._panner.orientationX !== undefined) {
        x._panner.orientationX.setValueAtTime(x._orientation[0], Howler.ctx.currentTime);
        x._panner.orientationY.setValueAtTime(x._orientation[1], Howler.ctx.currentTime);
        x._panner.orientationZ.setValueAtTime(x._orientation[2], Howler.ctx.currentTime);
      } else {
        x._panner.setOrientation(x._orientation[0], x._orientation[1], x._orientation[2]);
      }
    } else {
      x._panner = Howler.ctx.createStereoPanner();
      x._panner.pan.setValueAtTime(x._stereo, Howler.ctx.currentTime);
    }
    x._panner.connect(x._node);
    if (!x._paused) {
      x._parent.pause(x._id, true).play(x._id, true);
    }
  }
})();
(function (na) {
  if (typeof exports == "object" && typeof module != "undefined") {
    module.exports = na();
  } else if (typeof define == "function" && define.amd) {
    define([], na);
  } else {
    (typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this).pako = na();
  }
})(function () {
  return function M(x, E, I) {
    function X(m, g) {
      if (!E[m]) {
        if (!x[m]) {
          var p = typeof require == "function" && require;
          if (!g && p) {
            return p(m, true);
          }
          if (q) {
            return q(m, true);
          }
          g = Error("Cannot find module '" + m + "'");
          g.code = "MODULE_NOT_FOUND";
          throw g;
        }
        g = E[m] = {
          exports: {}
        };
        x[m][0].call(g.exports, function (g) {
          var p = x[m][1][g];
          return X(p ? p : g);
        }, g, g.exports, M, x, E, I);
      }
      return E[m].exports;
    }
    var q = typeof require == "function" && require;
    for (var Ba = 0; Ba < I.length; Ba++) {
      X(I[Ba]);
    }
    return X;
  }({
    1: [function (x, E, I) {
      function M(x) {
        if (!(this instanceof M)) {
          return new M(x);
        }
        x = this.options = Ba.assign({
          level: H,
          method: N,
          chunkSize: 16384,
          windowBits: 15,
          memLevel: 8,
          strategy: ha,
          to: ""
        }, x || {});
        if (x.raw && x.windowBits > 0) {
          x.windowBits = -x.windowBits;
        } else if (x.gzip && x.windowBits > 0 && x.windowBits < 16) {
          x.windowBits += 16;
        }
        this.err = 0;
        this.msg = "";
        this.ended = false;
        this.chunks = [];
        this.strm = new p();
        this.strm.avail_out = 0;
        var E = q.deflateInit2(this.strm, x.level, x.method, x.windowBits, x.memLevel, x.strategy);
        if (E !== u) {
          throw Error(g[E]);
        }
        if (x.header) {
          q.deflateSetHeader(this.strm, x.header);
        }
        if (x.dictionary) {
          var I;
          I = typeof x.dictionary == "string" ? m.string2buf(x.dictionary) : z.call(x.dictionary) === "[object ArrayBuffer]" ? new Uint8Array(x.dictionary) : x.dictionary;
          E = q.deflateSetDictionary(this.strm, I);
          if (E !== u) {
            throw Error(g[E]);
          }
          this._dict_set = true;
        }
      }
      function X(g, m) {
        m = new M(m);
        m.push(g, true);
        if (m.err) {
          throw m.msg;
        }
        return m.result;
      }
      var q = x("./zlib/deflate");
      var Ba = x("./utils/common");
      var m = x("./utils/strings");
      var g = x("./zlib/messages");
      var p = x("./zlib/zstream");
      var z = Object.prototype.toString;
      var u = 0;
      var H = -1;
      var ha = 0;
      var N = 8;
      M.prototype.push = function (g, p) {
        var x;
        var H = this.strm;
        var E = this.options.chunkSize;
        if (this.ended) {
          return false;
        }
        p = p === ~~p ? p : p === true ? 4 : 0;
        if (typeof g == "string") {
          H.input = m.string2buf(g);
        } else if (z.call(g) === "[object ArrayBuffer]") {
          H.input = new Uint8Array(g);
        } else {
          H.input = g;
        }
        H.next_in = 0;
        H.avail_in = H.input.length;
        do {
          if (H.avail_out === 0) {
            H.output = new Ba.Buf8(E);
            H.next_out = 0;
            H.avail_out = E;
          }
          x = q.deflate(H, p);
          if (x !== 1 && x !== u) {
            this.onEnd(x);
            this.ended = true;
            return false;
          }
          if (H.avail_out === 0 || H.avail_in === 0 && (p === 4 || p === 2)) {
            if (this.options.to === "string") {
              this.onData(m.buf2binstring(Ba.shrinkBuf(H.output, H.next_out)));
            } else {
              this.onData(Ba.shrinkBuf(H.output, H.next_out));
            }
          }
        } while ((H.avail_in > 0 || H.avail_out === 0) && x !== 1);
        if (p === 4) {
          x = q.deflateEnd(this.strm);
          this.onEnd(x);
          this.ended = true;
          return x === u;
        } else {
          return p !== 2 || (this.onEnd(u), H.avail_out = 0, true);
        }
      };
      M.prototype.onData = function (g) {
        this.chunks.push(g);
      };
      M.prototype.onEnd = function (g) {
        if (g === u) {
          if (this.options.to === "string") {
            this.result = this.chunks.join("");
          } else {
            this.result = Ba.flattenChunks(this.chunks);
          }
        }
        this.chunks = [];
        this.err = g;
        this.msg = this.strm.msg;
      };
      I.Deflate = M;
      I.deflate = X;
      I.deflateRaw = function (g, m) {
        m = m || {};
        m.raw = true;
        return X(g, m);
      };
      I.gzip = function (g, m) {
        m = m || {};
        m.gzip = true;
        return X(g, m);
      };
    }, {
      "./utils/common": 3,
      "./utils/strings": 4,
      "./zlib/deflate": 8,
      "./zlib/messages": 13,
      "./zlib/zstream": 15
    }],
    2: [function (x, E, I) {
      function M(m) {
        if (!(this instanceof M)) {
          return new M(m);
        }
        var x = this.options = Ba.assign({
          chunkSize: 16384,
          windowBits: 0,
          to: ""
        }, m || {});
        if (x.raw && x.windowBits >= 0 && x.windowBits < 16) {
          x.windowBits = -x.windowBits;
          if (x.windowBits === 0) {
            x.windowBits = -15;
          }
        }
        if (!!(x.windowBits >= 0) && !!(x.windowBits < 16) && (!m || !m.windowBits)) {
          x.windowBits += 32;
        }
        if (x.windowBits > 15 && x.windowBits < 48 && (x.windowBits & 15) === 0) {
          x.windowBits |= 15;
        }
        this.err = 0;
        this.msg = "";
        this.ended = false;
        this.chunks = [];
        this.strm = new z();
        this.strm.avail_out = 0;
        m = q.inflateInit2(this.strm, x.windowBits);
        if (m !== g.Z_OK) {
          throw Error(p[m]);
        }
        this.header = new u();
        q.inflateGetHeader(this.strm, this.header);
      }
      function X(g, m) {
        m = new M(m);
        m.push(g, true);
        if (m.err) {
          throw m.msg;
        }
        return m.result;
      }
      var q = x("./zlib/inflate");
      var Ba = x("./utils/common");
      var m = x("./utils/strings");
      var g = x("./zlib/constants");
      var p = x("./zlib/messages");
      var z = x("./zlib/zstream");
      var u = x("./zlib/gzheader");
      var H = Object.prototype.toString;
      M.prototype.push = function (p, u) {
        var x;
        var z;
        var E;
        var M;
        var I;
        var N = this.strm;
        var ha = this.options.chunkSize;
        var X = this.options.dictionary;
        var la = false;
        if (this.ended) {
          return false;
        }
        u = u === ~~u ? u : u === true ? g.Z_FINISH : g.Z_NO_FLUSH;
        if (typeof p == "string") {
          N.input = m.binstring2buf(p);
        } else if (H.call(p) === "[object ArrayBuffer]") {
          N.input = new Uint8Array(p);
        } else {
          N.input = p;
        }
        N.next_in = 0;
        N.avail_in = N.input.length;
        do {
          if (N.avail_out === 0) {
            N.output = new Ba.Buf8(ha);
            N.next_out = 0;
            N.avail_out = ha;
          }
          x = q.inflate(N, g.Z_NO_FLUSH);
          if (x === g.Z_NEED_DICT && X) {
            I = typeof X == "string" ? m.string2buf(X) : H.call(X) === "[object ArrayBuffer]" ? new Uint8Array(X) : X;
            x = q.inflateSetDictionary(this.strm, I);
          }
          if (x === g.Z_BUF_ERROR && la === true) {
            x = g.Z_OK;
            la = false;
          }
          if (x !== g.Z_STREAM_END && x !== g.Z_OK) {
            this.onEnd(x);
            this.ended = true;
            return false;
          }
          if (N.next_out) {
            if (N.avail_out === 0 || x === g.Z_STREAM_END || N.avail_in === 0 && (u === g.Z_FINISH || u === g.Z_SYNC_FLUSH)) {
              if (this.options.to === "string") {
                z = m.utf8border(N.output, N.next_out);
                E = N.next_out - z;
                M = m.buf2string(N.output, z);
                N.next_out = E;
                N.avail_out = ha - E;
                if (E) {
                  Ba.arraySet(N.output, N.output, z, E, 0);
                }
                this.onData(M);
              } else {
                this.onData(Ba.shrinkBuf(N.output, N.next_out));
              }
            }
          }
          if (N.avail_in === 0 && N.avail_out === 0) {
            la = true;
          }
        } while ((N.avail_in > 0 || N.avail_out === 0) && x !== g.Z_STREAM_END);
        if (x === g.Z_STREAM_END) {
          u = g.Z_FINISH;
        }
        if (u === g.Z_FINISH) {
          x = q.inflateEnd(this.strm);
          this.onEnd(x);
          this.ended = true;
          return x === g.Z_OK;
        } else {
          return u !== g.Z_SYNC_FLUSH || (this.onEnd(g.Z_OK), N.avail_out = 0, true);
        }
      };
      M.prototype.onData = function (g) {
        this.chunks.push(g);
      };
      M.prototype.onEnd = function (m) {
        if (m === g.Z_OK) {
          if (this.options.to === "string") {
            this.result = this.chunks.join("");
          } else {
            this.result = Ba.flattenChunks(this.chunks);
          }
        }
        this.chunks = [];
        this.err = m;
        this.msg = this.strm.msg;
      };
      I.Inflate = M;
      I.inflate = X;
      I.inflateRaw = function (g, m) {
        m = m || {};
        m.raw = true;
        return X(g, m);
      };
      I.ungzip = X;
    }, {
      "./utils/common": 3,
      "./utils/strings": 4,
      "./zlib/constants": 6,
      "./zlib/gzheader": 9,
      "./zlib/inflate": 11,
      "./zlib/messages": 13,
      "./zlib/zstream": 15
    }],
    3: [function (x, E, I) {
      x = typeof Uint8Array != "undefined" && typeof Uint16Array != "undefined" && typeof Int32Array != "undefined";
      I.assign = function (q) {
        for (var x = Array.prototype.slice.call(arguments, 1); x.length;) {
          var m = x.shift();
          if (m) {
            if (typeof m != "object") {
              throw new TypeError(m + "must be non-object");
            }
            for (var g in m) {
              if (m.hasOwnProperty(g)) {
                q[g] = m[g];
              }
            }
          }
        }
        return q;
      };
      I.shrinkBuf = function (q, x) {
        if (q.length === x) {
          return q;
        } else if (q.subarray) {
          return q.subarray(0, x);
        } else {
          q.length = x;
          return q;
        }
      };
      var M = {
        arraySet: function (q, x, m, g, p) {
          if (x.subarray && q.subarray) {
            q.set(x.subarray(m, m + g), p);
            return;
          }
          for (var z = 0; z < g; z++) {
            q[p + z] = x[m + z];
          }
        },
        flattenChunks: function (q) {
          var x;
          var m;
          var g = m = 0;
          for (x = q.length; g < x; g++) {
            m += q[g].length;
          }
          var p = new Uint8Array(m);
          g = m = 0;
          for (x = q.length; g < x; g++) {
            var z = q[g];
            p.set(z, m);
            m += z.length;
          }
          return p;
        }
      };
      var X = {
        arraySet: function (q, x, m, g, p) {
          for (var z = 0; z < g; z++) {
            q[p + z] = x[m + z];
          }
        },
        flattenChunks: function (q) {
          return [].concat.apply([], q);
        }
      };
      I.setTyped = function (q) {
        if (q) {
          I.Buf8 = Uint8Array;
          I.Buf16 = Uint16Array;
          I.Buf32 = Int32Array;
          I.assign(I, M);
        } else {
          I.Buf8 = Array;
          I.Buf16 = Array;
          I.Buf32 = Array;
          I.assign(I, X);
        }
      };
      I.setTyped(x);
    }, {}],
    4: [function (x, E, I) {
      function M(g, m) {
        if (m < 65537 && (g.subarray && Ba || !g.subarray && q)) {
          return String.fromCharCode.apply(null, X.shrinkBuf(g, m));
        }
        var p = "";
        for (var u = 0; u < m; u++) {
          p += String.fromCharCode(g[u]);
        }
        return p;
      }
      var X = x("./common");
      var q = true;
      var Ba = true;
      try {
        String.fromCharCode.apply(null, [0]);
      } catch (g) {
        q = false;
      }
      try {
        String.fromCharCode.apply(null, new Uint8Array(1));
      } catch (g) {
        Ba = false;
      }
      var m = new X.Buf8(256);
      for (x = 0; x < 256; x++) {
        m[x] = x >= 252 ? 6 : x >= 248 ? 5 : x >= 240 ? 4 : x >= 224 ? 3 : x >= 192 ? 2 : 1;
      }
      m[254] = m[254] = 1;
      I.string2buf = function (g) {
        var m;
        var q;
        var u;
        var x = g.length;
        var E = 0;
        for (q = 0; q < x; q++) {
          var N = g.charCodeAt(q);
          if ((N & 64512) === 55296 && q + 1 < x) {
            m = g.charCodeAt(q + 1);
            if ((m & 64512) === 56320) {
              N = 65536 + (N - 55296 << 10) + (m - 56320);
              q++;
            }
          }
          E += N < 128 ? 1 : N < 2048 ? 2 : N < 65536 ? 3 : 4;
        }
        var M = new X.Buf8(E);
        for (q = u = 0; u < E; q++) {
          N = g.charCodeAt(q);
          if ((N & 64512) === 55296 && q + 1 < x) {
            m = g.charCodeAt(q + 1);
            if ((m & 64512) === 56320) {
              N = 65536 + (N - 55296 << 10) + (m - 56320);
              q++;
            }
          }
          if (N < 128) {
            M[u++] = N;
          } else if (N < 2048) {
            M[u++] = N >>> 6 | 192;
            M[u++] = N & 63 | 128;
          } else if (N < 65536) {
            M[u++] = N >>> 12 | 224;
            M[u++] = N >>> 6 & 63 | 128;
            M[u++] = N & 63 | 128;
          } else {
            M[u++] = N >>> 18 | 240;
            M[u++] = N >>> 12 & 63 | 128;
            M[u++] = N >>> 6 & 63 | 128;
            M[u++] = N & 63 | 128;
          }
        }
        return M;
      };
      I.buf2binstring = function (g) {
        return M(g, g.length);
      };
      I.binstring2buf = function (g) {
        var m = new X.Buf8(g.length);
        for (var q = 0, u = m.length; q < u; q++) {
          m[q] = g.charCodeAt(q);
        }
        return m;
      };
      I.buf2string = function (g, p) {
        var q;
        var u;
        var x;
        var E = p || g.length;
        var N = Array(E * 2);
        for (p = q = 0; p < E;) {
          u = g[p++];
          if (u < 128) {
            N[q++] = u;
          } else {
            x = m[u];
            if (x > 4) {
              N[q++] = 65533;
              p += x - 1;
            } else {
              for (u &= x === 2 ? 31 : x === 3 ? 15 : 7; x > 1 && p < E;) {
                u = u << 6 | g[p++] & 63;
                x--;
              }
              if (x > 1) {
                N[q++] = 65533;
              } else if (u < 65536) {
                N[q++] = u;
              } else {
                u -= 65536;
                N[q++] = u >> 10 & 1023 | 55296;
                N[q++] = u & 1023 | 56320;
              }
            }
          }
        }
        return M(N, q);
      };
      I.utf8border = function (g, p) {
        var q;
        p = p || g.length;
        if (p > g.length) {
          p = g.length;
        }
        for (q = p - 1; q >= 0 && (g[q] & 192) === 128;) {
          q--;
        }
        if (q < 0) {
          return p;
        } else if (q === 0) {
          return p;
        } else if (q + m[g[q]] > p) {
          return q;
        } else {
          return p;
        }
      };
    }, {
      "./common": 3
    }],
    5: [function (x, E, I) {
      E.exports = function (x, E, q, I) {
        var m = x & 65535 | 0;
        x = x >>> 16 & 65535 | 0;
        var g;
        while (q !== 0) {
          g = q > 2000 ? 2000 : q;
          q -= g;
          do {
            m = m + E[I++] | 0;
            x = x + m | 0;
          } while (--g);
          m %= 65521;
          x %= 65521;
        }
        return m | x << 16 | 0;
      };
    }, {}],
    6: [function (x, E, I) {
      E.exports = {
        Z_NO_FLUSH: 0,
        Z_PARTIAL_FLUSH: 1,
        Z_SYNC_FLUSH: 2,
        Z_FULL_FLUSH: 3,
        Z_FINISH: 4,
        Z_BLOCK: 5,
        Z_TREES: 6,
        Z_OK: 0,
        Z_STREAM_END: 1,
        Z_NEED_DICT: 2,
        Z_ERRNO: -1,
        Z_STREAM_ERROR: -2,
        Z_DATA_ERROR: -3,
        Z_BUF_ERROR: -5,
        Z_NO_COMPRESSION: 0,
        Z_BEST_SPEED: 1,
        Z_BEST_COMPRESSION: 9,
        Z_DEFAULT_COMPRESSION: -1,
        Z_FILTERED: 1,
        Z_HUFFMAN_ONLY: 2,
        Z_RLE: 3,
        Z_FIXED: 4,
        Z_DEFAULT_STRATEGY: 0,
        Z_BINARY: 0,
        Z_TEXT: 1,
        Z_UNKNOWN: 2,
        Z_DEFLATED: 8
      };
    }, {}],
    7: [function (x, E, I) {
      var M = function () {
        var x;
        var q = [];
        for (var E = 0; E < 256; E++) {
          x = E;
          for (var m = 0; m < 8; m++) {
            x = x & 1 ? x >>> 1 ^ -306674912 : x >>> 1;
          }
          q[E] = x;
        }
        return q;
      }();
      E.exports = function (x, q, E, m) {
        E = m + E;
        for (x ^= -1; m < E; m++) {
          x = x >>> 8 ^ M[(x ^ q[m]) & 255];
        }
        return x ^ -1;
      };
    }, {}],
    8: [function (x, E, I) {
      function M(g, m) {
        g.msg = gc[m];
        return m;
      }
      function X(g) {
        for (var m = g.length; --m >= 0;) {
          g[m] = 0;
        }
      }
      function q(g) {
        var m = g.state;
        var p = m.pending;
        if (p > g.avail_out) {
          p = g.avail_out;
        }
        if (p !== 0) {
          pa.arraySet(g.output, m.pending_buf, m.pending_out, p, g.next_out);
          g.next_out += p;
          m.pending_out += p;
          g.total_out += p;
          g.avail_out -= p;
          m.pending -= p;
          if (m.pending === 0) {
            m.pending_out = 0;
          }
        }
      }
      function Ba(g, m) {
        xc._tr_flush_block(g, g.block_start >= 0 ? g.block_start : -1, g.strstart - g.block_start, m);
        g.block_start = g.strstart;
        q(g.strm);
      }
      function m(g, m) {
        g.pending_buf[g.pending++] = m;
      }
      function g(g, m) {
        g.pending_buf[g.pending++] = m >>> 8 & 255;
        g.pending_buf[g.pending++] = m & 255;
      }
      function p(g, m) {
        var p;
        var q;
        var u = g.max_chain_length;
        var w = g.strstart;
        var r = g.prev_length;
        var x = g.nice_match;
        var ba = g.strstart > g.w_size - hb ? g.strstart - (g.w_size - hb) : 0;
        var z = g.window;
        var E = g.w_mask;
        var la = g.prev;
        var H = g.strstart + Ja;
        var M = z[w + r - 1];
        var y = z[w + r];
        if (g.prev_length >= g.good_match) {
          u >>= 2;
        }
        if (x > g.lookahead) {
          x = g.lookahead;
        }
        do {
          p = m;
          if (z[p + r] === y && z[p + r - 1] === M && z[p] === z[w] && z[++p] === z[w + 1]) {
            w += 2;
            for (p++; z[++w] === z[++p] && z[++w] === z[++p] && z[++w] === z[++p] && z[++w] === z[++p] && z[++w] === z[++p] && z[++w] === z[++p] && z[++w] === z[++p] && z[++w] === z[++p] && w < H;);
            q = Ja - (H - w);
            w = H - Ja;
            if (q > r) {
              g.match_start = m;
              r = q;
              if (q >= x) {
                break;
              }
              M = z[w + r - 1];
              y = z[w + r];
            }
          }
        } while ((m = la[m & E]) > ba && --u !== 0);
        if (r <= g.lookahead) {
          return r;
        } else {
          return g.lookahead;
        }
      }
      function z(g) {
        var m;
        var p;
        var q = g.w_size;
        do {
          p = g.window_size - g.lookahead - g.strstart;
          if (g.strstart >= q + (q - hb)) {
            pa.arraySet(g.window, g.window, q, q, 0);
            g.match_start -= q;
            g.strstart -= q;
            g.block_start -= q;
            var r = m = g.hash_size;
            do {
              var w = g.head[--r];
              g.head[r] = w >= q ? w - q : 0;
            } while (--m);
            r = m = q;
            do {
              w = g.prev[--r];
              g.prev[r] = w >= q ? w - q : 0;
            } while (--m);
            p += q;
          }
          if (g.strm.avail_in === 0) {
            break;
          }
          r = g.strm;
          w = g.window;
          var u = g.strstart + g.lookahead;
          var x = r.avail_in;
          if (x > p) {
            x = p;
          }
          m = x === 0 ? 0 : (r.avail_in -= x, pa.arraySet(w, r.input, r.next_in, x, u), r.state.wrap === 1 ? r.adler = ab(r.adler, w, x, u) : r.state.wrap === 2 && (r.adler = bb(r.adler, w, x, u)), r.next_in += x, r.total_in += x, x);
          g.lookahead += m;
          if (g.lookahead + g.insert >= Ra) {
            p = g.strstart - g.insert;
            g.ins_h = g.window[p];
            g.ins_h = (g.ins_h << g.hash_shift ^ g.window[p + 1]) & g.hash_mask;
            while (g.insert && (g.ins_h = (g.ins_h << g.hash_shift ^ g.window[p + Ra - 1]) & g.hash_mask, g.prev[p & g.w_mask] = g.head[g.ins_h], g.head[g.ins_h] = p, p++, g.insert--, !(g.lookahead + g.insert < Ra)));
          }
        } while (g.lookahead < hb && g.strm.avail_in !== 0);
      }
      function u(g, m) {
        var q;
        var r;
        while (true) {
          if (g.lookahead < hb) {
            z(g);
            if (g.lookahead < hb && m === la) {
              return ka;
            }
            if (g.lookahead === 0) {
              break;
            }
          }
          q = 0;
          if (g.lookahead >= Ra) {
            g.ins_h = (g.ins_h << g.hash_shift ^ g.window[g.strstart + Ra - 1]) & g.hash_mask;
            q = g.prev[g.strstart & g.w_mask] = g.head[g.ins_h];
            g.head[g.ins_h] = g.strstart;
          }
          if (q !== 0 && g.strstart - q <= g.w_size - hb) {
            g.match_length = p(g, q);
          }
          if (g.match_length >= Ra) {
            r = xc._tr_tally(g, g.strstart - g.match_start, g.match_length - Ra);
            g.lookahead -= g.match_length;
            if (g.match_length <= g.max_lazy_match && g.lookahead >= Ra) {
              g.match_length--;
              do {
                g.strstart++;
                g.ins_h = (g.ins_h << g.hash_shift ^ g.window[g.strstart + Ra - 1]) & g.hash_mask;
                q = g.prev[g.strstart & g.w_mask] = g.head[g.ins_h];
                g.head[g.ins_h] = g.strstart;
              } while (--g.match_length !== 0);
              g.strstart++;
            } else {
              g.strstart += g.match_length;
              g.match_length = 0;
              g.ins_h = g.window[g.strstart];
              g.ins_h = (g.ins_h << g.hash_shift ^ g.window[g.strstart + 1]) & g.hash_mask;
            }
          } else {
            r = xc._tr_tally(g, 0, g.window[g.strstart]);
            g.lookahead--;
            g.strstart++;
          }
          if (r && (Ba(g, false), g.strm.avail_out === 0)) {
            return ka;
          }
        }
        g.insert = g.strstart < Ra - 1 ? g.strstart : Ra - 1;
        if (m === jb) {
          Ba(g, true);
          if (g.strm.avail_out === 0) {
            return Mb;
          } else {
            return Fc;
          }
        } else if (g.last_lit && (Ba(g, false), g.strm.avail_out === 0)) {
          return ka;
        } else {
          return wb;
        }
      }
      function H(g, m) {
        var q;
        var r;
        var u;
        while (true) {
          if (g.lookahead < hb) {
            z(g);
            if (g.lookahead < hb && m === la) {
              return ka;
            }
            if (g.lookahead === 0) {
              break;
            }
          }
          q = 0;
          if (g.lookahead >= Ra) {
            g.ins_h = (g.ins_h << g.hash_shift ^ g.window[g.strstart + Ra - 1]) & g.hash_mask;
            q = g.prev[g.strstart & g.w_mask] = g.head[g.ins_h];
            g.head[g.ins_h] = g.strstart;
          }
          g.prev_length = g.match_length;
          g.prev_match = g.match_start;
          g.match_length = Ra - 1;
          if (q !== 0 && g.prev_length < g.max_lazy_match && g.strstart - q <= g.w_size - hb) {
            g.match_length = p(g, q);
            if (g.match_length <= 5 && (g.strategy === Ua || g.match_length === Ra && g.strstart - g.match_start > 4096)) {
              g.match_length = Ra - 1;
            }
          }
          if (g.prev_length >= Ra && g.match_length <= g.prev_length) {
            u = g.strstart + g.lookahead - Ra;
            r = xc._tr_tally(g, g.strstart - 1 - g.prev_match, g.prev_length - Ra);
            g.lookahead -= g.prev_length - 1;
            g.prev_length -= 2;
            do {
              if (++g.strstart <= u) {
                g.ins_h = (g.ins_h << g.hash_shift ^ g.window[g.strstart + Ra - 1]) & g.hash_mask;
                q = g.prev[g.strstart & g.w_mask] = g.head[g.ins_h];
                g.head[g.ins_h] = g.strstart;
              }
            } while (--g.prev_length !== 0);
            g.match_available = 0;
            g.match_length = Ra - 1;
            g.strstart++;
            if (r && (Ba(g, false), g.strm.avail_out === 0)) {
              return ka;
            }
          } else if (g.match_available) {
            r = xc._tr_tally(g, 0, g.window[g.strstart - 1]);
            if (r) {
              Ba(g, false);
            }
            g.strstart++;
            g.lookahead--;
            if (g.strm.avail_out === 0) {
              return ka;
            }
          } else {
            g.match_available = 1;
            g.strstart++;
            g.lookahead--;
          }
        }
        if (g.match_available) {
          xc._tr_tally(g, 0, g.window[g.strstart - 1]);
          g.match_available = 0;
        }
        g.insert = g.strstart < Ra - 1 ? g.strstart : Ra - 1;
        if (m === jb) {
          Ba(g, true);
          if (g.strm.avail_out === 0) {
            return Mb;
          } else {
            return Fc;
          }
        } else if (g.last_lit && (Ba(g, false), g.strm.avail_out === 0)) {
          return ka;
        } else {
          return wb;
        }
      }
      function ha(g, m, p, q, r) {
        this.good_length = g;
        this.max_lazy = m;
        this.nice_length = p;
        this.max_chain = q;
        this.func = r;
      }
      function N() {
        this.strm = null;
        this.status = 0;
        this.pending_buf = null;
        this.wrap = this.pending = this.pending_out = this.pending_buf_size = 0;
        this.gzhead = null;
        this.gzindex = 0;
        this.method = V;
        this.last_flush = -1;
        this.w_mask = this.w_bits = this.w_size = 0;
        this.window = null;
        this.window_size = 0;
        this.head = this.prev = null;
        this.nice_match = this.good_match = this.strategy = this.level = this.max_lazy_match = this.max_chain_length = this.prev_length = this.lookahead = this.match_start = this.strstart = this.match_available = this.prev_match = this.match_length = this.block_start = this.hash_shift = this.hash_mask = this.hash_bits = this.hash_size = this.ins_h = 0;
        this.dyn_ltree = new pa.Buf16(qd * 2);
        this.dyn_dtree = new pa.Buf16((jc * 2 + 1) * 2);
        this.bl_tree = new pa.Buf16((r * 2 + 1) * 2);
        X(this.dyn_ltree);
        X(this.dyn_dtree);
        X(this.bl_tree);
        this.bl_desc = this.d_desc = this.l_desc = null;
        this.bl_count = new pa.Buf16(Ve + 1);
        this.heap = new pa.Buf16(Ea * 2 + 1);
        X(this.heap);
        this.heap_max = this.heap_len = 0;
        this.depth = new pa.Buf16(Ea * 2 + 1);
        X(this.depth);
        this.bi_valid = this.bi_buf = this.insert = this.matches = this.static_len = this.opt_len = this.d_buf = this.last_lit = this.lit_bufsize = this.l_buf = 0;
      }
      function ia(g) {
        var m;
        if (g && g.state) {
          g.total_in = g.total_out = 0;
          g.data_type = zd;
          m = g.state;
          m.pending = 0;
          m.pending_out = 0;
          if (m.wrap < 0) {
            m.wrap = -m.wrap;
          }
          m.status = m.wrap ? Ma : ma;
          g.adler = m.wrap === 2 ? 0 : 1;
          m.last_flush = la;
          xc._tr_init(m);
          return wa;
        } else {
          return M(g, Ca);
        }
      }
      function ue(g) {
        var m = ia(g);
        if (m === wa) {
          g = g.state;
          g.window_size = g.w_size * 2;
          X(g.head);
          g.max_lazy_match = Nb[g.level].max_lazy;
          g.good_match = Nb[g.level].good_length;
          g.nice_match = Nb[g.level].nice_length;
          g.max_chain_length = Nb[g.level].max_chain;
          g.strstart = 0;
          g.block_start = 0;
          g.lookahead = 0;
          g.insert = 0;
          g.match_length = g.prev_length = Ra - 1;
          g.match_available = 0;
          g.ins_h = 0;
        }
        return m;
      }
      function Ic(g, m, p, q, r, w) {
        if (!g) {
          return Ca;
        }
        var v = 1;
        if (m === gb) {
          m = 6;
        }
        if (q < 0) {
          v = 0;
          q = -q;
        } else if (q > 15) {
          v = 2;
          q -= 16;
        }
        if (r < 1 || r > rb || p !== V || q < 8 || q > 15 || m < 0 || m > 9 || w < 0 || w > Wb) {
          return M(g, Ca);
        }
        if (q === 8) {
          q = 9;
        }
        var u = new N();
        g.state = u;
        u.strm = g;
        u.wrap = v;
        u.gzhead = null;
        u.w_bits = q;
        u.w_size = 1 << u.w_bits;
        u.w_mask = u.w_size - 1;
        u.hash_bits = r + 7;
        u.hash_size = 1 << u.hash_bits;
        u.hash_mask = u.hash_size - 1;
        u.hash_shift = ~~((u.hash_bits + Ra - 1) / Ra);
        u.window = new pa.Buf8(u.w_size * 2);
        u.head = new pa.Buf16(u.hash_size);
        u.prev = new pa.Buf16(u.w_size);
        u.lit_bufsize = 1 << r + 6;
        u.pending_buf_size = u.lit_bufsize * 4;
        u.pending_buf = new pa.Buf8(u.pending_buf_size);
        u.d_buf = u.lit_bufsize * 1;
        u.l_buf = u.lit_bufsize * 3;
        u.level = m;
        u.strategy = w;
        u.method = p;
        return ue(g);
      }
      var pa = x("../utils/common");
      var xc = x("./trees");
      var ab = x("./adler32");
      var bb = x("./crc32");
      var gc = x("./messages");
      var la = 0;
      var jb = 4;
      var wa = 0;
      var Ca = -2;
      var gb = -1;
      var Ua = 1;
      var Wb = 4;
      var zd = 2;
      var V = 8;
      var rb = 9;
      var Ea = 286;
      var jc = 30;
      var r = 19;
      var qd = Ea * 2 + 1;
      var Ve = 15;
      var Ra = 3;
      var Ja = 258;
      var hb = Ja + Ra + 1;
      var Ma = 42;
      var ma = 113;
      var ka = 1;
      var wb = 2;
      var Mb = 3;
      var Fc = 4;
      var Nb = [new ha(0, 0, 0, 0, function (g, m) {
        var p = 65535;
        for (p > g.pending_buf_size - 5 && (p = g.pending_buf_size - 5);;) {
          if (g.lookahead <= 1) {
            z(g);
            if (g.lookahead === 0 && m === la) {
              return ka;
            }
            if (g.lookahead === 0) {
              break;
            }
          }
          g.strstart += g.lookahead;
          g.lookahead = 0;
          var q = g.block_start + p;
          if ((g.strstart === 0 || g.strstart >= q) && (g.lookahead = g.strstart - q, g.strstart = q, Ba(g, false), g.strm.avail_out === 0) || g.strstart - g.block_start >= g.w_size - hb && (Ba(g, false), g.strm.avail_out === 0)) {
            return ka;
          }
        }
        g.insert = 0;
        if (m === jb) {
          Ba(g, true);
          if (g.strm.avail_out === 0) {
            return Mb;
          } else {
            return Fc;
          }
        } else {
          if (g.strstart > g.block_start) {
            Ba(g, false);
          }
          return ka;
        }
      }), new ha(4, 4, 8, 4, u), new ha(4, 5, 16, 8, u), new ha(4, 6, 32, 32, u), new ha(4, 4, 16, 16, H), new ha(8, 16, 32, 32, H), new ha(8, 16, 128, 128, H), new ha(8, 32, 128, 256, H), new ha(32, 128, 258, 1024, H), new ha(32, 258, 258, 4096, H)];
      I.deflateInit = function (g, m) {
        return Ic(g, m, V, 15, 8, 0);
      };
      I.deflateInit2 = Ic;
      I.deflateReset = ue;
      I.deflateResetKeep = ia;
      I.deflateSetHeader = function (g, m) {
        if (g && g.state) {
          if (g.state.wrap !== 2) {
            return Ca;
          } else {
            g.state.gzhead = m;
            return wa;
          }
        } else {
          return Ca;
        }
      };
      I.deflate = function (p, u) {
        var v;
        var r;
        if (!p || !p.state || u > 5 || u < 0) {
          if (p) {
            return M(p, Ca);
          } else {
            return Ca;
          }
        }
        r = p.state;
        if (!p.output || !p.input && p.avail_in !== 0 || r.status === 666 && u !== jb) {
          return M(p, p.avail_out === 0 ? -5 : Ca);
        }
        r.strm = p;
        v = r.last_flush;
        r.last_flush = u;
        if (r.status === Ma) {
          if (r.wrap === 2) {
            p.adler = 0;
            m(r, 31);
            m(r, 139);
            m(r, 8);
            if (r.gzhead) {
              m(r, (r.gzhead.text ? 1 : 0) + (r.gzhead.hcrc ? 2 : 0) + (r.gzhead.extra ? 4 : 0) + (r.gzhead.name ? 8 : 0) + (r.gzhead.comment ? 16 : 0));
              m(r, r.gzhead.time & 255);
              m(r, r.gzhead.time >> 8 & 255);
              m(r, r.gzhead.time >> 16 & 255);
              m(r, r.gzhead.time >> 24 & 255);
              m(r, r.level === 9 ? 2 : r.strategy >= 2 || r.level < 2 ? 4 : 0);
              m(r, r.gzhead.os & 255);
              if (r.gzhead.extra && r.gzhead.extra.length) {
                m(r, r.gzhead.extra.length & 255);
                m(r, r.gzhead.extra.length >> 8 & 255);
              }
              if (r.gzhead.hcrc) {
                p.adler = bb(p.adler, r.pending_buf, r.pending, 0);
              }
              r.gzindex = 0;
              r.status = 69;
            } else {
              m(r, 0);
              m(r, 0);
              m(r, 0);
              m(r, 0);
              m(r, 0);
              m(r, r.level === 9 ? 2 : r.strategy >= 2 || r.level < 2 ? 4 : 0);
              m(r, 3);
              r.status = ma;
            }
          } else {
            var x = V + (r.w_bits - 8 << 4) << 8;
            x |= (r.strategy >= 2 || r.level < 2 ? 0 : r.level < 6 ? 1 : r.level === 6 ? 2 : 3) << 6;
            if (r.strstart !== 0) {
              x |= 32;
            }
            r.status = ma;
            g(r, x + (31 - x % 31));
            if (r.strstart !== 0) {
              g(r, p.adler >>> 16);
              g(r, p.adler & 65535);
            }
            p.adler = 1;
          }
        }
        if (r.status === 69) {
          if (r.gzhead.extra) {
            for (x = r.pending; r.gzindex < (r.gzhead.extra.length & 65535) && (r.pending !== r.pending_buf_size || (r.gzhead.hcrc && r.pending > x && (p.adler = bb(p.adler, r.pending_buf, r.pending - x, x)), q(p), x = r.pending, r.pending !== r.pending_buf_size));) {
              m(r, r.gzhead.extra[r.gzindex] & 255);
              r.gzindex++;
            }
            if (r.gzhead.hcrc && r.pending > x) {
              p.adler = bb(p.adler, r.pending_buf, r.pending - x, x);
            }
            if (r.gzindex === r.gzhead.extra.length) {
              r.gzindex = 0;
              r.status = 73;
            }
          } else {
            r.status = 73;
          }
        }
        if (r.status === 73) {
          if (r.gzhead.name) {
            x = r.pending;
            do {
              if (r.pending === r.pending_buf_size && (r.gzhead.hcrc && r.pending > x && (p.adler = bb(p.adler, r.pending_buf, r.pending - x, x)), q(p), x = r.pending, r.pending === r.pending_buf_size)) {
                var w = 1;
                break;
              }
              w = r.gzindex < r.gzhead.name.length ? r.gzhead.name.charCodeAt(r.gzindex++) & 255 : 0;
              m(r, w);
            } while (w !== 0);
            if (r.gzhead.hcrc && r.pending > x) {
              p.adler = bb(p.adler, r.pending_buf, r.pending - x, x);
            }
            if (w === 0) {
              r.gzindex = 0;
              r.status = 91;
            }
          } else {
            r.status = 91;
          }
        }
        if (r.status === 91) {
          if (r.gzhead.comment) {
            x = r.pending;
            do {
              if (r.pending === r.pending_buf_size && (r.gzhead.hcrc && r.pending > x && (p.adler = bb(p.adler, r.pending_buf, r.pending - x, x)), q(p), x = r.pending, r.pending === r.pending_buf_size)) {
                w = 1;
                break;
              }
              w = r.gzindex < r.gzhead.comment.length ? r.gzhead.comment.charCodeAt(r.gzindex++) & 255 : 0;
              m(r, w);
            } while (w !== 0);
            if (r.gzhead.hcrc && r.pending > x) {
              p.adler = bb(p.adler, r.pending_buf, r.pending - x, x);
            }
            if (w === 0) {
              r.status = 103;
            }
          } else {
            r.status = 103;
          }
        }
        if (r.status === 103) {
          if (r.gzhead.hcrc) {
            if (r.pending + 2 > r.pending_buf_size) {
              q(p);
            }
            if (r.pending + 2 <= r.pending_buf_size) {
              m(r, p.adler & 255);
              m(r, p.adler >> 8 & 255);
              p.adler = 0;
              r.status = ma;
            }
          } else {
            r.status = ma;
          }
        }
        if (r.pending !== 0) {
          q(p);
          if (p.avail_out === 0) {
            r.last_flush = -1;
            return wa;
          }
        } else if (p.avail_in === 0 && (u << 1) - (u > 4 ? 9 : 0) <= (v << 1) - (v > 4 ? 9 : 0) && u !== jb) {
          return M(p, -5);
        }
        if (r.status === 666 && p.avail_in !== 0) {
          return M(p, -5);
        }
        if (p.avail_in !== 0 || r.lookahead !== 0 || u !== la && r.status !== 666) {
          if (r.strategy === 2) {
            a: {
              var E;
              while (true) {
                if (r.lookahead === 0 && (z(r), r.lookahead === 0)) {
                  if (u === la) {
                    var H = ka;
                    break a;
                  }
                  break;
                }
                r.match_length = 0;
                E = xc._tr_tally(r, 0, r.window[r.strstart]);
                r.lookahead--;
                r.strstart++;
                if (E && (Ba(r, false), r.strm.avail_out === 0)) {
                  H = ka;
                  break a;
                }
              }
              r.insert = 0;
              H = u === jb ? (Ba(r, true), r.strm.avail_out === 0 ? Mb : Fc) : r.last_lit && (Ba(r, false), r.strm.avail_out === 0) ? ka : wb;
            }
          } else if (r.strategy === 3) {
            a: {
              var N;
              var I;
              for (E = r.window;;) {
                if (r.lookahead <= Ja) {
                  z(r);
                  if (r.lookahead <= Ja && u === la) {
                    H = ka;
                    break a;
                  }
                  if (r.lookahead === 0) {
                    break;
                  }
                }
                r.match_length = 0;
                if (r.lookahead >= Ra && r.strstart > 0 && (I = r.strstart - 1, N = E[I], N === E[++I] && N === E[++I] && N === E[++I])) {
                  for (v = r.strstart + Ja; N === E[++I] && N === E[++I] && N === E[++I] && N === E[++I] && N === E[++I] && N === E[++I] && N === E[++I] && N === E[++I] && I < v;);
                  r.match_length = Ja - (v - I);
                  if (r.match_length > r.lookahead) {
                    r.match_length = r.lookahead;
                  }
                }
                if (r.match_length >= Ra) {
                  H = xc._tr_tally(r, 1, r.match_length - Ra);
                  r.lookahead -= r.match_length;
                  r.strstart += r.match_length;
                  r.match_length = 0;
                } else {
                  H = xc._tr_tally(r, 0, r.window[r.strstart]);
                  r.lookahead--;
                  r.strstart++;
                }
                if (H && (Ba(r, false), r.strm.avail_out === 0)) {
                  H = ka;
                  break a;
                }
              }
              r.insert = 0;
              H = u === jb ? (Ba(r, true), r.strm.avail_out === 0 ? Mb : Fc) : r.last_lit && (Ba(r, false), r.strm.avail_out === 0) ? ka : wb;
            }
          } else {
            H = Nb[r.level].func(r, u);
          }
          if (H === Mb || H === Fc) {
            r.status = 666;
          }
          if (H === ka || H === Mb) {
            if (p.avail_out === 0) {
              r.last_flush = -1;
            }
            return wa;
          }
          if (H === wb && (u === 1 ? xc._tr_align(r) : u !== 5 && (xc._tr_stored_block(r, 0, 0, false), u === 3 && (X(r.head), r.lookahead === 0 && (r.strstart = 0, r.block_start = 0, r.insert = 0))), q(p), p.avail_out === 0)) {
            r.last_flush = -1;
            return wa;
          }
        }
        if (u !== jb) {
          return wa;
        } else if (r.wrap <= 0) {
          return 1;
        } else {
          if (r.wrap === 2) {
            m(r, p.adler & 255);
            m(r, p.adler >> 8 & 255);
            m(r, p.adler >> 16 & 255);
            m(r, p.adler >> 24 & 255);
            m(r, p.total_in & 255);
            m(r, p.total_in >> 8 & 255);
            m(r, p.total_in >> 16 & 255);
            m(r, p.total_in >> 24 & 255);
          } else {
            g(r, p.adler >>> 16);
            g(r, p.adler & 65535);
          }
          q(p);
          if (r.wrap > 0) {
            r.wrap = -r.wrap;
          }
          if (r.pending !== 0) {
            return wa;
          } else {
            return 1;
          }
        }
      };
      I.deflateEnd = function (g) {
        var m;
        if (g && g.state) {
          m = g.state.status;
          if (m !== Ma && m !== 69 && m !== 73 && m !== 91 && m !== 103 && m !== ma && m !== 666) {
            return M(g, Ca);
          } else {
            g.state = null;
            if (m === ma) {
              return M(g, -3);
            } else {
              return wa;
            }
          }
        } else {
          return Ca;
        }
      };
      I.deflateSetDictionary = function (g, m) {
        var p;
        var q;
        var r;
        var w = m.length;
        if (!g || !g.state || (p = g.state, q = p.wrap, q === 2 || q === 1 && p.status !== Ma || p.lookahead)) {
          return Ca;
        }
        if (q === 1) {
          g.adler = ab(g.adler, m, w, 0);
        }
        p.wrap = 0;
        if (w >= p.w_size) {
          if (q === 0) {
            X(p.head);
            p.strstart = 0;
            p.block_start = 0;
            p.insert = 0;
          }
          r = new pa.Buf8(p.w_size);
          pa.arraySet(r, m, w - p.w_size, p.w_size, 0);
          m = r;
          w = p.w_size;
        }
        r = g.avail_in;
        var u = g.next_in;
        var x = g.input;
        g.avail_in = w;
        g.next_in = 0;
        g.input = m;
        for (z(p); p.lookahead >= Ra;) {
          m = p.strstart;
          w = p.lookahead - (Ra - 1);
          do {
            p.ins_h = (p.ins_h << p.hash_shift ^ p.window[m + Ra - 1]) & p.hash_mask;
            p.prev[m & p.w_mask] = p.head[p.ins_h];
            p.head[p.ins_h] = m;
            m++;
          } while (--w);
          p.strstart = m;
          p.lookahead = Ra - 1;
          z(p);
        }
        p.strstart += p.lookahead;
        p.block_start = p.strstart;
        p.insert = p.lookahead;
        p.lookahead = 0;
        p.match_length = p.prev_length = Ra - 1;
        p.match_available = 0;
        g.next_in = u;
        g.input = x;
        g.avail_in = r;
        p.wrap = q;
        return wa;
      };
      I.deflateInfo = "pako deflate (from Nodeca project)";
    }, {
      "../utils/common": 3,
      "./adler32": 5,
      "./crc32": 7,
      "./messages": 13,
      "./trees": 14
    }],
    9: [function (x, E, I) {
      E.exports = function () {
        this.os = this.xflags = this.time = this.text = 0;
        this.extra = null;
        this.extra_len = 0;
        this.comment = this.name = "";
        this.hcrc = 0;
        this.done = false;
      };
    }, {}],
    10: [function (x, E, I) {
      E.exports = function (x, E) {
        var q;
        var I;
        var m;
        var g = x.state;
        var p = x.next_in;
        var z = x.input;
        var u = p + (x.avail_in - 5);
        var H = x.next_out;
        var M = x.output;
        E = H - (E - x.avail_out);
        var N = H + (x.avail_out - 257);
        var ia = g.dmax;
        var X = g.wsize;
        var Ic = g.whave;
        var pa = g.wnext;
        var xc = g.window;
        var ab = g.hold;
        var bb = g.bits;
        var gc = g.lencode;
        var la = g.distcode;
        var jb = (1 << g.lenbits) - 1;
        var wa = (1 << g.distbits) - 1;
        a: do {
          if (bb < 15) {
            ab += z[p++] << bb;
            bb += 8;
            ab += z[p++] << bb;
            bb += 8;
          }
          var Ca = gc[ab & jb];
          b: while (true) {
            q = Ca >>> 24;
            ab >>>= q;
            bb -= q;
            q = Ca >>> 16 & 255;
            if (q === 0) {
              M[H++] = Ca & 65535;
            } else {
              if (!(q & 16)) {
                if ((q & 64) === 0) {
                  Ca = gc[(Ca & 65535) + (ab & (1 << q) - 1)];
                  continue b;
                }
                if (q & 32) {
                  g.mode = 12;
                  break a;
                }
                x.msg = "invalid literal/length code";
                g.mode = 30;
                break a;
              }
              var gb = Ca & 65535;
              if (q &= 15) {
                if (bb < q) {
                  ab += z[p++] << bb;
                  bb += 8;
                }
                gb += ab & (1 << q) - 1;
                ab >>>= q;
                bb -= q;
              }
              if (bb < 15) {
                ab += z[p++] << bb;
                bb += 8;
                ab += z[p++] << bb;
                bb += 8;
              }
              Ca = la[ab & wa];
              c: while (true) {
                q = Ca >>> 24;
                ab >>>= q;
                bb -= q;
                q = Ca >>> 16 & 255;
                if (!(q & 16)) {
                  if ((q & 64) === 0) {
                    Ca = la[(Ca & 65535) + (ab & (1 << q) - 1)];
                    continue c;
                  }
                  x.msg = "invalid distance code";
                  g.mode = 30;
                  break a;
                }
                I = Ca & 65535;
                q &= 15;
                if (bb < q) {
                  ab += z[p++] << bb;
                  bb += 8;
                  if (bb < q) {
                    ab += z[p++] << bb;
                    bb += 8;
                  }
                }
                I += ab & (1 << q) - 1;
                if (I > ia) {
                  x.msg = "invalid distance too far back";
                  g.mode = 30;
                  break a;
                }
                ab >>>= q;
                bb -= q;
                q = H - E;
                if (I > q) {
                  q = I - q;
                  if (q > Ic && g.sane) {
                    x.msg = "invalid distance too far back";
                    g.mode = 30;
                    break a;
                  }
                  Ca = 0;
                  m = xc;
                  if (pa === 0) {
                    Ca += X - q;
                    if (q < gb) {
                      gb -= q;
                      do {
                        M[H++] = xc[Ca++];
                      } while (--q);
                      Ca = H - I;
                      m = M;
                    }
                  } else if (pa < q) {
                    Ca += X + pa - q;
                    q -= pa;
                    if (q < gb) {
                      gb -= q;
                      do {
                        M[H++] = xc[Ca++];
                      } while (--q);
                      Ca = 0;
                      if (pa < gb) {
                        q = pa;
                        gb -= q;
                        do {
                          M[H++] = xc[Ca++];
                        } while (--q);
                        Ca = H - I;
                        m = M;
                      }
                    }
                  } else {
                    Ca += pa - q;
                    if (q < gb) {
                      gb -= q;
                      do {
                        M[H++] = xc[Ca++];
                      } while (--q);
                      Ca = H - I;
                      m = M;
                    }
                  }
                  while (gb > 2) {
                    M[H++] = m[Ca++];
                    M[H++] = m[Ca++];
                    M[H++] = m[Ca++];
                    gb -= 3;
                  }
                  if (gb) {
                    M[H++] = m[Ca++];
                    if (gb > 1) {
                      M[H++] = m[Ca++];
                    }
                  }
                } else {
                  Ca = H - I;
                  do {
                    M[H++] = M[Ca++];
                    M[H++] = M[Ca++];
                    M[H++] = M[Ca++];
                    gb -= 3;
                  } while (gb > 2);
                  if (gb) {
                    M[H++] = M[Ca++];
                    if (gb > 1) {
                      M[H++] = M[Ca++];
                    }
                  }
                }
                break;
              }
            }
            break;
          }
        } while (p < u && H < N);
        gb = bb >> 3;
        p -= gb;
        bb -= gb << 3;
        x.next_in = p;
        x.next_out = H;
        x.avail_in = p < u ? 5 + (u - p) : 5 - (p - u);
        x.avail_out = H < N ? 257 + (N - H) : 257 - (H - N);
        g.hold = ab & (1 << bb) - 1;
        g.bits = bb;
      };
    }, {}],
    11: [function (x, E, I) {
      function M(g) {
        return (g >>> 24 & 255) + (g >>> 8 & 65280) + ((g & 65280) << 8) + ((g & 255) << 24);
      }
      function X() {
        this.mode = 0;
        this.last = false;
        this.wrap = 0;
        this.havedict = false;
        this.total = this.check = this.dmax = this.flags = 0;
        this.head = null;
        this.wnext = this.whave = this.wsize = this.wbits = 0;
        this.window = null;
        this.extra = this.offset = this.length = this.bits = this.hold = 0;
        this.distcode = this.lencode = null;
        this.have = this.ndist = this.nlen = this.ncode = this.distbits = this.lenbits = 0;
        this.next = null;
        this.lens = new H.Buf16(320);
        this.work = new H.Buf16(288);
        this.distdyn = this.lendyn = null;
        this.was = this.back = this.sane = 0;
      }
      function q(g) {
        var m;
        if (g && g.state) {
          m = g.state;
          g.total_in = g.total_out = m.total = 0;
          g.msg = "";
          if (m.wrap) {
            g.adler = m.wrap & 1;
          }
          m.mode = xc;
          m.last = 0;
          m.havedict = 0;
          m.dmax = 32768;
          m.head = null;
          m.hold = 0;
          m.bits = 0;
          m.lencode = m.lendyn = new H.Buf32(ab);
          m.distcode = m.distdyn = new H.Buf32(bb);
          m.sane = 1;
          m.back = -1;
          return Ic;
        } else {
          return pa;
        }
      }
      function Ba(g) {
        var m;
        if (g && g.state) {
          m = g.state;
          m.wsize = 0;
          m.whave = 0;
          m.wnext = 0;
          return q(g);
        } else {
          return pa;
        }
      }
      function m(g, m) {
        var p;
        var q;
        if (g && g.state) {
          q = g.state;
          if (m < 0) {
            p = 0;
            m = -m;
          } else {
            p = (m >> 4) + 1;
            if (m < 48) {
              m &= 15;
            }
          }
          if (m && (m < 8 || m > 15)) {
            return pa;
          } else {
            if (q.window !== null && q.wbits !== m) {
              q.window = null;
            }
            q.wrap = p;
            q.wbits = m;
            return Ba(g);
          }
        } else {
          return pa;
        }
      }
      function g(g, p) {
        var q;
        var u;
        if (g) {
          u = new X();
          g.state = u;
          u.window = null;
          q = m(g, p);
          if (q !== Ic) {
            g.state = null;
          }
          return q;
        } else {
          return pa;
        }
      }
      function p(g, m, p, q) {
        var u;
        g = g.state;
        if (g.window === null) {
          g.wsize = 1 << g.wbits;
          g.wnext = 0;
          g.whave = 0;
          g.window = new H.Buf8(g.wsize);
        }
        if (q >= g.wsize) {
          H.arraySet(g.window, m, p - g.wsize, g.wsize, 0);
          g.wnext = 0;
          g.whave = g.wsize;
        } else {
          u = g.wsize - g.wnext;
          if (u > q) {
            u = q;
          }
          H.arraySet(g.window, m, p - q, u, g.wnext);
          q -= u;
          if (q) {
            H.arraySet(g.window, m, p - q, q, 0);
            g.wnext = q;
            g.whave = g.wsize;
          } else {
            g.wnext += u;
            if (g.wnext === g.wsize) {
              g.wnext = 0;
            }
            if (g.whave < g.wsize) {
              g.whave += u;
            }
          }
        }
        return 0;
      }
      var z;
      var u;
      var H = x("../utils/common");
      var ha = x("./adler32");
      var N = x("./crc32");
      var ia = x("./inffast");
      var ue = x("./inftrees");
      var Ic = 0;
      var pa = -2;
      var xc = 1;
      var ab = 852;
      var bb = 592;
      var gc = true;
      I.inflateReset = Ba;
      I.inflateReset2 = m;
      I.inflateResetKeep = q;
      I.inflateInit = function (m) {
        return g(m, 15);
      };
      I.inflateInit2 = g;
      I.inflate = function (g, m) {
        var q;
        var x;
        var E;
        var I;
        var la;
        var X;
        var V;
        var Ba = 0;
        var Ea = new H.Buf8(4);
        var jb = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
        if (!g || !g.state || !g.output || !g.input && g.avail_in !== 0) {
          return pa;
        }
        var r = g.state;
        if (r.mode === 12) {
          r.mode = 13;
        }
        var ab = g.next_out;
        var bb = g.output;
        var Ra = g.avail_out;
        var Ja = g.next_in;
        var hb = g.input;
        var Ma = g.avail_in;
        var ma = r.hold;
        var ka = r.bits;
        var wb = Ma;
        var Mb = Ra;
        var Fc = Ic;
        a: while (true) {
          switch (r.mode) {
            case xc:
              if (r.wrap === 0) {
                r.mode = 13;
                break;
              }
              while (ka < 16) {
                if (Ma === 0) {
                  break a;
                }
                Ma--;
                ma += hb[Ja++] << ka;
                ka += 8;
              }
              if (r.wrap & 2 && ma === 35615) {
                r.check = 0;
                Ea[0] = ma & 255;
                Ea[1] = ma >>> 8 & 255;
                r.check = N(r.check, Ea, 2, 0);
                ka = ma = 0;
                r.mode = 2;
                break;
              }
              r.flags = 0;
              if (r.head) {
                r.head.done = false;
              }
              if (!(r.wrap & 1) || (((ma & 255) << 8) + (ma >> 8)) % 31) {
                g.msg = "incorrect header check";
                r.mode = 30;
                break;
              }
              if ((ma & 15) !== 8) {
                g.msg = "unknown compression method";
                r.mode = 30;
                break;
              }
              ma >>>= 4;
              ka -= 4;
              X = (ma & 15) + 8;
              if (r.wbits === 0) {
                r.wbits = X;
              } else if (X > r.wbits) {
                g.msg = "invalid window size";
                r.mode = 30;
                break;
              }
              r.dmax = 1 << X;
              g.adler = r.check = 1;
              r.mode = ma & 512 ? 10 : 12;
              ka = ma = 0;
              break;
            case 2:
              while (ka < 16) {
                if (Ma === 0) {
                  break a;
                }
                Ma--;
                ma += hb[Ja++] << ka;
                ka += 8;
              }
              r.flags = ma;
              if ((r.flags & 255) !== 8) {
                g.msg = "unknown compression method";
                r.mode = 30;
                break;
              }
              if (r.flags & 57344) {
                g.msg = "unknown header flags set";
                r.mode = 30;
                break;
              }
              if (r.head) {
                r.head.text = ma >> 8 & 1;
              }
              if (r.flags & 512) {
                Ea[0] = ma & 255;
                Ea[1] = ma >>> 8 & 255;
                r.check = N(r.check, Ea, 2, 0);
              }
              ka = ma = 0;
              r.mode = 3;
            case 3:
              while (ka < 32) {
                if (Ma === 0) {
                  break a;
                }
                Ma--;
                ma += hb[Ja++] << ka;
                ka += 8;
              }
              if (r.head) {
                r.head.time = ma;
              }
              if (r.flags & 512) {
                Ea[0] = ma & 255;
                Ea[1] = ma >>> 8 & 255;
                Ea[2] = ma >>> 16 & 255;
                Ea[3] = ma >>> 24 & 255;
                r.check = N(r.check, Ea, 4, 0);
              }
              ka = ma = 0;
              r.mode = 4;
            case 4:
              while (ka < 16) {
                if (Ma === 0) {
                  break a;
                }
                Ma--;
                ma += hb[Ja++] << ka;
                ka += 8;
              }
              if (r.head) {
                r.head.xflags = ma & 255;
                r.head.os = ma >> 8;
              }
              if (r.flags & 512) {
                Ea[0] = ma & 255;
                Ea[1] = ma >>> 8 & 255;
                r.check = N(r.check, Ea, 2, 0);
              }
              ka = ma = 0;
              r.mode = 5;
            case 5:
              if (r.flags & 1024) {
                while (ka < 16) {
                  if (Ma === 0) {
                    break a;
                  }
                  Ma--;
                  ma += hb[Ja++] << ka;
                  ka += 8;
                }
                r.length = ma;
                if (r.head) {
                  r.head.extra_len = ma;
                }
                if (r.flags & 512) {
                  Ea[0] = ma & 255;
                  Ea[1] = ma >>> 8 & 255;
                  r.check = N(r.check, Ea, 2, 0);
                }
                ka = ma = 0;
              } else if (r.head) {
                r.head.extra = null;
              }
              r.mode = 6;
            case 6:
              if (r.flags & 1024 && (q = r.length, q > Ma && (q = Ma), q && (r.head && (X = r.head.extra_len - r.length, r.head.extra ||= Array(r.head.extra_len), H.arraySet(r.head.extra, hb, Ja, q, X)), r.flags & 512 && (r.check = N(r.check, hb, q, Ja)), Ma -= q, Ja += q, r.length -= q), r.length)) {
                break a;
              }
              r.length = 0;
              r.mode = 7;
            case 7:
              if (r.flags & 2048) {
                if (Ma === 0) {
                  break a;
                }
                q = 0;
                do {
                  X = hb[Ja + q++];
                  if (r.head && X && r.length < 65536) {
                    r.head.name += String.fromCharCode(X);
                  }
                } while (X && q < Ma);
                if (r.flags & 512) {
                  r.check = N(r.check, hb, q, Ja);
                }
                Ma -= q;
                Ja += q;
                if (X) {
                  break a;
                }
              } else if (r.head) {
                r.head.name = null;
              }
              r.length = 0;
              r.mode = 8;
            case 8:
              if (r.flags & 4096) {
                if (Ma === 0) {
                  break a;
                }
                q = 0;
                do {
                  X = hb[Ja + q++];
                  if (r.head && X && r.length < 65536) {
                    r.head.comment += String.fromCharCode(X);
                  }
                } while (X && q < Ma);
                if (r.flags & 512) {
                  r.check = N(r.check, hb, q, Ja);
                }
                Ma -= q;
                Ja += q;
                if (X) {
                  break a;
                }
              } else if (r.head) {
                r.head.comment = null;
              }
              r.mode = 9;
            case 9:
              if (r.flags & 512) {
                while (ka < 16) {
                  if (Ma === 0) {
                    break a;
                  }
                  Ma--;
                  ma += hb[Ja++] << ka;
                  ka += 8;
                }
                if (ma !== (r.check & 65535)) {
                  g.msg = "header crc mismatch";
                  r.mode = 30;
                  break;
                }
                ka = ma = 0;
              }
              if (r.head) {
                r.head.hcrc = r.flags >> 9 & 1;
                r.head.done = true;
              }
              g.adler = r.check = 0;
              r.mode = 12;
              break;
            case 10:
              while (ka < 32) {
                if (Ma === 0) {
                  break a;
                }
                Ma--;
                ma += hb[Ja++] << ka;
                ka += 8;
              }
              g.adler = r.check = M(ma);
              ka = ma = 0;
              r.mode = 11;
            case 11:
              if (r.havedict === 0) {
                g.next_out = ab;
                g.avail_out = Ra;
                g.next_in = Ja;
                g.avail_in = Ma;
                r.hold = ma;
                r.bits = ka;
                return 2;
              }
              g.adler = r.check = 1;
              r.mode = 12;
            case 12:
              if (m === 5 || m === 6) {
                break a;
              }
            case 13:
              if (r.last) {
                ma >>>= ka & 7;
                ka -= ka & 7;
                r.mode = 27;
                break;
              }
              while (ka < 3) {
                if (Ma === 0) {
                  break a;
                }
                Ma--;
                ma += hb[Ja++] << ka;
                ka += 8;
              }
              r.last = ma & 1;
              ma >>>= 1;
              --ka;
              switch (ma & 3) {
                case 0:
                  r.mode = 14;
                  break;
                case 1:
                  var Nb = r;
                  if (gc) {
                    z = new H.Buf32(512);
                    u = new H.Buf32(32);
                    for (E = 0; E < 144;) {
                      Nb.lens[E++] = 8;
                    }
                    while (E < 256) {
                      Nb.lens[E++] = 9;
                    }
                    while (E < 280) {
                      Nb.lens[E++] = 7;
                    }
                    while (E < 288) {
                      Nb.lens[E++] = 8;
                    }
                    ue(1, Nb.lens, 0, 288, z, 0, Nb.work, {
                      bits: 9
                    });
                    for (E = 0; E < 32;) {
                      Nb.lens[E++] = 5;
                    }
                    ue(2, Nb.lens, 0, 32, u, 0, Nb.work, {
                      bits: 5
                    });
                    gc = false;
                  }
                  Nb.lencode = z;
                  Nb.lenbits = 9;
                  Nb.distcode = u;
                  Nb.distbits = 5;
                  r.mode = 20;
                  if (m === 6) {
                    ma >>>= 2;
                    ka -= 2;
                    break a;
                  }
                  break;
                case 2:
                  r.mode = 17;
                  break;
                case 3:
                  g.msg = "invalid block type";
                  r.mode = 30;
              }
              ma >>>= 2;
              ka -= 2;
              break;
            case 14:
              ma >>>= ka & 7;
              for (ka -= ka & 7; ka < 32;) {
                if (Ma === 0) {
                  break a;
                }
                Ma--;
                ma += hb[Ja++] << ka;
                ka += 8;
              }
              if ((ma & 65535) !== (ma >>> 16 ^ 65535)) {
                g.msg = "invalid stored block lengths";
                r.mode = 30;
                break;
              }
              r.length = ma & 65535;
              ma = 0;
              ka = 0;
              r.mode = 15;
              if (m === 6) {
                break a;
              }
            case 15:
              r.mode = 16;
            case 16:
              if (q = r.length) {
                if (q > Ma) {
                  q = Ma;
                }
                if (q > Ra) {
                  q = Ra;
                }
                if (q === 0) {
                  break a;
                }
                H.arraySet(bb, hb, Ja, q, ab);
                Ma -= q;
                Ja += q;
                Ra -= q;
                ab += q;
                r.length -= q;
                break;
              }
              r.mode = 12;
              break;
            case 17:
              while (ka < 14) {
                if (Ma === 0) {
                  break a;
                }
                Ma--;
                ma += hb[Ja++] << ka;
                ka += 8;
              }
              r.nlen = (ma & 31) + 257;
              ma >>>= 5;
              ka -= 5;
              r.ndist = (ma & 31) + 1;
              ma >>>= 5;
              ka -= 5;
              r.ncode = (ma & 15) + 4;
              ma >>>= 4;
              ka -= 4;
              if (r.nlen > 286 || r.ndist > 30) {
                g.msg = "too many length or distance symbols";
                r.mode = 30;
                break;
              }
              r.have = 0;
              r.mode = 18;
            case 18:
              while (r.have < r.ncode) {
                while (ka < 3) {
                  if (Ma === 0) {
                    break a;
                  }
                  Ma--;
                  ma += hb[Ja++] << ka;
                  ka += 8;
                }
                r.lens[jb[r.have++]] = ma & 7;
                ma >>>= 3;
                ka -= 3;
              }
              while (r.have < 19) {
                r.lens[jb[r.have++]] = 0;
              }
              r.lencode = r.lendyn;
              r.lenbits = 7;
              V = {
                bits: r.lenbits
              };
              Fc = ue(0, r.lens, 0, 19, r.lencode, 0, r.work, V);
              r.lenbits = V.bits;
              if (Fc) {
                g.msg = "invalid code lengths set";
                r.mode = 30;
                break;
              }
              r.have = 0;
              r.mode = 19;
            case 19:
              while (r.have < r.nlen + r.ndist) {
                while (Ba = r.lencode[ma & (1 << r.lenbits) - 1], I = Ba >>> 24, Nb = Ba & 65535, !(I <= ka)) {
                  if (Ma === 0) {
                    break a;
                  }
                  Ma--;
                  ma += hb[Ja++] << ka;
                  ka += 8;
                }
                if (Nb < 16) {
                  ma >>>= I;
                  ka -= I;
                  r.lens[r.have++] = Nb;
                } else {
                  if (Nb === 16) {
                    for (E = I + 2; ka < E;) {
                      if (Ma === 0) {
                        break a;
                      }
                      Ma--;
                      ma += hb[Ja++] << ka;
                      ka += 8;
                    }
                    ma >>>= I;
                    ka -= I;
                    if (r.have === 0) {
                      g.msg = "invalid bit length repeat";
                      r.mode = 30;
                      break;
                    }
                    X = r.lens[r.have - 1];
                    q = 3 + (ma & 3);
                    ma >>>= 2;
                    ka -= 2;
                  } else if (Nb === 17) {
                    for (E = I + 3; ka < E;) {
                      if (Ma === 0) {
                        break a;
                      }
                      Ma--;
                      ma += hb[Ja++] << ka;
                      ka += 8;
                    }
                    ma >>>= I;
                    ka -= I;
                    X = 0;
                    q = 3 + (ma & 7);
                    ma >>>= 3;
                    ka -= 3;
                  } else {
                    for (E = I + 7; ka < E;) {
                      if (Ma === 0) {
                        break a;
                      }
                      Ma--;
                      ma += hb[Ja++] << ka;
                      ka += 8;
                    }
                    ma >>>= I;
                    ka -= I;
                    X = 0;
                    q = 11 + (ma & 127);
                    ma >>>= 7;
                    ka -= 7;
                  }
                  if (r.have + q > r.nlen + r.ndist) {
                    g.msg = "invalid bit length repeat";
                    r.mode = 30;
                    break;
                  }
                  while (q--) {
                    r.lens[r.have++] = X;
                  }
                }
              }
              if (r.mode === 30) {
                break;
              }
              if (r.lens[256] === 0) {
                g.msg = "invalid code -- missing end-of-block";
                r.mode = 30;
                break;
              }
              r.lenbits = 9;
              V = {
                bits: r.lenbits
              };
              Fc = ue(1, r.lens, 0, r.nlen, r.lencode, 0, r.work, V);
              r.lenbits = V.bits;
              if (Fc) {
                g.msg = "invalid literal/lengths set";
                r.mode = 30;
                break;
              }
              r.distbits = 6;
              r.distcode = r.distdyn;
              V = {
                bits: r.distbits
              };
              Fc = ue(2, r.lens, r.nlen, r.ndist, r.distcode, 0, r.work, V);
              r.distbits = V.bits;
              if (Fc) {
                g.msg = "invalid distances set";
                r.mode = 30;
                break;
              }
              r.mode = 20;
              if (m === 6) {
                break a;
              }
            case 20:
              r.mode = 21;
            case 21:
              if (Ma >= 6 && Ra >= 258) {
                g.next_out = ab;
                g.avail_out = Ra;
                g.next_in = Ja;
                g.avail_in = Ma;
                r.hold = ma;
                r.bits = ka;
                ia(g, Mb);
                ab = g.next_out;
                bb = g.output;
                Ra = g.avail_out;
                Ja = g.next_in;
                hb = g.input;
                Ma = g.avail_in;
                ma = r.hold;
                ka = r.bits;
                if (r.mode === 12) {
                  r.back = -1;
                }
                break;
              }
              for (r.back = 0; Ba = r.lencode[ma & (1 << r.lenbits) - 1], I = Ba >>> 24, E = Ba >>> 16 & 255, Nb = Ba & 65535, !(I <= ka);) {
                if (Ma === 0) {
                  break a;
                }
                Ma--;
                ma += hb[Ja++] << ka;
                ka += 8;
              }
              if (E && (E & 240) === 0) {
                var ba = I;
                var ja = E;
                for (la = Nb; Ba = r.lencode[la + ((ma & (1 << ba + ja) - 1) >> ba)], I = Ba >>> 24, E = Ba >>> 16 & 255, Nb = Ba & 65535, !(ba + I <= ka);) {
                  if (Ma === 0) {
                    break a;
                  }
                  Ma--;
                  ma += hb[Ja++] << ka;
                  ka += 8;
                }
                ma >>>= ba;
                ka -= ba;
                r.back += ba;
              }
              ma >>>= I;
              ka -= I;
              r.back += I;
              r.length = Nb;
              if (E === 0) {
                r.mode = 26;
                break;
              }
              if (E & 32) {
                r.back = -1;
                r.mode = 12;
                break;
              }
              if (E & 64) {
                g.msg = "invalid literal/length code";
                r.mode = 30;
                break;
              }
              r.extra = E & 15;
              r.mode = 22;
            case 22:
              if (r.extra) {
                for (E = r.extra; ka < E;) {
                  if (Ma === 0) {
                    break a;
                  }
                  Ma--;
                  ma += hb[Ja++] << ka;
                  ka += 8;
                }
                r.length += ma & (1 << r.extra) - 1;
                ma >>>= r.extra;
                ka -= r.extra;
                r.back += r.extra;
              }
              r.was = r.length;
              r.mode = 23;
            case 23:
              while (Ba = r.distcode[ma & (1 << r.distbits) - 1], I = Ba >>> 24, E = Ba >>> 16 & 255, Nb = Ba & 65535, !(I <= ka)) {
                if (Ma === 0) {
                  break a;
                }
                Ma--;
                ma += hb[Ja++] << ka;
                ka += 8;
              }
              if ((E & 240) === 0) {
                ba = I;
                ja = E;
                for (la = Nb; Ba = r.distcode[la + ((ma & (1 << ba + ja) - 1) >> ba)], I = Ba >>> 24, E = Ba >>> 16 & 255, Nb = Ba & 65535, !(ba + I <= ka);) {
                  if (Ma === 0) {
                    break a;
                  }
                  Ma--;
                  ma += hb[Ja++] << ka;
                  ka += 8;
                }
                ma >>>= ba;
                ka -= ba;
                r.back += ba;
              }
              ma >>>= I;
              ka -= I;
              r.back += I;
              if (E & 64) {
                g.msg = "invalid distance code";
                r.mode = 30;
                break;
              }
              r.offset = Nb;
              r.extra = E & 15;
              r.mode = 24;
            case 24:
              if (r.extra) {
                for (E = r.extra; ka < E;) {
                  if (Ma === 0) {
                    break a;
                  }
                  Ma--;
                  ma += hb[Ja++] << ka;
                  ka += 8;
                }
                r.offset += ma & (1 << r.extra) - 1;
                ma >>>= r.extra;
                ka -= r.extra;
                r.back += r.extra;
              }
              if (r.offset > r.dmax) {
                g.msg = "invalid distance too far back";
                r.mode = 30;
                break;
              }
              r.mode = 25;
            case 25:
              if (Ra === 0) {
                break a;
              }
              q = Mb - Ra;
              if (r.offset > q) {
                q = r.offset - q;
                if (q > r.whave && r.sane) {
                  g.msg = "invalid distance too far back";
                  r.mode = 30;
                  break;
                }
                if (q > r.wnext) {
                  q -= r.wnext;
                  x = r.wsize - q;
                } else {
                  x = r.wnext - q;
                }
                if (q > r.length) {
                  q = r.length;
                }
                E = r.window;
              } else {
                E = bb;
                x = ab - r.offset;
                q = r.length;
              }
              if (q > Ra) {
                q = Ra;
              }
              Ra -= q;
              r.length -= q;
              do {
                bb[ab++] = E[x++];
              } while (--q);
              if (r.length === 0) {
                r.mode = 21;
              }
              break;
            case 26:
              if (Ra === 0) {
                break a;
              }
              bb[ab++] = r.length;
              Ra--;
              r.mode = 21;
              break;
            case 27:
              if (r.wrap) {
                while (ka < 32) {
                  if (Ma === 0) {
                    break a;
                  }
                  Ma--;
                  ma |= hb[Ja++] << ka;
                  ka += 8;
                }
                Mb -= Ra;
                g.total_out += Mb;
                r.total += Mb;
                if (Mb) {
                  g.adler = r.check = r.flags ? N(r.check, bb, Mb, ab - Mb) : ha(r.check, bb, Mb, ab - Mb);
                }
                Mb = Ra;
                if ((r.flags ? ma : M(ma)) !== r.check) {
                  g.msg = "incorrect data check";
                  r.mode = 30;
                  break;
                }
                ka = ma = 0;
              }
              r.mode = 28;
            case 28:
              if (r.wrap && r.flags) {
                while (ka < 32) {
                  if (Ma === 0) {
                    break a;
                  }
                  Ma--;
                  ma += hb[Ja++] << ka;
                  ka += 8;
                }
                if (ma !== (r.total & -1)) {
                  g.msg = "incorrect length check";
                  r.mode = 30;
                  break;
                }
                ka = ma = 0;
              }
              r.mode = 29;
            case 29:
              Fc = 1;
              break a;
            case 30:
              Fc = -3;
              break a;
            case 31:
              return -4;
            default:
              return pa;
          }
        }
        g.next_out = ab;
        g.avail_out = Ra;
        g.next_in = Ja;
        g.avail_in = Ma;
        r.hold = ma;
        r.bits = ka;
        if ((r.wsize || Mb !== g.avail_out && r.mode < 30 && (r.mode < 27 || m !== 4)) && p(g, g.output, g.next_out, Mb - g.avail_out)) {
          r.mode = 31;
          return -4;
        } else {
          wb -= g.avail_in;
          Mb -= g.avail_out;
          g.total_in += wb;
          g.total_out += Mb;
          r.total += Mb;
          if (r.wrap && Mb) {
            g.adler = r.check = r.flags ? N(r.check, bb, Mb, g.next_out - Mb) : ha(r.check, bb, Mb, g.next_out - Mb);
          }
          g.data_type = r.bits + (r.last ? 64 : 0) + (r.mode === 12 ? 128 : 0) + (r.mode === 20 || r.mode === 15 ? 256 : 0);
          if ((wb === 0 && Mb === 0 || m === 4) && Fc === Ic) {
            Fc = -5;
          }
          return Fc;
        }
      };
      I.inflateEnd = function (g) {
        if (!g || !g.state) {
          return pa;
        }
        var m = g.state;
        m.window &&= null;
        g.state = null;
        return Ic;
      };
      I.inflateGetHeader = function (g, m) {
        var p;
        if (g && g.state) {
          p = g.state;
          if ((p.wrap & 2) === 0) {
            return pa;
          } else {
            p.head = m;
            m.done = false;
            return Ic;
          }
        } else {
          return pa;
        }
      };
      I.inflateSetDictionary = function (g, m) {
        var q;
        var u;
        var x = m.length;
        if (g && g.state) {
          q = g.state;
          if (q.wrap !== 0 && q.mode !== 11) {
            return pa;
          } else if (q.mode === 11 && (u = 1, u = ha(u, m, x, 0), u !== q.check)) {
            return -3;
          } else if (p(g, m, x, x)) {
            q.mode = 31;
            return -4;
          } else {
            q.havedict = 1;
            return Ic;
          }
        } else {
          return pa;
        }
      };
      I.inflateInfo = "pako inflate (from Nodeca project)";
    }, {
      "../utils/common": 3,
      "./adler32": 5,
      "./crc32": 7,
      "./inffast": 10,
      "./inftrees": 12
    }],
    12: [function (x, E, I) {
      var M = x("../utils/common");
      var X = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0];
      var q = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78];
      var Ba = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0];
      var m = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
      E.exports = function (g, p, x, u, E, I, N, ia) {
        var z;
        var H;
        var ha;
        var xc;
        var ab;
        var bb;
        var gc = ia.bits;
        var la;
        var jb;
        var wa;
        var Ca;
        var gb;
        var Ua = 0;
        var Wb;
        var zd = null;
        var V = 0;
        var rb = new M.Buf16(16);
        var Ea = new M.Buf16(16);
        var jc = null;
        var r = 0;
        for (la = 0; la <= 15; la++) {
          rb[la] = 0;
        }
        for (jb = 0; jb < u; jb++) {
          rb[p[x + jb]]++;
        }
        var qd = gc;
        for (wa = 15; wa >= 1 && rb[wa] === 0; wa--);
        if (qd > wa) {
          qd = wa;
        }
        if (wa === 0) {
          E[I++] = 20971520;
          E[I++] = 20971520;
          ia.bits = 1;
          return 0;
        }
        for (gc = 1; gc < wa && rb[gc] === 0; gc++);
        if (qd < gc) {
          qd = gc;
        }
        for (la = z = 1; la <= 15; la++) {
          z <<= 1;
          z -= rb[la];
          if (z < 0) {
            return -1;
          }
        }
        if (z > 0 && (g === 0 || wa !== 1)) {
          return -1;
        }
        Ea[1] = 0;
        for (la = 1; la < 15; la++) {
          Ea[la + 1] = Ea[la] + rb[la];
        }
        for (jb = 0; jb < u; jb++) {
          if (p[x + jb] !== 0) {
            N[Ea[p[x + jb]]++] = jb;
          }
        }
        if (g === 0) {
          zd = jc = N;
          xc = 19;
        } else if (g === 1) {
          zd = X;
          V -= 257;
          jc = q;
          r -= 257;
          xc = 256;
        } else {
          zd = Ba;
          jc = m;
          xc = -1;
        }
        Wb = 0;
        jb = 0;
        la = gc;
        Ea = I;
        Ca = qd;
        gb = 0;
        ha = -1;
        Ua = 1 << qd;
        u = Ua - 1;
        if (g === 1 && Ua > 852 || g === 2 && Ua > 592) {
          return 1;
        }
        var Ve = 0;
        while (true) {
          Ve++;
          var Ra = la - gb;
          if (N[jb] < xc) {
            ab = 0;
            bb = N[jb];
          } else if (N[jb] > xc) {
            ab = jc[r + N[jb]];
            bb = zd[V + N[jb]];
          } else {
            ab = 96;
            bb = 0;
          }
          z = 1 << la - gb;
          gc = H = 1 << Ca;
          do {
            H -= z;
            E[Ea + (Wb >> gb) + H] = Ra << 24 | ab << 16 | bb | 0;
          } while (H !== 0);
          for (z = 1 << la - 1; Wb & z;) {
            z >>= 1;
          }
          if (z !== 0) {
            Wb &= z - 1;
            Wb += z;
          } else {
            Wb = 0;
          }
          jb++;
          if (--rb[la] === 0) {
            if (la === wa) {
              break;
            }
            la = p[x + N[jb]];
          }
          if (la > qd && (Wb & u) !== ha) {
            if (gb === 0) {
              gb = qd;
            }
            Ea += gc;
            Ca = la - gb;
            for (z = 1 << Ca; Ca + gb < wa && (z -= rb[Ca + gb], !(z <= 0));) {
              Ca++;
              z <<= 1;
            }
            Ua += 1 << Ca;
            if (g === 1 && Ua > 852 || g === 2 && Ua > 592) {
              return 1;
            }
            ha = Wb & u;
            E[ha] = qd << 24 | Ca << 16 | Ea - I | 0;
          }
        }
        if (Wb !== 0) {
          E[Ea + Wb] = la - gb << 24 | 4194304;
        }
        ia.bits = qd;
        return 0;
      };
    }, {
      "../utils/common": 3
    }],
    13: [function (x, E, I) {
      E.exports = {
        2: "need dictionary",
        1: "stream end",
        0: "",
        "-1": "file error",
        "-2": "stream error",
        "-3": "data error",
        "-4": "insufficient memory",
        "-5": "buffer error",
        "-6": "incompatible version"
      };
    }, {}],
    14: [function (x, E, I) {
      function M(g) {
        for (var m = g.length; --m >= 0;) {
          g[m] = 0;
        }
      }
      function X(g, m, p, q, r) {
        this.static_tree = g;
        this.extra_bits = m;
        this.extra_base = p;
        this.elems = q;
        this.max_length = r;
        this.has_stree = g && g.length;
      }
      function q(g, m) {
        this.dyn_tree = g;
        this.max_code = 0;
        this.stat_desc = m;
      }
      function Ba(g, m) {
        g.pending_buf[g.pending++] = m & 255;
        g.pending_buf[g.pending++] = m >>> 8 & 255;
      }
      function m(g, m, p) {
        if (g.bi_valid > V - p) {
          g.bi_buf |= m << g.bi_valid & 65535;
          Ba(g, g.bi_buf);
          g.bi_buf = m >> V - g.bi_valid;
          g.bi_valid += p - V;
        } else {
          g.bi_buf |= m << g.bi_valid & 65535;
          g.bi_valid += p;
        }
      }
      function g(g, p, q) {
        m(g, q[p * 2], q[p * 2 + 1]);
      }
      function p(g, m) {
        var p = 0;
        do {
          p |= g & 1;
          g >>>= 1;
          p <<= 1;
        } while (--m > 0);
        return p >>> 1;
      }
      function z(g, m, q) {
        var r;
        var v = Array(zd + 1);
        var u = 0;
        for (r = 1; r <= zd; r++) {
          v[r] = u = u + q[r - 1] << 1;
        }
        for (q = 0; q <= m; q++) {
          r = g[q * 2 + 1];
          if (r !== 0) {
            g[q * 2] = p(v[r]++, r);
          }
        }
      }
      function u(g) {
        var m;
        for (m = 0; m < Ca; m++) {
          g.dyn_ltree[m * 2] = 0;
        }
        for (m = 0; m < gb; m++) {
          g.dyn_dtree[m * 2] = 0;
        }
        for (m = 0; m < Ua; m++) {
          g.bl_tree[m * 2] = 0;
        }
        g.dyn_ltree[rb * 2] = 1;
        g.opt_len = g.static_len = 0;
        g.last_lit = g.matches = 0;
      }
      function H(g) {
        if (g.bi_valid > 8) {
          Ba(g, g.bi_buf);
        } else if (g.bi_valid > 0) {
          g.pending_buf[g.pending++] = g.bi_buf;
        }
        g.bi_buf = 0;
        g.bi_valid = 0;
      }
      function ha(g, m, p, q) {
        var r = m * 2;
        var v = p * 2;
        return g[r] < g[v] || g[r] === g[v] && q[m] <= q[p];
      }
      function N(g, m, p) {
        for (var q = g.heap[p], r = p << 1; r <= g.heap_len && (r < g.heap_len && ha(m, g.heap[r + 1], g.heap[r], g.depth) && r++, !ha(m, q, g.heap[r], g.depth));) {
          g.heap[p] = g.heap[r];
          p = r;
          r <<= 1;
        }
        g.heap[p] = q;
      }
      function ia(p, q, r) {
        var v;
        var u;
        var x = 0;
        if (p.last_lit !== 0) {
          do {
            var z = p.pending_buf[p.d_buf + x * 2] << 8 | p.pending_buf[p.d_buf + x * 2 + 1];
            var E = p.pending_buf[p.l_buf + x];
            x++;
            if (z === 0) {
              g(p, E, q);
            } else {
              v = ka[E];
              g(p, v + wa + 1, q);
              u = qd[v];
              if (u !== 0) {
                E -= wb[v];
                m(p, E, u);
              }
              z--;
              v = z < 256 ? ma[z] : ma[256 + (z >>> 7)];
              g(p, v, r);
              u = Ve[v];
              if (u !== 0) {
                z -= Mb[v];
                m(p, z, u);
              }
            }
          } while (x < p.last_lit);
        }
        g(p, rb, q);
      }
      function ue(g, m) {
        var p;
        var q = m.dyn_tree;
        var r = m.stat_desc.static_tree;
        var v = m.stat_desc.has_stree;
        var u = m.stat_desc.elems;
        var x = -1;
        g.heap_len = 0;
        g.heap_max = Wb;
        for (p = 0; p < u; p++) {
          if (q[p * 2] !== 0) {
            g.heap[++g.heap_len] = x = p;
            g.depth[p] = 0;
          } else {
            q[p * 2 + 1] = 0;
          }
        }
        while (g.heap_len < 2) {
          var E = g.heap[++g.heap_len] = x < 2 ? ++x : 0;
          q[E * 2] = 1;
          g.depth[E] = 0;
          g.opt_len--;
          if (v) {
            g.static_len -= r[E * 2 + 1];
          }
        }
        m.max_code = x;
        for (p = g.heap_len >> 1; p >= 1; p--) {
          N(g, q, p);
        }
        E = u;
        do {
          p = g.heap[1];
          g.heap[1] = g.heap[g.heap_len--];
          N(g, q, 1);
          r = g.heap[1];
          g.heap[--g.heap_max] = p;
          g.heap[--g.heap_max] = r;
          q[E * 2] = q[p * 2] + q[r * 2];
          g.depth[E] = (g.depth[p] >= g.depth[r] ? g.depth[p] : g.depth[r]) + 1;
          q[p * 2 + 1] = q[r * 2 + 1] = E;
          g.heap[1] = E++;
          N(g, q, 1);
        } while (g.heap_len >= 2);
        g.heap[--g.heap_max] = g.heap[1];
        var J;
        var H;
        p = m.dyn_tree;
        E = m.max_code;
        u = m.stat_desc.static_tree;
        var I = m.stat_desc.has_stree;
        var y = m.stat_desc.extra_bits;
        var M = m.stat_desc.extra_base;
        var V = m.stat_desc.max_length;
        var X = 0;
        for (v = 0; v <= zd; v++) {
          g.bl_count[v] = 0;
        }
        p[g.heap[g.heap_max] * 2 + 1] = 0;
        for (m = g.heap_max + 1; m < Wb; m++) {
          r = g.heap[m];
          v = p[p[r * 2 + 1] * 2 + 1] + 1;
          if (v > V) {
            v = V;
            X++;
          }
          p[r * 2 + 1] = v;
          if (!(r > E)) {
            g.bl_count[v]++;
            J = 0;
            if (r >= M) {
              J = y[r - M];
            }
            H = p[r * 2];
            g.opt_len += H * (v + J);
            if (I) {
              g.static_len += H * (u[r * 2 + 1] + J);
            }
          }
        }
        if (X !== 0) {
          do {
            for (v = V - 1; g.bl_count[v] === 0;) {
              v--;
            }
            g.bl_count[v]--;
            g.bl_count[v + 1] += 2;
            g.bl_count[V]--;
            X -= 2;
          } while (X > 0);
          for (v = V; v !== 0; v--) {
            for (r = g.bl_count[v]; r !== 0;) {
              J = g.heap[--m];
              if (!(J > E)) {
                if (p[J * 2 + 1] !== v) {
                  g.opt_len += (v - p[J * 2 + 1]) * p[J * 2];
                  p[J * 2 + 1] = v;
                }
                r--;
              }
            }
          }
        }
        z(q, x, g.bl_count);
      }
      function Ic(g, m, p) {
        var q;
        var v = -1;
        var u = m[1];
        var x = 0;
        var z = 7;
        var E = 4;
        if (u === 0) {
          z = 138;
          E = 3;
        }
        m[(p + 1) * 2 + 1] = 65535;
        for (q = 0; q <= p; q++) {
          var J = u;
          u = m[(q + 1) * 2 + 1];
          if (!(++x < z) || J !== u) {
            if (x < E) {
              g.bl_tree[J * 2] += x;
            } else if (J !== 0) {
              if (J !== v) {
                g.bl_tree[J * 2]++;
              }
              g.bl_tree[Ea * 2]++;
            } else if (x <= 10) {
              g.bl_tree[jc * 2]++;
            } else {
              g.bl_tree[r * 2]++;
            }
            x = 0;
            v = J;
            if (u === 0) {
              z = 138;
              E = 3;
            } else if (J === u) {
              z = 6;
              E = 3;
            } else {
              z = 7;
              E = 4;
            }
          }
        }
      }
      function pa(p, q, u) {
        var v;
        var x;
        var z = -1;
        var E = q[1];
        var J = 0;
        var H = 7;
        var I = 4;
        if (E === 0) {
          H = 138;
          I = 3;
        }
        for (v = 0; v <= u; v++) {
          x = E;
          E = q[(v + 1) * 2 + 1];
          if (!(++J < H) || x !== E) {
            if (J < I) {
              do {
                g(p, x, p.bl_tree);
              } while (--J !== 0);
            } else if (x !== 0) {
              if (x !== z) {
                g(p, x, p.bl_tree);
                J--;
              }
              g(p, Ea, p.bl_tree);
              m(p, J - 3, 2);
            } else if (J <= 10) {
              g(p, jc, p.bl_tree);
              m(p, J - 3, 3);
            } else {
              g(p, r, p.bl_tree);
              m(p, J - 11, 7);
            }
            J = 0;
            z = x;
            if (E === 0) {
              H = 138;
              I = 3;
            } else if (x === E) {
              H = 6;
              I = 3;
            } else {
              H = 7;
              I = 4;
            }
          }
        }
      }
      function xc(g) {
        var m;
        var p = 4093624447;
        for (m = 0; m <= 31; m++, p >>>= 1) {
          if (p & 1 && g.dyn_ltree[m * 2] !== 0) {
            return gc;
          }
        }
        if (g.dyn_ltree[18] !== 0 || g.dyn_ltree[20] !== 0 || g.dyn_ltree[26] !== 0) {
          return la;
        }
        for (m = 32; m < wa; m++) {
          if (g.dyn_ltree[m * 2] !== 0) {
            return la;
          }
        }
        return gc;
      }
      function ab(g, p, q, r) {
        m(g, (jb << 1) + (r ? 1 : 0), 3);
        H(g);
        Ba(g, q);
        Ba(g, ~q);
        bb.arraySet(g.pending_buf, g.window, p, q, g.pending);
        g.pending += q;
      }
      var bb = x("../utils/common");
      var gc = 0;
      var la = 1;
      var jb = 0;
      var wa = 256;
      var Ca = wa + 1 + 29;
      var gb = 30;
      var Ua = 19;
      var Wb = Ca * 2 + 1;
      var zd = 15;
      var V = 16;
      var rb = 256;
      var Ea = 16;
      var jc = 17;
      var r = 18;
      var qd = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0];
      var Ve = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];
      var Ra = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7];
      var Ja = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
      var hb = Array((Ca + 2) * 2);
      M(hb);
      var Ma = Array(gb * 2);
      M(Ma);
      var ma = Array(512);
      M(ma);
      var ka = Array(256);
      M(ka);
      var wb = Array(29);
      M(wb);
      var Mb = Array(gb);
      M(Mb);
      var Fc;
      var Nb;
      var ba;
      var ja = false;
      I._tr_init = function (g) {
        if (!ja) {
          var m;
          var r;
          var v;
          var x = Array(zd + 1);
          for (v = r = 0; v < 28; v++) {
            wb[v] = r;
            m = 0;
            for (; m < 1 << qd[v]; m++) {
              ka[r++] = v;
            }
          }
          ka[r - 1] = v;
          for (v = r = 0; v < 16; v++) {
            Mb[v] = r;
            m = 0;
            for (; m < 1 << Ve[v]; m++) {
              ma[r++] = v;
            }
          }
          for (r >>= 7; v < gb; v++) {
            Mb[v] = r << 7;
            m = 0;
            for (; m < 1 << Ve[v] - 7; m++) {
              ma[256 + r++] = v;
            }
          }
          for (m = 0; m <= zd; m++) {
            x[m] = 0;
          }
          for (m = 0; m <= 143;) {
            hb[m * 2 + 1] = 8;
            m++;
            x[8]++;
          }
          while (m <= 255) {
            hb[m * 2 + 1] = 9;
            m++;
            x[9]++;
          }
          while (m <= 279) {
            hb[m * 2 + 1] = 7;
            m++;
            x[7]++;
          }
          while (m <= 287) {
            hb[m * 2 + 1] = 8;
            m++;
            x[8]++;
          }
          z(hb, Ca + 1, x);
          for (m = 0; m < gb; m++) {
            Ma[m * 2 + 1] = 5;
            Ma[m * 2] = p(m, 5);
          }
          Fc = new X(hb, qd, wa + 1, Ca, zd);
          Nb = new X(Ma, Ve, 0, gb, zd);
          ba = new X([], Ra, 0, Ua, 7);
          ja = true;
        }
        g.l_desc = new q(g.dyn_ltree, Fc);
        g.d_desc = new q(g.dyn_dtree, Nb);
        g.bl_desc = new q(g.bl_tree, ba);
        g.bi_buf = 0;
        g.bi_valid = 0;
        u(g);
      };
      I._tr_stored_block = ab;
      I._tr_flush_block = function (g, p, q, r) {
        var v = 0;
        if (g.level > 0) {
          if (g.strm.data_type === 2) {
            g.strm.data_type = xc(g);
          }
          ue(g, g.l_desc);
          ue(g, g.d_desc);
          Ic(g, g.dyn_ltree, g.l_desc.max_code);
          Ic(g, g.dyn_dtree, g.d_desc.max_code);
          ue(g, g.bl_desc);
          for (v = Ua - 1; v >= 3 && g.bl_tree[Ja[v] * 2 + 1] === 0; v--);
          g.opt_len += (v + 1) * 3 + 14;
          v = v;
          var w = g.opt_len + 3 + 7 >>> 3;
          var x = g.static_len + 3 + 7 >>> 3;
          if (x <= w) {
            w = x;
          }
        } else {
          w = x = q + 5;
        }
        if (q + 4 <= w && p !== -1) {
          ab(g, p, q, r);
        } else if (g.strategy === 4 || x === w) {
          m(g, 2 + (r ? 1 : 0), 3);
          ia(g, hb, Ma);
        } else {
          m(g, 4 + (r ? 1 : 0), 3);
          p = g.l_desc.max_code + 1;
          q = g.d_desc.max_code + 1;
          v += 1;
          m(g, p - 257, 5);
          m(g, q - 1, 5);
          m(g, v - 4, 4);
          for (w = 0; w < v; w++) {
            m(g, g.bl_tree[Ja[w] * 2 + 1], 3);
          }
          pa(g, g.dyn_ltree, p - 1);
          pa(g, g.dyn_dtree, q - 1);
          ia(g, g.dyn_ltree, g.dyn_dtree);
        }
        u(g);
        if (r) {
          H(g);
        }
      };
      I._tr_tally = function (g, m, p) {
        g.pending_buf[g.d_buf + g.last_lit * 2] = m >>> 8 & 255;
        g.pending_buf[g.d_buf + g.last_lit * 2 + 1] = m & 255;
        g.pending_buf[g.l_buf + g.last_lit] = p & 255;
        g.last_lit++;
        if (m === 0) {
          g.dyn_ltree[p * 2]++;
        } else {
          g.matches++;
          m--;
          g.dyn_ltree[(ka[p] + wa + 1) * 2]++;
          g.dyn_dtree[(m < 256 ? ma[m] : ma[256 + (m >>> 7)]) * 2]++;
        }
        return g.last_lit === g.lit_bufsize - 1;
      };
      I._tr_align = function (p) {
        m(p, 2, 3);
        g(p, rb, hb);
        if (p.bi_valid === 16) {
          Ba(p, p.bi_buf);
          p.bi_buf = 0;
          p.bi_valid = 0;
        } else if (p.bi_valid >= 8) {
          p.pending_buf[p.pending++] = p.bi_buf & 255;
          p.bi_buf >>= 8;
          p.bi_valid -= 8;
        }
      };
    }, {
      "../utils/common": 3
    }],
    15: [function (x, E, I) {
      E.exports = function () {
        this.input = null;
        this.total_in = this.avail_in = this.next_in = 0;
        this.output = null;
        this.total_out = this.avail_out = this.next_out = 0;
        this.msg = "";
        this.state = null;
        this.data_type = 2;
        this.adler = 0;
      };
    }, {}],
    "/": [function (x, E, I) {
      I = x("./lib/utils/common").assign;
      var M = x("./lib/deflate");
      var X = x("./lib/inflate");
      x = x("./lib/zlib/constants");
      var q = {};
      I(q, M, X, x);
      E.exports = q;
    }, {
      "./lib/deflate": 1,
      "./lib/inflate": 2,
      "./lib/utils/common": 3,
      "./lib/zlib/constants": 6
    }]
  }, {}, [])("/");
});
var saveAs = saveAs || function (na) {
  if (typeof na !== "undefined" && (typeof navigator === "undefined" || !/MSIE [1-9]\./.test(navigator.userAgent))) {
    var x = na.document.createElementNS("http://www.w3.org/1999/xhtml", "a");
    var E = "download" in x;
    var I = /constructor/i.test(na.HTMLElement) || na.safari;
    var M = /CriOS\/[\d]+/.test(navigator.userAgent);
    function X(g) {
      (na.setImmediate || na.setTimeout)(function () {
        throw g;
      }, 0);
    }
    function q(g) {
      setTimeout(function () {
        if (typeof g === "string") {
          (na.URL || na.webkitURL || na).revokeObjectURL(g);
        } else {
          g.remove();
        }
      }, 40000);
    }
    function Ba(g) {
      if (/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)) {
        return new Blob([String.fromCharCode(65279), g], {
          type: g.type
        });
      } else {
        return g;
      }
    }
    function m(g, m, u) {
      if (!u) {
        g = Ba(g);
      }
      var p = this;
      var z = g.type === "application/octet-stream";
      function N() {
        var g = ["writestart", "progress", "write", "writeend"];
        g = [].concat(g);
        for (var m = g.length; m--;) {
          var q = p["on" + g[m]];
          if (typeof q === "function") {
            try {
              q.call(p, p);
            } catch (xc) {
              X(xc);
            }
          }
        }
      }
      p.readyState = p.INIT;
      if (E) {
        var ia = (na.URL || na.webkitURL || na).createObjectURL(g);
        setTimeout(function () {
          x.href = ia;
          x.download = m;
          var g = new MouseEvent("click");
          x.dispatchEvent(g);
          N();
          q(ia);
          p.readyState = p.DONE;
        });
      } else {
        (function () {
          if ((M || z && I) && na.FileReader) {
            var m = new FileReader();
            m.onloadend = function () {
              var g = M ? m.result : m.result.replace(/^data:[^;]*;/, "data:attachment/file;");
              if (!na.open(g, "_blank")) {
                na.location.href = g;
              }
              p.readyState = p.DONE;
              N();
            };
            m.readAsDataURL(g);
            p.readyState = p.INIT;
          } else {
            ia ||= (na.URL || na.webkitURL || na).createObjectURL(g);
            if (z) {
              na.location.href = ia;
            } else if (!na.open(ia, "_blank")) {
              na.location.href = ia;
            }
            p.readyState = p.DONE;
            N();
            q(ia);
          }
        })();
      }
    }
    var g = m.prototype;
    if (typeof navigator !== "undefined" && navigator.msSaveOrOpenBlob) {
      return function (g, m, q) {
        m = m || g.name || "download";
        if (!q) {
          g = Ba(g);
        }
        return navigator.msSaveOrOpenBlob(g, m);
      };
    }
    g.abort = function () {};
    g.readyState = g.INIT = 0;
    g.WRITING = 1;
    g.DONE = 2;
    g.error = g.onwritestart = g.onprogress = g.onwrite = g.onabort = g.onerror = g.onwriteend = null;
    return function (g, q, u) {
      return new m(g, q || g.name || "download", u);
    };
  }
}(typeof self !== "undefined" && self || typeof window !== "undefined" && window || this.content);
if (typeof module !== "undefined" && module.exports) {
  module.exports.saveAs = saveAs;
} else if (typeof define !== "undefined" && define !== null && define.amd !== null) {
  define("FileSaver.js", function () {
    return saveAs;
  });
}
if (typeof define == "function" && define.__amd) {
  define.amd = define.__amd;
  delete define.__amd;
}